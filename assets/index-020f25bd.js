var RG=Object.defineProperty;var FG=(n,e,t)=>e in n?RG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var un=(n,e,t)=>(FG(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function El(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function UG(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var eN={exports:{}},ax={},tN={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=Symbol.for("react.element"),LG=Symbol.for("react.portal"),PG=Symbol.for("react.fragment"),DG=Symbol.for("react.strict_mode"),OG=Symbol.for("react.profiler"),NG=Symbol.for("react.provider"),kG=Symbol.for("react.context"),QG=Symbol.for("react.forward_ref"),HG=Symbol.for("react.suspense"),zG=Symbol.for("react.memo"),GG=Symbol.for("react.lazy"),L2=Symbol.iterator;function VG(n){return n===null||typeof n!="object"?null:(n=L2&&n[L2]||n["@@iterator"],typeof n=="function"?n:null)}var nN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rN=Object.assign,iN={};function jh(n,e,t){this.props=n,this.context=e,this.refs=iN,this.updater=t||nN}jh.prototype.isReactComponent={};jh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};jh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function sN(){}sN.prototype=jh.prototype;function CM(n,e,t){this.props=n,this.context=e,this.refs=iN,this.updater=t||nN}var MM=CM.prototype=new sN;MM.constructor=CM;rN(MM,jh.prototype);MM.isPureReactComponent=!0;var P2=Array.isArray,oN=Object.prototype.hasOwnProperty,SM={current:null},aN={key:!0,ref:!0,__self:!0,__source:!0};function lN(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oN.call(e,r)&&!aN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),A=0;A<a;A++)l[A]=arguments[A+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ig,type:n,key:s,ref:o,props:i,_owner:SM.current}}function jG(n,e){return{$$typeof:ig,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function TM(n){return typeof n=="object"&&n!==null&&n.$$typeof===ig}function WG(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var D2=/\/+/g;function F_(n,e){return typeof n=="object"&&n!==null&&n.key!=null?WG(""+n.key):e.toString(36)}function Ov(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ig:case LG:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+F_(o,0):r,P2(i)?(t="",n!=null&&(t=n.replace(D2,"$&/")+"/"),Ov(i,e,t,"",function(A){return A})):i!=null&&(TM(i)&&(i=jG(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(D2,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",P2(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+F_(s,a);o+=Ov(s,e,t,l,i)}else if(l=VG(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+F_(s,a++),o+=Ov(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ng(n,e,t){if(n==null)return n;var r=[],i=0;return Ov(n,r,"","",function(s){return e.call(t,s,i++)}),r}function KG(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var mi={current:null},Nv={transition:null},YG={ReactCurrentDispatcher:mi,ReactCurrentBatchConfig:Nv,ReactCurrentOwner:SM};Rt.Children={map:Ng,forEach:function(n,e,t){Ng(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ng(n,function(){e++}),e},toArray:function(n){return Ng(n,function(e){return e})||[]},only:function(n){if(!TM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Rt.Component=jh;Rt.Fragment=PG;Rt.Profiler=OG;Rt.PureComponent=CM;Rt.StrictMode=DG;Rt.Suspense=HG;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YG;Rt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=rN({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=SM.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)oN.call(e,l)&&!aN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var A=0;A<l;A++)a[A]=arguments[A+2];r.children=a}return{$$typeof:ig,type:n.type,key:i,ref:s,props:r,_owner:o}};Rt.createContext=function(n){return n={$$typeof:kG,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NG,_context:n},n.Consumer=n};Rt.createElement=lN;Rt.createFactory=function(n){var e=lN.bind(null,n);return e.type=n,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(n){return{$$typeof:QG,render:n}};Rt.isValidElement=TM;Rt.lazy=function(n){return{$$typeof:GG,_payload:{_status:-1,_result:n},_init:KG}};Rt.memo=function(n,e){return{$$typeof:zG,type:n,compare:e===void 0?null:e}};Rt.startTransition=function(n){var e=Nv.transition;Nv.transition={};try{n()}finally{Nv.transition=e}};Rt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rt.useCallback=function(n,e){return mi.current.useCallback(n,e)};Rt.useContext=function(n){return mi.current.useContext(n)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(n){return mi.current.useDeferredValue(n)};Rt.useEffect=function(n,e){return mi.current.useEffect(n,e)};Rt.useId=function(){return mi.current.useId()};Rt.useImperativeHandle=function(n,e,t){return mi.current.useImperativeHandle(n,e,t)};Rt.useInsertionEffect=function(n,e){return mi.current.useInsertionEffect(n,e)};Rt.useLayoutEffect=function(n,e){return mi.current.useLayoutEffect(n,e)};Rt.useMemo=function(n,e){return mi.current.useMemo(n,e)};Rt.useReducer=function(n,e,t){return mi.current.useReducer(n,e,t)};Rt.useRef=function(n){return mi.current.useRef(n)};Rt.useState=function(n){return mi.current.useState(n)};Rt.useSyncExternalStore=function(n,e,t){return mi.current.useSyncExternalStore(n,e,t)};Rt.useTransition=function(){return mi.current.useTransition()};Rt.version="18.2.0";tN.exports=Rt;var ye=tN.exports;const $=El(ye);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $G=ye,XG=Symbol.for("react.element"),ZG=Symbol.for("react.fragment"),JG=Object.prototype.hasOwnProperty,qG=$G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eV={key:!0,ref:!0,__self:!0,__source:!0};function AN(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JG.call(e,r)&&!eV.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XG,type:n,key:s,ref:o,props:i,_owner:qG.current}}ax.Fragment=ZG;ax.jsx=AN;ax.jsxs=AN;eN.exports=ax;var N=eN.exports,IM={exports:{}};const tV={},nV=Object.freeze(Object.defineProperty({__proto__:null,default:tV},Symbol.toStringTag,{value:"Module"})),rV=UG(nV);IM.exports;(function(n){(function(e,t){function r(I,v){if(!I)throw new Error(v||"Assertion failed")}function i(I,v){I.super_=v;var E=function(){};E.prototype=v.prototype,I.prototype=new E,I.prototype.constructor=I}function s(I,v,E){if(s.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((v==="le"||v==="be")&&(E=v,v=10),this._init(I||0,v||10,E||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=rV.Buffer}catch{}s.isBN=function(v){return v instanceof s?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===s.wordSize&&Array.isArray(v.words)},s.max=function(v,E){return v.cmp(E)>0?v:E},s.min=function(v,E){return v.cmp(E)<0?v:E},s.prototype._init=function(v,E,F){if(typeof v=="number")return this._initNumber(v,E,F);if(typeof v=="object")return this._initArray(v,E,F);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),v=v.toString().replace(/\s+/g,"");var D=0;v[0]==="-"&&(D++,this.negative=1),D<v.length&&(E===16?this._parseHex(v,D,F):(this._parseBase(v,E,D),F==="le"&&this._initArray(this.toArray(),E,F)))},s.prototype._initNumber=function(v,E,F){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),F==="le"&&this._initArray(this.toArray(),E,F)},s.prototype._initArray=function(v,E,F){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var O,z,K=0;if(F==="be")for(D=v.length-1,O=0;D>=0;D-=3)z=v[D]|v[D-1]<<8|v[D-2]<<16,this.words[O]|=z<<K&67108863,this.words[O+1]=z>>>26-K&67108863,K+=24,K>=26&&(K-=26,O++);else if(F==="le")for(D=0,O=0;D<v.length;D+=3)z=v[D]|v[D+1]<<8|v[D+2]<<16,this.words[O]|=z<<K&67108863,this.words[O+1]=z>>>26-K&67108863,K+=24,K>=26&&(K-=26,O++);return this._strip()};function a(I,v){var E=I.charCodeAt(v);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+I)}function l(I,v,E){var F=a(I,E);return E-1>=v&&(F|=a(I,E-1)<<4),F}s.prototype._parseHex=function(v,E,F){this.length=Math.ceil((v.length-E)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var O=0,z=0,K;if(F==="be")for(D=v.length-1;D>=E;D-=2)K=l(v,E,D)<<O,this.words[z]|=K&67108863,O>=18?(O-=18,z+=1,this.words[z]|=K>>>26):O+=8;else{var Q=v.length-E;for(D=Q%2===0?E+1:E;D<v.length;D+=2)K=l(v,E,D)<<O,this.words[z]|=K&67108863,O>=18?(O-=18,z+=1,this.words[z]|=K>>>26):O+=8}this._strip()};function A(I,v,E,F){for(var D=0,O=0,z=Math.min(I.length,E),K=v;K<z;K++){var Q=I.charCodeAt(K)-48;D*=F,Q>=49?O=Q-49+10:Q>=17?O=Q-17+10:O=Q,r(Q>=0&&O<F,"Invalid character"),D+=O}return D}s.prototype._parseBase=function(v,E,F){this.words=[0],this.length=1;for(var D=0,O=1;O<=67108863;O*=E)D++;D--,O=O/E|0;for(var z=v.length-F,K=z%D,Q=Math.min(z,z-K)+F,B=0,j=F;j<Q;j+=D)B=A(v,j,j+D,E),this.imuln(O),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(K!==0){var ee=1;for(B=A(v,j,v.length,E),j=0;j<K;j++)ee*=E;this.imuln(ee),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this._strip()},s.prototype.copy=function(v){v.words=new Array(this.length);for(var E=0;E<this.length;E++)v.words[E]=this.words[E];v.length=this.length,v.negative=this.negative,v.red=this.red};function c(I,v){I.words=v.words,I.length=v.length,I.negative=v.negative,I.red=v.red}if(s.prototype._move=function(v){c(v,this)},s.prototype.clone=function(){var v=new s(null);return this.copy(v),v},s.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(v,E){v=v||10,E=E|0||1;var F;if(v===16||v==="hex"){F="";for(var D=0,O=0,z=0;z<this.length;z++){var K=this.words[z],Q=((K<<D|O)&16777215).toString(16);O=K>>>24-D&16777215,D+=2,D>=26&&(D-=26,z--),O!==0||z!==this.length-1?F=f[6-Q.length]+Q+F:F=Q+F}for(O!==0&&(F=O.toString(16)+F);F.length%E!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}if(v===(v|0)&&v>=2&&v<=36){var B=h[v],j=p[v];F="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var U=ee.modrn(j).toString(v);ee=ee.idivn(j),ee.isZero()?F=U+F:F=f[B-U.length]+U+F}for(this.isZero()&&(F="0"+F);F.length%E!==0;)F="0"+F;return this.negative!==0&&(F="-"+F),F}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(v,E){return this.toArrayLike(o,v,E)}),s.prototype.toArray=function(v,E){return this.toArrayLike(Array,v,E)};var d=function(v,E){return v.allocUnsafe?v.allocUnsafe(E):new v(E)};s.prototype.toArrayLike=function(v,E,F){this._strip();var D=this.byteLength(),O=F||Math.max(1,D);r(D<=O,"byte array longer than desired length"),r(O>0,"Requested array length <= 0");var z=d(v,O),K=E==="le"?"LE":"BE";return this["_toArrayLike"+K](z,D),z},s.prototype._toArrayLikeLE=function(v,E){for(var F=0,D=0,O=0,z=0;O<this.length;O++){var K=this.words[O]<<z|D;v[F++]=K&255,F<v.length&&(v[F++]=K>>8&255),F<v.length&&(v[F++]=K>>16&255),z===6?(F<v.length&&(v[F++]=K>>24&255),D=0,z=0):(D=K>>>24,z+=2)}if(F<v.length)for(v[F++]=D;F<v.length;)v[F++]=0},s.prototype._toArrayLikeBE=function(v,E){for(var F=v.length-1,D=0,O=0,z=0;O<this.length;O++){var K=this.words[O]<<z|D;v[F--]=K&255,F>=0&&(v[F--]=K>>8&255),F>=0&&(v[F--]=K>>16&255),z===6?(F>=0&&(v[F--]=K>>24&255),D=0,z=0):(D=K>>>24,z+=2)}if(F>=0)for(v[F--]=D;F>=0;)v[F--]=0},Math.clz32?s.prototype._countBits=function(v){return 32-Math.clz32(v)}:s.prototype._countBits=function(v){var E=v,F=0;return E>=4096&&(F+=13,E>>>=13),E>=64&&(F+=7,E>>>=7),E>=8&&(F+=4,E>>>=4),E>=2&&(F+=2,E>>>=2),F+E},s.prototype._zeroBits=function(v){if(v===0)return 26;var E=v,F=0;return E&8191||(F+=13,E>>>=13),E&127||(F+=7,E>>>=7),E&15||(F+=4,E>>>=4),E&3||(F+=2,E>>>=2),E&1||F++,F},s.prototype.bitLength=function(){var v=this.words[this.length-1],E=this._countBits(v);return(this.length-1)*26+E};function g(I){for(var v=new Array(I.bitLength()),E=0;E<v.length;E++){var F=E/26|0,D=E%26;v[E]=I.words[F]>>>D&1}return v}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,E=0;E<this.length;E++){var F=this._zeroBits(this.words[E]);if(v+=F,F!==26)break}return v},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},s.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var E=0;E<v.length;E++)this.words[E]=this.words[E]|v.words[E];return this._strip()},s.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},s.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},s.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},s.prototype.iuand=function(v){var E;this.length>v.length?E=v:E=this;for(var F=0;F<E.length;F++)this.words[F]=this.words[F]&v.words[F];return this.length=E.length,this._strip()},s.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},s.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},s.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},s.prototype.iuxor=function(v){var E,F;this.length>v.length?(E=this,F=v):(E=v,F=this);for(var D=0;D<F.length;D++)this.words[D]=E.words[D]^F.words[D];if(this!==E)for(;D<E.length;D++)this.words[D]=E.words[D];return this.length=E.length,this._strip()},s.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},s.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},s.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},s.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var E=Math.ceil(v/26)|0,F=v%26;this._expand(E),F>0&&E--;for(var D=0;D<E;D++)this.words[D]=~this.words[D]&67108863;return F>0&&(this.words[D]=~this.words[D]&67108863>>26-F),this._strip()},s.prototype.notn=function(v){return this.clone().inotn(v)},s.prototype.setn=function(v,E){r(typeof v=="number"&&v>=0);var F=v/26|0,D=v%26;return this._expand(F+1),E?this.words[F]=this.words[F]|1<<D:this.words[F]=this.words[F]&~(1<<D),this._strip()},s.prototype.iadd=function(v){var E;if(this.negative!==0&&v.negative===0)return this.negative=0,E=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,E=this.isub(v),v.negative=1,E._normSign();var F,D;this.length>v.length?(F=this,D=v):(F=v,D=this);for(var O=0,z=0;z<D.length;z++)E=(F.words[z]|0)+(D.words[z]|0)+O,this.words[z]=E&67108863,O=E>>>26;for(;O!==0&&z<F.length;z++)E=(F.words[z]|0)+O,this.words[z]=E&67108863,O=E>>>26;if(this.length=F.length,O!==0)this.words[this.length]=O,this.length++;else if(F!==this)for(;z<F.length;z++)this.words[z]=F.words[z];return this},s.prototype.add=function(v){var E;return v.negative!==0&&this.negative===0?(v.negative=0,E=this.sub(v),v.negative^=1,E):v.negative===0&&this.negative!==0?(this.negative=0,E=v.sub(this),this.negative=1,E):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},s.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var E=this.iadd(v);return v.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var F=this.cmp(v);if(F===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,O;F>0?(D=this,O=v):(D=v,O=this);for(var z=0,K=0;K<O.length;K++)E=(D.words[K]|0)-(O.words[K]|0)+z,z=E>>26,this.words[K]=E&67108863;for(;z!==0&&K<D.length;K++)E=(D.words[K]|0)+z,z=E>>26,this.words[K]=E&67108863;if(z===0&&K<D.length&&D!==this)for(;K<D.length;K++)this.words[K]=D.words[K];return this.length=Math.max(this.length,K),D!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(v){return this.clone().isub(v)};function m(I,v,E){E.negative=v.negative^I.negative;var F=I.length+v.length|0;E.length=F,F=F-1|0;var D=I.words[0]|0,O=v.words[0]|0,z=D*O,K=z&67108863,Q=z/67108864|0;E.words[0]=K;for(var B=1;B<F;B++){for(var j=Q>>>26,ee=Q&67108863,U=Math.min(B,v.length-1),X=Math.max(0,B-I.length+1);X<=U;X++){var ae=B-X|0;D=I.words[ae]|0,O=v.words[X]|0,z=D*O+ee,j+=z/67108864|0,ee=z&67108863}E.words[B]=ee|0,Q=j|0}return Q!==0?E.words[B]=Q|0:E.length--,E._strip()}var y=function(v,E,F){var D=v.words,O=E.words,z=F.words,K=0,Q,B,j,ee=D[0]|0,U=ee&8191,X=ee>>>13,ae=D[1]|0,se=ae&8191,de=ae>>>13,oe=D[2]|0,pe=oe&8191,_e=oe>>>13,xe=D[3]|0,L=xe&8191,ue=xe>>>13,Ae=D[4]|0,q=Ae&8191,J=Ae>>>13,ce=D[5]|0,be=ce&8191,Be=ce>>>13,k=D[6]|0,W=k&8191,re=k>>>13,he=D[7]|0,me=he&8191,G=he>>>13,R=D[8]|0,S=R&8191,V=R>>>13,te=D[9]|0,le=te&8191,ie=te>>>13,Ie=O[0]|0,Te=Ie&8191,Le=Ie>>>13,He=O[1]|0,De=He&8191,fe=He>>>13,Me=O[2]|0,Se=Me&8191,Fe=Me>>>13,Ve=O[3]|0,Je=Ve&8191,ft=Ve>>>13,on=O[4]|0,Ct=on&8191,it=on>>>13,lr=O[5]|0,yt=lr&8191,Vt=lr>>>13,Js=O[6]|0,Xt=Js&8191,Zt=Js>>>13,ne=O[7]|0,ve=ne&8191,Ee=ne>>>13,we=O[8]|0,Ce=we&8191,ze=we>>>13,st=O[9]|0,$e=st&8191,Xe=st>>>13;F.negative=v.negative^E.negative,F.length=19,Q=Math.imul(U,Te),B=Math.imul(U,Le),B=B+Math.imul(X,Te)|0,j=Math.imul(X,Le);var gt=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(gt>>>26)|0,gt&=67108863,Q=Math.imul(se,Te),B=Math.imul(se,Le),B=B+Math.imul(de,Te)|0,j=Math.imul(de,Le),Q=Q+Math.imul(U,De)|0,B=B+Math.imul(U,fe)|0,B=B+Math.imul(X,De)|0,j=j+Math.imul(X,fe)|0;var dt=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(dt>>>26)|0,dt&=67108863,Q=Math.imul(pe,Te),B=Math.imul(pe,Le),B=B+Math.imul(_e,Te)|0,j=Math.imul(_e,Le),Q=Q+Math.imul(se,De)|0,B=B+Math.imul(se,fe)|0,B=B+Math.imul(de,De)|0,j=j+Math.imul(de,fe)|0,Q=Q+Math.imul(U,Se)|0,B=B+Math.imul(U,Fe)|0,B=B+Math.imul(X,Se)|0,j=j+Math.imul(X,Fe)|0;var ct=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(ct>>>26)|0,ct&=67108863,Q=Math.imul(L,Te),B=Math.imul(L,Le),B=B+Math.imul(ue,Te)|0,j=Math.imul(ue,Le),Q=Q+Math.imul(pe,De)|0,B=B+Math.imul(pe,fe)|0,B=B+Math.imul(_e,De)|0,j=j+Math.imul(_e,fe)|0,Q=Q+Math.imul(se,Se)|0,B=B+Math.imul(se,Fe)|0,B=B+Math.imul(de,Se)|0,j=j+Math.imul(de,Fe)|0,Q=Q+Math.imul(U,Je)|0,B=B+Math.imul(U,ft)|0,B=B+Math.imul(X,Je)|0,j=j+Math.imul(X,ft)|0;var jt=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(jt>>>26)|0,jt&=67108863,Q=Math.imul(q,Te),B=Math.imul(q,Le),B=B+Math.imul(J,Te)|0,j=Math.imul(J,Le),Q=Q+Math.imul(L,De)|0,B=B+Math.imul(L,fe)|0,B=B+Math.imul(ue,De)|0,j=j+Math.imul(ue,fe)|0,Q=Q+Math.imul(pe,Se)|0,B=B+Math.imul(pe,Fe)|0,B=B+Math.imul(_e,Se)|0,j=j+Math.imul(_e,Fe)|0,Q=Q+Math.imul(se,Je)|0,B=B+Math.imul(se,ft)|0,B=B+Math.imul(de,Je)|0,j=j+Math.imul(de,ft)|0,Q=Q+Math.imul(U,Ct)|0,B=B+Math.imul(U,it)|0,B=B+Math.imul(X,Ct)|0,j=j+Math.imul(X,it)|0;var vn=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(vn>>>26)|0,vn&=67108863,Q=Math.imul(be,Te),B=Math.imul(be,Le),B=B+Math.imul(Be,Te)|0,j=Math.imul(Be,Le),Q=Q+Math.imul(q,De)|0,B=B+Math.imul(q,fe)|0,B=B+Math.imul(J,De)|0,j=j+Math.imul(J,fe)|0,Q=Q+Math.imul(L,Se)|0,B=B+Math.imul(L,Fe)|0,B=B+Math.imul(ue,Se)|0,j=j+Math.imul(ue,Fe)|0,Q=Q+Math.imul(pe,Je)|0,B=B+Math.imul(pe,ft)|0,B=B+Math.imul(_e,Je)|0,j=j+Math.imul(_e,ft)|0,Q=Q+Math.imul(se,Ct)|0,B=B+Math.imul(se,it)|0,B=B+Math.imul(de,Ct)|0,j=j+Math.imul(de,it)|0,Q=Q+Math.imul(U,yt)|0,B=B+Math.imul(U,Vt)|0,B=B+Math.imul(X,yt)|0,j=j+Math.imul(X,Vt)|0;var Hr=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,Q=Math.imul(W,Te),B=Math.imul(W,Le),B=B+Math.imul(re,Te)|0,j=Math.imul(re,Le),Q=Q+Math.imul(be,De)|0,B=B+Math.imul(be,fe)|0,B=B+Math.imul(Be,De)|0,j=j+Math.imul(Be,fe)|0,Q=Q+Math.imul(q,Se)|0,B=B+Math.imul(q,Fe)|0,B=B+Math.imul(J,Se)|0,j=j+Math.imul(J,Fe)|0,Q=Q+Math.imul(L,Je)|0,B=B+Math.imul(L,ft)|0,B=B+Math.imul(ue,Je)|0,j=j+Math.imul(ue,ft)|0,Q=Q+Math.imul(pe,Ct)|0,B=B+Math.imul(pe,it)|0,B=B+Math.imul(_e,Ct)|0,j=j+Math.imul(_e,it)|0,Q=Q+Math.imul(se,yt)|0,B=B+Math.imul(se,Vt)|0,B=B+Math.imul(de,yt)|0,j=j+Math.imul(de,Vt)|0,Q=Q+Math.imul(U,Xt)|0,B=B+Math.imul(U,Zt)|0,B=B+Math.imul(X,Xt)|0,j=j+Math.imul(X,Zt)|0;var ki=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(ki>>>26)|0,ki&=67108863,Q=Math.imul(me,Te),B=Math.imul(me,Le),B=B+Math.imul(G,Te)|0,j=Math.imul(G,Le),Q=Q+Math.imul(W,De)|0,B=B+Math.imul(W,fe)|0,B=B+Math.imul(re,De)|0,j=j+Math.imul(re,fe)|0,Q=Q+Math.imul(be,Se)|0,B=B+Math.imul(be,Fe)|0,B=B+Math.imul(Be,Se)|0,j=j+Math.imul(Be,Fe)|0,Q=Q+Math.imul(q,Je)|0,B=B+Math.imul(q,ft)|0,B=B+Math.imul(J,Je)|0,j=j+Math.imul(J,ft)|0,Q=Q+Math.imul(L,Ct)|0,B=B+Math.imul(L,it)|0,B=B+Math.imul(ue,Ct)|0,j=j+Math.imul(ue,it)|0,Q=Q+Math.imul(pe,yt)|0,B=B+Math.imul(pe,Vt)|0,B=B+Math.imul(_e,yt)|0,j=j+Math.imul(_e,Vt)|0,Q=Q+Math.imul(se,Xt)|0,B=B+Math.imul(se,Zt)|0,B=B+Math.imul(de,Xt)|0,j=j+Math.imul(de,Zt)|0,Q=Q+Math.imul(U,ve)|0,B=B+Math.imul(U,Ee)|0,B=B+Math.imul(X,ve)|0,j=j+Math.imul(X,Ee)|0;var yn=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(yn>>>26)|0,yn&=67108863,Q=Math.imul(S,Te),B=Math.imul(S,Le),B=B+Math.imul(V,Te)|0,j=Math.imul(V,Le),Q=Q+Math.imul(me,De)|0,B=B+Math.imul(me,fe)|0,B=B+Math.imul(G,De)|0,j=j+Math.imul(G,fe)|0,Q=Q+Math.imul(W,Se)|0,B=B+Math.imul(W,Fe)|0,B=B+Math.imul(re,Se)|0,j=j+Math.imul(re,Fe)|0,Q=Q+Math.imul(be,Je)|0,B=B+Math.imul(be,ft)|0,B=B+Math.imul(Be,Je)|0,j=j+Math.imul(Be,ft)|0,Q=Q+Math.imul(q,Ct)|0,B=B+Math.imul(q,it)|0,B=B+Math.imul(J,Ct)|0,j=j+Math.imul(J,it)|0,Q=Q+Math.imul(L,yt)|0,B=B+Math.imul(L,Vt)|0,B=B+Math.imul(ue,yt)|0,j=j+Math.imul(ue,Vt)|0,Q=Q+Math.imul(pe,Xt)|0,B=B+Math.imul(pe,Zt)|0,B=B+Math.imul(_e,Xt)|0,j=j+Math.imul(_e,Zt)|0,Q=Q+Math.imul(se,ve)|0,B=B+Math.imul(se,Ee)|0,B=B+Math.imul(de,ve)|0,j=j+Math.imul(de,Ee)|0,Q=Q+Math.imul(U,Ce)|0,B=B+Math.imul(U,ze)|0,B=B+Math.imul(X,Ce)|0,j=j+Math.imul(X,ze)|0;var bt=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(bt>>>26)|0,bt&=67108863,Q=Math.imul(le,Te),B=Math.imul(le,Le),B=B+Math.imul(ie,Te)|0,j=Math.imul(ie,Le),Q=Q+Math.imul(S,De)|0,B=B+Math.imul(S,fe)|0,B=B+Math.imul(V,De)|0,j=j+Math.imul(V,fe)|0,Q=Q+Math.imul(me,Se)|0,B=B+Math.imul(me,Fe)|0,B=B+Math.imul(G,Se)|0,j=j+Math.imul(G,Fe)|0,Q=Q+Math.imul(W,Je)|0,B=B+Math.imul(W,ft)|0,B=B+Math.imul(re,Je)|0,j=j+Math.imul(re,ft)|0,Q=Q+Math.imul(be,Ct)|0,B=B+Math.imul(be,it)|0,B=B+Math.imul(Be,Ct)|0,j=j+Math.imul(Be,it)|0,Q=Q+Math.imul(q,yt)|0,B=B+Math.imul(q,Vt)|0,B=B+Math.imul(J,yt)|0,j=j+Math.imul(J,Vt)|0,Q=Q+Math.imul(L,Xt)|0,B=B+Math.imul(L,Zt)|0,B=B+Math.imul(ue,Xt)|0,j=j+Math.imul(ue,Zt)|0,Q=Q+Math.imul(pe,ve)|0,B=B+Math.imul(pe,Ee)|0,B=B+Math.imul(_e,ve)|0,j=j+Math.imul(_e,Ee)|0,Q=Q+Math.imul(se,Ce)|0,B=B+Math.imul(se,ze)|0,B=B+Math.imul(de,Ce)|0,j=j+Math.imul(de,ze)|0,Q=Q+Math.imul(U,$e)|0,B=B+Math.imul(U,Xe)|0,B=B+Math.imul(X,$e)|0,j=j+Math.imul(X,Xe)|0;var JA=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(JA>>>26)|0,JA&=67108863,Q=Math.imul(le,De),B=Math.imul(le,fe),B=B+Math.imul(ie,De)|0,j=Math.imul(ie,fe),Q=Q+Math.imul(S,Se)|0,B=B+Math.imul(S,Fe)|0,B=B+Math.imul(V,Se)|0,j=j+Math.imul(V,Fe)|0,Q=Q+Math.imul(me,Je)|0,B=B+Math.imul(me,ft)|0,B=B+Math.imul(G,Je)|0,j=j+Math.imul(G,ft)|0,Q=Q+Math.imul(W,Ct)|0,B=B+Math.imul(W,it)|0,B=B+Math.imul(re,Ct)|0,j=j+Math.imul(re,it)|0,Q=Q+Math.imul(be,yt)|0,B=B+Math.imul(be,Vt)|0,B=B+Math.imul(Be,yt)|0,j=j+Math.imul(Be,Vt)|0,Q=Q+Math.imul(q,Xt)|0,B=B+Math.imul(q,Zt)|0,B=B+Math.imul(J,Xt)|0,j=j+Math.imul(J,Zt)|0,Q=Q+Math.imul(L,ve)|0,B=B+Math.imul(L,Ee)|0,B=B+Math.imul(ue,ve)|0,j=j+Math.imul(ue,Ee)|0,Q=Q+Math.imul(pe,Ce)|0,B=B+Math.imul(pe,ze)|0,B=B+Math.imul(_e,Ce)|0,j=j+Math.imul(_e,ze)|0,Q=Q+Math.imul(se,$e)|0,B=B+Math.imul(se,Xe)|0,B=B+Math.imul(de,$e)|0,j=j+Math.imul(de,Xe)|0;var Ln=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,Q=Math.imul(le,Se),B=Math.imul(le,Fe),B=B+Math.imul(ie,Se)|0,j=Math.imul(ie,Fe),Q=Q+Math.imul(S,Je)|0,B=B+Math.imul(S,ft)|0,B=B+Math.imul(V,Je)|0,j=j+Math.imul(V,ft)|0,Q=Q+Math.imul(me,Ct)|0,B=B+Math.imul(me,it)|0,B=B+Math.imul(G,Ct)|0,j=j+Math.imul(G,it)|0,Q=Q+Math.imul(W,yt)|0,B=B+Math.imul(W,Vt)|0,B=B+Math.imul(re,yt)|0,j=j+Math.imul(re,Vt)|0,Q=Q+Math.imul(be,Xt)|0,B=B+Math.imul(be,Zt)|0,B=B+Math.imul(Be,Xt)|0,j=j+Math.imul(Be,Zt)|0,Q=Q+Math.imul(q,ve)|0,B=B+Math.imul(q,Ee)|0,B=B+Math.imul(J,ve)|0,j=j+Math.imul(J,Ee)|0,Q=Q+Math.imul(L,Ce)|0,B=B+Math.imul(L,ze)|0,B=B+Math.imul(ue,Ce)|0,j=j+Math.imul(ue,ze)|0,Q=Q+Math.imul(pe,$e)|0,B=B+Math.imul(pe,Xe)|0,B=B+Math.imul(_e,$e)|0,j=j+Math.imul(_e,Xe)|0;var qs=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(qs>>>26)|0,qs&=67108863,Q=Math.imul(le,Je),B=Math.imul(le,ft),B=B+Math.imul(ie,Je)|0,j=Math.imul(ie,ft),Q=Q+Math.imul(S,Ct)|0,B=B+Math.imul(S,it)|0,B=B+Math.imul(V,Ct)|0,j=j+Math.imul(V,it)|0,Q=Q+Math.imul(me,yt)|0,B=B+Math.imul(me,Vt)|0,B=B+Math.imul(G,yt)|0,j=j+Math.imul(G,Vt)|0,Q=Q+Math.imul(W,Xt)|0,B=B+Math.imul(W,Zt)|0,B=B+Math.imul(re,Xt)|0,j=j+Math.imul(re,Zt)|0,Q=Q+Math.imul(be,ve)|0,B=B+Math.imul(be,Ee)|0,B=B+Math.imul(Be,ve)|0,j=j+Math.imul(Be,Ee)|0,Q=Q+Math.imul(q,Ce)|0,B=B+Math.imul(q,ze)|0,B=B+Math.imul(J,Ce)|0,j=j+Math.imul(J,ze)|0,Q=Q+Math.imul(L,$e)|0,B=B+Math.imul(L,Xe)|0,B=B+Math.imul(ue,$e)|0,j=j+Math.imul(ue,Xe)|0;var mu=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(mu>>>26)|0,mu&=67108863,Q=Math.imul(le,Ct),B=Math.imul(le,it),B=B+Math.imul(ie,Ct)|0,j=Math.imul(ie,it),Q=Q+Math.imul(S,yt)|0,B=B+Math.imul(S,Vt)|0,B=B+Math.imul(V,yt)|0,j=j+Math.imul(V,Vt)|0,Q=Q+Math.imul(me,Xt)|0,B=B+Math.imul(me,Zt)|0,B=B+Math.imul(G,Xt)|0,j=j+Math.imul(G,Zt)|0,Q=Q+Math.imul(W,ve)|0,B=B+Math.imul(W,Ee)|0,B=B+Math.imul(re,ve)|0,j=j+Math.imul(re,Ee)|0,Q=Q+Math.imul(be,Ce)|0,B=B+Math.imul(be,ze)|0,B=B+Math.imul(Be,Ce)|0,j=j+Math.imul(Be,ze)|0,Q=Q+Math.imul(q,$e)|0,B=B+Math.imul(q,Xe)|0,B=B+Math.imul(J,$e)|0,j=j+Math.imul(J,Xe)|0;var Ma=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(Ma>>>26)|0,Ma&=67108863,Q=Math.imul(le,yt),B=Math.imul(le,Vt),B=B+Math.imul(ie,yt)|0,j=Math.imul(ie,Vt),Q=Q+Math.imul(S,Xt)|0,B=B+Math.imul(S,Zt)|0,B=B+Math.imul(V,Xt)|0,j=j+Math.imul(V,Zt)|0,Q=Q+Math.imul(me,ve)|0,B=B+Math.imul(me,Ee)|0,B=B+Math.imul(G,ve)|0,j=j+Math.imul(G,Ee)|0,Q=Q+Math.imul(W,Ce)|0,B=B+Math.imul(W,ze)|0,B=B+Math.imul(re,Ce)|0,j=j+Math.imul(re,ze)|0,Q=Q+Math.imul(be,$e)|0,B=B+Math.imul(be,Xe)|0,B=B+Math.imul(Be,$e)|0,j=j+Math.imul(Be,Xe)|0;var qA=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(qA>>>26)|0,qA&=67108863,Q=Math.imul(le,Xt),B=Math.imul(le,Zt),B=B+Math.imul(ie,Xt)|0,j=Math.imul(ie,Zt),Q=Q+Math.imul(S,ve)|0,B=B+Math.imul(S,Ee)|0,B=B+Math.imul(V,ve)|0,j=j+Math.imul(V,Ee)|0,Q=Q+Math.imul(me,Ce)|0,B=B+Math.imul(me,ze)|0,B=B+Math.imul(G,Ce)|0,j=j+Math.imul(G,ze)|0,Q=Q+Math.imul(W,$e)|0,B=B+Math.imul(W,Xe)|0,B=B+Math.imul(re,$e)|0,j=j+Math.imul(re,Xe)|0;var Ar=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Q=Math.imul(le,ve),B=Math.imul(le,Ee),B=B+Math.imul(ie,ve)|0,j=Math.imul(ie,Ee),Q=Q+Math.imul(S,Ce)|0,B=B+Math.imul(S,ze)|0,B=B+Math.imul(V,Ce)|0,j=j+Math.imul(V,ze)|0,Q=Q+Math.imul(me,$e)|0,B=B+Math.imul(me,Xe)|0,B=B+Math.imul(G,$e)|0,j=j+Math.imul(G,Xe)|0;var eo=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(eo>>>26)|0,eo&=67108863,Q=Math.imul(le,Ce),B=Math.imul(le,ze),B=B+Math.imul(ie,Ce)|0,j=Math.imul(ie,ze),Q=Q+Math.imul(S,$e)|0,B=B+Math.imul(S,Xe)|0,B=B+Math.imul(V,$e)|0,j=j+Math.imul(V,Xe)|0;var ec=(K+Q|0)+((B&8191)<<13)|0;K=(j+(B>>>13)|0)+(ec>>>26)|0,ec&=67108863,Q=Math.imul(le,$e),B=Math.imul(le,Xe),B=B+Math.imul(ie,$e)|0,j=Math.imul(ie,Xe);var Tr=(K+Q|0)+((B&8191)<<13)|0;return K=(j+(B>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,z[0]=gt,z[1]=dt,z[2]=ct,z[3]=jt,z[4]=vn,z[5]=Hr,z[6]=ki,z[7]=yn,z[8]=bt,z[9]=JA,z[10]=Ln,z[11]=qs,z[12]=mu,z[13]=Ma,z[14]=qA,z[15]=Ar,z[16]=eo,z[17]=ec,z[18]=Tr,K!==0&&(z[19]=K,F.length++),F};Math.imul||(y=m);function w(I,v,E){E.negative=v.negative^I.negative,E.length=I.length+v.length;for(var F=0,D=0,O=0;O<E.length-1;O++){var z=D;D=0;for(var K=F&67108863,Q=Math.min(O,v.length-1),B=Math.max(0,O-I.length+1);B<=Q;B++){var j=O-B,ee=I.words[j]|0,U=v.words[B]|0,X=ee*U,ae=X&67108863;z=z+(X/67108864|0)|0,ae=ae+K|0,K=ae&67108863,z=z+(ae>>>26)|0,D+=z>>>26,z&=67108863}E.words[O]=K,F=z,z=D}return F!==0?E.words[O]=F:E.length--,E._strip()}function x(I,v,E){return w(I,v,E)}s.prototype.mulTo=function(v,E){var F,D=this.length+v.length;return this.length===10&&v.length===10?F=y(this,v,E):D<63?F=m(this,v,E):D<1024?F=w(this,v,E):F=x(this,v,E),F},s.prototype.mul=function(v){var E=new s(null);return E.words=new Array(this.length+v.length),this.mulTo(v,E)},s.prototype.mulf=function(v){var E=new s(null);return E.words=new Array(this.length+v.length),x(this,v,E)},s.prototype.imul=function(v){return this.clone().mulTo(v,this)},s.prototype.imuln=function(v){var E=v<0;E&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var F=0,D=0;D<this.length;D++){var O=(this.words[D]|0)*v,z=(O&67108863)+(F&67108863);F>>=26,F+=O/67108864|0,F+=z>>>26,this.words[D]=z&67108863}return F!==0&&(this.words[D]=F,this.length++),E?this.ineg():this},s.prototype.muln=function(v){return this.clone().imuln(v)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(v){var E=g(v);if(E.length===0)return new s(1);for(var F=this,D=0;D<E.length&&E[D]===0;D++,F=F.sqr());if(++D<E.length)for(var O=F.sqr();D<E.length;D++,O=O.sqr())E[D]!==0&&(F=F.mul(O));return F},s.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var E=v%26,F=(v-E)/26,D=67108863>>>26-E<<26-E,O;if(E!==0){var z=0;for(O=0;O<this.length;O++){var K=this.words[O]&D,Q=(this.words[O]|0)-K<<E;this.words[O]=Q|z,z=K>>>26-E}z&&(this.words[O]=z,this.length++)}if(F!==0){for(O=this.length-1;O>=0;O--)this.words[O+F]=this.words[O];for(O=0;O<F;O++)this.words[O]=0;this.length+=F}return this._strip()},s.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},s.prototype.iushrn=function(v,E,F){r(typeof v=="number"&&v>=0);var D;E?D=(E-E%26)/26:D=0;var O=v%26,z=Math.min((v-O)/26,this.length),K=67108863^67108863>>>O<<O,Q=F;if(D-=z,D=Math.max(0,D),Q){for(var B=0;B<z;B++)Q.words[B]=this.words[B];Q.length=z}if(z!==0)if(this.length>z)for(this.length-=z,B=0;B<this.length;B++)this.words[B]=this.words[B+z];else this.words[0]=0,this.length=1;var j=0;for(B=this.length-1;B>=0&&(j!==0||B>=D);B--){var ee=this.words[B]|0;this.words[B]=j<<26-O|ee>>>O,j=ee&K}return Q&&j!==0&&(Q.words[Q.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(v,E,F){return r(this.negative===0),this.iushrn(v,E,F)},s.prototype.shln=function(v){return this.clone().ishln(v)},s.prototype.ushln=function(v){return this.clone().iushln(v)},s.prototype.shrn=function(v){return this.clone().ishrn(v)},s.prototype.ushrn=function(v){return this.clone().iushrn(v)},s.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,F=(v-E)/26,D=1<<E;if(this.length<=F)return!1;var O=this.words[F];return!!(O&D)},s.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var E=v%26,F=(v-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=F)return this;if(E!==0&&F++,this.length=Math.min(F,this.length),E!==0){var D=67108863^67108863>>>E<<E;this.words[this.length-1]&=D}return this._strip()},s.prototype.maskn=function(v){return this.clone().imaskn(v)},s.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},s.prototype._iaddn=function(v){this.words[0]+=v;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},s.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},s.prototype.addn=function(v){return this.clone().iaddn(v)},s.prototype.subn=function(v){return this.clone().isubn(v)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(v,E,F){var D=v.length+F,O;this._expand(D);var z,K=0;for(O=0;O<v.length;O++){z=(this.words[O+F]|0)+K;var Q=(v.words[O]|0)*E;z-=Q&67108863,K=(z>>26)-(Q/67108864|0),this.words[O+F]=z&67108863}for(;O<this.length-F;O++)z=(this.words[O+F]|0)+K,K=z>>26,this.words[O+F]=z&67108863;if(K===0)return this._strip();for(r(K===-1),K=0,O=0;O<this.length;O++)z=-(this.words[O]|0)+K,K=z>>26,this.words[O]=z&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(v,E){var F=this.length-v.length,D=this.clone(),O=v,z=O.words[O.length-1]|0,K=this._countBits(z);F=26-K,F!==0&&(O=O.ushln(F),D.iushln(F),z=O.words[O.length-1]|0);var Q=D.length-O.length,B;if(E!=="mod"){B=new s(null),B.length=Q+1,B.words=new Array(B.length);for(var j=0;j<B.length;j++)B.words[j]=0}var ee=D.clone()._ishlnsubmul(O,1,Q);ee.negative===0&&(D=ee,B&&(B.words[Q]=1));for(var U=Q-1;U>=0;U--){var X=(D.words[O.length+U]|0)*67108864+(D.words[O.length+U-1]|0);for(X=Math.min(X/z|0,67108863),D._ishlnsubmul(O,X,U);D.negative!==0;)X--,D.negative=0,D._ishlnsubmul(O,1,U),D.isZero()||(D.negative^=1);B&&(B.words[U]=X)}return B&&B._strip(),D._strip(),E!=="div"&&F!==0&&D.iushrn(F),{div:B||null,mod:D}},s.prototype.divmod=function(v,E,F){if(r(!v.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var D,O,z;return this.negative!==0&&v.negative===0?(z=this.neg().divmod(v,E),E!=="mod"&&(D=z.div.neg()),E!=="div"&&(O=z.mod.neg(),F&&O.negative!==0&&O.iadd(v)),{div:D,mod:O}):this.negative===0&&v.negative!==0?(z=this.divmod(v.neg(),E),E!=="mod"&&(D=z.div.neg()),{div:D,mod:z.mod}):this.negative&v.negative?(z=this.neg().divmod(v.neg(),E),E!=="div"&&(O=z.mod.neg(),F&&O.negative!==0&&O.isub(v)),{div:z.div,mod:O}):v.length>this.length||this.cmp(v)<0?{div:new s(0),mod:this}:v.length===1?E==="div"?{div:this.divn(v.words[0]),mod:null}:E==="mod"?{div:null,mod:new s(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new s(this.modrn(v.words[0]))}:this._wordDiv(v,E)},s.prototype.div=function(v){return this.divmod(v,"div",!1).div},s.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},s.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},s.prototype.divRound=function(v){var E=this.divmod(v);if(E.mod.isZero())return E.div;var F=E.div.negative!==0?E.mod.isub(v):E.mod,D=v.ushrn(1),O=v.andln(1),z=F.cmp(D);return z<0||O===1&&z===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},s.prototype.modrn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var F=(1<<26)%v,D=0,O=this.length-1;O>=0;O--)D=(F*D+(this.words[O]|0))%v;return E?-D:D},s.prototype.modn=function(v){return this.modrn(v)},s.prototype.idivn=function(v){var E=v<0;E&&(v=-v),r(v<=67108863);for(var F=0,D=this.length-1;D>=0;D--){var O=(this.words[D]|0)+F*67108864;this.words[D]=O/v|0,F=O%v}return this._strip(),E?this.ineg():this},s.prototype.divn=function(v){return this.clone().idivn(v)},s.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var E=this,F=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var D=new s(1),O=new s(0),z=new s(0),K=new s(1),Q=0;E.isEven()&&F.isEven();)E.iushrn(1),F.iushrn(1),++Q;for(var B=F.clone(),j=E.clone();!E.isZero();){for(var ee=0,U=1;!(E.words[0]&U)&&ee<26;++ee,U<<=1);if(ee>0)for(E.iushrn(ee);ee-- >0;)(D.isOdd()||O.isOdd())&&(D.iadd(B),O.isub(j)),D.iushrn(1),O.iushrn(1);for(var X=0,ae=1;!(F.words[0]&ae)&&X<26;++X,ae<<=1);if(X>0)for(F.iushrn(X);X-- >0;)(z.isOdd()||K.isOdd())&&(z.iadd(B),K.isub(j)),z.iushrn(1),K.iushrn(1);E.cmp(F)>=0?(E.isub(F),D.isub(z),O.isub(K)):(F.isub(E),z.isub(D),K.isub(O))}return{a:z,b:K,gcd:F.iushln(Q)}},s.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var E=this,F=v.clone();E.negative!==0?E=E.umod(v):E=E.clone();for(var D=new s(1),O=new s(0),z=F.clone();E.cmpn(1)>0&&F.cmpn(1)>0;){for(var K=0,Q=1;!(E.words[0]&Q)&&K<26;++K,Q<<=1);if(K>0)for(E.iushrn(K);K-- >0;)D.isOdd()&&D.iadd(z),D.iushrn(1);for(var B=0,j=1;!(F.words[0]&j)&&B<26;++B,j<<=1);if(B>0)for(F.iushrn(B);B-- >0;)O.isOdd()&&O.iadd(z),O.iushrn(1);E.cmp(F)>=0?(E.isub(F),D.isub(O)):(F.isub(E),O.isub(D))}var ee;return E.cmpn(1)===0?ee=D:ee=O,ee.cmpn(0)<0&&ee.iadd(v),ee},s.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var E=this.clone(),F=v.clone();E.negative=0,F.negative=0;for(var D=0;E.isEven()&&F.isEven();D++)E.iushrn(1),F.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;F.isEven();)F.iushrn(1);var O=E.cmp(F);if(O<0){var z=E;E=F,F=z}else if(O===0||F.cmpn(1)===0)break;E.isub(F)}while(!0);return F.iushln(D)},s.prototype.invm=function(v){return this.egcd(v).a.umod(v)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(v){return this.words[0]&v},s.prototype.bincn=function(v){r(typeof v=="number");var E=v%26,F=(v-E)/26,D=1<<E;if(this.length<=F)return this._expand(F+1),this.words[F]|=D,this;for(var O=D,z=F;O!==0&&z<this.length;z++){var K=this.words[z]|0;K+=O,O=K>>>26,K&=67108863,this.words[z]=K}return O!==0&&(this.words[z]=O,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(v){var E=v<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var F;if(this.length>1)F=1;else{E&&(v=-v),r(v<=67108863,"Number is too big");var D=this.words[0]|0;F=D===v?0:D<v?-1:1}return this.negative!==0?-F|0:F},s.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var E=this.ucmp(v);return this.negative!==0?-E|0:E},s.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var E=0,F=this.length-1;F>=0;F--){var D=this.words[F]|0,O=v.words[F]|0;if(D!==O){D<O?E=-1:D>O&&(E=1);break}}return E},s.prototype.gtn=function(v){return this.cmpn(v)===1},s.prototype.gt=function(v){return this.cmp(v)===1},s.prototype.gten=function(v){return this.cmpn(v)>=0},s.prototype.gte=function(v){return this.cmp(v)>=0},s.prototype.ltn=function(v){return this.cmpn(v)===-1},s.prototype.lt=function(v){return this.cmp(v)===-1},s.prototype.lten=function(v){return this.cmpn(v)<=0},s.prototype.lte=function(v){return this.cmp(v)<=0},s.prototype.eqn=function(v){return this.cmpn(v)===0},s.prototype.eq=function(v){return this.cmp(v)===0},s.red=function(v){return new Y(v)},s.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(v){return this.red=v,this},s.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},s.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},s.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},s.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},s.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},s.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},s.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},s.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var _={k256:null,p224:null,p192:null,p25519:null};function C(I,v){this.name=I,this.p=new s(v,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var v=new s(null);return v.words=new Array(Math.ceil(this.n/13)),v},C.prototype.ireduce=function(v){var E=v,F;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),F=E.bitLength();while(F>this.n);var D=F<this.n?-1:E.ucmp(this.p);return D===0?(E.words[0]=0,E.length=1):D>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},C.prototype.split=function(v,E){v.iushrn(this.n,0,E)},C.prototype.imulK=function(v){return v.imul(this.k)};function T(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(T,C),T.prototype.split=function(v,E){for(var F=4194303,D=Math.min(v.length,9),O=0;O<D;O++)E.words[O]=v.words[O];if(E.length=D,v.length<=9){v.words[0]=0,v.length=1;return}var z=v.words[9];for(E.words[E.length++]=z&F,O=10;O<v.length;O++){var K=v.words[O]|0;v.words[O-10]=(K&F)<<4|z>>>22,z=K}z>>>=22,v.words[O-10]=z,z===0&&v.length>10?v.length-=10:v.length-=9},T.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var E=0,F=0;F<v.length;F++){var D=v.words[F]|0;E+=D*977,v.words[F]=E&67108863,E=D*64+(E/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function b(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(b,C);function M(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(M,C);function P(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(P,C),P.prototype.imulK=function(v){for(var E=0,F=0;F<v.length;F++){var D=(v.words[F]|0)*19+E,O=D&67108863;D>>>=26,v.words[F]=O,E=D}return E!==0&&(v.words[v.length++]=E),v},s._prime=function(v){if(_[v])return _[v];var E;if(v==="k256")E=new T;else if(v==="p224")E=new b;else if(v==="p192")E=new M;else if(v==="p25519")E=new P;else throw new Error("Unknown prime "+v);return _[v]=E,E};function Y(I){if(typeof I=="string"){var v=s._prime(I);this.m=v.p,this.prime=v}else r(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}Y.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},Y.prototype._verify2=function(v,E){r((v.negative|E.negative)===0,"red works only with positives"),r(v.red&&v.red===E.red,"red works only with red numbers")},Y.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(c(v,v.umod(this.m)._forceRed(this)),v)},Y.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},Y.prototype.add=function(v,E){this._verify2(v,E);var F=v.add(E);return F.cmp(this.m)>=0&&F.isub(this.m),F._forceRed(this)},Y.prototype.iadd=function(v,E){this._verify2(v,E);var F=v.iadd(E);return F.cmp(this.m)>=0&&F.isub(this.m),F},Y.prototype.sub=function(v,E){this._verify2(v,E);var F=v.sub(E);return F.cmpn(0)<0&&F.iadd(this.m),F._forceRed(this)},Y.prototype.isub=function(v,E){this._verify2(v,E);var F=v.isub(E);return F.cmpn(0)<0&&F.iadd(this.m),F},Y.prototype.shl=function(v,E){return this._verify1(v),this.imod(v.ushln(E))},Y.prototype.imul=function(v,E){return this._verify2(v,E),this.imod(v.imul(E))},Y.prototype.mul=function(v,E){return this._verify2(v,E),this.imod(v.mul(E))},Y.prototype.isqr=function(v){return this.imul(v,v.clone())},Y.prototype.sqr=function(v){return this.mul(v,v)},Y.prototype.sqrt=function(v){if(v.isZero())return v.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var F=this.m.add(new s(1)).iushrn(2);return this.pow(v,F)}for(var D=this.m.subn(1),O=0;!D.isZero()&&D.andln(1)===0;)O++,D.iushrn(1);r(!D.isZero());var z=new s(1).toRed(this),K=z.redNeg(),Q=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new s(2*B*B).toRed(this);this.pow(B,Q).cmp(K)!==0;)B.redIAdd(K);for(var j=this.pow(B,D),ee=this.pow(v,D.addn(1).iushrn(1)),U=this.pow(v,D),X=O;U.cmp(z)!==0;){for(var ae=U,se=0;ae.cmp(z)!==0;se++)ae=ae.redSqr();r(se<X);var de=this.pow(j,new s(1).iushln(X-se-1));ee=ee.redMul(de),j=de.redSqr(),U=U.redMul(j),X=se}return ee},Y.prototype.invm=function(v){var E=v._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},Y.prototype.pow=function(v,E){if(E.isZero())return new s(1).toRed(this);if(E.cmpn(1)===0)return v.clone();var F=4,D=new Array(1<<F);D[0]=new s(1).toRed(this),D[1]=v;for(var O=2;O<D.length;O++)D[O]=this.mul(D[O-1],v);var z=D[0],K=0,Q=0,B=E.bitLength()%26;for(B===0&&(B=26),O=E.length-1;O>=0;O--){for(var j=E.words[O],ee=B-1;ee>=0;ee--){var U=j>>ee&1;if(z!==D[0]&&(z=this.sqr(z)),U===0&&K===0){Q=0;continue}K<<=1,K|=U,Q++,!(Q!==F&&(O!==0||ee!==0))&&(z=this.mul(z,D[K]),Q=0,K=0)}B=26}return z},Y.prototype.convertTo=function(v){var E=v.umod(this.m);return E===v?E.clone():E},Y.prototype.convertFrom=function(v){var E=v.clone();return E.red=null,E},s.mont=function(v){return new H(v)};function H(I){Y.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(H,Y),H.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},H.prototype.convertFrom=function(v){var E=this.imod(v.mul(this.rinv));return E.red=null,E},H.prototype.imul=function(v,E){if(v.isZero()||E.isZero())return v.words[0]=0,v.length=1,v;var F=v.imul(E),D=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=F.isub(D).iushrn(this.shift),z=O;return O.cmp(this.m)>=0?z=O.isub(this.m):O.cmpn(0)<0&&(z=O.iadd(this.m)),z._forceRed(this)},H.prototype.mul=function(v,E){if(v.isZero()||E.isZero())return new s(0)._forceRed(this);var F=v.mul(E),D=F.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),O=F.isub(D).iushrn(this.shift),z=O;return O.cmp(this.m)>=0?z=O.isub(this.m):O.cmpn(0)<0&&(z=O.iadd(this.m)),z._forceRed(this)},H.prototype.invm=function(v){var E=this.imod(v._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(n,ea)})(IM);var iV=IM.exports;const vt=El(iV),sV="logger/5.7.0";let O2=!1,N2=!1;const kv={debug:1,default:2,info:2,warning:3,error:4,off:5};let k2=kv.default,U_=null;function oV(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const Q2=oV();var DB;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(DB||(DB={}));var ho;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(ho||(ho={}));const H2="0123456789abcdef";let ge=class ur{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();kv[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(k2>kv[r])&&console.log.apply(console,t)}debug(...e){this._log(ur.levels.DEBUG,e)}info(...e){this._log(ur.levels.INFO,e)}warn(...e){this._log(ur.levels.WARNING,e)}makeError(e,t,r){if(N2)return this.makeError("censored error",t,{});t||(t=ur.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const A=r[l];try{if(A instanceof Uint8Array){let c="";for(let u=0;u<A.length;u++)c+=H2[A[u]>>4],c+=H2[A[u]&15];i.push(l+"=Uint8Array(0x"+c+")")}else i.push(l+"="+JSON.stringify(A))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case ho.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case ho.CALL_EXCEPTION:case ho.INSUFFICIENT_FUNDS:case ho.MISSING_NEW:case ho.NONCE_EXPIRED:case ho.REPLACEMENT_UNDERPRICED:case ho.TRANSACTION_REPLACED:case ho.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,ur.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){Q2&&this.throwError("platform missing String.prototype.normalize",ur.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Q2})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,ur.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,ur.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ur.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return U_||(U_=new ur(sV)),U_}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),O2){if(!e)return;this.globalLogger().throwError("error censorship permanent",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}N2=!!e,O2=!!t}static setLogLevel(e){const t=kv[e.toLowerCase()];if(t==null){ur.globalLogger().warn("invalid log level - "+e);return}k2=t}static from(e){return new ur(e)}};ge.errors=ho;ge.levels=DB;const aV="bytes/5.7.0",Dn=new ge(aV);function cN(n){return!!n.toHexString}function Jf(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return Jf(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function RM(n){return Et(n)&&!(n.length%2)||lx(n)}function z2(n){return typeof n=="number"&&n==n&&n%1===0}function lx(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!z2(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!z2(t)||t<0||t>=256)return!1}return!0}function at(n,e){if(e||(e={}),typeof n=="number"){Dn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),Jf(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),cN(n)&&(n=n.toHexString()),Et(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Dn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return Jf(new Uint8Array(r))}return lx(n)?Jf(new Uint8Array(n)):Dn.throwArgumentError("invalid arrayify value","value",n)}function es(n){const e=n.map(i=>at(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),Jf(r)}function gh(n){let e=at(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function lV(n,e){n=at(n),n.length>e&&Dn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),Jf(t)}function Et(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const L_="0123456789abcdef";function nt(n,e){if(e||(e={}),typeof n=="number"){Dn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=L_[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),cN(n))return n.toHexString();if(Et(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Dn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(lx(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=L_[(i&240)>>4]+L_[i&15]}return t}return Dn.throwArgumentError("invalid hexlify value","value",n)}function Oc(n){if(typeof n!="string")n=nt(n);else if(!Et(n)||n.length%2)return null;return(n.length-2)/2}function jr(n,e,t){return typeof n!="string"?n=nt(n):(!Et(n)||n.length%2)&&Dn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function Bi(n){let e="0x";return n.forEach(t=>{e+=nt(t).substring(2)}),e}function Ax(n){const e=AV(nt(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function AV(n){typeof n!="string"&&(n=nt(n)),Et(n)||Dn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Qn(n,e){for(typeof n!="string"?n=nt(n):Et(n)||Dn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Dn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function cx(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(RM(n)){let t=at(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=nt(t.slice(0,32)),e.s=nt(t.slice(32,64))):t.length===65?(e.r=nt(t.slice(0,32)),e.s=nt(t.slice(32,64)),e.v=t[64]):Dn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Dn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=nt(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=lV(at(e._vs),32);e._vs=nt(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Dn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=nt(i);e.s==null?e.s=o:e.s!==o&&Dn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Dn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Dn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!Et(e.r)?Dn.throwArgumentError("signature missing or invalid r","signature",n):e.r=Qn(e.r,32),e.s==null||!Et(e.s)?Dn.throwArgumentError("signature missing or invalid s","signature",n):e.s=Qn(e.s,32);const t=at(e.s);t[0]>=128&&Dn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=nt(t);e._vs&&(Et(e._vs)||Dn.throwArgumentError("signature invalid _vs","signature",n),e._vs=Qn(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Dn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const cV="bignumber/5.7.0";var My=vt.BN;const ja=new ge(cV),P_={},G2=9007199254740991;let V2=!1;class Ge{constructor(e,t){e!==P_&&ja.throwError("cannot call constructor directly; use BigNumber.from",ge.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return vi(St(this).fromTwos(e))}toTwos(e){return vi(St(this).toTwos(e))}abs(){return this._hex[0]==="-"?Ge.from(this._hex.substring(1)):this}add(e){return vi(St(this).add(St(e)))}sub(e){return vi(St(this).sub(St(e)))}div(e){return Ge.from(e).isZero()&&gs("division-by-zero","div"),vi(St(this).div(St(e)))}mul(e){return vi(St(this).mul(St(e)))}mod(e){const t=St(e);return t.isNeg()&&gs("division-by-zero","mod"),vi(St(this).umod(t))}pow(e){const t=St(e);return t.isNeg()&&gs("negative-power","pow"),vi(St(this).pow(t))}and(e){const t=St(e);return(this.isNegative()||t.isNeg())&&gs("unbound-bitwise-result","and"),vi(St(this).and(t))}or(e){const t=St(e);return(this.isNegative()||t.isNeg())&&gs("unbound-bitwise-result","or"),vi(St(this).or(t))}xor(e){const t=St(e);return(this.isNegative()||t.isNeg())&&gs("unbound-bitwise-result","xor"),vi(St(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&gs("negative-width","mask"),vi(St(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&gs("negative-width","shl"),vi(St(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&gs("negative-width","shr"),vi(St(this).shrn(e))}eq(e){return St(this).eq(St(e))}lt(e){return St(this).lt(St(e))}lte(e){return St(this).lte(St(e))}gt(e){return St(this).gt(St(e))}gte(e){return St(this).gte(St(e))}isNegative(){return this._hex[0]==="-"}isZero(){return St(this).isZero()}toNumber(){try{return St(this).toNumber()}catch{gs("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return ja.throwError("this platform does not support BigInt",ge.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?V2||(V2=!0,ja.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?ja.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",ge.errors.UNEXPECTED_ARGUMENT,{}):ja.throwError("BigNumber.toString does not accept parameters",ge.errors.UNEXPECTED_ARGUMENT,{})),St(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Ge)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new Ge(P_,cm(e)):e.match(/^-?[0-9]+$/)?new Ge(P_,cm(new My(e))):ja.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&gs("underflow","BigNumber.from",e),(e>=G2||e<=-G2)&&gs("overflow","BigNumber.from",e),Ge.from(String(e));const t=e;if(typeof t=="bigint")return Ge.from(t.toString());if(lx(t))return Ge.from(nt(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return Ge.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(Et(r)||r[0]==="-"&&Et(r.substring(1))))return Ge.from(r)}return ja.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function cm(n){if(typeof n!="string")return cm(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&ja.throwArgumentError("invalid hex","value",n),n=cm(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function vi(n){return Ge.from(cm(n))}function St(n){const e=Ge.from(n).toHexString();return e[0]==="-"?new My("-"+e.substring(3),16):new My(e.substring(2),16)}function gs(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),ja.throwError(n,ge.errors.NUMERIC_FAULT,r)}function uV(n){return new My(n,36).toString(16)}const fV="properties/5.7.0";var hV=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Sy=new ge(fV);function Ue(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function ts(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function tr(n){return hV(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function dV(n,e){(!n||typeof n!="object")&&Sy.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||Sy.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function En(n){const e={};for(const t in n)e[t]=n[t];return e}const pV={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function uN(n){if(n==null||pV[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!uN(r))return!1}return!0}return Sy.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function mV(n){if(uN(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>is(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Ue(e,t,is(r))}return e}return Sy.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function is(n){return mV(n)}class sg{constructor(e){for(const t in e)this[t]=is(e[t])}}const gV="abstract-provider/5.7.0";var vV=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const yV=new ge(gV);class wV extends sg{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class og{constructor(){yV.checkAbstract(new.target,og),Ue(this,"_isProvider",!0)}getFeeData(){return vV(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield tr({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=Ge.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const xV="networks/5.7.1",j2=new ge(xV);function _V(n){return n&&typeof n.renetwork=="function"}function $a(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return $a(t)},e}function Ty(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return Ty(n,r)},t}const W2={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:$a("homestead")},K2={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:$a("ropsten")},Y2={chainId:63,name:"classicMordor",_defaultProvider:Ty("https://www.ethercluster.com/mordor","classicMordor")},kg={unspecified:{chainId:0,name:"unspecified"},homestead:W2,mainnet:W2,morden:{chainId:2,name:"morden"},ropsten:K2,testnet:K2,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:$a("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:$a("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:$a("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:$a("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Ty("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Y2,classicTestnet:Y2,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Ty("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:$a("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:$a("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function fN(n){if(n==null)return null;if(typeof n=="number"){for(const r in kg){const i=kg[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=kg[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=kg[n.name];if(!e)return typeof n.chainId!="number"&&j2.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&j2.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(_V(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}function hN(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return at(e)}function dN(n){n=at(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}class pN{constructor(e){Ue(this,"alphabet",e),Ue(this,"base",e.length),Ue(this,"_alphabetMap",{}),Ue(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=at(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return at(new Uint8Array(t.reverse()))}}new pN("abcdefghijklmnopqrstuvwxyz234567");const OB=new pN("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),bV="0x0000000000000000000000000000000000000000",BV=Ge.from(-1),mN=Ge.from(0),EV=Ge.from(1),CV=Ge.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),MV="0x0000000000000000000000000000000000000000000000000000000000000000";var gN={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=ea:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],f=[1,256,65536,16777216],h=[6,1536,393216,100663296],p=[0,8,16,24],d=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(U){return Object.prototype.toString.call(U)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(U){return typeof U=="object"&&U.buffer&&U.buffer.constructor===ArrayBuffer});for(var x=function(U,X,ae){return function(se){return new B(U,X,U).update(se)[ae]()}},_=function(U,X,ae){return function(se,de){return new B(U,X,de).update(se)[ae]()}},C=function(U,X,ae){return function(se,de,oe,pe){return v["cshake"+U].update(se,de,oe,pe)[ae]()}},T=function(U,X,ae){return function(se,de,oe,pe){return v["kmac"+U].update(se,de,oe,pe)[ae]()}},b=function(U,X,ae,se){for(var de=0;de<y.length;++de){var oe=y[de];U[oe]=X(ae,se,oe)}return U},M=function(U,X){var ae=x(U,X,"hex");return ae.create=function(){return new B(U,X,U)},ae.update=function(se){return ae.create().update(se)},b(ae,x,U,X)},P=function(U,X){var ae=_(U,X,"hex");return ae.create=function(se){return new B(U,X,se)},ae.update=function(se,de){return ae.create(de).update(se)},b(ae,_,U,X)},Y=function(U,X){var ae=w[U],se=C(U,X,"hex");return se.create=function(de,oe,pe){return!oe&&!pe?v["shake"+U].create(de):new B(U,X,de).bytepad([oe,pe],ae)},se.update=function(de,oe,pe,_e){return se.create(oe,pe,_e).update(de)},b(se,C,U,X)},H=function(U,X){var ae=w[U],se=T(U,X,"hex");return se.create=function(de,oe,pe){return new j(U,X,oe).bytepad(["KMAC",pe],ae).bytepad([de],ae)},se.update=function(de,oe,pe,_e){return se.create(de,pe,_e).update(oe)},b(se,T,U,X)},I=[{name:"keccak",padding:f,bits:g,createMethod:M},{name:"sha3",padding:h,bits:g,createMethod:M},{name:"shake",padding:c,bits:m,createMethod:P},{name:"cshake",padding:u,bits:m,createMethod:Y},{name:"kmac",padding:u,bits:m,createMethod:H}],v={},E=[],F=0;F<I.length;++F)for(var D=I[F],O=D.bits,z=0;z<O.length;++z){var K=D.name+"_"+O[z];if(E.push(K),v[K]=D.createMethod(O[z],D.padding),D.name!=="sha3"){var Q=D.name+O[z];E.push(Q),v[Q]=v[K]}}function B(U,X,ae){this.blocks=[],this.s=[],this.padding=X,this.outputBits=ae,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(U<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ae>>5,this.extraBytes=(ae&31)>>3;for(var se=0;se<50;++se)this.s[se]=0}B.prototype.update=function(U){if(this.finalized)throw new Error(t);var X,ae=typeof U;if(ae!=="string"){if(ae==="object"){if(U===null)throw new Error(e);if(l&&U.constructor===ArrayBuffer)U=new Uint8Array(U);else if(!Array.isArray(U)&&(!l||!ArrayBuffer.isView(U)))throw new Error(e)}else throw new Error(e);X=!0}for(var se=this.blocks,de=this.byteCount,oe=U.length,pe=this.blockCount,_e=0,xe=this.s,L,ue;_e<oe;){if(this.reset)for(this.reset=!1,se[0]=this.block,L=1;L<pe+1;++L)se[L]=0;if(X)for(L=this.start;_e<oe&&L<de;++_e)se[L>>2]|=U[_e]<<p[L++&3];else for(L=this.start;_e<oe&&L<de;++_e)ue=U.charCodeAt(_e),ue<128?se[L>>2]|=ue<<p[L++&3]:ue<2048?(se[L>>2]|=(192|ue>>6)<<p[L++&3],se[L>>2]|=(128|ue&63)<<p[L++&3]):ue<55296||ue>=57344?(se[L>>2]|=(224|ue>>12)<<p[L++&3],se[L>>2]|=(128|ue>>6&63)<<p[L++&3],se[L>>2]|=(128|ue&63)<<p[L++&3]):(ue=65536+((ue&1023)<<10|U.charCodeAt(++_e)&1023),se[L>>2]|=(240|ue>>18)<<p[L++&3],se[L>>2]|=(128|ue>>12&63)<<p[L++&3],se[L>>2]|=(128|ue>>6&63)<<p[L++&3],se[L>>2]|=(128|ue&63)<<p[L++&3]);if(this.lastByteIndex=L,L>=de){for(this.start=L-de,this.block=se[pe],L=0;L<pe;++L)xe[L]^=se[L];ee(xe),this.reset=!0}else this.start=L}return this},B.prototype.encode=function(U,X){var ae=U&255,se=1,de=[ae];for(U=U>>8,ae=U&255;ae>0;)de.unshift(ae),U=U>>8,ae=U&255,++se;return X?de.push(se):de.unshift(se),this.update(de),de.length},B.prototype.encodeString=function(U){var X,ae=typeof U;if(ae!=="string"){if(ae==="object"){if(U===null)throw new Error(e);if(l&&U.constructor===ArrayBuffer)U=new Uint8Array(U);else if(!Array.isArray(U)&&(!l||!ArrayBuffer.isView(U)))throw new Error(e)}else throw new Error(e);X=!0}var se=0,de=U.length;if(X)se=de;else for(var oe=0;oe<U.length;++oe){var pe=U.charCodeAt(oe);pe<128?se+=1:pe<2048?se+=2:pe<55296||pe>=57344?se+=3:(pe=65536+((pe&1023)<<10|U.charCodeAt(++oe)&1023),se+=4)}return se+=this.encode(se*8),this.update(U),se},B.prototype.bytepad=function(U,X){for(var ae=this.encode(X),se=0;se<U.length;++se)ae+=this.encodeString(U[se]);var de=X-ae%X,oe=[];return oe.length=de,this.update(oe),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var U=this.blocks,X=this.lastByteIndex,ae=this.blockCount,se=this.s;if(U[X>>2]|=this.padding[X&3],this.lastByteIndex===this.byteCount)for(U[0]=U[ae],X=1;X<ae+1;++X)U[X]=0;for(U[ae-1]|=2147483648,X=0;X<ae;++X)se[X]^=U[X];ee(se)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var U=this.blockCount,X=this.s,ae=this.outputBlocks,se=this.extraBytes,de=0,oe=0,pe="",_e;oe<ae;){for(de=0;de<U&&oe<ae;++de,++oe)_e=X[de],pe+=A[_e>>4&15]+A[_e&15]+A[_e>>12&15]+A[_e>>8&15]+A[_e>>20&15]+A[_e>>16&15]+A[_e>>28&15]+A[_e>>24&15];oe%U===0&&(ee(X),de=0)}return se&&(_e=X[de],pe+=A[_e>>4&15]+A[_e&15],se>1&&(pe+=A[_e>>12&15]+A[_e>>8&15]),se>2&&(pe+=A[_e>>20&15]+A[_e>>16&15])),pe},B.prototype.arrayBuffer=function(){this.finalize();var U=this.blockCount,X=this.s,ae=this.outputBlocks,se=this.extraBytes,de=0,oe=0,pe=this.outputBits>>3,_e;se?_e=new ArrayBuffer(ae+1<<2):_e=new ArrayBuffer(pe);for(var xe=new Uint32Array(_e);oe<ae;){for(de=0;de<U&&oe<ae;++de,++oe)xe[oe]=X[de];oe%U===0&&ee(X)}return se&&(xe[de]=X[de],_e=_e.slice(0,pe)),_e},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var U=this.blockCount,X=this.s,ae=this.outputBlocks,se=this.extraBytes,de=0,oe=0,pe=[],_e,xe;oe<ae;){for(de=0;de<U&&oe<ae;++de,++oe)_e=oe<<2,xe=X[de],pe[_e]=xe&255,pe[_e+1]=xe>>8&255,pe[_e+2]=xe>>16&255,pe[_e+3]=xe>>24&255;oe%U===0&&ee(X)}return se&&(_e=oe<<2,xe=X[de],pe[_e]=xe&255,se>1&&(pe[_e+1]=xe>>8&255),se>2&&(pe[_e+2]=xe>>16&255)),pe};function j(U,X,ae){B.call(this,U,X,ae)}j.prototype=new B,j.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var ee=function(U){var X,ae,se,de,oe,pe,_e,xe,L,ue,Ae,q,J,ce,be,Be,k,W,re,he,me,G,R,S,V,te,le,ie,Ie,Te,Le,He,De,fe,Me,Se,Fe,Ve,Je,ft,on,Ct,it,lr,yt,Vt,Js,Xt,Zt,ne,ve,Ee,we,Ce,ze,st,$e,Xe,gt,dt,ct,jt,vn;for(se=0;se<48;se+=2)de=U[0]^U[10]^U[20]^U[30]^U[40],oe=U[1]^U[11]^U[21]^U[31]^U[41],pe=U[2]^U[12]^U[22]^U[32]^U[42],_e=U[3]^U[13]^U[23]^U[33]^U[43],xe=U[4]^U[14]^U[24]^U[34]^U[44],L=U[5]^U[15]^U[25]^U[35]^U[45],ue=U[6]^U[16]^U[26]^U[36]^U[46],Ae=U[7]^U[17]^U[27]^U[37]^U[47],q=U[8]^U[18]^U[28]^U[38]^U[48],J=U[9]^U[19]^U[29]^U[39]^U[49],X=q^(pe<<1|_e>>>31),ae=J^(_e<<1|pe>>>31),U[0]^=X,U[1]^=ae,U[10]^=X,U[11]^=ae,U[20]^=X,U[21]^=ae,U[30]^=X,U[31]^=ae,U[40]^=X,U[41]^=ae,X=de^(xe<<1|L>>>31),ae=oe^(L<<1|xe>>>31),U[2]^=X,U[3]^=ae,U[12]^=X,U[13]^=ae,U[22]^=X,U[23]^=ae,U[32]^=X,U[33]^=ae,U[42]^=X,U[43]^=ae,X=pe^(ue<<1|Ae>>>31),ae=_e^(Ae<<1|ue>>>31),U[4]^=X,U[5]^=ae,U[14]^=X,U[15]^=ae,U[24]^=X,U[25]^=ae,U[34]^=X,U[35]^=ae,U[44]^=X,U[45]^=ae,X=xe^(q<<1|J>>>31),ae=L^(J<<1|q>>>31),U[6]^=X,U[7]^=ae,U[16]^=X,U[17]^=ae,U[26]^=X,U[27]^=ae,U[36]^=X,U[37]^=ae,U[46]^=X,U[47]^=ae,X=ue^(de<<1|oe>>>31),ae=Ae^(oe<<1|de>>>31),U[8]^=X,U[9]^=ae,U[18]^=X,U[19]^=ae,U[28]^=X,U[29]^=ae,U[38]^=X,U[39]^=ae,U[48]^=X,U[49]^=ae,ce=U[0],be=U[1],Vt=U[11]<<4|U[10]>>>28,Js=U[10]<<4|U[11]>>>28,ie=U[20]<<3|U[21]>>>29,Ie=U[21]<<3|U[20]>>>29,dt=U[31]<<9|U[30]>>>23,ct=U[30]<<9|U[31]>>>23,Ct=U[40]<<18|U[41]>>>14,it=U[41]<<18|U[40]>>>14,fe=U[2]<<1|U[3]>>>31,Me=U[3]<<1|U[2]>>>31,Be=U[13]<<12|U[12]>>>20,k=U[12]<<12|U[13]>>>20,Xt=U[22]<<10|U[23]>>>22,Zt=U[23]<<10|U[22]>>>22,Te=U[33]<<13|U[32]>>>19,Le=U[32]<<13|U[33]>>>19,jt=U[42]<<2|U[43]>>>30,vn=U[43]<<2|U[42]>>>30,Ce=U[5]<<30|U[4]>>>2,ze=U[4]<<30|U[5]>>>2,Se=U[14]<<6|U[15]>>>26,Fe=U[15]<<6|U[14]>>>26,W=U[25]<<11|U[24]>>>21,re=U[24]<<11|U[25]>>>21,ne=U[34]<<15|U[35]>>>17,ve=U[35]<<15|U[34]>>>17,He=U[45]<<29|U[44]>>>3,De=U[44]<<29|U[45]>>>3,S=U[6]<<28|U[7]>>>4,V=U[7]<<28|U[6]>>>4,st=U[17]<<23|U[16]>>>9,$e=U[16]<<23|U[17]>>>9,Ve=U[26]<<25|U[27]>>>7,Je=U[27]<<25|U[26]>>>7,he=U[36]<<21|U[37]>>>11,me=U[37]<<21|U[36]>>>11,Ee=U[47]<<24|U[46]>>>8,we=U[46]<<24|U[47]>>>8,lr=U[8]<<27|U[9]>>>5,yt=U[9]<<27|U[8]>>>5,te=U[18]<<20|U[19]>>>12,le=U[19]<<20|U[18]>>>12,Xe=U[29]<<7|U[28]>>>25,gt=U[28]<<7|U[29]>>>25,ft=U[38]<<8|U[39]>>>24,on=U[39]<<8|U[38]>>>24,G=U[48]<<14|U[49]>>>18,R=U[49]<<14|U[48]>>>18,U[0]=ce^~Be&W,U[1]=be^~k&re,U[10]=S^~te&ie,U[11]=V^~le&Ie,U[20]=fe^~Se&Ve,U[21]=Me^~Fe&Je,U[30]=lr^~Vt&Xt,U[31]=yt^~Js&Zt,U[40]=Ce^~st&Xe,U[41]=ze^~$e&gt,U[2]=Be^~W&he,U[3]=k^~re&me,U[12]=te^~ie&Te,U[13]=le^~Ie&Le,U[22]=Se^~Ve&ft,U[23]=Fe^~Je&on,U[32]=Vt^~Xt&ne,U[33]=Js^~Zt&ve,U[42]=st^~Xe&dt,U[43]=$e^~gt&ct,U[4]=W^~he&G,U[5]=re^~me&R,U[14]=ie^~Te&He,U[15]=Ie^~Le&De,U[24]=Ve^~ft&Ct,U[25]=Je^~on&it,U[34]=Xt^~ne&Ee,U[35]=Zt^~ve&we,U[44]=Xe^~dt&jt,U[45]=gt^~ct&vn,U[6]=he^~G&ce,U[7]=me^~R&be,U[16]=Te^~He&S,U[17]=Le^~De&V,U[26]=ft^~Ct&fe,U[27]=on^~it&Me,U[36]=ne^~Ee&lr,U[37]=ve^~we&yt,U[46]=dt^~jt&Ce,U[47]=ct^~vn&ze,U[8]=G^~ce&Be,U[9]=R^~be&k,U[18]=He^~S&te,U[19]=De^~V&le,U[28]=Ct^~fe&Se,U[29]=it^~Me&Fe,U[38]=Ee^~lr&Vt,U[39]=we^~yt&Js,U[48]=jt^~Ce&st,U[49]=vn^~ze&$e,U[0]^=d[se],U[1]^=d[se+1]};if(a)n.exports=v;else for(F=0;F<E.length;++F)i[E[F]]=v[E[F]]})()})(gN);var SV=gN.exports;const TV=El(SV);function sr(n){return"0x"+TV.keccak_256(at(n))}const IV="strings/5.7.0",vN=new ge(IV);var um;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(um||(um={}));var $i;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})($i||($i={}));function RV(n,e,t,r,i){return vN.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function yN(n,e,t,r,i){if(n===$i.BAD_PREFIX||n===$i.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===$i.OVERRUN?t.length-e-1:0}function FV(n,e,t,r,i){return n===$i.OVERLONG?(r.push(i),0):(r.push(65533),yN(n,e,t))}const UV=Object.freeze({error:RV,ignore:yN,replace:FV});function wN(n,e){e==null&&(e=UV.error),n=at(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e($i.UNEXPECTED_CONTINUE,r-1,n,t):r+=e($i.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e($i.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let A=n[r];if((A&192)!=128){r+=e($i.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|A&63,r++}if(a!==null){if(a>1114111){r+=e($i.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e($i.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e($i.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function ca(n,e=um.current){e!=um.current&&(vN.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return at(t)}function LV(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ag(n,e){return LV(wN(n,e))}function PV(n,e=um.current){return wN(ca(n,e))}function Ef(n){return sr(ca(n))}const xN="hash/5.7.0";function _N(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function DV(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function OV(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let _=1;_<r;_++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,A=0;function c(){return l==0&&(A=A<<8|n[e++],l=8),A>>--l&1}const u=31,f=Math.pow(2,u),h=f>>>1,p=h>>1,d=f-1;let g=0;for(let _=0;_<u;_++)g=g<<1|c();let m=[],y=0,w=f;for(;;){let _=Math.floor(((g-y+1)*i-1)/w),C=0,T=r;for(;T-C>1;){let P=C+T>>>1;_<s[P]?T=P:C=P}if(C==0)break;m.push(C);let b=y+Math.floor(w*s[C]/i),M=y+Math.floor(w*s[C+1]/i)-1;for(;!((b^M)&h);)g=g<<1&d|c(),b=b<<1&d,M=M<<1&d|1;for(;b&~M&p;)g=g&h|g<<1&d>>>1|c(),b=b<<1^h,M=(M^h)<<1|h|1;y=b,w=1+M-b}let x=r-4;return m.map(_=>{switch(_-x){case 3:return x+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return x+256+(n[a++]<<8|n[a++]);case 1:return x+n[a++];default:return _-1}})}function NV(n){let e=0;return()=>n[e++]}function kV(n){return NV(OV(n))}function QV(n){return n&1?~n>>1:n>>1}function HV(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function $2(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function zV(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=QV(e());return t}function Iy(n,e){let t=$2(n(),n),r=n(),i=$2(r,n),s=HV(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function GV(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(jV(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(WV(t,n))}return DV(_N(e))}function VV(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function bN(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)zV(n,t).forEach((s,o)=>r[o].push(s));return r}function jV(n,e){let t=1+e(),r=e(),i=VV(e),s=bN(i.length,1+n,e);return _N(s.map((o,a)=>{const l=o[0],A=o.slice(1);return Array(i[a]).fill(void 0).map((c,u)=>{let f=u*r;return[l+u*t,A.map(h=>h+f)]})}))}function WV(n,e){let t=1+e();return bN(t,1+n,e).map(i=>[i[0],i.slice(1)])}function KV(n){let e=Iy(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let A=Iy(n,e);if(A.length==0)break;r.push({set:new Set(A),node:t()})}r.sort((A,c)=>c.set.size-A.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:l}}}function YV(){return kV(hN("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const ux=YV(),$V=new Set(Iy(ux)),XV=new Set(Iy(ux)),ZV=GV(ux),JV=KV(ux),X2=45,Z2=95;function BN(n){return PV(n)}function qV(n){return n.filter(e=>e!=65039)}function EN(n){for(let e of n.split(".")){let t=BN(e);try{for(let r=t.lastIndexOf(Z2)-1;r>=0;r--)if(t[r]!==Z2)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===X2&&t[3]===X2)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function ej(n){return EN(tj(n,qV))}function tj(n,e){let t=BN(n).reverse(),r=[];for(;t.length;){let i=rj(t);if(i){r.push(...e(i));continue}let s=t.pop();if($V.has(s)){r.push(s);continue}if(XV.has(s))continue;let o=ZV[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return EN(nj(String.fromCodePoint(...r)))}function nj(n){return n.normalize("NFC")}function rj(n,e){var t;let r=JV,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let l=n[--a];if(r=(t=r.branches.find(A=>A.set.has(l)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=l;else if(r.check&&l===s)break;o.push(l),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const ij=new ge(xN),CN=new Uint8Array(32);CN.fill(0);function J2(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function MN(n){const e=ca(ej(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(J2(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(J2(e.slice(r))),t}function Qv(n){typeof n!="string"&&ij.throwArgumentError("invalid ENS name; not a string","name",n);let e=CN;const t=MN(n);for(;t.length;)e=sr(es([e,sr(t.pop())]));return nt(e)}function sj(n){return nt(es(MN(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const oj="rlp/5.7.0",Go=new ge(oj);function q2(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function eI(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function SN(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(SN(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=q2(r.length);return i.unshift(247+i.length),i.concat(r)}RM(n)||Go.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(at(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=q2(e.length);return t.unshift(183+t.length),t.concat(e)}function fx(n){return nt(SN(n))}function tI(n,e,t,r){const i=[];for(;t<e+1+r;){const s=TN(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&Go.throwError("child data too short",ge.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function TN(n,e){if(n.length===0&&Go.throwError("data too short",ge.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&Go.throwError("data short segment too short",ge.errors.BUFFER_OVERRUN,{});const r=eI(n,e+1,t);return e+1+t+r>n.length&&Go.throwError("data long segment too short",ge.errors.BUFFER_OVERRUN,{}),tI(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&Go.throwError("data array too short",ge.errors.BUFFER_OVERRUN,{}),tI(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&Go.throwError("data array too short",ge.errors.BUFFER_OVERRUN,{});const r=eI(n,e+1,t);e+1+t+r>n.length&&Go.throwError("data array too short",ge.errors.BUFFER_OVERRUN,{});const i=nt(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&Go.throwError("data too short",ge.errors.BUFFER_OVERRUN,{});const r=nt(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:nt(n[e])}}function FM(n){const e=at(n),t=TN(e,0);return t.consumed!==e.length&&Go.throwArgumentError("invalid rlp data","data",n),t.result}const aj="address/5.7.0",Cf=new ge(aj);function nI(n){Et(n,20)||Cf.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=at(sr(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const lj=9007199254740991;function Aj(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const UM={};for(let n=0;n<10;n++)UM[String(n)]=String(n);for(let n=0;n<26;n++)UM[String.fromCharCode(65+n)]=String(10+n);const rI=Math.floor(Aj(lj));function cj(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>UM[r]).join("");for(;e.length>=rI;){let r=e.substring(0,rI);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Nr(n){let e=null;if(typeof n!="string"&&Cf.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=nI(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&Cf.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==cj(n)&&Cf.throwArgumentError("bad icap checksum","address",n),e=uV(n.substring(4));e.length<40;)e="0"+e;e=nI("0x"+e)}else Cf.throwArgumentError("invalid address","address",n);return e}function IN(n){let e=null;try{e=Nr(n.from)}catch{Cf.throwArgumentError("missing from address","transaction",n)}const t=gh(at(Ge.from(n.nonce).toHexString()));return Nr(jr(sr(fx([e,t])),12))}var uj=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Sn=new ge(xN),RN=new Uint8Array(32);RN.fill(0);const fj=Ge.from(-1),FN=Ge.from(0),UN=Ge.from(1),hj=Ge.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function dj(n){const e=at(n),t=e.length%32;return t?Bi([e,RN.slice(t)]):nt(e)}const pj=Qn(UN.toHexString(),32),mj=Qn(FN.toHexString(),32),iI={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},D_=["name","version","chainId","verifyingContract","salt"];function sI(n){return function(e){return typeof e!="string"&&Sn.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const gj={name:sI("name"),version:sI("version"),chainId:function(n){try{return Ge.from(n).toString()}catch{}return Sn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return Nr(n).toLowerCase()}catch{}return Sn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=at(n);if(e.length!==32)throw new Error("bad length");return nt(e)}catch{}return Sn.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function O_(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&Sn.throwArgumentError("invalid numeric width","type",n);const i=hj.mask(t?r-1:r),s=t?i.add(UN).mul(fj):FN;return function(o){const a=Ge.from(o);return(a.lt(s)||a.gt(i))&&Sn.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Qn(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Sn.throwArgumentError("invalid bytes width","type",n),function(r){return at(r).length!==t&&Sn.throwArgumentError(`invalid length for ${n}`,"value",r),dj(r)}}}switch(n){case"address":return function(e){return Qn(Nr(e),32)};case"bool":return function(e){return e?pj:mj};case"bytes":return function(e){return sr(e)};case"string":return function(e){return Ef(e)}}return null}function oI(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class Wi{constructor(e){Ue(this,"types",Object.freeze(is(e))),Ue(this,"_encoderCache",{}),Ue(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(A=>{l[A.name]&&Sn.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(a)}`,"types",e),l[A.name]=!0;const c=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&Sn.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!O_(c)&&(r[c]||Sn.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),r[c].push(a),t[a][c]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?Sn.throwArgumentError("missing primary type","types",e):s.length>1&&Sn.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Ue(this,"primaryType",s[0]);function o(a,l){l[a]&&Sn.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(A=>{r[A]&&(o(A,l),Object.keys(l).forEach(c=>{i[c][A]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=oI(a,e[a])+l.map(A=>oI(A,e[A])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=O_(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Sn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(sr)),sr(Bi(l))}}const r=this.types[e];if(r){const i=Ef(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const A=this.getEncoder(l)(s[a]);return this._types[l]?sr(A):A});return o.unshift(i),Bi(o)}}return Sn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Sn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return sr(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(O_(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Sn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):Sn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Wi(e)}static getPrimaryType(e){return Wi.from(e).primaryType}static hashStruct(e,t,r){return Wi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=iI[r];i||Sn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>D_.indexOf(r.name)-D_.indexOf(i.name)),Wi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Bi(["0x1901",Wi.hashDomain(e),Wi.from(t).hash(r)])}static hash(e,t,r){return sr(Wi.encode(e,t,r))}static resolveNames(e,t,r,i){return uj(this,void 0,void 0,function*(){e=En(e);const s={};e.verifyingContract&&!Et(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Wi.from(t);o.visit(r,(a,l)=>(a==="address"&&!Et(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){Wi.hashDomain(e);const i={},s=[];D_.forEach(l=>{const A=e[l];A!=null&&(i[l]=gj[l](A),s.push({name:l,type:iI[l]}))});const o=Wi.from(t),a=En(t);return a.EIP712Domain?Sn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,A)=>{if(l.match(/^bytes(\d*)/))return nt(at(A));if(l.match(/^u?int/))return Ge.from(A).toString();switch(l){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&Sn.throwArgumentError("invalid string","value",A),A}return Sn.throwArgumentError("unsupported type","type",l)})}}}var LN={},Ft={},lg=PN;function PN(n,e){if(!n)throw new Error(e||"Assertion failed")}PN.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var NB={exports:{}};typeof Object.create=="function"?NB.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:NB.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var vj=NB.exports,yj=lg,wj=vj;Ft.inherits=wj;function xj(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function _j(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):xj(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}Ft.toArray=_j;function bj(n){for(var e="",t=0;t<n.length;t++)e+=ON(n[t].toString(16));return e}Ft.toHex=bj;function DN(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}Ft.htonl=DN;function Bj(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=DN(i)),t+=NN(i.toString(16))}return t}Ft.toHex32=Bj;function ON(n){return n.length===1?"0"+n:n}Ft.zero2=ON;function NN(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}Ft.zero8=NN;function Ej(n,e,t,r){var i=t-e;yj(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;r==="big"?l=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:l=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=l>>>0}return s}Ft.join32=Ej;function Cj(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}Ft.split32=Cj;function Mj(n,e){return n>>>e|n<<32-e}Ft.rotr32=Mj;function Sj(n,e){return n<<e|n>>>32-e}Ft.rotl32=Sj;function Tj(n,e){return n+e>>>0}Ft.sum32=Tj;function Ij(n,e,t){return n+e+t>>>0}Ft.sum32_3=Ij;function Rj(n,e,t,r){return n+e+t+r>>>0}Ft.sum32_4=Rj;function Fj(n,e,t,r,i){return n+e+t+r+i>>>0}Ft.sum32_5=Fj;function Uj(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}Ft.sum64=Uj;function Lj(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}Ft.sum64_hi=Lj;function Pj(n,e,t,r){var i=e+r;return i>>>0}Ft.sum64_lo=Pj;function Dj(n,e,t,r,i,s,o,a){var l=0,A=e;A=A+r>>>0,l+=A<e?1:0,A=A+s>>>0,l+=A<s?1:0,A=A+a>>>0,l+=A<a?1:0;var c=n+t+i+o+l;return c>>>0}Ft.sum64_4_hi=Dj;function Oj(n,e,t,r,i,s,o,a){var l=e+r+s+a;return l>>>0}Ft.sum64_4_lo=Oj;function Nj(n,e,t,r,i,s,o,a,l,A){var c=0,u=e;u=u+r>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+A>>>0,c+=u<A?1:0;var f=n+t+i+o+l+c;return f>>>0}Ft.sum64_5_hi=Nj;function kj(n,e,t,r,i,s,o,a,l,A){var c=e+r+s+a+A;return c>>>0}Ft.sum64_5_lo=kj;function Qj(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}Ft.rotr64_hi=Qj;function Hj(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ft.rotr64_lo=Hj;function zj(n,e,t){return n>>>t}Ft.shr64_hi=zj;function Gj(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}Ft.shr64_lo=Gj;var Wh={},aI=Ft,Vj=lg;function hx(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Wh.BlockHash=hx;hx.prototype.update=function(e,t){if(e=aI.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=aI.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};hx.prototype.digest=function(e){return this.update(this._pad()),Vj(this.pending===null),this._digest(e)};hx.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Kh={},wa={},jj=Ft,ra=jj.rotr32;function Wj(n,e,t,r){if(n===0)return kN(e,t,r);if(n===1||n===3)return HN(e,t,r);if(n===2)return QN(e,t,r)}wa.ft_1=Wj;function kN(n,e,t){return n&e^~n&t}wa.ch32=kN;function QN(n,e,t){return n&e^n&t^e&t}wa.maj32=QN;function HN(n,e,t){return n^e^t}wa.p32=HN;function Kj(n){return ra(n,2)^ra(n,13)^ra(n,22)}wa.s0_256=Kj;function Yj(n){return ra(n,6)^ra(n,11)^ra(n,25)}wa.s1_256=Yj;function $j(n){return ra(n,7)^ra(n,18)^n>>>3}wa.g0_256=$j;function Xj(n){return ra(n,17)^ra(n,19)^n>>>10}wa.g1_256=Xj;var vh=Ft,Zj=Wh,Jj=wa,N_=vh.rotl32,wd=vh.sum32,qj=vh.sum32_5,eW=Jj.ft_1,zN=Zj.BlockHash,tW=[1518500249,1859775393,2400959708,3395469782];function ua(){if(!(this instanceof ua))return new ua;zN.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}vh.inherits(ua,zN);var nW=ua;ua.blockSize=512;ua.outSize=160;ua.hmacStrength=80;ua.padLength=64;ua.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=N_(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4];for(i=0;i<r.length;i++){var c=~~(i/20),u=qj(N_(s,5),eW(c,o,a,l),A,r[i],tW[c]);A=l,l=a,a=N_(o,30),o=s,s=u}this.h[0]=wd(this.h[0],s),this.h[1]=wd(this.h[1],o),this.h[2]=wd(this.h[2],a),this.h[3]=wd(this.h[3],l),this.h[4]=wd(this.h[4],A)};ua.prototype._digest=function(e){return e==="hex"?vh.toHex32(this.h,"big"):vh.split32(this.h,"big")};var yh=Ft,rW=Wh,Yh=wa,iW=lg,to=yh.sum32,sW=yh.sum32_4,oW=yh.sum32_5,aW=Yh.ch32,lW=Yh.maj32,AW=Yh.s0_256,cW=Yh.s1_256,uW=Yh.g0_256,fW=Yh.g1_256,GN=rW.BlockHash,hW=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fa(){if(!(this instanceof fa))return new fa;GN.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=hW,this.W=new Array(64)}yh.inherits(fa,GN);var VN=fa;fa.blockSize=512;fa.outSize=256;fa.hmacStrength=192;fa.padLength=64;fa.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=sW(fW(r[i-2]),r[i-7],uW(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7];for(iW(this.k.length===r.length),i=0;i<r.length;i++){var h=oW(f,cW(A),aW(A,c,u),this.k[i],r[i]),p=to(AW(s),lW(s,o,a));f=u,u=c,c=A,A=to(l,h),l=a,a=o,o=s,s=to(h,p)}this.h[0]=to(this.h[0],s),this.h[1]=to(this.h[1],o),this.h[2]=to(this.h[2],a),this.h[3]=to(this.h[3],l),this.h[4]=to(this.h[4],A),this.h[5]=to(this.h[5],c),this.h[6]=to(this.h[6],u),this.h[7]=to(this.h[7],f)};fa.prototype._digest=function(e){return e==="hex"?yh.toHex32(this.h,"big"):yh.split32(this.h,"big")};var kB=Ft,jN=VN;function dl(){if(!(this instanceof dl))return new dl;jN.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}kB.inherits(dl,jN);var dW=dl;dl.blockSize=512;dl.outSize=224;dl.hmacStrength=192;dl.padLength=64;dl.prototype._digest=function(e){return e==="hex"?kB.toHex32(this.h.slice(0,7),"big"):kB.split32(this.h.slice(0,7),"big")};var Pi=Ft,pW=Wh,mW=lg,ia=Pi.rotr64_hi,sa=Pi.rotr64_lo,WN=Pi.shr64_hi,KN=Pi.shr64_lo,Ul=Pi.sum64,k_=Pi.sum64_hi,Q_=Pi.sum64_lo,gW=Pi.sum64_4_hi,vW=Pi.sum64_4_lo,yW=Pi.sum64_5_hi,wW=Pi.sum64_5_lo,YN=pW.BlockHash,xW=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Eo(){if(!(this instanceof Eo))return new Eo;YN.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=xW,this.W=new Array(160)}Pi.inherits(Eo,YN);var $N=Eo;Eo.blockSize=1024;Eo.outSize=512;Eo.hmacStrength=192;Eo.padLength=128;Eo.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=FW(r[i-4],r[i-3]),o=UW(r[i-4],r[i-3]),a=r[i-14],l=r[i-13],A=IW(r[i-30],r[i-29]),c=RW(r[i-30],r[i-29]),u=r[i-32],f=r[i-31];r[i]=gW(s,o,a,l,A,c,u,f),r[i+1]=vW(s,o,a,l,A,c,u,f)}};Eo.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],A=this.h[5],c=this.h[6],u=this.h[7],f=this.h[8],h=this.h[9],p=this.h[10],d=this.h[11],g=this.h[12],m=this.h[13],y=this.h[14],w=this.h[15];mW(this.k.length===r.length);for(var x=0;x<r.length;x+=2){var _=y,C=w,T=SW(f,h),b=TW(f,h),M=_W(f,h,p,d,g),P=bW(f,h,p,d,g,m),Y=this.k[x],H=this.k[x+1],I=r[x],v=r[x+1],E=yW(_,C,T,b,M,P,Y,H,I,v),F=wW(_,C,T,b,M,P,Y,H,I,v);_=CW(i,s),C=MW(i,s),T=BW(i,s,o,a,l),b=EW(i,s,o,a,l,A);var D=k_(_,C,T,b),O=Q_(_,C,T,b);y=g,w=m,g=p,m=d,p=f,d=h,f=k_(c,u,E,F),h=Q_(u,u,E,F),c=l,u=A,l=o,A=a,o=i,a=s,i=k_(E,F,D,O),s=Q_(E,F,D,O)}Ul(this.h,0,i,s),Ul(this.h,2,o,a),Ul(this.h,4,l,A),Ul(this.h,6,c,u),Ul(this.h,8,f,h),Ul(this.h,10,p,d),Ul(this.h,12,g,m),Ul(this.h,14,y,w)};Eo.prototype._digest=function(e){return e==="hex"?Pi.toHex32(this.h,"big"):Pi.split32(this.h,"big")};function _W(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function bW(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function BW(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function EW(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function CW(n,e){var t=ia(n,e,28),r=ia(e,n,2),i=ia(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function MW(n,e){var t=sa(n,e,28),r=sa(e,n,2),i=sa(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function SW(n,e){var t=ia(n,e,14),r=ia(n,e,18),i=ia(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function TW(n,e){var t=sa(n,e,14),r=sa(n,e,18),i=sa(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function IW(n,e){var t=ia(n,e,1),r=ia(n,e,8),i=WN(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function RW(n,e){var t=sa(n,e,1),r=sa(n,e,8),i=KN(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function FW(n,e){var t=ia(n,e,19),r=ia(e,n,29),i=WN(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function UW(n,e){var t=sa(n,e,19),r=sa(e,n,29),i=KN(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var QB=Ft,XN=$N;function pl(){if(!(this instanceof pl))return new pl;XN.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}QB.inherits(pl,XN);var LW=pl;pl.blockSize=1024;pl.outSize=384;pl.hmacStrength=192;pl.padLength=128;pl.prototype._digest=function(e){return e==="hex"?QB.toHex32(this.h.slice(0,12),"big"):QB.split32(this.h.slice(0,12),"big")};Kh.sha1=nW;Kh.sha224=dW;Kh.sha256=VN;Kh.sha384=LW;Kh.sha512=$N;var ZN={},Nc=Ft,PW=Wh,Qg=Nc.rotl32,lI=Nc.sum32,xd=Nc.sum32_3,AI=Nc.sum32_4,JN=PW.BlockHash;function ha(){if(!(this instanceof ha))return new ha;JN.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Nc.inherits(ha,JN);ZN.ripemd160=ha;ha.blockSize=512;ha.outSize=160;ha.hmacStrength=192;ha.padLength=64;ha.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=r,A=i,c=s,u=o,f=a,h=0;h<80;h++){var p=lI(Qg(AI(r,cI(h,i,s,o),e[NW[h]+t],DW(h)),QW[h]),a);r=a,a=o,o=Qg(s,10),s=i,i=p,p=lI(Qg(AI(l,cI(79-h,A,c,u),e[kW[h]+t],OW(h)),HW[h]),f),l=f,f=u,u=Qg(c,10),c=A,A=p}p=xd(this.h[1],s,u),this.h[1]=xd(this.h[2],o,f),this.h[2]=xd(this.h[3],a,l),this.h[3]=xd(this.h[4],r,A),this.h[4]=xd(this.h[0],i,c),this.h[0]=p};ha.prototype._digest=function(e){return e==="hex"?Nc.toHex32(this.h,"little"):Nc.split32(this.h,"little")};function cI(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function DW(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function OW(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var NW=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],kW=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],QW=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],HW=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],zW=Ft,GW=lg;function wh(n,e,t){if(!(this instanceof wh))return new wh(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(zW.toArray(e,t))}var VW=wh;wh.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),GW(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};wh.prototype.update=function(e,t){return this.inner.update(e,t),this};wh.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=Ft,e.common=Wh,e.sha=Kh,e.ripemd=ZN,e.hmac=VW,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(LN);const Qo=El(LN);function uI(n){return"0x"+Qo.sha256().update(at(n)).digest("hex")}const jW="web/5.7.1";var WW=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};function KW(n,e){return WW(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:at(new Uint8Array(i))}})}var YW=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Ao=new ge(jW);function fI(n){return new Promise(e=>{setTimeout(e,n)})}function Ll(n,e){if(n==null)return null;if(typeof n=="string")return n;if(RM(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return ag(n)}catch{}return nt(n)}return n}function $W(n){return ca(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function XW(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;Ao.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;Ao.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let l=null;const A={method:"GET"};let c=!1,u=2*60*1e3;if(typeof n=="string")l=n;else if(typeof n=="object"){if((n==null||n.url==null)&&Ao.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(u=n.timeout),n.headers)for(const m in n.headers)a[m.toLowerCase()]={key:m,value:String(n.headers[m])},["if-none-match","if-modified-since"].indexOf(m.toLowerCase())>=0&&(c=!0);if(A.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&Ao.throwError("basic authentication requires a secure https url",ge.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const m=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+dN(ca(m))}}n.skipFetchSetup!=null&&(A.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(A.fetchOptions=En(n.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),h=l?l.match(f):null;if(h)try{const m={statusCode:200,statusMessage:"OK",headers:{"content-type":h[1]||"text/plain"},body:h[2]?hN(h[3]):$W(h[3])};let y=m.body;return t&&(y=t(m.body,m)),Promise.resolve(y)}catch(m){Ao.throwError("processing response error",ge.errors.SERVER_ERROR,{body:Ll(h[1],h[2]),error:m,requestBody:null,requestMethod:"GET",url:l})}e&&(A.method="POST",A.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const p={};Object.keys(a).forEach(m=>{const y=a[m];p[y.key]=y.value}),A.headers=p;const d=function(){let m=null;return{promise:new Promise(function(x,_){u&&(m=setTimeout(()=>{m!=null&&(m=null,_(Ao.makeError("timeout",ge.errors.TIMEOUT,{requestBody:Ll(A.body,p["content-type"]),requestMethod:A.method,timeout:u,url:l})))},u))}),cancel:function(){m!=null&&(clearTimeout(m),m=null)}}}(),g=function(){return YW(this,void 0,void 0,function*(){for(let m=0;m<r;m++){let y=null;try{if(y=yield KW(l,A),m<r){if(y.statusCode===301||y.statusCode===302){const x=y.headers.location||"";if(A.method==="GET"&&x.match(/^https:/)){l=y.headers.location;continue}}else if(y.statusCode===429){let x=!0;if(i&&(x=yield i(m,l)),x){let _=0;const C=y.headers["retry-after"];typeof C=="string"&&C.match(/^[1-9][0-9]*$/)?_=parseInt(C)*1e3:_=s*parseInt(String(Math.random()*Math.pow(2,m))),yield fI(_);continue}}}}catch(x){y=x.response,y==null&&(d.cancel(),Ao.throwError("missing response",ge.errors.SERVER_ERROR,{requestBody:Ll(A.body,p["content-type"]),requestMethod:A.method,serverError:x,url:l}))}let w=y.body;if(c&&y.statusCode===304?w=null:!o&&(y.statusCode<200||y.statusCode>=300)&&(d.cancel(),Ao.throwError("bad response",ge.errors.SERVER_ERROR,{status:y.statusCode,headers:y.headers,body:Ll(w,y.headers?y.headers["content-type"]:null),requestBody:Ll(A.body,p["content-type"]),requestMethod:A.method,url:l})),t)try{const x=yield t(w,y);return d.cancel(),x}catch(x){if(x.throttleRetry&&m<r){let _=!0;if(i&&(_=yield i(m,l)),_){const C=s*parseInt(String(Math.random()*Math.pow(2,m)));yield fI(C);continue}}d.cancel(),Ao.throwError("processing response error",ge.errors.SERVER_ERROR,{body:Ll(w,y.headers?y.headers["content-type"]:null),error:x,requestBody:Ll(A.body,p["content-type"]),requestMethod:A.method,url:l})}return d.cancel(),w}return Ao.throwError("failed response",ge.errors.SERVER_ERROR,{requestBody:Ll(A.body,p["content-type"]),requestMethod:A.method,url:l})})}();return Promise.race([d.promise,g])}function dx(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(ag(s))}catch(l){Ao.throwError("invalid JSON",ge.errors.SERVER_ERROR,{body:s,error:l})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=ca(e);const s=typeof n=="string"?{url:n}:En(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=En(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return XW(n,i,r)}function Mf(n,e){return e||(e={}),e=En(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function A(){return n().then(function(c){if(c!==void 0)o()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",A);else if(e.onceBlock)e.onceBlock.once("block",A);else if(!s){if(l++,l>a){o()&&r(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(A,u)}return null},function(c){o()&&r(c)})}A()})}var Ry="qpzry9x8gf2tvdw0s3jn54khce6mua7l",HB={};for(var Hg=0;Hg<Ry.length;Hg++){var H_=Ry.charAt(Hg);if(HB[H_]!==void 0)throw new TypeError(H_+" is ambiguous");HB[H_]=Hg}function qf(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function qN(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=qf(e)^r>>5}for(e=qf(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=qf(e)^i&31}return e}function ZW(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=qN(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=qf(r)^o,i+=Ry.charAt(o)}for(s=0;s<6;++s)r=qf(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=Ry.charAt(a)}return i}function ek(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=qN(s);if(typeof a=="string")return a;for(var l=[],A=0;A<o.length;++A){var c=o.charAt(A),u=HB[c];if(u===void 0)return"Unknown character "+c;a=qf(a)^u,!(A+6>=o.length)&&l.push(u)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:l}}function JW(){var n=ek.apply(null,arguments);if(typeof n=="object")return n}function qW(n){var e=ek.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function px(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],l=0;l<n.length;++l)for(i=i<<e|n[l],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function e9(n){var e=px(n,8,5,!0);if(Array.isArray(e))return e}function t9(n){var e=px(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function n9(n){var e=px(n,5,8,!1);if(Array.isArray(e))return e}function r9(n){var e=px(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var i9={decodeUnsafe:JW,decode:qW,encode:ZW,toWordsUnsafe:e9,toWords:t9,fromWordsUnsafe:n9,fromWords:r9};const hI=El(i9),ti="providers/5.7.2";function $h(n,e,t){return t={path:e,exports:{},require:function(r,i){return s9(r,i??t.path)}},n(t,t.exports),t.exports}function s9(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var LM=tk;function tk(n,e){if(!n)throw new Error(e||"Assertion failed")}tk.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var yo=$h(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var A=0;A<o.length;A++)l[A]=o[A]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var A=0;A<o.length;A+=2)l.push(parseInt(o[A]+o[A+1],16))}else for(var A=0;A<o.length;A++){var c=o.charCodeAt(A),u=c>>8,f=c&255;u?l.push(u,f):l.push(f)}return l}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}t.toHex=s,t.encode=function(a,l){return l==="hex"?s(a):a}}),hs=$h(function(n,e){var t=e;t.assert=LM,t.toArray=yo.toArray,t.zero2=yo.zero2,t.toHex=yo.toHex,t.encode=yo.encode;function r(l,A,c){var u=new Array(Math.max(l.bitLength(),c)+1);u.fill(0);for(var f=1<<A+1,h=l.clone(),p=0;p<u.length;p++){var d,g=h.andln(f-1);h.isOdd()?(g>(f>>1)-1?d=(f>>1)-g:d=g,h.isubn(d)):d=0,u[p]=d,h.iushrn(1)}return u}t.getNAF=r;function i(l,A){var c=[[],[]];l=l.clone(),A=A.clone();for(var u=0,f=0,h;l.cmpn(-u)>0||A.cmpn(-f)>0;){var p=l.andln(3)+u&3,d=A.andln(3)+f&3;p===3&&(p=-1),d===3&&(d=-1);var g;p&1?(h=l.andln(7)+u&7,(h===3||h===5)&&d===2?g=-p:g=p):g=0,c[0].push(g);var m;d&1?(h=A.andln(7)+f&7,(h===3||h===5)&&p===2?m=-d:m=d):m=0,c[1].push(m),2*u===g+1&&(u=1-u),2*f===m+1&&(f=1-f),l.iushrn(1),A.iushrn(1)}return c}t.getJSF=i;function s(l,A,c){var u="_"+A;l.prototype[A]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=s;function o(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=o;function a(l){return new vt(l,"hex","le")}t.intFromLE=a}),Fy=hs.getNAF,o9=hs.getJSF,Uy=hs.assert;function GA(n,e){this.type=n,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var eu=GA;GA.prototype.point=function(){throw new Error("Not implemented")};GA.prototype.validate=function(){throw new Error("Not implemented")};GA.prototype._fixedNafMul=function(e,t){Uy(e.precomputed);var r=e._getDoubles(),i=Fy(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=r.step){l=0;for(var A=a+r.step-1;A>=a;A--)l=(l<<1)+i[A];o.push(l)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<o.length;a++)l=o[a],l===f?u=u.mixedAdd(r.points[a]):l===-f&&(u=u.mixedAdd(r.points[a].neg()));c=c.add(u)}return c.toP()};GA.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=Fy(t,r,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var A=0;l>=0&&o[l]===0;l--)A++;if(l>=0&&A++,a=a.dblp(A),l<0)break;var c=o[l];Uy(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(s[c-1>>1]):a=a.mixedAdd(s[-c-1>>1].neg()):c>0?a=a.add(s[c-1>>1]):a=a.add(s[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};GA.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,A=0,c,u,f;for(c=0;c<i;c++){f=t[c];var h=f._getNAFPoints(e);o[c]=h.wnd,a[c]=h.points}for(c=i-1;c>=1;c-=2){var p=c-1,d=c;if(o[p]!==1||o[d]!==1){l[p]=Fy(r[p],o[p],this._bitLength),l[d]=Fy(r[d],o[d],this._bitLength),A=Math.max(l[p].length,A),A=Math.max(l[d].length,A);continue}var g=[t[p],null,null,t[d]];t[p].y.cmp(t[d].y)===0?(g[1]=t[p].add(t[d]),g[2]=t[p].toJ().mixedAdd(t[d].neg())):t[p].y.cmp(t[d].y.redNeg())===0?(g[1]=t[p].toJ().mixedAdd(t[d]),g[2]=t[p].add(t[d].neg())):(g[1]=t[p].toJ().mixedAdd(t[d]),g[2]=t[p].toJ().mixedAdd(t[d].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=o9(r[p],r[d]);for(A=Math.max(y[0].length,A),l[p]=new Array(A),l[d]=new Array(A),u=0;u<A;u++){var w=y[0][u]|0,x=y[1][u]|0;l[p][u]=m[(w+1)*3+(x+1)],l[d][u]=0,a[p]=g}}var _=this.jpoint(null,null,null),C=this._wnafT4;for(c=A;c>=0;c--){for(var T=0;c>=0;){var b=!0;for(u=0;u<i;u++)C[u]=l[u][c]|0,C[u]!==0&&(b=!1);if(!b)break;T++,c--}if(c>=0&&T++,_=_.dblp(T),c<0)break;for(u=0;u<i;u++){var M=C[u];M!==0&&(M>0?f=a[u][M-1>>1]:M<0&&(f=a[u][-M-1>>1].neg()),f.type==="affine"?_=_.mixedAdd(f):_=_.add(f))}}for(c=0;c<i;c++)a[c]=null;return s?_:_.toP()};function Ws(n,e){this.curve=n,this.type=e,this.precomputed=null}GA.BasePoint=Ws;Ws.prototype.eq=function(){throw new Error("Not implemented")};Ws.prototype.validate=function(){return this.curve.validate(this)};GA.prototype.decodePoint=function(e,t){e=hs.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?Uy(e[e.length-1]%2===0):e[0]===7&&Uy(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};Ws.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ws.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};Ws.prototype.encode=function(e,t){return hs.encode(this._encode(t),e)};Ws.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Ws.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Ws.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};Ws.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Ws.prototype._getBeta=function(){return null};Ws.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var PM=$h(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),a9=hs.assert;function Ks(n){eu.call(this,"short",n),this.a=new vt(n.a,16).toRed(this.red),this.b=new vt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}PM(Ks,eu);var l9=Ks;Ks.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new vt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new vt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],a9(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new vt(a.a,16),b:new vt(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};Ks.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:vt.mont(e),r=new vt(2).toRed(t).redInvm(),i=r.redNeg(),s=new vt(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Ks.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new vt(1),o=new vt(0),a=new vt(0),l=new vt(1),A,c,u,f,h,p,d,g=0,m,y;r.cmpn(0)!==0;){var w=i.div(r);m=i.sub(w.mul(r)),y=a.sub(w.mul(s));var x=l.sub(w.mul(o));if(!u&&m.cmp(t)<0)A=d.neg(),c=s,u=m.neg(),f=y;else if(u&&++g===2)break;d=m,i=r,r=m,a=s,s=y,l=o,o=x}h=m.neg(),p=y;var _=u.sqr().add(f.sqr()),C=h.sqr().add(p.sqr());return C.cmp(_)>=0&&(h=A,p=c),u.negative&&(u=u.neg(),f=f.neg()),h.negative&&(h=h.neg(),p=p.neg()),[{a:u,b:f},{a:h,b:p}]};Ks.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),A=s.mul(r.b),c=o.mul(i.b),u=e.sub(a).sub(l),f=A.add(c).neg();return{k1:u,k2:f}};Ks.prototype.pointFromX=function(e,t){e=new vt(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Ks.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};Ks.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),l=e[o],A=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),A=A.neg(!0)),i[o*2]=l,i[o*2+1]=A,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,s,o*2,r),u=0;u<o*2;u++)i[u]=null,s[u]=null;return c};function Sr(n,e,t,r){eu.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}PM(Sr,eu.BasePoint);Ks.prototype.point=function(e,t,r){return new Sr(this,e,t,r)};Ks.prototype.pointFromJSON=function(e,t){return Sr.fromJSON(this,e,t)};Sr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};Sr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Sr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Sr.prototype.isInfinity=function(){return this.inf};Sr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};Sr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Sr.prototype.getX=function(){return this.x.fromRed()};Sr.prototype.getY=function(){return this.y.fromRed()};Sr.prototype.mul=function(e){return e=new vt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Sr.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Sr.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Sr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Sr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};Sr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Qr(n,e,t,r){eu.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}PM(Qr,eu.BasePoint);Ks.prototype.jpoint=function(e,t,r){return new Qr(this,e,t,r)};Qr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};Qr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Qr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),l=i.redSub(s),A=o.redSub(a);if(l.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),u=c.redMul(l),f=i.redMul(c),h=A.redSqr().redIAdd(u).redISub(f).redISub(f),p=A.redMul(f.redISub(h)).redISub(o.redMul(u)),d=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(h,p,d)};Qr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=a.redSqr(),c=A.redMul(a),u=r.redMul(A),f=l.redSqr().redIAdd(c).redISub(u).redISub(u),h=l.redMul(u.redISub(f)).redISub(s.redMul(c)),p=this.z.redMul(a);return this.curve.jpoint(f,h,p)};Qr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,A=l.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=o.redSqr(),f=c.redSqr(),h=f.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(A)),d=o.redMul(f),g=p.redSqr().redISub(d.redAdd(d)),m=d.redISub(g),y=p.redMul(m);y=y.redIAdd(y).redISub(h);var w=c.redMul(l);t+1<e&&(A=A.redMul(h)),o=g,l=w,c=y}return this.curve.jpoint(o,c.redMul(s),l)};Qr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Qr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),A=l.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=A,t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),p=this.x.redAdd(f).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var d=u.redAdd(u).redIAdd(u),g=d.redSqr(),m=h.redIAdd(h);m=m.redIAdd(m),m=m.redIAdd(m),e=g.redISub(p).redISub(p),t=d.redMul(p.redISub(e)).redISub(m),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};Qr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),A=l.redSqr().redISub(a).redISub(a);e=A;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var d=h.redIAdd(h);d=d.redIAdd(d);var g=d.redAdd(d);e=p.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var m=f.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),t=p.redMul(d.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)};Qr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),A=t.redAdd(t);A=A.redIAdd(A);var c=A.redMul(a),u=l.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),h=a.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=l.redMul(f).redISub(h),d=r.redAdd(r).redMul(i);return this.curve.jpoint(u,p,d)};Qr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),A=i.redIAdd(i);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var c=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(A),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(l).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var h=this.y.redMul(c.redMul(A.redISub(c)).redISub(a.redMul(l)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var p=this.z.redAdd(a).redSqr().redISub(r).redISub(l);return this.curve.jpoint(f,h,p)};Qr.prototype.mul=function(e,t){return e=new vt(e,t),this.curve._wnafMul(this,e)};Qr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Qr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};Qr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Qr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Hv=$h(function(n,e){var t=e;t.base=eu,t.short=l9,t.mont=null,t.edwards=null}),zv=$h(function(n,e){var t=e,r=hs.assert;function i(a){a.type==="short"?this.curve=new Hv.short(a):a.type==="edwards"?this.curve=new Hv.edwards(a):this.curve=new Hv.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var A=new i(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:A}),A}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Qo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Qo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Qo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Qo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Qo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qo.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Qo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function FA(n){if(!(this instanceof FA))return new FA(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=yo.toArray(n.entropy,n.entropyEnc||"hex"),t=yo.toArray(n.nonce,n.nonceEnc||"hex"),r=yo.toArray(n.pers,n.persEnc||"hex");LM(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var nk=FA;FA.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};FA.prototype._hmac=function(){return new Qo.hmac(this.hash,this.K)};FA.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};FA.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=yo.toArray(e,t),r=yo.toArray(r,i),LM(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};FA.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=yo.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,yo.encode(o,t)};var zB=hs.assert;function Xr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var DM=Xr;Xr.fromPublic=function(e,t,r){return t instanceof Xr?t:new Xr(e,{pub:t,pubEnc:r})};Xr.fromPrivate=function(e,t,r){return t instanceof Xr?t:new Xr(e,{priv:t,privEnc:r})};Xr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Xr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Xr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Xr.prototype._importPrivate=function(e,t){this.priv=new vt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Xr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?zB(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&zB(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Xr.prototype.derive=function(e){return e.validate()||zB(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Xr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};Xr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Xr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var A9=hs.assert;function mx(n,e){if(n instanceof mx)return n;this._importDER(n,e)||(A9(n.r&&n.s,"Signature without r or s"),this.r=new vt(n.r,16),this.s=new vt(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var gx=mx;function c9(){this.place=0}function z_(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function dI(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}mx.prototype._importDER=function(e,t){e=hs.toArray(e,t);var r=new c9;if(e[r.place++]!==48)return!1;var i=z_(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=z_(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=z_(e,r);if(a===!1||e.length!==a+r.place)return!1;var l=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new vt(o),this.s=new vt(l),this.recoveryParam=null,!0};function G_(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}mx.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=dI(t),r=dI(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];G_(i,t.length),i=i.concat(t),i.push(2),G_(i,r.length);var s=i.concat(r),o=[48];return G_(o,s.length),o=o.concat(s),hs.encode(o,e)};var u9=function(){throw new Error("unsupported")},rk=hs.assert;function Hs(n){if(!(this instanceof Hs))return new Hs(n);typeof n=="string"&&(rk(Object.prototype.hasOwnProperty.call(zv,n),"Unknown curve "+n),n=zv[n]),n instanceof zv.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var f9=Hs;Hs.prototype.keyPair=function(e){return new DM(this,e)};Hs.prototype.keyFromPrivate=function(e,t){return DM.fromPrivate(this,e,t)};Hs.prototype.keyFromPublic=function(e,t){return DM.fromPublic(this,e,t)};Hs.prototype.genKeyPair=function(e){e||(e={});for(var t=new nk({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||u9(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new vt(2));;){var s=new vt(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Hs.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Hs.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new vt(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),l=new nk({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),A=this.n.sub(new vt(1)),c=0;;c++){var u=i.k?i.k(c):new vt(l.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(A)>=0)){var f=this.g.mul(u);if(!f.isInfinity()){var h=f.getX(),p=h.umod(this.n);if(p.cmpn(0)!==0){var d=u.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(d=d.umod(this.n),d.cmpn(0)!==0){var g=(f.getY().isOdd()?1:0)|(h.cmp(p)!==0?2:0);return i.canonical&&d.cmp(this.nh)>0&&(d=this.n.sub(d),g^=1),new gx({r:p,s:d,recoveryParam:g})}}}}}};Hs.prototype.verify=function(e,t,r,i){e=this._truncateToN(new vt(e,16)),r=this.keyFromPublic(r,i),t=new gx(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),l=a.mul(e).umod(this.n),A=a.mul(s).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.eqXToP(s)):(c=this.g.mulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.getX().umod(this.n).cmp(s)===0)};Hs.prototype.recoverPubKey=function(n,e,t,r){rk((3&t)===t,"The recovery param is more than two bits"),e=new gx(e,r);var i=this.n,s=new vt(n),o=e.r,a=e.s,l=t&1,A=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),f=a.mul(c).umod(i);return this.g.mulAdd(u,o,f)};Hs.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new gx(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var h9=$h(function(n,e){var t=e;t.version="6.5.4",t.utils=hs,t.rand=function(){throw new Error("unsupported")},t.curve=Hv,t.curves=zv,t.ec=f9,t.eddsa=null}),d9=h9.ec;const p9="signing-key/5.7.0",GB=new ge(p9);let V_=null;function jo(){return V_||(V_=new d9("secp256k1")),V_}class m9{constructor(e){Ue(this,"curve","secp256k1"),Ue(this,"privateKey",nt(e)),Oc(this.privateKey)!==32&&GB.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=jo().keyFromPrivate(at(this.privateKey));Ue(this,"publicKey","0x"+t.getPublic(!1,"hex")),Ue(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Ue(this,"_isSigningKey",!0)}_addPoint(e){const t=jo().keyFromPublic(at(this.publicKey)),r=jo().keyFromPublic(at(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=jo().keyFromPrivate(at(this.privateKey)),r=at(e);r.length!==32&&GB.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return cx({recoveryParam:i.recoveryParam,r:Qn("0x"+i.r.toString(16),32),s:Qn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=jo().keyFromPrivate(at(this.privateKey)),r=jo().keyFromPublic(at(ik(e)));return Qn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function g9(n,e){const t=cx(e),r={r:at(t.r),s:at(t.s)};return"0x"+jo().recoverPubKey(at(n),r,t.recoveryParam).encode("hex",!1)}function ik(n,e){const t=at(n);if(t.length===32){const r=new m9(t);return e?"0x"+jo().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?nt(t):"0x"+jo().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+jo().keyFromPublic(t).getPublic(!0,"hex"):nt(t)}return GB.throwArgumentError("invalid public or private key","key","[REDACTED]")}const v9="transactions/5.7.0",Cl=new ge(v9);var pI;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(pI||(pI={}));function OM(n){return n==="0x"?null:Nr(n)}function Kr(n){return n==="0x"?mN:Ge.from(n)}function y9(n){const e=ik(n);return Nr(jr(sr(jr(e,1)),12))}function sk(n,e){return y9(g9(at(n),e))}function Xi(n,e){const t=gh(Ge.from(n).toHexString());return t.length>32&&Cl.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function j_(n,e){return{address:Nr(n),storageKeys:(e||[]).map((t,r)=>(Oc(t)!==32&&Cl.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function tu(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Cl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),j_(t[0],t[1])):j_(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return j_(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function ok(n){return tu(n).map(e=>[e.address,e.storageKeys])}function w9(n,e){if(n.gasPrice!=null){const r=Ge.from(n.gasPrice),i=Ge.from(n.maxFeePerGas||0);r.eq(i)||Cl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[Xi(n.chainId||0,"chainId"),Xi(n.nonce||0,"nonce"),Xi(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Xi(n.maxFeePerGas||0,"maxFeePerGas"),Xi(n.gasLimit||0,"gasLimit"),n.to!=null?Nr(n.to):"0x",Xi(n.value||0,"value"),n.data||"0x",ok(n.accessList||[])];if(e){const r=cx(e);t.push(Xi(r.recoveryParam,"recoveryParam")),t.push(gh(r.r)),t.push(gh(r.s))}return Bi(["0x02",fx(t)])}function x9(n,e){const t=[Xi(n.chainId||0,"chainId"),Xi(n.nonce||0,"nonce"),Xi(n.gasPrice||0,"gasPrice"),Xi(n.gasLimit||0,"gasLimit"),n.to!=null?Nr(n.to):"0x",Xi(n.value||0,"value"),n.data||"0x",ok(n.accessList||[])];if(e){const r=cx(e);t.push(Xi(r.recoveryParam,"recoveryParam")),t.push(gh(r.r)),t.push(gh(r.s))}return Bi(["0x01",fx(t)])}function ak(n,e,t){try{const r=Kr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Cl.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Qn(e[1],32),n.s=Qn(e[2],32);try{const r=sr(t(n));n.from=sk(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function _9(n){const e=FM(n.slice(1));e.length!==9&&e.length!==12&&Cl.throwArgumentError("invalid component count for transaction type: 2","payload",nt(n));const t=Kr(e[2]),r=Kr(e[3]),i={type:2,chainId:Kr(e[0]).toNumber(),nonce:Kr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:Kr(e[4]),to:OM(e[5]),value:Kr(e[6]),data:e[7],accessList:tu(e[8])};return e.length===9||(i.hash=sr(n),ak(i,e.slice(9),w9)),i}function b9(n){const e=FM(n.slice(1));e.length!==8&&e.length!==11&&Cl.throwArgumentError("invalid component count for transaction type: 1","payload",nt(n));const t={type:1,chainId:Kr(e[0]).toNumber(),nonce:Kr(e[1]).toNumber(),gasPrice:Kr(e[2]),gasLimit:Kr(e[3]),to:OM(e[4]),value:Kr(e[5]),data:e[6],accessList:tu(e[7])};return e.length===8||(t.hash=sr(n),ak(t,e.slice(8),x9)),t}function B9(n){const e=FM(n);e.length!==9&&e.length!==6&&Cl.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:Kr(e[0]).toNumber(),gasPrice:Kr(e[1]),gasLimit:Kr(e[2]),to:OM(e[3]),value:Kr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=Ge.from(e[6]).toNumber()}catch{return t}if(t.r=Qn(e[7],32),t.s=Qn(e[8],32),Ge.from(t.r).isZero()&&Ge.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(nt(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=sr(fx(i));try{t.from=sk(s,{r:nt(t.r),s:nt(t.s),recoveryParam:r})}catch{}t.hash=sr(n)}return t.type=null,t}function E9(n){const e=at(n);if(e[0]>127)return B9(e);switch(e[0]){case 1:return b9(e);case 2:return _9(e)}return Cl.throwError(`unsupported transaction type: ${e[0]}`,ge.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const _d=new ge(ti);let mI=class et{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),A=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:o,type:A,accessList:et.allowNull(this.accessList.bind(this),null),blockHash:et.allowNull(o,null),blockNumber:et.allowNull(l,null),transactionIndex:et.allowNull(l,null),confirmations:et.allowNull(l,null),from:t,gasPrice:et.allowNull(r),maxPriorityFeePerGas:et.allowNull(r),maxFeePerGas:et.allowNull(r),gasLimit:r,to:et.allowNull(t,null),value:r,nonce:l,data:s,r:et.allowNull(this.uint256),s:et.allowNull(this.uint256),v:et.allowNull(l),creates:et.allowNull(t,null),raw:et.allowNull(s)},e.transactionRequest={from:et.allowNull(t),nonce:et.allowNull(l),gasLimit:et.allowNull(r),gasPrice:et.allowNull(r),maxPriorityFeePerGas:et.allowNull(r),maxFeePerGas:et.allowNull(r),to:et.allowNull(t),value:et.allowNull(r),data:et.allowNull(c),type:et.allowNull(l),accessList:et.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:et.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:et.allowNull(this.address,null),from:et.allowNull(this.address,null),contractAddress:et.allowNull(t,null),transactionIndex:l,root:et.allowNull(a),gasUsed:r,logsBloom:et.allowNull(s),blockHash:o,transactionHash:o,logs:et.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:et.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:et.allowNull(r),status:et.allowNull(l),type:A},e.block={hash:et.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:et.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:et.allowNull(t),extraData:s,transactions:et.allowNull(et.arrayOf(o)),baseFeePerGas:et.allowNull(r)},e.blockWithTransactions=En(e.block),e.blockWithTransactions.transactions=et.allowNull(et.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:et.allowNull(i,void 0),toBlock:et.allowNull(i,void 0),blockHash:et.allowNull(o,void 0),address:et.allowNull(t,void 0),topics:et.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:et.allowNull(l),blockHash:et.allowNull(o),transactionIndex:l,removed:et.allowNull(this.boolean.bind(this)),address:t,data:et.allowFalsish(s,"0x"),topics:et.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return tu(e||[])}number(e){return e==="0x"?0:Ge.from(e).toNumber()}type(e){return e==="0x"||e==null?0:Ge.from(e).toNumber()}bigNumber(e){return Ge.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),Et(e))?e.toLowerCase():_d.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Nr(e)}callAddress(e){if(!Et(e,32))return null;const t=Nr(jr(e,12));return t===bV?null:t}contractAddress(e){return IN(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Et(e))return Ax(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return Oc(r)!==32?_d.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=Ge.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!Et(e))throw new Error("invalid uint256");return Qn(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=et.check(t,e);return i._difficulty=r==null?null:Ge.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return et.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&Ge.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=et.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;Et(r)&&(r=Ge.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),Et(r)&&(r=Ge.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return E9(e)}receiptLog(e){return et.check(this.formats.receiptLog,e)}receipt(e){const t=et.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=Ge.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&_d.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):_d.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&_d.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return et.check(this.formats.filter,e)}filterLog(e){return et.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}};function C9(n){return n&&typeof n.isCommunityResource=="function"}function gI(n){return C9(n)&&n.isCommunityResource()}let vI=!1;function vx(){vI||(vI=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var pt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Bt=new ge(ti),M9=10;function yI(n){return n==null?"null":(Oc(n)!==32&&Bt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function wI(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[yI(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return yI(e)}).join("&")}function S9(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function gu(n){if(typeof n=="string"){if(n=n.toLowerCase(),Oc(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+wI(n);if(wV.isForkEvent(n))throw Bt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+wI(n.topics||[])}throw new Error("invalid event - "+n)}function bd(){return new Date().getTime()}function xI(n){return new Promise(e=>{setTimeout(e,n)})}const T9=["block","network","pending","poll"];let I9=class{constructor(e,t,r){Ue(this,"tag",e),Ue(this,"listener",t),Ue(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=S9(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||T9.indexOf(this.tag)>=0}};const R9={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function W_(n){return Qn(Ge.from(n).toHexString(),32)}function _I(n){return OB.encode(es([n,jr(uI(uI(n)),0,4)]))}const lk=new RegExp("^(ipfs)://(.*)$","i"),bI=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),lk,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Gv(n,e){try{return ag(fm(n,e))}catch{}return null}function fm(n,e){if(n==="0x")return null;const t=Ge.from(jr(n,e,e+32)).toNumber(),r=Ge.from(jr(n,t,t+32)).toNumber();return jr(n,t+32,t+32+r)}function K_(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):Bt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function BI(n){const e=at(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function F9(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function Ak(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=at(n[r]);e[r]=BI(t),e.push(BI(i.length)),e.push(F9(i)),t+=32+Math.ceil(i.length/32)*32}return Bi(e)}class EI{constructor(e,t,r,i){Ue(this,"provider",e),Ue(this,"name",r),Ue(this,"address",e.formatter.address(t)),Ue(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>Ge.from(e).eq(1)).catch(e=>{if(e.code===ge.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return pt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Bi([e,Qv(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=Bi(["0x9061b923",Ak([sj(this.name),r.data])]));try{let s=yield this.provider.call(r);return at(s).length%32===4&&Bt.throwError("resolver threw error",ge.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=fm(s,0)),s}catch(s){if(s.code===ge.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return pt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?fm(r,0):null})}_getAddress(e,t){const r=R9[String(e)];if(r==null&&Bt.throwError(`unsupported coin type: ${e}`,ge.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=at(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return _I(es([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return _I(es([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=hI.toWords(i.slice(2));return a.unshift(o),hI.encode(r.prefix,a)}}return null}getAddress(e){return pt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===MV?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===ge.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",W_(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&Bt.throwError("invalid or unsupported coin data",ge.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return pt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<bI.length;r++){const i=t.match(bI[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:K_(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const A=yield this.provider.formatter.address(l[0]),c=Qn(Ge.from(l[1]).toHexString(),32);if(s==="erc721"){const d=this.provider.formatter.callAddress(yield this.provider.call({to:A,data:Bi(["0x6352211e",c])}));if(a!==d)return null;e.push({type:"owner",content:d})}else if(s==="erc1155"){const d=Ge.from(yield this.provider.call({to:A,data:Bi(["0x00fdd58e",Qn(a,32),c])}));if(d.isZero())return null;e.push({type:"balance",content:d.toString()})}const u={to:this.provider.formatter.address(l[0]),data:Bi([o,c])};let f=Gv(yield this.provider.call(u),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),s==="erc1155"&&(f=f.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=K_(f)),e.push({type:"metadata-url",content:f});const h=yield dx(f);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return null;if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(lk)==null)return null;e.push({type:"url-ipfs",content:p}),p=K_(p)}return e.push({type:"url",content:p}),{linkage:e,url:p}}}}}catch{}return null})}getContentHash(){return pt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+OB.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+OB.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+dN("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return Bt.throwError("invalid or unsupported content hash data",ge.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return pt(this,void 0,void 0,function*(){let t=ca(e);t=es([W_(64),W_(t.length),t]),t.length%32!==0&&(t=es([t,Qn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",nt(t));return r==null||r==="0x"?null:ag(r)})}}let Y_=null,U9=1;class NM extends og{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ue(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=ts(new.target,"getNetwork")(e);t?(Ue(this,"_network",t),this.emit("network",t,null)):Bt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return pt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||Bt.throwError("no network detected",ge.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ue(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Mf(()=>this._ready().then(e=>e,e=>{if(!(e.code===ge.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Y_==null&&(Y_=new mI),Y_}static getNetwork(e){return fN(e??"homestead")}ccipReadFetch(e,t,r){return pt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],A=l.replace("{sender}",i).replace("{data}",s),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield dx({url:A,errorPassThrough:!0},c,(h,p)=>(h.status=p.statusCode,h));if(u.data)return u.data;const f=u.message||"unknown error";if(u.status>=400&&u.status<500)return Bt.throwError(`response not found during CCIP fetch: ${f}`,ge.errors.SERVER_ERROR,{url:l,errorMessage:f});o.push(f)}return Bt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,ge.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return pt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(bd()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=bd(),r=tr({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=bd();return i=Ge.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return pt(this,void 0,void 0,function*(){const e=U9++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Bt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Bt.makeError("network block skew detected",ge.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(A=>{A.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=A.blockNumber),this._emitted["b:"+A.blockHash]=A.blockNumber,this._emitted["t:"+A.transactionHash]=A.blockNumber,this.emit(s,A)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return pt(this,void 0,void 0,function*(){return Bt.throwError("provider does not support network detection",ge.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return pt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield xI(0),this._network;const r=Bt.makeError("underlying network changed",ge.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=bd();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=bd(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return pt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return pt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let A=!1;const c=function(){return A?!0:(A=!0,l.forEach(f=>{f()}),!1)},u=f=>{f.confirmations<t||c()||o(f)};if(this.on(e,u),l.push(()=>{this.removeListener(e,u)}),i){let f=i.startBlock,h=null;const p=d=>pt(this,void 0,void 0,function*(){A||(yield xI(1e3),this.getTransactionCount(i.from).then(g=>pt(this,void 0,void 0,function*(){if(!A){if(g<=i.nonce)f=d;else{{const m=yield this.getTransaction(e);if(m&&m.blockNumber!=null)return}for(h==null&&(h=f-3,h<i.startBlock&&(h=i.startBlock));h<=d;){if(A)return;const m=yield this.getBlockWithTransactions(h);for(let y=0;y<m.transactions.length;y++){const w=m.transactions[y];if(w.hash===e)return;if(w.from===i.from&&w.nonce===i.nonce){if(A)return;const x=yield this.waitForTransaction(w.hash,t);if(c())return;let _="replaced";w.data===i.data&&w.to===i.to&&w.value.eq(i.value)?_="repriced":w.data==="0x"&&w.from===w.to&&w.value.isZero()&&(_="cancelled"),a(Bt.makeError("transaction was replaced",ge.errors.TRANSACTION_REPLACED,{cancelled:_==="replaced"||_==="cancelled",reason:_,replacement:this._wrapTransaction(w),hash:e,receipt:x}));return}}h++}}A||this.once("block",p)}}),g=>{A||this.once("block",p)}))});if(A)return;this.once("block",p),l.push(()=>{this.removeListener("block",p)})}if(typeof r=="number"&&r>0){const f=setTimeout(()=>{c()||a(Bt.makeError("timeout exceeded",ge.errors.TIMEOUT,{timeout:r}))},r);f.unref&&f.unref(),l.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return pt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return Ge.from(e)}catch(t){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Ge.from(i)}catch(s){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Ge.from(i).toNumber()}catch(s){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return nt(i)}catch(s){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield tr({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>Ax(o))}),s=yield this.perform("getStorageAt",i);try{return nt(s)}catch(o){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&Oc(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&Bt.throwError("Transaction hash mismatch from Provider.sendTransaction.",ge.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>pt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&Bt.throwError("transaction failed",ge.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>nt(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return pt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?Ge.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?nt(s):null))}),this.formatter.transactionRequest(yield tr(r))})}_getFilter(e){return pt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield tr(t))})}_call(e,t,r){return pt(this,void 0,void 0,function*(){r>=M9&&Bt.throwError("CCIP read exceeded maximum redirections",ge.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Oc(s)%32===4)try{const o=jr(s,4),a=jr(o,0,32);Ge.from(a).eq(i)||Bt.throwError("CCIP Read sender did not match",ge.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],A=Ge.from(jr(o,32,64)).toNumber(),c=Ge.from(jr(o,A,A+32)).toNumber(),u=jr(o,A+32);for(let m=0;m<c;m++){const y=Gv(u,m*32);y==null&&Bt.throwError("CCIP Read contained corrupt URL string",ge.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(y)}const f=fm(o,64);Ge.from(jr(o,100,128)).isZero()||Bt.throwError("CCIP Read callback selector included junk",ge.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const h=jr(o,96,100),p=fm(o,128),d=yield this.ccipReadFetch(e,f,l);d==null&&Bt.throwError("CCIP Read disabled or provided no URLs",ge.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g={to:i,data:Bi([h,Ak([d,p])])};return this._call(g,t,r+1)}catch(o){if(o.code===ge.errors.SERVER_ERROR)throw o}try{return nt(s)}catch(o){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield tr({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield tr({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Ge.from(r)}catch(i){return Bt.throwError("bad result from backend",ge.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return pt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&Bt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&Bt.throwError("ENS name not configured",ge.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(Et(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Et(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{Bt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Mf(()=>pt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const A=s.transactions[l];if(A.blockNumber==null)A.confirmations=0;else if(A.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-A.blockNumber+1;c<=0&&(c=1),A.confirmations=c}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Mf(()=>pt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Mf(()=>pt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return pt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield tr({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),mI.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return pt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return pt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&Bt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return pt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new EI(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return pt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Bt.throwError("network does not support ENS",ge.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Qv(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return pt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(Et(e))throw r}typeof e!="string"&&Bt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return pt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=Gv(yield this.call({to:r,data:"0x691f3431"+Qv(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return pt(this,void 0,void 0,function*(){let t=null;if(Et(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new EI(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==ge.errors.CALL_EXCEPTION)throw a}try{const a=Gv(yield this.call({to:o,data:"0x691f3431"+Qv(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==ge.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return Bt.throwError(e+" not implemented",ge.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new I9(gu(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=gu(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=gu(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=gu(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=gu(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=gu(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}const L9="abstract-signer/5.7.0";var no=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const ws=new ge(L9),P9=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],D9=[ge.errors.INSUFFICIENT_FUNDS,ge.errors.NONCE_EXPIRED,ge.errors.REPLACEMENT_UNDERPRICED];class Ag{constructor(){ws.checkAbstract(new.target,Ag),Ue(this,"_isSigner",!0)}getBalance(e){return no(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return no(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return no(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield tr(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return no(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield tr(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return no(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return no(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return no(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return no(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return no(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)P9.indexOf(r)===-1&&ws.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=En(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&ws.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return no(this,void 0,void 0,function*(){const t=yield tr(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>no(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&ws.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?ws.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&ws.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&ws.throwError("network does not support EIP-1559",ge.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):ws.throwError("failed to get consistent fee data",ge.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(D9.indexOf(i.code)>=0)throw i;return ws.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ge.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&ws.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield tr(t)})}_checkProvider(e){this.provider||ws.throwError("missing provider",ge.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class kM extends Ag{constructor(e,t){super(),Ue(this,"address",e),Ue(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{ws.throwError(e,ge.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new kM(this.address,e)}}var Wa=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const nr=new ge(ti),O9=["call","estimateGas"];function Hp(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=Et(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=Hp(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return Hp(JSON.parse(n),e)}catch{}return null}function ck(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=Hp(e,!0);if(s)return s.data;nr.throwError("missing revert data in call exception; Transaction reverted without a reason string",ge.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=Hp(e.body,!1);s==null&&(s=Hp(e,!1)),s&&nr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ge.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===ge.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&nr.throwError("insufficient funds for intrinsic transaction cost",ge.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&nr.throwError("nonce has already been used",ge.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&nr.throwError("replacement fee too low",ge.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&nr.throwError("legacy pre-eip-155 transactions not supported",ge.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),O9.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&nr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ge.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function CI(n){return new Promise(function(e){setTimeout(e,n)})}function N9(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function Bd(n){return n&&n.toLowerCase()}const VB={};class uk extends Ag{constructor(e,t,r){if(super(),e!==VB)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ue(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Ue(this,"_address",this.provider.formatter.address(r)),Ue(this,"_index",null)):typeof r=="number"?(Ue(this,"_index",r),Ue(this,"_address",null)):nr.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return nr.throwError("cannot alter JSON-RPC Signer connection",ge.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new k9(VB,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&nr.throwError("unknown account #"+this._index,ge.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=En(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=En(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>Wa(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&nr.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),tr({tx:tr(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&nr.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&nr.throwError("user rejected transaction",ge.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),ck("sendTransaction",o,s)))})}signTransaction(e){return nr.throwError("signing transactions is unsupported",ge.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Wa(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Mf(()=>Wa(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return Wa(this,void 0,void 0,function*(){const t=typeof e=="string"?ca(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[nt(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&nr.throwError("user rejected signing",ge.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return Wa(this,void 0,void 0,function*(){const t=typeof e=="string"?ca(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),nt(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&nr.throwError("user rejected signing",ge.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return Wa(this,void 0,void 0,function*(){const i=yield Wi.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Wi.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&nr.throwError("user rejected signing",ge.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return Wa(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class k9 extends uk{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const Q9={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class hm extends NM{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=ts(this.constructor,"defaultUrl")()),typeof e=="string"?Ue(this,"connection",Object.freeze({url:e})):Ue(this,"connection",Object.freeze(En(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Wa(this,void 0,void 0,function*(){yield CI(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=ts(this.constructor,"getNetwork");try{return t(Ge.from(e).toNumber())}catch(r){return nr.throwError("could not detect network",ge.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return nr.throwError("could not detect network",ge.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new uk(VB,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:is(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=dx(this.connection,JSON.stringify(r),N9).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Bd(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Bd(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Bd(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Bd(t.address),Qn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ts(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ts(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=Bd(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return Wa(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&Ge.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=En(t),t.transaction=En(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&nr.throwError(e+" not implemented",ge.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return ck(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return CI(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=En(Q9);if(t)for(const s in t)t[s]&&(r[s]=!0);dV(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=Ax(Ge.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=nt(e[s]))}),e.accessList&&(i.accessList=tu(e.accessList)),i}}let zp=null;try{if(zp=WebSocket,zp==null)throw new Error("inject please")}catch{const e=new ge(ti);zp=function(){e.throwError("WebSockets not supported in this environment",ge.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var $_=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const zg=new ge(ti);let H9=1;class QM extends hm{constructor(e,t){t==="any"&&zg.throwError("WebSocketProvider does not support 'any' network yet",ge.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Ue(this,"_websocket",new zp(this.connection.url)):Ue(this,"_websocket",e),Ue(this,"_requests",{}),Ue(this,"_subs",{}),Ue(this,"_subIds",{}),Ue(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),l=this._requests[a];if(delete this._requests[a],o.result!==void 0)l.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:o.result,provider:this});else{let A=null;o.error?(A=new Error(o.error.message||"unknown error"),Ue(A,"code",o.error.code||null),Ue(A,"response",s)):A=new Error("unknown error"),l.callback(A,void 0),this.emit("debug",{action:"response",error:A,request:JSON.parse(l.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){zg.throwError("cannot reset events block on WebSocketProvider",ge.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){zg.throwError("cannot set polling interval on WebSocketProvider",ge.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return $_(this,void 0,void 0,function*(){return null})}set polling(e){e&&zg.throwError("cannot set polling on WebSocketProvider",ge.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=H9++;return new Promise((i,s)=>{function o(l,A){return l?s(l):i(A)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(r)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return $_(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=Ge.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return $_(this,void 0,void 0,function*(){this.websocket.readyState===zp.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var z9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const pp=new ge(ti);class fk extends hm{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return z9(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||pp.throwError("no network detected",ge.errors.UNKNOWN_ERROR,{}),this._network==null&&(Ue(this,"_network",t),this.emit("network",t,null))),t})}}class VA extends fk{constructor(e,t){pp.checkAbstract(new.target,VA),e=ts(new.target,"getNetwork")(e),t=ts(new.target,"getApiKey")(t);const r=ts(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?Ue(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{Ue(this,i,t[i])})}_startPending(){pp.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return pp.throwError("API provider does not support signing",ge.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return pp.throwError("not implemented; sub-classes must override getUrl",ge.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const MI=new ge(ti),Vv="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class G9 extends QM{constructor(e,t){const r=new hk(e,t),i=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,r.network),Ue(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Vv}}class hk extends VA{static getWebSocketProvider(e,t){return new G9(e,t)}static getApiKey(e){return e==null?Vv:(e&&typeof e!="string"&&MI.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:MI.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===Vv&&vx(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Vv}}const V9=new ge(ti),Gg="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function j9(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return V9.throwArgumentError("unsupported network","name",n)}class W9 extends VA{isCommunityResource(){return this.apiKey===Gg}static getApiKey(e){return e??Gg}static getUrl(e,t){t==null&&(t=Gg);const r={allowGzip:!0,url:"https://"+j9(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===Gg&&vx(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var K9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const SI=new ge(ti);class Y9 extends VA{static getApiKey(e){return e!=null&&SI.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:SI.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return K9(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var Vg=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const tA=new ge(ti);function TI(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=Ax(nt(r)):t==="accessList"?r="["+tu(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":r=nt(r),e[t]=r)}return e}function $9(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||typeof n.message!="string"||!n.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function II(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function RI(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}function X_(n,e,t){if(n==="call"&&e.code===ge.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),Et(s))return s;tA.throwError("missing revert data in call exception",ge.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===ge.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&tA.throwError("insufficient funds for intrinsic transaction cost",ge.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&tA.throwError("nonce has already been used",ge.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&tA.throwError("replacement fee too low",ge.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&tA.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",ge.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class X9 extends NM{constructor(e,t){super(e),Ue(this,"baseUrl",this.getBaseUrl()),Ue(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return tA.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Vg(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?II:$9;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&vx(),Promise.resolve(!0))};let l=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(s).map(c=>`${c}=${s[c]}`).join("&"));const A=yield dx(a,l,o||II);return this.emit("debug",{action:"response",request:i,response:is(A),provider:this}),A})}detectNetwork(){return Vg(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Vg(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>X_("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=TI(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return X_("call",s,t.transaction)}}case"estimateGas":{const i=TI(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return X_("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=RI(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=RI(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&tA.throwError("unsupported topic count",ge.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&tA.throwError("unsupported topic format",ge.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const l=s[a];if(l.blockHash==null){if(o[l.blockNumber]==null){const A=yield this.getBlock(l.blockNumber);A&&(o[l.blockNumber]=A.hash)}l.blockHash=o[l.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Vg(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(l){o[l]==""&&delete o[l]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}function Z9(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}var Ly=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const vc=new ge(ti);function jg(){return new Date().getTime()}function FI(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||vc.throwArgumentError("provider mismatch","networks",n):e=r}return e}function UI(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function Sf(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(Ge.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>Sf(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return typeof r=="function"?r="[function]":r=Sf(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let J9=1;function LI(n){let e=null,t=null,r=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,n)});const i=o=>(r=r.then(o),r);function s(){return r}return{cancel:e,getPromise:s,wait:i}}const q9=[ge.errors.CALL_EXCEPTION,ge.errors.INSUFFICIENT_FUNDS,ge.errors.NONCE_EXPIRED,ge.errors.REPLACEMENT_UNDERPRICED,ge.errors.UNPREDICTABLE_GAS_LIMIT],e7=["address","args","errorArgs","errorSignature","method","transaction"];function Wg(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function t7(n,e){return function(t){const r={};t.forEach(s=>{const o=n(s.result);r[o]||(r[o]={count:0,result:s.result}),r[o].count++});const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];if(o.count>=e)return o.result}}}function n7(n,e,t){let r=Sf;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=UI(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return UI(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:(i=En(i),i.confirmations=-1,Sf(i))};break;case"getBlock":t.includeTransactions?r=function(i){return i==null?null:(i=En(i),i.transactions=i.transactions.map(s=>(s=En(s),s.confirmations=-1,s)),Sf(i))}:r=function(i){return i==null?null:Sf(i)};break;default:throw new Error("unknown method: "+e)}return t7(r,n.quorum)}function Ed(n,e){return Ly(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:Mf(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function r7(n,e,t,r){return Ly(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&Et(r.blockTag)&&(i=yield Ed(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&Et(r.blockTag)&&(i=yield Ed(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&Et(r.blockTag)&&(i=yield Ed(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&Et(r.blockTag)&&(i=yield Ed(n,e)),t==="call"&&r.blockTag?i[t](r.transaction,r.blockTag):i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&Et(s.fromBlock)||s.toBlock&&Et(s.toBlock))&&(i=yield Ed(n,e)),i.getLogs(s)}}return vc.throwError("unknown method error",ge.errors.UNKNOWN_ERROR,{method:t,params:r})})}class i7 extends NM{constructor(e,t){e.length===0&&vc.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(og.isProvider(o)){const c=gI(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:c,priority:1})}const l=En(o);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=gI(o)?2e3:750),l.weight==null&&(l.weight=1);const A=l.weight;return(A%1||A>512||A<1)&&vc.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,A),Object.freeze(l)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&vc.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=FI(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),Ue(this,"providerConfigs",Object.freeze(r)),Ue(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Ly(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return FI(e)})}perform(e,t){return Ly(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(A=>A.provider.sendTransaction(t.signedTransaction).then(c=>c.hash,c=>c)));for(let A=0;A<l.length;A++){const c=l[A];if(typeof c=="string")return c}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=n7(this,e,t),i=Z9(this.providerConfigs.map(En));i.sort((l,A)=>l.priority-A.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const l=jg();let A=i.filter(h=>h.runner&&l-h.start<h.stallTimeout).reduce((h,p)=>h+p.weight,0);for(;A<this.quorum&&o<i.length;){const h=i[o++],p=J9++;h.start=jg(),h.staller=LI(h.stallTimeout),h.staller.wait(()=>{h.staller=null}),h.runner=r7(h,s,e,t).then(d=>{h.done=!0,h.result=d,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:Wg(h,jg()),request:{method:e,params:is(t)},provider:this})},d=>{h.done=!0,h.error=d,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:Wg(h,jg()),request:{method:e,params:is(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:Wg(h,null),request:{method:e,params:is(t)},provider:this}),A+=h.weight}const c=[];i.forEach(h=>{h.done||!h.runner||(c.push(h.runner),h.staller&&c.push(h.staller.getPromise()))}),c.length&&(yield Promise.race(c));const u=i.filter(h=>h.done&&h.error==null);if(u.length>=this.quorum){const h=r(u);if(h!==void 0)return i.forEach(p=>{p.staller&&p.staller.cancel(),p.cancelled=!0}),h;a||(yield LI(100).getPromise()),a=!1}const f=i.reduce((h,p)=>{if(!p.done||p.error==null)return h;const d=p.error.code;return q9.indexOf(d)>=0&&(h[d]||(h[d]={error:p.error,weight:0}),h[d].weight+=p.weight),h},{});if(Object.keys(f).forEach(h=>{const p=f[h];if(p.weight<this.quorum)return;i.forEach(m=>{m.staller&&m.staller.cancel(),m.cancelled=!0});const d=p.error,g={};e7.forEach(m=>{d[m]!=null&&(g[m]=d[m])}),vc.throwError(d.reason||d.message,h,g)}),i.filter(h=>!h.done).length===0)break}return i.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),vc.throwError("failed to meet quorum",ge.errors.SERVER_ERROR,{method:e,params:t,results:i.map(l=>Wg(l)),provider:this})})}}const s7=null,jv=new ge(ti),mp="84842078b09946638c03157f83405213";class o7 extends QM{constructor(e,t){const r=new dk(e,t),i=r.connection;i.password&&jv.throwError("INFURA WebSocket project secrets unsupported",ge.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Ue(this,"apiKey",r.projectId),Ue(this,"projectId",r.projectId),Ue(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===mp}}class dk extends VA{static getWebSocketProvider(e,t){return new o7(e,t)}static getApiKey(e){const t={apiKey:mp,projectId:mp,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(jv.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),jv.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:jv.throwError("unsupported network",ge.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===mp&&vx(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===mp}}const Z_=new ge(ti),a7="ETHERS_JS_SHARED";class l7 extends VA{static getApiKey(e){return e&&typeof e!="string"&&Z_.throwArgumentError("invalid apiKey","apiKey",e),e||a7}static getUrl(e,t){Z_.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Z_.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const PI=new ge(ti),DI="62e1ad51b37b8e00394bda3b";class A7 extends VA{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=DI:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:PI.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:PI.throwError("unsupported network",ge.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${r}/v1/lb/${t.applicationId}`,s={headers:{},url:i};return t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===DI}}const OI=new ge(ti);let c7=1;function NI(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:c7++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:is(s),provider:this}),e(s,(l,A)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:A,provider:this}),A.error){const c=new Error(A.error.message);return c.code=A.error.code,c.data=A.error.data,a(c)}o(A.result)})})}}function u7(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:is(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class HM extends hm{constructor(e,t){e==null&&OI.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=u7(e)):e.sendAsync?i=NI(e,e.sendAsync.bind(e)):e.send?i=NI(e,e.send.bind(e)):OI.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Ue(this,"jsonRpcFetchFunc",i),Ue(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const kI=new ge(ti);function f7(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new hm(n);case"ws":case"wss":return new QM(n);default:kI.throwArgumentError("unsupported URL scheme","network",n)}}const t=fN(n);return(!t||!t._defaultProvider)&&kI.throwError("unsupported getDefaultProvider network",ge.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:i7,AlchemyProvider:hk,AnkrProvider:W9,CloudflareProvider:Y9,EtherscanProvider:X9,InfuraProvider:dk,JsonRpcProvider:hm,NodesmithProvider:l7,PocketProvider:A7,Web3Provider:HM,IpcProvider:s7},e)}var h7=!0,J_="Invariant failed";function tl(n,e){if(!n){if(h7)throw new Error(J_);var t=typeof e=="function"?e():e,r=t?"".concat(J_,": ").concat(t):J_;throw new Error(r)}}var go;(function(n){n.Update="Web3ReactUpdate",n.Error="Web3ReactError",n.Deactivate="Web3ReactDeactivate"})(go||(go={}));function dm(){return dm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dm.apply(this,arguments)}function pk(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,pm(n,e)}function jB(n){return jB=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jB(n)}function pm(n,e){return pm=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},pm(n,e)}function d7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Wv(n,e,t){return d7()?Wv=Reflect.construct:Wv=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&pm(A,o.prototype),A},Wv.apply(null,arguments)}function p7(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Py(n){var e=typeof Map=="function"?new Map:void 0;return Py=function(r){if(r===null||!p7(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Wv(r,arguments,jB(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),pm(i,r)},Py(n)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function QI(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function mk(n){if(typeof n=="string"){n=n.replace(/^Ox/,"0x");var e=Number.parseInt(n,n.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&tl(!1),e}else return Number.isInteger(n)||tl(!1),n}function gk(n){typeof n=="string"&&n.match(/^(0x)?[0-9a-fA-F]{40}$/)||tl(!1);for(var e=n.substring(0,2)==="0x"?n:"0x"+n,t=e.toLowerCase().substring(2).split(""),r=new Uint8Array(40),i=0;i<40;i++)r[i]=t[i].charCodeAt(0);for(var s=at(sr(r)),o=0;o<40;o+=2)s[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(s[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());var a="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==a&&tl(!1),a}var HI=function(e,t){try{var r=function(o){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(a){var l=a[0],A=a[1],c=mk(l);if(e.supportedChainIds&&!e.supportedChainIds.includes(c))throw new vk(c,e.supportedChainIds);var u=A===null?A:gk(A);return{provider:o,chainId:c,account:u}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(r):r(t.provider))}catch(s){return Promise.reject(s)}},Kg=function(n){pk(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t}return e}(Py(Error)),vk=function(n){pk(e,n);function e(t,r){var i;return i=n.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+r+".",i}return e}(Py(Error)),xr;(function(n){n[n.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",n[n.UPDATE=1]="UPDATE",n[n.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",n[n.ERROR=3]="ERROR",n[n.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",n[n.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(xr||(xr={}));function m7(n,e){var t=e.type,r=e.payload;switch(t){case xr.ACTIVATE_CONNECTOR:{var i=r.connector,s=r.provider,o=r.chainId,a=r.account,l=r.onError;return{connector:i,provider:s,chainId:o,account:a,onError:l}}case xr.UPDATE:{var A=r.provider,c=r.chainId,u=r.account;return dm({},n,A===void 0?{}:{provider:A},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case xr.UPDATE_FROM_ERROR:{var f=r.provider,h=r.chainId,p=r.account;return dm({},n,f===void 0?{}:{provider:f},h===void 0?{}:{chainId:h},p===void 0?{}:{account:p},{error:void 0})}case xr.ERROR:{var d=r.error,g=n.connector,m=n.onError;return{connector:g,error:d,onError:m}}case xr.ERROR_FROM_ACTIVATION:{var y=r.connector,w=r.error;return{connector:y,error:w}}case xr.DEACTIVATE_CONNECTOR:return{}}}function g7(){var n=ye.useReducer(m7,{}),e=n[0],t=n[1],r=e.connector,i=e.provider,s=e.chainId,o=e.account,a=e.onError,l=e.error,A=ye.useRef(-1);A.current+=1;var c=ye.useCallback(function(g,m,y){y===void 0&&(y=!1);try{var w=A.current,x=!1;return Promise.resolve(QI(function(){return Promise.resolve(g.activate().then(function(_){return x=!0,_})).then(function(_){return Promise.resolve(HI(g,_)).then(function(C){if(A.current>w)throw new Kg;t({type:xr.ACTIVATE_CONNECTOR,payload:dm({connector:g},C,{onError:m})})})})},function(_){if(_ instanceof Kg)x&&g.deactivate();else{if(y)throw x&&g.deactivate(),_;m?(x&&g.deactivate(),m(_)):t({type:xr.ERROR_FROM_ACTIVATION,payload:{connector:g,error:_}})}}))}catch(_){return Promise.reject(_)}},[]),u=ye.useCallback(function(g){t({type:xr.ERROR,payload:{error:g}})},[]),f=ye.useCallback(function(){t({type:xr.DEACTIVATE_CONNECTOR})},[]),h=ye.useCallback(function(g){try{if(!r)throw Error("This should never happen, it's just so Typescript stops complaining");var m=A.current;return Promise.resolve(function(){if(l)return QI(function(){return Promise.resolve(HI(r,g)).then(function(_){if(A.current>m)throw new Kg;t({type:xr.UPDATE_FROM_ERROR,payload:_})})},function(_){_ instanceof Kg||(a?a(_):t({type:xr.ERROR,payload:{error:_}}))});var y=g.chainId===void 0?void 0:mk(g.chainId);if(y!==void 0&&r.supportedChainIds&&!r.supportedChainIds.includes(y)){var w=new vk(y,r.supportedChainIds);a?a(w):t({type:xr.ERROR,payload:{error:w}})}else{var x=typeof g.account=="string"?gk(g.account):g.account;t({type:xr.UPDATE,payload:{provider:g.provider,chainId:y,account:x}})}}())}catch(y){return Promise.reject(y)}},[r,l,a]),p=ye.useCallback(function(g){a?a(g):t({type:xr.ERROR,payload:{error:g}})},[a]),d=ye.useCallback(function(){t({type:xr.DEACTIVATE_CONNECTOR})},[]);return ye.useEffect(function(){return function(){r&&r.deactivate()}},[r]),ye.useEffect(function(){return r&&r.on(go.Update,h).on(go.Error,p).on(go.Deactivate,d),function(){r&&r.off(go.Update,h).off(go.Error,p).off(go.Deactivate,d)}},[r,h,p,d]),{connector:r,provider:i,chainId:s,account:o,activate:c,setError:u,deactivate:f,error:l}}var yk="primary",Tf={};function v7(n){Tf[n]&&tl(!1),Tf[n]=ye.createContext({activate:function(){try{return tl(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){tl(!1)},deactivate:function(){tl(!1)},active:!1}),Tf[n].displayName="Web3ReactContext - "+n;var e=Tf[n].Provider;return function(r){var i=r.getLibrary,s=r.children,o=g7(),a=o.connector,l=o.provider,A=o.chainId,c=o.account,u=o.activate,f=o.setError,h=o.deactivate,p=o.error,d=a!==void 0&&A!==void 0&&c!==void 0&&!p,g=ye.useMemo(function(){return d&&A!==void 0&&Number.isInteger(A)&&a?i(l,a):void 0},[d,i,l,a,A]),m={connector:a,library:g,chainId:A,account:c,activate:u,setError:f,deactivate:h,active:d,error:p};return $.createElement(e,{value:m},s)}}var y7=v7(yk);function w7(n){return n===void 0&&(n=yk),Object.keys(Tf).includes(n)||tl(!1),Tf[n]}function x7(n){return ye.useContext(w7(n))}var WB={},wk={exports:{}},ds={},xk={exports:{}},_k={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(O,z){var K=O.length;O.push(z);e:for(;0<K;){var Q=K-1>>>1,B=O[Q];if(0<i(B,z))O[Q]=z,O[K]=B,K=Q;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var z=O[0],K=O.pop();if(K!==z){O[0]=K;e:for(var Q=0,B=O.length,j=B>>>1;Q<j;){var ee=2*(Q+1)-1,U=O[ee],X=ee+1,ae=O[X];if(0>i(U,K))X<B&&0>i(ae,U)?(O[Q]=ae,O[X]=K,Q=X):(O[Q]=U,O[ee]=K,Q=ee);else if(X<B&&0>i(ae,K))O[Q]=ae,O[X]=K,Q=X;else break e}}return z}function i(O,z){var K=O.sortIndex-z.sortIndex;return K!==0?K:O.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],A=[],c=1,u=null,f=3,h=!1,p=!1,d=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var z=t(A);z!==null;){if(z.callback===null)r(A);else if(z.startTime<=O)r(A),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(A)}}function x(O){if(d=!1,w(O),!p)if(t(l)!==null)p=!0,F(_);else{var z=t(A);z!==null&&D(x,z.startTime-O)}}function _(O,z){p=!1,d&&(d=!1,m(b),b=-1),h=!0;var K=f;try{for(w(z),u=t(l);u!==null&&(!(u.expirationTime>z)||O&&!Y());){var Q=u.callback;if(typeof Q=="function"){u.callback=null,f=u.priorityLevel;var B=Q(u.expirationTime<=z);z=n.unstable_now(),typeof B=="function"?u.callback=B:u===t(l)&&r(l),w(z)}else r(l);u=t(l)}if(u!==null)var j=!0;else{var ee=t(A);ee!==null&&D(x,ee.startTime-z),j=!1}return j}finally{u=null,f=K,h=!1}}var C=!1,T=null,b=-1,M=5,P=-1;function Y(){return!(n.unstable_now()-P<M)}function H(){if(T!==null){var O=n.unstable_now();P=O;var z=!0;try{z=T(!0,O)}finally{z?I():(C=!1,T=null)}}else C=!1}var I;if(typeof y=="function")I=function(){y(H)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,E=v.port2;v.port1.onmessage=H,I=function(){E.postMessage(null)}}else I=function(){g(H,0)};function F(O){T=O,C||(C=!0,I())}function D(O,z){b=g(function(){O(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){p||h||(p=!0,F(_))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(O){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var K=f;f=z;try{return O()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,z){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=f;f=O;try{return z()}finally{f=K}},n.unstable_scheduleCallback=function(O,z,K){var Q=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Q+K:Q):K=Q,O){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=K+B,O={id:c++,callback:z,priorityLevel:O,startTime:K,expirationTime:B,sortIndex:-1},K>Q?(O.sortIndex=K,e(A,O),t(l)===null&&O===t(A)&&(d?(m(b),b=-1):d=!0,D(x,K-Q))):(O.sortIndex=B,e(l,O),p||h||(p=!0,F(_))),O},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(O){var z=f;return function(){var K=f;f=z;try{return O.apply(this,arguments)}finally{f=K}}}})(_k);xk.exports=_k;var _7=xk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bk=ye,as=_7;function Pe(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bk=new Set,mm={};function nu(n,e){xh(n,e),xh(n+"Capture",e)}function xh(n,e){for(mm[n]=e,n=0;n<e.length;n++)Bk.add(e[n])}var ml=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),KB=Object.prototype.hasOwnProperty,b7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zI={},GI={};function B7(n){return KB.call(GI,n)?!0:KB.call(zI,n)?!1:b7.test(n)?GI[n]=!0:(zI[n]=!0,!1)}function E7(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function C7(n,e,t,r){if(e===null||typeof e>"u"||E7(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){kr[n]=new gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];kr[e]=new gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){kr[n]=new gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){kr[n]=new gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){kr[n]=new gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){kr[n]=new gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){kr[n]=new gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){kr[n]=new gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){kr[n]=new gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var zM=/[\-:]([a-z])/g;function GM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(zM,GM);kr[e]=new gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(zM,GM);kr[e]=new gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(zM,GM);kr[e]=new gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){kr[n]=new gi(n,1,!1,n.toLowerCase(),null,!1,!1)});kr.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){kr[n]=new gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function VM(n,e,t,r){var i=kr.hasOwnProperty(e)?kr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C7(e,t,i,r)&&(t=null),r||i===null?B7(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ml=bk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yg=Symbol.for("react.element"),If=Symbol.for("react.portal"),Rf=Symbol.for("react.fragment"),jM=Symbol.for("react.strict_mode"),YB=Symbol.for("react.profiler"),Ek=Symbol.for("react.provider"),Ck=Symbol.for("react.context"),WM=Symbol.for("react.forward_ref"),$B=Symbol.for("react.suspense"),XB=Symbol.for("react.suspense_list"),KM=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),Mk=Symbol.for("react.offscreen"),VI=Symbol.iterator;function Cd(n){return n===null||typeof n!="object"?null:(n=VI&&n[VI]||n["@@iterator"],typeof n=="function"?n:null)}var Un=Object.assign,q_;function gp(n){if(q_===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);q_=e&&e[1]||""}return`
`+q_+n}var e1=!1;function t1(n,e){if(!n||e1)return"";e1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var r=A}Reflect.construct(n,[],e)}else{try{e.call()}catch(A){r=A}n.call(e.prototype)}else{try{throw Error()}catch(A){r=A}n()}}catch(A){if(A&&r&&typeof A.stack=="string"){for(var i=A.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{e1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gp(n):""}function M7(n){switch(n.tag){case 5:return gp(n.type);case 16:return gp("Lazy");case 13:return gp("Suspense");case 19:return gp("SuspenseList");case 0:case 2:case 15:return n=t1(n.type,!1),n;case 11:return n=t1(n.type.render,!1),n;case 1:return n=t1(n.type,!0),n;default:return""}}function ZB(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Rf:return"Fragment";case If:return"Portal";case YB:return"Profiler";case jM:return"StrictMode";case $B:return"Suspense";case XB:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Ck:return(n.displayName||"Context")+".Consumer";case Ek:return(n._context.displayName||"Context")+".Provider";case WM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case KM:return e=n.displayName||null,e!==null?e:ZB(n.type)||"Memo";case Xl:e=n._payload,n=n._init;try{return ZB(n(e))}catch{}}return null}function S7(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ZB(e);case 8:return e===jM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function UA(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Sk(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function T7(n){var e=Sk(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $g(n){n._valueTracker||(n._valueTracker=T7(n))}function Tk(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Sk(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Dy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function JB(n,e){var t=e.checked;return Un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function jI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=UA(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ik(n,e){e=e.checked,e!=null&&VM(n,"checked",e,!1)}function qB(n,e){Ik(n,e);var t=UA(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?eE(n,e.type,t):e.hasOwnProperty("defaultValue")&&eE(n,e.type,UA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function WI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function eE(n,e,t){(e!=="number"||Dy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var vp=Array.isArray;function eh(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+UA(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function tE(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return Un({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function KI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Pe(92));if(vp(t)){if(1<t.length)throw Error(Pe(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:UA(t)}}function Rk(n,e){var t=UA(e.value),r=UA(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function YI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Fk(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nE(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Fk(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xg,Uk=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Xg=Xg||document.createElement("div"),Xg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function gm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Gp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I7=["Webkit","ms","Moz","O"];Object.keys(Gp).forEach(function(n){I7.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Gp[e]=Gp[n]})});function Lk(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Gp.hasOwnProperty(n)&&Gp[n]?(""+e).trim():e+"px"}function Pk(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Lk(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var R7=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rE(n,e){if(e){if(R7[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Pe(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Pe(62))}}function iE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sE=null;function YM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oE=null,th=null,nh=null;function $I(n){if(n=fg(n)){if(typeof oE!="function")throw Error(Pe(280));var e=n.stateNode;e&&(e=bx(e),oE(n.stateNode,n.type,e))}}function Dk(n){th?nh?nh.push(n):nh=[n]:th=n}function Ok(){if(th){var n=th,e=nh;if(nh=th=null,$I(n),e)for(n=0;n<e.length;n++)$I(e[n])}}function Nk(n,e){return n(e)}function kk(){}var n1=!1;function Qk(n,e,t){if(n1)return n(e,t);n1=!0;try{return Nk(n,e,t)}finally{n1=!1,(th!==null||nh!==null)&&(kk(),Ok())}}function vm(n,e){var t=n.stateNode;if(t===null)return null;var r=bx(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Pe(231,e,typeof t));return t}var aE=!1;if(ml)try{var Md={};Object.defineProperty(Md,"passive",{get:function(){aE=!0}}),window.addEventListener("test",Md,Md),window.removeEventListener("test",Md,Md)}catch{aE=!1}function F7(n,e,t,r,i,s,o,a,l){var A=Array.prototype.slice.call(arguments,3);try{e.apply(t,A)}catch(c){this.onError(c)}}var Vp=!1,Oy=null,Ny=!1,lE=null,U7={onError:function(n){Vp=!0,Oy=n}};function L7(n,e,t,r,i,s,o,a,l){Vp=!1,Oy=null,F7.apply(U7,arguments)}function P7(n,e,t,r,i,s,o,a,l){if(L7.apply(this,arguments),Vp){if(Vp){var A=Oy;Vp=!1,Oy=null}else throw Error(Pe(198));Ny||(Ny=!0,lE=A)}}function ru(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Hk(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function XI(n){if(ru(n)!==n)throw Error(Pe(188))}function D7(n){var e=n.alternate;if(!e){if(e=ru(n),e===null)throw Error(Pe(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return XI(i),n;if(s===r)return XI(i),e;s=s.sibling}throw Error(Pe(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Pe(189))}}if(t.alternate!==r)throw Error(Pe(190))}if(t.tag!==3)throw Error(Pe(188));return t.stateNode.current===t?n:e}function zk(n){return n=D7(n),n!==null?Gk(n):null}function Gk(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Gk(n);if(e!==null)return e;n=n.sibling}return null}var Vk=as.unstable_scheduleCallback,ZI=as.unstable_cancelCallback,O7=as.unstable_shouldYield,N7=as.unstable_requestPaint,Xn=as.unstable_now,k7=as.unstable_getCurrentPriorityLevel,$M=as.unstable_ImmediatePriority,jk=as.unstable_UserBlockingPriority,ky=as.unstable_NormalPriority,Q7=as.unstable_LowPriority,Wk=as.unstable_IdlePriority,yx=null,oa=null;function H7(n){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(yx,n,void 0,(n.current.flags&128)===128)}catch{}}var xo=Math.clz32?Math.clz32:V7,z7=Math.log,G7=Math.LN2;function V7(n){return n>>>=0,n===0?32:31-(z7(n)/G7|0)|0}var Zg=64,Jg=4194304;function yp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Qy(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=yp(a):(s&=o,s!==0&&(r=yp(s)))}else o=t&~i,o!==0?r=yp(o):s!==0&&(r=yp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-xo(e),i=1<<t,r|=n[t],e&=~i;return r}function j7(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W7(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-xo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=j7(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function AE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Kk(){var n=Zg;return Zg<<=1,!(Zg&4194240)&&(Zg=64),n}function r1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function cg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-xo(e),n[e]=t}function K7(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-xo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function XM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-xo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Jt=0;function Yk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $k,ZM,Xk,Zk,Jk,cE=!1,qg=[],gA=null,vA=null,yA=null,ym=new Map,wm=new Map,nA=[],Y7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JI(n,e){switch(n){case"focusin":case"focusout":gA=null;break;case"dragenter":case"dragleave":vA=null;break;case"mouseover":case"mouseout":yA=null;break;case"pointerover":case"pointerout":ym.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wm.delete(e.pointerId)}}function Sd(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fg(e),e!==null&&ZM(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function $7(n,e,t,r,i){switch(e){case"focusin":return gA=Sd(gA,n,e,t,r,i),!0;case"dragenter":return vA=Sd(vA,n,e,t,r,i),!0;case"mouseover":return yA=Sd(yA,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return ym.set(s,Sd(ym.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wm.set(s,Sd(wm.get(s)||null,n,e,t,r,i)),!0}return!1}function qk(n){var e=xc(n.target);if(e!==null){var t=ru(e);if(t!==null){if(e=t.tag,e===13){if(e=Hk(t),e!==null){n.blockedOn=e,Jk(n.priority,function(){Xk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=uE(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);sE=r,t.target.dispatchEvent(r),sE=null}else return e=fg(t),e!==null&&ZM(e),n.blockedOn=t,!1;e.shift()}return!0}function qI(n,e,t){Kv(n)&&t.delete(e)}function X7(){cE=!1,gA!==null&&Kv(gA)&&(gA=null),vA!==null&&Kv(vA)&&(vA=null),yA!==null&&Kv(yA)&&(yA=null),ym.forEach(qI),wm.forEach(qI)}function Td(n,e){n.blockedOn===e&&(n.blockedOn=null,cE||(cE=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,X7)))}function xm(n){function e(i){return Td(i,n)}if(0<qg.length){Td(qg[0],n);for(var t=1;t<qg.length;t++){var r=qg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(gA!==null&&Td(gA,n),vA!==null&&Td(vA,n),yA!==null&&Td(yA,n),ym.forEach(e),wm.forEach(e),t=0;t<nA.length;t++)r=nA[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<nA.length&&(t=nA[0],t.blockedOn===null);)qk(t),t.blockedOn===null&&nA.shift()}var rh=Ml.ReactCurrentBatchConfig,Hy=!0;function Z7(n,e,t,r){var i=Jt,s=rh.transition;rh.transition=null;try{Jt=1,JM(n,e,t,r)}finally{Jt=i,rh.transition=s}}function J7(n,e,t,r){var i=Jt,s=rh.transition;rh.transition=null;try{Jt=4,JM(n,e,t,r)}finally{Jt=i,rh.transition=s}}function JM(n,e,t,r){if(Hy){var i=uE(n,e,t,r);if(i===null)h1(n,e,r,zy,t),JI(n,r);else if($7(i,n,e,t,r))r.stopPropagation();else if(JI(n,r),e&4&&-1<Y7.indexOf(n)){for(;i!==null;){var s=fg(i);if(s!==null&&$k(s),s=uE(n,e,t,r),s===null&&h1(n,e,r,zy,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else h1(n,e,r,null,t)}}var zy=null;function uE(n,e,t,r){if(zy=null,n=YM(r),n=xc(n),n!==null)if(e=ru(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Hk(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return zy=n,null}function e4(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k7()){case $M:return 1;case jk:return 4;case ky:case Q7:return 16;case Wk:return 536870912;default:return 16}default:return 16}}var oA=null,qM=null,Yv=null;function t4(){if(Yv)return Yv;var n,e=qM,t=e.length,r,i="value"in oA?oA.value:oA.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Yv=i.slice(n,1<r?1-r:void 0)}function $v(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function e0(){return!0}function eR(){return!1}function ps(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?e0:eR,this.isPropagationStopped=eR,this}return Un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=e0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=e0)},persist:function(){},isPersistent:e0}),e}var Xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eS=ps(Xh),ug=Un({},Xh,{view:0,detail:0}),q7=ps(ug),i1,s1,Id,wx=Un({},ug,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Id&&(Id&&n.type==="mousemove"?(i1=n.screenX-Id.screenX,s1=n.screenY-Id.screenY):s1=i1=0,Id=n),i1)},movementY:function(n){return"movementY"in n?n.movementY:s1}}),tR=ps(wx),eK=Un({},wx,{dataTransfer:0}),tK=ps(eK),nK=Un({},ug,{relatedTarget:0}),o1=ps(nK),rK=Un({},Xh,{animationName:0,elapsedTime:0,pseudoElement:0}),iK=ps(rK),sK=Un({},Xh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oK=ps(sK),aK=Un({},Xh,{data:0}),nR=ps(aK),lK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uK(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=cK[n])?!!e[n]:!1}function tS(){return uK}var fK=Un({},ug,{key:function(n){if(n.key){var e=lK[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$v(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?AK[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tS,charCode:function(n){return n.type==="keypress"?$v(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$v(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),hK=ps(fK),dK=Un({},wx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rR=ps(dK),pK=Un({},ug,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tS}),mK=ps(pK),gK=Un({},Xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),vK=ps(gK),yK=Un({},wx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wK=ps(yK),xK=[9,13,27,32],nS=ml&&"CompositionEvent"in window,jp=null;ml&&"documentMode"in document&&(jp=document.documentMode);var _K=ml&&"TextEvent"in window&&!jp,n4=ml&&(!nS||jp&&8<jp&&11>=jp),iR=String.fromCharCode(32),sR=!1;function r4(n,e){switch(n){case"keyup":return xK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ff=!1;function bK(n,e){switch(n){case"compositionend":return i4(e);case"keypress":return e.which!==32?null:(sR=!0,iR);case"textInput":return n=e.data,n===iR&&sR?null:n;default:return null}}function BK(n,e){if(Ff)return n==="compositionend"||!nS&&r4(n,e)?(n=t4(),Yv=qM=oA=null,Ff=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n4&&e.locale!=="ko"?null:e.data;default:return null}}var EK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!EK[n.type]:e==="textarea"}function s4(n,e,t,r){Dk(r),e=Gy(e,"onChange"),0<e.length&&(t=new eS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Wp=null,_m=null;function CK(n){m4(n,0)}function xx(n){var e=Pf(n);if(Tk(e))return n}function MK(n,e){if(n==="change")return e}var o4=!1;if(ml){var a1;if(ml){var l1="oninput"in document;if(!l1){var aR=document.createElement("div");aR.setAttribute("oninput","return;"),l1=typeof aR.oninput=="function"}a1=l1}else a1=!1;o4=a1&&(!document.documentMode||9<document.documentMode)}function lR(){Wp&&(Wp.detachEvent("onpropertychange",a4),_m=Wp=null)}function a4(n){if(n.propertyName==="value"&&xx(_m)){var e=[];s4(e,_m,n,YM(n)),Qk(CK,e)}}function SK(n,e,t){n==="focusin"?(lR(),Wp=e,_m=t,Wp.attachEvent("onpropertychange",a4)):n==="focusout"&&lR()}function TK(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xx(_m)}function IK(n,e){if(n==="click")return xx(e)}function RK(n,e){if(n==="input"||n==="change")return xx(e)}function FK(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Co=typeof Object.is=="function"?Object.is:FK;function bm(n,e){if(Co(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!KB.call(e,i)||!Co(n[i],e[i]))return!1}return!0}function AR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cR(n,e){var t=AR(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=AR(t)}}function l4(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?l4(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function A4(){for(var n=window,e=Dy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Dy(n.document)}return e}function rS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function UK(n){var e=A4(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&l4(t.ownerDocument.documentElement,t)){if(r!==null&&rS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=cR(t,s);var o=cR(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var LK=ml&&"documentMode"in document&&11>=document.documentMode,Uf=null,fE=null,Kp=null,hE=!1;function uR(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;hE||Uf==null||Uf!==Dy(r)||(r=Uf,"selectionStart"in r&&rS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kp&&bm(Kp,r)||(Kp=r,r=Gy(fE,"onSelect"),0<r.length&&(e=new eS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Uf)))}function t0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lf={animationend:t0("Animation","AnimationEnd"),animationiteration:t0("Animation","AnimationIteration"),animationstart:t0("Animation","AnimationStart"),transitionend:t0("Transition","TransitionEnd")},A1={},c4={};ml&&(c4=document.createElement("div").style,"AnimationEvent"in window||(delete Lf.animationend.animation,delete Lf.animationiteration.animation,delete Lf.animationstart.animation),"TransitionEvent"in window||delete Lf.transitionend.transition);function _x(n){if(A1[n])return A1[n];if(!Lf[n])return n;var e=Lf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in c4)return A1[n]=e[t];return n}var u4=_x("animationend"),f4=_x("animationiteration"),h4=_x("animationstart"),d4=_x("transitionend"),p4=new Map,fR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jA(n,e){p4.set(n,e),nu(e,[n])}for(var c1=0;c1<fR.length;c1++){var u1=fR[c1],PK=u1.toLowerCase(),DK=u1[0].toUpperCase()+u1.slice(1);jA(PK,"on"+DK)}jA(u4,"onAnimationEnd");jA(f4,"onAnimationIteration");jA(h4,"onAnimationStart");jA("dblclick","onDoubleClick");jA("focusin","onFocus");jA("focusout","onBlur");jA(d4,"onTransitionEnd");xh("onMouseEnter",["mouseout","mouseover"]);xh("onMouseLeave",["mouseout","mouseover"]);xh("onPointerEnter",["pointerout","pointerover"]);xh("onPointerLeave",["pointerout","pointerover"]);nu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nu("onBeforeInput",["compositionend","keypress","textInput","paste"]);nu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OK=new Set("cancel close invalid load scroll toggle".split(" ").concat(wp));function hR(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,P7(r,e,void 0,n),n.currentTarget=null}function m4(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,A=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;hR(i,a,A),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,A=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;hR(i,a,A),s=l}}}if(Ny)throw n=lE,Ny=!1,lE=null,n}function fn(n,e){var t=e[vE];t===void 0&&(t=e[vE]=new Set);var r=n+"__bubble";t.has(r)||(g4(e,n,2,!1),t.add(r))}function f1(n,e,t){var r=0;e&&(r|=4),g4(t,n,r,e)}var n0="_reactListening"+Math.random().toString(36).slice(2);function Bm(n){if(!n[n0]){n[n0]=!0,Bk.forEach(function(t){t!=="selectionchange"&&(OK.has(t)||f1(t,!1,n),f1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[n0]||(e[n0]=!0,f1("selectionchange",!1,e))}}function g4(n,e,t,r){switch(e4(e)){case 1:var i=Z7;break;case 4:i=J7;break;default:i=JM}t=i.bind(null,e,t,n),i=void 0,!aE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function h1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Qk(function(){var A=s,c=YM(t),u=[];e:{var f=p4.get(n);if(f!==void 0){var h=eS,p=n;switch(n){case"keypress":if($v(t)===0)break e;case"keydown":case"keyup":h=hK;break;case"focusin":p="focus",h=o1;break;case"focusout":p="blur",h=o1;break;case"beforeblur":case"afterblur":h=o1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=tK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=mK;break;case u4:case f4:case h4:h=iK;break;case d4:h=vK;break;case"scroll":h=q7;break;case"wheel":h=wK;break;case"copy":case"cut":case"paste":h=oK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rR}var d=(e&4)!==0,g=!d&&n==="scroll",m=d?f!==null?f+"Capture":null:f;d=[];for(var y=A,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,m!==null&&(x=vm(y,m),x!=null&&d.push(Em(y,x,w)))),g)break;y=y.return}0<d.length&&(f=new h(f,p,null,t,c),u.push({event:f,listeners:d}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",f&&t!==sE&&(p=t.relatedTarget||t.fromElement)&&(xc(p)||p[gl]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=t.relatedTarget||t.toElement,h=A,p=p?xc(p):null,p!==null&&(g=ru(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=A),h!==p)){if(d=tR,x="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(d=rR,x="onPointerLeave",m="onPointerEnter",y="pointer"),g=h==null?f:Pf(h),w=p==null?f:Pf(p),f=new d(x,y+"leave",h,t,c),f.target=g,f.relatedTarget=w,x=null,xc(c)===A&&(d=new d(m,y+"enter",p,t,c),d.target=w,d.relatedTarget=g,x=d),g=x,h&&p)t:{for(d=h,m=p,y=0,w=d;w;w=vu(w))y++;for(w=0,x=m;x;x=vu(x))w++;for(;0<y-w;)d=vu(d),y--;for(;0<w-y;)m=vu(m),w--;for(;y--;){if(d===m||m!==null&&d===m.alternate)break t;d=vu(d),m=vu(m)}d=null}else d=null;h!==null&&dR(u,f,h,d,!1),p!==null&&g!==null&&dR(u,g,p,d,!0)}}e:{if(f=A?Pf(A):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=MK;else if(oR(f))if(o4)_=RK;else{_=TK;var C=SK}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=IK);if(_&&(_=_(n,A))){s4(u,_,t,c);break e}C&&C(n,f,A),n==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&eE(f,"number",f.value)}switch(C=A?Pf(A):window,n){case"focusin":(oR(C)||C.contentEditable==="true")&&(Uf=C,fE=A,Kp=null);break;case"focusout":Kp=fE=Uf=null;break;case"mousedown":hE=!0;break;case"contextmenu":case"mouseup":case"dragend":hE=!1,uR(u,t,c);break;case"selectionchange":if(LK)break;case"keydown":case"keyup":uR(u,t,c)}var T;if(nS)e:{switch(n){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ff?r4(n,t)&&(b="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(b="onCompositionStart");b&&(n4&&t.locale!=="ko"&&(Ff||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ff&&(T=t4()):(oA=c,qM="value"in oA?oA.value:oA.textContent,Ff=!0)),C=Gy(A,b),0<C.length&&(b=new nR(b,n,null,t,c),u.push({event:b,listeners:C}),T?b.data=T:(T=i4(t),T!==null&&(b.data=T)))),(T=_K?bK(n,t):BK(n,t))&&(A=Gy(A,"onBeforeInput"),0<A.length&&(c=new nR("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:A}),c.data=T))}m4(u,e)})}function Em(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Gy(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vm(n,t),s!=null&&r.unshift(Em(n,s,i)),s=vm(n,e),s!=null&&r.push(Em(n,s,i))),n=n.return}return r}function vu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function dR(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,A=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&A!==null&&(a=A,i?(l=vm(t,s),l!=null&&o.unshift(Em(t,l,a))):i||(l=vm(t,s),l!=null&&o.push(Em(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var NK=/\r\n?/g,kK=/\u0000|\uFFFD/g;function pR(n){return(typeof n=="string"?n:""+n).replace(NK,`
`).replace(kK,"")}function r0(n,e,t){if(e=pR(e),pR(n)!==e&&t)throw Error(Pe(425))}function Vy(){}var dE=null,pE=null;function mE(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gE=typeof setTimeout=="function"?setTimeout:void 0,QK=typeof clearTimeout=="function"?clearTimeout:void 0,mR=typeof Promise=="function"?Promise:void 0,HK=typeof queueMicrotask=="function"?queueMicrotask:typeof mR<"u"?function(n){return mR.resolve(null).then(n).catch(zK)}:gE;function zK(n){setTimeout(function(){throw n})}function d1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),xm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);xm(e)}function wA(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function gR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Zh=Math.random().toString(36).slice(2),Yo="__reactFiber$"+Zh,Cm="__reactProps$"+Zh,gl="__reactContainer$"+Zh,vE="__reactEvents$"+Zh,GK="__reactListeners$"+Zh,VK="__reactHandles$"+Zh;function xc(n){var e=n[Yo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[gl]||t[Yo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=gR(n);n!==null;){if(t=n[Yo])return t;n=gR(n)}return e}n=t,t=n.parentNode}return null}function fg(n){return n=n[Yo]||n[gl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Pe(33))}function bx(n){return n[Cm]||null}var yE=[],Df=-1;function WA(n){return{current:n}}function mn(n){0>Df||(n.current=yE[Df],yE[Df]=null,Df--)}function cn(n,e){Df++,yE[Df]=n.current,n.current=e}var LA={},ei=WA(LA),Si=WA(!1),kc=LA;function _h(n,e){var t=n.type.contextTypes;if(!t)return LA;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ti(n){return n=n.childContextTypes,n!=null}function jy(){mn(Si),mn(ei)}function vR(n,e,t){if(ei.current!==LA)throw Error(Pe(168));cn(ei,e),cn(Si,t)}function v4(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Pe(108,S7(n)||"Unknown",i));return Un({},t,r)}function Wy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||LA,kc=ei.current,cn(ei,n),cn(Si,Si.current),!0}function yR(n,e,t){var r=n.stateNode;if(!r)throw Error(Pe(169));t?(n=v4(n,e,kc),r.__reactInternalMemoizedMergedChildContext=n,mn(Si),mn(ei),cn(ei,n)):mn(Si),cn(Si,t)}var Xa=null,Bx=!1,p1=!1;function y4(n){Xa===null?Xa=[n]:Xa.push(n)}function jK(n){Bx=!0,y4(n)}function KA(){if(!p1&&Xa!==null){p1=!0;var n=0,e=Jt;try{var t=Xa;for(Jt=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Xa=null,Bx=!1}catch(i){throw Xa!==null&&(Xa=Xa.slice(n+1)),Vk($M,KA),i}finally{Jt=e,p1=!1}}return null}var Of=[],Nf=0,Ky=null,Yy=0,Ms=[],Ss=0,Qc=null,nl=1,rl="";function fc(n,e){Of[Nf++]=Yy,Of[Nf++]=Ky,Ky=n,Yy=e}function w4(n,e,t){Ms[Ss++]=nl,Ms[Ss++]=rl,Ms[Ss++]=Qc,Qc=n;var r=nl;n=rl;var i=32-xo(r)-1;r&=~(1<<i),t+=1;var s=32-xo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,nl=1<<32-xo(e)+i|t<<i|r,rl=s+n}else nl=1<<s|t<<i|r,rl=n}function iS(n){n.return!==null&&(fc(n,1),w4(n,1,0))}function sS(n){for(;n===Ky;)Ky=Of[--Nf],Of[Nf]=null,Yy=Of[--Nf],Of[Nf]=null;for(;n===Qc;)Qc=Ms[--Ss],Ms[Ss]=null,rl=Ms[--Ss],Ms[Ss]=null,nl=Ms[--Ss],Ms[Ss]=null}var ss=null,ns=null,Bn=!1,vo=null;function x4(n,e){var t=Fs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function wR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ss=n,ns=wA(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ss=n,ns=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Qc!==null?{id:nl,overflow:rl}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Fs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ss=n,ns=null,!0):!1;default:return!1}}function wE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function xE(n){if(Bn){var e=ns;if(e){var t=e;if(!wR(n,e)){if(wE(n))throw Error(Pe(418));e=wA(t.nextSibling);var r=ss;e&&wR(n,e)?x4(r,t):(n.flags=n.flags&-4097|2,Bn=!1,ss=n)}}else{if(wE(n))throw Error(Pe(418));n.flags=n.flags&-4097|2,Bn=!1,ss=n}}}function xR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ss=n}function i0(n){if(n!==ss)return!1;if(!Bn)return xR(n),Bn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!mE(n.type,n.memoizedProps)),e&&(e=ns)){if(wE(n))throw _4(),Error(Pe(418));for(;e;)x4(n,e),e=wA(e.nextSibling)}if(xR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Pe(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ns=wA(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ns=null}}else ns=ss?wA(n.stateNode.nextSibling):null;return!0}function _4(){for(var n=ns;n;)n=wA(n.nextSibling)}function bh(){ns=ss=null,Bn=!1}function oS(n){vo===null?vo=[n]:vo.push(n)}var WK=Ml.ReactCurrentBatchConfig;function po(n,e){if(n&&n.defaultProps){e=Un({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var $y=WA(null),Xy=null,kf=null,aS=null;function lS(){aS=kf=Xy=null}function AS(n){var e=$y.current;mn($y),n._currentValue=e}function _E(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function ih(n,e){Xy=n,aS=kf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ci=!0),n.firstContext=null)}function zs(n){var e=n._currentValue;if(aS!==n)if(n={context:n,memoizedValue:e,next:null},kf===null){if(Xy===null)throw Error(Pe(308));kf=n,Xy.dependencies={lanes:0,firstContext:n}}else kf=kf.next=n;return e}var _c=null;function cS(n){_c===null?_c=[n]:_c.push(n)}function b4(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,cS(e)):(t.next=i.next,i.next=t),e.interleaved=t,vl(n,r)}function vl(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Zl=!1;function uS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B4(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ll(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xA(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vl(n,t)}return i=r.interleaved,i===null?(e.next=e,cS(r)):(e.next=i.next,i.next=e),r.interleaved=e,vl(n,t)}function Xv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,XM(n,t)}}function _R(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Zy(n,e,t,r){var i=n.updateQueue;Zl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,A=l.next;l.next=null,o===null?s=A:o.next=A,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=A:a.next=A,c.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,c=A=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,d=a;switch(f=e,h=t,d.tag){case 1:if(p=d.payload,typeof p=="function"){u=p.call(h,u,f);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=d.payload,f=typeof p=="function"?p.call(h,u,f):p,f==null)break e;u=Un({},u,f);break e;case 2:Zl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(A=c=h,l=u):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=u),i.baseState=l,i.firstBaseUpdate=A,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zc|=o,n.lanes=o,n.memoizedState=u}}function bR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Pe(191,i));i.call(r)}}}var E4=new bk.Component().refs;function bE(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Un({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ex={isMounted:function(n){return(n=n._reactInternals)?ru(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=pi(),i=bA(n),s=ll(r,i);s.payload=e,t!=null&&(s.callback=t),e=xA(n,s,i),e!==null&&(_o(e,n,i,r),Xv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=pi(),i=bA(n),s=ll(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=xA(n,s,i),e!==null&&(_o(e,n,i,r),Xv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=pi(),r=bA(n),i=ll(t,r);i.tag=2,e!=null&&(i.callback=e),e=xA(n,i,r),e!==null&&(_o(e,n,r,t),Xv(e,n,r))}};function BR(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!bm(t,r)||!bm(i,s):!0}function C4(n,e,t){var r=!1,i=LA,s=e.contextType;return typeof s=="object"&&s!==null?s=zs(s):(i=Ti(e)?kc:ei.current,r=e.contextTypes,s=(r=r!=null)?_h(n,i):LA),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ex,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function ER(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ex.enqueueReplaceState(e,e.state,null)}function BE(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=E4,uS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=zs(s):(s=Ti(e)?kc:ei.current,i.context=_h(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bE(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ex.enqueueReplaceState(i,i.state,null),Zy(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Rd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Pe(309));var r=t.stateNode}if(!r)throw Error(Pe(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===E4&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Pe(284));if(!t._owner)throw Error(Pe(290,n))}return n}function s0(n,e){throw n=Object.prototype.toString.call(e),Error(Pe(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function CR(n){var e=n._init;return e(n._payload)}function M4(n){function e(m,y){if(n){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function t(m,y){if(!n)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=BA(m,y),m.index=0,m.sibling=null,m}function s(m,y,w){return m.index=w,n?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,y,w,x){return y===null||y.tag!==6?(y=_1(w,m.mode,x),y.return=m,y):(y=i(y,w),y.return=m,y)}function l(m,y,w,x){var _=w.type;return _===Rf?c(m,y,w.props.children,x,w.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xl&&CR(_)===y.type)?(x=i(y,w.props),x.ref=Rd(m,y,w),x.return=m,x):(x=ny(w.type,w.key,w.props,null,m.mode,x),x.ref=Rd(m,y,w),x.return=m,x)}function A(m,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=b1(w,m.mode,x),y.return=m,y):(y=i(y,w.children||[]),y.return=m,y)}function c(m,y,w,x,_){return y===null||y.tag!==7?(y=Tc(w,m.mode,x,_),y.return=m,y):(y=i(y,w),y.return=m,y)}function u(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=_1(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yg:return w=ny(y.type,y.key,y.props,null,m.mode,w),w.ref=Rd(m,null,y),w.return=m,w;case If:return y=b1(y,m.mode,w),y.return=m,y;case Xl:var x=y._init;return u(m,x(y._payload),w)}if(vp(y)||Cd(y))return y=Tc(y,m.mode,w,null),y.return=m,y;s0(m,y)}return null}function f(m,y,w,x){var _=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(m,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yg:return w.key===_?l(m,y,w,x):null;case If:return w.key===_?A(m,y,w,x):null;case Xl:return _=w._init,f(m,y,_(w._payload),x)}if(vp(w)||Cd(w))return _!==null?null:c(m,y,w,x,null);s0(m,w)}return null}function h(m,y,w,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(w)||null,a(y,m,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yg:return m=m.get(x.key===null?w:x.key)||null,l(y,m,x,_);case If:return m=m.get(x.key===null?w:x.key)||null,A(y,m,x,_);case Xl:var C=x._init;return h(m,y,w,C(x._payload),_)}if(vp(x)||Cd(x))return m=m.get(w)||null,c(y,m,x,_,null);s0(y,x)}return null}function p(m,y,w,x){for(var _=null,C=null,T=y,b=y=0,M=null;T!==null&&b<w.length;b++){T.index>b?(M=T,T=null):M=T.sibling;var P=f(m,T,w[b],x);if(P===null){T===null&&(T=M);break}n&&T&&P.alternate===null&&e(m,T),y=s(P,y,b),C===null?_=P:C.sibling=P,C=P,T=M}if(b===w.length)return t(m,T),Bn&&fc(m,b),_;if(T===null){for(;b<w.length;b++)T=u(m,w[b],x),T!==null&&(y=s(T,y,b),C===null?_=T:C.sibling=T,C=T);return Bn&&fc(m,b),_}for(T=r(m,T);b<w.length;b++)M=h(T,m,b,w[b],x),M!==null&&(n&&M.alternate!==null&&T.delete(M.key===null?b:M.key),y=s(M,y,b),C===null?_=M:C.sibling=M,C=M);return n&&T.forEach(function(Y){return e(m,Y)}),Bn&&fc(m,b),_}function d(m,y,w,x){var _=Cd(w);if(typeof _!="function")throw Error(Pe(150));if(w=_.call(w),w==null)throw Error(Pe(151));for(var C=_=null,T=y,b=y=0,M=null,P=w.next();T!==null&&!P.done;b++,P=w.next()){T.index>b?(M=T,T=null):M=T.sibling;var Y=f(m,T,P.value,x);if(Y===null){T===null&&(T=M);break}n&&T&&Y.alternate===null&&e(m,T),y=s(Y,y,b),C===null?_=Y:C.sibling=Y,C=Y,T=M}if(P.done)return t(m,T),Bn&&fc(m,b),_;if(T===null){for(;!P.done;b++,P=w.next())P=u(m,P.value,x),P!==null&&(y=s(P,y,b),C===null?_=P:C.sibling=P,C=P);return Bn&&fc(m,b),_}for(T=r(m,T);!P.done;b++,P=w.next())P=h(T,m,b,P.value,x),P!==null&&(n&&P.alternate!==null&&T.delete(P.key===null?b:P.key),y=s(P,y,b),C===null?_=P:C.sibling=P,C=P);return n&&T.forEach(function(H){return e(m,H)}),Bn&&fc(m,b),_}function g(m,y,w,x){if(typeof w=="object"&&w!==null&&w.type===Rf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Yg:e:{for(var _=w.key,C=y;C!==null;){if(C.key===_){if(_=w.type,_===Rf){if(C.tag===7){t(m,C.sibling),y=i(C,w.props.children),y.return=m,m=y;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xl&&CR(_)===C.type){t(m,C.sibling),y=i(C,w.props),y.ref=Rd(m,C,w),y.return=m,m=y;break e}t(m,C);break}else e(m,C);C=C.sibling}w.type===Rf?(y=Tc(w.props.children,m.mode,x,w.key),y.return=m,m=y):(x=ny(w.type,w.key,w.props,null,m.mode,x),x.ref=Rd(m,y,w),x.return=m,m=x)}return o(m);case If:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){t(m,y.sibling),y=i(y,w.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else e(m,y);y=y.sibling}y=b1(w,m.mode,x),y.return=m,m=y}return o(m);case Xl:return C=w._init,g(m,y,C(w._payload),x)}if(vp(w))return p(m,y,w,x);if(Cd(w))return d(m,y,w,x);s0(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(t(m,y.sibling),y=i(y,w),y.return=m,m=y):(t(m,y),y=_1(w,m.mode,x),y.return=m,m=y),o(m)):t(m,y)}return g}var Bh=M4(!0),S4=M4(!1),hg={},aa=WA(hg),Mm=WA(hg),Sm=WA(hg);function bc(n){if(n===hg)throw Error(Pe(174));return n}function fS(n,e){switch(cn(Sm,e),cn(Mm,n),cn(aa,hg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nE(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=nE(e,n)}mn(aa),cn(aa,e)}function Eh(){mn(aa),mn(Mm),mn(Sm)}function T4(n){bc(Sm.current);var e=bc(aa.current),t=nE(e,n.type);e!==t&&(cn(Mm,n),cn(aa,t))}function hS(n){Mm.current===n&&(mn(aa),mn(Mm))}var Tn=WA(0);function Jy(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var m1=[];function dS(){for(var n=0;n<m1.length;n++)m1[n]._workInProgressVersionPrimary=null;m1.length=0}var Zv=Ml.ReactCurrentDispatcher,g1=Ml.ReactCurrentBatchConfig,Hc=0,Fn=null,fr=null,_r=null,qy=!1,Yp=!1,Tm=0,KK=0;function zr(){throw Error(Pe(321))}function pS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Co(n[t],e[t]))return!1;return!0}function mS(n,e,t,r,i,s){if(Hc=s,Fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zv.current=n===null||n.memoizedState===null?ZK:JK,n=t(r,i),Yp){s=0;do{if(Yp=!1,Tm=0,25<=s)throw Error(Pe(301));s+=1,_r=fr=null,e.updateQueue=null,Zv.current=qK,n=t(r,i)}while(Yp)}if(Zv.current=ew,e=fr!==null&&fr.next!==null,Hc=0,_r=fr=Fn=null,qy=!1,e)throw Error(Pe(300));return n}function gS(){var n=Tm!==0;return Tm=0,n}function Ho(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Fn.memoizedState=_r=n:_r=_r.next=n,_r}function Gs(){if(fr===null){var n=Fn.alternate;n=n!==null?n.memoizedState:null}else n=fr.next;var e=_r===null?Fn.memoizedState:_r.next;if(e!==null)_r=e,fr=n;else{if(n===null)throw Error(Pe(310));fr=n,n={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},_r===null?Fn.memoizedState=_r=n:_r=_r.next=n}return _r}function Im(n,e){return typeof e=="function"?e(n):e}function v1(n){var e=Gs(),t=e.queue;if(t===null)throw Error(Pe(311));t.lastRenderedReducer=n;var r=fr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,A=s;do{var c=A.lane;if((Hc&c)===c)l!==null&&(l=l.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),r=A.hasEagerState?A.eagerState:n(r,A.action);else{var u={lane:c,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,Fn.lanes|=c,zc|=c}A=A.next}while(A!==null&&A!==s);l===null?o=r:l.next=a,Co(r,e.memoizedState)||(Ci=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Fn.lanes|=s,zc|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function y1(n){var e=Gs(),t=e.queue;if(t===null)throw Error(Pe(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Co(s,e.memoizedState)||(Ci=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function I4(){}function R4(n,e){var t=Fn,r=Gs(),i=e(),s=!Co(r.memoizedState,i);if(s&&(r.memoizedState=i,Ci=!0),r=r.queue,vS(L4.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||_r!==null&&_r.memoizedState.tag&1){if(t.flags|=2048,Rm(9,U4.bind(null,t,r,i,e),void 0,null),Er===null)throw Error(Pe(349));Hc&30||F4(t,e,i)}return i}function F4(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function U4(n,e,t,r){e.value=t,e.getSnapshot=r,P4(e)&&D4(n)}function L4(n,e,t){return t(function(){P4(e)&&D4(n)})}function P4(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Co(n,t)}catch{return!0}}function D4(n){var e=vl(n,1);e!==null&&_o(e,n,1,-1)}function MR(n){var e=Ho();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Im,lastRenderedState:n},e.queue=n,n=n.dispatch=XK.bind(null,Fn,n),[e.memoizedState,n]}function Rm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Fn.updateQueue,e===null?(e={lastEffect:null,stores:null},Fn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function O4(){return Gs().memoizedState}function Jv(n,e,t,r){var i=Ho();Fn.flags|=n,i.memoizedState=Rm(1|e,t,void 0,r===void 0?null:r)}function Cx(n,e,t,r){var i=Gs();r=r===void 0?null:r;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,r!==null&&pS(r,o.deps)){i.memoizedState=Rm(e,t,s,r);return}}Fn.flags|=n,i.memoizedState=Rm(1|e,t,s,r)}function SR(n,e){return Jv(8390656,8,n,e)}function vS(n,e){return Cx(2048,8,n,e)}function N4(n,e){return Cx(4,2,n,e)}function k4(n,e){return Cx(4,4,n,e)}function Q4(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function H4(n,e,t){return t=t!=null?t.concat([n]):null,Cx(4,4,Q4.bind(null,e,n),t)}function yS(){}function z4(n,e){var t=Gs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function G4(n,e){var t=Gs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&pS(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function V4(n,e,t){return Hc&21?(Co(t,e)||(t=Kk(),Fn.lanes|=t,zc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ci=!0),n.memoizedState=t)}function YK(n,e){var t=Jt;Jt=t!==0&&4>t?t:4,n(!0);var r=g1.transition;g1.transition={};try{n(!1),e()}finally{Jt=t,g1.transition=r}}function j4(){return Gs().memoizedState}function $K(n,e,t){var r=bA(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},W4(n))K4(e,t);else if(t=b4(n,e,t,r),t!==null){var i=pi();_o(t,n,r,i),Y4(t,e,r)}}function XK(n,e,t){var r=bA(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(W4(n))K4(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Co(a,o)){var l=e.interleaved;l===null?(i.next=i,cS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=b4(n,e,i,r),t!==null&&(i=pi(),_o(t,n,r,i),Y4(t,e,r))}}function W4(n){var e=n.alternate;return n===Fn||e!==null&&e===Fn}function K4(n,e){Yp=qy=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Y4(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,XM(n,t)}}var ew={readContext:zs,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},ZK={readContext:zs,useCallback:function(n,e){return Ho().memoizedState=[n,e===void 0?null:e],n},useContext:zs,useEffect:SR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Jv(4194308,4,Q4.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Jv(4194308,4,n,e)},useInsertionEffect:function(n,e){return Jv(4,2,n,e)},useMemo:function(n,e){var t=Ho();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ho();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=$K.bind(null,Fn,n),[r.memoizedState,n]},useRef:function(n){var e=Ho();return n={current:n},e.memoizedState=n},useState:MR,useDebugValue:yS,useDeferredValue:function(n){return Ho().memoizedState=n},useTransition:function(){var n=MR(!1),e=n[0];return n=YK.bind(null,n[1]),Ho().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Fn,i=Ho();if(Bn){if(t===void 0)throw Error(Pe(407));t=t()}else{if(t=e(),Er===null)throw Error(Pe(349));Hc&30||F4(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,SR(L4.bind(null,r,s,n),[n]),r.flags|=2048,Rm(9,U4.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ho(),e=Er.identifierPrefix;if(Bn){var t=rl,r=nl;t=(r&~(1<<32-xo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Tm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=KK++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},JK={readContext:zs,useCallback:z4,useContext:zs,useEffect:vS,useImperativeHandle:H4,useInsertionEffect:N4,useLayoutEffect:k4,useMemo:G4,useReducer:v1,useRef:O4,useState:function(){return v1(Im)},useDebugValue:yS,useDeferredValue:function(n){var e=Gs();return V4(e,fr.memoizedState,n)},useTransition:function(){var n=v1(Im)[0],e=Gs().memoizedState;return[n,e]},useMutableSource:I4,useSyncExternalStore:R4,useId:j4,unstable_isNewReconciler:!1},qK={readContext:zs,useCallback:z4,useContext:zs,useEffect:vS,useImperativeHandle:H4,useInsertionEffect:N4,useLayoutEffect:k4,useMemo:G4,useReducer:y1,useRef:O4,useState:function(){return y1(Im)},useDebugValue:yS,useDeferredValue:function(n){var e=Gs();return fr===null?e.memoizedState=n:V4(e,fr.memoizedState,n)},useTransition:function(){var n=y1(Im)[0],e=Gs().memoizedState;return[n,e]},useMutableSource:I4,useSyncExternalStore:R4,useId:j4,unstable_isNewReconciler:!1};function Ch(n,e){try{var t="",r=e;do t+=M7(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function w1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function EE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var eY=typeof WeakMap=="function"?WeakMap:Map;function $4(n,e,t){t=ll(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){nw||(nw=!0,PE=r),EE(n,e)},t}function X4(n,e,t){t=ll(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){EE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){EE(n,e),typeof r!="function"&&(_A===null?_A=new Set([this]):_A.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function TR(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new eY;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=dY.bind(null,n,e,t),e.then(n,n))}function IR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function RR(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ll(-1,1),e.tag=2,xA(t,e,1))),t.lanes|=1),n)}var tY=Ml.ReactCurrentOwner,Ci=!1;function ai(n,e,t,r){e.child=n===null?S4(e,null,t,r):Bh(e,n.child,t,r)}function FR(n,e,t,r,i){t=t.render;var s=e.ref;return ih(e,i),r=mS(n,e,t,r,s,i),t=gS(),n!==null&&!Ci?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,yl(n,e,i)):(Bn&&t&&iS(e),e.flags|=1,ai(n,e,r,i),e.child)}function UR(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!MS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Z4(n,e,s,r,i)):(n=ny(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:bm,t(o,r)&&n.ref===e.ref)return yl(n,e,i)}return e.flags|=1,n=BA(s,r),n.ref=e.ref,n.return=e,e.child=n}function Z4(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(bm(s,r)&&n.ref===e.ref)if(Ci=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ci=!0);else return e.lanes=n.lanes,yl(n,e,i)}return CE(n,e,t,r,i)}function J4(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},cn(Hf,Yi),Yi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,cn(Hf,Yi),Yi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,cn(Hf,Yi),Yi|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,cn(Hf,Yi),Yi|=r;return ai(n,e,i,t),e.child}function q4(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function CE(n,e,t,r,i){var s=Ti(t)?kc:ei.current;return s=_h(e,s),ih(e,i),t=mS(n,e,t,r,s,i),r=gS(),n!==null&&!Ci?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,yl(n,e,i)):(Bn&&r&&iS(e),e.flags|=1,ai(n,e,t,i),e.child)}function LR(n,e,t,r,i){if(Ti(t)){var s=!0;Wy(e)}else s=!1;if(ih(e,i),e.stateNode===null)qv(n,e),C4(e,t,r),BE(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,A=t.contextType;typeof A=="object"&&A!==null?A=zs(A):(A=Ti(t)?kc:ei.current,A=_h(e,A));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==A)&&ER(e,o,r,A),Zl=!1;var f=e.memoizedState;o.state=f,Zy(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Si.current||Zl?(typeof c=="function"&&(bE(e,t,c,r),l=e.memoizedState),(a=Zl||BR(e,t,a,r,f,l,A))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=A,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,B4(n,e),a=e.memoizedProps,A=e.type===e.elementType?a:po(e.type,a),o.props=A,u=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=zs(l):(l=Ti(t)?kc:ei.current,l=_h(e,l));var h=t.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==l)&&ER(e,o,r,l),Zl=!1,f=e.memoizedState,o.state=f,Zy(e,r,o,i);var p=e.memoizedState;a!==u||f!==p||Si.current||Zl?(typeof h=="function"&&(bE(e,t,h,r),p=e.memoizedState),(A=Zl||BR(e,t,A,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=A):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return ME(n,e,t,r,s,i)}function ME(n,e,t,r,i,s){q4(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&yR(e,t,!1),yl(n,e,s);r=e.stateNode,tY.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Bh(e,n.child,null,s),e.child=Bh(e,null,a,s)):ai(n,e,a,s),e.memoizedState=r.state,i&&yR(e,t,!0),e.child}function eQ(n){var e=n.stateNode;e.pendingContext?vR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&vR(n,e.context,!1),fS(n,e.containerInfo)}function PR(n,e,t,r,i){return bh(),oS(i),e.flags|=256,ai(n,e,t,r),e.child}var SE={dehydrated:null,treeContext:null,retryLane:0};function TE(n){return{baseLanes:n,cachePool:null,transitions:null}}function tQ(n,e,t){var r=e.pendingProps,i=Tn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),cn(Tn,i&1),n===null)return xE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tx(o,r,0,null),n=Tc(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=TE(t),e.memoizedState=SE,n):wS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nY(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=BA(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=BA(a,s):(s=Tc(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?TE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=SE,r}return s=n.child,n=s.sibling,r=BA(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function wS(n,e){return e=Tx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function o0(n,e,t,r){return r!==null&&oS(r),Bh(e,n.child,null,t),n=wS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function nY(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=w1(Error(Pe(422))),o0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tx({mode:"visible",children:r.children},i,0,null),s=Tc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Bh(e,n.child,null,o),e.child.memoizedState=TE(o),e.memoizedState=SE,s);if(!(e.mode&1))return o0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Pe(419)),r=w1(s,r,void 0),o0(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ci||a){if(r=Er,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vl(n,i),_o(r,n,i,-1))}return CS(),r=w1(Error(Pe(421))),o0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=pY.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ns=wA(i.nextSibling),ss=e,Bn=!0,vo=null,n!==null&&(Ms[Ss++]=nl,Ms[Ss++]=rl,Ms[Ss++]=Qc,nl=n.id,rl=n.overflow,Qc=e),e=wS(e,r.children),e.flags|=4096,e)}function DR(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),_E(n.return,e,t)}function x1(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function nQ(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ai(n,e,r.children,t),r=Tn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&DR(n,t,e);else if(n.tag===19)DR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(cn(Tn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Jy(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),x1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Jy(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}x1(e,!0,t,null,s);break;case"together":x1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yl(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Pe(153));if(e.child!==null){for(n=e.child,t=BA(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=BA(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function rY(n,e,t){switch(e.tag){case 3:eQ(e),bh();break;case 5:T4(e);break;case 1:Ti(e.type)&&Wy(e);break;case 4:fS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;cn($y,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(cn(Tn,Tn.current&1),e.flags|=128,null):t&e.child.childLanes?tQ(n,e,t):(cn(Tn,Tn.current&1),n=yl(n,e,t),n!==null?n.sibling:null);cn(Tn,Tn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return nQ(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),cn(Tn,Tn.current),r)break;return null;case 22:case 23:return e.lanes=0,J4(n,e,t)}return yl(n,e,t)}var rQ,IE,iQ,sQ;rQ=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};IE=function(){};iQ=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,bc(aa.current);var s=null;switch(t){case"input":i=JB(n,i),r=JB(n,r),s=[];break;case"select":i=Un({},i,{value:void 0}),r=Un({},r,{value:void 0}),s=[];break;case"textarea":i=tE(n,i),r=tE(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Vy)}rE(t,r);var o;t=null;for(A in i)if(!r.hasOwnProperty(A)&&i.hasOwnProperty(A)&&i[A]!=null)if(A==="style"){var a=i[A];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(mm.hasOwnProperty(A)?s||(s=[]):(s=s||[]).push(A,null));for(A in r){var l=r[A];if(a=i!=null?i[A]:void 0,r.hasOwnProperty(A)&&l!==a&&(l!=null||a!=null))if(A==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(A,t)),t=l;else A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(A,l)):A==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(A,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(mm.hasOwnProperty(A)?(l!=null&&A==="onScroll"&&fn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(A,l))}t&&(s=s||[]).push("style",t);var A=s;(e.updateQueue=A)&&(e.flags|=4)}};sQ=function(n,e,t,r){t!==r&&(e.flags|=4)};function Fd(n,e){if(!Bn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Gr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function iY(n,e,t){var r=e.pendingProps;switch(sS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(e),null;case 1:return Ti(e.type)&&jy(),Gr(e),null;case 3:return r=e.stateNode,Eh(),mn(Si),mn(ei),dS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(i0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vo!==null&&(NE(vo),vo=null))),IE(n,e),Gr(e),null;case 5:hS(e);var i=bc(Sm.current);if(t=e.type,n!==null&&e.stateNode!=null)iQ(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Pe(166));return Gr(e),null}if(n=bc(aa.current),i0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Yo]=e,r[Cm]=s,n=(e.mode&1)!==0,t){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<wp.length;i++)fn(wp[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":jI(r,s),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fn("invalid",r);break;case"textarea":KI(r,s),fn("invalid",r)}rE(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&r0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&r0(r.textContent,a,n),i=["children",""+a]):mm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fn("scroll",r)}switch(t){case"input":$g(r),WI(r,s,!0);break;case"textarea":$g(r),YI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Fk(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Yo]=e,n[Cm]=r,rQ(n,e,!1,!1),e.stateNode=n;e:{switch(o=iE(t,r),t){case"dialog":fn("cancel",n),fn("close",n),i=r;break;case"iframe":case"object":case"embed":fn("load",n),i=r;break;case"video":case"audio":for(i=0;i<wp.length;i++)fn(wp[i],n);i=r;break;case"source":fn("error",n),i=r;break;case"img":case"image":case"link":fn("error",n),fn("load",n),i=r;break;case"details":fn("toggle",n),i=r;break;case"input":jI(n,r),i=JB(n,r),fn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Un({},r,{value:void 0}),fn("invalid",n);break;case"textarea":KI(n,r),i=tE(n,r),fn("invalid",n);break;default:i=r}rE(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Pk(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Uk(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&gm(n,l):typeof l=="number"&&gm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&fn("scroll",n):l!=null&&VM(n,s,l,o))}switch(t){case"input":$g(n),WI(n,r,!1);break;case"textarea":$g(n),YI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+UA(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?eh(n,!!r.multiple,s,!1):r.defaultValue!=null&&eh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Vy)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gr(e),null;case 6:if(n&&e.stateNode!=null)sQ(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Pe(166));if(t=bc(Sm.current),bc(aa.current),i0(e)){if(r=e.stateNode,t=e.memoizedProps,r[Yo]=e,(s=r.nodeValue!==t)&&(n=ss,n!==null))switch(n.tag){case 3:r0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&r0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Yo]=e,e.stateNode=r}return Gr(e),null;case 13:if(mn(Tn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Bn&&ns!==null&&e.mode&1&&!(e.flags&128))_4(),bh(),e.flags|=98560,s=!1;else if(s=i0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Pe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[Yo]=e}else bh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gr(e),s=!1}else vo!==null&&(NE(vo),vo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Tn.current&1?mr===0&&(mr=3):CS())),e.updateQueue!==null&&(e.flags|=4),Gr(e),null);case 4:return Eh(),IE(n,e),n===null&&Bm(e.stateNode.containerInfo),Gr(e),null;case 10:return AS(e.type._context),Gr(e),null;case 17:return Ti(e.type)&&jy(),Gr(e),null;case 19:if(mn(Tn),s=e.memoizedState,s===null)return Gr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fd(s,!1);else{if(mr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Jy(n),o!==null){for(e.flags|=128,Fd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return cn(Tn,Tn.current&1|2),e.child}n=n.sibling}s.tail!==null&&Xn()>Mh&&(e.flags|=128,r=!0,Fd(s,!1),e.lanes=4194304)}else{if(!r)if(n=Jy(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bn)return Gr(e),null}else 2*Xn()-s.renderingStartTime>Mh&&t!==1073741824&&(e.flags|=128,r=!0,Fd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xn(),e.sibling=null,t=Tn.current,cn(Tn,r?t&1|2:t&1),e):(Gr(e),null);case 22:case 23:return ES(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yi&1073741824&&(Gr(e),e.subtreeFlags&6&&(e.flags|=8192)):Gr(e),null;case 24:return null;case 25:return null}throw Error(Pe(156,e.tag))}function sY(n,e){switch(sS(e),e.tag){case 1:return Ti(e.type)&&jy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Eh(),mn(Si),mn(ei),dS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return hS(e),null;case 13:if(mn(Tn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Pe(340));bh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return mn(Tn),null;case 4:return Eh(),null;case 10:return AS(e.type._context),null;case 22:case 23:return ES(),null;case 24:return null;default:return null}}var a0=!1,Yr=!1,oY=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Qf(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Nn(n,e,r)}else t.current=null}function RE(n,e,t){try{t()}catch(r){Nn(n,e,r)}}var OR=!1;function aY(n,e){if(dE=Hy,n=A4(),rS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,A=0,c=0,u=n,f=null;t:for(;;){for(var h;u!==t||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(h=u.firstChild)!==null;)f=u,u=h;for(;;){if(u===n)break t;if(f===t&&++A===i&&(a=o),f===s&&++c===r&&(l=o),(h=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=h}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(pE={focusedElem:n,selectionRange:t},Hy=!1,Ze=e;Ze!==null;)if(e=Ze,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ze=n;else for(;Ze!==null;){e=Ze;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var d=p.memoizedProps,g=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?d:po(e.type,d),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(x){Nn(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}return p=OR,OR=!1,p}function $p(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&RE(e,t,s)}i=i.next}while(i!==r)}}function Mx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function FE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function oQ(n){var e=n.alternate;e!==null&&(n.alternate=null,oQ(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Yo],delete e[Cm],delete e[vE],delete e[GK],delete e[VK])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function aQ(n){return n.tag===5||n.tag===3||n.tag===4}function NR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||aQ(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function UE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Vy));else if(r!==4&&(n=n.child,n!==null))for(UE(n,e,t),n=n.sibling;n!==null;)UE(n,e,t),n=n.sibling}function LE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(LE(n,e,t),n=n.sibling;n!==null;)LE(n,e,t),n=n.sibling}var Rr=null,mo=!1;function Pl(n,e,t){for(t=t.child;t!==null;)lQ(n,e,t),t=t.sibling}function lQ(n,e,t){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(yx,t)}catch{}switch(t.tag){case 5:Yr||Qf(t,e);case 6:var r=Rr,i=mo;Rr=null,Pl(n,e,t),Rr=r,mo=i,Rr!==null&&(mo?(n=Rr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Rr.removeChild(t.stateNode));break;case 18:Rr!==null&&(mo?(n=Rr,t=t.stateNode,n.nodeType===8?d1(n.parentNode,t):n.nodeType===1&&d1(n,t),xm(n)):d1(Rr,t.stateNode));break;case 4:r=Rr,i=mo,Rr=t.stateNode.containerInfo,mo=!0,Pl(n,e,t),Rr=r,mo=i;break;case 0:case 11:case 14:case 15:if(!Yr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&RE(t,e,o),i=i.next}while(i!==r)}Pl(n,e,t);break;case 1:if(!Yr&&(Qf(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Nn(t,e,a)}Pl(n,e,t);break;case 21:Pl(n,e,t);break;case 22:t.mode&1?(Yr=(r=Yr)||t.memoizedState!==null,Pl(n,e,t),Yr=r):Pl(n,e,t);break;default:Pl(n,e,t)}}function kR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new oY),e.forEach(function(r){var i=mY.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function ro(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rr=a.stateNode,mo=!1;break e;case 3:Rr=a.stateNode.containerInfo,mo=!0;break e;case 4:Rr=a.stateNode.containerInfo,mo=!0;break e}a=a.return}if(Rr===null)throw Error(Pe(160));lQ(s,o,i),Rr=null,mo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(A){Nn(i,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AQ(e,n),e=e.sibling}function AQ(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ro(e,n),Ro(n),r&4){try{$p(3,n,n.return),Mx(3,n)}catch(d){Nn(n,n.return,d)}try{$p(5,n,n.return)}catch(d){Nn(n,n.return,d)}}break;case 1:ro(e,n),Ro(n),r&512&&t!==null&&Qf(t,t.return);break;case 5:if(ro(e,n),Ro(n),r&512&&t!==null&&Qf(t,t.return),n.flags&32){var i=n.stateNode;try{gm(i,"")}catch(d){Nn(n,n.return,d)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ik(i,s),iE(a,o);var A=iE(a,s);for(o=0;o<l.length;o+=2){var c=l[o],u=l[o+1];c==="style"?Pk(i,u):c==="dangerouslySetInnerHTML"?Uk(i,u):c==="children"?gm(i,u):VM(i,c,u,A)}switch(a){case"input":qB(i,s);break;case"textarea":Rk(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?eh(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?eh(i,!!s.multiple,s.defaultValue,!0):eh(i,!!s.multiple,s.multiple?[]:"",!1))}i[Cm]=s}catch(d){Nn(n,n.return,d)}}break;case 6:if(ro(e,n),Ro(n),r&4){if(n.stateNode===null)throw Error(Pe(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(d){Nn(n,n.return,d)}}break;case 3:if(ro(e,n),Ro(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{xm(e.containerInfo)}catch(d){Nn(n,n.return,d)}break;case 4:ro(e,n),Ro(n);break;case 13:ro(e,n),Ro(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bS=Xn())),r&4&&kR(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Yr=(A=Yr)||c,ro(e,n),Yr=A):ro(e,n),Ro(n),r&8192){if(A=n.memoizedState!==null,(n.stateNode.isHidden=A)&&!c&&n.mode&1)for(Ze=n,c=n.child;c!==null;){for(u=Ze=c;Ze!==null;){switch(f=Ze,h=f.child,f.tag){case 0:case 11:case 14:case 15:$p(4,f,f.return);break;case 1:Qf(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(d){Nn(r,t,d)}}break;case 5:Qf(f,f.return);break;case 22:if(f.memoizedState!==null){HR(u);continue}}h!==null?(h.return=f,Ze=h):HR(u)}c=c.sibling}e:for(c=null,u=n;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,A?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Lk("display",o))}catch(d){Nn(n,n.return,d)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=A?"":u.memoizedProps}catch(d){Nn(n,n.return,d)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ro(e,n),Ro(n),r&4&&kR(n);break;case 21:break;default:ro(e,n),Ro(n)}}function Ro(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(aQ(t)){var r=t;break e}t=t.return}throw Error(Pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gm(i,""),r.flags&=-33);var s=NR(n);LE(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=NR(n);UE(n,a,o);break;default:throw Error(Pe(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function lY(n,e,t){Ze=n,cQ(n)}function cQ(n,e,t){for(var r=(n.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||a0;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Yr;a=a0;var A=Yr;if(a0=o,(Yr=l)&&!A)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?zR(i):l!==null?(l.return=o,Ze=l):zR(i);for(;s!==null;)Ze=s,cQ(s),s=s.sibling;Ze=i,a0=a,Yr=A}QR(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):QR(n)}}function QR(n){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yr||Mx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:po(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var c=A.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&xm(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Yr||e.flags&512&&FE(e)}catch(f){Nn(e,e.return,f)}}if(e===n){Ze=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function HR(n){for(;Ze!==null;){var e=Ze;if(e===n){Ze=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function zR(n){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mx(4,e)}catch(l){Nn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Nn(e,i,l)}}var s=e.return;try{FE(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{FE(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var AY=Math.ceil,tw=Ml.ReactCurrentDispatcher,xS=Ml.ReactCurrentOwner,Ns=Ml.ReactCurrentBatchConfig,Ht=0,Er=null,or=null,Or=0,Yi=0,Hf=WA(0),mr=0,Fm=null,zc=0,Sx=0,_S=0,Xp=null,bi=null,bS=0,Mh=1/0,Ka=null,nw=!1,PE=null,_A=null,l0=!1,aA=null,rw=0,Zp=0,DE=null,ey=-1,ty=0;function pi(){return Ht&6?Xn():ey!==-1?ey:ey=Xn()}function bA(n){return n.mode&1?Ht&2&&Or!==0?Or&-Or:WK.transition!==null?(ty===0&&(ty=Kk()),ty):(n=Jt,n!==0||(n=window.event,n=n===void 0?16:e4(n.type)),n):1}function _o(n,e,t,r){if(50<Zp)throw Zp=0,DE=null,Error(Pe(185));cg(n,t,r),(!(Ht&2)||n!==Er)&&(n===Er&&(!(Ht&2)&&(Sx|=t),mr===4&&rA(n,Or)),Ii(n,r),t===1&&Ht===0&&!(e.mode&1)&&(Mh=Xn()+500,Bx&&KA()))}function Ii(n,e){var t=n.callbackNode;W7(n,e);var r=Qy(n,n===Er?Or:0);if(r===0)t!==null&&ZI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&ZI(t),e===1)n.tag===0?jK(GR.bind(null,n)):y4(GR.bind(null,n)),HK(function(){!(Ht&6)&&KA()}),t=null;else{switch(Yk(r)){case 1:t=$M;break;case 4:t=jk;break;case 16:t=ky;break;case 536870912:t=Wk;break;default:t=ky}t=vQ(t,uQ.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function uQ(n,e){if(ey=-1,ty=0,Ht&6)throw Error(Pe(327));var t=n.callbackNode;if(sh()&&n.callbackNode!==t)return null;var r=Qy(n,n===Er?Or:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=iw(n,r);else{e=r;var i=Ht;Ht|=2;var s=hQ();(Er!==n||Or!==e)&&(Ka=null,Mh=Xn()+500,Sc(n,e));do try{fY();break}catch(a){fQ(n,a)}while(1);lS(),tw.current=s,Ht=i,or!==null?e=0:(Er=null,Or=0,e=mr)}if(e!==0){if(e===2&&(i=AE(n),i!==0&&(r=i,e=OE(n,i))),e===1)throw t=Fm,Sc(n,0),rA(n,r),Ii(n,Xn()),t;if(e===6)rA(n,r);else{if(i=n.current.alternate,!(r&30)&&!cY(i)&&(e=iw(n,r),e===2&&(s=AE(n),s!==0&&(r=s,e=OE(n,s))),e===1))throw t=Fm,Sc(n,0),rA(n,r),Ii(n,Xn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Pe(345));case 2:hc(n,bi,Ka);break;case 3:if(rA(n,r),(r&130023424)===r&&(e=bS+500-Xn(),10<e)){if(Qy(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){pi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=gE(hc.bind(null,n,bi,Ka),e);break}hc(n,bi,Ka);break;case 4:if(rA(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-xo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AY(r/1960))-r,10<r){n.timeoutHandle=gE(hc.bind(null,n,bi,Ka),r);break}hc(n,bi,Ka);break;case 5:hc(n,bi,Ka);break;default:throw Error(Pe(329))}}}return Ii(n,Xn()),n.callbackNode===t?uQ.bind(null,n):null}function OE(n,e){var t=Xp;return n.current.memoizedState.isDehydrated&&(Sc(n,e).flags|=256),n=iw(n,e),n!==2&&(e=bi,bi=t,e!==null&&NE(e)),n}function NE(n){bi===null?bi=n:bi.push.apply(bi,n)}function cY(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Co(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rA(n,e){for(e&=~_S,e&=~Sx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-xo(e),r=1<<t;n[t]=-1,e&=~r}}function GR(n){if(Ht&6)throw Error(Pe(327));sh();var e=Qy(n,0);if(!(e&1))return Ii(n,Xn()),null;var t=iw(n,e);if(n.tag!==0&&t===2){var r=AE(n);r!==0&&(e=r,t=OE(n,r))}if(t===1)throw t=Fm,Sc(n,0),rA(n,e),Ii(n,Xn()),t;if(t===6)throw Error(Pe(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,hc(n,bi,Ka),Ii(n,Xn()),null}function BS(n,e){var t=Ht;Ht|=1;try{return n(e)}finally{Ht=t,Ht===0&&(Mh=Xn()+500,Bx&&KA())}}function Gc(n){aA!==null&&aA.tag===0&&!(Ht&6)&&sh();var e=Ht;Ht|=1;var t=Ns.transition,r=Jt;try{if(Ns.transition=null,Jt=1,n)return n()}finally{Jt=r,Ns.transition=t,Ht=e,!(Ht&6)&&KA()}}function ES(){Yi=Hf.current,mn(Hf)}function Sc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,QK(t)),or!==null)for(t=or.return;t!==null;){var r=t;switch(sS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jy();break;case 3:Eh(),mn(Si),mn(ei),dS();break;case 5:hS(r);break;case 4:Eh();break;case 13:mn(Tn);break;case 19:mn(Tn);break;case 10:AS(r.type._context);break;case 22:case 23:ES()}t=t.return}if(Er=n,or=n=BA(n.current,null),Or=Yi=e,mr=0,Fm=null,_S=Sx=zc=0,bi=Xp=null,_c!==null){for(e=0;e<_c.length;e++)if(t=_c[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}_c=null}return n}function fQ(n,e){do{var t=or;try{if(lS(),Zv.current=ew,qy){for(var r=Fn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qy=!1}if(Hc=0,_r=fr=Fn=null,Yp=!1,Tm=0,xS.current=null,t===null||t.return===null){mr=1,Fm=e,or=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Or,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var A=l,c=a,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=IR(o);if(h!==null){h.flags&=-257,RR(h,o,a,s,e),h.mode&1&&TR(s,A,e),e=h,l=A;var p=e.updateQueue;if(p===null){var d=new Set;d.add(l),e.updateQueue=d}else p.add(l);break e}else{if(!(e&1)){TR(s,A,e),CS();break e}l=Error(Pe(426))}}else if(Bn&&a.mode&1){var g=IR(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),RR(g,o,a,s,e),oS(Ch(l,a));break e}}s=l=Ch(l,a),mr!==4&&(mr=2),Xp===null?Xp=[s]:Xp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=$4(s,l,e);_R(s,m);break e;case 1:a=l;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_A===null||!_A.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=X4(s,a,e);_R(s,x);break e}}s=s.return}while(s!==null)}pQ(t)}catch(_){e=_,or===t&&t!==null&&(or=t=t.return);continue}break}while(1)}function hQ(){var n=tw.current;return tw.current=ew,n===null?ew:n}function CS(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(zc&268435455)&&!(Sx&268435455)||rA(Er,Or)}function iw(n,e){var t=Ht;Ht|=2;var r=hQ();(Er!==n||Or!==e)&&(Ka=null,Sc(n,e));do try{uY();break}catch(i){fQ(n,i)}while(1);if(lS(),Ht=t,tw.current=r,or!==null)throw Error(Pe(261));return Er=null,Or=0,mr}function uY(){for(;or!==null;)dQ(or)}function fY(){for(;or!==null&&!O7();)dQ(or)}function dQ(n){var e=gQ(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,e===null?pQ(n):or=e,xS.current=null}function pQ(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=sY(t,e),t!==null){t.flags&=32767,or=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mr=6,or=null;return}}else if(t=iY(t,e,Yi),t!==null){or=t;return}if(e=e.sibling,e!==null){or=e;return}or=e=n}while(e!==null);mr===0&&(mr=5)}function hc(n,e,t){var r=Jt,i=Ns.transition;try{Ns.transition=null,Jt=1,hY(n,e,t,r)}finally{Ns.transition=i,Jt=r}return null}function hY(n,e,t,r){do sh();while(aA!==null);if(Ht&6)throw Error(Pe(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Pe(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(K7(n,s),n===Er&&(or=Er=null,Or=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||l0||(l0=!0,vQ(ky,function(){return sh(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ns.transition,Ns.transition=null;var o=Jt;Jt=1;var a=Ht;Ht|=4,xS.current=null,aY(n,t),AQ(t,n),UK(pE),Hy=!!dE,pE=dE=null,n.current=t,lY(t),N7(),Ht=a,Jt=o,Ns.transition=s}else n.current=t;if(l0&&(l0=!1,aA=n,rw=i),s=n.pendingLanes,s===0&&(_A=null),H7(t.stateNode),Ii(n,Xn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(nw)throw nw=!1,n=PE,PE=null,n;return rw&1&&n.tag!==0&&sh(),s=n.pendingLanes,s&1?n===DE?Zp++:(Zp=0,DE=n):Zp=0,KA(),null}function sh(){if(aA!==null){var n=Yk(rw),e=Ns.transition,t=Jt;try{if(Ns.transition=null,Jt=16>n?16:n,aA===null)var r=!1;else{if(n=aA,aA=null,rw=0,Ht&6)throw Error(Pe(331));var i=Ht;for(Ht|=4,Ze=n.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var A=a[l];for(Ze=A;Ze!==null;){var c=Ze;switch(c.tag){case 0:case 11:case 15:$p(8,c,s)}var u=c.child;if(u!==null)u.return=c,Ze=u;else for(;Ze!==null;){c=Ze;var f=c.sibling,h=c.return;if(oQ(c),c===A){Ze=null;break}if(f!==null){f.return=h,Ze=f;break}Ze=h}}}var p=s.alternate;if(p!==null){var d=p.child;if(d!==null){p.child=null;do{var g=d.sibling;d.sibling=null,d=g}while(d!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$p(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Ze=m;break e}Ze=s.return}}var y=n.current;for(Ze=y;Ze!==null;){o=Ze;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ze=w;else e:for(o=y;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mx(9,a)}}catch(_){Nn(a,a.return,_)}if(a===o){Ze=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Ze=x;break e}Ze=a.return}}if(Ht=i,KA(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(yx,n)}catch{}r=!0}return r}finally{Jt=t,Ns.transition=e}}return!1}function VR(n,e,t){e=Ch(t,e),e=$4(n,e,1),n=xA(n,e,1),e=pi(),n!==null&&(cg(n,1,e),Ii(n,e))}function Nn(n,e,t){if(n.tag===3)VR(n,n,t);else for(;e!==null;){if(e.tag===3){VR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_A===null||!_A.has(r))){n=Ch(t,n),n=X4(e,n,1),e=xA(e,n,1),n=pi(),e!==null&&(cg(e,1,n),Ii(e,n));break}}e=e.return}}function dY(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=pi(),n.pingedLanes|=n.suspendedLanes&t,Er===n&&(Or&t)===t&&(mr===4||mr===3&&(Or&130023424)===Or&&500>Xn()-bS?Sc(n,0):_S|=t),Ii(n,e)}function mQ(n,e){e===0&&(n.mode&1?(e=Jg,Jg<<=1,!(Jg&130023424)&&(Jg=4194304)):e=1);var t=pi();n=vl(n,e),n!==null&&(cg(n,e,t),Ii(n,t))}function pY(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),mQ(n,t)}function mY(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(e),mQ(n,t)}var gQ;gQ=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Si.current)Ci=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ci=!1,rY(n,e,t);Ci=!!(n.flags&131072)}else Ci=!1,Bn&&e.flags&1048576&&w4(e,Yy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qv(n,e),n=e.pendingProps;var i=_h(e,ei.current);ih(e,t),i=mS(null,e,r,n,i,t);var s=gS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ti(r)?(s=!0,Wy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uS(e),i.updater=Ex,e.stateNode=i,i._reactInternals=e,BE(e,r,n,t),e=ME(null,e,r,!0,s,t)):(e.tag=0,Bn&&s&&iS(e),ai(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(qv(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vY(r),n=po(r,n),i){case 0:e=CE(null,e,r,n,t);break e;case 1:e=LR(null,e,r,n,t);break e;case 11:e=FR(null,e,r,n,t);break e;case 14:e=UR(null,e,r,po(r.type,n),t);break e}throw Error(Pe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),CE(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),LR(n,e,r,i,t);case 3:e:{if(eQ(e),n===null)throw Error(Pe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,B4(n,e),Zy(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ch(Error(Pe(423)),e),e=PR(n,e,r,t,i);break e}else if(r!==i){i=Ch(Error(Pe(424)),e),e=PR(n,e,r,t,i);break e}else for(ns=wA(e.stateNode.containerInfo.firstChild),ss=e,Bn=!0,vo=null,t=S4(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(bh(),r===i){e=yl(n,e,t);break e}ai(n,e,r,t)}e=e.child}return e;case 5:return T4(e),n===null&&xE(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,mE(r,i)?o=null:s!==null&&mE(r,s)&&(e.flags|=32),q4(n,e),ai(n,e,o,t),e.child;case 6:return n===null&&xE(e),null;case 13:return tQ(n,e,t);case 4:return fS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Bh(e,null,r,t):ai(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),FR(n,e,r,i,t);case 7:return ai(n,e,e.pendingProps,t),e.child;case 8:return ai(n,e,e.pendingProps.children,t),e.child;case 12:return ai(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,cn($y,r._currentValue),r._currentValue=o,s!==null)if(Co(s.value,o)){if(s.children===i.children&&!Si.current){e=yl(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ll(-1,t&-t),l.tag=2;var A=s.updateQueue;if(A!==null){A=A.shared;var c=A.pending;c===null?l.next=l:(l.next=c.next,c.next=l),A.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),_E(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Pe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),_E(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ai(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ih(e,t),i=zs(i),r=r(i),e.flags|=1,ai(n,e,r,t),e.child;case 14:return r=e.type,i=po(r,e.pendingProps),i=po(r.type,i),UR(n,e,r,i,t);case 15:return Z4(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:po(r,i),qv(n,e),e.tag=1,Ti(r)?(n=!0,Wy(e)):n=!1,ih(e,t),C4(e,r,i),BE(e,r,i,t),ME(null,e,r,!0,n,t);case 19:return nQ(n,e,t);case 22:return J4(n,e,t)}throw Error(Pe(156,e.tag))};function vQ(n,e){return Vk(n,e)}function gY(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(n,e,t,r){return new gY(n,e,t,r)}function MS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function vY(n){if(typeof n=="function")return MS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===WM)return 11;if(n===KM)return 14}return 2}function BA(n,e){var t=n.alternate;return t===null?(t=Fs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ny(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")MS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Rf:return Tc(t.children,i,s,e);case jM:o=8,i|=8;break;case YB:return n=Fs(12,t,e,i|2),n.elementType=YB,n.lanes=s,n;case $B:return n=Fs(13,t,e,i),n.elementType=$B,n.lanes=s,n;case XB:return n=Fs(19,t,e,i),n.elementType=XB,n.lanes=s,n;case Mk:return Tx(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ek:o=10;break e;case Ck:o=9;break e;case WM:o=11;break e;case KM:o=14;break e;case Xl:o=16,r=null;break e}throw Error(Pe(130,n==null?n:typeof n,""))}return e=Fs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Tc(n,e,t,r){return n=Fs(7,n,r,e),n.lanes=t,n}function Tx(n,e,t,r){return n=Fs(22,n,r,e),n.elementType=Mk,n.lanes=t,n.stateNode={isHidden:!1},n}function _1(n,e,t){return n=Fs(6,n,null,e),n.lanes=t,n}function b1(n,e,t){return e=Fs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function yY(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r1(0),this.expirationTimes=r1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function SS(n,e,t,r,i,s,o,a,l){return n=new yY(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},uS(s),n}function wY(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:If,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function yQ(n){if(!n)return LA;n=n._reactInternals;e:{if(ru(n)!==n||n.tag!==1)throw Error(Pe(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ti(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Pe(171))}if(n.tag===1){var t=n.type;if(Ti(t))return v4(n,t,e)}return e}function wQ(n,e,t,r,i,s,o,a,l){return n=SS(t,r,!0,n,i,s,o,a,l),n.context=yQ(null),t=n.current,r=pi(),i=bA(t),s=ll(r,i),s.callback=e??null,xA(t,s,i),n.current.lanes=i,cg(n,i,r),Ii(n,r),n}function Ix(n,e,t,r){var i=e.current,s=pi(),o=bA(i);return t=yQ(t),e.context===null?e.context=t:e.pendingContext=t,e=ll(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=xA(i,e,o),n!==null&&(_o(n,i,o,s),Xv(n,i,o)),o}function sw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function jR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function TS(n,e){jR(n,e),(n=n.alternate)&&jR(n,e)}function xY(){return null}var xQ=typeof reportError=="function"?reportError:function(n){console.error(n)};function IS(n){this._internalRoot=n}Rx.prototype.render=IS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Pe(409));Ix(n,e,null,null)};Rx.prototype.unmount=IS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Gc(function(){Ix(null,n,null,null)}),e[gl]=null}};function Rx(n){this._internalRoot=n}Rx.prototype.unstable_scheduleHydration=function(n){if(n){var e=Zk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<nA.length&&e!==0&&e<nA[t].priority;t++);nA.splice(t,0,n),t===0&&qk(n)}};function RS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function WR(){}function _Y(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var A=sw(o);s.call(A)}}var o=wQ(e,r,n,0,null,!1,!1,"",WR);return n._reactRootContainer=o,n[gl]=o.current,Bm(n.nodeType===8?n.parentNode:n),Gc(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var A=sw(l);a.call(A)}}var l=SS(n,0,!1,null,null,!1,!1,"",WR);return n._reactRootContainer=l,n[gl]=l.current,Bm(n.nodeType===8?n.parentNode:n),Gc(function(){Ix(e,l,t,r)}),l}function Ux(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=sw(o);a.call(l)}}Ix(e,o,n,i)}else o=_Y(t,e,n,i,r);return sw(o)}$k=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=yp(e.pendingLanes);t!==0&&(XM(e,t|1),Ii(e,Xn()),!(Ht&6)&&(Mh=Xn()+500,KA()))}break;case 13:Gc(function(){var r=vl(n,1);if(r!==null){var i=pi();_o(r,n,1,i)}}),TS(n,1)}};ZM=function(n){if(n.tag===13){var e=vl(n,134217728);if(e!==null){var t=pi();_o(e,n,134217728,t)}TS(n,134217728)}};Xk=function(n){if(n.tag===13){var e=bA(n),t=vl(n,e);if(t!==null){var r=pi();_o(t,n,e,r)}TS(n,e)}};Zk=function(){return Jt};Jk=function(n,e){var t=Jt;try{return Jt=n,e()}finally{Jt=t}};oE=function(n,e,t){switch(e){case"input":if(qB(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=bx(r);if(!i)throw Error(Pe(90));Tk(r),qB(r,i)}}}break;case"textarea":Rk(n,t);break;case"select":e=t.value,e!=null&&eh(n,!!t.multiple,e,!1)}};Nk=BS;kk=Gc;var bY={usingClientEntryPoint:!1,Events:[fg,Pf,bx,Dk,Ok,BS]},Ud={findFiberByHostInstance:xc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BY={bundleType:Ud.bundleType,version:Ud.version,rendererPackageName:Ud.rendererPackageName,rendererConfig:Ud.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ml.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zk(n),n===null?null:n.stateNode},findFiberByHostInstance:Ud.findFiberByHostInstance||xY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var A0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!A0.isDisabled&&A0.supportsFiber)try{yx=A0.inject(BY),oa=A0}catch{}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bY;ds.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RS(e))throw Error(Pe(200));return wY(n,e,null,t)};ds.createRoot=function(n,e){if(!RS(n))throw Error(Pe(299));var t=!1,r="",i=xQ;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=SS(n,1,!1,null,null,t,!1,r,i),n[gl]=e.current,Bm(n.nodeType===8?n.parentNode:n),new IS(e)};ds.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Pe(188)):(n=Object.keys(n).join(","),Error(Pe(268,n)));return n=zk(e),n=n===null?null:n.stateNode,n};ds.flushSync=function(n){return Gc(n)};ds.hydrate=function(n,e,t){if(!Fx(e))throw Error(Pe(200));return Ux(null,n,e,!0,t)};ds.hydrateRoot=function(n,e,t){if(!RS(n))throw Error(Pe(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=xQ;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wQ(e,null,n,1,t??null,i,!1,s,o),n[gl]=e.current,Bm(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Rx(e)};ds.render=function(n,e,t){if(!Fx(e))throw Error(Pe(200));return Ux(null,n,e,!1,t)};ds.unmountComponentAtNode=function(n){if(!Fx(n))throw Error(Pe(40));return n._reactRootContainer?(Gc(function(){Ux(null,null,n,!1,function(){n._reactRootContainer=null,n[gl]=null})}),!0):!1};ds.unstable_batchedUpdates=BS;ds.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Fx(t))throw Error(Pe(200));if(n==null||n._reactInternals===void 0)throw Error(Pe(38));return Ux(n,e,t,!1,r)};ds.version="18.2.0-next-9e3b772b8-20220608";function _Q(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_Q)}catch(n){console.error(n)}}_Q(),wk.exports=ds;var EY=wk.exports,KR=EY;WB.createRoot=KR.createRoot,WB.hydrateRoot=KR.hydrateRoot;const CY="/assets/cc_bgm_balanced-f542698c.wav",Ys=ye.createContext(),MY=({children:n})=>{const[e,t]=ye.useState(!1),r=$.useRef(null),i=()=>{t(!1);const o=r.current;o.src=CY,o.loop=!0,o.volume=0,o.play();let a=0;const l=5,A=setInterval(()=>{a=Math.max(a+1/(10*l*60),1),a>=1&&clearInterval(A),o.volume=a},1e3/60)},s=()=>{t(!0),r.current.pause()};return N.jsxs(Ys.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[N.jsx("audio",{ref:r}),n]})},SY=ye.createContext(),TY=n=>{const[e,t]=ye.useState(null),[r,i]=ye.useState(null),[s,o]=ye.useState(!1),[a,l]=ye.useState([]);return N.jsx(SY.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:r,setEnsName:i,connected:s,setConnected:o,OTTokens:a,setOTTokens:l},children:n.children})};function Ya(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bQ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var os={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Sh={duration:.5,overwrite:!1,delay:0},FS,Zr,rr,Us=1e8,sn=1/Us,kE=Math.PI*2,IY=kE/4,RY=0,BQ=Math.sqrt,FY=Math.cos,UY=Math.sin,Cr=function(e){return typeof e=="string"},kn=function(e){return typeof e=="function"},wl=function(e){return typeof e=="number"},US=function(e){return typeof e>"u"},da=function(e){return typeof e=="object"},Ri=function(e){return e!==!1},EQ=function(){return typeof window<"u"},c0=function(e){return kn(e)||Cr(e)},CQ=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Jr=Array.isArray,QE=/(?:-?\.?\d|\.)+/gi,MQ=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,zf=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,B1=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,SQ=/[+-]=-?[.\d]+/,TQ=/[^,'"\[\]\s]+/gi,LY=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,In,bs,HE,LS,ls={},ow={},IQ,RQ=function(e){return(ow=Vc(e,ls))&&As},PS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},aw=function(e,t){return!t&&console.warn(e)},FQ=function(e,t){return e&&(ls[e]=t)&&ow&&(ow[e]=t)||ls},Um=function(){return 0},PY={suppressEvents:!0,isStart:!0,kill:!1},ry={suppressEvents:!0,kill:!1},DY={suppressEvents:!0},DS={},EA=[],zE={},UQ,Zi={},E1={},YR=30,iy=[],OS="",NS=function(e){var t=e[0],r,i;if(da(t)||kn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=iy.length;i--&&!iy[i].targetTest(t););r=iy[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new tH(e[i],r)))||e.splice(i,1);return e},Ic=function(e){return e._gsap||NS(Ls(e))[0]._gsap},LQ=function(e,t,r){return(r=e[t])&&kn(r)?e[t]():US(r)&&e.getAttribute&&e.getAttribute(t)||r},Fi=function(e,t){return(e=e.split(",")).forEach(t)||e},Yn=function(e){return Math.round(e*1e5)/1e5||0},Fr=function(e){return Math.round(e*1e7)/1e7||0},oh=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},OY=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},lw=function(){var e=EA.length,t=EA.slice(0),r,i;for(zE={},EA.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},PQ=function(e,t,r,i){EA.length&&!Zr&&lw(),e.render(t,r,i||Zr&&t<0&&(e._initted||e._startAt)),EA.length&&!Zr&&lw()},DQ=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(TQ).length<2?t:Cr(e)?e.trim():e},OQ=function(e){return e},Vs=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},NY=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},Vc=function(e,t){for(var r in t)e[r]=t[r];return e},$R=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=da(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},Aw=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Jp=function(e){var t=e.parent||In,r=e.keyframes?NY(Jr(e.keyframes)):Vs;if(Ri(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},kY=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},NQ=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Lx=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},PA=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},Rc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},QY=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},GE=function(e,t,r,i){return e._startAt&&(Zr?e._startAt.revert(ry):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},HY=function n(e){return!e||e._ts&&n(e.parent)},XR=function(e){return e._repeat?Th(e._tTime,e=e.duration()+e._rDelay)*e:0},Th=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},cw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Px=function(e){return e._end=Fr(e._start+(e._tDur/Math.abs(e._ts||e._rts||sn)||0))},Dx=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Fr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Px(e),r._dirty||Rc(r,e)),e},kQ=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=cw(e.rawTime(),t),(!t._dur||dg(0,t.totalDuration(),r)-t._tTime>sn)&&t.render(r,!0)),Rc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-sn}},$o=function(e,t,r,i){return t.parent&&PA(t),t._start=Fr((wl(r)?r:r||e!==In?_s(e,r,t):e._time)+t._delay),t._end=Fr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),NQ(e,t,"_first","_last",e._sort?"_start":0),VE(t)||(e._recent=t),i||kQ(e,t),e._ts<0&&Dx(e,e._tTime),e},QQ=function(e,t){return(ls.ScrollTrigger||PS("scrollTrigger",t))&&ls.ScrollTrigger.create(t,e)},HQ=function(e,t,r,i,s){if(QS(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Zr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&UQ!==Ji.frame)return EA.push(e),e._lazy=[s,i],1},zY=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},VE=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},GY=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&zY(e)&&!(!e._initted&&VE(e))||(e._ts<0||e._dp._ts<0)&&!VE(e))?0:1,a=e._rDelay,l=0,A,c,u;if(a&&e._repeat&&(l=dg(0,e._tDur,t),c=Th(l,a),e._yoyo&&c&1&&(o=1-o),c!==Th(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Zr||i||e._zTime===sn||!t&&e._zTime){if(!e._initted&&HQ(e,t,i,r,l))return;for(u=e._zTime,e._zTime=t||(r?sn:0),r||(r=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,A=e._pt;A;)A.r(o,A.d),A=A._next;t<0&&GE(e,t,r,!0),e._onUpdate&&!r&&Ps(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Ps(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&PA(e,1),!r&&!Zr&&(Ps(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},VY=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Ih=function(e,t,r,i){var s=e._repeat,o=Fr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Fr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Dx(e,e._tTime=e._tDur*a),e.parent&&Px(e),r||Rc(e.parent,e),e},ZR=function(e){return e instanceof Ei?Rc(e):Ih(e,e._dur)},jY={_start:0,endTime:Um,totalDuration:Um},_s=function n(e,t,r){var i=e.labels,s=e._recent||jY,o=e.duration()>=Us?s.endTime(!1):e._dur,a,l,A;return Cr(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),A=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(A?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),A&&r&&(l=l/100*(Jr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},qp=function(e,t,r){var i=wl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ri(l.vars.inherit)&&l.parent;o.immediateRender=Ri(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new hr(t[0],o,t[s+1])},YA=function(e,t){return e||e===0?t(e):t},dg=function(e,t,r){return r<e?e:r>t?t:r},$r=function(e,t){return!Cr(e)||!(t=LY.exec(e))?"":t[1]},WY=function(e,t,r){return YA(r,function(i){return dg(e,t,i)})},jE=[].slice,zQ=function(e,t){return e&&da(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&da(e[0]))&&!e.nodeType&&e!==bs},KY=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return Cr(i)&&!t||zQ(i,1)?(s=r).push.apply(s,Ls(i)):r.push(i)})||r},Ls=function(e,t,r){return rr&&!t&&rr.selector?rr.selector(e):Cr(e)&&!r&&(HE||!Rh())?jE.call((t||LS).querySelectorAll(e),0):Jr(e)?KY(e,r):zQ(e)?jE.call(e,0):e?[e]:[]},WE=function(e){return e=Ls(e)[0]||aw("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Ls(t,r.querySelectorAll?r:r===e?aw("Invalid scope")||LS.createElement("div"):e)}},GQ=function(e){return e.sort(function(){return .5-Math.random()})},VQ=function(e){if(kn(e))return e;var t=da(e)?e:{each:e},r=Fc(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,A=t.axis,c=i,u=i;return Cr(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],u=i[1]),function(f,h,p){var d=(p||t).length,g=o[d],m,y,w,x,_,C,T,b,M;if(!g){if(M=t.grid==="auto"?0:(t.grid||[1,Us])[1],!M){for(T=-Us;T<(T=p[M++].getBoundingClientRect().left)&&M<d;);M--}for(g=o[d]=[],m=l?Math.min(M,d)*c-.5:i%M,y=M===Us?0:l?d*u/M-.5:i/M|0,T=0,b=Us,C=0;C<d;C++)w=C%M-m,x=y-(C/M|0),g[C]=_=A?Math.abs(A==="y"?x:w):BQ(w*w+x*x),_>T&&(T=_),_<b&&(b=_);i==="random"&&GQ(g),g.max=T-b,g.min=b,g.v=d=(parseFloat(t.amount)||parseFloat(t.each)*(M>d?d-1:A?A==="y"?d/M:M:Math.max(M,d/M))||0)*(i==="edges"?-1:1),g.b=d<0?s-d:s,g.u=$r(t.amount||t.each)||0,r=r&&d<0?JQ(r):r}return d=(g[f]-g.min)/g.max||0,Fr(g.b+(r?r(d):d)*g.v)+g.u}},KE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Fr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(wl(r)?0:$r(r))}},jQ=function(e,t){var r=Jr(e),i,s;return!r&&da(e)&&(i=r=e.radius||Us,e.values?(e=Ls(e.values),(s=!wl(e[0]))&&(i*=i)):e=KE(e.increment)),YA(t,r?kn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),A=Us,c=0,u=e.length,f,h;u--;)s?(f=e[u].x-a,h=e[u].y-l,f=f*f+h*h):f=Math.abs(e[u]-a),f<A&&(A=f,c=u);return c=!i||A<=i?e[c]:o,s||c===o||wl(o)?c:c+$r(o)}:KE(e))},WQ=function(e,t,r,i){return YA(Jr(e)?!t:r===!0?!!(r=0):!i,function(){return Jr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},YY=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},$Y=function(e,t){return function(r){return e(parseFloat(r))+(t||$r(r))}},XY=function(e,t,r){return YQ(e,t,0,1,r)},KQ=function(e,t,r){return YA(r,function(i){return e[~~t(i)]})},ZY=function n(e,t,r){var i=t-e;return Jr(e)?KQ(e,n(0,e.length),t):YA(r,function(s){return(i+(s-e)%i)%i+e})},JY=function n(e,t,r){var i=t-e,s=i*2;return Jr(e)?KQ(e,n(0,e.length-1),t):YA(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},Lm=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?TQ:QE),r+=e.substr(t,i-t)+WQ(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},YQ=function(e,t,r,i,s){var o=t-e,a=i-r;return YA(s,function(l){return r+((l-e)/o*a||0)})},qY=function n(e,t,r,i){var s=isNaN(e+t)?0:function(h){return(1-h)*e+h*t};if(!s){var o=Cr(e),a={},l,A,c,u,f;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Jr(e)&&!Jr(t)){for(c=[],u=e.length,f=u-2,A=1;A<u;A++)c.push(n(e[A-1],e[A]));u--,s=function(p){p*=u;var d=Math.min(f,~~p);return c[d](p-d)},r=t}else i||(e=Vc(Jr(e)?[]:{},e));if(!c){for(l in t)kS.call(a,e,l,"get",t[l]);s=function(p){return GS(p,a)||(o?e.p:e)}}}return YA(r,s)},JR=function(e,t,r){var i=e.labels,s=Us,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Ps=function(e,t,r){var i=e.vars,s=i[t],o=rr,a=e._ctx,l,A,c;if(s)return l=i[t+"Params"],A=i.callbackScope||e,r&&EA.length&&lw(),a&&(rr=a),c=l?s.apply(A,l):s.call(A),rr=o,c},xp=function(e){return PA(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Zr),e.progress()<1&&Ps(e,"onInterrupt"),e},Gf,e$=function(e){e=!e.name&&e.default||e;var t=e.name,r=kn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Um,render:GS,add:kS,kill:m$,modifier:p$,rawVars:0},o={targetTest:0,get:0,getSetter:zS,aliases:{},register:0};if(Rh(),e!==i){if(Zi[t])return;Vs(i,Vs(Aw(e,s),o)),Vc(i.prototype,Vc(s,Aw(e,o))),Zi[i.prop=t]=i,e.targetTest&&(iy.push(i),DS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}FQ(t,i),e.register&&e.register(As,i,Ui)},nn=255,_p={aqua:[0,nn,nn],lime:[0,nn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,nn],navy:[0,0,128],white:[nn,nn,nn],olive:[128,128,0],yellow:[nn,nn,0],orange:[nn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[nn,0,0],pink:[nn,192,203],cyan:[0,nn,nn],transparent:[nn,nn,nn,0]},C1=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*nn+.5|0},$Q=function(e,t,r){var i=e?wl(e)?[e>>16,e>>8&nn,e&nn]:0:_p.black,s,o,a,l,A,c,u,f,h,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),_p[e])i=_p[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&nn,i&nn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&nn,e&nn]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(QE),!t)l=+i[0]%360/360,A=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(A+1):c+A-c*A,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=C1(l+1/3,s,o),i[1]=C1(l,s,o),i[2]=C1(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(MQ),r&&i.length<4&&(i[3]=1),i}else i=e.match(QE)||_p.transparent;i=i.map(Number)}return t&&!p&&(s=i[0]/nn,o=i[1]/nn,a=i[2]/nn,u=Math.max(s,o,a),f=Math.min(s,o,a),c=(u+f)/2,u===f?l=A=0:(h=u-f,A=c>.5?h/(2-u-f):h/(u+f),l=u===s?(o-a)/h+(o<a?6:0):u===o?(a-s)/h+2:(s-o)/h+4,l*=60),i[0]=~~(l+.5),i[1]=~~(A*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},XQ=function(e){var t=[],r=[],i=-1;return e.split(CA).forEach(function(s){var o=s.match(zf)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},qR=function(e,t,r){var i="",s=(e+i).match(CA),o=t?"hsla(":"rgba(",a=0,l,A,c,u;if(!s)return e;if(s=s.map(function(f){return(f=$Q(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),r&&(c=XQ(e),l=r.c,l.join(i)!==c.c.join(i)))for(A=e.replace(CA,"1").split(zf),u=A.length-1;a<u;a++)i+=A[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!A)for(A=e.split(CA),u=A.length-1;a<u;a++)i+=A[a]+s[a];return i+A[u]},CA=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in _p)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),t$=/hsl[a]?\(/,ZQ=function(e){var t=e.join(" "),r;if(CA.lastIndex=0,CA.test(t))return r=t$.test(t),e[1]=qR(e[1],r),e[0]=qR(e[0],r,XQ(e[1])),!0},Pm,Ji=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,A,c,u,f,h,p=function d(g){var m=n()-i,y=g===!0,w,x,_,C;if(m>e&&(r+=m-t),i+=m,_=i-r,w=_-o,(w>0||y)&&(C=++u.frame,f=_-u.time*1e3,u.time=_=_/1e3,o+=w+(w>=s?4:s-w),x=1),y||(l=A(d)),x)for(h=0;h<a.length;h++)a[h](_,f,C,g)};return u={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return f/(1e3/(g||60))},wake:function(){IQ&&(!HE&&EQ()&&(bs=HE=window,LS=bs.document||{},ls.gsap=As,(bs.gsapVersions||(bs.gsapVersions=[])).push(As.version),RQ(ow||bs.GreenSockGlobals||!bs.gsap&&bs||{}),c=bs.requestAnimationFrame),l&&u.sleep(),A=c||function(g){return setTimeout(g,o-u.time*1e3+1|0)},Pm=1,p(2))},sleep:function(){(c?bs.cancelAnimationFrame:clearTimeout)(l),Pm=0,A=Um},lagSmoothing:function(g,m){e=g||1/0,t=Math.min(m||33,e)},fps:function(g){s=1e3/(g||240),o=u.time*1e3+s},add:function(g,m,y){var w=m?function(x,_,C,T){g(x,_,C,T),u.remove(w)}:g;return u.remove(g),a[y?"unshift":"push"](w),Rh(),w},remove:function(g,m){~(m=a.indexOf(g))&&a.splice(m,1)&&h>=m&&h--},_listeners:a},u}(),Rh=function(){return!Pm&&Ji.wake()},Ot={},n$=/^[\d.\-M][\d.\-,\s]/,r$=/["']/g,i$=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,A;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,A=l.substr(0,a),t[i]=isNaN(A)?A.replace(r$,"").trim():+A,i=l.substr(a+1).trim();return t},s$=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},o$=function(e){var t=(e+"").split("("),r=Ot[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[i$(t[1])]:s$(e).split(",").map(DQ)):Ot._CE&&n$.test(e)?Ot._CE("",e):r},JQ=function(e){return function(t){return 1-e(1-t)}},qQ=function n(e,t){for(var r=e._first,i;r;)r instanceof Ei?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},Fc=function(e,t){return e&&(kn(e)?e:Ot[e]||o$(e))||t},iu=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Fi(e,function(a){Ot[a]=ls[a]=s,Ot[o=a.toLowerCase()]=r;for(var l in s)Ot[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ot[a+"."+l]=s[l]}),s},eH=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},M1=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/kE*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*UY((c-o)*s)+1},l=e==="out"?a:e==="in"?function(A){return 1-a(1-A)}:eH(a);return s=kE/s,l.config=function(A,c){return n(e,A,c)},l},S1=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:eH(r);return i.config=function(s){return n(e,s)},i};Fi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;iu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Ot.Linear.easeNone=Ot.none=Ot.Linear.easeIn;iu("Elastic",M1("in"),M1("out"),M1());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};iu("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);iu("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});iu("Circ",function(n){return-(BQ(1-n*n)-1)});iu("Sine",function(n){return n===1?1:-FY(n*IY)+1});iu("Back",S1("in"),S1("out"),S1());Ot.SteppedEase=Ot.steps=ls.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-sn;return function(a){return((i*dg(0,o,a)|0)+s)*r}}};Sh.ease=Ot["quad.out"];Fi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return OS+=n+","+n+"Params,"});var tH=function(e,t){this.id=RY++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:LQ,this.set=t?t.getSetter:zS},Fh=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Ih(this,+t.duration,1,1),this.data=t.data,rr&&(this._ctx=rr,rr.data.push(this)),Pm||Ji.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Ih(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(Rh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Dx(this,r),!s._dp||s.parent||kQ(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&$o(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===sn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),PQ(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+XR(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+XR(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?Th(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-sn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?cw(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-sn?0:this._rts,this.totalTime(dg(-this._delay,this._tDur,i),!0),Px(this),QY(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==sn&&(this._tTime-=sn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&$o(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Ri(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?cw(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=DY);var i=Zr;return Zr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Zr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,ZR(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,ZR(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(_s(this,r),Ri(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Ri(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-sn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-sn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-sn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=kn(r)?r:OQ,a=function(){var A=i.then;i.then=null,kn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=A),s(o),i.then=A};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){xp(this)},n}();Vs(Fh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-sn,_prom:0,_ps:!1,_rts:1});var Ei=function(n){bQ(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Ri(r.sortChildren),In&&$o(r.parent||In,Ya(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&QQ(Ya(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return qp(0,arguments,this),this},t.from=function(i,s,o){return qp(1,arguments,this),this},t.fromTo=function(i,s,o,a){return qp(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Jp(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new hr(i,s,_s(this,o),1),this},t.call=function(i,s,o){return $o(this,hr.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,A,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=A,o.onCompleteParams=c,o.parent=this,new hr(i,o,_s(this,l)),this},t.staggerFrom=function(i,s,o,a,l,A,c){return o.runBackwards=1,Jp(o).immediateRender=Ri(o.immediateRender),this.staggerTo(i,s,o,a,l,A,c)},t.staggerFromTo=function(i,s,o,a,l,A,c,u){return a.startAt=o,Jp(a).immediateRender=Ri(a.immediateRender),this.staggerTo(i,s,a,l,A,c,u)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,A=this._dur,c=i<=0?0:Fr(i),u=this._zTime<0!=i<0&&(this._initted||!A),f,h,p,d,g,m,y,w,x,_,C,T;if(this!==In&&c>l&&i>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&A&&(c+=this._time-a,i+=this._time-a),f=c,x=this._start,w=this._ts,m=!w,u&&(A||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(C=this._yoyo,g=A+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,o);if(f=Fr(c%g),c===l?(d=this._repeat,f=A):(d=~~(c/g),d&&d===c/g&&(f=A,d--),f>A&&(f=A)),_=Th(this._tTime,g),!a&&this._tTime&&_!==d&&(_=d),C&&d&1&&(f=A-f,T=1),d!==_&&!this._lock){var b=C&&_&1,M=b===(C&&d&1);if(d<_&&(b=!b),a=b?0:A,this._lock=1,this.render(a||(T?0:Fr(d*g)),s,!A)._lock=0,this._tTime=c,!s&&this.parent&&Ps(this,"onRepeat"),this.vars.repeatRefresh&&!T&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(A=this._dur,l=this._tDur,M&&(this._lock=2,a=b?A:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!T&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;qQ(this,T)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=VY(this,Fr(a),Fr(f)),y&&(c-=f-(f=y._start))),this._tTime=c,this._time=f,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&f&&!s&&(Ps(this,"onStart"),this._tTime!==c))return this;if(f>=a&&i>=0)for(h=this._first;h;){if(p=h._next,(h._act||f>=h._start)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(f-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(f-h._start)*h._ts,s,o),f!==this._time||!this._ts&&!m){y=0,p&&(c+=this._zTime=-sn);break}}h=p}else{h=this._last;for(var P=i<0?i:f;h;){if(p=h._prev,(h._act||P<=h._end)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(P-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(P-h._start)*h._ts,s,o||Zr&&(h._initted||h._startAt)),f!==this._time||!this._ts&&!m){y=0,p&&(c+=this._zTime=P?-sn:sn);break}}h=p}}if(y&&!s&&(this.pause(),y.render(f>=a?0:-sn)._zTime=f>=a?1:-1,this._ts))return this._start=x,Px(this),this.render(i,s,o);this._onUpdate&&!s&&Ps(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(x===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((i||!A)&&(c===l&&this._ts>0||!c&&this._ts<0)&&PA(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Ps(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(wl(s)||(s=_s(this,s,i)),!(i instanceof Fh)){if(Jr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Cr(i))return this.addLabel(i,s);if(kn(i))i=hr.delayedCall(0,i);else return this}return this!==i?$o(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Us);for(var l=[],A=this._first;A;)A._start>=a&&(A instanceof hr?s&&l.push(A):(o&&l.push(A),i&&l.push.apply(l,A.getChildren(!0,s,o)))),A=A._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Cr(i)?this.removeLabel(i):kn(i)?this.killTweensOf(i):(Lx(this,i),i===this._recent&&(this._recent=this._last),Rc(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Fr(Ji.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=_s(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=hr.delayedCall(0,s||Um,o);return a.data="isPause",this._hasPause=1,$o(this,a,_s(this,i))},t.removePause=function(i){var s=this._first;for(i=_s(this,i);s;)s._start===i&&s.data==="isPause"&&PA(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)lA!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Ls(i),l=this._first,A=wl(s),c;l;)l instanceof hr?OY(l._targets,a)&&(A?(!lA||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=_s(o,i),l=s,A=l.startAt,c=l.onStart,u=l.onStartParams,f=l.immediateRender,h,p=hr.to(o,Vs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale())||sn,onStart:function(){if(o.pause(),!h){var g=s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale());p._dur!==g&&Ih(p,g,0,1).render(p._time,!0,!0),h=1}c&&c.apply(p,u||[])}},s));return f?p.render(0):p},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,Vs({startAt:{time:_s(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),JR(this,_s(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),JR(this,_s(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+sn)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,A;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(A in l)l[A]>=o&&(l[A]+=i);return Rc(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),Rc(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Us,A,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)A=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,$o(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=A;Ih(o,o===In&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(In._ts&&(PQ(In,cw(i,In)),UQ=Ji.frame),Ji.frame>=YR){YR+=os.autoSleep||120;var s=In._first;if((!s||!s._ts)&&os.autoSleep&&Ji._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ji.sleep()}}},e}(Fh);Vs(Ei.prototype,{_lock:0,_hasPause:0,_forcing:0});var a$=function(e,t,r,i,s,o,a){var l=new Ui(this._pt,e,t,0,1,aH,null,s),A=0,c=0,u,f,h,p,d,g,m,y;for(l.b=r,l.e=i,r+="",i+="",(m=~i.indexOf("random("))&&(i=Lm(i)),o&&(y=[r,i],o(y,e,t),r=y[0],i=y[1]),f=r.match(B1)||[];u=B1.exec(i);)p=u[0],d=i.substring(A,u.index),h?h=(h+1)%5:d.substr(-5)==="rgba("&&(h=1),p!==f[c++]&&(g=parseFloat(f[c-1])||0,l._pt={_next:l._pt,p:d||c===1?d:",",s:g,c:p.charAt(1)==="="?oh(g,p)-g:parseFloat(p)-g,m:h&&h<4?Math.round:0},A=B1.lastIndex);return l.c=A<i.length?i.substring(A,i.length):"",l.fp=a,(SQ.test(i)||m)&&(l.e=0),this._pt=l,l},kS=function(e,t,r,i,s,o,a,l,A,c){kn(i)&&(i=i(s||0,e,o));var u=e[t],f=r!=="get"?r:kn(u)?A?e[t.indexOf("set")||!kn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](A):e[t]():u,h=kn(u)?A?f$:sH:HS,p;if(Cr(i)&&(~i.indexOf("random(")&&(i=Lm(i)),i.charAt(1)==="="&&(p=oh(f,i)+($r(f)||0),(p||p===0)&&(i=p))),!c||f!==i||YE)return!isNaN(f*i)&&i!==""?(p=new Ui(this._pt,e,t,+f||0,i-(f||0),typeof u=="boolean"?d$:oH,0,h),A&&(p.fp=A),a&&p.modifier(a,this,e),this._pt=p):(!u&&!(t in e)&&PS(t,i),a$.call(this,e,t,f,i,h,l||os.stringFilter,A))},l$=function(e,t,r,i,s){if(kn(e)&&(e=em(e,s,t,r,i)),!da(e)||e.style&&e.nodeType||Jr(e)||CQ(e))return Cr(e)?em(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=em(e[a],s,t,r,i);return o},nH=function(e,t,r,i,s,o){var a,l,A,c;if(Zi[e]&&(a=new Zi[e]).init(s,a.rawVars?t[e]:l$(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Ui(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Gf))for(A=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)A[a._props[c]]=l;return a},lA,YE,QS=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,A=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,h=i.yoyoEase,p=i.keyframes,d=i.autoRevert,g=e._dur,m=e._startAt,y=e._targets,w=e.parent,x=w&&w.data==="nested"?w.vars.targets:y,_=e._overwrite==="auto"&&!FS,C=e.timeline,T,b,M,P,Y,H,I,v,E,F,D,O,z;if(C&&(!p||!s)&&(s="none"),e._ease=Fc(s,Sh.ease),e._yEase=h?JQ(Fc(h===!0?s:h,Sh.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!C&&!!i.runBackwards,!C||p&&!i.stagger){if(v=y[0]?Ic(y[0]).harness:0,O=v&&i[v.prop],T=Aw(i,DS),m&&(m._zTime<0&&m.progress(1),t<0&&f&&a&&!d?m.render(-1,!0):m.revert(f&&g?ry:PY),m._lazy=0),o){if(PA(e._startAt=hr.set(y,Vs({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!m&&Ri(l),startAt:null,delay:0,onUpdate:A,onUpdateParams:c,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Zr||!a&&!d)&&e._startAt.revert(ry),a&&g&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(f&&g&&!m){if(t&&(a=!1),M=Vs({overwrite:!1,data:"isFromStart",lazy:a&&!m&&Ri(l),immediateRender:a,stagger:0,parent:w},T),O&&(M[v.prop]=O),PA(e._startAt=hr.set(y,M)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Zr?e._startAt.revert(ry):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,sn,sn);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&Ri(l)||l&&!g,b=0;b<y.length;b++){if(Y=y[b],I=Y._gsap||NS(y)[b]._gsap,e._ptLookup[b]=F={},zE[I.id]&&EA.length&&lw(),D=x===y?b:x.indexOf(Y),v&&(E=new v).init(Y,O||T,e,D,x)!==!1&&(e._pt=P=new Ui(e._pt,Y,E.name,0,1,E.render,E,0,E.priority),E._props.forEach(function(K){F[K]=P}),E.priority&&(H=1)),!v||O)for(M in T)Zi[M]&&(E=nH(M,T,e,D,Y,x))?E.priority&&(H=1):F[M]=P=kS.call(e,Y,M,"get",T[M],D,x,0,i.stringFilter);e._op&&e._op[b]&&e.kill(Y,e._op[b]),_&&e._pt&&(lA=e,In.killTweensOf(Y,F,e.globalTime(t)),z=!e.parent,lA=0),e._pt&&l&&(zE[I.id]=1)}H&&lH(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!z,p&&t<=0&&C.render(Us,!0,!0)},A$=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],A,c,u,f;if(!l)for(l=e._ptCache[t]=[],u=e._ptLookup,f=e._targets.length;f--;){if(A=u[f][t],A&&A.d&&A.d._pt)for(A=A.d._pt;A&&A.p!==t&&A.fp!==t;)A=A._next;if(!A)return YE=1,e.vars[t]="+=0",QS(e,a),YE=0,1;l.push(A)}for(f=l.length;f--;)c=l[f],A=c._pt||c,A.s=(i||i===0)&&!s?i:A.s+(i||0)+o*A.c,A.c=r-A.s,c.e&&(c.e=Yn(r)+$r(c.e)),c.b&&(c.b=A.s+$r(c.b))},c$=function(e,t){var r=e[0]?Ic(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=Vc({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},u$=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Jr(t))a=r[e]||(r[e]=[]),t.forEach(function(l,A){return a.push({t:A/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},em=function(e,t,r,i,s){return kn(e)?e.call(t,r,i,s):Cr(e)&&~e.indexOf("random(")?Lm(e):e},rH=OS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",iH={};Fi(rH+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return iH[n]=1});var hr=function(n){bQ(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Jp(i))||this;var l=a.vars,A=l.duration,c=l.delay,u=l.immediateRender,f=l.stagger,h=l.overwrite,p=l.keyframes,d=l.defaults,g=l.scrollTrigger,m=l.yoyoEase,y=i.parent||In,w=(Jr(r)||CQ(r)?wl(r[0]):"length"in i)?[r]:Ls(r),x,_,C,T,b,M,P,Y;if(a._targets=w.length?NS(w):aw("GSAP target "+r+" not found. https://greensock.com",!os.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=h,p||f||c0(A)||c0(c)){if(i=a.vars,x=a.timeline=new Ei({data:"nested",defaults:d||{},targets:y&&y.data==="nested"?y.vars.targets:w}),x.kill(),x.parent=x._dp=Ya(a),x._start=0,f||c0(A)||c0(c)){if(T=w.length,P=f&&VQ(f),da(f))for(b in f)~rH.indexOf(b)&&(Y||(Y={}),Y[b]=f[b]);for(_=0;_<T;_++)C=Aw(i,iH),C.stagger=0,m&&(C.yoyoEase=m),Y&&Vc(C,Y),M=w[_],C.duration=+em(A,Ya(a),_,M,w),C.delay=(+em(c,Ya(a),_,M,w)||0)-a._delay,!f&&T===1&&C.delay&&(a._delay=c=C.delay,a._start+=c,C.delay=0),x.to(M,C,P?P(_,M,w):0),x._ease=Ot.none;x.duration()?A=c=0:a.timeline=0}else if(p){Jp(Vs(x.vars.defaults,{ease:"none"})),x._ease=Fc(p.ease||i.ease||"none");var H=0,I,v,E;if(Jr(p))p.forEach(function(F){return x.to(w,F,">")}),x.duration();else{C={};for(b in p)b==="ease"||b==="easeEach"||u$(b,p[b],C,p.easeEach);for(b in C)for(I=C[b].sort(function(F,D){return F.t-D.t}),H=0,_=0;_<I.length;_++)v=I[_],E={ease:v.e,duration:(v.t-(_?I[_-1].t:0))/100*A},E[b]=v.v,x.to(w,E,H),H+=E.duration;x.duration()<A&&x.to({},{duration:A-x.duration()})}}A||a.duration(A=x.duration())}else a.timeline=0;return h===!0&&!FS&&(lA=Ya(a),In.killTweensOf(w),lA=0),$o(y,Ya(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!A&&!p&&a._start===Fr(y._time)&&Ri(u)&&HY(Ya(a))&&y.data!=="nested")&&(a._tTime=-sn,a.render(Math.max(0,-c)||0)),g&&QQ(Ya(a),g),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,A=this._dur,c=i<0,u=i>l-sn&&!c?l:i<sn?0:i,f,h,p,d,g,m,y,w,x;if(!A)GY(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=u,w=this.timeline,this._repeat){if(d=A+this._rDelay,this._repeat<-1&&c)return this.totalTime(d*100+i,s,o);if(f=Fr(u%d),u===l?(p=this._repeat,f=A):(p=~~(u/d),p&&p===u/d&&(f=A,p--),f>A&&(f=A)),m=this._yoyo&&p&1,m&&(x=this._yEase,f=A-f),g=Th(this._tTime,d),f===a&&!o&&this._initted)return this._tTime=u,this;p!==g&&(w&&this._yEase&&qQ(w,m),this.vars.repeatRefresh&&!m&&!this._lock&&(this._lock=o=1,this.render(Fr(d*p),!0).invalidate()._lock=0))}if(!this._initted){if(HQ(this,c?i:f,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(A!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(x||this._ease)(f/A),this._from&&(this.ratio=y=1-y),f&&!a&&!s&&(Ps(this,"onStart"),this._tTime!==u))return this;for(h=this._pt;h;)h.r(y,h.d),h=h._next;w&&w.render(i<0?i:!f&&m?-sn:w._dur*w._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&GE(this,i,s,o),Ps(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&Ps(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&GE(this,i,!0,!0),(i||!A)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&PA(this,1),!s&&!(c&&!a)&&(u||a||m)&&(Ps(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){Pm||Ji.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),A;return this._initted||QS(this,l),A=this._ease(l/this._dur),A$(this,i,s,o,a,A,l)?this.resetTo(i,s,o,a):(Dx(this,0),this.parent||NQ(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?xp(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,lA&&lA.vars.overwrite!==!0)._first||xp(this),this.parent&&o!==this.timeline.totalDuration()&&Ih(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Ls(i):a,A=this._ptLookup,c=this._pt,u,f,h,p,d,g,m;if((!s||s==="all")&&kY(a,l))return s==="all"&&(this._pt=0),xp(this);for(u=this._op=this._op||[],s!=="all"&&(Cr(s)&&(d={},Fi(s,function(y){return d[y]=1}),s=d),s=c$(a,s)),m=a.length;m--;)if(~l.indexOf(a[m])){f=A[m],s==="all"?(u[m]=s,p=f,h={}):(h=u[m]=u[m]||{},p=s);for(d in p)g=f&&f[d],g&&((!("kill"in g.d)||g.d.kill(d)===!0)&&Lx(this,g,"_pt"),delete f[d]),h!=="all"&&(h[d]=1)}return this._initted&&!this._pt&&c&&xp(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return qp(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return qp(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return In.killTweensOf(i,s,o)},e}(Fh);Vs(hr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Fi("staggerTo,staggerFrom,staggerFromTo",function(n){hr[n]=function(){var e=new Ei,t=jE.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var HS=function(e,t,r){return e[t]=r},sH=function(e,t,r){return e[t](r)},f$=function(e,t,r,i){return e[t](i.fp,r)},h$=function(e,t,r){return e.setAttribute(t,r)},zS=function(e,t){return kn(e[t])?sH:US(e[t])&&e.setAttribute?h$:HS},oH=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},d$=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},aH=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},GS=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},p$=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},m$=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Lx(this,t,"_pt"):t.dep||(r=1),t=i;return!r},g$=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},lH=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Ui=function(){function n(t,r,i,s,o,a,l,A,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||oH,this.d=l||this,this.set=A||HS,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=g$,this.m=r,this.mt=s,this.tween=i},n}();Fi(OS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return DS[n]=1});ls.TweenMax=ls.TweenLite=hr;ls.TimelineLite=ls.TimelineMax=Ei;In=new Ei({sortChildren:!1,defaults:Sh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});os.stringFilter=ZQ;var Uh=[],sy={},v$=[],eF=0,T1=function(e){return(sy[e]||v$).map(function(t){return t()})},$E=function(){var e=Date.now(),t=[];e-eF>2&&(T1("matchMediaInit"),Uh.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,A;for(a in i)o=bs.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,A=1);A&&(r.revert(),l&&t.push(r))}),T1("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),eF=e,T1("matchMedia"))},AH=function(){function n(t,r){this.selector=r&&WE(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){kn(r)&&(s=i,i=r,r=kn);var o=this,a=function(){var A=rr,c=o.selector,u;return A&&A!==o&&A.data.push(o),s&&(o.selector=WE(s)),rr=o,u=i.apply(o,arguments),kn(u)&&o._r.push(u),rr=A,o.selector=c,o.isReverted=!1,u};return o.last=a,r===kn?a(o):r?o[r]=a:a},e.ignore=function(r){var i=rr;rr=null,r(this),rr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof hr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(A){return o.splice(o.indexOf(A),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,A){return A.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof Fh)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=Uh.indexOf(this);~a&&Uh.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),y$=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){da(r)||(r={matches:r});var o=new AH(0,s||this.scope),a=o.conditions={},l,A,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(A in r)A==="all"?c=1:(l=bs.matchMedia(r[A]),l&&(Uh.indexOf(o)<0&&Uh.push(o),(a[A]=l.matches)&&(c=1),l.addListener?l.addListener($E):l.addEventListener("change",$E)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),uw={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return e$(i)})},timeline:function(e){return new Ei(e)},getTweensOf:function(e,t){return In.getTweensOf(e,t)},getProperty:function(e,t,r,i){Cr(e)&&(e=Ls(e)[0]);var s=Ic(e||{}).get,o=r?OQ:DQ;return r==="native"&&(r=""),e&&(t?o((Zi[t]&&Zi[t].get||s)(e,t,r,i)):function(a,l,A){return o((Zi[a]&&Zi[a].get||s)(e,a,l,A))})},quickSetter:function(e,t,r){if(e=Ls(e),e.length>1){var i=e.map(function(c){return As.quickSetter(c,t,r)}),s=i.length;return function(c){for(var u=s;u--;)i[u](c)}}e=e[0]||{};var o=Zi[t],a=Ic(e),l=a.harness&&(a.harness.aliases||{})[t]||t,A=o?function(c){var u=new o;Gf._pt=0,u.init(e,r?c+r:c,Gf,0,[e]),u.render(1,u),Gf._pt&&GS(1,Gf)}:a.set(e,l);return o?A:function(c){return A(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=As.to(e,Vc((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,A,c){return s.resetTo(t,l,A,c)};return o.tween=s,o},isTweening:function(e){return In.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Fc(e.ease,Sh.ease)),$R(Sh,e||{})},config:function(e){return $R(os,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!Zi[a]&&!ls[a]&&aw(t+" effect requires "+a+" plugin.")}),E1[t]=function(a,l,A){return r(Ls(a),Vs(l||{},s),A)},o&&(Ei.prototype[t]=function(a,l,A){return this.add(E1[t](a,da(l)?l:(A=l)&&{},this),A)})},registerEase:function(e,t){Ot[e]=Fc(t)},parseEase:function(e,t){return arguments.length?Fc(e,t):Ot},getById:function(e){return In.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Ei(e),i,s;for(r.smoothChildTiming=Ri(e.smoothChildTiming),In.remove(r),r._dp=0,r._time=r._tTime=In._time,i=In._first;i;)s=i._next,(t||!(!i._dur&&i instanceof hr&&i.vars.onComplete===i._targets[0]))&&$o(r,i,i._start-i._delay),i=s;return $o(In,r,0),r},context:function(e,t){return e?new AH(e,t):rr},matchMedia:function(e){return new y$(e)},matchMediaRefresh:function(){return Uh.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||$E()},addEventListener:function(e,t){var r=sy[e]||(sy[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=sy[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:ZY,wrapYoyo:JY,distribute:VQ,random:WQ,snap:jQ,normalize:XY,getUnit:$r,clamp:WY,splitColor:$Q,toArray:Ls,selector:WE,mapRange:YQ,pipe:YY,unitize:$Y,interpolate:qY,shuffle:GQ},install:RQ,effects:E1,ticker:Ji,updateRoot:Ei.updateRoot,plugins:Zi,globalTimeline:In,core:{PropTween:Ui,globals:FQ,Tween:hr,Timeline:Ei,Animation:Fh,getCache:Ic,_removeLinkedListItem:Lx,reverting:function(){return Zr},context:function(e){return e&&rr&&(rr.data.push(e),e._ctx=rr),rr},suppressOverwrites:function(e){return FS=e}}};Fi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return uw[n]=hr[n]});Ji.add(Ei.updateRoot);Gf=uw.to({},{duration:0});var w$=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},x$=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=w$(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},I1=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,A;if(Cr(s)&&(l={},Fi(s,function(c){return l[c]=1}),s=l),t){l={};for(A in s)l[A]=t(s[A]);s=l}x$(a,s)}}}},As=uw.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Zr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},I1("roundProps",KE),I1("modifiers"),I1("snap",jQ))||uw;hr.version=Ei.version=As.version="3.11.4";IQ=1;EQ()&&Rh();Ot.Power0;Ot.Power1;Ot.Power2;Ot.Power3;Ot.Power4;Ot.Linear;Ot.Quad;Ot.Cubic;Ot.Quart;Ot.Quint;Ot.Strong;Ot.Elastic;Ot.Back;Ot.SteppedEase;Ot.Bounce;Ot.Sine;Ot.Expo;Ot.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var tF,AA,ah,VS,Bc,nF,jS,_$=function(){return typeof window<"u"},xl={},dc=180/Math.PI,lh=Math.PI/180,yu=Math.atan2,rF=1e8,WS=/([A-Z])/g,b$=/(left|right|width|margin|padding|x)/i,B$=/[\s,\(]\S/,il={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},XE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},E$=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},C$=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},M$=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},cH=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},uH=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},S$=function(e,t,r){return e.style[t]=r},T$=function(e,t,r){return e.style.setProperty(t,r)},I$=function(e,t,r){return e._gsap[t]=r},R$=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},F$=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},U$=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Rn="transform",bo=Rn+"Origin",L$=function(e,t){var r=this,i=this.target,s=i.style;if(e in xl){if(this.tfm=this.tfm||{},e!=="transform"&&(e=il[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=Za(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:Za(i,e)),this.props.indexOf(Rn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(bo,t,"")),e=Rn}(s||t)&&this.props.push(e,t,s[e])},fH=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},P$=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].replace(WS,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=jS(),s&&!s.isStart&&!r[Rn]&&(fH(r),i.uncache=1)}},hH=function(e,t){var r={target:e,props:[],revert:P$,save:L$};return t&&t.split(",").forEach(function(i){return r.save(i)}),r},dH,ZE=function(e,t){var r=AA.createElementNS?AA.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):AA.createElement(e);return r.style?r:AA.createElement(e)},la=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(WS,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,Lh(t)||t,1)||""},iF="O,Moz,ms,Ms,Webkit".split(","),Lh=function(e,t,r){var i=t||Bc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(iF[o]+e in s););return o<0?null:(o===3?"ms":o>=0?iF[o]:"")+e},JE=function(){_$()&&window.document&&(tF=window,AA=tF.document,ah=AA.documentElement,Bc=ZE("div")||{style:{}},ZE("div"),Rn=Lh(Rn),bo=Rn+"Origin",Bc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",dH=!!Lh("perspective"),jS=As.core.reverting,VS=1)},R1=function n(e){var t=ZE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(ah.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),ah.removeChild(t),this.style.cssText=s,o},sF=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},pH=function(e){var t;try{t=e.getBBox()}catch{t=R1.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===R1||(t=R1.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+sF(e,["x","cx","x1"])||0,y:+sF(e,["y","cy","y1"])||0,width:0,height:0}:t},mH=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&pH(e))},Dm=function(e,t){if(t){var r=e.style;t in xl&&t!==bo&&(t=Rn),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(WS,"-$1").toLowerCase())):r.removeAttribute(t)}},cA=function(e,t,r,i,s,o){var a=new Ui(e._pt,t,r,0,1,o?uH:cH);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},oF={deg:1,rad:1,turn:1},D$={grid:1,flex:1},DA=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Bc.style,l=b$.test(t),A=e.tagName.toLowerCase()==="svg",c=(A?"client":"offset")+(l?"Width":"Height"),u=100,f=i==="px",h=i==="%",p,d,g,m;return i===o||!s||oF[i]||oF[o]?s:(o!=="px"&&!f&&(s=n(e,t,r,"px")),m=e.getCTM&&mH(e),(h||o==="%")&&(xl[t]||~t.indexOf("adius"))?(p=m?e.getBBox()[l?"width":"height"]:e[c],Yn(h?s/p*u:s/100*p)):(a[l?"width":"height"]=u+(f?o:i),d=~t.indexOf("adius")||i==="em"&&e.appendChild&&!A?e:e.parentNode,m&&(d=(e.ownerSVGElement||{}).parentNode),(!d||d===AA||!d.appendChild)&&(d=AA.body),g=d._gsap,g&&h&&g.width&&l&&g.time===Ji.time&&!g.uncache?Yn(s/g.width*u):((h||o==="%")&&!D$[la(d,"display")]&&(a.position=la(e,"position")),d===e&&(a.position="static"),d.appendChild(Bc),p=Bc[c],d.removeChild(Bc),a.position="absolute",l&&h&&(g=Ic(d),g.time=Ji.time,g.width=d[c]),Yn(f?p*s/u:p&&s?u/p*s:0))))},Za=function(e,t,r,i){var s;return VS||JE(),t in il&&t!=="transform"&&(t=il[t],~t.indexOf(",")&&(t=t.split(",")[0])),xl[t]&&t!=="transform"?(s=Nm(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:hw(la(e,bo))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=fw[t]&&fw[t](e,t,r)||la(e,t)||LQ(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?DA(e,t,s,r)+r:s},O$=function(e,t,r,i){if(!r||r==="none"){var s=Lh(t,e,1),o=s&&la(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=la(e,"borderTopColor"))}var a=new Ui(this._pt,e.style,t,0,1,aH),l=0,A=0,c,u,f,h,p,d,g,m,y,w,x,_;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=la(e,t)||i,e.style[t]=r),c=[r,i],ZQ(c),r=c[0],i=c[1],f=r.match(zf)||[],_=i.match(zf)||[],_.length){for(;u=zf.exec(i);)g=u[0],y=i.substring(l,u.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),g!==(d=f[A++]||"")&&(h=parseFloat(d)||0,x=d.substr((h+"").length),g.charAt(1)==="="&&(g=oh(h,g)+x),m=parseFloat(g),w=g.substr((m+"").length),l=zf.lastIndex-w.length,w||(w=w||os.units[t]||x,l===i.length&&(i+=w,a.e+=w)),x!==w&&(h=DA(e,t,d,w)||0),a._pt={_next:a._pt,p:y||A===1?y:",",s:h,c:m-h,m:p&&p<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?uH:cH;return SQ.test(i)&&(a.e=0),this._pt=a,a},aF={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},N$=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=aF[r]||r,t[1]=aF[i]||i,t.join(" ")},k$=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,A;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),A=s.length;--A>-1;)a=s[A],xl[a]&&(l=1,a=a==="transformOrigin"?bo:Rn),Dm(r,a);l&&(Dm(r,Rn),o&&(o.svg&&r.removeAttribute("transform"),Nm(r,1),o.uncache=1,fH(i)))}},fw={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Ui(e._pt,t,r,0,0,k$);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Om=[1,0,0,1,0,0],gH={},vH=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},lF=function(e){var t=la(e,Rn);return vH(t)?Om:t.substr(7).match(MQ).map(Yn)},KS=function(e,t){var r=e._gsap||Ic(e),i=e.style,s=lF(e),o,a,l,A;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Om:s):(s===Om&&!e.offsetParent&&e!==ah&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(A=1,a=e.nextElementSibling,ah.appendChild(e)),s=lF(e),l?i.display=l:Dm(e,"display"),A&&(a?o.insertBefore(e,a):o?o.appendChild(e):ah.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},qE=function(e,t,r,i,s,o){var a=e._gsap,l=s||KS(e,!0),A=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,f=a.yOffset||0,h=l[0],p=l[1],d=l[2],g=l[3],m=l[4],y=l[5],w=t.split(" "),x=parseFloat(w[0])||0,_=parseFloat(w[1])||0,C,T,b,M;r?l!==Om&&(T=h*g-p*d)&&(b=x*(g/T)+_*(-d/T)+(d*y-g*m)/T,M=x*(-p/T)+_*(h/T)-(h*y-p*m)/T,x=b,_=M):(C=pH(e),x=C.x+(~w[0].indexOf("%")?x/100*C.width:x),_=C.y+(~(w[1]||w[0]).indexOf("%")?_/100*C.height:_)),i||i!==!1&&a.smooth?(m=x-A,y=_-c,a.xOffset=u+(m*h+y*d)-m,a.yOffset=f+(m*p+y*g)-y):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=_,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[bo]="0px 0px",o&&(cA(o,a,"xOrigin",A,x),cA(o,a,"yOrigin",c,_),cA(o,a,"xOffset",u,a.xOffset),cA(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",x+" "+_)},Nm=function(e,t){var r=e._gsap||new tH(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),A=la(e,bo)||"0",c,u,f,h,p,d,g,m,y,w,x,_,C,T,b,M,P,Y,H,I,v,E,F,D,O,z,K,Q,B,j,ee,U;return c=u=f=d=g=m=y=w=x=0,h=p=1,r.svg=!!(e.getCTM&&mH(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Rn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Rn]!=="none"?l[Rn]:"")),i.scale=i.rotate=i.translate="none"),T=KS(e,r.svg),r.svg&&(r.uncache?(O=e.getBBox(),A=r.xOrigin-O.x+"px "+(r.yOrigin-O.y)+"px",D=""):D=!t&&e.getAttribute("data-svg-origin"),qE(e,D||A,!!D||r.originIsAbsolute,r.smooth!==!1,T)),_=r.xOrigin||0,C=r.yOrigin||0,T!==Om&&(Y=T[0],H=T[1],I=T[2],v=T[3],c=E=T[4],u=F=T[5],T.length===6?(h=Math.sqrt(Y*Y+H*H),p=Math.sqrt(v*v+I*I),d=Y||H?yu(H,Y)*dc:0,y=I||v?yu(I,v)*dc+d:0,y&&(p*=Math.abs(Math.cos(y*lh))),r.svg&&(c-=_-(_*Y+C*I),u-=C-(_*H+C*v))):(U=T[6],j=T[7],K=T[8],Q=T[9],B=T[10],ee=T[11],c=T[12],u=T[13],f=T[14],b=yu(U,B),g=b*dc,b&&(M=Math.cos(-b),P=Math.sin(-b),D=E*M+K*P,O=F*M+Q*P,z=U*M+B*P,K=E*-P+K*M,Q=F*-P+Q*M,B=U*-P+B*M,ee=j*-P+ee*M,E=D,F=O,U=z),b=yu(-I,B),m=b*dc,b&&(M=Math.cos(-b),P=Math.sin(-b),D=Y*M-K*P,O=H*M-Q*P,z=I*M-B*P,ee=v*P+ee*M,Y=D,H=O,I=z),b=yu(H,Y),d=b*dc,b&&(M=Math.cos(b),P=Math.sin(b),D=Y*M+H*P,O=E*M+F*P,H=H*M-Y*P,F=F*M-E*P,Y=D,E=O),g&&Math.abs(g)+Math.abs(d)>359.9&&(g=d=0,m=180-m),h=Yn(Math.sqrt(Y*Y+H*H+I*I)),p=Yn(Math.sqrt(F*F+U*U)),b=yu(E,F),y=Math.abs(b)>2e-4?b*dc:0,x=ee?1/(ee<0?-ee:ee):0),r.svg&&(D=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!vH(la(e,Rn)),D&&e.setAttribute("transform",D))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(h*=-1,y+=d<=0?180:-180,d+=d<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=u-((r.yPercent=u&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=f+o,r.scaleX=Yn(h),r.scaleY=Yn(p),r.rotation=Yn(d)+a,r.rotationX=Yn(g)+a,r.rotationY=Yn(m)+a,r.skewX=y+a,r.skewY=w+a,r.transformPerspective=x+o,(r.zOrigin=parseFloat(A.split(" ")[2])||0)&&(i[bo]=hw(A)),r.xOffset=r.yOffset=0,r.force3D=os.force3D,r.renderTransform=r.svg?H$:dH?yH:Q$,r.uncache=0,r},hw=function(e){return(e=e.split(" "))[0]+" "+e[1]},F1=function(e,t,r){var i=$r(t);return Yn(parseFloat(t)+parseFloat(DA(e,"x",r+"px",i)))+i},Q$=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,yH(e,t)},tc="0deg",Ld="0px",nc=") ",yH=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,A=r.rotation,c=r.rotationY,u=r.rotationX,f=r.skewX,h=r.skewY,p=r.scaleX,d=r.scaleY,g=r.transformPerspective,m=r.force3D,y=r.target,w=r.zOrigin,x="",_=m==="auto"&&e&&e!==1||m===!0;if(w&&(u!==tc||c!==tc)){var C=parseFloat(c)*lh,T=Math.sin(C),b=Math.cos(C),M;C=parseFloat(u)*lh,M=Math.cos(C),o=F1(y,o,T*M*-w),a=F1(y,a,-Math.sin(C)*-w),l=F1(y,l,b*M*-w+w)}g!==Ld&&(x+="perspective("+g+nc),(i||s)&&(x+="translate("+i+"%, "+s+"%) "),(_||o!==Ld||a!==Ld||l!==Ld)&&(x+=l!==Ld||_?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+nc),A!==tc&&(x+="rotate("+A+nc),c!==tc&&(x+="rotateY("+c+nc),u!==tc&&(x+="rotateX("+u+nc),(f!==tc||h!==tc)&&(x+="skew("+f+", "+h+nc),(p!==1||d!==1)&&(x+="scale("+p+", "+d+nc),y.style[Rn]=x||"translate(0, 0)"},H$=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,A=r.skewX,c=r.skewY,u=r.scaleX,f=r.scaleY,h=r.target,p=r.xOrigin,d=r.yOrigin,g=r.xOffset,m=r.yOffset,y=r.forceCSS,w=parseFloat(o),x=parseFloat(a),_,C,T,b,M;l=parseFloat(l),A=parseFloat(A),c=parseFloat(c),c&&(c=parseFloat(c),A+=c,l+=c),l||A?(l*=lh,A*=lh,_=Math.cos(l)*u,C=Math.sin(l)*u,T=Math.sin(l-A)*-f,b=Math.cos(l-A)*f,A&&(c*=lh,M=Math.tan(A-c),M=Math.sqrt(1+M*M),T*=M,b*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),_*=M,C*=M)),_=Yn(_),C=Yn(C),T=Yn(T),b=Yn(b)):(_=u,b=f,C=T=0),(w&&!~(o+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(w=DA(h,"x",o,"px"),x=DA(h,"y",a,"px")),(p||d||g||m)&&(w=Yn(w+p-(p*_+d*T)+g),x=Yn(x+d-(p*C+d*b)+m)),(i||s)&&(M=h.getBBox(),w=Yn(w+i/100*M.width),x=Yn(x+s/100*M.height)),M="matrix("+_+","+C+","+T+","+b+","+w+","+x+")",h.setAttribute("transform",M),y&&(h.style[Rn]=M)},z$=function(e,t,r,i,s){var o=360,a=Cr(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?dc:1),A=l-i,c=i+A+"deg",u,f;return a&&(u=s.split("_")[1],u==="short"&&(A%=o,A!==A%(o/2)&&(A+=A<0?o:-o)),u==="cw"&&A<0?A=(A+o*rF)%o-~~(A/o)*o:u==="ccw"&&A>0&&(A=(A-o*rF)%o-~~(A/o)*o)),e._pt=f=new Ui(e._pt,t,r,i,A,E$),f.e=c,f.u="deg",e._props.push(r),f},AF=function(e,t){for(var r in t)e[r]=t[r];return e},G$=function(e,t,r){var i=AF({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,A,c,u,f,h,p;i.svg?(A=r.getAttribute("transform"),r.setAttribute("transform",""),o[Rn]=t,a=Nm(r,1),Dm(r,Rn),r.setAttribute("transform",A)):(A=getComputedStyle(r)[Rn],o[Rn]=t,a=Nm(r,1),o[Rn]=A);for(l in xl)A=i[l],c=a[l],A!==c&&s.indexOf(l)<0&&(h=$r(A),p=$r(c),u=h!==p?DA(r,l,A,p):parseFloat(A),f=parseFloat(c),e._pt=new Ui(e._pt,a,l,u,f-u,XE),e._pt.u=p||0,e._props.push(l));AF(a,i)};Fi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});fw[e>1?"border"+n:n]=function(a,l,A,c,u){var f,h;if(arguments.length<4)return f=o.map(function(p){return Za(a,p,A)}),h=f.join(" "),h.split(f[0]).length===5?f[0]:h;f=(c+"").split(" "),h={},o.forEach(function(p,d){return h[p]=f[d]=f[d]||f[(d-1)/2|0]}),a.init(l,h,u)}});var wH={name:"css",register:JE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,A,c,u,f,h,p,d,g,m,y,w,x,_,C,T,b;VS||JE(),this.styles=this.styles||hH(e),b=this.styles.props,this.tween=r;for(d in t)if(d!=="autoRound"&&(c=t[d],!(Zi[d]&&nH(d,t,r,i,e,s)))){if(h=typeof c,p=fw[d],h==="function"&&(c=c.call(r,i,e,s),h=typeof c),h==="string"&&~c.indexOf("random(")&&(c=Lm(c)),p)p(this,e,d,c,r)&&(T=1);else if(d.substr(0,2)==="--")A=(getComputedStyle(e).getPropertyValue(d)+"").trim(),c+="",CA.lastIndex=0,CA.test(A)||(g=$r(A),m=$r(c)),m?g!==m&&(A=DA(e,d,A,m)+m):g&&(c+=g),this.add(a,"setProperty",A,c,i,s,0,0,d),o.push(d),b.push(d,0,a[d]);else if(h!=="undefined"){if(l&&d in l?(A=typeof l[d]=="function"?l[d].call(r,i,e,s):l[d],Cr(A)&&~A.indexOf("random(")&&(A=Lm(A)),$r(A+"")||(A+=os.units[d]||$r(Za(e,d))||""),(A+"").charAt(1)==="="&&(A=Za(e,d))):A=Za(e,d),f=parseFloat(A),y=h==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),u=parseFloat(c),d in il&&(d==="autoAlpha"&&(f===1&&Za(e,"visibility")==="hidden"&&u&&(f=0),b.push("visibility",0,a.visibility),cA(this,a,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),d!=="scale"&&d!=="transform"&&(d=il[d],~d.indexOf(",")&&(d=d.split(",")[0]))),w=d in xl,w){if(this.styles.save(d),x||(_=e._gsap,_.renderTransform&&!t.parseTransform||Nm(e,t.parseTransform),C=t.smoothOrigin!==!1&&_.smooth,x=this._pt=new Ui(this._pt,a,Rn,0,1,_.renderTransform,_,0,-1),x.dep=1),d==="scale")this._pt=new Ui(this._pt,_,"scaleY",_.scaleY,(y?oh(_.scaleY,y+u):u)-_.scaleY||0,XE),this._pt.u=0,o.push("scaleY",d),d+="X";else if(d==="transformOrigin"){b.push(bo,0,a[bo]),c=N$(c),_.svg?qE(e,c,0,C,0,this):(m=parseFloat(c.split(" ")[2])||0,m!==_.zOrigin&&cA(this,_,"zOrigin",_.zOrigin,m),cA(this,a,d,hw(A),hw(c)));continue}else if(d==="svgOrigin"){qE(e,c,1,C,0,this);continue}else if(d in gH){z$(this,_,d,f,y?oh(f,y+c):c);continue}else if(d==="smoothOrigin"){cA(this,_,"smooth",_.smooth,c);continue}else if(d==="force3D"){_[d]=c;continue}else if(d==="transform"){G$(this,c,e);continue}}else d in a||(d=Lh(d)||d);if(w||(u||u===0)&&(f||f===0)&&!B$.test(c)&&d in a)g=(A+"").substr((f+"").length),u||(u=0),m=$r(c)||(d in os.units?os.units[d]:g),g!==m&&(f=DA(e,d,A,m)),this._pt=new Ui(this._pt,w?_:a,d,f,(y?oh(f,y+u):u)-f,!w&&(m==="px"||d==="zIndex")&&t.autoRound!==!1?M$:XE),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=A,this._pt.r=C$);else if(d in a)O$.call(this,e,d,A,y?y+c:c);else if(d in e)this.add(e,d,A||e[d],y?y+c:c,i,s);else if(d!=="parseTransform"){PS(d,c);continue}w||(d in a?b.push(d,0,a[d]):b.push(d,1,A||e[d])),o.push(d)}}T&&lH(this)},render:function(e,t){if(t.tween._time||!jS())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:Za,aliases:il,getSetter:function(e,t,r){var i=il[t];return i&&i.indexOf(",")<0&&(t=i),t in xl&&t!==bo&&(e._gsap.x||Za(e,"x"))?r&&nF===r?t==="scale"?R$:I$:(nF=r||{})&&(t==="scale"?F$:U$):e.style&&!US(e.style[t])?S$:~t.indexOf("-")?T$:zS(e,t)},core:{_removeProperty:Dm,_getMatrix:KS}};As.utils.checkPrefix=Lh;As.core.getStyleSaver=hH;(function(n,e,t,r){var i=Fi(n+","+e+","+t,function(s){xl[s]=1});Fi(e,function(s){os.units[s]="deg",gH[s]=1}),il[i[13]]=n+","+e,Fi(r,function(s){var o=s.split(":");il[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Fi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){os.units[n]="px"});As.registerPlugin(wH);var eC=As.registerPlugin(wH)||As;eC.core.Tween;function Jh(){localStorage&&Object.keys(localStorage).map(n=>{this.setItem(n,localStorage[n],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}Jh.prototype.key=function(n){return Object.keys(this)[n]};Jh.prototype.getItem=function(n){try{return JSON.parse(this[n])}catch{}return this[n]};Jh.prototype.setItem=function(n,e,t=!0){const r=typeof e=="string"?e:JSON.stringify(e);return t&&localStorage.setItem(n,r),this[n]=r};Jh.prototype.removeItem=function(n){delete this[n]};Jh.prototype.clear=function(){Object.keys(this).forEach(n=>delete this[n])};let V$=new Jh;const j$=n=>({get(e,t){return n.getItem(String(t))},set(e,t,r){return n.setItem(String(t),r),!0}}),W$=(n=V$)=>new Proxy({},j$(n)),Oe=W$();/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const jc="149",wu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},xu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K$=0,cF=1,Y$=2,xH=1,$$=2,bp=3,cs=0,qr=1,hi=2,MA=0,Ah=1,Wc=2,uF=3,fF=4,X$=5,tf=100,Z$=101,J$=102,hF=103,dF=104,q$=200,eX=201,tX=202,nX=203,_H=204,bH=205,rX=206,iX=207,sX=208,oX=209,aX=210,lX=0,AX=1,cX=2,tC=3,uX=4,fX=5,hX=6,dX=7,Ox=0,pX=1,mX=2,Al=0,gX=1,vX=2,yX=3,wX=4,xX=5,BH=300,Ph=301,Dh=302,dw=303,nC=304,Nx=306,us=1e3,ui=1001,km=1002,$n=1003,pw=1004,tm=1005,li=1006,YS=1007,OA=1008,Kc=1009,_X=1010,bX=1011,EH=1012,BX=1013,Ec=1014,uA=1015,Qm=1016,EX=1017,CX=1018,ch=1020,MX=1021,Lr=1023,SX=1024,TX=1025,Uc=1026,Oh=1027,IX=1028,RX=1029,FX=1030,UX=1031,LX=1033,U1=33776,L1=33777,P1=33778,D1=33779,pF=35840,mF=35841,gF=35842,vF=35843,PX=36196,yF=37492,wF=37496,xF=37808,_F=37809,bF=37810,BF=37811,EF=37812,CF=37813,MF=37814,SF=37815,TF=37816,IF=37817,RF=37818,FF=37819,UF=37820,LF=37821,O1=36492,DX=36283,PF=36284,DF=36285,OF=36286,OX=2200,NX=2201,kX=2202,Nh=2300,Yc=2301,N1=2302,Vf=2400,jf=2401,mw=2402,$S=2500,QX=2501,HX=0,CH=1,rC=2,_l=3e3,wt=3001,zX=3200,GX=3201,qh=0,VX=1,jX="",Vo="srgb",Hm="srgb-linear",k1=7680,WX=519,iC=35044,KX=35048,NF="300 es",sC=1035;class $A{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kF=1234567;const nm=Math.PI/180,zm=180/Math.PI;function Bo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function dr(n,e,t){return Math.max(e,Math.min(t,n))}function XS(n,e){return(n%e+e)%e}function YX(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function $X(n,e,t){return n!==e?(t-n)/(e-n):0}function rm(n,e,t){return(1-t)*n+t*e}function XX(n,e,t,r){return rm(n,e,1-Math.exp(-t*r))}function ZX(n,e=1){return e-Math.abs(XS(n,e*2)-e)}function JX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function qX(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function eZ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function tZ(n,e){return n+Math.random()*(e-n)}function nZ(n){return n*(.5-Math.random())}function rZ(n){n!==void 0&&(kF=n);let e=kF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iZ(n){return n*nm}function sZ(n){return n*zm}function oC(n){return(n&n-1)===0&&n!==0}function MH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function gw(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function oZ(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),A=s((e+r)/2),c=o((e+r)/2),u=s((e-r)/2),f=o((e-r)/2),h=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*u,l*f,a*A);break;case"YZY":n.set(l*f,a*c,l*u,a*A);break;case"ZXZ":n.set(l*u,l*f,a*c,a*A);break;case"XZX":n.set(a*c,l*p,l*h,a*A);break;case"YXY":n.set(l*h,a*c,l*p,a*A);break;case"ZYZ":n.set(l*p,l*h,a*c,a*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function sl(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Lt=Object.freeze({__proto__:null,DEG2RAD:nm,RAD2DEG:zm,ceilPowerOfTwo:MH,clamp:dr,damp:XX,degToRad:iZ,denormalize:sl,euclideanModulo:XS,floorPowerOfTwo:gw,generateUUID:Bo,inverseLerp:$X,isPowerOfTwo:oC,lerp:rm,mapLinear:YX,normalize:rn,pingpong:ZX,radToDeg:sZ,randFloat:tZ,randFloatSpread:nZ,randInt:eZ,seededRandom:rZ,setQuaternionFromProperEuler:oZ,smootherstep:qX,smoothstep:JX});class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xn{constructor(){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,A){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],A=r[1],c=r[4],u=r[7],f=r[2],h=r[5],p=r[8],d=i[0],g=i[3],m=i[6],y=i[1],w=i[4],x=i[7],_=i[2],C=i[5],T=i[8];return s[0]=o*d+a*y+l*_,s[3]=o*g+a*w+l*C,s[6]=o*m+a*x+l*T,s[1]=A*d+c*y+u*_,s[4]=A*g+c*w+u*C,s[7]=A*m+c*x+u*T,s[2]=f*d+h*y+p*_,s[5]=f*g+h*w+p*C,s[8]=f*m+h*x+p*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8];return t*o*c-t*a*A-r*s*c+r*a*l+i*s*A-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=c*o-a*A,f=a*l-c*s,h=A*s-o*l,p=t*u+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const d=1/p;return e[0]=u*d,e[1]=(i*A-c*r)*d,e[2]=(a*r-i*o)*d,e[3]=f*d,e[4]=(c*t-i*l)*d,e[5]=(i*s-a*t)*d,e[6]=h*d,e[7]=(r*l-A*t)*d,e[8]=(o*t-r*s)*d,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),A=Math.sin(s);return this.set(r*l,r*A,-r*(l*o+A*a)+o+e,-i*A,i*l,-i*(-A*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Q1.makeScale(e,t)),this}rotate(e){return this.premultiply(Q1.makeRotation(-e)),this}translate(e,t){return this.premultiply(Q1.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Q1=new xn;function SH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Gm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Lc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oy(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const H1={[Vo]:{[Hm]:Lc},[Hm]:{[Vo]:oy}},ri={legacyMode:!0,get workingColorSpace(){return Hm},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(H1[e]&&H1[e][t]!==void 0){const r=H1[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},TH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cr={r:0,g:0,b:0},io={h:0,s:0,l:0},u0={h:0,s:0,l:0};function z1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function f0(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class ke{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Vo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ri.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=ri.workingColorSpace){return this.r=e,this.g=t,this.b=r,ri.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=ri.workingColorSpace){if(e=XS(e,1),t=dr(t,0,1),r=dr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=z1(o,s,e+1/3),this.g=z1(o,s,e),this.b=z1(o,s,e-1/3)}return ri.toWorkingColorSpace(this,i),this}setStyle(e,t=Vo){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ri.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ri.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,A=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,A,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,ri.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,ri.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Vo){const r=TH[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lc(e.r),this.g=Lc(e.g),this.b=Lc(e.b),this}copyLinearToSRGB(e){return this.r=oy(e.r),this.g=oy(e.g),this.b=oy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Vo){return ri.fromWorkingColorSpace(f0(this,cr),e),dr(cr.r*255,0,255)<<16^dr(cr.g*255,0,255)<<8^dr(cr.b*255,0,255)<<0}getHexString(e=Vo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ri.workingColorSpace){ri.fromWorkingColorSpace(f0(this,cr),t);const r=cr.r,i=cr.g,s=cr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,A;const c=(a+o)/2;if(a===o)l=0,A=0;else{const u=o-a;switch(A=c<=.5?u/(o+a):u/(2-o-a),o){case r:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-r)/u+2;break;case s:l=(r-i)/u+4;break}l/=6}return e.h=l,e.s=A,e.l=c,e}getRGB(e,t=ri.workingColorSpace){return ri.fromWorkingColorSpace(f0(this,cr),t),e.r=cr.r,e.g=cr.g,e.b=cr.b,e}getStyle(e=Vo){return ri.fromWorkingColorSpace(f0(this,cr),e),e!==Vo?`color(${e} ${cr.r} ${cr.g} ${cr.b})`:`rgb(${cr.r*255|0},${cr.g*255|0},${cr.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(io),io.h+=e,io.s+=t,io.l+=r,this.setHSL(io.h,io.s,io.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(io),e.getHSL(u0);const r=rm(io.h,u0.h,t),i=rm(io.s,u0.s,t),s=rm(io.l,u0.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}ke.NAMES=TH;let _u;class IH{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_u===void 0&&(_u=Gm("canvas")),_u.width=e.width,_u.height=e.height;const r=_u.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=_u}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Gm("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Lc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Lc(t[r]/255)*255):t[r]=Lc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ZS{constructor(e=null){this.isSource=!0,this.uuid=Bo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(G1(i[o].image)):s.push(G1(i[o]))}else s=G1(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function G1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?IH.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aZ=0;class Hn extends $A{constructor(e=Hn.DEFAULT_IMAGE,t=Hn.DEFAULT_MAPPING,r=ui,i=ui,s=li,o=OA,a=Lr,l=Kc,A=Hn.DEFAULT_ANISOTROPY,c=_l){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aZ++}),this.uuid=Bo(),this.name="",this.source=new ZS(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=A,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==BH)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case us:e.x=e.x-Math.floor(e.x);break;case ui:e.x=e.x<0?0:1;break;case km:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case us:e.y=e.y-Math.floor(e.y);break;case ui:e.y=e.y<0?0:1;break;case km:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Hn.DEFAULT_IMAGE=null;Hn.DEFAULT_MAPPING=BH;Hn.DEFAULT_ANISOTROPY=1;class Qt{constructor(e=0,t=0,r=0,i=1){Qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,A=l[0],c=l[4],u=l[8],f=l[1],h=l[5],p=l[9],d=l[2],g=l[6],m=l[10];if(Math.abs(c-f)<.01&&Math.abs(u-d)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(u+d)<.1&&Math.abs(p+g)<.1&&Math.abs(A+h+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(A+1)/2,x=(h+1)/2,_=(m+1)/2,C=(c+f)/4,T=(u+d)/4,b=(p+g)/4;return w>x&&w>_?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=C/r,s=T/r):x>_?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=C/i,s=b/i):_<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(_),r=T/s,i=b/s),this.set(r,i,s,t),this}let y=Math.sqrt((g-p)*(g-p)+(u-d)*(u-d)+(f-c)*(f-c));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(u-d)/y,this.z=(f-c)/y,this.w=Math.acos((A+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pa extends $A{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Qt(0,0,e,t),this.scissorTest=!1,this.viewport=new Qt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Hn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:li,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ZS(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class RH extends Hn{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=$n,this.minFilter=$n,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class lZ extends Hn{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=$n,this.minFilter=$n,this.wrapR=ui,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rt{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],A=r[i+1],c=r[i+2],u=r[i+3];const f=s[o+0],h=s[o+1],p=s[o+2],d=s[o+3];if(a===0){e[t+0]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=d;return}if(u!==d||l!==f||A!==h||c!==p){let g=1-a;const m=l*f+A*h+c*p+u*d,y=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const _=Math.sqrt(w),C=Math.atan2(_,m*y);g=Math.sin(g*C)/_,a=Math.sin(a*C)/_}const x=a*y;if(l=l*g+f*x,A=A*g+h*x,c=c*g+p*x,u=u*g+d*x,g===1-a){const _=1/Math.sqrt(l*l+A*A+c*c+u*u);l*=_,A*=_,c*=_,u*=_}}e[t]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],A=r[i+2],c=r[i+3],u=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[t]=a*p+c*u+l*h-A*f,e[t+1]=l*p+c*f+A*u-a*h,e[t+2]=A*p+c*h+a*f-l*u,e[t+3]=c*p-a*u-l*f-A*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,A=a(r/2),c=a(i/2),u=a(s/2),f=l(r/2),h=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=f*c*u+A*h*p,this._y=A*h*u-f*c*p,this._z=A*c*p+f*h*u,this._w=A*c*u-f*h*p;break;case"YXZ":this._x=f*c*u+A*h*p,this._y=A*h*u-f*c*p,this._z=A*c*p-f*h*u,this._w=A*c*u+f*h*p;break;case"ZXY":this._x=f*c*u-A*h*p,this._y=A*h*u+f*c*p,this._z=A*c*p+f*h*u,this._w=A*c*u-f*h*p;break;case"ZYX":this._x=f*c*u-A*h*p,this._y=A*h*u+f*c*p,this._z=A*c*p-f*h*u,this._w=A*c*u+f*h*p;break;case"YZX":this._x=f*c*u+A*h*p,this._y=A*h*u+f*c*p,this._z=A*c*p-f*h*u,this._w=A*c*u-f*h*p;break;case"XZY":this._x=f*c*u-A*h*p,this._y=A*h*u-f*c*p,this._z=A*c*p+f*h*u,this._w=A*c*u+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],A=t[2],c=t[6],u=t[10],f=r+a+u;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-A)*h,this._z=(o-i)*h}else if(r>a&&r>u){const h=2*Math.sqrt(1+r-a-u);this._w=(c-l)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+A)/h}else if(a>u){const h=2*Math.sqrt(1+a-r-u);this._w=(s-A)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+u-r-a);this._w=(o-i)/h,this._x=(s+A)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,A=t._z,c=t._w;return this._x=r*c+o*a+i*A-s*l,this._y=i*c+o*l+s*a-r*A,this._z=s*c+o*A+r*l-i*a,this._w=o*c-r*a-i*l-s*A,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-t;return this._w=h*o+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const A=Math.sqrt(l),c=Math.atan2(A,a),u=Math.sin((1-t)*c)/A,f=Math.sin(t*c)/A;return this._w=o*u+this._w*f,this._x=r*u+this._x*f,this._y=i*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Z{constructor(e=0,t=0,r=0){Z.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(QF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(QF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,A=l*t+o*i-a*r,c=l*r+a*t-s*i,u=l*i+s*r-o*t,f=-s*t-o*r-a*i;return this.x=A*l+f*-s+c*-a-u*-o,this.y=c*l+f*-o+u*-s-A*-a,this.z=u*l+f*-a+A*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return V1.copy(this).projectOnVector(e),this.sub(V1)}reflect(e){return this.sub(V1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(dr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const V1=new Z,QF=new rt;class ms{constructor(e=new Z(1/0,1/0,1/0),t=new Z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.length;l<A;l+=3){const c=e[l],u=e[l+1],f=e[l+2];c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.count;l<A;l++){const c=e.getX(l),u=e.getY(l),f=e.getZ(l);c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=rc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)rc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(rc)}else r.boundingBox===null&&r.computeBoundingBox(),j1.copy(r.boundingBox),j1.applyMatrix4(e.matrixWorld),this.union(j1);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,rc),rc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Pd),h0.subVectors(this.max,Pd),bu.subVectors(e.a,Pd),Bu.subVectors(e.b,Pd),Eu.subVectors(e.c,Pd),Dl.subVectors(Bu,bu),Ol.subVectors(Eu,Bu),ic.subVectors(bu,Eu);let t=[0,-Dl.z,Dl.y,0,-Ol.z,Ol.y,0,-ic.z,ic.y,Dl.z,0,-Dl.x,Ol.z,0,-Ol.x,ic.z,0,-ic.x,-Dl.y,Dl.x,0,-Ol.y,Ol.x,0,-ic.y,ic.x,0];return!W1(t,bu,Bu,Eu,h0)||(t=[1,0,0,0,1,0,0,0,1],!W1(t,bu,Bu,Eu,h0))?!1:(d0.crossVectors(Dl,Ol),t=[d0.x,d0.y,d0.z],W1(t,bu,Bu,Eu,h0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return rc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(rc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sa=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],rc=new Z,j1=new ms,bu=new Z,Bu=new Z,Eu=new Z,Dl=new Z,Ol=new Z,ic=new Z,Pd=new Z,h0=new Z,d0=new Z,sc=new Z;function W1(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){sc.fromArray(n,s);const a=i.x*Math.abs(sc.x)+i.y*Math.abs(sc.y)+i.z*Math.abs(sc.z),l=e.dot(sc),A=t.dot(sc),c=r.dot(sc);if(Math.max(-Math.max(l,A,c),Math.min(l,A,c))>a)return!1}return!0}const AZ=new ms,Dd=new Z,K1=new Z;class su{constructor(e=new Z,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):AZ.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Dd.subVectors(e,this.center);const t=Dd.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Dd,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(K1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Dd.copy(e.center).add(K1)),this.expandByPoint(Dd.copy(e.center).sub(K1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ta=new Z,Y1=new Z,p0=new Z,Nl=new Z,$1=new Z,m0=new Z,X1=new Z;class pg{constructor(e=new Z,t=new Z(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ta)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ta.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ta.copy(this.direction).multiplyScalar(t).add(this.origin),Ta.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Y1.copy(e).add(t).multiplyScalar(.5),p0.copy(t).sub(e).normalize(),Nl.copy(this.origin).sub(Y1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(p0),a=Nl.dot(this.direction),l=-Nl.dot(p0),A=Nl.lengthSq(),c=Math.abs(1-o*o);let u,f,h,p;if(c>0)if(u=o*l-a,f=o*a-l,p=s*c,u>=0)if(f>=-p)if(f<=p){const d=1/c;u*=d,f*=d,h=u*(u+o*f+2*a)+f*(o*u+f+2*l)+A}else f=s,u=Math.max(0,-(o*f+a)),h=-u*u+f*(f+2*l)+A;else f=-s,u=Math.max(0,-(o*f+a)),h=-u*u+f*(f+2*l)+A;else f<=-p?(u=Math.max(0,-(-o*s+a)),f=u>0?-s:Math.min(Math.max(-s,-l),s),h=-u*u+f*(f+2*l)+A):f<=p?(u=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+A):(u=Math.max(0,-(o*s+a)),f=u>0?s:Math.min(Math.max(-s,-l),s),h=-u*u+f*(f+2*l)+A);else f=o>0?-s:s,u=Math.max(0,-(o*f+a)),h=-u*u+f*(f+2*l)+A;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(p0).multiplyScalar(f).add(Y1),h}intersectSphere(e,t){Ta.subVectors(e.center,this.origin);const r=Ta.dot(this.direction),i=Ta.dot(Ta)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const A=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return A>=0?(r=(e.min.x-f.x)*A,i=(e.max.x-f.x)*A):(r=(e.max.x-f.x)*A,i=(e.min.x-f.x)*A),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-f.z)*u,l=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,l=(e.min.z-f.z)*u),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ta)!==null}intersectTriangle(e,t,r,i,s){$1.subVectors(t,e),m0.subVectors(r,e),X1.crossVectors($1,m0);let o=this.direction.dot(X1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Nl.subVectors(this.origin,e);const l=a*this.direction.dot(m0.crossVectors(Nl,m0));if(l<0)return null;const A=a*this.direction.dot($1.cross(Nl));if(A<0||l+A>o)return null;const c=-a*Nl.dot(X1);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class We{constructor(){We.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,A,c,u,f,h,p,d,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=A,m[6]=c,m[10]=u,m[14]=f,m[3]=h,m[7]=p,m[11]=d,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new We().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Cu.setFromMatrixColumn(e,0).length(),s=1/Cu.setFromMatrixColumn(e,1).length(),o=1/Cu.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),A=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const f=o*c,h=o*u,p=a*c,d=a*u;t[0]=l*c,t[4]=-l*u,t[8]=A,t[1]=h+p*A,t[5]=f-d*A,t[9]=-a*l,t[2]=d-f*A,t[6]=p+h*A,t[10]=o*l}else if(e.order==="YXZ"){const f=l*c,h=l*u,p=A*c,d=A*u;t[0]=f+d*a,t[4]=p*a-h,t[8]=o*A,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=h*a-p,t[6]=d+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*c,h=l*u,p=A*c,d=A*u;t[0]=f-d*a,t[4]=-o*u,t[8]=p+h*a,t[1]=h+p*a,t[5]=o*c,t[9]=d-f*a,t[2]=-o*A,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*c,h=o*u,p=a*c,d=a*u;t[0]=l*c,t[4]=p*A-h,t[8]=f*A+d,t[1]=l*u,t[5]=d*A+f,t[9]=h*A-p,t[2]=-A,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,h=o*A,p=a*l,d=a*A;t[0]=l*c,t[4]=d-f*u,t[8]=p*u+h,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-A*c,t[6]=h*u+p,t[10]=f-d*u}else if(e.order==="XZY"){const f=o*l,h=o*A,p=a*l,d=a*A;t[0]=l*c,t[4]=-u,t[8]=A*c,t[1]=f*u+d,t[5]=o*c,t[9]=h*u-p,t[2]=p*u-h,t[6]=a*c,t[10]=d*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(cZ,e,uZ)}lookAt(e,t,r){const i=this.elements;return Qi.subVectors(e,t),Qi.lengthSq()===0&&(Qi.z=1),Qi.normalize(),kl.crossVectors(r,Qi),kl.lengthSq()===0&&(Math.abs(r.z)===1?Qi.x+=1e-4:Qi.z+=1e-4,Qi.normalize(),kl.crossVectors(r,Qi)),kl.normalize(),g0.crossVectors(Qi,kl),i[0]=kl.x,i[4]=g0.x,i[8]=Qi.x,i[1]=kl.y,i[5]=g0.y,i[9]=Qi.y,i[2]=kl.z,i[6]=g0.z,i[10]=Qi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],A=r[12],c=r[1],u=r[5],f=r[9],h=r[13],p=r[2],d=r[6],g=r[10],m=r[14],y=r[3],w=r[7],x=r[11],_=r[15],C=i[0],T=i[4],b=i[8],M=i[12],P=i[1],Y=i[5],H=i[9],I=i[13],v=i[2],E=i[6],F=i[10],D=i[14],O=i[3],z=i[7],K=i[11],Q=i[15];return s[0]=o*C+a*P+l*v+A*O,s[4]=o*T+a*Y+l*E+A*z,s[8]=o*b+a*H+l*F+A*K,s[12]=o*M+a*I+l*D+A*Q,s[1]=c*C+u*P+f*v+h*O,s[5]=c*T+u*Y+f*E+h*z,s[9]=c*b+u*H+f*F+h*K,s[13]=c*M+u*I+f*D+h*Q,s[2]=p*C+d*P+g*v+m*O,s[6]=p*T+d*Y+g*E+m*z,s[10]=p*b+d*H+g*F+m*K,s[14]=p*M+d*I+g*D+m*Q,s[3]=y*C+w*P+x*v+_*O,s[7]=y*T+w*Y+x*E+_*z,s[11]=y*b+w*H+x*F+_*K,s[15]=y*M+w*I+x*D+_*Q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],A=e[13],c=e[2],u=e[6],f=e[10],h=e[14],p=e[3],d=e[7],g=e[11],m=e[15];return p*(+s*l*u-i*A*u-s*a*f+r*A*f+i*a*h-r*l*h)+d*(+t*l*h-t*A*f+s*o*f-i*o*h+i*A*c-s*l*c)+g*(+t*A*u-t*a*h-s*o*u+r*o*h+s*a*c-r*A*c)+m*(-i*a*c-t*l*u+t*a*f+i*o*u-r*o*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],m=e[15],y=u*g*A-d*f*A+d*l*h-a*g*h-u*l*m+a*f*m,w=p*f*A-c*g*A-p*l*h+o*g*h+c*l*m-o*f*m,x=c*d*A-p*u*A+p*a*h-o*d*h-c*a*m+o*u*m,_=p*u*l-c*d*l-p*a*f+o*d*f+c*a*g-o*u*g,C=t*y+r*w+i*x+s*_;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=y*T,e[1]=(d*f*s-u*g*s-d*i*h+r*g*h+u*i*m-r*f*m)*T,e[2]=(a*g*s-d*l*s+d*i*A-r*g*A-a*i*m+r*l*m)*T,e[3]=(u*l*s-a*f*s-u*i*A+r*f*A+a*i*h-r*l*h)*T,e[4]=w*T,e[5]=(c*g*s-p*f*s+p*i*h-t*g*h-c*i*m+t*f*m)*T,e[6]=(p*l*s-o*g*s-p*i*A+t*g*A+o*i*m-t*l*m)*T,e[7]=(o*f*s-c*l*s+c*i*A-t*f*A-o*i*h+t*l*h)*T,e[8]=x*T,e[9]=(p*u*s-c*d*s-p*r*h+t*d*h+c*r*m-t*u*m)*T,e[10]=(o*d*s-p*a*s+p*r*A-t*d*A-o*r*m+t*a*m)*T,e[11]=(c*a*s-o*u*s-c*r*A+t*u*A+o*r*h-t*a*h)*T,e[12]=_*T,e[13]=(c*d*i-p*u*i+p*r*f-t*d*f-c*r*g+t*u*g)*T,e[14]=(p*a*i-o*d*i-p*r*l+t*d*l+o*r*g-t*a*g)*T,e[15]=(o*u*i-c*a*i+c*r*l-t*u*l-o*r*f+t*a*f)*T,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,A=s*o,c=s*a;return this.set(A*o+r,A*a-i*l,A*l+i*a,0,A*a+i*l,c*a+r,c*l-i*o,0,A*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,A=s+s,c=o+o,u=a+a,f=s*A,h=s*c,p=s*u,d=o*c,g=o*u,m=a*u,y=l*A,w=l*c,x=l*u,_=r.x,C=r.y,T=r.z;return i[0]=(1-(d+m))*_,i[1]=(h+x)*_,i[2]=(p-w)*_,i[3]=0,i[4]=(h-x)*C,i[5]=(1-(f+m))*C,i[6]=(g+y)*C,i[7]=0,i[8]=(p+w)*T,i[9]=(g-y)*T,i[10]=(1-(f+d))*T,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Cu.set(i[0],i[1],i[2]).length();const o=Cu.set(i[4],i[5],i[6]).length(),a=Cu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],so.copy(this);const A=1/s,c=1/o,u=1/a;return so.elements[0]*=A,so.elements[1]*=A,so.elements[2]*=A,so.elements[4]*=c,so.elements[5]*=c,so.elements[6]*=c,so.elements[8]*=u,so.elements[9]*=u,so.elements[10]*=u,t.setFromRotationMatrix(so),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),A=2*s/(r-i),c=(t+e)/(t-e),u=(r+i)/(r-i),f=-(o+s)/(o-s),h=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=A,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),A=1/(r-i),c=1/(o-s),u=(t+e)*l,f=(r+i)*A,h=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*A,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Cu=new Z,so=new We,cZ=new Z(0,0,0),uZ=new Z(1,1,1),kl=new Z,g0=new Z,Qi=new Z,HF=new We,zF=new rt;class di{constructor(e=0,t=0,r=0,i=di.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],A=i[5],c=i[9],u=i[2],f=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(dr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,A),this._z=0);break;case"YXZ":this._x=Math.asin(-dr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,A)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(dr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,A)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-dr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,A));break;case"YZX":this._z=Math.asin(dr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,A),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-dr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,A),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return HF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HF,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zF.setFromEuler(this),this.setFromQuaternion(zF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}di.DEFAULT_ORDER="XYZ";class JS{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fZ=0;const GF=new Z,Mu=new rt,Ia=new We,v0=new Z,Od=new Z,hZ=new Z,dZ=new rt,VF=new Z(1,0,0),jF=new Z(0,1,0),WF=new Z(0,0,1),pZ={type:"added"},KF={type:"removed"};class It extends $A{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fZ++}),this.uuid=Bo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=It.DEFAULT_UP.clone();const e=new Z,t=new di,r=new rt,i=new Z(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new We},normalMatrix:{value:new xn}}),this.matrix=new We,this.matrixWorld=new We,this.matrixAutoUpdate=It.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new JS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Mu.setFromAxisAngle(e,t),this.quaternion.multiply(Mu),this}rotateOnWorldAxis(e,t){return Mu.setFromAxisAngle(e,t),this.quaternion.premultiply(Mu),this}rotateX(e){return this.rotateOnAxis(VF,e)}rotateY(e){return this.rotateOnAxis(jF,e)}rotateZ(e){return this.rotateOnAxis(WF,e)}translateOnAxis(e,t){return GF.copy(e).applyQuaternion(this.quaternion),this.position.add(GF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VF,e)}translateY(e){return this.translateOnAxis(jF,e)}translateZ(e){return this.translateOnAxis(WF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ia.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?v0.copy(e):v0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Od.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ia.lookAt(Od,v0,this.up):Ia.lookAt(v0,Od,this.up),this.quaternion.setFromRotationMatrix(Ia),i&&(Ia.extractRotation(i.matrixWorld),Mu.setFromRotationMatrix(Ia),this.quaternion.premultiply(Mu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(KF)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(KF)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ia.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ia.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ia),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Od,e,hZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Od,dZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let A=0,c=l.length;A<c;A++){const u=l[A];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,A=this.material.length;l<A;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),A=o(e.textures),c=o(e.images),u=o(e.shapes),f=o(e.skeletons),h=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),A.length>0&&(r.textures=A),c.length>0&&(r.images=c),u.length>0&&(r.shapes=u),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const A in a){const c=a[A];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}It.DEFAULT_UP=new Z(0,1,0);It.DEFAULT_MATRIX_AUTO_UPDATE=!0;It.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const oo=new Z,Ra=new Z,Z1=new Z,Fa=new Z,Su=new Z,Tu=new Z,YF=new Z,J1=new Z,q1=new Z,eb=new Z;class qi{constructor(e=new Z,t=new Z,r=new Z){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),oo.subVectors(e,t),i.cross(oo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){oo.subVectors(i,t),Ra.subVectors(r,t),Z1.subVectors(e,t);const o=oo.dot(oo),a=oo.dot(Ra),l=oo.dot(Z1),A=Ra.dot(Ra),c=Ra.dot(Z1),u=o*A-a*a;if(u===0)return s.set(-2,-1,-1);const f=1/u,h=(A*l-a*c)*f,p=(o*c-a*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Fa),Fa.x>=0&&Fa.y>=0&&Fa.x+Fa.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Fa),l.set(0,0),l.addScaledVector(s,Fa.x),l.addScaledVector(o,Fa.y),l.addScaledVector(a,Fa.z),l}static isFrontFacing(e,t,r,i){return oo.subVectors(r,t),Ra.subVectors(e,t),oo.cross(Ra).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return oo.subVectors(this.c,this.b),Ra.subVectors(this.a,this.b),oo.cross(Ra).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return qi.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return qi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Su.subVectors(i,r),Tu.subVectors(s,r),J1.subVectors(e,r);const l=Su.dot(J1),A=Tu.dot(J1);if(l<=0&&A<=0)return t.copy(r);q1.subVectors(e,i);const c=Su.dot(q1),u=Tu.dot(q1);if(c>=0&&u<=c)return t.copy(i);const f=l*u-c*A;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(Su,o);eb.subVectors(e,s);const h=Su.dot(eb),p=Tu.dot(eb);if(p>=0&&h<=p)return t.copy(s);const d=h*A-l*p;if(d<=0&&A>=0&&p<=0)return a=A/(A-p),t.copy(r).addScaledVector(Tu,a);const g=c*p-h*u;if(g<=0&&u-c>=0&&h-p>=0)return YF.subVectors(s,i),a=(u-c)/(u-c+(h-p)),t.copy(i).addScaledVector(YF,a);const m=1/(g+d+f);return o=d*m,a=f*m,t.copy(r).addScaledVector(Su,o).addScaledVector(Tu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let mZ=0,Li=class extends $A{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mZ++}),this.uuid=Bo(),this.name="",this.type="Material",this.blending=Ah,this.side=cs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=_H,this.blendDst=bH,this.blendEquation=tf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WX,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=k1,this.stencilZFail=k1,this.stencilZPass=k1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ah&&(r.blending=this.blending),this.side!==cs&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};class Mi extends Li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ox,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Jn=new Z,y0=new Ye;class lt{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=iC,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)y0.fromBufferAttribute(this,t),y0.applyMatrix3(e),this.setXY(t,y0.x,y0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix3(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sl(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sl(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sl(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==iC&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class kx extends lt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class FH extends lt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class ln extends lt{constructor(e,t,r){super(new Float32Array(e),t,r)}}let gZ=0;const vs=new We,tb=new It,Iu=new Z,Hi=new ms,Nd=new ms,yr=new Z;class Wt extends $A{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:gZ++}),this.uuid=Bo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(SH(e)?FH:kx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new xn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vs.makeRotationFromQuaternion(e),this.applyMatrix4(vs),this}rotateX(e){return vs.makeRotationX(e),this.applyMatrix4(vs),this}rotateY(e){return vs.makeRotationY(e),this.applyMatrix4(vs),this}rotateZ(e){return vs.makeRotationZ(e),this.applyMatrix4(vs),this}translate(e,t,r){return vs.makeTranslation(e,t,r),this.applyMatrix4(vs),this}scale(e,t,r){return vs.makeScale(e,t,r),this.applyMatrix4(vs),this}lookAt(e){return tb.lookAt(e),tb.updateMatrix(),this.applyMatrix4(tb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Iu).negate(),this.translate(Iu.x,Iu.y,Iu.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ln(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Hi.setFromBufferAttribute(s),this.morphTargetsRelative?(yr.addVectors(this.boundingBox.min,Hi.min),this.boundingBox.expandByPoint(yr),yr.addVectors(this.boundingBox.max,Hi.max),this.boundingBox.expandByPoint(yr)):(this.boundingBox.expandByPoint(Hi.min),this.boundingBox.expandByPoint(Hi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new su);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Z,1/0);return}if(e){const r=this.boundingSphere.center;if(Hi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Nd.setFromBufferAttribute(a),this.morphTargetsRelative?(yr.addVectors(Hi.min,Nd.min),Hi.expandByPoint(yr),yr.addVectors(Hi.max,Nd.max),Hi.expandByPoint(yr)):(Hi.expandByPoint(Nd.min),Hi.expandByPoint(Nd.max))}Hi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)yr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(yr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let A=0,c=a.count;A<c;A++)yr.fromBufferAttribute(a,A),l&&(Iu.fromBufferAttribute(e,A),yr.add(Iu)),i=Math.max(i,r.distanceToSquared(yr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new lt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,A=[],c=[];for(let P=0;P<a;P++)A[P]=new Z,c[P]=new Z;const u=new Z,f=new Z,h=new Z,p=new Ye,d=new Ye,g=new Ye,m=new Z,y=new Z;function w(P,Y,H){u.fromArray(i,P*3),f.fromArray(i,Y*3),h.fromArray(i,H*3),p.fromArray(o,P*2),d.fromArray(o,Y*2),g.fromArray(o,H*2),f.sub(u),h.sub(u),d.sub(p),g.sub(p);const I=1/(d.x*g.y-g.x*d.y);isFinite(I)&&(m.copy(f).multiplyScalar(g.y).addScaledVector(h,-d.y).multiplyScalar(I),y.copy(h).multiplyScalar(d.x).addScaledVector(f,-g.x).multiplyScalar(I),A[P].add(m),A[Y].add(m),A[H].add(m),c[P].add(y),c[Y].add(y),c[H].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let P=0,Y=x.length;P<Y;++P){const H=x[P],I=H.start,v=H.count;for(let E=I,F=I+v;E<F;E+=3)w(r[E+0],r[E+1],r[E+2])}const _=new Z,C=new Z,T=new Z,b=new Z;function M(P){T.fromArray(s,P*3),b.copy(T);const Y=A[P];_.copy(Y),_.sub(T.multiplyScalar(T.dot(Y))).normalize(),C.crossVectors(b,Y);const I=C.dot(c[P])<0?-1:1;l[P*4]=_.x,l[P*4+1]=_.y,l[P*4+2]=_.z,l[P*4+3]=I}for(let P=0,Y=x.length;P<Y;++P){const H=x[P],I=H.start,v=H.count;for(let E=I,F=I+v;E<F;E+=3)M(r[E+0]),M(r[E+1]),M(r[E+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new lt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new Z,s=new Z,o=new Z,a=new Z,l=new Z,A=new Z,c=new Z,u=new Z;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),d=e.getX(f+1),g=e.getX(f+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,d),o.fromBufferAttribute(t,g),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,d),A.fromBufferAttribute(r,g),a.add(c),l.add(c),A.add(c),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(d,l.x,l.y,l.z),r.setXYZ(g,A.x,A.y,A.z)}else for(let f=0,h=t.count;f<h;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)yr.fromBufferAttribute(e,t),yr.normalize(),e.setXYZ(t,yr.x,yr.y,yr.z)}toNonIndexed(){function e(a,l){const A=a.array,c=a.itemSize,u=a.normalized,f=new A.constructor(l.length*c);let h=0,p=0;for(let d=0,g=l.length;d<g;d++){a.isInterleavedBufferAttribute?h=l[d]*a.data.stride+a.offset:h=l[d]*c;for(let m=0;m<c;m++)f[p++]=A[h++]}return new lt(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],A=e(l,r);t.setAttribute(a,A)}const s=this.morphAttributes;for(const a in s){const l=[],A=s[a];for(let c=0,u=A.length;c<u;c++){const f=A[c],h=e(f,r);l.push(h)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const A=o[a];t.addGroup(A.start,A.count,A.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const A in l)l[A]!==void 0&&(e[A]=l[A]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const A=r[l];e.data.attributes[l]=A.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const A=this.morphAttributes[l],c=[];for(let u=0,f=A.length;u<f;u++){const h=A[u];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const A in i){const c=i[A];this.setAttribute(A,c.clone(t))}const s=e.morphAttributes;for(const A in s){const c=[],u=s[A];for(let f=0,h=u.length;f<h;f++)c.push(u[f].clone(t));this.morphAttributes[A]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let A=0,c=o.length;A<c;A++){const u=o[A];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const $F=new We,Ru=new pg,nb=new su,kd=new Z,Qd=new Z,Hd=new Z,rb=new Z,w0=new Z,x0=new Ye,_0=new Ye,b0=new Ye,ib=new Z,B0=new Z;class Cn extends It{constructor(e=new Wt,t=new Mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){w0.set(0,0,0);for(let l=0,A=s.length;l<A;l++){const c=a[l],u=s[l];c!==0&&(rb.fromBufferAttribute(u,e),o?w0.addScaledVector(rb,c):w0.addScaledVector(rb.sub(t),c))}t.add(w0)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),nb.copy(r.boundingSphere),nb.applyMatrix4(s),e.ray.intersectsSphere(nb)===!1)||($F.copy(s).invert(),Ru.copy(e.ray).applyMatrix4($F),r.boundingBox!==null&&Ru.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,A=r.attributes.uv,c=r.attributes.uv2,u=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(i))for(let h=0,p=u.length;h<p;h++){const d=u[h],g=i[d.materialIndex],m=Math.max(d.start,f.start),y=Math.min(a.count,Math.min(d.start+d.count,f.start+f.count));for(let w=m,x=y;w<x;w+=3){const _=a.getX(w),C=a.getX(w+1),T=a.getX(w+2);o=E0(this,g,e,Ru,A,c,_,C,T),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=d.materialIndex,t.push(o))}}else{const h=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let d=h,g=p;d<g;d+=3){const m=a.getX(d),y=a.getX(d+1),w=a.getX(d+2);o=E0(this,i,e,Ru,A,c,m,y,w),o&&(o.faceIndex=Math.floor(d/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let h=0,p=u.length;h<p;h++){const d=u[h],g=i[d.materialIndex],m=Math.max(d.start,f.start),y=Math.min(l.count,Math.min(d.start+d.count,f.start+f.count));for(let w=m,x=y;w<x;w+=3){const _=w,C=w+1,T=w+2;o=E0(this,g,e,Ru,A,c,_,C,T),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=d.materialIndex,t.push(o))}}else{const h=Math.max(0,f.start),p=Math.min(l.count,f.start+f.count);for(let d=h,g=p;d<g;d+=3){const m=d,y=d+1,w=d+2;o=E0(this,i,e,Ru,A,c,m,y,w),o&&(o.faceIndex=Math.floor(d/3),t.push(o))}}}}function vZ(n,e,t,r,i,s,o,a){let l;if(e.side===qr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===cs,a),l===null)return null;B0.copy(a),B0.applyMatrix4(n.matrixWorld);const A=t.ray.origin.distanceTo(B0);return A<t.near||A>t.far?null:{distance:A,point:B0.clone(),object:n}}function E0(n,e,t,r,i,s,o,a,l){n.getVertexPosition(o,kd),n.getVertexPosition(a,Qd),n.getVertexPosition(l,Hd);const A=vZ(n,e,t,r,kd,Qd,Hd,ib);if(A){i&&(x0.fromBufferAttribute(i,o),_0.fromBufferAttribute(i,a),b0.fromBufferAttribute(i,l),A.uv=qi.getUV(ib,kd,Qd,Hd,x0,_0,b0,new Ye)),s&&(x0.fromBufferAttribute(s,o),_0.fromBufferAttribute(s,a),b0.fromBufferAttribute(s,l),A.uv2=qi.getUV(ib,kd,Qd,Hd,x0,_0,b0,new Ye));const c={a:o,b:a,c:l,normal:new Z,materialIndex:0};qi.getNormal(kd,Qd,Hd,c.normal),A.face=c}return A}class mg extends Wt{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],A=[],c=[],u=[];let f=0,h=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new ln(A,3)),this.setAttribute("normal",new ln(c,3)),this.setAttribute("uv",new ln(u,2));function p(d,g,m,y,w,x,_,C,T,b,M){const P=x/T,Y=_/b,H=x/2,I=_/2,v=C/2,E=T+1,F=b+1;let D=0,O=0;const z=new Z;for(let K=0;K<F;K++){const Q=K*Y-I;for(let B=0;B<E;B++){const j=B*P-H;z[d]=j*y,z[g]=Q*w,z[m]=v,A.push(z.x,z.y,z.z),z[d]=0,z[g]=0,z[m]=C>0?1:-1,c.push(z.x,z.y,z.z),u.push(B/T),u.push(1-K/b),D+=1}}for(let K=0;K<b;K++)for(let Q=0;Q<T;Q++){const B=f+Q+E*K,j=f+Q+E*(K+1),ee=f+(Q+1)+E*(K+1),U=f+(Q+1)+E*K;l.push(B,j,U),l.push(j,ee,U),O+=6}a.addGroup(h,O,M),h+=O,f+=D}}static fromJSON(e){return new mg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function oi(n){const e={};for(let t=0;t<n.length;t++){const r=kh(n[t]);for(const i in r)e[i]=r[i]}return e}function yZ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function UH(n){return n.getRenderTarget()===null&&n.outputEncoding===wt?Vo:Hm}const qS={clone:kh,merge:oi};var wZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Mr extends Li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=wZ,this.fragmentShader=xZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kh(e.uniforms),this.uniformsGroups=yZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class LH extends It{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new We,this.projectionMatrix=new We,this.projectionMatrixInverse=new We}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Br extends LH{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(nm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zm*2*Math.atan(Math.tan(nm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(nm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,A=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/A,i*=o.width/l,r*=o.height/A}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fu=-90,Uu=1;class _Z extends It{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new Br(Fu,Uu,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new Br(Fu,Uu,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Br(Fu,Uu,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Br(Fu,Uu,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Br(Fu,Uu,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const A=new Br(Fu,Uu,e,t);A.layers=this.layers,A.up.set(0,1,0),A.lookAt(0,0,-1),this.add(A)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,A]=this.children,c=e.getRenderTarget(),u=e.toneMapping,f=e.xr.enabled;e.toneMapping=Al,e.xr.enabled=!1;const h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(t,A),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}}class PH extends Hn{constructor(e,t,r,i,s,o,a,l,A,c){e=e!==void 0?e:[],t=t!==void 0?t:Ph,super(e,t,r,i,s,o,a,l,A,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bZ extends pa{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new PH(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:li}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new mg(5,5,5),s=new Mr({name:"CubemapFromEquirect",uniforms:kh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:qr,blending:MA});s.uniforms.tEquirect.value=t;const o=new Cn(i,s),a=t.minFilter;return t.minFilter===OA&&(t.minFilter=li),new _Z(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const sb=new Z,BZ=new Z,EZ=new xn;class Ja{constructor(e=new Z(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=sb.subVectors(r,t).cross(BZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(sb),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||EZ.getNormalMatrix(e),i=this.coplanarPoint(sb).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Lu=new su,C0=new Z;class eT{constructor(e=new Ja,t=new Ja,r=new Ja,i=new Ja,s=new Ja,o=new Ja){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],A=r[5],c=r[6],u=r[7],f=r[8],h=r[9],p=r[10],d=r[11],g=r[12],m=r[13],y=r[14],w=r[15];return t[0].setComponents(a-i,u-l,d-f,w-g).normalize(),t[1].setComponents(a+i,u+l,d+f,w+g).normalize(),t[2].setComponents(a+s,u+A,d+h,w+m).normalize(),t[3].setComponents(a-s,u-A,d-h,w-m).normalize(),t[4].setComponents(a-o,u-c,d-p,w-y).normalize(),t[5].setComponents(a+o,u+c,d+p,w+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSprite(e){return Lu.center.set(0,0,0),Lu.radius=.7071067811865476,Lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(C0.x=i.normal.x>0?e.max.x:e.min.x,C0.y=i.normal.y>0?e.max.y:e.min.y,C0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(C0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function DH(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function CZ(n,e){const t=e.isWebGL2,r=new WeakMap;function i(A,c){const u=A.array,f=A.usage,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,u,f),A.onUploadCallback();let p;if(u instanceof Float32Array)p=5126;else if(u instanceof Uint16Array)if(A.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(u instanceof Int16Array)p=5122;else if(u instanceof Uint32Array)p=5125;else if(u instanceof Int32Array)p=5124;else if(u instanceof Int8Array)p=5120;else if(u instanceof Uint8Array)p=5121;else if(u instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:A.version}}function s(A,c,u){const f=c.array,h=c.updateRange;n.bindBuffer(u,A),h.count===-1?n.bufferSubData(u,0,f):(t?n.bufferSubData(u,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(u,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function o(A){return A.isInterleavedBufferAttribute&&(A=A.data),r.get(A)}function a(A){A.isInterleavedBufferAttribute&&(A=A.data);const c=r.get(A);c&&(n.deleteBuffer(c.buffer),r.delete(A))}function l(A,c){if(A.isGLBufferAttribute){const f=r.get(A);(!f||f.version<A.version)&&r.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version});return}A.isInterleavedBufferAttribute&&(A=A.data);const u=r.get(A);u===void 0?r.set(A,i(A,c)):u.version<A.version&&(s(u.buffer,A,c),u.version=A.version)}return{get:o,remove:a,update:l}}class ou extends Wt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),A=a+1,c=l+1,u=e/a,f=t/l,h=[],p=[],d=[],g=[];for(let m=0;m<c;m++){const y=m*f-o;for(let w=0;w<A;w++){const x=w*u-s;p.push(x,-y,0),d.push(0,0,1),g.push(w/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let y=0;y<a;y++){const w=y+A*m,x=y+A*(m+1),_=y+1+A*(m+1),C=y+1+A*m;h.push(w,x,C),h.push(x,_,C)}this.setIndex(h),this.setAttribute("position",new ln(p,3)),this.setAttribute("normal",new ln(d,3)),this.setAttribute("uv",new ln(g,2))}static fromJSON(e){return new ou(e.width,e.height,e.widthSegments,e.heightSegments)}}var MZ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,SZ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TZ=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,IZ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,RZ=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,FZ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,UZ="vec3 transformed = vec3( position );",LZ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,PZ=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,DZ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OZ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NZ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,kZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,QZ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,HZ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zZ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VZ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jZ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WZ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,KZ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,YZ=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$Z=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,XZ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ZZ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,JZ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qZ="gl_FragColor = linearToOutputTexel( gl_FragColor );",eJ=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nJ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,rJ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,iJ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sJ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,oJ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,aJ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lJ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,AJ=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,cJ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uJ=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,fJ=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hJ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dJ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pJ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mJ=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,gJ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vJ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yJ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wJ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,xJ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,_J=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bJ=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,BJ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,EJ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,CJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,MJ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,TJ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,IJ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RJ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,FJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UJ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LJ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PJ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DJ=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,OJ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,NJ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kJ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,QJ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,HJ=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GJ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VJ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jJ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,WJ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,KJ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,YJ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,$J=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,XJ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ZJ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,JJ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,qJ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tq=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rq=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iq=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,sq=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oq=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aq=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lq=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Aq=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cq=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uq=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fq=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,hq=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,dq=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mq=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,gq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,vq=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,yq=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,wq=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,xq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_q=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,bq=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Bq=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Eq=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cq=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Mq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sq=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iq=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rq=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Fq=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Uq=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Lq=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Pq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Oq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,kq=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hq=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zq=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Vq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Wq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Kq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$q=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Xq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zq=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Jq=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qq=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,eee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tee=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nee=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ree=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,iee=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xt={alphamap_fragment:MZ,alphamap_pars_fragment:SZ,alphatest_fragment:TZ,alphatest_pars_fragment:IZ,aomap_fragment:RZ,aomap_pars_fragment:FZ,begin_vertex:UZ,beginnormal_vertex:LZ,bsdfs:PZ,iridescence_fragment:DZ,bumpmap_pars_fragment:OZ,clipping_planes_fragment:NZ,clipping_planes_pars_fragment:kZ,clipping_planes_pars_vertex:QZ,clipping_planes_vertex:HZ,color_fragment:zZ,color_pars_fragment:GZ,color_pars_vertex:VZ,color_vertex:jZ,common:WZ,cube_uv_reflection_fragment:KZ,defaultnormal_vertex:YZ,displacementmap_pars_vertex:$Z,displacementmap_vertex:XZ,emissivemap_fragment:ZZ,emissivemap_pars_fragment:JZ,encodings_fragment:qZ,encodings_pars_fragment:eJ,envmap_fragment:tJ,envmap_common_pars_fragment:nJ,envmap_pars_fragment:rJ,envmap_pars_vertex:iJ,envmap_physical_pars_fragment:mJ,envmap_vertex:sJ,fog_vertex:oJ,fog_pars_vertex:aJ,fog_fragment:lJ,fog_pars_fragment:AJ,gradientmap_pars_fragment:cJ,lightmap_fragment:uJ,lightmap_pars_fragment:fJ,lights_lambert_fragment:hJ,lights_lambert_pars_fragment:dJ,lights_pars_begin:pJ,lights_toon_fragment:gJ,lights_toon_pars_fragment:vJ,lights_phong_fragment:yJ,lights_phong_pars_fragment:wJ,lights_physical_fragment:xJ,lights_physical_pars_fragment:_J,lights_fragment_begin:bJ,lights_fragment_maps:BJ,lights_fragment_end:EJ,logdepthbuf_fragment:CJ,logdepthbuf_pars_fragment:MJ,logdepthbuf_pars_vertex:SJ,logdepthbuf_vertex:TJ,map_fragment:IJ,map_pars_fragment:RJ,map_particle_fragment:FJ,map_particle_pars_fragment:UJ,metalnessmap_fragment:LJ,metalnessmap_pars_fragment:PJ,morphcolor_vertex:DJ,morphnormal_vertex:OJ,morphtarget_pars_vertex:NJ,morphtarget_vertex:kJ,normal_fragment_begin:QJ,normal_fragment_maps:HJ,normal_pars_fragment:zJ,normal_pars_vertex:GJ,normal_vertex:VJ,normalmap_pars_fragment:jJ,clearcoat_normal_fragment_begin:WJ,clearcoat_normal_fragment_maps:KJ,clearcoat_pars_fragment:YJ,iridescence_pars_fragment:$J,output_fragment:XJ,packing:ZJ,premultiplied_alpha_fragment:JJ,project_vertex:qJ,dithering_fragment:eq,dithering_pars_fragment:tq,roughnessmap_fragment:nq,roughnessmap_pars_fragment:rq,shadowmap_pars_fragment:iq,shadowmap_pars_vertex:sq,shadowmap_vertex:oq,shadowmask_pars_fragment:aq,skinbase_vertex:lq,skinning_pars_vertex:Aq,skinning_vertex:cq,skinnormal_vertex:uq,specularmap_fragment:fq,specularmap_pars_fragment:hq,tonemapping_fragment:dq,tonemapping_pars_fragment:pq,transmission_fragment:mq,transmission_pars_fragment:gq,uv_pars_fragment:vq,uv_pars_vertex:yq,uv_vertex:wq,uv2_pars_fragment:xq,uv2_pars_vertex:_q,uv2_vertex:bq,worldpos_vertex:Bq,background_vert:Eq,background_frag:Cq,backgroundCube_vert:Mq,backgroundCube_frag:Sq,cube_vert:Tq,cube_frag:Iq,depth_vert:Rq,depth_frag:Fq,distanceRGBA_vert:Uq,distanceRGBA_frag:Lq,equirect_vert:Pq,equirect_frag:Dq,linedashed_vert:Oq,linedashed_frag:Nq,meshbasic_vert:kq,meshbasic_frag:Qq,meshlambert_vert:Hq,meshlambert_frag:zq,meshmatcap_vert:Gq,meshmatcap_frag:Vq,meshnormal_vert:jq,meshnormal_frag:Wq,meshphong_vert:Kq,meshphong_frag:Yq,meshphysical_vert:$q,meshphysical_frag:Xq,meshtoon_vert:Zq,meshtoon_frag:Jq,points_vert:qq,points_frag:eee,shadow_vert:tee,shadow_frag:nee,sprite_vert:ree,sprite_frag:iee},Ne={common:{diffuse:{value:new ke(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new xn},uv2Transform:{value:new xn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new ke(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new xn}}},Wo={basic:{uniforms:oi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:xt.meshbasic_vert,fragmentShader:xt.meshbasic_frag},lambert:{uniforms:oi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new ke(0)}}]),vertexShader:xt.meshlambert_vert,fragmentShader:xt.meshlambert_frag},phong:{uniforms:oi([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new ke(0)},specular:{value:new ke(1118481)},shininess:{value:30}}]),vertexShader:xt.meshphong_vert,fragmentShader:xt.meshphong_frag},standard:{uniforms:oi([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag},toon:{uniforms:oi([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new ke(0)}}]),vertexShader:xt.meshtoon_vert,fragmentShader:xt.meshtoon_frag},matcap:{uniforms:oi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:xt.meshmatcap_vert,fragmentShader:xt.meshmatcap_frag},points:{uniforms:oi([Ne.points,Ne.fog]),vertexShader:xt.points_vert,fragmentShader:xt.points_frag},dashed:{uniforms:oi([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xt.linedashed_vert,fragmentShader:xt.linedashed_frag},depth:{uniforms:oi([Ne.common,Ne.displacementmap]),vertexShader:xt.depth_vert,fragmentShader:xt.depth_frag},normal:{uniforms:oi([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:xt.meshnormal_vert,fragmentShader:xt.meshnormal_frag},sprite:{uniforms:oi([Ne.sprite,Ne.fog]),vertexShader:xt.sprite_vert,fragmentShader:xt.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xt.background_vert,fragmentShader:xt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:xt.backgroundCube_vert,fragmentShader:xt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xt.cube_vert,fragmentShader:xt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xt.equirect_vert,fragmentShader:xt.equirect_frag},distanceRGBA:{uniforms:oi([Ne.common,Ne.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xt.distanceRGBA_vert,fragmentShader:xt.distanceRGBA_frag},shadow:{uniforms:oi([Ne.lights,Ne.fog,{color:{value:new ke(0)},opacity:{value:1}}]),vertexShader:xt.shadow_vert,fragmentShader:xt.shadow_frag}};Wo.physical={uniforms:oi([Wo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ke(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ke(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ke(1,1,1)},specularColorMap:{value:null}}]),vertexShader:xt.meshphysical_vert,fragmentShader:xt.meshphysical_frag};const M0={r:0,b:0,g:0};function see(n,e,t,r,i,s,o){const a=new ke(0);let l=s===!0?0:1,A,c,u=null,f=0,h=null;function p(g,m){let y=!1,w=m.isScene===!0?m.background:null;w&&w.isTexture&&(w=(m.backgroundBlurriness>0?t:e).get(w));const x=n.xr,_=x.getSession&&x.getSession();_&&_.environmentBlendMode==="additive"&&(w=null),w===null?d(a,l):w&&w.isColor&&(d(w,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),w&&(w.isCubeTexture||w.mapping===Nx)?(c===void 0&&(c=new Cn(new mg(1,1,1),new Mr({name:"BackgroundCubeMaterial",uniforms:kh(Wo.backgroundCube.uniforms),vertexShader:Wo.backgroundCube.vertexShader,fragmentShader:Wo.backgroundCube.fragmentShader,side:qr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(C,T,b){this.matrixWorld.copyPosition(b.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=w,c.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=w.encoding!==wt,(u!==w||f!==w.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=w,f=w.version,h=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):w&&w.isTexture&&(A===void 0&&(A=new Cn(new ou(2,2),new Mr({name:"BackgroundMaterial",uniforms:kh(Wo.background.uniforms),vertexShader:Wo.background.vertexShader,fragmentShader:Wo.background.fragmentShader,side:cs,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),Object.defineProperty(A.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(A)),A.material.uniforms.t2D.value=w,A.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,A.material.toneMapped=w.encoding!==wt,w.matrixAutoUpdate===!0&&w.updateMatrix(),A.material.uniforms.uvTransform.value.copy(w.matrix),(u!==w||f!==w.version||h!==n.toneMapping)&&(A.material.needsUpdate=!0,u=w,f=w.version,h=n.toneMapping),A.layers.enableAll(),g.unshift(A,A.geometry,A.material,0,0,null))}function d(g,m){g.getRGB(M0,UH(n)),r.buffers.color.setClear(M0.r,M0.g,M0.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(g,m=1){a.set(g),l=m,d(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,d(a,l)},render:p}}function oee(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=g(null);let A=l,c=!1;function u(v,E,F,D,O){let z=!1;if(o){const K=d(D,F,E);A!==K&&(A=K,h(A.object)),z=m(v,D,F,O),z&&y(v,D,F,O)}else{const K=E.wireframe===!0;(A.geometry!==D.id||A.program!==F.id||A.wireframe!==K)&&(A.geometry=D.id,A.program=F.id,A.wireframe=K,z=!0)}O!==null&&t.update(O,34963),(z||c)&&(c=!1,b(v,E,F,D),O!==null&&n.bindBuffer(34963,t.get(O).buffer))}function f(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(v){return r.isWebGL2?n.bindVertexArray(v):s.bindVertexArrayOES(v)}function p(v){return r.isWebGL2?n.deleteVertexArray(v):s.deleteVertexArrayOES(v)}function d(v,E,F){const D=F.wireframe===!0;let O=a[v.id];O===void 0&&(O={},a[v.id]=O);let z=O[E.id];z===void 0&&(z={},O[E.id]=z);let K=z[D];return K===void 0&&(K=g(f()),z[D]=K),K}function g(v){const E=[],F=[],D=[];for(let O=0;O<i;O++)E[O]=0,F[O]=0,D[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:F,attributeDivisors:D,object:v,attributes:{},index:null}}function m(v,E,F,D){const O=A.attributes,z=E.attributes;let K=0;const Q=F.getAttributes();for(const B in Q)if(Q[B].location>=0){const ee=O[B];let U=z[B];if(U===void 0&&(B==="instanceMatrix"&&v.instanceMatrix&&(U=v.instanceMatrix),B==="instanceColor"&&v.instanceColor&&(U=v.instanceColor)),ee===void 0||ee.attribute!==U||U&&ee.data!==U.data)return!0;K++}return A.attributesNum!==K||A.index!==D}function y(v,E,F,D){const O={},z=E.attributes;let K=0;const Q=F.getAttributes();for(const B in Q)if(Q[B].location>=0){let ee=z[B];ee===void 0&&(B==="instanceMatrix"&&v.instanceMatrix&&(ee=v.instanceMatrix),B==="instanceColor"&&v.instanceColor&&(ee=v.instanceColor));const U={};U.attribute=ee,ee&&ee.data&&(U.data=ee.data),O[B]=U,K++}A.attributes=O,A.attributesNum=K,A.index=D}function w(){const v=A.newAttributes;for(let E=0,F=v.length;E<F;E++)v[E]=0}function x(v){_(v,0)}function _(v,E){const F=A.newAttributes,D=A.enabledAttributes,O=A.attributeDivisors;F[v]=1,D[v]===0&&(n.enableVertexAttribArray(v),D[v]=1),O[v]!==E&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](v,E),O[v]=E)}function C(){const v=A.newAttributes,E=A.enabledAttributes;for(let F=0,D=E.length;F<D;F++)E[F]!==v[F]&&(n.disableVertexAttribArray(F),E[F]=0)}function T(v,E,F,D,O,z){r.isWebGL2===!0&&(F===5124||F===5125)?n.vertexAttribIPointer(v,E,F,O,z):n.vertexAttribPointer(v,E,F,D,O,z)}function b(v,E,F,D){if(r.isWebGL2===!1&&(v.isInstancedMesh||D.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const O=D.attributes,z=F.getAttributes(),K=E.defaultAttributeValues;for(const Q in z){const B=z[Q];if(B.location>=0){let j=O[Q];if(j===void 0&&(Q==="instanceMatrix"&&v.instanceMatrix&&(j=v.instanceMatrix),Q==="instanceColor"&&v.instanceColor&&(j=v.instanceColor)),j!==void 0){const ee=j.normalized,U=j.itemSize,X=t.get(j);if(X===void 0)continue;const ae=X.buffer,se=X.type,de=X.bytesPerElement;if(j.isInterleavedBufferAttribute){const oe=j.data,pe=oe.stride,_e=j.offset;if(oe.isInstancedInterleavedBuffer){for(let xe=0;xe<B.locationSize;xe++)_(B.location+xe,oe.meshPerAttribute);v.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let xe=0;xe<B.locationSize;xe++)x(B.location+xe);n.bindBuffer(34962,ae);for(let xe=0;xe<B.locationSize;xe++)T(B.location+xe,U/B.locationSize,se,ee,pe*de,(_e+U/B.locationSize*xe)*de)}else{if(j.isInstancedBufferAttribute){for(let oe=0;oe<B.locationSize;oe++)_(B.location+oe,j.meshPerAttribute);v.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let oe=0;oe<B.locationSize;oe++)x(B.location+oe);n.bindBuffer(34962,ae);for(let oe=0;oe<B.locationSize;oe++)T(B.location+oe,U/B.locationSize,se,ee,U*de,U/B.locationSize*oe*de)}}else if(K!==void 0){const ee=K[Q];if(ee!==void 0)switch(ee.length){case 2:n.vertexAttrib2fv(B.location,ee);break;case 3:n.vertexAttrib3fv(B.location,ee);break;case 4:n.vertexAttrib4fv(B.location,ee);break;default:n.vertexAttrib1fv(B.location,ee)}}}}C()}function M(){H();for(const v in a){const E=a[v];for(const F in E){const D=E[F];for(const O in D)p(D[O].object),delete D[O];delete E[F]}delete a[v]}}function P(v){if(a[v.id]===void 0)return;const E=a[v.id];for(const F in E){const D=E[F];for(const O in D)p(D[O].object),delete D[O];delete E[F]}delete a[v.id]}function Y(v){for(const E in a){const F=a[E];if(F[v.id]===void 0)continue;const D=F[v.id];for(const O in D)p(D[O].object),delete D[O];delete F[v.id]}}function H(){I(),c=!0,A!==l&&(A=l,h(A.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:H,resetDefaultState:I,dispose:M,releaseStatesOfGeometry:P,releaseStatesOfProgram:Y,initAttributes:w,enableAttribute:x,disableUnusedAttributes:C}}function aee(n,e,t,r){const i=r.isWebGL2;let s;function o(A){s=A}function a(A,c){n.drawArrays(s,A,c),t.update(c,s,1)}function l(A,c,u){if(u===0)return;let f,h;if(i)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](s,A,c,u),t.update(c,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function lee(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(T){if(T==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const A=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,u=n.getParameter(34930),f=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),d=n.getParameter(34921),g=n.getParameter(36347),m=n.getParameter(36348),y=n.getParameter(36349),w=f>0,x=o||e.has("OES_texture_float"),_=w&&x,C=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:A,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:w,floatFragmentTextures:x,floatVertexTextures:_,maxSamples:C}}function Aee(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Ja,a=new xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f){const h=u.length!==0||f||r!==0||i;return i=f,r=u.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,f){t=c(u,f,0)},this.setState=function(u,f,h){const p=u.clippingPlanes,d=u.clipIntersection,g=u.clipShadows,m=n.get(u);if(!i||p===null||p.length===0||s&&!g)s?c(null):A();else{const y=s?0:r,w=y*4;let x=m.clippingState||null;l.value=x,x=c(p,f,w,h);for(let _=0;_!==w;++_)x[_]=t[_];m.clippingState=x,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=y}};function A(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(u,f,h,p){const d=u!==null?u.length:0;let g=null;if(d!==0){if(g=l.value,p!==!0||g===null){const m=h+d*4,y=f.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<m)&&(g=new Float32Array(m));for(let w=0,x=h;w!==d;++w,x+=4)o.copy(u[w]).applyMatrix4(y,a),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=d,e.numIntersection=0,g}}function cee(n){let e=new WeakMap;function t(o,a){return a===dw?o.mapping=Ph:a===nC&&(o.mapping=Dh),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===dw||a===nC)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const A=new bZ(l.height/2);return A.fromEquirectangularTexture(n,o),e.set(o,A),o.addEventListener("dispose",i),t(A.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class ed extends LH{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=A*this.view.offsetX,o=s+A*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Wf=4,XF=[.125,.215,.35,.446,.526,.582],yc=20,ob=new ed,ZF=new ke;let ab=null;const pc=(1+Math.sqrt(5))/2,Pu=1/pc,JF=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,pc,Pu),new Z(0,pc,-Pu),new Z(Pu,0,pc),new Z(-Pu,0,pc),new Z(pc,Pu,0),new Z(-pc,Pu,0)];class qF{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){ab=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ab),e.scissorTest=!1,S0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ph||e.mapping===Dh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ab=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:li,minFilter:li,generateMipmaps:!1,type:Qm,format:Lr,encoding:_l,depthBuffer:!1},i=eU(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eU(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uee(s)),this._blurMaterial=fee(s,e,t)}return i}_compileMaterial(e){const t=new Cn(this._lodPlanes[0],e);this._renderer.compile(t,ob)}_sceneToCubeUV(e,t,r,i){const a=new Br(90,1,t,r),l=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,f=c.toneMapping;c.getClearColor(ZF),c.toneMapping=Al,c.autoClear=!1;const h=new Mi({name:"PMREM.Background",side:qr,depthWrite:!1,depthTest:!1}),p=new Cn(new mg,h);let d=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,d=!0):(h.color.copy(ZF),d=!0);for(let m=0;m<6;m++){const y=m%3;y===0?(a.up.set(0,l[m],0),a.lookAt(A[m],0,0)):y===1?(a.up.set(0,0,l[m]),a.lookAt(0,A[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,A[m]));const w=this._cubeSize;S0(i,y*w,m>2?w:0,w,w),c.setRenderTarget(i),d&&c.render(p,a),c.render(e,a)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=u,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ph||e.mapping===Dh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=nU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tU());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Cn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;S0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,ob)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=JF[(i-1)%JF.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,A=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new Cn(this._lodPlanes[i],A),f=A.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*yc-1),d=s/p,g=isFinite(s)?1+Math.floor(c*d):yc;g>yc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${yc}`);const m=[];let y=0;for(let T=0;T<yc;++T){const b=T/d,M=Math.exp(-b*b/2);m.push(M),T===0?y+=M:T<g&&(y+=2*M)}for(let T=0;T<m.length;T++)m[T]=m[T]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:w}=this;f.dTheta.value=p,f.mipInt.value=w-r;const x=this._sizeLods[i],_=3*x*(i>w-Wf?i-w+Wf:0),C=4*(this._cubeSize-x);S0(t,_,C,3*x,2*x),l.setRenderTarget(t),l.render(u,ob)}}function uee(n){const e=[],t=[],r=[];let i=n;const s=n-Wf+1+XF.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Wf?l=XF[o-n+Wf-1]:o===0&&(l=0),r.push(l);const A=1/(a-2),c=-A,u=1+A,f=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,d=3,g=2,m=1,y=new Float32Array(d*p*h),w=new Float32Array(g*p*h),x=new Float32Array(m*p*h);for(let C=0;C<h;C++){const T=C%3*2/3-1,b=C>2?0:-1,M=[T,b,0,T+2/3,b,0,T+2/3,b+1,0,T,b,0,T+2/3,b+1,0,T,b+1,0];y.set(M,d*p*C),w.set(f,g*p*C);const P=[C,C,C,C,C,C];x.set(P,m*p*C)}const _=new Wt;_.setAttribute("position",new lt(y,d)),_.setAttribute("uv",new lt(w,g)),_.setAttribute("faceIndex",new lt(x,m)),e.push(_),i>Wf&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function eU(n,e,t){const r=new pa(n,e,t);return r.texture.mapping=Nx,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function S0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function fee(n,e,t){const r=new Float32Array(yc),i=new Z(0,1,0);return new Mr({name:"SphericalGaussianBlur",defines:{n:yc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:tT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:MA,depthTest:!1,depthWrite:!1})}function tU(){return new Mr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:tT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:MA,depthTest:!1,depthWrite:!1})}function nU(){return new Mr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:tT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:MA,depthTest:!1,depthWrite:!1})}function tT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hee(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,A=l===dw||l===nC,c=l===Ph||l===Dh;if(A||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return t===null&&(t=new qF(n)),u=A?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(A&&u&&u.height>0||c&&u&&i(u)){t===null&&(t=new qF(n));const f=A?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const A=6;for(let c=0;c<A;c++)a[c]!==void 0&&l++;return l===A}function s(a){const l=a.target;l.removeEventListener("dispose",s);const A=e.get(l);A!==void 0&&(e.delete(l),A.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function dee(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function pee(n,e,t,r){const i={},s=new WeakMap;function o(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete i[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(u,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(u){const f=u.attributes;for(const p in f)e.update(f[p],34962);const h=u.morphAttributes;for(const p in h){const d=h[p];for(let g=0,m=d.length;g<m;g++)e.update(d[g],34962)}}function A(u){const f=[],h=u.index,p=u.attributes.position;let d=0;if(h!==null){const y=h.array;d=h.version;for(let w=0,x=y.length;w<x;w+=3){const _=y[w+0],C=y[w+1],T=y[w+2];f.push(_,C,C,T,T,_)}}else{const y=p.array;d=p.version;for(let w=0,x=y.length/3-1;w<x;w+=3){const _=w+0,C=w+1,T=w+2;f.push(_,C,C,T,T,_)}}const g=new(SH(f)?FH:kx)(f,1);g.version=d;const m=s.get(u);m&&e.remove(m),s.set(u,g)}function c(u){const f=s.get(u);if(f){const h=u.index;h!==null&&f.version<h.version&&A(u)}else A(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:c}}function mee(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}let a,l;function A(f){a=f.type,l=f.bytesPerElement}function c(f,h){n.drawElements(s,h,a,f*l),t.update(h,s,1)}function u(f,h,p){if(p===0)return;let d,g;if(i)d=n,g="drawElementsInstanced";else if(d=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",d===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[g](s,h,a,f*l,p),t.update(h,s,p)}this.setMode=o,this.setIndex=A,this.render=c,this.renderInstances=u}function gee(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function vee(n,e){return n[0]-e[0]}function yee(n,e){return Math.abs(e[1])-Math.abs(n[1])}function wee(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Qt,a=[];for(let A=0;A<8;A++)a[A]=[A,0];function l(A,c,u,f){const h=A.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,d=p!==void 0?p.length:0;let g=s.get(c);if(g===void 0||g.count!==d){let E=function(){I.dispose(),s.delete(c),c.removeEventListener("dispose",E)};g!==void 0&&g.texture.dispose();const w=c.morphAttributes.position!==void 0,x=c.morphAttributes.normal!==void 0,_=c.morphAttributes.color!==void 0,C=c.morphAttributes.position||[],T=c.morphAttributes.normal||[],b=c.morphAttributes.color||[];let M=0;w===!0&&(M=1),x===!0&&(M=2),_===!0&&(M=3);let P=c.attributes.position.count*M,Y=1;P>e.maxTextureSize&&(Y=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const H=new Float32Array(P*Y*4*d),I=new RH(H,P,Y,d);I.type=uA,I.needsUpdate=!0;const v=M*4;for(let F=0;F<d;F++){const D=C[F],O=T[F],z=b[F],K=P*Y*4*F;for(let Q=0;Q<D.count;Q++){const B=Q*v;w===!0&&(o.fromBufferAttribute(D,Q),H[K+B+0]=o.x,H[K+B+1]=o.y,H[K+B+2]=o.z,H[K+B+3]=0),x===!0&&(o.fromBufferAttribute(O,Q),H[K+B+4]=o.x,H[K+B+5]=o.y,H[K+B+6]=o.z,H[K+B+7]=0),_===!0&&(o.fromBufferAttribute(z,Q),H[K+B+8]=o.x,H[K+B+9]=o.y,H[K+B+10]=o.z,H[K+B+11]=z.itemSize===4?o.w:1)}}g={count:d,texture:I,size:new Ye(P,Y)},s.set(c,g),c.addEventListener("dispose",E)}let m=0;for(let w=0;w<h.length;w++)m+=h[w];const y=c.morphTargetsRelative?1:1-m;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=h===void 0?0:h.length;let d=r[c.id];if(d===void 0||d.length!==p){d=[];for(let x=0;x<p;x++)d[x]=[x,0];r[c.id]=d}for(let x=0;x<p;x++){const _=d[x];_[0]=x,_[1]=h[x]}d.sort(yee);for(let x=0;x<8;x++)x<p&&d[x][1]?(a[x][0]=d[x][0],a[x][1]=d[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(vee);const g=c.morphAttributes.position,m=c.morphAttributes.normal;let y=0;for(let x=0;x<8;x++){const _=a[x],C=_[0],T=_[1];C!==Number.MAX_SAFE_INTEGER&&T?(g&&c.getAttribute("morphTarget"+x)!==g[C]&&c.setAttribute("morphTarget"+x,g[C]),m&&c.getAttribute("morphNormal"+x)!==m[C]&&c.setAttribute("morphNormal"+x,m[C]),i[x]=T,y+=T):(g&&c.hasAttribute("morphTarget"+x)===!0&&c.deleteAttribute("morphTarget"+x),m&&c.hasAttribute("morphNormal"+x)===!0&&c.deleteAttribute("morphNormal"+x),i[x]=0)}const w=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function xee(n,e,t,r){let i=new WeakMap;function s(l){const A=r.render.frame,c=l.geometry,u=e.get(l,c);return i.get(u)!==A&&(e.update(u),i.set(u,A)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),u}function o(){i=new WeakMap}function a(l){const A=l.target;A.removeEventListener("dispose",a),t.remove(A.instanceMatrix),A.instanceColor!==null&&t.remove(A.instanceColor)}return{update:s,dispose:o}}const OH=new Hn,NH=new RH,kH=new lZ,QH=new PH,rU=[],iU=[],sU=new Float32Array(16),oU=new Float32Array(9),aU=new Float32Array(4);function td(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=rU[i];if(s===void 0&&(s=new Float32Array(i),rU[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function gr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Qx(n,e){let t=iU[e];t===void 0&&(t=new Int32Array(e),iU[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function _ee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function bee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function Bee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gr(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function Eee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function Cee(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(gr(t,r))return;aU.set(r),n.uniformMatrix2fv(this.addr,!1,aU),vr(t,r)}}function Mee(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(gr(t,r))return;oU.set(r),n.uniformMatrix3fv(this.addr,!1,oU),vr(t,r)}}function See(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(gr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(gr(t,r))return;sU.set(r),n.uniformMatrix4fv(this.addr,!1,sU),vr(t,r)}}function Tee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Iee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function Ree(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function Fee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function Uee(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Lee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gr(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function Pee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gr(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function Dee(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gr(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function Oee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||OH,i)}function Nee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||kH,i)}function kee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||QH,i)}function Qee(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||NH,i)}function Hee(n){switch(n){case 5126:return _ee;case 35664:return bee;case 35665:return Bee;case 35666:return Eee;case 35674:return Cee;case 35675:return Mee;case 35676:return See;case 5124:case 35670:return Tee;case 35667:case 35671:return Iee;case 35668:case 35672:return Ree;case 35669:case 35673:return Fee;case 5125:return Uee;case 36294:return Lee;case 36295:return Pee;case 36296:return Dee;case 35678:case 36198:case 36298:case 36306:case 35682:return Oee;case 35679:case 36299:case 36307:return Nee;case 35680:case 36300:case 36308:case 36293:return kee;case 36289:case 36303:case 36311:case 36292:return Qee}}function zee(n,e){n.uniform1fv(this.addr,e)}function Gee(n,e){const t=td(e,this.size,2);n.uniform2fv(this.addr,t)}function Vee(n,e){const t=td(e,this.size,3);n.uniform3fv(this.addr,t)}function jee(n,e){const t=td(e,this.size,4);n.uniform4fv(this.addr,t)}function Wee(n,e){const t=td(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Kee(n,e){const t=td(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Yee(n,e){const t=td(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $ee(n,e){n.uniform1iv(this.addr,e)}function Xee(n,e){n.uniform2iv(this.addr,e)}function Zee(n,e){n.uniform3iv(this.addr,e)}function Jee(n,e){n.uniform4iv(this.addr,e)}function qee(n,e){n.uniform1uiv(this.addr,e)}function ete(n,e){n.uniform2uiv(this.addr,e)}function tte(n,e){n.uniform3uiv(this.addr,e)}function nte(n,e){n.uniform4uiv(this.addr,e)}function rte(n,e,t){const r=this.cache,i=e.length,s=Qx(t,i);gr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||OH,s[o])}function ite(n,e,t){const r=this.cache,i=e.length,s=Qx(t,i);gr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||kH,s[o])}function ste(n,e,t){const r=this.cache,i=e.length,s=Qx(t,i);gr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||QH,s[o])}function ote(n,e,t){const r=this.cache,i=e.length,s=Qx(t,i);gr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||NH,s[o])}function ate(n){switch(n){case 5126:return zee;case 35664:return Gee;case 35665:return Vee;case 35666:return jee;case 35674:return Wee;case 35675:return Kee;case 35676:return Yee;case 5124:case 35670:return $ee;case 35667:case 35671:return Xee;case 35668:case 35672:return Zee;case 35669:case 35673:return Jee;case 5125:return qee;case 36294:return ete;case 36295:return tte;case 36296:return nte;case 35678:case 36198:case 36298:case 36306:case 35682:return rte;case 35679:case 36299:case 36307:return ite;case 35680:case 36300:case 36308:case 36293:return ste;case 36289:case 36303:case 36311:case 36292:return ote}}class lte{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Hee(t.type)}}class Ate{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=ate(t.type)}}class cte{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const lb=/(\w+)(\])?(\[|\.)?/g;function lU(n,e){n.seq.push(e),n.map[e.id]=e}function ute(n,e,t){const r=n.name,i=r.length;for(lb.lastIndex=0;;){const s=lb.exec(r),o=lb.lastIndex;let a=s[1];const l=s[2]==="]",A=s[3];if(l&&(a=a|0),A===void 0||A==="["&&o+2===i){lU(t,A===void 0?new lte(a,n,e):new Ate(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new cte(a),lU(t,u)),t=u}}}class ay{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);ute(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function AU(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let fte=0;function hte(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function dte(n){switch(n){case _l:return["Linear","( value )"];case wt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function cU(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+hte(n.getShaderSource(e),o)}else return i}function pte(n,e){const t=dte(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function mte(n,e){let t;switch(e){case gX:t="Linear";break;case vX:t="Reinhard";break;case yX:t="OptimizedCineon";break;case wX:t="ACESFilmic";break;case xX:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function gte(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bp).join(`
`)}function vte(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function yte(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Bp(n){return n!==""}function uU(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fU(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wte=/^[ \t]*#include +<([\w\d./]+)>/gm;function aC(n){return n.replace(wte,xte)}function xte(n,e){const t=xt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return aC(t)}const _te=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hU(n){return n.replace(_te,bte)}function bte(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function dU(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Bte(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xH?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===$$?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bp&&(e="SHADOWMAP_TYPE_VSM"),e}function Ete(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ph:case Dh:e="ENVMAP_TYPE_CUBE";break;case Nx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Cte(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Dh:e="ENVMAP_MODE_REFRACTION";break}return e}function Mte(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ox:e="ENVMAP_BLENDING_MULTIPLY";break;case pX:e="ENVMAP_BLENDING_MIX";break;case mX:e="ENVMAP_BLENDING_ADD";break}return e}function Ste(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Tte(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Bte(t),A=Ete(t),c=Cte(t),u=Mte(t),f=Ste(t),h=t.isWebGL2?"":gte(t),p=vte(s),d=i.createProgram();let g,m,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=[p].filter(Bp).join(`
`),g.length>0&&(g+=`
`),m=[h,p].filter(Bp).join(`
`),m.length>0&&(m+=`
`)):(g=[dU(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Bp).join(`
`),m=[h,dU(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Al?"#define TONE_MAPPING":"",t.toneMapping!==Al?xt.tonemapping_pars_fragment:"",t.toneMapping!==Al?mte("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",xt.encodings_pars_fragment,pte("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Bp).join(`
`)),o=aC(o),o=uU(o,t),o=fU(o,t),a=aC(a),a=uU(a,t),a=fU(a,t),o=hU(o),a=hU(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===NF?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===NF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const w=y+g+o,x=y+m+a,_=AU(i,35633,w),C=AU(i,35632,x);if(i.attachShader(d,_),i.attachShader(d,C),t.index0AttributeName!==void 0?i.bindAttribLocation(d,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(d,0,"position"),i.linkProgram(d),n.debug.checkShaderErrors){const M=i.getProgramInfoLog(d).trim(),P=i.getShaderInfoLog(_).trim(),Y=i.getShaderInfoLog(C).trim();let H=!0,I=!0;if(i.getProgramParameter(d,35714)===!1){H=!1;const v=cU(i,_,"vertex"),E=cU(i,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(d,35715)+`

Program Info Log: `+M+`
`+v+`
`+E)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(P===""||Y==="")&&(I=!1);I&&(this.diagnostics={runnable:H,programLog:M,vertexShader:{log:P,prefix:g},fragmentShader:{log:Y,prefix:m}})}i.deleteShader(_),i.deleteShader(C);let T;this.getUniforms=function(){return T===void 0&&(T=new ay(i,d)),T};let b;return this.getAttributes=function(){return b===void 0&&(b=yte(i,d)),b},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(d),this.program=void 0},this.name=t.shaderName,this.id=fte++,this.cacheKey=e,this.usedTimes=1,this.program=d,this.vertexShader=_,this.fragmentShader=C,this}let Ite=0;class Rte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Fte(e),t.set(e,r)),r}}class Fte{constructor(e){this.id=Ite++,this.code=e,this.usedTimes=0}}function Ute(n,e,t,r,i,s,o){const a=new JS,l=new Rte,A=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function d(b,M,P,Y,H){const I=Y.fog,v=H.geometry,E=b.isMeshStandardMaterial?Y.environment:null,F=(b.isMeshStandardMaterial?t:e).get(b.envMap||E),D=F&&F.mapping===Nx?F.image.height:null,O=p[b.type];b.precision!==null&&(h=i.getMaxPrecision(b.precision),h!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",h,"instead."));const z=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,K=z!==void 0?z.length:0;let Q=0;v.morphAttributes.position!==void 0&&(Q=1),v.morphAttributes.normal!==void 0&&(Q=2),v.morphAttributes.color!==void 0&&(Q=3);let B,j,ee,U;if(O){const pe=Wo[O];B=pe.vertexShader,j=pe.fragmentShader}else B=b.vertexShader,j=b.fragmentShader,l.update(b),ee=l.getVertexShaderID(b),U=l.getFragmentShaderID(b);const X=n.getRenderTarget(),ae=b.alphaTest>0,se=b.clearcoat>0,de=b.iridescence>0;return{isWebGL2:c,shaderID:O,shaderName:b.type,vertexShader:B,fragmentShader:j,defines:b.defines,customVertexShaderID:ee,customFragmentShaderID:U,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:h,instancing:H.isInstancedMesh===!0,instancingColor:H.isInstancedMesh===!0&&H.instanceColor!==null,supportsVertexTextures:f,outputEncoding:X===null?n.outputEncoding:X.isXRRenderTarget===!0?X.texture.encoding:_l,map:!!b.map,matcap:!!b.matcap,envMap:!!F,envMapMode:F&&F.mapping,envMapCubeUVHeight:D,lightMap:!!b.lightMap,aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===VX,tangentSpaceNormalMap:b.normalMapType===qh,decodeVideoTexture:!!b.map&&b.map.isVideoTexture===!0&&b.map.encoding===wt,clearcoat:se,clearcoatMap:se&&!!b.clearcoatMap,clearcoatRoughnessMap:se&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:se&&!!b.clearcoatNormalMap,iridescence:de,iridescenceMap:de&&!!b.iridescenceMap,iridescenceThicknessMap:de&&!!b.iridescenceThicknessMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,opaque:b.transparent===!1&&b.blending===Ah,alphaMap:!!b.alphaMap,alphaTest:ae,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!v.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!v.attributes.color&&v.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.iridescenceMap||!!b.iridescenceThicknessMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||!!b.sheenRoughnessMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.iridescenceMap||b.iridescenceThicknessMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!I,useFog:b.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:u,skinning:H.isSkinnedMesh===!0,morphTargets:v.morphAttributes.position!==void 0,morphNormals:v.morphAttributes.normal!==void 0,morphColors:v.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:Q,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&P.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:Al,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===hi,flipSided:b.side===qr,useDepthPacking:!!b.depthPacking,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function g(b){const M=[];if(b.shaderID?M.push(b.shaderID):(M.push(b.customVertexShaderID),M.push(b.customFragmentShaderID)),b.defines!==void 0)for(const P in b.defines)M.push(P),M.push(b.defines[P]);return b.isRawShaderMaterial===!1&&(m(M,b),y(M,b),M.push(n.outputEncoding)),M.push(b.customProgramCacheKey),M.join()}function m(b,M){b.push(M.precision),b.push(M.outputEncoding),b.push(M.envMapMode),b.push(M.envMapCubeUVHeight),b.push(M.combine),b.push(M.vertexUvs),b.push(M.fogExp2),b.push(M.sizeAttenuation),b.push(M.morphTargetsCount),b.push(M.morphAttributeCount),b.push(M.numDirLights),b.push(M.numPointLights),b.push(M.numSpotLights),b.push(M.numSpotLightMaps),b.push(M.numHemiLights),b.push(M.numRectAreaLights),b.push(M.numDirLightShadows),b.push(M.numPointLightShadows),b.push(M.numSpotLightShadows),b.push(M.numSpotLightShadowsWithMaps),b.push(M.shadowMapType),b.push(M.toneMapping),b.push(M.numClippingPlanes),b.push(M.numClipIntersection),b.push(M.depthPacking)}function y(b,M){a.disableAll(),M.isWebGL2&&a.enable(0),M.supportsVertexTextures&&a.enable(1),M.instancing&&a.enable(2),M.instancingColor&&a.enable(3),M.map&&a.enable(4),M.matcap&&a.enable(5),M.envMap&&a.enable(6),M.lightMap&&a.enable(7),M.aoMap&&a.enable(8),M.emissiveMap&&a.enable(9),M.bumpMap&&a.enable(10),M.normalMap&&a.enable(11),M.objectSpaceNormalMap&&a.enable(12),M.tangentSpaceNormalMap&&a.enable(13),M.clearcoat&&a.enable(14),M.clearcoatMap&&a.enable(15),M.clearcoatRoughnessMap&&a.enable(16),M.clearcoatNormalMap&&a.enable(17),M.iridescence&&a.enable(18),M.iridescenceMap&&a.enable(19),M.iridescenceThicknessMap&&a.enable(20),M.displacementMap&&a.enable(21),M.specularMap&&a.enable(22),M.roughnessMap&&a.enable(23),M.metalnessMap&&a.enable(24),M.gradientMap&&a.enable(25),M.alphaMap&&a.enable(26),M.alphaTest&&a.enable(27),M.vertexColors&&a.enable(28),M.vertexAlphas&&a.enable(29),M.vertexUvs&&a.enable(30),M.vertexTangents&&a.enable(31),M.uvsVertexOnly&&a.enable(32),b.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.physicallyCorrectLights&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.specularIntensityMap&&a.enable(15),M.specularColorMap&&a.enable(16),M.transmission&&a.enable(17),M.transmissionMap&&a.enable(18),M.thicknessMap&&a.enable(19),M.sheen&&a.enable(20),M.sheenColorMap&&a.enable(21),M.sheenRoughnessMap&&a.enable(22),M.decodeVideoTexture&&a.enable(23),M.opaque&&a.enable(24),b.push(a.mask)}function w(b){const M=p[b.type];let P;if(M){const Y=Wo[M];P=qS.clone(Y.uniforms)}else P=b.uniforms;return P}function x(b,M){let P;for(let Y=0,H=A.length;Y<H;Y++){const I=A[Y];if(I.cacheKey===M){P=I,++P.usedTimes;break}}return P===void 0&&(P=new Tte(n,M,b,s),A.push(P)),P}function _(b){if(--b.usedTimes===0){const M=A.indexOf(b);A[M]=A[A.length-1],A.pop(),b.destroy()}}function C(b){l.remove(b)}function T(){l.dispose()}return{getParameters:d,getProgramCacheKey:g,getUniforms:w,acquireProgram:x,releaseProgram:_,releaseShaderCache:C,programs:A,dispose:T}}function Lte(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Pte(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function pU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function mU(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(u,f,h,p,d,g){let m=n[e];return m===void 0?(m={id:u.id,object:u,geometry:f,material:h,groupOrder:p,renderOrder:u.renderOrder,z:d,group:g},n[e]=m):(m.id=u.id,m.object=u,m.geometry=f,m.material=h,m.groupOrder=p,m.renderOrder=u.renderOrder,m.z=d,m.group=g),e++,m}function a(u,f,h,p,d,g){const m=o(u,f,h,p,d,g);h.transmission>0?r.push(m):h.transparent===!0?i.push(m):t.push(m)}function l(u,f,h,p,d,g){const m=o(u,f,h,p,d,g);h.transmission>0?r.unshift(m):h.transparent===!0?i.unshift(m):t.unshift(m)}function A(u,f){t.length>1&&t.sort(u||Pte),r.length>1&&r.sort(f||pU),i.length>1&&i.sort(f||pU)}function c(){for(let u=e,f=n.length;u<f;u++){const h=n[u];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:A}}function Dte(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new mU,n.set(r,[o])):i>=s.length?(o=new mU,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Ote(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Z,color:new ke};break;case"SpotLight":t={position:new Z,direction:new Z,color:new ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Z,color:new ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Z,skyColor:new ke,groundColor:new ke};break;case"RectAreaLight":t={color:new ke,position:new Z,halfWidth:new Z,halfHeight:new Z};break}return n[e.id]=t,t}}}function Nte(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let kte=0;function Qte(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Hte(n,e){const t=new Ote,r=Nte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new Z);const s=new Z,o=new We,a=new We;function l(c,u){let f=0,h=0,p=0;for(let Y=0;Y<9;Y++)i.probe[Y].set(0,0,0);let d=0,g=0,m=0,y=0,w=0,x=0,_=0,C=0,T=0,b=0;c.sort(Qte);const M=u!==!0?Math.PI:1;for(let Y=0,H=c.length;Y<H;Y++){const I=c[Y],v=I.color,E=I.intensity,F=I.distance,D=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)f+=v.r*E*M,h+=v.g*E*M,p+=v.b*E*M;else if(I.isLightProbe)for(let O=0;O<9;O++)i.probe[O].addScaledVector(I.sh.coefficients[O],E);else if(I.isDirectionalLight){const O=t.get(I);if(O.color.copy(I.color).multiplyScalar(I.intensity*M),I.castShadow){const z=I.shadow,K=r.get(I);K.shadowBias=z.bias,K.shadowNormalBias=z.normalBias,K.shadowRadius=z.radius,K.shadowMapSize=z.mapSize,i.directionalShadow[d]=K,i.directionalShadowMap[d]=D,i.directionalShadowMatrix[d]=I.shadow.matrix,x++}i.directional[d]=O,d++}else if(I.isSpotLight){const O=t.get(I);O.position.setFromMatrixPosition(I.matrixWorld),O.color.copy(v).multiplyScalar(E*M),O.distance=F,O.coneCos=Math.cos(I.angle),O.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),O.decay=I.decay,i.spot[m]=O;const z=I.shadow;if(I.map&&(i.spotLightMap[T]=I.map,T++,z.updateMatrices(I),I.castShadow&&b++),i.spotLightMatrix[m]=z.matrix,I.castShadow){const K=r.get(I);K.shadowBias=z.bias,K.shadowNormalBias=z.normalBias,K.shadowRadius=z.radius,K.shadowMapSize=z.mapSize,i.spotShadow[m]=K,i.spotShadowMap[m]=D,C++}m++}else if(I.isRectAreaLight){const O=t.get(I);O.color.copy(v).multiplyScalar(E),O.halfWidth.set(I.width*.5,0,0),O.halfHeight.set(0,I.height*.5,0),i.rectArea[y]=O,y++}else if(I.isPointLight){const O=t.get(I);if(O.color.copy(I.color).multiplyScalar(I.intensity*M),O.distance=I.distance,O.decay=I.decay,I.castShadow){const z=I.shadow,K=r.get(I);K.shadowBias=z.bias,K.shadowNormalBias=z.normalBias,K.shadowRadius=z.radius,K.shadowMapSize=z.mapSize,K.shadowCameraNear=z.camera.near,K.shadowCameraFar=z.camera.far,i.pointShadow[g]=K,i.pointShadowMap[g]=D,i.pointShadowMatrix[g]=I.shadow.matrix,_++}i.point[g]=O,g++}else if(I.isHemisphereLight){const O=t.get(I);O.skyColor.copy(I.color).multiplyScalar(E*M),O.groundColor.copy(I.groundColor).multiplyScalar(E*M),i.hemi[w]=O,w++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_FLOAT_1,i.rectAreaLTC2=Ne.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ne.LTC_HALF_1,i.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const P=i.hash;(P.directionalLength!==d||P.pointLength!==g||P.spotLength!==m||P.rectAreaLength!==y||P.hemiLength!==w||P.numDirectionalShadows!==x||P.numPointShadows!==_||P.numSpotShadows!==C||P.numSpotMaps!==T)&&(i.directional.length=d,i.spot.length=m,i.rectArea.length=y,i.point.length=g,i.hemi.length=w,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=C+T-b,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=b,P.directionalLength=d,P.pointLength=g,P.spotLength=m,P.rectAreaLength=y,P.hemiLength=w,P.numDirectionalShadows=x,P.numPointShadows=_,P.numSpotShadows=C,P.numSpotMaps=T,i.version=kte++)}function A(c,u){let f=0,h=0,p=0,d=0,g=0;const m=u.matrixWorldInverse;for(let y=0,w=c.length;y<w;y++){const x=c[y];if(x.isDirectionalLight){const _=i.directional[f];_.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(m),f++}else if(x.isSpotLight){const _=i.spot[p];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(m),_.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(m),p++}else if(x.isRectAreaLight){const _=i.rectArea[d];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(m),a.identity(),o.copy(x.matrixWorld),o.premultiply(m),a.extractRotation(o),_.halfWidth.set(x.width*.5,0,0),_.halfHeight.set(0,x.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),d++}else if(x.isPointLight){const _=i.point[h];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(m),h++}else if(x.isHemisphereLight){const _=i.hemi[g];_.direction.setFromMatrixPosition(x.matrixWorld),_.direction.transformDirection(m),g++}}}return{setup:l,setupView:A,state:i}}function gU(n,e){const t=new Hte(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(u){r.push(u)}function a(u){i.push(u)}function l(u){t.setup(r,u)}function A(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:A,pushLight:o,pushShadow:a}}function zte(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new gU(n,e),t.set(s,[l])):o>=a.length?(l=new gU(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Gte extends Li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zX,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Vte extends Li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const jte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Wte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Kte(n,e,t){let r=new eT;const i=new Ye,s=new Ye,o=new Qt,a=new Gte({depthPacking:GX}),l=new Vte,A={},c=t.maxTextureSize,u={[cs]:qr,[qr]:cs,[hi]:hi},f=new Mr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:jte,fragmentShader:Wte}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Wt;p.setAttribute("position",new lt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const d=new Cn(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xH,this.render=function(x,_,C){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;const T=n.getRenderTarget(),b=n.getActiveCubeFace(),M=n.getActiveMipmapLevel(),P=n.state;P.setBlending(MA),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);for(let Y=0,H=x.length;Y<H;Y++){const I=x[Y],v=I.shadow;if(v===void 0){console.warn("THREE.WebGLShadowMap:",I,"has no shadow.");continue}if(v.autoUpdate===!1&&v.needsUpdate===!1)continue;i.copy(v.mapSize);const E=v.getFrameExtents();if(i.multiply(E),s.copy(v.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/E.x),i.x=s.x*E.x,v.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/E.y),i.y=s.y*E.y,v.mapSize.y=s.y)),v.map===null){const D=this.type!==bp?{minFilter:$n,magFilter:$n}:{};v.map=new pa(i.x,i.y,D),v.map.texture.name=I.name+".shadowMap",v.camera.updateProjectionMatrix()}n.setRenderTarget(v.map),n.clear();const F=v.getViewportCount();for(let D=0;D<F;D++){const O=v.getViewport(D);o.set(s.x*O.x,s.y*O.y,s.x*O.z,s.y*O.w),P.viewport(o),v.updateMatrices(I,D),r=v.getFrustum(),w(_,C,v.camera,I,this.type)}v.isPointLightShadow!==!0&&this.type===bp&&m(v,C),v.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(T,b,M)};function m(x,_){const C=e.update(d);f.defines.VSM_SAMPLES!==x.blurSamples&&(f.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new pa(i.x,i.y)),f.uniforms.shadow_pass.value=x.map.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(_,null,C,f,d,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(_,null,C,h,d,null)}function y(x,_,C,T,b,M){let P=null;const Y=C.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(Y!==void 0)P=Y;else if(P=C.isPointLight===!0?l:a,n.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){const H=P.uuid,I=_.uuid;let v=A[H];v===void 0&&(v={},A[H]=v);let E=v[I];E===void 0&&(E=P.clone(),v[I]=E),P=E}return P.visible=_.visible,P.wireframe=_.wireframe,M===bp?P.side=_.shadowSide!==null?_.shadowSide:_.side:P.side=_.shadowSide!==null?_.shadowSide:u[_.side],P.alphaMap=_.alphaMap,P.alphaTest=_.alphaTest,P.map=_.map,P.clipShadows=_.clipShadows,P.clippingPlanes=_.clippingPlanes,P.clipIntersection=_.clipIntersection,P.displacementMap=_.displacementMap,P.displacementScale=_.displacementScale,P.displacementBias=_.displacementBias,P.wireframeLinewidth=_.wireframeLinewidth,P.linewidth=_.linewidth,C.isPointLight===!0&&P.isMeshDistanceMaterial===!0&&(P.referencePosition.setFromMatrixPosition(C.matrixWorld),P.nearDistance=T,P.farDistance=b),P}function w(x,_,C,T,b){if(x.visible===!1)return;if(x.layers.test(_.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&b===bp)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,x.matrixWorld);const Y=e.update(x),H=x.material;if(Array.isArray(H)){const I=Y.groups;for(let v=0,E=I.length;v<E;v++){const F=I[v],D=H[F.materialIndex];if(D&&D.visible){const O=y(x,D,T,C.near,C.far,b);n.renderBufferDirect(C,null,Y,O,x,F)}}}else if(H.visible){const I=y(x,H,T,C.near,C.far,b);n.renderBufferDirect(C,null,Y,I,x,null)}}const P=x.children;for(let Y=0,H=P.length;Y<H;Y++)w(P[Y],_,C,T,b)}}function Yte(n,e,t){const r=t.isWebGL2;function i(){let fe=!1;const Me=new Qt;let Se=null;const Fe=new Qt(0,0,0,0);return{setMask:function(Ve){Se!==Ve&&!fe&&(n.colorMask(Ve,Ve,Ve,Ve),Se=Ve)},setLocked:function(Ve){fe=Ve},setClear:function(Ve,Je,ft,on,Ct){Ct===!0&&(Ve*=on,Je*=on,ft*=on),Me.set(Ve,Je,ft,on),Fe.equals(Me)===!1&&(n.clearColor(Ve,Je,ft,on),Fe.copy(Me))},reset:function(){fe=!1,Se=null,Fe.set(-1,0,0,0)}}}function s(){let fe=!1,Me=null,Se=null,Fe=null;return{setTest:function(Ve){Ve?ae(2929):se(2929)},setMask:function(Ve){Me!==Ve&&!fe&&(n.depthMask(Ve),Me=Ve)},setFunc:function(Ve){if(Se!==Ve){switch(Ve){case lX:n.depthFunc(512);break;case AX:n.depthFunc(519);break;case cX:n.depthFunc(513);break;case tC:n.depthFunc(515);break;case uX:n.depthFunc(514);break;case fX:n.depthFunc(518);break;case hX:n.depthFunc(516);break;case dX:n.depthFunc(517);break;default:n.depthFunc(515)}Se=Ve}},setLocked:function(Ve){fe=Ve},setClear:function(Ve){Fe!==Ve&&(n.clearDepth(Ve),Fe=Ve)},reset:function(){fe=!1,Me=null,Se=null,Fe=null}}}function o(){let fe=!1,Me=null,Se=null,Fe=null,Ve=null,Je=null,ft=null,on=null,Ct=null;return{setTest:function(it){fe||(it?ae(2960):se(2960))},setMask:function(it){Me!==it&&!fe&&(n.stencilMask(it),Me=it)},setFunc:function(it,lr,yt){(Se!==it||Fe!==lr||Ve!==yt)&&(n.stencilFunc(it,lr,yt),Se=it,Fe=lr,Ve=yt)},setOp:function(it,lr,yt){(Je!==it||ft!==lr||on!==yt)&&(n.stencilOp(it,lr,yt),Je=it,ft=lr,on=yt)},setLocked:function(it){fe=it},setClear:function(it){Ct!==it&&(n.clearStencil(it),Ct=it)},reset:function(){fe=!1,Me=null,Se=null,Fe=null,Ve=null,Je=null,ft=null,on=null,Ct=null}}}const a=new i,l=new s,A=new o,c=new WeakMap,u=new WeakMap;let f={},h={},p=new WeakMap,d=[],g=null,m=!1,y=null,w=null,x=null,_=null,C=null,T=null,b=null,M=!1,P=null,Y=null,H=null,I=null,v=null;const E=n.getParameter(35661);let F=!1,D=0;const O=n.getParameter(7938);O.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),F=D>=1):O.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),F=D>=2);let z=null,K={};const Q=n.getParameter(3088),B=n.getParameter(2978),j=new Qt().fromArray(Q),ee=new Qt().fromArray(B);function U(fe,Me,Se){const Fe=new Uint8Array(4),Ve=n.createTexture();n.bindTexture(fe,Ve),n.texParameteri(fe,10241,9728),n.texParameteri(fe,10240,9728);for(let Je=0;Je<Se;Je++)n.texImage2D(Me+Je,0,6408,1,1,0,6408,5121,Fe);return Ve}const X={};X[3553]=U(3553,3553,1),X[34067]=U(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),A.setClear(0),ae(2929),l.setFunc(tC),Ae(!1),q(cF),ae(2884),L(MA);function ae(fe){f[fe]!==!0&&(n.enable(fe),f[fe]=!0)}function se(fe){f[fe]!==!1&&(n.disable(fe),f[fe]=!1)}function de(fe,Me){return h[fe]!==Me?(n.bindFramebuffer(fe,Me),h[fe]=Me,r&&(fe===36009&&(h[36160]=Me),fe===36160&&(h[36009]=Me)),!0):!1}function oe(fe,Me){let Se=d,Fe=!1;if(fe)if(Se=p.get(Me),Se===void 0&&(Se=[],p.set(Me,Se)),fe.isWebGLMultipleRenderTargets){const Ve=fe.texture;if(Se.length!==Ve.length||Se[0]!==36064){for(let Je=0,ft=Ve.length;Je<ft;Je++)Se[Je]=36064+Je;Se.length=Ve.length,Fe=!0}}else Se[0]!==36064&&(Se[0]=36064,Fe=!0);else Se[0]!==1029&&(Se[0]=1029,Fe=!0);Fe&&(t.isWebGL2?n.drawBuffers(Se):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))}function pe(fe){return g!==fe?(n.useProgram(fe),g=fe,!0):!1}const _e={[tf]:32774,[Z$]:32778,[J$]:32779};if(r)_e[hF]=32775,_e[dF]=32776;else{const fe=e.get("EXT_blend_minmax");fe!==null&&(_e[hF]=fe.MIN_EXT,_e[dF]=fe.MAX_EXT)}const xe={[q$]:0,[eX]:1,[tX]:768,[_H]:770,[aX]:776,[sX]:774,[rX]:772,[nX]:769,[bH]:771,[oX]:775,[iX]:773};function L(fe,Me,Se,Fe,Ve,Je,ft,on){if(fe===MA){m===!0&&(se(3042),m=!1);return}if(m===!1&&(ae(3042),m=!0),fe!==X$){if(fe!==y||on!==M){if((w!==tf||C!==tf)&&(n.blendEquation(32774),w=tf,C=tf),on)switch(fe){case Ah:n.blendFuncSeparate(1,771,1,771);break;case Wc:n.blendFunc(1,1);break;case uF:n.blendFuncSeparate(0,769,0,1);break;case fF:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Ah:n.blendFuncSeparate(770,771,1,771);break;case Wc:n.blendFunc(770,1);break;case uF:n.blendFuncSeparate(0,769,0,1);break;case fF:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}x=null,_=null,T=null,b=null,y=fe,M=on}return}Ve=Ve||Me,Je=Je||Se,ft=ft||Fe,(Me!==w||Ve!==C)&&(n.blendEquationSeparate(_e[Me],_e[Ve]),w=Me,C=Ve),(Se!==x||Fe!==_||Je!==T||ft!==b)&&(n.blendFuncSeparate(xe[Se],xe[Fe],xe[Je],xe[ft]),x=Se,_=Fe,T=Je,b=ft),y=fe,M=!1}function ue(fe,Me){fe.side===hi?se(2884):ae(2884);let Se=fe.side===qr;Me&&(Se=!Se),Ae(Se),fe.blending===Ah&&fe.transparent===!1?L(MA):L(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.premultipliedAlpha),l.setFunc(fe.depthFunc),l.setTest(fe.depthTest),l.setMask(fe.depthWrite),a.setMask(fe.colorWrite);const Fe=fe.stencilWrite;A.setTest(Fe),Fe&&(A.setMask(fe.stencilWriteMask),A.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),A.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),ce(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?ae(32926):se(32926)}function Ae(fe){P!==fe&&(fe?n.frontFace(2304):n.frontFace(2305),P=fe)}function q(fe){fe!==K$?(ae(2884),fe!==Y&&(fe===cF?n.cullFace(1029):fe===Y$?n.cullFace(1028):n.cullFace(1032))):se(2884),Y=fe}function J(fe){fe!==H&&(F&&n.lineWidth(fe),H=fe)}function ce(fe,Me,Se){fe?(ae(32823),(I!==Me||v!==Se)&&(n.polygonOffset(Me,Se),I=Me,v=Se)):se(32823)}function be(fe){fe?ae(3089):se(3089)}function Be(fe){fe===void 0&&(fe=33984+E-1),z!==fe&&(n.activeTexture(fe),z=fe)}function k(fe,Me,Se){Se===void 0&&(z===null?Se=33984+E-1:Se=z);let Fe=K[Se];Fe===void 0&&(Fe={type:void 0,texture:void 0},K[Se]=Fe),(Fe.type!==fe||Fe.texture!==Me)&&(z!==Se&&(n.activeTexture(Se),z=Se),n.bindTexture(fe,Me||X[fe]),Fe.type=fe,Fe.texture=Me)}function W(){const fe=K[z];fe!==void 0&&fe.type!==void 0&&(n.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function re(){try{n.compressedTexImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function he(){try{n.compressedTexImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function me(){try{n.texSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function G(){try{n.texSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function R(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function S(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function V(){try{n.texStorage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function te(){try{n.texStorage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function le(){try{n.texImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function ie(){try{n.texImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ie(fe){j.equals(fe)===!1&&(n.scissor(fe.x,fe.y,fe.z,fe.w),j.copy(fe))}function Te(fe){ee.equals(fe)===!1&&(n.viewport(fe.x,fe.y,fe.z,fe.w),ee.copy(fe))}function Le(fe,Me){let Se=u.get(Me);Se===void 0&&(Se=new WeakMap,u.set(Me,Se));let Fe=Se.get(fe);Fe===void 0&&(Fe=n.getUniformBlockIndex(Me,fe.name),Se.set(fe,Fe))}function He(fe,Me){const Fe=u.get(Me).get(fe);c.get(Me)!==Fe&&(n.uniformBlockBinding(Me,Fe,fe.__bindingPointIndex),c.set(Me,Fe))}function De(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},z=null,K={},h={},p=new WeakMap,d=[],g=null,m=!1,y=null,w=null,x=null,_=null,C=null,T=null,b=null,M=!1,P=null,Y=null,H=null,I=null,v=null,j.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),A.reset()}return{buffers:{color:a,depth:l,stencil:A},enable:ae,disable:se,bindFramebuffer:de,drawBuffers:oe,useProgram:pe,setBlending:L,setMaterial:ue,setFlipSided:Ae,setCullFace:q,setLineWidth:J,setPolygonOffset:ce,setScissorTest:be,activeTexture:Be,bindTexture:k,unbindTexture:W,compressedTexImage2D:re,compressedTexImage3D:he,texImage2D:le,texImage3D:ie,updateUBOMapping:Le,uniformBlockBinding:He,texStorage2D:V,texStorage3D:te,texSubImage2D:me,texSubImage3D:G,compressedTexSubImage2D:R,compressedTexSubImage3D:S,scissor:Ie,viewport:Te,reset:De}}function $te(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,A=i.maxCubemapSize,c=i.maxTextureSize,u=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let d;const g=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(k,W){return m?new OffscreenCanvas(k,W):Gm("canvas")}function w(k,W,re,he){let me=1;if((k.width>he||k.height>he)&&(me=he/Math.max(k.width,k.height)),me<1||W===!0)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const G=W?gw:Math.floor,R=G(me*k.width),S=G(me*k.height);d===void 0&&(d=y(R,S));const V=re?y(R,S):d;return V.width=R,V.height=S,V.getContext("2d").drawImage(k,0,0,R,S),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+R+"x"+S+")."),V}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k;return k}function x(k){return oC(k.width)&&oC(k.height)}function _(k){return a?!1:k.wrapS!==ui||k.wrapT!==ui||k.minFilter!==$n&&k.minFilter!==li}function C(k,W){return k.generateMipmaps&&W&&k.minFilter!==$n&&k.minFilter!==li}function T(k){n.generateMipmap(k)}function b(k,W,re,he,me=!1){if(a===!1)return W;if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let G=W;return W===6403&&(re===5126&&(G=33326),re===5131&&(G=33325),re===5121&&(G=33321)),W===33319&&(re===5126&&(G=33328),re===5131&&(G=33327),re===5121&&(G=33323)),W===6408&&(re===5126&&(G=34836),re===5131&&(G=34842),re===5121&&(G=he===wt&&me===!1?35907:32856),re===32819&&(G=32854),re===32820&&(G=32855)),(G===33325||G===33326||G===33327||G===33328||G===34842||G===34836)&&e.get("EXT_color_buffer_float"),G}function M(k,W,re){return C(k,re)===!0||k.isFramebufferTexture&&k.minFilter!==$n&&k.minFilter!==li?Math.log2(Math.max(W.width,W.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?W.mipmaps.length:1}function P(k){return k===$n||k===pw||k===tm?9728:9729}function Y(k){const W=k.target;W.removeEventListener("dispose",Y),I(W),W.isVideoTexture&&p.delete(W)}function H(k){const W=k.target;W.removeEventListener("dispose",H),E(W)}function I(k){const W=r.get(k);if(W.__webglInit===void 0)return;const re=k.source,he=g.get(re);if(he){const me=he[W.__cacheKey];me.usedTimes--,me.usedTimes===0&&v(k),Object.keys(he).length===0&&g.delete(re)}r.remove(k)}function v(k){const W=r.get(k);n.deleteTexture(W.__webglTexture);const re=k.source,he=g.get(re);delete he[W.__cacheKey],o.memory.textures--}function E(k){const W=k.texture,re=r.get(k),he=r.get(W);if(he.__webglTexture!==void 0&&(n.deleteTexture(he.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let me=0;me<6;me++)n.deleteFramebuffer(re.__webglFramebuffer[me]),re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer[me]);else{if(n.deleteFramebuffer(re.__webglFramebuffer),re.__webglDepthbuffer&&n.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&n.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let me=0;me<re.__webglColorRenderbuffer.length;me++)re.__webglColorRenderbuffer[me]&&n.deleteRenderbuffer(re.__webglColorRenderbuffer[me]);re.__webglDepthRenderbuffer&&n.deleteRenderbuffer(re.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let me=0,G=W.length;me<G;me++){const R=r.get(W[me]);R.__webglTexture&&(n.deleteTexture(R.__webglTexture),o.memory.textures--),r.remove(W[me])}r.remove(W),r.remove(k)}let F=0;function D(){F=0}function O(){const k=F;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),F+=1,k}function z(k){const W=[];return W.push(k.wrapS),W.push(k.wrapT),W.push(k.wrapR||0),W.push(k.magFilter),W.push(k.minFilter),W.push(k.anisotropy),W.push(k.internalFormat),W.push(k.format),W.push(k.type),W.push(k.generateMipmaps),W.push(k.premultiplyAlpha),W.push(k.flipY),W.push(k.unpackAlignment),W.push(k.encoding),W.join()}function K(k,W){const re=r.get(k);if(k.isVideoTexture&&be(k),k.isRenderTargetTexture===!1&&k.version>0&&re.__version!==k.version){const he=k.image;if(he===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(he.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(re,k,W);return}}t.bindTexture(3553,re.__webglTexture,33984+W)}function Q(k,W){const re=r.get(k);if(k.version>0&&re.__version!==k.version){se(re,k,W);return}t.bindTexture(35866,re.__webglTexture,33984+W)}function B(k,W){const re=r.get(k);if(k.version>0&&re.__version!==k.version){se(re,k,W);return}t.bindTexture(32879,re.__webglTexture,33984+W)}function j(k,W){const re=r.get(k);if(k.version>0&&re.__version!==k.version){de(re,k,W);return}t.bindTexture(34067,re.__webglTexture,33984+W)}const ee={[us]:10497,[ui]:33071,[km]:33648},U={[$n]:9728,[pw]:9984,[tm]:9986,[li]:9729,[YS]:9985,[OA]:9987};function X(k,W,re){if(re?(n.texParameteri(k,10242,ee[W.wrapS]),n.texParameteri(k,10243,ee[W.wrapT]),(k===32879||k===35866)&&n.texParameteri(k,32882,ee[W.wrapR]),n.texParameteri(k,10240,U[W.magFilter]),n.texParameteri(k,10241,U[W.minFilter])):(n.texParameteri(k,10242,33071),n.texParameteri(k,10243,33071),(k===32879||k===35866)&&n.texParameteri(k,32882,33071),(W.wrapS!==ui||W.wrapT!==ui)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,10240,P(W.magFilter)),n.texParameteri(k,10241,P(W.minFilter)),W.minFilter!==$n&&W.minFilter!==li&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const he=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===$n||W.minFilter!==tm&&W.minFilter!==OA||W.type===uA&&e.has("OES_texture_float_linear")===!1||a===!1&&W.type===Qm&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||r.get(W).__currentAnisotropy)&&(n.texParameterf(k,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),r.get(W).__currentAnisotropy=W.anisotropy)}}function ae(k,W){let re=!1;k.__webglInit===void 0&&(k.__webglInit=!0,W.addEventListener("dispose",Y));const he=W.source;let me=g.get(he);me===void 0&&(me={},g.set(he,me));const G=z(W);if(G!==k.__cacheKey){me[G]===void 0&&(me[G]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,re=!0),me[G].usedTimes++;const R=me[k.__cacheKey];R!==void 0&&(me[k.__cacheKey].usedTimes--,R.usedTimes===0&&v(W)),k.__cacheKey=G,k.__webglTexture=me[G].texture}return re}function se(k,W,re){let he=3553;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(he=35866),W.isData3DTexture&&(he=32879);const me=ae(k,W),G=W.source;t.bindTexture(he,k.__webglTexture,33984+re);const R=r.get(G);if(G.version!==R.__version||me===!0){t.activeTexture(33984+re),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const S=_(W)&&x(W.image)===!1;let V=w(W.image,S,!1,c);V=Be(W,V);const te=x(V)||a,le=s.convert(W.format,W.encoding);let ie=s.convert(W.type),Ie=b(W.internalFormat,le,ie,W.encoding,W.isVideoTexture);X(he,W,te);let Te;const Le=W.mipmaps,He=a&&W.isVideoTexture!==!0,De=R.__version===void 0||me===!0,fe=M(W,V,te);if(W.isDepthTexture)Ie=6402,a?W.type===uA?Ie=36012:W.type===Ec?Ie=33190:W.type===ch?Ie=35056:Ie=33189:W.type===uA&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Uc&&Ie===6402&&W.type!==EH&&W.type!==Ec&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=Ec,ie=s.convert(W.type)),W.format===Oh&&Ie===6402&&(Ie=34041,W.type!==ch&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=ch,ie=s.convert(W.type))),De&&(He?t.texStorage2D(3553,1,Ie,V.width,V.height):t.texImage2D(3553,0,Ie,V.width,V.height,0,le,ie,null));else if(W.isDataTexture)if(Le.length>0&&te){He&&De&&t.texStorage2D(3553,fe,Ie,Le[0].width,Le[0].height);for(let Me=0,Se=Le.length;Me<Se;Me++)Te=Le[Me],He?t.texSubImage2D(3553,Me,0,0,Te.width,Te.height,le,ie,Te.data):t.texImage2D(3553,Me,Ie,Te.width,Te.height,0,le,ie,Te.data);W.generateMipmaps=!1}else He?(De&&t.texStorage2D(3553,fe,Ie,V.width,V.height),t.texSubImage2D(3553,0,0,0,V.width,V.height,le,ie,V.data)):t.texImage2D(3553,0,Ie,V.width,V.height,0,le,ie,V.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){He&&De&&t.texStorage3D(35866,fe,Ie,Le[0].width,Le[0].height,V.depth);for(let Me=0,Se=Le.length;Me<Se;Me++)Te=Le[Me],W.format!==Lr?le!==null?He?t.compressedTexSubImage3D(35866,Me,0,0,0,Te.width,Te.height,V.depth,le,Te.data,0,0):t.compressedTexImage3D(35866,Me,Ie,Te.width,Te.height,V.depth,0,Te.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage3D(35866,Me,0,0,0,Te.width,Te.height,V.depth,le,ie,Te.data):t.texImage3D(35866,Me,Ie,Te.width,Te.height,V.depth,0,le,ie,Te.data)}else{He&&De&&t.texStorage2D(3553,fe,Ie,Le[0].width,Le[0].height);for(let Me=0,Se=Le.length;Me<Se;Me++)Te=Le[Me],W.format!==Lr?le!==null?He?t.compressedTexSubImage2D(3553,Me,0,0,Te.width,Te.height,le,Te.data):t.compressedTexImage2D(3553,Me,Ie,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage2D(3553,Me,0,0,Te.width,Te.height,le,ie,Te.data):t.texImage2D(3553,Me,Ie,Te.width,Te.height,0,le,ie,Te.data)}else if(W.isDataArrayTexture)He?(De&&t.texStorage3D(35866,fe,Ie,V.width,V.height,V.depth),t.texSubImage3D(35866,0,0,0,0,V.width,V.height,V.depth,le,ie,V.data)):t.texImage3D(35866,0,Ie,V.width,V.height,V.depth,0,le,ie,V.data);else if(W.isData3DTexture)He?(De&&t.texStorage3D(32879,fe,Ie,V.width,V.height,V.depth),t.texSubImage3D(32879,0,0,0,0,V.width,V.height,V.depth,le,ie,V.data)):t.texImage3D(32879,0,Ie,V.width,V.height,V.depth,0,le,ie,V.data);else if(W.isFramebufferTexture){if(De)if(He)t.texStorage2D(3553,fe,Ie,V.width,V.height);else{let Me=V.width,Se=V.height;for(let Fe=0;Fe<fe;Fe++)t.texImage2D(3553,Fe,Ie,Me,Se,0,le,ie,null),Me>>=1,Se>>=1}}else if(Le.length>0&&te){He&&De&&t.texStorage2D(3553,fe,Ie,Le[0].width,Le[0].height);for(let Me=0,Se=Le.length;Me<Se;Me++)Te=Le[Me],He?t.texSubImage2D(3553,Me,0,0,le,ie,Te):t.texImage2D(3553,Me,Ie,le,ie,Te);W.generateMipmaps=!1}else He?(De&&t.texStorage2D(3553,fe,Ie,V.width,V.height),t.texSubImage2D(3553,0,0,0,le,ie,V)):t.texImage2D(3553,0,Ie,le,ie,V);C(W,te)&&T(he),R.__version=G.version,W.onUpdate&&W.onUpdate(W)}k.__version=W.version}function de(k,W,re){if(W.image.length!==6)return;const he=ae(k,W),me=W.source;t.bindTexture(34067,k.__webglTexture,33984+re);const G=r.get(me);if(me.version!==G.__version||he===!0){t.activeTexture(33984+re),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const R=W.isCompressedTexture||W.image[0].isCompressedTexture,S=W.image[0]&&W.image[0].isDataTexture,V=[];for(let Me=0;Me<6;Me++)!R&&!S?V[Me]=w(W.image[Me],!1,!0,A):V[Me]=S?W.image[Me].image:W.image[Me],V[Me]=Be(W,V[Me]);const te=V[0],le=x(te)||a,ie=s.convert(W.format,W.encoding),Ie=s.convert(W.type),Te=b(W.internalFormat,ie,Ie,W.encoding),Le=a&&W.isVideoTexture!==!0,He=G.__version===void 0||he===!0;let De=M(W,te,le);X(34067,W,le);let fe;if(R){Le&&He&&t.texStorage2D(34067,De,Te,te.width,te.height);for(let Me=0;Me<6;Me++){fe=V[Me].mipmaps;for(let Se=0;Se<fe.length;Se++){const Fe=fe[Se];W.format!==Lr?ie!==null?Le?t.compressedTexSubImage2D(34069+Me,Se,0,0,Fe.width,Fe.height,ie,Fe.data):t.compressedTexImage2D(34069+Me,Se,Te,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?t.texSubImage2D(34069+Me,Se,0,0,Fe.width,Fe.height,ie,Ie,Fe.data):t.texImage2D(34069+Me,Se,Te,Fe.width,Fe.height,0,ie,Ie,Fe.data)}}}else{fe=W.mipmaps,Le&&He&&(fe.length>0&&De++,t.texStorage2D(34067,De,Te,V[0].width,V[0].height));for(let Me=0;Me<6;Me++)if(S){Le?t.texSubImage2D(34069+Me,0,0,0,V[Me].width,V[Me].height,ie,Ie,V[Me].data):t.texImage2D(34069+Me,0,Te,V[Me].width,V[Me].height,0,ie,Ie,V[Me].data);for(let Se=0;Se<fe.length;Se++){const Ve=fe[Se].image[Me].image;Le?t.texSubImage2D(34069+Me,Se+1,0,0,Ve.width,Ve.height,ie,Ie,Ve.data):t.texImage2D(34069+Me,Se+1,Te,Ve.width,Ve.height,0,ie,Ie,Ve.data)}}else{Le?t.texSubImage2D(34069+Me,0,0,0,ie,Ie,V[Me]):t.texImage2D(34069+Me,0,Te,ie,Ie,V[Me]);for(let Se=0;Se<fe.length;Se++){const Fe=fe[Se];Le?t.texSubImage2D(34069+Me,Se+1,0,0,ie,Ie,Fe.image[Me]):t.texImage2D(34069+Me,Se+1,Te,ie,Ie,Fe.image[Me])}}}C(W,le)&&T(34067),G.__version=me.version,W.onUpdate&&W.onUpdate(W)}k.__version=W.version}function oe(k,W,re,he,me){const G=s.convert(re.format,re.encoding),R=s.convert(re.type),S=b(re.internalFormat,G,R,re.encoding);r.get(W).__hasExternalTextures||(me===32879||me===35866?t.texImage3D(me,0,S,W.width,W.height,W.depth,0,G,R,null):t.texImage2D(me,0,S,W.width,W.height,0,G,R,null)),t.bindFramebuffer(36160,k),ce(W)?f.framebufferTexture2DMultisampleEXT(36160,he,me,r.get(re).__webglTexture,0,J(W)):(me===3553||me>=34069&&me<=34074)&&n.framebufferTexture2D(36160,he,me,r.get(re).__webglTexture,0),t.bindFramebuffer(36160,null)}function pe(k,W,re){if(n.bindRenderbuffer(36161,k),W.depthBuffer&&!W.stencilBuffer){let he=33189;if(re||ce(W)){const me=W.depthTexture;me&&me.isDepthTexture&&(me.type===uA?he=36012:me.type===Ec&&(he=33190));const G=J(W);ce(W)?f.renderbufferStorageMultisampleEXT(36161,G,he,W.width,W.height):n.renderbufferStorageMultisample(36161,G,he,W.width,W.height)}else n.renderbufferStorage(36161,he,W.width,W.height);n.framebufferRenderbuffer(36160,36096,36161,k)}else if(W.depthBuffer&&W.stencilBuffer){const he=J(W);re&&ce(W)===!1?n.renderbufferStorageMultisample(36161,he,35056,W.width,W.height):ce(W)?f.renderbufferStorageMultisampleEXT(36161,he,35056,W.width,W.height):n.renderbufferStorage(36161,34041,W.width,W.height),n.framebufferRenderbuffer(36160,33306,36161,k)}else{const he=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let me=0;me<he.length;me++){const G=he[me],R=s.convert(G.format,G.encoding),S=s.convert(G.type),V=b(G.internalFormat,R,S,G.encoding),te=J(W);re&&ce(W)===!1?n.renderbufferStorageMultisample(36161,te,V,W.width,W.height):ce(W)?f.renderbufferStorageMultisampleEXT(36161,te,V,W.width,W.height):n.renderbufferStorage(36161,V,W.width,W.height)}}n.bindRenderbuffer(36161,null)}function _e(k,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,k),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),K(W.depthTexture,0);const he=r.get(W.depthTexture).__webglTexture,me=J(W);if(W.depthTexture.format===Uc)ce(W)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,he,0,me):n.framebufferTexture2D(36160,36096,3553,he,0);else if(W.depthTexture.format===Oh)ce(W)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,he,0,me):n.framebufferTexture2D(36160,33306,3553,he,0);else throw new Error("Unknown depthTexture format")}function xe(k){const W=r.get(k),re=k.isWebGLCubeRenderTarget===!0;if(k.depthTexture&&!W.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");_e(W.__webglFramebuffer,k)}else if(re){W.__webglDepthbuffer=[];for(let he=0;he<6;he++)t.bindFramebuffer(36160,W.__webglFramebuffer[he]),W.__webglDepthbuffer[he]=n.createRenderbuffer(),pe(W.__webglDepthbuffer[he],k,!1)}else t.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=n.createRenderbuffer(),pe(W.__webglDepthbuffer,k,!1);t.bindFramebuffer(36160,null)}function L(k,W,re){const he=r.get(k);W!==void 0&&oe(he.__webglFramebuffer,k,k.texture,36064,3553),re!==void 0&&xe(k)}function ue(k){const W=k.texture,re=r.get(k),he=r.get(W);k.addEventListener("dispose",H),k.isWebGLMultipleRenderTargets!==!0&&(he.__webglTexture===void 0&&(he.__webglTexture=n.createTexture()),he.__version=W.version,o.memory.textures++);const me=k.isWebGLCubeRenderTarget===!0,G=k.isWebGLMultipleRenderTargets===!0,R=x(k)||a;if(me){re.__webglFramebuffer=[];for(let S=0;S<6;S++)re.__webglFramebuffer[S]=n.createFramebuffer()}else{if(re.__webglFramebuffer=n.createFramebuffer(),G)if(i.drawBuffers){const S=k.texture;for(let V=0,te=S.length;V<te;V++){const le=r.get(S[V]);le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&k.samples>0&&ce(k)===!1){const S=G?W:[W];re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,re.__webglMultisampledFramebuffer);for(let V=0;V<S.length;V++){const te=S[V];re.__webglColorRenderbuffer[V]=n.createRenderbuffer(),n.bindRenderbuffer(36161,re.__webglColorRenderbuffer[V]);const le=s.convert(te.format,te.encoding),ie=s.convert(te.type),Ie=b(te.internalFormat,le,ie,te.encoding,k.isXRRenderTarget===!0),Te=J(k);n.renderbufferStorageMultisample(36161,Te,Ie,k.width,k.height),n.framebufferRenderbuffer(36160,36064+V,36161,re.__webglColorRenderbuffer[V])}n.bindRenderbuffer(36161,null),k.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),pe(re.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(36160,null)}}if(me){t.bindTexture(34067,he.__webglTexture),X(34067,W,R);for(let S=0;S<6;S++)oe(re.__webglFramebuffer[S],k,W,36064,34069+S);C(W,R)&&T(34067),t.unbindTexture()}else if(G){const S=k.texture;for(let V=0,te=S.length;V<te;V++){const le=S[V],ie=r.get(le);t.bindTexture(3553,ie.__webglTexture),X(3553,le,R),oe(re.__webglFramebuffer,k,le,36064+V,3553),C(le,R)&&T(3553)}t.unbindTexture()}else{let S=3553;(k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?S=k.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(S,he.__webglTexture),X(S,W,R),oe(re.__webglFramebuffer,k,W,36064,S),C(W,R)&&T(S),t.unbindTexture()}k.depthBuffer&&xe(k)}function Ae(k){const W=x(k)||a,re=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let he=0,me=re.length;he<me;he++){const G=re[he];if(C(G,W)){const R=k.isWebGLCubeRenderTarget?34067:3553,S=r.get(G).__webglTexture;t.bindTexture(R,S),T(R),t.unbindTexture()}}}function q(k){if(a&&k.samples>0&&ce(k)===!1){const W=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],re=k.width,he=k.height;let me=16384;const G=[],R=k.stencilBuffer?33306:36096,S=r.get(k),V=k.isWebGLMultipleRenderTargets===!0;if(V)for(let te=0;te<W.length;te++)t.bindFramebuffer(36160,S.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+te,36161,null),t.bindFramebuffer(36160,S.__webglFramebuffer),n.framebufferTexture2D(36009,36064+te,3553,null,0);t.bindFramebuffer(36008,S.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,S.__webglFramebuffer);for(let te=0;te<W.length;te++){G.push(36064+te),k.depthBuffer&&G.push(R);const le=S.__ignoreDepthValues!==void 0?S.__ignoreDepthValues:!1;if(le===!1&&(k.depthBuffer&&(me|=256),k.stencilBuffer&&(me|=1024)),V&&n.framebufferRenderbuffer(36008,36064,36161,S.__webglColorRenderbuffer[te]),le===!0&&(n.invalidateFramebuffer(36008,[R]),n.invalidateFramebuffer(36009,[R])),V){const ie=r.get(W[te]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ie,0)}n.blitFramebuffer(0,0,re,he,0,0,re,he,me,9728),h&&n.invalidateFramebuffer(36008,G)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),V)for(let te=0;te<W.length;te++){t.bindFramebuffer(36160,S.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+te,36161,S.__webglColorRenderbuffer[te]);const le=r.get(W[te]).__webglTexture;t.bindFramebuffer(36160,S.__webglFramebuffer),n.framebufferTexture2D(36009,36064+te,3553,le,0)}t.bindFramebuffer(36009,S.__webglMultisampledFramebuffer)}}function J(k){return Math.min(u,k.samples)}function ce(k){const W=r.get(k);return a&&k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function be(k){const W=o.render.frame;p.get(k)!==W&&(p.set(k,W),k.update())}function Be(k,W){const re=k.encoding,he=k.format,me=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||k.format===sC||re!==_l&&(re===wt?a===!1?e.has("EXT_sRGB")===!0&&he===Lr?(k.format=sC,k.minFilter=li,k.generateMipmaps=!1):W=IH.sRGBToLinear(W):(he!==Lr||me!==Kc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",re)),W}this.allocateTextureUnit=O,this.resetTextureUnits=D,this.setTexture2D=K,this.setTexture2DArray=Q,this.setTexture3D=B,this.setTextureCube=j,this.rebindTextures=L,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=q,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=oe,this.useMultisampledRTT=ce}function Xte(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===Kc)return 5121;if(s===EX)return 32819;if(s===CX)return 32820;if(s===_X)return 5120;if(s===bX)return 5122;if(s===EH)return 5123;if(s===BX)return 5124;if(s===Ec)return 5125;if(s===uA)return 5126;if(s===Qm)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===MX)return 6406;if(s===Lr)return 6408;if(s===SX)return 6409;if(s===TX)return 6410;if(s===Uc)return 6402;if(s===Oh)return 34041;if(s===sC)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===IX)return 6403;if(s===RX)return 36244;if(s===FX)return 33319;if(s===UX)return 33320;if(s===LX)return 36249;if(s===U1||s===L1||s===P1||s===D1)if(o===wt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===U1)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===L1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===P1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===D1)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===U1)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===L1)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===P1)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===D1)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===pF||s===mF||s===gF||s===vF)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===pF)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===mF)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===gF)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===vF)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===PX)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===yF||s===wF)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===yF)return o===wt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===wF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===xF||s===_F||s===bF||s===BF||s===EF||s===CF||s===MF||s===SF||s===TF||s===IF||s===RF||s===FF||s===UF||s===LF)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===xF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===_F)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===bF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===BF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===EF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===CF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===MF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===SF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===TF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===IF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===RF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===FF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===UF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===LF)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===O1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===O1)return o===wt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===DX||s===PF||s===DF||s===OF)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===O1)return a.COMPRESSED_RED_RGTC1_EXT;if(s===PF)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===DF)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===OF)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ch?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class Zte extends Br{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Pr extends It{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Jte={type:"move"};class Ab{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Pr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Pr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Pr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,A=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(A&&e.hand){o=!0;for(const d of e.hand.values()){const g=t.getJointPose(d,r),m=this._getHandJoint(A,d);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=g.radius),m.visible=g!==null}const c=A.joints["index-finger-tip"],u=A.joints["thumb-tip"],f=c.position.distanceTo(u.position),h=.02,p=.005;A.inputState.pinching&&f>h+p?(A.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!A.inputState.pinching&&f<=h-p&&(A.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jte)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),A!==null&&(A.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Pr;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class HH extends Hn{constructor(e,t,r,i,s,o,a,l,A,c){if(c=c!==void 0?c:Uc,c!==Uc&&c!==Oh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Uc&&(r=Ec),r===void 0&&c===Oh&&(r=ch),super(null,i,s,o,a,l,c,r,A),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:$n,this.minFilter=l!==void 0?l:$n,this.flipY=!1,this.generateMipmaps=!1}}class qte extends $A{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,A=null,c=null,u=null,f=null,h=null,p=null;const d=t.getContextAttributes();let g=null,m=null;const y=[],w=[],x=new Set,_=new Map,C=new Br;C.layers.enable(1),C.viewport=new Qt;const T=new Br;T.layers.enable(2),T.viewport=new Qt;const b=[C,T],M=new Zte;M.layers.enable(1),M.layers.enable(2);let P=null,Y=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let j=y[B];return j===void 0&&(j=new Ab,y[B]=j),j.getTargetRaySpace()},this.getControllerGrip=function(B){let j=y[B];return j===void 0&&(j=new Ab,y[B]=j),j.getGripSpace()},this.getHand=function(B){let j=y[B];return j===void 0&&(j=new Ab,y[B]=j),j.getHandSpace()};function H(B){const j=w.indexOf(B.inputSource);if(j===-1)return;const ee=y[j];ee!==void 0&&ee.dispatchEvent({type:B.type,data:B.inputSource})}function I(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",I),i.removeEventListener("inputsourceschange",v);for(let B=0;B<y.length;B++){const j=w[B];j!==null&&(w[B]=null,y[B].disconnect(j))}P=null,Y=null,e.setRenderTarget(g),h=null,f=null,u=null,i=null,m=null,Q.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){s=B,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){a=B,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A||o},this.setReferenceSpace=function(B){A=B},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(B){if(i=B,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",I),i.addEventListener("inputsourceschange",v),d.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const j={antialias:i.renderState.layers===void 0?d.antialias:!0,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,t,j),i.updateRenderState({baseLayer:h}),m=new pa(h.framebufferWidth,h.framebufferHeight,{format:Lr,type:Kc,encoding:e.outputEncoding,stencilBuffer:d.stencil})}else{let j=null,ee=null,U=null;d.depth&&(U=d.stencil?35056:33190,j=d.stencil?Oh:Uc,ee=d.stencil?ch:Ec);const X={colorFormat:32856,depthFormat:U,scaleFactor:s};u=new XRWebGLBinding(i,t),f=u.createProjectionLayer(X),i.updateRenderState({layers:[f]}),m=new pa(f.textureWidth,f.textureHeight,{format:Lr,type:Kc,depthTexture:new HH(f.textureWidth,f.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:d.stencil,encoding:e.outputEncoding,samples:d.antialias?4:0});const ae=e.properties.get(m);ae.__ignoreDepthValues=f.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),A=null,o=await i.requestReferenceSpace(a),Q.setContext(i),Q.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function v(B){for(let j=0;j<B.removed.length;j++){const ee=B.removed[j],U=w.indexOf(ee);U>=0&&(w[U]=null,y[U].disconnect(ee))}for(let j=0;j<B.added.length;j++){const ee=B.added[j];let U=w.indexOf(ee);if(U===-1){for(let ae=0;ae<y.length;ae++)if(ae>=w.length){w.push(ee),U=ae;break}else if(w[ae]===null){w[ae]=ee,U=ae;break}if(U===-1)break}const X=y[U];X&&X.connect(ee)}}const E=new Z,F=new Z;function D(B,j,ee){E.setFromMatrixPosition(j.matrixWorld),F.setFromMatrixPosition(ee.matrixWorld);const U=E.distanceTo(F),X=j.projectionMatrix.elements,ae=ee.projectionMatrix.elements,se=X[14]/(X[10]-1),de=X[14]/(X[10]+1),oe=(X[9]+1)/X[5],pe=(X[9]-1)/X[5],_e=(X[8]-1)/X[0],xe=(ae[8]+1)/ae[0],L=se*_e,ue=se*xe,Ae=U/(-_e+xe),q=Ae*-_e;j.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(q),B.translateZ(Ae),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const J=se+Ae,ce=de+Ae,be=L-q,Be=ue+(U-q),k=oe*de/ce*J,W=pe*de/ce*J;B.projectionMatrix.makePerspective(be,Be,k,W,J,ce)}function O(B,j){j===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(j.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(i===null)return;M.near=T.near=C.near=B.near,M.far=T.far=C.far=B.far,(P!==M.near||Y!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),P=M.near,Y=M.far);const j=B.parent,ee=M.cameras;O(M,j);for(let X=0;X<ee.length;X++)O(ee[X],j);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),B.matrix.copy(M.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale);const U=B.children;for(let X=0,ae=U.length;X<ae;X++)U[X].updateMatrixWorld(!0);ee.length===2?D(M,C,T):M.projectionMatrix.copy(C.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(B){l=B,f!==null&&(f.fixedFoveation=B),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=B)},this.getPlanes=function(){return x};let z=null;function K(B,j){if(c=j.getViewerPose(A||o),p=j,c!==null){const ee=c.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let U=!1;ee.length!==M.cameras.length&&(M.cameras.length=0,U=!0);for(let X=0;X<ee.length;X++){const ae=ee[X];let se=null;if(h!==null)se=h.getViewport(ae);else{const oe=u.getViewSubImage(f,ae);se=oe.viewport,X===0&&(e.setRenderTargetTextures(m,oe.colorTexture,f.ignoreDepthValues?void 0:oe.depthStencilTexture),e.setRenderTarget(m))}let de=b[X];de===void 0&&(de=new Br,de.layers.enable(X),de.viewport=new Qt,b[X]=de),de.matrix.fromArray(ae.transform.matrix),de.projectionMatrix.fromArray(ae.projectionMatrix),de.viewport.set(se.x,se.y,se.width,se.height),X===0&&M.matrix.copy(de.matrix),U===!0&&M.cameras.push(de)}}for(let ee=0;ee<y.length;ee++){const U=w[ee],X=y[ee];U!==null&&X!==void 0&&X.update(U,j,A||o)}if(z&&z(B,j),j.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:j.detectedPlanes});let ee=null;for(const U of x)j.detectedPlanes.has(U)||(ee===null&&(ee=[]),ee.push(U));if(ee!==null)for(const U of ee)x.delete(U),_.delete(U),r.dispatchEvent({type:"planeremoved",data:U});for(const U of j.detectedPlanes)if(!x.has(U))x.add(U),_.set(U,j.lastChangedTime),r.dispatchEvent({type:"planeadded",data:U});else{const X=_.get(U);U.lastChangedTime>X&&(_.set(U,U.lastChangedTime),r.dispatchEvent({type:"planechanged",data:U}))}}p=null}const Q=new DH;Q.setAnimationLoop(K),this.setAnimationLoop=function(B){z=B},this.dispose=function(){}}}function ene(n,e){function t(d,g){g.color.getRGB(d.fogColor.value,UH(n)),g.isFog?(d.fogNear.value=g.near,d.fogFar.value=g.far):g.isFogExp2&&(d.fogDensity.value=g.density)}function r(d,g,m,y,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?i(d,g):g.isMeshToonMaterial?(i(d,g),c(d,g)):g.isMeshPhongMaterial?(i(d,g),A(d,g)):g.isMeshStandardMaterial?(i(d,g),u(d,g),g.isMeshPhysicalMaterial&&f(d,g,w)):g.isMeshMatcapMaterial?(i(d,g),h(d,g)):g.isMeshDepthMaterial?i(d,g):g.isMeshDistanceMaterial?(i(d,g),p(d,g)):g.isMeshNormalMaterial?i(d,g):g.isLineBasicMaterial?(s(d,g),g.isLineDashedMaterial&&o(d,g)):g.isPointsMaterial?a(d,g,m,y):g.isSpriteMaterial?l(d,g):g.isShadowMaterial?(d.color.value.copy(g.color),d.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(d,g){d.opacity.value=g.opacity,g.color&&d.diffuse.value.copy(g.color),g.emissive&&d.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(d.map.value=g.map),g.alphaMap&&(d.alphaMap.value=g.alphaMap),g.bumpMap&&(d.bumpMap.value=g.bumpMap,d.bumpScale.value=g.bumpScale,g.side===qr&&(d.bumpScale.value*=-1)),g.displacementMap&&(d.displacementMap.value=g.displacementMap,d.displacementScale.value=g.displacementScale,d.displacementBias.value=g.displacementBias),g.emissiveMap&&(d.emissiveMap.value=g.emissiveMap),g.normalMap&&(d.normalMap.value=g.normalMap,d.normalScale.value.copy(g.normalScale),g.side===qr&&d.normalScale.value.negate()),g.specularMap&&(d.specularMap.value=g.specularMap),g.alphaTest>0&&(d.alphaTest.value=g.alphaTest);const m=e.get(g).envMap;if(m&&(d.envMap.value=m,d.flipEnvMap.value=m.isCubeTexture&&m.isRenderTargetTexture===!1?-1:1,d.reflectivity.value=g.reflectivity,d.ior.value=g.ior,d.refractionRatio.value=g.refractionRatio),g.lightMap){d.lightMap.value=g.lightMap;const x=n.physicallyCorrectLights!==!0?Math.PI:1;d.lightMapIntensity.value=g.lightMapIntensity*x}g.aoMap&&(d.aoMap.value=g.aoMap,d.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),d.uvTransform.value.copy(y.matrix));let w;g.aoMap?w=g.aoMap:g.lightMap&&(w=g.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),d.uv2Transform.value.copy(w.matrix))}function s(d,g){d.diffuse.value.copy(g.color),d.opacity.value=g.opacity}function o(d,g){d.dashSize.value=g.dashSize,d.totalSize.value=g.dashSize+g.gapSize,d.scale.value=g.scale}function a(d,g,m,y){d.diffuse.value.copy(g.color),d.opacity.value=g.opacity,d.size.value=g.size*m,d.scale.value=y*.5,g.map&&(d.map.value=g.map),g.alphaMap&&(d.alphaMap.value=g.alphaMap),g.alphaTest>0&&(d.alphaTest.value=g.alphaTest);let w;g.map?w=g.map:g.alphaMap&&(w=g.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),d.uvTransform.value.copy(w.matrix))}function l(d,g){d.diffuse.value.copy(g.color),d.opacity.value=g.opacity,d.rotation.value=g.rotation,g.map&&(d.map.value=g.map),g.alphaMap&&(d.alphaMap.value=g.alphaMap),g.alphaTest>0&&(d.alphaTest.value=g.alphaTest);let m;g.map?m=g.map:g.alphaMap&&(m=g.alphaMap),m!==void 0&&(m.matrixAutoUpdate===!0&&m.updateMatrix(),d.uvTransform.value.copy(m.matrix))}function A(d,g){d.specular.value.copy(g.specular),d.shininess.value=Math.max(g.shininess,1e-4)}function c(d,g){g.gradientMap&&(d.gradientMap.value=g.gradientMap)}function u(d,g){d.roughness.value=g.roughness,d.metalness.value=g.metalness,g.roughnessMap&&(d.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(d.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(d.envMapIntensity.value=g.envMapIntensity)}function f(d,g,m){d.ior.value=g.ior,g.sheen>0&&(d.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),d.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(d.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(d.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(d.clearcoat.value=g.clearcoat,d.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(d.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(d.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(d.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),d.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===qr&&d.clearcoatNormalScale.value.negate())),g.iridescence>0&&(d.iridescence.value=g.iridescence,d.iridescenceIOR.value=g.iridescenceIOR,d.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],d.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(d.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(d.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(d.transmission.value=g.transmission,d.transmissionSamplerMap.value=m.texture,d.transmissionSamplerSize.value.set(m.width,m.height),g.transmissionMap&&(d.transmissionMap.value=g.transmissionMap),d.thickness.value=g.thickness,g.thicknessMap&&(d.thicknessMap.value=g.thicknessMap),d.attenuationDistance.value=g.attenuationDistance,d.attenuationColor.value.copy(g.attenuationColor)),d.specularIntensity.value=g.specularIntensity,d.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(d.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(d.specularColorMap.value=g.specularColorMap)}function h(d,g){g.matcap&&(d.matcap.value=g.matcap)}function p(d,g){d.referencePosition.value.copy(g.referencePosition),d.nearDistance.value=g.nearDistance,d.farDistance.value=g.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function tne(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(y,w){const x=w.program;r.uniformBlockBinding(y,x)}function A(y,w){let x=i[y.id];x===void 0&&(p(y),x=c(y),i[y.id]=x,y.addEventListener("dispose",g));const _=w.program;r.updateUBOMapping(y,_);const C=e.render.frame;s[y.id]!==C&&(f(y),s[y.id]=C)}function c(y){const w=u();y.__bindingPointIndex=w;const x=n.createBuffer(),_=y.__size,C=y.usage;return n.bindBuffer(35345,x),n.bufferData(35345,_,C),n.bindBuffer(35345,null),n.bindBufferBase(35345,w,x),x}function u(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const w=i[y.id],x=y.uniforms,_=y.__cache;n.bindBuffer(35345,w);for(let C=0,T=x.length;C<T;C++){const b=x[C];if(h(b,C,_)===!0){const M=b.__offset,P=Array.isArray(b.value)?b.value:[b.value];let Y=0;for(let H=0;H<P.length;H++){const I=P[H],v=d(I);typeof I=="number"?(b.__data[0]=I,n.bufferSubData(35345,M+Y,b.__data)):I.isMatrix3?(b.__data[0]=I.elements[0],b.__data[1]=I.elements[1],b.__data[2]=I.elements[2],b.__data[3]=I.elements[0],b.__data[4]=I.elements[3],b.__data[5]=I.elements[4],b.__data[6]=I.elements[5],b.__data[7]=I.elements[0],b.__data[8]=I.elements[6],b.__data[9]=I.elements[7],b.__data[10]=I.elements[8],b.__data[11]=I.elements[0]):(I.toArray(b.__data,Y),Y+=v.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,M,b.__data)}}n.bindBuffer(35345,null)}function h(y,w,x){const _=y.value;if(x[w]===void 0){if(typeof _=="number")x[w]=_;else{const C=Array.isArray(_)?_:[_],T=[];for(let b=0;b<C.length;b++)T.push(C[b].clone());x[w]=T}return!0}else if(typeof _=="number"){if(x[w]!==_)return x[w]=_,!0}else{const C=Array.isArray(x[w])?x[w]:[x[w]],T=Array.isArray(_)?_:[_];for(let b=0;b<C.length;b++){const M=C[b];if(M.equals(T[b])===!1)return M.copy(T[b]),!0}}return!1}function p(y){const w=y.uniforms;let x=0;const _=16;let C=0;for(let T=0,b=w.length;T<b;T++){const M=w[T],P={boundary:0,storage:0},Y=Array.isArray(M.value)?M.value:[M.value];for(let H=0,I=Y.length;H<I;H++){const v=Y[H],E=d(v);P.boundary+=E.boundary,P.storage+=E.storage}if(M.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=x,T>0){C=x%_;const H=_-C;C!==0&&H-P.boundary<0&&(x+=_-C,M.__offset=x)}x+=P.storage}return C=x%_,C>0&&(x+=_-C),y.__size=x,y.__cache={},this}function d(y){const w={boundary:0,storage:0};return typeof y=="number"?(w.boundary=4,w.storage=4):y.isVector2?(w.boundary=8,w.storage=8):y.isVector3||y.isColor?(w.boundary=16,w.storage=12):y.isVector4?(w.boundary=16,w.storage=16):y.isMatrix3?(w.boundary=48,w.storage=48):y.isMatrix4?(w.boundary=64,w.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),w}function g(y){const w=y.target;w.removeEventListener("dispose",g);const x=o.indexOf(w.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function m(){for(const y in i)n.deleteBuffer(i[y]);o=[],i={},s={}}return{bind:l,update:A,dispose:m}}function nne(){const n=Gm("canvas");return n.style.display="block",n}function gg(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:nne(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",A=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let u=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=_l,this.physicallyCorrectLights=!1,this.toneMapping=Al,this.toneMappingExposure=1;const d=this;let g=!1,m=0,y=0,w=null,x=-1,_=null;const C=new Qt,T=new Qt;let b=null,M=e.width,P=e.height,Y=1,H=null,I=null;const v=new Qt(0,0,M,P),E=new Qt(0,0,M,P);let F=!1;const D=new eT;let O=!1,z=!1,K=null;const Q=new We,B=new Ye,j=new Z,ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return w===null?Y:1}let X=t;function ae(ne,ve){for(let Ee=0;Ee<ne.length;Ee++){const we=ne[Ee],Ce=e.getContext(we,ve);if(Ce!==null)return Ce}return null}try{const ne={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:A};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${jc}`),e.addEventListener("webglcontextlost",Ie,!1),e.addEventListener("webglcontextrestored",Te,!1),e.addEventListener("webglcontextcreationerror",Le,!1),X===null){const ve=["webgl2","webgl","experimental-webgl"];if(d.isWebGL1Renderer===!0&&ve.shift(),X=ae(ve,ne),X===null)throw ae(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ne){throw console.error("THREE.WebGLRenderer: "+ne.message),ne}let se,de,oe,pe,_e,xe,L,ue,Ae,q,J,ce,be,Be,k,W,re,he,me,G,R,S,V,te;function le(){se=new dee(X),de=new lee(X,se,n),se.init(de),S=new Xte(X,se,de),oe=new Yte(X,se,de),pe=new gee,_e=new Lte,xe=new $te(X,se,oe,_e,de,S,pe),L=new cee(d),ue=new hee(d),Ae=new CZ(X,de),V=new oee(X,se,Ae,de),q=new pee(X,Ae,pe,V),J=new xee(X,q,Ae,pe),me=new wee(X,de,xe),W=new Aee(_e),ce=new Ute(d,L,ue,se,de,V,W),be=new ene(d,_e),Be=new Dte,k=new zte(se,de),he=new see(d,L,ue,oe,J,c,o),re=new Kte(d,J,de),te=new tne(X,pe,de,oe),G=new aee(X,se,pe,de),R=new mee(X,se,pe,de),pe.programs=ce.programs,d.capabilities=de,d.extensions=se,d.properties=_e,d.renderLists=Be,d.shadowMap=re,d.state=oe,d.info=pe}le();const ie=new qte(d,X);this.xr=ie,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const ne=se.get("WEBGL_lose_context");ne&&ne.loseContext()},this.forceContextRestore=function(){const ne=se.get("WEBGL_lose_context");ne&&ne.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(ne){ne!==void 0&&(Y=ne,this.setSize(M,P,!1))},this.getSize=function(ne){return ne.set(M,P)},this.setSize=function(ne,ve,Ee){if(ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=ne,P=ve,e.width=Math.floor(ne*Y),e.height=Math.floor(ve*Y),Ee!==!1&&(e.style.width=ne+"px",e.style.height=ve+"px"),this.setViewport(0,0,ne,ve)},this.getDrawingBufferSize=function(ne){return ne.set(M*Y,P*Y).floor()},this.setDrawingBufferSize=function(ne,ve,Ee){M=ne,P=ve,Y=Ee,e.width=Math.floor(ne*Ee),e.height=Math.floor(ve*Ee),this.setViewport(0,0,ne,ve)},this.getCurrentViewport=function(ne){return ne.copy(C)},this.getViewport=function(ne){return ne.copy(v)},this.setViewport=function(ne,ve,Ee,we){ne.isVector4?v.set(ne.x,ne.y,ne.z,ne.w):v.set(ne,ve,Ee,we),oe.viewport(C.copy(v).multiplyScalar(Y).floor())},this.getScissor=function(ne){return ne.copy(E)},this.setScissor=function(ne,ve,Ee,we){ne.isVector4?E.set(ne.x,ne.y,ne.z,ne.w):E.set(ne,ve,Ee,we),oe.scissor(T.copy(E).multiplyScalar(Y).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(ne){oe.setScissorTest(F=ne)},this.setOpaqueSort=function(ne){H=ne},this.setTransparentSort=function(ne){I=ne},this.getClearColor=function(ne){return ne.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(ne=!0,ve=!0,Ee=!0){let we=0;ne&&(we|=16384),ve&&(we|=256),Ee&&(we|=1024),X.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ie,!1),e.removeEventListener("webglcontextrestored",Te,!1),e.removeEventListener("webglcontextcreationerror",Le,!1),Be.dispose(),k.dispose(),_e.dispose(),L.dispose(),ue.dispose(),J.dispose(),V.dispose(),te.dispose(),ce.dispose(),ie.dispose(),ie.removeEventListener("sessionstart",Fe),ie.removeEventListener("sessionend",Ve),K&&(K.dispose(),K=null),Je.stop()};function Ie(ne){ne.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const ne=pe.autoReset,ve=re.enabled,Ee=re.autoUpdate,we=re.needsUpdate,Ce=re.type;le(),pe.autoReset=ne,re.enabled=ve,re.autoUpdate=Ee,re.needsUpdate=we,re.type=Ce}function Le(ne){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ne.statusMessage)}function He(ne){const ve=ne.target;ve.removeEventListener("dispose",He),De(ve)}function De(ne){fe(ne),_e.remove(ne)}function fe(ne){const ve=_e.get(ne).programs;ve!==void 0&&(ve.forEach(function(Ee){ce.releaseProgram(Ee)}),ne.isShaderMaterial&&ce.releaseShaderCache(ne))}this.renderBufferDirect=function(ne,ve,Ee,we,Ce,ze){ve===null&&(ve=ee);const st=Ce.isMesh&&Ce.matrixWorld.determinant()<0,$e=Js(ne,ve,Ee,we,Ce);oe.setMaterial(we,st);let Xe=Ee.index,gt=1;we.wireframe===!0&&(Xe=q.getWireframeAttribute(Ee),gt=2);const dt=Ee.drawRange,ct=Ee.attributes.position;let jt=dt.start*gt,vn=(dt.start+dt.count)*gt;ze!==null&&(jt=Math.max(jt,ze.start*gt),vn=Math.min(vn,(ze.start+ze.count)*gt)),Xe!==null?(jt=Math.max(jt,0),vn=Math.min(vn,Xe.count)):ct!=null&&(jt=Math.max(jt,0),vn=Math.min(vn,ct.count));const Hr=vn-jt;if(Hr<0||Hr===1/0)return;V.setup(Ce,we,$e,Ee,Xe);let ki,yn=G;if(Xe!==null&&(ki=Ae.get(Xe),yn=R,yn.setIndex(ki)),Ce.isMesh)we.wireframe===!0?(oe.setLineWidth(we.wireframeLinewidth*U()),yn.setMode(1)):yn.setMode(4);else if(Ce.isLine){let bt=we.linewidth;bt===void 0&&(bt=1),oe.setLineWidth(bt*U()),Ce.isLineSegments?yn.setMode(1):Ce.isLineLoop?yn.setMode(2):yn.setMode(3)}else Ce.isPoints?yn.setMode(0):Ce.isSprite&&yn.setMode(4);if(Ce.isInstancedMesh)yn.renderInstances(jt,Hr,Ce.count);else if(Ee.isInstancedBufferGeometry){const bt=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,JA=Math.min(Ee.instanceCount,bt);yn.renderInstances(jt,Hr,JA)}else yn.render(jt,Hr)},this.compile=function(ne,ve){function Ee(we,Ce,ze){we.transparent===!0&&we.side===hi&&we.forceSinglePass===!1?(we.side=qr,we.needsUpdate=!0,yt(we,Ce,ze),we.side=cs,we.needsUpdate=!0,yt(we,Ce,ze),we.side=hi):yt(we,Ce,ze)}f=k.get(ne),f.init(),p.push(f),ne.traverseVisible(function(we){we.isLight&&we.layers.test(ve.layers)&&(f.pushLight(we),we.castShadow&&f.pushShadow(we))}),f.setupLights(d.physicallyCorrectLights),ne.traverse(function(we){const Ce=we.material;if(Ce)if(Array.isArray(Ce))for(let ze=0;ze<Ce.length;ze++){const st=Ce[ze];Ee(st,ne,we)}else Ee(Ce,ne,we)}),p.pop(),f=null};let Me=null;function Se(ne){Me&&Me(ne)}function Fe(){Je.stop()}function Ve(){Je.start()}const Je=new DH;Je.setAnimationLoop(Se),typeof self<"u"&&Je.setContext(self),this.setAnimationLoop=function(ne){Me=ne,ie.setAnimationLoop(ne),ne===null?Je.stop():Je.start()},ie.addEventListener("sessionstart",Fe),ie.addEventListener("sessionend",Ve),this.render=function(ne,ve){if(ve!==void 0&&ve.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),ie.enabled===!0&&ie.isPresenting===!0&&(ie.cameraAutoUpdate===!0&&ie.updateCamera(ve),ve=ie.getCamera()),ne.isScene===!0&&ne.onBeforeRender(d,ne,ve,w),f=k.get(ne,p.length),f.init(),p.push(f),Q.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),D.setFromProjectionMatrix(Q),z=this.localClippingEnabled,O=W.init(this.clippingPlanes,z),u=Be.get(ne,h.length),u.init(),h.push(u),ft(ne,ve,0,d.sortObjects),u.finish(),d.sortObjects===!0&&u.sort(H,I),O===!0&&W.beginShadows();const Ee=f.state.shadowsArray;if(re.render(Ee,ne,ve),O===!0&&W.endShadows(),this.info.autoReset===!0&&this.info.reset(),he.render(u,ne),f.setupLights(d.physicallyCorrectLights),ve.isArrayCamera){const we=ve.cameras;for(let Ce=0,ze=we.length;Ce<ze;Ce++){const st=we[Ce];on(u,ne,st,st.viewport)}}else on(u,ne,ve);w!==null&&(xe.updateMultisampleRenderTarget(w),xe.updateRenderTargetMipmap(w)),ne.isScene===!0&&ne.onAfterRender(d,ne,ve),V.resetDefaultState(),x=-1,_=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,h.pop(),h.length>0?u=h[h.length-1]:u=null};function ft(ne,ve,Ee,we){if(ne.visible===!1)return;if(ne.layers.test(ve.layers)){if(ne.isGroup)Ee=ne.renderOrder;else if(ne.isLOD)ne.autoUpdate===!0&&ne.update(ve);else if(ne.isLight)f.pushLight(ne),ne.castShadow&&f.pushShadow(ne);else if(ne.isSprite){if(!ne.frustumCulled||D.intersectsSprite(ne)){we&&j.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(Q);const st=J.update(ne),$e=ne.material;$e.visible&&u.push(ne,st,$e,Ee,j.z,null)}}else if((ne.isMesh||ne.isLine||ne.isPoints)&&(ne.isSkinnedMesh&&ne.skeleton.frame!==pe.render.frame&&(ne.skeleton.update(),ne.skeleton.frame=pe.render.frame),!ne.frustumCulled||D.intersectsObject(ne))){we&&j.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(Q);const st=J.update(ne),$e=ne.material;if(Array.isArray($e)){const Xe=st.groups;for(let gt=0,dt=Xe.length;gt<dt;gt++){const ct=Xe[gt],jt=$e[ct.materialIndex];jt&&jt.visible&&u.push(ne,st,jt,Ee,j.z,ct)}}else $e.visible&&u.push(ne,st,$e,Ee,j.z,null)}}const ze=ne.children;for(let st=0,$e=ze.length;st<$e;st++)ft(ze[st],ve,Ee,we)}function on(ne,ve,Ee,we){const Ce=ne.opaque,ze=ne.transmissive,st=ne.transparent;f.setupLightsView(Ee),O===!0&&W.setGlobalState(d.clippingPlanes,Ee),ze.length>0&&Ct(Ce,ve,Ee),we&&oe.viewport(C.copy(we)),Ce.length>0&&it(Ce,ve,Ee),ze.length>0&&it(ze,ve,Ee),st.length>0&&it(st,ve,Ee),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1)}function Ct(ne,ve,Ee){const we=de.isWebGL2;K===null&&(K=new pa(1,1,{generateMipmaps:!0,type:se.has("EXT_color_buffer_half_float")?Qm:Kc,minFilter:OA,samples:we&&s===!0?4:0})),d.getDrawingBufferSize(B),we?K.setSize(B.x,B.y):K.setSize(gw(B.x),gw(B.y));const Ce=d.getRenderTarget();d.setRenderTarget(K),d.clear();const ze=d.toneMapping;d.toneMapping=Al,it(ne,ve,Ee),d.toneMapping=ze,xe.updateMultisampleRenderTarget(K),xe.updateRenderTargetMipmap(K),d.setRenderTarget(Ce)}function it(ne,ve,Ee){const we=ve.isScene===!0?ve.overrideMaterial:null;for(let Ce=0,ze=ne.length;Ce<ze;Ce++){const st=ne[Ce],$e=st.object,Xe=st.geometry,gt=we===null?st.material:we,dt=st.group;$e.layers.test(Ee.layers)&&lr($e,ve,Ee,Xe,gt,dt)}}function lr(ne,ve,Ee,we,Ce,ze){ne.onBeforeRender(d,ve,Ee,we,Ce,ze),ne.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,ne.matrixWorld),ne.normalMatrix.getNormalMatrix(ne.modelViewMatrix),Ce.onBeforeRender(d,ve,Ee,we,ne,ze),Ce.transparent===!0&&Ce.side===hi&&Ce.forceSinglePass===!1?(Ce.side=qr,Ce.needsUpdate=!0,d.renderBufferDirect(Ee,ve,we,Ce,ne,ze),Ce.side=cs,Ce.needsUpdate=!0,d.renderBufferDirect(Ee,ve,we,Ce,ne,ze),Ce.side=hi):d.renderBufferDirect(Ee,ve,we,Ce,ne,ze),ne.onAfterRender(d,ve,Ee,we,Ce,ze)}function yt(ne,ve,Ee){ve.isScene!==!0&&(ve=ee);const we=_e.get(ne),Ce=f.state.lights,ze=f.state.shadowsArray,st=Ce.state.version,$e=ce.getParameters(ne,Ce.state,ze,ve,Ee),Xe=ce.getProgramCacheKey($e);let gt=we.programs;we.environment=ne.isMeshStandardMaterial?ve.environment:null,we.fog=ve.fog,we.envMap=(ne.isMeshStandardMaterial?ue:L).get(ne.envMap||we.environment),gt===void 0&&(ne.addEventListener("dispose",He),gt=new Map,we.programs=gt);let dt=gt.get(Xe);if(dt!==void 0){if(we.currentProgram===dt&&we.lightsStateVersion===st)return Vt(ne,$e),dt}else $e.uniforms=ce.getUniforms(ne),ne.onBuild(Ee,$e,d),ne.onBeforeCompile($e,d),dt=ce.acquireProgram($e,Xe),gt.set(Xe,dt),we.uniforms=$e.uniforms;const ct=we.uniforms;(!ne.isShaderMaterial&&!ne.isRawShaderMaterial||ne.clipping===!0)&&(ct.clippingPlanes=W.uniform),Vt(ne,$e),we.needsLights=Zt(ne),we.lightsStateVersion=st,we.needsLights&&(ct.ambientLightColor.value=Ce.state.ambient,ct.lightProbe.value=Ce.state.probe,ct.directionalLights.value=Ce.state.directional,ct.directionalLightShadows.value=Ce.state.directionalShadow,ct.spotLights.value=Ce.state.spot,ct.spotLightShadows.value=Ce.state.spotShadow,ct.rectAreaLights.value=Ce.state.rectArea,ct.ltc_1.value=Ce.state.rectAreaLTC1,ct.ltc_2.value=Ce.state.rectAreaLTC2,ct.pointLights.value=Ce.state.point,ct.pointLightShadows.value=Ce.state.pointShadow,ct.hemisphereLights.value=Ce.state.hemi,ct.directionalShadowMap.value=Ce.state.directionalShadowMap,ct.directionalShadowMatrix.value=Ce.state.directionalShadowMatrix,ct.spotShadowMap.value=Ce.state.spotShadowMap,ct.spotLightMatrix.value=Ce.state.spotLightMatrix,ct.spotLightMap.value=Ce.state.spotLightMap,ct.pointShadowMap.value=Ce.state.pointShadowMap,ct.pointShadowMatrix.value=Ce.state.pointShadowMatrix);const jt=dt.getUniforms(),vn=ay.seqWithValue(jt.seq,ct);return we.currentProgram=dt,we.uniformsList=vn,dt}function Vt(ne,ve){const Ee=_e.get(ne);Ee.outputEncoding=ve.outputEncoding,Ee.instancing=ve.instancing,Ee.skinning=ve.skinning,Ee.morphTargets=ve.morphTargets,Ee.morphNormals=ve.morphNormals,Ee.morphColors=ve.morphColors,Ee.morphTargetsCount=ve.morphTargetsCount,Ee.numClippingPlanes=ve.numClippingPlanes,Ee.numIntersection=ve.numClipIntersection,Ee.vertexAlphas=ve.vertexAlphas,Ee.vertexTangents=ve.vertexTangents,Ee.toneMapping=ve.toneMapping}function Js(ne,ve,Ee,we,Ce){ve.isScene!==!0&&(ve=ee),xe.resetTextureUnits();const ze=ve.fog,st=we.isMeshStandardMaterial?ve.environment:null,$e=w===null?d.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:_l,Xe=(we.isMeshStandardMaterial?ue:L).get(we.envMap||st),gt=we.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,dt=!!we.normalMap&&!!Ee.attributes.tangent,ct=!!Ee.morphAttributes.position,jt=!!Ee.morphAttributes.normal,vn=!!Ee.morphAttributes.color,Hr=we.toneMapped?d.toneMapping:Al,ki=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,yn=ki!==void 0?ki.length:0,bt=_e.get(we),JA=f.state.lights;if(O===!0&&(z===!0||ne!==_)){const Tr=ne===_&&we.id===x;W.setState(we,ne,Tr)}let Ln=!1;we.version===bt.__version?(bt.needsLights&&bt.lightsStateVersion!==JA.state.version||bt.outputEncoding!==$e||Ce.isInstancedMesh&&bt.instancing===!1||!Ce.isInstancedMesh&&bt.instancing===!0||Ce.isSkinnedMesh&&bt.skinning===!1||!Ce.isSkinnedMesh&&bt.skinning===!0||bt.envMap!==Xe||we.fog===!0&&bt.fog!==ze||bt.numClippingPlanes!==void 0&&(bt.numClippingPlanes!==W.numPlanes||bt.numIntersection!==W.numIntersection)||bt.vertexAlphas!==gt||bt.vertexTangents!==dt||bt.morphTargets!==ct||bt.morphNormals!==jt||bt.morphColors!==vn||bt.toneMapping!==Hr||de.isWebGL2===!0&&bt.morphTargetsCount!==yn)&&(Ln=!0):(Ln=!0,bt.__version=we.version);let qs=bt.currentProgram;Ln===!0&&(qs=yt(we,ve,Ce));let mu=!1,Ma=!1,qA=!1;const Ar=qs.getUniforms(),eo=bt.uniforms;if(oe.useProgram(qs.program)&&(mu=!0,Ma=!0,qA=!0),we.id!==x&&(x=we.id,Ma=!0),mu||_!==ne){if(Ar.setValue(X,"projectionMatrix",ne.projectionMatrix),de.logarithmicDepthBuffer&&Ar.setValue(X,"logDepthBufFC",2/(Math.log(ne.far+1)/Math.LN2)),_!==ne&&(_=ne,Ma=!0,qA=!0),we.isShaderMaterial||we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshStandardMaterial||we.envMap){const Tr=Ar.map.cameraPosition;Tr!==void 0&&Tr.setValue(X,j.setFromMatrixPosition(ne.matrixWorld))}(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&Ar.setValue(X,"isOrthographic",ne.isOrthographicCamera===!0),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial||we.isShadowMaterial||Ce.isSkinnedMesh)&&Ar.setValue(X,"viewMatrix",ne.matrixWorldInverse)}if(Ce.isSkinnedMesh){Ar.setOptional(X,Ce,"bindMatrix"),Ar.setOptional(X,Ce,"bindMatrixInverse");const Tr=Ce.skeleton;Tr&&(de.floatVertexTextures?(Tr.boneTexture===null&&Tr.computeBoneTexture(),Ar.setValue(X,"boneTexture",Tr.boneTexture,xe),Ar.setValue(X,"boneTextureSize",Tr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const ec=Ee.morphAttributes;if((ec.position!==void 0||ec.normal!==void 0||ec.color!==void 0&&de.isWebGL2===!0)&&me.update(Ce,Ee,we,qs),(Ma||bt.receiveShadow!==Ce.receiveShadow)&&(bt.receiveShadow=Ce.receiveShadow,Ar.setValue(X,"receiveShadow",Ce.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(eo.envMap.value=Xe,eo.flipEnvMap.value=Xe.isCubeTexture&&Xe.isRenderTargetTexture===!1?-1:1),Ma&&(Ar.setValue(X,"toneMappingExposure",d.toneMappingExposure),bt.needsLights&&Xt(eo,qA),ze&&we.fog===!0&&be.refreshFogUniforms(eo,ze),be.refreshMaterialUniforms(eo,we,Y,P,K),ay.upload(X,bt.uniformsList,eo,xe)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(ay.upload(X,bt.uniformsList,eo,xe),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&Ar.setValue(X,"center",Ce.center),Ar.setValue(X,"modelViewMatrix",Ce.modelViewMatrix),Ar.setValue(X,"normalMatrix",Ce.normalMatrix),Ar.setValue(X,"modelMatrix",Ce.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Tr=we.uniformsGroups;for(let R_=0,IG=Tr.length;R_<IG;R_++)if(de.isWebGL2){const U2=Tr[R_];te.update(U2,qs),te.bind(U2,qs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qs}function Xt(ne,ve){ne.ambientLightColor.needsUpdate=ve,ne.lightProbe.needsUpdate=ve,ne.directionalLights.needsUpdate=ve,ne.directionalLightShadows.needsUpdate=ve,ne.pointLights.needsUpdate=ve,ne.pointLightShadows.needsUpdate=ve,ne.spotLights.needsUpdate=ve,ne.spotLightShadows.needsUpdate=ve,ne.rectAreaLights.needsUpdate=ve,ne.hemisphereLights.needsUpdate=ve}function Zt(ne){return ne.isMeshLambertMaterial||ne.isMeshToonMaterial||ne.isMeshPhongMaterial||ne.isMeshStandardMaterial||ne.isShadowMaterial||ne.isShaderMaterial&&ne.lights===!0}this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(ne,ve,Ee){_e.get(ne.texture).__webglTexture=ve,_e.get(ne.depthTexture).__webglTexture=Ee;const we=_e.get(ne);we.__hasExternalTextures=!0,we.__hasExternalTextures&&(we.__autoAllocateDepthBuffer=Ee===void 0,we.__autoAllocateDepthBuffer||se.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),we.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ne,ve){const Ee=_e.get(ne);Ee.__webglFramebuffer=ve,Ee.__useDefaultFramebuffer=ve===void 0},this.setRenderTarget=function(ne,ve=0,Ee=0){w=ne,m=ve,y=Ee;let we=!0,Ce=null,ze=!1,st=!1;if(ne){const Xe=_e.get(ne);Xe.__useDefaultFramebuffer!==void 0?(oe.bindFramebuffer(36160,null),we=!1):Xe.__webglFramebuffer===void 0?xe.setupRenderTarget(ne):Xe.__hasExternalTextures&&xe.rebindTextures(ne,_e.get(ne.texture).__webglTexture,_e.get(ne.depthTexture).__webglTexture);const gt=ne.texture;(gt.isData3DTexture||gt.isDataArrayTexture||gt.isCompressedArrayTexture)&&(st=!0);const dt=_e.get(ne).__webglFramebuffer;ne.isWebGLCubeRenderTarget?(Ce=dt[ve],ze=!0):de.isWebGL2&&ne.samples>0&&xe.useMultisampledRTT(ne)===!1?Ce=_e.get(ne).__webglMultisampledFramebuffer:Ce=dt,C.copy(ne.viewport),T.copy(ne.scissor),b=ne.scissorTest}else C.copy(v).multiplyScalar(Y).floor(),T.copy(E).multiplyScalar(Y).floor(),b=F;if(oe.bindFramebuffer(36160,Ce)&&de.drawBuffers&&we&&oe.drawBuffers(ne,Ce),oe.viewport(C),oe.scissor(T),oe.setScissorTest(b),ze){const Xe=_e.get(ne.texture);X.framebufferTexture2D(36160,36064,34069+ve,Xe.__webglTexture,Ee)}else if(st){const Xe=_e.get(ne.texture),gt=ve||0;X.framebufferTextureLayer(36160,36064,Xe.__webglTexture,Ee||0,gt)}x=-1},this.readRenderTargetPixels=function(ne,ve,Ee,we,Ce,ze,st){if(!(ne&&ne.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=_e.get(ne).__webglFramebuffer;if(ne.isWebGLCubeRenderTarget&&st!==void 0&&($e=$e[st]),$e){oe.bindFramebuffer(36160,$e);try{const Xe=ne.texture,gt=Xe.format,dt=Xe.type;if(gt!==Lr&&S.convert(gt)!==X.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ct=dt===Qm&&(se.has("EXT_color_buffer_half_float")||de.isWebGL2&&se.has("EXT_color_buffer_float"));if(dt!==Kc&&S.convert(dt)!==X.getParameter(35738)&&!(dt===uA&&(de.isWebGL2||se.has("OES_texture_float")||se.has("WEBGL_color_buffer_float")))&&!ct){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=ne.width-we&&Ee>=0&&Ee<=ne.height-Ce&&X.readPixels(ve,Ee,we,Ce,S.convert(gt),S.convert(dt),ze)}finally{const Xe=w!==null?_e.get(w).__webglFramebuffer:null;oe.bindFramebuffer(36160,Xe)}}},this.copyFramebufferToTexture=function(ne,ve,Ee=0){const we=Math.pow(2,-Ee),Ce=Math.floor(ve.image.width*we),ze=Math.floor(ve.image.height*we);xe.setTexture2D(ve,0),X.copyTexSubImage2D(3553,Ee,0,0,ne.x,ne.y,Ce,ze),oe.unbindTexture()},this.copyTextureToTexture=function(ne,ve,Ee,we=0){const Ce=ve.image.width,ze=ve.image.height,st=S.convert(Ee.format),$e=S.convert(Ee.type);xe.setTexture2D(Ee,0),X.pixelStorei(37440,Ee.flipY),X.pixelStorei(37441,Ee.premultiplyAlpha),X.pixelStorei(3317,Ee.unpackAlignment),ve.isDataTexture?X.texSubImage2D(3553,we,ne.x,ne.y,Ce,ze,st,$e,ve.image.data):ve.isCompressedTexture?X.compressedTexSubImage2D(3553,we,ne.x,ne.y,ve.mipmaps[0].width,ve.mipmaps[0].height,st,ve.mipmaps[0].data):X.texSubImage2D(3553,we,ne.x,ne.y,st,$e,ve.image),we===0&&Ee.generateMipmaps&&X.generateMipmap(3553),oe.unbindTexture()},this.copyTextureToTexture3D=function(ne,ve,Ee,we,Ce=0){if(d.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ze=ne.max.x-ne.min.x+1,st=ne.max.y-ne.min.y+1,$e=ne.max.z-ne.min.z+1,Xe=S.convert(we.format),gt=S.convert(we.type);let dt;if(we.isData3DTexture)xe.setTexture3D(we,0),dt=32879;else if(we.isDataArrayTexture)xe.setTexture2DArray(we,0),dt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(37440,we.flipY),X.pixelStorei(37441,we.premultiplyAlpha),X.pixelStorei(3317,we.unpackAlignment);const ct=X.getParameter(3314),jt=X.getParameter(32878),vn=X.getParameter(3316),Hr=X.getParameter(3315),ki=X.getParameter(32877),yn=Ee.isCompressedTexture?Ee.mipmaps[0]:Ee.image;X.pixelStorei(3314,yn.width),X.pixelStorei(32878,yn.height),X.pixelStorei(3316,ne.min.x),X.pixelStorei(3315,ne.min.y),X.pixelStorei(32877,ne.min.z),Ee.isDataTexture||Ee.isData3DTexture?X.texSubImage3D(dt,Ce,ve.x,ve.y,ve.z,ze,st,$e,Xe,gt,yn.data):Ee.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(dt,Ce,ve.x,ve.y,ve.z,ze,st,$e,Xe,yn.data)):X.texSubImage3D(dt,Ce,ve.x,ve.y,ve.z,ze,st,$e,Xe,gt,yn),X.pixelStorei(3314,ct),X.pixelStorei(32878,jt),X.pixelStorei(3316,vn),X.pixelStorei(3315,Hr),X.pixelStorei(32877,ki),Ce===0&&we.generateMipmaps&&X.generateMipmap(dt),oe.unbindTexture()},this.initTexture=function(ne){ne.isCubeTexture?xe.setTextureCube(ne,0):ne.isData3DTexture?xe.setTexture3D(ne,0):ne.isDataArrayTexture||ne.isCompressedArrayTexture?xe.setTexture2DArray(ne,0):xe.setTexture2D(ne,0),oe.unbindTexture()},this.resetState=function(){m=0,y=0,w=null,oe.reset(),V.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class rne extends gg{}rne.prototype.isWebGL1Renderer=!0;class vw extends It{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class ine{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=iC,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ii=new Z;class nT{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new lt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nT(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const vU=new Z,yU=new Qt,wU=new Qt,sne=new Z,xU=new We;class cl extends Cn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new We,this.bindMatrixInverse=new We}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Qt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;yU.fromBufferAttribute(i.attributes.skinIndex,e),wU.fromBufferAttribute(i.attributes.skinWeight,e),vU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=wU.getComponent(s);if(o!==0){const a=yU.getComponent(s);xU.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(sne.copy(vU).applyMatrix4(xU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class yw extends It{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zH extends Hn{constructor(e=null,t=1,r=1,i,s,o,a,l,A=$n,c=$n,u,f){super(null,o,a,l,A,c,i,s,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _U=new We,one=new We;class XA{constructor(e=[],t=[]){this.uuid=Bo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new We)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new We;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:one;_U.multiplyMatrices(a,t[s]),_U.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new XA(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=MH(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new zH(t,e,e,Lr,uA);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new yw),this.bones.push(o),this.boneInverses.push(new We().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class ww extends lt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bU=new We,BU=new We,T0=[],ane=new We,zd=new Cn;class Hx extends Cn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ww(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,ane)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(zd.geometry=this.geometry,zd.material=this.material,zd.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,bU),BU.multiplyMatrices(r,bU),zd.matrixWorld=BU,zd.raycast(e,T0);for(let o=0,a=T0.length;o<a;o++){const l=T0[o];l.instanceId=s,l.object=this,t.push(l)}T0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ww(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Sl extends Li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EU=new Z,CU=new Z,MU=new We,cb=new pg,I0=new su;class nd extends It{constructor(e=new Wt,t=new Sl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)EU.fromBufferAttribute(t,i-1),CU.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=EU.distanceTo(CU);e.setAttribute("lineDistance",new ln(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),I0.copy(r.boundingSphere),I0.applyMatrix4(i),I0.radius+=s,e.ray.intersectsSphere(I0)===!1)return;MU.copy(i).invert(),cb.copy(e.ray).applyMatrix4(MU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=new Z,c=new Z,u=new Z,f=new Z,h=this.isLineSegments?2:1,p=r.index,g=r.attributes.position;if(p!==null){const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let w=m,x=y-1;w<x;w+=h){const _=p.getX(w),C=p.getX(w+1);if(A.fromBufferAttribute(g,_),c.fromBufferAttribute(g,C),cb.distanceSqToSegment(A,c,f,u)>l)continue;f.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let w=m,x=y-1;w<x;w+=h){if(A.fromBufferAttribute(g,w),c.fromBufferAttribute(g,w+1),cb.distanceSqToSegment(A,c,f,u)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||t.push({distance:C,point:u.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const SU=new Z,TU=new Z;class vg extends nd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)SU.fromBufferAttribute(t,i),TU.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+SU.distanceTo(TU);e.setAttribute("lineDistance",new ln(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lne extends nd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class GH extends Li{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const IU=new We,lC=new pg,R0=new su,F0=new Z;class Ane extends It{constructor(e=new Wt,t=new GH){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),R0.copy(r.boundingSphere),R0.applyMatrix4(i),R0.radius+=s,e.ray.intersectsSphere(R0)===!1)return;IU.copy(i).invert(),lC.copy(e.ray).applyMatrix4(IU);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=r.index,u=r.attributes.position;if(A!==null){const f=Math.max(0,o.start),h=Math.min(A.count,o.start+o.count);for(let p=f,d=h;p<d;p++){const g=A.getX(p);F0.fromBufferAttribute(u,g),RU(F0,g,l,i,e,t,this)}}else{const f=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);for(let p=f,d=h;p<d;p++)F0.fromBufferAttribute(u,p),RU(F0,p,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function RU(n,e,t,r,i,s,o){const a=lC.distanceSqToPoint(n);if(a<t){const l=new Z;lC.closestPointToPoint(n,l),l.applyMatrix4(r);const A=i.ray.origin.distanceTo(l);if(A<i.near||A>i.far)return;s.push({distance:A,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class cne{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,A;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),A=r[i]-o,A<0)a=i+1;else if(A>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],f=r[i+1]-c,h=(o-c)/f;return(i+h)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ye:new Z);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Z,i=[],s=[],o=[],a=new Z,l=new We;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new Z)}s[0]=new Z,o[0]=new Z;let A=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=A&&(A=c,r.set(1,0,0)),u<=A&&(A=u,r.set(0,1,0)),f<=A&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(dr(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,p))}o[h].crossVectors(i[h],s[h])}if(t===!0){let h=Math.acos(dr(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class zx extends Wt{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const A=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],f=[],h=[];let p=0;const d=[],g=r/2;let m=0;y(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new ln(u,3)),this.setAttribute("normal",new ln(f,3)),this.setAttribute("uv",new ln(h,2));function y(){const x=new Z,_=new Z;let C=0;const T=(t-e)/r;for(let b=0;b<=s;b++){const M=[],P=b/s,Y=P*(t-e)+e;for(let H=0;H<=i;H++){const I=H/i,v=I*l+a,E=Math.sin(v),F=Math.cos(v);_.x=Y*E,_.y=-P*r+g,_.z=Y*F,u.push(_.x,_.y,_.z),x.set(E,T,F).normalize(),f.push(x.x,x.y,x.z),h.push(I,1-P),M.push(p++)}d.push(M)}for(let b=0;b<i;b++)for(let M=0;M<s;M++){const P=d[M][b],Y=d[M+1][b],H=d[M+1][b+1],I=d[M][b+1];c.push(P,Y,I),c.push(Y,H,I),C+=6}A.addGroup(m,C,0),m+=C}function w(x){const _=p,C=new Ye,T=new Z;let b=0;const M=x===!0?e:t,P=x===!0?1:-1;for(let H=1;H<=i;H++)u.push(0,g*P,0),f.push(0,P,0),h.push(.5,.5),p++;const Y=p;for(let H=0;H<=i;H++){const v=H/i*l+a,E=Math.cos(v),F=Math.sin(v);T.x=M*F,T.y=g*P,T.z=M*E,u.push(T.x,T.y,T.z),f.push(0,P,0),C.x=E*.5+.5,C.y=F*.5*P+.5,h.push(C.x,C.y),p++}for(let H=0;H<i;H++){const I=_+H,v=Y+H;x===!0?c.push(v,v+1,I):c.push(v+1,v,I),b+=3}A.addGroup(m,b,x===!0?1:2),m+=b}}static fromJSON(e){return new zx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rT extends Wt{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let A=0;const c=[],u=new Z,f=new Z,h=[],p=[],d=[],g=[];for(let m=0;m<=r;m++){const y=[],w=m/r;let x=0;m==0&&o==0?x=.5/t:m==r&&l==Math.PI&&(x=-.5/t);for(let _=0;_<=t;_++){const C=_/t;u.x=-e*Math.cos(i+C*s)*Math.sin(o+w*a),u.y=e*Math.cos(o+w*a),u.z=e*Math.sin(i+C*s)*Math.sin(o+w*a),p.push(u.x,u.y,u.z),f.copy(u).normalize(),d.push(f.x,f.y,f.z),g.push(C+x,1-w),y.push(A++)}c.push(y)}for(let m=0;m<r;m++)for(let y=0;y<t;y++){const w=c[m][y+1],x=c[m][y],_=c[m+1][y],C=c[m+1][y+1];(m!==0||o>0)&&h.push(w,x,C),(m!==r-1||l<Math.PI)&&h.push(x,_,C)}this.setIndex(h),this.setAttribute("position",new ln(p,3)),this.setAttribute("normal",new ln(d,3)),this.setAttribute("uv",new ln(g,2))}static fromJSON(e){return new rT(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qh extends Li{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qh,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class au extends Qh{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ke(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ub extends Li{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ke(16777215),this.specular=new ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qh,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ox,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class une extends Li{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qh,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class fne extends Li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qh,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ox,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Ql(n,e,t){return VH(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function U0(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function VH(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function hne(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function FU(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function jH(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}class yg{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class dne extends yg{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vf,endingEnd:Vf}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case jf:s=e,a=2*t-r;break;case mw:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case jf:o=e,l=2*r-t;break;case mw:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const A=(r-t)*.5,c=this.valueSize;this._weightPrev=A/(t-a),this._weightNext=A/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-t)/(i-t),d=p*p,g=d*p,m=-f*g+2*f*d-f*p,y=(1+f)*g+(-1.5-2*f)*d+(-.5+f)*p+1,w=(-1-h)*g+(1.5+h)*d+.5*p,x=h*g-h*d;for(let _=0;_!==a;++_)s[_]=m*o[c+_]+y*o[A+_]+w*o[l+_]+x*o[u+_];return s}}class WH extends yg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=(r-t)/(i-t),u=1-c;for(let f=0;f!==a;++f)s[f]=o[A+f]*u+o[l+f]*c;return s}}class pne extends yg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class xa{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=U0(t,this.TimeBufferType),this.values=U0(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:U0(e.times,Array),values:U0(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new pne(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new WH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new dne(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Nh:t=this.InterpolantFactoryMethodDiscrete;break;case Yc:t=this.InterpolantFactoryMethodLinear;break;case N1:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nh;case this.InterpolantFactoryMethodLinear:return Yc;case this.InterpolantFactoryMethodSmooth:return N1}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ql(r,s,o),this.values=Ql(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&VH(i))for(let a=0,l=i.length;a!==l;++a){const A=i[a];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,A),e=!1;break}}return e}optimize(){const e=Ql(this.times),t=Ql(this.values),r=this.getValueSize(),i=this.getInterpolation()===N1,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const A=e[a],c=e[a+1];if(A!==c&&(a!==1||A!==e[0]))if(i)l=!0;else{const u=a*r,f=u-r,h=u+r;for(let p=0;p!==r;++p){const d=t[u+p];if(d!==t[f+p]||d!==t[h+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*r,f=o*r;for(let h=0;h!==r;++h)t[f+h]=t[u+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,A=0;A!==r;++A)t[l+A]=t[a+A];++o}return o!==e.length?(this.times=Ql(e,0,o),this.values=Ql(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Ql(this.times,0),t=Ql(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}xa.prototype.TimeBufferType=Float32Array;xa.prototype.ValueBufferType=Float32Array;xa.prototype.DefaultInterpolation=Yc;class rd extends xa{}rd.prototype.ValueTypeName="bool";rd.prototype.ValueBufferType=Array;rd.prototype.DefaultInterpolation=Nh;rd.prototype.InterpolantFactoryMethodLinear=void 0;rd.prototype.InterpolantFactoryMethodSmooth=void 0;class KH extends xa{}KH.prototype.ValueTypeName="color";class Hh extends xa{}Hh.prototype.ValueTypeName="number";class mne extends yg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let A=e*a;for(let c=A+a;A!==c;A+=4)rt.slerpFlat(s,0,o,A-a,o,A,l);return s}}class ma extends xa{InterpolantFactoryMethodLinear(e){return new mne(this.times,this.values,this.getValueSize(),e)}}ma.prototype.ValueTypeName="quaternion";ma.prototype.DefaultInterpolation=Yc;ma.prototype.InterpolantFactoryMethodSmooth=void 0;class id extends xa{}id.prototype.ValueTypeName="string";id.prototype.ValueBufferType=Array;id.prototype.DefaultInterpolation=Nh;id.prototype.InterpolantFactoryMethodLinear=void 0;id.prototype.InterpolantFactoryMethodSmooth=void 0;class NA extends xa{}NA.prototype.ValueTypeName="vector";class $c{constructor(e,t=-1,r,i=$S){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Bo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(vne(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(xa.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],A=[];l.push((a+s-1)%s,a,(a+1)%s),A.push(0,1,0);const c=hne(l);l=FU(l,1,c),A=FU(A,1,c),!i&&l[0]===0&&(l.push(s),A.push(A[0])),o.push(new Hh(".morphTargetInfluences["+t[a].name+"]",l,A).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const A=e[a],c=A.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(A)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,f,h,p,d){if(h.length!==0){const g=[],m=[];jH(h,g,m,p),g.length!==0&&d.push(new u(f,g,m))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const A=e.hierarchy||[];for(let u=0;u<A.length;u++){const f=A[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let d=0;d<f[p].morphTargets.length;d++)h[f[p].morphTargets[d]]=-1;for(const d in h){const g=[],m=[];for(let y=0;y!==f[p].morphTargets.length;++y){const w=f[p];g.push(w.time),m.push(w.morphTarget===d?1:0)}i.push(new Hh(".morphTargetInfluence["+d+"]",g,m))}l=h.length*o}else{const h=".bones["+t[u].name+"]";r(NA,h+".position",f,"pos",i),r(ma,h+".quaternion",f,"rot",i),r(NA,h+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gne(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hh;case"vector":case"vector2":case"vector3":case"vector4":return NA;case"color":return KH;case"quaternion":return ma;case"bool":case"boolean":return rd;case"string":return id}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function vne(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=gne(n.type);if(n.times===void 0){const t=[],r=[];jH(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const zh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class YH{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const A=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,u){return A.push(c,u),this},this.removeHandler=function(c){const u=A.indexOf(c);return u!==-1&&A.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=A.length;u<f;u+=2){const h=A[u],p=A[u+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const yne=new YH;class sd{constructor(e){this.manager=e!==void 0?e:yne,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ua={};class wne extends Error{constructor(e,t){super(e),this.response=t}}class iT extends sd{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=zh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ua[e]!==void 0){Ua[e].push({onLoad:t,onProgress:r,onError:i});return}Ua[e]=[],Ua[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(A=>{if(A.status===200||A.status===0){if(A.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||A.body===void 0||A.body.getReader===void 0)return A;const c=Ua[e],u=A.body.getReader(),f=A.headers.get("Content-Length")||A.headers.get("X-File-Size"),h=f?parseInt(f):0,p=h!==0;let d=0;const g=new ReadableStream({start(m){y();function y(){u.read().then(({done:w,value:x})=>{if(w)m.close();else{d+=x.byteLength;const _=new ProgressEvent("progress",{lengthComputable:p,loaded:d,total:h});for(let C=0,T=c.length;C<T;C++){const b=c[C];b.onProgress&&b.onProgress(_)}m.enqueue(x),y()}})}}});return new Response(g)}else throw new wne(`fetch for "${A.url}" responded with ${A.status}: ${A.statusText}`,A)}).then(A=>{switch(l){case"arraybuffer":return A.arrayBuffer();case"blob":return A.blob();case"document":return A.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return A.json();default:if(a===void 0)return A.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),f=u&&u[1]?u[1].toLowerCase():void 0,h=new TextDecoder(f);return A.arrayBuffer().then(p=>h.decode(p))}}}).then(A=>{zh.add(e,A);const c=Ua[e];delete Ua[e];for(let u=0,f=c.length;u<f;u++){const h=c[u];h.onLoad&&h.onLoad(A)}}).catch(A=>{const c=Ua[e];if(c===void 0)throw this.manager.itemError(e),A;delete Ua[e];for(let u=0,f=c.length;u<f;u++){const h=c[u];h.onError&&h.onError(A)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class $H extends sd{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=zh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gm("img");function l(){c(),zh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function A(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",A,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",A,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class lu extends sd{constructor(e){super(e)}load(e,t,r,i){const s=new Hn,o=new $H(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Gx extends It{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const fb=new We,UU=new Z,LU=new Z;class sT{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new We,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new eT,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new Qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;UU.setFromMatrixPosition(e.matrixWorld),t.position.copy(UU),LU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LU),t.updateMatrixWorld(),fb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fb),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(fb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xne extends sT{constructor(){super(new Br(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=zm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class XH extends Gx{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xne}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const PU=new We,Gd=new Z,hb=new Z;class _ne extends sT{constructor(){super(new Br(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new Qt(2,1,1,1),new Qt(0,1,1,1),new Qt(3,1,1,1),new Qt(1,1,1,1),new Qt(3,0,1,1),new Qt(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Gd.setFromMatrixPosition(e.matrixWorld),r.position.copy(Gd),hb.copy(r.position),hb.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(hb),r.updateMatrixWorld(),i.makeTranslation(-Gd.x,-Gd.y,-Gd.z),PU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PU)}}class AC extends Gx{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new _ne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class bne extends sT{constructor(){super(new ed(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class oT extends Gx{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(It.DEFAULT_UP),this.updateMatrix(),this.target=new It,this.shadow=new bne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ZH extends Gx{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class xw{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Bne extends sd{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=zh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){zh.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class JH{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=DU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=DU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function DU(){return(typeof performance>"u"?Date:performance).now()}class Ene{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,A=t+t;l!==A;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){rt.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;rt.multiplyQuaternionsFlat(e,o,e,t,e,r),rt.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const aT="\\[\\]\\.:\\/",Cne=new RegExp("["+aT+"]","g"),lT="[^"+aT+"]",Mne="[^"+aT.replace("\\.","")+"]",Sne=/((?:WC+[\/:])*)/.source.replace("WC",lT),Tne=/(WCOD+)?/.source.replace("WCOD",Mne),Ine=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lT),Rne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lT),Fne=new RegExp("^"+Sne+Tne+Ine+Rne+"$"),Une=["material","materials","bones","map"];class Lne{constructor(e,t,r){const i=r||_t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class _t{constructor(e,t,r){this.path=t,this.parsedPath=r||_t.parseTrackName(t),this.node=_t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new _t.Composite(e,t,r):new _t(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cne,"")}static parseTrackName(e){const t=Fne.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Une.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=_t.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let A=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===A){A=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(A!==void 0){if(e[A]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[A]}}const o=e[i];if(o===void 0){const A=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+A+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_t.Composite=Lne;_t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_t.prototype.GetterByBindingType=[_t.prototype._getValue_direct,_t.prototype._getValue_array,_t.prototype._getValue_arrayElement,_t.prototype._getValue_toArray];_t.prototype.SetterByBindingTypeAndVersioning=[[_t.prototype._setValue_direct,_t.prototype._setValue_direct_setNeedsUpdate,_t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_t.prototype._setValue_array,_t.prototype._setValue_array_setNeedsUpdate,_t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_t.prototype._setValue_arrayElement,_t.prototype._setValue_arrayElement_setNeedsUpdate,_t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_t.prototype._setValue_fromArray,_t.prototype._setValue_fromArray_setNeedsUpdate,_t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Pne{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Vf,endingEnd:Vf};for(let A=0;A!==o;++A){const c=s[A].createInterpolant(null);a[A]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=NX,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,A=a.sampleValues;return l[0]=s,l[1]=s+r,A[0]=e/o,A[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,A=this._propertyBindings;switch(this.blendMode){case QX:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulateAdditive(a);break;case $S:default:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===kX;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===OX){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const A=e<0;this._setEndings(A,!A,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=jf,i.endingEnd=jf):(e?i.endingStart=this.zeroSlopeAtStart?jf:Vf:i.endingStart=mw,t?i.endingEnd=this.zeroSlopeAtEnd?jf:Vf:i.endingEnd=mw)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const Dne=new Float32Array(1);class One extends $A{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,A=this._bindingsByRootAndName;let c=A[l];c===void 0&&(c={},A[l]=c);for(let u=0;u!==s;++u){const f=i[u],h=f.name;let p=c[h];if(p!==void 0)++p.referenceCount,o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const d=t&&t._propertyBindings[u].binding.parsedPath;p=new Ene(_t.create(r,h,d),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),o[u]=p}a[u].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,A=l[l.length-1],c=e._byClipCacheIndex;A._byClipCacheIndex=c,l[c]=A,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],A=e._cacheIndex;l._cacheIndex=A,t[A]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new WH(new Float32Array(2),new Float32Array(2),1,Dne),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?$c.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let A=null;if(r===void 0&&(o!==null?r=o.blendMode:r=$S),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===r)return u;A=l.knownActions[0],o===null&&(o=A._clip)}if(o===null)return null;const c=new Pne(this,o,t,r);return this._bindAction(c,A),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?$c.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let A=0;A!==r;++A)t[A]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let A=0;A!==l;++A)a[A].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const A=o[a];this._deactivateAction(A);const c=A._cacheIndex,u=t[t.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(A)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class OU{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class qH{constructor(e,t,r=0,i=1/0){this.ray=new pg(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new JS,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return cC(e,this,r,t),r.sort(NU),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)cC(e[i],this,r,t);return r.sort(NU),r}}function NU(n,e){return n.distance-e.distance}function cC(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)cC(i[s],e,t,!0)}}class kU{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(dr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const QU=new Z,L0=new Z;class ul{constructor(e=new Z,t=new Z){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){QU.subVectors(e,this.start),L0.subVectors(this.end,this.start);const r=L0.dot(L0);let s=L0.dot(QU)/r;return t&&(s=dr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class Nne extends vg{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Wt;i.setAttribute("position",new ln(t,3)),i.setAttribute("color",new ln(r,3));const s=new Sl({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new ke,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jc);const HU={type:"change"},db={type:"start"},zU={type:"end"};class kne extends $A{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN},this.touches={ONE:xu.ROTATE,TWO:xu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(S){S.addEventListener("keydown",Be),this._domElementKeyEvents=S},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(HU),r.update(),s=i.NONE},this.update=function(){const S=new Z,V=new rt().setFromUnitVectors(e.up,new Z(0,1,0)),te=V.clone().invert(),le=new Z,ie=new rt,Ie=2*Math.PI;return function(){const Le=r.object.position;S.copy(Le).sub(r.target),S.applyQuaternion(V),a.setFromVector3(S),r.autoRotate&&s===i.NONE&&M(T()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let He=r.minAzimuthAngle,De=r.maxAzimuthAngle;return isFinite(He)&&isFinite(De)&&(He<-Math.PI?He+=Ie:He>Math.PI&&(He-=Ie),De<-Math.PI?De+=Ie:De>Math.PI&&(De-=Ie),He<=De?a.theta=Math.max(He,Math.min(De,a.theta)):a.theta=a.theta>(He+De)/2?Math.max(He,a.theta):Math.min(De,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=A,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),S.setFromSpherical(a),S.applyQuaternion(te),Le.copy(r.target).add(S),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),A=1,u||le.distanceToSquared(r.object.position)>o||8*(1-ie.dot(r.object.quaternion))>o?(r.dispatchEvent(HU),le.copy(r.object.position),ie.copy(r.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",re),r.domElement.removeEventListener("pointerdown",L),r.domElement.removeEventListener("pointercancel",q),r.domElement.removeEventListener("wheel",be),r.domElement.removeEventListener("pointermove",ue),r.domElement.removeEventListener("pointerup",Ae),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Be)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new kU,l=new kU;let A=1;const c=new Z;let u=!1;const f=new Ye,h=new Ye,p=new Ye,d=new Ye,g=new Ye,m=new Ye,y=new Ye,w=new Ye,x=new Ye,_=[],C={};function T(){return 2*Math.PI/60/60*r.autoRotateSpeed}function b(){return Math.pow(.95,r.zoomSpeed)}function M(S){l.theta-=S}function P(S){l.phi-=S}const Y=function(){const S=new Z;return function(te,le){S.setFromMatrixColumn(le,0),S.multiplyScalar(-te),c.add(S)}}(),H=function(){const S=new Z;return function(te,le){r.screenSpacePanning===!0?S.setFromMatrixColumn(le,1):(S.setFromMatrixColumn(le,0),S.crossVectors(r.object.up,S)),S.multiplyScalar(te),c.add(S)}}(),I=function(){const S=new Z;return function(te,le){const ie=r.domElement;if(r.object.isPerspectiveCamera){const Ie=r.object.position;S.copy(Ie).sub(r.target);let Te=S.length();Te*=Math.tan(r.object.fov/2*Math.PI/180),Y(2*te*Te/ie.clientHeight,r.object.matrix),H(2*le*Te/ie.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(Y(te*(r.object.right-r.object.left)/r.object.zoom/ie.clientWidth,r.object.matrix),H(le*(r.object.top-r.object.bottom)/r.object.zoom/ie.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function v(S){r.object.isPerspectiveCamera?A/=S:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*S)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function E(S){r.object.isPerspectiveCamera?A*=S:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/S)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(S){f.set(S.clientX,S.clientY)}function D(S){y.set(S.clientX,S.clientY)}function O(S){d.set(S.clientX,S.clientY)}function z(S){h.set(S.clientX,S.clientY),p.subVectors(h,f).multiplyScalar(r.rotateSpeed);const V=r.domElement;M(2*Math.PI*p.x/V.clientHeight),P(2*Math.PI*p.y/V.clientHeight),f.copy(h),r.update()}function K(S){w.set(S.clientX,S.clientY),x.subVectors(w,y),x.y>0?v(b()):x.y<0&&E(b()),y.copy(w),r.update()}function Q(S){g.set(S.clientX,S.clientY),m.subVectors(g,d).multiplyScalar(r.panSpeed),I(m.x,m.y),d.copy(g),r.update()}function B(S){S.deltaY<0?E(b()):S.deltaY>0&&v(b()),r.update()}function j(S){let V=!1;switch(S.code){case r.keys.UP:S.ctrlKey||S.metaKey||S.shiftKey?P(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):I(0,r.keyPanSpeed),V=!0;break;case r.keys.BOTTOM:S.ctrlKey||S.metaKey||S.shiftKey?P(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):I(0,-r.keyPanSpeed),V=!0;break;case r.keys.LEFT:S.ctrlKey||S.metaKey||S.shiftKey?M(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):I(r.keyPanSpeed,0),V=!0;break;case r.keys.RIGHT:S.ctrlKey||S.metaKey||S.shiftKey?M(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):I(-r.keyPanSpeed,0),V=!0;break}V&&(S.preventDefault(),r.update())}function ee(){if(_.length===1)f.set(_[0].pageX,_[0].pageY);else{const S=.5*(_[0].pageX+_[1].pageX),V=.5*(_[0].pageY+_[1].pageY);f.set(S,V)}}function U(){if(_.length===1)d.set(_[0].pageX,_[0].pageY);else{const S=.5*(_[0].pageX+_[1].pageX),V=.5*(_[0].pageY+_[1].pageY);d.set(S,V)}}function X(){const S=_[0].pageX-_[1].pageX,V=_[0].pageY-_[1].pageY,te=Math.sqrt(S*S+V*V);y.set(0,te)}function ae(){r.enableZoom&&X(),r.enablePan&&U()}function se(){r.enableZoom&&X(),r.enableRotate&&ee()}function de(S){if(_.length==1)h.set(S.pageX,S.pageY);else{const te=R(S),le=.5*(S.pageX+te.x),ie=.5*(S.pageY+te.y);h.set(le,ie)}p.subVectors(h,f).multiplyScalar(r.rotateSpeed);const V=r.domElement;M(2*Math.PI*p.x/V.clientHeight),P(2*Math.PI*p.y/V.clientHeight),f.copy(h)}function oe(S){if(_.length===1)g.set(S.pageX,S.pageY);else{const V=R(S),te=.5*(S.pageX+V.x),le=.5*(S.pageY+V.y);g.set(te,le)}m.subVectors(g,d).multiplyScalar(r.panSpeed),I(m.x,m.y),d.copy(g)}function pe(S){const V=R(S),te=S.pageX-V.x,le=S.pageY-V.y,ie=Math.sqrt(te*te+le*le);w.set(0,ie),x.set(0,Math.pow(w.y/y.y,r.zoomSpeed)),v(x.y),y.copy(w)}function _e(S){r.enableZoom&&pe(S),r.enablePan&&oe(S)}function xe(S){r.enableZoom&&pe(S),r.enableRotate&&de(S)}function L(S){r.enabled!==!1&&(_.length===0&&(r.domElement.setPointerCapture(S.pointerId),r.domElement.addEventListener("pointermove",ue),r.domElement.addEventListener("pointerup",Ae)),he(S),S.pointerType==="touch"?k(S):J(S))}function ue(S){r.enabled!==!1&&(S.pointerType==="touch"?W(S):ce(S))}function Ae(S){me(S),_.length===0&&(r.domElement.releasePointerCapture(S.pointerId),r.domElement.removeEventListener("pointermove",ue),r.domElement.removeEventListener("pointerup",Ae)),r.dispatchEvent(zU),s=i.NONE}function q(S){me(S)}function J(S){let V;switch(S.button){case 0:V=r.mouseButtons.LEFT;break;case 1:V=r.mouseButtons.MIDDLE;break;case 2:V=r.mouseButtons.RIGHT;break;default:V=-1}switch(V){case wu.DOLLY:if(r.enableZoom===!1)return;D(S),s=i.DOLLY;break;case wu.ROTATE:if(S.ctrlKey||S.metaKey||S.shiftKey){if(r.enablePan===!1)return;O(S),s=i.PAN}else{if(r.enableRotate===!1)return;F(S),s=i.ROTATE}break;case wu.PAN:if(S.ctrlKey||S.metaKey||S.shiftKey){if(r.enableRotate===!1)return;F(S),s=i.ROTATE}else{if(r.enablePan===!1)return;O(S),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(db)}function ce(S){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;z(S);break;case i.DOLLY:if(r.enableZoom===!1)return;K(S);break;case i.PAN:if(r.enablePan===!1)return;Q(S);break}}function be(S){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(S.preventDefault(),r.dispatchEvent(db),B(S),r.dispatchEvent(zU))}function Be(S){r.enabled===!1||r.enablePan===!1||j(S)}function k(S){switch(G(S),_.length){case 1:switch(r.touches.ONE){case xu.ROTATE:if(r.enableRotate===!1)return;ee(),s=i.TOUCH_ROTATE;break;case xu.PAN:if(r.enablePan===!1)return;U(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case xu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ae(),s=i.TOUCH_DOLLY_PAN;break;case xu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;se(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(db)}function W(S){switch(G(S),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;de(S),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;oe(S),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;_e(S),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;xe(S),r.update();break;default:s=i.NONE}}function re(S){r.enabled!==!1&&S.preventDefault()}function he(S){_.push(S)}function me(S){delete C[S.pointerId];for(let V=0;V<_.length;V++)if(_[V].pointerId==S.pointerId){_.splice(V,1);return}}function G(S){let V=C[S.pointerId];V===void 0&&(V=new Ye,C[S.pointerId]=V),V.set(S.pageX,S.pageY)}function R(S){const V=S.pointerId===_[0].pointerId?_[1]:_[0];return C[V.pointerId]}r.domElement.addEventListener("contextmenu",re),r.domElement.addEventListener("pointerdown",L),r.domElement.addEventListener("pointercancel",q),r.domElement.addEventListener("wheel",be,{passive:!1}),this.update()}}function e5(n){let e,t,r,i=0;for(let a=0;a<n.length;++a){const l=n[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}const s=new e(i);let o=0;for(let a=0;a<n.length;++a)s.set(n[a].array,o),o+=n[a].array.length;return new lt(s,t,r)}function GU(n,e){if(e===HX)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===rC||e===CH){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===rC)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class t5 extends sd{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Vne(t)}),this.register(function(t){return new Zne(t)}),this.register(function(t){return new Jne(t)}),this.register(function(t){return new Wne(t)}),this.register(function(t){return new Kne(t)}),this.register(function(t){return new Yne(t)}),this.register(function(t){return new $ne(t)}),this.register(function(t){return new Gne(t)}),this.register(function(t){return new Xne(t)}),this.register(function(t){return new jne(t)}),this.register(function(t){return new Hne(t)}),this.register(function(t){return new qne(t)}),this.register(function(t){return new ere(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=xw.extractUrlBase(e),this.manager.itemStart(e);const a=function(A){i?i(A):console.error(A),s.manager.itemError(e),s.manager.itemEnd(e)},l=new iT(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(A){try{s.parse(A,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===n5){try{o[kt.KHR_BINARY_GLTF]=new tre(e)}catch(u){i&&i(u);return}s=JSON.parse(o[kt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new dre(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](A);a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],f=s.extensionsRequired||[];switch(u){case kt.KHR_MATERIALS_UNLIT:o[u]=new zne;break;case kt.KHR_DRACO_MESH_COMPRESSION:o[u]=new nre(s,this.dracoLoader);break;case kt.KHR_TEXTURE_TRANSFORM:o[u]=new rre;break;case kt.KHR_MESH_QUANTIZATION:o[u]=new ire;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}A.setExtensions(o),A.setPlugins(a),A.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function Qne(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const kt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Hne{constructor(e){this.parser=e,this.name=kt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let A;const c=new ke(16777215);l.color!==void 0&&c.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":A=new oT(c),A.target.position.set(0,0,-1),A.add(A.target);break;case"point":A=new AC(c),A.distance=u;break;case"spot":A=new XH(c),A.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,A.angle=l.spot.outerConeAngle,A.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,A.target.position.set(0,0,-1),A.add(A.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return A.position.set(0,0,0),A.decay=2,Jl(A,l),l.intensity!==void 0&&(A.intensity=l.intensity),A.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(A),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}let zne=class{constructor(){this.name=kt.KHR_MATERIALS_UNLIT}getMaterialType(){return Mi}extendParams(e,t,r){const i=[];e.color=new ke(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,wt))}return Promise.all(i)}};class Gne{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}let Vne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ye(a,a)}return Promise.all(s)}},jne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}};class Wne{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,wt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}let Kne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},Yne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new ke(a[0],a[1],a[2]),Promise.all(s)}},$ne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},Xne=class{constructor(e){this.parser=e,this.name=kt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:au}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new ke(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,wt)),Promise.all(s)}};class Zne{constructor(e){this.parser=e,this.name=kt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Jne{constructor(e){this.parser=e,this.name=kt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const A=r.options.manager.getHandler(a.uri);A!==null&&(l=A)}return this.detectSupport().then(function(A){if(A)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class qne{constructor(e){this.name=kt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,A=i.byteLength||0,c=i.count,u=i.byteStride,f=new Uint8Array(a,l,A);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,u,f,i.mode,i.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(c*u);return o.decodeGltfBuffer(new Uint8Array(h),c,u,f,i.mode,i.filter),h})})}else return null}}class ere{constructor(e){this.name=kt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const A of i.primitives)if(A.mode!==Bs.TRIANGLES&&A.mode!==Bs.TRIANGLE_STRIP&&A.mode!==Bs.TRIANGLE_FAN&&A.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const A in o)a.push(this.parser.getDependency("accessor",o[A]).then(c=>(l[A]=c,l[A])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(A=>{const c=A.pop(),u=c.isGroup?c.children:[c],f=A[0].count,h=[];for(const p of u){const d=new We,g=new Z,m=new rt,y=new Z(1,1,1),w=new Hx(p.geometry,p.material,f);for(let x=0;x<f;x++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,x),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,x),l.SCALE&&y.fromBufferAttribute(l.SCALE,x),w.setMatrixAt(x,d.compose(g,m,y));for(const x in l)x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&p.geometry.setAttribute(x,l[x]);It.prototype.copy.call(w,p),w.frustumCulled=!1,this.parser.assignFinalMaterial(w),h.push(w)}return c.isGroup?(c.clear(),c.add(...h),c):h[0]}))}}const n5="glTF",Vd=12,VU={JSON:1313821514,BIN:5130562};class tre{constructor(e){this.name=kt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Vd),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==n5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Vd,s=new DataView(e,Vd);let o=0;for(;o<i;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===VU.JSON){const A=new Uint8Array(e,Vd+o,a);this.content=r.decode(A)}else if(l===VU.BIN){const A=Vd+o;this.body=e.slice(A,A+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class nre{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},A={};for(const c in o){const u=uC[c]||c.toLowerCase();a[u]=o[c]}for(const c in e.attributes){const u=uC[c]||c.toLowerCase();if(o[c]!==void 0){const f=r.accessors[e.attributes[c]],h=uh[f.componentType];A[u]=h.name,l[u]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(u){i.decodeDracoFile(c,function(f){for(const h in f.attributes){const p=f.attributes[h],d=l[h];d!==void 0&&(p.normalized=d)}u(f)},a,A)})})}}class rre{constructor(){this.name=kt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ire{constructor(){this.name=kt.KHR_MESH_QUANTIZATION}}class r5 extends yg{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,A=a*3,c=i-t,u=(r-t)/c,f=u*u,h=f*u,p=e*A,d=p-A,g=-2*h+3*f,m=h-f,y=1-g,w=m-f+u;for(let x=0;x!==a;x++){const _=o[d+x+a],C=o[d+x+l]*c,T=o[p+x+a],b=o[p+x]*c;s[x]=y*_+w*C+g*T+m*b}return s}}const sre=new rt;class ore extends r5{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return sre.fromArray(s).normalize().toArray(s),s}}const Bs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},uh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jU={9728:$n,9729:li,9984:pw,9985:YS,9986:tm,9987:OA},WU={33071:ui,33648:km,10497:us},pb={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Hl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},are={CUBICSPLINE:void 0,LINEAR:Yc,STEP:Nh},mb={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function lre(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Qh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:cs})),n.DefaultMaterial}function jd(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Jl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Are(n,e,t){let r=!1,i=!1,s=!1;for(let A=0,c=e.length;A<c;A++){const u=e[A];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let A=0,c=e.length;A<c;A++){const u=e[A];if(r){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;o.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],f=A[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=u),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function cre(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ure(n){const e=n.extensions&&n.extensions[kt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+KU(e.attributes):t=n.indices+":"+KU(n.attributes)+":"+n.mode,t}function KU(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function fC(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fre(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const hre=new We;class dre{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Qne,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new lu(this.options.manager):this.textureLoader=new Bne(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new iT(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};jd(s,a,i),Jl(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[A,c]of o.children.entries())s(c,a.children[A])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[kt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(xw.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=pb[i.type],a=uh[i.componentType],l=i.normalized===!0,A=new a(i.count*o);return Promise.resolve(new lt(A,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=pb[i.type],A=uh[i.componentType],c=A.BYTES_PER_ELEMENT,u=c*l,f=i.byteOffset||0,h=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let d,g;if(h&&h!==u){const m=Math.floor(f/h),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count;let w=t.cache.get(y);w||(d=new A(a,m*h,i.count*h/c),w=new ine(d,h/c),t.cache.add(y,w)),g=new nT(w,l,f%h/c,p)}else a===null?d=new A(i.count*l):d=new A(a,f,i.count*l),g=new lt(d,l,p);if(i.sparse!==void 0){const m=pb.SCALAR,y=uh[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0,_=new y(o[1],w,i.sparse.count*m),C=new A(o[2],x,i.sparse.count*l);a!==null&&(g=new lt(g.array.slice(),g.itemSize,g.normalized));for(let T=0,b=_.length;T<b;T++){const M=_[T];if(g.setX(M,C[T*l]),l>=2&&g.setY(M,C[T*l+1]),l>=3&&g.setZ(M,C[T*l+2]),l>=4&&g.setW(M,C[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const A=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"";const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=jU[f.magFilter]||li,c.minFilter=jU[f.minFilter]||OA,c.wrapS=WU[f.wrapS]||us,c.wrapT=WU[f.wrapT]||us,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=A,A}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",A=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(u){A=!0;const f=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(u){return new Promise(function(f,h){let p=f;t.isImageBitmapLoader===!0&&(p=function(d){const g=new Hn(d);g.needsUpdate=!0,f(g)}),t.load(xw.resolveURL(u,s.path),p,void 0,h)})}).then(function(u){return A===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||fre(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[kt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[kt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[kt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new GH,Li.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Sl,Li.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Qh}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},A=[];if(l[kt.KHR_MATERIALS_UNLIT]){const u=i[kt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),A.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new ke(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}u.baseColorTexture!==void 0&&A.push(t.assignTexture(a,"map",u.baseColorTexture,wt)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(A.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),A.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),A.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=hi);const c=s.alphaMode||mb.OPAQUE;if(c===mb.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===mb.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Mi&&(A.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ye(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==Mi&&(A.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Mi&&(a.emissive=new ke().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==Mi&&A.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,wt)),Promise.all(A).then(function(){const u=new o(a);return s.name&&(u.name=s.name),Jl(u,s),t.associations.set(u,{materials:e}),s.extensions&&jd(i,u,s),u})}createUniqueName(e){const t=_t.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[kt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return YU(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const A=e[a],c=ure(A),u=i[c];if(u)o.push(u.promise);else{let f;A.extensions&&A.extensions[kt.KHR_DRACO_MESH_COMPRESSION]?f=s(A):f=YU(new Wt,A,t),i[c]={primitive:A,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,A=o.length;l<A;l++){const c=o[l].material===void 0?lre(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const A=l.slice(0,l.length-1),c=l[l.length-1],u=[];for(let h=0,p=c.length;h<p;h++){const d=c[h],g=o[h];let m;const y=A[h];if(g.mode===Bs.TRIANGLES||g.mode===Bs.TRIANGLE_STRIP||g.mode===Bs.TRIANGLE_FAN||g.mode===void 0)m=s.isSkinnedMesh===!0?new cl(d,y):new Cn(d,y),m.isSkinnedMesh===!0&&!m.geometry.attributes.skinWeight.normalized&&m.normalizeSkinWeights(),g.mode===Bs.TRIANGLE_STRIP?m.geometry=GU(m.geometry,CH):g.mode===Bs.TRIANGLE_FAN&&(m.geometry=GU(m.geometry,rC));else if(g.mode===Bs.LINES)m=new vg(d,y);else if(g.mode===Bs.LINE_STRIP)m=new nd(d,y);else if(g.mode===Bs.LINE_LOOP)m=new lne(d,y);else if(g.mode===Bs.POINTS)m=new Ane(d,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&cre(m,s),m.name=t.createUniqueName(s.name||"mesh_"+e),Jl(m,s),g.extensions&&jd(i,m,g),t.assignFinalMaterial(m),u.push(m)}for(let h=0,p=u.length;h<p;h++)t.associations.set(u[h],{meshes:e,primitives:h});if(u.length===1)return u[0];const f=new Pr;t.associations.set(f,{meshes:e});for(let h=0,p=u.length;h<p;h++)f.add(u[h]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Br(Lt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new ed(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Jl(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this.getDependency("node",t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let A=0,c=o.length;A<c;A++){const u=o[A];if(u){a.push(u);const f=new We;s!==null&&f.fromArray(s.array,A*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[A])}return new XA(a,l)})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let A=0,c=r.channels.length;A<c;A++){const u=r.channels[A],f=r.samplers[u.sampler],h=u.target,p=h.node,d=r.parameters!==void 0?r.parameters[f.input]:f.input,g=r.parameters!==void 0?r.parameters[f.output]:f.output;i.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",g)),a.push(f),l.push(h)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],f=A[2],h=A[3],p=A[4],d=[];for(let m=0,y=c.length;m<y;m++){const w=c[m],x=u[m],_=f[m],C=h[m],T=p[m];if(w===void 0)continue;w.updateMatrix();let b;switch(Hl[T.path]){case Hl.weights:b=Hh;break;case Hl.rotation:b=ma;break;case Hl.position:case Hl.scale:default:b=NA;break}const M=w.name?w.name:w.uuid,P=C.interpolation!==void 0?are[C.interpolation]:Yc,Y=[];Hl[T.path]===Hl.weights?w.traverse(function(I){I.morphTargetInfluences&&Y.push(I.name?I.name:I.uuid)}):Y.push(M);let H=_.array;if(_.normalized){const I=fC(H.constructor),v=new Float32Array(H.length);for(let E=0,F=H.length;E<F;E++)v[E]=H[E]*I;H=v}for(let I=0,v=Y.length;I<v;I++){const E=new b(Y[I]+"."+Hl[T.path],x.array,H,P);C.interpolation==="CUBICSPLINE"&&(E.createInterpolant=function(D){const O=this instanceof ma?ore:r5;return new O(this.times,this.values,this.getValueSize()/3,D)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),d.push(E)}}const g=r.name?r.name:"animation_"+e;return new $c(g,void 0,d)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,A=i.weights.length;l<A;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(f){return i._getNodeRef(i.cameraCache,s.camera,f)})),i._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){a.push(f)});const A=[],c=s.children||[];for(let f=0,h=c.length;f<h;f++)A.push(i.getDependency("node",c[f]));const u=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([Promise.all(a),Promise.all(A),u])}().then(function(a){const l=a[0],A=a[1],c=a[2];let u;if(s.isBone===!0?u=new yw:l.length>1?u=new Pr:l.length===1?u=l[0]:u=new It,u!==l[0])for(let f=0,h=l.length;f<h;f++)u.add(l[f]);if(s.name&&(u.userData.name=s.name,u.name=o),Jl(u,s),s.extensions&&jd(r,u,s),s.matrix!==void 0){const f=new We;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,c!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(c,hre)});for(let f=0,h=A.length;f<h;f++)u.add(A[f]);return u})}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Pr;r.name&&(s.name=i.createUniqueName(r.name)),Jl(s,r),r.extensions&&jd(t,s,r);const o=r.nodes||[],a=[];for(let l=0,A=o.length;l<A;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,u=l.length;c<u;c++)s.add(l[c]);const A=c=>{const u=new Map;for(const[f,h]of i.associations)(f instanceof Li||f instanceof Hn)&&u.set(f,h);return c.traverse(f=>{const h=i.associations.get(f);h!=null&&u.set(f,h)}),u};return i.associations=A(s),s})}}function pre(n,e,t){const r=e.attributes,i=new ms;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,A=a.max;if(l!==void 0&&A!==void 0){if(i.set(new Z(l[0],l[1],l[2]),new Z(A[0],A[1],A[2])),a.normalized){const c=fC(uh[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new Z,l=new Z;for(let A=0,c=s.length;A<c;A++){const u=s[A];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const d=fC(uh[f.componentType]);l.multiplyScalar(d)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new su;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function YU(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=uC[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Jl(n,e),pre(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Are(n,e.targets,t):n})}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var $U=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))};try{URL.revokeObjectURL($U(""))}catch{$U=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var Is=Uint8Array,fA=Uint16Array,hC=Uint32Array,i5=new Is([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s5=new Is([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mre=new Is([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o5=function(n,e){for(var t=new fA(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new hC(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},a5=o5(i5,2),l5=a5[0],gre=a5[1];l5[28]=258,gre[258]=28;var vre=o5(s5,0),yre=vre[0],dC=new fA(32768);for(var pn=0;pn<32768;++pn){var zl=(pn&43690)>>>1|(pn&21845)<<1;zl=(zl&52428)>>>2|(zl&13107)<<2,zl=(zl&61680)>>>4|(zl&3855)<<4,dC[pn]=((zl&65280)>>>8|(zl&255)<<8)>>>1}var im=function(n,e,t){for(var r=n.length,i=0,s=new fA(e);i<r;++i)++s[n[i]-1];var o=new fA(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new fA(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var A=i<<4|n[i],c=e-n[i],u=o[n[i]-1]++<<c,f=u|(1<<c)-1;u<=f;++u)a[dC[u]>>>l]=A}else for(a=new fA(r),i=0;i<r;++i)n[i]&&(a[i]=dC[o[n[i]-1]++]>>>15-n[i]);return a},wg=new Is(288);for(var pn=0;pn<144;++pn)wg[pn]=8;for(var pn=144;pn<256;++pn)wg[pn]=9;for(var pn=256;pn<280;++pn)wg[pn]=7;for(var pn=280;pn<288;++pn)wg[pn]=8;var A5=new Is(32);for(var pn=0;pn<32;++pn)A5[pn]=5;var wre=im(wg,9,1),xre=im(A5,5,1),gb=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ao=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},vb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},_re=function(n){return(n/8|0)+(n&7&&1)},bre=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof fA?fA:n instanceof hC?hC:Is)(t-e);return r.set(n.subarray(e,t)),r},Bre=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Is(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Is(r*3));var o=function(X){var ae=e.length;if(X>ae){var se=new Is(Math.max(ae*2,X));se.set(e),e=se}},a=t.f||0,l=t.p||0,A=t.b||0,c=t.l,u=t.d,f=t.m,h=t.n,p=r*8;do{if(!c){t.f=a=ao(n,l,1);var d=ao(n,l+1,3);if(l+=3,d)if(d==1)c=wre,u=xre,f=9,h=5;else if(d==2){var w=ao(n,l,31)+257,x=ao(n,l+10,15)+4,_=w+ao(n,l+5,31)+1;l+=14;for(var C=new Is(_),T=new Is(19),b=0;b<x;++b)T[mre[b]]=ao(n,l+b*3,7);l+=x*3;for(var M=gb(T),P=(1<<M)-1,Y=im(T,M,1),b=0;b<_;){var H=Y[ao(n,l,P)];l+=H&15;var g=H>>>4;if(g<16)C[b++]=g;else{var I=0,v=0;for(g==16?(v=3+ao(n,l,3),l+=2,I=C[b-1]):g==17?(v=3+ao(n,l,7),l+=3):g==18&&(v=11+ao(n,l,127),l+=7);v--;)C[b++]=I}}var E=C.subarray(0,w),F=C.subarray(w);f=gb(E),h=gb(F),c=im(E,f,1),u=im(F,h,1)}else throw"invalid block type";else{var g=_re(l)+4,m=n[g-4]|n[g-3]<<8,y=g+m;if(y>r){if(s)throw"unexpected EOF";break}i&&o(A+m),e.set(n.subarray(g,y),A),t.b=A+=m,t.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&o(A+131072);for(var D=(1<<f)-1,O=(1<<h)-1,z=l;;z=l){var I=c[vb(n,l)&D],K=I>>>4;if(l+=I&15,l>p){if(s)throw"unexpected EOF";break}if(!I)throw"invalid length/literal";if(K<256)e[A++]=K;else if(K==256){z=l,c=null;break}else{var Q=K-254;if(K>264){var b=K-257,B=i5[b];Q=ao(n,l,(1<<B)-1)+l5[b],l+=B}var j=u[vb(n,l)&O],ee=j>>>4;if(!j)throw"invalid distance";l+=j&15;var F=yre[ee];if(ee>3){var B=s5[ee];F+=vb(n,l)&(1<<B)-1,l+=B}if(l>p){if(s)throw"unexpected EOF";break}i&&o(A+131072);for(var U=A+Q;A<U;A+=4)e[A]=e[A-F],e[A+1]=e[A+1-F],e[A+2]=e[A+2-F],e[A+3]=e[A+3-F];A=U}}t.l=c,t.p=z,t.b=A,c&&(a=1,t.m=f,t.d=u,t.n=h)}while(!a);return A==e.length?e:bre(e,0,A)},Ere=new Is(0),Cre=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Mre(n,e){return Bre((Cre(n),n.subarray(2,-4)),e)}var Sre=typeof TextDecoder<"u"&&new TextDecoder,Tre=0;try{Sre.decode(Ere,{stream:!0}),Tre=1}catch{}function c5(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function Ire(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let A=0;A<a;++A){const c=o[A+1],u=s[a-A],f=i[A]/(c+u);i[A]=l+c*f,l=u*f}i[a]=l}return i}function Rre(n,e,t,r){const i=c5(n,r,e),s=Ire(i,r,n,e),o=new Qt(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],A=s[a],c=l.w*A;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*A}return o}function Fre(n,e,t,r,i){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=r;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const l=s.slice(0),A=s.slice(0);for(let u=1;u<=t;++u){l[u]=e-i[n+1-u],A[u]=i[n+u]-e;let f=0;for(let h=0;h<u;++h){const p=A[h+1],d=l[u-h];a[u][h]=p+d;const g=a[h][u-1]/a[u][h];a[h][u]=f+p*g,f=d*g}a[u][u]=f}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let f=0,h=1;const p=[];for(let d=0;d<=t;++d)p[d]=s.slice(0);p[0][0]=1;for(let d=1;d<=r;++d){let g=0;const m=u-d,y=t-d;u>=d&&(p[h][0]=p[f][0]/a[y+1][m],g=p[h][0]*a[m][y]);const w=m>=-1?1:-m,x=u-1<=y?d-1:t-u;for(let C=w;C<=x;++C)p[h][C]=(p[f][C]-p[f][C-1])/a[y+1][m+C],g+=p[h][C]*a[m+C][y];u<=y&&(p[h][d]=-p[f][d-1]/a[y+1][u],g+=p[h][d]*a[u][y]),o[d][u]=g;const _=f;f=h,h=_}}let c=t;for(let u=1;u<=r;++u){for(let f=0;f<=t;++f)o[u][f]*=c;c*=t-u}return o}function Ure(n,e,t,r,i){const s=i<n?i:n,o=[],a=c5(n,r,e),l=Fre(a,r,n,s,e),A=[];for(let c=0;c<t.length;++c){const u=t[c].clone(),f=u.w;u.x*=f,u.y*=f,u.z*=f,A[c]=u}for(let c=0;c<=s;++c){const u=A[a-n].clone().multiplyScalar(l[c][0]);for(let f=1;f<=n;++f)u.add(A[a-n+f].clone().multiplyScalar(l[c][f]));o[c]=u}for(let c=s+1;c<=i+1;++c)o[c]=new Qt(0,0,0);return o}function Lre(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function Pre(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new Z(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(Lre(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function Dre(n,e,t,r,i){const s=Ure(n,e,t,r,i);return Pre(s)}class Ore extends cne{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new Qt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new Z){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Rre(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new Z){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=Dre(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let Mt,Wn,wi;class Nre extends sd{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?xw.extractUrlBase(e):s.path,a=new iT(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(A){i?i(A):console.error(A),s.manager.itemError(e)}},r,i)}parse(e,t){if(Vre(e))Mt=new Gre().parse(e);else{const i=d5(e);if(!jre(i))throw new Error("THREE.FBXLoader: Unknown format.");if(ZU(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ZU(i));Mt=new zre().parse(i)}const r=new lu(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new kre(r,this.manager).parse(Mt)}}class kre{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Wn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new Qre().parse(i);return this.parseScene(i,s,r),wi}parseConnections(){const e=new Map;return"Connections"in Mt&&Mt.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Mt.Objects){const r=Mt.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const A=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=A}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Mt.Objects){const r=Mt.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?us:ui,r.wrapT=a===0?us:ui,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Wn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Hn):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Hn):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in Mt.Objects){const r=Mt.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Wn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new ub;break;case"lambert":a=new fne;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new ub;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new ke().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new ke().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new ke().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new ke().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new ke().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new ke().fromArray(e.SpecularColor.value));const s=this;return Wn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=wt);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=wt);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=dw,i.envMap.encoding=wt);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=wt);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in Mt.Objects&&t in Mt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Wn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Mt.Objects){const r=Mt.Objects.Deformer;for(const i in r){const s=r[i],o=Wn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new We().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Wn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){wi=new Pr;const i=this.parseModels(e.skeletons,t,r),s=Mt.Objects.Model,o=this;i.forEach(function(l){const A=s[l.ID];o.setLookAtProperties(l,A),Wn.get(l.ID).parents.forEach(function(u){const f=i.get(u.ID);f!==void 0&&f.add(l)}),l.parent===null&&wi.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),wi.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const A=f5(l.userData.transformData);l.applyMatrix4(A),l.updateWorldMatrix()}});const a=new Hre().parse();wi.children.length===1&&wi.children[0].isGroup&&(wi.children[0].animations=a,wi=wi.children[0]),wi.animations=a}parseModels(e,t,r){const i=new Map,s=Mt.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],A=Wn.get(a);let c=this.buildSkeleton(A,e,a,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(A);break;case"Light":c=this.createLight(A);break;case"Mesh":c=this.createMesh(A,t,r);break;case"NurbsCurve":c=this.createCurve(A,t);break;case"LimbNode":case"Root":c=new yw;break;case"Null":default:c=new Pr;break}c.name=l.attrName?_t.sanitizeNodeName(l.attrName):"",c.ID=a}this.getTransformData(c,l),i.set(a,c)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(A,c){if(A.ID===o.ID){const u=s;s=new yw,s.matrixWorld.copy(A.transformLink),s.name=i?_t.sanitizeNodeName(i):"",s.ID=r,l.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=Mt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new It;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const A=a/l;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const u=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new Br(c,A,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new ed(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new It;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=Mt.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new It;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new ke().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new AC(s,o,a,l);break;case 1:t=new oT(s,o);break;case 2:let A=Math.PI/3;r.InnerAngle!==void 0&&(A=Lt.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=Lt.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new XH(s,o,a,A,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new AC(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new ub({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new cl(s,o),i.normalizeSkinWeights()):i=new Cn(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Sl({color:3342591,linewidth:1});return new nd(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=h5(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Wn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Mt.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),wi.add(e.target)):e.lookAt(new Z().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Wn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const A=l.ID;Wn.get(A).parents.forEach(function(u){r.has(u.ID)&&r.get(u.ID).bind(new XA(o.bones),i[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Mt.Objects){const t=Mt.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new We().fromArray(s.Matrix.a)}):e[i.Node]=new We().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Mt&&"AmbientColor"in Mt.GlobalSettings){const e=Mt.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new ke(t,r,i);wi.add(new ZH(s,1))}}}}class Qre{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Mt.Objects){const r=Mt.Objects.Geometry;for(const i in r){const s=Wn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(u){return Mt.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,f){return i[f.ID]!==void 0&&(u=i[f.ID]),u},null);e.children.forEach(function(u){r.morphTargets[u.ID]!==void 0&&s.push(r.morphTargets[u.ID])});const l=o[0],A={};"RotationOrder"in l&&(A.eulerOrder=h5(l.RotationOrder.value)),"InheritType"in l&&(A.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(A.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(A.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(A.scale=l.GeometricScaling.value);const c=f5(A);return this.genGeometry(t,a,s,c)}genGeometry(e,t,r,i){const s=new Wt;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new ln(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new ln(a.colors,3)),t&&(s.setAttribute("skinIndex",new kx(a.weightsIndices,4)),s.setAttribute("skinWeight",new ln(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const A=new xn().getNormalMatrix(i),c=new ln(a.normal,3);c.applyNormalMatrix(A),s.setAttribute("normal",c)}if(a.uvs.forEach(function(A,c){let u="uv"+(c+1).toString();c===0&&(u="uv"),s.setAttribute(u,new ln(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let A=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(u,f){u!==A&&(s.addGroup(c,f-c,A),A=u,c=f)}),s.groups.length>0){const u=s.groups[s.groups.length-1],f=u.start+u.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,A)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],A=[],c=[],u=[];const f=this;return e.vertexIndices.forEach(function(h,p){let d,g=!1;h<0&&(h=h^-1,g=!0);let m=[],y=[];if(o.push(h*3,h*3+1,h*3+2),e.color){const w=P0(p,r,h,e.color);l.push(w[0],w[1],w[2])}if(e.skeleton){if(e.weightTable[h]!==void 0&&e.weightTable[h].forEach(function(w){y.push(w.weight),m.push(w.id)}),y.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const w=[0,0,0,0],x=[0,0,0,0];y.forEach(function(_,C){let T=_,b=m[C];x.forEach(function(M,P,Y){if(T>M){Y[P]=T,T=M;const H=w[P];w[P]=b,b=H}})}),m=w,y=x}for(;y.length<4;)y.push(0),m.push(0);for(let w=0;w<4;++w)c.push(y[w]),u.push(m[w])}if(e.normal){const w=P0(p,r,h,e.normal);a.push(w[0],w[1],w[2])}e.material&&e.material.mappingType!=="AllSame"&&(d=P0(p,r,h,e.material)[0],d<0&&(f.negativeMaterialIndices=!0,d=0)),e.uv&&e.uv.forEach(function(w,x){const _=P0(p,r,h,w);A[x]===void 0&&(A[x]=[]),A[x].push(_[0]),A[x].push(_[1])}),i++,g&&(i>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),f.genFace(t,e,o,d,a,l,A,c,u,i),r++,i=0,o=[],a=[],l=[],A=[],c=[],u=[])}),t}genFace(e,t,r,i,s,o,a,l,A,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(u-1)*3]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[r[u*3]]),e.vertex.push(t.vertexPositions[r[u*3+1]]),e.vertex.push(t.vertexPositions[r[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(A[0]),e.weightsIndices.push(A[1]),e.weightsIndices.push(A[2]),e.weightsIndices.push(A[3]),e.weightsIndices.push(A[(u-1)*4]),e.weightsIndices.push(A[(u-1)*4+1]),e.weightsIndices.push(A[(u-1)*4+2]),e.weightsIndices.push(A[(u-1)*4+3]),e.weightsIndices.push(A[u*4]),e.weightsIndices.push(A[u*4+1]),e.weightsIndices.push(A[u*4+2]),e.weightsIndices.push(A[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(f,h){e.uvs[h]===void 0&&(e.uvs[h]=[]),e.uvs[h].push(a[h][0]),e.uvs[h].push(a[h][1]),e.uvs[h].push(a[h][(u-1)*2]),e.uvs[h].push(a[h][(u-1)*2+1]),e.uvs[h].push(a[h][u*2]),e.uvs[h].push(a[h][u*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=Mt.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],A=e.attributes.position.count*3,c=new Float32Array(A);for(let p=0;p<l.length;p++){const d=l[p]*3;c[d]=a[p*3],c[d+1]=a[p*3+1],c[d+2]=a[p*3+2]}const u={vertexIndices:o,vertexPositions:c},f=this.genBuffers(u),h=new ln(f.vertex,3);h.name=s||r.attrName,h.applyMatrix4(i),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Wt;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,f=o.length;u<f;u+=4)s.push(new Qt().fromArray(o,u));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let u=0;u<r;++u)s.push(s[u])}const c=new Ore(r,i,s,a,l).getPoints(s.length*12);return new Wt().setFromPoints(c)}}class Hre{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Mt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Mt.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Mt.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Wre),values:t[r].KeyValueFloat.a},s=Wn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=Mt.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Wn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,A){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[A]===void 0){const u=Wn.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(u!==void 0){const f=Mt.Objects.Model[u.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const h={modelName:f.attrName?_t.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};wi.traverse(function(p){p.ID===f.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new We),"PreRotation"in f&&(h.preRotation=f.PreRotation.value),"PostRotation"in f&&(h.postRotation=f.PostRotation.value),s[A]=h}}s[A]&&(s[A][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[A]===void 0){const u=Wn.get(l.ID).parents.filter(function(m){return m.relationship!==void 0})[0].ID,f=Wn.get(u).parents[0].ID,h=Wn.get(f).parents[0].ID,p=Wn.get(h).parents[0].ID,d=Mt.Objects.Model[p],g={modelName:d.attrName?_t.sanitizeNodeName(d.attrName):"",morphName:Mt.Objects.Deformer[u].attrName};s[A]=g}s[A][c.attr]=c}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=Mt.Objects.AnimationStack,r={};for(const i in t){const s=Wn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new $c(e.name,-1,t)}generateTracks(e){const t=[];let r=new Z,i=new rt,s=new Z;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new di().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new NA(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Lt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Lt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Lt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Lt.degToRad),i.push(o),i=new di().fromArray(i),i=new rt().setFromEuler(i)),s!==void 0&&(s=s.map(Lt.degToRad),s.push(o),s=new di().fromArray(s),s=new rt().setFromEuler(s).invert());const A=new rt,c=new di,u=[];for(let f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],o),A.setFromEuler(c),i!==void 0&&A.premultiply(i),s!==void 0&&A.multiply(s),A.toArray(u,f/3*4);return new ma(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=wi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Hh(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(A){if(t.x&&(o=t.x.times.indexOf(A)),t.y&&(a=t.y.times.indexOf(A)),t.z&&(l=t.z.times.indexOf(A)),o!==-1){const c=t.x.values[o];s.push(c),i[0]=c}else s.push(i[0]);if(a!==-1){const c=t.y.values[a];s.push(c),i[1]=c}else s.push(i[1]);if(l!==-1){const c=t.z.values[l];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const A=e.times[t-1],u=(e.times[t]-A)/o;let f=A+u;const h=[],p=[];for(;f<e.times[t];)h.push(f),f+=u,p.push(l),l+=a;e.times=JU(e.times,t,h),e.values=JU(e.values,t,p)}}}}class zre{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new u5,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),A=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):A?t.parseNodeProperty(i,A,r[++s]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),A=parseInt(l[0]),c=parseInt(l[1]);let u=s.split(",").slice(3);u=u.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",s=[A,c],Yre(s,u),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=wb(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=wb(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let A=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":A=parseFloat(A);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":A=wb(A);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:A},this.setCurrentProp(this.getPrevNode(),s)}}class Gre{parse(e){const t=new XU(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new u5;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const A=l.length>0?l[0]:"",c=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,r,f)}return r.propertyList=l,typeof A=="number"&&(r.id=A),c!==""&&(r.attrName=c),u!==""&&(r.attrType=u),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=Mre(new Uint8Array(e.getArrayBuffer(o))),l=new XU(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class XU{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(r)}}class u5{add(e,t){this[e]=t}}function Vre(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===d5(n,0,e.length)}function jre(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function ZU(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Wre(n){return n/46186158e3}const Kre=[];function P0(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return $re(Kre,r.buffer,s,o)}const yb=new di,Du=new Z;function f5(n){const e=new We,t=new We,r=new We,i=new We,s=new We,o=new We,a=new We,l=new We,A=new We,c=new We,u=new We,f=new We,h=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Du.fromArray(n.translation)),n.preRotation){const P=n.preRotation.map(Lt.degToRad);P.push(n.eulerOrder||di.DEFAULT_ORDER),t.makeRotationFromEuler(yb.fromArray(P))}if(n.rotation){const P=n.rotation.map(Lt.degToRad);P.push(n.eulerOrder||di.DEFAULT_ORDER),r.makeRotationFromEuler(yb.fromArray(P))}if(n.postRotation){const P=n.postRotation.map(Lt.degToRad);P.push(n.eulerOrder||di.DEFAULT_ORDER),i.makeRotationFromEuler(yb.fromArray(P)),i.invert()}n.scale&&s.scale(Du.fromArray(n.scale)),n.scalingOffset&&a.setPosition(Du.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(Du.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Du.fromArray(n.rotationOffset)),n.rotationPivot&&A.setPosition(Du.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(u.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const p=t.clone().multiply(r).multiply(i),d=new We;d.extractRotation(c);const g=new We;g.copyPosition(c);const m=g.clone().invert().multiply(c),y=d.clone().invert().multiply(m),w=s,x=new We;if(h===0)x.copy(d).multiply(p).multiply(y).multiply(w);else if(h===1)x.copy(d).multiply(y).multiply(p).multiply(w);else{const Y=new We().scale(new Z().setFromMatrixScale(u)).clone().invert(),H=y.clone().multiply(Y);x.copy(d).multiply(p).multiply(H).multiply(w)}const _=A.clone().invert(),C=o.clone().invert();let T=e.clone().multiply(l).multiply(A).multiply(t).multiply(r).multiply(i).multiply(_).multiply(a).multiply(o).multiply(s).multiply(C);const b=new We().copyPosition(T),M=c.clone().multiply(b);return f.copyPosition(M),T=f.clone().multiply(x),T.premultiply(c.invert()),T}function h5(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function wb(n){return n.split(",").map(function(t){return parseFloat(t)})}function d5(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function Yre(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function $re(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function JU(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class AT{constructor(){this.pluginCallbacks=[],this.register(function(e){return new sie(e)}),this.register(function(e){return new oie(e)}),this.register(function(e){return new Aie(e)}),this.register(function(e){return new cie(e)}),this.register(function(e){return new uie(e)}),this.register(function(e){return new fie(e)}),this.register(function(e){return new aie(e)}),this.register(function(e){return new lie(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){const s=new iie,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,i,s,t)})}}const qt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},rs={};rs[$n]=qt.NEAREST;rs[pw]=qt.NEAREST_MIPMAP_NEAREST;rs[tm]=qt.NEAREST_MIPMAP_LINEAR;rs[li]=qt.LINEAR;rs[YS]=qt.LINEAR_MIPMAP_NEAREST;rs[OA]=qt.LINEAR_MIPMAP_LINEAR;rs[ui]=qt.CLAMP_TO_EDGE;rs[us]=qt.REPEAT;rs[km]=qt.MIRRORED_REPEAT;const qU={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Xre=new ke,eL=12,Zre=1179937895,Jre=2,tL=8,qre=1313821514,eie=5130562;function Ep(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function tie(n){return new TextEncoder().encode(n).buffer}function nie(n){return Ep(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function rie(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<n.itemSize;s++){let o;n.itemSize>4?o=n.array[i*n.itemSize+s]:(s===0?o=n.getX(i):s===1?o=n.getY(i):s===2?o=n.getZ(i):s===3&&(o=n.getW(i)),n.normalized===!0&&(o=Lt.normalize(o,n.array))),r.min[s]=Math.min(r.min[s],o),r.max[s]=Math.max(r.max[s],o)}return r}function p5(n){return Math.ceil(n/4)*4}function xb(n,e=0){const t=p5(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}function nL(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function rL(n,e){if(n.toBlob!==void 0)return new Promise(r=>n.toBlob(r,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class iie{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;r=i.options;const a=i.extensionsUsed,l=new Blob(s,{type:"application/octet-stream"}),A=Object.keys(a);if(A.length>0&&(o.extensionsUsed=A),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),r.binary===!0){const c=new FileReader;c.readAsArrayBuffer(l),c.onloadend=function(){const u=xb(c.result),f=new DataView(new ArrayBuffer(tL));f.setUint32(0,u.byteLength,!0),f.setUint32(4,eie,!0);const h=xb(tie(JSON.stringify(o)),32),p=new DataView(new ArrayBuffer(tL));p.setUint32(0,h.byteLength,!0),p.setUint32(4,qre,!0);const d=new ArrayBuffer(eL),g=new DataView(d);g.setUint32(0,Zre,!0),g.setUint32(4,Jre,!0);const m=eL+p.byteLength+h.byteLength+f.byteLength+u.byteLength;g.setUint32(8,m,!0);const y=new Blob([d,p,h,f,u],{type:"application/octet-stream"}),w=new FileReader;w.readAsArrayBuffer(y),w.onloadend=function(){t(w.result)}}}else if(o.buffers&&o.buffers.length>0){const c=new FileReader;c.readAsDataURL(l),c.onloadend=function(){const u=c.result;o.buffers[0].uri=u,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Z;for(let i=0,s=e.count;i<s;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new Z;for(let s=0,o=r.count;s<o;s++)i.fromBufferAttribute(r,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function r(h){return h.encoding===wt?function(d){return d<.04045?d*.0773993808:Math.pow(d*.9478672986+.0521327014,2.4)}:function(d){return d}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const i=e?e.image:null,s=t?t.image:null,o=Math.max(i?i.width:0,s?s.width:0),a=Math.max(i?i.height:0,s?s.height:0),l=nL();l.width=o,l.height=a;const A=l.getContext("2d");A.fillStyle="#00ffff",A.fillRect(0,0,o,a);const c=A.getImageData(0,0,o,a);if(i){A.drawImage(i,0,0,o,a);const h=r(e),p=A.getImageData(0,0,o,a).data;for(let d=2;d<p.length;d+=4)c.data[d]=h(p[d]/256)*256}if(s){A.drawImage(s,0,0,o,a);const h=r(t),p=A.getImageData(0,0,o,a).data;for(let d=1;d<p.length;d+=4)c.data[d]=h(p[d]/256)*256}A.putImageData(c,0,0);const f=(e||t).clone();return f.source=new ZS(l),f.encoding=_l,f}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;t===qt.UNSIGNED_BYTE?a=1:t===qt.UNSIGNED_SHORT?a=2:a=4;const l=p5(i*e.itemSize*a),A=new DataView(new ArrayBuffer(l));let c=0;for(let h=r;h<r+i;h++)for(let p=0;p<e.itemSize;p++){let d;e.itemSize>4?d=e.array[h*e.itemSize+p]:(p===0?d=e.getX(h):p===1?d=e.getY(h):p===2?d=e.getZ(h):p===3&&(d=e.getW(h)),e.normalized===!0&&(d=Lt.normalize(d,e.array))),t===qt.FLOAT?A.setFloat32(c,d,!0):t===qt.UNSIGNED_INT?A.setUint32(c,d,!0):t===qt.UNSIGNED_SHORT?A.setUint16(c,d,!0):t===qt.UNSIGNED_BYTE&&A.setUint8(c,d),c+=a}const u={buffer:this.processBuffer(A.buffer),byteOffset:this.byteOffset,byteLength:l};return s!==void 0&&(u.target=s),s===qt.ARRAY_BUFFER&&(u.byteStride=e.itemSize*a),this.byteOffset+=l,o.bufferViews.push(u),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const o=xb(s.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=qt.FLOAT;else if(e.array.constructor===Uint32Array)a=qt.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)a=qt.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)a=qt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),i===0)return null;const l=rie(e,r,i);let A;t!==void 0&&(A=e===t.index?qt.ELEMENT_ARRAY_BUFFER:qt.ARRAY_BUFFER);const c=this.processBufferView(e,a,r,i,A),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,r,i="image/png"){if(e!==null){const s=this,o=s.cache,a=s.json,l=s.options,A=s.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=i+":flipY/"+r.toString();if(c[u]!==void 0)return c[u];a.images||(a.images=[]);const f={mimeType:i},h=nL();h.width=Math.min(e.width,l.maxTextureSize),h.height=Math.min(e.height,l.maxTextureSize);const p=h.getContext("2d");if(r===!0&&(p.translate(0,h.height),p.scale(1,-1)),e.data!==void 0){t!==Lr&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const g=new Uint8ClampedArray(e.height*e.width*4);for(let m=0;m<g.length;m+=4)g[m+0]=e.data[m+0],g[m+1]=e.data[m+1],g[m+2]=e.data[m+2],g[m+3]=e.data[m+3];p.putImageData(new ImageData(g,e.width,e.height),0,0)}else p.drawImage(e,0,0,h.width,h.height);l.binary===!0?A.push(rL(h,i).then(g=>s.processBufferViewImage(g)).then(g=>{f.bufferView=g})):h.toDataURL!==void 0?f.uri=h.toDataURL(i):A.push(rL(h,i).then(g=>new FileReader().readAsDataURL(g)).then(g=>{f.uri=g}));const d=a.images.push(f)-1;return c[u]=d,d}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:rs[e.magFilter],minFilter:rs[e.minFilter],wrapS:rs[e.wrapS],wrapT:rs[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(s.name=e.name),this._invokeAll(function(a){a.writeTexture&&a.writeTexture(e,s)});const o=r.textures.push(s)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(Ep(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a)};this.applyTextureTransform(l,a),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(a.r,a.g,a.b);if(l>1&&(a.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){const A={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(A,e.emissiveMap),i.emissiveTexture=A}}if(e.normalMap){const a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===hi&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let w=0,x=e.material.length;w<x;w++)i.push(e.material[w].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=qt.LINES:e.isLineLoop?a=qt.LINE_LOOP:e.isLine?a=qt.LINE_STRIP:e.isPoints?a=qt.POINTS:a=e.material.wireframe?qt.LINES:qt.TRIANGLES;const l={},A={},c=[],u=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},h=o.getAttribute("normal");h!==void 0&&!this.isNormalizedNormalAttribute(h)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(h)));let p=null;for(let w in o.attributes){if(w.slice(0,5)==="morph")continue;const x=o.attributes[w];if(w=f[w]||w.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(w)||(w="_"+w),t.attributes.has(this.getUID(x))){A[w]=t.attributes.get(this.getUID(x));continue}p=null;const C=x.array;w==="JOINTS_0"&&!(C instanceof Uint16Array)&&!(C instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new lt(new Uint16Array(C),x.itemSize,x.normalized));const T=this.processAccessor(p||x,o);T!==null&&(A[w]=T,t.attributes.set(this.getUID(x),T))}if(h!==void 0&&o.setAttribute("normal",h),Object.keys(A).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const w=[],x=[],_={};if(e.morphTargetDictionary!==void 0)for(const C in e.morphTargetDictionary)_[e.morphTargetDictionary[C]]=C;for(let C=0;C<e.morphTargetInfluences.length;++C){const T={};let b=!1;for(const M in o.morphAttributes){if(M!=="position"&&M!=="normal"){b||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),b=!0);continue}const P=o.morphAttributes[M][C],Y=M.toUpperCase(),H=o.attributes[M];if(t.attributes.has(this.getUID(P,!0))){T[Y]=t.attributes.get(this.getUID(P,!0));continue}const I=P.clone();if(!o.morphTargetsRelative)for(let v=0,E=P.count;v<E;v++)for(let F=0;F<P.itemSize;F++)F===0&&I.setX(v,P.getX(v)-H.getX(v)),F===1&&I.setY(v,P.getY(v)-H.getY(v)),F===2&&I.setZ(v,P.getZ(v)-H.getZ(v)),F===3&&I.setW(v,P.getW(v)-H.getW(v));T[Y]=this.processAccessor(I,o),t.attributes.set(this.getUID(H,!0),T[Y])}u.push(T),w.push(e.morphTargetInfluences[C]),e.morphTargetDictionary!==void 0&&x.push(_[C])}l.weights=w,x.length>0&&(l.extras={},l.extras.targetNames=x)}const d=Array.isArray(e.material);if(d&&o.groups.length===0)return null;const g=d?e.material:[e.material],m=d?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let w=0,x=m.length;w<x;w++){const _={mode:a,attributes:A};if(this.serializeUserData(o,_),u.length>0&&(_.targets=u),o.index!==null){let T=this.getUID(o.index);(m[w].start!==void 0||m[w].count!==void 0)&&(T+=":"+m[w].start+":"+m[w].count),t.attributes.has(T)?_.indices=t.attributes.get(T):(_.indices=this.processAccessor(o.index,o,m[w].start,m[w].count),t.attributes.set(T,_.indices)),_.indices===null&&delete _.indices}const C=this.processMaterial(g[m[w].materialIndex]);C!==null&&(_.material=C),c.push(_)}l.primitives=c,r.meshes||(r.meshes=[]),this._invokeAll(function(w){w.writeMesh&&w.writeMesh(e,l)});const y=r.meshes.push(l)-1;return t.meshes.set(s,y),y}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Lt.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=AT.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let l=0;l<s.length;++l){const A=s[l],c=_t.parseTrackName(A.name);let u=_t.findNode(t,c.nodeName);const f=qU[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',A.name),null;const h=1;let p=A.values.length/A.times.length;f===qU.morphTargetInfluences&&(p/=u.morphTargetInfluences.length);let d;A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(d="CUBICSPLINE",p/=3):A.getInterpolation()===Nh?d="STEP":d="LINEAR",a.push({input:this.processAccessor(new lt(A.times,h)),output:this.processAccessor(new lt(A.values,p)),interpolation:d}),o.push({sampler:a.length-1,target:{node:i.get(u),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(s.bones.length*16),A=new We;for(let u=0;u<s.bones.length;++u)a.push(r.get(s.bones[u])),A.copy(s.boneInverses[u]),A.multiply(e.bindMatrix).toArray(l,u*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new lt(l,16)),joints:a,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(r.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),A=e.scale.toArray();Ep(a,[0,0,0,1])||(s.rotation=a),Ep(l,[0,0,0])||(s.translation=l),Ep(A,[1,1,1])||(s.scale=A)}else e.matrixAutoUpdate&&e.updateMatrix(),nie(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,A=e.children.length;l<A;l++){const c=e.children[l];if(c.visible||r.onlyVisible===!1){const u=this.processNode(c);u!==null&&a.push(u)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const A=this.processNode(l);A!==null&&s.push(A)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new vw;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof vw?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class sie{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,s=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class oie{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class aie{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class lie{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:r.processTexture(e.iridescenceMap)};r.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:r.processTexture(e.iridescenceThicknessMap)};r.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Aie{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class cie{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class uie{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class fie{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(Xre)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const r=this.writer,i=r.extensionsUsed,s={};if(e.specularIntensityMap){const o={index:r.processTexture(e.specularIntensityMap)};r.applyTextureTransform(o,e.specularIntensityMap),s.specularTexture=o}if(e.specularColorMap){const o={index:r.processTexture(e.specularColorMap)};r.applyTextureTransform(o,e.specularColorMap),s.specularColorTexture=o}s.specularFactor=e.specularIntensity,s.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}AT.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),s=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let a;if(n.times.length===0){i[0]=e;for(let l=0;l<r;l++)s[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),s.set(o.evaluate(e),0),s.set(n.values,r),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),s.set(n.values,0),s.set(o.evaluate(e),n.values.length),a=i.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){i.set(n.times.slice(0,l+1),0),i[l+1]=e,i.set(n.times.slice(l+1),l+2),s.set(n.values.slice(0,(l+1)*r),0),s.set(o.evaluate(e),(l+1)*r),s.set(n.values.slice((l+1)*r),(l+2)*r),a=l+1;break}}return n.times=i,n.values=s,a},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=_t.parseTrackName(o.name),l=_t.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Yc)}const A=l.morphTargetInfluences.length,c=l.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(r[l.uuid]===void 0){u=o.clone();const h=new u.ValueBufferType(A*u.times.length);for(let p=0;p<u.times.length;p++)h[p*A+c]=u.values[p];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=h,r[l.uuid]=u,t.push(u);continue}const f=o.createInterpolant(new o.ValueBufferType(1));u=r[l.uuid];for(let h=0;h<u.times.length;h++)u.values[h*A+c]=f.evaluate(u.times[h]);for(let h=0;h<o.times.length;h++){const p=this.insertKeyframe(u,o.times[h]);u.values[p*A+c]=o.values[h]}}return n.tracks=t,n}};var m5={},Vx={};Vx.byteLength=pie;Vx.toByteArray=gie;Vx.fromByteArray=wie;var Xo=[],Es=[],hie=typeof Uint8Array<"u"?Uint8Array:Array,_b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ou=0,die=_b.length;Ou<die;++Ou)Xo[Ou]=_b[Ou],Es[_b.charCodeAt(Ou)]=Ou;Es["-".charCodeAt(0)]=62;Es["_".charCodeAt(0)]=63;function g5(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function pie(n){var e=g5(n),t=e[0],r=e[1];return(t+r)*3/4-r}function mie(n,e,t){return(e+t)*3/4-t}function gie(n){var e,t=g5(n),r=t[0],i=t[1],s=new hie(mie(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Es[n.charCodeAt(l)]<<18|Es[n.charCodeAt(l+1)]<<12|Es[n.charCodeAt(l+2)]<<6|Es[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Es[n.charCodeAt(l)]<<2|Es[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Es[n.charCodeAt(l)]<<10|Es[n.charCodeAt(l+1)]<<4|Es[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function vie(n){return Xo[n>>18&63]+Xo[n>>12&63]+Xo[n>>6&63]+Xo[n&63]}function yie(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(vie(r));return i.join("")}function wie(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(yie(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Xo[e>>2]+Xo[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Xo[e>>10]+Xo[e>>4&63]+Xo[e<<2&63]+"=")),i.join("")}var cT={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cT.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,A=l>>1,c=-7,u=t?i-1:0,f=t?-1:1,h=n[e+u];for(u+=f,s=h&(1<<-c)-1,h>>=-c,c+=a;c>0;s=s*256+n[e+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+n[e+u],u+=f,c-=8);if(s===0)s=1-A;else{if(s===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-A}return(h?-1:1)*o*Math.pow(2,s-r)};cT.write=function(n,e,t,r,i,s){var o,a,l,A=s*8-i-1,c=(1<<A)-1,u=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,d=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=f/l:e+=f*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,i),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;n[t+h]=a&255,h+=p,a/=256,i-=8);for(o=o<<i|a,A+=i;A>0;n[t+h]=o&255,h+=p,o/=256,A-=8);n[t+h-p]|=d*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Vx,t=cT,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const G=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(G,R),G.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(G){if(G>i)throw new RangeError('The value "'+G+'" is invalid for option "size"');const R=new Uint8Array(G);return Object.setPrototypeOf(R,a.prototype),R}function a(G,R,S){if(typeof G=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(G)}return l(G,R,S)}a.poolSize=8192;function l(G,R,S){if(typeof G=="string")return f(G,R);if(ArrayBuffer.isView(G))return p(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(k(G,ArrayBuffer)||G&&k(G.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(k(G,SharedArrayBuffer)||G&&k(G.buffer,SharedArrayBuffer)))return d(G,R,S);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const V=G.valueOf&&G.valueOf();if(V!=null&&V!==G)return a.from(V,R,S);const te=g(G);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return a.from(G[Symbol.toPrimitive]("string"),R,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}a.from=function(G,R,S){return l(G,R,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function A(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function c(G,R,S){return A(G),G<=0?o(G):R!==void 0?typeof S=="string"?o(G).fill(R,S):o(G).fill(R):o(G)}a.alloc=function(G,R,S){return c(G,R,S)};function u(G){return A(G),o(G<0?0:m(G)|0)}a.allocUnsafe=function(G){return u(G)},a.allocUnsafeSlow=function(G){return u(G)};function f(G,R){if((typeof R!="string"||R==="")&&(R="utf8"),!a.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const S=w(G,R)|0;let V=o(S);const te=V.write(G,R);return te!==S&&(V=V.slice(0,te)),V}function h(G){const R=G.length<0?0:m(G.length)|0,S=o(R);for(let V=0;V<R;V+=1)S[V]=G[V]&255;return S}function p(G){if(k(G,Uint8Array)){const R=new Uint8Array(G);return d(R.buffer,R.byteOffset,R.byteLength)}return h(G)}function d(G,R,S){if(R<0||G.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<R+(S||0))throw new RangeError('"length" is outside of buffer bounds');let V;return R===void 0&&S===void 0?V=new Uint8Array(G):S===void 0?V=new Uint8Array(G,R):V=new Uint8Array(G,R,S),Object.setPrototypeOf(V,a.prototype),V}function g(G){if(a.isBuffer(G)){const R=m(G.length)|0,S=o(R);return S.length===0||G.copy(S,0,0,R),S}if(G.length!==void 0)return typeof G.length!="number"||W(G.length)?o(0):h(G);if(G.type==="Buffer"&&Array.isArray(G.data))return h(G.data)}function m(G){if(G>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return G|0}function y(G){return+G!=G&&(G=0),a.alloc(+G)}a.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==a.prototype},a.compare=function(R,S){if(k(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),k(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(R)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===S)return 0;let V=R.length,te=S.length;for(let le=0,ie=Math.min(V,te);le<ie;++le)if(R[le]!==S[le]){V=R[le],te=S[le];break}return V<te?-1:te<V?1:0},a.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(R,S){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return a.alloc(0);let V;if(S===void 0)for(S=0,V=0;V<R.length;++V)S+=R[V].length;const te=a.allocUnsafe(S);let le=0;for(V=0;V<R.length;++V){let ie=R[V];if(k(ie,Uint8Array))le+ie.length>te.length?(a.isBuffer(ie)||(ie=a.from(ie)),ie.copy(te,le)):Uint8Array.prototype.set.call(te,ie,le);else if(a.isBuffer(ie))ie.copy(te,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=ie.length}return te};function w(G,R){if(a.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||k(G,ArrayBuffer))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const S=G.length,V=arguments.length>2&&arguments[2]===!0;if(!V&&S===0)return 0;let te=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return q(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return be(G).length;default:if(te)return V?-1:q(G).length;R=(""+R).toLowerCase(),te=!0}}a.byteLength=w;function x(G,R,S){let V=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,R>>>=0,S<=R))return"";for(G||(G="utf8");;)switch(G){case"hex":return z(this,R,S);case"utf8":case"utf-8":return v(this,R,S);case"ascii":return D(this,R,S);case"latin1":case"binary":return O(this,R,S);case"base64":return I(this,R,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,R,S);default:if(V)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),V=!0}}a.prototype._isBuffer=!0;function _(G,R,S){const V=G[R];G[R]=G[S],G[S]=V}a.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<R;S+=2)_(this,S,S+1);return this},a.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<R;S+=4)_(this,S,S+3),_(this,S+1,S+2);return this},a.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<R;S+=8)_(this,S,S+7),_(this,S+1,S+6),_(this,S+2,S+5),_(this,S+3,S+4);return this},a.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?v(this,0,R):x.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(R){if(!a.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:a.compare(this,R)===0},a.prototype.inspect=function(){let R="";const S=n.INSPECT_MAX_BYTES;return R=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(R+=" ... "),"<Buffer "+R+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(R,S,V,te,le){if(k(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(S===void 0&&(S=0),V===void 0&&(V=R?R.length:0),te===void 0&&(te=0),le===void 0&&(le=this.length),S<0||V>R.length||te<0||le>this.length)throw new RangeError("out of range index");if(te>=le&&S>=V)return 0;if(te>=le)return-1;if(S>=V)return 1;if(S>>>=0,V>>>=0,te>>>=0,le>>>=0,this===R)return 0;let ie=le-te,Ie=V-S;const Te=Math.min(ie,Ie),Le=this.slice(te,le),He=R.slice(S,V);for(let De=0;De<Te;++De)if(Le[De]!==He[De]){ie=Le[De],Ie=He[De];break}return ie<Ie?-1:Ie<ie?1:0};function C(G,R,S,V,te){if(G.length===0)return-1;if(typeof S=="string"?(V=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,W(S)&&(S=te?0:G.length-1),S<0&&(S=G.length+S),S>=G.length){if(te)return-1;S=G.length-1}else if(S<0)if(te)S=0;else return-1;if(typeof R=="string"&&(R=a.from(R,V)),a.isBuffer(R))return R.length===0?-1:T(G,R,S,V,te);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(G,R,S):Uint8Array.prototype.lastIndexOf.call(G,R,S):T(G,[R],S,V,te);throw new TypeError("val must be string, number or Buffer")}function T(G,R,S,V,te){let le=1,ie=G.length,Ie=R.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(G.length<2||R.length<2)return-1;le=2,ie/=2,Ie/=2,S/=2}function Te(He,De){return le===1?He[De]:He.readUInt16BE(De*le)}let Le;if(te){let He=-1;for(Le=S;Le<ie;Le++)if(Te(G,Le)===Te(R,He===-1?0:Le-He)){if(He===-1&&(He=Le),Le-He+1===Ie)return He*le}else He!==-1&&(Le-=Le-He),He=-1}else for(S+Ie>ie&&(S=ie-Ie),Le=S;Le>=0;Le--){let He=!0;for(let De=0;De<Ie;De++)if(Te(G,Le+De)!==Te(R,De)){He=!1;break}if(He)return Le}return-1}a.prototype.includes=function(R,S,V){return this.indexOf(R,S,V)!==-1},a.prototype.indexOf=function(R,S,V){return C(this,R,S,V,!0)},a.prototype.lastIndexOf=function(R,S,V){return C(this,R,S,V,!1)};function b(G,R,S,V){S=Number(S)||0;const te=G.length-S;V?(V=Number(V),V>te&&(V=te)):V=te;const le=R.length;V>le/2&&(V=le/2);let ie;for(ie=0;ie<V;++ie){const Ie=parseInt(R.substr(ie*2,2),16);if(W(Ie))return ie;G[S+ie]=Ie}return ie}function M(G,R,S,V){return Be(q(R,G.length-S),G,S,V)}function P(G,R,S,V){return Be(J(R),G,S,V)}function Y(G,R,S,V){return Be(be(R),G,S,V)}function H(G,R,S,V){return Be(ce(R,G.length-S),G,S,V)}a.prototype.write=function(R,S,V,te){if(S===void 0)te="utf8",V=this.length,S=0;else if(V===void 0&&typeof S=="string")te=S,V=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(V)?(V=V>>>0,te===void 0&&(te="utf8")):(te=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const le=this.length-S;if((V===void 0||V>le)&&(V=le),R.length>0&&(V<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ie=!1;for(;;)switch(te){case"hex":return b(this,R,S,V);case"utf8":case"utf-8":return M(this,R,S,V);case"ascii":case"latin1":case"binary":return P(this,R,S,V);case"base64":return Y(this,R,S,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,R,S,V);default:if(ie)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ie=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(G,R,S){return R===0&&S===G.length?e.fromByteArray(G):e.fromByteArray(G.slice(R,S))}function v(G,R,S){S=Math.min(G.length,S);const V=[];let te=R;for(;te<S;){const le=G[te];let ie=null,Ie=le>239?4:le>223?3:le>191?2:1;if(te+Ie<=S){let Te,Le,He,De;switch(Ie){case 1:le<128&&(ie=le);break;case 2:Te=G[te+1],(Te&192)===128&&(De=(le&31)<<6|Te&63,De>127&&(ie=De));break;case 3:Te=G[te+1],Le=G[te+2],(Te&192)===128&&(Le&192)===128&&(De=(le&15)<<12|(Te&63)<<6|Le&63,De>2047&&(De<55296||De>57343)&&(ie=De));break;case 4:Te=G[te+1],Le=G[te+2],He=G[te+3],(Te&192)===128&&(Le&192)===128&&(He&192)===128&&(De=(le&15)<<18|(Te&63)<<12|(Le&63)<<6|He&63,De>65535&&De<1114112&&(ie=De))}}ie===null?(ie=65533,Ie=1):ie>65535&&(ie-=65536,V.push(ie>>>10&1023|55296),ie=56320|ie&1023),V.push(ie),te+=Ie}return F(V)}const E=4096;function F(G){const R=G.length;if(R<=E)return String.fromCharCode.apply(String,G);let S="",V=0;for(;V<R;)S+=String.fromCharCode.apply(String,G.slice(V,V+=E));return S}function D(G,R,S){let V="";S=Math.min(G.length,S);for(let te=R;te<S;++te)V+=String.fromCharCode(G[te]&127);return V}function O(G,R,S){let V="";S=Math.min(G.length,S);for(let te=R;te<S;++te)V+=String.fromCharCode(G[te]);return V}function z(G,R,S){const V=G.length;(!R||R<0)&&(R=0),(!S||S<0||S>V)&&(S=V);let te="";for(let le=R;le<S;++le)te+=re[G[le]];return te}function K(G,R,S){const V=G.slice(R,S);let te="";for(let le=0;le<V.length-1;le+=2)te+=String.fromCharCode(V[le]+V[le+1]*256);return te}a.prototype.slice=function(R,S){const V=this.length;R=~~R,S=S===void 0?V:~~S,R<0?(R+=V,R<0&&(R=0)):R>V&&(R=V),S<0?(S+=V,S<0&&(S=0)):S>V&&(S=V),S<R&&(S=R);const te=this.subarray(R,S);return Object.setPrototypeOf(te,a.prototype),te};function Q(G,R,S){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+R>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(R,S,V){R=R>>>0,S=S>>>0,V||Q(R,S,this.length);let te=this[R],le=1,ie=0;for(;++ie<S&&(le*=256);)te+=this[R+ie]*le;return te},a.prototype.readUintBE=a.prototype.readUIntBE=function(R,S,V){R=R>>>0,S=S>>>0,V||Q(R,S,this.length);let te=this[R+--S],le=1;for(;S>0&&(le*=256);)te+=this[R+--S]*le;return te},a.prototype.readUint8=a.prototype.readUInt8=function(R,S){return R=R>>>0,S||Q(R,1,this.length),this[R]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(R,S){return R=R>>>0,S||Q(R,2,this.length),this[R]|this[R+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(R,S){return R=R>>>0,S||Q(R,2,this.length),this[R]<<8|this[R+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},a.prototype.readBigUInt64LE=he(function(R){R=R>>>0,xe(R,"offset");const S=this[R],V=this[R+7];(S===void 0||V===void 0)&&L(R,this.length-8);const te=S+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,le=this[++R]+this[++R]*2**8+this[++R]*2**16+V*2**24;return BigInt(te)+(BigInt(le)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(R){R=R>>>0,xe(R,"offset");const S=this[R],V=this[R+7];(S===void 0||V===void 0)&&L(R,this.length-8);const te=S*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],le=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+V;return(BigInt(te)<<BigInt(32))+BigInt(le)}),a.prototype.readIntLE=function(R,S,V){R=R>>>0,S=S>>>0,V||Q(R,S,this.length);let te=this[R],le=1,ie=0;for(;++ie<S&&(le*=256);)te+=this[R+ie]*le;return le*=128,te>=le&&(te-=Math.pow(2,8*S)),te},a.prototype.readIntBE=function(R,S,V){R=R>>>0,S=S>>>0,V||Q(R,S,this.length);let te=S,le=1,ie=this[R+--te];for(;te>0&&(le*=256);)ie+=this[R+--te]*le;return le*=128,ie>=le&&(ie-=Math.pow(2,8*S)),ie},a.prototype.readInt8=function(R,S){return R=R>>>0,S||Q(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},a.prototype.readInt16LE=function(R,S){R=R>>>0,S||Q(R,2,this.length);const V=this[R]|this[R+1]<<8;return V&32768?V|4294901760:V},a.prototype.readInt16BE=function(R,S){R=R>>>0,S||Q(R,2,this.length);const V=this[R+1]|this[R]<<8;return V&32768?V|4294901760:V},a.prototype.readInt32LE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},a.prototype.readInt32BE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},a.prototype.readBigInt64LE=he(function(R){R=R>>>0,xe(R,"offset");const S=this[R],V=this[R+7];(S===void 0||V===void 0)&&L(R,this.length-8);const te=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(V<<24);return(BigInt(te)<<BigInt(32))+BigInt(S+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),a.prototype.readBigInt64BE=he(function(R){R=R>>>0,xe(R,"offset");const S=this[R],V=this[R+7];(S===void 0||V===void 0)&&L(R,this.length-8);const te=(S<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(te)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+V)}),a.prototype.readFloatLE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),t.read(this,R,!0,23,4)},a.prototype.readFloatBE=function(R,S){return R=R>>>0,S||Q(R,4,this.length),t.read(this,R,!1,23,4)},a.prototype.readDoubleLE=function(R,S){return R=R>>>0,S||Q(R,8,this.length),t.read(this,R,!0,52,8)},a.prototype.readDoubleBE=function(R,S){return R=R>>>0,S||Q(R,8,this.length),t.read(this,R,!1,52,8)};function B(G,R,S,V,te,le){if(!a.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>te||R<le)throw new RangeError('"value" argument is out of bounds');if(S+V>G.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(R,S,V,te){if(R=+R,S=S>>>0,V=V>>>0,!te){const Ie=Math.pow(2,8*V)-1;B(this,R,S,V,Ie,0)}let le=1,ie=0;for(this[S]=R&255;++ie<V&&(le*=256);)this[S+ie]=R/le&255;return S+V},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(R,S,V,te){if(R=+R,S=S>>>0,V=V>>>0,!te){const Ie=Math.pow(2,8*V)-1;B(this,R,S,V,Ie,0)}let le=V-1,ie=1;for(this[S+le]=R&255;--le>=0&&(ie*=256);)this[S+le]=R/ie&255;return S+V},a.prototype.writeUint8=a.prototype.writeUInt8=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,1,255,0),this[S]=R&255,S+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,2,65535,0),this[S]=R&255,this[S+1]=R>>>8,S+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,2,65535,0),this[S]=R>>>8,this[S+1]=R&255,S+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,4,4294967295,0),this[S+3]=R>>>24,this[S+2]=R>>>16,this[S+1]=R>>>8,this[S]=R&255,S+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,4,4294967295,0),this[S]=R>>>24,this[S+1]=R>>>16,this[S+2]=R>>>8,this[S+3]=R&255,S+4};function j(G,R,S,V,te){_e(R,V,te,G,S,7);let le=Number(R&BigInt(4294967295));G[S++]=le,le=le>>8,G[S++]=le,le=le>>8,G[S++]=le,le=le>>8,G[S++]=le;let ie=Number(R>>BigInt(32)&BigInt(4294967295));return G[S++]=ie,ie=ie>>8,G[S++]=ie,ie=ie>>8,G[S++]=ie,ie=ie>>8,G[S++]=ie,S}function ee(G,R,S,V,te){_e(R,V,te,G,S,7);let le=Number(R&BigInt(4294967295));G[S+7]=le,le=le>>8,G[S+6]=le,le=le>>8,G[S+5]=le,le=le>>8,G[S+4]=le;let ie=Number(R>>BigInt(32)&BigInt(4294967295));return G[S+3]=ie,ie=ie>>8,G[S+2]=ie,ie=ie>>8,G[S+1]=ie,ie=ie>>8,G[S]=ie,S+8}a.prototype.writeBigUInt64LE=he(function(R,S=0){return j(this,R,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(R,S=0){return ee(this,R,S,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(R,S,V,te){if(R=+R,S=S>>>0,!te){const Te=Math.pow(2,8*V-1);B(this,R,S,V,Te-1,-Te)}let le=0,ie=1,Ie=0;for(this[S]=R&255;++le<V&&(ie*=256);)R<0&&Ie===0&&this[S+le-1]!==0&&(Ie=1),this[S+le]=(R/ie>>0)-Ie&255;return S+V},a.prototype.writeIntBE=function(R,S,V,te){if(R=+R,S=S>>>0,!te){const Te=Math.pow(2,8*V-1);B(this,R,S,V,Te-1,-Te)}let le=V-1,ie=1,Ie=0;for(this[S+le]=R&255;--le>=0&&(ie*=256);)R<0&&Ie===0&&this[S+le+1]!==0&&(Ie=1),this[S+le]=(R/ie>>0)-Ie&255;return S+V},a.prototype.writeInt8=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,1,127,-128),R<0&&(R=255+R+1),this[S]=R&255,S+1},a.prototype.writeInt16LE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,2,32767,-32768),this[S]=R&255,this[S+1]=R>>>8,S+2},a.prototype.writeInt16BE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,2,32767,-32768),this[S]=R>>>8,this[S+1]=R&255,S+2},a.prototype.writeInt32LE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,4,2147483647,-2147483648),this[S]=R&255,this[S+1]=R>>>8,this[S+2]=R>>>16,this[S+3]=R>>>24,S+4},a.prototype.writeInt32BE=function(R,S,V){return R=+R,S=S>>>0,V||B(this,R,S,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[S]=R>>>24,this[S+1]=R>>>16,this[S+2]=R>>>8,this[S+3]=R&255,S+4},a.prototype.writeBigInt64LE=he(function(R,S=0){return j(this,R,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(R,S=0){return ee(this,R,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function U(G,R,S,V,te,le){if(S+V>G.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function X(G,R,S,V,te){return R=+R,S=S>>>0,te||U(G,R,S,4),t.write(G,R,S,V,23,4),S+4}a.prototype.writeFloatLE=function(R,S,V){return X(this,R,S,!0,V)},a.prototype.writeFloatBE=function(R,S,V){return X(this,R,S,!1,V)};function ae(G,R,S,V,te){return R=+R,S=S>>>0,te||U(G,R,S,8),t.write(G,R,S,V,52,8),S+8}a.prototype.writeDoubleLE=function(R,S,V){return ae(this,R,S,!0,V)},a.prototype.writeDoubleBE=function(R,S,V){return ae(this,R,S,!1,V)},a.prototype.copy=function(R,S,V,te){if(!a.isBuffer(R))throw new TypeError("argument should be a Buffer");if(V||(V=0),!te&&te!==0&&(te=this.length),S>=R.length&&(S=R.length),S||(S=0),te>0&&te<V&&(te=V),te===V||R.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),R.length-S<te-V&&(te=R.length-S+V);const le=te-V;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,V,te):Uint8Array.prototype.set.call(R,this.subarray(V,te),S),le},a.prototype.fill=function(R,S,V,te){if(typeof R=="string"){if(typeof S=="string"?(te=S,S=0,V=this.length):typeof V=="string"&&(te=V,V=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!a.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(R.length===1){const ie=R.charCodeAt(0);(te==="utf8"&&ie<128||te==="latin1")&&(R=ie)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(S<0||this.length<S||this.length<V)throw new RangeError("Out of range index");if(V<=S)return this;S=S>>>0,V=V===void 0?this.length:V>>>0,R||(R=0);let le;if(typeof R=="number")for(le=S;le<V;++le)this[le]=R;else{const ie=a.isBuffer(R)?R:a.from(R,te),Ie=ie.length;if(Ie===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(le=0;le<V-S;++le)this[le+S]=ie[le%Ie]}return this};const se={};function de(G,R,S){se[G]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(G,R){return`The "${G}" argument must be of type number. Received type ${typeof R}`},TypeError),de("ERR_OUT_OF_RANGE",function(G,R,S){let V=`The value of "${G}" is out of range.`,te=S;return Number.isInteger(S)&&Math.abs(S)>2**32?te=oe(String(S)):typeof S=="bigint"&&(te=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(te=oe(te)),te+="n"),V+=` It must be ${R}. Received ${te}`,V},RangeError);function oe(G){let R="",S=G.length;const V=G[0]==="-"?1:0;for(;S>=V+4;S-=3)R=`_${G.slice(S-3,S)}${R}`;return`${G.slice(0,S)}${R}`}function pe(G,R,S){xe(R,"offset"),(G[R]===void 0||G[R+S]===void 0)&&L(R,G.length-(S+1))}function _e(G,R,S,V,te,le){if(G>S||G<R){const ie=typeof R=="bigint"?"n":"";let Ie;throw le>3?R===0||R===BigInt(0)?Ie=`>= 0${ie} and < 2${ie} ** ${(le+1)*8}${ie}`:Ie=`>= -(2${ie} ** ${(le+1)*8-1}${ie}) and < 2 ** ${(le+1)*8-1}${ie}`:Ie=`>= ${R}${ie} and <= ${S}${ie}`,new se.ERR_OUT_OF_RANGE("value",Ie,G)}pe(V,te,le)}function xe(G,R){if(typeof G!="number")throw new se.ERR_INVALID_ARG_TYPE(R,"number",G)}function L(G,R,S){throw Math.floor(G)!==G?(xe(G,S),new se.ERR_OUT_OF_RANGE(S||"offset","an integer",G)):R<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${R}`,G)}const ue=/[^+/0-9A-Za-z-_]/g;function Ae(G){if(G=G.split("=")[0],G=G.trim().replace(ue,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function q(G,R){R=R||1/0;let S;const V=G.length;let te=null;const le=[];for(let ie=0;ie<V;++ie){if(S=G.charCodeAt(ie),S>55295&&S<57344){if(!te){if(S>56319){(R-=3)>-1&&le.push(239,191,189);continue}else if(ie+1===V){(R-=3)>-1&&le.push(239,191,189);continue}te=S;continue}if(S<56320){(R-=3)>-1&&le.push(239,191,189),te=S;continue}S=(te-55296<<10|S-56320)+65536}else te&&(R-=3)>-1&&le.push(239,191,189);if(te=null,S<128){if((R-=1)<0)break;le.push(S)}else if(S<2048){if((R-=2)<0)break;le.push(S>>6|192,S&63|128)}else if(S<65536){if((R-=3)<0)break;le.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((R-=4)<0)break;le.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return le}function J(G){const R=[];for(let S=0;S<G.length;++S)R.push(G.charCodeAt(S)&255);return R}function ce(G,R){let S,V,te;const le=[];for(let ie=0;ie<G.length&&!((R-=2)<0);++ie)S=G.charCodeAt(ie),V=S>>8,te=S%256,le.push(te),le.push(V);return le}function be(G){return e.toByteArray(Ae(G))}function Be(G,R,S,V){let te;for(te=0;te<V&&!(te+S>=R.length||te>=G.length);++te)R[te+S]=G[te];return te}function k(G,R){return G instanceof R||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===R.name}function W(G){return G!==G}const re=function(){const G="0123456789abcdef",R=new Array(256);for(let S=0;S<16;++S){const V=S*16;for(let te=0;te<16;++te)R[V+te]=G[S]+G[te]}return R}();function he(G){return typeof BigInt>"u"?me:G}function me(){throw new Error("BigInt not supported")}})(m5);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pC=function(n,e){return pC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},pC(n,e)};function Mo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");pC(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function xs(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function zi(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(A){return function(c){return l([A,c])}}function l(A){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=A[0]&2?i.return:A[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,A[1])).done)return s;switch(i=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,i=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){t.label=A[1];break}if(A[0]===6&&t.label<s[1]){t.label=s[1],s=A;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(A);break}s[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(n,t)}catch(c){A=[6,c],i=0}finally{r=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}var Xc=function(){function n(e,t,r,i){this.left=e,this.top=t,this.width=r,this.height=i}return n.prototype.add=function(e,t,r,i){return new n(this.left+e,this.top+t,this.width+r,this.height+i)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(i){return i.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),uT=function(n,e){return Xc.fromClientRect(n,e.getBoundingClientRect())},jx=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},jn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},iL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xie=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var D0=0;D0<iL.length;D0++)xie[iL.charCodeAt(D0)]=D0;var sL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var O0=0;O0<sL.length;O0++)Cp[sL.charCodeAt(O0)]=O0;var _ie=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=Cp[n.charCodeAt(r)],o=Cp[n.charCodeAt(r+1)],a=Cp[n.charCodeAt(r+2)],l=Cp[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},bie=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},Bie=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Pc=5,fT=6+5,bb=2,Eie=fT-Pc,v5=65536>>Pc,Cie=1<<Pc,Bb=Cie-1,Mie=1024>>Pc,Sie=v5+Mie,Tie=Sie,Iie=32,Rie=Tie+Iie,Fie=65536>>fT,Uie=1<<Eie,Lie=Uie-1,oL=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Pie=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Die=function(n,e){var t=_ie(n),r=Array.isArray(t)?Bie(t):new Uint32Array(t),i=Array.isArray(t)?bie(t):new Uint16Array(t),s=24,o=oL(i,s/2,r[4]/2),a=r[5]===2?oL(i,(s+r[4])/2):Pie(r,Math.ceil((s+r[4])/4));return new Oie(r[0],r[1],r[2],r[3],o,a)},Oie=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Pc],t=(t<<bb)+(e&Bb),this.data[t];if(e<=65535)return t=this.index[v5+(e-55296>>Pc)],t=(t<<bb)+(e&Bb),this.data[t];if(e<this.highStart)return t=Rie-Fie+(e>>fT),t=this.index[t],t+=e>>Pc&Lie,t=this.index[t],t=(t<<bb)+(e&Bb),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),aL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nie=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var N0=0;N0<aL.length;N0++)Nie[aL.charCodeAt(N0)]=N0;var kie="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",lL=50,Qie=1,y5=2,w5=3,Hie=4,zie=5,AL=7,x5=8,cL=9,hA=10,mC=11,uL=12,gC=13,Gie=14,Mp=15,vC=16,k0=17,Wd=18,Vie=19,fL=20,yC=21,Kd=22,Eb=23,Nu=24,Gi=25,Sp=26,Tp=27,ku=28,jie=29,wc=30,Wie=31,Q0=32,H0=33,wC=34,xC=35,_C=36,Vm=37,bC=38,ly=39,Ay=40,Cb=41,_5=42,Kie=43,Yie=[9001,65288],b5="!",Tt="",z0="",BC=Die(kie),La=[wc,_C],EC=[Qie,y5,w5,zie],B5=[hA,x5],hL=[Tp,Sp],$ie=EC.concat(B5),dL=[bC,ly,Ay,wC,xC],Xie=[Mp,gC],Zie=function(n,e){e===void 0&&(e="strict");var t=[],r=[],i=[];return n.forEach(function(s,o){var a=BC.get(s);if(a>lL?(i.push(!0),a-=lL):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(o),t.push(vC);if(a===Hie||a===mC){if(o===0)return r.push(o),t.push(wc);var l=t[o-1];return $ie.indexOf(l)===-1?(r.push(r[o-1]),t.push(l)):(r.push(o),t.push(wc))}if(r.push(o),a===Wie)return t.push(e==="strict"?yC:Vm);if(a===_5||a===jie)return t.push(wc);if(a===Kie)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Vm):t.push(wc);t.push(a)}),[r,t,i]},Mb=function(n,e,t,r){var i=r[t];if(Array.isArray(n)?n.indexOf(i)!==-1:n===i)for(var s=t;s<=r.length;){s++;var o=r[s];if(o===e)return!0;if(o!==hA)break}if(i===hA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var l=t;l<=r.length;){l++;var o=r[l];if(o===e)return!0;if(o!==hA)break}if(a!==hA)break}return!1},pL=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===hA)t--;else return r}return 0},Jie=function(n,e,t,r,i){if(t[r]===0)return Tt;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return Tt;var o=s-1,a=s+1,l=e[s],A=o>=0?e[o]:0,c=e[a];if(l===y5&&c===w5)return Tt;if(EC.indexOf(l)!==-1)return b5;if(EC.indexOf(c)!==-1||B5.indexOf(c)!==-1)return Tt;if(pL(s,e)===x5)return z0;if(BC.get(n[s])===mC||(l===Q0||l===H0)&&BC.get(n[a])===mC||l===AL||c===AL||l===cL||[hA,gC,Mp].indexOf(l)===-1&&c===cL||[k0,Wd,Vie,Nu,ku].indexOf(c)!==-1||pL(s,e)===Kd||Mb(Eb,Kd,s,e)||Mb([k0,Wd],yC,s,e)||Mb(uL,uL,s,e))return Tt;if(l===hA)return z0;if(l===Eb||c===Eb)return Tt;if(c===vC||l===vC)return z0;if([gC,Mp,yC].indexOf(c)!==-1||l===Gie||A===_C&&Xie.indexOf(l)!==-1||l===ku&&c===_C||c===fL||La.indexOf(c)!==-1&&l===Gi||La.indexOf(l)!==-1&&c===Gi||l===Tp&&[Vm,Q0,H0].indexOf(c)!==-1||[Vm,Q0,H0].indexOf(l)!==-1&&c===Sp||La.indexOf(l)!==-1&&hL.indexOf(c)!==-1||hL.indexOf(l)!==-1&&La.indexOf(c)!==-1||[Tp,Sp].indexOf(l)!==-1&&(c===Gi||[Kd,Mp].indexOf(c)!==-1&&e[a+1]===Gi)||[Kd,Mp].indexOf(l)!==-1&&c===Gi||l===Gi&&[Gi,ku,Nu].indexOf(c)!==-1)return Tt;if([Gi,ku,Nu,k0,Wd].indexOf(c)!==-1)for(var u=s;u>=0;){var f=e[u];if(f===Gi)return Tt;if([ku,Nu].indexOf(f)!==-1)u--;else break}if([Tp,Sp].indexOf(c)!==-1)for(var u=[k0,Wd].indexOf(l)!==-1?o:s;u>=0;){var f=e[u];if(f===Gi)return Tt;if([ku,Nu].indexOf(f)!==-1)u--;else break}if(bC===l&&[bC,ly,wC,xC].indexOf(c)!==-1||[ly,wC].indexOf(l)!==-1&&[ly,Ay].indexOf(c)!==-1||[Ay,xC].indexOf(l)!==-1&&c===Ay||dL.indexOf(l)!==-1&&[fL,Sp].indexOf(c)!==-1||dL.indexOf(c)!==-1&&l===Tp||La.indexOf(l)!==-1&&La.indexOf(c)!==-1||l===Nu&&La.indexOf(c)!==-1||La.concat(Gi).indexOf(l)!==-1&&c===Kd&&Yie.indexOf(n[a])===-1||La.concat(Gi).indexOf(c)!==-1&&l===Wd)return Tt;if(l===Cb&&c===Cb){for(var h=t[s],p=1;h>0&&(h--,e[h]===Cb);)p++;if(p%2!==0)return Tt}return l===Q0&&c===H0?Tt:z0},qie=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Zie(n,e.lineBreak),r=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(a){return[Gi,wc,_5].indexOf(a)!==-1?Vm:a}));var o=e.wordBreak==="keep-all"?s.map(function(a,l){return a&&n[l]>=19968&&n[l]<=40959}):void 0;return[r,i,o]},ese=function(){function n(e,t,r,i){this.codePoints=e,this.required=t===b5,this.start=r,this.end=i}return n.prototype.slice=function(){return jn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),tse=function(n,e){var t=jx(n),r=qie(t,e),i=r[0],s=r[1],o=r[2],a=t.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var c=Tt;A<a&&(c=Jie(t,s,i,++A,o))===Tt;);if(c!==Tt||A===a){var u=new ese(t,c,l,A);return l=A,{value:u,done:!1}}return{done:!0,value:null}}}},nse=1,rse=2,xg=4,mL=8,_w=10,gL=47,sm=92,ise=9,sse=32,G0=34,Yd=61,ose=35,ase=36,lse=37,V0=39,j0=40,$d=41,Ase=95,_i=45,cse=33,use=60,fse=62,hse=64,dse=91,pse=93,mse=61,gse=123,W0=63,vse=125,vL=124,yse=126,wse=128,yL=65533,Sb=42,Cc=43,xse=44,_se=58,bse=59,jm=46,Bse=0,Ese=8,Cse=11,Mse=14,Sse=31,Tse=127,Fo=-1,E5=48,C5=97,M5=101,Ise=102,Rse=117,Fse=122,S5=65,T5=69,I5=70,Use=85,Lse=90,Wr=function(n){return n>=E5&&n<=57},Pse=function(n){return n>=55296&&n<=57343},Qu=function(n){return Wr(n)||n>=S5&&n<=I5||n>=C5&&n<=Ise},Dse=function(n){return n>=C5&&n<=Fse},Ose=function(n){return n>=S5&&n<=Lse},Nse=function(n){return Dse(n)||Ose(n)},kse=function(n){return n>=wse},K0=function(n){return n===_w||n===ise||n===sse},bw=function(n){return Nse(n)||kse(n)||n===Ase},wL=function(n){return bw(n)||Wr(n)||n===_i},Qse=function(n){return n>=Bse&&n<=Ese||n===Cse||n>=Mse&&n<=Sse||n===Tse},ql=function(n,e){return n!==sm?!1:e!==_w},Y0=function(n,e,t){return n===_i?bw(e)||ql(e,t):bw(n)?!0:!!(n===sm&&ql(n,e))},Tb=function(n,e,t){return n===Cc||n===_i?Wr(e)?!0:e===jm&&Wr(t):Wr(n===jm?e:n)},Hse=function(n){var e=0,t=1;(n[e]===Cc||n[e]===_i)&&(n[e]===_i&&(t=-1),e++);for(var r=[];Wr(n[e]);)r.push(n[e++]);var i=r.length?parseInt(jn.apply(void 0,r),10):0;n[e]===jm&&e++;for(var s=[];Wr(n[e]);)s.push(n[e++]);var o=s.length,a=o?parseInt(jn.apply(void 0,s),10):0;(n[e]===T5||n[e]===M5)&&e++;var l=1;(n[e]===Cc||n[e]===_i)&&(n[e]===_i&&(l=-1),e++);for(var A=[];Wr(n[e]);)A.push(n[e++]);var c=A.length?parseInt(jn.apply(void 0,A),10):0;return t*(i+a*Math.pow(10,-o))*Math.pow(10,l*c)},zse={type:2},Gse={type:3},Vse={type:4},jse={type:13},Wse={type:8},Kse={type:21},Yse={type:9},$se={type:10},Xse={type:11},Zse={type:12},Jse={type:14},$0={type:23},qse={type:1},eoe={type:25},toe={type:24},noe={type:26},roe={type:27},ioe={type:28},soe={type:29},ooe={type:31},CC={type:32},R5=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(jx(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==CC;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case G0:return this.consumeStringToken(G0);case ose:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(wL(t)||ql(r,i)){var s=Y0(t,r,i)?rse:nse,o=this.consumeName();return{type:5,value:o,flags:s}}break;case ase:if(this.peekCodePoint(0)===Yd)return this.consumeCodePoint(),jse;break;case V0:return this.consumeStringToken(V0);case j0:return zse;case $d:return Gse;case Sb:if(this.peekCodePoint(0)===Yd)return this.consumeCodePoint(),Jse;break;case Cc:if(Tb(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case xse:return Vse;case _i:var a=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(Tb(a,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Y0(a,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===_i&&A===fse)return this.consumeCodePoint(),this.consumeCodePoint(),toe;break;case jm:if(Tb(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case gL:if(this.peekCodePoint(0)===Sb)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===Sb&&(c=this.consumeCodePoint(),c===gL))return this.consumeToken();if(c===Fo)return this.consumeToken()}break;case _se:return noe;case bse:return roe;case use:if(this.peekCodePoint(0)===cse&&this.peekCodePoint(1)===_i&&this.peekCodePoint(2)===_i)return this.consumeCodePoint(),this.consumeCodePoint(),eoe;break;case hse:var u=this.peekCodePoint(0),f=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Y0(u,f,h)){var o=this.consumeName();return{type:7,value:o}}break;case dse:return ioe;case sm:if(ql(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case pse:return soe;case mse:if(this.peekCodePoint(0)===Yd)return this.consumeCodePoint(),Wse;break;case gse:return Xse;case vse:return Zse;case Rse:case Use:var p=this.peekCodePoint(0),d=this.peekCodePoint(1);return p===Cc&&(Qu(d)||d===W0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case vL:if(this.peekCodePoint(0)===Yd)return this.consumeCodePoint(),Yse;if(this.peekCodePoint(0)===vL)return this.consumeCodePoint(),Kse;break;case yse:if(this.peekCodePoint(0)===Yd)return this.consumeCodePoint(),$se;break;case Fo:return CC}return K0(e)?(this.consumeWhiteSpace(),ooe):Wr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):bw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:jn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Qu(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===W0&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(jn.apply(void 0,e.map(function(l){return l===W0?E5:l})),16),s=parseInt(jn.apply(void 0,e.map(function(l){return l===W0?I5:l})),16);return{type:30,start:i,end:s}}var o=parseInt(jn.apply(void 0,e),16);if(this.peekCodePoint(0)===_i&&Qu(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];Qu(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(jn.apply(void 0,a),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===j0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===j0?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fo)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===V0||t===G0){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fo||this.peekCodePoint(0)===$d)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),$0)}for(;;){var i=this.consumeCodePoint();if(i===Fo||i===$d)return{type:22,value:jn.apply(void 0,e)};if(K0(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fo||this.peekCodePoint(0)===$d?(this.consumeCodePoint(),{type:22,value:jn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),$0);if(i===G0||i===V0||i===j0||Qse(i))return this.consumeBadUrlRemnants(),$0;if(i===sm)if(ql(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),$0;else e.push(i)}},n.prototype.consumeWhiteSpace=function(){for(;K0(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===$d||e===Fo)return;ql(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var i=Math.min(t,e);r+=jn.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var i=this._value[r];if(i===Fo||i===void 0||i===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(i===_w)return this._value.splice(0,r),qse;if(i===sm){var s=this._value[r+1];s!==Fo&&s!==void 0&&(s===_w?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):ql(i,s)&&(t+=this.consumeStringSlice(r),t+=jn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=xg,r=this.peekCodePoint(0);for((r===Cc||r===_i)&&e.push(this.consumeCodePoint());Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===jm&&Wr(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=mL;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===T5||r===M5)&&((i===Cc||i===_i)&&Wr(s)||Wr(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=mL;Wr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Hse(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Y0(i,s,o)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return i===lse?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Qu(e)){for(var t=jn(e);Qu(this.peekCodePoint(0))&&t.length<6;)t+=jn(this.consumeCodePoint());K0(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Pse(r)||r>1114111?yL:r}return e===Fo?yL:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(wL(t))e+=jn(t);else if(ql(t,this.peekCodePoint(0)))e+=jn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),F5=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new R5;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||aoe(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?CC:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),_g=function(n){return n.type===15},Wx=function(n){return n.type===17},zn=function(n){return n.type===20},MC=function(n,e){return zn(n)&&n.value===e},Kx=function(n){return n.type!==31&&n.type!==4},_a=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},aoe=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},kA=function(n){return n.type===17||n.type===15},ir=function(n){return n.type===16||kA(n)},U5=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Dr={type:17,number:0,flags:xg},hT={type:16,number:50,flags:xg},dA={type:16,number:100,flags:xg},Ip=function(n,e,t){var r=n[0],i=n[1];return[An(r,e),An(typeof i<"u"?i:r,t)]},An=function(n,e){if(n.type===16)return n.number/100*e;if(_g(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},L5="deg",P5="grad",D5="rad",O5="turn",Yx={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case L5:return Math.PI*e.number/180;case P5:return Math.PI/200*e.number;case D5:return e.number;case O5:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},N5=function(n){return n.type===15&&(n.unit===L5||n.unit===P5||n.unit===D5||n.unit===O5)},k5=function(n){var e=n.filter(zn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Dr,Dr];case"to top":case"bottom":return Ds(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Dr,dA];case"to right":case"left":return Ds(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dA,dA];case"to bottom":case"top":return Ds(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dA,Dr];case"to left":case"right":return Ds(270)}return 0},Ds=function(n){return Math.PI*n/180},SA={name:"color",parse:function(n,e){if(e.type===18){var t=loe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return pA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return pA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return pA(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return pA(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var a=Wm[e.value.toUpperCase()];if(typeof a<"u")return a}return Wm.TRANSPARENT}},fh=function(n){return(255&n)===0},wr=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,i=255&n>>24;return e<255?"rgba("+i+","+r+","+t+","+e/255+")":"rgb("+i+","+r+","+t+")"},pA=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},xL=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},_L=function(n,e){var t=e.filter(Kx);if(t.length===3){var r=t.map(xL),i=r[0],s=r[1],o=r[2];return pA(i,s,o,1)}if(t.length===4){var a=t.map(xL),i=a[0],s=a[1],o=a[2],l=a[3];return pA(i,s,o,l)}return 0};function Ib(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var bL=function(n,e){var t=e.filter(Kx),r=t[0],i=t[1],s=t[2],o=t[3],a=(r.type===17?Ds(r.number):Yx.parse(n,r))/(Math.PI*2),l=ir(i)?i.number/100:0,A=ir(s)?s.number/100:0,c=typeof o<"u"&&ir(o)?An(o,1):1;if(l===0)return pA(A*255,A*255,A*255,1);var u=A<=.5?A*(l+1):A+l-A*l,f=A*2-u,h=Ib(f,u,a+1/3),p=Ib(f,u,a),d=Ib(f,u,a-1/3);return pA(h*255,p*255,d*255,c)},loe={hsl:bL,hsla:bL,rgb:_L,rgba:_L},BL=function(n,e){return SA.parse(n,F5.create(e).parseComponentValue())},Wm={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Aoe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(zn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},coe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$x=function(n,e){var t=SA.parse(n,e[0]),r=e[1];return r&&ir(r)?{color:t,stop:r}:{color:t,stop:null}},EL=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Dr),r.stop===null&&(r.stop=dA);for(var i=[],s=0,o=0;o<n.length;o++){var a=n[o].stop;if(a!==null){var l=An(a,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var A=null,o=0;o<i.length;o++){var c=i[o];if(c===null)A===null&&(A=o);else if(A!==null){for(var u=o-A,f=i[A-1],h=(c-f)/(u+1),p=1;p<=u;p++)i[A+p-1]=h*p;A=null}}return n.map(function(d,g){var m=d.color;return{color:m,stop:Math.max(Math.min(1,i[g]/e),0)}})},uoe=function(n,e,t){var r=e/2,i=t/2,s=An(n[0],e)-r,o=i-An(n[1],t);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},foe=function(n,e,t){var r=typeof n=="number"?n:uoe(n,e,t),i=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,o=t/2,a=i/2,l=Math.sin(r-Math.PI/2)*a,A=Math.cos(r-Math.PI/2)*a;return[i,s-A,s+A,o-l,o+l]},co=function(n,e){return Math.sqrt(n*n+e*e)},CL=function(n,e,t,r,i){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(o,a){var l=a[0],A=a[1],c=co(t-l,r-A);return(i?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},hoe=function(n,e,t,r,i){var s=0,o=0;switch(n.size){case 0:n.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(n.shape===0)s=o=Math.min(co(e,t),co(e,t-i),co(e-r,t),co(e-r,t-i));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-r)),l=CL(r,i,e,t,!0),A=l[0],c=l[1];s=co(A-e,(c-t)/a),o=a*s}break;case 1:n.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(n.shape===0)s=o=Math.max(co(e,t),co(e,t-i),co(e-r,t),co(e-r,t-i));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-r)),u=CL(r,i,e,t,!1),A=u[0],c=u[1];s=co(A-e,(c-t)/a),o=a*s}break}return Array.isArray(n.size)&&(s=An(n.size[0],r),o=n.size.length===2?An(n.size[1],i):s),[s,o]},doe=function(n,e){var t=Ds(180),r=[];return _a(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){t=k5(i);return}else if(N5(o)){t=Yx.parse(n,o);return}}var a=$x(n,i);r.push(a)}),{angle:t,stops:r,type:1}},X0=function(n,e){var t=Ds(180),r=[];return _a(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=k5(i);return}else if(N5(o)){t=(Yx.parse(n,o)+Ds(270))%Ds(360);return}}var a=$x(n,i);r.push(a)}),{angle:t,stops:r,type:1}},poe=function(n,e){var t=Ds(180),r=[],i=1,s=0,o=3,a=[];return _a(e).forEach(function(l,A){var c=l[0];if(A===0){if(zn(c)&&c.value==="linear"){i=1;return}else if(zn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=SA.parse(n,c.values[0]);r.push({stop:Dr,color:u})}else if(c.name==="to"){var u=SA.parse(n,c.values[0]);r.push({stop:dA,color:u})}else if(c.name==="color-stop"){var f=c.values.filter(Kx);if(f.length===2){var u=SA.parse(n,f[1]),h=f[0];Wx(h)&&r.push({stop:{type:16,number:h.number*100,flags:h.flags},color:u})}}}}),i===1?{angle:(t+Ds(180))%Ds(360),stops:r,type:i}:{size:o,shape:s,stops:r,position:a,type:i}},Q5="closest-side",H5="farthest-side",z5="closest-corner",G5="farthest-corner",V5="circle",j5="ellipse",W5="cover",K5="contain",moe=function(n,e){var t=0,r=3,i=[],s=[];return _a(e).forEach(function(o,a){var l=!0;if(a===0){var A=!1;l=o.reduce(function(u,f){if(A)if(zn(f))switch(f.value){case"center":return s.push(hT),u;case"top":case"left":return s.push(Dr),u;case"right":case"bottom":return s.push(dA),u}else(ir(f)||kA(f))&&s.push(f);else if(zn(f))switch(f.value){case V5:return t=0,!1;case j5:return t=1,!1;case"at":return A=!0,!1;case Q5:return r=0,!1;case W5:case H5:return r=1,!1;case K5:case z5:return r=2,!1;case G5:return r=3,!1}else if(kA(f)||ir(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return u},l)}if(l){var c=$x(n,o);i.push(c)}}),{size:r,shape:t,stops:i,position:s,type:2}},Z0=function(n,e){var t=0,r=3,i=[],s=[];return _a(e).forEach(function(o,a){var l=!0;if(a===0?l=o.reduce(function(c,u){if(zn(u))switch(u.value){case"center":return s.push(hT),!1;case"top":case"left":return s.push(Dr),!1;case"right":case"bottom":return s.push(dA),!1}else if(ir(u)||kA(u))return s.push(u),!1;return c},l):a===1&&(l=o.reduce(function(c,u){if(zn(u))switch(u.value){case V5:return t=0,!1;case j5:return t=1,!1;case K5:case Q5:return r=0,!1;case H5:return r=1,!1;case z5:return r=2,!1;case W5:case G5:return r=3,!1}else if(kA(u)||ir(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},l)),l){var A=$x(n,o);i.push(A)}}),{size:r,shape:t,stops:i,position:s,type:2}},goe=function(n){return n.type===1},voe=function(n){return n.type===2},dT={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=Y5[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function yoe(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Y5[n.name])}var Y5={"linear-gradient":doe,"-moz-linear-gradient":X0,"-ms-linear-gradient":X0,"-o-linear-gradient":X0,"-webkit-linear-gradient":X0,"radial-gradient":moe,"-moz-radial-gradient":Z0,"-ms-radial-gradient":Z0,"-o-radial-gradient":Z0,"-webkit-radial-gradient":Z0,"-webkit-gradient":poe},woe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return Kx(r)&&yoe(r)}).map(function(r){return dT.parse(n,r)})}},xoe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(zn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_oe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return _a(e).map(function(t){return t.filter(ir)}).map(U5)}},boe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return _a(e).map(function(t){return t.filter(zn).map(function(r){return r.value}).join(" ")}).map(Boe)}},Boe=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},hh;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(hh||(hh={}));var Eoe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return _a(e).map(function(t){return t.filter(Coe)})}},Coe=function(n){return zn(n)||ir(n)},Xx=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Moe=Xx("top"),Soe=Xx("right"),Toe=Xx("bottom"),Ioe=Xx("left"),Zx=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return U5(t.filter(ir))}}},Roe=Zx("top-left"),Foe=Zx("top-right"),Uoe=Zx("bottom-right"),Loe=Zx("bottom-left"),Jx=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Poe=Jx("top"),Doe=Jx("right"),Ooe=Jx("bottom"),Noe=Jx("left"),qx=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _g(t)?t.number:0}}},koe=qx("top"),Qoe=qx("right"),Hoe=qx("bottom"),zoe=qx("left"),Goe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Voe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},joe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(zn).reduce(function(t,r){return t|Woe(r.value)},0)}},Woe=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Koe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Yoe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Bw;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Bw||(Bw={}));var $oe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Bw.STRICT;case"normal":default:return Bw.NORMAL}}},Xoe={name:"line-height",initialValue:"normal",prefix:!1,type:4},ML=function(n,e){return zn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:ir(n)?An(n,e):e},Zoe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:dT.parse(n,e)}},Joe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},qoe={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},e_=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},eae=e_("top"),tae=e_("right"),nae=e_("bottom"),rae=e_("left"),iae={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(zn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},sae={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},t_=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},oae=t_("top"),aae=t_("right"),lae=t_("bottom"),Aae=t_("left"),cae={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},uae={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},fae={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&MC(e[0],"none")?[]:_a(e).map(function(t){for(var r={color:Wm.TRANSPARENT,offsetX:Dr,offsetY:Dr,blur:Dr},i=0,s=0;s<t.length;s++){var o=t[s];kA(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:r.blur=o,i++):r.color=SA.parse(n,o)}return r})}},hae={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},dae={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=gae[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},pae=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},mae=function(n){var e=n.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,i,s,o,a]:null},gae={matrix:pae,matrix3d:mae},SL={type:16,number:50,flags:xg},vae=[SL,SL],yae={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(ir);return t.length!==2?vae:[t[0],t[1]]}},wae={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},om;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(om||(om={}));var xae={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return om.BREAK_ALL;case"keep-all":return om.KEEP_ALL;case"normal":default:return om.NORMAL}}},_ae={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(Wx(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},$5={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},bae={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return Wx(e)?e.number:1}},Bae={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Eae={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(zn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Cae={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},Mae={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Sae={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(Wx(e))return e.number;if(zn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Tae={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(zn).map(function(t){return t.value})}},Iae={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pr=function(n,e){return(n&e)!==0},Rae={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(_g).map(function(t){return $5.parse(n,t)})}},Fae={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&MC(e[0],"none")?[]:_a(e).map(function(t){for(var r={color:255,offsetX:Dr,offsetY:Dr,blur:Dr,spread:Dr,inset:!1},i=0,s=0;s<t.length;s++){var o=t[s];MC(o,"inset")?r.inset=!0:kA(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:i===2?r.blur=o:r.spread=o,i++):r.color=SA.parse(n,o)}return r})}},Uae={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(zn).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},Lae={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Pae={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return _g(e)?e.number:0}},Dae=function(){function n(e,t){var r,i;this.animationDuration=qe(e,Rae,t.animationDuration),this.backgroundClip=qe(e,Aoe,t.backgroundClip),this.backgroundColor=qe(e,coe,t.backgroundColor),this.backgroundImage=qe(e,woe,t.backgroundImage),this.backgroundOrigin=qe(e,xoe,t.backgroundOrigin),this.backgroundPosition=qe(e,_oe,t.backgroundPosition),this.backgroundRepeat=qe(e,boe,t.backgroundRepeat),this.backgroundSize=qe(e,Eoe,t.backgroundSize),this.borderTopColor=qe(e,Moe,t.borderTopColor),this.borderRightColor=qe(e,Soe,t.borderRightColor),this.borderBottomColor=qe(e,Toe,t.borderBottomColor),this.borderLeftColor=qe(e,Ioe,t.borderLeftColor),this.borderTopLeftRadius=qe(e,Roe,t.borderTopLeftRadius),this.borderTopRightRadius=qe(e,Foe,t.borderTopRightRadius),this.borderBottomRightRadius=qe(e,Uoe,t.borderBottomRightRadius),this.borderBottomLeftRadius=qe(e,Loe,t.borderBottomLeftRadius),this.borderTopStyle=qe(e,Poe,t.borderTopStyle),this.borderRightStyle=qe(e,Doe,t.borderRightStyle),this.borderBottomStyle=qe(e,Ooe,t.borderBottomStyle),this.borderLeftStyle=qe(e,Noe,t.borderLeftStyle),this.borderTopWidth=qe(e,koe,t.borderTopWidth),this.borderRightWidth=qe(e,Qoe,t.borderRightWidth),this.borderBottomWidth=qe(e,Hoe,t.borderBottomWidth),this.borderLeftWidth=qe(e,zoe,t.borderLeftWidth),this.boxShadow=qe(e,Fae,t.boxShadow),this.color=qe(e,Goe,t.color),this.direction=qe(e,Voe,t.direction),this.display=qe(e,joe,t.display),this.float=qe(e,Koe,t.cssFloat),this.fontFamily=qe(e,Cae,t.fontFamily),this.fontSize=qe(e,Mae,t.fontSize),this.fontStyle=qe(e,Iae,t.fontStyle),this.fontVariant=qe(e,Tae,t.fontVariant),this.fontWeight=qe(e,Sae,t.fontWeight),this.letterSpacing=qe(e,Yoe,t.letterSpacing),this.lineBreak=qe(e,$oe,t.lineBreak),this.lineHeight=qe(e,Xoe,t.lineHeight),this.listStyleImage=qe(e,Zoe,t.listStyleImage),this.listStylePosition=qe(e,Joe,t.listStylePosition),this.listStyleType=qe(e,qoe,t.listStyleType),this.marginTop=qe(e,eae,t.marginTop),this.marginRight=qe(e,tae,t.marginRight),this.marginBottom=qe(e,nae,t.marginBottom),this.marginLeft=qe(e,rae,t.marginLeft),this.opacity=qe(e,bae,t.opacity);var s=qe(e,iae,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=qe(e,sae,t.overflowWrap),this.paddingTop=qe(e,oae,t.paddingTop),this.paddingRight=qe(e,aae,t.paddingRight),this.paddingBottom=qe(e,lae,t.paddingBottom),this.paddingLeft=qe(e,Aae,t.paddingLeft),this.paintOrder=qe(e,Uae,t.paintOrder),this.position=qe(e,uae,t.position),this.textAlign=qe(e,cae,t.textAlign),this.textDecorationColor=qe(e,Bae,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=qe(e,Eae,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=qe(e,fae,t.textShadow),this.textTransform=qe(e,hae,t.textTransform),this.transform=qe(e,dae,t.transform),this.transformOrigin=qe(e,yae,t.transformOrigin),this.visibility=qe(e,wae,t.visibility),this.webkitTextStrokeColor=qe(e,Lae,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=qe(e,Pae,t.webkitTextStrokeWidth),this.wordBreak=qe(e,xae,t.wordBreak),this.zIndex=qe(e,_ae,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return fh(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return pr(this.display,4)||pr(this.display,33554432)||pr(this.display,268435456)||pr(this.display,536870912)||pr(this.display,67108864)||pr(this.display,134217728)},n}(),qe=function(n,e,t){var r=new R5,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(i);var s=new F5(r.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(n,zn(o)?o.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return Yx.parse(n,s.parseComponentValue());case"color":return SA.parse(n,s.parseComponentValue());case"image":return dT.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return kA(a)?a:Dr;case"length-percentage":var l=s.parseComponentValue();return ir(l)?l:Dr;case"time":return $5.parse(n,s.parseComponentValue())}break}},Oae="data-html2canvas-debug",Nae=function(n){var e=n.getAttribute(Oae);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},TL=function(n,e){var t=Nae(n);return t===1||e===t},ba=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,TL(t,3))debugger;this.styles=new Dae(e,window.getComputedStyle(t,null)),Nle(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=uT(this.context,t),TL(t,4)&&(this.flags|=16)}return n}(),kae="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",IL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var J0=0;J0<IL.length;J0++)Rp[IL.charCodeAt(J0)]=J0;var Qae=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=Rp[n.charCodeAt(r)],o=Rp[n.charCodeAt(r+1)],a=Rp[n.charCodeAt(r+2)],l=Rp[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},Hae=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},zae=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},Dc=5,pT=6+5,Rb=2,Gae=pT-Dc,X5=65536>>Dc,Vae=1<<Dc,Fb=Vae-1,jae=1024>>Dc,Wae=X5+jae,Kae=Wae,Yae=32,$ae=Kae+Yae,Xae=65536>>pT,Zae=1<<Gae,Jae=Zae-1,RL=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},qae=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},ele=function(n,e){var t=Qae(n),r=Array.isArray(t)?zae(t):new Uint32Array(t),i=Array.isArray(t)?Hae(t):new Uint16Array(t),s=24,o=RL(i,s/2,r[4]/2),a=r[5]===2?RL(i,(s+r[4])/2):qae(r,Math.ceil((s+r[4])/4));return new tle(r[0],r[1],r[2],r[3],o,a)},tle=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>Dc],t=(t<<Rb)+(e&Fb),this.data[t];if(e<=65535)return t=this.index[X5+(e-55296>>Dc)],t=(t<<Rb)+(e&Fb),this.data[t];if(e<this.highStart)return t=$ae-Xae+(e>>pT),t=this.index[t],t+=e>>Dc&Jae,t=this.index[t],t=(t<<Rb)+(e&Fb),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),FL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nle=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var q0=0;q0<FL.length;q0++)nle[FL.charCodeAt(q0)]=q0;var rle=1,Ub=2,Lb=3,UL=4,LL=5,ile=7,PL=8,Pb=9,Db=10,DL=11,OL=12,NL=13,kL=14,Ob=15,sle=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ole=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},ale=ele(kae),Cs="",Nb="",lle=function(n){return ale.get(n)},Ale=function(n,e,t){var r=t-2,i=e[r],s=e[t-1],o=e[t];if(s===Ub&&o===Lb)return Cs;if(s===Ub||s===Lb||s===UL||o===Ub||o===Lb||o===UL)return Nb;if(s===PL&&[PL,Pb,DL,OL].indexOf(o)!==-1||(s===DL||s===Pb)&&(o===Pb||o===Db)||(s===OL||s===Db)&&o===Db||o===NL||o===LL||o===ile||s===rle)return Cs;if(s===NL&&o===kL){for(;i===LL;)i=e[--r];if(i===kL)return Cs}if(s===Ob&&o===Ob){for(var a=0;i===Ob;)a++,i=e[--r];if(a%2===0)return Cs}return Nb},cle=function(n){var e=sle(n),t=e.length,r=0,i=0,s=e.map(lle);return{next:function(){if(r>=t)return{done:!0,value:null};for(var o=Cs;r<t&&(o=Ale(e,s,++r))===Cs;);if(o!==Cs||r===t){var a=ole.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},ule=function(n){for(var e=cle(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},fle=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height=e+"px",r.style.display="block",n.body.appendChild(r),t.selectNode(r);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(n.body.removeChild(r),s===e)return!0}}return!1},hle=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=jx(r.data).map(function(l){return jn(l)}),s=0,o={},a=i.every(function(l,A){t.setStart(r,s),t.setEnd(r,s+l.length);var c=t.getBoundingClientRect();s+=l.length;var u=c.x>o.x||c.y>o.y;return o=c,A===0?!0:u});return n.body.removeChild(e),a},dle=function(){return typeof new Image().crossOrigin<"u"},ple=function(){return typeof new XMLHttpRequest().responseType=="string"},mle=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},QL=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},gle=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var o=SC(t,t,0,0,i);return r.fillStyle="red",r.fillRect(0,0,t,t),HL(o).then(function(a){r.drawImage(a,0,0);var l=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var A=n.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=t+"px",QL(l)?HL(SC(t,t,0,0,A)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),QL(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},SC=function(n,e,t,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},HL=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Ki={get SUPPORT_RANGE_BOUNDS(){var n=fle(document);return Object.defineProperty(Ki,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Ki.SUPPORT_RANGE_BOUNDS&&hle(document);return Object.defineProperty(Ki,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=mle(document);return Object.defineProperty(Ki,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?gle(document):Promise.resolve(!1);return Object.defineProperty(Ki,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=dle();return Object.defineProperty(Ki,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=ple();return Object.defineProperty(Ki,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ki,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ki,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},am=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),vle=function(n,e,t,r){var i=xle(e,t),s=[],o=0;return i.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(Ki.SUPPORT_RANGE_BOUNDS){var l=zL(r,o,a.length).getClientRects();if(l.length>1){var A=mT(a),c=0;A.forEach(function(f){s.push(new am(f,Xc.fromDOMRectList(n,zL(r,c+o,f.length).getClientRects()))),c+=f.length})}else s.push(new am(a,Xc.fromDOMRectList(n,l)))}else{var u=r.splitText(a.length);s.push(new am(a,yle(n,r))),r=u}else Ki.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),s},yle=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=uT(n,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return Xc.EMPTY},zL=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(n,e),i.setEnd(n,e+t),i},mT=function(n){if(Ki.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return ule(n)},wle=function(n,e){if(Ki.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return ble(n,e)},xle=function(n,e){return e.letterSpacing!==0?mT(n):wle(n,e)},_le=[32,160,4961,65792,65793,4153,4241],ble=function(n,e){for(var t=tse(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var o=i.value.slice(),a=jx(o),l="";a.forEach(function(A){_le.indexOf(A)===-1?l+=jn(A):(l.length&&r.push(l),r.push(jn(A)),l="")}),l.length&&r.push(l)}};!(i=t.next()).done;)s();return r},Ble=function(){function n(e,t,r){this.text=Ele(t.data,r.textTransform),this.textBounds=vle(e,this.text,r,t)}return n}(),Ele=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(Cle,Mle);case 2:return n.toUpperCase();default:return n}},Cle=/(^|\s|:|-|\(|\))([a-z])/g,Mle=function(n,e,t){return n.length>0?e+t.toUpperCase():n},Z5=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(ba),J5=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(ba),q5=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=new XMLSerializer,o=uT(t,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(ba),e6=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(ba),TC=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(ba),Sle=[{type:15,flags:0,unit:"px",number:3}],Tle=[{type:16,flags:0,number:50}],Ile=function(n){return n.width>n.height?new Xc(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new Xc(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},Rle=function(n){var e=n.type===Fle?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Ew="checkbox",Cw="radio",Fle="password",GL=707406591,gT=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=Rle(r),(i.type===Ew||i.type===Cw)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Ile(i.bounds)),i.type){case Ew:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Sle;break;case Cw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Tle;break}return i}return e}(ba),t6=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(ba),n6=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(ba),r6=function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=Lle(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?BL(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Wm.TRANSPARENT,o=r.contentWindow.document.body?BL(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Wm.TRANSPARENT;i.backgroundColor=fh(s)?fh(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(ba),Ule=["OL","UL","MENU"],cy=function(n,e,t,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Ole(i)&&i.data.trim().length>0)t.textNodes.push(new Ble(n,i,t.styles));else if(s6(i))if(Kle(i)&&i.assignedNodes)i.assignedNodes().forEach(function(a){return cy(n,a,t,r)});else{var o=i6(n,i);o.styles.isVisible()&&(Ple(i,o,r)?o.flags|=4:Dle(o.styles)&&(o.flags|=2),Ule.indexOf(i.tagName)!==-1&&(o.flags|=8),t.elements.push(o),i.slot,i.shadowRoot?cy(n,i.shadowRoot,o,r):!a6(i)&&!o6(i)&&!l6(i)&&cy(n,i,o,r))}},i6=function(n,e){return jle(e)?new Z5(n,e):Vle(e)?new J5(n,e):o6(e)?new q5(n,e):Qle(e)?new e6(n,e):Hle(e)?new TC(n,e):zle(e)?new gT(n,e):l6(e)?new t6(n,e):a6(e)?new n6(n,e):Wle(e)?new r6(n,e):new ba(n,e)},Lle=function(n,e){var t=i6(n,e);return t.flags|=4,cy(n,e,t,t),t},Ple=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Gle(n)&&t.styles.isTransparent()},Dle=function(n){return n.isPositioned()||n.isFloating()},Ole=function(n){return n.nodeType===Node.TEXT_NODE},s6=function(n){return n.nodeType===Node.ELEMENT_NODE},Nle=function(n){return s6(n)&&typeof n.style<"u"&&!kle(n)},kle=function(n){return typeof n.className=="object"},Qle=function(n){return n.tagName==="LI"},Hle=function(n){return n.tagName==="OL"},zle=function(n){return n.tagName==="INPUT"},o6=function(n){return n.tagName==="svg"},Gle=function(n){return n.tagName==="BODY"},Vle=function(n){return n.tagName==="CANVAS"},jle=function(n){return n.tagName==="IMG"},Wle=function(n){return n.tagName==="IFRAME"},a6=function(n){return n.tagName==="TEXTAREA"},l6=function(n){return n.tagName==="SELECT"},Kle=function(n){return n.tagName==="SLOT"},VL={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},jL={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Yle={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$le={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Hu=function(n,e,t,r,i,s){return n<e||n>t?vT(n,i,s.length>0):r.integers.reduce(function(o,a,l){for(;n>=a;)n-=a,o+=r.values[l];return o},"")+s},A6=function(n,e,t,r){var i="";do t||n--,i=r(n)+i,n/=e;while(n*e>=e);return i},Gn=function(n,e,t,r,i){var s=t-e+1;return(n<0?"-":"")+(A6(Math.abs(n),s,r,function(o){return jn(Math.floor(o%s)+e)})+i)},oc=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return A6(Math.abs(n),r,!1,function(i){return e[Math.floor(i%r)]})+t},nf=1,Yl=2,$l=4,Fp=8,Pa=function(n,e,t,r,i,s){if(n<-9999||n>9999)return vT(n,4,i.length>0);var o=Math.abs(n),a=i;if(o===0)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;A===0&&pr(s,nf)&&a!==""?a=e[A]+a:A>1||A===1&&l===0||A===1&&l===1&&pr(s,Yl)||A===1&&l===1&&pr(s,$l)&&n>100||A===1&&l>1&&pr(s,Fp)?a=e[A]+(l>0?t[l-1]:"")+a:A===1&&l>0&&(a=t[l-1]+a),o=Math.floor(o/10)}return(n<0?r:"")+a},WL="",KL="",YL="",kb="",vT=function(n,e,t){var r=t?". ":"",i=t?"":"",s=t?", ":"",o=t?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=Gn(n,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return oc(n,"",i);case 6:return Hu(n,1,3999,VL,3,r).toLowerCase();case 7:return Hu(n,1,3999,VL,3,r);case 8:return Gn(n,945,969,!1,r);case 9:return Gn(n,97,122,!1,r);case 10:return Gn(n,65,90,!1,r);case 11:return Gn(n,1632,1641,!0,r);case 12:case 49:return Hu(n,1,9999,jL,3,r);case 35:return Hu(n,1,9999,jL,3,r).toLowerCase();case 13:return Gn(n,2534,2543,!0,r);case 14:case 30:return Gn(n,6112,6121,!0,r);case 15:return oc(n,"",i);case 16:return oc(n,"",i);case 17:case 48:return Pa(n,"",WL,"",i,Yl|$l|Fp);case 47:return Pa(n,"",KL,"",i,nf|Yl|$l|Fp);case 42:return Pa(n,"",WL,"",i,Yl|$l|Fp);case 41:return Pa(n,"",KL,"",i,nf|Yl|$l|Fp);case 26:return Pa(n,"","",YL,i,0);case 25:return Pa(n,"","",YL,i,nf|Yl|$l);case 31:return Pa(n,"","",kb,s,nf|Yl|$l);case 33:return Pa(n,"","",kb,s,0);case 32:return Pa(n,"","",kb,s,nf|Yl|$l);case 18:return Gn(n,2406,2415,!0,r);case 20:return Hu(n,1,19999,$le,3,r);case 21:return Gn(n,2790,2799,!0,r);case 22:return Gn(n,2662,2671,!0,r);case 22:return Hu(n,1,10999,Yle,3,r);case 23:return oc(n,"");case 24:return oc(n,"");case 27:return Gn(n,3302,3311,!0,r);case 28:return oc(n,"",i);case 29:return oc(n,"",i);case 34:return Gn(n,3792,3801,!0,r);case 37:return Gn(n,6160,6169,!0,r);case 38:return Gn(n,4160,4169,!0,r);case 39:return Gn(n,2918,2927,!0,r);case 40:return Gn(n,1776,1785,!0,r);case 43:return Gn(n,3046,3055,!0,r);case 44:return Gn(n,3174,3183,!0,r);case 45:return Gn(n,3664,3673,!0,r);case 46:return Gn(n,3872,3881,!0,r);case 3:default:return Gn(n,48,57,!0,r)}},$L;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})($L||($L={}));var Xle=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),Ke=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),zu=function(n,e,t){return new Ke(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},ev=function(){function n(e,t,r,i){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=i}return n.prototype.subdivide=function(e,t){var r=zu(this.start,this.startControl,e),i=zu(this.startControl,this.endControl,e),s=zu(this.endControl,this.end,e),o=zu(r,i,e),a=zu(i,s,e),l=zu(o,a,e);return t?new n(this.start,r,o,l):new n(l,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Ts=function(n){return n.type===1},Zle=function(){function n(e){var t=e.styles,r=e.bounds,i=Ip(t.borderTopLeftRadius,r.width,r.height),s=i[0],o=i[1],a=Ip(t.borderTopRightRadius,r.width,r.height),l=a[0],A=a[1],c=Ip(t.borderBottomRightRadius,r.width,r.height),u=c[0],f=c[1],h=Ip(t.borderBottomLeftRadius,r.width,r.height),p=h[0],d=h[1],g=[];g.push((s+l)/r.width),g.push((p+u)/r.width),g.push((o+d)/r.height),g.push((A+f)/r.height);var m=Math.max.apply(Math,g);m>1&&(s/=m,o/=m,l/=m,A/=m,u/=m,f/=m,p/=m,d/=m);var y=r.width-l,w=r.height-f,x=r.width-u,_=r.height-d,C=t.borderTopWidth,T=t.borderRightWidth,b=t.borderBottomWidth,M=t.borderLeftWidth,P=An(t.paddingTop,e.bounds.width),Y=An(t.paddingRight,e.bounds.width),H=An(t.paddingBottom,e.bounds.width),I=An(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?wn(r.left+M/3,r.top+C/3,s-M/3,o-C/3,Kt.TOP_LEFT):new Ke(r.left+M/3,r.top+C/3),this.topRightBorderDoubleOuterBox=s>0||o>0?wn(r.left+y,r.top+C/3,l-T/3,A-C/3,Kt.TOP_RIGHT):new Ke(r.left+r.width-T/3,r.top+C/3),this.bottomRightBorderDoubleOuterBox=u>0||f>0?wn(r.left+x,r.top+w,u-T/3,f-b/3,Kt.BOTTOM_RIGHT):new Ke(r.left+r.width-T/3,r.top+r.height-b/3),this.bottomLeftBorderDoubleOuterBox=p>0||d>0?wn(r.left+M/3,r.top+_,p-M/3,d-b/3,Kt.BOTTOM_LEFT):new Ke(r.left+M/3,r.top+r.height-b/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?wn(r.left+M*2/3,r.top+C*2/3,s-M*2/3,o-C*2/3,Kt.TOP_LEFT):new Ke(r.left+M*2/3,r.top+C*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?wn(r.left+y,r.top+C*2/3,l-T*2/3,A-C*2/3,Kt.TOP_RIGHT):new Ke(r.left+r.width-T*2/3,r.top+C*2/3),this.bottomRightBorderDoubleInnerBox=u>0||f>0?wn(r.left+x,r.top+w,u-T*2/3,f-b*2/3,Kt.BOTTOM_RIGHT):new Ke(r.left+r.width-T*2/3,r.top+r.height-b*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||d>0?wn(r.left+M*2/3,r.top+_,p-M*2/3,d-b*2/3,Kt.BOTTOM_LEFT):new Ke(r.left+M*2/3,r.top+r.height-b*2/3),this.topLeftBorderStroke=s>0||o>0?wn(r.left+M/2,r.top+C/2,s-M/2,o-C/2,Kt.TOP_LEFT):new Ke(r.left+M/2,r.top+C/2),this.topRightBorderStroke=s>0||o>0?wn(r.left+y,r.top+C/2,l-T/2,A-C/2,Kt.TOP_RIGHT):new Ke(r.left+r.width-T/2,r.top+C/2),this.bottomRightBorderStroke=u>0||f>0?wn(r.left+x,r.top+w,u-T/2,f-b/2,Kt.BOTTOM_RIGHT):new Ke(r.left+r.width-T/2,r.top+r.height-b/2),this.bottomLeftBorderStroke=p>0||d>0?wn(r.left+M/2,r.top+_,p-M/2,d-b/2,Kt.BOTTOM_LEFT):new Ke(r.left+M/2,r.top+r.height-b/2),this.topLeftBorderBox=s>0||o>0?wn(r.left,r.top,s,o,Kt.TOP_LEFT):new Ke(r.left,r.top),this.topRightBorderBox=l>0||A>0?wn(r.left+y,r.top,l,A,Kt.TOP_RIGHT):new Ke(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||f>0?wn(r.left+x,r.top+w,u,f,Kt.BOTTOM_RIGHT):new Ke(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=p>0||d>0?wn(r.left,r.top+_,p,d,Kt.BOTTOM_LEFT):new Ke(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||o>0?wn(r.left+M,r.top+C,Math.max(0,s-M),Math.max(0,o-C),Kt.TOP_LEFT):new Ke(r.left+M,r.top+C),this.topRightPaddingBox=l>0||A>0?wn(r.left+Math.min(y,r.width-T),r.top+C,y>r.width+T?0:Math.max(0,l-T),Math.max(0,A-C),Kt.TOP_RIGHT):new Ke(r.left+r.width-T,r.top+C),this.bottomRightPaddingBox=u>0||f>0?wn(r.left+Math.min(x,r.width-M),r.top+Math.min(w,r.height-b),Math.max(0,u-T),Math.max(0,f-b),Kt.BOTTOM_RIGHT):new Ke(r.left+r.width-T,r.top+r.height-b),this.bottomLeftPaddingBox=p>0||d>0?wn(r.left+M,r.top+Math.min(_,r.height-b),Math.max(0,p-M),Math.max(0,d-b),Kt.BOTTOM_LEFT):new Ke(r.left+M,r.top+r.height-b),this.topLeftContentBox=s>0||o>0?wn(r.left+M+I,r.top+C+P,Math.max(0,s-(M+I)),Math.max(0,o-(C+P)),Kt.TOP_LEFT):new Ke(r.left+M+I,r.top+C+P),this.topRightContentBox=l>0||A>0?wn(r.left+Math.min(y,r.width+M+I),r.top+C+P,y>r.width+M+I?0:l-M+I,A-(C+P),Kt.TOP_RIGHT):new Ke(r.left+r.width-(T+Y),r.top+C+P),this.bottomRightContentBox=u>0||f>0?wn(r.left+Math.min(x,r.width-(M+I)),r.top+Math.min(w,r.height+C+P),Math.max(0,u-(T+Y)),f-(b+H),Kt.BOTTOM_RIGHT):new Ke(r.left+r.width-(T+Y),r.top+r.height-(b+H)),this.bottomLeftContentBox=p>0||d>0?wn(r.left+M+I,r.top+_,Math.max(0,p-(M+I)),d-(b+H),Kt.BOTTOM_LEFT):new Ke(r.left+M+I,r.top+r.height-(b+H))}return n}(),Kt;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Kt||(Kt={}));var wn=function(n,e,t,r,i){var s=4*((Math.sqrt(2)-1)/3),o=t*s,a=r*s,l=n+t,A=e+r;switch(i){case Kt.TOP_LEFT:return new ev(new Ke(n,A),new Ke(n,A-a),new Ke(l-o,e),new Ke(l,e));case Kt.TOP_RIGHT:return new ev(new Ke(n,e),new Ke(n+o,e),new Ke(l,A-a),new Ke(l,A));case Kt.BOTTOM_RIGHT:return new ev(new Ke(l,e),new Ke(l,e+a),new Ke(n+o,A),new Ke(n,A));case Kt.BOTTOM_LEFT:default:return new ev(new Ke(l,A),new Ke(l-o,A),new Ke(n,e+a),new Ke(n,e))}},Mw=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},Jle=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Sw=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},qle=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),tv=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),eAe=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),tAe=function(n){return n.type===0},c6=function(n){return n.type===1},nAe=function(n){return n.type===2},XL=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},rAe=function(n,e,t,r,i){return n.map(function(s,o){switch(o){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+i);case 3:return s.add(e,t+i)}return s})},u6=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),f6=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Zle(this.container),this.container.styles.opacity<1&&this.effects.push(new eAe(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new qle(r,i,s))}if(this.container.styles.overflowX!==0){var o=Mw(this.curves),a=Sw(this.curves);XL(o,a)?this.effects.push(new tv(o,6)):(this.effects.push(new tv(o,2)),this.effects.push(new tv(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(l){return!c6(l)});if(t||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=Mw(r.curves),a=Sw(r.curves);XL(o,a)||i.unshift(new tv(a,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(l){return pr(l.target,e)})},n}(),IC=function(n,e,t,r){n.container.elements.forEach(function(i){var s=pr(i.flags,4),o=pr(i.flags,2),a=new f6(i,n);pr(i.styles.display,2048)&&r.push(a);var l=pr(i.flags,8)?[]:r;if(s||o){var A=s||i.styles.isPositioned()?t:e,c=new u6(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var f=0;A.negativeZIndex.some(function(p,d){return u>p.element.container.styles.zIndex.order?(f=d,!1):f>0}),A.negativeZIndex.splice(f,0,c)}else if(u>0){var h=0;A.positiveZIndex.some(function(p,d){return u>=p.element.container.styles.zIndex.order?(h=d+1,!1):h>0}),A.positiveZIndex.splice(h,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);IC(a,c,s?c:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),IC(a,e,t,l);pr(i.flags,8)&&h6(i,l)})},h6=function(n,e){for(var t=n instanceof TC?n.start:1,r=n instanceof TC?n.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof e6&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=vT(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},iAe=function(n){var e=new f6(n,null),t=new u6(e),r=[];return IC(e,t,t,r),h6(e.container,r),t},ZL=function(n,e){switch(e){case 0:return Os(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Os(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Os(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Os(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},sAe=function(n,e){switch(e){case 0:return Os(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Os(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Os(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Os(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},oAe=function(n,e){switch(e){case 0:return Os(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Os(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Os(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Os(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},aAe=function(n,e){switch(e){case 0:return nv(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return nv(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return nv(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return nv(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},nv=function(n,e){var t=[];return Ts(n)?t.push(n.subdivide(.5,!1)):t.push(n),Ts(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Os=function(n,e,t,r){var i=[];return Ts(n)?i.push(n.subdivide(.5,!1)):i.push(n),Ts(t)?i.push(t.subdivide(.5,!0)):i.push(t),Ts(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Ts(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},d6=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Tw=function(n){var e=n.styles,t=n.bounds,r=An(e.paddingLeft,t.width),i=An(e.paddingRight,t.width),s=An(e.paddingTop,t.width),o=An(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},lAe=function(n,e){return n===0?e.bounds:n===2?Tw(e):d6(e)},AAe=function(n,e){return n===0?e.bounds:n===2?Tw(e):d6(e)},Qb=function(n,e,t){var r=lAe(rf(n.styles.backgroundOrigin,e),n),i=AAe(rf(n.styles.backgroundClip,e),n),s=cAe(rf(n.styles.backgroundSize,e),t,r),o=s[0],a=s[1],l=Ip(rf(n.styles.backgroundPosition,e),r.width-o,r.height-a),A=uAe(rf(n.styles.backgroundRepeat,e),l,s,r,i),c=Math.round(r.left+l[0]),u=Math.round(r.top+l[1]);return[A,c,u,o,a]},Gu=function(n){return zn(n)&&n.value===hh.AUTO},rv=function(n){return typeof n=="number"},cAe=function(n,e,t){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1];if(!o)return[0,0];if(ir(o)&&a&&ir(a))return[An(o,t.width),An(a,t.height)];var l=rv(s);if(zn(o)&&(o.value===hh.CONTAIN||o.value===hh.COVER)){if(rv(s)){var A=t.width/t.height;return A<s!=(o.value===hh.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=rv(r),u=rv(i),f=c||u;if(Gu(o)&&(!a||Gu(a))){if(c&&u)return[r,i];if(!l&&!f)return[t.width,t.height];if(f&&l){var h=c?r:i*s,p=u?i:r/s;return[h,p]}var d=c?r:t.width,g=u?i:t.height;return[d,g]}if(l){var m=0,y=0;return ir(o)?m=An(o,t.width):ir(a)&&(y=An(a,t.height)),Gu(o)?m=y*s:(!a||Gu(a))&&(y=m/s),[m,y]}var w=null,x=null;if(ir(o)?w=An(o,t.width):a&&ir(a)&&(x=An(a,t.height)),w!==null&&(!a||Gu(a))&&(x=c&&u?w/r*i:t.height),x!==null&&Gu(o)&&(w=c&&u?x/i*r:t.width),w!==null&&x!==null)return[w,x];throw new Error("Unable to calculate background-size for element")},rf=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},uAe=function(n,e,t,r,i){var s=e[0],o=e[1],a=t[0],l=t[1];switch(n){case 2:return[new Ke(Math.round(r.left),Math.round(r.top+o)),new Ke(Math.round(r.left+r.width),Math.round(r.top+o)),new Ke(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Ke(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new Ke(Math.round(r.left+s),Math.round(r.top)),new Ke(Math.round(r.left+s+a),Math.round(r.top)),new Ke(Math.round(r.left+s+a),Math.round(r.height+r.top)),new Ke(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Ke(Math.round(r.left+s),Math.round(r.top+o)),new Ke(Math.round(r.left+s+a),Math.round(r.top+o)),new Ke(Math.round(r.left+s+a),Math.round(r.top+o+l)),new Ke(Math.round(r.left+s),Math.round(r.top+o+l))];default:return[new Ke(Math.round(i.left),Math.round(i.top)),new Ke(Math.round(i.left+i.width),Math.round(i.top)),new Ke(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ke(Math.round(i.left),Math.round(i.height+i.top))]}},fAe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",JL="Hidden Text",hAe=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),i.src=fAe,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(JL)),r.appendChild(s),r.appendChild(i);var a=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(JL)),r.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:l}},n.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),p6=function(){function n(e,t){this.context=e,this.options=t}return n}(),dAe=1e4;(function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new hAe(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),nAe(t)&&(this.ctx.globalAlpha=t.opacity),tAe(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),c6(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return xs(this,void 0,void 0,function(){var r;return zi(this,function(i){switch(i.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return xs(this,void 0,void 0,function(){return zi(this,function(r){switch(r.label){case 0:if(pr(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,i){var s=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var o=mT(t.text);o.reduce(function(a,l){return s.ctx.fillText(l,a,t.bounds.top+i),a+s.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=yAe(t.fontFamily).join(", "),s=_g(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,r){return xs(this,void 0,void 0,function(){var i,s,o,a,l,A,c,u,f=this;return zi(this,function(h){return i=this.createFontStyle(r),s=i[0],o=i[1],a=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,a),A=l.baseline,c=l.middle,u=r.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(d){switch(d){case 0:f.ctx.fillStyle=wr(r.color),f.renderTextWithLetterSpacing(p,r.letterSpacing,A);var g=r.textShadow;g.length&&p.text.trim().length&&(g.slice(0).reverse().forEach(function(m){f.ctx.shadowColor=wr(m.color),f.ctx.shadowOffsetX=m.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=m.offsetY.number*f.options.scale,f.ctx.shadowBlur=m.blur.number,f.renderTextWithLetterSpacing(p,r.letterSpacing,A)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=wr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(m){switch(m){case 1:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:f.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:f.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&p.text.trim().length&&(f.ctx.strokeStyle=wr(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=Tw(t),o=Sw(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return xs(this,void 0,void 0,function(){var r,i,s,o,a,l,y,y,A,c,u,f,x,h,p,_,d,g,m,y,w,x,_;return zi(this,function(C){switch(C.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,i=t.curves,s=r.styles,o=0,a=r.textNodes,C.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,s)]):[3,4];case 2:C.sent(),C.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof Z5))return[3,8];C.label=5;case 5:return C.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return y=C.sent(),this.renderReplacedElement(r,i,y),[3,8];case 7:return C.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof J5&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof q5))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return y=C.sent(),this.renderReplacedElement(r,i,y),[3,12];case 11:return C.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof r6&&r.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,A.render(r.tree)]):[3,14];case 13:c=C.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),C.label=14;case 14:if(r instanceof gT&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Ew?r.checked&&(this.ctx.save(),this.path([new Ke(r.bounds.left+u*.39363,r.bounds.top+u*.79),new Ke(r.bounds.left+u*.16,r.bounds.top+u*.5549),new Ke(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new Ke(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new Ke(r.bounds.left+u*.72983,r.bounds.top+u*.23),new Ke(r.bounds.left+u*.84,r.bounds.top+u*.34085),new Ke(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=wr(GL),this.ctx.fill(),this.ctx.restore()):r.type===Cw&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=wr(GL),this.ctx.fill(),this.ctx.restore())),pAe(r)&&r.value.length){switch(f=this.createFontStyle(s),x=f[0],h=f[1],p=this.fontMetrics.getMetrics(x,h).baseline,this.ctx.font=x,this.ctx.fillStyle=wr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=gAe(r.styles.textAlign),_=Tw(r),d=0,r.styles.textAlign){case 1:d+=_.width/2;break;case 2:d+=_.width;break}g=_.add(d,0,0,-_.height/2+1),this.ctx.save(),this.path([new Ke(_.left,_.top),new Ke(_.left+_.width,_.top),new Ke(_.left+_.width,_.top+_.height),new Ke(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new am(r.value,g),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pr(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(m=r.styles.listStyleImage,m.type!==0)return[3,18];y=void 0,w=m.url,C.label=15;case 15:return C.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return y=C.sent(),this.ctx.drawImage(y,r.bounds.left-(y.width+10),r.bounds.top),[3,18];case 17:return C.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(x=this.createFontStyle(s)[0],this.ctx.font=x,this.ctx.fillStyle=wr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new Xc(r.bounds.left,r.bounds.top+An(r.styles.paddingTop,r.bounds.width),r.bounds.width,ML(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new am(t.listValue,_),s.letterSpacing,ML(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),C.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return xs(this,void 0,void 0,function(){var r,i,m,s,o,m,a,l,m,A,c,m,u,f,m,h,p,m,d,g,m;return zi(this,function(y){switch(y.label){case 0:if(pr(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:y.sent(),r=0,i=t.negativeZIndex,y.label=2;case 2:return r<i.length?(m=i[r],[4,this.renderStack(m)]):[3,5];case 3:y.sent(),y.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:y.sent(),s=0,o=t.nonInlineLevel,y.label=7;case 7:return s<o.length?(m=o[s],[4,this.renderNode(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return s++,[3,7];case 10:a=0,l=t.nonPositionedFloats,y.label=11;case 11:return a<l.length?(m=l[a],[4,this.renderStack(m)]):[3,14];case 12:y.sent(),y.label=13;case 13:return a++,[3,11];case 14:A=0,c=t.nonPositionedInlineLevel,y.label=15;case 15:return A<c.length?(m=c[A],[4,this.renderStack(m)]):[3,18];case 16:y.sent(),y.label=17;case 17:return A++,[3,15];case 18:u=0,f=t.inlineLevel,y.label=19;case 19:return u<f.length?(m=f[u],[4,this.renderNode(m)]):[3,22];case 20:y.sent(),y.label=21;case 21:return u++,[3,19];case 22:h=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,y.label=23;case 23:return h<p.length?(m=p[h],[4,this.renderStack(m)]):[3,26];case 24:y.sent(),y.label=25;case 25:return h++,[3,23];case 26:d=0,g=t.positiveZIndex,y.label=27;case 27:return d<g.length?(m=g[d],[4,this.renderStack(m)]):[3,30];case 28:y.sent(),y.label=29;case 29:return d++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(i,s){var o=Ts(i)?i.start:i;s===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Ts(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,r,i,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,r,i){var s;if(t.width===r&&t.height===i)return t;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,i);var l=a.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,r,i),a},e.prototype.renderBackgroundImage=function(t){return xs(this,void 0,void 0,function(){var r,i,s,o,a,l;return zi(this,function(A){switch(A.label){case 0:r=t.styles.backgroundImage.length-1,i=function(c){var u,f,h,P,F,D,I,v,b,p,P,F,D,I,v,d,g,m,y,w,x,_,C,T,b,M,P,Y,H,I,v,E,F,D,O,z,K,Q,B,j,ee,U;return zi(this,function(X){switch(X.label){case 0:if(c.type!==0)return[3,5];u=void 0,f=c.url,X.label=1;case 1:return X.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return u=X.sent(),[3,4];case 3:return X.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return u&&(h=Qb(t,r,[u.width,u.height,u.width/u.height]),P=h[0],F=h[1],D=h[2],I=h[3],v=h[4],b=s.ctx.createPattern(s.resizeImage(u,I,v),"repeat"),s.renderRepeat(P,b,F,D)),[3,6];case 5:goe(c)?(p=Qb(t,r,[null,null,null]),P=p[0],F=p[1],D=p[2],I=p[3],v=p[4],d=foe(c.angle,I,v),g=d[0],m=d[1],y=d[2],w=d[3],x=d[4],_=document.createElement("canvas"),_.width=I,_.height=v,C=_.getContext("2d"),T=C.createLinearGradient(m,w,y,x),EL(c.stops,g).forEach(function(ae){return T.addColorStop(ae.stop,wr(ae.color))}),C.fillStyle=T,C.fillRect(0,0,I,v),I>0&&v>0&&(b=s.ctx.createPattern(_,"repeat"),s.renderRepeat(P,b,F,D))):voe(c)&&(M=Qb(t,r,[null,null,null]),P=M[0],Y=M[1],H=M[2],I=M[3],v=M[4],E=c.position.length===0?[hT]:c.position,F=An(E[0],I),D=An(E[E.length-1],v),O=hoe(c,F,D,I,v),z=O[0],K=O[1],z>0&&K>0&&(Q=s.ctx.createRadialGradient(Y+F,H+D,0,Y+F,H+D,z),EL(c.stops,z*2).forEach(function(ae){return Q.addColorStop(ae.stop,wr(ae.color))}),s.path(P),s.ctx.fillStyle=Q,z!==K?(B=t.bounds.left+.5*t.bounds.width,j=t.bounds.top+.5*t.bounds.height,ee=K/z,U=1/ee,s.ctx.save(),s.ctx.translate(B,j),s.ctx.transform(1,0,0,ee,0,0),s.ctx.translate(-B,-j),s.ctx.fillRect(Y,U*(H-j)+j,I,v*U),s.ctx.restore()):s.ctx.fill())),X.label=6;case 6:return r--,[2]}})},s=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<a.length?(l=a[o],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,i){return xs(this,void 0,void 0,function(){return zi(this,function(s){return this.path(ZL(i,r)),this.ctx.fillStyle=wr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,i,s){return xs(this,void 0,void 0,function(){var o,a;return zi(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return o=sAe(s,i),this.path(o),this.ctx.fillStyle=wr(t),this.ctx.fill(),a=oAe(s,i),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return xs(this,void 0,void 0,function(){var r,i,s,o,a,l,A,c,u=this;return zi(this,function(f){switch(f.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,i=!fh(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=mAe(rf(r.backgroundClip,0),t.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),fh(r.backgroundColor)||(this.ctx.fillStyle=wr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(h){u.ctx.save();var p=Mw(t.curves),d=h.inset?0:dAe,g=rAe(p,-d+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(u.path(p),u.ctx.clip(),u.mask(g)):(u.mask(p),u.ctx.clip(),u.path(g)),u.ctx.shadowOffsetX=h.offsetX.number+d,u.ctx.shadowOffsetY=h.offsetY.number,u.ctx.shadowColor=wr(h.color),u.ctx.shadowBlur=h.blur.number,u.ctx.fillStyle=h.inset?wr(h.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),f.label=2;case 2:a=0,l=0,A=s,f.label=3;case 3:return l<A.length?(c=A[l],c.style!==0&&!fh(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,i,s,o){return xs(this,void 0,void 0,function(){var a,l,A,c,u,f,h,p,d,g,m,y,w,x,_,C,_,C;return zi(this,function(T){return this.ctx.save(),a=aAe(s,i),l=ZL(s,i),o===2&&(this.path(l),this.ctx.clip()),Ts(l[0])?(A=l[0].start.x,c=l[0].start.y):(A=l[0].x,c=l[0].y),Ts(l[1])?(u=l[1].end.x,f=l[1].end.y):(u=l[1].x,f=l[1].y),i===0||i===2?h=Math.abs(A-u):h=Math.abs(c-f),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(l.slice(0,2)),p=r<3?r*3:r*2,d=r<3?r*2:r,o===3&&(p=r,d=r),g=!0,h<=p*2?g=!1:h<=p*2+d?(m=h/(2*p+d),p*=m,d*=m):(y=Math.floor((h+d)/(p+d)),w=(h-y*p)/(y-1),x=(h-(y+1)*p)/y,d=x<=0||Math.abs(d-w)<Math.abs(d-x)?w:x),g&&(o===3?this.ctx.setLineDash([0,p+d]):this.ctx.setLineDash([p,d])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=wr(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Ts(l[0])&&(_=l[3],C=l[0],this.ctx.beginPath(),this.formatPath([new Ke(_.end.x,_.end.y),new Ke(C.start.x,C.start.y)]),this.ctx.stroke()),Ts(l[1])&&(_=l[1],C=l[2],this.ctx.beginPath(),this.formatPath([new Ke(_.end.x,_.end.y),new Ke(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return xs(this,void 0,void 0,function(){var r;return zi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=wr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=iAe(t),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(p6);var pAe=function(n){return n instanceof n6||n instanceof t6?!0:n instanceof gT&&n.type!==Cw&&n.type!==Ew},mAe=function(n,e){switch(n){case 0:return Mw(e);case 2:return Jle(e);case 1:default:return Sw(e)}},gAe=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},vAe=["-apple-system","system-ui"],yAe=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return vAe.indexOf(e)===-1}):n};(function(n){Mo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(t){return xs(this,void 0,void 0,function(){var r,i;return zi(this,function(s){switch(s.label){case 0:return r=SC(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,wAe(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=wr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(p6);var wAe=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})};typeof window<"u"&&Xle.setContext(window);/*!
 * @pixiv/three-vrm v3.1.3
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var iv=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),zt=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),Iw=class extends It{constructor(n){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${n}`,this.expressionName=n,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(n){this._binds.push(n)}applyWeight(n){var e;let t=this.isBinary?this.weight<=.5?0:1:this.weight;t*=(e=n==null?void 0:n.multiplier)!=null?e:1,this._binds.forEach(r=>r.applyWeight(t))}clearAppliedWeight(){this._binds.forEach(n=>n.clearAppliedWeight())}};function m6(n,e,t){var r,i;const s=n.parser.json,o=(r=s.nodes)==null?void 0:r[e];if(o==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const a=o.mesh;if(a==null)return null;const l=(i=s.meshes)==null?void 0:i[a];if(l==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${a}] of glTF but the mesh doesn't exist`),null;const A=l.primitives.length,c=[];return t.traverse(u=>{c.length<A&&u.isMesh&&c.push(u)}),c}function qL(n,e){return zt(this,null,function*(){const t=yield n.parser.getDependency("node",e);return m6(n,e,t)})}function eP(n){return zt(this,null,function*(){const e=yield n.parser.getDependencies("node"),t=new Map;return e.forEach((r,i)=>{const s=m6(n,i,r);s!=null&&t.set(i,s)}),t})}var Ur={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function g6(n){return Math.max(Math.min(n,1),0)}var Rw=class v6{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(Ur));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)&&(e[r]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(Ur));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)||(e[r]=i)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new v6().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!=null?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!=null?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=g6(t))}resetValues(){this._expressions.forEach(e=>{e.weight=0})}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,r-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}},Xd={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},xAe={_Color:Xd.Color,_EmissionColor:Xd.EmissionColor,_ShadeColor:Xd.ShadeColor,_RimColor:Xd.RimColor,_OutlineColor:Xd.OutlineColor},_Ae=new ke,y6=class w6{constructor({material:e,type:t,targetValue:r,targetAlpha:i}){this.material=e,this.type=t,this.targetValue=r,this.targetAlpha=i??1;const s=this._initColorBindState(),o=this._initAlphaBindState();this._state={color:s,alpha:o}}applyWeight(e){const{color:t,alpha:r}=this._state;if(t!=null){const{propertyName:i,deltaValue:s}=t,o=this.material[i];o!=null&&o.add(_Ae.copy(s).multiplyScalar(e))}if(r!=null){const{propertyName:i,deltaValue:s}=r;this.material[i]!=null&&(this.material[i]+=s*e)}}clearAppliedWeight(){const{color:e,alpha:t}=this._state;if(e!=null){const{propertyName:r,initialValue:i}=e,s=this.material[r];s!=null&&s.copy(i)}if(t!=null){const{propertyName:r,initialValue:i}=t;this.material[r]!=null&&(this.material[r]=i)}}_initColorBindState(){var e,t,r;const{material:i,type:s,targetValue:o}=this,a=this._getPropertyNameMap(),l=(t=(e=a==null?void 0:a[s])==null?void 0:e[0])!=null?t:null;if(l==null)return console.warn(`Tried to add a material color bind to the material ${(r=i.name)!=null?r:"(no name)"}, the type ${s} but the material or the type is not supported.`),null;const c=i[l].clone(),u=new ke(o.r-c.r,o.g-c.g,o.b-c.b);return{propertyName:l,initialValue:c,deltaValue:u}}_initAlphaBindState(){var e,t,r;const{material:i,type:s,targetAlpha:o}=this,a=this._getPropertyNameMap(),l=(t=(e=a==null?void 0:a[s])==null?void 0:e[1])!=null?t:null;if(l==null&&o!==1)return console.warn(`Tried to add a material alpha bind to the material ${(r=i.name)!=null?r:"(no name)"}, the type ${s} but the material or the type does not support alpha.`),null;if(l==null)return null;const A=i[l],c=o-A;return{propertyName:l,initialValue:A,deltaValue:c}}_getPropertyNameMap(){var e,t;return(t=(e=Object.entries(w6._propertyNameMapMap).find(([r])=>this.material[r]===!0))==null?void 0:e[1])!=null?t:null}};y6._propertyNameMapMap={isMeshStandardMaterial:{color:["color","opacity"],emissionColor:["emissive",null]},isMeshBasicMaterial:{color:["color","opacity"]},isMToonMaterial:{color:["color","opacity"],emissionColor:["emissive",null],outlineColor:["outlineColorFactor",null],matcapColor:["matcapFactor",null],rimColor:["parametricRimColorFactor",null],shadeColor:["shadeColorFactor",null]}};var tP=y6,RC=class{constructor({primitives:n,index:e,weight:t}){this.primitives=n,this.index=e,this.weight=t}applyWeight(n){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)==null?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]+=this.weight*n)})}clearAppliedWeight(){this.primitives.forEach(n=>{var e;((e=n.morphTargetInfluences)==null?void 0:e[this.index])!=null&&(n.morphTargetInfluences[this.index]=0)})}},nP=new Ye,x6=class _6{constructor({material:e,scale:t,offset:r}){var i,s;this.material=e,this.scale=t,this.offset=r;const o=(i=Object.entries(_6._propertyNamesMap).find(([a])=>e[a]===!0))==null?void 0:i[1];o==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!=null?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],o.forEach(a=>{var l;const A=(l=e[a])==null?void 0:l.clone();if(!A)return null;e[a]=A;const c=A.offset.clone(),u=A.repeat.clone(),f=r.clone().sub(c),h=t.clone().sub(u);this._properties.push({name:a,initialOffset:c,deltaOffset:f,initialScale:u,deltaScale:h})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(nP.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(nP.copy(t.deltaScale).multiplyScalar(e)))})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale))})}};x6._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};var rP=x6,bAe=new Set(["1.0","1.0-beta"]),b6=class B6{get name(){return"VRMExpressionLoaderPlugin"}constructor(e){this.parser=e}afterRoot(e){return zt(this,null,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return zt(this,null,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){return zt(this,null,function*(){var t,r;const i=this.parser.json;if(!(((t=i.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)==null?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!bAe.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.expressions;if(!l)return null;const A=new Set(Object.values(Ur)),c=new Map;l.preset!=null&&Object.entries(l.preset).forEach(([f,h])=>{if(h!=null){if(!A.has(f)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${f}" detected. Ignoring the expression`);return}c.set(f,h)}}),l.custom!=null&&Object.entries(l.custom).forEach(([f,h])=>{if(A.has(f)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${f}". Ignoring the expression`);return}c.set(f,h)});const u=new Rw;return yield Promise.all(Array.from(c.entries()).map(f=>zt(this,[f],function*([h,p]){var d,g,m,y,w,x,_;const C=new Iw(h);if(e.scene.add(C),C.isBinary=(d=p.isBinary)!=null?d:!1,C.overrideBlink=(g=p.overrideBlink)!=null?g:"none",C.overrideLookAt=(m=p.overrideLookAt)!=null?m:"none",C.overrideMouth=(y=p.overrideMouth)!=null?y:"none",(w=p.morphTargetBinds)==null||w.forEach(T=>zt(this,null,function*(){var b;if(T.node===void 0||T.index===void 0)return;const M=yield qL(e,T.node),P=T.index;if(!M.every(Y=>Array.isArray(Y.morphTargetInfluences)&&P<Y.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${p.name} attempts to index morph #${P} but not found.`);return}C.addBind(new RC({primitives:M,index:P,weight:(b=T.weight)!=null?b:1}))})),p.materialColorBinds||p.textureTransformBinds){const T=[];e.scene.traverse(b=>{const M=b.material;M&&T.push(M)}),(x=p.materialColorBinds)==null||x.forEach(b=>zt(this,null,function*(){T.filter(P=>{var Y;const H=(Y=this.parser.associations.get(P))==null?void 0:Y.materials;return b.material===H}).forEach(P=>{C.addBind(new tP({material:P,type:b.type,targetValue:new ke().fromArray(b.targetValue),targetAlpha:b.targetValue[3]}))})})),(_=p.textureTransformBinds)==null||_.forEach(b=>zt(this,null,function*(){T.filter(P=>{var Y;const H=(Y=this.parser.associations.get(P))==null?void 0:Y.materials;return b.material===H}).forEach(P=>{var Y,H;C.addBind(new rP({material:P,offset:new Ye().fromArray((Y=b.offset)!=null?Y:[0,0]),scale:new Ye().fromArray((H=b.scale)!=null?H:[1,1])}))})}))}u.registerExpression(C)}))),u})}_v0Import(e){return zt(this,null,function*(){var t;const r=this.parser.json,i=(t=r.extensions)==null?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const o=new Rw,a=s.blendShapeGroups;if(!a)return o;const l=new Set;return yield Promise.all(a.map(A=>zt(this,null,function*(){var c;const u=A.presetName,f=u!=null&&B6.v0v1PresetNameMap[u]||null,h=f??A.name;if(h==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(l.has(h)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}l.add(h);const p=new Iw(h);e.scene.add(p),p.isBinary=(c=A.isBinary)!=null?c:!1,A.binds&&A.binds.forEach(g=>zt(this,null,function*(){var m;if(g.mesh===void 0||g.index===void 0)return;const y=[];(m=r.nodes)==null||m.forEach((x,_)=>{x.mesh===g.mesh&&y.push(_)});const w=g.index;yield Promise.all(y.map(x=>zt(this,null,function*(){var _;const C=yield qL(e,x);if(!C.every(T=>Array.isArray(T.morphTargetInfluences)&&w<T.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${A.name} attempts to index ${w}th morph but not found.`);return}p.addBind(new RC({primitives:C,index:w,weight:.01*((_=g.weight)!=null?_:100)}))})))}));const d=A.materialValues;d&&d.length!==0&&d.forEach(g=>{if(g.materialName===void 0||g.propertyName===void 0||g.targetValue===void 0)return;const m=[];e.scene.traverse(w=>{if(w.material){const x=w.material;Array.isArray(x)?m.push(...x.filter(_=>(_.name===g.materialName||_.name===g.materialName+" (Outline)")&&m.indexOf(_)===-1)):x.name===g.materialName&&m.indexOf(x)===-1&&m.push(x)}});const y=g.propertyName;m.forEach(w=>{if(y==="_MainTex_ST"){const _=new Ye(g.targetValue[0],g.targetValue[1]),C=new Ye(g.targetValue[2],g.targetValue[3]);C.y=1-C.y-_.y,p.addBind(new rP({material:w,scale:_,offset:C}));return}const x=xAe[y];if(x){p.addBind(new tP({material:w,type:x,targetValue:new ke().fromArray(g.targetValue),targetAlpha:g.targetValue[3]}));return}console.warn(y+" is not supported")})}),o.registerExpression(p)}))),o})}};b6.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};var BAe=b6,yT=class sf{constructor(e,t){this._firstPersonOnlyLayer=sf.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=sf.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new sf(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=sf.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=sf.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(i=>{r.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,i){let s=0;if(t!=null&&t.length>0)for(let o=0;o<e.length;o+=3){const a=e[o],l=e[o+1],A=e[o+2],c=t[a],u=r[a];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const f=t[l],h=r[l];if(f[0]>0&&i.includes(h[0])||f[1]>0&&i.includes(h[1])||f[2]>0&&i.includes(h[2])||f[3]>0&&i.includes(h[3]))continue;const p=t[A],d=r[A];p[0]>0&&i.includes(d[0])||p[1]>0&&i.includes(d[1])||p[2]>0&&i.includes(d[2])||p[3]>0&&i.includes(d[3])||(e[s++]=a,e[s++]=l,e[s++]=A)}return s}_createErasedMesh(e,t){const r=new cl(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const i=r.geometry,s=i.getAttribute("skinIndex"),o=s instanceof OU?[]:s.array,a=[];for(let d=0;d<o.length;d+=4)a.push([o[d],o[d+1],o[d+2],o[d+3]]);const l=i.getAttribute("skinWeight"),A=l instanceof OU?[]:l.array,c=[];for(let d=0;d<A.length;d+=4)c.push([A[d],A[d+1],A[d+2],A[d+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const f=Array.from(u.array),h=this._excludeTriangles(f,c,a,t),p=[];for(let d=0;d<h;d++)p[d]=f[d];return i.setIndex(p),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new XA(e.skeleton.bones,e.skeleton.boneInverses),new We),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((s,o)=>{this._isEraseTarget(s)&&r.push(o)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,r);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Pr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const i=r;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}};yT.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;yT.DEFAULT_THIRDPERSON_ONLY_LAYER=10;var iP=yT,EAe=new Set(["1.0","1.0-beta"]),CAe=class{get name(){return"VRMFirstPersonLoaderPlugin"}constructor(n){this.parser=n}afterRoot(n){return zt(this,null,function*(){const e=n.userData.vrmHumanoid;if(e!==null){if(e===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");n.userData.vrmFirstPerson=yield this._import(n,e)}})}_import(n,e){return zt(this,null,function*(){if(e==null)return null;const t=yield this._v1Import(n,e);if(t)return t;const r=yield this._v0Import(n,e);return r||null})}_v1Import(n,e){return zt(this,null,function*(){var t,r;const i=this.parser.json;if(!(((t=i.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)==null?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!EAe.has(a))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.firstPerson;if(!l)return null;const A=[],c=yield eP(n);return Array.from(c.entries()).forEach(([u,f])=>{var h;const p=l.meshAnnotations?l.meshAnnotations.find(d=>d.node===u):void 0;A.push({meshes:f,type:(h=p==null?void 0:p.type)!=null?h:"both"})}),new iP(e,A)})}_v0Import(n,e){return zt(this,null,function*(){var t;const r=this.parser.json,i=(t=r.extensions)==null?void 0:t.VRM;if(!i)return null;const s=i.firstPerson;if(!s)return null;const o=[],a=yield eP(n);return Array.from(a.entries()).forEach(([l,A])=>{const c=r.nodes[l],u=s.meshAnnotations?s.meshAnnotations.find(f=>f.mesh===c.mesh):void 0;o.push({meshes:A,type:this._convertV0FlagToV1Type(u==null?void 0:u.firstPersonFlag)})}),new iP(e,o)})}_convertV0FlagToV1Type(n){return n==="FirstPersonOnly"?"firstPersonOnly":n==="ThirdPersonOnly"?"thirdPersonOnly":n==="Auto"?"auto":"both"}},sP=new Z,oP=new Z,MAe=new rt,aP=class extends Pr{constructor(n){super(),this.vrmHumanoid=n,this._boneAxesMap=new Map,Object.values(n.humanBones).forEach(e=>{const t=new Nne(1);t.matrixAutoUpdate=!1,t.material.depthTest=!1,t.material.depthWrite=!1,this.add(t),this._boneAxesMap.set(e,t)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(n=>{n.geometry.dispose(),n.material.dispose()})}updateMatrixWorld(n){Array.from(this._boneAxesMap.entries()).forEach(([e,t])=>{e.node.updateWorldMatrix(!0,!1),e.node.matrixWorld.decompose(sP,MAe,oP);const r=sP.set(.1,.1,.1).divide(oP);t.matrix.copy(e.node.matrixWorld).scale(r)}),super.updateMatrixWorld(n)}},Hb=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],Km={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},SAe={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function E6(n){return n.invert?n.invert():n.inverse(),n}var ac=new Z,lc=new rt,FC=class{constructor(n){this.humanBones=n,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const n={};return Object.keys(this.humanBones).forEach(e=>{const t=e,r=this.getBoneNode(t);r&&(ac.copy(r.position),lc.copy(r.quaternion),n[t]={position:ac.toArray(),rotation:lc.toArray()})}),n}getPose(){const n={};return Object.keys(this.humanBones).forEach(e=>{const t=e,r=this.getBoneNode(t);if(!r)return;ac.set(0,0,0),lc.identity();const i=this.restPose[t];i!=null&&i.position&&ac.fromArray(i.position).negate(),i!=null&&i.rotation&&E6(lc.fromArray(i.rotation)),ac.add(r.position),lc.premultiply(r.quaternion),n[t]={position:ac.toArray(),rotation:lc.toArray()}}),n}setPose(n){Object.entries(n).forEach(([e,t])=>{const r=e,i=this.getBoneNode(r);if(!i)return;const s=this.restPose[r];s&&(t!=null&&t.position&&(i.position.fromArray(t.position),s.position&&i.position.add(ac.fromArray(s.position))),t!=null&&t.rotation&&(i.quaternion.fromArray(t.rotation),s.rotation&&i.quaternion.multiply(lc.fromArray(s.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([n,e])=>{const t=this.getBoneNode(n);t&&(e!=null&&e.position&&t.position.fromArray(e.position),e!=null&&e.rotation&&t.quaternion.fromArray(e.rotation))})}getBone(n){var e;return(e=this.humanBones[n])!=null?e:void 0}getBoneNode(n){var e,t;return(t=(e=this.humanBones[n])==null?void 0:e.node)!=null?t:null}},zb=new Z,TAe=new rt,IAe=new Z,lP=class C6 extends FC{static _setupTransforms(e){const t=new It;t.name="VRMHumanoidRig";const r={},i={},s={};Hb.forEach(a=>{var l;const A=e.getBoneNode(a);if(A){const c=new Z,u=new rt;A.updateWorldMatrix(!0,!1),A.matrixWorld.decompose(c,u,zb),r[a]=c,i[a]=A.quaternion.clone();const f=new rt;(l=A.parent)==null||l.matrixWorld.decompose(zb,f,zb),s[a]=f}});const o={};return Hb.forEach(a=>{var l;const A=e.getBoneNode(a);if(A){const c=r[a];let u=a,f;for(;f==null&&(u=SAe[u],u!=null);)f=r[u];const h=new It;h.name="Normalized_"+A.name,(u?(l=o[u])==null?void 0:l.node:t).add(h),h.position.copy(c),f&&h.position.sub(f),o[a]={node:h}}}),{rigBones:o,root:t,parentWorldRotations:s,boneRotations:i}}constructor(e){const{rigBones:t,root:r,parentWorldRotations:i,boneRotations:s}=C6._setupTransforms(e);super(t),this.original=e,this.root=r,this._parentWorldRotations=i,this._boneRotations=s}update(){Hb.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const r=this.getBoneNode(e),i=this._parentWorldRotations[e],s=TAe.copy(i).invert(),o=this._boneRotations[e];if(t.quaternion.copy(r.quaternion).multiply(i).premultiply(s).multiply(o),e==="hips"){const a=r.getWorldPosition(IAe);t.parent.updateWorldMatrix(!0,!1);const l=t.parent.matrixWorld,A=a.applyMatrix4(l.invert());t.position.copy(A)}}})}},AP=class M6{get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}constructor(e,t){var r;this.autoUpdateHumanBones=(r=t==null?void 0:t.autoUpdateHumanBones)!=null?r:!0,this._rawHumanBones=new FC(e),this._normalizedHumanBones=new lP(this._rawHumanBones)}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new FC(e.humanBones),this._normalizedHumanBones=new lP(this._rawHumanBones),this}clone(){return new M6(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}},RAe={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},FAe=new Set(["1.0","1.0-beta"]),cP={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"},UAe=class{get name(){return"VRMHumanoidLoaderPlugin"}constructor(n,e){this.parser=n,this.helperRoot=e==null?void 0:e.helperRoot,this.autoUpdateHumanBones=e==null?void 0:e.autoUpdateHumanBones}afterRoot(n){return zt(this,null,function*(){n.userData.vrmHumanoid=yield this._import(n)})}_import(n){return zt(this,null,function*(){const e=yield this._v1Import(n);if(e)return e;const t=yield this._v0Import(n);return t||null})}_v1Import(n){return zt(this,null,function*(){var e,t;const r=this.parser.json;if(!(((e=r.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const s=(t=r.extensions)==null?void 0:t.VRMC_vrm;if(!s)return null;const o=s.specVersion;if(!FAe.has(o))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${o}"`),null;const a=s.humanoid;if(!a)return null;const l=a.humanBones.leftThumbIntermediate!=null||a.humanBones.rightThumbIntermediate!=null,A={};a.humanBones!=null&&(yield Promise.all(Object.entries(a.humanBones).map(u=>zt(this,[u],function*([f,h]){let p=f;const d=h.node;if(l){const m=cP[p];m!=null&&(p=m)}const g=yield this.parser.getDependency("node",d);if(g==null){console.warn(`A glTF node bound to the humanoid bone ${p} (index = ${d}) does not exist`);return}A[p]={node:g}}))));const c=new AP(this._ensureRequiredBonesExist(A),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(n.scene.add(c.normalizedHumanBonesRoot),this.helperRoot){const u=new aP(c);this.helperRoot.add(u),u.renderOrder=this.helperRoot.renderOrder}return c})}_v0Import(n){return zt(this,null,function*(){var e;const r=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!r)return null;const i=r.humanoid;if(!i)return null;const s={};i.humanBones!=null&&(yield Promise.all(i.humanBones.map(a=>zt(this,null,function*(){const l=a.bone,A=a.node;if(l==null||A==null)return;const c=yield this.parser.getDependency("node",A);if(c==null){console.warn(`A glTF node bound to the humanoid bone ${l} (index = ${A}) does not exist`);return}const u=cP[l],f=u??l;if(s[f]!=null){console.warn(`Multiple bone entries for ${f} detected (index = ${A}), ignoring duplicated entries.`);return}s[f]={node:c}}))));const o=new AP(this._ensureRequiredBonesExist(s),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(n.scene.add(o.normalizedHumanBonesRoot),this.helperRoot){const a=new aP(o);this.helperRoot.add(a),a.renderOrder=this.helperRoot.renderOrder}return o})}_ensureRequiredBonesExist(n){const e=Object.values(RAe).filter(t=>n[t]==null);if(e.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${e.join(", ")}`);return n}},uP=class extends Wt{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new lt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,n=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,n=!0),n&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let n=0;n<64;n++){const e=n/63*this._currentTheta;this._attrPos.setXYZ(n+1,this._currentRadius*Math.sin(e),0,this._currentRadius*Math.cos(e))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<63;n++)this._attrIndex.setXYZ(n*3,0,n+1,n+2);this._attrIndex.needsUpdate=!0}},LAe=class extends Wt{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new Z,this._currentTail=new Z,this._attrPos=new lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,n=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},sv=new rt,fP=new rt,Zd=new Z,hP=new Z,dP=Math.sqrt(2)/2,PAe=new rt(0,0,-dP,dP),DAe=new Z(0,1,0),OAe=class extends Pr{constructor(n){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=n;{const e=new uP;e.radius=.5;const t=new Mi({color:65280,transparent:!0,opacity:.5,side:hi,depthTest:!1,depthWrite:!1});this._meshPitch=new Cn(e,t),this.add(this._meshPitch)}{const e=new uP;e.radius=.5;const t=new Mi({color:16711680,transparent:!0,opacity:.5,side:hi,depthTest:!1,depthWrite:!1});this._meshYaw=new Cn(e,t),this.add(this._meshYaw)}{const e=new LAe;e.radius=.1;const t=new Sl({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new vg(e,t),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(n){const e=Lt.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=e,this._meshYaw.geometry.update();const t=Lt.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=t,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Zd),this.vrmLookAt.getLookAtWorldQuaternion(sv),sv.multiply(this.vrmLookAt.getFaceFrontQuaternion(fP)),this._meshYaw.position.copy(Zd),this._meshYaw.quaternion.copy(sv),this._meshPitch.position.copy(Zd),this._meshPitch.quaternion.copy(sv),this._meshPitch.quaternion.multiply(fP.setFromAxisAngle(DAe,e)),this._meshPitch.quaternion.multiply(PAe);const{target:r,autoUpdate:i}=this.vrmLookAt;r!=null&&i&&(r.getWorldPosition(hP).sub(Zd),this._lineTarget.geometry.tail.copy(hP),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Zd)),super.updateMatrixWorld(n)}},NAe=new Z,kAe=new Z;function UC(n,e){return n.matrixWorld.decompose(NAe,e,kAe),e}function uy(n){return[Math.atan2(-n.z,n.x),Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z))]}function pP(n){const e=Math.round(n/2/Math.PI);return n-2*Math.PI*e}var mP=new Z(0,0,1),QAe=new Z,HAe=new Z,zAe=new Z,GAe=new rt,Gb=new rt,gP=new rt,VAe=new rt,Vb=new di,S6=class T6{constructor(e,t){this.offsetFromHeadBone=new Z,this.autoUpdate=!0,this.faceFront=new Z(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new rt)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new di)}getEuler(e){return e.set(Lt.DEG2RAD*this._pitch,Lt.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new T6(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return UC(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(mP)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,r]=uy(this.faceFront);return Vb.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(Vb).premultiply(VAe.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(Gb),this.getFaceFrontQuaternion(gP),e.copy(mP).applyQuaternion(Gb).applyQuaternion(gP).applyEuler(this.getEuler(Vb))}lookAt(e){const t=GAe.copy(this._restHeadWorldQuaternion).multiply(E6(this.getLookAtWorldQuaternion(Gb))),r=this.getLookAtWorldPosition(HAe),i=zAe.copy(e).sub(r).applyQuaternion(t).normalize(),[s,o]=uy(this.faceFront),[a,l]=uy(i),A=pP(a-s),c=pP(o-l);this._yaw=Lt.RAD2DEG*A,this._pitch=Lt.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(QAe)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}};S6.EULER_ORDER="YXZ";var jAe=S6,WAe=new Z(0,0,1),Uo=new rt,Vu=new rt,ys=new di(0,0,0,"YXZ"),fy=class{constructor(n,e,t,r,i){this.humanoid=n,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=r,this.rangeMapVerticalUp=i,this.faceFront=new Z(0,0,1),this._restQuatLeftEye=new rt,this._restQuatRightEye=new rt,this._restLeftEyeParentWorldQuat=new rt,this._restRightEyeParentWorldQuat=new rt;const s=this.humanoid.getRawBoneNode("leftEye"),o=this.humanoid.getRawBoneNode("rightEye");s&&(this._restQuatLeftEye.copy(s.quaternion),UC(s.parent,this._restLeftEyeParentWorldQuat)),o&&(this._restQuatRightEye.copy(o.quaternion),UC(o.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(n,e){const t=this.humanoid.getRawBoneNode("leftEye"),r=this.humanoid.getRawBoneNode("rightEye"),i=this.humanoid.getNormalizedBoneNode("leftEye"),s=this.humanoid.getNormalizedBoneNode("rightEye");t&&(e<0?ys.x=-Lt.DEG2RAD*this.rangeMapVerticalDown.map(-e):ys.x=Lt.DEG2RAD*this.rangeMapVerticalUp.map(e),n<0?ys.y=-Lt.DEG2RAD*this.rangeMapHorizontalInner.map(-n):ys.y=Lt.DEG2RAD*this.rangeMapHorizontalOuter.map(n),Uo.setFromEuler(ys),this._getWorldFaceFrontQuat(Vu),i.quaternion.copy(Vu).multiply(Uo).multiply(Vu.invert()),Uo.copy(this._restLeftEyeParentWorldQuat),t.quaternion.copy(i.quaternion).multiply(Uo).premultiply(Uo.invert()).multiply(this._restQuatLeftEye)),r&&(e<0?ys.x=-Lt.DEG2RAD*this.rangeMapVerticalDown.map(-e):ys.x=Lt.DEG2RAD*this.rangeMapVerticalUp.map(e),n<0?ys.y=-Lt.DEG2RAD*this.rangeMapHorizontalOuter.map(-n):ys.y=Lt.DEG2RAD*this.rangeMapHorizontalInner.map(n),Uo.setFromEuler(ys),this._getWorldFaceFrontQuat(Vu),s.quaternion.copy(Vu).multiply(Uo).multiply(Vu.invert()),Uo.copy(this._restRightEyeParentWorldQuat),r.quaternion.copy(s.quaternion).multiply(Uo).premultiply(Uo.invert()).multiply(this._restQuatRightEye))}lookAt(n){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Lt.RAD2DEG*n.y,t=Lt.RAD2DEG*n.x;this.applyYawPitch(e,t)}_getWorldFaceFrontQuat(n){if(this.faceFront.distanceToSquared(WAe)<.01)return n.identity();const[e,t]=uy(this.faceFront);return ys.set(0,.5*Math.PI+e,t,"YZX"),n.setFromEuler(ys)}};fy.type="bone";var LC=class{constructor(n,e,t,r,i){this.expressions=n,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=r,this.rangeMapVerticalUp=i}applyYawPitch(n,e){e<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-e))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(e))),n<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-n))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(n)))}lookAt(n){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Lt.RAD2DEG*n.y,t=Lt.RAD2DEG*n.x;this.applyYawPitch(e,t)}};LC.type="expression";var vP=class{constructor(n,e){this.inputMaxValue=n,this.outputScale=e}map(n){return this.outputScale*g6(n/this.inputMaxValue)}},KAe=new Set(["1.0","1.0-beta"]),ov=.01,YAe=class{get name(){return"VRMLookAtLoaderPlugin"}constructor(n,e){this.parser=n,this.helperRoot=e==null?void 0:e.helperRoot}afterRoot(n){return zt(this,null,function*(){const e=n.userData.vrmHumanoid;if(e===null)return;if(e===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const t=n.userData.vrmExpressionManager;if(t!==null){if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");n.userData.vrmLookAt=yield this._import(n,e,t)}})}_import(n,e,t){return zt(this,null,function*(){if(e==null||t==null)return null;const r=yield this._v1Import(n,e,t);if(r)return r;const i=yield this._v0Import(n,e,t);return i||null})}_v1Import(n,e,t){return zt(this,null,function*(){var r,i,s;const o=this.parser.json;if(!(((r=o.extensionsUsed)==null?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const l=(i=o.extensions)==null?void 0:i.VRMC_vrm;if(!l)return null;const A=l.specVersion;if(!KAe.has(A))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${A}"`),null;const c=l.lookAt;if(!c)return null;const u=c.type==="expression"?1:10,f=this._v1ImportRangeMap(c.rangeMapHorizontalInner,u),h=this._v1ImportRangeMap(c.rangeMapHorizontalOuter,u),p=this._v1ImportRangeMap(c.rangeMapVerticalDown,u),d=this._v1ImportRangeMap(c.rangeMapVerticalUp,u);let g;c.type==="expression"?g=new LC(t,f,h,p,d):g=new fy(e,f,h,p,d);const m=this._importLookAt(e,g);return m.offsetFromHeadBone.fromArray((s=c.offsetFromHeadBone)!=null?s:[0,.06,0]),m})}_v1ImportRangeMap(n,e){var t,r;let i=(t=n==null?void 0:n.inputMaxValue)!=null?t:90;const s=(r=n==null?void 0:n.outputScale)!=null?r:e;return i<ov&&(console.warn("VRMLookAtLoaderPlugin: inputMaxValue of a range map is too small. Consider reviewing the range map!"),i=ov),new vP(i,s)}_v0Import(n,e,t){return zt(this,null,function*(){var r,i,s,o;const l=(r=this.parser.json.extensions)==null?void 0:r.VRM;if(!l)return null;const A=l.firstPerson;if(!A)return null;const c=A.lookAtTypeName==="BlendShape"?1:10,u=this._v0ImportDegreeMap(A.lookAtHorizontalInner,c),f=this._v0ImportDegreeMap(A.lookAtHorizontalOuter,c),h=this._v0ImportDegreeMap(A.lookAtVerticalDown,c),p=this._v0ImportDegreeMap(A.lookAtVerticalUp,c);let d;A.lookAtTypeName==="BlendShape"?d=new LC(t,u,f,h,p):d=new fy(e,u,f,h,p);const g=this._importLookAt(e,d);return A.firstPersonBoneOffset?g.offsetFromHeadBone.set((i=A.firstPersonBoneOffset.x)!=null?i:0,(s=A.firstPersonBoneOffset.y)!=null?s:.06,-((o=A.firstPersonBoneOffset.z)!=null?o:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),d instanceof fy&&d.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(n,e){var t,r;const i=n==null?void 0:n.curve;JSON.stringify(i)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported");let s=(t=n==null?void 0:n.xRange)!=null?t:90;const o=(r=n==null?void 0:n.yRange)!=null?r:e;return s<ov&&(console.warn("VRMLookAtLoaderPlugin: xRange of a degree map is too small. Consider reviewing the degree map!"),s=ov),new vP(s,o)}_importLookAt(n,e){const t=new jAe(n,e);if(this.helperRoot){const r=new OAe(t);this.helperRoot.add(r),r.renderOrder=this.helperRoot.renderOrder}return t}};function $Ae(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}var XAe=new Set(["1.0","1.0-beta"]),ZAe=class{get name(){return"VRMMetaLoaderPlugin"}constructor(n,e){var t,r,i;this.parser=n,this.needThumbnailImage=(t=e==null?void 0:e.needThumbnailImage)!=null?t:!1,this.acceptLicenseUrls=(r=e==null?void 0:e.acceptLicenseUrls)!=null?r:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(i=e==null?void 0:e.acceptV0Meta)!=null?i:!0}afterRoot(n){return zt(this,null,function*(){n.userData.vrmMeta=yield this._import(n)})}_import(n){return zt(this,null,function*(){const e=yield this._v1Import(n);if(e!=null)return e;const t=yield this._v0Import(n);return t??null})}_v1Import(n){return zt(this,null,function*(){var e,t,r;const i=this.parser.json;if(!(((e=i.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const o=(t=i.extensions)==null?void 0:t.VRMC_vrm;if(o==null)return null;const a=o.specVersion;if(!XAe.has(a))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.meta;if(!l)return null;const A=l.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(A))throw new Error(`VRMMetaLoaderPlugin: The license url "${A}" is not accepted`);let u;return this.needThumbnailImage&&l.thumbnailImage!=null&&(u=(r=yield this._extractGLTFImage(l.thumbnailImage))!=null?r:void 0),{metaVersion:"1",name:l.name,version:l.version,authors:l.authors,copyrightInformation:l.copyrightInformation,contactInformation:l.contactInformation,references:l.references,thirdPartyLicenses:l.thirdPartyLicenses,thumbnailImage:u,licenseUrl:l.licenseUrl,avatarPermission:l.avatarPermission,allowExcessivelyViolentUsage:l.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:l.allowExcessivelySexualUsage,commercialUsage:l.commercialUsage,allowPoliticalOrReligiousUsage:l.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:l.allowAntisocialOrHateUsage,creditNotation:l.creditNotation,allowRedistribution:l.allowRedistribution,modification:l.modification,otherLicenseUrl:l.otherLicenseUrl}})}_v0Import(n){return zt(this,null,function*(){var e;const r=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!r)return null;const i=r.meta;if(!i)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let s;return this.needThumbnailImage&&i.texture!=null&&i.texture!==-1&&(s=yield this.parser.getDependency("texture",i.texture)),{metaVersion:"0",allowedUserName:i.allowedUserName,author:i.author,commercialUssageName:i.commercialUssageName,contactInformation:i.contactInformation,licenseName:i.licenseName,otherLicenseUrl:i.otherLicenseUrl,otherPermissionUrl:i.otherPermissionUrl,reference:i.reference,sexualUssageName:i.sexualUssageName,texture:s??void 0,title:i.title,version:i.version,violentUssageName:i.violentUssageName}})}_extractGLTFImage(n){return zt(this,null,function*(){var e;const r=(e=this.parser.json.images)==null?void 0:e[n];if(r==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${n}] of glTF as a thumbnail but the image doesn't exist`),null;let i=r.uri;if(r.bufferView!=null){const o=yield this.parser.getDependency("bufferView",r.bufferView),a=new Blob([o],{type:r.mimeType});i=URL.createObjectURL(a)}return i==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${n}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new $H().loadAsync($Ae(i,this.parser.options.path)).catch(o=>(console.error(o),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}},JAe=class{constructor(n){this.scene=n.scene,this.meta=n.meta,this.humanoid=n.humanoid,this.expressionManager=n.expressionManager,this.firstPerson=n.firstPerson,this.lookAt=n.lookAt}update(n){this.humanoid.update(),this.lookAt&&this.lookAt.update(n),this.expressionManager&&this.expressionManager.update()}},qAe=class extends JAe{constructor(n){super(n),this.materials=n.materials,this.springBoneManager=n.springBoneManager,this.nodeConstraintManager=n.nodeConstraintManager}update(n){super.update(n),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(n),this.materials&&this.materials.forEach(e=>{e.update&&e.update(n)})}},ece=Object.defineProperty,yP=Object.getOwnPropertySymbols,tce=Object.prototype.hasOwnProperty,nce=Object.prototype.propertyIsEnumerable,wP=(n,e,t)=>e in n?ece(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xP=(n,e)=>{for(var t in e||(e={}))tce.call(e,t)&&wP(n,t,e[t]);if(yP)for(var t of yP(e))nce.call(e,t)&&wP(n,t,e[t]);return n},Mc=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),rce={"":3e3,srgb:3001};function ice(n,e){parseInt(jc,10)>=152?n.colorSpace=e:n.encoding=rce[e]}var sce=class{get pending(){return Promise.all(this._pendings)}constructor(n,e){this._parser=n,this._materialParams=e,this._pendings=[]}assignPrimitive(n,e){e!=null&&(this._materialParams[n]=e)}assignColor(n,e,t){e!=null&&(this._materialParams[n]=new ke().fromArray(e),t&&this._materialParams[n].convertSRGBToLinear())}assignTexture(n,e,t){return Mc(this,null,function*(){const r=(()=>Mc(this,null,function*(){e!=null&&(yield this._parser.assignTexture(this._materialParams,n,e),t&&ice(this._materialParams[n],"srgb"))}))();return this._pendings.push(r),r})}assignTextureByIndex(n,e,t){return Mc(this,null,function*(){return this.assignTexture(n,e!=null?{index:e}:void 0,t)})}},oce=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;

  // COMPAT: pre-r151 uses a common uvTransform
  #if THREE_VRM_THREE_REVISION < 151
    uniform mat3 uvTransform;
  #endif
#endif

// #include <uv2_pars_vertex>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    attribute vec2 uv2;
    varying vec2 vUv2;
    uniform mat3 uv2Transform;
  #endif
#endif

// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    // COMPAT: pre-r151 uses a common uvTransform
    #if THREE_VRM_THREE_REVISION >= 151
      vUv = uv;
    #else
      vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
  #endif

  // #include <uv2_vertex>
  // COMAPT: pre-r151 uses uv2 for lightMap and aoMap
  #if THREE_VRM_THREE_REVISION < 151
    #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
    #endif
  #endif

  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  #ifdef OUTLINE
    float worldNormalLength = length( transformedNormal );
    vec3 outlineOffset = outlineWidthFactor * worldNormalLength * objectNormal;

    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      float outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
      outlineOffset *= outlineTex;
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      outlineOffset *= vViewPosition.z / projectionMatrix[ 1 ].y;
    #endif

    gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,ace=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

// #include <uv2_pars_fragment>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    varying vec2 vUv2;
  #endif
#endif

#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#include <alphatest_pars_fragment>

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
// COMPAT: pre-r151 doesn't have BRDF_Lambert in <common>
#if THREE_VRM_THREE_REVISION < 151
  vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
  }
#endif

#include <lights_pars_begin>

#include <normal_pars_fragment>

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

// COMPAT: pre-r156 uses a struct GeometricContext
#if THREE_VRM_THREE_REVISION >= 157
  void RE_Direct_MToon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometryNormal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#else
  void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometry.normal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#endif

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
#if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

  uniform mat3 normalMatrix;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( TANGENTSPACE_NORMALMAP ) )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126, r151
  #if THREE_VRM_THREE_REVISION >= 151

    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {

      vec3 q0 = dFdx( eye_pos.xyz );
      vec3 q1 = dFdy( eye_pos.xyz );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = surf_norm;

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );

      return mat3( T * scale, B * scale, N );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <colorspace_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    vec4 sampledDiffuseColor = texture2D( map, mapUv );
    #ifdef DECODE_VIDEO_TEXTURE
      sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
    #endif
    diffuseColor *= sampledDiffuseColor;
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>

  // #include <normal_fragment_begin>
  float faceDirection = gl_FrontFacing ? 1.0 : -1.0;

  #ifdef FLAT_SHADED

    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );

  #else

    vec3 normal = normalize( vNormal );

    #ifdef DOUBLE_SIDED

      normal *= faceDirection;

    #endif

  #endif

  #ifdef USE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;

  #endif

  #ifdef USE_NORMALMAP_TANGENTSPACE

    #ifdef USE_TANGENT

      mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn = getTangentFrame( - vViewPosition, normal, normalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn[0] *= faceDirection;
      tbn[1] *= faceDirection;

    #endif

  #endif

  #ifdef USE_CLEARCOAT_NORMALMAP

    #ifdef USE_TANGENT

      mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn2[0] *= faceDirection;
      tbn2[1] *= faceDirection;

    #endif

  #endif

  // non perturbed normal for clearcoat among others

  vec3 nonPerturbedNormal = normal;

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  // COMPAT: pre-r151
  // USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
  #if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      normal = normal * faceDirection;

    #endif

    normal = normalize( normalMatrix * normal );

  // COMPAT: pre-r151
  // USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
  #elif defined( USE_NORMALMAP_TANGENTSPACE ) || defined( TANGENTSPACE_NORMALMAP )

    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    // COMPAT: pre-r151
    #if THREE_VRM_THREE_REVISION >= 151 || defined( USE_TANGENT )

      normal = normalize( tbn * mapN );

    #else

      normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  // COMPAT: pre-r156 uses a struct GeometricContext
  #if THREE_VRM_THREE_REVISION >= 157
    vec3 geometryPosition = - vViewPosition;
    vec3 geometryNormal = normal;
    vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    vec3 geometryClearcoatNormal;

    #ifdef USE_CLEARCOAT

      geometryClearcoatNormal = clearcoatNormal;

    #endif
  #else
    GeometricContext geometry;

    geometry.position = - vViewPosition;
    geometry.normal = normal;
    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    #ifdef USE_CLEARCOAT

      geometry.clearcoatNormal = clearcoatNormal;

    #endif
  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getPointLightInfo( pointLight, geometryPosition, directLight );
      #else
        getPointLightInfo( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getSpotLightInfo( spotLight, geometryPosition, directLight );
      #else
        getSpotLightInfo( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getDirectionalLightInfo( directionalLight, directLight );
      #else
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    // COMPAT: pre-r156 uses a struct GeometricContext
    // COMPAT: pre-r156 doesn't have a define USE_LIGHT_PROBES
    #if THREE_VRM_THREE_REVISION >= 157
      #if defined( USE_LIGHT_PROBES )
        irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
      #endif
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        // COMPAT: pre-r156 uses a struct GeometricContext
        #if THREE_VRM_THREE_REVISION >= 157
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  #ifdef OPAQUE
    diffuseColor.a = 1.0;
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`,lce={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},_P={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},Ace={3e3:"",3001:"srgb"};function jb(n){return parseInt(jc,10)>=152?n.colorSpace:Ace[n.encoding]}var I6=class extends Mr{constructor(n={}){var e;super({vertexShader:oce,fragmentShader:ace}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=qh,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=lce.None,this._outlineWidthMode=_P.None,this._isOutline=!1,n.transparentWithZWrite&&(n.depthWrite=!0),delete n.transparentWithZWrite,n.fog=!0,n.lights=!0,n.clipping=!0,this.uniforms=qS.merge([Ne.common,Ne.normalmap,Ne.emissivemap,Ne.fog,Ne.lights,{litFactor:{value:new ke(1,1,1)},mapUvTransform:{value:new xn},colorAlpha:{value:1},normalMapUvTransform:{value:new xn},shadeColorFactor:{value:new ke(0,0,0)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new xn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new xn},shadingShiftTextureScale:{value:1},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new ke(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new xn},parametricRimColorFactor:{value:new ke(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new xn},rimLightingMixFactor:{value:1},parametricRimFresnelPowerFactor:{value:5},parametricRimLiftFactor:{value:0},emissive:{value:new ke(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new xn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new xn},outlineWidthFactor:{value:0},outlineColorFactor:{value:new ke(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new xn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},(e=n.uniforms)!=null?e:{}]),this.setValues(n),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureColorSpace:${jb(this.matcapTexture)}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureColorSpace:${jb(this.shadeMultiplyTexture)}`:"",this.rimMultiplyTexture?`rimMultiplyTextureColorSpace:${jb(this.rimMultiplyTexture)}`:""].join(","),this.onBeforeCompile=t=>{const r=parseInt(jc,10),i=Object.entries(xP(xP({},this._generateDefines()),this.defines)).filter(([s,o])=>!!o).map(([s,o])=>`#define ${s} ${o}`).join(`
`)+`
`;t.vertexShader=i+t.vertexShader,t.fragmentShader=i+t.fragmentShader,r<154&&(t.fragmentShader=t.fragmentShader.replace("#include <colorspace_fragment>","#include <encodings_fragment>"))}}get color(){return this.uniforms.litFactor.value}set color(n){this.uniforms.litFactor.value=n}get map(){return this.uniforms.map.value}set map(n){this.uniforms.map.value=n}get normalMap(){return this.uniforms.normalMap.value}set normalMap(n){this.uniforms.normalMap.value=n}get normalScale(){return this.uniforms.normalScale.value}set normalScale(n){this.uniforms.normalScale.value=n}get emissive(){return this.uniforms.emissive.value}set emissive(n){this.uniforms.emissive.value=n}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(n){this.uniforms.emissiveIntensity.value=n}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(n){this.uniforms.emissiveMap.value=n}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(n){this.uniforms.shadeColorFactor.value=n}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(n){this.uniforms.shadeMultiplyTexture.value=n}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(n){this.uniforms.shadingShiftFactor.value=n}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(n){this.uniforms.shadingShiftTexture.value=n}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(n){this.uniforms.shadingShiftTextureScale.value=n}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(n){this.uniforms.shadingToonyFactor.value=n}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(n){this.uniforms.giEqualizationFactor.value=n}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(n){this.uniforms.matcapFactor.value=n}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(n){this.uniforms.matcapTexture.value=n}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(n){this.uniforms.parametricRimColorFactor.value=n}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(n){this.uniforms.rimMultiplyTexture.value=n}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(n){this.uniforms.rimLightingMixFactor.value=n}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(n){this.uniforms.parametricRimFresnelPowerFactor.value=n}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(n){this.uniforms.parametricRimLiftFactor.value=n}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(n){this.uniforms.outlineWidthMultiplyTexture.value=n}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(n){this.uniforms.outlineWidthFactor.value=n}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(n){this.uniforms.outlineColorFactor.value=n}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(n){this.uniforms.outlineLightingMixFactor.value=n}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(n){this.uniforms.uvAnimationMaskTexture.value=n}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(n){this.uniforms.uvAnimationScrollXOffset.value=n}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(n){this.uniforms.uvAnimationScrollYOffset.value=n}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(n){this.uniforms.uvAnimationRotationPhase.value=n}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(n){this._ignoreVertexColor=n,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(n){this._v0CompatShade=n,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(n){this._debugMode=n,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(n){this._outlineWidthMode=n,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(n){this._isOutline=n,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(n){this._uploadUniformsWorkaround(),this._updateUVAnimation(n)}copy(n){return super.copy(n),this.map=n.map,this.normalMap=n.normalMap,this.emissiveMap=n.emissiveMap,this.shadeMultiplyTexture=n.shadeMultiplyTexture,this.shadingShiftTexture=n.shadingShiftTexture,this.matcapTexture=n.matcapTexture,this.rimMultiplyTexture=n.rimMultiplyTexture,this.outlineWidthMultiplyTexture=n.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=n.uvAnimationMaskTexture,this.normalMapType=n.normalMapType,this.uvAnimationScrollXSpeedFactor=n.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=n.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=n.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=n.ignoreVertexColor,this.v0CompatShade=n.v0CompatShade,this.debugMode=n.debugMode,this.outlineWidthMode=n.outlineWidthMode,this.isOutline=n.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(n){this.uniforms.uvAnimationScrollXOffset.value+=n*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=n*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=n*this.uvAnimationRotationSpeedFactor,this.uniforms.alphaTest.value=this.alphaTest,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),this.uniformsNeedUpdate=!0}_generateDefines(){const n=parseInt(jc,10),e=this.outlineWidthMultiplyTexture!==null,t=this.map!==null||this.normalMap!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:n,OUTLINE:this._isOutline,MTOON_USE_UV:e||t,MTOON_UVS_VERTEX_ONLY:e&&!t,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===_P.ScreenCoordinates}}_updateTextureMatrix(n,e){n.value&&(n.value.matrixAutoUpdate&&n.value.updateMatrix(),e.value.copy(n.value.matrix))}},cce=new Set(["1.0","1.0-beta"]),R6=class hy{get name(){return hy.EXTENSION_NAME}constructor(e,t={}){var r,i,s,o;this.parser=e,this.materialType=(r=t.materialType)!=null?r:I6,this.renderOrderOffset=(i=t.renderOrderOffset)!=null?i:0,this.v0CompatShade=(s=t.v0CompatShade)!=null?s:!1,this.debugMode=(o=t.debugMode)!=null?o:"none",this._mToonMaterialSet=new Set}beforeRoot(){return Mc(this,null,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return Mc(this,null,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?this.materialType:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){return Mc(this,null,function*(){var t;const r=this.parser,s=(t=r.json.meshes)==null?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const o=s.primitives,a=yield r.loadMesh(e);if(o.length===1){const l=a,A=o[0].material;A!=null&&this._setupPrimitive(l,A)}else{const l=a;for(let A=0;A<o.length;A++){const c=l.children[A],u=o[A].material;u!=null&&this._setupPrimitive(c,u)}}return a})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((i,s)=>{var o;this._getMToonExtension(s)&&((o=i.extensions)!=null&&o.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const o=(t=this.parser.json.materials)==null?void 0:t[e];if(o==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)==null?void 0:r[hy.EXTENSION_NAME];if(a==null)return;const l=a.specVersion;if(!cce.has(l)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${hy.EXTENSION_NAME} specVersion "${l}"`);return}return a}_extendMaterialParams(e,t){return Mc(this,null,function*(){var r;delete t.metalness,delete t.roughness;const i=new sce(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)==null?void 0:r.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const i=this._parseRenderOrder(r);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_shouldGenerateOutline(e){return typeof e.outlineWidthMode=="string"&&e.outlineWidthMode!=="none"&&typeof e.outlineWidthFactor=="number"&&e.outlineWidthFactor>0}_generateOutline(e){const t=e.material;if(!(t instanceof Li)||!this._shouldGenerateOutline(t))return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=qr,e.material.push(r);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(i=>r.add(i)):r.add(t);for(const i of r)this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!=null?t:0)}};R6.EXTENSION_NAME="VRMC_materials_mtoon";var uce=R6,fce=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),F6=class PC{get name(){return PC.EXTENSION_NAME}constructor(e){this.parser=e}extendMaterialParams(e,t){return fce(this,null,function*(){const r=this._getHDREmissiveMultiplierExtension(e);if(r==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=r.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,r;const o=(t=this.parser.json.materials)==null?void 0:t[e];if(o==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)==null?void 0:r[PC.EXTENSION_NAME];if(a!=null)return a}};F6.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";var hce=F6,dce=Object.defineProperty,pce=Object.defineProperties,mce=Object.getOwnPropertyDescriptors,bP=Object.getOwnPropertySymbols,gce=Object.prototype.hasOwnProperty,vce=Object.prototype.propertyIsEnumerable,BP=(n,e,t)=>e in n?dce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lo=(n,e)=>{for(var t in e||(e={}))gce.call(e,t)&&BP(n,t,e[t]);if(bP)for(var t of bP(e))vce.call(e,t)&&BP(n,t,e[t]);return n},EP=(n,e)=>pce(n,mce(e)),yce=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});function ju(n){return Math.pow(n,2.2)}var wce=class{get name(){return"VRMMaterialsV0CompatPlugin"}constructor(n){var e;this.parser=n,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const t=this.parser.json;t.extensionsUsed=(e=t.extensionsUsed)!=null?e:[],t.extensionsUsed.indexOf("KHR_texture_transform")===-1&&t.extensionsUsed.push("KHR_texture_transform")}beforeRoot(){return yce(this,null,function*(){var n;const e=this.parser.json,t=(n=e.extensions)==null?void 0:n.VRM,r=t==null?void 0:t.materialProperties;r&&(this._populateRenderQueueMap(r),r.forEach((i,s)=>{var o,a;const l=(o=e.materials)==null?void 0:o[s];if(l==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${s}] of glTF but the material doesn't exist`);return}if(i.shader==="VRM/MToon"){const A=this._parseV0MToonProperties(i,l);e.materials[s]=A}else if((a=i.shader)!=null&&a.startsWith("VRM/Unlit")){const A=this._parseV0UnlitProperties(i,l);e.materials[s]=A}else i.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${i.shader}`)}))})}_parseV0MToonProperties(n,e){var t,r,i,s,o,a,l,A,c,u,f,h,p,d,g,m,y,w,x,_,C,T,b,M,P,Y,H,I,v,E,F,D,O,z,K,Q,B,j,ee,U,X,ae,se,de,oe,pe,_e,xe,L,ue,Ae,q,J,ce,be;const Be=(r=(t=n.keywordMap)==null?void 0:t._ALPHABLEND_ON)!=null?r:!1,W=((i=n.floatProperties)==null?void 0:i._ZWrite)===1&&Be,re=this._v0ParseRenderQueue(n),he=(o=(s=n.keywordMap)==null?void 0:s._ALPHATEST_ON)!=null?o:!1,me=Be?"BLEND":he?"MASK":"OPAQUE",G=he?(l=(a=n.floatProperties)==null?void 0:a._Cutoff)!=null?l:.5:void 0,S=((c=(A=n.floatProperties)==null?void 0:A._CullMode)!=null?c:2)===0,V=this._portTextureTransform(n),te=((f=(u=n.vectorProperties)==null?void 0:u._Color)!=null?f:[1,1,1,1]).map((Hr,ki)=>ki===3?Hr:ju(Hr)),le=(h=n.textureProperties)==null?void 0:h._MainTex,ie=le!=null?{index:le,extensions:Lo({},V)}:void 0,Ie=(d=(p=n.floatProperties)==null?void 0:p._BumpScale)!=null?d:1,Te=(g=n.textureProperties)==null?void 0:g._BumpMap,Le=Te!=null?{index:Te,scale:Ie,extensions:Lo({},V)}:void 0,He=((y=(m=n.vectorProperties)==null?void 0:m._EmissionColor)!=null?y:[0,0,0,1]).map(ju),De=(w=n.textureProperties)==null?void 0:w._EmissionMap,fe=De!=null?{index:De,extensions:Lo({},V)}:void 0,Me=((_=(x=n.vectorProperties)==null?void 0:x._ShadeColor)!=null?_:[.97,.81,.86,1]).map(ju),Se=(C=n.textureProperties)==null?void 0:C._ShadeTexture,Fe=Se!=null?{index:Se,extensions:Lo({},V)}:void 0;let Ve=(b=(T=n.floatProperties)==null?void 0:T._ShadeShift)!=null?b:0,Je=(P=(M=n.floatProperties)==null?void 0:M._ShadeToony)!=null?P:.9;Je=Lt.lerp(Je,1,.5+.5*Ve),Ve=-Ve-(1-Je);const ft=(H=(Y=n.floatProperties)==null?void 0:Y._IndirectLightIntensity)!=null?H:.1,on=ft?1-ft:void 0,Ct=(I=n.textureProperties)==null?void 0:I._SphereAdd,it=Ct!=null?[1,1,1]:void 0,lr=Ct!=null?{index:Ct}:void 0,yt=(E=(v=n.floatProperties)==null?void 0:v._RimLightingMix)!=null?E:0,Vt=(F=n.textureProperties)==null?void 0:F._RimTexture,Js=Vt!=null?{index:Vt,extensions:Lo({},V)}:void 0,Xt=((O=(D=n.vectorProperties)==null?void 0:D._RimColor)!=null?O:[0,0,0,1]).map(ju),Zt=(K=(z=n.floatProperties)==null?void 0:z._RimFresnelPower)!=null?K:1,ne=(B=(Q=n.floatProperties)==null?void 0:Q._RimLift)!=null?B:0,ve=["none","worldCoordinates","screenCoordinates"][(ee=(j=n.floatProperties)==null?void 0:j._OutlineWidthMode)!=null?ee:0];let Ee=(X=(U=n.floatProperties)==null?void 0:U._OutlineWidth)!=null?X:0;Ee=.01*Ee;const we=(ae=n.textureProperties)==null?void 0:ae._OutlineWidthTexture,Ce=we!=null?{index:we,extensions:Lo({},V)}:void 0,ze=((de=(se=n.vectorProperties)==null?void 0:se._OutlineColor)!=null?de:[0,0,0]).map(ju),$e=((pe=(oe=n.floatProperties)==null?void 0:oe._OutlineColorMode)!=null?pe:0)===1?(xe=(_e=n.floatProperties)==null?void 0:_e._OutlineLightingMix)!=null?xe:1:0,Xe=(L=n.textureProperties)==null?void 0:L._UvAnimMaskTexture,gt=Xe!=null?{index:Xe,extensions:Lo({},V)}:void 0,dt=(Ae=(ue=n.floatProperties)==null?void 0:ue._UvAnimScrollX)!=null?Ae:0;let ct=(J=(q=n.floatProperties)==null?void 0:q._UvAnimScrollY)!=null?J:0;ct!=null&&(ct=-ct);const jt=(be=(ce=n.floatProperties)==null?void 0:ce._UvAnimRotation)!=null?be:0,vn={specVersion:"1.0",transparentWithZWrite:W,renderQueueOffsetNumber:re,shadeColorFactor:Me,shadeMultiplyTexture:Fe,shadingShiftFactor:Ve,shadingToonyFactor:Je,giEqualizationFactor:on,matcapFactor:it,matcapTexture:lr,rimLightingMixFactor:yt,rimMultiplyTexture:Js,parametricRimColorFactor:Xt,parametricRimFresnelPowerFactor:Zt,parametricRimLiftFactor:ne,outlineWidthMode:ve,outlineWidthFactor:Ee,outlineWidthMultiplyTexture:Ce,outlineColorFactor:ze,outlineLightingMixFactor:$e,uvAnimationMaskTexture:gt,uvAnimationScrollXSpeedFactor:dt,uvAnimationScrollYSpeedFactor:ct,uvAnimationRotationSpeedFactor:jt};return EP(Lo({},e),{pbrMetallicRoughness:{baseColorFactor:te,baseColorTexture:ie},normalTexture:Le,emissiveTexture:fe,emissiveFactor:He,alphaMode:me,alphaCutoff:G,doubleSided:S,extensions:{VRMC_materials_mtoon:vn}})}_parseV0UnlitProperties(n,e){var t,r,i,s,o;const a=n.shader==="VRM/UnlitTransparentZWrite",l=n.shader==="VRM/UnlitTransparent"||a,A=this._v0ParseRenderQueue(n),c=n.shader==="VRM/UnlitCutout",u=l?"BLEND":c?"MASK":"OPAQUE",f=c?(r=(t=n.floatProperties)==null?void 0:t._Cutoff)!=null?r:.5:void 0,h=this._portTextureTransform(n),p=((s=(i=n.vectorProperties)==null?void 0:i._Color)!=null?s:[1,1,1,1]).map(ju),d=(o=n.textureProperties)==null?void 0:o._MainTex,g=d!=null?{index:d,extensions:Lo({},h)}:void 0,m={specVersion:"1.0",transparentWithZWrite:a,renderQueueOffsetNumber:A,shadeColorFactor:p,shadeMultiplyTexture:g};return EP(Lo({},e),{pbrMetallicRoughness:{baseColorFactor:p,baseColorTexture:g},alphaMode:u,alphaCutoff:f,extensions:{VRMC_materials_mtoon:m}})}_portTextureTransform(n){var e,t,r,i,s;const o=(e=n.vectorProperties)==null?void 0:e._MainTex;if(o==null)return{};const a=[(t=o==null?void 0:o[0])!=null?t:0,(r=o==null?void 0:o[1])!=null?r:0],l=[(i=o==null?void 0:o[2])!=null?i:1,(s=o==null?void 0:o[3])!=null?s:1];return a[1]=1-l[1]-a[1],{KHR_texture_transform:{offset:a,scale:l}}}_v0ParseRenderQueue(n){var e,t;const r=n.shader==="VRM/UnlitTransparentZWrite",i=((e=n.keywordMap)==null?void 0:e._ALPHABLEND_ON)!=null||n.shader==="VRM/UnlitTransparent"||r,s=((t=n.floatProperties)==null?void 0:t._ZWrite)===1||r;let o=0;if(i){const a=n.renderQueue;a!=null&&(s?o=this._renderQueueMapTransparentZWrite.get(a):o=this._renderQueueMapTransparent.get(a))}return o}_populateRenderQueueMap(n){const e=new Set,t=new Set;n.forEach(r=>{var i,s;const o=r.shader==="VRM/UnlitTransparentZWrite",a=((i=r.keywordMap)==null?void 0:i._ALPHABLEND_ON)!=null||r.shader==="VRM/UnlitTransparent"||o,l=((s=r.floatProperties)==null?void 0:s._ZWrite)===1||o;if(a){const A=r.renderQueue;A!=null&&(l?t.add(A):e.add(A))}}),e.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${e.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(e).sort().forEach((r,i)=>{const s=Math.min(Math.max(i-e.size+1,-9),0);this._renderQueueMapTransparent.set(r,s)}),Array.from(t).sort().forEach((r,i)=>{const s=Math.min(Math.max(i,0),9);this._renderQueueMapTransparentZWrite.set(r,s)})}},CP=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),Gl=new Z,Wb=class extends Pr{constructor(n){super(),this._attrPosition=new lt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(KX);const e=new Wt;e.setAttribute("position",this._attrPosition);const t=new Sl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new nd(e,t),this.add(this._line),this.constraint=n}updateMatrixWorld(n){Gl.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,Gl.x,Gl.y,Gl.z),this.constraint.source&&Gl.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,Gl.x,Gl.y,Gl.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(n)}};function MP(n,e){return e.set(n.elements[12],n.elements[13],n.elements[14])}var xce=new Z,_ce=new Z;function bce(n,e){return n.decompose(xce,e,_ce),e}function Fw(n){return n.invert?n.invert():n.inverse(),n}var wT=class{constructor(n,e){this.destination=n,this.source=e,this.weight=1}},Bce=new Z,Ece=new Z,Cce=new Z,Mce=new rt,Sce=new rt,Tce=new rt,Ice=class extends wT{get aimAxis(){return this._aimAxis}set aimAxis(n){this._aimAxis=n,this._v3AimAxis.set(n==="PositiveX"?1:n==="NegativeX"?-1:0,n==="PositiveY"?1:n==="NegativeY"?-1:0,n==="PositiveZ"?1:n==="NegativeZ"?-1:0)}get dependencies(){const n=new Set([this.source]);return this.destination.parent&&n.add(this.destination.parent),n}constructor(n,e){super(n,e),this._aimAxis="PositiveX",this._v3AimAxis=new Z(1,0,0),this._dstRestQuat=new rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const n=Mce.identity(),e=Sce.identity();this.destination.parent&&(bce(this.destination.parent.matrixWorld,n),Fw(e.copy(n)));const t=Bce.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(n),r=MP(this.source.matrixWorld,Ece).sub(MP(this.destination.matrixWorld,Cce)).normalize(),i=Tce.setFromUnitVectors(t,r).premultiply(e).multiply(n).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}};function Rce(n,e){const t=[n];let r=n.parent;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}var Fce=class{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(n){this._constraints.add(n);let e=this._objectConstraintsMap.get(n.destination);e==null&&(e=new Set,this._objectConstraintsMap.set(n.destination,e)),e.add(n)}deleteConstraint(n){this._constraints.delete(n),this._objectConstraintsMap.get(n.destination).delete(n)}setInitState(){const n=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,n,e,r=>r.setInitState())}update(){const n=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,n,e,r=>r.update())}_processConstraint(n,e,t,r){if(t.has(n))return;if(e.has(n))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");e.add(n);const i=n.dependencies;for(const s of i)Rce(s,o=>{const a=this._objectConstraintsMap.get(o);if(a)for(const l of a)this._processConstraint(l,e,t,r)});r(n),t.add(n)}},Uce=new rt,Lce=new rt,Pce=class extends wT{get dependencies(){return new Set([this.source])}constructor(n,e){super(n,e),this._dstRestQuat=new rt,this._invSrcRestQuat=new rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),Fw(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const n=Uce.copy(this._invSrcRestQuat).multiply(this.source.quaternion),e=Lce.copy(this._dstRestQuat).multiply(n);this.destination.quaternion.copy(this._dstRestQuat).slerp(e,this.weight)}},Dce=new Z,Oce=new rt,Nce=new rt,kce=class extends wT{get rollAxis(){return this._rollAxis}set rollAxis(n){this._rollAxis=n,this._v3RollAxis.set(n==="X"?1:0,n==="Y"?1:0,n==="Z"?1:0)}get dependencies(){return new Set([this.source])}constructor(n,e){super(n,e),this._rollAxis="X",this._v3RollAxis=new Z(1,0,0),this._dstRestQuat=new rt,this._invDstRestQuat=new rt,this._invSrcRestQuatMulDstRestQuat=new rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),Fw(this._invDstRestQuat.copy(this._dstRestQuat)),Fw(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const n=Oce.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),e=Dce.copy(this._v3RollAxis).applyQuaternion(n),r=Nce.setFromUnitVectors(e,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(n);this.destination.quaternion.copy(this._dstRestQuat).slerp(r,this.weight)}},Qce=new Set(["1.0","1.0-beta"]),U6=class Up{get name(){return Up.EXTENSION_NAME}constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}afterRoot(e){return CP(this,null,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){return CP(this,null,function*(){var t;const r=this.parser.json;if(!(((t=r.extensionsUsed)==null?void 0:t.indexOf(Up.EXTENSION_NAME))!==-1))return null;const s=new Fce,o=yield this.parser.getDependencies("node");return o.forEach((a,l)=>{var A;const c=r.nodes[l],u=(A=c==null?void 0:c.extensions)==null?void 0:A[Up.EXTENSION_NAME];if(u==null)return;const f=u.specVersion;if(!Qce.has(f)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${Up.EXTENSION_NAME} specVersion "${f}"`);return}const h=u.constraint;if(h.roll!=null){const p=this._importRollConstraint(a,o,h.roll);s.addConstraint(p)}else if(h.aim!=null){const p=this._importAimConstraint(a,o,h.aim);s.addConstraint(p)}else if(h.rotation!=null){const p=this._importRotationConstraint(a,o,h.rotation);s.addConstraint(p)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,r){const{source:i,rollAxis:s,weight:o}=r,a=t[i],l=new kce(e,a);if(s!=null&&(l.rollAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new Wb(l);this.helperRoot.add(A)}return l}_importAimConstraint(e,t,r){const{source:i,aimAxis:s,weight:o}=r,a=t[i],l=new Ice(e,a);if(s!=null&&(l.aimAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new Wb(l);this.helperRoot.add(A)}return l}_importRotationConstraint(e,t,r){const{source:i,weight:s}=r,o=t[i],a=new Pce(e,o);if(s!=null&&(a.weight=s),this.helperRoot){const l=new Wb(a);this.helperRoot.add(l)}return a}};U6.EXTENSION_NAME="VRMC_node_constraint";var Hce=U6,av=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(A){i(A)}},o=l=>{try{a(t.throw(l))}catch(A){i(A)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())}),xT=class{},Kb=new Z,Ac=new Z,L6=class extends xT{get type(){return"capsule"}constructor(n){var e,t,r,i;super(),this.offset=(e=n==null?void 0:n.offset)!=null?e:new Z(0,0,0),this.tail=(t=n==null?void 0:n.tail)!=null?t:new Z(0,0,0),this.radius=(r=n==null?void 0:n.radius)!=null?r:0,this.inside=(i=n==null?void 0:n.inside)!=null?i:!1}calculateCollision(n,e,t,r){Kb.copy(this.offset).applyMatrix4(n),Ac.copy(this.tail).applyMatrix4(n),Ac.sub(Kb);const i=Ac.lengthSq();r.copy(e).sub(Kb);const s=Ac.dot(r);s<=0||(i<=s||Ac.multiplyScalar(s/i),r.sub(Ac));const o=this.inside?this.radius-t-r.length():r.length()-t-this.radius;return r.normalize(),this.inside&&r.negate(),o}},Yb=new Z,SP=new xn,P6=class extends xT{get type(){return"plane"}constructor(n){var e,t;super(),this.offset=(e=n==null?void 0:n.offset)!=null?e:new Z(0,0,0),this.normal=(t=n==null?void 0:n.normal)!=null?t:new Z(0,0,1)}calculateCollision(n,e,t,r){r.copy(this.offset).applyMatrix4(n),r.negate().add(e),SP.getNormalMatrix(n),Yb.copy(this.normal).applyNormalMatrix(SP).normalize();const i=r.dot(Yb)-t;return r.copy(Yb),i}},D6=class extends xT{get type(){return"sphere"}constructor(n){var e,t,r;super(),this.offset=(e=n==null?void 0:n.offset)!=null?e:new Z(0,0,0),this.radius=(t=n==null?void 0:n.radius)!=null?t:0,this.inside=(r=n==null?void 0:n.inside)!=null?r:!1}calculateCollision(n,e,t,r){r.copy(this.offset).applyMatrix4(n),r.negate().add(e);const i=this.inside?this.radius-t-r.length():r.length()-t-this.radius;return r.normalize(),this.inside&&r.negate(),i}},Po=new Z,zce=class extends Wt{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new Z,this._currentTail=new Z,this._shape=n,this._attrPos=new lt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0);const t=Po.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(t)>1e-10&&(this._currentTail.copy(t),n=!0),n&&this._buildPosition()}_buildPosition(){Po.copy(this._currentTail).sub(this._currentOffset);const n=Po.length()/this._currentRadius;for(let r=0;r<=16;r++){const i=r/16*Math.PI;this._attrPos.setXYZ(r,-Math.sin(i),-Math.cos(i),0),this._attrPos.setXYZ(17+r,n+Math.sin(i),Math.cos(i),0),this._attrPos.setXYZ(34+r,-Math.sin(i),0,-Math.cos(i)),this._attrPos.setXYZ(51+r,n+Math.sin(i),0,Math.cos(i))}for(let r=0;r<32;r++){const i=r/16*Math.PI;this._attrPos.setXYZ(68+r,0,Math.sin(i),Math.cos(i)),this._attrPos.setXYZ(100+r,n,Math.sin(i),Math.cos(i))}const e=Math.atan2(Po.y,Math.sqrt(Po.x*Po.x+Po.z*Po.z)),t=-Math.atan2(Po.z,Po.x);this.rotateZ(e),this.rotateY(t),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<34;n++){const e=(n+1)%34;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(68+n*2,34+n,34+e)}for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(136+n*2,68+n,68+e),this._attrIndex.setXY(200+n*2,100+n,100+e)}this._attrIndex.needsUpdate=!0}},Gce=class extends Wt{constructor(n){super(),this.worldScale=1,this._currentOffset=new Z,this._currentNormal=new Z,this._shape=n,this._attrPos=new lt(new Float32Array(6*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(10),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0),this._currentNormal.equals(this._shape.normal)||(this._currentNormal.copy(this._shape.normal),n=!0),n&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,-.5,-.5,0),this._attrPos.setXYZ(1,.5,-.5,0),this._attrPos.setXYZ(2,.5,.5,0),this._attrPos.setXYZ(3,-.5,.5,0),this._attrPos.setXYZ(4,0,0,0),this._attrPos.setXYZ(5,0,0,.25),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this.lookAt(this._currentNormal),this._attrPos.needsUpdate=!0}_buildIndex(){this._attrIndex.setXY(0,0,1),this._attrIndex.setXY(2,1,2),this._attrIndex.setXY(4,2,3),this._attrIndex.setXY(6,3,0),this._attrIndex.setXY(8,4,5),this._attrIndex.needsUpdate=!0}},Vce=class extends Wt{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new Z,this._shape=n,this._attrPos=new lt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.needsUpdate=!0}},jce=new Z,$b=class extends Pr{constructor(n){if(super(),this.matrixAutoUpdate=!1,this.collider=n,this.collider.shape instanceof D6)this._geometry=new Vce(this.collider.shape);else if(this.collider.shape instanceof L6)this._geometry=new zce(this.collider.shape);else if(this.collider.shape instanceof P6)this._geometry=new Gce(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const e=new Sl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new vg(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(n){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=jce.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(n)}},Wce=class extends Wt{constructor(n){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new Z,this._springBone=n,this._attrPos=new lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let n=!1;const e=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,n=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),n=!0),n&&this._buildPosition()}_buildPosition(){for(let n=0;n<32;n++){const e=n/16*Math.PI;this._attrPos.setXYZ(n,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+n,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+n,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let n=0;n<32;n++){const e=(n+1)%32;this._attrIndex.setXY(n*2,n,e),this._attrIndex.setXY(64+n*2,32+n,32+e),this._attrIndex.setXY(128+n*2,64+n,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},Kce=new Z,Yce=class extends Pr{constructor(n){super(),this.matrixAutoUpdate=!1,this.springBone=n,this._geometry=new Wce(this.springBone);const e=new Sl({color:16776960,depthTest:!1,depthWrite:!1});this._line=new vg(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(n){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=Kce.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(n)}},Xb=class extends It{constructor(n){super(),this.shape=n}},$ce=new We;function O6(n){return n.invert?n.invert():n.getInverse($ce.copy(n)),n}var Xce=class{constructor(n){this._inverseCache=new We,this._shouldUpdateInverse=!0,this.matrix=n;const e={set:(t,r,i)=>(this._shouldUpdateInverse=!0,t[r]=i,!0)};this._originalElements=n.elements,n.elements=new Proxy(n.elements,e)}get inverse(){return this._shouldUpdateInverse&&(O6(this._inverseCache.copy(this.matrix)),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}},Zce=new We,Da=new Z,Jd=new Z,Jce=new Z,Wu=new Z,TP=new Z,qd=new Z,IP=new rt,Ku=new We,qce=new We,eue=class{constructor(n,e,t={},r=[]){this._currentTail=new Z,this._prevTail=new Z,this._boneAxis=new Z,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new We,this._initialLocalRotation=new rt,this._initialLocalChildPosition=new Z;var i,s,o,a,l,A;this.bone=n,this.bone.matrixAutoUpdate=!1,this.child=e,this.settings={hitRadius:(i=t.hitRadius)!=null?i:0,stiffness:(s=t.stiffness)!=null?s:1,gravityPower:(o=t.gravityPower)!=null?o:0,gravityDir:(l=(a=t.gravityDir)==null?void 0:a.clone())!=null?l:new Z(0,-1,0),dragForce:(A=t.dragForce)!=null?A:.4},this.colliderGroups=r}get center(){return this._center}set center(n){var e;(e=this._center)!=null&&e.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=n,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new Xce(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:Zce}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const n=this._getMatrixWorldToCenter(Ku);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(n),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const n=this._getMatrixWorldToCenter(Ku);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(n),this._prevTail.copy(this._currentTail)}update(n){if(n<=0)return;this._calcWorldSpaceBoneLength(),Wu.setFromMatrixPosition(this.bone.matrixWorld);let e=this._getMatrixWorldToCenter(Ku);TP.copy(Wu).applyMatrix4(e);const t=IP.setFromRotationMatrix(e),r=qce.copy(e).multiply(this._parentMatrixWorld),i=Jd.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(r).sub(TP).normalize(),s=Jce.copy(this.settings.gravityDir).applyQuaternion(t).normalize(),o=this._getMatrixCenterToWorld(Ku);qd.copy(this._currentTail).add(Da.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(Da.copy(i).multiplyScalar(this.settings.stiffness*n)).add(Da.copy(s).multiplyScalar(this.settings.gravityPower*n)).applyMatrix4(o),qd.sub(Wu).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Wu),this._collision(qd),e=this._getMatrixWorldToCenter(Ku),this._prevTail.copy(this._currentTail),this._currentTail.copy(Da.copy(qd).applyMatrix4(e));const a=O6(Ku.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),l=IP.setFromUnitVectors(this._boneAxis,Da.copy(qd).applyMatrix4(a).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(l),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(n){this.colliderGroups.forEach(e=>{e.colliders.forEach(t=>{const r=t.shape.calculateCollision(t.matrixWorld,n,this.settings.hitRadius,Da);r<0&&(n.add(Da.multiplyScalar(-r)),n.sub(Wu).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Wu))})})}_calcWorldSpaceBoneLength(){Da.setFromMatrixPosition(this.bone.matrixWorld),this.child?Jd.setFromMatrixPosition(this.child.matrixWorld):(Jd.copy(this._initialLocalChildPosition),Jd.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=Da.sub(Jd).length()}_getMatrixCenterToWorld(n){return this._center?n.copy(this._center.matrixWorld):n.identity(),n}_getMatrixWorldToCenter(n){return this._center?n.copy(this._center.userData.inverseCacheProxy.inverse):n.identity(),n}};function tue(n,e){const t=[];let r=n;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}function N6(n,e){n.children.forEach(t=>{e(t)||N6(t,e)})}var RP=class{constructor(){this._joints=new Set,this._hasWarnedCircularDependency=!1,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const n=new Set;return this._joints.forEach(e=>{e.colliderGroups.forEach(t=>{n.add(t)})}),Array.from(n)}get colliders(){const n=new Set;return this.colliderGroups.forEach(e=>{e.colliders.forEach(t=>{n.add(t)})}),Array.from(n)}addJoint(n){this._joints.add(n);let e=this._objectSpringBonesMap.get(n.bone);e==null&&(e=new Set,this._objectSpringBonesMap.set(n.bone,e)),e.add(n)}addSpringBone(n){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(n)}deleteJoint(n){this._joints.delete(n),this._objectSpringBonesMap.get(n.bone).delete(n)}deleteSpringBone(n){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(n)}setInitState(){const n=new Set,e=new Set,t=new Set;for(const r of this._joints)this._processSpringBone(r,n,e,t,i=>i.setInitState())}reset(){const n=new Set,e=new Set,t=new Set;for(const r of this._joints)this._processSpringBone(r,n,e,t,i=>i.reset())}update(n){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.update(n)),N6(i.bone,s=>{var o,a;return((a=(o=this._objectSpringBonesMap.get(s))==null?void 0:o.size)!=null?a:0)>0?!0:(s.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(n,e,t,r,i){if(t.has(n))return;if(e.has(n)){this._hasWarnedCircularDependency||(console.warn("VRMSpringBoneManager: Circular dependency detected while updating springbones"),this._hasWarnedCircularDependency=!0);return}e.add(n);const s=this._getDependencies(n);for(const o of s)tue(o,a=>{const l=this._objectSpringBonesMap.get(a);if(l)for(const A of l)this._processSpringBone(A,e,t,r,i);else r.has(a)||(a.updateWorldMatrix(!1,!1),r.add(a))});n.bone.updateMatrix(),n.bone.updateWorldMatrix(!1,!1),i(n),r.add(n.bone),t.add(n)}_getDependencies(n){const e=new Set,t=n.bone.parent;return t&&e.add(t),n.colliderGroups.forEach(r=>{r.colliders.forEach(i=>{e.add(i)})}),e}},FP="VRMC_springBone_extended_collider",nue=new Set(["1.0","1.0-beta"]),rue=new Set(["1.0"]),k6=class of{get name(){return of.EXTENSION_NAME}constructor(e,t){var r;this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot,this.useExtendedColliders=(r=t==null?void 0:t.useExtendedColliders)!=null?r:!0}afterRoot(e){return av(this,null,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return av(this,null,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){return av(this,null,function*(){var t,r,i,s,o;const a=e.parser.json;if(!(((t=a.extensionsUsed)==null?void 0:t.indexOf(of.EXTENSION_NAME))!==-1))return null;const A=new RP,c=yield e.parser.getDependencies("node"),u=(r=a.extensions)==null?void 0:r[of.EXTENSION_NAME];if(!u)return null;const f=u.specVersion;if(!nue.has(f))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${of.EXTENSION_NAME} specVersion "${f}"`),null;const h=(i=u.colliders)==null?void 0:i.map((d,g)=>{var m,y,w,x,_,C,T,b,M,P,Y,H,I,v,E;const F=c[d.node],D=d.shape,O=(m=d.extensions)==null?void 0:m[FP];if(this.useExtendedColliders&&O!=null){const z=O.specVersion;if(!rue.has(z))console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${FP} specVersion "${z}". Fallbacking to the ${of.EXTENSION_NAME} definition`);else{const K=O.shape;if(K.sphere)return this._importSphereCollider(F,{offset:new Z().fromArray((y=K.sphere.offset)!=null?y:[0,0,0]),radius:(w=K.sphere.radius)!=null?w:0,inside:(x=K.sphere.inside)!=null?x:!1});if(K.capsule)return this._importCapsuleCollider(F,{offset:new Z().fromArray((_=K.capsule.offset)!=null?_:[0,0,0]),radius:(C=K.capsule.radius)!=null?C:0,tail:new Z().fromArray((T=K.capsule.tail)!=null?T:[0,0,0]),inside:(b=K.capsule.inside)!=null?b:!1});if(K.plane)return this._importPlaneCollider(F,{offset:new Z().fromArray((M=K.plane.offset)!=null?M:[0,0,0]),normal:new Z().fromArray((P=K.plane.normal)!=null?P:[0,0,1])})}}if(D.sphere)return this._importSphereCollider(F,{offset:new Z().fromArray((Y=D.sphere.offset)!=null?Y:[0,0,0]),radius:(H=D.sphere.radius)!=null?H:0,inside:!1});if(D.capsule)return this._importCapsuleCollider(F,{offset:new Z().fromArray((I=D.capsule.offset)!=null?I:[0,0,0]),radius:(v=D.capsule.radius)!=null?v:0,tail:new Z().fromArray((E=D.capsule.tail)!=null?E:[0,0,0]),inside:!1});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${g} has no valid shape`)}),p=(s=u.colliderGroups)==null?void 0:s.map((d,g)=>{var m;return{colliders:((m=d.colliders)!=null?m:[]).map(w=>{const x=h==null?void 0:h[w];if(x==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${g} attempted to use a collider #${w} but not found`);return x}),name:d.name}});return(o=u.springs)==null||o.forEach((d,g)=>{var m;const y=d.joints,w=(m=d.colliderGroups)==null?void 0:m.map(C=>{const T=p==null?void 0:p[C];if(T==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${g} attempted to use a colliderGroup ${C} but not found`);return T}),x=d.center!=null?c[d.center]:void 0;let _;y.forEach(C=>{if(_){const T=_.node,b=c[T],M=C.node,P=c[M],Y={hitRadius:_.hitRadius,dragForce:_.dragForce,gravityPower:_.gravityPower,stiffness:_.stiffness,gravityDir:_.gravityDir!=null?new Z().fromArray(_.gravityDir):void 0},H=this._importJoint(b,P,Y,w);x&&(H.center=x),A.addJoint(H)}_=C})}),A.setInitState(),A})}_v0Import(e){return av(this,null,function*(){var t,r,i;const s=e.parser.json;if(!(((t=s.extensionsUsed)==null?void 0:t.indexOf("VRM"))!==-1))return null;const a=(r=s.extensions)==null?void 0:r.VRM,l=a==null?void 0:a.secondaryAnimation;if(!l)return null;const A=l==null?void 0:l.boneGroups;if(!A)return null;const c=new RP,u=yield e.parser.getDependencies("node"),f=(i=l.colliderGroups)==null?void 0:i.map(h=>{var p;const d=u[h.node];return{colliders:((p=h.colliders)!=null?p:[]).map((m,y)=>{var w,x,_;const C=new Z(0,0,0);return m.offset&&C.set((w=m.offset.x)!=null?w:0,(x=m.offset.y)!=null?x:0,m.offset.z?-m.offset.z:0),this._importSphereCollider(d,{offset:C,radius:(_=m.radius)!=null?_:0,inside:!1})})}});return A==null||A.forEach((h,p)=>{const d=h.bones;d&&d.forEach(g=>{var m,y,w,x;const _=u[g],C=new Z;h.gravityDir?C.set((m=h.gravityDir.x)!=null?m:0,(y=h.gravityDir.y)!=null?y:0,(w=h.gravityDir.z)!=null?w:0):C.set(0,-1,0);const T=h.center!=null?u[h.center]:void 0,b={hitRadius:h.hitRadius,dragForce:h.dragForce,gravityPower:h.gravityPower,stiffness:h.stiffiness,gravityDir:C},M=(x=h.colliderGroups)==null?void 0:x.map(P=>{const Y=f==null?void 0:f[P];if(Y==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${p} attempted to use a colliderGroup ${P} but not found`);return Y});_.traverse(P=>{var Y;const H=(Y=P.children[0])!=null?Y:null,I=this._importJoint(P,H,b,M);T&&(I.center=T),c.addJoint(I)})})}),e.scene.updateMatrixWorld(),c.setInitState(),c})}_importJoint(e,t,r,i){const s=new eue(e,t,r,i);if(this.jointHelperRoot){const o=new Yce(s);this.jointHelperRoot.add(o),o.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const r=new D6(t),i=new Xb(r);if(e.add(i),this.colliderHelperRoot){const s=new $b(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importCapsuleCollider(e,t){const r=new L6(t),i=new Xb(r);if(e.add(i),this.colliderHelperRoot){const s=new $b(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importPlaneCollider(e,t){const r=new P6(t),i=new Xb(r);if(e.add(i),this.colliderHelperRoot){const s=new $b(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}};k6.EXTENSION_NAME="VRMC_springBone";var iue=k6,sue=class{get name(){return"VRMLoaderPlugin"}constructor(n,e){var t,r,i,s,o,a,l,A,c,u;this.parser=n;const f=e==null?void 0:e.helperRoot,h=e==null?void 0:e.autoUpdateHumanBones;this.expressionPlugin=(t=e==null?void 0:e.expressionPlugin)!=null?t:new BAe(n),this.firstPersonPlugin=(r=e==null?void 0:e.firstPersonPlugin)!=null?r:new CAe(n),this.humanoidPlugin=(i=e==null?void 0:e.humanoidPlugin)!=null?i:new UAe(n,{helperRoot:f,autoUpdateHumanBones:h}),this.lookAtPlugin=(s=e==null?void 0:e.lookAtPlugin)!=null?s:new YAe(n,{helperRoot:f}),this.metaPlugin=(o=e==null?void 0:e.metaPlugin)!=null?o:new ZAe(n),this.mtoonMaterialPlugin=(a=e==null?void 0:e.mtoonMaterialPlugin)!=null?a:new uce(n),this.materialsHDREmissiveMultiplierPlugin=(l=e==null?void 0:e.materialsHDREmissiveMultiplierPlugin)!=null?l:new hce(n),this.materialsV0CompatPlugin=(A=e==null?void 0:e.materialsV0CompatPlugin)!=null?A:new wce(n),this.springBonePlugin=(c=e==null?void 0:e.springBonePlugin)!=null?c:new iue(n,{colliderHelperRoot:f,jointHelperRoot:f}),this.nodeConstraintPlugin=(u=e==null?void 0:e.nodeConstraintPlugin)!=null?u:new Hce(n,{helperRoot:f})}beforeRoot(){return iv(this,null,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(n){return iv(this,null,function*(){return yield this.mtoonMaterialPlugin.loadMesh(n)})}getMaterialType(n){const e=this.mtoonMaterialPlugin.getMaterialType(n);return e??null}extendMaterialParams(n,e){return iv(this,null,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(n,e),yield this.mtoonMaterialPlugin.extendMaterialParams(n,e)})}afterRoot(n){return iv(this,null,function*(){yield this.metaPlugin.afterRoot(n),yield this.humanoidPlugin.afterRoot(n),yield this.expressionPlugin.afterRoot(n),yield this.lookAtPlugin.afterRoot(n),yield this.firstPersonPlugin.afterRoot(n),yield this.springBonePlugin.afterRoot(n),yield this.nodeConstraintPlugin.afterRoot(n),yield this.mtoonMaterialPlugin.afterRoot(n);const e=n.userData.vrmMeta,t=n.userData.vrmHumanoid;if(e&&t){const r=new qAe({scene:n.scene,expressionManager:n.userData.vrmExpressionManager,firstPerson:n.userData.vrmFirstPerson,humanoid:t,lookAt:n.userData.vrmLookAt,meta:e,materials:n.userData.vrmMToonMaterials,springBoneManager:n.userData.vrmSpringBoneManager,nodeConstraintManager:n.userData.vrmNodeConstraintManager});n.userData.vrm=r}})}};function UP(n){if(Object.values(n).forEach(e=>{e!=null&&e.isTexture&&e.dispose()}),n.isShaderMaterial){const e=n.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;r!=null&&r.isTexture&&r.dispose()})}n.dispose()}function oue(n){const e=n.geometry;e&&e.dispose();const t=n.skeleton;t&&t.dispose();const r=n.material;r&&(Array.isArray(r)?r.forEach(i=>UP(i)):r&&UP(r))}function aue(n){n.traverse(oue)}function lue(n,e){var t;const r=(t=e==null?void 0:e.experimentalSameBoneCounts)!=null?t:!1,i=[];n.traverse(a=>{a.type==="SkinnedMesh"&&i.push(a)});const s=new Map;let o=0;for(const a of i){const A=a.geometry.getAttribute("skinIndex"),c=[],u=[],f={},h=A.array;for(let p=0;p<h.length;p++){const d=h[p];f[d]==null&&(f[d]=c.length,c.push(a.skeleton.bones[d]),u.push(a.skeleton.boneInverses[d])),h[p]=f[d]}A.copyArray(h),A.needsUpdate=!0,s.set(a,{bones:c,boneInverses:u}),o=Math.max(o,c.length)}for(const a of i){const{bones:l,boneInverses:A}=s.get(a);if(r)for(let u=l.length;u<o;u++)l[u]=l[0],A[u]=A[0];const c=new XA(l,A);a.bind(c,new We)}}function Aue(n){const e=new Map;n.traverse(t=>{var r,i,s,o;if(!t.isMesh)return;const a=t,l=a.geometry,A=l.index;if(A==null)return;const c=e.get(l);if(c!=null){a.geometry=c;return}const u=new Wt;u.name=l.name,u.morphTargetsRelative=l.morphTargetsRelative,l.groups.forEach(d=>{u.addGroup(d.start,d.count,d.materialIndex)}),u.boundingBox=(i=(r=l.boundingBox)==null?void 0:r.clone())!=null?i:null,u.boundingSphere=(o=(s=l.boundingSphere)==null?void 0:s.clone())!=null?o:null,u.setDrawRange(l.drawRange.start,l.drawRange.count),u.userData=l.userData,e.set(l,u);const f=[],h=[];{const d=A.array,g=new d.constructor(d.length);let m=0;for(let y=0;y<d.length;y++){const w=d[y];let x=f[w];x==null&&(f[w]=m,h[m]=w,x=m,m++),g[y]=x}u.setIndex(new lt(g,1,!1))}Object.keys(l.attributes).forEach(d=>{const g=l.attributes[d];if(g.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const m=g.array,{itemSize:y,normalized:w}=g,x=new m.constructor(h.length*y);h.forEach((_,C)=>{for(let T=0;T<y;T++)x[C*y+T]=m[_*y+T]}),u.setAttribute(d,new lt(x,y,w))});let p=!0;Object.keys(l.morphAttributes).forEach(d=>{u.morphAttributes[d]=[];const g=l.morphAttributes[d];for(let m=0;m<g.length;m++){const y=g[m];if(y.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const w=y.array,{itemSize:x,normalized:_}=y,C=new w.constructor(h.length*x);h.forEach((T,b)=>{for(let M=0;M<x;M++)C[b*x+M]=w[T*x+M]}),p=p&&C.every(T=>T===0),u.morphAttributes[d][m]=new lt(C,x,_)}}),p&&(u.morphAttributes={}),a.geometry=u}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function cue(n){var e;((e=n.meta)==null?void 0:e.metaVersion)==="0"&&(n.scene.rotation.y=Math.PI)}var bg=class{constructor(){}};bg.deepDispose=aue;bg.removeUnnecessaryJoints=lue;bg.removeUnnecessaryVertices=Aue;bg.rotateVRM0=cue;/*!
 * @pixiv/three-vrm-core v3.1.3
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-mtoon v3.1.3
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v3.1.3
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-v0compat v3.1.3
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-node-constraint v3.1.3
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-springbone v3.1.3
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var er;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(er||(er={}));const Uw="blend_",LP="vrmColliderSphere";class uue{parse(e,t,r,i){const s=e.humanoid,o=e.meta,a=e.materials,l={},A={},c={},u=e.lookAt,f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(o)if(a){if(!u)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const h=a.filter((oe,pe,_e)=>_e.findIndex(xe=>xe.name===oe.name.replace(" (Outline)",""))===pe).map(oe=>oe),p=h.map(oe=>oe.name),d=r?{name:"icon",imageBitmap:r.image}:null,g=h.filter(oe=>oe.map).map(oe=>{if(!oe.map)throw new Error(oe.name+" map is null");return{name:oe.name,imageBitmap:oe.map.image}}),m=h.filter(oe=>oe.userData.shadeTexture).map(oe=>{if(!oe.userData.shadeTexture)throw new Error(oe.userData.shadeTexture+" map is null");return{name:oe.name+"_shade",imageBitmap:oe.userData.shadeTexture.image}}),y=g.concat(m),w=mue(y,d),x=gue(w),_=vue(w),C=pue(h,y),T=t.children.filter(oe=>oe.children.length>0&&oe.children[0].type===Ai.Bone)[0],b=Q6(T).filter(oe=>oe.name!==LP),M=b.map(oe=>oe.name),P=b.map(oe=>({children:oe.children.filter(pe=>pe.name!==LP).map(pe=>M.indexOf(pe.name)),name:oe.name,rotation:[oe.quaternion.x,oe.quaternion.y,oe.quaternion.z,oe.quaternion.w],scale:[oe.scale.x,oe.scale.y,oe.scale.z],translation:[oe.position.x,oe.position.y,oe.position.z]})),Y=[],H=t.children.filter(oe=>oe.type===Ai.Group||oe.type===Ai.SkinnedMesh),I=[];H.forEach(oe=>{const pe=oe.type===Ai.Group?oe.children[0]:oe,_e=pe.geometry.attributes;I.push(new Oa(_e.position,er.FLOAT,Yt.POSITION,fo.VEC3,pe.name,void 0)),I.push(new Oa(_e.normal,er.FLOAT,Yt.NORMAL,fo.VEC3,pe.name,void 0)),I.push(new Oa(_e.uv,er.FLOAT,Yt.UV,fo.VEC2,pe.name,void 0)),I.push(new Oa(_e.skinWeight,er.FLOAT,Yt.SKIN_WEIGHT,fo.VEC4,pe.name,void 0)),I.push(new Oa(_e.skinIndex,er.UNSIGNED_SHORT,Yt.SKIN_INDEX,fo.VEC4,pe.name,void 0)),(oe.type===Ai.Group?oe.children.map(L=>L):[oe]).forEach(L=>{if(!L.geometry.index)throw new Error(L.name+" geometry.index is null");I.push(new Oa(L.geometry.index,er.UNSIGNED_INT,Yt.INDEX,fo.SCALAR,pe.name,L.name))}),pe.morphTargetDictionary||(pe.morphTargetDictionary={},pe.morphTargetInfluences=[],pe.geometry.morphAttributes={},pe.updateMorphTargets()),pe.geometry.userData.targetNames=[];for(const L in e.expressionManager.expressionMap){const ue=e.expressionManager.expressionMap[L],Ae=ue._binds.map(J=>({node:b.length,index:J.index,weight:J.weight}));let q=!1;for(const J in Ur)if(L.toLowerCase()===Ur[J].toLowerCase()){l[Ur[J]]={morphTargetBinds:Ae,isBinary:ue.isBinary,overrideBlink:ue.overrideBlink,overrideLookAt:ue.overrideLookAt,overrideMouth:ue.overrideMouth},q=!0;break}!q&&L.toLowerCase()==="surprise"&&(l.surprised={morphTargetBinds:Ae,isBinary:ue.isBinary,overrideBlink:ue.overrideBlink,overrideLookAt:ue.overrideLookAt,overrideMouth:ue.overrideMouth},q=!0),q===!1&&(A[L]={morphTargetBinds:Ae,isBinary:ue.isBinary,overrideBlink:ue.overrideBlink,overrideLookAt:ue.overrideLookAt,overrideMouth:ue.overrideMouth})}for(const L in pe.morphTargetDictionary){pe.geometry.userData.targetNames.push(L);const ue=pe.morphTargetDictionary[L],Ae=pe.geometry.morphAttributes;I.push(new Oa(Ae.position[ue],er.FLOAT,Yt.BLEND_POSITION,fo.VEC3,pe.name,Uw+L)),I.push(new Oa(Ae.normal[ue],er.FLOAT,Yt.BLEND_NORMAL,fo.VEC3,pe.name,Uw+L))}}),Object.keys(l).length>0&&(c.preset=l),Object.keys(A).length>0&&(c.custom=A),H.forEach(oe=>{const pe=oe.type===Ai.Group?oe.children[0]:oe,_e=new Float32Array(pe.skeleton.boneInverses.map(xe=>xe.elements).flat());I.push(new Oa(new lt(_e,16),er.FLOAT,Yt.BIND_MATRIX,fo.MAT4,pe.name,pe.name))}),Y.push(...I.map(oe=>({bufferView:-1,byteOffset:0,componentType:oe.valueType,count:oe.attribute.count,max:oe.max,min:oe.min,normalized:!1,type:oe.accessorsType})));const v=hue(H,I,p);H.forEach((oe,pe)=>{P.push({mesh:pe,name:oe.name,rotation:[oe.quaternion.x,oe.quaternion.y,oe.quaternion.z,oe.quaternion.w],scale:[oe.scale.x,oe.scale.y,oe.scale.z],skin:pe,translation:[oe.position.x,oe.position.y,oe.position.z]})});const E=due(H,I,M),F={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:u.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:u.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:u.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:u.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:u.applier.rangeMapVerticalDown.inputMaxValue,outputScale:u.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:u.applier.rangeMapVerticalUp.inputMaxValue,outputScale:u.applier.rangeMapVerticalUp.outputScale},type:"bone"},D={humanBones:{}};for(const oe in s.humanBones)D.humanBones[oe]={node:M.indexOf(s.humanBones[oe].node.name)};const O=o,z=[];z.push(...y.map(oe=>({buffer:PP(oe.imageBitmap),type:Yt.IMAGE}))),z.push(...I.map(oe=>({buffer:oe.buffer,type:oe.type}))),d&&z.push({buffer:PP(d.imageBitmap),type:Yt.IMAGE});let K=0,Q=0,B=0;const j=z.map((oe,pe)=>{const _e={buffer:0,byteLength:oe.buffer.byteLength,byteOffset:K,target:oe.type===Yt.IMAGE||oe.type===Yt.BIND_MATRIX?void 0:oe.type===Yt.INDEX?er.ELEMENT_ARRAY_BUFFER:er.ARRAY_BUFFER};return K+=oe.buffer.byteLength,oe.type===Yt.IMAGE?w[Q++].bufferView=pe:Y[B++].bufferView=pe,_e}),ee=yue(t,P),U={accessors:Y,asset:f,buffers:[{byteLength:K}],bufferViews:j,extensions:{VRMC_vrm:{expressions:c,humanoid:D,lookAt:F,meta:O,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:w,materials:C,meshes:v,nodes:P,samplers:x,avatar:0,scenes:ee,skins:E,textures:_},X=new DP(OC(JSON.stringify(U,void 0,2)),"JSON"),ae=new DP(Lp(z.map(oe=>oe.buffer)),"BIN\0"),se=Lp([X.buffer,ae.buffer]),de=Lp([OC("glTF"),DC(2,4),DC(se.byteLength+12,4)]);i(Lp([de,se]))}}function Q6(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>Q6(e)).flat())}function PP(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=new ArrayBuffer(r.length),s=new DataView(i);for(let o=0;o<r.length;o++)s.setUint8(o,r.charCodeAt(o));return i}function DC(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function OC(n){return new TextEncoder().encode(n).buffer}function Lp(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function fue(n,e){const t=e===er.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===er.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===er.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}let DP=class{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=Lp([DC(r.byteLength,4),OC(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}},Oa=class{constructor(e,t,r,i,s,o){this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=fue(this.attribute,this.valueType),this.max=r===Yt.POSITION||r===Yt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0,this.min=r===Yt.POSITION||r===Yt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0}};var Kf;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(Kf||(Kf={}));var fo;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(fo||(fo={}));var Yt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Yt||(Yt={}));var Ai;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(Ai||(Ai={}));const hue=(n,e,t)=>n.map(r=>{const i=r.type===Ai.Group?r.children[0]:r,s=r.type===Ai.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Yt.SKIN_INDEX),NORMAL:a.indexOf(Yt.NORMAL),POSITION:a.indexOf(Yt.POSITION),TEXCOORD_0:a.indexOf(Yt.UV),WEIGHTS_0:a.indexOf(Yt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===Yt.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>({NORMAL:e.map(c=>c.type===Yt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(Uw+A),POSITION:e.map(c=>c.type===Yt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(Uw+A)})):void 0}})}}),due=(n,e,t)=>n.map(r=>{const i=r.type===Ai.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Yt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),pue=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const A=t;r=A.color?[A.color.r,A.color.g,A.color.b,1]:void 0}let s=-1;t.map?s=e.map(A=>A.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(A=>A.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case Kf.MeshStandardMaterial:return t.metalness;case Kf.MeshBasicMaterial:return 0;default:return 0}})(),l=(()=>{switch(t.type){case Kf.MeshStandardMaterial:return t.roughness;case Kf.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:r,baseColorTexture:o,metallicFactor:a,roughnessFactor:l}}}),mue=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),gue=n=>n.map(()=>({magFilter:er.LINEAR,minFilter:er.LINEAR,wrapS:er.REPEAT,wrapT:er.REPEAT})),vue=n=>n.map((e,t)=>({sampler:0,source:t})),yue=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===Ai.Object3D||r.type===Ai.SkinnedMesh||r.type===Ai.Group||r.type===Ai.Bone).map(r=>t.indexOf(r.name))}]},H6=0,wue=1,z6=2,OP=2,Zb=1.25,NP=1,dy=6*4+4+4,NC=65535,xue=Math.pow(2,-24);class lv{constructor(){}}function Zo(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function kP(n){let e=-1,t=-1/0;for(let r=0;r<3;r++){const i=n[r+3]-n[r];i>t&&(t=i,e=r)}return e}function QP(n,e){e.set(n)}function HP(n,e,t){let r,i;for(let s=0;s<3;s++){const o=s+3;r=n[s],i=e[s],t[s]=r<i?r:i,r=n[o],i=e[o],t[o]=r>i?r:i}}function Av(n,e,t){for(let r=0;r<3;r++){const i=e[n+2*r],s=e[n+2*r+1],o=i-s,a=i+s;o<t[r]&&(t[r]=o),a>t[r+3]&&(t[r+3]=a)}}function ep(n){const e=n[3]-n[0],t=n[4]-n[1],r=n[5]-n[2];return 2*(e*t+t*r+r*e)}function _ue(n,e){if(!n.index){const t=n.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new r(4*t)):i=new Uint16Array(new r(2*t)),n.setIndex(new lt(i,1));for(let s=0;s<t;s++)i[s]=s}}function bue(n){if(!n.groups||!n.groups.length)return[{offset:0,count:n.index.count/3}];const e=[],t=new Set;for(const i of n.groups)t.add(i.start),t.add(i.start+i.count);const r=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Jb(n,e,t,r,i=null){let s=1/0,o=1/0,a=1/0,l=-1/0,A=-1/0,c=-1/0,u=1/0,f=1/0,h=1/0,p=-1/0,d=-1/0,g=-1/0;const m=i!==null;for(let y=e*6,w=(e+t)*6;y<w;y+=6){const x=n[y+0],_=n[y+1],C=x-_,T=x+_;C<s&&(s=C),T>l&&(l=T),m&&x<u&&(u=x),m&&x>p&&(p=x);const b=n[y+2],M=n[y+3],P=b-M,Y=b+M;P<o&&(o=P),Y>A&&(A=Y),m&&b<f&&(f=b),m&&b>d&&(d=b);const H=n[y+4],I=n[y+5],v=H-I,E=H+I;v<a&&(a=v),E>c&&(c=E),m&&H<h&&(h=H),m&&H>g&&(g=H)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=A,r[5]=c,m&&(i[0]=u,i[1]=f,i[2]=h,i[3]=p,i[4]=d,i[5]=g)}function Bue(n,e,t,r){let i=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,A=-1/0;for(let c=e*6,u=(e+t)*6;c<u;c+=6){const f=n[c+0];f<i&&(i=f),f>a&&(a=f);const h=n[c+2];h<s&&(s=h),h>l&&(l=h);const p=n[c+4];p<o&&(o=p),p>A&&(A=p)}r[0]=i,r[1]=s,r[2]=o,r[3]=a,r[4]=l,r[5]=A}function Eue(n,e,t,r,i){let s=t,o=t+r-1;const a=i.pos,l=i.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let A=0;A<3;A++){let c=n[s*3+A];n[s*3+A]=n[o*3+A],n[o*3+A]=c;let u=e[s*6+A*2+0];e[s*6+A*2+0]=e[o*6+A*2+0],e[o*6+A*2+0]=u;let f=e[s*6+A*2+1];e[s*6+A*2+1]=e[o*6+A*2+1],e[o*6+A*2+1]=f}s++,o--}else return s}}const Ga=32,Cue=(n,e)=>n.candidate-e.candidate,Vl=new Array(Ga).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),cv=new Float32Array(6);function Mue(n,e,t,r,i,s){let o=-1,a=0;if(s===H6)o=kP(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===wue)o=kP(n),o!==-1&&(a=Sue(t,r,i,o));else if(s===z6){const l=ep(n);let A=Zb*i;const c=r*6,u=(r+i)*6;for(let f=0;f<3;f++){const h=e[f],g=(e[f+3]-h)/Ga;if(i<Ga/4){const m=[...Vl];m.length=i;let y=0;for(let x=c;x<u;x+=6,y++){const _=m[y];_.candidate=t[x+2*f],_.count=0;const{bounds:C,leftCacheBounds:T,rightCacheBounds:b}=_;for(let M=0;M<3;M++)b[M]=1/0,b[M+3]=-1/0,T[M]=1/0,T[M+3]=-1/0,C[M]=1/0,C[M+3]=-1/0;Av(x,t,C)}m.sort(Cue);let w=i;for(let x=0;x<w;x++){const _=m[x];for(;x+1<w&&m[x+1].candidate===_.candidate;)m.splice(x+1,1),w--}for(let x=c;x<u;x+=6){const _=t[x+2*f];for(let C=0;C<w;C++){const T=m[C];_>=T.candidate?Av(x,t,T.rightCacheBounds):(Av(x,t,T.leftCacheBounds),T.count++)}}for(let x=0;x<w;x++){const _=m[x],C=_.count,T=i-_.count,b=_.leftCacheBounds,M=_.rightCacheBounds;let P=0;C!==0&&(P=ep(b)/l);let Y=0;T!==0&&(Y=ep(M)/l);const H=NP+Zb*(P*C+Y*T);H<A&&(o=f,A=H,a=_.candidate)}}else{for(let w=0;w<Ga;w++){const x=Vl[w];x.count=0,x.candidate=h+g+w*g;const _=x.bounds;for(let C=0;C<3;C++)_[C]=1/0,_[C+3]=-1/0}for(let w=c;w<u;w+=6){let C=~~((t[w+2*f]-h)/g);C>=Ga&&(C=Ga-1);const T=Vl[C];T.count++,Av(w,t,T.bounds)}const m=Vl[Ga-1];QP(m.bounds,m.rightCacheBounds);for(let w=Ga-2;w>=0;w--){const x=Vl[w],_=Vl[w+1];HP(x.bounds,_.rightCacheBounds,x.rightCacheBounds)}let y=0;for(let w=0;w<Ga-1;w++){const x=Vl[w],_=x.count,C=x.bounds,b=Vl[w+1].rightCacheBounds;_!==0&&(y===0?QP(C,cv):HP(C,cv,cv)),y+=_;let M=0,P=0;y!==0&&(M=ep(cv)/l);const Y=i-y;Y!==0&&(P=ep(b)/l);const H=NP+Zb*(M*y+P*Y);H<A&&(o=f,A=H,a=x.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function Sue(n,e,t,r){let i=0;for(let s=e,o=e+t;s<o;s++)i+=n[s*6+r*2];return i/t}function Tue(n,e){const t=n.attributes.position,r=n.index.array,i=r.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,l=t.offset||0;let A=3;t.isInterleavedBufferAttribute&&(A=t.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<i;u++){const f=u*3,h=u*6;let p,d,g;o?(p=r[f+0],d=r[f+1],g=r[f+2]):(p=r[f+0]*A+l,d=r[f+1]*A+l,g=r[f+2]*A+l);for(let m=0;m<3;m++){let y,w,x;o?(y=t[c[m]](p),w=t[c[m]](d),x=t[c[m]](g)):(y=a[p+m],w=a[d+m],x=a[g+m]);let _=y;w<_&&(_=w),x<_&&(_=x);let C=y;w>C&&(C=w),x>C&&(C=x);const T=(C-_)/2,b=m*2;s[h+b+0]=_+T,s[h+b+1]=T+(Math.abs(_)+T)*xue,_<e[m]&&(e[m]=_),C>e[m+3]&&(e[m+3]=C)}}return s}function Iue(n,e){function t(m){f&&f(m/h)}function r(m,y,w,x=null,_=0){if(!p&&_>=l&&(p=!0,A&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(n))),w<=c||_>=l)return t(y+w),m.offset=y,m.count=w,m;const C=Mue(m.boundingData,x,o,y,w,u);if(C.axis===-1)return t(y+w),m.offset=y,m.count=w,m;const T=Eue(a,o,y,w,C);if(T===y||T===y+w)t(y+w),m.offset=y,m.count=w;else{m.splitAxis=C.axis;const b=new lv,M=y,P=T-y;m.left=b,b.boundingData=new Float32Array(6),Jb(o,M,P,b.boundingData,s),r(b,M,P,s,_+1);const Y=new lv,H=T,I=w-P;m.right=Y,Y.boundingData=new Float32Array(6),Jb(o,H,I,Y.boundingData,s),r(Y,H,I,s,_+1)}return m}_ue(n,e);const i=new Float32Array(6),s=new Float32Array(6),o=Tue(n,i),a=n.index.array,l=e.maxDepth,A=e.verbose,c=e.maxLeafTris,u=e.strategy,f=e.onProgress,h=n.index.count/3;let p=!1;const d=[],g=bue(n);if(g.length===1){const m=g[0],y=new lv;y.boundingData=i,Bue(o,m.offset,m.count,s),r(y,m.offset,m.count,s),d.push(y)}else for(let m of g){const y=new lv;y.boundingData=new Float32Array(6),Jb(o,m.offset,m.count,y.boundingData,s),r(y,m.offset,m.count,s),d.push(y)}return d}function Rue(n,e){const t=Iue(n,e);let r,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<t.length;c++){const u=t[c];let f=l(u);const h=new a(dy*f);r=new Float32Array(h),i=new Uint32Array(h),s=new Uint16Array(h),A(0,u),o.push(h)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function A(c,u){const f=c/4,h=c/2,p=!!u.count,d=u.boundingData;for(let g=0;g<6;g++)r[f+g]=d[g];if(p){const g=u.offset,m=u.count;return i[f+6]=g,s[h+14]=m,s[h+15]=NC,c+dy}else{const g=u.left,m=u.right,y=u.splitAxis;let w;if(w=A(c+dy,g),w/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[f+6]=w/4,w=A(w,m),i[f+7]=y,w}}}class bl{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}bl.prototype.setFromBox=function(){const n=new Z;return function(t,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let A=0;A<=1;A++)for(let c=0;c<=1;c++){n.x=i.x*l+s.x*(1-l),n.y=i.y*A+s.y*(1-A),n.z=i.z*c+s.z*(1-c);const u=t.dot(n);o=Math.min(u,o),a=Math.max(u,a)}this.min=o,this.max=a}}();const Fue=function(){const n=new Z,e=new Z,t=new Z;return function(i,s,o){const a=i.start,l=n,A=s.start,c=e;t.subVectors(a,A),n.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const u=t.dot(c),f=c.dot(l),h=c.dot(c),p=t.dot(l),g=l.dot(l)*h-f*f;let m,y;g!==0?m=(u*f-p*h)/g:m=0,y=(u+m*f)/h,o.x=m,o.y=y}}(),_T=function(){const n=new Ye,e=new Z,t=new Z;return function(i,s,o,a){Fue(i,s,n);let l=n.x,A=n.y;if(l>=0&&l<=1&&A>=0&&A<=1){i.at(l,o),s.at(A,a);return}else if(l>=0&&l<=1){A<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(A>=0&&A<=1){l<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;l<0?c=i.start:c=i.end;let u;A<0?u=s.start:u=s.end;const f=e,h=t;if(i.closestPointToPoint(u,!0,e),s.closestPointToPoint(c,!0,t),f.distanceToSquared(u)<=h.distanceToSquared(c)){o.copy(f),a.copy(u);return}else{o.copy(c),a.copy(h);return}}}}(),Uue=function(){const n=new Z,e=new Z,t=new Ja,r=new ul;return function(s,o){const{radius:a,center:l}=s,{a:A,b:c,c:u}=o;if(r.start=A,r.end=c,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(r.start=A,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const d=o.getPlane(t);if(Math.abs(d.distanceToPoint(l))<=a){const m=d.projectPoint(l,e);if(o.containsPoint(m))return!0}return!1}}(),Lue=1e-15;function Yu(n){return Math.abs(n)<Lue}class Bl extends qi{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new Z),this.satBounds=new Array(4).fill().map(()=>new bl),this.points=[this.a,this.b,this.c],this.sphere=new su,this.plane=new Ja,this.needsUpdate=!0}intersectsSphere(e){return Uue(e,this)}update(){const e=this.a,t=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,i);const A=s[1],c=o[1];A.subVectors(e,t),c.setFromPoints(A,i);const u=s[2],f=o[2];u.subVectors(t,r),f.setFromPoints(u,i);const h=s[3],p=o[3];h.subVectors(r,e),p.setFromPoints(h,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Bl.prototype.closestPointToSegment=function(){const n=new Z,e=new Z,t=new ul;return function(i,s=null,o=null){const{start:a,end:l}=i,A=this.points;let c,u=1/0;for(let f=0;f<3;f++){const h=(f+1)%3;t.start.copy(A[f]),t.end.copy(A[h]),_T(t,i,n,e),c=n.distanceToSquared(e),c<u&&(u=c,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),c=a.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),c=l.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(u)}}();Bl.prototype.intersectsTriangle=function(){const n=new Bl,e=new Array(3),t=new Array(3),r=new bl,i=new bl,s=new Z,o=new Z,a=new Z,l=new Z,A=new ul,c=new ul,u=new ul;return function(h,p=null,d=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(n.copy(h),n.update(),h=n);const g=this.plane,m=h.plane;if(Math.abs(g.normal.dot(m.normal))>1-1e-10){const y=this.satBounds,w=this.satAxes;t[0]=h.a,t[1]=h.b,t[2]=h.c;for(let C=0;C<4;C++){const T=y[C],b=w[C];if(r.setFromPoints(b,t),T.isSeparated(r))return!1}const x=h.satBounds,_=h.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let C=0;C<4;C++){const T=x[C],b=_[C];if(r.setFromPoints(b,e),T.isSeparated(r))return!1}for(let C=0;C<4;C++){const T=w[C];for(let b=0;b<4;b++){const M=_[b];if(s.crossVectors(T,M),r.setFromPoints(s,e),i.setFromPoints(s,t),r.isSeparated(i))return!1}}return p&&(d||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const y=this.points;let w=!1,x=0;for(let v=0;v<3;v++){const E=y[v],F=y[(v+1)%3];A.start.copy(E),A.end.copy(F),A.delta(o);const D=w?c.start:c.end,O=Yu(m.distanceToPoint(E));if(Yu(m.normal.dot(o))&&O){c.copy(A),x=2;break}if((m.intersectLine(A,D)||O)&&!Yu(D.distanceTo(F))){if(x++,w)break;w=!0}}if(x===1&&h.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(x!==2)return!1;const _=h.points;let C=!1,T=0;for(let v=0;v<3;v++){const E=_[v],F=_[(v+1)%3];A.start.copy(E),A.end.copy(F),A.delta(a);const D=C?u.start:u.end,O=Yu(g.distanceToPoint(E));if(Yu(g.normal.dot(a))&&O){u.copy(A),T=2;break}if((g.intersectLine(A,D)||O)&&!Yu(D.distanceTo(F))){if(T++,C)break;C=!0}}if(T===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(T!==2)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let v=u.start;u.start=u.end,u.end=v}const b=c.start.dot(o),M=c.end.dot(o),P=u.start.dot(o),Y=u.end.dot(o),H=M<P,I=b<Y;return b!==Y&&P!==M&&H===I?!1:(p&&(l.subVectors(c.start,u.start),l.dot(o)>0?p.start.copy(c.start):p.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(o)<0?p.end.copy(c.end):p.end.copy(u.end)),!0)}}}();Bl.prototype.distanceToPoint=function(){const n=new Z;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Bl.prototype.distanceToTriangle=function(){const n=new Z,e=new Z,t=["a","b","c"],r=new ul,i=new ul;return function(o,a=null,l=null){const A=a||l?r:null;if(this.intersectsTriangle(o,A))return(a||l)&&(a&&A.getCenter(a),l&&A.getCenter(l)),0;let c=1/0;for(let u=0;u<3;u++){let f;const h=t[u],p=o[h];this.closestPointToPoint(p,n),f=p.distanceToSquared(n),f<c&&(c=f,a&&a.copy(n),l&&l.copy(p));const d=this[h];o.closestPointToPoint(d,n),f=d.distanceToSquared(n),f<c&&(c=f,a&&a.copy(d),l&&l.copy(n))}for(let u=0;u<3;u++){const f=t[u],h=t[(u+1)%3];r.set(this[f],this[h]);for(let p=0;p<3;p++){const d=t[p],g=t[(p+1)%3];i.set(o[d],o[g]),_T(r,i,n,e);const m=n.distanceToSquared(e);m<c&&(c=m,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(c)}}();class ga{constructor(e,t,r){this.isOrientedBox=!0,this.min=new Z,this.max=new Z,this.matrix=new We,this.invMatrix=new We,this.points=new Array(8).fill().map(()=>new Z),this.satAxes=new Array(3).fill().map(()=>new Z),this.satBounds=new Array(3).fill().map(()=>new bl),this.alignedSatBounds=new Array(3).fill().map(()=>new bl),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}ga.prototype.update=function(){return function(){const e=this.matrix,t=this.min,r=this.max,i=this.points;for(let A=0;A<=1;A++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){const f=1*A|2*c|4*u,h=i[f];h.x=A?r.x:t.x,h.y=c?r.y:t.y,h.z=u?r.z:t.z,h.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let A=0;A<3;A++){const c=o[A],u=s[A],f=1<<A,h=i[f];c.subVectors(a,h),u.setFromPoints(c,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ga.prototype.intersectsBox=function(){const n=new bl;return function(t){this.needsUpdate&&this.update();const r=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=r.x,n.max=i.x,a[0].isSeparated(n)||(n.min=r.y,n.max=i.y,a[1].isSeparated(n))||(n.min=r.z,n.max=i.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const A=o[l],c=s[l];if(n.setFromBox(A,t),c.isSeparated(n))return!1}return!0}}();ga.prototype.intersectsTriangle=function(){const n=new Bl,e=new Array(3),t=new bl,r=new bl,i=new Z;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const h=a[f],p=l[f];if(t.setFromPoints(p,e),h.isSeparated(t))return!1}const A=o.satBounds,c=o.satAxes,u=this.points;for(let f=0;f<3;f++){const h=A[f],p=c[f];if(t.setFromPoints(p,u),h.isSeparated(t))return!1}for(let f=0;f<3;f++){const h=l[f];for(let p=0;p<4;p++){const d=c[p];if(i.crossVectors(h,d),t.setFromPoints(i,e),r.setFromPoints(i,u),t.isSeparated(r))return!1}}return!0}}();ga.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();ga.prototype.distanceToPoint=function(){const n=new Z;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();ga.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new ul),t=new Array(12).fill().map(()=>new ul),r=new Z,i=new Z;return function(o,a=0,l=null,A=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||A)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),A&&A.copy(i)),0;const c=a*a,u=o.min,f=o.max,h=this.points;let p=1/0;for(let g=0;g<8;g++){const m=h[g];i.copy(m).clamp(u,f);const y=m.distanceToSquared(i);if(y<p&&(p=y,l&&l.copy(m),A&&A.copy(i),y<c))return Math.sqrt(y)}let d=0;for(let g=0;g<3;g++)for(let m=0;m<=1;m++)for(let y=0;y<=1;y++){const w=(g+1)%3,x=(g+2)%3,_=m<<w|y<<x,C=1<<g|m<<w|y<<x,T=h[_],b=h[C];e[d].set(T,b);const P=n[g],Y=n[w],H=n[x],I=t[d],v=I.start,E=I.end;v[P]=u[P],v[Y]=m?u[Y]:f[Y],v[H]=y?u[H]:f[Y],E[P]=f[P],E[Y]=m?u[Y]:f[Y],E[H]=y?u[H]:f[Y],d++}for(let g=0;g<=1;g++)for(let m=0;m<=1;m++)for(let y=0;y<=1;y++){i.x=g?f.x:u.x,i.y=m?f.y:u.y,i.z=y?f.z:u.z,this.closestPointToPoint(i,r);const w=i.distanceToSquared(r);if(w<p&&(p=w,l&&l.copy(r),A&&A.copy(i),w<c))return Math.sqrt(w)}for(let g=0;g<12;g++){const m=e[g];for(let y=0;y<12;y++){const w=t[y];_T(m,w,r,i);const x=r.distanceToSquared(i);if(x<p&&(p=x,l&&l.copy(r),A&&A.copy(i),x<c))return Math.sqrt(x)}}return Math.sqrt(p)}}();const uv=new Z,fv=new Z,hv=new Z,zP=new Ye,GP=new Ye,VP=new Ye,jP=new Z;function Pue(n,e,t,r,i,s){let o;return s===qr?o=n.intersectTriangle(r,t,e,!0,i):o=n.intersectTriangle(e,t,r,s!==hi,i),o===null?null:{distance:n.origin.distanceTo(i),point:i.clone()}}function Due(n,e,t,r,i,s,o){uv.fromBufferAttribute(e,r),fv.fromBufferAttribute(e,i),hv.fromBufferAttribute(e,s);const a=Pue(n,uv,fv,hv,jP,o);if(a){t&&(zP.fromBufferAttribute(t,r),GP.fromBufferAttribute(t,i),VP.fromBufferAttribute(t,s),a.uv=qi.getUV(jP,uv,fv,hv,zP,GP,VP,new Ye));const l={a:r,b:i,c:s,normal:new Z,materialIndex:0};qi.getNormal(uv,fv,hv,l.normal),a.face=l,a.faceIndex=r}return a}function G6(n,e,t,r,i){const s=r*3,o=n.index.getX(s),a=n.index.getX(s+1),l=n.index.getX(s+2),A=Due(t,n.attributes.position,n.attributes.uv,o,a,l,e);return A?(A.faceIndex=r,i&&i.push(A),A):null}function Oue(n,e,t,r,i,s){for(let o=r,a=r+i;o<a;o++)G6(n,e,t,o,s)}function Nue(n,e,t,r,i){let s=1/0,o=null;for(let a=r,l=r+i;a<l;a++){const A=G6(n,e,t,a);A&&A.distance<s&&(o=A,s=A.distance)}return o}function WP(n,e,t){return n===null||(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n.distance<t.near||n.distance>t.far)?null:n}function Ko(n,e,t,r){const i=n.a,s=n.b,o=n.c;let a=e,l=e+1,A=e+2;t&&(a=t.getX(e),l=t.getX(e+1),A=t.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(A),o.y=r.getY(A),o.z=r.getZ(A)}function KP(n,e,t,r,i,s,o){const a=t.index,l=t.attributes.position;for(let A=n,c=e+n;A<c;A++)if(Ko(o,A*3,a,l),o.needsUpdate=!0,r(o,A,i,s))return!0;return!1}class V6{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function iA(n,e){return e[n+15]===65535}function dh(n,e){return e[n+6]}function Ym(n,e){return e[n+14]}function $m(n){return n+8}function Xm(n,e){return e[n+6]}function kue(n,e){return e[n+7]}const Yf=new ms,Lw=new Z,Que=["x","y","z"];function kC(n,e,t,r,i){let s=n*2,o=od,a=TA,l=IA;if(iA(s,a)){const c=dh(n,l),u=Ym(s,a);Oue(e,t,r,c,u,i)}else{const c=$m(n);Pw(c,o,r,Lw)&&kC(c,e,t,r,i);const u=Xm(n,l);Pw(u,o,r,Lw)&&kC(u,e,t,r,i)}}function QC(n,e,t,r){let i=n*2,s=od,o=TA,a=IA;if(iA(i,o)){const A=dh(n,a),c=Ym(i,o);return Nue(e,t,r,A,c)}else{const A=kue(n,a),c=Que[A],f=r.direction[c]>=0;let h,p;f?(h=$m(n),p=Xm(n,a)):(h=Xm(n,a),p=$m(n));const g=Pw(h,s,r,Lw)?QC(h,e,t,r):null;if(g){const w=g.point[c];if(f?w<=s[p+A]:w>=s[p+A+3])return g}const y=Pw(p,s,r,Lw)?QC(p,e,t,r):null;return g&&y?g.distance<=y.distance?g:y:g||y||null}}const Hue=function(){let n,e;const t=[],r=new V6(()=>new ms);return function(...o){n=r.getPrimitive(),e=r.getPrimitive(),t.push(n,e);const a=i(...o);r.releasePrimitive(n),r.releasePrimitive(e),t.pop(),t.pop();const l=t.length;return l>0&&(e=t[l-1],n=t[l-2]),a};function i(s,o,a,l,A=null,c=0,u=0){function f(w){let x=w*2,_=TA,C=IA;for(;!iA(x,_);)w=$m(w),x=w*2;return dh(w,C)}function h(w){let x=w*2,_=TA,C=IA;for(;!iA(x,_);)w=Xm(w,C),x=w*2;return dh(w,C)+Ym(x,_)}let p=s*2,d=od,g=TA,m=IA;if(iA(p,g)){const w=dh(s,m),x=Ym(p,g);return Zo(s,d,n),l(w,x,!1,u,c+s,n)}else{const w=$m(s),x=Xm(s,m);let _=w,C=x,T,b,M,P;if(A&&(M=n,P=e,Zo(_,d,M),Zo(C,d,P),T=A(M),b=A(P),b<T)){_=x,C=w;const D=T;T=b,b=D,M=P}M||(M=n,Zo(_,d,M));const Y=iA(_*2,g),H=a(M,Y,T,u+1,c+_);let I;if(H===OP){const D=f(_),z=h(_)-D;I=l(D,z,!0,u+1,c+_,M)}else I=H&&i(_,o,a,l,A,c,u+1);if(I)return!0;P=e,Zo(C,d,P);const v=iA(C*2,g),E=a(P,v,b,u+1,c+C);let F;if(E===OP){const D=f(C),z=h(C)-D;F=l(D,z,!0,u+1,c+C,P)}else F=E&&i(C,o,a,l,A,c,u+1);return!!F}}}(),zue=function(){const n=new Bl,e=new Bl,t=new We,r=new ga,i=new ga;return function s(o,a,l,A,c=null){let u=o*2,f=od,h=TA,p=IA;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,A),c=r),iA(u,h)){const g=a,m=g.index,y=g.attributes.position,w=l.index,x=l.attributes.position,_=dh(o,p),C=Ym(u,h);if(t.copy(A).invert(),l.boundsTree)return Zo(o,f,i),i.matrix.copy(t),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>i.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(A),b.b.applyMatrix4(A),b.c.applyMatrix4(A),b.needsUpdate=!0;for(let M=_*3,P=(C+_)*3;M<P;M+=3)if(Ko(e,M,m,y),e.needsUpdate=!0,b.intersectsTriangle(e))return!0;return!1}});for(let T=_*3,b=C+_*3;T<b;T+=3){Ko(n,T,m,y),n.a.applyMatrix4(t),n.b.applyMatrix4(t),n.c.applyMatrix4(t),n.needsUpdate=!0;for(let M=0,P=w.count;M<P;M+=3)if(Ko(e,M,w,x),e.needsUpdate=!0,n.intersectsTriangle(e))return!0}}else{const g=o+8,m=p[o+6];return Zo(g,f,Yf),!!(c.intersectsBox(Yf)&&s(g,a,l,A,c)||(Zo(m,f,Yf),c.intersectsBox(Yf)&&s(m,a,l,A,c)))}}}();function Pw(n,e,t,r){return Zo(n,e,Yf),t.intersectBox(Yf,r)}const HC=[];let py,od,TA,IA;function Pp(n){py&&HC.push(py),py=n,od=new Float32Array(n),TA=new Uint16Array(n),IA=new Uint32Array(n)}function dv(){py=null,od=null,TA=null,IA=null,HC.length&&Pp(HC.pop())}const qb=Symbol("skip tree generation"),eB=new ms,tB=new ms,$u=new We,cc=new ga,tp=new ga,np=new Z,pv=new Z,Gue=new Z,Vue=new Z,jue=new Z,YP=new ms,Do=new V6(()=>new Bl);class lm{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),lm.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const r=e.geometry,i=e._roots,s=r.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),lm.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};const{index:i,roots:s}=e,o=new lm(t,{...r,[qb]:!0});if(o._roots=s,r.setIndex){const a=t.getIndex();if(a===null){const l=new lt(e.index,1,!1);t.setIndex(l)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:H6,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[qb]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[qb]||(this._roots=Rue(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ms))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,r=t.index.array,i=t.attributes.position;let s,o,a,l,A=0;const c=this._roots;for(let f=0,h=c.length;f<h;f++)s=c[f],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),u(0,A),A+=s.byteLength;function u(f,h,p=!1){const d=f*2;if(a[d+15]===NC){const m=o[f+6],y=a[d+14];let w=1/0,x=1/0,_=1/0,C=-1/0,T=-1/0,b=-1/0;for(let M=3*m,P=3*(m+y);M<P;M++){const Y=r[M],H=i.getX(Y),I=i.getY(Y),v=i.getZ(Y);H<w&&(w=H),H>C&&(C=H),I<x&&(x=I),I>T&&(T=I),v<_&&(_=v),v>b&&(b=v)}return l[f+0]!==w||l[f+1]!==x||l[f+2]!==_||l[f+3]!==C||l[f+4]!==T||l[f+5]!==b?(l[f+0]=w,l[f+1]=x,l[f+2]=_,l[f+3]=C,l[f+4]=T,l[f+5]=b,!0):!1}else{const m=f+8,y=o[f+6],w=m+h,x=y+h;let _=p,C=!1,T=!1;e?_||(C=e.has(w),T=e.has(x),_=!C&&!T):(C=!0,T=!0);const b=_||C,M=_||T;let P=!1;b&&(P=u(m,h,_));let Y=!1;M&&(Y=u(y,h,_));const H=P||Y;if(H)for(let I=0;I<3;I++){const v=m+I,E=y+I,F=l[v],D=l[v+3],O=l[E],z=l[E+3];l[f+I]=F<O?F:O,l[f+I+3]=D>z?D:z}return H}}}traverse(e,t=0){const r=this._roots[t],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,l=0){const A=a*2,c=s[A+15]===NC;if(c){const u=i[a+6],f=s[A+14];e(l,c,new Float32Array(r,a*4,6),u,f)}else{const u=a+dy/4,f=i[a+6],h=i[a+7];e(l,c,new Float32Array(r,a*4,6),h)||(o(u,l+1),o(f,l+1))}}}raycast(e,t=cs){const r=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),l=i.groups,A=o?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=a?t[l[c].materialIndex].side:A,h=s.length;if(Pp(r[c]),kC(0,i,f,e,s),dv(),a){const p=l[c].materialIndex;for(let d=h,g=s.length;d<g;d++)s[d].face.materialIndex=p}}return s}raycastFirst(e,t=cs){const r=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const l=i.groups,A=s?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=o?t[l[c].materialIndex].side:A;Pp(r[c]);const h=QC(0,i,f,e);dv(),h!=null&&(a==null||h.distance<a.distance)&&(a=h,o&&(h.face.materialIndex=l[c].materialIndex))}return a}intersectsGeometry(e,t){const r=this.geometry;let i=!1;for(const s of this._roots)if(Pp(s),i=zue(0,r,e,t),dv(),i)break;return i}shapecast(e,t,r){const i=this.geometry;if(e instanceof Function){if(t){const f=t;t=(h,p,d,g)=>{const m=p*3;return f(h,m,m+1,m+2,d,g)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Do.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:A}=e;if(l&&A){const f=l;l=(h,p,d,g,m)=>f(h,p,d,g,m)?!0:KP(h,p,i,A,d,g,s)}else l||(A?l=(f,h,p,d)=>KP(f,h,i,A,p,d,s):l=(f,h,p)=>p);let c=!1,u=0;for(const f of this._roots){if(Pp(f),c=Hue(0,i,a,l,o,u),dv(),c)break;u+=f.byteLength}return Do.releasePrimitive(s),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,A=e.geometry.attributes.position;$u.copy(t).invert();const c=Do.getPrimitive(),u=Do.getPrimitive();if(s){let h=function(p,d,g,m,y,w,x,_){for(let C=g,T=g+m;C<T;C++){Ko(u,C*3,l,A),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let b=p,M=p+d;b<M;b++)if(Ko(c,b*3,o,a),c.needsUpdate=!0,s(c,u,b,C,y,w,x,_))return!0}return!1};if(i){const p=i;i=function(d,g,m,y,w,x,_,C){return p(d,g,m,y,w,x,_,C)?!0:h(d,g,m,y,w,x,_,C)}}else i=h}e.getBoundingBox(tB),tB.applyMatrix4(t);const f=this.shapecast({intersectsBounds:h=>tB.intersectsBox(h),intersectsRange:(h,p,d,g,m,y)=>(eB.copy(y),eB.applyMatrix4($u),e.shapecast({intersectsBounds:w=>eB.intersectsBox(w),intersectsRange:(w,x,_,C,T)=>i(h,p,w,x,g,m,C,T)}))});return Do.releasePrimitive(c),Do.releasePrimitive(u),f}intersectsBox(e,t){return cc.set(e.min,e.max,t),cc.needsUpdate=!0,this.shapecast({intersectsBounds:r=>cc.intersectsBox(r),intersectsTriangle:r=>cc.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),cc.set(e.boundingBox.min,e.boundingBox.max,t),cc.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,A=a.index,c=e.attributes.position,u=e.index,f=Do.getPrimitive(),h=Do.getPrimitive();let p=pv,d=Gue,g=null,m=null;i&&(g=Vue,m=jue);let y=1/0,w=null,x=null;return $u.copy(t).invert(),tp.matrix.copy($u),this.shapecast({boundsTraverseOrder:_=>cc.distanceToBox(_),intersectsBounds:(_,C,T)=>T<y&&T<o?(C&&(tp.min.copy(_.min),tp.max.copy(_.max),tp.needsUpdate=!0),!0):!1,intersectsRange:(_,C)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:T=>tp.distanceToBox(T),intersectsBounds:(T,b,M)=>M<y&&M<o,intersectsRange:(T,b)=>{for(let M=T*3,P=(T+b)*3;M<P;M+=3){Ko(h,M,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let Y=_*3,H=(_+C)*3;Y<H;Y+=3){Ko(f,Y,A,l),f.needsUpdate=!0;const I=f.distanceToTriangle(h,p,g);if(I<y&&(d.copy(p),m&&m.copy(g),y=I,w=Y/3,x=M/3),I<s)return!0}}}});{const T=u?u.count:c.count;for(let b=0,M=T;b<M;b+=3){Ko(h,b,u,c),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let P=_*3,Y=(_+C)*3;P<Y;P+=3){Ko(f,P,A,l),f.needsUpdate=!0;const H=f.distanceToTriangle(h,p,g);if(H<y&&(d.copy(p),m&&m.copy(g),y=H,w=P/3,x=b/3),H<s)return!0}}}}}),Do.releasePrimitive(f),Do.releasePrimitive(h),y===1/0?null:(r.point?r.point.copy(d):r.point=d.clone(),r.distance=y,r.faceIndex=w,i&&(i.point?i.point.copy(m):i.point=m.clone(),i.point.applyMatrix4($u),d.applyMatrix4($u),i.distance=d.sub(i.point).length(),i.faceIndex=x),r)}closestPointToPoint(e,t={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:c=>(np.copy(e).clamp(c.min,c.max),np.distanceToSquared(e)),intersectsBounds:(c,u,f)=>f<a&&f<o,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,np);const f=e.distanceToSquared(np);return f<a&&(pv.copy(np),a=f,l=u),f<s}}),a===1/0)return null;const A=Math.sqrt(a);return t.point?t.point.copy(pv):t.point=pv.clone(),t.distance=A,t.faceIndex=l,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{Zo(0,new Float32Array(r),YP),e.union(YP)}),e}}const nB=new pg,$P=new We,Wue=Cn.prototype.raycast;function Kue(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;$P.copy(this.matrixWorld).invert(),nB.copy(n.ray).applyMatrix4($P);const t=this.geometry.boundsTree;if(n.firstHitOnly===!0){const r=WP(t.raycastFirst(nB,this.material),this,n);r&&e.push(r)}else{const r=t.raycast(nB,this.material);for(let i=0,s=r.length;i<s;i++){const o=WP(r[i],this,n);o&&e.push(o)}}}else Wue.call(this,n,e)}function Yue(n){return this.boundsTree=new lm(this,n),this.boundsTree}function $ue(){this.boundsTree=null}let rB=new Z,rp=new Z;const XP=[],mv=new qH,Xue=.03,Zue=.03,Jue=new Mi({side:cs}),que=new Mi({side:qr});let Dp;Wt.prototype.computeBoundsTree=Yue;Wt.prototype.disposeBoundsTree=$ue;Cn.prototype.raycast=Kue;const efe=n=>{const e=n.attributes.position,t=n.index,r=new qi,i=new Z,s=new Z,o=new Z,a=[];for(let l=0;l<t.array.length/3;l++){const A=l*3;i.fromBufferAttribute(e,t.getX(A+0)),s.fromBufferAttribute(e,t.getX(A+1)),o.fromBufferAttribute(e,t.getX(A+2)),r.set(i,s,o),a.push(r.getNormal(new Z))}n.userData.faceNormals=a},tfe=n=>{const e=n.geometry.clone();let t=[];if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)t.push(n.material[i].clone());else t=n.material.clone();if(!n.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const r=new Cn(e,t);return efe(r.geometry),r.geometry.computeBoundsTree({strategy:z6}),r},my=n=>{n.isMesh&&(n.geometry.userData.faceNormals=null,n.geometry.dispose(),n.geometry.disposeBoundsTree(),n.parent&&n.parent.remove(n),n.userData.cancelMesh&&my(n.userData.cancelMesh))},j6=n=>{var e,t;n.userData.cullingClone&&(my(n.userData.cullingClone),n.userData.cullingClone=null,my(n.userData.cullingCloneP),n.userData.cullingCloneP=null,my(n.userData.cullingCloneN),n.userData.cullingCloneN=null,((e=n.userData)==null?void 0:e.clippedIndexGeometry)!=null&&(n.userData.clippedIndexGeometry=null),((t=n.userData)==null?void 0:t.origIndexBuffer)!=null&&(n.userData.origIndexBuffer=null))},nfe=async n=>{if(n==null){console.warn("Null parameter for meshes was provided. Skipping mesh culling.");return}if(!Array.isArray(n)){console.warn("No valid mesh array was provided. Skipping mesh culling.");return}if(n.length==0){console.warn("No mesh array with elements was provided. Skipping mesh culling.");return}const e=[];Dp=n[0].parent,Dp.lines!=null&&(Dp.lines.forEach(i=>{i.visible=!1}),Dp.lines.length=0),n.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=tfe(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,o=i.userData.cullingCloneP,a=i.userData.cullingCloneN;o.material=Jue,a.userData.cancelMesh=o,a.material=que,o.userData.maxCullDistance=a.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(o),e[i.userData.cullLayer].negMeshes.push(a),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const r=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const o=e[i].origMeshes[s],a=e[i].cloneMeshes[s],l=o.userData.origIndexBuffer.array,A=a.geometry.attributes.position.array,c=a.geometry.attributes.normal.array,u=a.geometry.userData.faceNormals;r.push({geom:o.geometry,index:ife(l,A,c,u,t,o.userData.cullDistance)})}t=[...t,...e[i].posMeshes,...e[i].negMeshes]}r.forEach(i=>{i.geom.setIndex(i.index)})},rfe=n=>{let e=Xue,t=Zue;return n&&(isNaN(n)?Array.isArray(n)&&(isNaN(n[0])||(e=n[0]),isNaN(n[1])||(t=n[1])):e=n),[e,t]},ife=(n,e,t,r,i,s,o=!1)=>{const a=[],l=rfe(s);let A=l[0],c=l[1];mv.far=A+c;for(let f=0;f<n.length/3;f++){r&&rp.set(r[f].x,r[f].y,r[f].z).normalize();const h=f*3;let p=[];for(let d=0;d<3;d++){XP.length=0;const g=n[h+d]*3;r==null&&rp.set(t[g],t[g+1],t[g+2]).normalize(),rB.set(e[g],e[g+1],e[g+2]).add(rp.clone().multiplyScalar(A)),mv.set(rB,rp.clone().multiplyScalar(-1));const m=mv.intersectObjects(i,!1,XP);for(let y=m.length-1;y>=0;y--)A-m[y].distance>=m[y].object.userData.maxCullDistance&&m.splice(y,1);if(m.length===0){for(let y=0;y<3;y++)a.push(n[h+y]);break}else{const y=m.map(w=>w.object);for(let w=0;w<y.length;w++){const x=y[w];if(x!=null&&x.userData.cancelMesh){const _=y.indexOf(x.userData.cancelMesh);y[w]=null,_!=-1&&_<w&&(y[_]=null)}}if(y.filter(w=>w).length===0){for(let w=0;w<3;w++)a.push(n[h+w]);break}if(d===0)p=m.map(w=>w.object);else if(p=m.map(w=>{if(p.indexOf(w.object)!==-1)return w.object}),p=p.filter(w=>w),d===2&&p.filter(w=>w).length===0)for(let w=0;w<3;w++)a.push(n[h+w]);o&&sfe(rB,rp.clone().multiplyScalar(-1),mv.far,16711680,Dp)}}}const u=new Uint32Array(a);return new lt(u,1,!1)};function sfe(n,e,t,r,i){i.lines==null&&(i.lines=[]);let s=new Z;s.addVectors(n,e.clone().multiplyScalar(t));const o=[];o.push(n),o.push(s);const a=new Wt().setFromPoints(o),l=[];l.push(new ke(0)),l.push(new ke(16777215));let A=new Sl({color:r});var c=new nd(a,A);c.renderOrder=100,i.add(c),i.lines.push(c)}let iB,Na,gv,vv,yv,ji,Xu;function ofe(){ji!=null&&ji.clear(!0,!0)}function afe(n,e,t){const r=e*t,i=new Uint8Array(4*r),s=Math.floor(n.r*255),o=Math.floor(n.g*255),a=Math.floor(n.b*255);for(let A=0;A<r;A++){const c=A*4;i[c]=s,i[c+1]=o,i[c+2]=a,i[c+3]=255}const l=new zH(i,e,t);return l.needsUpdate=!0,l}function lfe(n,e,t,r,i,s,o=!0){if(n||(n=afe(t,r,i)),iB==null){iB=document.createElement("div"),gv=new vw,Na=new ed(-r/2,r/2,i/2,-i/2,-1e4,1e4),Na.position.z=100,gv.add(Na),vv=new Mi({side:hi,transparent:!0,opacity:1,color:new ke(1,1,1)});const A=new ou(1,1);yv=new Cn(A,vv),yv.scale.set(r,i,1),gv.add(yv),ji=new gg,ji.setPixelRatio(1),ji.setSize(r,i),ji.autoClear=!1,iB.appendChild(ji.domElement)}else Na.left=-r/2,Na.right=r/2,Na.top=i/2,Na.bottom=-i/2,Na.updateProjectionMatrix(),yv.scale.set(r,i,1),ji.setSize(r,i);Xu=new pa(r,i),Xu.texture.encoding=o?wt:jX,vv.map=n,vv.color=e.clone(),ji.setClearColor(t.clone(),s?0:1),ji.setRenderTarget(Xu),ji.clear(),ji.render(gv,Na);let a=new Uint8ClampedArray(Xu.width*Xu.height*4);return ji.readRenderTargetPixels(Xu,0,0,r,i,a),new ImageData(a,r,i)}function W6({width:n,height:e,transparent:t}){const r=document.createElement("canvas");r.width=n,r.height=e;const i=r.getContext("2d");return i.fillStyle="white",t&&(i.globalAlpha=0),i.fillRect(0,0,r.width,r.height),i.globalAlpha=1,i}function zC(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].image}function Afe(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].clone()}function mA(n,e,t,r,i){const s=(n-e)/(t-e);return r+s*(i-r)}const cfe=async({transparentColor:n,meshes:e,atlasSize:t=4096,mtoon:r=!0,transparentMaterial:i=!1,transparentTexture:s=!1,twoSidedMaterial:o=!1})=>typeof window>"u"?await ufe({meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}):await ffe({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s,twoSidedMaterial:o}),ufe=async({meshes:n,atlasSize:e,mtoon:t,transparentMaterial:r,transparentTexture:i})=>{const s=e,o=["diffuse"],a=[];n.forEach(T=>{const b=T.material;let M=a.find(P=>P.material===b);if(!M)a.push({material:b,mesh:T});else{const{dest:P}=n_({meshes:[M.mesh,T]});M.mesh.geometry=P}});const l=Object.fromEntries(o.map(T=>[T,W6({width:s,height:s,transparent:i})])),A=Math.floor(Math.sqrt(n.length)+1),c=s/A,u=new Map(a.map((T,b)=>{const M=new Ye(b%A,Math.floor(b/A)).multiplyScalar(1/A),P=new Ye(M.x+1/A,M.y+1/A);return[T.mesh,{min:M,max:P}]})),f={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},h=[],p=[];a.forEach(T=>{const{min:b,max:M}=u.get(T.mesh);p.push(M),h.push(b)});const d=new Ye(Math.max(...p.map(T=>T.x)),Math.max(...p.map(T=>T.y))),g=new Ye(Math.min(...h.map(T=>T.x)),Math.min(...h.map(T=>T.y))),m=1/(d.x-g.x),y=1/(d.y-g.y),w=c*m,x=c*y,_=new Map(a.map(T=>{let{min:b,max:M}=u.get(T.mesh);return b.x=b.x*m,b.y=b.y*y,M.x=M.x*m,M.y=M.y*y,[T.mesh,{min:b,max:M}]}));a.forEach(T=>{const{material:b,mesh:M}=T,{min:P,max:Y}=_.get(M);o.forEach(E=>{const F=l[E];F.globalCompositeOperation="source-over";let D=zC(b,f[E].find(O=>zC(b,O)));if(D!==""&&D!==void 0)try{const O=new Uint8ClampedArray(D.data),z=new ImageData(O,w,x),K=document.createElement("canvas");K.width=w,K.height=x;const Q=K.getContext("2d");Q.putImageData(z,0,0),Q.save(),F.drawImage(K,P.x*s,P.y*s,w,x)}catch(O){console.error("error",O)}else F.fillStyle=E==="diffuse"?`#${b.color.clone().getHexString()}`:E==="normal"?"#8080ff":E==="orm"?`#${new ke(b.aoMapIntensity,b.roughness,b.metalness).getHexString()}`:"#7F7F7F",F.fillRect(P.x*s,P.y*s,w,x)});const H=M.geometry,I=H.attributes.uv;if(I)for(let E=0;E<I.array.length;E+=2)I.array[E]=mA(I.array[E],0,1,P.x,Y.x),I.array[E+1]=mA(I.array[E+1],0,1,P.y,Y.y);const v=H.attributes.uv2;if(v)for(let E=0;E<v.array.length;E+=2)v.array[E]=mA(v.array[E],0,1,P.x,Y.x),v.array[E+1]=mA(v.array[E+1],0,1,P.y,Y.y);else H.attributes.uv2=H.attributes.uv});const C=Object.fromEntries(await Promise.all(o.map(async T=>{const b=new Hn(l[T].canvas);return b.flipY=!1,[T,b]})));return{bakeObjects:a,textures:C,uvs:_}},ffe=async({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s,twoSidedMaterial:o})=>{ofe();const a=t,l=r?["diffuse"]:["diffuse","orm","normal"],A=[];let c=null;e.forEach(v=>{v=v.clone();const E=v.material.length==null?v.material:v.material[0];r&&c==null&&E.type=="ShaderMaterial"&&(c=E.clone());let F=A.find(D=>{D.material});if(!F)A.push({material:E,mesh:v});else{const{dest:D}=n_({meshes:[F.mesh,v]});F.mesh.geometry=D}});const u=Object.fromEntries(l.map(v=>[v,W6({width:a,height:a,transparent:s&&v=="diffuse"})])),f=Math.floor(Math.sqrt(e.length)+1),h=a/f,p=new Map(A.map((v,E)=>{const F=new Ye(E%f,Math.floor(E/f)).multiplyScalar(1/f),D=new Ye(F.x+1/f,F.y+1/f);return[v.mesh,{min:F,max:D}]})),d={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},g=[],m=[];A.forEach(v=>{const{min:E,max:F}=p.get(v.mesh);m.push(F),g.push(E)});const y=new Ye(Math.max(...m.map(v=>v.x)),Math.max(...m.map(v=>v.y))),w=new Ye(Math.min(...g.map(v=>v.x)),Math.min(...g.map(v=>v.y))),x=1/(y.x-w.x),_=1/(y.y-w.y),C=h*x,T=h*_,b=new Map(A.map(v=>{let{min:E,max:F}=p.get(v.mesh);return E.x=E.x*x,E.y=E.y*_,F.x=F.x*x,F.y=F.y*_,[v.mesh,{min:E,max:F}]}));let M=!1;A.forEach(v=>{const{material:E,mesh:F}=v,{min:D,max:O}=b.get(F);l.forEach(B=>{var se;const j=u[B];j.globalCompositeOperation="source-over";let ee,U=new ke(1,1,1);switch(B){case"diffuse":ee=E.color||n,(se=E.uniforms)!=null&&se.litFactor?U=E.uniforms.litFactor.value:U=E.color;break;case"normal":ee=new ke(8421631);break;case"orm":ee=new ke(0,E.roughness,E.metalness);break;default:ee=new ke(1,1,1);break}let X=Afe(E,d[B].find(de=>zC(E,de)));M==!1&&B=="normal"&&X!=null&&(M=!0);const ae=lfe(X,U,ee,a,a,B=="diffuse"&&s,B!="normal");createImageBitmap(ae).then(de=>j.drawImage(de,D.x*a,D.y*a,C,T))});const z=F.geometry.clone();F.geometry=z;const K=z.attributes.uv.clone();if(z.attributes.uv=K,K)for(let B=0;B<z.attributes.uv.array.length;B+=2)K.array[B]=(K.array[B]%1+1)%1,K.array[B+1]=(K.array[B+1]%1+1)%1,K.array[B]=mA(K.array[B],0,1,D.x,O.x),K.array[B+1]=mA(K.array[B+1],0,1,D.y,O.y);const Q=z.attributes.uv2;if(Q)for(let B=0;B<Q.array.length;B+=2)Q.array[B]=(Q.array[B]%1+1)%1,Q.array[B+1]=(Q.array[B+1]%1+1)%1,Q.array[B]=mA(Q.array[B],0,1,D.x,O.x),Q.array[B+1]=mA(Q.array[B+1],0,1,D.y,O.y);else z.attributes.uv2=z.attributes.uv});const P=Object.fromEntries(await Promise.all(l.map(async v=>{const E=new Hn(u[v].canvas);return E.flipY=!1,[v,E]}))),Y=o?hi:cs;let H;const I=i?"transparent":"opaque";return r?(H=new Qh({map:P.diffuse,transparent:i,side:Y}),c==null&&(c=new I6),c.side=Y,c.uniforms.map=P.diffuse,c.uniforms.shadeMultiplyTexture=P.diffuse,c.transparent=i,s&&!i&&(H.alphaTest=.5,c.alphaTest=.5),H.userData.vrmMaterial=c,H.userData.shadeTexture=P.uniformColor,H.name="mToon_"+I,H.map.name=H.name):(H=new Qh({map:P.diffuse,roughnessMap:P.orm,metalnessMap:P.orm,normalMap:M?P.normal:null,transparent:i,side:Y}),s&&!i&&(H.alphaTest=.5),H.name="standard_"+I,H.roughnessMap!=null&&(H.roughnessMap.name=H.name+"_orm"),H.normalMap!=null&&(H.normalMap.name=H.name+"_normal")),{bakeObjects:A,material:H}};function K6(n){const e=new Map;for(const r of n.skeleton.bones){const i=r.clone(!1);e.set(r,i)}n.skeleton.bones[0].traverse(r=>{if(r.type!=="Bone")return;const i=e.get(r);for(const s of r.children){const o=e.get(s);o&&i.add(o)}});const t=new XA(n.skeleton.bones.map(r=>e.get(r)));return t.boneInverses=n.skeleton.boneInverses,t.pose(),t}function Y6(n,e){const t=new Map;new Z(-1,1,-1),new We,new Z;let r=0;n.forEach(l=>{if(l.skeleton){var A=K6(l);const c=A.bones;A.bones.forEach((u,f)=>{var h;if(c.indexOf(u)!==-1){const p=t.get(u.name);if(p==null){const d={index:r,boneInverses:A.boneInverses[f],bone:u.clone(!1),parentName:((h=u.parent)==null?void 0:h.type)=="Bone"?u.parent.name:null};r++,t.set(u.name,d)}else u.userData.VRMcolliders!=null&&(p.bone.userData.VRMcolliders==null?p.bone.userData.VRMcolliders=u.userData.VRMcolliders:u.userData.VRMcollidersID!=p.bone.userData.VRMcollidersID&&(p.bone.userData.VRMcolliders=[...p.bone.userData.VRMcolliders,...u.userData.VRMcolliders]))}})}});const i=[],s=[];[...t.values()].forEach(l=>{var A;if(i.push(l.bone),s.push(l.boneInverses),l.parentName!=null){const c=(A=t.get(l.parentName))==null?void 0:A.bone;c&&c.add(l.bone)}});const a=new XA(i,s);return a.bones.forEach(l=>{var c;const A=(c=l.userData)==null?void 0:c.vrm0RestPosition;A&&l.position.set(-A.x,A.y,-A.z),l.position.set(l.position.x*e,l.position.y*e,l.position.z*e)}),a}function hfe(n,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((o,a)=>{const l=n.bones.filter(c=>c.name===o.name),A=l.length>0?n.bones.indexOf(l[0]):-1;t.set(a,A)});const r=[],i=e.geometry.attributes.skinIndex.array;for(let o=0;o<i.length;o++)r[o]=t.get(i[o]);const s=new Uint16Array(r);return new lt(s,4,!1)}}function $6(n){const e=[...n];return e.sort(),e.filter((t,r)=>e.indexOf(t)===r)}function dfe(n){const t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(r=>n.constructor===r);return t.length&&t[0]||null}function Dw(n,e){const t=[];for(let s=0;s<e.length;s++){const o=s*n.itemSize;for(let a=0;a<n.itemSize;a++)t[o+a]=n.array[e[s]*n.itemSize+a]}const r=dfe(n.array),i=new r(t);return new lt(i,n.itemSize,n.normalized)}function pfe(n,e,t){for(let r=0;r<n.attributes.skinIndex.array.length;r+=4){const i=[n.attributes.skinIndex.array[r],n.attributes.skinIndex.array[r+1],n.attributes.skinIndex.array[r+2],n.attributes.skinIndex.array[r+3]];for(let s=0;s<4;s++){const o=i[s],a=mfe(o,e,t);i[s]=a}n.attributes.skinIndex.array[r]=i[0],n.attributes.skinIndex.array[r+1]=i[1],n.attributes.skinIndex.array[r+2]=i[2],n.attributes.skinIndex.array[r+3]=i[3]}n.attributes.skinIndex.needsUpdate=!0}function mfe(n,e,t){const r=e.bones[n],i=t.bones.find(s=>s.name===r.name);return i?t.bones.indexOf(i):-1}async function gfe(n,e,t){const{scale:r,isVrm0:i,mergeAppliedMorphs:s}=t,o=[],a=[],l=Gh(n,"SkinnedMesh"),A=Z6(e),c=X6(e).map(h=>h.id);l.forEach(h=>{const p=h.clone();o.push(p),Array.isArray(h.material)?a.push(...h.material):a.push(h.material)});const u=Y6(o,r),f=new It;return f.name="AvatarRoot",o.forEach(h=>{var Y,H;const p=new Wt,d={};for(const I in h.geometry.attributes){const v=h.geometry.attributes[I];d[I]=v.clone()}const g={merge:new Set,keep:new Set(A),remove:new Set};if(s){if(!h.morphTargetDictionary||!h.morphTargetInfluences)return;c.forEach(I=>{const v=h.morphTargetDictionary[I];if(v!==void 0&&h.morphTargetInfluences[v]>0)g.merge.add(I);else return g.remove.add(I),null})}if((Y=h.userData)!=null&&Y.isVRM0)for(let I=0;I<d.position.array.length;I+=3)d.position.array[I]*=-1,d.position.array[I+2]*=-1;const m={attributes:d,morphTargetDictionaries:new Map(l.map(I=>[I,I.morphTargetDictionary||{}])),morphTargetInfluences:new Map(l.map(I=>[I,I.morphTargetInfluences||[]])),index:null,animations:{}},{dest:y,destMorphToMerge:w}=n_({meshes:[h],scale:r,morphTargetsProcess:g},i);if(i)for(let I=0;I<m.attributes.position.array.length;I+=3)m.attributes.position.array[I]*=-1,m.attributes.position.array[I+2]*=-1;m.attributes=y.attributes,m.morphAttributes=y.morphAttributes,p.morphTargetsRelative=!0;const x=h.geometry.index.array,_=$6(h.geometry.index.array),C=[];for(let I=0;I<x.length;I++)C[I]=_.indexOf(x[I]);pfe(p,h.skeleton,u);const T=new Uint32Array(C),b=new lt(T,1,!1);p.setIndex(b);for(const I in p.attributes)p.setAttribute(I,Dw(p.getAttribute(I),_));for(const I in p.morphAttributes){const v=p.morphAttributes[I];for(let E=0;E<v.length;E++)v[E]=Dw(v[E],_)}const M=p.attributes.position.array;for(let I=0;I<M.length;I+=3)if(M[I]*=r,M[I+1]*=r,M[I+2]*=r,s){if(!w.morphTargetInfluences)return;for(let v=0;v<w.morphTargetInfluences.length;v++){const E=(H=w.morphAttributes)==null?void 0:H.position[v];if(E)for(let F=0;F<3;F++)M[I+F]+=E.array[I+F]*w.morphTargetInfluences[v]}}const P=new cl(p,h.material);P.name=h.name,P.morphTargetInfluences=y.morphTargetInfluences,P.morphTargetDictionary=y.morphTargetDictionary,P.bind(u),f.add(P),f.add(u.bones[0])}),f.userData.atlasMaterial=a,f}function vfe(n){const e=n.parent.name,t=new Z,r=new Z;n.getWorldPosition(t),n.getWorldScale(r),n=n.clone();const i=new We,s=new rt;return n.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),n.userData.boneName=e,n.userData.globalPosition=t,n.userData.globalScale=r,n.userData.globalRotationMatrix=i,n}function yfe(n,e){const t=new cl(e.geometry,e.material),r=n.clone(),i=r.bones.findIndex(h=>h.name===e.userData.boneName),s=e.userData.globalPosition,o=e.userData.globalScale||new Z(1,1,1),a=e.userData.globalRotationMatrix;t.add(r.bones[0]);const l=[],A=[],c=t.geometry.attributes.position.array,u=new Z,f=e.userData.isVRM0?-1:1;for(let h=0;h<c.length;h+=3)u.set(c[h],c[h+1],c[h+2]),u.applyMatrix4(a),c[h]=f*o.x*u.x+s.x,c[h+1]=o.y*u.y+s.y,c[h+2]=f*o.z*u.z+s.z,l.push(i,0,0,0),A.push(1,0,0,0);return t.geometry.setAttribute("skinIndex",new kx(l,4)),t.geometry.setAttribute("skinWeight",new ln(A,4)),t.bind(r),t}async function wfe(n,e,t){var H,I;let{transparentColor:r=new ke(1,1,1),mToonAtlasSize:i=4096,mToonAtlasSizeTransp:s=4096,stdAtlasSize:o=4096,stdAtlasSizeTransp:a=4096,exportMtoonAtlas:l=!1,exportStdAtlas:A=!0,mergeAppliedMorphs:c=!1,isVrm0:u=!1,scale:f=1,twoSidedMaterial:h=!1}=t;const p=Gh(n,["Mesh"]);for(let v=0;v<p.length;v++)p[v]=vfe(p[v]);const d=Gh(n,["SkinnedMesh"]),g=[...p,...d];l==!1&&A==!1&&(l=!0);let{stdMesh:m,stdTranspMesh:y,mToonMesh:w,mToonTranspMesh:x,requiresTransparency:_}=Efe(g);l==!1&&(m=[...m,...w],y=[...y,...x],x=[],w=[]),A==!1&&(w=[...w,...m],x=[...x,...y],m=[],y=[]);const C=new It;C.name="AvatarRoot",C.userData.atlasMaterial=[];const T=Y6(g,f),b={standard:{meshArray:m,size:o,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:y,size:a,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:w,size:i,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:x,size:s,isMtoon:!0,transparentMaterial:!0}},M=Z6(e),P=X6(e).map(v=>v.id);for(const v in b){const E=b[v],F=E.meshArray;if(F.length>0){const{bakeObjects:D,material:O}=await cfe({transparentColor:r,atlasSize:E.size,meshes:F,mtoon:E.isMtoon,transparentMaterial:E.transparentMaterial,transparentTexture:_,twoSidedMaterial:h}),z=D.map(ae=>ae.mesh),K=[],Q={merge:new Set,keep:new Set(Object.keys(M)),remove:new Set};z.forEach(ae=>{if(ae.type=="Mesh"&&(ae=yfe(T,ae)),K.push(ae),c){if(!ae.morphTargetDictionary||!ae.morphTargetInfluences)return;P.forEach(L=>{const ue=ae.morphTargetDictionary[L];if(ue!==void 0&&ae.morphTargetInfluences[ue]>0)Q.merge.add(L);else return Q.remove.add(L),null})}const se=ae.geometry,de=se.index.array,oe=$6(ae.geometry.index.array),pe=[];for(let L=0;L<de.length;L++)pe[L]=oe.indexOf(de[L]);const _e=new Uint32Array(pe),xe=new lt(_e,1,!1);se.setIndex(xe);for(const L in se.attributes)se.setAttribute(L,Dw(se.getAttribute(L),oe));for(const L in se.morphAttributes){const ue=se.morphAttributes[L];for(let Ae=0;Ae<ue.length;Ae++)ue[Ae]=Dw(ue[Ae],oe)}se.attributes.uv2||(se.attributes.uv2=se.attributes.uv),ae.skeleton!=null&&ae.geometry.setAttribute("skinIndex",hfe(T,ae));for(let L=0;L<8;L++)delete se.attributes[`morphTarget${L}`],delete se.attributes[`morphNormal${L}`]});const{dest:B,destMorphToMerge:j}=n_({meshes:K,scale:f,morphTargetsProcess:Q},u);console.log("destMorphToMerge",j);const ee=new Wt;if(u)for(let ae=0;ae<B.attributes.position.array.length;ae+=3)B.attributes.position.array[ae]*=-1,B.attributes.position.array[ae+2]*=-1;ee.attributes=B.attributes,ee.morphAttributes=B.morphAttributes,ee.morphTargetsRelative=!0,ee.setIndex(B.index);const U=ee.attributes.position.array;for(let ae=0;ae<U.length;ae+=3)if(U[ae]*=f,U[ae+1]*=f,U[ae+2]*=f,c){if(!j.morphTargetInfluences)continue;for(let se=0;se<j.morphTargetInfluences.length;se++){const de=(H=j.morphAttributes)==null?void 0:H.position[se];if(de)for(let oe=0;oe<3;oe++)U[ae+oe]+=de.array[ae+oe]*j.morphTargetInfluences[se]}}const X=new cl(ee,O);X.name="CombinedMesh_"+v,X.morphTargetInfluences=B.morphTargetInfluences,X.morphTargetDictionary=B.morphTargetDictionary,X.bind(T),C.add(X),X.userData.bindMorphs={old:M,new:{}},Object.keys(M).forEach(ae=>{const se=X.morphTargetDictionary[ae];se!==void 0&&(X.userData.bindMorphs.new[ae]={index:se,primitives:[X.id]})}),C.userData.atlasMaterial.push(O)}}const Y=(I=Object.values(e).find(v=>{var E;return(E=v==null?void 0:v.vrm)==null?void 0:E.expressionManager}))==null?void 0:I.vrm.expressionManager;return C.userData.expressionManagerToClone=Y,C.add(T.bones[0]),C}function X6(n){var t;return((t=Object.values(n).filter(r=>r)[0])==null?void 0:t.traitInfo.manifestData.getAllBlendShapeTraits())||[]}function Z6(n){const e=Object.values(n).map(i=>i==null?void 0:i.vrm).filter(i=>!!i).map(i=>{var s;return(s=i.expressionManager)==null?void 0:s.expressionMap}),t={};let r=[];for(const i of e)if(i)for(const s of Object.values(i)){if(r.includes(s.expressionName))continue;r.push(s.expressionName);const o=s._binds;!o||o.length==0||o.forEach(a=>{function l(c){const f=a.primitives.map(h=>h.morphTargetDictionary).filter(h=>!!h).find(h=>Object.values(h).includes(c));if(f)return Object.entries(f).find(([,h])=>h==c)}const A=l(a.index);A&&(t[A[0]]={index:A[1],primitives:a.primitives.map(c=>c.id)})})}return t}function ZP({meshes:n,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const r=[];return Object.entries(t).map(([i,s])=>{const o=n.find(l=>e.get(l).hasOwnProperty(i)),a=o.morphTargetDictionary[i];r[s]=o.morphTargetInfluences[a]}),r}function xfe({sourceAttributes:n}){const e=new Set,t=Array.from(n.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map(i=>{r[i]=e5(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),r}function JP(n){const{sourceMorphTargetDictionaries:e,morphTargetsProcess:t}=n,r=new Set;Array.from(e.values()).forEach(o=>{Object.keys(o).forEach(a=>{if(!t)r.add(a);else{if(t.remove.has(a)||t.merge.has(a))return;t.keep.has(a)&&r.add(a)}})});const s={};return Array.from(r.keys()).map((o,a)=>{s[o]=a}),s}function qP({meshes:n,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:r,scale:i},s=!1){const o=new Set;Array.from(t.values()).forEach(u=>{Object.keys(u).forEach(f=>o.add(f))});const l=Array.from(o),A={};l.forEach(u=>{A[u]=[],Object.entries(r).forEach(([f,h])=>{A[u][h]=[],n.forEach(p=>{let d;const g=e.get(p);if(g.hasOwnProperty(f)&&p.geometry.morphAttributes[u]){const m=g[f];d=p.geometry.morphAttributes[u][m]}else{const m=p.geometry.attributes[u],y=new m.array.constructor(new Array(m.array.length).fill(0));d=new lt(y,m.itemSize,m.normalized)}A[u][h].push(d)})})});const c={};return l.forEach(u=>{c[u]=[];for(let f=0;f<Object.entries(r).length;f++){c[u][f]=e5(A[u][f]);const h=c[u][f].array;for(let p=0;p<h.length;p+=3)h[p]*=i,h[p+1]*=i,h[p+2]*=i}}),c}function _fe({meshes:n}){var e=0,t=[];return n.forEach(r=>{const i=r.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=r.geometry.attributes.position.count}),t}function n_({meshes:n,scale:e,morphTargetsProcess:t},r=!1){let i=0;n.forEach(f=>{var h;if(i+=f.geometry.attributes.uv.count,(h=f.userData)!=null&&h.isVRM0)for(let p=0;p<f.geometry.attributes.position.array.length;p+=3)f.geometry.attributes.position.array[p]*=-1,f.geometry.attributes.position.array[p+2]*=-1});const s={meshes:n,attributes:new Map(n.map(f=>[f,f.geometry.attributes])),morphAttributes:new Map(n.map(f=>[f,f.geometry.morphAttributes])),morphTargetDictionaries:new Map(n.map(f=>[f,f.morphTargetDictionary||{}])),morphTargetInfluences:new Map(n.map(f=>[f,f.morphTargetInfluences||[]]))},o={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};o.attributes=xfe({sourceAttributes:s.attributes});const a=JP({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:(t==null?void 0:t.remove)||new Set,keep:(t==null?void 0:t.keep)||new Set,merge:(t==null?void 0:t.merge)||new Set}});o.morphTargetDictionary=a,o.morphAttributes=qP({meshes:n,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:a,scale:e},r),o.morphTargetInfluences=ZP({meshes:n,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:a}),o.index=_fe({meshes:n});const l={morphAttributes:{},morphTargetDictionaries:{},morphTargetInfluences:null};let A=new Set((t==null?void 0:t.keep)||[]);t==null||t.merge.forEach(f=>{A.add(f)});const c=JP({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:new Set,keep:A,merge:new Set}});l.morphAttributes=qP({meshes:n,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:c,scale:e},r);const u=ZP({meshes:n,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:c});return l.morphTargetInfluences=u,l.morphTargetDictionaries=c,o.animations={},{source:s,dest:o,destMorphToMerge:l}}function ut(n){return n==null?[]:Array.isArray(n)?n:[n]}function bfe(n,e){let t=n.children.slice();t.forEach(r=>n.remove(r)),n.add(e),t.forEach(r=>n.add(r))}async function Bfe(n,e){const r=await new lu().load(e);r.encoding=wt,r.flipY=!1,n.traverse(i=>{if(i instanceof Cn){const s=Array.isArray(i.material)?i.material:[i.material];for(let o=0;o<s.length;o++)s[o]instanceof Mr?s[o].name.includes("(Outline)")||(console.log(s[o].name),s[o].uniforms.map.value=r,s[o].uniforms.shadeMultiplyTexture.value=r):(s[o].map=r,s[o].emissiveMap=r),s[o].needsUpdate=!0}})}function fl(n){return n.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}const sB=n=>{const e=[];for(const t in n){const r=n[t].vrm;if(r){const i=r.data.cullingLayer;i>=0&&r.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=r.data.cullingDistance,s.userData.maxCullDistance=r.data.maxCullingDistance,e.push(s)})}}nfe(e)};function Efe(n){const e=[],t=[],r=[],i=[];let s=!1;return n.forEach(o=>{var A;const l=ut(o.material)[0];l.type=="ShaderMaterial"?l.transparent==!0?(i.push(o),s=!0):(r.push(o),((A=l.uniforms.alphaTest)==null?void 0:A.value)!=0&&(s=!0)):l.transparent==!0?(t.push(o),s=!0):(e.push(o),l.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:t,mToonMesh:r,mToonTranspMesh:i,requiresTransparency:s}}function Cfe(n){const e=[],t=[],r=[],i=[],s=[],o=[];return n.forEach(a=>{ut(a.material).forEach(A=>{A.type=="ShaderMaterial"?A.transparent==!0?o.push(A):A.uniforms.alphaTest.value!=0?s.push(A):i.push(A):A.transparent==!0?r.push(A):A.alphaTest!=0?t.push(A):e.push(A)})}),{stdMats:e,stdCutoutpMats:t,stdTranspMats:r,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:o}}function e3(n,e){n.data==null?n.data=e:n.data={...n.data,...e}}function Mfe(n,e){if(n.data!=null)return n.data[e]}function Sfe(n){const e=Mfe(n,"cullingMeshes");e&&(e.forEach(t=>{j6(t)}),n.data.cullingMeshes=null)}function bn(n){switch(n){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function Tfe(n){const e=n.scene;Sfe(n),e.traverse(t=>{t.material&&GC(t.material),t.geometry&&(j6(t),t.geometry.dispose(),t.geometry.disposeBoundsTree())}),e.parent&&e.parent.remove(e),bg.deepDispose(e),n.expressionManager&&n.expressionManager.expressions.forEach(t=>{t._binds&&t._binds.forEach(r=>{r.primitives&&r.primitives.forEach(i=>{i.geometry.dispose(),i.material&&GC(i.material)})})});for(const t in n)n[t]=null}const GC=n=>{var e,t,r,i,s,o;if(n.length)for(let a=0;a<n.length;++a)GC(n[a]);else(e=n.map)!=null&&e.dispose&&n.map.dispose(),(t=n.normalMap)!=null&&t.dispose&&n.normalMap.dispose(),(r=n.ormMap)!=null&&r.dispose&&n.ormMap.dispose(),(i=n.aoMap)!=null&&i.dispose&&n.aoMap.dispose(),(s=n.roughnessMap)!=null&&s.dispose&&n.roughnessMap.dispose(),(o=n.metalnessMap)!=null&&o.dispose&&n.metalnessMap.dispose(),n.dispose()},bT=n=>{let e,t,r=0;return Array.isArray(n)?(e=n[0]||0,t=n[1]||0,r=n[2]||0):(typeof n=="string"||n instanceof String)&&n.split("-").forEach(s=>{switch(s=s.toLowerCase(),s){case"left":e=-1;break;case"right":e=1;break;case"bottom":case"down":t=-1;break;case"top":case"up":t=1;break;case"back":case"backward":r=-1;break;case"front":case"forward":r=1;break;default:console.warn("unkown cameraPosition name: "+s+" in: "+n+". Please use left, right, bottom, top, back or front");break}}),new Z(e,t,r)},J6=()=>{const n=new Date().getTime(),e=Math.random().toString(36).substr(2,9);return n+"-"+e},Ife=n=>{var t,r,i,s,o,a,l,A,c,u,f;const e=n.humanoid.humanBones;e.hips.node.parent.name="rootBone",e.upperChest==null&&e.neck.node.parent!=e.chest&&(e.neck.node.parent!=e.chest.node?e.upperChest={node:e.neck.node.parent}:e.upperChest!=null&&(e.upperChest={node:e.neck.node.parent},e.chest={node:e.neck.node.parent.parent})),e.leftShoulder==null&&(e.leftUpperArm.node.parent!=((t=e.chest)==null?void 0:t.node)&&e.leftUpperArm.node.parent!=((r=e.upperChest)==null?void 0:r.node)&&e.leftUpperArm.node.parent!=((i=e.spine)==null?void 0:i.node)&&e.leftUpperArm.node.parent!=((s=e.neck)==null?void 0:s.node)&&e.leftUpperArm.node.parent!=((o=e.head)==null?void 0:o.node),e.leftShoulder={node:e.leftUpperArm.node.parent}),e.rightShoulder==null&&(e.rightUpperArm.node.parent!=((a=e.chest)==null?void 0:a.node)&&e.rightUpperArm.node.parent!=((l=e.upperChest)==null?void 0:l.node)&&e.rightUpperArm.node.parent!=((A=e.spine)==null?void 0:A.node)&&e.rightUpperArm.node.parent!=((c=e.neck)==null?void 0:c.node)&&e.rightUpperArm.node.parent!=((u=e.head)==null?void 0:u.node),e.rightShoulder={node:e.rightUpperArm.node.parent});for(let h in Km)h=h.charAt(0).toLowerCase()+h.slice(1),(f=e[h])!=null&&f.node&&(e[h].node.name=h)};function q6({candidates:n,predicate:e}){if(!n.length)return null;const t=n.shift();return e(t)?t:(n=n.concat(t.children),q6({candidates:n,predicate:e}))}function e8(n,e){return q6({candidates:[n],predicate:t=>t.name===e})}function t8({candidates:n,predicate:e,results:t=[]}){if(!n.length)return t;const r=n.shift();return e(r)&&t.push(r),n=n.concat(r.children),t8({candidates:n,predicate:e,results:t})}function Gh(n,e){return t8({candidates:[n],predicate:t=>ut(e).includes(t.type)})}function Rfe(n,e){if(!n.morphTargetDictionary)return!1;for(const t of Object.keys(n.morphTargetDictionary))if(e[t])return!0;return!1}const Ffe={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function n8(n,e,t){var d;const r=$c.findByName(n,"mixamo.com");if(r==null)return null;const i=[],s=new rt,o=new rt,a=new rt,l=new Z,A=e.getObjectByName("mixamorigHips").position.y,c=(d=t.humanoid)==null?void 0:d.getNormalizedBoneNode("hips").getWorldPosition(l).y,u=t.scene.getWorldPosition(l).y,h=Math.abs(c-u)/A;return r.tracks.forEach(g=>{const m=g.clone(),y=m.name.split("."),w=y[0],_=Ffe[w],C=e.getObjectByName(w);if(_!=null){const T=y[1];if(C.getWorldQuaternion(s).invert(),C.parent.getWorldQuaternion(o),m instanceof ma){for(let b=0;b<m.values.length;b+=4){const M=m.values.slice(b,b+4);a.fromArray(M),a.premultiply(o).multiply(s),a.toArray(M),M.forEach((P,Y)=>{m.values[Y+b]=P})}i.push(new ma(`${_}.${T}`,m.times,m.values.map((b,M)=>{var P;return((P=t.meta)==null?void 0:P.metaVersion)==="0"&&M%2===0?-b:b})))}else if(m instanceof NA){const b=m.values.map((M,P)=>{var Y;return(((Y=t.meta)==null?void 0:Y.metaVersion)==="0"&&P%3!==1?-M:M)*h});i.push(new NA(`${_}.${T}`,m.times,b))}}}),new $c("vrmAnimation",r.duration,i)}const Ufe=new Nre,Lfe=new t5,oB=.2,Pfe=n=>Math.floor(Math.random()*n);class t3{constructor(e,t,r,i,s,o,a){var l,A,c,u;this.mixer=new One(t),this.actions=[],this.to=null,this.from=null,this.vrm=r,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=(A=(l=r==null?void 0:r.humanoid)==null?void 0:l.humanBones)==null?void 0:A.neck,this.spineBone=(u=(c=r==null?void 0:r.humanoid)==null?void 0:c.humanBones)==null?void 0:u.spine,this.timeScale=1,i&&(this.setAnimations(i,null,null,a),this.to=this.actions[s],o!=-1&&(this.from=this.actions[o],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play())}setTimeScale(e){this.timeScale=e,this.actions.forEach(t=>{t.timeScale=e})}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,t=null,r=null,i=!1){if(r=r??this.animationManager.mouseLookEnabled,this.animations=e,t!=null){if(this.vrm!=null){const s=n8(e,t,this.vrm);s&&(e=[s],this.mixamoModel=t)}}else{const s=[];e.forEach(o=>{s.push(o.clone())}),e=s}if(r&&e[0].tracks.map((s,o)=>{(s.name==="neck.quaternion"||s.name==="spine.quaternion")&&e[0].tracks.splice(o,1)}),i){this.actions.forEach(s=>{s.weight=0,s.stop()}),this.actions=[],this.newAnimationWeight=1;for(let s=0;s<e.length;s++){const o=this.mixer.clipAction(e[s]);o.timeScale=this.timeScale,this.actions.push(o)}this.actions[0].weight=1,this.actions[0].play()}else{this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let s=0;s<e.length;s++){const o=this.mixer.clipAction(e[s]);o.timeScale=this.timeScale,this.actions.push(o)}this.actions[0].weight=0,this.actions[0].play()}}update(e,t){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(r=>{r.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(r=>{r.weight=0,r.stop()}),this.fadeOutActions=null),this.actions.forEach(r=>{r.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=t),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}setTime(e){this.mixer.setTime(e)}getTime(){return this.mixer.time}dispose(){this.animationManager.disposeAnimation(this)}}class Dfe{constructor(){this.animationPaths=[],this.defaultAnimations=[],this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.paused=!1,this.scale=1,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,this.currentClip=null,setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(t=>{t.setMouseLookEnabled(e)})}setScale(e){this.scale=e}async loadAnimation(e,t,r=0,i=!0,s="",o=""){const a=s+(s!=""?"/":"")+ut(e)[0];o=o==""?fl(a):o,this.currentAnimationName=o;const A=await(i?Ufe:Lfe).loadAsync(a);A.scale.set(this.scale,this.scale,this.scale),this._scaleOffsetHips(A.animations);const c=$c.findByName(A.animations,"mixamo.com");c!=null?(this.mixamoModel=A.clone(),this.mixamoAnimations=A.animations,this.currentClip=c):(this.mixamoModel=null,this.animations=A.animations,this.currentClip=A.animations[0]),this.mainControl==null&&(this.curAnimID=0,this.lastAnimID=-1,this.mainControl=new t3(this,A,null,A.animations,this.curAnimID,this.lastAnimID,t),this.animationControls.push(this.mainControl)),this.animationControls.forEach(u=>{u.setAnimations(A.animations,this.mixamoModel,this.mouseLookEnabled,t)}),this.setTime(r),t?this.pause():this.play()}getCurrentClip(){return this.currentClip}getCurrentClipDuration(){return this.currentClip?this.currentClip.duration:0}getCurrentAnimationName(){return this.currentAnimationName}clearCurrentAnimations(){this.animationPaths=this.defaultAnimations,this.animationControls=[],this.mainControl=null}storeAnimationPaths(e,t,r=!0){const i=ut(e);r?this.animationPaths=[...this.defaultAnimations,...i.map(s=>`${t}/${s}`)]:this.animationPaths=i.map(s=>t!=""?`${t}/${s}`:s)}storeDefaultAnimationPaths(e,t){const r=ut(e);this.defaultAnimations=r.map(i=>t!=""?`${t}/${i}`:i),this.animationPaths=this.defaultAnimations}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}_scaleOffsetHips(e){e.forEach(t=>{for(let r=0;r<t.tracks.length;r++){const i=t.tracks[r];if(i.name.includes(".position"))for(let s=0;s<i.values.length/3;s++){const o=s*3;i.values[o]/=this.scale,i.values[o+1]/=this.scale,i.values[o+2]/=this.scale}}})}addVRM(e){if(e==null){console.error("Non Existing VRM was provided.");return}let t=null;this.mixamoModel!=null?(t=[n8(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=t)):t=this.animations;const r=new t3(this,e.scene,e,t,this.curAnimID,this.lastAnimID,this.isPaused());this.animationControls.push(r),this.started===!1&&t&&(this.started=!0,this.animRandomizer(t[this.curAnimID].duration)),this.update(!0)}removeVRM(e){const t=this.animationControls.findIndex(r=>r.vrm===e);t!==-1&&this.animationControls.splice(t,1)[0].dispose()}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=Pfe(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-oB)},e*1e3)}pause(){this.paused=!0}play(){this.paused=!1}isPaused(){return this.paused}setTime(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTime(e)})}setFrame(e){this.setTime(e*30)}setSpeed(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTimeScale(e)})}update(e=!1){(this.mainControl&&!this.paused||e)&&(this.animationControls.forEach(t=>{t.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*oB):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*oB):this.weightOut=0)}}const Ofe={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};class ad{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Nfe=new ed(-1,1,1,-1,0,1),BT=new Wt;BT.setAttribute("position",new ln([-1,3,0,-1,-1,0,3,-1,0],3));BT.setAttribute("uv",new ln([0,2,0,0,2,0],2));class ET{constructor(e){this._mesh=new Cn(BT,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Nfe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class kfe extends ad{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Mr?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=qS.clone(e.uniforms),this.material=new Mr({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ET(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class n3 extends ad{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class Qfe extends ad{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Hfe{constructor(e,t){if(this.renderer=e,t===void 0){const r=e.getSize(new Ye);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new pa(this._width*this._pixelRatio,this._height*this._pixelRatio),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new kfe(Ofe),this.clock=new JH}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}n3!==void 0&&(o instanceof n3?r=!0:o instanceof Qfe&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ye);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class zfe extends ad{constructor(e,t,r,i,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s!==void 0?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ke}render(e,t,r){const i=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==void 0&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=o),e.autoClear=i}}class Gfe extends ad{constructor(e,t,r){super(),this.resolution=e,this.fsQuad=new ET(this.material()),this.scene=t,this.camera=r,this.rgbRenderTarget=wv(e,Lr,!0),this.normalRenderTarget=wv(e,Lr,!1),this.normalMaterial=new une}setResolution(e){this.rgbRenderTarget=wv(e,Lr,!0),this.normalRenderTarget=wv(e,Lr,!1)}render(e,t){e.setRenderTarget(this.rgbRenderTarget),e.render(this.scene,this.camera);const r=this.scene.overrideMaterial;e.setRenderTarget(this.normalRenderTarget),this.scene.overrideMaterial=this.normalMaterial,e.render(this.scene,this.camera),this.scene.overrideMaterial=r;const i=this.fsQuad.material.uniforms;i.tDiffuse.value=this.rgbRenderTarget.texture,i.tDepth.value=this.rgbRenderTarget.depthTexture,i.tNormal.value=this.normalRenderTarget.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new Mr({uniforms:{tDiffuse:{value:null},tDepth:{value:null},tNormal:{value:null},resolution:{value:new Qt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform sampler2D tDepth;
                uniform sampler2D tNormal;
                uniform vec4 resolution;
                varying vec2 vUv;

                float getDepth(int x, int y) {
                    return texture2D( tDepth, vUv + vec2(x, y) * resolution.zw ).r;
                }

                vec3 getNormal(int x, int y) {
                    return texture2D( tNormal, vUv + vec2(x, y) * resolution.zw ).rgb * 2.0 - 1.0;
                }

                float neighborNormalEdgeIndicator(int x, int y, float depth, vec3 normal) {
                    float depthDiff = getDepth(x, y) - depth;
                    vec3 normalEdgeBias = vec3(1., 1., 1.);
                    float normalDiff = dot(normal - getNormal(x, y), normalEdgeBias);
                    float normalIndicator = clamp(smoothstep(-.01, .01, normalDiff), 0.0, 1.0);
                    float depthIndicator = clamp(sign(depthDiff * .25 + .0025), 0.0, 1.0);
                    return distance(normal, getNormal(x, y)) * depthIndicator * normalIndicator;
                }

                float depthEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float diff = 0.0;
                    diff += clamp(getDepth(1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(-1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, 1) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, -1) - depth, 0.0, 1.0);
                    return floor(smoothstep(0.01, 0.02, diff) * 2.) / 2.;
                }

                float normalEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float indicator = 0.0;
                    indicator += neighborNormalEdgeIndicator(0, -1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(0, 1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(-1, 0, depth, normal);
                    indicator += neighborNormalEdgeIndicator(1, 0, depth, normal);
                    return step(0.1, indicator);
                }

                float lum(vec4 color) {
                    vec4 weights = vec4(.2126, .7152, .0722, .0);
                    return dot(color, weights);
                }

                float smoothSign(float x, float radius) {
                    return smoothstep(-radius, radius, x) * 2.0 - 1.0;
                }

                void main() {
                    vec4 texel = texture2D( tDiffuse, vUv );
                    float tLum = lum(texel);
                    float normalEdgeCoefficient = .3;
                    float depthEdgeCoefficient = .4;
                    float dei = depthEdgeIndicator();
                    float nei = normalEdgeIndicator();
                    float coefficient = dei > 0.0 ? (1.0 - depthEdgeCoefficient * dei) : (1.0 + normalEdgeCoefficient * nei);
                    gl_FragColor = texel * coefficient;
                }
                `})}}function wv(n,e,t){const r=new pa(n.x,n.y,t?{depthTexture:new HH(n.x,n.y),depthBuffer:!0}:void 0);return r.texture.format=e,r.texture.minFilter=$n,r.texture.magFilter=$n,r.texture.generateMipmaps=!1,r.stencilBuffer=!1,r}class Vfe extends ad{constructor(e){super(),this.resolution=e,this.fsQuad=new ET(this.material())}setResolution(e){this.resolution=e}render(e,t,r){const i=this.fsQuad.material.uniforms;i.tDiffuse.value=r.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new Mr({uniforms:{tDiffuse:{value:null},resolution:{value:new Qt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform vec4 resolution;
                varying vec2 vUv;
                void main() {
                    vec2 iuv = (floor(resolution.xy * vUv) + .5) * resolution.zw;
                    vec4 texel = texture2D( tDiffuse, iuv );
                    texel.rgb = pow(texel.rgb, vec3(1.0 / 2.2));
                    gl_FragColor = texel;
                }
                `})}}const ip=new Z;class jfe{constructor(e){un(this,"camera",null);un(this,"frameOffset",{min:.2,max:.2});un(this,"boneOffsets");un(this,"cameraDir",new Z);un(this,"frameTarget",null);this.camera=e||new Br,this.boneOffsets={head:null,neck:null,chest:null,hips:null,spine:null,leftUpperLeg:null,leftLowerLeg:null,leftFoot:null,rightUpperLeg:null,rightLowerLeg:null,rightFoot:null}}setupCamera(e,t,r=30){this.camera.position.copy(e),this.camera.lookAt(t),this.camera.fov=r}async calculateBoneOffsets(e,t){for(const r in this.boneOffsets){const i=await this._getMinMaxOffsetByBone(e,r,t);console.log("result",i),this.boneOffsets[r]=i}}setFrameTarget(e){this.frameTarget=e}frameCloseupShot(){this.frameShot("head","head")}frameMediumShot(){this.frameShot("chest","head")}frameCowboyShot(){this.frameShot("hips","head")}frameFullShot(){this.frameShot("leftFoot","head")}frameShot(e,t,r=null,i=!1,s=!0){if(!this.frameTarget){console.error("No target object provided, Call setFrameTarget() first;");return}const o=this._getBoneWorldPositionWithOffset(this.frameTarget,e,i),a=this._getBoneWorldPositionWithOffset(this.frameTarget,t,s);o.y-=this.frameOffset.max,a.y+=this.frameOffset.min,r=r||new Z(0,0,0),this.positionCameraBetweenPoints(o,a,r)}setBottomFrameOffset(e){this.frameOffset.min=e}setTopFrameOffset(e){this.frameOffset.max=e}_getBoneWorldPositionWithOffset(e,t,r){const i=this._getFirstBoneWithName(t,e);if(!i||!this.boneOffsets[t])return console.error(`Bone with name '${t}' not found in the model.`),new Z;const s=new Z;i.getWorldPosition(s);const o=r?this.boneOffsets[t].max:this.boneOffsets[t].min;return s.y+=o.y,s}_getFirstBoneWithName(e,t=void 0){let r=null;const i=t||this.frameTarget;if(!i){console.error("_getFirstBoneWithName: No target object provided, Call setFrameTarget() first or provide a targetObject parameter;");return}return i.traverse(s=>{if(s instanceof cl){if(!s.geometry){console.error("Invalid skinned mesh found in children.");return}const o=s.skeleton.bones.findIndex(a=>a.name===e);if(o!==-1){r=s.skeleton.bones[o];return}}}),r}async _getMinMaxOffsetByBone(e,t,r){return new Promise(async(i,s)=>{(!e||!e.traverse)&&(console.error("Invalid parent object provided."),s(null));const o=new Z(1/0,1/0,1/0),a=new Z(-1/0,-1/0,-1/0),l=[];e.traverse(async u=>{u instanceof cl&&(l.push(this._saveBonesPos(u.skeleton)),u.skeleton.pose())});let A=0;await(u=>new Promise(f=>setTimeout(f,u)))(10),e.traverse(u=>{if(u instanceof cl){if(!u.geometry){console.error("Invalid skinned mesh found in children.");return}const f=u.skeleton.bones.findIndex(g=>g.name===t);if(f===-1){console.error(`Bone with name '${t}' not found in one of the skinned meshes.`);return}const h=u.geometry.getAttribute("position"),p=u.geometry.getAttribute("skinWeight"),d=u.geometry.getAttribute("skinIndex");for(let g=0;g<h.count;g++){const m=new Z().fromBufferAttribute(h,g).applyMatrix4(u.matrixWorld);if(d.getX(g)===f&&p.getX(g)>=r){const x=u.skeleton.bones[f],_=new Z().setFromMatrixPosition(x.matrixWorld),C=m.clone().sub(_);o.min(C),a.max(C)}}this._restoreSavedPose(l[A],u.skeleton),A++}}),i({min:o,max:a})})}_saveBonesPos(e){let t=[];return e.bones.forEach(r=>{t.push({position:r.position.clone(),rotation:r.rotation.clone(),scale:r.scale.clone()})}),t}_restoreSavedPose(e,t){e&&t.bones.forEach((r,i)=>{r.position.copy(e[i].position),r.rotation.copy(e[i].rotation),r.scale.copy(e[i].scale)})}positionCameraBetweenPoints(e,t,r,i=30){const s=new ms;s.expandByPoint(e),s.expandByPoint(t),this.camera.fov=i;const o=this.camera.fov*(Math.PI/180),l=s.getSize(new Z).length()/(2*Math.tan(o/2));s.getCenter(ip),this.camera.position.copy(ip),r.y*=.5,this.camera.lookAt(ip.clone().sub(r));const A=new Z;this.camera.getWorldDirection(A),this.camera.position.addScaledVector(A,-l),this.camera.updateProjectionMatrix()}setCamera(e,t,r=30){this.camera.position.copy(e),this.camera.fov=r,ip.set(0,0,-1),this.cameraDir=ip.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*t,this.camera.position.z-=this.cameraDir.z*t}setCameraFrameWithName(e,t){switch(e.toLowerCase()){case"fullshot":this.frameShot("leftFoot","head",t);break;case"cowboyshot":this.frameShot("hips","head",t);break;case"mediumshot":this.frameShot("chest","head",t);break;case"mediumcloseup":case"mediumcloseupshot":this.frameShot("chest","head",t,!0);break;case"closeup":case"closeupshot":this.frameShot("head","head",t);break;default:console.warn("unkown cameraFrame: "+e+". Please use fullShot, cowboyShot, mediumShot, mediumCloseup or closeup"),this.frameShot("leftFoot","head",t);break}}copyCamera(e){this.camera.position.copy(e.position),this.camera.quaternion.copy(e.quaternion),"fov"in e&&(this.camera.fov=e.fov)}}const Ow=4096;class Wfe{constructor(e,t,r){const i=new gg({preserveDrawingBuffer:!0,antialias:!1,alpha:!0});this.pixelSize=r,this.domElement=i.domElement;const s=new Ye(Ow,Ow);i.setClearColor(0,0),i.outputEncoding=_l,i.setSize(s.x,s.y),i.setPixelRatio(window.devicePixelRatio);let o=s.clone().divideScalar(r);o.x|=0,o.y|=0;const a=new Hfe(i);a.addPass(new zfe(e,t)),this._renderPixelPass=new Gfe(o,e,t),this._pixelPass=new Vfe(o),a.addPass(this._renderPixelPass),a.addPass(this._pixelPass),this.renderer=i,this.composer=a}setSize(e,t){let i=new Ye(e,t).clone().divideScalar(this.pixelSize);i.x|=0,i.y|=0,this.renderer.setSize(e,t),this._renderPixelPass.setResolution(i),this._pixelPass.setResolution(i)}setPixelSize(e){this.pixelSize=e}render(){this.composer.render()}}class Kfe{constructor(e,t){un(this,"cameraFrameManager");this.renderer=new gg({preserveDrawingBuffer:!0,antialias:!0,alpha:!0}),this.renderer.setClearAlpha(0),this.renderer.premultipliedAlpha=!1,this.scene=t,this.characterManager=e,this.renderer.outputEncoding=wt,this.renderer.setSize(Ow,Ow);const r=new Br(30,1,.1,1e3);this.textureLoader=new lu,this.sceneBackground=new ke(.1,.1,.1),this.sceneBackgroundAlpha=1,this.usesBackgroundImage=!1,this.backgroundMaterial=new Mi({color:16777215,transparent:!0,opacity:.5});const i=new ou(1e3,1e3),s=new Cn(i,this.backgroundMaterial);s.renderOrder=-1,this.backgroundPlane=s,this.pixelRenderer=new Wfe(t,r,20),this.cameraFrameManager=new jfe(r),this.cameraFrameManager.setFrameTarget(this.characterManager.characterModel)}setScene(e){this.scene=e}get camera(){return this.cameraFrameManager.camera}setupCamera(e,t,r=30){this.cameraFrameManager.setupCamera(e,t,r)}_getCharacterMinMax(){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;return this.characterManager.characterModel.traverse(r=>{r.geometry&&(r.geometry.computeBoundingBox(),r.geometry.boundingBox&&(r.geometry.boundingBox.applyMatrix4(r.matrixWorld),r.geometry.boundingBox.min.y<e&&(e=r.geometry.boundingBox.min.y),r.geometry.boundingBox.max.y>t&&(t=r.geometry.boundingBox.max.y)))}),{minY:e,maxY:t}}_getBoneWorldPosition(e,t=void 0){const r=this.cameraFrameManager._getFirstBoneWithName(e,t);return r!=null?new Z().setFromMatrixPosition(r.matrixWorld):(console.warn(`Bone with name '${e}' not found in one of the skinned meshes.`),new Z(0,0,0))}setBackground(e){if(Array.isArray(e)){const t=e[3]==null?1:e[3];this.setBackgroundColor(e[0],e[1],e[2],t)}else this.setBackgroundImage(e)}setBackgroundColor(e,t,r,i){const s=new ke(e,t,r,i);this.sceneBackground=s,i==null&&(i=1),i>1&&(i=1),i<0&&(i=0),this.sceneBackgroundAlpha=i,this.backgroundMaterial.color=s,this.usesBackgroundImage=!1}setBackgroundImage(e){return new Promise(async(t,r)=>{try{const i=await this.texureLoader.load(e);i&&(i.wrapS=i.wrapT=us,this.sceneBackground=i,this.usesBackgroundImage=!0,this.sceneBackgroundAlpha=1,t())}catch(i){console.error("Error loading background image: ",i),r(i)}})}_setBackground(){if(this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1)if(this.sceneBackgroundAlpha==0)this.scene.background=null;else{this.scene.background=null,this.scene.add(this.backgroundPlane),this.backgroundPlane.position.copy(this.camera.position);var e=new Z(0,0,-1);e.applyQuaternion(this.camera.quaternion);var t=100;this.backgroundPlane.position.addScaledVector(e,t),this.backgroundPlane.lookAt(this.camera.position)}else this.scene.background=this.sceneBackground}_restoreBackground(){this.scene.background=null,this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1&&this.scene.remove(this.backgroundPlane)}getImageData(e,t,r=null){return this._createImage(e,t,r).split("base64,")[1]}_createImage(e,t,r=null){const i=e/t;typeof r=="number"&&this.pixelRenderer.setPixelSize(r),this.renderer.setSize(e,t),this.pixelRenderer.setSize(e,t);const s="image/png";this.camera.aspect=i,this.camera.updateProjectionMatrix();const o=typeof r=="number"?this.pixelRenderer:this.renderer;try{this._setBackground(),o.render(this.scene,this.camera);let a=o.domElement.toDataURL(s);return this._restoreBackground(),a}catch(a){return console.error(a),null}}savePixelScreenshot(e,t,r,i){this.pixelRenderer.setPixelSize(i),this.pixelRenderer.setSize(t,r);const s=this._createImage(t,r,!0),o="image/octet-stream",a="image/png";this.saveFile(s.replace(a,o),e+".png")}saveScreenshot(e,t,r){const i=this._createImage(t,r),s="image/octet-stream",o="image/png";this.saveFile(i.replace(o,s),e+".png")}getScreenshotImage(e,t){const r=this._createImage(e,t),i=new Image;return i.src=r,i}getScreenshotTexture(e,t){const r=this.getScreenshotImage(e,t),i=new Hn(r);return i.needsUpdate=!0,i}getScreenshotBlob(e,t){const r=this._createImage(e,t),i=m5.Buffer.from(r.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,t){const r=document.createElement("a");typeof r.download=="string"?(document.body.appendChild(r),r.download=t,r.href=e,r.click(),document.body.removeChild(r)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}const Yfe=2;class $fe{constructor(e=.5,t=.5,r=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new JH,this.closeTime=e,this.openTime=t,this.continuity=r,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addVRM(e){this.vrmBlinkers.push(e)}removeVRM(e){const t=this.vrmBlinkers.indexOf(e);t!==-1&&this.vrmBlinkers.splice(t,1)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=Yfe,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(Ur.Blink,1-this._eyeOpen),e.expressionManager.update()})}}function r8(){return(r8=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function Xfe(){return r8.apply(this,arguments)}function Zfe(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}(function(n){n[n.cBASISTexType2D=0]="cBASISTexType2D",n[n.cBASISTexType2DArray=1]="cBASISTexType2DArray",n[n.cBASISTexTypeCubemapArray=2]="cBASISTexTypeCubemapArray",n[n.cBASISTexTypeVideoFrames=3]="cBASISTexTypeVideoFrames",n[n.cBASISTexTypeVolume=4]="cBASISTexTypeVolume"})(jC||(jC={})),function(n){n[n.RAW=0]="RAW",n[n.PNG=1]="PNG",n[n.JPG=2]="JPG"}(WC||(WC={}));class Jfe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class sp{constructor(e,t,r,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e+4294967296*t}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let r=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,i)}}let r3=new Uint8Array([0]),Ir=[171,75,84,88,32,50,48,187,13,10,26,10];function i3(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Buffer.from(n)}function s3(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function op(n){let e=0;for(let i of n)e+=i.byteLength;let t=new Uint8Array(e),r=0;for(let i of n)t.set(new Uint8Array(i),r),r+=i.byteLength;return t}function qfe(n){let e=new Uint8Array(n.buffer,n.byteOffset,Ir.length);if(e[0]!==Ir[0]||e[1]!==Ir[1]||e[2]!==Ir[2]||e[3]!==Ir[3]||e[4]!==Ir[4]||e[5]!==Ir[5]||e[6]!==Ir[6]||e[7]!==Ir[7]||e[8]!==Ir[8]||e[9]!==Ir[9]||e[10]!==Ir[10]||e[11]!==Ir[11])throw Error("Missing KTX 2.0 identifier.");let t=new Jfe,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new sp(n,Ir.length,r,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();let s=i._nextUint32();t.supercompressionScheme=i._nextUint32();let o=i._nextUint32(),a=i._nextUint32(),l=i._nextUint32(),A=i._nextUint32(),c=i._nextUint64(),u=i._nextUint64(),f=new sp(n,Ir.length+r,24*s,!0);for(let F=0;F<s;F++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});let h=new sp(n,o,a,!0),p={vendorId:h._skip(4)._nextUint16(),descriptorType:h._nextUint16(),versionNumber:h._nextUint16(),descriptorBlockSize:h._nextUint16(),colorModel:h._nextUint8(),colorPrimaries:h._nextUint8(),transferFunction:h._nextUint8(),flags:h._nextUint8(),texelBlockDimension:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],bytesPlane:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],samples:[]},d=(p.descriptorBlockSize/4-6)/4;for(let F=0;F<d;F++){let D={bitOffset:h._nextUint16(),bitLength:h._nextUint8(),channelType:h._nextUint8(),samplePosition:[h._nextUint8(),h._nextUint8(),h._nextUint8(),h._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&D.channelType?(D.sampleLower=h._nextInt32(),D.sampleUpper=h._nextInt32()):(D.sampleLower=h._nextUint32(),D.sampleUpper=h._nextUint32()),p.samples[F]=D}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(p);let g=new sp(n,l,A,!0);for(;g._offset<A;){let F=g._nextUint32(),D=g._scan(F),O=s3(D);if(t.keyValue[O]=g._nextUint8Array(F-D.byteLength-1),O.match(/^ktx/i)){let K=s3(t.keyValue[O]);t.keyValue[O]=K.substring(0,K.lastIndexOf("\0"))}let z=F%4?4-F%4:0;g._skip(z)}if(u<=0)return t;let m=new sp(n,c,u,!0),y=m._nextUint16(),w=m._nextUint16(),x=m._nextUint32(),_=m._nextUint32(),C=m._nextUint32(),T=m._nextUint32(),b=[];for(let F=0;F<s;F++)b.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});let M=c+m._offset,P=M+x,Y=P+_,H=new Uint8Array(n.buffer,n.byteOffset+M,x),I=new Uint8Array(n.buffer,n.byteOffset+P,_),v=new Uint8Array(n.buffer,n.byteOffset+Y,C),E=new Uint8Array(n.buffer,n.byteOffset+(Y+C),T);return t.globalData={endpointCount:y,selectorCount:w,imageDescs:b,endpointsData:H,selectorsData:I,tablesData:v,extendedData:E},t}function VC(){return(VC=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}let ehe={keepWriter:!1};function the(n,e={}){e=VC({},ehe,e);let t=new ArrayBuffer(0);if(n.globalData){let y=new ArrayBuffer(20+20*n.globalData.imageDescs.length),w=new DataView(y);w.setUint16(0,n.globalData.endpointCount,!0),w.setUint16(2,n.globalData.selectorCount,!0),w.setUint32(4,n.globalData.endpointsData.byteLength,!0),w.setUint32(8,n.globalData.selectorsData.byteLength,!0),w.setUint32(12,n.globalData.tablesData.byteLength,!0),w.setUint32(16,n.globalData.extendedData.byteLength,!0);for(let x=0;x<n.globalData.imageDescs.length;x++){let _=n.globalData.imageDescs[x];w.setUint32(20+20*x+0,_.imageFlags,!0),w.setUint32(20+20*x+4,_.rgbSliceByteOffset,!0),w.setUint32(20+20*x+8,_.rgbSliceByteLength,!0),w.setUint32(20+20*x+12,_.alphaSliceByteOffset,!0),w.setUint32(20+20*x+16,_.alphaSliceByteLength,!0)}t=op([y,n.globalData.endpointsData,n.globalData.selectorsData,n.globalData.tablesData,n.globalData.extendedData])}let r=[],i=n.keyValue;for(let y in e.keepWriter||(i=VC({},n.keyValue,{KTXwriter:"KTX-Parse v0.6.0"})),i){let w=i[y],x=i3(y),_=typeof w=="string"?op([i3(w),r3]):w,C=x.byteLength+1+_.byteLength,T=C%4?4-C%4:0;r.push(op([new Uint32Array([C]),x,r3,_,new Uint8Array(T).fill(0)]))}let s=op(r);if(n.dataFormatDescriptor.length!==1||n.dataFormatDescriptor[0].descriptorType!==0)throw Error("Only BASICFORMAT Data Format Descriptor output supported.");let o=n.dataFormatDescriptor[0],a=new ArrayBuffer(28+16*o.samples.length),l=new DataView(a),A=24+16*o.samples.length;if(l.setUint32(0,a.byteLength,!0),l.setUint16(4,o.vendorId,!0),l.setUint16(6,o.descriptorType,!0),l.setUint16(8,o.versionNumber,!0),l.setUint16(10,A,!0),l.setUint8(12,o.colorModel),l.setUint8(13,o.colorPrimaries),l.setUint8(14,o.transferFunction),l.setUint8(15,o.flags),!Array.isArray(o.texelBlockDimension))throw Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,o.texelBlockDimension[0]),l.setUint8(17,o.texelBlockDimension[1]),l.setUint8(18,o.texelBlockDimension[2]),l.setUint8(19,o.texelBlockDimension[3]);for(let y=0;y<8;y++)l.setUint8(20+y,o.bytesPlane[y]);for(let y=0;y<o.samples.length;y++){let w=o.samples[y],x=28+16*y;if(w.channelID)throw Error("channelID has been renamed to channelType.");l.setUint16(x+0,w.bitOffset,!0),l.setUint8(x+2,w.bitLength),l.setUint8(x+3,w.channelType),l.setUint8(x+4,w.samplePosition[0]),l.setUint8(x+5,w.samplePosition[1]),l.setUint8(x+6,w.samplePosition[2]),l.setUint8(x+7,w.samplePosition[3]),64&w.channelType?(l.setInt32(x+8,w.sampleLower,!0),l.setInt32(x+12,w.sampleUpper,!0)):(l.setUint32(x+8,w.sampleLower,!0),l.setUint32(x+12,w.sampleUpper,!0))}let c=Ir.length+68+24*n.levels.length,u=c+a.byteLength,f=t.byteLength>0?u+s.byteLength:0;f%8&&(f+=8-f%8);let h=[],p=new DataView(new ArrayBuffer(24*n.levels.length)),d=(f||u+s.byteLength)+t.byteLength;for(let y=0;y<n.levels.length;y++){let w=n.levels[y];h.push(w.levelData),p.setBigUint64(24*y+0,BigInt(d),!0),p.setBigUint64(24*y+8,BigInt(w.levelData.byteLength),!0),p.setBigUint64(24*y+16,BigInt(w.uncompressedByteLength),!0),d+=w.levelData.byteLength}let g=new ArrayBuffer(68),m=new DataView(g);return m.setUint32(0,n.vkFormat,!0),m.setUint32(4,n.typeSize,!0),m.setUint32(8,n.pixelWidth,!0),m.setUint32(12,n.pixelHeight,!0),m.setUint32(16,n.pixelDepth,!0),m.setUint32(20,n.layerCount,!0),m.setUint32(24,n.faceCount,!0),m.setUint32(28,n.levels.length,!0),m.setUint32(32,n.supercompressionScheme,!0),m.setUint32(36,c,!0),m.setUint32(40,a.byteLength,!0),m.setUint32(44,u,!0),m.setUint32(48,s.byteLength,!0),m.setBigUint64(52,BigInt(t.byteLength>0?f:0),!0),m.setBigUint64(60,BigInt(t.byteLength),!0),new Uint8Array(op([new Uint8Array(Ir).buffer,g,p.buffer,a,s,new ArrayBuffer(f>0?f-(u+s.byteLength):0),t,...h]))}var jC,WC,nhe={enableDebug:!1,isUASTC:!0,isKTX2File:!0,isInputSRGB:!0,generateMipmap:!0,needSupercompression:!0,isSetKTX2SRGBTransferFunc:!0},KC=new OffscreenCanvas(128,128),o3=KC.getContext("2d",{willReadFrequently:!0}),i8=typeof document>"u";function rhe(n){return createImageBitmap(n).then(function(e){return KC.width=e.width,KC.height=e.height,o3.drawImage(e,0,0),o3.getImageData(0,0,e.width,e.height)})}function ihe(n,e){return e===void 0&&(e={}),ohe().then(function(t){var r=new t.BasisEncoder;return she(e,r),r.setTexType(jC.cBASISTexType2D),Zfe(n,ArrayBuffer)&&(n=new Blob([n])),rhe(n).then(function(i){r.setSliceSourceImage(0,new Uint8Array(i.data),i.width,i.height,WC.RAW);var s=new Uint8Array(10485760),o=r.encode(s);if(o===0)throw"encode failed";var a=new Uint8Array(s.buffer,0,o),l=qfe(s);if(e.kvData){for(var A in e.kvData)l.keyValue[A]=e.kvData[A];a=the(l,{keepWriter:!0})}return a})})}function she(n,e){n===void 0&&(n={}),(n=Xfe({},nhe,n)).enableDebug!==void 0&&e.setDebug(n.enableDebug),n.isUASTC!==void 0&&e.setUASTC(n.isUASTC),n.isKTX2File!==void 0&&e.setCreateKTX2File(n.isKTX2File),n.isSetKTX2SRGBTransferFunc!==void 0&&e.setKTX2SRGBTransferFunc(n.isSetKTX2SRGBTransferFunc),n.generateMipmap!==void 0&&e.setMipGen(n.generateMipmap),n.isYFlip!==void 0&&e.setYFlip(n.isYFlip),n.qualityLevel!==void 0&&e.setQualityLevel(n.qualityLevel),n.compressionLevel!==void 0&&e.setCompressionLevel(n.compressionLevel),n.needSupercompression!==void 0&&e.setKTX2UASTCSupercompression(n.needSupercompression),n.isNormalMap!==void 0&&e.setNormalMap(n.isNormalMap)}var aB=null;function ohe(){return aB||(aB=new Promise(function(n,e){i8?(importScripts("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js"),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()}).then(function(t){BASIS({wasmBinary:t}).then(function(r){r.initializeBasis(),n(r)}).catch(e)}).catch(e)):Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js").then(function(t){return t.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()})]).then(function(t){var r=t[0],i=t[1],s=document.createElement("script");s.onload=function(){BASIS({wasmBinary:i}).then(function(o){o.initializeBasis(),n(o)}).catch(e)},s.src=URL.createObjectURL(new Blob([r])),s.onerror=e,document.body.appendChild(s)}).catch(e)})),aB}i8&&self.addEventListener("message",function(n){ihe(n.data).then(function(e){self.postMessage(e)}).catch(function(e){self.postMessage({error:e})})});class ahe{constructor(e,t){if(this.gl=e,this.libktx=null,e!==void 0)if(t===void 0&&LIBKTX!==void 0&&(t=LIBKTX),t!==void 0)this.initializied=this.init(e,t);else{console.error("Failed to initalize KTXDecoder: ktx library undefined");return}else{console.error("Failed to initalize KTXDecoder: WebGL context undefined");return}}async init(e,t){this.libktx=await t({preinitializedWebGLContext:e}),this.libktx.GL.makeContextCurrent(this.libktx.GL.createContext(e.canvas,{majorVersion:2}))}stringToUastcFlags(e){return e==="FASTER"?this.libktx.UastcFlags.LEVEL_FASTER.value:e==="FASTEST"?this.libktx.UastcFlags.LEVEL_FASTEST.value:e==="SLOWER"?this.libktx.UastcFlags.LEVEL_SLOWER.value:e==="SLOWEST"?this.libktx.UastcFlags.LEVEL_VERYSLOW.value:this.libktx.UastcFlags.LEVEL_DEFAULT.value}stringToSupercmpScheme(e){return e==="Zstd"?this.libktx.SupercmpScheme.ZSTD:e==="Zlib"?this.libktx.SupercmpScheme.ZLIB:e==="BasisLZ"?this.libktx.SupercmpScheme.BASIS_LZ:this.libktx.SupercmpScheme.NONE}transcodeRGBA(e){if(!e.needsTranscoding)return;const t=this.libktx.TranscodeTarget.RGBA8888;e.transcodeBasis(t,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}transcode(e){if(e.gpuFormat="RGBA8888",e.needsTranscoding){let t,r=!1,i=!1,s=!1,o=!1,a=!1;r=!!this.gl.getExtension("WEBGL_compressed_texture_astc"),i=!!this.gl.getExtension("WEBGL_compressed_texture_etc1"),s=!!this.gl.getExtension("WEBGL_compressed_texture_s3tc"),o=!!this.gl.getExtension("EXT_texture_compression_bptc"),a=!!this.gl.getExtension("WEBGL_compressed_texture_pvrtc")||!!this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),r?(t=this.libktx.TranscodeTarget.ASTC_4x4_RGBA,e.gpuFormat="ASTC_4x4_RGBA"):o?(t=this.libktx.TranscodeTarget.BC7_RGBA,e.gpuFormat="BC7_RGBA"):s?(t=this.libktx.TranscodeTarget.BC1_OR_3,e.gpuFormat="BC1_OR_3"):a?(t=this.libktx.TranscodeTarget.PVRTC1_4_RGBA,e.gpuFormat="PVRTC1_4_RGBA"):i?(t=this.libktx.TranscodeTarget.ETC,e.gpuFormat="ETC"):(t=this.libktx.TranscodeTarget.RGBA8888,e.gpuFormat="RGBA8888"),e.transcodeBasis(t,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}}async loadKtxFromUri(e){await this.initializied;const t=await fetch(e),r=new Uint8Array(await t.arrayBuffer()),i=new this.libktx.ktxTexture(r);this.transcode(i);let s=i.glUpload();if(s.texture==null){console.error("Could not load KTX data");return}return s.texture.levels=Math.log2(i.baseWidth),s.texture.width=i.baseWidth,s.texture.height=i.baseHeight,s.texture.gpuSize=i.dataSize,s.texture.gpuFormat=i.gpuFormat,s.texture.isSRGB=i.isSRGB,s.texture}async loadKtxFromBuffer(e){await this.initializied;const t=new this.libktx.ktxTexture(e);this.transcode(t);const r=t.glUpload();if(r.texture==null){console.error("Could not load KTX data");return}return r.texture.levels=Math.log2(t.baseWidth),r.texture.width=t.baseWidth,r.texture.height=t.baseHeight,r.texture.gpuSize=t.dataSize,r.texture.gpuFormat=t.gpuFormat,r.texture.isSRGB=t.isSRGB,r.texture}async compress(e,t,r,i,s={}){const o=new this.libktx.ktxTexture(e,t,r,i,s.srgb);if(!s.hasOwnProperty("basisu_options")){const A=new this.libktx.ktxBasisParams;A.uastc=!1,A.noSSE=!0,A.verbose=!1,A.qualityLevel=100,A.compressionLevel=2,s.basisu_options=A}s.hasOwnProperty("compression_level")||(s.compression_level=18),s.hasOwnProperty("supercmp_scheme")||(s.supercmp_scheme=this.libktx.SupercmpScheme.NONE),console.log(s);const a=o.compressBasisU(s.basisu_options,s.supercmp_scheme,s.compression_level);return Uint8ClampedArray.from(a)}}class lhe{constructor(){this.ktxEncoder=null,this.libktx=null,this.init()}async init(){const t=document.createElement("canvas").getContext("webgl"),r=new ahe(t,window.LIBKTX);await r.init(t,window.LIBKTX),this.ktxEncoder=r,this.libktx=r.libktx}async compress(e,t,r,i,s={}){const o=await new this.libktx.ktxBasisParams,a=s;return o.uastc=a.uastc!==void 0?a.uastc:!1,o.noSSE=a.noSSE!==void 0?a.noSSE:!1,o.verbose=a.verbose!==void 0?a.verbose:!1,o.normalMap=a.normalMap!==void 0?a.normalMap:!1,o.compressionLevel=a.compressionLevel!==void 0?a.compressionLevel:1,o.qualityLevel=a.qualityLevel!==void 0?a.qualityLevel:60,o.maxEndpoints=a.ETC1SmaxEndpoints!==void 0?a.ETC1SmaxEndpoints:0,o.endpointRDOThreshold=a.ETC1SEndpointRdoThreshold!==void 0?a.ETC1SEndpointRdoThreshold:1.25,o.maxSelectors=a.ETC1SMaxSelectors!==void 0?a.ETC1SMaxSelectors:0,o.selectorRDOThreshold=a.ETC1SSelectorRdoThreshold!==void 0?a.ETC1SSelectorRdoThreshold:1.25,o.noEndpointRDO=a.ETC1SNoEndpointRdo!==void 0?a.ETC1SNoEndpointRdo:!1,o.noSelectorRDO=a.ETC1SNoSelectorRdo!==void 0?a.ETC1SNoSelectorRdo:!1,o.uastcFlags=this.ktxEncoder.stringToUastcFlags(a.uastcFlags),o.uastcRDO=o.uastcRDO!==void 0?o.uastcRDO:!1,o.uastcRDOQualityScalar=a.uastcRDOQualityScalar!==void 0?a.uastcRDOQualityScalar:1,o.uastcRDODictSize=a.uastcRDODictSize!==void 0?a.uastcRDOQualityScalar:4096,o.uastcRDOMaxSmoothBlockErrorScale=a.uastcRDOMaxSmoothBlockErrorScale!==void 0?a.uastcRDOMaxSmoothBlockErrorScale:10,o.uastcRDOMaxSmoothBlockStdDev=a.uastcRDOMaxSmoothBlockStdDev!==void 0?a.uastcRDOMaxSmoothBlockStdDev:18,o.uastcRDODontFavorSimplerModes=a.uastcRDODontFavorSimplerModes!==void 0?a.uastcRDODontFavorSimplerModes:!1,s.basisu_options=o,s.hasOwnProperty("supercmp_scheme")?s.supercmp_scheme=this.ktxEncoder.stringToSupercmpScheme(s.supercmp_scheme):s.supercmp_scheme=this.libktx.SupercmpScheme.NONE,await this.ktxEncoder.compress(e,t,r,i,s)}}var On;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(On||(On={}));const YC="blend_",a3="vrmColliderSphere";function Ahe(n){var e;return{title:n.name,version:"v0",author:((e=n.authors)==null?void 0:e.length)>0?n.authors.join(", "):"",reference:n.references!=null?n.references.join(", "):"",contactInformation:n.contactInformation!=null?n.contactInformation:"",otherPermissionUrl:n.otherPermissionUrl,allowedUserName:n.avatarPermission!=null?n.avatarPermission:"",violentUssageName:n.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:n.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:n.commercialUsage=="personalProfit"||n.commercialUsage=="corporation"?"Allow":"Disallow",licenseName:n.copyrightInformation,otherLicenseUrl:n.otherLicenseUrl,metaVersion:"0"}}function che(n){const e=[];for(const t in n.humanBones)e.push({bone:t,node:n.humanBones[t].node});return{humanBones:e}}function uhe(n){switch(n){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return n}}function fhe(n){if(n.includes("Thumb")){if(n.includes("Metacarpal"))return n.replace("Metacarpal","Proximal");if(n.includes("Proximal"))return n.replace("Proximal","Intermediate")}return n}class hhe{async parse(e,t,r,i,s,o,a){var Be;const l=Ahe(e.meta),A=che(e.humanoid),c=e.materials,u=[],f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(A)if(l){if(!c)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const h=c.filter((k,W,re)=>re.findIndex(he=>he.name===k.name.replace(" (Outline)",""))===W).map(k=>k),p=h.map(k=>k.name),d=r?{name:"icon",imageBitmap:r.image}:null,g=h.filter(k=>k.map).map(k=>{if(!k.map)throw new Error(k.name+" map is null");return{name:k.name,imageBitmap:k.map.image}}),m=h.filter(k=>k.userData.shadeTexture).map(k=>{if(!k.userData.shadeTexture)throw new Error(k.userData.shadeTexture+" map is null");return{name:k.name+"_shade",imageBitmap:k.userData.shadeTexture.image}}),y=h.filter(k=>k.roughnessMap).map(k=>k.roughnessMap?{name:k.name+"_orm",imageBitmap:k.roughnessMap.image}:null),w=h.filter(k=>k.roughnessMap).map(k=>k.normalMap?{name:k.name+"_normal",imageBitmap:k.normalMap.image}:null),x=[...g,...m,...y,...w].filter(k=>k!==null),_=yhe(x,d,s?"image/ktx2":"image/png"),C=whe(_),T=xhe(_,s),b=vhe(h,x),M=t.children.filter(k=>k.children.length>0&&k.children[0].type===ci.Bone)[0],P=s8(M).filter(k=>k.name!==a3),Y=P.map(k=>k.name),H=P.map(k=>{const W=k.children.filter(re=>re.name!==a3).map(re=>Y.indexOf(re.name));return{name:k.name,rotation:[k.quaternion.x,k.quaternion.y,k.quaternion.z,k.quaternion.w],scale:[k.scale.x,k.scale.y,k.scale.z],translation:[k.position.x,k.position.y,k.position.z],children:W.length>0?W:void 0}}),I=[],v=t.children.filter(k=>k.type===ci.Group||k.type===ci.SkinnedMesh),E=[];v.forEach((k,W)=>{const re=k.type===ci.Group?k.children[0]:k,he=re.geometry.attributes,me=new jl(he.position,On.FLOAT,$t.POSITION,zo.VEC3,re.name,void 0);E.push(me);const G=E.length-1,R=he.normal.array,S=new Float32Array(R.length);for(let ie=0;ie<R.length;ie+=3){const Ie=R[ie],Te=R[ie+1],Le=R[ie+2],He=Math.sqrt(Ie*Ie+Te*Te+Le*Le);S[ie]=Ie/He,S[ie+1]=Te/He,S[ie+2]=Le/He}const V=new jl(new lt(S,3),On.FLOAT,$t.NORMAL,zo.VEC3,re.name,void 0);E.push(V),E.push(new jl(he.uv,On.FLOAT,$t.UV,zo.VEC2,re.name,void 0)),E.push(new jl(he.skinWeight,On.FLOAT,$t.SKIN_WEIGHT,zo.VEC4,re.name,void 0)),E.push(new jl(he.skinIndex,On.UNSIGNED_SHORT,$t.SKIN_INDEX,zo.VEC4,re.name,void 0)),(k.type===ci.Group?k.children.map(ie=>ie):[k]).forEach(ie=>{if(!ie.geometry.index)throw new Error(ie.name+" geometry.index is null");E.push(new jl(ie.geometry.index,On.UNSIGNED_INT,$t.INDEX,zo.SCALAR,re.name,ie.name))}),re.morphTargetDictionary||(re.morphTargetDictionary={},re.morphTargetInfluences=[],re.geometry.morphAttributes={},re.updateMorphTargets()),re.geometry.userData.targetNames=[];const le=(ie,Ie,Te,Le)=>{const He=[],De=[];for(let fe=0;fe<ie.length;fe+=3){const Me=ie[fe],Se=ie[fe+1],Fe=ie[fe+2];(Me!==0||Se!==0||Fe!==0)&&(He.push(fe/3),De.push(Me,Se,Fe))}if(He.length>0){const fe=[...He].sort((Fe,Ve)=>Fe-Ve),Me=[];for(let Fe=0;Fe<fe.length;Fe++){const Ve=fe[Fe],Je=He.indexOf(Ve);Me.push(De[Je*3],De[Je*3+1],De[Je*3+2])}const Se={targetMeshDataIndex:G,count:fe.length,indices:new Uint32Array(fe),values:new Float32Array(Me)};E.push(new jl(Le,On.FLOAT,Te,zo.VEC3,re.name,YC+Ie,Se))}};for(const ie in re.morphTargetDictionary){re.geometry.userData.targetNames.push(ie);const Ie=re.morphTargetDictionary[ie],Te=re.geometry.morphAttributes;le(Te.position[Ie].array,ie,$t.BLEND_POSITION,he.position),Te.normal&&le(Te.normal[Ie].array,ie,$t.BLEND_NORMAL,he.normal)}}),console.warn("taking only mesh 0 for morph targets now");for(const k in e.expressionManager.expressionMap){const W=e.expressionManager.expressionMap[k],re=W._binds.map(he=>({mesh:0,index:he.index,weight:he.weight*100}));if(re.length>0){let he=!1;for(const me in Ur)if(k===Ur[me]&&k!=="surprised"){u.push({name:k,presetName:uhe(k),binds:re,isBinary:W.isBinary}),he=!0;break}he===!1&&u.push({name:k,presetName:"unknown",binds:re,isBinary:W.isBinary})}}v.forEach(k=>{const W=k.type===ci.Group?k.children[0]:k,re=new Float32Array(W.skeleton.boneInverses.map(he=>he.elements).flat());E.push(new jl(new lt(re,16),On.FLOAT,$t.BIND_MATRIX,zo.MAT4,W.name,W.name))}),I.push(...E.map(k=>({componentType:k.valueType,count:k.attribute.count,max:k.max,min:k.min,normalized:!1,type:k.accessorsType})));const F=mhe(v,E,p);v.forEach((k,W)=>{H.push({mesh:W,name:k.name,rotation:[k.quaternion.x,k.quaternion.y,k.quaternion.z,k.quaternion.w],scale:[k.scale.x,k.scale.y,k.scale.z],skin:W,translation:[k.position.x,k.position.y,k.position.z]})});const D=ghe(v,E,Y),O={humanBones:[]};A.humanBones.forEach(k=>{Y.indexOf(k.node.name)!=-1&&O.humanBones.push({bone:fhe(k.bone),node:Y.indexOf(k.node.name),useDefaultValues:!0})});const z={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},K={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},Q=[];h.forEach(k=>{k.type=="ShaderMaterial"?Q.push(Object.assign({},z)):Q.push(Object.assign({},K))});const B=l;i.forEach(k=>{for(let W=0;W<P.length&&P[W].name!==k.name;W++);});const j=[],ee=((Be=v.find(k=>k.isSkinnedMesh))==null?void 0:Be.skeleton)||null;for(let k=0;k<ee.bones.length;k++){const W=ee.bones[k];if(W.userData.VRMcolliders){const re={node:Y.indexOf(W.name),colliders:[],name:W.name};W.userData.VRMcolliders.forEach(he=>{const me=he.sphere;re.colliders.push({radius:me.radius*o,offset:{x:me.offset[0]*o,y:me.offset[1]*o,z:me.offset[2]*o}})}),j.push(re)}}console.log("COLLIDER GROUPS",j);const U=k=>{for(let W=0;W<P.length;W++)if(P[W].name===k)return W;return-1},X=[];i.forEach(k=>{var G;const W=U(k.name);if(W===-1){console.warn("Spring bone "+k.name+" was removed during cleanup process. Skipping.");return}const re=[];k.colliderGroups.forEach(R=>{const S=R.colliders[0];if(S!=null){const V=S.parent,te=j.findIndex(le=>le.name===V.name);te!=-1&&(re.includes(te)||re.push(te))}});let he=U((G=k.center)==null?void 0:G.name);he==-1&&console.warn("no center bone for spring bone "+k.name);const me=k.settings;X.push({bones:[W],center:he,colliderGroups:re,dragForce:me.dragForce,gravityDir:{x:me.gravityDir.x,y:me.gravityDir.y,z:me.gravityDir.z},gravityPower:me.gravityPower,hitRadius:me.hitRadius,stiffiness:me.stiffness})});const ae={boneGroups:X,colliderGroups:j};console.log(ae),B.texture=d?_.length-1:void 0;const se=await Promise.all(x.map(async k=>({buffer:s?await l3(k.imageBitmap):A3(k.imageBitmap),type:$t.IMAGE})));E.forEach((k,W)=>{k.buffer?se.push({buffer:k.buffer,typeString:"",type:k.type}):k.sparse&&(se.push({buffer:k.sparse.indices,typeString:"indices",type:k.type,count:k.sparse.count}),se.push({buffer:k.sparse.values,typeString:"values",type:k.type})),se.length-1}),d&&se.push({buffer:s?await l3(d.imageBitmap):A3(d.imageBitmap),type:$t.IMAGE});let de=0,oe=0,pe=0,_e=0;const xe=se.map(k=>{const W={buffer:0,byteLength:k.buffer.byteLength,byteOffset:de,target:k.type===$t.IMAGE||k.type===$t.BIND_MATRIX||k.typeString==="indices"||k.typeString==="values"?void 0:k.type===$t.INDEX?On.ELEMENT_ARRAY_BUFFER:On.ARRAY_BUFFER};return de+=k.buffer.byteLength,k.type===$t.IMAGE?(_[oe++].bufferView=_e,_e++):E[pe].sparse?(I[pe].sparse==null&&(I[pe].sparse={}),k.typeString==="indices"&&(I[pe].sparse.count=k.count,I[pe].sparse[k.typeString]={bufferView:_e,byteOffset:0,componentType:On.UNSIGNED_INT}),k.typeString==="values"&&(I[pe].sparse[k.typeString]={bufferView:_e,byteOffset:0}),k.typeString==="values"&&pe++,_e++):(E[pe].bufferIndex=_e,I[pe].bufferView=_e,pe++,_e++),W}),L=_he(t,H);dhe(B);const ue=["KHR_materials_unlit","KHR_texture_transform","VRM"];s&&ue.push("KHR_texture_basisu");const Ae={accessors:I,asset:f,buffers:[{byteLength:de}],bufferViews:xe,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:u},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new Z,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:Q,humanoid:O,meta:B,secondaryAnimation:ae,specVersion:"0.0"}},extensionsUsed:ue,images:_,materials:b,meshes:F,nodes:H,samplers:C,scenes:L,skins:D,textures:T};console.log("output",Ae);const q=new c3(XC(JSON.stringify(Ae,void 0,2)),"JSON"),J=new c3(Op(se.map(k=>k.buffer)),"BIN\0"),ce=Op([q.buffer,J.buffer]),be=Op([XC("glTF"),$C(2,4),$C(ce.byteLength+12,4)]);a(Op([be,ce]))}}function dhe(n){n.title=n.title||"Character",n.version=n.version||"1",n.author=n.author||"Anon",n.contactInformation=n.contactInformation||"",n.reference=n.reference||"",n.allowedUserName=n.allowedUserName||"Everyone",n.violentUssageName=n.violentUssageName||"Disallow",n.sexualUssageName=n.sexualUssageName||"Disallow",n.commercialUssageName=n.commercialUssageName||"Disallow",n.otherPermissionUrl=n.otherPermissionUrl||"",n.licenseName=n.licenseName||"Redistribution_Prohibited",n.otherLicenseUrl=n.otherLicenseUrl||""}function s8(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>s8(e)).flat())}const phe=new lhe;async function l3(n){const e=await createImageBitmap(n),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0);const i=r.getImageData(0,0,t.width,t.height),s=new Uint8Array(i.data.buffer);return await phe.compress(s,t.width,t.height,4,{normalMap:!1,uastc:!1,qualityLevel:50,compressionLevel:2,uastcFlags:"DEFAULT",compressionUASTC_Rdo_Level:18,uastcRDO:!1,uastcRDOQualityScalar:1,uastcRDODictSize:4096,uastcRDOMaxSmoothBlockErrorScale:10,uastcRDOMaxSmoothBlockStdDev:18,uastcRDODontFavorSimplerModes:!1,ETC1SQualityLevel:128,ETC1SmaxEndpoints:0,ETC1SEndpointRdoThreshold:1.25,ETC1SMaxSelectors:0,ETC1SSelectorRdoThreshold:1.25,ETC1SNoEndpointRdo:!1,ETC1SNoSelectorRdo:!1,supercmp_scheme:"Zstd"})}function A3(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=(4-r.length%4)%4,s=new ArrayBuffer(r.length+i),o=new DataView(s);for(let a=0;a<r.length;a++)o.setUint8(a,r.charCodeAt(a));for(let a=r.length;a<r.length+i;a++)o.setUint8(a,0);return s}function $C(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function XC(n){return new TextEncoder().encode(n).buffer}function Op(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function lB(n,e){const t=e===On.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===On.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===On.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}class c3{constructor(e,t){this.data=e,this.type=t;const r=this.padBuffer(this.data,t==="JSON"?32:0);this.buffer=Op([$C(r.byteLength,4),XC(this.type),r])}padBuffer(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(e)),new Uint8Array(i).fill(t,e.byteLength),i}}const u3=n=>{const e=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY];for(let r=0;r<n.length;r+=3)e[0]=Math.max(e[0],n[r]),e[1]=Math.max(e[1],n[r+1]),e[2]=Math.max(e[2],n[r+2]),t[0]=Math.min(t[0],n[r]),t[1]=Math.min(t[1],n[r+1]),t[2]=Math.min(t[2],n[r+2]);return{max:e,min:t}};class jl{constructor(e,t,r,i,s,o,a){if(this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,a){const{indices:l,values:A,count:c,targetMeshDataIndex:u}=a,f=new lt(l,1),h=new lt(A,e.itemSize);if(this.targetMeshDataIndex=u,this.sparse={targetMeshDataIndex:u,count:c,indices:lB(f,On.UNSIGNED_INT),values:lB(h,On.FLOAT)},r===$t.POSITION||r===$t.BLEND_POSITION){const{min:p,max:d}=u3(A);this.max=d,this.min=p}}else if(this.buffer=lB(this.attribute,this.valueType),r===$t.POSITION||r===$t.BLEND_POSITION){const{min:l,max:A}=u3(this.attribute.array);this.max=A,this.min=l}}}var $f;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})($f||($f={}));var zo;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(zo||(zo={}));var $t;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})($t||($t={}));var ci;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(ci||(ci={}));const mhe=(n,e,t)=>n.map(r=>{const i=r.type===ci.Group?r.children[0]:r,s=r.type===ci.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf($t.SKIN_INDEX),NORMAL:a.indexOf($t.NORMAL),POSITION:a.indexOf($t.POSITION),TEXCOORD_0:a.indexOf($t.UV),WEIGHTS_0:a.indexOf($t.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===$t.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>{const c=e.map(h=>h.type===$t.BLEND_NORMAL&&h.meshName===i.name?h.name:null).indexOf(YC+A),u=e.map(h=>h.type===$t.BLEND_POSITION&&h.meshName===i.name?h.name:null).indexOf(YC+A),f={};return u!==-1&&(f.POSITION=u),c!==-1&&(f.NORMAL=c),f}):void 0}})}}),ghe=(n,e,t)=>n.map(r=>{const i=r.type===ci.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===$t.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)).filter(s=>s!==-1),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),vhe=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(p=>p.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const h=t;r=h.color?[h.color.r,h.color.g,h.color.b,1]:void 0}let s=-1;t.map?s=e.map(h=>h.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(h=>h.name).indexOf(t.uniforms.map.name));let o=-1;t.roughnessMap&&(o=e.map(h=>h.name).indexOf(t.name+"_orm"));let a=-1;t.normalMap&&(a=e.map(h=>h.name).indexOf(t.name+"_normal"));const l=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,A={baseColorFactor:r,baseColorTexture:l},c=o>=0?{index:o,texCoord:0}:void 0,u=a>=0?{index:a,texCoord:0}:void 0;if(c)A.metallicRoughnessTexture=c;else{const h=(()=>{switch(t.type){case $f.MeshStandardMaterial:return t.metalness;case $f.MeshBasicMaterial:return 0;default:return 0}})(),p=(()=>{switch(t.type){case $f.MeshStandardMaterial:return t.roughness;case $f.MeshBasicMaterial:return .9;default:return .9}})();A.metallicFactor=h,A.roughnessFactor=p}const f={alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{}}:void 0,name:t.name,pbrMetallicRoughness:A};return u&&(f.normalTexture=u),f}),yhe=(n,e,t)=>(e?n.concat(e):n).filter(r=>r&&r.imageBitmap).map(r=>({bufferView:-1,mimeType:t,name:r.name})),whe=n=>n.map(()=>({magFilter:On.LINEAR,minFilter:On.LINEAR,wrapS:On.REPEAT,wrapT:On.REPEAT})),xhe=(n,e)=>e?n.map((t,r)=>({sampler:0,extensions:{KHR_texture_basisu:{source:r}}})):n.map((t,r)=>({sampler:0,source:r})),_he=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===ci.Object3D||r.type===ci.SkinnedMesh||r.type===ci.Group||r.type===ci.Bone).map(r=>t.indexOf(r.name))}]};function bhe(n,e,t){var a,l;const r=[],i=[];for(const A in n)((l=(a=n[A])==null?void 0:a.vrm)==null?void 0:l.meta)!=null&&(n[A].vrm.meta.authors!=null?i.push(n[A].vrm.meta):r.push(n[A].vrm.meta));r.length+i.length==1&&(r.length==1?r[0].title!=null&&(t=r[0].title):i[0].name!=null&&(t=i[0].name)),e!=null&&(e.authors!=null?i.push(e):r.push(e));const s=Ehe(r),o=Bhe(s,i);return o.licenseUrl="https://vrm.dev/licenses/1.0/",o.name=t,o}function Bhe(n,e){let{authors:t=[],otherLicenseUrl:r=[],contactInformation:i=[],references:s=[],allowExcessivelyViolentUsage:o=void 0,allowExcessivelySexualUsage:a=void 0,commercialUsage:l=void 0,copyrightInformation:A="",avatarPermission:c=void 0,otherPermissionUrl:u=[]}=n,f,h,p,d="unnecessary",g,m=[];e.forEach(b=>{t=t.concat(ut(b.authors)),r=r.concat(ut(b.otherLicenseUrl)),i=i.concat(ut(b.contactInformation)),s=s.concat(ut(b.references)),u=u.concat(ut(b.otherPermissionUrl)),b.allowExcessivelyViolentUsage===!1&&(o=!1),b.allowExcessivelySexualUsage===!1&&(a=!1),l=qa(She,l,b.commercialUsage),A=qa(o8,A,b.copyrightInformation),c=qa(The,c,b.avatarPermission),b.allowAntisocialOrHateUsage===!1&&(f=f=!1),b.allowPoliticalOrReligiousUsage===!1&&(h=h=!1),b.allowRedistribution===!1&&(p=p=!1),b.creditNotation==="required"&&(d="required"),m=m.concat(ut(b.thirdPartyLicenses)),g=qa(Mhe,g,b.modification)});const y=[...new Set(t)].filter(b=>b!=""&&b!=null&&b!="undefined"),w=[...new Set(r)].filter(b=>b!=""&&b!=null&&b!="undefined"),x=[...new Set(i)].filter(b=>b!=""&&b!=null&&b!="undefined"),_=[...new Set(s)].filter(b=>b!=""&&b!=null&&b!="undefined"),C=[...new Set(u)].filter(b=>b!=""&&b!=null&&b!="undefined"),T=[...new Set(m)].filter(b=>b!=""&&b!=null&&b!="undefined");return{authors:y,otherLicenseUrl:w.length==0?"":w.join(", "),contactInformation:x.length==0?"":x.join(", "),references:_,otherPermissionUrl:C.length==0?"":C.join(", "),thirdPartyLicenses:T.length==0?"":T.join(", "),allowExcessivelyViolentUsage:o,allowExcessivelySexualUsage:a,commercialUsage:l,copyrightInformation:A,avatarPermission:c,allowAntisocialOrHateUsage:f,allowPoliticalOrReligiousUsage:h,allowRedistribution:p,creditNotation:d,modification:g}}function Ehe(n){let e=[],t=[],r=[],i=[],s=[],o,a,l,A,c;n.forEach(g=>{e=e.concat(ut(g.author)),t=t.concat(ut(g.contactInformation)),r=r.concat(ut(g.reference)),i=i.concat(ut(g.otherPermissionUrl)),s=s.concat(ut(g.otherLicenseUrl)),o=qa(Ihe,o,g.allowedUsername),a=qa(AB,a,g.violentUssageName),l=qa(AB,l,g.sexualUssageName),A=qa(AB,A,g.commercialUssageName),c=qa(o8,c,g.licenseName)});const u=[...new Set(e)].filter(g=>g!=""&&g!=null&&g!="undefined"),f=[...new Set(t)].filter(g=>g!=""&&g!=null&&g!="undefined"),h=[...new Set(r)].filter(g=>g!=""&&g!=null&&g!="undefined"),p=[...new Set(i)].filter(g=>g!=""&&g!=null&&g!="undefined"),d=[...new Set(s)].filter(g=>g!=""&&g!=null&&g!="undefined");return{authors:u,otherLicenseUrl:d,contactInformation:f,references:h,allowExcessivelyViolentUsage:a==="Allow",allowExcessivelySexualUsage:l==="Allow",commercialUsage:A==="Allow"?"personalProfit":"personalNonProfit",copyrightInformation:c,avatarPermission:Che(o),otherPermissionUrl:p}}function Che(n){if(n=="OnlyAuthor")return"onlyAuthor";if(n=="ExplicitlyLicensedPerson")return"onlySeparatelyLicensedPerson";if(n=="Everyone")return"everyone"}const Mhe={prohibited:0,allowModification:1,allowModificationRedistribution:2},She={personalNonProfit:0,personalProfit:1,corporation:2},The={onlyAuthor:0,onlySeparatelyLicensedPerson:1,everyone:2},Ihe={OnlyAuthor:0,ExplicitlyLicensedPerson:1,Everyone:2},AB={Disallow:0,Allow:1},o8={Redistribution_Prohibited:0,Other:1,CC_BY_NC_ND:2,CC_BY_ND:3,CC_BY_NC_SA:4,CC_BY_SA:5,CC_BY_NC:6,CC_BY:7,CC0:8};function qa(n,e,t){return e===void 0?t:t==null||!(t in n)||n[e]<n[t]?e:t}function a8(n){const e=n.clone(),t=[];return n.traverse(r=>{r.userData.origIndexBuffer&&t.push(r.userData.origIndexBuffer)}),e.traverse(r=>{r.userData.origIndexBuffer&&(r.userData.origIndexBuffer=t.shift())}),e}function Rhe(n){const e=a8(n);let t;const r=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=K6(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,r.push(s),Array.isArray(s.material)){const o=s.material;s.material=new Qh,s.material.map=o[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new Pr;return r.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}async function Fhe(n,e,t){const r=await CT(n,t),i=await l8(r,e,t);return new Blob([i],{type:"model/gltf-binary"})}function Uhe(n,e,t,r){return new Promise(async(i,s)=>{const o=`${t&&t!==""?t:"AvatarCreatorModel"}`;Lhe(n,e,r).then(a=>{c8(a,`${o}.vrm`),i()})})}async function Lhe(n,e,t){const r=await CT(n,e,t);return l8(r,e,t)}function CT(n,e,t){const r=a8(n);t.mergeAppliedMorphs=!0;const{createTextureAtlas:i=!0}=t;return i?wfe(r,e,t):(console.log("no atlas"),gfe(r,e,t))}async function Phe(n,e="",t){const r=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=t,s=i?await CT(n,t):Rhe(n);Dhe(s).then(o=>{if(o instanceof ArrayBuffer)c8(o,`${r}.glb`);else{const a=JSON.stringify(o,null,2);Hhe(a,`${r}.gltf`)}})}function Dhe(n){return new Promise(e=>new AT().parse(n,r=>{e(r)},r=>{console.error("Error parsing",r)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function Ohe(n){var r,i;const e=[];for(const s in n)if(((i=(r=n[s])==null?void 0:r.vrm)==null?void 0:i.springBoneManager)!=null){const o=n[s].vrm.springBoneManager.joints;for(const a of o)e.some(A=>A.name===a.bone.name)||e.push({name:a.bone.name,settings:a.settings,bone:a.bone,colliderGroups:a.colliderGroups,center:a.center})}const t=[];return e.forEach(s=>{for(const o in Km)if(s.bone.parent.name==Km[o]){t.push(s);break}}),t}function Nhe(n){const e={};return n.skeleton.bones.map(t=>{for(const r in Km)if(Km[r]===t.name){e[t.name]={node:t};break}}),e}function khe(n,e,t){const r=Gh(n,"SkinnedMesh");return{humanBones:Nhe(r[0]),materials:n.userData.atlasMaterial,meta:Qhe(e),...t.mergeAppliedMorphs?{expressionManager:Vhe(n)}:{}}}function Qhe(n){return n=n||{},{...{authors:["CharacterStudio"],metaVersion:"1",version:"v1",name:"CharacterCreator",licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://m3org.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"},...n}}function l8(n,e,t){const{screenshot:r=null,isVrm0:i=!1,vrmMeta:s=null,scale:o=1,vrmName:a="CharacterCreator"}=t,l=bhe(e,s,a);return new Promise(async A=>{const c=i?new hhe:new uue,u={...Ghe(e),...khe(n,l,t)};let f;n.traverse(d=>{d.isSkinnedMesh&&(f=d)}),(()=>{for(let d=0;d<f.skeleton.bones.length;d++){const g=f.skeleton.bones[d];g.position.x*=-1,g.position.z*=-1}f.skeleton.bones.forEach(d=>{d.updateMatrix(),d.updateMatrixWorld()}),f.skeleton.calculateInverses(),f.skeleton.computeBoneTexture(),f.skeleton.update()})(),f.skeleton.bones.filter(d=>d.name==="head")[0];const p=Ohe(e);c.parse(u,n,r,p,t.ktxCompression,o,d=>{A(d)})})}function A8(n,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(n),t.download=e,t.click()}function Hhe(n,e){A8(new Blob([n],{type:"text/plain"}),e)}function c8(n,e){A8(zhe(n),e)}function zhe(n){return new Blob([n],{type:"application/octet-stream"})}function Ghe(n){for(const e in n)if(n[e].vrm)return n[e].vrm}function Vhe(n){const e=new Rw;let t=n.userData.expressionManagerToClone;if(!t){t=new Rw;for(const r of Object.values(Ur)){const i=new Iw(r);t.registerExpression(i)}}e.copy(t),n.userData.expressionManagerToClone=null;for(const r of n.children){if(!r.isMesh&&!r.isSkinnedMesh||!r.morphTargetDictionary)continue;const i=r.userData.bindMorphs;if(!i||!Rfe(r,i.old))continue;const o=(A,c)=>{var u;return((u=A.find(f=>f.index==c))==null?void 0:u.weight)||0},a=Object.entries(Ur).flat(),l=Object.keys(i.old).filter(A=>a.includes(A));for(const A of Object.keys(t.expressionMap)){const c=t.expressionMap[A];if(!c)continue;const u=c._binds;if(!u||u.length==0){e.unregisterExpression(c);continue}for(const f of l){const h=i.new[f]||i.new[f.toLowerCase()],p=i.old[f]||i.old[f.toLowerCase()];if(h){const d=[];n.traverse(y=>{!y.isMesh&&!y.isSkinnedMesh||h.primitives.includes(y.id)&&d.push(y)}),e.unregisterExpression(c),c._binds=[];const g=o(u,p.index),m=new Iw(c.expressionName);m.copy(c),console.log("adding bind",c.expressionName),m.addBind(new RC({index:h.index,weight:g,primitives:d})),e.registerExpression(m)}else e.unregisterExpression(c)}}}return e}const jhe=n=>{var e,t;(e=n.parser.json.extensions)!=null&&e.VRM?Whe(n):(t=n.parser.json.extensions)!=null&&t.VRMC_vrm?Khe(n):console.warn("No valid vrm file was provided")},Whe=n=>{var a,l,A;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=(a=e.extensions)==null?void 0:a.VRM)==null?void 0:l.secondaryAnimation)==null?void 0:A.colliderGroups,s=[],o=r.map(c=>u8(c.name,s));i!=null&&i.forEach(c=>{const u=o[c.node],f=e8(t,u);if(f!=null){const h=c.colliders;f.userData.VRMcolliders=h.map(p=>({sphere:{radius:p.radius,offset:[p.offset.x,p.offset.y,p.offset.z]}}))}f.userData.VRMcollidersID=J6()})},Khe=n=>{var l,A,c,u;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=e.extensions)==null?void 0:l.VRMC_springBone)==null?void 0:A.colliderGroups,s=(u=(c=e.extensions)==null?void 0:c.VRMC_springBone)==null?void 0:u.colliders,o=[],a=r.map(f=>u8(f.name,o));i!=null&&i.forEach(f=>{const h=ut(f.colliders);let p=-1,d=null;h.forEach(g=>{if(p!=s[g].node){p=s[g].node;const m=a[p];d=e8(t,m),d.userData.VRMcolliders=[]}if(d!=null){const m=s[g].shape;for(const y in m){const w=m[y];w!=null&&w.offset&&(w.offset[0]=-w.offset[0])}d.userData.VRMcollidersID=J6(),d.userData.VRMcolliders.push(m)}else console.error("no node with name "+a[p]+" was found")})})},u8=(n,e)=>{const t=_t.sanitizeNodeName(n||"");return t in e?t+"_"+ ++e[t]:(e[t]=0,t)},Nw=[0,400,560,2400,4800],kw=[0,500,700,3e3,6e3],ZC=[],Va=[],MT=1024,f8=44100;for(let n=0;n<Nw.length;n++)Va[n]=Math.round(2*MT/f8*Nw[n]);for(let n=0;n<kw.length;n++)ZC[n]=Math.round(2*MT/f8*kw[n]);class Qw{constructor(e){this.vrm=e;const t=(r,i)=>{requestAnimationFrame(t),this.update(r,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=Qw.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=MT,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=Qw.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,t,r;return(e=this.meter)==null||e.shutdown(),this.meter=null,(t=this.mediaStreamSource)==null||t.disconnect(),((r=this.audioContext)==null?void 0:r.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue(Ur.Oh,0),this.vrm.expressionManager.setValue(Ur.Ah,0),this.vrm.expressionManager.setValue(Ur.Ee,0);else{const{ah:r,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(Ur.Oh,i),this.vrm.expressionManager.setValue(Ur.Ah,r),this.vrm.expressionManager.setValue(Ur.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(A){const u=new Float32Array(A.length);for(let f=0;f<A.length;f++)u[f]=.5+(A[f]+20)/140;return u}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const r=e(t),i=new Float32Array(Nw.length),s=new Float32Array(kw.length);for(let A=0;A<Nw.length-1;A++){for(let c=Va[A];c<=Va[A+1];c++)r[c]>0&&(i[A]+=r[c]);i[A]/=Va[A+1]-Va[A]}for(let A=0;A<kw.length-1;A++){for(let c=Va[A];c<=Va[A+1];c++)r[c]>0&&(s[A]+=r[c]);i[A]/=Va[A+1]-Va[A],s[A]=s[A]/(ZC[A+1]-ZC[A])}const o=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),a=3*Math.max(i[3],s[3]),l=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:o,ee:l,ah:a}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0),s=i.length;let o=0,a;for(let A=0;A<s;A++)a=i[A],Math.abs(a)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),o+=a*a;const l=Math.sqrt(o/s);t.volume=Math.max(l,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const cB=new Z;class Yhe{constructor(e,t,r){this.bonesInfo=[],this.curMousePos=new Ye,this.hotzoneSection=s(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=r,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",o=>{this.curMousePos={x:o.clientX,y:o.clientY}});const i=document.getElementById(t);i&&(i.addEventListener("mouseleave",()=>{this.onCanvas=!1}),i.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=s()});function s(){const o=window.innerWidth*e/100,a=(window.innerWidth-o)/2;return{xStart:a,xEnd:window.innerWidth-a,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){console.log("is activating"),this.userActivated=e}setCamera(e){this.camera=e}addVRM(e){const t=e.data.isVRM0||!1,r=e.humanoid.humanBones;t||(r.neck.node.userData.inverseLookAt=!0,r.spine.node.userData.inverseLookAt=!0,r.leftEye&&(r.leftEye.node.userData.inverseLookAt=!0),r.rightEye&&(r.rightEye.node.userData.inverseLookAt=!0));const i={vrm:e,neckBone:r.neck.node,spineBone:r.spine.node,leftEyeBone:r.leftEye?r.leftEye.node:null,rightEyeBone:r.rightEye?r.rightEye.node:null};this.bonesInfo.push(i)}removeVRM(e){const t=this.bonesInfo.find(r=>r.vrm===e);if(t){const r=this.bonesInfo.indexOf(t);this.bonesInfo.splice(r,1)}}_getMouseDegrees(e,t,r){let i=0,s=0,o,a,l,A,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(o=c.x/2-e,a=o/(c.x/2)*100,i=r.maxx*a/100*-1),e>=c.x/2&&(o=e-c.x/2,a=o/(c.x/2)*100,i=r.minx*a/100),t<=c.y/2&&(l=c.y/2-t,A=l/(c.y/2)*100,s=r.maxy*.5*A/100*-1),t>=c.y/2&&(l=t-c.y/2,A=l/(c.y/2)*100,s=r.miny*A/100),{x:i,y:s}}lerp(e,t,r){return(1-r)*e+r*t}_moveJoint(e,t){const r=e.userData.inverseLookAt===!0?1:-1;if(Object.keys(e).length!==0){const i=(this.camera.position.y-1.8)*window.innerHeight/2;let s=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-i,t);const o=.8;e.rotation.y=this.lerp(Lt.degToRad(s.x),e.rotation.y,o),e.rotation.x=this.lerp(Lt.degToRad(s.y*r),e.rotation.x,o)}}update(){cB.set(0,0,1),cB.applyQuaternion(this.camera.quaternion);const e=cB.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&this.bonesInfo.forEach(t=>{this._moveJoint(t.neckBone,this.maxLookPercent.neck),this._moveJoint(t.spineBone,this.maxLookPercent.spine),this._moveJoint(t.leftEyeBone,this.maxLookPercent.left),this._moveJoint(t.rightEyeBone,this.maxLookPercent.right)})}}class uB{constructor(e){const{assetsLocation:t,traitsDirectory:r,thumbnailsDirectory:i,traitIconsDirectorySvg:s,animationPath:o,exportScale:a,displayScale:l,initialTraits:A,requiredTraits:c,randomTraits:u,colliderTraits:f,lipSyncTraits:h,blinkerTraits:p,typeRestrictions:d,defaultCullingLayer:g,defaultCullingDistance:m,offset:y,vrmMeta:w,traits:x,textureCollections:_,colorCollections:C,canDownload:T=!0,downloadOptions:b={}}=e;this.assetsLocation=t,this.traitsDirectory=r,this.thumbnailsDirectory=i,this.traitIconsDirectorySvg=s,this.displayScale=l||a||1,this.animationPath=ut(o),this.requiredTraits=ut(c),this.randomTraits=ut(u),this.initialTraits=A||[...new Set(this.requiredTraits.concat(this.randomTraits))],this.colliderTraits=ut(f),this.lipSyncTraits=ut(h),this.blinkerTraits=ut(p),this.typeRestrictions=d,this.defaultCullingLayer=g,this.defaultCullingDistance=m,this.offset=y,this.canDownload=T,this.downloadOptions=b;const M=()=>{const H=[];for(const I in x)H.push(x[I].trait);return H};this.allTraits=M(),M(),(()=>{if(this.typeRestrictions)for(const H in this.typeRestrictions)ut(this.typeRestrictions[H]).forEach(v=>{this.typeRestrictions[v]==null&&(this.typeRestrictions[v]=[]),this.typeRestrictions[v].indexOf(H)==-1&&this.typeRestrictions[v].push(H)})})(),(()=>{b.vrmMeta=b.vrmMeta||w,b.scale=b.scale||a||1,b.mToonAtlasSize=b.mToonAtlasSize||2048,b.mToonAtlasSizeTransp=b.mToonAtlasSizeTransp||1024,b.stdAtlasSize=b.stdAtlasSize||2048,b.stdAtlasSizeTransp=b.stdAtlasSizeTransp||1024,b.exportStdAtlas=b.exportStdAtlas||!1,b.exportMtoonAtlas=b.exportMtoonAtlas||!0,b.screenshotFaceDistance=b.screenshotFaceDistance||1,b.screenshotFaceOffset=b.screenshotFaceOffset||[0,0,0],b.screenshotResolution=b.screenshotResolution||[512,512],b.screenshotBackground=b.screenshotBackground||[.1,.1,.1],b.screenshotFOV=b.screenshotFOV||75,!b.exportStdAtlas&&!b.exportMtoonAtlas&&(b.exportMtoonAtlas=!0)})(),this.textureTraits=[],this.textureTraitsMap=null,this.createTextureTraits(_),this.colorTraits=[],this.colorTraitsMap=null,this.createColorTraits(C),this.modelTraits=[],this.modelTraitsMap=null,this.createModelTraits(x)}appendManifestData(e,t){e.textureTraits.forEach(r=>{const i=this.getTextureGroup(r.trait);i!=null?i.appendCollection(r,t):(this.textureTraits.push(r),this.textureTraitsMap.set(r.trait,r))}),e.colorTraits.forEach(r=>{const i=this.getColorGroup(r.trait);i!=null?i.appendCollection(r,t):(this.colorTraits.push(r),this.colorTraitsMap.set(r.trait,r))}),e.modelTraits.forEach(r=>{const i=this.getModelGroup(r.trait);i!=null?i.appendCollection(r,t):(this.modelTraits.push(r),this.modelTraitsMap.set(r.trait,r))}),console.log(e)}getExportOptions(){return this.downloadOptions}getGroupModelTraits(){return this.modelTraits}getInitialTraits(){return this.getRandomTraits(this.initialTraits)}getAllTraits(){return this.getRandomTraits(this.allTraits)}getAllBlendShapeTraits(){return this.modelTraits.map(e=>e.getCollection()).flat().map(e=>e.blendshapeTraits).flat().map(e=>e==null?void 0:e.collection).flat().filter(e=>!!e)}isColliderRequired(e){return this.colliderTraits.indexOf(e)!=-1}isLipsyncTrait(e){return this.lipSyncTraits.indexOf(e)!=-1}async getNFTraitOptionsFromURL(e,t){const r=await this._fetchJson(e);return this.getNFTraitOptionsFromObject(r,t)}getNFTraitOptionsFromObject(e,t){const r=e.attributes;if(r){t=ut(t);const i=[];return r.forEach(s=>{if(t.indexOf(s.trait_type)==-1){const o=this.getTraitOption(s.trait_type,s.value);o&&i.push(o)}}),i}else return console.warn("No attiributes parameter was found in ",e),null}getRandomTraits(e){const t=[];return(e||this.randomTraits).forEach(i=>{const s=this.getRandomTrait(i);s&&t.push(s)}),this._filterTraitOptions(t)}getRandomTrait(e){var r,i;const t=this.getModelGroup(e);if(t){const s=t.getRandomTrait();if(s){const o=(r=s.targetTextureCollection)==null?void 0:r.getRandomTrait(),a=(i=s.targetColorCollection)==null?void 0:i.getRandomTrait();return new fB(s,o,a)}else return null}else return console.warn("No trait group with name "+e+" was found."),null}async _fetchJson(e){return await(await fetch(e)).json()}getTraitOption(e,t){var i,s;const r=this.getModelTrait(e,t);if(r){const o=(i=r.targetTextureCollection)==null?void 0:i.getRandomTrait(),a=(s=r.targetColorCollection)==null?void 0:s.getRandomTrait();return new fB(r,o,a)}return null}_filterTraitOptions(e){const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i].traitModel;let o=!1;for(let a=0;a<t.length;a++){const l=t[a].traitModel;if(o=s.isRestricted(l),o)break}o?r.push(e[i]):t.push(e[i])}return r.length>0&&console.log("options were filtered to fullfill restrictions: ",r),t}getCustomTraitOption(e,t){const r=this.getCustomModelTrait(e,t);return r?new fB(r,null,null):null}getCustomModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getCustomTrait(t)}getModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getTrait(t)}getModelTraits(e){const t=this.getModelGroup(e);return t?t.getCollection():(console.warn("No model group with name "+e),null)}getModelGroup(e){return this.modelTraitsMap.get(e)}getTextureTrait(e,t){var r;return(r=this.getTextureGroup(e))==null?void 0:r.getTrait(t)}getTextureGroup(e){return this.textureTraitsMap.get(e)}getColorTrait(e,t){var r;return(r=this.getColorGroup(e))==null?void 0:r.getTrait(t)}getColorGroup(e){return this.colorTraitsMap.get(e)}getTraitsDirectory(){let e=(this.assetsLocation||"")+(this.traitsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getThumbnailsDirectory(){let e=(this.assetsLocation||"")+(this.thumbnailsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getTraitIconsDirectorySvg(){let e=(this.assetsLocation||"")+(this.traitIconsDirectorySvg||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getAssetsDirectory(){let e=this.assetsLocation||"";return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}createModelTraits(e,t=!1){t&&(this.modelTraits=[]),ut(e).forEach(r=>{this.modelTraits.push(new $he(this,r))}),this.modelTraitsMap=new Map(this.modelTraits.map(r=>[r.trait,r])),this.modelTraits.forEach(r=>{r.restrictedTraits.forEach(i=>{const s=this.getModelGroup(i);console.log(s),s&&s.addTraitRestriction(r.trait)})})}createTextureTraits(e,t=!1){t&&(this.textureTraits=[]),ut(e).forEach(r=>{this.textureTraits.push(new Xhe(this,r))}),this.textureTraitsMap=new Map(this.textureTraits.map(r=>[r.trait,r]))}createColorTraits(e,t=!1){t&&(this.colorTraits=[]),ut(e).forEach(r=>{this.colorTraits.push(new Zhe(this,r))}),this.colorTraitsMap=new Map(this.colorTraits.map(r=>[r.trait,r]))}}class $he{constructor(e,t){const{trait:r,name:i,iconSvg:s,cameraTarget:o={distance:3,height:1},cullingDistance:a,cullingLayer:l,collection:A,restrictedTraits:c=[],restrictedTypes:u=[]}=t;this.manifestData=e,this.isRequired=e.requiredTraits.indexOf(r)!==-1,this.trait=r,this.name=i,this.iconSvg=s,this.fullIconSvg=e.getTraitIconsDirectorySvg()+s,this.restrictedTraits=c,this.restrictedTypes=u,this.cameraTarget=o,this.cullingDistance=a,this.cullingLayer=l,this.collection=[],this.collectionMap=null,this.createCollection(A)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Model with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Model with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}addTraitRestriction(e){this.restrictedTraits.indexOf(e)==-1&&this.restrictedTraits.push(e)}createCollection(e,t=!1){t&&(this.collection=[]),ut(e).forEach(r=>{this.collection.push(new f3(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getCustomTrait(e){return new f3(this,{directory:e,fullDirectory:e,id:"_custom",name:"Custom"})}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}getCollection(){return this.collection}}class Xhe{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Texture with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Texture with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),ut(e).forEach(r=>{this.collection.push(new qhe(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class Zhe{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Color with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Color with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),ut(e).forEach(r=>{this.collection.push(new ede(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class f3{constructor(e,t){un(this,"blendshapeTraits",[]);un(this,"blendshapeTraitsMap",new Map);const{id:r,directory:i,name:s,thumbnail:o,cullingDistance:a,cullingLayer:l,type:A=[],textureCollection:c,blendshapeTraits:u,colorCollection:f,fullDirectory:h,fullThumbnail:p}=t;if(this.manifestData=e.manifestData,this.traitGroup=e,this.id=r,this.directory=i,h)this.fullDirectory=h;else if(Array.isArray(i)){this.fullDirectory=[];for(let d=0;d<i.length;d++)this.fullDirectory[d]=e.manifestData.getTraitsDirectory()+i[d]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+i;this.name=s,this.thumbnail=o,this.fullThumbnail=p||e.manifestData.getThumbnailsDirectory()+o,this.cullHiddenMeshes=a||[0,0],this.cullingLayer=l??e.manifestData.defaultCullingLayer??0,this.cullingDistance=a||e.manifestData.defaultCullingDistance||[0,0],this.type=A,this.targetTextureCollection=c?e.manifestData.getTextureGroup(c):null,this.targetColorCollection=f?e.manifestData.getColorGroup(f):null,u&&Array.isArray(u)&&(this.blendshapeTraits=u.map(d=>new Jhe(this,d)),this.blendshapeTraitsMap=new Map(this.blendshapeTraits.map(d=>[d.trait,d])))}isRestricted(e){if(e==null)return!1;const t=e.traitGroup.trait;if(this.traitGroup.restrictedTraits.indexOf(t)!=-1)return!0;if(this.type.length>0&&this.manifestData.restrictedTypes>0){const r=(o,a)=>{if(o==null||a==null)return!1;for(let l=0;l<o.length;l++)if(a.includes(o[l]))return!0;return!1},i=this.manifestData.restrictedTypes,s=ut(this.type);s.forEach(o=>r(i[o],s))}return!1}getGroupBlendShapeTraits(){return this.blendshapeTraits}getBlendShapes(e){var t,r;return(r=(t=this.blendshapeTraitsMap)==null?void 0:t.get(e))==null?void 0:r.collection}getBlendShape(e,t){var r,i;return(i=(r=this.blendshapeTraitsMap)==null?void 0:r.get(e))==null?void 0:i.getTrait(t)}}class Jhe{constructor(e,t){un(this,"trait");un(this,"name");un(this,"isBlendShapeGroup",!0);un(this,"collection",[]);un(this,"cameraTarget",null);un(this,"collectionMap",null);const{trait:r,name:i,collection:s,cameraTarget:o=e.traitGroup.cameraTarget||{distance:3,height:1}}=t;this.modelTrait=e,this.trait=r,this.name=i,this.cameraTarget=o,this.createCollection(s)}createCollection(e,t=!1){t&&(this.collection=[]),ut(e).forEach(r=>{this.collection.push(new h8(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class h8{constructor(e,t){un(this,"id");un(this,"name");un(this,"fullThumbnail");un(this,"isBlendShape",!0);const{id:r,name:i,fullThumbnail:s}=t;r||console.warn("BlendShapeTrait is missing id, parent trait: "+e.trait),i||console.warn("BlendShapeTrait is missing name, parent trait: "+e.trait),this.parentGroup=e,this.id=r,this.fullThumbnail=s,this.name=i}getGroupId(){return this.parentGroup.trait}}class qhe{constructor(e,t){const{id:r,directory:i,fullDirectory:s,name:o,thumbnail:a}=t;if(this.traitGroup=e,this.id=r,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+a;this.name=o,this.thumbnail=a,this.fullThumbnail=e.manifestData.getThumbnailsDirectory()+a}}class ede{constructor(e,t){const{id:r,value:i,name:s}=t;this.traitGroup=e,this.id=r,this.name=s,this.value=i}}class fB{constructor(e,t,r){this.traitModel=e,this.traitTexture=t,this.traitColor=r}}const hB=new Ye,h3=new qH,ka=new Z;class tde{constructor(e){un(this,"toggleBinaryBlendShape",(e,t,r)=>{e.traverse(i=>{if(i.isMesh||i.isSkinnedMesh){const s=i;if(!s.morphTargetDictionary||!s.morphTargetInfluences)return;const o=s.morphTargetDictionary[t.id];o!=null&&(s.morphTargetInfluences[o]=r?1:0)}})});this._start(e)}async _start(e){const{parentModel:t=null,renderCamera:r=null,manifestURL:i=null}=e;this.rootModel=new It,this.characterModel=new It,this.parentModel=t,t&&t.add(this.rootModel),this.lipSync=null,this.lookAtManager=null,this.animationManager=new Dfe,this.screenshotManager=new Kfe(this,t||this.rootModel),this.blinkManager=new $fe(.1,.1,.5,5),this.rootModel.add(this.characterModel),this.renderCamera=r,this.manifestData=null,this.manifest=null,i&&(this.loadManifest(i),this.animationManager.setScale(this.manifestData.displayScale)),this.avatar={},this.storedAvatar={},this.traitLoadManager=new nde;const s=new Pr;s.renderOrder=1e4,this.rootModel.add(s),this.vrmHelperRoot=s}update(){this.lookAtManager!=null&&this.lookAtManager.update()}addLookAtMouse(e,t,r,i=!0){var s;this.lookAtManager=new Yhe(e,t,r),this.lookAtManager.enabled=!0;for(const o in this.avatar)((s=this.avatar[o])==null?void 0:s.vrm)!=null&&this.lookAtManager.addVRM(this.avatar[o].vrm)}toggleCharacterLookAtMouse(e){this.lookAtManager!=null?(this.lookAtManager.setActive(e),this.animationManager&&this.animationManager.enableMouseLook(e)):console.warn("toggleCharacterLookAtMouse() was called, but no lookAtManager exist. Make sure to set it up first with addLookArMous()")}savePortraitScreenshot(e,t,r,i=1,s=0){this.blinkManager.enableScreenshot(),this.characterModel.traverse(o=>{o.isSkinnedMesh&&o.skeleton.bones.filter(l=>l.name==="head")[0].getWorldPosition(ka)}),ka.z+=.3,ka.y+=s,this.screenshotManager.cameraFrameManager.setCamera(ka,i),this.screenshotManager.saveScreenshot(e,t,r),this.blinkManager.disableScreenshot()}cameraRaycastCulling(e,t,r=!0){if(this.renderCamera==null){console.warn("No camera was set in character manager. Please call setRenderCamera(camera) before calling this function");return}const i=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&(A.userData.clippedIndexGeometry=A.geometry.index.clone(),A.geometry.setIndex(A.userData.origIndexBuffer))})},s=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&A.geometry.setIndex(A.userData.clippedIndexGeometry)})},o=(A,c)=>{for(let u=0;u<A.length;u+=3)if(c[0]==A[u]&&c[1]==A[u+1]&&c[2]==A[u+2])return u;return-1},a=(A,c)=>{var d,g;const u=A.object,f=A.face,h=[f.a,f.b,f.c],p=(g=(d=u.userData)==null?void 0:d.clippedIndexGeometry)==null?void 0:g.array;if(p!=null){const m=o(p,h),y=Array.from(p);if(m==-1&&!c){const w=[...y,...h];u.userData.clippedIndexGeometry=new lt(new Uint32Array(w),1,!1)}m!=1&&c&&(y.splice(m,3),u.userData.clippedIndexGeometry=new lt(new Uint32Array(y),1,!1))}};hB.x=e,hB.y=t,i(),h3.setFromCamera(hB,this.renderCamera);const l=h3.intersectObjects(this.characterModel.children);if(l.length>0){const A=l[0];a(A,r)}s()}removeCurrentCharacter(){const e=[];for(const t in this.avatar)e.push(new gy({traitGroupID:t,traitModel:null}));e.forEach(t=>{this._addLoadedData(t)}),this.avatar={}}removeCurrentManifest(){this.removeCurrentCharacter(),this.manifest=null,this.manifestData=null,this.animationManager&&this.animationManager.clearCurrentAnimations()}canDownload(){var e;return((e=this.manifestData)==null?void 0:e.canDownload)||!0}downloadVRM(e,t=null){return new Promise(async(r,i)=>{if(this.canDownload())try{t=t||{};const o={...this.manifestData.getExportOptions(),...t};o.isVrm0=!0,o.screenshot=this._getPortaitScreenshotTexture(!1,o),console.log(o),await Uhe(this.characterModel,this.avatar,e,o),r()}catch(s){console.error("Error downloading VRM:",s.message),i(new Error("Failed to download VRM."))}else{const s="Download not supported.";console.error(s),i(new Error(s))}})}downloadGLB(e,t=null){if(console.log("XXX fix glb downloader"),this.canDownload()){t=t||{};const r={...this.manifestData.getExportOptions(),...t};Phe(this.characterModel,e,r)}else console.error("Download not supported")}getAvatarSelection(){var t;var e={};for(const r in this.avatar)e[r]={name:this.avatar[r].name,id:(t=this.avatar[r].traitInfo)==null?void 0:t.id};return e}getBoneTriangleCount(){let e=0,t=new Set;for(const r in this.avatar)this.avatar[r].model.traverse(i=>{i.isMesh&&(e+=i.geometry.index.array.length),i.isSkinnedMesh&&i.skeleton.bones.forEach(s=>{t.add(s.name)})});return{triangles:e/3,bones:t.size}}getGroupTraits(){if(this.manifestData)return this.manifestData.getGroupModelTraits()}getBlendShapeGroupTraits(e,t){var r;return this.manifestData?(r=this.manifestData.getModelTrait(e,t))==null?void 0:r.getGroupBlendShapeTraits():[]}getCurrentCharacterModel(){return this.characterModel}isTraitGroupRequired(e){const t=this.manifestData.getModelGroup(e);return!!(t!=null&&t.isRequired)}getTraits(e){return this.manifestData?this.manifestData.getModelTraits(e):(console.warn("No manifest file has been loaded, please load it before trait models."),null)}getCurrentTraitID(e){var t,r;return(r=(t=this.avatar[e])==null?void 0:t.traitInfo)==null?void 0:r.id}getCurrentTraitData(e){var t;return(t=this.avatar[e])==null?void 0:t.traitInfo}getCurrentBlendShapeTraitData(e){var t;return((t=this.avatar[e])==null?void 0:t.blendShapeTraitsInfo)||{}}getCurrentTraitVRM(e){var t;return(t=this.avatar[e])==null?void 0:t.vrm}setParentModel(e){e.add(this.rootModel),this.parentModel=e,this.screenshotManager&&this.screenshotManager.setScene(this.parentModel)}setRenderCamera(e){this.renderCamera=e}loadRandomTraits(){return new Promise(async(e,t)=>{if(this.manifestData){const r=this.manifestData.getRandomTraits();await this._loadTraits(r),e()}else{const r="No manifest was loaded, random traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadRandomTrait(e){return new Promise(async(t,r)=>{if(this.manifestData){const i=this.manifestData.getRandomTrait(e);await this._loadTraits(ut(i)),t()}else{const i="No manifest was loaded, random traits cannot be loaded.";console.error(i),r(new Error(i))}})}loadTraitsFromNFT(e,t=!0,r=null){return new Promise(async(i,s)=>{try{if(this.manifestData){const o=this.manifestData.getNFTraitOptionsFromURL(e,r);await this._loadTraits(o,t),i()}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}}catch(o){s(o)}})}loadTraitsFromNFTObject(e,t=!0,r=null){return new Promise(async(i,s)=>{if(this.manifestData)try{const o=this.manifestData.getNFTraitOptionsFromObject(e,r);await this._loadTraits(o,t),i()}catch(o){console.error("Error loading traits from NFT object:",o.message),s(new Error("Failed to load traits from NFT object."))}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}})}loadInitialTraits(){return new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getInitialTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadAllTraits(){return console.log("load all"),new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getAllTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadBlendShapeTrait(e,t,r){if(!this.avatar[e]){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(!this.manifestData){console.warn("No manifest data was found.");return}try{this._loadBlendShapeTrait(e,t,r)}catch{console.error("Error loading blendshape trait "+e,t,r)}}loadTrait(e,t,r=!1){return new Promise(async(i,s)=>{if(this.manifestData)try{const o=this.manifestData.getTraitOption(e,t);o&&(await this._loadTraits(ut(o),r),i())}catch(o){console.error("Error loading specific trait:",o.message),s(new Error("Failed to load specific trait."))}else{const o="No manifest was loaded, specific trait cannot be loaded.";console.error(o),s(new Error(o))}})}loadCustomTrait(e,t){return new Promise(async(r,i)=>{if(this.manifestData)try{const s=this.manifestData.getCustomTraitOption(e,t);s&&(await this._loadTraits(ut(s)),r())}catch(s){console.error("Error loading custom trait:",s.message),i(new Error("Failed to load custom trait."))}else{const s="No manifest was loaded, custom trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTexture(e,t){return new Promise(async(r,i)=>{var o;const s=(o=this.avatar[e])==null?void 0:o.model;if(s)await Bfe(s,t),r();else{const a="No Group Trait with name "+e+" was found.";console.warn(a),i(new Error(a))}})}setTraitColor(e,t){var i;const r=(i=this.avatar[e])==null?void 0:i.model;if(r)try{const s=new ke(t);r.traverse(o=>{o.isMesh&&(o.material.type==="MeshStandardMaterial"?Array.isArray(o.material)?o.material.forEach(a=>{a.color=s}):o.material.color=s:(o.material[0].uniforms.litFactor.value=s,o.material[0].uniforms.shadeColorFactor.value=new ke(s.r*.8,s.g*.8,s.b*.8)))})}catch(s){throw console.error("Error setting trait color:",s.message),new Error("Failed to set trait color.")}else{const s="No Group Trait with name "+e+" was found.";throw console.warn(s),new Error(s)}}removeTrait(e,t=!1){if(this.isTraitGroupRequired(e)&&!t){console.warn(`No trait with name: ${e} is not removable.`);return}if(this.manifestData.getModelGroup(e)){const i=new gy({traitGroupID:e,traitModel:null});this._addLoadedData(i),sB(this.avatar)}else console.warn(`No trait with name: ${e} was found.`)}updateCullHiddenMeshes(){sB(this.avatar)}loadOptimizerManifest(){this.manifest={colliderTraits:["CUSTOM"],traits:[{name:"Custom",trait:"CUSTOM",collection:[]}]},this.manifestData=new uB(this.manifest)}getCurrentOptimizerCharacterModel(){var e;return(e=this.avatar.CUSTOM)==null?void 0:e.vrm}loadOptimizerCharacter(e){return this.loadCustomTrait("CUSTOM",e)}setManifest(e){return this.removeCurrentCharacter(),new Promise(async(t,r)=>{try{if(this.manifest=e,this.manifest){if(this.manifestData=new uB(this.manifest),this.animationManager)try{await this._animationManagerSetup(this.manifest.animationPath,this.manifest.assetsLocation,this.manifestData.displayScale)}catch(i){console.error("Error loading animations: "+i)}t()}else{const i="Failed to fetch or parse the manifest.";console.error(i),r(new Error(i))}}catch(i){console.error("Error setting manifest:",i.message),r(new Error("Failed to set the manifest."))}})}appendManifest(e,t){return new Promise(async(r,i)=>{try{t?this.manifest={...this.manifest||{},manifest:e}:this.manifest={manifest:e,...this.manifest||{}};const s=new uB(e);this.manifestData.appendManifestData(s),r()}catch(s){console.error("Error setting manifest:",s.message),i(new Error("Failed to set the manifest."))}})}loadManifest(e){return new Promise(async(t,r)=>{try{const i=await this._fetchManifest(e);this.setManifest(i).then(()=>{t()})}catch(i){console.error("Error loading manifest:",i.message),r(new Error("Failed to load the manifest."))}})}loadAppendManifest(e,t){return new Promise(async(r,i)=>{try{const s=await this._fetchManifest(e);this.appendManifest(s,t).then(()=>{r()})}catch(s){console.error("Error loading manifest:",s.message),i(new Error("Failed to load the manifest."))}})}async soloTargetGroupTrait(e){const t=ut(e),r=[];for(const i in this.avatar)t.includes(i)&&r.push(this.manifestData.getTraitOption(i,this.avatar[i].traitInfo.id));await this._loadTraits(r,!0)}storeCurrentAvatar(){this.storedAvatar={...this.avatar}}async loadStoredAvatar(){const e=[];for(const t in this.storedAvatar)e.push(this.manifestData.getTraitOption(t,this.storedAvatar[t].traitInfo.id));console.log(e),this._loadTraits(e,!0)}async _loadTraits(e,t=!1){console.log("laoded traits:",e),await this.traitLoadManager.loadTraitOptions(ut(e)).then(r=>{t&&this.getGroupTraits().forEach(s=>{r.some(a=>{var l;return((l=a.traitModel)==null?void 0:l.traitGroup.trait)===s.trait})||this.avatar[s.trait]!=null&&r.push(new gy({traitGroupID:s.trait,traitModel:null}))}),r.forEach(i=>{this._addLoadedData(i)}),sB(this.avatar)})}async _loadBlendShapeTrait(e,t,r){const i=this.avatar[e];if(!i){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(i.blendShapeTraitsInfo||(i.blendShapeTraitsInfo={}),i.blendShapeTraitsInfo[t]&&this.toggleBinaryBlendShape(i.model,i.blendShapeTraitsInfo[t],!1),r==null){delete this.avatar[e].blendShapeTraitsInfo[t];return}const s=i.traitInfo.getBlendShape(t,r);if(!s){console.warn(`Blendshape with name: ${r} was not found.`);return}this.toggleBinaryBlendShape(i.model,s,!0),this.avatar[e].blendShapeTraitsInfo[s.getGroupId()]=s}async _animationManagerSetup(e,t,r){const i=ut(e);this.animationManager&&(this.animationManager.setScale(r),e.length>0&&(this.animationManager.storeAnimationPaths(i,t||""),await this.animationManager.loadAnimation(i,!1,0,i[0].endsWith(".fbx"),t||"")))}async _fetchManifest(e){return await(await fetch(e)).json()}_getPortaitScreenshotTexture(e,t){this.blinkManager.enableScreenshot(),this.characterModel.traverse(u=>{u.isSkinnedMesh&&u.skeleton.bones.filter(h=>h.name==="head")[0].getWorldPosition(ka)});const{screenshotResolution:r,screenshotFaceDistance:i,screenshotFaceOffset:s,screenshotBackground:o,screenshotFOV:a}=t,l=r[0],A=r[1];ka.x+=s[0],ka.y+=s[1],ka.z+=s[2],this.screenshotManager.setBackground(o),this.screenshotManager.cameraFrameManager.setCamera(ka,i,a);const c=e?this.screenshotManager.getScreenshotBlob(l,A):this.screenshotManager.getScreenshotTexture(l,A);return this.blinkManager.disableScreenshot(),c}_setupWireframeMaterial(e){e.origMat=e.material;const t=()=>{const o=.1+Math.random()*.9,a=.1+Math.random()*(1-.1),l=.1+Math.random()*(1-.1);return new ke(o,a,l)},r=new Mi({color:t(),wireframe:!0,wireframeLinewidth:.2}),i=e.material;e.setDebugMode=s=>{s?e.material.length?(e.material[0]=r,e.material[1]=r):e.material=r:e.material=i}}_VRMBaseSetup(e,t,r,i,s){var a,l;let o=e.userData.vrm;if(e.userData.vrm==null)return console.error("No valid VRM was provided for "+r+" trait, skipping file."),null;if(e3(o,{isVRM0:((a=o.meta)==null?void 0:a.metaVersion)==="0"}),this.manifestData.isColliderRequired(r)&&jhe(e),Ife(o),this.manifestData.isLipsyncTrait(r)&&(this.lipSync=new Qw(o)),this._modelBaseSetup(o,t,r,i,s),((l=o.meta)==null?void 0:l.metaVersion)==="0"){if(o.humanoid.humanBones.hips.node.parent==o.scene){const A=new It;A.name="newRootNode",bfe(o.scene,A),A.add(o.humanoid.humanBones.hips.node)}o.humanoid.humanBones.hips.node.parent.rotateY(3.14159),o.scene.traverse(A=>{var c;if(A.isSkinnedMesh){const u={},f=ut((c=A.geometry.userData)==null?void 0:c.targetNames);for(let h=0;h<f.length;h++)u[f[h]]=A.morphTargetDictionary[h];A.morphTargetDictionary=u;for(let h=0;h<A.skeleton.bones.length;h++)A.skeleton.bones[h].userData.vrm0RestPosition={...A.skeleton.bones[h].position};A.userData.isVRM0=!0}}),console.log("Loaded VRM0 file ",o)}else console.log("Loaded VRM1 file ",o);return o}_modelBaseSetup(e,t,r,i,s){const o=[],a=ut(t.cullingIgnore),l=[];t.meshTargets&&ut(t.meshTargets).map(u=>{const f=e.scene.getObjectByName(u);f!=null&&f.isMesh&&o.push(f)}),e.scene.traverse(u=>{!t.meshTargets&&u.isMesh&&o.push(u),u.frustumCulled=!1,u.isMesh&&(this._setupWireframeMaterial(u),a.indexOf(u.name)===-1&&l.push(u))});const A=this.manifest,c=this.manifestData.getModelGroup(r);e3(e,{cullingLayer:t.cullingLayer!=null?t.cullingLayer:c.cullingLayer!=null?c.cullingLayer:A.defaultCullingLayer!=null?A.defaultCullingLayer:-1,cullingDistance:t.cullingDistance!=null?t.cullingDistance:c.cullingDistance!=null?c.cullingDistance:A.defaultCullingDistance!=null?A.defaultCullingDistance:null,maxCullingDistance:t.maxCullingDistance!=null?t.maxCullingDistance:c.maxCullingDistance!=null?c.maxCullingDistance:A.maxCullingDistance!=null?A.maxCullingDistance:1/0,cullingMeshes:l}),o.map((u,f)=>{if(i){const h=i[f]||i[0];h!=null&&ut(u.material).map(p=>{rde(p,h)})}if(s){const h=s[f]||s[0];h!=null&&(u.material[0].uniforms.litFactor.value=h,u.material[0].uniforms.shadeColorFactor.value=new ke(h.r*.8,h.g*.8,h.b*.8))}})}_applyManagers(e){this.blinkManager.addVRM(e),this.lookAtManager&&this.lookAtManager.addVRM(e),this.animationManager&&this.animationManager.addVRM(e)}_displayModel(e){if(e){const t=e.scene;this.characterModel.attach(t)}}_positionModel(e){const t=this.manifestData.displayScale;e.scene.scale.set(t,t,t)}_disposeTrait(e){this.blinkManager.removeVRM(e),this.lookAtManager&&this.lookAtManager.removeVRM(e),this.animationManager&&this.animationManager.removeVRM(e),Tfe(e)}_addLoadedData(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;if(r==null){this.avatar[t]&&this.avatar[t].vrm&&(this._disposeTrait(this.avatar[t].vrm),this.avatar[t]={});return}let A=null;o.map(c=>{c!=null&&(A=this._VRMBaseSetup(c,r,t,a,l))}),A!=null&&(this.avatar[t]&&this.avatar[t].vrm&&this._disposeTrait(this.avatar[t].vrm),this._positionModel(A),this._displayModel(A),this._applyManagers(A),console.log(this.characterModel),this.avatar[t]={traitInfo:r,blendShapeTraitsInfo:{},textureInfo:i,colorInfo:s,name:r.name,model:A&&A.scene,vrm:A})}}class nde{constructor(){const e=new YH;e.onProgress=(i,s,o)=>{this.setLoadPercentage(Math.round(s/o*100))};const t=new t5(e);t.crossOrigin="anonymous",t.register(i=>new sue(i,{autoUpdateHumanBones:!0}));const r=new lu(e);this.loadPercentager=0,this.loadingManager=e,this.gltfLoader=t,this.textureLoader=r,this.isLoading=!1}setLoadPercentage(e){this.loadPercentager=e}loadTraitOptions(e){return new Promise(t=>{this.isLoading=!0;const r=[],i=e.map(async(s,o)=>{var c,u,f;if(s==null){r[o]=null;return}const a=await Promise.all(ut((c=s==null?void 0:s.traitModel)==null?void 0:c.fullDirectory).map(async h=>{try{return await this.gltfLoader.loadAsync(h)}catch(p){return console.error(`Error loading modelsss ${h}:`,p),null}})),l=await Promise.all(ut((u=s==null?void 0:s.traitTexture)==null?void 0:u.fullDirectory).map(h=>new Promise(p=>{this.textureLoader.load(h,d=>{d.flipY=!1,d.encoding=wt,p(d)},null,d=>{console.error("error loading texture: ",d),p(null)})}))),A=ut((f=s==null?void 0:s.traitColor)==null?void 0:f.value).map(h=>new ke(h));r[o]=new gy({traitGroupID:s==null?void 0:s.traitModel.traitGroup.trait,traitModel:s==null?void 0:s.traitModel,textureTrait:s==null?void 0:s.traitTexture,colorTrait:s==null?void 0:s.traitColor,models:a,textures:l,colors:A})});Promise.allSettled(i).then(()=>{this.setLoadPercentage(100),t(r),this.isLoading=!1}).catch(s=>{this.setLoadPercentage(100),console.error("An error occurred:",s),t(r),this.isLoading=!1})})}}class gy{constructor(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;this.traitGroupID=t,this.traitModel=r,this.textureTrait=i,this.colorTrait=s,this.models=o,this.textures=a,this.colors=l}}function rde(n,e){if(n.type==="Shadermaterial"&&!n.isMToonMaterial){console.warn("XXX set material texture to shader material",n);return}n.map=e,n.needsUpdate=!0}function ide(n){const e=new vw,t=new ZH(16777215,.5);e.add(t);const r=new oT(16777215,.5);r.position.set(0,1,1),e.add(r);const i=new It;e.add(i);const s=new Br(30,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,1.3,2);const o=new tde({parentModel:e,createAnimationManager:!0,renderCamera:s});o.addLookAtMouse(80,n,s,!0);const a=document.getElementById(n),l=new gg({canvas:a,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),A=new kne(s,l.domElement);A.minDistance=1,A.maxDistance=4,A.maxPolarAngle=Math.PI/2,A.enablePan=!0,A.target=new Z(0,1,0),A.enableDamping=!0,A.dampingFactor=.1;const c=new Z(-.5,0,-.5),u=new Z(.5,1.7,.5),f=()=>{l.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()};window.addEventListener("resize",f),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),l.outputEncoding=wt;const h=()=>{requestAnimationFrame(h),A.target.clamp(c,u),A==null||A.update(),o.update(),l.render(e,s)};h();const p=g=>{const m=g.ctrlKey,y=a.getBoundingClientRect(),w=(g.clientX-y.left)/y.width*2-1,x=-((g.clientY-y.top)/y.height)*2+1;o.cameraRaycastCulling(w,x,m)};async function d(){}return d(),a.addEventListener("click",p),{scene:e,camera:s,controls:A,characterManager:o,sceneElements:i}}function xv(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d8={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,s){function o(A,c){if(!i[A]){if(!r[A]){var u=typeof xv=="function"&&xv;if(!c&&u)return u(A,!0);if(a)return a(A,!0);var f=new Error("Cannot find module '"+A+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[A]={exports:{}};r[A][0].call(h.exports,function(p){var d=r[A][1][p];return o(d||p)},h,h.exports,t,r,i,s)}return i[A].exports}for(var a=typeof xv=="function"&&xv,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(t,r,i){var s=t("./utils"),o=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var A,c,u,f,h,p,d,g=[],m=0,y=l.length,w=y,x=s.getTypeOf(l)!=="string";m<l.length;)w=y-m,u=x?(A=l[m++],c=m<y?l[m++]:0,m<y?l[m++]:0):(A=l.charCodeAt(m++),c=m<y?l.charCodeAt(m++):0,m<y?l.charCodeAt(m++):0),f=A>>2,h=(3&A)<<4|c>>4,p=1<w?(15&c)<<2|u>>6:64,d=2<w?63&u:64,g.push(a.charAt(f)+a.charAt(h)+a.charAt(p)+a.charAt(d));return g.join("")},i.decode=function(l){var A,c,u,f,h,p,d=0,g=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var y,w=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&w--,l.charAt(l.length-2)===a.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|w):new Array(0|w);d<l.length;)A=a.indexOf(l.charAt(d++))<<2|(f=a.indexOf(l.charAt(d++)))>>4,c=(15&f)<<4|(h=a.indexOf(l.charAt(d++)))>>2,u=(3&h)<<6|(p=a.indexOf(l.charAt(d++))),y[g++]=A,h!==64&&(y[g++]=c),p!==64&&(y[g++]=u);return y}},{"./support":30,"./utils":32}],2:[function(t,r,i){var s=t("./external"),o=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function A(c,u,f,h,p){this.compressedSize=c,this.uncompressedSize=u,this.crc32=f,this.compression=h,this.compressedContent=p}A.prototype={getContentWorker:function(){var c=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return c.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(c,u,f){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},r.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var s=t("./utils"),o=function(){for(var a,l=[],A=0;A<256;A++){a=A;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[A]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(A,c,u,f){var h=o,p=f+u;A^=-1;for(var d=f;d<p;d++)A=A>>>8^h[255&(A^c[d])];return-1^A}(0|l,a,a.length,0):function(A,c,u,f){var h=o,p=f+u;A^=-1;for(var d=f;d<p;d++)A=A>>>8^h[255&(A^c.charCodeAt(d))];return-1^A}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:s}},{lie:37}],7:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),a=t("./utils"),l=t("./stream/GenericWorker"),A=s?"uint8array":"array";function c(u,f){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(A,u.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},i.compressWorker=function(u){return new c("Deflate",u)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function s(h,p){var d,g="";for(d=0;d<p;d++)g+=String.fromCharCode(255&h),h>>>=8;return g}function o(h,p,d,g,m,y){var w,x,_=h.file,C=h.compression,T=y!==A.utf8encode,b=a.transformTo("string",y(_.name)),M=a.transformTo("string",A.utf8encode(_.name)),P=_.comment,Y=a.transformTo("string",y(P)),H=a.transformTo("string",A.utf8encode(P)),I=M.length!==_.name.length,v=H.length!==P.length,E="",F="",D="",O=_.dir,z=_.date,K={crc32:0,compressedSize:0,uncompressedSize:0};p&&!d||(K.crc32=h.crc32,K.compressedSize=h.compressedSize,K.uncompressedSize=h.uncompressedSize);var Q=0;p&&(Q|=8),T||!I&&!v||(Q|=2048);var B=0,j=0;O&&(B|=16),m==="UNIX"?(j=798,B|=function(U,X){var ae=U;return U||(ae=X?16893:33204),(65535&ae)<<16}(_.unixPermissions,O)):(j=20,B|=function(U){return 63&(U||0)}(_.dosPermissions)),w=z.getUTCHours(),w<<=6,w|=z.getUTCMinutes(),w<<=5,w|=z.getUTCSeconds()/2,x=z.getUTCFullYear()-1980,x<<=4,x|=z.getUTCMonth()+1,x<<=5,x|=z.getUTCDate(),I&&(F=s(1,1)+s(c(b),4)+M,E+="up"+s(F.length,2)+F),v&&(D=s(1,1)+s(c(Y),4)+H,E+="uc"+s(D.length,2)+D);var ee="";return ee+=`
\0`,ee+=s(Q,2),ee+=C.magic,ee+=s(w,2),ee+=s(x,2),ee+=s(K.crc32,4),ee+=s(K.compressedSize,4),ee+=s(K.uncompressedSize,4),ee+=s(b.length,2),ee+=s(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+ee+b+E,dirRecord:u.CENTRAL_FILE_HEADER+s(j,2)+ee+s(Y.length,2)+"\0\0\0\0"+s(B,4)+s(g,4)+b+E+Y}}var a=t("../utils"),l=t("../stream/GenericWorker"),A=t("../utf8"),c=t("../crc32"),u=t("../signature");function f(h,p,d,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=d,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(f,l),f.prototype.push=function(h){var p=h.meta.percent||0,d=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:d?(p+100*(d-g-1))/d:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var p=this.streamFiles&&!h.file.dir;if(p){var d=o(h,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:d.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var p=this.streamFiles&&!h.file.dir,d=o(h,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(d.dirRecord),p)this.push({data:function(g){return u.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:d.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var d=this.bytesWritten-h,g=function(m,y,w,x,_){var C=a.transformTo("string",_(x));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(y,4)+s(w,4)+s(C.length,2)+C}(this.dirRecords.length,d,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var p=this;return h.on("data",function(d){p.processChunk(d)}),h.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),h.on("error",function(d){p.error(d)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var p=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var d=0;d<p.length;d++)try{p[d].error(h)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,p=0;p<h.length;p++)h[p].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var s=t("../compressions"),o=t("./ZipFileWorker");i.generateWorker=function(a,l,A){var c=new o(l.streamFiles,A,l.platform,l.encodeFileName),u=0;try{a.forEach(function(f,h){u++;var p=function(y,w){var x=y||w,_=s[x];if(!_)throw new Error(x+" is not a valid compression method !");return _}(h.options.compression,l.compression),d=h.options.compressionOptions||l.compressionOptions||{},g=h.dir,m=h.date;h._compressWorker(p,d).withStreamInfo("file",{name:f,dir:g,date:m,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(c)}),c.entriesCount=u}catch(f){c.error(f)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=t("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var s=t("./utils"),o=t("./external"),a=t("./utf8"),l=t("./zipEntries"),A=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function u(f){return new o.Promise(function(h,p){var d=f.decompressed.getContentWorker().pipe(new A);d.on("error",function(g){p(g)}).on("end",function(){d.streamInfo.crc32!==f.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(f,h){var p=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(d){var g=new l(h);return g.load(d),g}).then(function(d){var g=[o.Promise.resolve(d)],m=d.files;if(h.checkCRC32)for(var y=0;y<m.length;y++)g.push(u(m[y]));return o.Promise.all(g)}).then(function(d){for(var g=d.shift(),m=g.files,y=0;y<m.length;y++){var w=m[y],x=w.fileNameStr,_=s.resolve(w.fileNameStr);p.file(_,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:h.createFolders}),w.dir||(p.file(_).unsafeOriginalName=x)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var s=t("../utils"),o=t("../stream/GenericWorker");function a(l,A){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(A)}s.inherits(a,o),a.prototype._bindStream=function(l){var A=this;(this._stream=l).pause(),l.on("data",function(c){A.push({data:c,meta:{percent:0}})}).on("error",function(c){A.isPaused?this.generatedError=c:A.error(c)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var s=t("readable-stream").Readable;function o(a,l,A){s.call(this,l),this._helper=a;var c=this;a.on("data",function(u,f){c.push(u)||c._helper.pause(),A&&A(f)}).on("error",function(u){c.emit("error",u)}).on("end",function(){c.push(null)})}t("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,r,i){function s(_,C,T){var b,M=a.getTypeOf(C),P=a.extend(T||{},c);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(_=m(_)),P.createFolders&&(b=g(_))&&y.call(this,b,!0);var Y=M==="string"&&P.binary===!1&&P.base64===!1;T&&T.binary!==void 0||(P.binary=!Y),(C instanceof u&&C.uncompressedSize===0||P.dir||!C||C.length===0)&&(P.base64=!1,P.binary=!0,C="",P.compression="STORE",M="string");var H=null;H=C instanceof u||C instanceof l?C:p.isNode&&p.isStream(C)?new d(_,C):a.prepareContent(_,C,P.binary,P.optimizedBinaryString,P.base64);var I=new f(_,H,P);this.files[_]=I}var o=t("./utf8"),a=t("./utils"),l=t("./stream/GenericWorker"),A=t("./stream/StreamHelper"),c=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),h=t("./generate"),p=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),g=function(_){_.slice(-1)==="/"&&(_=_.substring(0,_.length-1));var C=_.lastIndexOf("/");return 0<C?_.substring(0,C):""},m=function(_){return _.slice(-1)!=="/"&&(_+="/"),_},y=function(_,C){return C=C!==void 0?C:c.createFolders,_=m(_),this.files[_]||s.call(this,_,null,{dir:!0,createFolders:C}),this.files[_]};function w(_){return Object.prototype.toString.call(_)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_){var C,T,b;for(C in this.files)b=this.files[C],(T=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&_(T,b)},filter:function(_){var C=[];return this.forEach(function(T,b){_(T,b)&&C.push(b)}),C},file:function(_,C,T){if(arguments.length!==1)return _=this.root+_,s.call(this,_,C,T),this;if(w(_)){var b=_;return this.filter(function(P,Y){return!Y.dir&&b.test(P)})}var M=this.files[this.root+_];return M&&!M.dir?M:null},folder:function(_){if(!_)return this;if(w(_))return this.filter(function(M,P){return P.dir&&_.test(M)});var C=this.root+_,T=y.call(this,C),b=this.clone();return b.root=T.name,b},remove:function(_){_=this.root+_;var C=this.files[_];if(C||(_.slice(-1)!=="/"&&(_+="/"),C=this.files[_]),C&&!C.dir)delete this.files[_];else for(var T=this.filter(function(M,P){return P.name.slice(0,_.length)===_}),b=0;b<T.length;b++)delete this.files[T[b].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_){var C,T={};try{if((T=a.extend(_||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var b=T.comment||this.comment||"";C=h.generateWorker(this,T,b)}catch(M){(C=new l("error")).error(M)}return new A(C,T.type||"string",T.mimeType)},generateAsync:function(_,C){return this.generateInternalStream(_).accumulate(C)},generateNodeStream:function(_,C){return(_=_||{}).type||(_.type="nodebuffer"),this.generateInternalStream(_).toNodejsStream(C)}};r.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),A=a.charCodeAt(1),c=a.charCodeAt(2),u=a.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===A&&this.data[f+2]===c&&this.data[f+3]===u)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),A=a.charCodeAt(1),c=a.charCodeAt(2),u=a.charCodeAt(3),f=this.readData(4);return l===f[0]&&A===f[1]&&c===f[2]&&u===f[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var s=t("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,A=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)A=(A<<8)+this.byteAt(l);return this.index+=a,A},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(t,r,i){var s=t("./Uint8ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var s=t("./DataReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var s=t("./ArrayReader");function o(a){s.call(this,a)}t("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var s=t("../utils"),o=t("../support"),a=t("./ArrayReader"),l=t("./StringReader"),A=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");r.exports=function(u){var f=s.getTypeOf(u);return s.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new A(u):o.uint8array?new c(s.transformTo("uint8array",u)):new a(s.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var s=t("./GenericWorker"),o=t("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var s=t("./GenericWorker"),o=t("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var A=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=A+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var s=t("../utils"),o=t("./GenericWorker");function a(l){o.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){A.dataIsReady=!0,A.data=c,A.max=c&&c.length||0,A.type=s.getTypeOf(c),A.isPaused||A._tickAndRepeat()},function(c){A.error(c)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,A);break;case"uint8array":l=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":l=this.data.slice(this.index,A)}return this.index=A,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(t,r,i){var s=t("../utils"),o=t("./ConvertWorker"),a=t("./GenericWorker"),l=t("../base64"),A=t("../support"),c=t("../external"),u=null;if(A.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,d){return new c.Promise(function(g,m){var y=[],w=p._internalType,x=p._outputType,_=p._mimeType;p.on("data",function(C,T){y.push(C),d&&d(T)}).on("error",function(C){y=[],m(C)}).on("end",function(){try{var C=function(T,b,M){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",b),M);case"base64":return l.encode(b);default:return s.transformTo(T,b)}}(x,function(T,b){var M,P=0,Y=null,H=0;for(M=0;M<b.length;M++)H+=b[M].length;switch(T){case"string":return b.join("");case"array":return Array.prototype.concat.apply([],b);case"uint8array":for(Y=new Uint8Array(H),M=0;M<b.length;M++)Y.set(b[M],P),P+=b[M].length;return Y;case"nodebuffer":return Buffer.concat(b);default:throw new Error("concat : unsupported type '"+T+"'")}}(w,y),_);g(C)}catch(T){m(T)}y=[]}).resume()})}function h(p,d,g){var m=d;switch(d){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=d,this._mimeType=g,s.checkSupport(m),this._worker=p.pipe(new o(m)),p.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}h.prototype={accumulate:function(p){return f(this,p)},on:function(p,d){var g=this;return p==="data"?this._worker.on(p,function(m){d.call(g,m.data,m.meta)}):this._worker.on(p,function(){s.delay(d,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var s=t("./utils"),o=t("./support"),a=t("./nodejsUtils"),l=t("./stream/GenericWorker"),A=new Array(256),c=0;c<256;c++)A[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;A[254]=A[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):function(p){var d,g,m,y,w,x=p.length,_=0;for(y=0;y<x;y++)(64512&(g=p.charCodeAt(y)))==55296&&y+1<x&&(64512&(m=p.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),y++),_+=g<128?1:g<2048?2:g<65536?3:4;for(d=o.uint8array?new Uint8Array(_):new Array(_),y=w=0;w<_;y++)(64512&(g=p.charCodeAt(y)))==55296&&y+1<x&&(64512&(m=p.charCodeAt(y+1)))==56320&&(g=65536+(g-55296<<10)+(m-56320),y++),g<128?d[w++]=g:(g<2048?d[w++]=192|g>>>6:(g<65536?d[w++]=224|g>>>12:(d[w++]=240|g>>>18,d[w++]=128|g>>>12&63),d[w++]=128|g>>>6&63),d[w++]=128|63&g);return d}(h)},i.utf8decode=function(h){return o.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):function(p){var d,g,m,y,w=p.length,x=new Array(2*w);for(d=g=0;d<w;)if((m=p[d++])<128)x[g++]=m;else if(4<(y=A[m]))x[g++]=65533,d+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&d<w;)m=m<<6|63&p[d++],y--;1<y?x[g++]=65533:m<65536?x[g++]=m:(m-=65536,x[g++]=55296|m>>10&1023,x[g++]=56320|1023&m)}return x.length!==g&&(x.subarray?x=x.subarray(0,g):x.length=g),s.applyFromCharCode(x)}(h=s.transformTo(o.uint8array?"uint8array":"array",h))},s.inherits(u,l),u.prototype.processChunk=function(h){var p=s.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var d=p;(p=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),p.set(d,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=function(y,w){var x;for((w=w||y.length)>y.length&&(w=y.length),x=w-1;0<=x&&(192&y[x])==128;)x--;return x<0||x===0?w:x+A[y[x]]>w?x:w}(p),m=p;g!==p.length&&(o.uint8array?(m=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(m=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:i.utf8decode(m),meta:h.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(f,l),f.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var s=t("./support"),o=t("./base64"),a=t("./nodejsUtils"),l=t("./external");function A(d){return d}function c(d,g){for(var m=0;m<d.length;++m)g[m]=255&d.charCodeAt(m);return g}t("setimmediate"),i.newBlob=function(d,g){i.checkSupport("blob");try{return new Blob([d],{type:g})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(d),m.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(d,g,m){var y=[],w=0,x=d.length;if(x<=m)return String.fromCharCode.apply(null,d);for(;w<x;)g==="array"||g==="nodebuffer"?y.push(String.fromCharCode.apply(null,d.slice(w,Math.min(w+m,x)))):y.push(String.fromCharCode.apply(null,d.subarray(w,Math.min(w+m,x)))),w+=m;return y.join("")},stringifyByChar:function(d){for(var g="",m=0;m<d.length;m++)g+=String.fromCharCode(d[m]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function f(d){var g=65536,m=i.getTypeOf(d),y=!0;if(m==="uint8array"?y=u.applyCanBeUsed.uint8array:m==="nodebuffer"&&(y=u.applyCanBeUsed.nodebuffer),y)for(;1<g;)try{return u.stringifyByChunk(d,m,g)}catch{g=Math.floor(g/2)}return u.stringifyByChar(d)}function h(d,g){for(var m=0;m<d.length;m++)g[m]=d[m];return g}i.applyFromCharCode=f;var p={};p.string={string:A,array:function(d){return c(d,new Array(d.length))},arraybuffer:function(d){return p.string.uint8array(d).buffer},uint8array:function(d){return c(d,new Uint8Array(d.length))},nodebuffer:function(d){return c(d,a.allocBuffer(d.length))}},p.array={string:f,array:A,arraybuffer:function(d){return new Uint8Array(d).buffer},uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(d)}},p.arraybuffer={string:function(d){return f(new Uint8Array(d))},array:function(d){return h(new Uint8Array(d),new Array(d.byteLength))},arraybuffer:A,uint8array:function(d){return new Uint8Array(d)},nodebuffer:function(d){return a.newBufferFrom(new Uint8Array(d))}},p.uint8array={string:f,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return d.buffer},uint8array:A,nodebuffer:function(d){return a.newBufferFrom(d)}},p.nodebuffer={string:f,array:function(d){return h(d,new Array(d.length))},arraybuffer:function(d){return p.nodebuffer.uint8array(d).buffer},uint8array:function(d){return h(d,new Uint8Array(d.length))},nodebuffer:A},i.transformTo=function(d,g){if(g=g||"",!d)return g;i.checkSupport(d);var m=i.getTypeOf(g);return p[m][d](g)},i.resolve=function(d){for(var g=d.split("/"),m=[],y=0;y<g.length;y++){var w=g[y];w==="."||w===""&&y!==0&&y!==g.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},i.getTypeOf=function(d){return typeof d=="string"?"string":Object.prototype.toString.call(d)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(d)?"nodebuffer":s.uint8array&&d instanceof Uint8Array?"uint8array":s.arraybuffer&&d instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(d){if(!s[d.toLowerCase()])throw new Error(d+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(d){var g,m,y="";for(m=0;m<(d||"").length;m++)y+="\\x"+((g=d.charCodeAt(m))<16?"0":"")+g.toString(16).toUpperCase();return y},i.delay=function(d,g,m){setImmediate(function(){d.apply(m||null,g||[])})},i.inherits=function(d,g){function m(){}m.prototype=g.prototype,d.prototype=new m},i.extend=function(){var d,g,m={};for(d=0;d<arguments.length;d++)for(g in arguments[d])Object.prototype.hasOwnProperty.call(arguments[d],g)&&m[g]===void 0&&(m[g]=arguments[d][g]);return m},i.prepareContent=function(d,g,m,y,w){return l.Promise.resolve(g).then(function(x){return s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new l.Promise(function(_,C){var T=new FileReader;T.onload=function(b){_(b.target.result)},T.onerror=function(b){C(b.target.error)},T.readAsArrayBuffer(x)}):x}).then(function(x){var _=i.getTypeOf(x);return _?(_==="arraybuffer"?x=i.transformTo("uint8array",x):_==="string"&&(w?x=o.decode(x):m&&y!==!0&&(x=function(C){return c(C,s.uint8array?new Uint8Array(C.length):new Array(C.length))}(x))),x):l.Promise.reject(new Error("Can't read the data of '"+d+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./signature"),l=t("./zipEntry"),A=t("./support");function c(u){this.files=[],this.loadOptions=u}c.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(u)+")")}},isSignature:function(u,f){var h=this.reader.index;this.reader.setIndex(u);var p=this.reader.readString(4)===f;return this.reader.setIndex(h),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=A.uint8array?"uint8array":"array",h=o.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,h,p=this.zip64EndOfCentralSize-44;0<p;)u=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var p=f-h;if(0<p)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var s=t("./reader/readerFor"),o=t("./utils"),a=t("./compressedObject"),l=t("./crc32"),A=t("./utf8"),c=t("./compressions"),u=t("./support");function f(h,p){this.options=h,this.loadOptions=p}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var p,d;if(h.skip(22),this.fileNameLength=h.readInt(2),d=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(d),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(g){for(var m in c)if(Object.prototype.hasOwnProperty.call(c,m)&&c[m].magic===g)return c[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var p=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(p),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var p,d,g,m=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<m;)p=h.readInt(2),d=h.readInt(2),g=h.readData(d),this.extraFields[p]={id:p,length:d,value:g};h.setIndex(m)},handleUTF8:function(){var h=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var d=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(d)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var m=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var p=s(h.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:A.utf8decode(p.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var p=s(h.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:A.utf8decode(p.readData(h.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function s(p,d,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=d,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),l=t("./utf8"),A=t("./compressedObject"),c=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var d=null,g="string";try{if(!p)throw new Error("No output type specified.");var m=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),d=this._decompressWorker();var y=!this._dataBinary;y&&!m&&(d=d.pipe(new l.Utf8EncodeWorker)),!y&&m&&(d=d.pipe(new l.Utf8DecodeWorker))}catch(w){(d=new c("error")).error(w)}return new o(d,g,"")},async:function(p,d){return this.internalStream(p).accumulate(d)},nodeStream:function(p,d){return this.internalStream(p||"nodebuffer").toNodejsStream(d)},_compressWorker:function(p,d){if(this._data instanceof A&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),A.createWorkerFrom(g,p,d)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)s.prototype[u[h]]=f;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var A=0,c=new l(p),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),o=function(){u.data=A=++A%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var d=s.document.createElement("script");d.onreadystatechange=function(){p(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},s.document.documentElement.appendChild(d)}:function(){setTimeout(p,0)};else{var f=new s.MessageChannel;f.port1.onmessage=p,o=function(){f.port2.postMessage(0)}}var h=[];function p(){var d,g;a=!0;for(var m=h.length;m;){for(g=h,h=[],d=-1;++d<m;)g[d]();m=h.length}a=!1}r.exports=function(d){h.push(d)!==1||a||o()}}).call(this,typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var s=t("immediate");function o(){}var a={},l=["REJECTED"],A=["FULFILLED"],c=["PENDING"];function u(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,m!==o&&d(this,m)}function f(m,y,w){this.promise=m,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function h(m,y,w){s(function(){var x;try{x=y(w)}catch(_){return a.reject(m,_)}x===m?a.reject(m,new TypeError("Cannot resolve promise with itself")):a.resolve(m,x)})}function p(m){var y=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof y=="function")return function(){y.apply(m,arguments)}}function d(m,y){var w=!1;function x(T){w||(w=!0,a.reject(m,T))}function _(T){w||(w=!0,a.resolve(m,T))}var C=g(function(){y(_,x)});C.status==="error"&&x(C.value)}function g(m,y){var w={};try{w.value=m(y),w.status="success"}catch(x){w.status="error",w.value=x}return w}(r.exports=u).prototype.finally=function(m){if(typeof m!="function")return this;var y=this.constructor;return this.then(function(w){return y.resolve(m()).then(function(){return w})},function(w){return y.resolve(m()).then(function(){throw w})})},u.prototype.catch=function(m){return this.then(null,m)},u.prototype.then=function(m,y){if(typeof m!="function"&&this.state===A||typeof y!="function"&&this.state===l)return this;var w=new this.constructor(o);return this.state!==c?h(w,this.state===A?m:y,this.outcome):this.queue.push(new f(w,m,y)),w},f.prototype.callFulfilled=function(m){a.resolve(this.promise,m)},f.prototype.otherCallFulfilled=function(m){h(this.promise,this.onFulfilled,m)},f.prototype.callRejected=function(m){a.reject(this.promise,m)},f.prototype.otherCallRejected=function(m){h(this.promise,this.onRejected,m)},a.resolve=function(m,y){var w=g(p,y);if(w.status==="error")return a.reject(m,w.value);var x=w.value;if(x)d(m,x);else{m.state=A,m.outcome=y;for(var _=-1,C=m.queue.length;++_<C;)m.queue[_].callFulfilled(y)}return m},a.reject=function(m,y){m.state=l,m.outcome=y;for(var w=-1,x=m.queue.length;++w<x;)m.queue[w].callRejected(y);return m},u.resolve=function(m){return m instanceof this?m:a.resolve(new this(o),m)},u.reject=function(m){var y=new this(o);return a.reject(y,m)},u.all=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,x=!1;if(!w)return this.resolve([]);for(var _=new Array(w),C=0,T=-1,b=new this(o);++T<w;)M(m[T],T);return b;function M(P,Y){y.resolve(P).then(function(H){_[Y]=H,++C!==w||x||(x=!0,a.resolve(b,_))},function(H){x||(x=!0,a.reject(b,H))})}},u.race=function(m){var y=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,x=!1;if(!w)return this.resolve([]);for(var _=-1,C=new this(o);++_<w;)T=m[_],y.resolve(T).then(function(b){x||(x=!0,a.resolve(C,b))},function(b){x||(x=!0,a.reject(C,b))});var T;return C}},{immediate:36}],38:[function(t,r,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var s=t("./zlib/deflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/messages"),A=t("./zlib/zstream"),c=Object.prototype.toString,u=0,f=-1,h=0,p=8;function d(m){if(!(this instanceof d))return new d(m);this.options=o.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},m||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var w=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(w!==u)throw new Error(l[w]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var x;if(x=typeof y.dictionary=="string"?a.string2buf(y.dictionary):c.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(w=s.deflateSetDictionary(this.strm,x))!==u)throw new Error(l[w]);this._dict_set=!0}}function g(m,y){var w=new d(y);if(w.push(m,!0),w.err)throw w.msg||l[w.err];return w.result}d.prototype.push=function(m,y){var w,x,_=this.strm,C=this.options.chunkSize;if(this.ended)return!1;x=y===~~y?y:y===!0?4:0,typeof m=="string"?_.input=a.string2buf(m):c.call(m)==="[object ArrayBuffer]"?_.input=new Uint8Array(m):_.input=m,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new o.Buf8(C),_.next_out=0,_.avail_out=C),(w=s.deflate(_,x))!==1&&w!==u)return this.onEnd(w),!(this.ended=!0);_.avail_out!==0&&(_.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(_.output,_.next_out))):this.onData(o.shrinkBuf(_.output,_.next_out)))}while((0<_.avail_in||_.avail_out===0)&&w!==1);return x===4?(w=s.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===u):x!==2||(this.onEnd(u),!(_.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=d,i.deflate=g,i.deflateRaw=function(m,y){return(y=y||{}).raw=!0,g(m,y)},i.gzip=function(m,y){return(y=y||{}).gzip=!0,g(m,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),l=t("./zlib/constants"),A=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),f=Object.prototype.toString;function h(d){if(!(this instanceof h))return new h(d);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},d||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||d&&d.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,g.windowBits);if(m!==l.Z_OK)throw new Error(A[m]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function p(d,g){var m=new h(g);if(m.push(d,!0),m.err)throw m.msg||A[m.err];return m.result}h.prototype.push=function(d,g){var m,y,w,x,_,C,T=this.strm,b=this.options.chunkSize,M=this.options.dictionary,P=!1;if(this.ended)return!1;y=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof d=="string"?T.input=a.binstring2buf(d):f.call(d)==="[object ArrayBuffer]"?T.input=new Uint8Array(d):T.input=d,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(b),T.next_out=0,T.avail_out=b),(m=s.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(C=typeof M=="string"?a.string2buf(M):f.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,m=s.inflateSetDictionary(this.strm,C)),m===l.Z_BUF_ERROR&&P===!0&&(m=l.Z_OK,P=!1),m!==l.Z_STREAM_END&&m!==l.Z_OK)return this.onEnd(m),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&m!==l.Z_STREAM_END&&(T.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=a.utf8border(T.output,T.next_out),x=T.next_out-w,_=a.buf2string(T.output,w),T.next_out=x,T.avail_out=b-x,x&&o.arraySet(T.output,T.output,w,x,0),this.onData(_)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(P=!0)}while((0<T.avail_in||T.avail_out===0)&&m!==l.Z_STREAM_END);return m===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},h.prototype.onData=function(d){this.chunks.push(d)},h.prototype.onEnd=function(d){d===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=d,this.msg=this.strm.msg},i.Inflate=h,i.inflate=p,i.inflateRaw=function(d,g){return(g=g||{}).raw=!0,p(d,g)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var c=A.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var u in c)c.hasOwnProperty(u)&&(l[u]=c[u])}}return l},i.shrinkBuf=function(l,A){return l.length===A?l:l.subarray?l.subarray(0,A):(l.length=A,l)};var o={arraySet:function(l,A,c,u,f){if(A.subarray&&l.subarray)l.set(A.subarray(c,c+u),f);else for(var h=0;h<u;h++)l[f+h]=A[c+h]},flattenChunks:function(l){var A,c,u,f,h,p;for(A=u=0,c=l.length;A<c;A++)u+=l[A].length;for(p=new Uint8Array(u),A=f=0,c=l.length;A<c;A++)h=l[A],p.set(h,f),f+=h.length;return p}},a={arraySet:function(l,A,c,u,f){for(var h=0;h<u;h++)l[f+h]=A[c+h]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(t,r,i){var s=t("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),A=0;A<256;A++)l[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function c(u,f){if(f<65537&&(u.subarray&&a||!u.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(u,f));for(var h="",p=0;p<f;p++)h+=String.fromCharCode(u[p]);return h}l[254]=l[254]=1,i.string2buf=function(u){var f,h,p,d,g,m=u.length,y=0;for(d=0;d<m;d++)(64512&(h=u.charCodeAt(d)))==55296&&d+1<m&&(64512&(p=u.charCodeAt(d+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),d++),y+=h<128?1:h<2048?2:h<65536?3:4;for(f=new s.Buf8(y),d=g=0;g<y;d++)(64512&(h=u.charCodeAt(d)))==55296&&d+1<m&&(64512&(p=u.charCodeAt(d+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),d++),h<128?f[g++]=h:(h<2048?f[g++]=192|h>>>6:(h<65536?f[g++]=224|h>>>12:(f[g++]=240|h>>>18,f[g++]=128|h>>>12&63),f[g++]=128|h>>>6&63),f[g++]=128|63&h);return f},i.buf2binstring=function(u){return c(u,u.length)},i.binstring2buf=function(u){for(var f=new s.Buf8(u.length),h=0,p=f.length;h<p;h++)f[h]=u.charCodeAt(h);return f},i.buf2string=function(u,f){var h,p,d,g,m=f||u.length,y=new Array(2*m);for(h=p=0;h<m;)if((d=u[h++])<128)y[p++]=d;else if(4<(g=l[d]))y[p++]=65533,h+=g-1;else{for(d&=g===2?31:g===3?15:7;1<g&&h<m;)d=d<<6|63&u[h++],g--;1<g?y[p++]=65533:d<65536?y[p++]=d:(d-=65536,y[p++]=55296|d>>10&1023,y[p++]=56320|1023&d)}return c(y,p)},i.utf8border=function(u,f){var h;for((f=f||u.length)>u.length&&(f=u.length),h=f-1;0<=h&&(192&u[h])==128;)h--;return h<0||h===0?f:h+l[u[h]]>f?h:f}},{"./common":41}],43:[function(t,r,i){r.exports=function(s,o,a,l){for(var A=65535&s|0,c=s>>>16&65535|0,u=0;a!==0;){for(a-=u=2e3<a?2e3:a;c=c+(A=A+o[l++]|0)|0,--u;);A%=65521,c%=65521}return A|c<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var A=0;A<8;A++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,A){var c=s,u=A+l;o^=-1;for(var f=A;f<u;f++)o=o>>>8^c[255&(o^a[f])];return-1^o}},{}],46:[function(t,r,i){var s,o=t("../utils/common"),a=t("./trees"),l=t("./adler32"),A=t("./crc32"),c=t("./messages"),u=0,f=4,h=0,p=-2,d=-1,g=4,m=2,y=8,w=9,x=286,_=30,C=19,T=2*x+1,b=15,M=3,P=258,Y=P+M+1,H=42,I=113,v=1,E=2,F=3,D=4;function O(L,ue){return L.msg=c[ue],ue}function z(L){return(L<<1)-(4<L?9:0)}function K(L){for(var ue=L.length;0<=--ue;)L[ue]=0}function Q(L){var ue=L.state,Ae=ue.pending;Ae>L.avail_out&&(Ae=L.avail_out),Ae!==0&&(o.arraySet(L.output,ue.pending_buf,ue.pending_out,Ae,L.next_out),L.next_out+=Ae,ue.pending_out+=Ae,L.total_out+=Ae,L.avail_out-=Ae,ue.pending-=Ae,ue.pending===0&&(ue.pending_out=0))}function B(L,ue){a._tr_flush_block(L,0<=L.block_start?L.block_start:-1,L.strstart-L.block_start,ue),L.block_start=L.strstart,Q(L.strm)}function j(L,ue){L.pending_buf[L.pending++]=ue}function ee(L,ue){L.pending_buf[L.pending++]=ue>>>8&255,L.pending_buf[L.pending++]=255&ue}function U(L,ue){var Ae,q,J=L.max_chain_length,ce=L.strstart,be=L.prev_length,Be=L.nice_match,k=L.strstart>L.w_size-Y?L.strstart-(L.w_size-Y):0,W=L.window,re=L.w_mask,he=L.prev,me=L.strstart+P,G=W[ce+be-1],R=W[ce+be];L.prev_length>=L.good_match&&(J>>=2),Be>L.lookahead&&(Be=L.lookahead);do if(W[(Ae=ue)+be]===R&&W[Ae+be-1]===G&&W[Ae]===W[ce]&&W[++Ae]===W[ce+1]){ce+=2,Ae++;do;while(W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&W[++ce]===W[++Ae]&&ce<me);if(q=P-(me-ce),ce=me-P,be<q){if(L.match_start=ue,Be<=(be=q))break;G=W[ce+be-1],R=W[ce+be]}}while((ue=he[ue&re])>k&&--J!=0);return be<=L.lookahead?be:L.lookahead}function X(L){var ue,Ae,q,J,ce,be,Be,k,W,re,he=L.w_size;do{if(J=L.window_size-L.lookahead-L.strstart,L.strstart>=he+(he-Y)){for(o.arraySet(L.window,L.window,he,he,0),L.match_start-=he,L.strstart-=he,L.block_start-=he,ue=Ae=L.hash_size;q=L.head[--ue],L.head[ue]=he<=q?q-he:0,--Ae;);for(ue=Ae=he;q=L.prev[--ue],L.prev[ue]=he<=q?q-he:0,--Ae;);J+=he}if(L.strm.avail_in===0)break;if(be=L.strm,Be=L.window,k=L.strstart+L.lookahead,W=J,re=void 0,re=be.avail_in,W<re&&(re=W),Ae=re===0?0:(be.avail_in-=re,o.arraySet(Be,be.input,be.next_in,re,k),be.state.wrap===1?be.adler=l(be.adler,Be,re,k):be.state.wrap===2&&(be.adler=A(be.adler,Be,re,k)),be.next_in+=re,be.total_in+=re,re),L.lookahead+=Ae,L.lookahead+L.insert>=M)for(ce=L.strstart-L.insert,L.ins_h=L.window[ce],L.ins_h=(L.ins_h<<L.hash_shift^L.window[ce+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[ce+M-1])&L.hash_mask,L.prev[ce&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=ce,ce++,L.insert--,!(L.lookahead+L.insert<M)););}while(L.lookahead<Y&&L.strm.avail_in!==0)}function ae(L,ue){for(var Ae,q;;){if(L.lookahead<Y){if(X(L),L.lookahead<Y&&ue===u)return v;if(L.lookahead===0)break}if(Ae=0,L.lookahead>=M&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+M-1])&L.hash_mask,Ae=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),Ae!==0&&L.strstart-Ae<=L.w_size-Y&&(L.match_length=U(L,Ae)),L.match_length>=M)if(q=a._tr_tally(L,L.strstart-L.match_start,L.match_length-M),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=M){for(L.match_length--;L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+M-1])&L.hash_mask,Ae=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart,--L.match_length!=0;);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else q=a._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(q&&(B(L,!1),L.strm.avail_out===0))return v}return L.insert=L.strstart<M-1?L.strstart:M-1,ue===f?(B(L,!0),L.strm.avail_out===0?F:D):L.last_lit&&(B(L,!1),L.strm.avail_out===0)?v:E}function se(L,ue){for(var Ae,q,J;;){if(L.lookahead<Y){if(X(L),L.lookahead<Y&&ue===u)return v;if(L.lookahead===0)break}if(Ae=0,L.lookahead>=M&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+M-1])&L.hash_mask,Ae=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=M-1,Ae!==0&&L.prev_length<L.max_lazy_match&&L.strstart-Ae<=L.w_size-Y&&(L.match_length=U(L,Ae),L.match_length<=5&&(L.strategy===1||L.match_length===M&&4096<L.strstart-L.match_start)&&(L.match_length=M-1)),L.prev_length>=M&&L.match_length<=L.prev_length){for(J=L.strstart+L.lookahead-M,q=a._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-M),L.lookahead-=L.prev_length-1,L.prev_length-=2;++L.strstart<=J&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+M-1])&L.hash_mask,Ae=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),--L.prev_length!=0;);if(L.match_available=0,L.match_length=M-1,L.strstart++,q&&(B(L,!1),L.strm.avail_out===0))return v}else if(L.match_available){if((q=a._tr_tally(L,0,L.window[L.strstart-1]))&&B(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return v}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(q=a._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<M-1?L.strstart:M-1,ue===f?(B(L,!0),L.strm.avail_out===0?F:D):L.last_lit&&(B(L,!1),L.strm.avail_out===0)?v:E}function de(L,ue,Ae,q,J){this.good_length=L,this.max_lazy=ue,this.nice_length=Ae,this.max_chain=q,this.func=J}function oe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*_+1)),this.bl_tree=new o.Buf16(2*(2*C+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(b+1),this.heap=new o.Buf16(2*x+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*x+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pe(L){var ue;return L&&L.state?(L.total_in=L.total_out=0,L.data_type=m,(ue=L.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?H:I,L.adler=ue.wrap===2?0:1,ue.last_flush=u,a._tr_init(ue),h):O(L,p)}function _e(L){var ue=pe(L);return ue===h&&function(Ae){Ae.window_size=2*Ae.w_size,K(Ae.head),Ae.max_lazy_match=s[Ae.level].max_lazy,Ae.good_match=s[Ae.level].good_length,Ae.nice_match=s[Ae.level].nice_length,Ae.max_chain_length=s[Ae.level].max_chain,Ae.strstart=0,Ae.block_start=0,Ae.lookahead=0,Ae.insert=0,Ae.match_length=Ae.prev_length=M-1,Ae.match_available=0,Ae.ins_h=0}(L.state),ue}function xe(L,ue,Ae,q,J,ce){if(!L)return p;var be=1;if(ue===d&&(ue=6),q<0?(be=0,q=-q):15<q&&(be=2,q-=16),J<1||w<J||Ae!==y||q<8||15<q||ue<0||9<ue||ce<0||g<ce)return O(L,p);q===8&&(q=9);var Be=new oe;return(L.state=Be).strm=L,Be.wrap=be,Be.gzhead=null,Be.w_bits=q,Be.w_size=1<<Be.w_bits,Be.w_mask=Be.w_size-1,Be.hash_bits=J+7,Be.hash_size=1<<Be.hash_bits,Be.hash_mask=Be.hash_size-1,Be.hash_shift=~~((Be.hash_bits+M-1)/M),Be.window=new o.Buf8(2*Be.w_size),Be.head=new o.Buf16(Be.hash_size),Be.prev=new o.Buf16(Be.w_size),Be.lit_bufsize=1<<J+6,Be.pending_buf_size=4*Be.lit_bufsize,Be.pending_buf=new o.Buf8(Be.pending_buf_size),Be.d_buf=1*Be.lit_bufsize,Be.l_buf=3*Be.lit_bufsize,Be.level=ue,Be.strategy=ce,Be.method=Ae,_e(L)}s=[new de(0,0,0,0,function(L,ue){var Ae=65535;for(Ae>L.pending_buf_size-5&&(Ae=L.pending_buf_size-5);;){if(L.lookahead<=1){if(X(L),L.lookahead===0&&ue===u)return v;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var q=L.block_start+Ae;if((L.strstart===0||L.strstart>=q)&&(L.lookahead=L.strstart-q,L.strstart=q,B(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-Y&&(B(L,!1),L.strm.avail_out===0))return v}return L.insert=0,ue===f?(B(L,!0),L.strm.avail_out===0?F:D):(L.strstart>L.block_start&&(B(L,!1),L.strm.avail_out),v)}),new de(4,4,8,4,ae),new de(4,5,16,8,ae),new de(4,6,32,32,ae),new de(4,4,16,16,se),new de(8,16,32,32,se),new de(8,16,128,128,se),new de(8,32,128,256,se),new de(32,128,258,1024,se),new de(32,258,258,4096,se)],i.deflateInit=function(L,ue){return xe(L,ue,y,15,8,0)},i.deflateInit2=xe,i.deflateReset=_e,i.deflateResetKeep=pe,i.deflateSetHeader=function(L,ue){return L&&L.state?L.state.wrap!==2?p:(L.state.gzhead=ue,h):p},i.deflate=function(L,ue){var Ae,q,J,ce;if(!L||!L.state||5<ue||ue<0)return L?O(L,p):p;if(q=L.state,!L.output||!L.input&&L.avail_in!==0||q.status===666&&ue!==f)return O(L,L.avail_out===0?-5:p);if(q.strm=L,Ae=q.last_flush,q.last_flush=ue,q.status===H)if(q.wrap===2)L.adler=0,j(q,31),j(q,139),j(q,8),q.gzhead?(j(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),j(q,255&q.gzhead.time),j(q,q.gzhead.time>>8&255),j(q,q.gzhead.time>>16&255),j(q,q.gzhead.time>>24&255),j(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),j(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(j(q,255&q.gzhead.extra.length),j(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(L.adler=A(L.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(j(q,0),j(q,0),j(q,0),j(q,0),j(q,0),j(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),j(q,3),q.status=I);else{var be=y+(q.w_bits-8<<4)<<8;be|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(be|=32),be+=31-be%31,q.status=I,ee(q,be),q.strstart!==0&&(ee(q,L.adler>>>16),ee(q,65535&L.adler)),L.adler=1}if(q.status===69)if(q.gzhead.extra){for(J=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),Q(L),J=q.pending,q.pending!==q.pending_buf_size));)j(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){J=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),Q(L),J=q.pending,q.pending===q.pending_buf_size)){ce=1;break}ce=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,j(q,ce)}while(ce!==0);q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),ce===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){J=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),Q(L),J=q.pending,q.pending===q.pending_buf_size)){ce=1;break}ce=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,j(q,ce)}while(ce!==0);q.gzhead.hcrc&&q.pending>J&&(L.adler=A(L.adler,q.pending_buf,q.pending-J,J)),ce===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&Q(L),q.pending+2<=q.pending_buf_size&&(j(q,255&L.adler),j(q,L.adler>>8&255),L.adler=0,q.status=I)):q.status=I),q.pending!==0){if(Q(L),L.avail_out===0)return q.last_flush=-1,h}else if(L.avail_in===0&&z(ue)<=z(Ae)&&ue!==f)return O(L,-5);if(q.status===666&&L.avail_in!==0)return O(L,-5);if(L.avail_in!==0||q.lookahead!==0||ue!==u&&q.status!==666){var Be=q.strategy===2?function(k,W){for(var re;;){if(k.lookahead===0&&(X(k),k.lookahead===0)){if(W===u)return v;break}if(k.match_length=0,re=a._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,re&&(B(k,!1),k.strm.avail_out===0))return v}return k.insert=0,W===f?(B(k,!0),k.strm.avail_out===0?F:D):k.last_lit&&(B(k,!1),k.strm.avail_out===0)?v:E}(q,ue):q.strategy===3?function(k,W){for(var re,he,me,G,R=k.window;;){if(k.lookahead<=P){if(X(k),k.lookahead<=P&&W===u)return v;if(k.lookahead===0)break}if(k.match_length=0,k.lookahead>=M&&0<k.strstart&&(he=R[me=k.strstart-1])===R[++me]&&he===R[++me]&&he===R[++me]){G=k.strstart+P;do;while(he===R[++me]&&he===R[++me]&&he===R[++me]&&he===R[++me]&&he===R[++me]&&he===R[++me]&&he===R[++me]&&he===R[++me]&&me<G);k.match_length=P-(G-me),k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=M?(re=a._tr_tally(k,1,k.match_length-M),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(re=a._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),re&&(B(k,!1),k.strm.avail_out===0))return v}return k.insert=0,W===f?(B(k,!0),k.strm.avail_out===0?F:D):k.last_lit&&(B(k,!1),k.strm.avail_out===0)?v:E}(q,ue):s[q.level].func(q,ue);if(Be!==F&&Be!==D||(q.status=666),Be===v||Be===F)return L.avail_out===0&&(q.last_flush=-1),h;if(Be===E&&(ue===1?a._tr_align(q):ue!==5&&(a._tr_stored_block(q,0,0,!1),ue===3&&(K(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),Q(L),L.avail_out===0))return q.last_flush=-1,h}return ue!==f?h:q.wrap<=0?1:(q.wrap===2?(j(q,255&L.adler),j(q,L.adler>>8&255),j(q,L.adler>>16&255),j(q,L.adler>>24&255),j(q,255&L.total_in),j(q,L.total_in>>8&255),j(q,L.total_in>>16&255),j(q,L.total_in>>24&255)):(ee(q,L.adler>>>16),ee(q,65535&L.adler)),Q(L),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?h:1)},i.deflateEnd=function(L){var ue;return L&&L.state?(ue=L.state.status)!==H&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==I&&ue!==666?O(L,p):(L.state=null,ue===I?O(L,-3):h):p},i.deflateSetDictionary=function(L,ue){var Ae,q,J,ce,be,Be,k,W,re=ue.length;if(!L||!L.state||(ce=(Ae=L.state).wrap)===2||ce===1&&Ae.status!==H||Ae.lookahead)return p;for(ce===1&&(L.adler=l(L.adler,ue,re,0)),Ae.wrap=0,re>=Ae.w_size&&(ce===0&&(K(Ae.head),Ae.strstart=0,Ae.block_start=0,Ae.insert=0),W=new o.Buf8(Ae.w_size),o.arraySet(W,ue,re-Ae.w_size,Ae.w_size,0),ue=W,re=Ae.w_size),be=L.avail_in,Be=L.next_in,k=L.input,L.avail_in=re,L.next_in=0,L.input=ue,X(Ae);Ae.lookahead>=M;){for(q=Ae.strstart,J=Ae.lookahead-(M-1);Ae.ins_h=(Ae.ins_h<<Ae.hash_shift^Ae.window[q+M-1])&Ae.hash_mask,Ae.prev[q&Ae.w_mask]=Ae.head[Ae.ins_h],Ae.head[Ae.ins_h]=q,q++,--J;);Ae.strstart=q,Ae.lookahead=M-1,X(Ae)}return Ae.strstart+=Ae.lookahead,Ae.block_start=Ae.strstart,Ae.insert=Ae.lookahead,Ae.lookahead=0,Ae.match_length=Ae.prev_length=M-1,Ae.match_available=0,L.next_in=Be,L.input=k,L.avail_in=be,Ae.wrap=ce,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(s,o){var a,l,A,c,u,f,h,p,d,g,m,y,w,x,_,C,T,b,M,P,Y,H,I,v,E;a=s.state,l=s.next_in,v=s.input,A=l+(s.avail_in-5),c=s.next_out,E=s.output,u=c-(o-s.avail_out),f=c+(s.avail_out-257),h=a.dmax,p=a.wsize,d=a.whave,g=a.wnext,m=a.window,y=a.hold,w=a.bits,x=a.lencode,_=a.distcode,C=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;e:do{w<15&&(y+=v[l++]<<w,w+=8,y+=v[l++]<<w,w+=8),b=x[y&C];t:for(;;){if(y>>>=M=b>>>24,w-=M,(M=b>>>16&255)===0)E[c++]=65535&b;else{if(!(16&M)){if(!(64&M)){b=x[(65535&b)+(y&(1<<M)-1)];continue t}if(32&M){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}P=65535&b,(M&=15)&&(w<M&&(y+=v[l++]<<w,w+=8),P+=y&(1<<M)-1,y>>>=M,w-=M),w<15&&(y+=v[l++]<<w,w+=8,y+=v[l++]<<w,w+=8),b=_[y&T];n:for(;;){if(y>>>=M=b>>>24,w-=M,!(16&(M=b>>>16&255))){if(!(64&M)){b=_[(65535&b)+(y&(1<<M)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(Y=65535&b,w<(M&=15)&&(y+=v[l++]<<w,(w+=8)<M&&(y+=v[l++]<<w,w+=8)),h<(Y+=y&(1<<M)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=M,w-=M,(M=c-u)<Y){if(d<(M=Y-M)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(I=m,(H=0)===g){if(H+=p-M,M<P){for(P-=M;E[c++]=m[H++],--M;);H=c-Y,I=E}}else if(g<M){if(H+=p+g-M,(M-=g)<P){for(P-=M;E[c++]=m[H++],--M;);if(H=0,g<P){for(P-=M=g;E[c++]=m[H++],--M;);H=c-Y,I=E}}}else if(H+=g-M,M<P){for(P-=M;E[c++]=m[H++],--M;);H=c-Y,I=E}for(;2<P;)E[c++]=I[H++],E[c++]=I[H++],E[c++]=I[H++],P-=3;P&&(E[c++]=I[H++],1<P&&(E[c++]=I[H++]))}else{for(H=c-Y;E[c++]=E[H++],E[c++]=E[H++],E[c++]=E[H++],2<(P-=3););P&&(E[c++]=E[H++],1<P&&(E[c++]=E[H++]))}break}}break}}while(l<A&&c<f);l-=P=w>>3,y&=(1<<(w-=P<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<A?A-l+5:5-(l-A),s.avail_out=c<f?f-c+257:257-(c-f),a.hold=y,a.bits=w}},{}],49:[function(t,r,i){var s=t("../utils/common"),o=t("./adler32"),a=t("./crc32"),l=t("./inffast"),A=t("./inftrees"),c=1,u=2,f=0,h=-2,p=1,d=852,g=592;function m(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(H){var I;return H&&H.state?(I=H.state,H.total_in=H.total_out=I.total=0,H.msg="",I.wrap&&(H.adler=1&I.wrap),I.mode=p,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new s.Buf32(d),I.distcode=I.distdyn=new s.Buf32(g),I.sane=1,I.back=-1,f):h}function x(H){var I;return H&&H.state?((I=H.state).wsize=0,I.whave=0,I.wnext=0,w(H)):h}function _(H,I){var v,E;return H&&H.state?(E=H.state,I<0?(v=0,I=-I):(v=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?h:(E.window!==null&&E.wbits!==I&&(E.window=null),E.wrap=v,E.wbits=I,x(H))):h}function C(H,I){var v,E;return H?(E=new y,(H.state=E).window=null,(v=_(H,I))!==f&&(H.state=null),v):h}var T,b,M=!0;function P(H){if(M){var I;for(T=new s.Buf32(512),b=new s.Buf32(32),I=0;I<144;)H.lens[I++]=8;for(;I<256;)H.lens[I++]=9;for(;I<280;)H.lens[I++]=7;for(;I<288;)H.lens[I++]=8;for(A(c,H.lens,0,288,T,0,H.work,{bits:9}),I=0;I<32;)H.lens[I++]=5;A(u,H.lens,0,32,b,0,H.work,{bits:5}),M=!1}H.lencode=T,H.lenbits=9,H.distcode=b,H.distbits=5}function Y(H,I,v,E){var F,D=H.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new s.Buf8(D.wsize)),E>=D.wsize?(s.arraySet(D.window,I,v-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(E<(F=D.wsize-D.wnext)&&(F=E),s.arraySet(D.window,I,v-E,F,D.wnext),(E-=F)?(s.arraySet(D.window,I,v-E,E,0),D.wnext=E,D.whave=D.wsize):(D.wnext+=F,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=F))),0}i.inflateReset=x,i.inflateReset2=_,i.inflateResetKeep=w,i.inflateInit=function(H){return C(H,15)},i.inflateInit2=C,i.inflate=function(H,I){var v,E,F,D,O,z,K,Q,B,j,ee,U,X,ae,se,de,oe,pe,_e,xe,L,ue,Ae,q,J=0,ce=new s.Buf8(4),be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return h;(v=H.state).mode===12&&(v.mode=13),O=H.next_out,F=H.output,K=H.avail_out,D=H.next_in,E=H.input,z=H.avail_in,Q=v.hold,B=v.bits,j=z,ee=K,ue=f;e:for(;;)switch(v.mode){case p:if(v.wrap===0){v.mode=13;break}for(;B<16;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(2&v.wrap&&Q===35615){ce[v.check=0]=255&Q,ce[1]=Q>>>8&255,v.check=a(v.check,ce,2,0),B=Q=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&Q)<<8)+(Q>>8))%31){H.msg="incorrect header check",v.mode=30;break}if((15&Q)!=8){H.msg="unknown compression method",v.mode=30;break}if(B-=4,L=8+(15&(Q>>>=4)),v.wbits===0)v.wbits=L;else if(L>v.wbits){H.msg="invalid window size",v.mode=30;break}v.dmax=1<<L,H.adler=v.check=1,v.mode=512&Q?10:12,B=Q=0;break;case 2:for(;B<16;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(v.flags=Q,(255&v.flags)!=8){H.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){H.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=Q>>8&1),512&v.flags&&(ce[0]=255&Q,ce[1]=Q>>>8&255,v.check=a(v.check,ce,2,0)),B=Q=0,v.mode=3;case 3:for(;B<32;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.head&&(v.head.time=Q),512&v.flags&&(ce[0]=255&Q,ce[1]=Q>>>8&255,ce[2]=Q>>>16&255,ce[3]=Q>>>24&255,v.check=a(v.check,ce,4,0)),B=Q=0,v.mode=4;case 4:for(;B<16;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.head&&(v.head.xflags=255&Q,v.head.os=Q>>8),512&v.flags&&(ce[0]=255&Q,ce[1]=Q>>>8&255,v.check=a(v.check,ce,2,0)),B=Q=0,v.mode=5;case 5:if(1024&v.flags){for(;B<16;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.length=Q,v.head&&(v.head.extra_len=Q),512&v.flags&&(ce[0]=255&Q,ce[1]=Q>>>8&255,v.check=a(v.check,ce,2,0)),B=Q=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(z<(U=v.length)&&(U=z),U&&(v.head&&(L=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),s.arraySet(v.head.extra,E,D,U,L)),512&v.flags&&(v.check=a(v.check,E,U,D)),z-=U,D+=U,v.length-=U),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(z===0)break e;for(U=0;L=E[D+U++],v.head&&L&&v.length<65536&&(v.head.name+=String.fromCharCode(L)),L&&U<z;);if(512&v.flags&&(v.check=a(v.check,E,U,D)),z-=U,D+=U,L)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(z===0)break e;for(U=0;L=E[D+U++],v.head&&L&&v.length<65536&&(v.head.comment+=String.fromCharCode(L)),L&&U<z;);if(512&v.flags&&(v.check=a(v.check,E,U,D)),z-=U,D+=U,L)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;B<16;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(Q!==(65535&v.check)){H.msg="header crc mismatch",v.mode=30;break}B=Q=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),H.adler=v.check=0,v.mode=12;break;case 10:for(;B<32;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}H.adler=v.check=m(Q),B=Q=0,v.mode=11;case 11:if(v.havedict===0)return H.next_out=O,H.avail_out=K,H.next_in=D,H.avail_in=z,v.hold=Q,v.bits=B,2;H.adler=v.check=1,v.mode=12;case 12:if(I===5||I===6)break e;case 13:if(v.last){Q>>>=7&B,B-=7&B,v.mode=27;break}for(;B<3;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}switch(v.last=1&Q,B-=1,3&(Q>>>=1)){case 0:v.mode=14;break;case 1:if(P(v),v.mode=20,I!==6)break;Q>>>=2,B-=2;break e;case 2:v.mode=17;break;case 3:H.msg="invalid block type",v.mode=30}Q>>>=2,B-=2;break;case 14:for(Q>>>=7&B,B-=7&B;B<32;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if((65535&Q)!=(Q>>>16^65535)){H.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&Q,B=Q=0,v.mode=15,I===6)break e;case 15:v.mode=16;case 16:if(U=v.length){if(z<U&&(U=z),K<U&&(U=K),U===0)break e;s.arraySet(F,E,D,U,O),z-=U,D+=U,K-=U,O+=U,v.length-=U;break}v.mode=12;break;case 17:for(;B<14;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(v.nlen=257+(31&Q),Q>>>=5,B-=5,v.ndist=1+(31&Q),Q>>>=5,B-=5,v.ncode=4+(15&Q),Q>>>=4,B-=4,286<v.nlen||30<v.ndist){H.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;B<3;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.lens[be[v.have++]]=7&Q,Q>>>=3,B-=3}for(;v.have<19;)v.lens[be[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,Ae={bits:v.lenbits},ue=A(0,v.lens,0,19,v.lencode,0,v.work,Ae),v.lenbits=Ae.bits,ue){H.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;de=(J=v.lencode[Q&(1<<v.lenbits)-1])>>>16&255,oe=65535&J,!((se=J>>>24)<=B);){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(oe<16)Q>>>=se,B-=se,v.lens[v.have++]=oe;else{if(oe===16){for(q=se+2;B<q;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(Q>>>=se,B-=se,v.have===0){H.msg="invalid bit length repeat",v.mode=30;break}L=v.lens[v.have-1],U=3+(3&Q),Q>>>=2,B-=2}else if(oe===17){for(q=se+3;B<q;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}B-=se,L=0,U=3+(7&(Q>>>=se)),Q>>>=3,B-=3}else{for(q=se+7;B<q;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}B-=se,L=0,U=11+(127&(Q>>>=se)),Q>>>=7,B-=7}if(v.have+U>v.nlen+v.ndist){H.msg="invalid bit length repeat",v.mode=30;break}for(;U--;)v.lens[v.have++]=L}}if(v.mode===30)break;if(v.lens[256]===0){H.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,Ae={bits:v.lenbits},ue=A(c,v.lens,0,v.nlen,v.lencode,0,v.work,Ae),v.lenbits=Ae.bits,ue){H.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,Ae={bits:v.distbits},ue=A(u,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,Ae),v.distbits=Ae.bits,ue){H.msg="invalid distances set",v.mode=30;break}if(v.mode=20,I===6)break e;case 20:v.mode=21;case 21:if(6<=z&&258<=K){H.next_out=O,H.avail_out=K,H.next_in=D,H.avail_in=z,v.hold=Q,v.bits=B,l(H,ee),O=H.next_out,F=H.output,K=H.avail_out,D=H.next_in,E=H.input,z=H.avail_in,Q=v.hold,B=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;de=(J=v.lencode[Q&(1<<v.lenbits)-1])>>>16&255,oe=65535&J,!((se=J>>>24)<=B);){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(de&&!(240&de)){for(pe=se,_e=de,xe=oe;de=(J=v.lencode[xe+((Q&(1<<pe+_e)-1)>>pe)])>>>16&255,oe=65535&J,!(pe+(se=J>>>24)<=B);){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}Q>>>=pe,B-=pe,v.back+=pe}if(Q>>>=se,B-=se,v.back+=se,v.length=oe,de===0){v.mode=26;break}if(32&de){v.back=-1,v.mode=12;break}if(64&de){H.msg="invalid literal/length code",v.mode=30;break}v.extra=15&de,v.mode=22;case 22:if(v.extra){for(q=v.extra;B<q;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.length+=Q&(1<<v.extra)-1,Q>>>=v.extra,B-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;de=(J=v.distcode[Q&(1<<v.distbits)-1])>>>16&255,oe=65535&J,!((se=J>>>24)<=B);){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(!(240&de)){for(pe=se,_e=de,xe=oe;de=(J=v.distcode[xe+((Q&(1<<pe+_e)-1)>>pe)])>>>16&255,oe=65535&J,!(pe+(se=J>>>24)<=B);){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}Q>>>=pe,B-=pe,v.back+=pe}if(Q>>>=se,B-=se,v.back+=se,64&de){H.msg="invalid distance code",v.mode=30;break}v.offset=oe,v.extra=15&de,v.mode=24;case 24:if(v.extra){for(q=v.extra;B<q;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}v.offset+=Q&(1<<v.extra)-1,Q>>>=v.extra,B-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){H.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(K===0)break e;if(U=ee-K,v.offset>U){if((U=v.offset-U)>v.whave&&v.sane){H.msg="invalid distance too far back",v.mode=30;break}X=U>v.wnext?(U-=v.wnext,v.wsize-U):v.wnext-U,U>v.length&&(U=v.length),ae=v.window}else ae=F,X=O-v.offset,U=v.length;for(K<U&&(U=K),K-=U,v.length-=U;F[O++]=ae[X++],--U;);v.length===0&&(v.mode=21);break;case 26:if(K===0)break e;F[O++]=v.length,K--,v.mode=21;break;case 27:if(v.wrap){for(;B<32;){if(z===0)break e;z--,Q|=E[D++]<<B,B+=8}if(ee-=K,H.total_out+=ee,v.total+=ee,ee&&(H.adler=v.check=v.flags?a(v.check,F,ee,O-ee):o(v.check,F,ee,O-ee)),ee=K,(v.flags?Q:m(Q))!==v.check){H.msg="incorrect data check",v.mode=30;break}B=Q=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;B<32;){if(z===0)break e;z--,Q+=E[D++]<<B,B+=8}if(Q!==(4294967295&v.total)){H.msg="incorrect length check",v.mode=30;break}B=Q=0}v.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return h}return H.next_out=O,H.avail_out=K,H.next_in=D,H.avail_in=z,v.hold=Q,v.bits=B,(v.wsize||ee!==H.avail_out&&v.mode<30&&(v.mode<27||I!==4))&&Y(H,H.output,H.next_out,ee-H.avail_out)?(v.mode=31,-4):(j-=H.avail_in,ee-=H.avail_out,H.total_in+=j,H.total_out+=ee,v.total+=ee,v.wrap&&ee&&(H.adler=v.check=v.flags?a(v.check,F,ee,H.next_out-ee):o(v.check,F,ee,H.next_out-ee)),H.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(j==0&&ee===0||I===4)&&ue===f&&(ue=-5),ue)},i.inflateEnd=function(H){if(!H||!H.state)return h;var I=H.state;return I.window&&(I.window=null),H.state=null,f},i.inflateGetHeader=function(H,I){var v;return H&&H.state&&2&(v=H.state).wrap?((v.head=I).done=!1,f):h},i.inflateSetDictionary=function(H,I){var v,E=I.length;return H&&H.state?(v=H.state).wrap!==0&&v.mode!==11?h:v.mode===11&&o(1,I,E,0)!==v.check?-3:Y(H,I,E,E)?(v.mode=31,-4):(v.havedict=1,f):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var s=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,u,f,h,p,d,g,m){var y,w,x,_,C,T,b,M,P,Y=m.bits,H=0,I=0,v=0,E=0,F=0,D=0,O=0,z=0,K=0,Q=0,B=null,j=0,ee=new s.Buf16(16),U=new s.Buf16(16),X=null,ae=0;for(H=0;H<=15;H++)ee[H]=0;for(I=0;I<h;I++)ee[u[f+I]]++;for(F=Y,E=15;1<=E&&ee[E]===0;E--);if(E<F&&(F=E),E===0)return p[d++]=20971520,p[d++]=20971520,m.bits=1,0;for(v=1;v<E&&ee[v]===0;v++);for(F<v&&(F=v),H=z=1;H<=15;H++)if(z<<=1,(z-=ee[H])<0)return-1;if(0<z&&(c===0||E!==1))return-1;for(U[1]=0,H=1;H<15;H++)U[H+1]=U[H]+ee[H];for(I=0;I<h;I++)u[f+I]!==0&&(g[U[u[f+I]]++]=I);if(T=c===0?(B=X=g,19):c===1?(B=o,j-=257,X=a,ae-=257,256):(B=l,X=A,-1),H=v,C=d,O=I=Q=0,x=-1,_=(K=1<<(D=F))-1,c===1&&852<K||c===2&&592<K)return 1;for(;;){for(b=H-O,P=g[I]<T?(M=0,g[I]):g[I]>T?(M=X[ae+g[I]],B[j+g[I]]):(M=96,0),y=1<<H-O,v=w=1<<D;p[C+(Q>>O)+(w-=y)]=b<<24|M<<16|P|0,w!==0;);for(y=1<<H-1;Q&y;)y>>=1;if(y!==0?(Q&=y-1,Q+=y):Q=0,I++,--ee[H]==0){if(H===E)break;H=u[f+g[I]]}if(F<H&&(Q&_)!==x){for(O===0&&(O=F),C+=v,z=1<<(D=H-O);D+O<E&&!((z-=ee[D+O])<=0);)D++,z<<=1;if(K+=1<<D,c===1&&852<K||c===2&&592<K)return 1;p[x=Q&_]=F<<24|D<<16|C-d|0}}return Q!==0&&(p[C+Q]=H-O<<24|64<<16|0),m.bits=F,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var s=t("../utils/common"),o=0,a=1;function l(J){for(var ce=J.length;0<=--ce;)J[ce]=0}var A=0,c=29,u=256,f=u+1+c,h=30,p=19,d=2*f+1,g=15,m=16,y=7,w=256,x=16,_=17,C=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(f+2));l(Y);var H=new Array(2*h);l(H);var I=new Array(512);l(I);var v=new Array(256);l(v);var E=new Array(c);l(E);var F,D,O,z=new Array(h);function K(J,ce,be,Be,k){this.static_tree=J,this.extra_bits=ce,this.extra_base=be,this.elems=Be,this.max_length=k,this.has_stree=J&&J.length}function Q(J,ce){this.dyn_tree=J,this.max_code=0,this.stat_desc=ce}function B(J){return J<256?I[J]:I[256+(J>>>7)]}function j(J,ce){J.pending_buf[J.pending++]=255&ce,J.pending_buf[J.pending++]=ce>>>8&255}function ee(J,ce,be){J.bi_valid>m-be?(J.bi_buf|=ce<<J.bi_valid&65535,j(J,J.bi_buf),J.bi_buf=ce>>m-J.bi_valid,J.bi_valid+=be-m):(J.bi_buf|=ce<<J.bi_valid&65535,J.bi_valid+=be)}function U(J,ce,be){ee(J,be[2*ce],be[2*ce+1])}function X(J,ce){for(var be=0;be|=1&J,J>>>=1,be<<=1,0<--ce;);return be>>>1}function ae(J,ce,be){var Be,k,W=new Array(g+1),re=0;for(Be=1;Be<=g;Be++)W[Be]=re=re+be[Be-1]<<1;for(k=0;k<=ce;k++){var he=J[2*k+1];he!==0&&(J[2*k]=X(W[he]++,he))}}function se(J){var ce;for(ce=0;ce<f;ce++)J.dyn_ltree[2*ce]=0;for(ce=0;ce<h;ce++)J.dyn_dtree[2*ce]=0;for(ce=0;ce<p;ce++)J.bl_tree[2*ce]=0;J.dyn_ltree[2*w]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0}function de(J){8<J.bi_valid?j(J,J.bi_buf):0<J.bi_valid&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0}function oe(J,ce,be,Be){var k=2*ce,W=2*be;return J[k]<J[W]||J[k]===J[W]&&Be[ce]<=Be[be]}function pe(J,ce,be){for(var Be=J.heap[be],k=be<<1;k<=J.heap_len&&(k<J.heap_len&&oe(ce,J.heap[k+1],J.heap[k],J.depth)&&k++,!oe(ce,Be,J.heap[k],J.depth));)J.heap[be]=J.heap[k],be=k,k<<=1;J.heap[be]=Be}function _e(J,ce,be){var Be,k,W,re,he=0;if(J.last_lit!==0)for(;Be=J.pending_buf[J.d_buf+2*he]<<8|J.pending_buf[J.d_buf+2*he+1],k=J.pending_buf[J.l_buf+he],he++,Be===0?U(J,k,ce):(U(J,(W=v[k])+u+1,ce),(re=T[W])!==0&&ee(J,k-=E[W],re),U(J,W=B(--Be),be),(re=b[W])!==0&&ee(J,Be-=z[W],re)),he<J.last_lit;);U(J,w,ce)}function xe(J,ce){var be,Be,k,W=ce.dyn_tree,re=ce.stat_desc.static_tree,he=ce.stat_desc.has_stree,me=ce.stat_desc.elems,G=-1;for(J.heap_len=0,J.heap_max=d,be=0;be<me;be++)W[2*be]!==0?(J.heap[++J.heap_len]=G=be,J.depth[be]=0):W[2*be+1]=0;for(;J.heap_len<2;)W[2*(k=J.heap[++J.heap_len]=G<2?++G:0)]=1,J.depth[k]=0,J.opt_len--,he&&(J.static_len-=re[2*k+1]);for(ce.max_code=G,be=J.heap_len>>1;1<=be;be--)pe(J,W,be);for(k=me;be=J.heap[1],J.heap[1]=J.heap[J.heap_len--],pe(J,W,1),Be=J.heap[1],J.heap[--J.heap_max]=be,J.heap[--J.heap_max]=Be,W[2*k]=W[2*be]+W[2*Be],J.depth[k]=(J.depth[be]>=J.depth[Be]?J.depth[be]:J.depth[Be])+1,W[2*be+1]=W[2*Be+1]=k,J.heap[1]=k++,pe(J,W,1),2<=J.heap_len;);J.heap[--J.heap_max]=J.heap[1],function(R,S){var V,te,le,ie,Ie,Te,Le=S.dyn_tree,He=S.max_code,De=S.stat_desc.static_tree,fe=S.stat_desc.has_stree,Me=S.stat_desc.extra_bits,Se=S.stat_desc.extra_base,Fe=S.stat_desc.max_length,Ve=0;for(ie=0;ie<=g;ie++)R.bl_count[ie]=0;for(Le[2*R.heap[R.heap_max]+1]=0,V=R.heap_max+1;V<d;V++)Fe<(ie=Le[2*Le[2*(te=R.heap[V])+1]+1]+1)&&(ie=Fe,Ve++),Le[2*te+1]=ie,He<te||(R.bl_count[ie]++,Ie=0,Se<=te&&(Ie=Me[te-Se]),Te=Le[2*te],R.opt_len+=Te*(ie+Ie),fe&&(R.static_len+=Te*(De[2*te+1]+Ie)));if(Ve!==0){do{for(ie=Fe-1;R.bl_count[ie]===0;)ie--;R.bl_count[ie]--,R.bl_count[ie+1]+=2,R.bl_count[Fe]--,Ve-=2}while(0<Ve);for(ie=Fe;ie!==0;ie--)for(te=R.bl_count[ie];te!==0;)He<(le=R.heap[--V])||(Le[2*le+1]!==ie&&(R.opt_len+=(ie-Le[2*le+1])*Le[2*le],Le[2*le+1]=ie),te--)}}(J,ce),ae(W,G,J.bl_count)}function L(J,ce,be){var Be,k,W=-1,re=ce[1],he=0,me=7,G=4;for(re===0&&(me=138,G=3),ce[2*(be+1)+1]=65535,Be=0;Be<=be;Be++)k=re,re=ce[2*(Be+1)+1],++he<me&&k===re||(he<G?J.bl_tree[2*k]+=he:k!==0?(k!==W&&J.bl_tree[2*k]++,J.bl_tree[2*x]++):he<=10?J.bl_tree[2*_]++:J.bl_tree[2*C]++,W=k,G=(he=0)===re?(me=138,3):k===re?(me=6,3):(me=7,4))}function ue(J,ce,be){var Be,k,W=-1,re=ce[1],he=0,me=7,G=4;for(re===0&&(me=138,G=3),Be=0;Be<=be;Be++)if(k=re,re=ce[2*(Be+1)+1],!(++he<me&&k===re)){if(he<G)for(;U(J,k,J.bl_tree),--he!=0;);else k!==0?(k!==W&&(U(J,k,J.bl_tree),he--),U(J,x,J.bl_tree),ee(J,he-3,2)):he<=10?(U(J,_,J.bl_tree),ee(J,he-3,3)):(U(J,C,J.bl_tree),ee(J,he-11,7));W=k,G=(he=0)===re?(me=138,3):k===re?(me=6,3):(me=7,4)}}l(z);var Ae=!1;function q(J,ce,be,Be){ee(J,(A<<1)+(Be?1:0),3),function(k,W,re,he){de(k),he&&(j(k,re),j(k,~re)),s.arraySet(k.pending_buf,k.window,W,re,k.pending),k.pending+=re}(J,ce,be,!0)}i._tr_init=function(J){Ae||(function(){var ce,be,Be,k,W,re=new Array(g+1);for(k=Be=0;k<c-1;k++)for(E[k]=Be,ce=0;ce<1<<T[k];ce++)v[Be++]=k;for(v[Be-1]=k,k=W=0;k<16;k++)for(z[k]=W,ce=0;ce<1<<b[k];ce++)I[W++]=k;for(W>>=7;k<h;k++)for(z[k]=W<<7,ce=0;ce<1<<b[k]-7;ce++)I[256+W++]=k;for(be=0;be<=g;be++)re[be]=0;for(ce=0;ce<=143;)Y[2*ce+1]=8,ce++,re[8]++;for(;ce<=255;)Y[2*ce+1]=9,ce++,re[9]++;for(;ce<=279;)Y[2*ce+1]=7,ce++,re[7]++;for(;ce<=287;)Y[2*ce+1]=8,ce++,re[8]++;for(ae(Y,f+1,re),ce=0;ce<h;ce++)H[2*ce+1]=5,H[2*ce]=X(ce,5);F=new K(Y,T,u+1,f,g),D=new K(H,b,0,h,g),O=new K(new Array(0),M,0,p,y)}(),Ae=!0),J.l_desc=new Q(J.dyn_ltree,F),J.d_desc=new Q(J.dyn_dtree,D),J.bl_desc=new Q(J.bl_tree,O),J.bi_buf=0,J.bi_valid=0,se(J)},i._tr_stored_block=q,i._tr_flush_block=function(J,ce,be,Be){var k,W,re=0;0<J.level?(J.strm.data_type===2&&(J.strm.data_type=function(he){var me,G=4093624447;for(me=0;me<=31;me++,G>>>=1)if(1&G&&he.dyn_ltree[2*me]!==0)return o;if(he.dyn_ltree[18]!==0||he.dyn_ltree[20]!==0||he.dyn_ltree[26]!==0)return a;for(me=32;me<u;me++)if(he.dyn_ltree[2*me]!==0)return a;return o}(J)),xe(J,J.l_desc),xe(J,J.d_desc),re=function(he){var me;for(L(he,he.dyn_ltree,he.l_desc.max_code),L(he,he.dyn_dtree,he.d_desc.max_code),xe(he,he.bl_desc),me=p-1;3<=me&&he.bl_tree[2*P[me]+1]===0;me--);return he.opt_len+=3*(me+1)+5+5+4,me}(J),k=J.opt_len+3+7>>>3,(W=J.static_len+3+7>>>3)<=k&&(k=W)):k=W=be+5,be+4<=k&&ce!==-1?q(J,ce,be,Be):J.strategy===4||W===k?(ee(J,2+(Be?1:0),3),_e(J,Y,H)):(ee(J,4+(Be?1:0),3),function(he,me,G,R){var S;for(ee(he,me-257,5),ee(he,G-1,5),ee(he,R-4,4),S=0;S<R;S++)ee(he,he.bl_tree[2*P[S]+1],3);ue(he,he.dyn_ltree,me-1),ue(he,he.dyn_dtree,G-1)}(J,J.l_desc.max_code+1,J.d_desc.max_code+1,re+1),_e(J,J.dyn_ltree,J.dyn_dtree)),se(J),Be&&de(J)},i._tr_tally=function(J,ce,be){return J.pending_buf[J.d_buf+2*J.last_lit]=ce>>>8&255,J.pending_buf[J.d_buf+2*J.last_lit+1]=255&ce,J.pending_buf[J.l_buf+J.last_lit]=255&be,J.last_lit++,ce===0?J.dyn_ltree[2*be]++:(J.matches++,ce--,J.dyn_ltree[2*(v[be]+u+1)]++,J.dyn_dtree[2*B(ce)]++),J.last_lit===J.lit_bufsize-1},i._tr_align=function(J){ee(J,2,3),U(J,w,Y),function(ce){ce.bi_valid===16?(j(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}(J)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,A,c,u,f=1,h={},p=!1,d=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(x){process.nextTick(function(){y(x)})}:function(){if(o.postMessage&&!o.importScripts){var x=!0,_=o.onmessage;return o.onmessage=function(){x=!1},o.postMessage("","*"),o.onmessage=_,x}}()?(u="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",w,!1):o.attachEvent("onmessage",w),function(x){o.postMessage(u+x,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(x){y(x.data)},function(x){c.port2.postMessage(x)}):d&&"onreadystatechange"in d.createElement("script")?(A=d.documentElement,function(x){var _=d.createElement("script");_.onreadystatechange=function(){y(x),_.onreadystatechange=null,A.removeChild(_),_=null},A.appendChild(_)}):function(x){setTimeout(y,0,x)},g.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var _=new Array(arguments.length-1),C=0;C<_.length;C++)_[C]=arguments[C+1];var T={callback:x,args:_};return h[f]=T,l(f),f++},g.clearImmediate=m}function m(x){delete h[x]}function y(x){if(p)setTimeout(y,0,x);else{var _=h[x];if(_){p=!0;try{(function(C){var T=C.callback,b=C.args;switch(b.length){case 0:T();break;case 1:T(b[0]);break;case 2:T(b[0],b[1]);break;case 3:T(b[0],b[1],b[2]);break;default:T.apply(a,b)}})(_)}finally{m(x),p=!1}}}}function w(x){x.source===o&&typeof x.data=="string"&&x.data.indexOf(u)===0&&y(+x.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof ea<"u"?ea:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(d8);var sde=d8.exports;const ode=El(sde);class ld{constructor(){this.zipContainer={}}addData(e,t,r,i=""){i==""&&(i="_"),this.zipContainer[i]==null&&(this.zipContainer[i]=[]),this.zipContainer[i].push({data:e,name:t,extension:r})}saveZip(e,t=!0){const r=this.zipContainer,i=new ode;for(const s in r)if(s=="_")r[s].forEach((o,a)=>{i.file(o.name+"."+o.extension,o.data,{base64:!0})});else{const o=i.folder(s);r[s].forEach((a,l)=>{const A=a.extension!="txt";o.file(a.name+"."+a.extension,a.data,{base64:A})})}i.generateAsync({type:"blob"}).then(s=>{this._saveZipFile(s,e+".zip")}),t&&(this.zipContainer={})}_saveZipFile(e,t){const r=new Blob([e],{type:"application/zip"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(r,t);else{const i=document.createElement("a");typeof i.download=="string"?(document.body.appendChild(i),i.download=t,i.href=URL.createObjectURL(r),i.click(),document.body.removeChild(i)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}}class ade{constructor(e){un(this,"screenshotManager");this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager,this.temptime=0}async createLoraData(e,t=null,r=""){const i=e.manifest,s=e.name?"loraData/"+e.name:"loraData",o=await this._fetchManifest(i),{assetsLocation:a="",animationsDirectory:l="",backgroundGrayscale:A=1,backgroundDescription:c="",width:u=512,height:f=512,dataCollection:h}=o,p=a+l+"/";this.screenshotManager.setBackground([A,A,A]),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let d=0;const g=this;if(Array.isArray(h)){const m=t??new ld;await(async()=>{if(Array.isArray(h))for(let w=0;w<h.length;w++){const{animationPath:x,animationTime:_=0,animationFrame:C,cameraPosition:T,cameraFrame:b,description:M}=h[w];d++;const P=d.toString().padStart(4,"0"),Y=C?C/30:_;await g.animationManager.loadAnimation(p+x,!0,Y);const H=bT(T);g.screenshotManager.cameraFrameManager.setCameraFrameWithName(b,H);const I=g.screenshotManager.getImageData(u,f,!1);m.addData(I,P,"png",s),m.addData("anata "+M+" "+c,P,"txt",s)}})(),t==null&&(r==""&&(r="lora_zip"),m.saveZip(r))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class lde{constructor(e){un(this,"screenshotManager");this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createSpriteAtlas(e,t=null,r=""){const i=e.manifest,s=e.name?"spriteData/"+e.name:"spriteData",o=await this._fetchManifest(i),{assetsLocation:a="",animationsDirectory:l="",backgroundColor:A=[1,1,1,1],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:f=.1,pixelStyleSize:h,atlasWidth:p=512,atlasHeight:d=512,spritesCollection:g}=o,m=a+l+"/";this.screenshotManager.cameraFrameManager.setBottomFrameOffset(f),this.screenshotManager.cameraFrameManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let y=0;const w=this;if(Array.isArray(g)){const x=t??new ld;await(async()=>{if(Array.isArray(g))for(const C of g){const{animationName:T,animationPath:b,framesNumber:M,lookAtCamera:P,expression:Y,cameraPosition:H,cameraFrame:I}=C;y++;const v=s+"/"+(T||y.toString().padStart(2,"0"));await w.animationManager.loadAnimation(m+b,!0,0);const E=bT(H);w.screenshotManager.cameraFrameManager.setCameraFrameWithName(I,E);const D=w.animationManager.getCurrentClipDuration()/M;for(let O=0;O<M;O++){w.animationManager.setTime(O*D);const z=w.screenshotManager.getImageData(p,d,h);x.addData(z,O.toString().padStart(2,"0"),"png",v)}}})(),t==null&&(r==""&&(r="sprites_zip"),x.saveZip(r))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class Ade{constructor(e){un(this,"screenshotManager");this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createThumbnailsWithObjectData(e,t=!0,r=null,i=""){const{assetsLocation:s="",poseAnimation:o="",animationFrame:a,animationTime:l,backgroundColor:A=[1,1,1,0],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:f=.1,thumbnailsWidth:h=128,thumbnailsHeight:p=128,thumbnailsCollection:d}=e,g=s+"/";let m=a||0;l!=null&&(m=l*30),t&&await this.animationManager.loadAnimation(g+o,!0,m),this.screenshotManager.cameraFrameManager.setBottomFrameOffset(f),this.screenshotManager.cameraFrameManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);const y=this;if(Array.isArray(d)){const w=r??new ld;let x=!1;await(async()=>{for(const C of d){const{traitGroup:T,cameraPosition:b="front",bottomBoneName:M,bottomBoneMaxVertex:P=!1,topBoneName:Y,topBoneMaxVertex:H=!0,groupTopOffset:I,groupBotomOffset:v,cameraFrame:E,saveOnlyIDs:F}=C;if((!M||!Y)&&(E||console.warn("missing bonename info or camera frame. Skipping")),!T){console.warn("missing trait group for thumbnail info. Skipping");continue}const D=()=>{const K=[];return ut(F).forEach(B=>{K.push({id:B})}),K},O=F==null?y.characterManager.getTraits(T):D();if(O==null){console.log("SKipping Thumbnail Generation for trait group "+T+", its not present in the character manifest.");continue}const z=bT(b);E?y.screenshotManager.cameraFrameManager.setCameraFrameWithName(E,z):y.screenshotManager.cameraFrameManager.frameShot(M,Y,z,P,H);for(let K=0;K<O.length;K++){const Q=O[K].id;let B=Q;if(O[K].fullDirectory!=null){const j=O[K].fullDirectory.split("/");B=j[j.length-1].split(".")[0]}if(await y.characterManager.loadTrait(T,Q,!0),d.length==1&&O.length==1)x=!0,y.screenshotManager.saveScreenshot(B,h,p);else{const j=y.screenshotManager.getImageData(h,p);w.addData(j,B,"png",T)}}}})(),r==null&&x==!1&&(i==""&&(i="thumbnails_zip"),w.saveZip(i))}this.blinkManager.disableScreenshot()}async createThumbnails(e,t=null,r=""){const i=e.manifest,s=await this._fetchManifest(i);await this.createThumbnailsWithObjectData(s,!0,t,r)}async _fetchManifest(e){return await(await fetch(e)).json()}}const Zn=ye.createContext(),cde=n=>{const[e,t]=ye.useState(null),[r,i]=ye.useState(null),[s,o]=ye.useState(null),[a,l]=ye.useState(null),[A,c]=ye.useState(null),[u,f]=ye.useState(null),[h,p]=ye.useState(null),[d,g]=ye.useState(null),[m,y]=ye.useState(null),[w,x]=ye.useState(null),[_,C]=ye.useState(null),[T,b]=ye.useState(!1);let M=!1,[P,Y]=ye.useState(!1);ye.useEffect(()=>{if(M||P)return;Y(!0),M=!0;const{scene:E,camera:F,controls:D,characterManager:O,sceneElements:z}=ide("editor-scene");y(F),g(E),t(O),c(z),f(O.animationManager),p(O.lookAtManager),x(D),i(new ade(O)),o(new lde(O)),l(new Ade(O))},[]);const H=E=>{E==null&&(E=!T),b(E),d.traverse(F=>{F.isMesh&&F.setDebugMode&&F.setDebugMode(E)})};ye.useEffect(()=>{if(_!=null&&_.defaultAnimations){const E=_.defaultAnimations.map(F=>F.location);u.storeDefaultAnimationPaths(E,"")}},[_]);const I=E=>{E?d.add(A):d.remove(A)},v=E=>{w&&(eC.to(w.target,{x:E.targetX??0,y:E.targetY??0,z:E.targetZ??0,duration:1}),eC.fromTo(w,{maxDistance:w.getDistance(),minDistance:w.getDistance(),minPolarAngle:w.getPolarAngle(),maxPolarAngle:w.getPolarAngle(),minAzimuthAngle:w.getAzimuthalAngle(),maxAzimuthAngle:w.getAzimuthalAngle()},{maxDistance:E.distance,minDistance:E.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{w.minPolarAngle=0,w.maxPolarAngle=3.1415,w.minDistance=.5,w.maxDistance=10,w.minAzimuthAngle=1/0,w.maxAzimuthAngle=1/0}))};return N.jsx(Zn.Provider,{value:{manifest:_,setManifest:C,scene:d,characterManager:e,loraDataGenerator:r,spriteAtlasGenerator:s,thumbnailsGenerator:a,showEnvironmentModels:I,debugMode:T,toggleDebugMode:H,animationManager:u,lookAtManager:h,camera:m,moveCamera:v,controls:w,sceneElements:A},children:n.children})},ude={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},mt={LANDING:"LANDING",CREATE:"CREATE",CLAIM:"CLAIM",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BATCHDOWNLOAD:"BATCHDOWNLOAD",SAVE:"SAVE",MINT:"MINT",OPTIMIZER:"OPTIMIZER",BATCHMANIFEST:"BATCHMANIFEST",WALLET:"WALLET"},Di=$.createContext(),fde=n=>{const[e,t]=$.useState(ude.NORMAL),[r,i]=$.useState(mt.LANDING),[s,o]=$.useState(!1),[a,l]=$.useState(!1);return N.jsx(Di.Provider,{value:{viewMode:r,setViewMode:i,isLoading:s,setIsLoading:o,mouseIsOverUI:a,setMouseIsOverUI:l,currentCameraMode:e,setCurrentCameraMode:t},children:n.children})},hde="modulepreload",dde=function(n){return"/"+n},d3={},pde=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=dde(s),s in d3)return;d3[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const A=document.createElement("link");if(A.rel=o?"stylesheet":hde,o||(A.as="script",A.crossOrigin=""),A.href=s,document.head.appendChild(A),o)return new Promise((c,u)=>{A.addEventListener("load",c),A.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Hw(){return Hw=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hw.apply(this,arguments)}function mde(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function gde(n){ye.useEffect(n,[])}function vde(n,e){e===void 0&&(e={});var t=e,r=t.volume,i=r===void 0?1:r,s=t.playbackRate,o=s===void 0?1:s,a=t.soundEnabled,l=a===void 0?!0:a,A=t.interrupt,c=A===void 0?!1:A,u=t.onload,f=mde(t,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),h=$.useRef(null),p=$.useRef(!1),d=$.useState(null),g=d[0],m=d[1],y=$.useState(null),w=y[0],x=y[1],_=function(){typeof u=="function"&&u.call(this),p.current&&m(this.duration()*1e3),x(this)};gde(function(){return pde(()=>import("./howler-1631891f.js").then(P=>P.h),[]).then(function(P){if(!p.current){var Y;h.current=(Y=P.Howl)!==null&&Y!==void 0?Y:P.default.Howl,p.current=!0,new h.current(Hw({src:Array.isArray(n)?n:[n],volume:i,rate:o,onload:_},f))}}),function(){p.current=!1}}),$.useEffect(function(){h.current&&w&&x(new h.current(Hw({src:Array.isArray(n)?n:[n],volume:i,onload:_},f)))},[JSON.stringify(n)]),$.useEffect(function(){w&&(w.volume(i),w.rate(o))},[i,o]);var C=$.useCallback(function(P){typeof P>"u"&&(P={}),!(!w||!l&&!P.forceSoundEnabled)&&(c&&w.stop(),P.playbackRate&&w.rate(P.playbackRate),w.play(P.id))},[w,l,c]),T=$.useCallback(function(P){w&&w.stop(P)},[w]),b=$.useCallback(function(P){w&&w.pause(P)},[w]),M=[C,{sound:w,stop:T,pause:b,duration:g}];return M}const yde=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],wde="/assets/sounds-3322d50e.mp3",$s=ye.createContext(),xde=n=>{const e=i=>yde.find(s=>i.test(s.name)),[t]=vde(wde,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),r=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return N.jsx($s.Provider,{value:{playSound:r},children:n.children})};function ks(n){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ks(n)}function Xs(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function _de(n,e){if(ks(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function p8(n){var e=_de(n,"string");return ks(e)=="symbol"?e:e+""}function p3(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,p8(r.key),r)}}function Zs(n,e,t){return e&&p3(n.prototype,e),t&&p3(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function RA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function JC(n,e){return JC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JC(n,e)}function r_(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&JC(n,e)}function Bg(n,e){if(e&&(ks(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RA(n)}function va(n){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},va(n)}function Ba(n,e,t){return e=p8(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function m8(n){if(Array.isArray(n))return n}function bde(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function m3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function g8(n,e){if(n){if(typeof n=="string")return m3(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m3(n,e)}}function v8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bde(n){return m8(n)||bde(n)||g8(n)||v8()}function g3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Ede={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},Cde=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xs(this,n),this.init(e,t)}return Zs(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||Ede,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,r,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[r](t))}},{key:"create",value:function(t){return new n(this.logger,v3(v3({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n(this.logger,t)}}]),n}(),ta=new Cde,QA=function(){function n(){Xs(this,n),this.observers={}}return Zs(n,[{key:"on",value:function(t,r){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==r})}}},{key:"emit",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(l){l.apply(l,[t].concat(i))})}}}]),n}();function ap(){var n,e,t=new Promise(function(r,i){n=r,e=i});return t.resolve=n,t.reject=e,t}function y3(n){return n==null?"":""+n}function Mde(n,e,t){n.forEach(function(r){e[r]&&(t[r]=e[r])})}function ST(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!n||typeof n=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return i()?{}:{obj:n,k:r(s.shift())}}function w3(n,e,t){var r=ST(n,e,Object),i=r.obj,s=r.k;i[s]=t}function Sde(n,e,t,r){var i=ST(n,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(t)),r||s[o].push(t)}function zw(n,e){var t=ST(n,e),r=t.obj,i=t.k;if(r)return r[i]}function x3(n,e,t){var r=zw(n,t);return r!==void 0?r:zw(e,t)}function y8(n,e,t){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):y8(n[r],e[r],t):n[r]=e[r]);return n}function Zu(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Tde={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ide(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return Tde[e]}):n}var i_=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Rde=[" ",",","?","!",";"];function Fde(n,e,t){e=e||"",t=t||"";var r=Rde.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(n);if(!s){var o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(s=!0)}return s}function _3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _v(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ude(n){var e=Lde();return function(){var r=va(n),i;if(e){var s=va(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Bg(this,i)}}function Lde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w8(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(n){if(n[e])return n[e];for(var r=e.split(t),i=n,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,a=r.slice(s,s+o).join(t),l=i[a];l===void 0&&r.length>s+o;)o++,a=r.slice(s,s+o).join(t),l=i[a];if(l===void 0)return;if(l===null)return null;if(e.endsWith(a)){if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a]}var A=r.slice(s+o).join(t);return A?w8(l,A,t):void 0}i=i[r[s]]}return i}}var Pde=function(n){r_(t,n);var e=Ude(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Xs(this,t),i=e.call(this),i_&&QA.call(RA(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Zs(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,A=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."));var u=zw(this.data,c);return u||!A||typeof o!="string"?u:w8(this.data&&this.data[i]&&this.data[i][s],o,l)}},{key:"addResource",value:function(i,s,o,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},A=this.options.keySeparator;A===void 0&&(A=".");var c=[i,s];o&&(c=c.concat(A?o.split(A):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),w3(this.data,c,a),l.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(i,s,l,o[l],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var u=zw(this.data,c)||{};a?y8(u,o,l):u=_v(_v({},u),o),w3(this.data,c,u),A.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?_v(_v({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(QA),x8={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,r,i,s))}),t}};function b3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function si(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Dde(n){var e=Ode();return function(){var r=va(n),i;if(e){var s=va(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Bg(this,i)}}function Ode(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var B3={},E3=function(n){r_(t,n);var e=Dde(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xs(this,t),i=e.call(this),i_&&QA.call(RA(i)),Mde(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,RA(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=ta.create("translator"),i}return Zs(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ns||this.options.defaultNS||[],A=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!Fde(i,o,a);if(A&&!c){var u=i.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:i,namespaces:l};var f=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(f[0])>-1)&&(l=f.shift()),i=f.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,s,o){var a=this;if(ks(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,A=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),u=c.key,f=c.namespaces,h=f[f.length-1],p=s.lng||this.language,d=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(d){var g=s.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(h).concat(g).concat(u),usedKey:u,exactUsedKey:u,usedLng:p,usedNS:h}:"".concat(h).concat(g).concat(u)}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:p,usedNS:h}:u}var m=this.resolve(i,s),y=m&&m.res,w=m&&m.usedKey||u,x=m&&m.exactUsedKey||u,_=Object.prototype.toString.apply(y),C=["[object Number]","[object Function]","[object RegExp]"],T=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,M=typeof y!="string"&&typeof y!="boolean"&&typeof y!="number";if(b&&y&&M&&C.indexOf(_)<0&&!(typeof T=="string"&&_==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,y,si(si({},s),{},{ns:f})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return l?(m.res=P,m):P}if(A){var Y=_==="[object Array]",H=Y?[]:{},I=Y?x:w;for(var v in y)if(Object.prototype.hasOwnProperty.call(y,v)){var E="".concat(I).concat(A).concat(v);H[v]=this.translate(E,si(si({},s),{joinArrays:!1,ns:f})),H[v]===E&&(H[v]=y[v])}y=H}}else if(b&&typeof T=="string"&&_==="[object Array]")y=y.join(T),y&&(y=this.extendTranslation(y,i,s,o));else{var F=!1,D=!1,O=s.count!==void 0&&typeof s.count!="string",z=t.hasDefaultValue(s),K=O?this.pluralResolver.getSuffix(p,s.count,s):"",Q=s["defaultValue".concat(K)]||s.defaultValue;!this.isValidLookup(y)&&z&&(F=!0,y=Q),this.isValidLookup(y)||(D=!0,y=u);var B=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,j=B&&D?void 0:y,ee=z&&Q!==y&&this.options.updateMissing;if(D||F||ee){if(this.logger.log(ee?"updateKey":"missingKey",p,h,u,ee?Q:y),A){var U=this.resolve(u,si(si({},s),{},{keySeparator:!1}));U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var X=[],ae=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ae&&ae[0])for(var se=0;se<ae.length;se++)X.push(ae[se]);else this.options.saveMissingTo==="all"?X=this.languageUtils.toResolveHierarchy(s.lng||this.language):X.push(s.lng||this.language);var de=function(pe,_e,xe){var L=z&&xe!==y?xe:j;a.options.missingKeyHandler?a.options.missingKeyHandler(pe,h,_e,L,ee,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(pe,h,_e,L,ee,s),a.emit("missingKey",pe,h,_e,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?X.forEach(function(oe){a.pluralResolver.getSuffixes(oe,s).forEach(function(pe){de([oe],u+pe,s["defaultValue".concat(pe)]||Q)})}):de(X,u,Q))}y=this.extendTranslation(y,i,s,m,o),D&&y===u&&this.options.appendNamespaceToMissingKey&&(y="".concat(h,":").concat(u)),(D||F)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(h,":").concat(u):u,F?y:void 0):y=this.options.parseMissingKeyHandler(y))}return l?(m.res=y,m):y}},{key:"extendTranslation",value:function(i,s,o,a,l){var A=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,si(si({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(si(si({},o),{interpolation:si(si({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){var f=i.match(this.interpolator.nestingRegexp);u=f&&f.length}var h=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(h=si(si({},this.options.interpolation.defaultVariables),h)),i=this.interpolator.interpolate(i,h,o.lng||this.language,o),c){var p=i.match(this.interpolator.nestingRegexp),d=p&&p.length;u<d&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var y=arguments.length,w=new Array(y),x=0;x<y;x++)w[x]=arguments[x];return l&&l[0]===w[0]&&!o.context?(A.logger.warn("It seems you are nesting recursively key: ".concat(w[0]," in key: ").concat(s[0])),null):A.translate.apply(A,w.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var g=o.postProcess||this.options.postProcess,m=typeof g=="string"?[g]:g;return i!=null&&m&&m.length&&o.applyPostProcessor!==!1&&(i=x8.handle(m,i,s,this.options&&this.options.postProcessPassResolved?si({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,l,A,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(f){if(!s.isValidLookup(a)){var h=s.extractFromKey(f,o),p=h.key;l=p;var d=h.namespaces;s.options.fallbackNS&&(d=d.concat(s.options.fallbackNS));var g=o.count!==void 0&&typeof o.count!="string",m=g&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),y=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",w=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);d.forEach(function(x){s.isValidLookup(a)||(u=x,!B3["".concat(w[0],"-").concat(x)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(u)&&(B3["".concat(w[0],"-").concat(x)]=!0,s.logger.warn('key "'.concat(l,'" for languages "').concat(w.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(function(_){if(!s.isValidLookup(a)){c=_;var C=[p];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(C,p,_,x,o);else{var T;g&&(T=s.pluralResolver.getSuffix(_,o.count,o));var b="".concat(s.options.pluralSeparator,"zero");if(g&&(C.push(p+T),m&&C.push(p+b)),y){var M="".concat(p).concat(s.options.contextSeparator).concat(o.context);C.push(M),g&&(C.push(M+T),m&&C.push(M+b))}}for(var P;P=C.pop();)s.isValidLookup(a)||(A=P,a=s.getResource(_,x,P,o))}}))})}}),{res:a,usedKey:l,exactUsedKey:A,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(QA);function dB(n){return n.charAt(0).toUpperCase()+n.slice(1)}var C3=function(){function n(e){Xs(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ta.create("languageUtils")}return Zs(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var r=t.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=dB(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=dB(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=dB(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var r=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];var i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],a=function(A){A&&(i.isSupportedCode(A)?o.push(A):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(A)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(l){o.indexOf(l)<0&&a(i.formatLanguageCode(l))}),o}}]),n}(),Nde=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],kde={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},Qde=["v1","v2","v3"],M3={zero:0,one:1,two:2,few:3,many:4,other:5};function Hde(){var n={};return Nde.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:kde[e.fc]}})}),n}var zde=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xs(this,n),this.languageUtils=e,this.options=t,this.logger=ta.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Hde()}return Zs(n,[{key:"addRule",value:function(t,r){this.rules[t]=r}},{key:"getRule",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return M3[o]-M3[a]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,r){var i=this,s=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Qde.includes(this.options.compatibilityJSON)}}]),n}();function S3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function lo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Gde=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xs(this,n),this.logger=ta.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Zs(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var r=t.interpolation;this.escape=r.escape!==void 0?r.escape:Ide,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?Zu(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?Zu(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?Zu(r.nestingPrefix):r.nestingPrefixEscaped||Zu("$t("),this.nestingSuffix=r.nestingSuffix?Zu(r.nestingSuffix):r.nestingSuffixEscaped||Zu(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,r,i,s){var o=this,a,l,A,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(g){return g.replace(/\$/g,"$$$$")}var f=function(m){if(m.indexOf(o.formatSeparator)<0){var y=x3(r,c,m);return o.alwaysFormat?o.format(y,void 0,i,lo(lo(lo({},s),r),{},{interpolationkey:m})):y}var w=m.split(o.formatSeparator),x=w.shift().trim(),_=w.join(o.formatSeparator).trim();return o.format(x3(r,c,x),_,i,lo(lo(lo({},s),r),{},{interpolationkey:x}))};this.resetRegExp();var h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,p=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,d=[{regex:this.regexpUnescape,safeValue:function(m){return u(m)}},{regex:this.regexp,safeValue:function(m){return o.escapeValue?u(o.escape(m)):u(m)}}];return d.forEach(function(g){for(A=0;a=g.regex.exec(t);){var m=a[1].trim();if(l=f(m),l===void 0)if(typeof h=="function"){var y=h(t,a,s);l=typeof y=="string"?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,m))l="";else if(p){l=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=y3(l));var w=g.safeValue(l);if(t=t.replace(a[0],w),p?(g.regex.lastIndex+=l.length,g.regex.lastIndex-=a[0].length):g.regex.lastIndex=0,A++,A>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,l;function A(h,p){var d=this.nestingOptionsSeparator;if(h.indexOf(d)<0)return h;var g=h.split(new RegExp("".concat(d,"[ ]*{"))),m="{".concat(g[1]);h=g[0],m=this.interpolate(m,l);var y=m.match(/'/g),w=m.match(/"/g);(y&&y.length%2===0&&!w||w.length%2!==0)&&(m=m.replace(/'/g,'"'));try{l=JSON.parse(m),p&&(l=lo(lo({},p),l))}catch(x){return this.logger.warn("failed parsing options string in nesting for key ".concat(h),x),"".concat(h).concat(d).concat(m)}return delete l.defaultValue,h}for(;o=this.nestingRegexp.exec(t);){var c=[];l=lo({},s),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var f=o[1].split(this.formatSeparator).map(function(h){return h.trim()});o[1]=f.shift(),c=f,u=!0}if(a=r(A.call(this,o[1].trim(),l),l),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=y3(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),u&&(a=c.reduce(function(h,p){return i.format(h,p,s.lng,lo(lo({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),n}();function T3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Vde(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var r=n.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),l=Bde(a),A=l[0],c=l.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");t[A.trim()]||(t[A.trim()]=u),u==="false"&&(t[A.trim()]=!1),u==="true"&&(t[A.trim()]=!0),isNaN(u)||(t[A.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:t}}function Ju(n){var e={};return function(r,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=n(i,s),e[o]=a),a(r)}}var jde=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xs(this,n),this.logger=ta.create("formatter"),this.options=e,this.formats={number:Ju(function(t,r){var i=new Intl.NumberFormat(t,Qa({},r));return function(s){return i.format(s)}}),currency:Ju(function(t,r){var i=new Intl.NumberFormat(t,Qa(Qa({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:Ju(function(t,r){var i=new Intl.DateTimeFormat(t,Qa({},r));return function(s){return i.format(s)}}),relativetime:Ju(function(t,r){var i=new Intl.RelativeTimeFormat(t,Qa({},r));return function(s){return i.format(s,r.range||"day")}}),list:Ju(function(t,r){var i=new Intl.ListFormat(t,Qa({},r));return function(s){return i.format(s)}})},this.init(e)}return Zs(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,r){this.formats[t.toLowerCase().trim()]=r}},{key:"addCached",value:function(t,r){this.formats[t.toLowerCase().trim()]=Ju(r)}},{key:"format",value:function(t,r,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.split(this.formatSeparator),l=a.reduce(function(A,c){var u=Vde(c),f=u.formatName,h=u.formatOptions;if(s.formats[f]){var p=A;try{var d=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},g=d.locale||d.lng||o.locale||o.lng||i;p=s.formats[f](A,g,Qa(Qa(Qa({},h),o),d))}catch(m){s.logger.warn(m)}return p}else s.logger.warn("there was no format function for ".concat(f));return A},t);return l}}]),n}();function I3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function R3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Wde(n){var e=Kde();return function(){var r=va(n),i;if(e){var s=va(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Bg(this,i)}}function Kde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yde(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}var $de=function(n){r_(t,n);var e=Wde(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Xs(this,t),o=e.call(this),i_&&QA.call(RA(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=ta.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return Zs(t,[{key:"queueLoad",value:function(i,s,o,a){var l=this,A={},c={},u={},f={};return i.forEach(function(h){var p=!0;s.forEach(function(d){var g="".concat(h,"|").concat(d);!o.reload&&l.store.hasResourceBundle(h,d)?l.state[g]=2:l.state[g]<0||(l.state[g]===1?c[g]===void 0&&(c[g]=!0):(l.state[g]=1,p=!1,c[g]===void 0&&(c[g]=!0),A[g]===void 0&&(A[g]=!0),f[d]===void 0&&(f[d]=!0)))}),p||(u[h]=!0)}),(Object.keys(A).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(A),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(f)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),l=a[0],A=a[1];s&&this.emit("failedLoading",l,A,s),o&&this.store.addResourceBundle(l,A,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(u){Sde(u.loaded,[l],A),Yde(u,i),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(f){c[f]||(c[f]={});var h=u.loaded[f];h.length&&h.forEach(function(p){c[f][p]===void 0&&(c[f][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,s,o){var a=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:l,wait:A,callback:c});return}this.readingCalls++;var u=function(d,g){if(a.readingCalls--,a.waitingReads.length>0){var m=a.waitingReads.shift();a.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(d&&g&&l<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,l+1,A*2,c)},A);return}c(d,g)},f=this.backend[o].bind(this.backend);if(f.length===2){try{var h=f(i,s);h&&typeof h.then=="function"?h.then(function(p){return u(null,p)}).catch(u):u(null,h)}catch(p){u(p)}return}return f(i,s,u)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var A=this.queueLoad(i,s,a,l);if(!A.toLoad.length)return A.pending.length||l(),null;A.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),l=a[0],A=a[1];this.read(l,A,"read",void 0,void 0,function(c,u){c&&s.logger.warn("".concat(o,"loading namespace ").concat(A," for language ").concat(l," failed"),c),!c&&u&&s.logger.log("".concat(o,"loaded namespace ").concat(A," for language ").concat(l),u),s.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var u=R3(R3({},A),{},{isUpdate:l}),f=this.backend.create.bind(this.backend);if(f.length<6)try{var h;f.length===5?h=f(i,s,o,a,u):h=f(i,s,o,a),h&&typeof h.then=="function"?h.then(function(p){return c(null,p)}).catch(c):c(null,h)}catch(p){c(p)}else f(i,s,o,a,c,u)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),t}(QA);function F3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(ks(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),ks(e[2])==="object"||ks(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){t[i]=r[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function U3(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function L3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Oo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Xde(n){var e=Zde();return function(){var r=va(n),i;if(e){var s=va(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return Bg(this,i)}}function Zde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bv(){}function Jde(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var Gw=function(n){r_(t,n);var e=Xde(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Xs(this,t),r=e.call(this),i_&&QA.call(RA(r)),r.options=U3(i),r.services={},r.logger=ta,r.modules={external:[]},Jde(RA(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),Bg(r,RA(r));setTimeout(function(){r.init(i,s)},0)}return r}return Zs(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=F3();this.options=Oo(Oo(Oo({},a),this.options),U3(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Oo(Oo({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(m){return m?typeof m=="function"?new m:m:null}if(!this.options.isClone){this.modules.logger?ta.init(l(this.modules.logger),this.options):ta.init(null,this.options);var A;this.modules.formatter?A=this.modules.formatter:typeof Intl<"u"&&(A=jde);var c=new C3(this.options);this.store=new Pde(this.options.resources,this.options);var u=this.services;u.logger=ta,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new zde(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),A&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(u.formatter=l(A),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Gde(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new $de(l(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(m){for(var y=arguments.length,w=new Array(y>1?y-1:0),x=1;x<y;x++)w[x-1]=arguments[x];i.emit.apply(i,[m].concat(w))}),this.modules.languageDetector&&(u.languageDetector=l(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=l(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new E3(this.services,this.options),this.translator.on("*",function(m){for(var y=arguments.length,w=new Array(y>1?y-1:0),x=1;x<y;x++)w[x-1]=arguments[x];i.emit.apply(i,[m].concat(w))}),this.modules.external.forEach(function(m){m.init&&m.init(i)})}if(this.format=this.options.interpolation.format,o||(o=bv),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach(function(m){i[m]=function(){var y;return(y=i.store)[m].apply(y,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(m){i[m]=function(){var y;return(y=i.store)[m].apply(y,arguments),i}});var d=ap(),g=function(){var y=function(x,_){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),d.resolve(_),o(x,_)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return y(null,i.t.bind(i));i.changeLanguage(i.options.lng,y)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),d}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bv,a=o,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return a();var A=[],c=function(h){if(h){var p=s.services.languageUtils.toResolveHierarchy(h);p.forEach(function(d){A.indexOf(d)<0&&A.push(d)})}};if(l)c(l);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(A,this.options.ns,function(f){!f&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(f)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=ap();return i||(i=this.languages),s||(s=this.options.ns),o||(o=bv),this.services.backendConnector.reload(i,s,function(l){a.resolve(),o(l)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&x8.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=ap();this.emit("languageChanging",i);var l=function(f){o.language=f,o.languages=o.services.languageUtils.toResolveHierarchy(f),o.resolvedLanguage=void 0,o.setResolvedLanguage(f)},A=function(f,h){h?(l(h),o.translator.changeLanguage(h),o.isLanguageChangingTo=void 0,o.emit("languageChanged",h),o.logger.log("languageChanged",h)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(f,function(){return o.t.apply(o,arguments)})},c=function(f){!i&&!f&&o.services.languageDetector&&(f=[]);var h=typeof f=="string"?f:o.services.languageUtils.getBestMatchFromCodes(f);h&&(o.language||l(h),o.translator.language||o.translator.changeLanguage(h),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(h)),o.loadResources(h,function(p){A(p,h)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,l=function A(c,u){var f;if(ks(u)!=="object"){for(var h=arguments.length,p=new Array(h>2?h-2:0),d=2;d<h;d++)p[d-2]=arguments[d];f=a.options.overloadTranslationOptionHandler([c,u].concat(p))}else f=Oo({},u);f.lng=f.lng||A.lng,f.lngs=f.lngs||A.lngs,f.ns=f.ns||A.ns,f.keyPrefix=f.keyPrefix||o||A.keyPrefix;var g=a.options.keySeparator||".",m;return f.keyPrefix&&Array.isArray(c)?m=c.map(function(y){return"".concat(f.keyPrefix).concat(g).concat(y)}):m=f.keyPrefix?"".concat(f.keyPrefix).concat(g).concat(c):c,a.t(m,f)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=o,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,A=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(h,p){var d=s.services.backendConnector.state["".concat(h,"|").concat(p)];return d===-1||d===2};if(o.precheck){var u=o.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!l||c(A,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=ap();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){a.resolve(),s&&s(l)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=ap();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],l=i.filter(function(A){return a.indexOf(A)<0});return l.length?(this.options.preload=a.concat(l),this.loadResources(function(A){o.resolve(),s&&s(A)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new C3(F3());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bv,a=Oo(Oo(Oo({},this.options),s),{isClone:!0}),l=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(l.logger=l.logger.clone(s));var A=["store","services","language"];return A.forEach(function(c){l[c]=i[c]}),l.services=Oo({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new E3(l.services,l.options),l.translator.on("*",function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),h=1;h<u;h++)f[h-1]=arguments[h];l.emit.apply(l,[c].concat(f))}),l.init(a,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(QA);Ba(Gw,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Gw(n,e)});var ni=Gw.createInstance();ni.createInstance=Gw.createInstance;ni.createInstance;ni.dir;ni.init;ni.loadResources;ni.reloadResources;ni.use;ni.changeLanguage;ni.getFixedT;ni.t;ni.exists;ni.setDefaultNamespace;ni.hasLoadedNamespace;ni.loadNamespaces;ni.loadLanguages;function qde(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var P3={};function qC(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&P3[e[0]]||(typeof e[0]=="string"&&(P3[e[0]]=new Date),qde.apply(void 0,e))}function D3(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function i(){setTimeout(function(){n.off("initialized",i)},0),t()};n.on("initialized",r)}})}function epe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var o=function(l,A){var c=e.services.backendConnector.state["".concat(l,"|").concat(A)];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,n)&&(!i||o(s,n)))}function tpe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return qC("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,n))return!1}}):epe(n,e,t)}var npe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,rpe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},ipe=function(e){return rpe[e]},spe=function(e){return e.replace(npe,ipe)};function O3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function N3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var eM={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:spe};function ope(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};eM=N3(N3({},eM),n)}function ape(){return eM}var _8;function lpe(n){_8=n}function Ape(){return _8}var cpe={type:"3rdParty",init:function(e){ope(e.options.react),lpe(e)}},upe=ye.createContext(),fpe=function(){function n(){Xs(this,n),this.usedNamespaces={}}return Zs(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(i){r.usedNamespaces[i]||(r.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function hpe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,A=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){A=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(A)throw i}}return a}}function dpe(n,e){return m8(n)||hpe(n,e)||g8(n,e)||v8()}function k3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pB(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k3(Object(t),!0).forEach(function(r){Ba(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ppe=function(e,t){var r=ye.useRef();return ye.useEffect(function(){r.current=t?r.current:e},[e,t]),r.current};function mpe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=ye.useContext(upe)||{},i=r.i18n,s=r.defaultNS,o=t||i||Ape();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new fpe),!o){qC("You will need to pass in an i18next instance by using initReactI18next");var a=function(M,P){return typeof P=="string"?P:P&&ks(P)==="object"&&typeof P.defaultValue=="string"?P.defaultValue:Array.isArray(M)?M[M.length-1]:M},l=[a,{},!1];return l.t=a,l.i18n={},l.ready=!1,l}o.options.react&&o.options.react.wait!==void 0&&qC("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var A=pB(pB(pB({},ape()),o.options.react),e),c=A.useSuspense,u=A.keyPrefix,f=n||s||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);var h=(o.isInitialized||o.initializedStoreOnce)&&f.every(function(b){return tpe(b,o,A)});function p(){return o.getFixedT(null,A.nsMode==="fallback"?f:f[0],u)}var d=ye.useState(p),g=dpe(d,2),m=g[0],y=g[1],w=f.join(),x=ppe(w),_=ye.useRef(!0);ye.useEffect(function(){var b=A.bindI18n,M=A.bindI18nStore;_.current=!0,!h&&!c&&D3(o,f,function(){_.current&&y(p)}),h&&x&&x!==w&&_.current&&y(p);function P(){_.current&&y(p)}return b&&o&&o.on(b,P),M&&o&&o.store.on(M,P),function(){_.current=!1,b&&o&&b.split(" ").forEach(function(Y){return o.off(Y,P)}),M&&o&&M.split(" ").forEach(function(Y){return o.store.off(Y,P)})}},[o,w]);var C=ye.useRef(!0);ye.useEffect(function(){_.current&&!C.current&&y(p),C.current=!1},[o,u]);var T=[m,o,h];if(T.t=m,T.i18n=o,T.ready=h,h||!h&&!c)return T;throw new Promise(function(b){D3(o,f,function(){b()})})}var b8=[],gpe=b8.forEach,vpe=b8.slice;function ype(n){return gpe.call(vpe.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var Q3=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,wpe=function(e,t,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!Q3.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!Q3.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},H3={create:function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=wpe(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},xpe={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var r=H3.read(e.lookupCookie);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&H3.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},_pe={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(t=s[o].substring(a+1))}}}return t}},lp=null,z3=function(){if(lp!==null)return lp;try{lp=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{lp=!1}return lp},bpe={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&z3()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&z3()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Ap=null,G3=function(){if(Ap!==null)return Ap;try{Ap=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Ap=!1}return Ap},Bpe={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&G3()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&G3()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},Epe={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)t.push(navigator.languages[r]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},Cpe={name:"htmlTag",lookup:function(e){var t,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},Mpe={name:"path",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;t=r[e.lookupFromPathIndex].replace("/","")}else t=r[0].replace("/","")}return t}},Spe={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};function Tpe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var B8=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xs(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return Zs(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=ype(r,this.options||{},Tpe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(xpe),this.addDetector(_pe),this.addDetector(bpe),this.addDetector(Bpe),this.addDetector(Epe),this.addDetector(Cpe),this.addDetector(Mpe),this.addDetector(Spe)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var r=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}]),n}();B8.type="languageDetector";const Ipe={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",saveCharacter:"Save Your Character"},callToAction:{next:"Next",back:"Back",randomize:"Randomize",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},Rpe={translation:{pageTitles:{chooseClass:"  ",chooseAppearance:" ",saveCharacter:" "},callToAction:{next:"",back:"",randomize:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:" ",preferredGreeting:" ",question:"",yourName:" ",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API       ."}}},Fpe={translation:{pageTitles:{chooseClass:"",chooseAppearance:"",saveCharacter:""},callToAction:{next:"",back:"",randomize:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:"",preferredGreeting:"",question:"",yourName:"",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API!"}}},Upe={en:Ipe,ru:Rpe,zh:Fpe};ni.use(B8).use(cpe).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:Upe});const So=ye.createContext(),Lpe=n=>{const{t:e}=mpe();return N.jsx(So.Provider,{value:{t:e},children:n.children})},Ppe=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Dpe=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,Ope=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Npe=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,kpe=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Qpe=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,Hpe=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,zpe=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Gpe=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Vpe=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,TT=(n,e,t)=>{const r=new Wt;["position","normal","uv"].forEach(o=>{r.setAttribute(o,n.attributes[o])}),r.setIndex(n.index);const i=new Float32Array(t*3),s=new ww(i,3);r.setAttribute("positions",s);for(const o of e){const{name:a,itemSize:l}=o,A=new Float32Array(t*l);r.setAttribute(a,new ww(A,l))}return r},jpe=n=>{const r=new zx(.45,.45,5,50,50,!0),i=new Mr({uniforms:{auraTexture:{value:null}},vertexShader:Ppe,fragmentShader:Dpe,transparent:!0,blending:Wc});i.uniforms.cameraDir=n.cameraDir,i.uniforms.eye=n.eye,i.uniforms.switchItemTime=n.switchItemTime,i.uniforms.switchItemDuration=n.switchItemDuration;const s=new Cn(r,i);return s.frustumCulled=!1,s.position.y=5*.46,s},Wpe=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,r=new ou(t,t),i=TT(r,e,20),s=new Mr({uniforms:{cameraBillboardQuaternion:{value:new rt}},vertexShader:Ope,fragmentShader:Npe,depthWrite:!1,blending:Wc}),o=new Hx(i,s,20);return o.info={particleCount:20,velocity:[20]},o},Kpe=n=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const r=.43,i=new rT(r,32,32),s=TT(i,t,10),o=new Mr({uniforms:{radius:{value:r}},vertexShader:kpe,fragmentShader:Qpe,depthWrite:!1,blending:Wc});o.uniforms.cameraDir=n.cameraDir,o.uniforms.eye=n.eye,o.uniforms.fadeInAvatarTime=n.fadeInAvatarTime;const a=new Hx(s,o,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},Ype=n=>{const t=new ou(1,1),r=new Mr({uniforms:{cameraBillboardQuaternion:{value:new rt}},vertexShader:Hpe,fragmentShader:zpe,depthWrite:!1,blending:Wc});return new Cn(t,r)},$pe=n=>{const t=[],s=new zx(.645,.43,2.5,50,50,!0),o=TT(s,t,2),a=new Mr({uniforms:{opacity:{value:0}},vertexShader:Gpe,fragmentShader:Vpe,transparent:!0,blending:Wc});a.uniforms.cameraDir=n.cameraDir,a.uniforms.eye=n.eye;const l=new Hx(o,a,2);return l.fadeIn=!1,l.frustumCulled=!1,l.position.y=2.5*.46,l},V3=100,Xpe=0,Vw=1.5,Zpe=.1,vy=0,j3=1,W3=.05,tM=0,Jpe=1,qpe=.015,xi={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},eme=new lu,E8=eme.load("./textures/beam2.png");E8.wrapS=us;class tme{constructor(e,t,r){this.scene=e,this.camera=t,this.globalUniforms=r,this.eye=new Z,this.cameraDir=new Z,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,(Math.random()-.5)*2,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++)if(r.getX(o)<.01){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,Math.random()*-1,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),r=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,o=this.ringMesh.info.currentIndex,a=o-1<0?s-1:o-1,l=.1;(r.getY(a)>l+e||i.getX(a)<=0)&&(r.setXYZ(o,0,l,0),t.setXY(o,1,.06),i.setX(o,1),this.ringMesh.info.velocity[o]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=jpe(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=E8,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=Wpe(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=Kpe(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=Ype(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=$pe(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==xi.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)r.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),r.setX(s,r.getX(s)/1.3)):(r.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,r.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),r=this.ringMesh.info.particleCount;for(let i=0;i<r;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==xi.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===xi.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const r=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,r*s,i),this.teleportMesh.position.y=r*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const C8=new lu,nM=C8.load("./textures/pixel9.png");nM.wrapS=nM.wrapT=us;const rM=C8.load("./textures/noise3.jpg");rM.wrapS=rM.wrapT=us;const Ut={switchItemDuration:{value:Vw},switchItemTime:{value:Vw},eye:{value:new Z},cameraDir:{value:new Z},fadeOutAvatarTime:{value:vy},fadeInAvatarTime:{value:tM},transitionEffectType:{value:xi.normal}},K3={pixelTexture:{value:nM},noiseTexture:{value:rM}};class nme extends EventTarget{constructor(){super();un(this,"setTransitionEffect",t=>{this.transitionEffectType=t});un(this,"getTransitionEffect",t=>this.transitionEffectType===t);this.cameraDir=new Z,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=V3,this.update()}setCustomShader(t){t.vertexShader&&(t.vertexShader=t.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),t.vertexShader=t.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),t.vertexShader=t.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),t.fragmentShader=t.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),t.uniforms.pixelTexture=K3.pixelTexture,t.uniforms.noiseTexture=K3.noiseTexture,t.uniforms.cameraDir=Ut.cameraDir,t.uniforms.eye=Ut.eye,t.uniforms.switchItemTime=Ut.switchItemTime,t.uniforms.switchItemDuration=Ut.switchItemDuration,t.uniforms.transitionEffectType=Ut.transitionEffectType,t.uniforms.fadeInAvatarTime=Ut.fadeInAvatarTime)}playFadeOutEffect(){Ut.transitionEffectType.value=xi.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((j3-vy)/W3),this.initialFadeOutTimer()}playFadeInEffect(){Ut.transitionEffectType.value=xi.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Ut.switchItemTime.value=Xpe,Ut.transitionEffectType.value=xi.switchItem,this.transitionTime=V3}setParticle(t,r){this.particleEffect=new tme(t,r,Ut)}initialFadeOutTimer(){Ut.fadeOutAvatarTime.value=vy}initialFadeInTimer(){Ut.fadeInAvatarTime.value=tM}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Ut.transitionEffectType.value===xi.switchItem?Ut.switchItemTime.value<Vw?Ut.switchItemTime.value+=Zpe:(Ut.switchItemTime.value=Vw,Ut.transitionEffectType.value=xi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Ut.transitionEffectType.value===xi.fadeOutAvatar?(Ut.fadeOutAvatarTime.value+=W3,Ut.fadeOutAvatarTime.value>j3&&(Ut.fadeOutAvatarTime.value=vy,Ut.transitionEffectType.value=xi.loadingAvatar)):Ut.transitionEffectType.value===xi.loadingAvatar||Ut.transitionEffectType.value===xi.fadeInAvatar&&(Ut.fadeInAvatarTime.value>.1&&Ut.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Ut.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Ut.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Ut.fadeInAvatarTime.value+=qpe,Ut.fadeInAvatarTime.value>Jpe&&(Ut.fadeInAvatarTime.value=tM,Ut.transitionEffectType.value=xi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Ut.cameraDir.value.copy(this.cameraDir),Ut.eye.value.copy(this.camera.position))},this.frameRate)}}const rme="_container_1fjfz_1",ime="_messageWindow_1fjfz_11",sme="_messageTitle_1fjfz_25",ome="_buttonContainer_1fjfz_36",Bv={container:rme,messageWindow:ime,messageTitle:sme,buttonContainer:ome};var M8={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(M8);var S8=M8.exports;const ph=El(S8),ame="_iconButtonWrap_1fm7l_1",lme="_buttonBackground_1fm7l_8",Ame="_buttonBackgroundColor_1fm7l_13",cme="_innerBackgroundColor_1fm7l_16",ume="_dark_1fm7l_20",fme="_iconWrap_1fm7l_28",hme="_icon_1fm7l_1",dme="_active_1fm7l_83",pme="_buttonWrap_1fm7l_95",mme="_buttonIconWrap_1fm7l_108",gme="_innerWrap_1fm7l_127",Pn={iconButtonWrap:ame,buttonBackground:lme,buttonBackgroundColor:Ame,innerBackgroundColor:cme,dark:ume,iconWrap:fme,icon:hme,active:dme,buttonWrap:pme,buttonIconWrap:mme,innerWrap:gme},vme=[{name:"backpack",file:"./assets/icons/backpack.svg"},{name:"microphone",file:"./assets/icons/microphone.svg"},{name:"speechToText",file:"./assets/icons/speechToText.svg"},{name:"arrowRight",file:"./assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"./assets/icons/arrowLeft.svg"},{name:"rooms",file:"./assets/icons/rooms.svg"},{name:"scenes",file:"./assets/icons/scenes.svg"},{name:"settings",file:"./assets/icons/settings.svg"},{name:"tokens",file:"./assets/icons/tokens.svg"},{name:"voice",file:"./assets/icons/voice.svg"},{name:"vr",file:"./assets/icons/vr.svg"},{name:"discord",file:"./assets/icons/discord.svg"},{name:"metamask",file:"./assets/icons/metamask.svg"},{name:"close",file:"./assets/icons/close.svg"},{name:"hide",file:"./assets/icons/hide.svg"},{name:"map",file:"./assets/icons/map.svg"},{name:"login",file:"./assets/icons/login.svg"},{name:"logout",file:"./assets/icons/logout.svg"},{name:"plus",file:"./assets/icons/plus.svg"},{name:"minus",file:"./assets/icons/minus.svg"},{name:"mint",file:"./assets/icons/mint.svg"},{name:"download",file:"./assets/icons/download.svg"},{name:"classDropHunter",file:"./assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"./assets/icons/class-engineer.svg"},{name:"classCustom",file:"./assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"./assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"./assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"./assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"./assets/icons/class-beast-painter.svg"},{name:"soundon",file:"./assets/icons/soundon.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"polygon",file:"./assets/icons/polygon.svg"}];async function yme(n){const e=vme.find(t=>t.name===n);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function gn(n){const{size:e,icon:t,className:r,onClick:i,theme:s,type:o,text:a,onMouseEnter:l,active:A,onSubmit:c,minWidth:u,disabled:f}=n,h=ye.useRef(null);return ye.useEffect(()=>{t&&yme(t).then(p=>{h.current&&(h.current.innerHTML="",p&&(p.classList.add(Pn.icon),h.current.append(p)))})},[t]),o&&o==="login"?N.jsxs("div",{className:ph(r,Pn.iconButtonWrap,s&&s==="dark"?Pn.dark:Pn.light,A&&Pn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[N.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Pn.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[N.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Pn.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),N.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Pn.innerBackgroundColor})]}),N.jsx("span",{ref:h,className:Pn.iconWrap})]}):o&&o==="icon"?N.jsxs("div",{className:ph(r,Pn.iconButtonWrap,s&&s==="dark"?Pn.dark:Pn.light,A&&Pn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[N.jsxs("svg",{className:Pn.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[N.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Pn.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),N.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Pn.innerBackgroundColor})]}),N.jsx("span",{ref:h,className:Pn.iconWrap})]}):N.jsx("button",{className:ph(r,Pn.buttonWrap,s&&s==="dark"?Pn.dark:Pn.light),onClick:i,onMouseEnter:l,onSubmit:c,type:o,disabled:f,style:{minWidth:u?u+"px":""},children:N.jsxs("div",{className:Pn.innerWrap,style:{fontSize:e},children:[t&&N.jsx("span",{ref:h,className:Pn.buttonIconWrap,style:{height:e,width:e,opacity:f?"0.4":"1"}}),a&&a]})})}function wme(n){const{cancelOption:e=!0,confirmDialogText:t,confirmDialogWindow:r,setConfirmDialogWindow:i,confirmDialogCallback:s}=n;return r?N.jsx("div",{className:Bv.container,children:N.jsxs("div",{className:Bv.messageWindow,children:[N.jsx("div",{className:Bv.messageTitle,children:t}),N.jsxs("div",{className:Bv.buttonContainer,children:[e&&N.jsx(gn,{size:16,theme:"light",text:"Cancel",onClick:()=>{s[0](!1),i(!1)}}),N.jsx(gn,{size:16,theme:"light",text:"Continue",onClick:()=>{s[0](!0),i(!1)}})]})]})}):N.jsx("div",{})}const xme="_backgroundImg_1yy0g_1",_me="_darkBackground_1yy0g_16",bme="_logo_1yy0g_29",Ev={backgroundImg:xme,darkBackground:_me,logo:bme};function Bme(){const{debugMode:n}=$.useContext(Zn);return N.jsxs("div",{className:n?Ev.darkBackground:Ev.backgroundImg,children:[N.jsx("div",{className:Ev.backgroundBlur}),N.jsx("div",{className:Ev.Background})]})}const Eme="_buttonContainer_lqksm_1",Cme="_buttonLeft_lqksm_10",Mme="_buttonRight_lqksm_14",Sme="_buttonCenter_lqksm_18",Tme="_sideMenu_lqksm_33",Ime="_scrollContainer_lqksm_44",Rme="_scrollContainerOptions_lqksm_52",Fme="_bottomLine_lqksm_60",Ume="_editorButton_lqksm_94",Lme="_editorText_lqksm_102",Pme="_selectorContainerPos_lqksm_112",Dme="_selectorButton_lqksm_137",Ome="_selectorColorPickerUI_lqksm_146",Nme="_selectorColorPickerButton_lqksm_152",kme="_selectorColorPickerImg_lqksm_165",Qme="_uploadContainer_lqksm_171",Hme="_uploadButton_lqksm_184",zme="_relativeBox_lqksm_204",Gme="_blendshapeGroup_lqksm_208",tn={buttonContainer:Eme,buttonLeft:Cme,buttonRight:Mme,buttonCenter:Sme,sideMenu:Tme,scrollContainer:Ime,scrollContainerOptions:Rme,bottomLine:Fme,"editor-container":"_editor-container_lqksm_87",editorButton:Ume,editorText:Lme,selectorContainerPos:Pme,"selector-container":"_selector-container_lqksm_123","selector-container-column":"_selector-container-column_lqksm_129",selectorButton:Dme,selectorColorPickerUI:Ome,selectorColorPickerButton:Nme,selectorColorPickerImg:kme,uploadContainer:Qme,uploadButton:Hme,relativeBox:zme,blendshapeGroup:Gme},Vme="_dropArea_1a0z4_1",jme={dropArea:Vme};function Eg({onFilesDrop:n}){const[e,t]=ye.useState(!1),[r,i]=$.useState(null);ye.useEffect(()=>{const o=l=>{l.preventDefault(),t(!1);const A=l.dataTransfer.files;n&&i(A)},a=l=>{l.preventDefault(),t(!0)};return window.addEventListener("drop",o),window.addEventListener("dragover",a),()=>{window.removeEventListener("drop",o),window.removeEventListener("dragover",a)}},[]),ye.useEffect(()=>{r&&n(r)},[r]);const s=()=>{t(!1)};return N.jsx("div",{onDragLeave:s,className:jme.dropArea,style:{display:e?"flex":"none"}})}const Wme="_mainTitleWrap_4fb0s_1",Kme="_mainTitle_4fb0s_1",Yme="_topLine_4fb0s_18",mB={mainTitleWrap:Wme,mainTitle:Kme,topLine:Yme};function ya({title:n,width:e,left:t,right:r}){const i={width:e?`${e}px`:null,left:t?`${t}px`:null,right:r?`${r}px`:null};return n&&N.jsxs("div",{className:mB.mainTitleWrap,style:i,children:[N.jsx("div",{className:mB.topLine}),N.jsx("div",{className:mB.mainTitle,children:n})]})}const $me="_ContainerPositionTop_v15ql_2",Xme="_ContainerPosition_v15ql_2",Zme="_Container_v15ql_2",Jme="_topLine_v15ql_68",qme="_traitInfoTitle_v15ql_96",ege="_flexSelect_v15ql_105",tge="_flexButtons_v15ql_114",nge="_flexButtonsTop_v15ql_122",rge="_optionButtons_v15ql_131",ige="_optionButtonsSmall_v15ql_143",qn={ContainerPositionTop:$me,ContainerPosition:Xme,Container:Zme,"arrow-button":"_arrow-button_v15ql_39","left-button":"_left-button_v15ql_55","right-button":"_right-button_v15ql_62",topLine:Jme,traitInfoTitle:qme,flexSelect:ege,flexButtons:tge,flexButtonsTop:nge,optionButtons:rge,optionButtonsSmall:ige},sge="/assets/randomize-green-4388c12b.png",oge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNiOTBlZjU3LTIwOWItYzQ0Zi05OWNjLTkwYjYxM2Q0MWJiOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1ZDdmMmJiLWMxYjctYjc0My1hYmIzLTFmM2VjNjMxYjE0NCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYjkwZWY1Ny0yMDliLWM0NGYtOTljYy05MGI2MTNkNDFiYjgiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bbHqfAAAFoklEQVR42u2duWtWQRTFo5hGRNAETKFiIQqCSxGto4iCqSLon6BoQJJCEcEFLASbD7QRRcTKNbihoLgUWhj/AItUCi7gVmjikubzPphAiOYts9659xQHAnl5M2/u73vnzHwvbzra7XaHNg1cPrKadJs0bnSHtEbjWGgr/HxSi9SeRWeLYwCAzOIPmk97u0ITpAMAQE7h+0ivaxR+psZIWwBAvoVfSXpsUfiZelZkBgAgx+dtJTIfaPV5W4nLB9p93lZi8oEEn39iWcRPpK2kzaSPlud4mns+0Ojzk6QTpM5p5+skHSP90ZYPtPn8DVJ3ybkXk65oygdafH6UtKlBW72klxrygfT5/BfSLoe2B0xWELt+oMbnHfoxj3RUaj6Q6vNdAfq0SGI+UOvzDn0UlQ/U+7z2fACfV54P4PPK8wF8Xnk+gM8rzwfweeX5AD6vPB/A55XnA/i88nwAn1eeD+DzyvMBfF55PoDPK88H8Hnl+aBup/aQflp26HrZc3hQaT64Zjnmv0h7nQEwT8u24PNJQdjokA9aVXfdqsaH4fNsQNhJ+mxRj2EXAO41bGw/ihUchH0Na3LXBYC7DRs7T1qOQgUr/lLSuZgA3LL0nkukhSiat8IvIF2wrMWtFABMJdHDpLkoolPxD5mxbOcGwJTekfpRzMaF305662H8kwMwpRekDShuZeHXkp57HHc2ACAfhPP5JAB8MB3+jXyQzOeLJfaLpPcpAPhmjlnmcMtSnQ8cfb6w1BXmPF9TAFB8N9Az7dhtpDfIB8F9vvjQ7Jh2rp6K72mCArDkP39z0GHaIjofOPr8lG3OmXHOJawAmHah57F+4G0+P+sHgyUAHm91/fD5cmtkDYDmfODT57MHQFM+COHzYgCQng9C+bwoACTmg9A+LxIACfkgls+LBiDHfBDb51UAkEs+SOHzagDgnA9S+rw6ADjlAw4+rxaAlPmAk8+rByB2PuDm8wAgUj7g6vMAIHA+4O7zACDc7fqk+a/lbJel1QPgIR9k/cUUAAj7SDX7r6YBgP98wM7nAUCa9YOo83kAwC8f5PIACgDwnA+yegQNADQfsGdlb9rK8HoAQMMBK3vryT0AIB+ARyXX9AgAyAfgYck1PQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlALQAwCSX0+y18V/L/a3BQDJr2cx6UcKAMZz3BRaIADdphZJNo16ldsG0ZIAoP721thY2gmAulvH3iB1AYCot/0rMbaObbJ59KR53UonAAjW907ScTPWUfYOHpK2fXyuADhsHz/kAkBBXMvy5QqjHPNBbgBQnzbW8PnZ1Kq6I9ftxJ6KuWaZrnOaLeQCQDHFJl1zeLPJ3jrtNOnQfIe7AZt8wB0A6sM80lHSH8uxPlPUqm57Nh1cSXps2bnk+YAzANT+AOmT5dg+Ja1q2qZLZ/tIry07m2z9gCMAjj4/Rtpi27aPzg9WrERVrR90awXAzOevWo7dBOmAax98XUg2+YADAGZ2dSyWzwcHIKd8kBoAM5+P6vPRAMghH6QCIKXPRweAcz6IDQAHn08GAMd8EAsATj6fFABu+SAGANx8ngUAXPJBSAC4+jwrADzlg5u2+SAEANx9niUAqfKBTwBy8Xm2AHjKB19Ju2MDkJPPswcgZj5wBSBHn88GgBj5wBaAnH0+OwBC5oOmAEjw+SwBCJUPmrwuXorPZw2Ax3yw3pxnpOS4EXPMOkk+LwKAGflgwrI4p0kPSn5/n3RKms+LAsBDPggh1j4vDgBP+cCHsvB5sQB4ygfifV48AJ7WD8T6vBoAAueDbH1eFQAB8kH2Pq8SAA/5QIzPqwbAIh+I83kAUD8fiPR5APAvCKtJt80dYdz8vEbjWPwFnWtJD/nY2zYAAAAASUVORK5CYII=",age="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NDY5Y2JiLWFkMzUtYmQ0Ny04M2Q1LWU0NGQ0MTI2YmYwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIyNTIzNmU1LWZhMWItZTM0NS04ZDM2LTE5YmQyYTRiZjM1MSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNjQ2OWNiYi1hZDM1LWJkNDctODNkNS1lNDRkNDEyNmJmMDYiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qPgTwAAAEeUlEQVR42u2dX4tNURiH58KfwR1K0USSj6BoIpdydcY0TUMmIy58BPdK/uTCLReaG7kwooQoH4FQyneQMNw53t2cqdOJPfusvfZa77ve5+JX1DlnOns9PM+cqT0T/X5/wtt6D64ekj2W/ZKtDv582OO18Hbwk7I7sv5/dle2DQDKPPzLsp81h7++6n+EKwBQzsGfkH1ucPCj+yI7CQB2D/6A7GXAwY/utewgAJTj+dAV2QdePR+64vrAu+dDV0wf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5532A5533AZ533gd43nkf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5530wzsHvkr3hQqvfW9nuLgDYKXvGBVa/F50AMATCHtkKF1rdqn+ce1NG4BHZOy589n2QHc35beBZ2VcOIvm+yRa1fBC0SXZN9oeDSbLrss0aPwqmDxR6PggA+ULnZRfpA9uel+ddkJ0LAWB56AOG/fSBLc/L86ZkrwavsxwCwOgPd6q/T9IHuj0vz9kquzl6djEAqPZDdok+0Ol5ed6S7Ps/XjMaAOurfgh0nD5Q4/lp2aea144OwPDHjvRBXs8/b/A1OgOAPtDj+awA0Af5PZ8dAPogr+fVAEAf5PG8OgDog7SeVwuA1z5I7XnVAHjqg1yeNwFAyX2Q2/OmACitDzR43iQA1vtAk+fNAmCxDzR63jwAFvpAs+eLAUBrH2j3fHEAaOkDK54vEoCcfWDN80UDkLIPrHreBQBd94Flz7sCIEYfPCnM8+4AiNEHZ2RzhXjeLQCt+6AQz7sHoFUfFOB5AIjRB4Y9DwAx+8Cg5wEgVh8Y9TwANNjt6rOADT4nuFHg+waAoc3WvOfZQt8zAAxtruY9zwFA+QDM1LznGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANsA3AeAYnYvBIBTsvcAYH4fZaeDf328PHmxt3bzRACwteqWNkvBvz5+5MJs6a3dRBEAbOxWdVOrJmc77j1z9smeAoDaVbe1mRrnTENvnnSst3YzZQDQsepGVtMhZ9n29mkW+6AkABp5vjMAjPZBKQA09nynABjsA+sAjO35JAAY6gOrAAR7PikABvrAGgCtPZ8FAMV9YAmAKJ7PBoDSPrAAQFTPZwdAWR9oBqATz6sBQEkfaASgU8+rAyBzH2gDoHPPqwQgYx9oASCZ51UDkKEPcgOQ3PMmAEjYB7kAyOZ5UwAk6IMcAGT1vDkAOu6DlACo8LxZADrqgxQAqPK8eQAi90GXAKj0fDEAROqDrgBQ6/miAIjQB7EBUO/5IgFo0QexADDj+aIBCOiDtgCY87wLAMbogzYAmPS8GwAa9kEIAKY97w6ADfpgHACK8LxbAEb6YHVwqPM1j5sfPOZ3SZ53D8DgcLfLHsoWah6zIHsk2+HluvwF92zupxEV3NQAAAAASUVORK5CYII=",lge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmY3YWFkYzZiLWM2ZmEtNjE0OC05YWZkLTgxN2Q1OWRkZTI0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2NTFhZmQyLWU5YTctOTc0Zi1hZWFkLTdiMWMyODQ2YWEzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmN2FhZGM2Yi1jNmZhLTYxNDgtOWFmZC04MTdkNTlkZGUyNDIiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6TWt7cAAAFm0lEQVR42u2dT2xURQCHSTXpQTH0oIJpgfZKi1ETiSK1MV7FbORQNcG0Hmg3oQVjjKARrhDBBDEYMSEYS6kWkxoVAheDiBc9kHBBuaGgMSo1KgTF+pt0JLq6dOe93X3z5zt8SbPdvtmZ37fvvc7Mm5k3MzMzD9KFRkAAGgEBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABPKO0f3OrWCxWiTViROwQ+8QBcchywL62w77HvLdPdJpjIEAYYd8sHhDPiD3iuLggfhczGblqj/GJ2Cs2il5xCwL4EfoK8bw4LH7MEbQrF8UR8aK4T7QgQPNC77On6jNNDHwuzopXzGdDgMaEvlRsEqc8Cr0ap+2ZoRMB8gdvrulviT8CCP7/7h/GxIMI4B78Q+KjAEOvhrlHeRgB5g7e3FB9GFHwlZi6rUSA/wZ/m3g94uAreVMsRIDZ8J8S3yUU/t98L55OVgDby3Y4weArMf0JXUkJoAo/Ln4i/GtMiyeTEEAV3U3gVXktWgFUuXbxKSHPyWeiIyoBVKG7xXnCrRnTVvdEIYAqsjrniFwjGteciabEuGXKvnbes57ER4MWQBVY60FD/ioOiiHRfb3xfTt/oNu+1/zNLx58/rVBCqAPPlxww52x4/e356jDrfYYXxZcl+GgBCg4/Gk7KaSljvVpsSJcLLBe5SAEMB+04L72JQ08qy0ueKyi7LUABYe/pYn/0r4UiwSxhD9UQIfWuhgkiOGav67A8YzgJeC0n7/+W0KWIOTwj3o0keVoqBKEGv5vYoFHAiwQl0KUIMTwDSM5wuoQg3Ya90HLTvtaR47jjhbcJuWmCOBB+OcyBrTcPgJ25TrHvmKFuDNjGedCkyC08DN9+20vnms5GwM8CzhLEFr45jo73zGUbTnK2+5Y1nxxOSQJQgrf8G4B38gRxzInPWmrcl0E8Ch8w4BDEF11LLfLodwBj9qrnEsAz8I3LHMI4r06ljvpUO4yz9qsnEkA/WG/ZxX5VtxQYwh3NKD8RTWWfaOHzzn0OwmgP2izU5J8qsQJh2/hYMGXnxMePqja5iLAdg8nSk45BPBqA8rf5VD+lIftt81FgC88rMC4QwDvNKD8CYfyxz1sv88RAAG4BHAJSOMmcICbwBw3gRH8G7ioAeUvTObfwEg6giYL6gjqjqIjiK7gzF3Bg6VYuoIjGAwaYTAoruHgywwHFzAc7JkEoxkmamwQfzIhJI4pYd9knK7VU+OUMNOJszxjGV9HPSXMIwlGc0zebLf9BDsrJoWa19pzHHdDEpNCPZHgUrWOjYKmhbclNS3cEwmOeSTAseQeDPFEgq08GsbDoUMFhj+U/MOhnpwJhgmfBSK2ctpniRizx8DSBga/hCVi/JfgZ/FsrUPHjotETbNIVDjLxH1lVwtjmTgWitw8YYXsqWGhyB773gkWiqyPBI/M0f/ebC7YZWHf/0dXsPn5pP2dL5/TLK+7OpbFou8ygzgsAl37gJdpM5aLT5OTeQalQtgwYhchV2V3KlvG9LNlzL8waxA/kdqmUWY7WDaNmm2DtDaNYtu4a9vGDbJxZJobR75RYuPIqlvHfhBx8GYc4X62jk1v82hTFzaPzrh9/H7PNp2qFbPl/duil+3j6zMMu0mcCiD40+IF0RlC2wYhQIUMveJluymUL6GftWsP94XWnsEJUCHDveI5e439oYmBm06sI/abvqKeG1QhQHYZbhIr7fj9HvFxaXYjyDz3D1ftMY6LvfbYq1yfT0SA4qRotcvDm5vJNfZpYXP52CfGxCHLmH3N/G69eMyczkuzW9y3xtxGUQsACAAIAAgACAAIAAgACAAIAAgACAAIAAiAADQCAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkCc/AWkhfX2hx9ZaQAAAABJRU5ErkJggg==",Age="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAATr2AAE69gE6sVc6AAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslPja4AAAbiSURBVHja7Z17iFVFHMc1K80ybc3SP9K21YrubtLDiIJqK5WMpbYt1MpSKiKkba0gtU0rCCpoyxRXSKrNiJIwCmtD0u2JEWFuSC/t2sueghDU2svbd2D+uFzce89rzvxm5vvHB2TX5Zw758PMufN7zJBSqTSEhAsHgQJwECgAoQCEAhAKQCgAoQCEAhAKQCgAoQCEAhAKQCgAoQDVaO1ZOgWsB7+CAbALLAPDOdCeC4CH3AJKg/AlGM/B9lQAPNxG8HcVARS7wQQOuJ8CPFvj4VMCXwXAAx0BfowoACXwUIA68EcMASiBh0vApzEFoASeCdCZQABK4JEAw0A/JQh7H2A8KFKCsHcCxUugX1qnghlgLrgBzNP/bgXTwTRwAjiEAsQf4AkpJChmJYF+0M1gIegGm8Dn4M+I9/If+B68B3rAneBiMIoCCJwJ8DejwZVgBfgQ7E94/Vqor7ybwVJwOgWwKAH+z3HgJrDR4AOvxU7wIDiFAuQoAX7XZumBV0MtF20UID8JnhMoQUlvjXeAw5kQYl6CVUIlUOwD7WBo8BlBhiVYK1gCxU/giuBTwgxL8IJwCRTvg/qgcwINS/CKAxIolgSdFGpYgjcdkeATMDHYrGDDErzriASK+cGmhZuSAD8/DHzskARrg60LMCjBkQkTVWwuCccGWRhiUIIx4DOHJNgLCkFWBhmUYJzer3dFAhWFnOXjRtAosA6cb0ECFaL+xiEJFAt8E6BXf7Cfq22GGJRgIvjBMQlu9yUWsOUgW6M2JGgAvzgmQYfr0cA3quyPm5KgWEWCaXpLVhWtXqVp11k/6uffCpRgoav5AC9GCJvWS0svw99NVhs0OtHkgBAJ5rmWEbQiRqSs3saOYcTPcTzoAv8KkGCGKzmBnQnCpbkvBwlE2GRZAJXQ2ig9K3hOipi52Jmg7D7aLUvwXdbp81k+/DPAPykTJ1yQYKbld4MPJFYGHZPi4bgowaWWZ4I10gTYmHEKlQsS3GxZgtukFIfeayiPzgUJnrYswVm2G0Q0G06mFC2BCuHq7W1bAmxPW8OYNsBjOtJmUoKvwaQMJOiwPAussiVAXoUZJiVQJWW/gR3gSdXrMME4jIzZJ8kEl+UqgC7EzDu33pQElSxPMB6PWRZANeU8KhcBdJKFDeNNxg4q6Yk5JhcJ2CpemZcA6yxX2YibCVQdoIBlQHGhUQHUWiOk+PLEnCRoTJD0YpM+0wJIybS9xmCnknK6YozNGiFjM8eIAAJ2vsqjYlEaSGQxE2yLMT4PCBmfreBkEwK8JuQDfhTjnpsySNUeGfFaiwVlEd1hQoBXhXy4vpjf0femvF6TYzOAMQGkLAHbY763bEt5vWLEJadb0BIwxeeXQJXZOyLGPT+ewTVrSqDi9EIEmO3718DI07K+50JG16xVlfywgHHpzWMj6CkBH/SWmPe8PCcJHrU4JurUltPyEODoDDdakvJ8gvvuyejaRaES3JVnMMj2UvA7GJvgvu/zdCbYYiMc/IRlCRYlvO8GHfrdoY+42+/4TPBXkqk/q4wgm504dsf5NlDlM0zS4VQTM8Ej0nMD0w5ewWKf3kSxews9i0xK8LKEpND5lpeCMx2QwMRyoFLaxkhJC++yKIBay48IcCY4T1pl0GaLErzuSAu7rGaCzJpHZCnAOD0AtiTYEIgEqyUXhxYSHCSZaahYlal5LME7LpSHTxewSdTioQS7TPQSNNUgYoGAeMFbWdTTm+xPEEMCVbvQ4FqLmEVCIodv62PhRjs6E6iS+7NdbRJ1j6AsmQEtw0r1Fg2uBVdrHtJNoqYKlKDZ9TZxSxxqy2atIHWQfYLLfWkUeTcliC3BTN+OjLmVEkSSQEUqr/f1yJgWQb33vGhS4eKRMY36aw0lECCBrfbwdQ6d6uG1BLbPCeimBHYlkHBYxNyU/QUpgScnhmylBPlLIOoUS71Dd4ASBCpAWW1/LyUIVICyQbxE+IFPXkgg/nx7DMSNQvrveCmBeAEqRJA4I+wD57oqgTMCVHTqlvaO0GcrnyA4ASpeFhdn0AAiKTt1HF8dRHWozaSSIAWoGNyTdM/eDQbjDOq0jvX61JCmFPsdoiTwQoCDNG08R7e0Wa1zA7/SGUFRBnqP3pRSp57dD9rAqWBohjOX1TOQvBagysCP1V3DLgCz9IOdDa4DrarSRjWgBMNcPSuZArglpAgJ+DDclaA/i9mKD8JtCTopQNgS9FOAsCVQdZh1FCBcCfakbZPDgXdbgme4BIQrgWoMWaAA/kqgTiz/oooALdwH8F+C4WCZDjwN6L6GL4HJ3AkkFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIByGD8DzQJyO8fOgE8AAAAAElFTkSuQmCC",cge="/assets/play-de4238c5.png",uge="/assets/reverse-e35421b8.png",fge="/assets/pause-b6381fd4.png",hge="/assets/fast-forward-0d3ffae5.png",dge="/assets/fast-backward-1f713448.png";function s_({loadedAnimationName:n,randomize:e}){const{characterManager:t,toggleDebugMode:r,debugMode:i,lookAtManager:s,animationManager:o}=ye.useContext(Zn),[a,l]=ye.useState(s.userActivated),[A,c]=$.useState((o==null?void 0:o.getCurrentAnimationName())||"");ye.useEffect(()=>{n==null&&(n="T-Pose"),n!=""&&c(n)},[n]);const u=()=>{r()},f=m=>{m?o.play():o.pause(),o.setSpeed(1)},h=m=>{o.play(),o.setSpeed(m)},p=()=>{s.setActive(!a),o.enableMouseLook(!a),l(!a)},d=async()=>{console.log("play next"),await o.loadNextAnimation(),c(o.getCurrentAnimationName())},g=async()=>{console.log("play prev"),await o.loadPreviousAnimation(),c(o.getCurrentAnimationName())};return N.jsxs("div",{className:qn.Container,children:[N.jsx("div",{className:qn.ContainerPositionTop,children:N.jsxs("div",{className:qn.flexButtonsTop,children:[N.jsx("div",{className:`${qn.optionButtonsSmall}`,onClick:()=>{h(-2)},children:N.jsx("img",{src:dge})}),N.jsx("div",{className:`${qn.optionButtonsSmall}`,onClick:()=>{h(-1)},children:N.jsx("img",{src:uge})}),N.jsx("div",{className:`${qn.optionButtonsSmall}`,onClick:()=>{f(!1)},children:N.jsx("img",{src:fge})}),N.jsx("div",{className:`${qn.optionButtonsSmall}`,onClick:()=>{f(!0)},children:N.jsx("img",{src:cge})}),N.jsx("div",{className:`${qn.optionButtonsSmall}`,onClick:()=>{h(2)},children:N.jsx("img",{src:hge})})]})}),N.jsxs("div",{className:qn.ContainerPosition,children:[N.jsx("div",{className:qn.topLine}),N.jsxs("div",{className:qn.flexSelect,children:[N.jsx("div",{className:`${qn["arrow-button"]} ${qn["left-button"]}`,onClick:g}),N.jsx("div",{className:qn.traitInfoTitle,style:{marginBottom:"10px"},children:A}),N.jsx("div",{className:`${qn["arrow-button"]} ${qn["right-button"]}`,onClick:d})]}),N.jsxs("div",{className:qn.flexButtons,children:[e&&N.jsx("div",{className:`${qn.optionButtons}`,onClick:e,children:N.jsx("img",{src:sge})}),N.jsx("div",{className:`${qn.optionButtons}`,onClick:p,children:N.jsx("img",{src:a?Age:lge})}),N.jsx("div",{className:`${qn.optionButtons}`,onClick:u,children:N.jsx("img",{src:i?age:oge})})]})]})]})}const pge="_tokenBoxWrap_q4pvo_1",mge="_mask_q4pvo_7",gge="_timer_q4pvo_31",vge="_level_q4pvo_42",yge="_mythic_q4pvo_55",wge="_epic_q4pvo_60",xge="_rare_q4pvo_65",_ge="_uncommon_q4pvo_70",bge="_common_q4pvo_75",Bge="_none_q4pvo_80",Ege="_value_q4pvo_85",Cge="_frame_q4pvo_95",Mge="_emptyIcon_q4pvo_111",Sge="_badge_q4pvo_123",Tge="_frameActive_q4pvo_131",Wl={tokenBoxWrap:pge,mask:mge,timer:gge,level:vge,mythic:yge,epic:wge,rare:xge,uncommon:_ge,common:bge,none:Bge,value:Ege,frame:Cge,emptyIcon:Mge,badge:Sge,frameActive:Tge,default:"_default_q4pvo_159"},Ige="/assets/magic-box-cd45f027.png",ol=n=>{const{size:e,active:t,onClick:r,level:i,icon:s,rarity:o,style:a}=n,[l,A]=$.useState(!1),c=()=>{A(!0)};return N.jsxs("div",{className:Wl.tokenBoxWrap,style:{width:e,height:e},onClick:r,children:[t&&N.jsx("div",{className:ph(Wl.frame,Wl.frameActive)}),N.jsx("div",{className:ph(Wl.frame,o&&Wl[o])}),N.jsx("img",{src:l?Ige:s,className:Wl.emptyIcon,style:a,onError:c}),i&&N.jsxs("div",{className:ph(Wl.level,o&&Wl[o]),children:["Lv.",i]})]})},Rge="_InformationContainerPos_72ckd_2",Fge="_scrollContainer_72ckd_15",Uge="_traitInfoTitle_72ckd_27",Lge="_traitInfoText_72ckd_35",Pge="_flexSelect_72ckd_62",Dge="_checked_72ckd_119",Oge="_checkmark_72ckd_123",Nge="_checkboxHolder_72ckd_136",No={InformationContainerPos:Rge,scrollContainer:Fge,traitInfoTitle:Uge,traitInfoText:Lge,"input-box":"_input-box_72ckd_43",flexSelect:Pge,"arrow-button":"_arrow-button_72ckd_70","left-button":"_left-button_72ckd_86","right-button":"_right-button_72ckd_93","anim-button":"_anim-button_72ckd_100","custom-checkbox":"_custom-checkbox_72ckd_105","checkbox-container":"_checkbox-container_72ckd_110",checked:Dge,checkmark:Oge,checkboxHolder:Nge};function IT({jsonSelectionArray:n,byManifest:e=!1}){const{isLoading:t,setIsLoading:r}=$.useContext(Di),{characterManager:i}=ye.useContext(Zn),[s,o]=ye.useState(0),[a,l]=$.useState({}),[A,c]=$.useState([]),u=d=>{i.setManifest(d),i.loadInitialTraits().then(()=>{r(!1)})};ye.useEffect(()=>{t==!1&&(l(i.getAvatarSelection()),c(Object.keys(i.getAvatarSelection())))},[t]);const f=d=>{i.loadTraitsFromNFTObject(d).then(()=>{r(!1)})},h=async()=>{if(!t)if(r(!0),s>=n.length-1)e?u(n[0]):f(n[0]),o(0);else{const d=s+1;e?u(n[d]):f(n[d]),o(d)}},p=async()=>{if(!t)if(r(!0),s<=0)e?u(n[n.length-1]):f(n[n.length-1]),o(n.length-1);else{const d=s-1;e?u(n[d]):f(n[d]),o(d)}};return(n==null?void 0:n.length)>0?N.jsxs("div",{className:No.InformationContainerPos,children:[N.jsx(ya,{title:"Trait Selection",width:180,right:20}),N.jsxs("div",{className:No.scrollContainer,children:[N.jsxs("div",{className:No.flexSelect,children:[(n==null?void 0:n.length)>1?N.jsx("div",{className:`${No["arrow-button"]} ${No["left-button"]}`,onClick:p}):N.jsx(N.Fragment,{}),(n[s].name||n[s].manifestName)&&N.jsx("div",{style:{textAlign:"center",flex:1},children:N.jsx("div",{className:No.traitInfoTitle,children:e?n[s].manifestName:n[s].name})}),(n==null?void 0:n.length)>1?N.jsx("div",{className:`${No["arrow-button"]} ${No["right-button"]}`,onClick:h}):N.jsx(N.Fragment,{})]}),(n[s].thumb||n[s].thumbnail)&&N.jsx("img",{src:n[s].thumb||n[s].thumbnail,alt:"Selection Thumbnail",style:{width:"280px",height:"460px",display:"block",margin:"20px auto 20px"}}),n[s].attributes&&n[s].attributes.map(d=>N.jsx("div",{children:N.jsx("div",{className:No.traitInfoText,children:`${d.trait_type} : ${d.value}`})},`json:${d.trait_type}_${d.value}`)),e&&A.map(d=>N.jsx("div",{children:N.jsx("div",{className:No.traitInfoText,children:`${d} : ${a[d].id}`})},`val:${d}`))]})]}):N.jsx(N.Fragment,{})}const iM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",kge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0wMlQxMTo0OTozNy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBiNWViMTliLTkxMmEtMmI0NS1iOTZlLTliNDUxOGUzZDU4NyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg4ODliZDlkLTAxZjItMTQ0Ni04NDE4LWYyYzNjNjQ1ODNlOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODg4OWJkOWQtMDFmMi0xNDQ2LTg0MTgtZjJjM2M2NDU4M2U4IiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAyVDExOjQ5OjM3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wMlQxMTo1MjoyMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0y+4AAAASPSURBVHja7ZxrSBVBFMctyqIgC0ujJ5UFaQpZRC/7YoUVQYUUkZQYQoVfJBF62PtBlhlJoJWSUQRSEYUFUVRiSEWRiokVgZqRWUEv7W3/oQkul53Ze+/OXWfyfPh98e6cPfNjnZ2ZPbshnZ2dIUTwIAkkmAQTJJgEk2CCBJNgEkyQYBKsgFnzlsaCanARZICFIJwEqxN8CXR68R08479lgxVgDAkOTPATC8EiXoLbYB9YDeJJsFzucPDLD8FWvABlIBcsAeNBKAn+K3i+Q7ki3oNycAys4eP8gO4oeH2QBFvxFVSAYj6uR3cHwWdcFGzFG1AF8sBakOBkeNFR8AMbAY/BedDqovQPoA6UgghjBbMxkXfGqpMfwUyv4w90wRV+1GTBCyQdmy5oc8hlwQdMFrxF0KlzkjbDwA8XBSebLPikv1cNfusBml0UHGWy4BpBp0olbYaAjgBlselZHBgNloNGm+PbQF8jBfsgKlrQbnuActMtYoWCBkmb68ZO09hNzEbIUzDCq82GAOXekuSRJGl3xGTBmT6IYXsU10Ahn5cGOo5ukeQxCLQL2q0zWXCBizeq7TZD1XdBu1iTBVe4KPieJI9kQZtPYKCRgpF4P/DW5QVDnkUeUVyk1fH3jd2L4Pu1KqSxMfohH6cbfbmS+eqRTdX22ixYck0WnKZAbguY5BV3o8IrPsVkwWUKBMQIYmcpEjzdZMF3eCfaA4C1OxGkld4/WgPdE9ZBLttLGMwJD4AI0F8SvycfPpwIvkuFJ2LBQyXzWl8pck0wmwuCcWCUZrCcwizy3aZg/E13RTBONMXjpL81g+W0wyvf/YpucHPdEpzbxQ8k7djlkesmRTHbnZRt+Ss4T3PBOz1y3aooZq1rj+1xsoMGCd6sKOYFEhxcwRm6Cf4JvmksuIUXlrz2MeZknQTv5k95e4HZvCM6CU73c5O/w2ldskrBqTbL4K4WnCbIL0MS75GrtWkSwZWSNgkaCK63Wao3CeKd0kVwgaRNmGQT2y3BZ236VS6Il6OL4OOSNpEK9gKcCq6y6VetIF6iLoKbRdt5vNhZhzE4UZDfYkm8kboIZpy2OH4C+KyJYFZsPdUrvzmSWM9dL8D2YZpWw4tBlrEyTz4n1mmaxvK5DvLBTY9NIitKdBT8P63k1pPg4ApOMllwBX+9agZYKamqdCI4x0Ec9vg+0lTBhYLYVxQLznYQp65L3jJSILhN9G4a/j5RseAefBW5gy00/PwvuWSq4GKb+PWqBAviR/Ay2UxeTV8pqObJMlVwiU38hmAKlizl4/iCqIjXIS8yeYgIE8SOUTlEGPkyuKKb3FlB7FskWN00jX1sIxVM4/uxTaqnad1dcNAXGiSYBGsjuJoXvJTy95VJsEJWeZ2/N7hBghWXQXnl0Ae8IsHOGSfJ4zAJdv59HVlR9SYS7JxESR4XSbBzLgtyiKebnDqugrEe248pkveISbAD3oEvtNCglRwJ1l1wvuaC95gueJ/mgnNMFxzFH6m84V841YVW/nZ9DH0/mD4xTpBgEkyQYBJMggkSTIJJMEGCteYPxO/zzCRZDV4AAAAASUVORK5CYII=",Qge="/assets/color-palette-71a7a2d4.png";var Rs={},Cg={},Hge=typeof ea=="object"&&ea&&ea.Object===Object&&ea,T8=Hge,zge=T8,Gge=typeof self=="object"&&self&&self.Object===Object&&self,Vge=zge||Gge||Function("return this")(),Ea=Vge,jge=Ea,Wge=jge.Symbol,Mg=Wge,Y3=Mg,I8=Object.prototype,Kge=I8.hasOwnProperty,Yge=I8.toString,cp=Y3?Y3.toStringTag:void 0;function $ge(n){var e=Kge.call(n,cp),t=n[cp];try{n[cp]=void 0;var r=!0}catch{}var i=Yge.call(n);return r&&(e?n[cp]=t:delete n[cp]),i}var Xge=$ge,Zge=Object.prototype,Jge=Zge.toString;function qge(n){return Jge.call(n)}var e0e=qge,$3=Mg,t0e=Xge,n0e=e0e,r0e="[object Null]",i0e="[object Undefined]",X3=$3?$3.toStringTag:void 0;function s0e(n){return n==null?n===void 0?i0e:r0e:X3&&X3 in Object(n)?t0e(n):n0e(n)}var Au=s0e,o0e=Array.isArray,To=o0e;function a0e(n){return n!=null&&typeof n=="object"}var Tl=a0e,l0e=Au,A0e=To,c0e=Tl,u0e="[object String]";function f0e(n){return typeof n=="string"||!A0e(n)&&c0e(n)&&l0e(n)==u0e}var h0e=f0e;function d0e(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var p0e=d0e,m0e=p0e,g0e=m0e(),v0e=g0e;function y0e(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var w0e=y0e,x0e=Au,_0e=Tl,b0e="[object Arguments]";function B0e(n){return _0e(n)&&x0e(n)==b0e}var E0e=B0e,Z3=E0e,C0e=Tl,R8=Object.prototype,M0e=R8.hasOwnProperty,S0e=R8.propertyIsEnumerable,T0e=Z3(function(){return arguments}())?Z3:function(n){return C0e(n)&&M0e.call(n,"callee")&&!S0e.call(n,"callee")},F8=T0e,jw={exports:{}};function I0e(){return!1}var R0e=I0e;jw.exports;(function(n,e){var t=Ea,r=R0e,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,A=l||r;n.exports=A})(jw,jw.exports);var RT=jw.exports,F0e=9007199254740991,U0e=/^(?:0|[1-9]\d*)$/;function L0e(n,e){var t=typeof n;return e=e??F0e,!!e&&(t=="number"||t!="symbol"&&U0e.test(n))&&n>-1&&n%1==0&&n<e}var U8=L0e,P0e=9007199254740991;function D0e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=P0e}var FT=D0e,O0e=Au,N0e=FT,k0e=Tl,Q0e="[object Arguments]",H0e="[object Array]",z0e="[object Boolean]",G0e="[object Date]",V0e="[object Error]",j0e="[object Function]",W0e="[object Map]",K0e="[object Number]",Y0e="[object Object]",$0e="[object RegExp]",X0e="[object Set]",Z0e="[object String]",J0e="[object WeakMap]",q0e="[object ArrayBuffer]",eve="[object DataView]",tve="[object Float32Array]",nve="[object Float64Array]",rve="[object Int8Array]",ive="[object Int16Array]",sve="[object Int32Array]",ove="[object Uint8Array]",ave="[object Uint8ClampedArray]",lve="[object Uint16Array]",Ave="[object Uint32Array]",hn={};hn[tve]=hn[nve]=hn[rve]=hn[ive]=hn[sve]=hn[ove]=hn[ave]=hn[lve]=hn[Ave]=!0;hn[Q0e]=hn[H0e]=hn[q0e]=hn[z0e]=hn[eve]=hn[G0e]=hn[V0e]=hn[j0e]=hn[W0e]=hn[K0e]=hn[Y0e]=hn[$0e]=hn[X0e]=hn[Z0e]=hn[J0e]=!1;function cve(n){return k0e(n)&&N0e(n.length)&&!!hn[O0e(n)]}var uve=cve;function fve(n){return function(e){return n(e)}}var UT=fve,Ww={exports:{}};Ww.exports;(function(n,e){var t=T8,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(Ww,Ww.exports);var LT=Ww.exports,hve=uve,dve=UT,J3=LT,q3=J3&&J3.isTypedArray,pve=q3?dve(q3):hve,L8=pve,mve=w0e,gve=F8,vve=To,yve=RT,wve=U8,xve=L8,_ve=Object.prototype,bve=_ve.hasOwnProperty;function Bve(n,e){var t=vve(n),r=!t&&gve(n),i=!t&&!r&&yve(n),s=!t&&!r&&!i&&xve(n),o=t||r||i||s,a=o?mve(n.length,String):[],l=a.length;for(var A in n)(e||bve.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||wve(A,l)))&&a.push(A);return a}var P8=Bve,Eve=Object.prototype;function Cve(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Eve;return n===t}var PT=Cve;function Mve(n,e){return function(t){return n(e(t))}}var D8=Mve,Sve=D8,Tve=Sve(Object.keys,Object),Ive=Tve,Rve=PT,Fve=Ive,Uve=Object.prototype,Lve=Uve.hasOwnProperty;function Pve(n){if(!Rve(n))return Fve(n);var e=[];for(var t in Object(n))Lve.call(n,t)&&t!="constructor"&&e.push(t);return e}var Dve=Pve;function Ove(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Ad=Ove,Nve=Au,kve=Ad,Qve="[object AsyncFunction]",Hve="[object Function]",zve="[object GeneratorFunction]",Gve="[object Proxy]";function Vve(n){if(!kve(n))return!1;var e=Nve(n);return e==Hve||e==zve||e==Qve||e==Gve}var O8=Vve,jve=O8,Wve=FT;function Kve(n){return n!=null&&Wve(n.length)&&!jve(n)}var o_=Kve,Yve=P8,$ve=Dve,Xve=o_;function Zve(n){return Xve(n)?Yve(n):$ve(n)}var Sg=Zve,Jve=v0e,qve=Sg;function eye(n,e){return n&&Jve(n,e,qve)}var N8=eye;function tye(n){return n}var k8=tye,nye=k8;function rye(n){return typeof n=="function"?n:nye}var iye=rye,sye=N8,oye=iye;function aye(n,e){return n&&sye(n,oye(e))}var DT=aye,lye=D8,Aye=lye(Object.getPrototypeOf,Object),OT=Aye,cye=Au,uye=OT,fye=Tl,hye="[object Object]",dye=Function.prototype,pye=Object.prototype,Q8=dye.toString,mye=pye.hasOwnProperty,gye=Q8.call(Object);function vye(n){if(!fye(n)||cye(n)!=hye)return!1;var e=uye(n);if(e===null)return!0;var t=mye.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Q8.call(t)==gye}var yye=vye;function wye(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var H8=wye;function xye(){this.__data__=[],this.size=0}var _ye=xye;function bye(n,e){return n===e||n!==n&&e!==e}var NT=bye,Bye=NT;function Eye(n,e){for(var t=n.length;t--;)if(Bye(n[t][0],e))return t;return-1}var a_=Eye,Cye=a_,Mye=Array.prototype,Sye=Mye.splice;function Tye(n){var e=this.__data__,t=Cye(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Sye.call(e,t,1),--this.size,!0}var Iye=Tye,Rye=a_;function Fye(n){var e=this.__data__,t=Rye(e,n);return t<0?void 0:e[t][1]}var Uye=Fye,Lye=a_;function Pye(n){return Lye(this.__data__,n)>-1}var Dye=Pye,Oye=a_;function Nye(n,e){var t=this.__data__,r=Oye(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var kye=Nye,Qye=_ye,Hye=Iye,zye=Uye,Gye=Dye,Vye=kye;function cd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}cd.prototype.clear=Qye;cd.prototype.delete=Hye;cd.prototype.get=zye;cd.prototype.has=Gye;cd.prototype.set=Vye;var l_=cd,jye=l_;function Wye(){this.__data__=new jye,this.size=0}var Kye=Wye;function Yye(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var $ye=Yye;function Xye(n){return this.__data__.get(n)}var Zye=Xye;function Jye(n){return this.__data__.has(n)}var qye=Jye,ewe=Ea,twe=ewe["__core-js_shared__"],nwe=twe,gB=nwe,eD=function(){var n=/[^.]+$/.exec(gB&&gB.keys&&gB.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function rwe(n){return!!eD&&eD in n}var iwe=rwe,swe=Function.prototype,owe=swe.toString;function awe(n){if(n!=null){try{return owe.call(n)}catch{}try{return n+""}catch{}}return""}var z8=awe,lwe=O8,Awe=iwe,cwe=Ad,uwe=z8,fwe=/[\\^$.*+?()[\]{}|]/g,hwe=/^\[object .+?Constructor\]$/,dwe=Function.prototype,pwe=Object.prototype,mwe=dwe.toString,gwe=pwe.hasOwnProperty,vwe=RegExp("^"+mwe.call(gwe).replace(fwe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ywe(n){if(!cwe(n)||Awe(n))return!1;var e=lwe(n)?vwe:hwe;return e.test(uwe(n))}var wwe=ywe;function xwe(n,e){return n==null?void 0:n[e]}var _we=xwe,bwe=wwe,Bwe=_we;function Ewe(n,e){var t=Bwe(n,e);return bwe(t)?t:void 0}var cu=Ewe,Cwe=cu,Mwe=Ea,Swe=Cwe(Mwe,"Map"),kT=Swe,Twe=cu,Iwe=Twe(Object,"create"),A_=Iwe,tD=A_;function Rwe(){this.__data__=tD?tD(null):{},this.size=0}var Fwe=Rwe;function Uwe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Lwe=Uwe,Pwe=A_,Dwe="__lodash_hash_undefined__",Owe=Object.prototype,Nwe=Owe.hasOwnProperty;function kwe(n){var e=this.__data__;if(Pwe){var t=e[n];return t===Dwe?void 0:t}return Nwe.call(e,n)?e[n]:void 0}var Qwe=kwe,Hwe=A_,zwe=Object.prototype,Gwe=zwe.hasOwnProperty;function Vwe(n){var e=this.__data__;return Hwe?e[n]!==void 0:Gwe.call(e,n)}var jwe=Vwe,Wwe=A_,Kwe="__lodash_hash_undefined__";function Ywe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Wwe&&e===void 0?Kwe:e,this}var $we=Ywe,Xwe=Fwe,Zwe=Lwe,Jwe=Qwe,qwe=jwe,exe=$we;function ud(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ud.prototype.clear=Xwe;ud.prototype.delete=Zwe;ud.prototype.get=Jwe;ud.prototype.has=qwe;ud.prototype.set=exe;var txe=ud,nD=txe,nxe=l_,rxe=kT;function ixe(){this.size=0,this.__data__={hash:new nD,map:new(rxe||nxe),string:new nD}}var sxe=ixe;function oxe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var axe=oxe,lxe=axe;function Axe(n,e){var t=n.__data__;return lxe(e)?t[typeof e=="string"?"string":"hash"]:t.map}var c_=Axe,cxe=c_;function uxe(n){var e=cxe(this,n).delete(n);return this.size-=e?1:0,e}var fxe=uxe,hxe=c_;function dxe(n){return hxe(this,n).get(n)}var pxe=dxe,mxe=c_;function gxe(n){return mxe(this,n).has(n)}var vxe=gxe,yxe=c_;function wxe(n,e){var t=yxe(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var xxe=wxe,_xe=sxe,bxe=fxe,Bxe=pxe,Exe=vxe,Cxe=xxe;function fd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}fd.prototype.clear=_xe;fd.prototype.delete=bxe;fd.prototype.get=Bxe;fd.prototype.has=Exe;fd.prototype.set=Cxe;var QT=fd,Mxe=l_,Sxe=kT,Txe=QT,Ixe=200;function Rxe(n,e){var t=this.__data__;if(t instanceof Mxe){var r=t.__data__;if(!Sxe||r.length<Ixe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Txe(r)}return t.set(n,e),this.size=t.size,this}var Fxe=Rxe,Uxe=l_,Lxe=Kye,Pxe=$ye,Dxe=Zye,Oxe=qye,Nxe=Fxe;function hd(n){var e=this.__data__=new Uxe(n);this.size=e.size}hd.prototype.clear=Lxe;hd.prototype.delete=Pxe;hd.prototype.get=Dxe;hd.prototype.has=Oxe;hd.prototype.set=Nxe;var HT=hd,kxe="__lodash_hash_undefined__";function Qxe(n){return this.__data__.set(n,kxe),this}var Hxe=Qxe;function zxe(n){return this.__data__.has(n)}var Gxe=zxe,Vxe=QT,jxe=Hxe,Wxe=Gxe;function Kw(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Vxe;++e<t;)this.add(n[e])}Kw.prototype.add=Kw.prototype.push=jxe;Kw.prototype.has=Wxe;var Kxe=Kw;function Yxe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var $xe=Yxe;function Xxe(n,e){return n.has(e)}var Zxe=Xxe,Jxe=Kxe,qxe=$xe,e_e=Zxe,t_e=1,n_e=2;function r_e(n,e,t,r,i,s){var o=t&t_e,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,f=!0,h=t&n_e?new Jxe:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var p=n[u],d=e[u];if(r)var g=o?r(d,p,u,e,n,s):r(p,d,u,n,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!qxe(e,function(m,y){if(!e_e(h,y)&&(p===m||i(p,m,t,r,s)))return h.push(y)})){f=!1;break}}else if(!(p===d||i(p,d,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}var G8=r_e,i_e=Ea,s_e=i_e.Uint8Array,V8=s_e;function o_e(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var a_e=o_e;function l_e(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var A_e=l_e,rD=Mg,iD=V8,c_e=NT,u_e=G8,f_e=a_e,h_e=A_e,d_e=1,p_e=2,m_e="[object Boolean]",g_e="[object Date]",v_e="[object Error]",y_e="[object Map]",w_e="[object Number]",x_e="[object RegExp]",__e="[object Set]",b_e="[object String]",B_e="[object Symbol]",E_e="[object ArrayBuffer]",C_e="[object DataView]",sD=rD?rD.prototype:void 0,vB=sD?sD.valueOf:void 0;function M_e(n,e,t,r,i,s,o){switch(t){case C_e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case E_e:return!(n.byteLength!=e.byteLength||!s(new iD(n),new iD(e)));case m_e:case g_e:case w_e:return c_e(+n,+e);case v_e:return n.name==e.name&&n.message==e.message;case x_e:case b_e:return n==e+"";case y_e:var a=f_e;case __e:var l=r&d_e;if(a||(a=h_e),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=p_e,o.set(n,e);var c=u_e(a(n),a(e),r,i,s,o);return o.delete(n),c;case B_e:if(vB)return vB.call(n)==vB.call(e)}return!1}var S_e=M_e;function T_e(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var j8=T_e,I_e=j8,R_e=To;function F_e(n,e,t){var r=e(n);return R_e(n)?r:I_e(r,t(n))}var W8=F_e;function U_e(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var L_e=U_e;function P_e(){return[]}var K8=P_e,D_e=L_e,O_e=K8,N_e=Object.prototype,k_e=N_e.propertyIsEnumerable,oD=Object.getOwnPropertySymbols,Q_e=oD?function(n){return n==null?[]:(n=Object(n),D_e(oD(n),function(e){return k_e.call(n,e)}))}:O_e,zT=Q_e,H_e=W8,z_e=zT,G_e=Sg;function V_e(n){return H_e(n,G_e,z_e)}var Y8=V_e,aD=Y8,j_e=1,W_e=Object.prototype,K_e=W_e.hasOwnProperty;function Y_e(n,e,t,r,i,s){var o=t&j_e,a=aD(n),l=a.length,A=aD(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var f=a[u];if(!(o?f in e:K_e.call(e,f)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var d=!0;s.set(n,e),s.set(e,n);for(var g=o;++u<l;){f=a[u];var m=n[f],y=e[f];if(r)var w=o?r(y,m,f,e,n,s):r(m,y,f,n,e,s);if(!(w===void 0?m===y||i(m,y,t,r,s):w)){d=!1;break}g||(g=f=="constructor")}if(d&&!g){var x=n.constructor,_=e.constructor;x!=_&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof _=="function"&&_ instanceof _)&&(d=!1)}return s.delete(n),s.delete(e),d}var $_e=Y_e,X_e=cu,Z_e=Ea,J_e=X_e(Z_e,"DataView"),q_e=J_e,e1e=cu,t1e=Ea,n1e=e1e(t1e,"Promise"),r1e=n1e,i1e=cu,s1e=Ea,o1e=i1e(s1e,"Set"),a1e=o1e,l1e=cu,A1e=Ea,c1e=l1e(A1e,"WeakMap"),u1e=c1e,sM=q_e,oM=kT,aM=r1e,lM=a1e,AM=u1e,$8=Au,dd=z8,lD="[object Map]",f1e="[object Object]",AD="[object Promise]",cD="[object Set]",uD="[object WeakMap]",fD="[object DataView]",h1e=dd(sM),d1e=dd(oM),p1e=dd(aM),m1e=dd(lM),g1e=dd(AM),mc=$8;(sM&&mc(new sM(new ArrayBuffer(1)))!=fD||oM&&mc(new oM)!=lD||aM&&mc(aM.resolve())!=AD||lM&&mc(new lM)!=cD||AM&&mc(new AM)!=uD)&&(mc=function(n){var e=$8(n),t=e==f1e?n.constructor:void 0,r=t?dd(t):"";if(r)switch(r){case h1e:return fD;case d1e:return lD;case p1e:return AD;case m1e:return cD;case g1e:return uD}return e});var u_=mc,yB=HT,v1e=G8,y1e=S_e,w1e=$_e,hD=u_,dD=To,pD=RT,x1e=L8,_1e=1,mD="[object Arguments]",gD="[object Array]",Cv="[object Object]",b1e=Object.prototype,vD=b1e.hasOwnProperty;function B1e(n,e,t,r,i,s){var o=dD(n),a=dD(e),l=o?gD:hD(n),A=a?gD:hD(e);l=l==mD?Cv:l,A=A==mD?Cv:A;var c=l==Cv,u=A==Cv,f=l==A;if(f&&pD(n)){if(!pD(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new yB),o||x1e(n)?v1e(n,e,t,r,i,s):y1e(n,e,l,t,r,i,s);if(!(t&_1e)){var h=c&&vD.call(n,"__wrapped__"),p=u&&vD.call(e,"__wrapped__");if(h||p){var d=h?n.value():n,g=p?e.value():e;return s||(s=new yB),i(d,g,t,r,s)}}return f?(s||(s=new yB),w1e(n,e,t,r,i,s)):!1}var E1e=B1e,C1e=E1e,yD=Tl;function X8(n,e,t,r,i){return n===e?!0:n==null||e==null||!yD(n)&&!yD(e)?n!==n&&e!==e:C1e(n,e,t,r,X8,i)}var Z8=X8,M1e=HT,S1e=Z8,T1e=1,I1e=2;function R1e(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new M1e;if(r)var f=r(A,c,l,n,e,u);if(!(f===void 0?S1e(c,A,T1e|I1e,r,u):f))return!1}}return!0}var F1e=R1e,U1e=Ad;function L1e(n){return n===n&&!U1e(n)}var J8=L1e,P1e=J8,D1e=Sg;function O1e(n){for(var e=D1e(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,P1e(i)]}return e}var N1e=O1e;function k1e(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var q8=k1e,Q1e=F1e,H1e=N1e,z1e=q8;function G1e(n){var e=H1e(n);return e.length==1&&e[0][2]?z1e(e[0][0],e[0][1]):function(t){return t===n||Q1e(t,n,e)}}var V1e=G1e,j1e=Au,W1e=Tl,K1e="[object Symbol]";function Y1e(n){return typeof n=="symbol"||W1e(n)&&j1e(n)==K1e}var GT=Y1e,$1e=To,X1e=GT,Z1e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J1e=/^\w*$/;function q1e(n,e){if($1e(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||X1e(n)?!0:J1e.test(n)||!Z1e.test(n)||e!=null&&n in Object(e)}var VT=q1e,ez=QT,ebe="Expected a function";function jT(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(ebe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(jT.Cache||ez),t}jT.Cache=ez;var tbe=jT,nbe=tbe,rbe=500;function ibe(n){var e=nbe(n,function(r){return t.size===rbe&&t.clear(),r}),t=e.cache;return e}var sbe=ibe,obe=sbe,abe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lbe=/\\(\\)?/g,Abe=obe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(abe,function(t,r,i,s){e.push(i?s.replace(lbe,"$1"):r||t)}),e}),cbe=Abe,wD=Mg,ube=H8,fbe=To,hbe=GT,dbe=1/0,xD=wD?wD.prototype:void 0,_D=xD?xD.toString:void 0;function tz(n){if(typeof n=="string")return n;if(fbe(n))return ube(n,tz)+"";if(hbe(n))return _D?_D.call(n):"";var e=n+"";return e=="0"&&1/n==-dbe?"-0":e}var pbe=tz,mbe=pbe;function gbe(n){return n==null?"":mbe(n)}var vbe=gbe,ybe=To,wbe=VT,xbe=cbe,_be=vbe;function bbe(n,e){return ybe(n)?n:wbe(n,e)?[n]:xbe(_be(n))}var nz=bbe,Bbe=GT,Ebe=1/0;function Cbe(n){if(typeof n=="string"||Bbe(n))return n;var e=n+"";return e=="0"&&1/n==-Ebe?"-0":e}var f_=Cbe,Mbe=nz,Sbe=f_;function Tbe(n,e){e=Mbe(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Sbe(e[t++])];return t&&t==r?n:void 0}var rz=Tbe,Ibe=rz;function Rbe(n,e,t){var r=n==null?void 0:Ibe(n,e);return r===void 0?t:r}var Fbe=Rbe;function Ube(n,e){return n!=null&&e in Object(n)}var Lbe=Ube,Pbe=nz,Dbe=F8,Obe=To,Nbe=U8,kbe=FT,Qbe=f_;function Hbe(n,e,t){e=Pbe(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Qbe(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&kbe(i)&&Nbe(o,i)&&(Obe(n)||Dbe(n)))}var zbe=Hbe,Gbe=Lbe,Vbe=zbe;function jbe(n,e){return n!=null&&Vbe(n,e,Gbe)}var Wbe=jbe,Kbe=Z8,Ybe=Fbe,$be=Wbe,Xbe=VT,Zbe=J8,Jbe=q8,qbe=f_,eBe=1,tBe=2;function nBe(n,e){return Xbe(n)&&Zbe(e)?Jbe(qbe(n),e):function(t){var r=Ybe(t,n);return r===void 0&&r===e?$be(t,n):Kbe(e,r,eBe|tBe)}}var rBe=nBe;function iBe(n){return function(e){return e==null?void 0:e[n]}}var sBe=iBe,oBe=rz;function aBe(n){return function(e){return oBe(e,n)}}var lBe=aBe,ABe=sBe,cBe=lBe,uBe=VT,fBe=f_;function hBe(n){return uBe(n)?ABe(fBe(n)):cBe(n)}var dBe=hBe,pBe=V1e,mBe=rBe,gBe=k8,vBe=To,yBe=dBe;function wBe(n){return typeof n=="function"?n:n==null?gBe:typeof n=="object"?vBe(n)?mBe(n[0],n[1]):pBe(n):yBe(n)}var xBe=wBe,_Be=o_;function bBe(n,e){return function(t,r){if(t==null)return t;if(!_Be(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var BBe=bBe,EBe=N8,CBe=BBe,MBe=CBe(EBe),SBe=MBe,TBe=SBe,IBe=o_;function RBe(n,e){var t=-1,r=IBe(n)?Array(n.length):[];return TBe(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var FBe=RBe,UBe=H8,LBe=xBe,PBe=FBe,DBe=To;function OBe(n,e){var t=DBe(n)?UBe:PBe;return t(n,LBe(e))}var NBe=OBe;Object.defineProperty(Cg,"__esModule",{value:!0});Cg.flattenNames=void 0;var kBe=h0e,QBe=h_(kBe),HBe=DT,zBe=h_(HBe),GBe=yye,VBe=h_(GBe),jBe=NBe,WBe=h_(jBe);function h_(n){return n&&n.__esModule?n:{default:n}}var KBe=Cg.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,WBe.default)(e,function(r){Array.isArray(r)?n(r).map(function(i){return t.push(i)}):(0,VBe.default)(r)?(0,zBe.default)(r,function(i,s){i===!0&&t.push(s),t.push(s+"-"+i)}):(0,QBe.default)(r)&&t.push(r)}),t};Cg.default=KBe;var Tg={};function YBe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var $Be=YBe,XBe=cu,ZBe=function(){try{var n=XBe(Object,"defineProperty");return n({},"",{}),n}catch{}}(),JBe=ZBe,bD=JBe;function qBe(n,e,t){e=="__proto__"&&bD?bD(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var iz=qBe,eEe=iz,tEe=NT,nEe=Object.prototype,rEe=nEe.hasOwnProperty;function iEe(n,e,t){var r=n[e];(!(rEe.call(n,e)&&tEe(r,t))||t===void 0&&!(e in n))&&eEe(n,e,t)}var sz=iEe,sEe=sz,oEe=iz;function aEe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?oEe(t,a,l):sEe(t,a,l)}return t}var d_=aEe,lEe=d_,AEe=Sg;function cEe(n,e){return n&&lEe(e,AEe(e),n)}var uEe=cEe;function fEe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var hEe=fEe,dEe=Ad,pEe=PT,mEe=hEe,gEe=Object.prototype,vEe=gEe.hasOwnProperty;function yEe(n){if(!dEe(n))return mEe(n);var e=pEe(n),t=[];for(var r in n)r=="constructor"&&(e||!vEe.call(n,r))||t.push(r);return t}var wEe=yEe,xEe=P8,_Ee=wEe,bEe=o_;function BEe(n){return bEe(n)?xEe(n,!0):_Ee(n)}var WT=BEe,EEe=d_,CEe=WT;function MEe(n,e){return n&&EEe(e,CEe(e),n)}var SEe=MEe,Yw={exports:{}};Yw.exports;(function(n,e){var t=Ea,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(A,c){if(c)return A.slice();var u=A.length,f=a?a(u):new A.constructor(u);return A.copy(f),f}n.exports=l})(Yw,Yw.exports);var TEe=Yw.exports;function IEe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var REe=IEe,FEe=d_,UEe=zT;function LEe(n,e){return FEe(n,UEe(n),e)}var PEe=LEe,DEe=j8,OEe=OT,NEe=zT,kEe=K8,QEe=Object.getOwnPropertySymbols,HEe=QEe?function(n){for(var e=[];n;)DEe(e,NEe(n)),n=OEe(n);return e}:kEe,oz=HEe,zEe=d_,GEe=oz;function VEe(n,e){return zEe(n,GEe(n),e)}var jEe=VEe,WEe=W8,KEe=oz,YEe=WT;function $Ee(n){return WEe(n,YEe,KEe)}var XEe=$Ee,ZEe=Object.prototype,JEe=ZEe.hasOwnProperty;function qEe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&JEe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var eCe=qEe,BD=V8;function tCe(n){var e=new n.constructor(n.byteLength);return new BD(e).set(new BD(n)),e}var KT=tCe,nCe=KT;function rCe(n,e){var t=e?nCe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var iCe=rCe,sCe=/\w*$/;function oCe(n){var e=new n.constructor(n.source,sCe.exec(n));return e.lastIndex=n.lastIndex,e}var aCe=oCe,ED=Mg,CD=ED?ED.prototype:void 0,MD=CD?CD.valueOf:void 0;function lCe(n){return MD?Object(MD.call(n)):{}}var ACe=lCe,cCe=KT;function uCe(n,e){var t=e?cCe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var fCe=uCe,hCe=KT,dCe=iCe,pCe=aCe,mCe=ACe,gCe=fCe,vCe="[object Boolean]",yCe="[object Date]",wCe="[object Map]",xCe="[object Number]",_Ce="[object RegExp]",bCe="[object Set]",BCe="[object String]",ECe="[object Symbol]",CCe="[object ArrayBuffer]",MCe="[object DataView]",SCe="[object Float32Array]",TCe="[object Float64Array]",ICe="[object Int8Array]",RCe="[object Int16Array]",FCe="[object Int32Array]",UCe="[object Uint8Array]",LCe="[object Uint8ClampedArray]",PCe="[object Uint16Array]",DCe="[object Uint32Array]";function OCe(n,e,t){var r=n.constructor;switch(e){case CCe:return hCe(n);case vCe:case yCe:return new r(+n);case MCe:return dCe(n,t);case SCe:case TCe:case ICe:case RCe:case FCe:case UCe:case LCe:case PCe:case DCe:return gCe(n,t);case wCe:return new r;case xCe:case BCe:return new r(n);case _Ce:return pCe(n);case bCe:return new r;case ECe:return mCe(n)}}var NCe=OCe,kCe=Ad,SD=Object.create,QCe=function(){function n(){}return function(e){if(!kCe(e))return{};if(SD)return SD(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),HCe=QCe,zCe=HCe,GCe=OT,VCe=PT;function jCe(n){return typeof n.constructor=="function"&&!VCe(n)?zCe(GCe(n)):{}}var WCe=jCe,KCe=u_,YCe=Tl,$Ce="[object Map]";function XCe(n){return YCe(n)&&KCe(n)==$Ce}var ZCe=XCe,JCe=ZCe,qCe=UT,TD=LT,ID=TD&&TD.isMap,eMe=ID?qCe(ID):JCe,tMe=eMe,nMe=u_,rMe=Tl,iMe="[object Set]";function sMe(n){return rMe(n)&&nMe(n)==iMe}var oMe=sMe,aMe=oMe,lMe=UT,RD=LT,FD=RD&&RD.isSet,AMe=FD?lMe(FD):aMe,cMe=AMe,uMe=HT,fMe=$Be,hMe=sz,dMe=uEe,pMe=SEe,mMe=TEe,gMe=REe,vMe=PEe,yMe=jEe,wMe=Y8,xMe=XEe,_Me=u_,bMe=eCe,BMe=NCe,EMe=WCe,CMe=To,MMe=RT,SMe=tMe,TMe=Ad,IMe=cMe,RMe=Sg,FMe=WT,UMe=1,LMe=2,PMe=4,az="[object Arguments]",DMe="[object Array]",OMe="[object Boolean]",NMe="[object Date]",kMe="[object Error]",lz="[object Function]",QMe="[object GeneratorFunction]",HMe="[object Map]",zMe="[object Number]",Az="[object Object]",GMe="[object RegExp]",VMe="[object Set]",jMe="[object String]",WMe="[object Symbol]",KMe="[object WeakMap]",YMe="[object ArrayBuffer]",$Me="[object DataView]",XMe="[object Float32Array]",ZMe="[object Float64Array]",JMe="[object Int8Array]",qMe="[object Int16Array]",eSe="[object Int32Array]",tSe="[object Uint8Array]",nSe="[object Uint8ClampedArray]",rSe="[object Uint16Array]",iSe="[object Uint32Array]",an={};an[az]=an[DMe]=an[YMe]=an[$Me]=an[OMe]=an[NMe]=an[XMe]=an[ZMe]=an[JMe]=an[qMe]=an[eSe]=an[HMe]=an[zMe]=an[Az]=an[GMe]=an[VMe]=an[jMe]=an[WMe]=an[tSe]=an[nSe]=an[rSe]=an[iSe]=!0;an[kMe]=an[lz]=an[KMe]=!1;function yy(n,e,t,r,i,s){var o,a=e&UMe,l=e&LMe,A=e&PMe;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!TMe(n))return n;var c=CMe(n);if(c){if(o=bMe(n),!a)return gMe(n,o)}else{var u=_Me(n),f=u==lz||u==QMe;if(MMe(n))return mMe(n,a);if(u==Az||u==az||f&&!i){if(o=l||f?{}:EMe(n),!a)return l?yMe(n,pMe(o,n)):vMe(n,dMe(o,n))}else{if(!an[u])return i?n:{};o=BMe(n,u,a)}}s||(s=new uMe);var h=s.get(n);if(h)return h;s.set(n,o),IMe(n)?n.forEach(function(g){o.add(yy(g,e,t,g,n,s))}):SMe(n)&&n.forEach(function(g,m){o.set(m,yy(g,e,t,m,n,s))});var p=A?l?xMe:wMe:l?FMe:RMe,d=c?void 0:p(n);return fMe(d||n,function(g,m){d&&(m=g,g=n[m]),hMe(o,m,yy(g,e,t,m,n,s))}),o}var sSe=yy,oSe=sSe,aSe=1,lSe=4;function ASe(n){return oSe(n,aSe|lSe)}var cSe=ASe;Object.defineProperty(Tg,"__esModule",{value:!0});Tg.mergeClasses=void 0;var uSe=DT,fSe=cz(uSe),hSe=cSe,dSe=cz(hSe),pSe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function cz(n){return n&&n.__esModule?n:{default:n}}var mSe=Tg.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,dSe.default)(e.default)||{};return t.map(function(i){var s=e[i];return s&&(0,fSe.default)(s,function(o,a){r[a]||(r[a]={}),r[a]=pSe({},r[a],s[a])}),i}),r};Tg.default=mSe;var Ig={};Object.defineProperty(Ig,"__esModule",{value:!0});Ig.autoprefix=void 0;var gSe=DT,UD=ySe(gSe),vSe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function ySe(n){return n&&n.__esModule?n:{default:n}}var wSe={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},xSe=Ig.autoprefix=function(e){var t={};return(0,UD.default)(e,function(r,i){var s={};(0,UD.default)(r,function(o,a){var l=wSe[a];l?s=vSe({},s,l(o)):s[a]=o}),t[i]=s}),t};Ig.default=xSe;var Rg={};Object.defineProperty(Rg,"__esModule",{value:!0});Rg.hover=void 0;var _Se=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bSe=ye,wB=BSe(bSe);function BSe(n){return n&&n.__esModule?n:{default:n}}function ESe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function LD(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function CSe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var MSe=Rg.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){CSe(i,r);function i(){var s,o,a,l;ESe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=LD(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return wB.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},wB.default.createElement(e,_Se({},a.props,a.state)))},o),LD(a,l)}return i}(wB.default.Component)};Rg.default=MSe;var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.active=void 0;var SSe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TSe=ye,xB=ISe(TSe);function ISe(n){return n&&n.__esModule?n:{default:n}}function RSe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function PD(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function FSe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var USe=Fg.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){FSe(i,r);function i(){var s,o,a,l;RSe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=PD(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return xB.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},xB.default.createElement(e,SSe({},a.props,a.state)))},o),PD(a,l)}return i}(xB.default.Component)};Fg.default=USe;var YT={};Object.defineProperty(YT,"__esModule",{value:!0});var LSe=function(e,t){var r={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=a};return e===0&&i("first-child"),e===t-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};YT.default=LSe;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.ReactCSS=Rs.loop=Rs.handleActive=$T=Rs.handleHover=Rs.hover=void 0;var PSe=Cg,DSe=pd(PSe),OSe=Tg,NSe=pd(OSe),kSe=Ig,QSe=pd(kSe),HSe=Rg,uz=pd(HSe),zSe=Fg,GSe=pd(zSe),VSe=YT,jSe=pd(VSe);function pd(n){return n&&n.__esModule?n:{default:n}}Rs.hover=uz.default;var $T=Rs.handleHover=uz.default;Rs.handleActive=GSe.default;Rs.loop=jSe.default;var WSe=Rs.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,DSe.default)(r),o=(0,NSe.default)(e,s);return(0,QSe.default)(o)},ht=Rs.default=WSe,KSe=function(e,t,r,i,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,A=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=l-(s.getBoundingClientRect().left+window.pageXOffset),u=A-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var f=void 0;if(u<0?f=0:u>a?f=1:f=Math.round(u*100/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var h=void 0;if(c<0?h=0:c>o?h=1:h=Math.round(c*100/o)/100,i!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null},_B={},YSe=function(e,t,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),s.toDataURL()):null},$Se=function(e,t,r,i){var s=e+"-"+t+"-"+r+(i?"-server":"");if(_B[s])return _B[s];var o=YSe(e,t,r,i);return _B[s]=o,o},DD=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},md=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,A=ht({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+$Se(t,r,i,s.canvas)+") center left"}}});return ye.isValidElement(l)?$.cloneElement(l,DD({},l.props,{style:DD({},l.props.style,A.grid)})):$.createElement("div",{style:A.grid})};md.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var XSe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZSe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function JSe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function OD(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function qSe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var XT=function(n){qSe(e,n);function e(){var t,r,i,s;JSe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=OD(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=KSe(A,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),OD(i,s)}return ZSe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=ht({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:XSe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return $.createElement("div",{style:s.alpha},$.createElement("div",{style:s.checkboard},$.createElement(md,{renderers:this.props.renderers})),$.createElement("div",{style:s.gradient}),$.createElement("div",{style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},$.createElement("div",{style:s.pointer},this.props.pointer?$.createElement(this.props.pointer,this.props):$.createElement("div",{style:s.slider}))))}}]),e}(ye.PureComponent||ye.Component),eTe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function tTe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nTe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function rTe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function iTe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var sTe=1,fz=38,oTe=40,aTe=[fz,oTe],lTe=function(e){return aTe.indexOf(e)>-1},ATe=function(e){return Number(String(e).replace(/%/g,""))},cTe=1,Pt=function(n){iTe(e,n);function e(t){nTe(this,e);var r=rTe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=ATe(i.target.value);if(!isNaN(s)&&lTe(i.keyCode)){var o=r.getArrowOffset(),a=i.keyCode===fz?s+o:s-o;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+cTe++,r}return eTe(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return tTe({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||sTe}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=ht({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return $.createElement("div",{style:i.wrap},$.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return r.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?$.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(ye.PureComponent||ye.Component),uTe=function(e,t,r,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{var f=-(c*100/o)+100;u=360*f/100}if(r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var h=void 0;if(A<0)h=0;else if(A>s)h=359;else{var p=A*100/s;h=360*p/100}if(r.h!==h)return{h,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},fTe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function hTe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ND(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function dTe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var gd=function(n){dTe(e,n);function e(){var t,r,i,s;hTe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=ND(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=uTe(A,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),ND(i,s)}return fTe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=ht({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return $.createElement("div",{style:o.hue},$.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return r.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},$.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),$.createElement("div",{style:o.pointer},this.props.pointer?$.createElement(this.props.pointer,this.props):$.createElement("div",{style:o.slider}))))}}]),e}(ye.PureComponent||ye.Component),hz={exports:{}},pTe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mTe=pTe,gTe=mTe;function dz(){}function pz(){}pz.resetWarningCache=dz;var vTe=function(){function n(r,i,s,o,a,l){if(l!==gTe){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pz,resetWarningCache:dz};return t.PropTypes=t,t};hz.exports=vTe();var yTe=hz.exports;const Qe=El(yTe);function wTe(){this.__data__=[],this.size=0}function Ug(n,e){return n===e||n!==n&&e!==e}function p_(n,e){for(var t=n.length;t--;)if(Ug(n[t][0],e))return t;return-1}var xTe=Array.prototype,_Te=xTe.splice;function bTe(n){var e=this.__data__,t=p_(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():_Te.call(e,t,1),--this.size,!0}function BTe(n){var e=this.__data__,t=p_(e,n);return t<0?void 0:e[t][1]}function ETe(n){return p_(this.__data__,n)>-1}function CTe(n,e){var t=this.__data__,r=p_(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Il(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Il.prototype.clear=wTe;Il.prototype.delete=bTe;Il.prototype.get=BTe;Il.prototype.has=ETe;Il.prototype.set=CTe;function MTe(){this.__data__=new Il,this.size=0}function STe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function TTe(n){return this.__data__.get(n)}function ITe(n){return this.__data__.has(n)}var RTe=typeof global=="object"&&global&&global.Object===Object&&global;const mz=RTe;var FTe=typeof self=="object"&&self&&self.Object===Object&&self,UTe=mz||FTe||Function("return this")();const Io=UTe;var LTe=Io.Symbol;const HA=LTe;var gz=Object.prototype,PTe=gz.hasOwnProperty,DTe=gz.toString,up=HA?HA.toStringTag:void 0;function OTe(n){var e=PTe.call(n,up),t=n[up];try{n[up]=void 0;var r=!0}catch{}var i=DTe.call(n);return r&&(e?n[up]=t:delete n[up]),i}var NTe=Object.prototype,kTe=NTe.toString;function QTe(n){return kTe.call(n)}var HTe="[object Null]",zTe="[object Undefined]",kD=HA?HA.toStringTag:void 0;function uu(n){return n==null?n===void 0?zTe:HTe:kD&&kD in Object(n)?OTe(n):QTe(n)}function js(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var GTe="[object AsyncFunction]",VTe="[object Function]",jTe="[object GeneratorFunction]",WTe="[object Proxy]";function ZT(n){if(!js(n))return!1;var e=uu(n);return e==VTe||e==jTe||e==GTe||e==WTe}var KTe=Io["__core-js_shared__"];const bB=KTe;var QD=function(){var n=/[^.]+$/.exec(bB&&bB.keys&&bB.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function YTe(n){return!!QD&&QD in n}var $Te=Function.prototype,XTe=$Te.toString;function fu(n){if(n!=null){try{return XTe.call(n)}catch{}try{return n+""}catch{}}return""}var ZTe=/[\\^$.*+?()[\]{}|]/g,JTe=/^\[object .+?Constructor\]$/,qTe=Function.prototype,e2e=Object.prototype,t2e=qTe.toString,n2e=e2e.hasOwnProperty,r2e=RegExp("^"+t2e.call(n2e).replace(ZTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function i2e(n){if(!js(n)||YTe(n))return!1;var e=ZT(n)?r2e:JTe;return e.test(fu(n))}function s2e(n,e){return n==null?void 0:n[e]}function hu(n,e){var t=s2e(n,e);return i2e(t)?t:void 0}var o2e=hu(Io,"Map");const Zm=o2e;var a2e=hu(Object,"create");const Jm=a2e;function l2e(){this.__data__=Jm?Jm(null):{},this.size=0}function A2e(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var c2e="__lodash_hash_undefined__",u2e=Object.prototype,f2e=u2e.hasOwnProperty;function h2e(n){var e=this.__data__;if(Jm){var t=e[n];return t===c2e?void 0:t}return f2e.call(e,n)?e[n]:void 0}var d2e=Object.prototype,p2e=d2e.hasOwnProperty;function m2e(n){var e=this.__data__;return Jm?e[n]!==void 0:p2e.call(e,n)}var g2e="__lodash_hash_undefined__";function v2e(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Jm&&e===void 0?g2e:e,this}function Zc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Zc.prototype.clear=l2e;Zc.prototype.delete=A2e;Zc.prototype.get=h2e;Zc.prototype.has=m2e;Zc.prototype.set=v2e;function y2e(){this.size=0,this.__data__={hash:new Zc,map:new(Zm||Il),string:new Zc}}function w2e(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function m_(n,e){var t=n.__data__;return w2e(e)?t[typeof e=="string"?"string":"hash"]:t.map}function x2e(n){var e=m_(this,n).delete(n);return this.size-=e?1:0,e}function _2e(n){return m_(this,n).get(n)}function b2e(n){return m_(this,n).has(n)}function B2e(n,e){var t=m_(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Rl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Rl.prototype.clear=y2e;Rl.prototype.delete=x2e;Rl.prototype.get=_2e;Rl.prototype.has=b2e;Rl.prototype.set=B2e;var E2e=200;function C2e(n,e){var t=this.__data__;if(t instanceof Il){var r=t.__data__;if(!Zm||r.length<E2e-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Rl(r)}return t.set(n,e),this.size=t.size,this}function Aa(n){var e=this.__data__=new Il(n);this.size=e.size}Aa.prototype.clear=MTe;Aa.prototype.delete=STe;Aa.prototype.get=TTe;Aa.prototype.has=ITe;Aa.prototype.set=C2e;var M2e=function(){try{var n=hu(Object,"defineProperty");return n({},"",{}),n}catch{}}();const $w=M2e;function JT(n,e,t){e=="__proto__"&&$w?$w(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function cM(n,e,t){(t!==void 0&&!Ug(n[e],t)||t===void 0&&!(e in n))&&JT(n,e,t)}function S2e(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var T2e=S2e();const vz=T2e;var yz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HD=yz&&typeof module=="object"&&module&&!module.nodeType&&module,I2e=HD&&HD.exports===yz,zD=I2e?Io.Buffer:void 0,GD=zD?zD.allocUnsafe:void 0;function R2e(n,e){if(e)return n.slice();var t=n.length,r=GD?GD(t):new n.constructor(t);return n.copy(r),r}var F2e=Io.Uint8Array;const Xw=F2e;function U2e(n){var e=new n.constructor(n.byteLength);return new Xw(e).set(new Xw(n)),e}function L2e(n,e){var t=e?U2e(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function P2e(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var VD=Object.create,D2e=function(){function n(){}return function(e){if(!js(e))return{};if(VD)return VD(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const O2e=D2e;function wz(n,e){return function(t){return n(e(t))}}var N2e=wz(Object.getPrototypeOf,Object);const xz=N2e;var k2e=Object.prototype;function qT(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||k2e;return n===t}function Q2e(n){return typeof n.constructor=="function"&&!qT(n)?O2e(xz(n)):{}}function zA(n){return n!=null&&typeof n=="object"}var H2e="[object Arguments]";function jD(n){return zA(n)&&uu(n)==H2e}var _z=Object.prototype,z2e=_z.hasOwnProperty,G2e=_z.propertyIsEnumerable,V2e=jD(function(){return arguments}())?jD:function(n){return zA(n)&&z2e.call(n,"callee")&&!G2e.call(n,"callee")};const Zw=V2e;var j2e=Array.isArray;const fs=j2e;var W2e=9007199254740991;function e2(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=W2e}function vd(n){return n!=null&&e2(n.length)&&!ZT(n)}function K2e(n){return zA(n)&&vd(n)}function Y2e(){return!1}var bz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,WD=bz&&typeof module=="object"&&module&&!module.nodeType&&module,$2e=WD&&WD.exports===bz,KD=$2e?Io.Buffer:void 0,X2e=KD?KD.isBuffer:void 0,Z2e=X2e||Y2e;const Jw=Z2e;var J2e="[object Object]",q2e=Function.prototype,eIe=Object.prototype,Bz=q2e.toString,tIe=eIe.hasOwnProperty,nIe=Bz.call(Object);function rIe(n){if(!zA(n)||uu(n)!=J2e)return!1;var e=xz(n);if(e===null)return!0;var t=tIe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Bz.call(t)==nIe}var iIe="[object Arguments]",sIe="[object Array]",oIe="[object Boolean]",aIe="[object Date]",lIe="[object Error]",AIe="[object Function]",cIe="[object Map]",uIe="[object Number]",fIe="[object Object]",hIe="[object RegExp]",dIe="[object Set]",pIe="[object String]",mIe="[object WeakMap]",gIe="[object ArrayBuffer]",vIe="[object DataView]",yIe="[object Float32Array]",wIe="[object Float64Array]",xIe="[object Int8Array]",_Ie="[object Int16Array]",bIe="[object Int32Array]",BIe="[object Uint8Array]",EIe="[object Uint8ClampedArray]",CIe="[object Uint16Array]",MIe="[object Uint32Array]",dn={};dn[yIe]=dn[wIe]=dn[xIe]=dn[_Ie]=dn[bIe]=dn[BIe]=dn[EIe]=dn[CIe]=dn[MIe]=!0;dn[iIe]=dn[sIe]=dn[gIe]=dn[oIe]=dn[vIe]=dn[aIe]=dn[lIe]=dn[AIe]=dn[cIe]=dn[uIe]=dn[fIe]=dn[hIe]=dn[dIe]=dn[pIe]=dn[mIe]=!1;function SIe(n){return zA(n)&&e2(n.length)&&!!dn[uu(n)]}function TIe(n){return function(e){return n(e)}}var Ez=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Am=Ez&&typeof module=="object"&&module&&!module.nodeType&&module,IIe=Am&&Am.exports===Ez,BB=IIe&&mz.process,RIe=function(){try{var n=Am&&Am.require&&Am.require("util").types;return n||BB&&BB.binding&&BB.binding("util")}catch{}}();const YD=RIe;var $D=YD&&YD.isTypedArray,FIe=$D?TIe($D):SIe;const t2=FIe;function uM(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var UIe=Object.prototype,LIe=UIe.hasOwnProperty;function PIe(n,e,t){var r=n[e];(!(LIe.call(n,e)&&Ug(r,t))||t===void 0&&!(e in n))&&JT(n,e,t)}function DIe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?JT(t,a,l):PIe(t,a,l)}return t}function OIe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var NIe=9007199254740991,kIe=/^(?:0|[1-9]\d*)$/;function n2(n,e){var t=typeof n;return e=e??NIe,!!e&&(t=="number"||t!="symbol"&&kIe.test(n))&&n>-1&&n%1==0&&n<e}var QIe=Object.prototype,HIe=QIe.hasOwnProperty;function Cz(n,e){var t=fs(n),r=!t&&Zw(n),i=!t&&!r&&Jw(n),s=!t&&!r&&!i&&t2(n),o=t||r||i||s,a=o?OIe(n.length,String):[],l=a.length;for(var A in n)(e||HIe.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||n2(A,l)))&&a.push(A);return a}function zIe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var GIe=Object.prototype,VIe=GIe.hasOwnProperty;function jIe(n){if(!js(n))return zIe(n);var e=qT(n),t=[];for(var r in n)r=="constructor"&&(e||!VIe.call(n,r))||t.push(r);return t}function Mz(n){return vd(n)?Cz(n,!0):jIe(n)}function WIe(n){return DIe(n,Mz(n))}function KIe(n,e,t,r,i,s,o){var a=uM(n,t),l=uM(e,t),A=o.get(l);if(A){cM(n,t,A);return}var c=s?s(a,l,t+"",n,e,o):void 0,u=c===void 0;if(u){var f=fs(l),h=!f&&Jw(l),p=!f&&!h&&t2(l);c=l,f||h||p?fs(a)?c=a:K2e(a)?c=P2e(a):h?(u=!1,c=R2e(l,!0)):p?(u=!1,c=L2e(l,!0)):c=[]:rIe(l)||Zw(l)?(c=a,Zw(a)?c=WIe(a):(!js(a)||ZT(a))&&(c=Q2e(l))):u=!1}u&&(o.set(l,c),i(c,l,r,s,o),o.delete(l)),cM(n,t,c)}function Sz(n,e,t,r,i){n!==e&&vz(e,function(s,o){if(i||(i=new Aa),js(s))KIe(n,e,o,t,Sz,r,i);else{var a=r?r(uM(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),cM(n,o,a)}},Mz)}function g_(n){return n}function YIe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var XD=Math.max;function $Ie(n,e,t){return e=XD(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=XD(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),YIe(n,this,a)}}function XIe(n){return function(){return n}}var ZIe=$w?function(n,e){return $w(n,"toString",{configurable:!0,enumerable:!1,value:XIe(e),writable:!0})}:g_;const JIe=ZIe;var qIe=800,eRe=16,tRe=Date.now;function nRe(n){var e=0,t=0;return function(){var r=tRe(),i=eRe-(r-t);if(t=r,i>0){if(++e>=qIe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var rRe=nRe(JIe);const iRe=rRe;function sRe(n,e){return iRe($Ie(n,e,g_),n+"")}function oRe(n,e,t){if(!js(t))return!1;var r=typeof e;return(r=="number"?vd(t)&&n2(e,t.length):r=="string"&&e in t)?Ug(t[e],n):!1}function aRe(n){return sRe(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&oRe(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var lRe=aRe(function(n,e,t){Sz(n,e,t)});const Oi=lRe;var Lg=function(e){var t=e.zDepth,r=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=ht(Oi({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return $.createElement("div",{style:l.wrap},$.createElement("div",{style:l.bg}),$.createElement("div",{style:l.content},s))};Lg.propTypes={background:Qe.string,zDepth:Qe.oneOf([0,1,2,3,4,5]),radius:Qe.number,styles:Qe.object};Lg.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var ARe=function(){return Io.Date.now()};const EB=ARe;var cRe=/\s/;function uRe(n){for(var e=n.length;e--&&cRe.test(n.charAt(e)););return e}var fRe=/^\s+/;function hRe(n){return n&&n.slice(0,uRe(n)+1).replace(fRe,"")}var dRe="[object Symbol]";function v_(n){return typeof n=="symbol"||zA(n)&&uu(n)==dRe}var ZD=0/0,pRe=/^[-+]0x[0-9a-f]+$/i,mRe=/^0b[01]+$/i,gRe=/^0o[0-7]+$/i,vRe=parseInt;function JD(n){if(typeof n=="number")return n;if(v_(n))return ZD;if(js(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=js(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=hRe(n);var t=mRe.test(n);return t||gRe.test(n)?vRe(n.slice(2),t?2:8):pRe.test(n)?ZD:+n}var yRe="Expected a function",wRe=Math.max,xRe=Math.min;function Tz(n,e,t){var r,i,s,o,a,l,A=0,c=!1,u=!1,f=!0;if(typeof n!="function")throw new TypeError(yRe);e=JD(e)||0,js(t)&&(c=!!t.leading,u="maxWait"in t,s=u?wRe(JD(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function h(C){var T=r,b=i;return r=i=void 0,A=C,o=n.apply(b,T),o}function p(C){return A=C,a=setTimeout(m,e),c?h(C):o}function d(C){var T=C-l,b=C-A,M=e-T;return u?xRe(M,s-b):M}function g(C){var T=C-l,b=C-A;return l===void 0||T>=e||T<0||u&&b>=s}function m(){var C=EB();if(g(C))return y(C);a=setTimeout(m,d(C))}function y(C){return a=void 0,f&&r?h(C):(r=i=void 0,o)}function w(){a!==void 0&&clearTimeout(a),A=0,r=l=i=a=void 0}function x(){return a===void 0?o:y(EB())}function _(){var C=EB(),T=g(C);if(r=arguments,i=this,l=C,T){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(m,e),h(l)}return a===void 0&&(a=setTimeout(m,e)),o}return _.cancel=w,_.flush=x,_}var _Re="Expected a function";function bRe(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(_Re);return js(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Tz(n,e,{leading:r,maxWait:e,trailing:i})}var BRe=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);A<0?A=0:A>s&&(A=s),c<0?c=0:c>o&&(c=o);var u=A/s,f=1-c/o;return{h:t.h,s:u,v:f,a:t.a,source:"hsv"}},ERe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function CRe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function MRe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function SRe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var y_=function(n){SRe(e,n);function e(t){CRe(this,e);var r=MRe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,BRe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=bRe(function(i,s,o){i(s,o)},50),r}return ERe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,l=i.pointer,A=i.circle,c=ht({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:A}},{custom:!!this.props.style});return $.createElement("div",{style:c.color,ref:function(f){return r.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},$.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),$.createElement("div",{style:c.white,className:"saturation-white"},$.createElement("div",{style:c.black,className:"saturation-black"}),$.createElement("div",{style:c.pointer},this.props.pointer?$.createElement(this.props.pointer,this.props):$.createElement("div",{style:c.circle}))))}}]),e}(ye.PureComponent||ye.Component);function TRe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var IRe=wz(Object.keys,Object);const RRe=IRe;var FRe=Object.prototype,URe=FRe.hasOwnProperty;function LRe(n){if(!qT(n))return RRe(n);var e=[];for(var t in Object(n))URe.call(n,t)&&t!="constructor"&&e.push(t);return e}function r2(n){return vd(n)?Cz(n):LRe(n)}function PRe(n,e){return n&&vz(n,e,r2)}function DRe(n,e){return function(t,r){if(t==null)return t;if(!vd(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var ORe=DRe(PRe);const Iz=ORe;function NRe(n){return typeof n=="function"?n:g_}function kRe(n,e){var t=fs(n)?TRe:Iz;return t(n,NRe(e))}function qw(n){"@babel/helpers - typeof";return qw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qw(n)}var QRe=/^\s+/,HRe=/\s+$/;function tt(n,e){if(n=n||"",e=e||{},n instanceof tt)return n;if(!(this instanceof tt))return new tt(n,e);var t=zRe(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}tt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=Rz(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=eO(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=eO(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=qD(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=qD(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return tO(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return WRe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(_n(this._r,255)*100)+"%",g:Math.round(_n(this._g,255)*100)+"%",b:Math.round(_n(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(_n(this._r,255)*100)+"%, "+Math.round(_n(this._g,255)*100)+"%, "+Math.round(_n(this._b,255)*100)+"%)":"rgba("+Math.round(_n(this._r,255)*100)+"%, "+Math.round(_n(this._g,255)*100)+"%, "+Math.round(_n(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:iFe[tO(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+nO(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=tt(e);r="#"+nO(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return tt(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(XRe,arguments)},brighten:function(){return this._applyModification(ZRe,arguments)},darken:function(){return this._applyModification(JRe,arguments)},desaturate:function(){return this._applyModification(KRe,arguments)},saturate:function(){return this._applyModification(YRe,arguments)},greyscale:function(){return this._applyModification($Re,arguments)},spin:function(){return this._applyModification(qRe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(nFe,arguments)},complement:function(){return this._applyCombination(eFe,arguments)},monochromatic:function(){return this._applyCombination(rFe,arguments)},splitcomplement:function(){return this._applyCombination(tFe,arguments)},triad:function(){return this._applyCombination(rO,[3])},tetrad:function(){return this._applyCombination(rO,[4])}};tt.fromRatio=function(n,e){if(qw(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Np(n[r]));n=t}return tt(n,e)};function zRe(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=lFe(n)),qw(n)=="object"&&(Ha(n.r)&&Ha(n.g)&&Ha(n.b)?(e=GRe(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Ha(n.h)&&Ha(n.s)&&Ha(n.v)?(r=Np(n.s),i=Np(n.v),e=jRe(n.h,r,i),o=!0,a="hsv"):Ha(n.h)&&Ha(n.s)&&Ha(n.l)&&(r=Np(n.s),s=Np(n.l),e=VRe(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=Rz(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function GRe(n,e,t){return{r:_n(n,255)*255,g:_n(e,255)*255,b:_n(t,255)*255}}function qD(n,e,t){n=_n(n,255),e=_n(e,255),t=_n(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function VRe(n,e,t){var r,i,s;n=_n(n,360),e=_n(e,100),t=_n(t,100);function o(A,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?A+(c-A)*6*u:u<1/2?c:u<2/3?A+(c-A)*(2/3-u)*6:A}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function eO(n,e,t){n=_n(n,255),e=_n(e,255),t=_n(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function jRe(n,e,t){n=_n(n,360)*6,e=_n(e,100),t=_n(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,A=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],u=[s,s,a,t,t,o][l];return{r:A*255,g:c*255,b:u*255}}function tO(n,e,t,r){var i=[wo(Math.round(n).toString(16)),wo(Math.round(e).toString(16)),wo(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function WRe(n,e,t,r,i){var s=[wo(Math.round(n).toString(16)),wo(Math.round(e).toString(16)),wo(Math.round(t).toString(16)),wo(Fz(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function nO(n,e,t,r){var i=[wo(Fz(r)),wo(Math.round(n).toString(16)),wo(Math.round(e).toString(16)),wo(Math.round(t).toString(16))];return i.join("")}tt.equals=function(n,e){return!n||!e?!1:tt(n).toRgbString()==tt(e).toRgbString()};tt.random=function(){return tt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function KRe(n,e){e=e===0?0:e||10;var t=tt(n).toHsl();return t.s-=e/100,t.s=w_(t.s),tt(t)}function YRe(n,e){e=e===0?0:e||10;var t=tt(n).toHsl();return t.s+=e/100,t.s=w_(t.s),tt(t)}function $Re(n){return tt(n).desaturate(100)}function XRe(n,e){e=e===0?0:e||10;var t=tt(n).toHsl();return t.l+=e/100,t.l=w_(t.l),tt(t)}function ZRe(n,e){e=e===0?0:e||10;var t=tt(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),tt(t)}function JRe(n,e){e=e===0?0:e||10;var t=tt(n).toHsl();return t.l-=e/100,t.l=w_(t.l),tt(t)}function qRe(n,e){var t=tt(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,tt(t)}function eFe(n){var e=tt(n).toHsl();return e.h=(e.h+180)%360,tt(e)}function rO(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=tt(n).toHsl(),r=[tt(n)],i=360/e,s=1;s<e;s++)r.push(tt({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function tFe(n){var e=tt(n).toHsl(),t=e.h;return[tt(n),tt({h:(t+72)%360,s:e.s,l:e.l}),tt({h:(t+216)%360,s:e.s,l:e.l})]}function nFe(n,e,t){e=e||6,t=t||30;var r=tt(n).toHsl(),i=360/t,s=[tt(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(tt(r));return s}function rFe(n,e){e=e||6;for(var t=tt(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(tt({h:r,s:i,v:s})),s=(s+a)%1;return o}tt.mix=function(n,e,t){t=t===0?0:t||50;var r=tt(n).toRgb(),i=tt(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return tt(o)};tt.readability=function(n,e){var t=tt(n),r=tt(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};tt.isReadable=function(n,e,t){var r=tt.readability(n,e),i,s;switch(s=!1,i=AFe(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};tt.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var A=0;A<e.length;A++)s=tt.readability(n,e[A]),s>i&&(i=s,r=tt(e[A]));return tt.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,tt.mostReadable(n,["#fff","#000"],t))};var fM=tt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},iFe=tt.hexNames=sFe(fM);function sFe(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rz(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function _n(n,e){oFe(n)&&(n="100%");var t=aFe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function w_(n){return Math.min(1,Math.max(0,n))}function Vi(n){return parseInt(n,16)}function oFe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function aFe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function wo(n){return n.length==1?"0"+n:""+n}function Np(n){return n<=1&&(n=n*100+"%"),n}function Fz(n){return Math.round(parseFloat(n)*255).toString(16)}function iO(n){return Vi(n)/255}var uo=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ha(n){return!!uo.CSS_UNIT.exec(n)}function lFe(n){n=n.replace(QRe,"").replace(HRe,"").toLowerCase();var e=!1;if(fM[n])n=fM[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=uo.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=uo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=uo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=uo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=uo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=uo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=uo.hex8.exec(n))?{r:Vi(t[1]),g:Vi(t[2]),b:Vi(t[3]),a:iO(t[4]),format:e?"name":"hex8"}:(t=uo.hex6.exec(n))?{r:Vi(t[1]),g:Vi(t[2]),b:Vi(t[3]),format:e?"name":"hex"}:(t=uo.hex4.exec(n))?{r:Vi(t[1]+""+t[1]),g:Vi(t[2]+""+t[2]),b:Vi(t[3]+""+t[3]),a:iO(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=uo.hex3.exec(n))?{r:Vi(t[1]+""+t[1]),g:Vi(t[2]+""+t[2]),b:Vi(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function AFe(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var sO=function(e){var t=["r","g","b","a","h","s","l","v"],r=0,i=0;return kRe(t,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),r===i?e:!1},kp=function(e,t){var r=e.hex?tt(e.hex):tt(e),i=r.toHsl(),s=r.toHsv(),o=r.toRgb(),a=r.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var l=a==="000000"&&o.a===0;return{hsl:i,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||t||i.h,source:e.source}},ZA=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&tt(e).isValid()},i2=function(e){if(!e)return"#fff";var t=kp(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},CB=function(e,t){var r=e.replace("","");return tt(t+" ("+r+")")._ok},fp=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cFe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function uFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function fFe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function hFe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Ni=function(e){var t=function(r){hFe(i,r);function i(s){uFe(this,i);var o=fFe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,l){var A=sO(a);if(A){var c=kp(a,a.h||o.state.oldHue);o.setState(c),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,c,l),o.props.onChange&&o.props.onChange(c,l)}},o.handleSwatchHover=function(a,l){var A=sO(a);if(A){var c=kp(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(c,l)}},o.state=fp({},kp(s.color,0)),o.debounce=Tz(function(a,l,A){a(l,A)},100),o}return cFe(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),$.createElement(e,fp({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return fp({},kp(o.color,a.oldHue))}}]),i}(ye.PureComponent||ye.Component);return t.propTypes=fp({},e.propTypes),t.defaultProps=fp({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},dFe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pFe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function mFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function oO(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function gFe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var vFe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){gFe(i,r);function i(){var s,o,a,l;mFe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=oO(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),oO(a,l)}return pFe(i,[{key:"render",value:function(){return $.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},$.createElement(e,dFe({},this.props,this.state)))}}]),i}($.Component)},aO=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},yFe=13,wFe=function(e){var t=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,l=a===void 0?t:a,A=e.children,c=e.focus,u=e.focusStyle,f=u===void 0?{}:u,h=t==="transparent",p=ht({default:{swatch:aO({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?f:{})}}),d=function(x){return s(t,x)},g=function(x){return x.keyCode===yFe&&s(t,x)},m=function(x){return o(t,x)},y={};return o&&(y.onMouseOver=m),$.createElement("div",aO({style:p.swatch,onClick:d,title:l,tabIndex:0,onKeyDown:g},y),A,h&&$.createElement(md,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const du=vFe(wFe);var xFe=function(e){var t=e.direction,r=ht({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return $.createElement("div",{style:r.picker})},_Fe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uz=function(e){var t=e.rgb,r=e.hsl,i=e.width,s=e.height,o=e.onChange,a=e.direction,l=e.style,A=e.renderers,c=e.pointer,u=e.className,f=u===void 0?"":u,h=ht({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return $.createElement("div",{style:h.picker,className:"alpha-picker "+f},$.createElement(XT,_Fe({},h.alpha,{rgb:t,hsl:r,pointer:c,renderers:A,onChange:o,direction:a})))};Uz.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:xFe};Ni(Uz);function Lz(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var bFe="__lodash_hash_undefined__";function BFe(n){return this.__data__.set(n,bFe),this}function EFe(n){return this.__data__.has(n)}function ex(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Rl;++e<t;)this.add(n[e])}ex.prototype.add=ex.prototype.push=BFe;ex.prototype.has=EFe;function CFe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function MFe(n,e){return n.has(e)}var SFe=1,TFe=2;function Pz(n,e,t,r,i,s){var o=t&SFe,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,f=!0,h=t&TFe?new ex:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var p=n[u],d=e[u];if(r)var g=o?r(d,p,u,e,n,s):r(p,d,u,n,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!CFe(e,function(m,y){if(!MFe(h,y)&&(p===m||i(p,m,t,r,s)))return h.push(y)})){f=!1;break}}else if(!(p===d||i(p,d,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function IFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function RFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var FFe=1,UFe=2,LFe="[object Boolean]",PFe="[object Date]",DFe="[object Error]",OFe="[object Map]",NFe="[object Number]",kFe="[object RegExp]",QFe="[object Set]",HFe="[object String]",zFe="[object Symbol]",GFe="[object ArrayBuffer]",VFe="[object DataView]",lO=HA?HA.prototype:void 0,MB=lO?lO.valueOf:void 0;function jFe(n,e,t,r,i,s,o){switch(t){case VFe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case GFe:return!(n.byteLength!=e.byteLength||!s(new Xw(n),new Xw(e)));case LFe:case PFe:case NFe:return Ug(+n,+e);case DFe:return n.name==e.name&&n.message==e.message;case kFe:case HFe:return n==e+"";case OFe:var a=IFe;case QFe:var l=r&FFe;if(a||(a=RFe),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=UFe,o.set(n,e);var c=Pz(a(n),a(e),r,i,s,o);return o.delete(n),c;case zFe:if(MB)return MB.call(n)==MB.call(e)}return!1}function WFe(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}function KFe(n,e,t){var r=e(n);return fs(n)?r:WFe(r,t(n))}function YFe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function $Fe(){return[]}var XFe=Object.prototype,ZFe=XFe.propertyIsEnumerable,AO=Object.getOwnPropertySymbols,JFe=AO?function(n){return n==null?[]:(n=Object(n),YFe(AO(n),function(e){return ZFe.call(n,e)}))}:$Fe;const qFe=JFe;function cO(n){return KFe(n,r2,qFe)}var eUe=1,tUe=Object.prototype,nUe=tUe.hasOwnProperty;function rUe(n,e,t,r,i,s){var o=t&eUe,a=cO(n),l=a.length,A=cO(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var f=a[u];if(!(o?f in e:nUe.call(e,f)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var d=!0;s.set(n,e),s.set(e,n);for(var g=o;++u<l;){f=a[u];var m=n[f],y=e[f];if(r)var w=o?r(y,m,f,e,n,s):r(m,y,f,n,e,s);if(!(w===void 0?m===y||i(m,y,t,r,s):w)){d=!1;break}g||(g=f=="constructor")}if(d&&!g){var x=n.constructor,_=e.constructor;x!=_&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof _=="function"&&_ instanceof _)&&(d=!1)}return s.delete(n),s.delete(e),d}var iUe=hu(Io,"DataView");const hM=iUe;var sUe=hu(Io,"Promise");const dM=sUe;var oUe=hu(Io,"Set");const pM=oUe;var aUe=hu(Io,"WeakMap");const mM=aUe;var uO="[object Map]",lUe="[object Object]",fO="[object Promise]",hO="[object Set]",dO="[object WeakMap]",pO="[object DataView]",AUe=fu(hM),cUe=fu(Zm),uUe=fu(dM),fUe=fu(pM),hUe=fu(mM),gc=uu;(hM&&gc(new hM(new ArrayBuffer(1)))!=pO||Zm&&gc(new Zm)!=uO||dM&&gc(dM.resolve())!=fO||pM&&gc(new pM)!=hO||mM&&gc(new mM)!=dO)&&(gc=function(n){var e=uu(n),t=e==lUe?n.constructor:void 0,r=t?fu(t):"";if(r)switch(r){case AUe:return pO;case cUe:return uO;case uUe:return fO;case fUe:return hO;case hUe:return dO}return e});const mO=gc;var dUe=1,gO="[object Arguments]",vO="[object Array]",Mv="[object Object]",pUe=Object.prototype,yO=pUe.hasOwnProperty;function mUe(n,e,t,r,i,s){var o=fs(n),a=fs(e),l=o?vO:mO(n),A=a?vO:mO(e);l=l==gO?Mv:l,A=A==gO?Mv:A;var c=l==Mv,u=A==Mv,f=l==A;if(f&&Jw(n)){if(!Jw(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new Aa),o||t2(n)?Pz(n,e,t,r,i,s):jFe(n,e,l,t,r,i,s);if(!(t&dUe)){var h=c&&yO.call(n,"__wrapped__"),p=u&&yO.call(e,"__wrapped__");if(h||p){var d=h?n.value():n,g=p?e.value():e;return s||(s=new Aa),i(d,g,t,r,s)}}return f?(s||(s=new Aa),rUe(n,e,t,r,i,s)):!1}function s2(n,e,t,r,i){return n===e?!0:n==null||e==null||!zA(n)&&!zA(e)?n!==n&&e!==e:mUe(n,e,t,r,s2,i)}var gUe=1,vUe=2;function yUe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new Aa;if(r)var f=r(A,c,l,n,e,u);if(!(f===void 0?s2(c,A,gUe|vUe,r,u):f))return!1}}return!0}function Dz(n){return n===n&&!js(n)}function wUe(n){for(var e=r2(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,Dz(i)]}return e}function Oz(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function xUe(n){var e=wUe(n);return e.length==1&&e[0][2]?Oz(e[0][0],e[0][1]):function(t){return t===n||yUe(t,n,e)}}var _Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bUe=/^\w*$/;function o2(n,e){if(fs(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||v_(n)?!0:bUe.test(n)||!_Ue.test(n)||e!=null&&n in Object(e)}var BUe="Expected a function";function a2(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(BUe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(a2.Cache||Rl),t}a2.Cache=Rl;var EUe=500;function CUe(n){var e=a2(n,function(r){return t.size===EUe&&t.clear(),r}),t=e.cache;return e}var MUe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SUe=/\\(\\)?/g,TUe=CUe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(MUe,function(t,r,i,s){e.push(i?s.replace(SUe,"$1"):r||t)}),e});const IUe=TUe;var RUe=1/0,wO=HA?HA.prototype:void 0,xO=wO?wO.toString:void 0;function Nz(n){if(typeof n=="string")return n;if(fs(n))return Lz(n,Nz)+"";if(v_(n))return xO?xO.call(n):"";var e=n+"";return e=="0"&&1/n==-RUe?"-0":e}function FUe(n){return n==null?"":Nz(n)}function kz(n,e){return fs(n)?n:o2(n,e)?[n]:IUe(FUe(n))}var UUe=1/0;function x_(n){if(typeof n=="string"||v_(n))return n;var e=n+"";return e=="0"&&1/n==-UUe?"-0":e}function Qz(n,e){e=kz(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[x_(e[t++])];return t&&t==r?n:void 0}function LUe(n,e,t){var r=n==null?void 0:Qz(n,e);return r===void 0?t:r}function PUe(n,e){return n!=null&&e in Object(n)}function DUe(n,e,t){e=kz(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=x_(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&e2(i)&&n2(o,i)&&(fs(n)||Zw(n)))}function OUe(n,e){return n!=null&&DUe(n,e,PUe)}var NUe=1,kUe=2;function QUe(n,e){return o2(n)&&Dz(e)?Oz(x_(n),e):function(t){var r=LUe(t,n);return r===void 0&&r===e?OUe(t,n):s2(e,r,NUe|kUe)}}function HUe(n){return function(e){return e==null?void 0:e[n]}}function zUe(n){return function(e){return Qz(e,n)}}function GUe(n){return o2(n)?HUe(x_(n)):zUe(n)}function VUe(n){return typeof n=="function"?n:n==null?g_:typeof n=="object"?fs(n)?QUe(n[0],n[1]):xUe(n):GUe(n)}function jUe(n,e){var t=-1,r=vd(n)?Array(n.length):[];return Iz(n,function(i,s,o){r[++t]=e(i,s,o)}),r}function pu(n,e){var t=fs(n)?Lz:jUe;return t(n,VUe(e))}var WUe=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,s=ht({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return $.createElement("div",{style:s.swatches},pu(t,function(o){return $.createElement(du,{key:o,color:o,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),$.createElement("div",{style:s.clear}))},l2=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=i==="transparent",h=function(g,m){ZA(g)&&t({hex:g,source:"hex"},m)},p=ht(Oi({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i2(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},A),{"hide-triangle":a==="hide"});return $.createElement("div",{style:p.card,className:"block-picker "+u},$.createElement("div",{style:p.triangle}),$.createElement("div",{style:p.head},f&&$.createElement(md,{borderRadius:"6px 6px 0 0"}),$.createElement("div",{style:p.label},i)),$.createElement("div",{style:p.body},$.createElement(WUe,{colors:s,onClick:h,onSwatchHover:r}),$.createElement(Pt,{style:{input:p.input},value:i,onChange:h})))};l2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),colors:Qe.arrayOf(Qe.string),triangle:Qe.oneOf(["top","hide"]),styles:Qe.object};l2.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Ni(l2);var af={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},lf={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Af={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},cf={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},uf={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},ff={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},hf={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},df={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},pf={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Qp={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},mf={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},gf={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},vf={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},yf={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},wf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},xf={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},_f={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},bf={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},Hz=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,l=e.circleSpacing,A=ht({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:o});return $.createElement("div",{style:A.swatch},$.createElement(du,{style:A.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:A.Swatch.boxShadow+", 0 0 5px "+t}}))};Hz.defaultProps={circleSize:28,circleSpacing:14};const KUe=$T(Hz);var A2=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,l=e.styles,A=l===void 0?{}:l,c=e.circleSpacing,u=e.className,f=u===void 0?"":u,h=ht(Oi({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},A)),p=function(g,m){return r({hex:g,source:"hex"},m)};return $.createElement("div",{style:h.card,className:"circle-picker "+f},pu(s,function(d){return $.createElement(KUe,{key:d,color:d,onClick:p,onSwatchHover:i,active:o===d.toLowerCase(),circleSize:a,circleSpacing:c})}))};A2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),circleSize:Qe.number,circleSpacing:Qe.number,styles:Qe.object};A2.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[af[500],lf[500],Af[500],cf[500],uf[500],ff[500],hf[500],df[500],pf[500],Qp[500],mf[500],gf[500],vf[500],yf[500],wf[500],xf[500],_f[500],bf[500]],styles:{}};Ni(A2);function _O(n){return n===void 0}var zz={};Object.defineProperty(zz,"__esModule",{value:!0});var bO=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},YUe=ye,BO=$Ue(YUe);function $Ue(n){return n&&n.__esModule?n:{default:n}}function XUe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Sv=24,ZUe=zz.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Sv:r,s=n.height,o=s===void 0?Sv:s,a=n.style,l=a===void 0?{}:a,A=XUe(n,["fill","width","height","style"]);return BO.default.createElement("svg",bO({viewBox:"0 0 "+Sv+" "+Sv,style:bO({fill:t,width:i,height:o},l)},A),BO.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},JUe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function qUe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function eLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function tLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Gz=function(n){tLe(e,n);function e(t){qUe(this,e);var r=eLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?ZA(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(_O(i.s)?r.props.hsl.s:i.s),l:Number(_O(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?r.state={view:"rgb"}:r.state={view:t.view},r}return JUe(e,[{key:"render",value:function(){var r=this,i=ht({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=$.createElement("div",{style:i.fields,className:"flexbox-fix"},$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=$.createElement("div",{style:i.fields,className:"flexbox-fix"},$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),$.createElement("div",{style:i.alpha},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=$.createElement("div",{style:i.fields,className:"flexbox-fix"},$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),$.createElement("div",{style:i.field},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),$.createElement("div",{style:i.alpha},$.createElement(Pt,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),$.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,$.createElement("div",{style:i.toggle},$.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},$.createElement(ZUe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}($.Component);Gz.defaultProps={view:"hex"};var EO=function(){var e=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return $.createElement("div",{style:e.picker})},nLe=function(){var e=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return $.createElement("div",{style:e.picker})},c2=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,A=e.renderers,c=e.styles,u=c===void 0?{}:c,f=e.className,h=f===void 0?"":f,p=e.defaultView,d=ht(Oi({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:i});return $.createElement("div",{style:d.picker,className:"chrome-picker "+h},$.createElement("div",{style:d.saturation},$.createElement(y_,{style:d.Saturation,hsl:o,hsv:a,pointer:nLe,onChange:r})),$.createElement("div",{style:d.body},$.createElement("div",{style:d.controls,className:"flexbox-fix"},$.createElement("div",{style:d.color},$.createElement("div",{style:d.swatch},$.createElement("div",{style:d.active}),$.createElement(md,{renderers:A}))),$.createElement("div",{style:d.toggles},$.createElement("div",{style:d.hue},$.createElement(gd,{style:d.Hue,hsl:o,pointer:EO,onChange:r})),$.createElement("div",{style:d.alpha},$.createElement(XT,{style:d.Alpha,rgb:s,hsl:o,pointer:EO,renderers:A,onChange:r})))),$.createElement(Gz,{rgb:s,hsl:o,hex:l,view:p,onChange:r,disableAlpha:i})))};c2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),disableAlpha:Qe.bool,styles:Qe.object,defaultView:Qe.oneOf(["hex","rgb","hsl"])};c2.defaultProps={width:225,disableAlpha:!1,styles:{}};const rLe=Ni(c2);var iLe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.active,a=ht({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:i2(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return $.createElement(du,{style:a.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},$.createElement("div",{style:a.dot}))},sLe=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=ht({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(l,A){l.r||l.g||l.b?i({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},A):i({hex:l.hex,source:"hex"},A)};return $.createElement("div",{style:s.fields,className:"flexbox-fix"},$.createElement("div",{style:s.active}),$.createElement(Pt,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:o}),$.createElement(Pt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:o}),$.createElement(Pt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:o}),$.createElement(Pt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:o}))},u2=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ht(Oi({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),f=function(p,d){p.hex?ZA(p.hex)&&t({hex:p.hex,source:"hex"},d):t(p,d)};return $.createElement(Lg,{style:u.Compact,styles:l},$.createElement("div",{style:u.compact,className:"compact-picker "+c},$.createElement("div",null,pu(i,function(h){return $.createElement(iLe,{key:h,color:h,active:h.toLowerCase()===s,onClick:f,onSwatchHover:r})}),$.createElement("div",{style:u.clear})),$.createElement(sLe,{hex:s,rgb:o,onChange:f})))};u2.propTypes={colors:Qe.arrayOf(Qe.string),styles:Qe.object};u2.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Ni(u2);var oLe=function(e){var t=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ht({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return $.createElement("div",{style:a.swatch},$.createElement(du,{color:r,onClick:i,onHover:s,focusStyle:o}))};const aLe=$T(oLe);var f2=function(e){var t=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ht(Oi({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),f=function(p,d){return i({hex:p,source:"hex"},d)};return $.createElement("div",{style:u.card,className:"github-picker "+c},$.createElement("div",{style:u.triangleShadow}),$.createElement("div",{style:u.triangle}),pu(r,function(h){return $.createElement(aLe,{color:h,key:h,onClick:f,onSwatchHover:s})}))};f2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),colors:Qe.arrayOf(Qe.string),triangle:Qe.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Qe.object};f2.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Ni(f2);var lLe=function(e){var t=e.direction,r=ht({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return $.createElement("div",{style:r.picker})},ALe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},h2=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ht(Oi({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},A)),h=function(d){return i({a:1,h:d.h,l:.5,s:1})};return $.createElement("div",{style:f.picker,className:"hue-picker "+u},$.createElement(gd,ALe({},f.hue,{hsl:s,pointer:a,onChange:h,direction:o})))};h2.propTypes={styles:Qe.object};h2.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:lLe,styles:{}};Ni(h2);var cLe=function(e){var t=e.onChange,r=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ht(Oi({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(f,h){f.hex?ZA(f.hex)&&t({hex:f.hex,source:"hex"},h):(f.r||f.g||f.b)&&t({r:f.r||i.r,g:f.g||i.g,b:f.b||i.b,source:"rgb"},h)};return $.createElement(Lg,{styles:o},$.createElement("div",{style:A.material,className:"material-picker "+l},$.createElement(Pt,{style:{wrap:A.HEXwrap,input:A.HEXinput,label:A.HEXlabel},label:"hex",value:r,onChange:c}),$.createElement("div",{style:A.split,className:"flexbox-fix"},$.createElement("div",{style:A.third},$.createElement(Pt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"r",value:i.r,onChange:c})),$.createElement("div",{style:A.third},$.createElement(Pt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"g",value:i.g,onChange:c})),$.createElement("div",{style:A.third},$.createElement(Pt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"b",value:i.b,onChange:c})))))};Ni(cLe);var uLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,o=ht({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(A,c){A["#"]?ZA(A["#"])&&t({hex:A["#"],source:"hex"},c):A.r||A.g||A.b?t({r:A.r||r.r,g:A.g||r.g,b:A.b||r.b,source:"rgb"},c):(A.h||A.s||A.v)&&t({h:A.h||i.h,s:A.s||i.s,v:A.v||i.v,source:"hsv"},c)};return $.createElement("div",{style:o.fields},$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),$.createElement("div",{style:o.divider}),$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),$.createElement(Pt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),$.createElement("div",{style:o.divider}),$.createElement(Pt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),$.createElement("div",{style:o.fieldSymbols},$.createElement("div",{style:o.symbol},""),$.createElement("div",{style:o.symbol},"%"),$.createElement("div",{style:o.symbol},"%")))},fLe=function(e){var t=e.hsl,r=ht({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return $.createElement("div",{style:r.picker})},hLe=function(){var e=ht({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return $.createElement("div",{style:e.pointer},$.createElement("div",{style:e.left},$.createElement("div",{style:e.leftInside})),$.createElement("div",{style:e.right},$.createElement("div",{style:e.rightInside})))},CO=function(e){var t=e.onClick,r=e.label,i=e.children,s=e.active,o=ht({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return $.createElement("div",{style:o.button,onClick:t},r||i)},dLe=function(e){var t=e.rgb,r=e.currentColor,i=ht({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return $.createElement("div",null,$.createElement("div",{style:i.label},"new"),$.createElement("div",{style:i.swatches},$.createElement("div",{style:i.new}),$.createElement("div",{style:i.current})),$.createElement("div",{style:i.label},"current"))},pLe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function mLe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function gLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function vLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var d2=function(n){vLe(e,n);function e(t){mLe(this,e);var r=gLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return pLe(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,o=r.className,a=o===void 0?"":o,l=ht(Oi({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return $.createElement("div",{style:l.picker,className:"photoshop-picker "+a},$.createElement("div",{style:l.head},this.props.header),$.createElement("div",{style:l.body,className:"flexbox-fix"},$.createElement("div",{style:l.saturation},$.createElement(y_,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:fLe,onChange:this.props.onChange})),$.createElement("div",{style:l.hue},$.createElement(gd,{direction:"vertical",hsl:this.props.hsl,pointer:hLe,onChange:this.props.onChange})),$.createElement("div",{style:l.controls},$.createElement("div",{style:l.top,className:"flexbox-fix"},$.createElement("div",{style:l.previews},$.createElement(dLe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),$.createElement("div",{style:l.actions},$.createElement(CO,{label:"OK",onClick:this.props.onAccept,active:!0}),$.createElement(CO,{label:"Cancel",onClick:this.props.onCancel}),$.createElement(uLe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}($.Component);d2.propTypes={header:Qe.string,styles:Qe.object};d2.defaultProps={header:"Color Picker",styles:{}};Ni(d2);var yLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,a=ht({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(c,u){c.hex?ZA(c.hex)&&t({hex:c.hex,source:"hex"},u):c.r||c.g||c.b?t({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,a:r.a,source:"rgb"},u):c.a&&(c.a<0?c.a=0:c.a>100&&(c.a=100),c.a/=100,t({h:i.h,s:i.s,l:i.l,a:c.a,source:"rgb"},u))};return $.createElement("div",{style:a.fields,className:"flexbox-fix"},$.createElement("div",{style:a.double},$.createElement(Pt,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:l})),$.createElement("div",{style:a.single},$.createElement(Pt,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),$.createElement("div",{style:a.single},$.createElement(Pt,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),$.createElement("div",{style:a.single},$.createElement(Pt,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),$.createElement("div",{style:a.alpha},$.createElement(Pt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},wLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vz=function(e){var t=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=ht({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(A,c){i({hex:A,source:"hex"},c)};return $.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(l){var A=typeof l=="string"?{color:l}:l,c=""+A.color+(A.title||"");return $.createElement("div",{key:c,style:o.swatchWrap},$.createElement(du,wLe({},A,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+A.color}})))}))};Vz.propTypes={colors:Qe.arrayOf(Qe.oneOfType([Qe.string,Qe.shape({color:Qe.string,title:Qe.string})])).isRequired};var xLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},p2=function(e){var t=e.width,r=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,l=e.onSwatchHover,A=e.disableAlpha,c=e.presetColors,u=e.renderers,f=e.styles,h=f===void 0?{}:f,p=e.className,d=p===void 0?"":p,g=ht(Oi({default:xLe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:A});return $.createElement("div",{style:g.picker,className:"sketch-picker "+d},$.createElement("div",{style:g.saturation},$.createElement(y_,{style:g.Saturation,hsl:o,hsv:s,onChange:a})),$.createElement("div",{style:g.controls,className:"flexbox-fix"},$.createElement("div",{style:g.sliders},$.createElement("div",{style:g.hue},$.createElement(gd,{style:g.Hue,hsl:o,onChange:a})),$.createElement("div",{style:g.alpha},$.createElement(XT,{style:g.Alpha,rgb:r,hsl:o,renderers:u,onChange:a}))),$.createElement("div",{style:g.color},$.createElement(md,null),$.createElement("div",{style:g.activeColor}))),$.createElement(yLe,{rgb:r,hsl:o,hex:i,onChange:a,disableAlpha:A}),$.createElement(Vz,{colors:c,onClick:a,onSwatchHover:l}))};p2.propTypes={disableAlpha:Qe.bool,width:Qe.oneOfType([Qe.string,Qe.number]),styles:Qe.object};p2.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Ni(p2);var hp=function(e){var t=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,a=e.first,l=e.last,A=ht({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:l}),c=function(f){return s({h:t.h,s:.5,l:r,source:"hsl"},f)};return $.createElement("div",{style:A.swatch,onClick:c})},_Le=function(e){var t=e.onClick,r=e.hsl,i=ht({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return $.createElement("div",{style:i.swatches},$.createElement("div",{style:i.swatch},$.createElement(hp,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:t,first:!0})),$.createElement("div",{style:i.swatch},$.createElement(hp,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:t})),$.createElement("div",{style:i.swatch},$.createElement(hp,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:t})),$.createElement("div",{style:i.swatch},$.createElement(hp,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:t})),$.createElement("div",{style:i.swatch},$.createElement(hp,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:t,last:!0})),$.createElement("div",{style:i.clear}))},bLe=function(){var e=ht({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return $.createElement("div",{style:e.picker})},m2=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ht(Oi({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return $.createElement("div",{style:A.wrap||{},className:"slider-picker "+l},$.createElement("div",{style:A.hue},$.createElement(gd,{style:A.Hue,hsl:t,pointer:i,onChange:r})),$.createElement("div",{style:A.swatches},$.createElement(_Le,{hsl:t,onClick:r})))};m2.propTypes={styles:Qe.object};m2.defaultProps={pointer:bLe,styles:{}};Ni(m2);var jz={};Object.defineProperty(jz,"__esModule",{value:!0});var MO=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BLe=ye,SO=ELe(BLe);function ELe(n){return n&&n.__esModule?n:{default:n}}function CLe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Tv=24,MLe=jz.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Tv:r,s=n.height,o=s===void 0?Tv:s,a=n.style,l=a===void 0?{}:a,A=CLe(n,["fill","width","height","style"]);return SO.default.createElement("svg",MO({viewBox:"0 0 "+Tv+" "+Tv,style:MO({fill:t,width:i,height:o},l)},A),SO.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},SLe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.first,a=e.last,l=e.active,A=ht({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:i2(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:l,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return $.createElement(du,{color:t,style:A.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},$.createElement("div",{style:A.check},$.createElement(MLe,null)))},TLe=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,o=ht({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return $.createElement("div",{style:o.group},pu(i,function(a,l){return $.createElement(SLe,{key:a,color:a,active:a.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:t,onSwatchHover:r})}))},g2=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ht(Oi({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},A)),h=function(d,g){return i({hex:d,source:"hex"},g)};return $.createElement("div",{style:f.picker,className:"swatches-picker "+u},$.createElement(Lg,null,$.createElement("div",{style:f.overflow},$.createElement("div",{style:f.body},pu(o,function(p){return $.createElement(TLe,{key:p.toString(),group:p,active:a,onClick:h,onSwatchHover:s})}),$.createElement("div",{style:f.clear})))))};g2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),height:Qe.oneOfType([Qe.string,Qe.number]),colors:Qe.arrayOf(Qe.arrayOf(Qe.string)),styles:Qe.object};g2.defaultProps={width:320,height:240,colors:[[af[900],af[700],af[500],af[300],af[100]],[lf[900],lf[700],lf[500],lf[300],lf[100]],[Af[900],Af[700],Af[500],Af[300],Af[100]],[cf[900],cf[700],cf[500],cf[300],cf[100]],[uf[900],uf[700],uf[500],uf[300],uf[100]],[ff[900],ff[700],ff[500],ff[300],ff[100]],[hf[900],hf[700],hf[500],hf[300],hf[100]],[df[900],df[700],df[500],df[300],df[100]],[pf[900],pf[700],pf[500],pf[300],pf[100]],["#194D33",Qp[700],Qp[500],Qp[300],Qp[100]],[mf[900],mf[700],mf[500],mf[300],mf[100]],[gf[900],gf[700],gf[500],gf[300],gf[100]],[vf[900],vf[700],vf[500],vf[300],vf[100]],[yf[900],yf[700],yf[500],yf[300],yf[100]],[wf[900],wf[700],wf[500],wf[300],wf[100]],[xf[900],xf[700],xf[500],xf[300],xf[100]],[_f[900],_f[700],_f[500],_f[300],_f[100]],[bf[900],bf[700],bf[500],bf[300],bf[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Ni(g2);var v2=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ht(Oi({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},A),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),h=function(d,g){ZA(d)&&t({hex:d,source:"hex"},g)};return $.createElement("div",{style:f.card,className:"twitter-picker "+u},$.createElement("div",{style:f.triangleShadow}),$.createElement("div",{style:f.triangle}),$.createElement("div",{style:f.body},pu(s,function(p,d){return $.createElement(du,{key:d,color:p,hex:p,style:f.swatch,onClick:h,onHover:r,focusStyle:{boxShadow:"0 0 4px "+p}})}),$.createElement("div",{style:f.hash},"#"),$.createElement(Pt,{label:null,style:{input:f.input},value:i.replace("#",""),onChange:h}),$.createElement("div",{style:f.clear})))};v2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),triangle:Qe.oneOf(["hide","top-left","top-right"]),colors:Qe.arrayOf(Qe.string),styles:Qe.object};v2.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Ni(v2);var y2=function(e){var t=ht({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return $.createElement("div",{style:t.picker})};y2.propTypes={hsl:Qe.shape({h:Qe.number,s:Qe.number,l:Qe.number,a:Qe.number})};y2.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var w2=function(e){var t=ht({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return $.createElement("div",{style:t.picker})};w2.propTypes={hsl:Qe.shape({h:Qe.number,s:Qe.number,l:Qe.number,a:Qe.number})};w2.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var ILe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,a=function(h,p){if(h.hex)ZA(h.hex)&&t({hex:h.hex,source:"hex"},p);else if(h.rgb){var d=h.rgb.split(",");CB(h.rgb,"rgb")&&t({r:d[0],g:d[1],b:d[2],a:1,source:"rgb"},p)}else if(h.hsv){var g=h.hsv.split(",");CB(h.hsv,"hsv")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsv"},p))}else if(h.hsl){var m=h.hsl.split(",");CB(h.hsl,"hsl")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("",""),u[1]==1?u[1]=.01:u[2]==1&&(u[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsl"},p))}},l=ht({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),A=r.r+", "+r.g+", "+r.b,c=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",u=Math.round(o.h)+", "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return $.createElement("div",{style:l.wrap,className:"flexbox-fix"},$.createElement("div",{style:l.fields},$.createElement("div",{style:l.double},$.createElement(Pt,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:a})),$.createElement("div",{style:l.column},$.createElement("div",{style:l.single},$.createElement(Pt,{style:{input:l.input2,label:l.label2},label:"rgb",value:A,onChange:a})),$.createElement("div",{style:l.single},$.createElement(Pt,{style:{input:l.input2,label:l.label2},label:"hsv",value:u,onChange:a})),$.createElement("div",{style:l.single},$.createElement(Pt,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:a})))))},x2=function(e){var t=e.width,r=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,l=e.header,A=e.styles,c=A===void 0?{}:A,u=e.className,f=u===void 0?"":u,h=ht(Oi({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return $.createElement("div",{style:h.picker,className:"google-picker "+f},$.createElement("div",{style:h.head},l),$.createElement("div",{style:h.swatch}),$.createElement("div",{style:h.saturation},$.createElement(y_,{hsl:s,hsv:o,pointer:y2,onChange:r})),$.createElement("div",{style:h.body},$.createElement("div",{style:h.controls,className:"flexbox-fix"},$.createElement("div",{style:h.hue},$.createElement(gd,{style:h.Hue,hsl:s,radius:"4px",pointer:w2,onChange:r}))),$.createElement(ILe,{rgb:i,hsl:s,hex:a,hsv:o,onChange:r})))};x2.propTypes={width:Qe.oneOfType([Qe.string,Qe.number]),styles:Qe.object,header:Qe.string};x2.defaultProps={width:652,styles:{},header:"Color picker"};Ni(x2);const RLe="_InformationContainerPos_1yd4c_2",FLe="_scrollContainer_1yd4c_15",SB={InformationContainerPos:RLe,scrollContainer:FLe,"options-container":"_options-container_1yd4c_24"},ULe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABE5AAAROQEb2ZNGAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU1ZTg4ZDczLWQ3YmItNjg0NS1iNDkxLWYxZTU0YmRhZDE1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFhMDRkN2Y4LWVjNjQtZTg0ZC1iMjQzLWQ4ZjRhMjVlN2YzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzgwNzA3Yy0zNDg5LTAzNDctYmEwNy1kOTFhY2ZkYmUwODYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MjQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTVlODhkNzMtZDdiYi02ODQ1LWI0OTEtZjFlNTRiZGFkMTUyIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjQ3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+okruHwAAA6NJREFUeNrt279LG2EYwHG1CCqKPwKOJQU3cXYqXZ0KofgPuBWcUmsgoouCFArS0UXaWUpTFxHcUnE4cO6fULoUbWnTFk2ftz4p19BoLve+d33vvsN3KWre97lPUvPm7Gs2m32U3xgCABgCAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABABnlV5VR6QH0mOpIq229VSacPj4E/oY7Y9b0TWZtY0AwO7Qp6WH0q70XrqSmh1qSLMO1zKrj9Hp8a90jbu65mkAxBv4svRR+nHD0MOZr5t3uJ75iGsxa18GQPRBl6Sgy0GHu5QWHa5rUR8j6rrMXkoAuH3Ag9KLHgYcbsfh+nZirs3sbRAA/x5uQXrb4zMs3AdpyMH6hvRnx1nbpe6xAIC/hzssHcUcbrjnUr/F9fXrz7S1PrPXYQBcD3dKemdxuKZP0pzFNc7pz7S5RrPnqVwDkAGMSTXLg211auNtmL4NPXW0RrP3sVwC0EOVwNFgW9XjPMv01anueI2By8Or/xKAbHhSeuN4sK3OpPvSQIT1Dej3nCW0RjOLyVwA0Jf9IKHBhk8IX0vFLtZX1K9tJLzGII3/DtJ4q1dLeLDhvkjH0jNpSXqkLem/HevXpLW+WtJvEZP+IKee4nB9qZ7kB0pJPvOPuLiRzgkKmQCgz/xDLmrkDpN4JUjikOeEi9lzJ64Pi1wDOOAixu7AZwBVLmDsqr7/DrAhfeVCRs7MbCMr7wLWuKCRW8vaOYC5cfIbF/bWzIwqWT0J3LRww0eWM7PZzPpnAeUUztl9yMyknJdPA7el71z0P5lZbOftfgDzSvCTi/97BuW83hG0lfNfDM3et/J+T+BKjgGscFfwNYL1DodF+yl/Pm/j/oP9Doc869wVfPNh0Z50Vzr3GMC57mEvjUMeH/8yqKJvh15Ko9I96cJjABe6h1HdUyPJQx4fAdyRFtruz/MdQDG0nwWzRwB0DyJTAPjjUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAhgDMSJ89BmDWPgOA3gGMS0+kVU8zax8HAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIACQlX4BjeT0VuSSEBUAAAAASUVORK5CYII=",LLe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MDc2OWJhLTIwNzQtMjU0Zi1iNjM5LWJiZjEyMTFlMjljNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxMzRkOGNhLTVlMWUtYzM0Yy05ZmM0LTNlZTgyNGQ1YTVhYyIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzUzMzYxZC05NmIzLTgwNDctYTA0ZC0wODcxYmNiNzY4MDAiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6Mjk6NTctMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgwNzY5YmEtMjA3NC0yNTRmLWI2MzktYmJmMTIxMWUyOWM1IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjE4LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Yrc/VQAAAzxJREFUeNrt3b9LFnEcwHE3IW1oiUCF/gCXcgibmhyaDEqnWhoCaRXqUQhByKVVXAqsMbQyGgIHA6GhSdpNc7E/IBehp8/h94ErRLzoOc671/Ce7/O572t4/PHc9bTb7R41NzcBADcBAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAinVrudUfPY92o+0ut5uu1Q9AtQCsRe2SWgMAAAAAAAAAAEo/7KHoWnQl12i0USKAjXTN/AzZTEMAdB/AQvQjfRrvtBMdlAjgIF0zP0M20wIA3QewVOJBF20JAAAAAACAbgJYrDCARQD+30EPRjei66nsU/fVaLXCAFbTjKO5ubMdBgEoDuBR9Cv6+VeHFQZweMy82Q6PACgOYLbCB120WQCKA5ipEYAZAAAAoCCAxzUC8BiAk3+3fzeajCZSN6OXNQLwMu3U2W8y7TwEwNENaTe0CQCWW7cbDOA2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcWQB3GgzgDgDLrbHoa/Ql1+foe40O+nvaKb9jtvMYAMutc9Hl9C3hTgPR0xoBeJp2yu+Y7XzO8wE8IAIAAAAAAABPCQPgTwD3ok/Req6P0V6FD3ovzZifOdvhHgD/9hKI7JPzpVwXoxcVBvAizZifeaDKL5fwsGgPiwYAAAAAAACAswJgKnqf3tzV6W20X+JB76dr5mfIZpoCoPsAeqPz6aeETheiDyUC+JCumZ8hm6kXAO8NBAAAAAAAoFQAfdG7EgFk1+oDoLuHOhI9jB6covvRVokAttI1TzNbtsMIAMUBPKnRXwOfAOD/AQAAAAAAACj04si6APDiyBMOejh6Fs3naqX/pqkLgPW0U37HbOdhAI7eoNXUbwZNAuC7gQAAAAAADQYw3mAA440BkD7svYlWotepV9FmgwFspnvQuR8r6R5N1hHAfIMPumjzdQQw52BP3RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA2QQwHe1E36JtHdu3dI+mfTVMAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAAV7DcOsgfgT8DmTAAAAABJRU5ErkJggg==",PLe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJkMTY5MDdlLWQyY2EtZDA0Mi05MWRjLTliZTMyYzYyYjlmOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNmQ1YTFjLWM5NjAtMDE0OS04OWQwLTQ3NDQ0MzAzZDI1ZCIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2N2JiZmQ0OC0yMGMzLTI0NDktODQyNS1kNWJmOTBlNzMwYjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MTQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmQxNjkwN2UtZDJjYS1kMDQyLTkxZGMtOWJlMzJjNjJiOWY5IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMzOjExLTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q6I0lAAAAs1JREFUeNrt3TtrFFEYgOFE2HjFXgv9AyIYsbATMaAWQtqAYBPQ0ibCgoSA/yGbwsJ/o6Ag3gMWEkurTeGlcfwGzoIs7LKT3TXOOU/xFlnYkNnvIRNOZs4sVFW1oHLzIQDgQwBAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAiVt91l2OXkRVi3oTXQVg+uHfjX60bPiDfkUPADj48C+2ePh/dx2AgwF4ncHw695HHQCaA6gy6hYAZQPYAqBsANsAlA1gBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAogDE14tRt359RL3ocbQSLQGQH4Aj0bsJ31tfF3EDgPwAvGzw/t/ROgDlAhhcY7gMQLkABpeXnQSgXAB1mwCUDeAjAGUD6ANQNoB9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCQ6wFQNoAnQ8fWiXYBKAfAnaFjOxXtATAewIdMhv85Ojp0bGfqq3sBGA/gcrodKrt9guO11Sm+XxkA0gd1P90Y2dbhb4w4rm8ATI5gpYVbx+8On/eHHoJRAdAMwVJ9j3zaNKE3ZmOFw6z+uTaj29HxEcdxLvoKQIHVd/XW9/XN4LcLAC0c/vno04xOLwC0bPj3oi8z/PsCgIYDWExLr/+iTlrkORutTbHYA8AMAXTTuvu8e5XO8XtTLPIAMAcATzNbVgagIYAdAAAAAAAAAAAAAADKA7CdGYA+AM0AbGUG4C0AzQDczAzABgDNAHTSHrs5DL9ebTwGQHME1zIY/vfoQjG7hc8BwXr0s8XDXyvqeQFzQnClhZeXPY8uFffEkDkiOB09ShDq/9rt/4f10/n+YXSiyGcGqfCnhgkAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAAaBp+gMB5Yr6zMTlPAAAAABJRU5ErkJggg==",DLe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFmYmE3YzFhLWI0MTMtMGQ0MS05YmRkLTE2ZGY2MTllOTgyMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMWMyNDQ0LTUzYzgtYjU0OC1iZjBmLTczZWE4ZmU5NWYzZSIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNjZhMzQ1Ni02ODczLWQ5NDYtOTRkMy1mZTYwZjQ5NzliNjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6NDQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWZiYTdjMWEtYjQxMy0wZDQxLTliZGQtMTZkZjYxOWU5ODIxIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjI2LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+F7DBkwAABCVJREFUeNrt3TtMFEEYwHHuAiYkNjRg74mJpSYUkCiGAhKxsLKXggQ6yi2wQUh8RMCGRJulEgotjgLwVaCVDYYeHzQaKU5FCRo4vwnfRdQgHvu4mZ1/8W/Iec7c/u7gdmd368rlch35Gy8CAHgRAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAJLpUhjkpW5pQfoolaRPjlXSsZs59Jg5AeDgDZ+T2qRFaUcqZyQzl0c6txwA9n/X9+m7ppzR1nWOeQD8DaBD+pzhjV/JzLEDAL9v/JPSmgcbv5KZaysAfv3ev+PRxq80acPfAzYAKEgrHgIwcy4AIAwGpS8eAjBzHgBAGEx7uPErhQAIg6LHAIoACIM5jwHMAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIuA3pjbYBgOwDMOvyNqUZ6azUuGcMjfqz+/qYHQBkC8BXaUI6/p/rE8b13wAgAwB+SOel+irGVC91St8B4DYAs8K4J8LYehJepQyAhAEMVfPO3+eTYAgAbgJYinGMSwBwC8A36VyMY+zU5wSAIwCWpeYYx9gsvQKAOwAe7P2eH8MYzX6ChwBwB8DtOE+60PMWxwHgDoCRBMY5AgB3AIzHeQaufgJMAIC/AQDg8beAZQC4A2Argf0AWwBwa0/gc+lIDONr0OdiT6CjxwJyEcaW41iA2wDeS70RxnZBnwMADq8HMOfhXzzEuHpTuG4BAFJaEWQO5IxKp/61f0C/75vHXEvo4A8Aarwm8J00K13WpV9HtYL+bFYfw5pAT5aFb2osC+e8AABkFcBOxADgGIBt6YU0pUfwhqWrh2xYn2NKn3MbAHYDeCId0713ed2RE0d5fc4W6TEA7APwVuqPsgK4ypXC/XpKGQAsAPBB6qrBuLti2EsIgIgAzFk/fTUce5+OAQA1AjCTxsf+Ab8OZgBQGwDmtiynLRj/mQj3OQBABAAv41z1E2H8LToWAKQMwOy3b7Bg/A06FgCkDOCmRbe7uQWA9AGMWgRgFADpAxizCMAYAAAAAAAAgL8BAJAagOsWAbgBgPQBPJWaLBh/k/QMAOkDMIsz7lkw/rsRFooAIIbDweY27avS65Rb1f+bw8EsCgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCCAoscAigAIg2mPAYQACIPBFC7GZGNmzgMA2L0+z4qHAMycCwDYPf9+0kMAk3He08BZAIqgVVrzaOObuZ6w4bW3AoAiaI9wkqVLmTm22/K62wTA/Cq4kvCNGmvdul5TIA+A/RG0SQspXqwxrYtULurccja95lYB+OOSrd3SvH4ilPR6AC5V0rHP6y1o8za+1lYCIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAFXRT5xealqlzx1wAAAAAElFTkSuQmCC",OLe="_InformationContainerPos_1m76y_2",NLe="_scrollContainer_1m76y_15",kLe="_centerAlign_1m76y_25",QLe="_traitInfoTitle_1m76y_28",HLe="_dropdownFlex_1m76y_38",zLe="_checkboxFlex_1m76y_44",GLe="_simpleFlex_1m76y_49",VLe="_traitInfoText_1m76y_55",jLe="_dropdownBase_1m76y_64",WLe="_dropdownControl_1m76y_74",KLe="_dropdownControlSmall_1m76y_80",YLe="_flexSelect_1m76y_106",$Le="_checked_1m76y_163",XLe="_checkmark_1m76y_167",ZLe="_checkboxHolder_1m76y_180",JLe="_actionButton_1m76y_189",qLe="_tabHolder_1m76y_209",ePe="_tabButton_1m76y_215",tPe="_tabButtonSelected_1m76y_235",je={InformationContainerPos:OLe,scrollContainer:NLe,centerAlign:kLe,traitInfoTitle:QLe,dropdownFlex:HLe,checkboxFlex:zLe,simpleFlex:GLe,traitInfoText:VLe,dropdownBase:jLe,dropdownControl:WLe,dropdownControlSmall:KLe,"input-box":"_input-box_1m76y_87",flexSelect:YLe,"arrow-button":"_arrow-button_1m76y_114","left-button":"_left-button_1m76y_130","right-button":"_right-button_1m76y_137","anim-button":"_anim-button_1m76y_144","custom-checkbox":"_custom-checkbox_1m76y_149","checkbox-container":"_checkbox-container_1m76y_154",checked:$Le,checkmark:XLe,checkboxHolder:ZLe,actionButton:JLe,tabHolder:qLe,tabButton:ePe,tabButtonSelected:tPe},nPe="_slider_1y6nx_1",rPe="_infoContainer_1y6nx_13",Iv={"slider-container":"_slider-container_1y6nx_1",slider:nPe,infoContainer:rPe,"input-box":"_input-box_1y6nx_18"};function Xf({title:n,value:e,min:t,max:r,onChange:i,step:s,stepBox:o}){return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:Iv.infoContainer,children:[n,o&&N.jsx("input",{type:"number",min:"0",max:"100",value:e,onChange:i,className:Iv["input-box"],step:o})]}),N.jsx("div",{className:Iv["slider-container"],children:N.jsx("input",{type:"range",min:t,max:r,value:e,onChange:i,className:Iv.slider,step:s})})]})}function iPe({selectedTrait:n,selectedVRM:e}){const{animationManager:t,characterManager:r}=ye.useContext(Zn),[i,s]=ye.useState(0),[o,a]=ye.useState(0),[l,A]=ye.useState(0);ye.useEffect(()=>{var p,d,g;e!=null&&(A((p=e.data)==null?void 0:p.cullingLayer),s(((d=e.data)==null?void 0:d.cullingDistance[0])||0),a(((g=e.data)==null?void 0:g.cullingDistance[1])||0))},[e]);const c=p=>{s(p.target.value),e!=null&&e.data&&(e.data.cullingDistance[0]=p.target.value)},u=p=>{a(p.target.value),e!=null&&e.data&&(e.data.cullingDistance[1]=p.target.value)},f=p=>{e!=null&&e.data&&(A(p.target.value),e.data.cullingLayer=p.target.value)},h=()=>{r.updateCullHiddenMeshes()};return N.jsx("div",{children:N.jsxs("div",{className:je.InformationContainerPos,children:[N.jsx(ya,{title:"Trait Information",width:180,right:20}),N.jsx("div",{className:je.scrollContainer,children:n!=null?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:je.traitInfoTitle,children:"Trait ID"}),N.jsx("div",{className:je.traitInfoText,children:n==null?void 0:n.id}),N.jsx("div",{className:je.traitInfoTitle,children:"Trait Name"}),N.jsx("div",{className:je.traitInfoText,children:n==null?void 0:n.name}),N.jsx("div",{className:je.traitInfoTitle,children:"Description"}),N.jsx("div",{className:je.traitInfoText,children:(n==null?void 0:n.description)||"A nice "+(n==null?void 0:n.name)}),N.jsx("div",{className:je.traitInfoTitle,children:"Culling Options"}),N.jsx("br",{}),N.jsxs("div",{className:je.traitInfoText,children:["Culling Layer",N.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:f,className:je["input-box"],step:1}),N.jsx("br",{}),N.jsx("br",{}),N.jsx(Xf,{title:"Out Distance",value:i,onChange:c,min:0,max:1,step:.001,stepBox:.01}),N.jsx("br",{}),N.jsx(Xf,{title:"In Distance",value:o,onChange:u,min:0,max:1,step:.001,stepBox:.01}),N.jsx("div",{className:je.actionButton,onClick:h,children:N.jsx("div",{children:"Update Culling "})})]})]}):N.jsx(N.Fragment,{children:N.jsx("div",{className:je.traitInfoTitle,children:"No Trait Selected"})})})]})})}var Wz={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=s(ye),t=r(S8);function r(C){return C&&C.__esModule?C:{default:C}}function i(){if(typeof WeakMap!="function")return null;var C=new WeakMap;return i=function(){return C},C}function s(C){if(C&&C.__esModule)return C;if(C===null||o(C)!=="object"&&typeof C!="function")return{default:C};var T=i();if(T&&T.has(C))return T.get(C);var b={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in C)if(Object.prototype.hasOwnProperty.call(C,P)){var Y=M?Object.getOwnPropertyDescriptor(C,P):null;Y&&(Y.get||Y.set)?Object.defineProperty(b,P,Y):b[P]=C[P]}return b.default=C,T&&T.set(C,b),b}function o(C){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(b){return typeof b}:o=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},o(C)}function a(){return a=Object.assign||function(C){for(var T=1;T<arguments.length;T++){var b=arguments[T];for(var M in b)Object.prototype.hasOwnProperty.call(b,M)&&(C[M]=b[M])}return C},a.apply(this,arguments)}function l(C,T){var b=Object.keys(C);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(C);T&&(M=M.filter(function(P){return Object.getOwnPropertyDescriptor(C,P).enumerable})),b.push.apply(b,M)}return b}function A(C){for(var T=1;T<arguments.length;T++){var b=arguments[T]!=null?arguments[T]:{};T%2?l(b,!0).forEach(function(M){c(C,M,b[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(b)):l(b).forEach(function(M){Object.defineProperty(C,M,Object.getOwnPropertyDescriptor(b,M))})}return C}function c(C,T,b){return T in C?Object.defineProperty(C,T,{value:b,enumerable:!0,configurable:!0,writable:!0}):C[T]=b,C}function u(C,T){if(!(C instanceof T))throw new TypeError("Cannot call a class as a function")}function f(C,T){for(var b=0;b<T.length;b++){var M=T[b];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(C,M.key,M)}}function h(C,T,b){return T&&f(C.prototype,T),b&&f(C,b),C}function p(C,T){return T&&(o(T)==="object"||typeof T=="function")?T:g(C)}function d(C){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},d(C)}function g(C){if(C===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}function m(C,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(T&&T.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),T&&y(C,T)}function y(C,T){return y=Object.setPrototypeOf||function(M,P){return M.__proto__=P,M},y(C,T)}var w="Select...",x=function(C){m(T,C);function T(b){var M;return u(this,T),M=p(this,d(T).call(this,b)),M.state={selected:M.parseValue(b.value,b.options)||{label:typeof b.placeholder>"u"?w:b.placeholder,value:""},isOpen:!1},M.dropdownRef=(0,e.createRef)(),M.mounted=!0,M.handleDocumentClick=M.handleDocumentClick.bind(g(M)),M.fireChangeEvent=M.fireChangeEvent.bind(g(M)),M}return h(T,[{key:"componentDidUpdate",value:function(M){if(this.props.value!==M.value)if(this.props.value){var P=this.parseValue(this.props.value,this.props.options);P!==this.state.selected&&this.setState({selected:P})}else this.setState({selected:{label:typeof this.props.placeholder>"u"?w:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(M){this.props.onFocus&&typeof this.props.onFocus=="function"&&this.props.onFocus(this.state.isOpen),!(M.type==="mousedown"&&M.button!==0)&&(M.stopPropagation(),M.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(M,P){var Y;if(typeof M=="string")for(var H=0,I=P.length;H<I;H++)if(P[H].type==="group"){var v=P[H].items.filter(function(E){return E.value===M});v.length&&(Y=v[0])}else typeof P[H].value<"u"&&P[H].value===M&&(Y=P[H]);return Y||M}},{key:"setValue",value:function(M,P){var Y={selected:{value:M,label:P},isOpen:!1};this.fireChangeEvent(Y),this.setState(Y)}},{key:"fireChangeEvent",value:function(M){M.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(M.selected)}},{key:"renderOption",value:function(M){var P,Y=M.value;typeof Y>"u"&&(Y=M.label||M);var H=M.label||M.value||M,I=Y===this.state.selected.value||Y===this.state.selected,v=(P={},c(P,"".concat(this.props.baseClassName,"-option"),!0),c(P,M.className,!!M.className),c(P,"is-selected",I),P),E=(0,t.default)(v),F=Object.keys(M.data||{}).reduce(function(D,O){return A({},D,c({},"data-".concat(O),M.data[O]))},{});return e.default.createElement("div",a({key:Y,className:E,onMouseDown:this.setValue.bind(this,Y,H),onClick:this.setValue.bind(this,Y,H),role:"option","aria-selected":I?"true":"false"},F),H)}},{key:"buildMenu",value:function(){var M=this,P=this.props,Y=P.options,H=P.baseClassName,I=Y.map(function(v){if(v.type==="group"){var E=e.default.createElement("div",{className:"".concat(H,"-title")},v.name),F=v.items.map(function(D){return M.renderOption(D)});return e.default.createElement("div",{className:"".concat(H,"-group"),key:v.name,role:"listbox",tabIndex:"-1"},E,F)}else return M.renderOption(v)});return I.length?I:e.default.createElement("div",{className:"".concat(H,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(M){this.mounted&&(this.dropdownRef.current.contains(M.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return typeof this.state.selected=="string"||this.state.selected.value!==""}},{key:"render",value:function(){var M,P,Y,H,I,v=this.props,E=v.baseClassName,F=v.controlClassName,D=v.placeholderClassName,O=v.menuClassName,z=v.arrowClassName,K=v.arrowClosed,Q=v.arrowOpen,B=v.className,j=this.props.disabled?"Dropdown-disabled":"",ee=typeof this.state.selected=="string"?this.state.selected:this.state.selected.label,U=(0,t.default)((M={},c(M,"".concat(E,"-root"),!0),c(M,B,!!B),c(M,"is-open",this.state.isOpen),M)),X=(0,t.default)((P={},c(P,"".concat(E,"-control"),!0),c(P,F,!!F),c(P,j,!!j),P)),ae=(0,t.default)((Y={},c(Y,"".concat(E,"-placeholder"),!0),c(Y,D,!!D),c(Y,"is-selected",this.isValueSelected()),Y)),se=(0,t.default)((H={},c(H,"".concat(E,"-menu"),!0),c(H,O,!!O),H)),de=(0,t.default)((I={},c(I,"".concat(E,"-arrow"),!0),c(I,z,!!z),I)),oe=e.default.createElement("div",{className:ae},ee),pe=this.state.isOpen?e.default.createElement("div",{className:se,"aria-expanded":"true"},this.buildMenu()):null;return e.default.createElement("div",{ref:this.dropdownRef,className:U},e.default.createElement("div",{className:X,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},oe,e.default.createElement("div",{className:"".concat(E,"-arrow-wrapper")},Q&&K?this.state.isOpen?Q:K:e.default.createElement("span",{className:de}))),pe)}}]),T}(e.Component);x.defaultProps={baseClassName:"Dropdown"};var _=x;n.default=_})(Wz);const eA=El(Wz);function sPe({selectedTrait:n,selectedVRM:e}){const{manifest:t,loraDataGenerator:r,sceneElements:i}=$.useContext(Zn),[s,o]=ye.useState([]),[a,l]=ye.useState(null),A=u=>{(t==null?void 0:t.loras)!=null&&(l(t.loras[u.value]),console.log(t.loras[u.value]))},c=async()=>{const u=i.parent;u.remove(i),await r.createLoraData(a),u.add(i)};return ye.useEffect(()=>{if((t==null?void 0:t.loras)!=null){const u=t.loras.map((f,h)=>({value:h,label:f.name,description:f.description,manifest:f.manifest}));o(u)}},[t]),N.jsx("div",{children:N.jsxs("div",{className:je.InformationContainerPos,children:[N.jsx(ya,{title:"Lora Creation",width:180,right:20}),N.jsxs("div",{className:je.scrollContainer,children:[N.jsx("div",{className:je.traitInfoTitle,children:"Lora Manifests"}),N.jsx(eA,{className:je.dropdownControl,options:s,onChange:A,placeholder:"Select an option"}),";",N.jsx("div",{className:je.traitInfoText,children:(a==null?void 0:a.description)||""}),a!=null&&N.jsx("div",{className:je.actionButton,onClick:c,children:N.jsx("div",{children:"  Create Lora Data "})})]})]})})}function oPe({selectedTrait:n,selectedVRM:e}){const{manifest:t,spriteAtlasGenerator:r,sceneElements:i}=$.useContext(Zn),[s,o]=ye.useState([]),[a,l]=ye.useState(""),[A,c]=ye.useState(null),u=h=>{(t==null?void 0:t.sprites)!=null&&(l(t.sprites[h.value].description),c(t.sprites[h.value]))},f=async()=>{const h=i.parent;h.remove(i),await r.createSpriteAtlas(A),h.add(i)};return ye.useEffect(()=>{if((t==null?void 0:t.sprites)!=null){const h=t.sprites.map((p,d)=>({value:d,label:p.name,description:p.description,manifest:p.manifest}));o(h)}},[t]),N.jsx("div",{children:N.jsxs("div",{className:je.InformationContainerPos,children:[N.jsx(ya,{title:"Sprite Creation",width:180,right:20}),N.jsxs("div",{className:je.scrollContainer,children:[N.jsx("div",{className:je.traitInfoTitle,children:"Sprite Manifests"}),N.jsx(eA,{className:je.dropdownControl,options:s,onChange:u,placeholder:"Select an option"}),";",N.jsx("div",{className:je.traitInfoText,children:a||""}),A!=null&&N.jsx("div",{className:je.actionButton,onClick:f,children:N.jsx("div",{children:"  Create Sprite Data "})})]})]})})}const TO=4096;function aPe({selectedTrait:n,traitGroupName:e}){const{manifest:t,thumbnailsGenerator:r,sceneElements:i,characterManager:s}=$.useContext(Zn),[o,a]=ye.useState([]),[l,A]=ye.useState(""),[c,u]=ye.useState(""),[f,h]=ye.useState(""),[p,d]=ye.useState(!1),[g,m]=ye.useState(512),[y,w]=ye.useState(512),[x,_]=ye.useState(.1),[C,T]=ye.useState(.1),[b,M]=ye.useState("center"),[P,Y]=ye.useState("center"),[H,I]=ye.useState("center"),[v,E]=ye.useState("head"),[F,D]=ye.useState("chest"),[O,z]=ye.useState(!0),[K,Q]=ye.useState(!1),B=[{label:"center"},{label:"left"},{label:"right"}],j=[{label:"center"},{label:"top"},{label:"bottom"}],ee=[{label:"center"},{label:"front"},{label:"back"}],U=[{label:"head"},{label:"neck"},{label:"chest"},{label:"spine"},{label:"hips"},{label:"upperLeg"},{label:"lowerLeg"},{label:"foot"}],X=Ae=>{(t==null?void 0:t.thumbnails)!=null&&(A(t.thumbnails[Ae.value].description),h(t.thumbnails[Ae.value].manifest),u(t.thumbnails[Ae.value].name))},ae=(Ae,q,J,ce)=>isNaN(Ae)?ce:Ae>J?J:Ae<q?q:Ae,se=Ae=>{const q=parseInt(Ae.target.value);m(ae(q,1,TO,512))},de=Ae=>{const q=parseInt(Ae.target.value);w(ae(q,1,TO,512))},oe=Ae=>{const q=parseFloat(Ae.target.value);_(ae(q,0,1,.1))},pe=Ae=>{const q=parseFloat(Ae.target.value);T(ae(q,0,1,.1))},_e=Ae=>{d(Ae)},xe=async()=>{const Ae=i.parent;Ae.remove(i),await r.createThumbnails(t.thumbnails[0]),Ae.add(i)},L=(Ae=!0)=>({topFrameOffset:C,bottomFrameOffset:x,thumbnailsWidth:g,thumbnailsHeight:y,backgroundColor:[0,0,0,0],thumbnailsCollection:[{traitGroup:e,cameraPosition:P+"-"+H+"-"+b,topBoneName:v==="upperLeg"||v==="lowerLeg"||v==="foot"?"left"+v[0].toUpperCase()+v.slice(1):v,topBoneMaxVertex:O,bottomBoneName:F==="upperLeg"||F==="lowerLeg"||v==="foot"?"left"+F[0].toUpperCase()+F.slice(1):F,bottomBoneMaxVertex:K,saveOnlyIDs:Ae?null:n.id}]}),ue=async(Ae=!1)=>{s.storeCurrentAvatar();const q=i.parent;q.remove(i),Ae?await r.createThumbnailsWithObjectData(L(),!1,null,e+"_thumbnails"):await r.createThumbnailsWithObjectData(L(!1),!1),q.add(i),s.loadStoredAvatar()};return ye.useEffect(()=>{if((t==null?void 0:t.thumbnails)!=null){const Ae=t.thumbnails.map((q,J)=>({value:J,label:q.name,description:q.description,manifest:q.manifest}));a(Ae)}},[t]),N.jsx("div",{children:N.jsxs("div",{className:je.InformationContainerPos,children:[N.jsx(ya,{title:"Thumbnail Creation",width:180,right:20}),N.jsxs("div",{className:je.scrollContainer,children:[N.jsxs("div",{className:je.tabHolder,children:[N.jsx("div",{className:je.tabButton+(p?"":" "+je.tabButtonSelected),onClick:()=>{_e(!1)},children:N.jsxs("div",{children:["  ","Custom"," "]})}),N.jsx("div",{className:je.tabButton+(p?" "+je.tabButtonSelected:""),onClick:()=>{_e(!0)},children:N.jsxs("div",{children:["  ","Manifest"," "]})})]}),N.jsx("br",{}),p?N.jsxs(N.Fragment,{children:[N.jsx("div",{className:je.traitInfoTitle+" "+je.centerAlign,children:"Thumbnail Manifests"}),N.jsx(eA,{className:je.dropdownControl,options:o,value:c,onChange:X,placeholder:"Select an option"}),";",N.jsx("div",{className:je.traitInfoText,children:l||""}),f!=""&&N.jsx("div",{className:je.actionButton,onClick:xe,children:N.jsx("div",{children:"  Create Thumbnails "})})]}):N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:je.traitInfoText,children:[N.jsx("div",{className:je.traitInfoTitle+" "+je.centerAlign,style:{margin:"10px 0px 10px"},children:"Resolution"}),"Width ",N.jsx("input",{value:g,className:je["input-box"],step:1,onChange:Ae=>{m(Ae.target.value)},onBlur:se}),N.jsx("br",{}),"Height ",N.jsx("input",{value:y,className:je["input-box"],step:1,onChange:Ae=>{w(Ae.target.value)},onBlur:de}),N.jsx("br",{}),"Top Spacing ",N.jsx("input",{value:x,className:je["input-box"],step:.1,onChange:Ae=>{_(Ae.target.value)},onBlur:oe}),N.jsx("br",{}),"Bottom Spacing ",N.jsx("input",{value:C,className:je["input-box"],step:.1,onChange:Ae=>{T(Ae.target.value)},onBlur:pe}),N.jsx("br",{}),N.jsx("div",{className:je.traitInfoTitle+" "+je.centerAlign,style:{margin:"20px"},children:"Camera Position"})]}),N.jsxs("div",{className:je.dropdownFlex,children:[N.jsx("div",{className:je.traitInfoTitle,style:{margin:"0px"},children:"X"}),N.jsx(eA,{className:je.dropdownControlSmall,options:B,onChange:Ae=>{Y(Ae.label)},value:P})]}),N.jsxs("div",{className:je.dropdownFlex,children:[N.jsx("div",{className:je.traitInfoTitle,style:{margin:"0px"},children:"Y"}),N.jsx(eA,{className:je.dropdownControlSmall,options:j,onChange:Ae=>{I(Ae.label)},value:H})]}),N.jsxs("div",{className:je.dropdownFlex,children:[N.jsx("div",{className:je.traitInfoTitle,style:{margin:"0px"},children:"Z"}),N.jsx(eA,{className:je.dropdownControlSmall,options:ee,onChange:Ae=>{M(Ae.label)},value:b})]}),N.jsx("div",{className:je.traitInfoTitle+" "+je.centerAlign,style:{margin:"30px 0px 30px"},children:"Target Bones"}),N.jsxs("div",{className:je.dropdownFlex,style:{justifyContent:"space-between"},children:[N.jsx("div",{className:je.traitInfoTitle,style:{margin:"0px"},children:"Top"}),N.jsx(eA,{className:je.dropdownControlSmall,options:U,onChange:Ae=>{E(Ae.label)},value:v})]}),N.jsxs("div",{className:je.dropdownFlex,style:{justifyContent:"space-between"},children:[N.jsx("div",{className:je.traitInfoTitle,style:{margin:"0px"},children:"Bottom"}),N.jsx(eA,{className:je.dropdownControlSmall,options:U,onChange:Ae=>{D(Ae.label)},value:F})]}),N.jsxs("div",{style:{textAlign:"left"},children:[N.jsxs("div",{className:je.checkboxFlex,style:{marginTop:"20px"},children:[N.jsx("input",{type:"checkbox",checked:O,onChange:Ae=>{z(Ae.target.checked)}}),N.jsx("div",{className:je.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Top bone ${O?"uses Top":"uses Low"} Vertex`})]}),N.jsxs("div",{className:je.checkboxFlex,style:{marginTop:"10px"},children:[N.jsx("input",{type:"checkbox",checked:K,onChange:Ae=>{Q(Ae.target.checked)}}),N.jsx("div",{className:je.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Bottom bone ${K?"uses Top":"uses Low"} Vertex`})]})]}),e==""?N.jsx("div",{className:je.traitInfoText+" "+je.centerAlign,style:{marginTop:"40px"},children:"Please choose a trait category in the left side menu."}):N.jsxs(N.Fragment,{children:[N.jsx("div",{className:je.traitInfoTitle+" "+je.centerAlign,style:{marginTop:"20px"},children:"Generate"}),N.jsx("div",{className:je.traitInfoText+" "+je.centerAlign,style:{margin:"0px auto 20px"},children:"( "+e+" )"}),N.jsxs("div",{className:je.simpleFlex,style:{marginTop:"0px"},children:[N.jsx("div",{className:je.actionButton,style:{margin:"0px"},onClick:()=>{ue(!1)},children:N.jsx("div",{children:"  Current "})}),N.jsx("div",{className:je.actionButton,style:{margin:"0px"},onClick:()=>{ue(!0)},children:N.jsx("div",{children:"  All "})})]})]})]})]})]})})}function lPe({selectedTrait:n,selectedVRM:e,traitGroupName:t}){const[r,i]=$.useState(""),s=o=>{o!=r?i(o):i("")};return N.jsxs("div",{children:[r=="Information"&&N.jsx(iPe,{selectedTrait:n,selectedVRM:e}),r=="LoraCreation"&&N.jsx(sPe,{selectedTrait:n,selectedVRM:e}),r=="SpriteCreation"&&N.jsx(oPe,{selectedTrait:n,selectedVRM:e}),r=="ThumbnailCreation"&&N.jsx(aPe,{selectedTrait:n,traitGroupName:t}),N.jsxs("div",{className:SB.InformationContainerPos,children:[N.jsx(ya,{title:"Tools",width:90,right:0}),N.jsx("div",{className:SB.scrollContainer,children:N.jsxs("div",{className:SB.optionsContainer,children:[N.jsx("div",{onClick:()=>{s("Information")},children:N.jsx(ol,{size:56,icon:ULe,rarity:r=="Information"?"mythic":"none"})},"Information"),N.jsx("div",{onClick:()=>{s("LoraCreation")},children:N.jsx(ol,{size:56,icon:PLe,rarity:r=="LoraCreation"?"mythic":"none"})},"LoraCreation"),N.jsx("div",{onClick:()=>{s("SpriteCreation")},children:N.jsx(ol,{size:56,icon:LLe,rarity:r=="SpriteCreation"?"mythic":"none"})},"SpriteCreation"),N.jsx("div",{onClick:()=>{s("ThumbnailCreation")},children:N.jsx(ol,{size:56,icon:DLe,rarity:r=="ThumbnailCreation"?"mythic":"none"})},"ThumbnailCreation")]})})]})]})}const za={TRAIT:0,BLEND_SHAPE:1};function APe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=$.useContext(Di),{toggleDebugMode:r,characterManager:i,animationManager:s,moveCamera:o,loraDataGenerator:a,spriteAtlasGenerator:l,thumbnailsGenerator:A,sceneElements:c}=$.useContext(Zn),[u,f]=$.useState(za.TRAIT),{playSound:h}=$.useContext($s),{isMute:p}=$.useContext(Ys),{t:d}=ye.useContext(So),g=()=>{!p&&h("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),e(mt.CREATE),r(!1)},[m,y]=$.useState(null),[w,x]=$.useState(null),[_,C]=$.useState(""),[T,b]=$.useState(null),[M,P]=$.useState({}),[Y,H]=$.useState(null),[I,v]=$.useState(""),[E,F]=$.useState(!1),[D,O]=$.useState({background:"#ffffff"}),z=()=>{!p&&h("backNextButton"),e(mt.SAVE),r(!1)},K=()=>{t(!0),y(null),i.loadRandomTraits().then(()=>{console.log("success"),_!=""&&b(i.getCurrentTraitData(_)),t(!1)}).catch(xe=>{t(!1),console.error("Error loading random traits:",xe.message)})},Q=xe=>{O({background:xe.hex})},B=xe=>{O({background:xe.hex}),i.setTraitColor(_,xe.hex)},j=async xe=>{const L=fl(xe.name),ue=URL.createObjectURL(xe);await s.loadAnimation(ue,!1,0,!0,"",L),v(s.getCurrentAnimationName())},ee=xe=>{if(F(!1),_!=""){t(!0);const L=URL.createObjectURL(xe);i.loadCustomTexture(_,L).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},U=xe=>{if(F(!1),_!=""){t(!0);const L=URL.createObjectURL(xe);i.loadCustomTrait(_,L).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},X=xe=>{var L;if(xe.id===(T==null?void 0:T.id)){((L=xe.blendshapeTraits)==null?void 0:L.length)>0&&f(za.BLEND_SHAPE);return}F(!1),t(!0),i.loadTrait(xe.traitGroup.trait,xe.id).then(()=>{var ue;if(t(!1),((ue=xe.blendshapeTraits)==null?void 0:ue.length)>0){const Ae=i.getCurrentBlendShapeTraitData(xe.traitGroup.trait);P(Object.entries(Ae).reduce((q,[J,ce])=>(q[J]=ce.id,q),{})),f(za.BLEND_SHAPE)}b(xe)})},ae=xe=>{F(!1),i.removeTrait(xe),b(null)},se=xe=>{F(!1),t(!0),i.loadRandomTrait(xe).then(()=>{t(!1),b(i.getCurrentTraitData(xe))})},de=xe=>{F(!1);const L=Array.from(xe),ue=[],Ae=q=>new Promise((J,ce)=>{var be;if(q&&q.name.toLowerCase().endsWith(".json")){const Be=new FileReader,k=`${(be=i.manifestData)==null?void 0:be.getAssetsDirectory()}/anata/_thumbnails/t_${q.name.split("_")[0]}.jpg`;console.log(k),Be.onload=function(W){try{const re=JSON.parse(W.target.result);re.thumb=k,ue.push(re),J()}catch(re){console.error("Error parsing the JSON file:",re),ce(re)}},Be.readAsText(q)}});Promise.all(L.map(Ae)).then(()=>{ue.length>0&&(y(ue),t(!0),i.loadTraitsFromNFTObject(ue[0]).then(()=>{t(!1)}))}).catch(q=>{console.error("Error processing files:",q)})},oe=async xe=>{const L=xe[0];L&&L.name.toLowerCase().endsWith(".fbx")&&j(L),L&&(L.name.toLowerCase().endsWith(".png")||L.name.toLowerCase().endsWith(".jpg"))&&ee(L),L&&L.name.toLowerCase().endsWith(".vrm")&&U(L),L&&L.name.toLowerCase().endsWith(".json")&&de(xe)},pe=xe=>{if(!p&&h("optionClick"),F(!1),_!==xe.trait){f(za.TRAIT),x(i.getTraits(xe.trait)),C(xe.trait);const L=i.getCurrentTraitData(xe.trait),ue=i.getCurrentBlendShapeTraitData(xe.trait);b(L),P(Object.entries(ue).reduce((Ae,[q,J])=>(Ae[q]=J.id,Ae),{})),H(i.getCurrentTraitVRM(xe.trait)),o({targetY:xe.cameraTarget.height,distance:xe.cameraTarget.distance})}else x(null),C(""),b(null),P({}),o({targetY:.8,distance:3.2})},_e=()=>{F(!1);var xe=document.createElement("input");xe.type="file",xe.accept=".vrm",xe.onchange=L=>{var ue=L.target.files[0];if(ue.name.endsWith(".vrm")){const Ae=URL.createObjectURL(ue);t(!0),i.loadCustomTrait(_,Ae).then(()=>{t(!1)})}},xe.click()};return N.jsxs("div",{className:tn.container,children:[N.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:N.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),N.jsx("div",{className:"sectionTitle",children:d("pageTitles.chooseAppearance")}),N.jsx(Eg,{onFilesDrop:oe}),N.jsxs("div",{className:tn.sideMenu,children:[N.jsx(ya,{title:"Appearance",left:20}),N.jsx("div",{className:tn.bottomLine}),N.jsx("div",{className:tn.scrollContainer,children:N.jsx("div",{className:tn["editor-container"],children:i.getGroupTraits().map((xe,L)=>N.jsxs("div",{className:tn.editorButton,onClick:()=>{pe(xe)},children:[N.jsx(ol,{size:56,icon:xe.fullIconSvg,rarity:_!==xe.trait?"none":"mythic"}),N.jsx("div",{className:tn.editorText,children:xe.name})]},"options_"+L))})})]}),!!w&&N.jsxs("div",{className:tn.selectorContainerPos,children:[N.jsx(ya,{title:_,width:130,left:20}),T&&u==za.TRAIT&&N.jsx("div",{className:tn.selectorColorPickerButton,onClick:()=>{F(!E)},children:N.jsx("img",{className:tn.selectorColorPickerImg,src:Qge})}),u==za.TRAIT&&!!E&&N.jsx("div",{draggable:!1,className:tn.selectorColorPickerUI,children:N.jsx(rLe,{draggable:!1,width:"200px",color:D.background,onChange:Q,onChangeComplete:B})}),N.jsx("div",{className:tn.bottomLine}),N.jsxs("div",{className:tn.scrollContainerOptions,children:[u==za.TRAIT&&N.jsxs("div",{className:tn["selector-container"],children:[N.jsx("div",{className:`${tn.selectorButton}`,onClick:()=>{se(_)},children:N.jsx(ol,{size:56,icon:kge,rarity:"none"})},"randomize-trait"),i.isTraitGroupRequired(_)?N.jsx(N.Fragment,{}):N.jsx("div",{className:`${tn.selectorButton}`,icon:iM,onClick:()=>{ae(_)},children:N.jsx(ol,{size:56,icon:iM,rarity:T==null?"mythic":"none"})},"no-trait"),w.map(xe=>{let L=xe.id===(T==null?void 0:T.id);return N.jsx("div",{className:`${tn.selectorButton}`,onClick:()=>{X(xe)},children:N.jsx(ol,{size:56,icon:xe.fullThumbnail,rarity:L?"mythic":"none"})},xe.id)})]}),u==za.BLEND_SHAPE&&N.jsx(cPe,{selectedTrait:T,onBack:()=>{f(za.TRAIT)},selectedBlendShapeTrait:M,setSelectedBlendshapeTrait:P})]}),N.jsx("div",{className:tn.uploadContainer,children:N.jsx("div",{className:tn.uploadButton,onClick:_e,children:N.jsx("div",{children:"Upload "})})})]}),N.jsx(IT,{jsonSelectionArray:m}),N.jsx(lPe,{selectedTrait:T,selectedVRM:Y,traitGroupName:_}),N.jsx(s_,{loadedAnimationName:I,randomize:K}),N.jsxs("div",{className:tn.buttonContainer,children:[N.jsx(gn,{theme:"light",text:d("callToAction.back"),size:14,className:tn.buttonLeft,onClick:g}),i.canDownload()&&N.jsx(gn,{theme:"light",text:d("callToAction.next"),size:14,className:tn.buttonRight,onClick:z})]})]})}const cPe=({selectedTrait:n,onBack:e,selectedBlendShapeTrait:t,setSelectedBlendshapeTrait:r})=>{const{characterManager:i,moveCamera:s}=$.useContext(Zn),o=i.getBlendShapeGroupTraits((n==null?void 0:n.traitGroup.trait)||"",(n==null?void 0:n.id)||""),a=l=>{if(l.id==null){const u=l.parentGroup;i.loadBlendShapeTrait((n==null?void 0:n.traitGroup.trait)||"",u.trait||"",null);return}const A=l.parentGroup;i.loadBlendShapeTrait((n==null?void 0:n.traitGroup.trait)||"",A.trait||"",(l==null?void 0:l.id)||""),s({targetY:A.cameraTarget.height,distance:A.cameraTarget.distance});const c={...t};c[A.trait||""]=l.id,r(c)};return N.jsxs("div",{className:tn["selector-container-column"],children:[N.jsx(gn,{theme:"dark",text:"Back",size:14,className:tn.buttonLeft,onClick:e}),o&&o.length>0&&o.map(l=>N.jsxs("div",{className:tn.blendshapeGroup,children:[N.jsx("div",{children:l.name}),N.jsxs("div",{className:tn["selector-container"],children:[N.jsx(IO,{src:iM,active:!t[l.trait],blendshapeID:"cancel",select:()=>a(new h8(l,{id:null}))},"empty"),l.collection.map(A=>{let c=A.id===t[l.trait];return N.jsx(IO,{src:A.fullThumbnail||"",active:c,blendshapeID:A.id,select:()=>a(A)},A.id)})]})]},l.trait))]})},IO=({active:n,blendshapeID:e,src:t,select:r})=>N.jsx("div",{className:`${tn.selectorButton}`,onClick:r,children:N.jsx(ol,{size:56,icon:t||"",rarity:n?"mythic":"none"})},e),uPe="_InformationContainerPos_rgqwy_1",fPe="_traitInfoTitle_rgqwy_13",hPe="_traitInfoText_rgqwy_21",dPe="_flexSelect_rgqwy_30",pPe="_scrollContainer_rgqwy_65",mPe="_checked_rgqwy_90",gPe="_checkmark_rgqwy_94",vPe="_checkboxHolder_rgqwy_107",yPe="_buttonContainer_rgqwy_114",wPe="_buttonLeft_rgqwy_123",xPe="_buttonRight_rgqwy_127",_Pe="_buttonCenter_rgqwy_131",fi={InformationContainerPos:uPe,traitInfoTitle:fPe,traitInfoText:hPe,flexSelect:dPe,"arrow-button":"_arrow-button_rgqwy_37","left-button":"_left-button_rgqwy_51","right-button":"_right-button_rgqwy_58",scrollContainer:pPe,"custom-checkbox":"_custom-checkbox_rgqwy_76","checkbox-container":"_checkbox-container_rgqwy_81",checked:mPe,checkmark:gPe,checkboxHolder:vPe,buttonContainer:yPe,buttonLeft:wPe,buttonRight:xPe,buttonCenter:_Pe},bPe="_InformationContainerPos_11mqa_2",BPe="_scrollContainer_11mqa_16",EPe="_traitInfoTitle_11mqa_28",CPe="_traitInfoText_11mqa_38",MPe="_flexSelect_11mqa_66",SPe="_checked_11mqa_124",TPe="_checkmark_11mqa_128",IPe="_checkboxHolder_11mqa_141",Vn={InformationContainerPos:bPe,scrollContainer:BPe,traitInfoTitle:EPe,traitInfoText:CPe,"input-box":"_input-box_11mqa_47",flexSelect:MPe,"arrow-button":"_arrow-button_11mqa_76","left-button":"_left-button_11mqa_91","right-button":"_right-button_11mqa_98","anim-button":"_anim-button_11mqa_105","custom-checkbox":"_custom-checkbox_11mqa_110","checkbox-container":"_checkbox-container_11mqa_115",checked:SPe,checkmark:TPe,checkboxHolder:IPe};function _2({model:n,name:e,files:t,index:r,nextVrm:i,previousVrm:s}){const{characterManager:o}=$.useContext(Zn),[a,l]=ye.useState(0),[A,c]=ye.useState(0),[u,f]=ye.useState(0),[h,p]=ye.useState(0),[d,g]=ye.useState(0),[m,y]=ye.useState(0),[w,x]=ye.useState(0),[_,C]=ye.useState(0),[T,b]=ye.useState(0),[M,P]=ye.useState(0);return ye.useEffect(()=>{if(n!=null){const Y=Gh(n,"Mesh"),H=Gh(n,"SkinnedMesh");l(Y.length),c(H.length);const I=Y.concat(H),{stdMats:v,stdCutoutpMats:E,stdTranspMats:F,mToonMats:D,mToonCutoutMats:O,mToonTranspMats:z}=Cfe(I);f(v.length),p(F.length),g(E.length),y(D.length),x(z.length),C(O.length);const{triangles:K,bones:Q}=o.getBoneTriangleCount();b(K),P(Q)}},[n]),n!=null?N.jsx("div",{children:N.jsxs("div",{className:Vn.InformationContainerPos,children:[N.jsx(ya,{title:"Model Information",width:180,right:20}),N.jsxs("div",{className:Vn.scrollContainer,children:[N.jsxs("div",{className:Vn.flexSelect,children:[(t==null?void 0:t.length)>1?N.jsx("div",{className:`${Vn["arrow-button"]} ${Vn["left-button"]}`,onClick:s}):N.jsx(N.Fragment,{}),e&&N.jsx("div",{style:{textAlign:"center"},children:N.jsx("div",{className:Vn.traitInfoTitle,style:{margin:"auto",fontSize:"14px",width:"200px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:e})}),(t==null?void 0:t.length)>1?N.jsx("div",{className:`${Vn["arrow-button"]} ${Vn["right-button"]}`,onClick:i}):N.jsx(N.Fragment,{})]}),N.jsx("div",{className:Vn.traitInfoTitle,children:"Geometry info:"}),N.jsxs("div",{className:Vn.traitInfoText,children:["Meshes: ",a]}),N.jsxs("div",{className:Vn.traitInfoText,children:["SkinnedMeshes: ",A]}),N.jsxs("div",{className:Vn.traitInfoText,children:["Triangles: ",T]}),N.jsxs("div",{className:Vn.traitInfoText,children:["Bones: ",M]}),N.jsx("div",{className:Vn.traitInfoTitle,children:"Standard Material Count:"}),N.jsxs("div",{className:Vn.traitInfoText,children:["opaque: ",u]}),N.jsxs("div",{className:Vn.traitInfoText,children:["cutout: ",d]}),N.jsxs("div",{className:Vn.traitInfoText,children:["transparent: ",h]}),N.jsx("div",{className:Vn.traitInfoTitle,children:"MToon Material Count:"}),N.jsxs("div",{className:Vn.traitInfoText,children:["opaque: ",m]}),N.jsxs("div",{className:Vn.traitInfoText,children:["cutout: ",_]}),N.jsxs("div",{className:Vn.traitInfoText,children:["transparent: ",w]})]})]})}):N.jsx(N.Fragment,{})}const RPe="_InformationContainerPos_b0msk_1",FPe="_traitInfoTitle_b0msk_13",UPe="_traitInfoText_b0msk_22",LPe="_flexSelect_b0msk_33",PPe="_scrollContainer_b0msk_68",DPe="_checked_b0msk_93",OPe="_checkmark_b0msk_97",NPe="_checkboxHolder_b0msk_110",At={InformationContainerPos:RPe,traitInfoTitle:FPe,traitInfoText:UPe,flexSelect:LPe,"arrow-button":"_arrow-button_b0msk_40","left-button":"_left-button_b0msk_54","right-button":"_right-button_b0msk_61",scrollContainer:PPe,"custom-checkbox":"_custom-checkbox_b0msk_79","checkbox-container":"_checkbox-container_b0msk_84",checked:DPe,checkmark:OPe,checkboxHolder:NPe};function __({showDropToDownload:n,showCreateAtlas:e,mergeMenuTitle:t}){const[r,i]=ye.useState(Oe.mergeOptions_atlas_std_size||6),[s,o]=ye.useState(Oe.mergeOptions_atlas_std_transp_size||6),[a,l]=ye.useState(Oe.mergeOptions_atlas_mtoon_size||6),[A,c]=ye.useState(Oe.mergeOptions_atlas_mtoon_transp_size||6),[u,f]=ye.useState(Oe.mergeOptions_sel_option||0),[h,p]=ye.useState(Oe.mergeOptions_two_sided_mat||!1),[d]=ye.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[g,m]=ye.useState(Oe.mergeOptions_download_vrm==null?!0:Oe.mergeOptions_download_vrm),[y,w]=ye.useState(Oe.mergeOptions_download_vrm_preview==null?!0:Oe.mergeOptions_download_vrm_preview),[x,_]=ye.useState(Oe.mergeOptions_drop_download||!1),[C,T]=ye.useState(Oe.merge_options_ktx_compression||!1),[b,M]=ye.useState(Oe.mergeOptions_create_atlas==null?!0:Oe.mergeOptions_create_atlas),[P,Y]=ye.useState(Oe.mergeOptions_download_lora==null?!0:Oe.mergeOptions_download_lora),[H,I]=ye.useState(Oe.mergeOptions_download_sprites==null?!0:Oe.mergeOptions_download_sprites),v=U=>{_(U.target.checked),Oe.mergeOptions_drop_download=U.target.checked},E=U=>{p(U.target.checked),Oe.mergeOptions_two_sided_mat=U.target.checked},F=U=>{T(U.target.checked),Oe.merge_options_ktx_compression=U.target.checked},D=U=>{M(U.target.checked),Oe.mergeOptions_create_atlas=U.target.checked},O=U=>{m(U.target.checked),Oe.mergeOptions_download_vrm=U.target.checked},z=U=>{w(U.target.checked),Oe.mergeOptions_download_vrm_preview=U.target.checked},K=U=>{Y(U.target.checked),Oe.mergeOptions_download_lora=U.target.checked},Q=U=>{I(U.target.checked),Oe.mergeOptions_download_sprites=U.target.checked},B=()=>{let U=u;u<=0?U=d.length-1:U-=1,f(U),Oe.mergeOptions_sel_option=U},j=()=>{let U=u;u>=d.length-1?U=0:U+=1,f(U),Oe.mergeOptions_sel_option=U},ee=async(U,X)=>{let ae=parseInt(U.target.value);ae>8?ae=8:ae<0&&(ae=0),(de=>{switch(X){case"standard opaque":i(de),Oe.mergeOptions_atlas_std_size=de;break;case"standard transparent":o(de),Oe.mergeOptions_atlas_std_transp_size=de;break;case"mtoon opaque":l(de),Oe.mergeOptions_atlas_mtoon_size=de;break;case"mtoon transparent":c(de),Oe.mergeOptions_atlas_mtoon_transp_size=de;break}})(ae)};return N.jsxs("div",{className:At.InformationContainerPos,children:[N.jsx(ya,{title:t,width:180,left:20}),N.jsxs("div",{className:At.scrollContainer,children:[N.jsx("div",{className:At.traitInfoTitle,children:"Download Options"}),N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:g,onChange:O}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Download VRM"]})})}),N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:y,onChange:z}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Download VRM Preview"]})})}),N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:P,onChange:K}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Download Lora Data"]})})}),N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:H,onChange:Q}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Download Sprites Data"]})})}),g&&N.jsxs(N.Fragment,{children:[e&&N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:b,onChange:D}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Create Atlas"]})})}),(e==!1||b)&&N.jsxs(N.Fragment,{children:[N.jsx("br",{}),N.jsx("div",{className:At.traitInfoTitle,children:"Merge Atlas Type"}),N.jsx("br",{}),N.jsxs("div",{className:At.flexSelect,children:[N.jsx("div",{className:`${At["arrow-button"]} ${At["left-button"]}`,onClick:B}),N.jsx("div",{className:At.traitInfoText,style:{marginBottom:"0"},children:d[u]}),N.jsx("div",{className:`${At["arrow-button"]} ${At["right-button"]}`,onClick:j})]}),N.jsx("br",{}),N.jsx("br",{}),(u===0||u==2)&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:At.traitInfoTitle,children:"Standard Atlas Size"}),N.jsx("br",{}),N.jsxs("div",{className:At.traitInfoText,children:["Opaque: ",bn(r)+" x "+bn(r)]}),N.jsx(Xf,{value:r,onChange:U=>ee(U,"standard opaque"),min:1,max:8,step:1}),N.jsx("br",{}),N.jsxs("div",{className:At.traitInfoText,children:["Transparent: ",bn(s)+" x "+bn(s)]}),N.jsx(Xf,{value:s,onChange:U=>ee(U,"standard transparent"),min:1,max:8,step:1}),N.jsx("br",{})," ",N.jsx("br",{})]}),(u===1||u==2)&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:At.traitInfoTitle,children:"MToon Atlas Size"}),N.jsx("br",{}),N.jsxs("div",{className:At.traitInfoText,children:["Opaque: ",bn(a)+" x "+bn(a)]}),N.jsx(Xf,{value:a,onChange:U=>ee(U,"mtoon opaque"),min:1,max:8,step:1}),N.jsx("br",{}),N.jsxs("div",{className:At.traitInfoText,children:["Transparent: ",bn(A)+" x "+bn(A)]}),N.jsx(Xf,{value:A,onChange:U=>ee(U,"mtoon transparent"),min:1,max:8,step:1}),N.jsx("br",{})," ",N.jsx("br",{})]}),N.jsx("div",{className:At.traitInfoTitle,children:"Options"}),N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:h,onChange:E}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Two Sided Material"]})}),n&&N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:x,onChange:v}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"Drag Drop - Download"]})})}),N.jsx(N.Fragment,{children:N.jsx("div",{className:At.traitInfoText,children:N.jsxs("div",{className:At.checkboxHolder,children:[N.jsx("div",{}),N.jsxs("label",{className:At["custom-checkbox"],children:[N.jsx("input",{type:"checkbox",checked:C,onChange:F}),N.jsx("div",{className:At["checkbox-container"]})]}),N.jsx("div",{}),N.jsx("div",{}),"KTX Compression"]})})})]})]})]})]})}function kPe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=$.useContext(Di),{manifest:r,toggleDebugMode:i,characterManager:s,animationManager:o,loraDataGenerator:a,spriteAtlasGenerator:l,sceneElements:A}=$.useContext(Zn),[c,u]=ye.useState(null),[f,h]=ye.useState(""),[p,d]=$.useState(""),{playSound:g}=$.useContext($s),{isMute:m}=$.useContext(Ys),[y,w]=$.useState(null),x=()=>{!m&&g("backNextButton"),s.removeCurrentCharacter(),s.removeCurrentManifest(),i(!1),e(mt.LANDING)},_=()=>{const I=Oe.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:bn(Oe.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:bn(Oe.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:bn(Oe.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:bn(Oe.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:I===0||I==2,exportMtoonAtlas:I===1||I==2,ktxCompression:Oe.merge_options_ktx_compression||!1,twoSidedMaterial:Oe.mergeOptions_two_sided_mat||!1}},C=(I,v=!1)=>{console.log(v),(async()=>{await s.loadTraitsFromNFTObject(y[I]),(Oe.mergeOptions_download_vrm==null?!0:Oe.mergeOptions_download_vrm)&&await s.downloadVRM(y[I].name,_());const D=new ld,O=A.parent;O.remove(A);const z=Oe.mergeOptions_download_lora==null?!0:Oe.mergeOptions_download_lora;if(z===!0){const Q=r.loras.map(async B=>a.createLoraData(B,D));await Promise.all(Q)}const K=Oe.mergeOptions_download_sprites==null?!0:Oe.mergeOptions_download_sprites;if(K===!0){const Q=r.sprites.map(async B=>l.createSpriteAtlas(B,D));await Promise.all(Q)}(z===!0||K===!0)&&D.saveZip(y[I].name),O.add(A),I<y.length-1?C(I+1):t(!1)})()},T=()=>{t(!0),C(0,!0)},{t:b}=ye.useContext(So),M=async I=>{if(s.getCurrentCharacterModel()){const E=fl(I.name),F=URL.createObjectURL(I);await o.loadAnimation(F,!1,0,!0,"",E),d(o.getCurrentAnimationName()),URL.revokeObjectURL(F)}else console.warn("Please load a vrm model to test animations.")},P=async I=>{const v=URL.createObjectURL(I);await s.loadOptimizerCharacter(v),URL.revokeObjectURL(v);const E=fl(I.name);h(E),u(s.getCurrentCharacterModel())},Y=I=>{const v=Array.from(I),E=[],F=D=>new Promise((O,z)=>{var K;if(D&&D.name.toLowerCase().endsWith(".json")){const Q=new FileReader,B=`${(K=s.manifestData)==null?void 0:K.getAssetsDirectory()}/anata/_thumbnails/t_${D.name.split("_")[0]}.jpg`;Q.onload=function(j){try{const ee=JSON.parse(j.target.result);ee.thumb=B,E.push(ee),O()}catch(ee){console.error("Error parsing the JSON file:",ee),z(ee)}},Q.readAsText(D)}});Promise.all(v.map(F)).then(()=>{E.length>0&&(w(E),t(!0),s.loadTraitsFromNFTObject(E[0]).then(()=>{t(!1)}))}).catch(D=>{console.error("Error processing files:",D)})},H=async I=>{const v=I[0];console.log("anim"),v&&v.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),M(v)),v&&v.name.toLowerCase().endsWith(".vrm")&&P(v),v&&v.name.toLowerCase().endsWith(".json")&&Y(I)};return N.jsxs("div",{className:fi.container,children:[N.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:N.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),N.jsx("div",{className:"sectionTitle",children:"Batch Download"}),N.jsx(Eg,{onFilesDrop:H}),N.jsx(__,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),N.jsx(_2,{model:c}),N.jsx(IT,{jsonSelectionArray:y}),N.jsx(s_,{loadedAnimationName:p}),N.jsxs("div",{className:fi.buttonContainer,children:[N.jsx(gn,{theme:"light",text:b("callToAction.back"),size:14,className:fi.buttonLeft,onClick:x}),(y==null?void 0:y.length)==1&&N.jsx(gn,{theme:"light",text:"Download",size:14,className:fi.buttonRight,onClick:T}),(y==null?void 0:y.length)>1&&N.jsx(gn,{theme:"light",text:"Download All",size:14,className:fi.buttonRight,onClick:T})]})]})}const Pg="abi/5.7.0",Dt=new ge(Pg),Jc={};let RO={calldata:!0,memory:!0,storage:!0},QPe={calldata:!0,memory:!0};function Rv(n,e){if(n==="bytes"||n==="string"){if(RO[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&QPe[e])return!0;return(RO[e]||e==="payable")&&Dt.throwArgumentError("invalid modifier","name",e),!1}function HPe(n,e){let t=n;function r(a){Dt.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let l=n[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Bf(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Rv(o.type,o.name)&&(o.name=""),o.type=Bf(o.type);let A=o;o=o.parent,o||r(a),delete A.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),Rv(o.type,o.name)&&(o.name=""),o.type=Bf(o.type);let c=i(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Bf(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):Rv(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:r(a)}}return o.parent&&Dt.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):Rv(o.type,o.name)&&(o.name=""),s.type=Bf(s.type),s}function wy(n,e){for(let t in e)Ue(n,t,e[t])}const Gt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),zPe=new RegExp(/^(.*)\[([0-9]*)\]$/);class br{constructor(e,t){e!==Jc&&Dt.throwError("use fromString",ge.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),wy(this,t);let r=this.type.match(zPe);r?wy(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:br.fromObject({type:r[1],components:this.components}),baseType:"array"}):wy(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Gt.sighash),Gt[e]||Dt.throwArgumentError("invalid format type","format",e),e===Gt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Gt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Gt.full?", ":",")+")"):t+=this.type,e!==Gt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Gt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?br.fromString(e,t):br.fromObject(e)}static fromObject(e){return br.isParamType(e)?e:new br(Jc,{name:e.name||null,type:Bf(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(br.fromObject):null})}static fromString(e,t){function r(i){return br.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(HPe(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function qm(n,e){return VPe(n).map(t=>br.fromString(t,e))}class al{constructor(e,t){e!==Jc&&Dt.throwError("use a static from method",ge.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),wy(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return al.isFragment(e)?e:typeof e=="string"?al.fromString(e):al.fromObject(e)}static fromObject(e){if(al.isFragment(e))return e;switch(e.type){case"function":return qo.fromObject(e);case"event":return el.fromObject(e);case"constructor":return Jo.fromObject(e);case"error":return sA.fromObject(e);case"fallback":case"receive":return null}return Dt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?el.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?qo.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Jo.fromString(e.trim()):e.split(" ")[0]==="error"?sA.fromString(e.substring(5).trim()):Dt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class el extends al{format(e){if(e||(e=Gt.sighash),Gt[e]||Dt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",e!==Gt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?el.fromString(e):el.fromObject(e)}static fromObject(e){if(el.isEventFragment(e))return e;e.type!=="event"&&Dt.throwArgumentError("invalid event object","value",e);const t={name:eg(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(br.fromObject):[],type:"event"};return new el(Jc,t)}static fromString(e){let t=e.match(tg);t||Dt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Dt.warn("unknown modifier: "+i)}}),el.fromObject({name:t[1].trim(),anonymous:r,inputs:qm(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Kz(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Dt.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Dt.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=Ge.from(t[1]),t[0]):n}function Yz(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function $z(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Dt.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Dt.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Dt.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Dt.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Dt.throwArgumentError("unable to determine stateMutability","value",n),e}class Jo extends al{format(e){if(e||(e=Gt.sighash),Gt[e]||Dt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Gt.sighash&&Dt.throwError("cannot format a constructor for sighash",ge.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Jo.fromString(e):Jo.fromObject(e)}static fromObject(e){if(Jo.isConstructorFragment(e))return e;e.type!=="constructor"&&Dt.throwArgumentError("invalid constructor object","value",e);let t=$z(e);t.constant&&Dt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(br.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ge.from(e.gas):null};return new Jo(Jc,r)}static fromString(e){let t={type:"constructor"};e=Kz(e,t);let r=e.match(tg);return(!r||r[1].trim()!=="constructor")&&Dt.throwArgumentError("invalid constructor string","value",e),t.inputs=qm(r[2].trim(),!1),Yz(r[3].trim(),t),Jo.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class qo extends Jo{format(e){if(e||(e=Gt.sighash),Gt[e]||Dt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",e!==Gt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?qo.fromString(e):qo.fromObject(e)}static fromObject(e){if(qo.isFunctionFragment(e))return e;e.type!=="function"&&Dt.throwArgumentError("invalid function object","value",e);let t=$z(e);const r={type:e.type,name:eg(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(br.fromObject):[],outputs:e.outputs?e.outputs.map(br.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Ge.from(e.gas):null};return new qo(Jc,r)}static fromString(e){let t={type:"function"};e=Kz(e,t);let r=e.split(" returns ");r.length>2&&Dt.throwArgumentError("invalid function string","value",e);let i=r[0].match(tg);if(i||Dt.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&eg(t.name),t.inputs=qm(i[2],!1),Yz(i[3].trim(),t),r.length>1){let s=r[1].match(tg);(s[1].trim()!=""||s[3].trim()!="")&&Dt.throwArgumentError("unexpected tokens","value",e),t.outputs=qm(s[2],!1)}else t.outputs=[];return qo.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function FO(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Dt.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class sA extends al{format(e){if(e||(e=Gt.sighash),Gt[e]||Dt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?sA.fromString(e):sA.fromObject(e)}static fromObject(e){if(sA.isErrorFragment(e))return e;e.type!=="error"&&Dt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:eg(e.name),inputs:e.inputs?e.inputs.map(br.fromObject):[]};return FO(new sA(Jc,t))}static fromString(e){let t={type:"error"},r=e.match(tg);return r||Dt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&eg(t.name),t.inputs=qm(r[2],!1),FO(sA.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Bf(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const GPe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function eg(n){return(!n||!n.match(GPe))&&Dt.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const tg=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function VPe(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Dt.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const b2=new ge(Pg);function jPe(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class Fl{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){b2.throwArgumentError(e,this.localName,t)}}class gM{constructor(e){Ue(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Bi(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(es(e._data))}writeBytes(e){let t=at(e);const r=t.length%this.wordSize;return r&&(t=es([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=at(Ge.from(e));return t.length>this.wordSize&&b2.throwError("value out-of-bounds",ge.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=es([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class tx{constructor(e,t,r,i){Ue(this,"_data",at(e)),Ue(this,"wordSize",t||32),Ue(this,"_coerceFunc",r),Ue(this,"allowLoose",i),this._offset=0}get data(){return nt(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):tx.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:b2.throwError("data out-of-bounds",ge.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new tx(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Ge.from(this.readBytes(this.wordSize))}}class WPe extends Fl{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Nr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return Nr(Qn(e.readValue().toHexString(),20))}}class KPe extends Fl{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Zf=new ge(Pg);function Xz(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(A=>{const c=A.localName;return c||Zf.throwError("cannot encode object for signature with missing names",ge.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]&&Zf.throwError("cannot encode object for signature with duplicate names",ge.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]=!0,t[c]})}else Zf.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Zf.throwArgumentError("types/value length mismatch","tuple",t);let i=new gM(n.wordSize),s=new gM(n.wordSize),o=[];e.forEach((l,A)=>{let c=r[A];if(l.dynamic){let u=s.length;l.encode(s,c);let f=i.writeUpdatableValue();o.push(h=>{f(h+u)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function Zz(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(A){if(A.code===ge.errors.BUFFER_OVERRUN)throw A;o=A,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===ge.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class YPe extends Fl{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Zf.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return Xz(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Zf.throwError("insufficient data length",ge.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new KPe(this.coder));return e.coerce(this.name,Zz(e,r))}}class $Pe extends Fl{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Jz extends Fl{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=at(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class XPe extends Jz{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,nt(super.decode(e)))}}class ZPe extends Fl{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=at(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,nt(e.readBytes(this.size)))}}class JPe extends Fl{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class qPe extends Fl{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Ge.from(t),i=CV.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(EV).mul(BV)))&&this._throwError("value out-of-bounds",t)}else(r.lt(mN)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class e3e extends Jz{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,ca(t))}decode(e){return ag(super.decode(e))}}class Fv extends Fl{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return Xz(e,this.coders,t)}decode(e){return e.coerce(this.name,Zz(e,this.coders))}}const Uv=new ge(Pg),t3e=new RegExp(/^bytes([0-9]*)$/),n3e=new RegExp(/^(u?int)([0-9]*)$/);class r3e{constructor(e){Ue(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new WPe(e.name);case"bool":return new $Pe(e.name);case"string":return new e3e(e.name);case"bytes":return new XPe(e.name);case"array":return new YPe(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Fv((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new JPe(e.name)}let t=e.type.match(n3e);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&Uv.throwArgumentError("invalid "+t[1]+" bit length","param",e),new qPe(r/8,t[1]==="int",e.name)}if(t=e.type.match(t3e),t){let r=parseInt(t[1]);return(r===0||r>32)&&Uv.throwArgumentError("invalid bytes length","param",e),new ZPe(r,e.name)}return Uv.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new tx(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new gM(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(br.from(i)));return new Fv(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Uv.throwError("types/values length mismatch",ge.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(br.from(o))),i=new Fv(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(br.from(o)));return new Fv(i,"_").decode(this._getReader(at(t),r))}}const i3e=new r3e,Mn=new ge(Pg);class s3e extends sg{}class o3e extends sg{}class a3e extends sg{}class vM extends sg{static isIndexed(e){return!!(e&&e._isIndexed)}}const l3e={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function UO(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class LO{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Ue(this,"fragments",t.map(r=>al.from(r)).filter(r=>r!=null)),Ue(this,"_abiCoder",ts(new.target,"getAbiCoder")()),Ue(this,"functions",{}),Ue(this,"errors",{}),Ue(this,"events",{}),Ue(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){Mn.warn("duplicate definition - constructor");return}Ue(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){Mn.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Ue(this,"deploy",Jo.from({payable:!1,type:"constructor"})),Ue(this,"_isInterface",!0)}format(e){e||(e=Gt.full),e===Gt.sighash&&Mn.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Gt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return i3e}static getAddress(e){return Nr(e)}static getSighash(e){return jr(Ef(e.format()),0,4)}static getEventTopic(e){return Ef(e.format())}getFunction(e){if(Et(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];Mn.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?Mn.throwArgumentError("no matching function","name",r):i.length>1&&Mn.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[qo.fromString(e).format()];return t||Mn.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Et(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];Mn.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?Mn.throwArgumentError("no matching event","name",r):i.length>1&&Mn.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[el.fromString(e).format()];return t||Mn.throwArgumentError("no matching event","signature",e),t}getError(e){if(Et(e)){const r=ts(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}Mn.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?Mn.throwArgumentError("no matching error","name",r):i.length>1&&Mn.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[qo.fromString(e).format()];return t||Mn.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return ts(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),ts(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=at(t);return nt(r.slice(0,4))!==this.getSighash(e)&&Mn.throwArgumentError(`data signature does not match error ${e.name}.`,"data",nt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),nt(es([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=at(t);return nt(r.slice(0,4))!==this.getSighash(e)&&Mn.throwArgumentError(`data signature does not match function ${e.name}.`,"data",nt(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),nt(es([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=at(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const A=nt(r.slice(0,4)),c=l3e[A];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,l=c.signature,c.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(A);o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.format()}catch{}break}}return Mn.throwError("call revert exception"+s,ge.errors.CALL_EXCEPTION,{method:e.format(),data:nt(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),nt(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Mn.throwError("too many arguments for "+e.format(),ge.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Ef(o):s.type==="bytes"?sr(nt(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=Ge.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Qn(nt(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Mn.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Mn.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Mn.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push(Ef(l));else if(o.type==="bytes")r.push(sr(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let f=this.getEventTopic(e);(!Et(r[0],32)||r[0].toLowerCase()!==f)&&Mn.throwError("fragment/topic mismatch",ge.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((f,h)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(i.push(br.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(i.push(f),o.push(!1)):(s.push(f),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,es(r)):null,l=this._abiCoder.decode(s,t,!0),A=[],c=0,u=0;e.inputs.forEach((f,h)=>{if(f.indexed)if(a==null)A[h]=new vM({_isIndexed:!0,hash:null});else if(o[h])A[h]=new vM({_isIndexed:!0,hash:a[u++]});else try{A[h]=a[u++]}catch(p){A[h]=p}else try{A[h]=l[c++]}catch(p){A[h]=p}if(f.name&&A[f.name]==null){const p=A[h];p instanceof Error?Object.defineProperty(A,f.name,{enumerable:!0,get:()=>{throw UO(`property ${JSON.stringify(f.name)}`,p)}}):A[f.name]=p}});for(let f=0;f<A.length;f++){const h=A[f];h instanceof Error&&Object.defineProperty(A,f,{enumerable:!0,get:()=>{throw UO(`index ${f}`,h)}})}return Object.freeze(A)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new o3e({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Ge.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new s3e({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=nt(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new a3e({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const A3e="contracts/5.7.0";var qc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Kn=new ge(A3e);function nx(n,e){return qc(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Kn.throwArgumentError("invalid address or ENS name","name",t);try{return Nr(t)}catch{}n||Kn.throwError("a provider or signer is needed to resolve ENS names",ge.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Kn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function xy(n,e,t){return qc(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>xy(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield nx(n,e):t.type==="tuple"?yield xy(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>xy(n,r,t.arrayChildren))):Promise.reject(Kn.makeError("invalid value for array",ge.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function b_(n,e,t){return qc(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=En(t.pop())),Kn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=tr({override:nx(n.signer,r.from),signer:n.signer.getAddress()}).then(A=>qc(this,void 0,void 0,function*(){return Nr(A.signer)!==A.override&&Kn.throwError("Contract with a Signer cannot override from",ge.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),A.override})):r.from=n.signer.getAddress():r.from&&(r.from=nx(n.provider,r.from));const i=yield tr({args:xy(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:tr(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=Ge.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=Ge.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=Ge.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=Ge.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=Ge.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=tu(a.accessList)),o.gasLimit==null&&e.gas!=null){let A=21e3;const c=at(s);for(let u=0;u<c.length;u++)A+=4,c[u]&&(A+=64);o.gasLimit=Ge.from(e.gas).add(A)}if(a.value){const A=Ge.from(a.value);!A.isZero()&&!e.payable&&Kn.throwError("non-payable method cannot override value",ge.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=A}a.customData&&(o.customData=En(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(A=>r[A]!=null);return l.length&&Kn.throwError(`cannot override ${l.map(A=>JSON.stringify(A)).join(",")}`,ge.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function c3e(n,e){return function(...t){return b_(n,e,t)}}function u3e(n,e){const t=n.signer||n.provider;return function(...r){return qc(this,void 0,void 0,function*(){t||Kn.throwError("estimate require a provider or signer",ge.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield b_(n,e,r);return yield t.estimateGas(i)})}}function f3e(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=is(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,A)=>n.interface.decodeEventLog(a.eventFragment,l,A),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function qz(n,e,t){const r=n.signer||n.provider;return function(...i){return qc(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=En(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield b_(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===ge.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function h3e(n,e){return function(...t){return qc(this,void 0,void 0,function*(){n.signer||Kn.throwError("sending a transaction requires a signer",ge.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield b_(n,e,t),i=yield n.signer.sendTransaction(r);return f3e(n,i),i})}}function PO(n,e,t){return e.constant?qz(n,e,t):h3e(n,e)}function eG(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class ng{constructor(e,t){Ue(this,"tag",e),Ue(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class d3e extends ng{constructor(){super("error",null)}}class DO extends ng{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Kn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(eG(s),s),Ue(this,"address",e),Ue(this,"interface",t),Ue(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=jPe(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class OO extends ng{constructor(e,t){super("*",{address:e}),Ue(this,"address",e),Ue(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class p3e{constructor(e,t,r){Ue(this,"interface",ts(new.target,"getInterface")(t)),r==null?(Ue(this,"provider",null),Ue(this,"signer",null)):Ag.isSigner(r)?(Ue(this,"provider",r.provider||null),Ue(this,"signer",r)):og.isProvider(r)?(Ue(this,"provider",r),Ue(this,"signer",null)):Kn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Ue(this,"callStatic",{}),Ue(this,"estimateGas",{}),Ue(this,"functions",{}),Ue(this,"populateTransaction",{}),Ue(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];Ue(this.filters,a,(...A)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,A)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?Ue(this.filters,a,this.filters[l[0]]):Kn.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(Ue(this,"_runningEvents",{}),Ue(this,"_wrappedEmits",{}),e==null&&Kn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ue(this,"address",e),this.provider)Ue(this,"resolvedAddress",nx(this.provider,e));else try{Ue(this,"resolvedAddress",Promise.resolve(Nr(e)))}catch{Kn.throwError("provider is required to use ENS name as contract address",ge.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Kn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&Ue(this,o,PO(this,a,!0)),this.functions[o]==null&&Ue(this.functions,o,PO(this,a,!1)),this.callStatic[o]==null&&Ue(this.callStatic,o,qz(this,a,!0)),this.populateTransaction[o]==null&&Ue(this.populateTransaction,o,c3e(this,a)),this.estimateGas[o]==null&&Ue(this.estimateGas,o,u3e(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&Ue(this,o,this[l])}catch{}this.functions[o]==null&&Ue(this.functions,o,this.functions[l]),this.callStatic[o]==null&&Ue(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&Ue(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&Ue(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return IN(e)}static getInterface(e){return LO.isInterface(e)?e:new LO(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Kn.throwError("contract not deployed",ge.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Kn.throwError("sending a transactions require a signer",ge.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=En(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Kn.throwError("cannot override "+r,ge.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new kM(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ue(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return vM.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new d3e);if(e==="event")return this._normalizeRunningEvent(new ng("event",null));if(e==="*")return this._normalizeRunningEvent(new OO(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new DO(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new DO(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new ng(eG(t),t))}return this._normalizeRunningEvent(new OO(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=is(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Kn.throwError("events require a provider or a signer with a provider",ge.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=En(i.filter);return typeof t=="string"&&Et(t,32)?(r!=null&&Kn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class B_ extends p3e{}const m3e="0x543D43F390b7d681513045e8a85707438c463d80",rx={owner:"0x634B0510C5062CFf8009eAAc2435eB93bc4764ad",address:"0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",abi:[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mintToken",outputs:[],stateMutability:"payable",type:"function"}]},NO={address:"0x0000000000000aF8FE6E4DE40F4804C90fA8Ea8F",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressMismatch",type:"error"},{inputs:[],name:"AlreadyProxied",type:"error"},{inputs:[],name:"ColdAddressCannotBeTheSameAsHot",type:"error"},{inputs:[],name:"ColdIsAddressZero",type:"error"},{inputs:[],name:"ColdWalletCannotInteractUseHot",type:"error"},{inputs:[],name:"DeliveryCannotBeTheZeroAddress",type:"error"},{inputs:[],name:"DeliveryIsAddressZero",type:"error"},{inputs:[],name:"EthWithdrawFailed",type:"error"},{inputs:[],name:"IncorrectProxyRegisterFee",type:"error"},{inputs:[],name:"MigrationIsAllowedOnceOnly",type:"error"},{inputs:[],name:"NoPaymentPendingForAddress",type:"error"},{inputs:[],name:"NoRecordFoundForAddress",type:"error"},{inputs:[],name:"OnlyHotAddressCanChangeAddress",type:"error"},{inputs:[],name:"ProxyRegisterFeeRequired",type:"error"},{inputs:[],name:"RegisterAddressLocked",type:"error"},{inputs:[],name:"RewardRateIsLocked",type:"error"},{inputs:[],name:"UnknownAmount",type:"error"},{inputs:[],name:"UnrecognisedEPSAPIAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!0,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"address",name:"oldDelivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"DeliveryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ensReverseRegistrarAddress",type:"address"}],name:"ENSReverseRegistrarSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"erc20",type:"address"},{indexed:!1,internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"ERC20FeeUpdated",type:"event"},{anonymous:!1,inputs:[],name:"MigrationComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"NominationAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"NominationMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"ProxyRecordLive",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IEPSProxyRegister.Participant",name:"initiator",type:"uint8"},{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"RecordDeleted",type:"event"},{anonymous:!1,inputs:[],name:"RewardRateLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint96",name:"rewardRate",type:"uint96"}],name:"RewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newToken",type:"address"}],name:"RewardTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"acceptNomination",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"activeEthAddresses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"bool",name:"checkingHot_",type:"bool"}],name:"addressIsAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"beneficiaryBalance",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"id_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf1155",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf20",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryOf",outputs:[{internalType:"address",name:"beneficiary_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"coldToHot",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"provider_",type:"uint256"}],name:"deleteRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deletionNominalEth",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ensReverseRegistrar",outputs:[{internalType:"contract ENSReverseRegistrar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"epsAPIBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegister",outputs:[{internalType:"contract IERC1155DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegister",outputs:[{internalType:"contract IERC20DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20PerTransactionFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegister",outputs:[{internalType:"contract IERC721DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses1155",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses20",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses721",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAllAddresses",outputs:[{internalType:"address[]",name:"erc721Addresses_",type:"address[]"},{internalType:"address[]",name:"erc1155Addresses_",type:"address[]"},{internalType:"address[]",name:"erc20Addresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receivedAddress",type:"address"}],name:"getColdAndDeliveryAddresses",outputs:[{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"bool",name:"isProxied",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"getProxyRecordForAddress",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"getProxyRecordForCold",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"getProxyRecordForHot",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hotToRecord",outputs:[{internalType:"uint64",name:"provider",type:"uint64"},{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"bool",name:"feePaid",type:"bool"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"}],name:"isValidAddresses",outputs:[],stateMutability:"pure",type:"function"},{inputs:[],name:"lockERC1155DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC20DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC721DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],internalType:"struct EPSRegister.MigratedRecord[]",name:"migratedRecords_",type:"tuple[]"}],name:"migration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"nominate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"erc20Value_",type:"uint256"},{internalType:"bytes",name:"data_",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxyRegisterFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC1155",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC1155",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint88",name:"",type:"uint88"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRateLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IOAT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"deleteNominalEth_",type:"uint256"}],name:"setDeletionNominalEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"ensName_",type:"string"}],name:"setENSName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"ensReverseRegistrar_",type:"address"}],name:"setENSReverseRegistrar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc1155DelegationRegister_",type:"address"}],name:"setERC1155DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20DelegationRegister_",type:"address"}],name:"setERC20DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20_",type:"address"},{internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"setERC20Fee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc721DelegationRegister_",type:"address"}],name:"setERC721DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"count_",type:"uint256"},{internalType:"uint256",name:"air_",type:"uint256"}],name:"setNNumberOfEthAddressesAndAirdropAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"registerFee_",type:"uint256"}],name:"setRegisterFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint88",name:"rewardRate_",type:"uint88"}],name:"setRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"rewardToken_",type:"address"}],name:"setRewardToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"treasuryAddress_",type:"address"}],name:"setTreasuryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint256",name:"provider_",type:"uint256"}],name:"updateDeliveryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]};function tG(n,e){return function(){return n.apply(e,arguments)}}const{toString:g3e}=Object.prototype,{getPrototypeOf:B2}=Object,E_=(n=>e=>{const t=g3e.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ca=n=>(n=n.toLowerCase(),e=>E_(e)===n),C_=n=>e=>typeof e===n,{isArray:yd}=Array,rg=C_("undefined");function v3e(n){return n!==null&&!rg(n)&&n.constructor!==null&&!rg(n.constructor)&&Qs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const nG=Ca("ArrayBuffer");function y3e(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&nG(n.buffer),e}const w3e=C_("string"),Qs=C_("function"),rG=C_("number"),M_=n=>n!==null&&typeof n=="object",x3e=n=>n===!0||n===!1,_y=n=>{if(E_(n)!=="object")return!1;const e=B2(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_3e=Ca("Date"),b3e=Ca("File"),B3e=Ca("Blob"),E3e=Ca("FileList"),C3e=n=>M_(n)&&Qs(n.pipe),M3e=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Qs(n.append)&&((e=E_(n))==="formdata"||e==="object"&&Qs(n.toString)&&n.toString()==="[object FormData]"))},S3e=Ca("URLSearchParams"),T3e=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dg(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),yd(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function iG(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const sG=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),oG=n=>!rg(n)&&n!==sG;function yM(){const{caseless:n}=oG(this)&&this||{},e={},t=(r,i)=>{const s=n&&iG(e,i)||i;_y(e[s])&&_y(r)?e[s]=yM(e[s],r):_y(r)?e[s]=yM({},r):yd(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Dg(arguments[r],t);return e}const I3e=(n,e,t,{allOwnKeys:r}={})=>(Dg(e,(i,s)=>{t&&Qs(i)?n[s]=tG(i,t):n[s]=i},{allOwnKeys:r}),n),R3e=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),F3e=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},U3e=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&B2(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},L3e=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},P3e=n=>{if(!n)return null;if(yd(n))return n;let e=n.length;if(!rG(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},D3e=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&B2(Uint8Array)),O3e=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},N3e=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},k3e=Ca("HTMLFormElement"),Q3e=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),kO=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),H3e=Ca("RegExp"),aG=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Dg(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},z3e=n=>{aG(n,(e,t)=>{if(Qs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Qs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},G3e=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return yd(n)?r(n):r(String(n).split(e)),t},V3e=()=>{},j3e=(n,e)=>(n=+n,Number.isFinite(n)?n:e),TB="abcdefghijklmnopqrstuvwxyz",QO="0123456789",lG={DIGIT:QO,ALPHA:TB,ALPHA_DIGIT:TB+TB.toUpperCase()+QO},W3e=(n=16,e=lG.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function K3e(n){return!!(n&&Qs(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Y3e=n=>{const e=new Array(10),t=(r,i)=>{if(M_(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=yd(r)?[]:{};return Dg(r,(o,a)=>{const l=t(o,i+1);!rg(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},$3e=Ca("AsyncFunction"),X3e=n=>n&&(M_(n)||Qs(n))&&Qs(n.then)&&Qs(n.catch),Re={isArray:yd,isArrayBuffer:nG,isBuffer:v3e,isFormData:M3e,isArrayBufferView:y3e,isString:w3e,isNumber:rG,isBoolean:x3e,isObject:M_,isPlainObject:_y,isUndefined:rg,isDate:_3e,isFile:b3e,isBlob:B3e,isRegExp:H3e,isFunction:Qs,isStream:C3e,isURLSearchParams:S3e,isTypedArray:D3e,isFileList:E3e,forEach:Dg,merge:yM,extend:I3e,trim:T3e,stripBOM:R3e,inherits:F3e,toFlatObject:U3e,kindOf:E_,kindOfTest:Ca,endsWith:L3e,toArray:P3e,forEachEntry:O3e,matchAll:N3e,isHTMLForm:k3e,hasOwnProperty:kO,hasOwnProp:kO,reduceDescriptors:aG,freezeMethods:z3e,toObjectSet:G3e,toCamelCase:Q3e,noop:V3e,toFiniteNumber:j3e,findKey:iG,global:sG,isContextDefined:oG,ALPHABET:lG,generateString:W3e,isSpecCompliantForm:K3e,toJSONObject:Y3e,isAsyncFn:$3e,isThenable:X3e};function Nt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}Re.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const AG=Nt.prototype,cG={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{cG[n]={value:n}});Object.defineProperties(Nt,cG);Object.defineProperty(AG,"isAxiosError",{value:!0});Nt.from=(n,e,t,r,i,s)=>{const o=Object.create(AG);return Re.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Nt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const Z3e=null;function wM(n){return Re.isPlainObject(n)||Re.isArray(n)}function uG(n){return Re.endsWith(n,"[]")?n.slice(0,-2):n}function HO(n,e,t){return n?n.concat(e).map(function(i,s){return i=uG(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function J3e(n){return Re.isArray(n)&&!n.some(wM)}const q3e=Re.toFlatObject(Re,{},null,function(e){return/^is[A-Z]/.test(e)});function S_(n,e,t){if(!Re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,g){return!Re.isUndefined(g[d])});const r=t.metaTokens,i=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(e);if(!Re.isFunction(i))throw new TypeError("visitor must be a function");function A(p){if(p===null)return"";if(Re.isDate(p))return p.toISOString();if(!l&&Re.isBlob(p))throw new Nt("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(p)||Re.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,d,g){let m=p;if(p&&!g&&typeof p=="object"){if(Re.endsWith(d,"{}"))d=r?d:d.slice(0,-2),p=JSON.stringify(p);else if(Re.isArray(p)&&J3e(p)||(Re.isFileList(p)||Re.endsWith(d,"[]"))&&(m=Re.toArray(p)))return d=uG(d),m.forEach(function(w,x){!(Re.isUndefined(w)||w===null)&&e.append(o===!0?HO([d],x,s):o===null?d:d+"[]",A(w))}),!1}return wM(p)?!0:(e.append(HO(g,d,s),A(p)),!1)}const u=[],f=Object.assign(q3e,{defaultVisitor:c,convertValue:A,isVisitable:wM});function h(p,d){if(!Re.isUndefined(p)){if(u.indexOf(p)!==-1)throw Error("Circular reference detected in "+d.join("."));u.push(p),Re.forEach(p,function(m,y){(!(Re.isUndefined(m)||m===null)&&i.call(e,m,Re.isString(y)?y.trim():y,d,f))===!0&&h(m,d?d.concat(y):[y])}),u.pop()}}if(!Re.isObject(n))throw new TypeError("data must be an object");return h(n),e}function zO(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function E2(n,e){this._pairs=[],n&&S_(n,this,e)}const fG=E2.prototype;fG.append=function(e,t){this._pairs.push([e,t])};fG.toString=function(e){const t=e?function(r){return e.call(this,r,zO)}:zO;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function eDe(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function hG(n,e,t){if(!e)return n;const r=t&&t.encode||eDe,i=t&&t.serialize;let s;if(i?s=i(e,t):s=Re.isURLSearchParams(e)?e.toString():new E2(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class tDe{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Re.forEach(this.handlers,function(r){r!==null&&e(r)})}}const GO=tDe,dG={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nDe=typeof URLSearchParams<"u"?URLSearchParams:E2,rDe=typeof FormData<"u"?FormData:null,iDe=typeof Blob<"u"?Blob:null,sDe={isBrowser:!0,classes:{URLSearchParams:nDe,FormData:rDe,Blob:iDe},protocols:["http","https","file","blob","url","data"]},pG=typeof window<"u"&&typeof document<"u",oDe=(n=>pG&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),aDe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),lDe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:pG,hasStandardBrowserEnv:oDe,hasStandardBrowserWebWorkerEnv:aDe},Symbol.toStringTag,{value:"Module"})),na={...lDe,...sDe};function ADe(n,e){return S_(n,new na.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return na.isNode&&Re.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function cDe(n){return Re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uDe(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function mG(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&Re.isArray(i)?i.length:o,l?(Re.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Re.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&Re.isArray(i[o])&&(i[o]=uDe(i[o])),!a)}if(Re.isFormData(n)&&Re.isFunction(n.entries)){const t={};return Re.forEachEntry(n,(r,i)=>{e(cDe(r),i,t,0)}),t}return null}function fDe(n,e,t){if(Re.isString(n))try{return(e||JSON.parse)(n),Re.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const C2={transitional:dG,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Re.isObject(e);if(s&&Re.isHTMLForm(e)&&(e=new FormData(e)),Re.isFormData(e))return i?JSON.stringify(mG(e)):e;if(Re.isArrayBuffer(e)||Re.isBuffer(e)||Re.isStream(e)||Re.isFile(e)||Re.isBlob(e))return e;if(Re.isArrayBufferView(e))return e.buffer;if(Re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ADe(e,this.formSerializer).toString();if((a=Re.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return S_(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),fDe(e)):e}],transformResponse:[function(e){const t=this.transitional||C2.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&Re.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Nt.from(a,Nt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:na.classes.FormData,Blob:na.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],n=>{C2.headers[n]={}});const M2=C2,hDe=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dDe=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&hDe[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},VO=Symbol("internals");function dp(n){return n&&String(n).trim().toLowerCase()}function by(n){return n===!1||n==null?n:Re.isArray(n)?n.map(by):String(n)}function pDe(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const mDe=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function IB(n,e,t,r,i){if(Re.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!Re.isString(e)){if(Re.isString(r))return e.indexOf(r)!==-1;if(Re.isRegExp(r))return r.test(e)}}function gDe(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function vDe(n,e){const t=Re.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class T_{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,A){const c=dp(l);if(!c)throw new Error("header name must be a non-empty string");const u=Re.findKey(i,c);(!u||i[u]===void 0||A===!0||A===void 0&&i[u]!==!1)&&(i[u||l]=by(a))}const o=(a,l)=>Re.forEach(a,(A,c)=>s(A,c,l));return Re.isPlainObject(e)||e instanceof this.constructor?o(e,t):Re.isString(e)&&(e=e.trim())&&!mDe(e)?o(dDe(e),t):e!=null&&s(t,e,r),this}get(e,t){if(e=dp(e),e){const r=Re.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return pDe(i);if(Re.isFunction(t))return t.call(this,i,r);if(Re.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=dp(e),e){const r=Re.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||IB(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=dp(o),o){const a=Re.findKey(r,o);a&&(!t||IB(r,r[a],a,t))&&(delete r[a],i=!0)}}return Re.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||IB(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return Re.forEach(this,(i,s)=>{const o=Re.findKey(r,s);if(o){t[o]=by(i),delete t[s];return}const a=e?gDe(s):String(s).trim();a!==s&&delete t[s],t[a]=by(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Re.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&Re.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[VO]=this[VO]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=dp(o);r[a]||(vDe(i,o),r[a]=!0)}return Re.isArray(e)?e.forEach(s):s(e),this}}T_.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(T_.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});Re.freezeMethods(T_);const hl=T_;function RB(n,e){const t=this||M2,r=e||t,i=hl.from(r.headers);let s=r.data;return Re.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function gG(n){return!!(n&&n.__CANCEL__)}function Og(n,e,t){Nt.call(this,n??"canceled",Nt.ERR_CANCELED,e,t),this.name="CanceledError"}Re.inherits(Og,Nt,{__CANCEL__:!0});function yDe(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Nt("Request failed with status code "+t.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const wDe=na.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];Re.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Re.isString(r)&&o.push("path="+r),Re.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xDe(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _De(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function vG(n,e){return n&&!xDe(e)?_De(n,e):e}const bDe=na.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=Re.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function BDe(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function EDe(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const A=Date.now(),c=r[s];o||(o=A),t[i]=l,r[i]=A;let u=s,f=0;for(;u!==i;)f+=t[u++],u=u%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),A-o<e)return;const h=c&&A-c;return h?Math.round(f*1e3/h):void 0}}function jO(n,e){let t=0;const r=EDe(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-t,l=r(a),A=s<=o;t=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&A?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,n(c)}}const CDe=typeof XMLHttpRequest<"u",MDe=CDe&&function(n){return new Promise(function(t,r){let i=n.data;const s=hl.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function A(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let c;if(Re.isFormData(i)){if(na.hasStandardBrowserEnv||na.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[d,...g]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...g].join("; "))}}let u=new XMLHttpRequest;if(n.auth){const d=n.auth.username||"",g=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(d+":"+g))}const f=vG(n.baseURL,n.url);u.open(n.method.toUpperCase(),hG(f,n.params,n.paramsSerializer),!0),u.timeout=n.timeout;function h(){if(!u)return;const d=hl.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:d,config:n,request:u};yDe(function(w){t(w),A()},function(w){r(w),A()},m),u=null}if("onloadend"in u?u.onloadend=h:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(h)},u.onabort=function(){u&&(r(new Nt("Request aborted",Nt.ECONNABORTED,n,u)),u=null)},u.onerror=function(){r(new Nt("Network Error",Nt.ERR_NETWORK,n,u)),u=null},u.ontimeout=function(){let g=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const m=n.transitional||dG;n.timeoutErrorMessage&&(g=n.timeoutErrorMessage),r(new Nt(g,m.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,n,u)),u=null},na.hasStandardBrowserEnv&&(a&&Re.isFunction(a)&&(a=a(n)),a||a!==!1&&bDe(f))){const d=n.xsrfHeaderName&&n.xsrfCookieName&&wDe.read(n.xsrfCookieName);d&&s.set(n.xsrfHeaderName,d)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&Re.forEach(s.toJSON(),function(g,m){u.setRequestHeader(m,g)}),Re.isUndefined(n.withCredentials)||(u.withCredentials=!!n.withCredentials),o&&o!=="json"&&(u.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&u.addEventListener("progress",jO(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",jO(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=d=>{u&&(r(!d||d.type?new Og(null,n,u):d),u.abort(),u=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const p=BDe(f);if(p&&na.protocols.indexOf(p)===-1){r(new Nt("Unsupported protocol "+p+":",Nt.ERR_BAD_REQUEST,n));return}u.send(i||null)})},xM={http:Z3e,xhr:MDe};Re.forEach(xM,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const WO=n=>`- ${n}`,SDe=n=>Re.isFunction(n)||n===null||n===!1,yG={getAdapter:n=>{n=Re.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!SDe(t)&&(r=xM[(o=String(t)).toLowerCase()],r===void 0))throw new Nt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(WO).join(`
`):" "+WO(s[0]):"as no adapter specified";throw new Nt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:xM};function FB(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Og(null,n)}function KO(n){return FB(n),n.headers=hl.from(n.headers),n.data=RB.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),yG.getAdapter(n.adapter||M2.adapter)(n).then(function(r){return FB(n),r.data=RB.call(n,n.transformResponse,r),r.headers=hl.from(r.headers),r},function(r){return gG(r)||(FB(n),r&&r.response&&(r.response.data=RB.call(n,n.transformResponse,r.response),r.response.headers=hl.from(r.response.headers))),Promise.reject(r)})}const YO=n=>n instanceof hl?{...n}:n;function Vh(n,e){e=e||{};const t={};function r(A,c,u){return Re.isPlainObject(A)&&Re.isPlainObject(c)?Re.merge.call({caseless:u},A,c):Re.isPlainObject(c)?Re.merge({},c):Re.isArray(c)?c.slice():c}function i(A,c,u){if(Re.isUndefined(c)){if(!Re.isUndefined(A))return r(void 0,A,u)}else return r(A,c,u)}function s(A,c){if(!Re.isUndefined(c))return r(void 0,c)}function o(A,c){if(Re.isUndefined(c)){if(!Re.isUndefined(A))return r(void 0,A)}else return r(void 0,c)}function a(A,c,u){if(u in e)return r(A,c);if(u in n)return r(void 0,A)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(A,c)=>i(YO(A),YO(c),!0)};return Re.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=l[c]||i,f=u(n[c],e[c],c);Re.isUndefined(f)&&u!==a||(t[c]=f)}),t}const wG="1.6.8",S2={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{S2[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const $O={};S2.transitional=function(e,t,r){function i(s,o){return"[Axios v"+wG+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Nt(i(o," has been removed"+(t?" in "+t:"")),Nt.ERR_DEPRECATED);return t&&!$O[o]&&($O[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function TDe(n,e,t){if(typeof n!="object")throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Nt("option "+s+" must be "+l,Nt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Nt("Unknown option "+s,Nt.ERR_BAD_OPTION)}}const _M={assertOptions:TDe,validators:S2},Kl=_M.validators;class ix{constructor(e){this.defaults=e,this.interceptors={request:new GO,response:new GO}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Vh(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&_M.assertOptions(r,{silentJSONParsing:Kl.transitional(Kl.boolean),forcedJSONParsing:Kl.transitional(Kl.boolean),clarifyTimeoutError:Kl.transitional(Kl.boolean)},!1),i!=null&&(Re.isFunction(i)?t.paramsSerializer={serialize:i}:_M.assertOptions(i,{encode:Kl.function,serialize:Kl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Re.merge(s.common,s[t.method]);s&&Re.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=hl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(l=l&&d.synchronous,a.unshift(d.fulfilled,d.rejected))});const A=[];this.interceptors.response.forEach(function(d){A.push(d.fulfilled,d.rejected)});let c,u=0,f;if(!l){const p=[KO.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,A),f=p.length,c=Promise.resolve(t);u<f;)c=c.then(p[u++],p[u++]);return c}f=a.length;let h=t;for(u=0;u<f;){const p=a[u++],d=a[u++];try{h=p(h)}catch(g){d.call(this,g);break}}try{c=KO.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,f=A.length;u<f;)c=c.then(A[u++],A[u++]);return c}getUri(e){e=Vh(this.defaults,e);const t=vG(e.baseURL,e.url);return hG(t,e.params,e.paramsSerializer)}}Re.forEach(["delete","get","head","options"],function(e){ix.prototype[e]=function(t,r){return this.request(Vh(r||{},{method:e,url:t,data:(r||{}).data}))}});Re.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Vh(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ix.prototype[e]=t(),ix.prototype[e+"Form"]=t(!0)});const By=ix;class T2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Og(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new T2(function(i){e=i}),cancel:e}}}const IDe=T2;function RDe(n){return function(t){return n.apply(null,t)}}function FDe(n){return Re.isObject(n)&&n.isAxiosError===!0}const bM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bM).forEach(([n,e])=>{bM[e]=n});const UDe=bM;function xG(n){const e=new By(n),t=tG(By.prototype.request,e);return Re.extend(t,By.prototype,e,{allOwnKeys:!0}),Re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return xG(Vh(n,i))},t}const ar=xG(M2);ar.Axios=By;ar.CanceledError=Og;ar.CancelToken=IDe;ar.isCancel=gG;ar.VERSION=wG;ar.toFormData=S_;ar.AxiosError=Nt;ar.Cancel=ar.CanceledError;ar.all=function(e){return Promise.all(e)};ar.spread=RDe;ar.isAxiosError=FDe;ar.mergeConfig=Vh;ar.AxiosHeaders=hl;ar.formToJSON=n=>mG(Re.isHTMLForm(n)?new FormData(n):n);ar.getAdapter=yG.getAdapter;ar.HttpStatusCode=UDe;ar.default=ar;const LDe=ar,PDe={}.VITE_OPENSEA_KEY,DDe={}.VITE_PINATA_API_KEY,ODe={}.VITE_PINATA_API_SECRET,UB="0x89";let Lv;async function NDe(){if(Lv!=null)return Lv;const n=new fk("https://polygon-rpc.com/"),t=await new B_(rx.address,rx.abi,n).tokenPrice();return Lv=Ge.from(t).mul(1),Lv}function kDe(n,e){const t={method:"GET",headers:{accept:"application/json","x-api-key":PDe}};return console.log(t),new Promise((r,i)=>{fetch("https://api.opensea.io/api/v2/chain/ethereum/account/"+n+"/nfts?collection="+e,t).then(s=>{if(s.ok)return s.json();i("Failed to fetch data from Opensea API")}).then(s=>{r(s)}).catch(s=>{i(s)})})}async function I2(){if(window.ethereum)try{const n=await window.ethereum.request({method:"eth_chainId"});if(parseInt(n,16)==parseInt(UB,16)){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}else try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:UB}]});const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}catch(e){console.log("polygon not find:",e);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"],nativeCurrency:{name:"Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com/"]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:UB}]});const t=await window.ethereum.request({method:"eth_requestAccounts"});return t.length>0?t[0]:""}catch(t){console.log("Adding polygon chain failed",t)}}}catch{return""}else return""}async function LB(n,e){if(!n)return console.warn("Error saving to pinata: No file data");const t="https://api.pinata.cloud/pinning/pinFileToIPFS";let r=new FormData;return r.append("file",n,e),(await LDe.post(t,r,{maxContentLength:"Infinity",maxBodyLength:"Infinity",headers:{"Content-Type":`multipart/form-data; boundary=${r._boundary}`,pinata_api_key:DDe,pinata_secret_api_key:ODe}})).data}const QDe=n=>{let e=[];return Object.keys(n).map(t=>{Object.keys(n[t]).length!==0&&e.push({trait_type:t,value:n[t].name})}),e};async function HDe(n,e,t,r,i){if(!n)throw new Error("No avatar was provided");if(!e)throw new Error("No screenshot was provided");if(!t)throw new Error("No model was provided");const s=await I2();if(s=="")return"Please Connect Wallet";if(!i||await zDe(s)){console.log("minting");let a="AvatarImage_"+Date.now()+".png",l=await(async()=>{for(let y=0;y<10;y++)try{return await LB(e,a).catch(x=>{console.error(y,"---",x)})}catch(w){return console.warn(w),w}return"Failed to upload screenshot"})();const A=await Fhe(t,n,4096);let c;if(A){let y="AvatarGlb_"+Date.now()+".glb";c=await(async()=>{for(let w=0;w<10;w++)try{return await LB(A,y).catch(_=>(console.error(w,"---",_),"Couldn't save glb to pinata"))}catch(x){return console.warn(x),"Couldn't save glb to pinata"}return"Failed to upload glb"})()}else return"Unable to get glb";const u={name:r||"Avatars",description:"Character Studio Avatars.",image:`ipfs://${l.IpfsHash}`,animation_url:`ipfs://${c.IpfsHash}`,attributes:QDe(n)},f=JSON.stringify(u),p=`ipfs://${(await LB(new Blob([f]),"AvatarMetadata_"+Date.now()+".json")).IpfsHash}`;let d=await NDe();const g=new HM(window.ethereum).getSigner(),m=new B_(rx.address,rx.abi,g);try{const y={value:d,from:s};if((await(await m.mintToken(1,p,y)).wait()).transactionHash)return console.log("Mint success!"),"Mint success!"}catch{return"Public Mint failed."}}}const zDe=async n=>{if(n){const e="0x6e58309CD851A5B124E3A56768a42d12f3B6D104",t=f7("mainnet",{alchemy:{}.VITE_ALCHEMY_API_KEY}),i=await new B_(NO.address,NO.abi,t).beneficiaryBalanceOf(e,m3e,1);return parseInt(i)>0?!0:(console.log(`Currently in alpha. You need a genesis pass to mint. 
 Will be public soon!`),!1)}else return console.log("Please connect your wallet"),!1};function GDe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=$.useContext(Di),{manifest:r,characterManager:i,animationManager:s,toggleDebugMode:o,loraDataGenerator:a,spriteAtlasGenerator:l,sceneElements:A}=$.useContext(Zn),[c,u]=ye.useState(null),[f,h]=ye.useState(""),{playSound:p}=$.useContext($s),{isMute:d}=$.useContext(Ys);$.useState(null);const[g,m]=$.useState(null),[y,w]=$.useState(""),x=()=>{!d&&p("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),o(!1),e(mt.LANDING)},_=()=>{const v=Oe.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:bn(Oe.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:bn(Oe.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:bn(Oe.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:bn(Oe.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:v===0||v==2,exportMtoonAtlas:v===1||v==2,ktxCompression:Oe.merge_options_ktx_compression||!1,twoSidedMaterial:Oe.mergeOptions_two_sided_mat||!1}},C=v=>{const E=g[v].manifestName;(async()=>{(Oe.mergeOptions_download_vrm_preview==null?!0:Oe.mergeOptions_download_vrm_preview)&&i.savePortraitScreenshot(E,512,1024,1.5,-.1),(Oe.mergeOptions_download_vrm==null?!0:Oe.mergeOptions_download_vrm)&&await i.downloadVRM(E,_());const z=new ld,K=A.parent;K.remove(A);const Q=Oe.mergeOptions_download_lora==null?!0:Oe.mergeOptions_download_lora;if(Q===!0){const j=r.loras.map(async ee=>a.createLoraData(ee,z));await Promise.all(j)}const B=Oe.mergeOptions_download_sprites==null?!0:Oe.mergeOptions_download_sprites;if(B===!0){const j=r.sprites.map(async ee=>l.createSpriteAtlas(ee,z));await Promise.all(j)}(Q===!0||B===!0)&&z.saveZip(g[v].manifestName),K.add(A),v<g.length-1?(console.log("downloaded "+E),T(v+1)):t(!1)})()},T=async v=>{v==0?(console.log(r.loras[0]),C(v)):(await i.setManifest(g[v]),t(!0),i.loadInitialTraits().then(async()=>{await(F=>new Promise(D=>setTimeout(D,F)))(1),C(v)}))},b=()=>{t(!0),T(0)},{t:M}=ye.useContext(So),P=async v=>{if(i.getCurrentCharacterModel()){const F=fl(v.name),D=URL.createObjectURL(v);await s.loadAnimation(D,!1,0,!0,"",F),w(s.getCurrentAnimationName()),URL.revokeObjectURL(D)}else console.warn("Please load a vrm model to test animations.")},Y=async v=>{const E=URL.createObjectURL(v);await i.loadOptimizerCharacter(E),URL.revokeObjectURL(E);const F=fl(v.name);h(F),u(i.getCurrentCharacterModel())},H=v=>{const E=Array.from(v),F=[],D=O=>new Promise((z,K)=>{if(O&&O.name.toLowerCase().endsWith(".json")){const Q=new FileReader,B=O.name.replace(/\.[^/.]+$/,"");Q.onload=function(j){try{const ee=JSON.parse(j.target.result),U=ee.thumbnail;ee.manifestName=B,F.push(ee),z()}catch(ee){console.error("Error parsing the JSON file:",ee),K(ee)}},Q.readAsText(O)}});Promise.all(E.map(D)).then(()=>{F.length>0&&(m(F),i.setManifest(F[0]),t(!0),i.loadInitialTraits().then(()=>{t(!1)}))}).catch(O=>{console.error("Error processing files:",O)})},I=async v=>{const E=v[0];E&&E.name.toLowerCase().endsWith(".fbx")&&P(E),E&&E.name.toLowerCase().endsWith(".vrm")&&Y(E),E&&E.name.toLowerCase().endsWith(".json")&&H(v)};return N.jsxs("div",{className:fi.container,children:[N.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:N.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),N.jsx("div",{className:"sectionTitle",children:"NFT Characters"}),N.jsx(Eg,{onFilesDrop:I}),N.jsx(__,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),N.jsx(_2,{model:c}),N.jsx(IT,{jsonSelectionArray:g,byManifest:!0}),(g==null?void 0:g.length)>0&&N.jsx(s_,{loadedAnimationName:y}),N.jsxs("div",{className:fi.buttonContainer,children:[N.jsx(gn,{theme:"light",text:M("callToAction.back"),size:14,className:fi.buttonLeft,onClick:x}),(g==null?void 0:g.length)==1&&N.jsx(gn,{theme:"light",text:"Download",size:14,className:fi.buttonRight,onClick:b}),(g==null?void 0:g.length)>1&&N.jsx(gn,{theme:"light",text:"Download All",size:14,className:fi.buttonRight,onClick:b})]})]})}const VDe="_classdisabled_hpzv8_1",jDe="_container_hpzv8_6",WDe="_classContainer_hpzv8_14",KDe="_icon_hpzv8_39",YDe="_name_hpzv8_70",$De="_description_hpzv8_79",XDe="_classFrame_hpzv8_84",ZDe="_frameContainer_hpzv8_104",JDe="_frame_hpzv8_104",qDe="_image_hpzv8_114",eOe="_lockedContainer_hpzv8_120",tOe="_locked_hpzv8_120",nOe="_buttonContainer_hpzv8_134",rOe="_buttonLeft_hpzv8_143",iOe="_buttonRight_hpzv8_147",sOe="_buttonCenter_hpzv8_151",oOe="_topLine_hpzv8_165",aOe="_bottomLine_hpzv8_191",ot={classdisabled:VDe,container:jDe,classContainer:WDe,class:"_class_hpzv8_1",icon:KDe,name:YDe,description:$De,classFrame:XDe,frameContainer:ZDe,frame:JDe,image:qDe,lockedContainer:eOe,locked:tOe,buttonContainer:nOe,buttonLeft:rOe,buttonRight:iOe,buttonCenter:sOe,topLine:oOe,bottomLine:aOe};function lOe(){const{t:n}=ye.useContext(So),{setViewMode:e,setIsLoading:t,isLoading:r}=$.useContext(Di),{playSound:i}=$.useContext($s),{isMute:s}=$.useContext(Ys),{manifest:o,characterManager:a}=$.useContext(Zn),[l,A]=ye.useState([]);ye.useEffect(()=>{if((o==null?void 0:o.characters)!=null){const p=o.characters.map(d=>({name:d.name,image:d.portrait,description:d.description,manifest:d.manifest,icon:d.icon,format:d.format,disabled:!1}));A(p)}},[o]);const c=()=>{e(mt.LANDING),!s&&i("backNextButton")},u=async p=>{t(!0),a.loadManifest(o.characters[p].manifest).then(()=>{e(mt.BATCHDOWNLOAD),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},f=()=>{e(mt.BATCHMANIFEST)},h=()=>{!s&&i("classMouseOver")};return N.jsxs("div",{className:`${ot.container} horizontalScroll`,children:[N.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),N.jsx("div",{className:ot.vrmOptimizerButton}),N.jsx("div",{className:ot.topLine}),N.jsxs("div",{className:ot.classContainer,children:[l.map((p,d)=>N.jsxs("div",{className:p.disabled?ot.classdisabled:ot.class,onClick:p.disabled?null:()=>u(d),onMouseOver:p.disabled?null:()=>h(),children:[N.jsxs("div",{className:ot.classFrame,style:{backgroundImage:`url(${p.image})`},children:[N.jsx("div",{className:ot.frameContainer,children:N.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:ot.frame})}),N.jsx("div",{className:ot.lockedContainer,children:p.disabled&&N.jsx("img",{src:"./assets/icons/locked.svg",className:ot.locked})})]}),N.jsx("div",{className:ot.name,children:p.name}),N.jsx("div",{className:ot.description,children:p.description})]},d)),N.jsxs("div",{className:ot.class,onClick:()=>f(),onMouseOver:()=>h(),children:[N.jsx("div",{className:ot.classFrame,style:{backgroundImage:"url(./assets/media/disabled.png)"},children:N.jsx("div",{className:ot.frameContainer,children:N.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:ot.frame})})}),N.jsx("div",{className:ot.name,children:"Manifest"}),N.jsx("div",{className:ot.description,children:"Load by manifest"})]},"manifest-load")]}),N.jsx("div",{className:ot.bottomLine}),N.jsx("div",{className:ot.buttonContainer,children:N.jsx(gn,{theme:"light",text:n("callToAction.back"),size:14,className:ot.buttonLeft,onClick:c})})]})}function AOe(){const{t:n}=ye.useContext(So),{setViewMode:e,setIsLoading:t,isLoading:r}=$.useContext(Di),{playSound:i}=$.useContext($s),{isMute:s}=$.useContext(Ys),{manifest:o,characterManager:a}=$.useContext(Zn),[l,A]=ye.useState([]);ye.useEffect(()=>{if((o==null?void 0:o.characters)!=null){const h=o.characters.map(p=>({name:p.name,image:p.portrait,description:p.description,manifest:p.manifest,icon:p.icon,format:p.format,disabled:!1}));A(h)}},[o]);const c=()=>{e(mt.LANDING),!s&&i("backNextButton")},u=async h=>{t(!0),a.loadManifest(o.characters[h].manifest).then(()=>{e(mt.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},f=()=>{!s&&i("classMouseOver")};return N.jsxs("div",{className:`${ot.container} horizontalScroll`,children:[N.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),N.jsx("div",{className:ot.vrmOptimizerButton}),N.jsx("div",{className:ot.topLine}),N.jsx("div",{className:ot.classContainer,children:l.map((h,p)=>N.jsxs("div",{className:h.disabled?ot.classdisabled:ot.class,onClick:h.disabled?null:()=>u(p),onMouseOver:h.disabled?null:()=>f(),children:[N.jsxs("div",{className:ot.classFrame,style:{backgroundImage:`url(${h.image})`},children:[N.jsx("div",{className:ot.frameContainer,children:N.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:ot.frame})}),N.jsx("div",{className:ot.lockedContainer,children:h.disabled&&N.jsx("img",{src:"./assets/icons/locked.svg",className:ot.locked})})]}),N.jsx("div",{className:ot.name,children:h.name}),N.jsx("div",{className:ot.description,children:h.description})]},p))}),N.jsx("div",{className:ot.bottomLine}),N.jsx("div",{className:ot.buttonContainer,children:N.jsx(gn,{theme:"light",text:n("callToAction.back"),size:14,className:ot.buttonLeft,onClick:c})})]})}const cOe="_buttonContainer_1ueuk_1",uOe="_button_1ueuk_1",qu={buttonContainer:cOe,button:uOe},XO={}.VITE_OPENSEA_KEY;function fOe(){const{setViewMode:n}=$.useContext(Di),{playSound:e}=$.useContext($s),{isMute:t}=$.useContext(Ys),{characterManager:r}=$.useContext(Zn),i=()=>{n(mt.CREATE),!t&&e("backNextButton")},s=()=>{n(mt.CLAIM),!t&&e("backNextButton")},o=()=>{n(mt.OPTIMIZER),r.loadOptimizerManifest(),!t&&e("backNextButton")},a=async()=>{await I2()!=""&&n(mt.WALLET),!t&&e("backNextButton")};return N.jsx("div",{className:qu.container,children:N.jsxs("div",{className:qu.buttonContainer,children:[N.jsx("button",{className:qu.button,onClick:i,children:N.jsx("img",{src:"./assets/media/btn_create_character.png"})}),N.jsx("button",{className:qu.button,onClick:s,children:N.jsx("img",{src:"./assets/media/btn_batch_download_character.png"})}),N.jsx("button",{className:qu.button,onClick:o,children:N.jsx("img",{src:"./assets/media/btn_optimize_character.png"})}),XO&&XO!=""&&N.jsx("button",{className:qu.button,onClick:a,children:N.jsx("img",{src:"./assets/media/btn_optimize_character.png"})})]})})}const uc={};var R2={exports:{}},mh=typeof Reflect=="object"?Reflect:null,ZO=mh&&typeof mh.apply=="function"?mh.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},Ey;mh&&typeof mh.ownKeys=="function"?Ey=mh.ownKeys:Object.getOwnPropertySymbols?Ey=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ey=function(e){return Object.getOwnPropertyNames(e)};function hOe(n){console&&console.warn&&console.warn(n)}var _G=Number.isNaN||function(e){return e!==e};function en(){en.init.call(this)}R2.exports=en;R2.exports.once=gOe;en.EventEmitter=en;en.prototype._events=void 0;en.prototype._eventsCount=0;en.prototype._maxListeners=void 0;var JO=10;function I_(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(en,"defaultMaxListeners",{enumerable:!0,get:function(){return JO},set:function(n){if(typeof n!="number"||n<0||_G(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");JO=n}});en.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};en.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||_G(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function bG(n){return n._maxListeners===void 0?en.defaultMaxListeners:n._maxListeners}en.prototype.getMaxListeners=function(){return bG(this)};en.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")ZO(l,this,t);else for(var A=l.length,c=SG(l,A),r=0;r<A;++r)ZO(c[r],this,t);return!0};function BG(n,e,t,r){var i,s,o;if(I_(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=bG(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,hOe(a)}return n}en.prototype.addListener=function(e,t){return BG(this,e,t,!1)};en.prototype.on=en.prototype.addListener;en.prototype.prependListener=function(e,t){return BG(this,e,t,!0)};function dOe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function EG(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=dOe.bind(r);return i.listener=t,r.wrapFn=i,i}en.prototype.once=function(e,t){return I_(t),this.on(e,EG(this,e,t)),this};en.prototype.prependOnceListener=function(e,t){return I_(t),this.prependListener(e,EG(this,e,t)),this};en.prototype.removeListener=function(e,t){var r,i,s,o,a;if(I_(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():pOe(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};en.prototype.off=en.prototype.removeListener;en.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function CG(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?mOe(i):SG(i,i.length)}en.prototype.listeners=function(e){return CG(this,e,!0)};en.prototype.rawListeners=function(e){return CG(this,e,!1)};en.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):MG.call(n,e)};en.prototype.listenerCount=MG;function MG(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}en.prototype.eventNames=function(){return this._eventsCount>0?Ey(this._events):[]};function SG(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function pOe(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function mOe(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function gOe(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}TG(n,e,s,{once:!0}),e!=="error"&&vOe(n,i,{once:!0})})}function vOe(n,e,t){typeof n.on=="function"&&TG(n,"error",e,t)}function TG(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var yOe=R2.exports;function wOe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var xOe=function(n){wOe(e,n);function e(r){var i,s=r===void 0?{}:r,o=s.supportedChainIds;return i=n.call(this)||this,i.supportedChainIds=o,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(go.Update,i)},t.emitError=function(i){this.emit(go.Error,i)},t.emitDeactivate=function(){this.emit(go.Deactivate)},e}(yOe.EventEmitter);function BM(){return BM=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},BM.apply(this,arguments)}function F2(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function EM(n){return EM=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},EM(n)}function sx(n,e){return sx=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},sx(n,e)}function _Oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Cy(n,e,t){return _Oe()?Cy=Reflect.construct:Cy=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&sx(A,o.prototype),A},Cy.apply(null,arguments)}function bOe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function ox(n){var e=typeof Map=="function"?new Map:void 0;return ox=function(r){if(r===null||!bOe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Cy(r,arguments,EM(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),sx(i,r)},ox(n)}function Pv(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function ef(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function ko(n){return n.hasOwnProperty("result")?n.result:n}var PB=function(n){F2(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(ox(Error)),BOe=function(n){F2(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(ox(Error)),EOe=function(n){F2(e,n);function e(r){var i;return i=n.call(this,r)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(Pv(i)),i.handleChainChanged=i.handleChainChanged.bind(Pv(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(Pv(i)),i.handleClose=i.handleClose.bind(Pv(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(c){if(s)return c;function u(){return BM({provider:window.ethereum},a?{account:a}:{})}var f=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(h){return h&&ko(h)[0]})).then(function(h){a=h})}();return f&&f.then?f.then(u):u(f)},s=!1,o=this;if(!window.ethereum)throw new PB;window.ethereum.on&&(window.ethereum.on("chainChanged",o.handleChainChanged),window.ethereum.on("accountsChanged",o.handleAccountsChanged),window.ethereum.on("close",o.handleClose),window.ethereum.on("networkChanged",o.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,l=ef(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(A){return ko(A)[0]})).then(function(A){a=A})},function(A){if(A.code===4001)throw new BOe});return Promise.resolve(l&&l.then?l.then(i):i(l))}catch(A){return Promise.reject(A)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function l(){if(!s)try{s=ko(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=ko(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var A=function(){if(!s){var c=ef(function(){return Promise.resolve(window.ethereum.send("net_version").then(ko)).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new PB;var s,o=ef(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(ko)).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.getAccount=function(){try{var i=function(){function l(){return s||(s=ko(window.ethereum.send({method:"eth_accounts"}))[0]),s}var A=function(){if(!s){var c=ef(function(){return Promise.resolve(window.ethereum.enable().then(function(u){return ko(u)[0]})).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new PB;var s,o=ef(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return ko(a)[0]})).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(ef(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return ko(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(xOe);function COe(){const{account:n,library:e,activate:t}=x7(),[r,i]=ye.useState([]),{setViewMode:s}=$.useContext(Di),{playSound:o}=$.useContext($s),{isMute:a}=$.useContext(Ys),l=new EOe({supportedChainIds:[137,1,3,4,5,42,97]});ye.useEffect(()=>{if(n&&e){const f="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",h=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],p=new B_(f,h,e);p.balanceOf(n).then(d=>{const g=[];for(let m=0;m<d;m++)g.push(p.tokenOfOwnerByIndex(n,m));Promise.all(g).then(m=>{const y=m.map(w=>p.tokenURI(w));Promise.all(y).then(w=>{i(w)})})})}},[n,e]);const A=()=>{t(l)},c=f=>{!a&&o("backNextButton"),s(mt.APPEARANCE)},u=()=>{s(mt.LANDING),!a&&o("backNextButton")};return N.jsxs("div",{className:uc.container,children:[!n&&N.jsxs("div",{className:uc.message,children:["Please connect your wallet to load your characters",N.jsx("button",{className:uc.button,onClick:()=>A(),children:"Connect"})]}),N.jsxs("div",{className:uc.characterContainer,children:[N.jsx("div",{className:uc.title,children:"Load Character"}),r.map((f,h)=>N.jsx("div",{className:uc.character,onClick:()=>{c()},children:JSON.stringify(f)},h))]}),N.jsx("button",{className:uc.button,onClick:()=>u(),children:"Back"})]})}const MOe="_container_q73cc_1",SOe="_mintContainer_q73cc_6",TOe="_mainTitleWrap_q73cc_33",IOe="_mainTitle_q73cc_33",ROe="_mintButtonContainer_q73cc_49",FOe="_mintButton_q73cc_49",UOe="_genesisText_q73cc_60",LOe="_required_q73cc_64",POe="_divider_q73cc_68",DOe="_bottomContainer_q73cc_75",OOe="_mintInfo_q73cc_85",NOe="_topLine_q73cc_91",kOe="_bottomLine_q73cc_104",yi={container:MOe,mintContainer:SOe,mainTitleWrap:TOe,mainTitle:IOe,mintButtonContainer:ROe,mintButton:FOe,genesisText:UOe,required:LOe,divider:POe,bottomContainer:DOe,mintInfo:OOe,topLine:NOe,bottomLine:kOe};function QOe(){const{model:n,avatar:e}=$.useContext(Zn),{setViewMode:t}=$.useContext(Di),{playSound:r}=$.useContext($s),{isMute:i}=$.useContext(Ys),[s,o]=$.useState(""),[a,l]=$.useState(!1),A=()=>{t(mt.SAVE),!i&&r("backNextButton")};function c(){return N.jsxs("div",{className:yi.mainTitleWrap,children:[N.jsx("div",{className:yi.topLine}),N.jsx("div",{className:yi.mainTitle,children:"Mint"})]})}async function u(){!i&&r("backNextButton"),l(!0),o("Please check your wallet");const p=await HDe(e,null,n,{name:"XXXRestore"}.name);o(p),l(!1),console.log(p)}return N.jsxs("div",{className:yi.container,children:[N.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),N.jsxs("div",{className:yi.mintContainer,children:[N.jsx(c,{}),N.jsxs("div",{className:yi.mintButtonContainer,children:[N.jsx(gn,{size:16,theme:"light",icon:"polygon",text:a?"Minting...":"Open Edition",className:yi.mintButton,disabled:a,onClick:u,minWidth:220}),N.jsx("div",{className:yi.divider}),N.jsx(gn,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:yi.mintButton,disabled:!0,minWidth:220}),N.jsxs("span",{className:yi.genesisText,children:["(",N.jsx("span",{className:yi.required,children:"Coming Soon!"}),")"]})]}),N.jsxs("span",{className:yi.mintInfo,children:[s," "]})]}),N.jsx("div",{className:yi.bottomContainer,children:N.jsx(gn,{theme:"light",text:"Back",size:14,className:yi.buttonLeft,onClick:A})})]})}function HOe(){const{isLoading:n,setViewMode:e}=$.useContext(Di),{manifest:t,characterManager:r,animationManager:i,sceneElements:s,loraDataGenerator:o,spriteAtlasGenerator:a}=$.useContext(Zn),{playSound:l}=$.useContext($s),{isMute:A}=$.useContext(Ys),[c,u]=ye.useState(null),[f,h]=ye.useState(""),[p,d]=ye.useState([]),[g,m]=ye.useState(0),[y,w]=$.useState("T-Pose"),x=()=>{!A&&l("backNextButton"),r.removeCurrentCharacter(),r.removeCurrentManifest(),e(mt.LANDING)},_=()=>{const E=Oe.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:bn(Oe.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:bn(Oe.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:bn(Oe.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:bn(Oe.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:E===0||E==2,exportMtoonAtlas:E===1||E==2,ktxCompression:Oe.merge_options_ktx_compression||!1,twoSidedMaterial:Oe.mergeOptions_two_sided_mat||!1}},C=async()=>{for(let E=0;E<p.length;E++)try{await H(p[E]);const F=fl(p[E].name);await T(F)}catch(F){console.error(`Error processing ${p[E].name}:`,F)}},T=async E=>{typeof E!="string"&&(E=f),await(async()=>{var j;(Oe.mergeOptions_download_vrm_preview==null?!0:Oe.mergeOptions_download_vrm_preview)&&r.savePortraitScreenshot(E+"_portrait",512,1024,1.5,-.1),(Oe.mergeOptions_download_vrm==null?!0:Oe.mergeOptions_download_vrm)&&await r.downloadVRM(E+"_merged",_());const z=new ld,K=s.parent;K.remove(s),(j=r.getCurrentOptimizerCharacterModel().data)==null||j.isVRM0;const Q=Oe.mergeOptions_download_lora==null?!0:Oe.mergeOptions_download_lora;if(Q===!0){const ee=t.loras.map(async U=>o.createLoraData(U,z));await Promise.all(ee)}const B=Oe.mergeOptions_download_sprites==null?!0:Oe.mergeOptions_download_sprites;if(B===!0){const ee=t.sprites.map(async U=>a.createSpriteAtlas(U,z));await Promise.all(ee)}(Q===!0||B===!0)&&z.saveZip(E),K.add(s)})()},{t:b}=ye.useContext(So),M=async E=>{if(r.getCurrentOptimizerCharacterModel()){const D=fl(E.name),O=URL.createObjectURL(E);await i.loadAnimation(O,!1,0,!0,"",D),w(i.getCurrentAnimationName()),URL.revokeObjectURL(O)}else console.warn("Please load a vrm model to test animations.")},P=()=>{if(g===0)H(p[p.length-1]),m(p.length-1);else{const E=g-1;H(p[E]),m(E)}},Y=()=>{if(g>=p.length-1)H(p[0]),m(0);else{const E=g+1;H(p[E]),m(E)}},H=async E=>{const F=URL.createObjectURL(E);await r.loadOptimizerCharacter(F),URL.revokeObjectURL(F);const D=fl(E.name);h(D),u({...r.getCurrentCharacterModel()})},I=async E=>{H(E[0]);const F=[];for(let D=0;D<E.length;D++){const O=E[D];O&&O.name.toLowerCase().endsWith(".vrm")&&F.push(E[D])}d(F),m(0)},v=async E=>{const F=E[0];F&&F.name.toLowerCase().endsWith(".fbx")&&M(F),F&&F.name.toLowerCase().endsWith(".vrm")&&I(E)};return N.jsxs("div",{className:fi.container,children:[N.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:N.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),N.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),N.jsx(Eg,{onFilesDrop:v}),N.jsx(__,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Optimizer Options"}),N.jsx(_2,{model:c,name:f,files:p,index:g,nextVrm:Y,previousVrm:P}),N.jsx(s_,{loadedAnimationName:y}),N.jsxs("div",{className:fi.buttonContainer,children:[N.jsx(gn,{theme:"light",text:b("callToAction.back"),size:14,className:fi.buttonLeft,onClick:x}),(p==null?void 0:p.length)>1!=""&&N.jsx(gn,{theme:"light",text:"Download All",size:14,className:fi.buttonRight,onClick:C}),c!=""&&N.jsx(gn,{theme:"light",text:"Download",size:14,className:fi.buttonRight,onClick:T})]})]})}const zOe="_buttonContainer_1fd4o_1",GOe="_buttonLeft_1fd4o_10",VOe="_buttonRight_1fd4o_14",jOe="_buttonCenter_1fd4o_18",Dv={buttonContainer:zOe,buttonLeft:GOe,buttonRight:VOe,buttonCenter:jOe},WOe="_button_13dfi_1",qO={button:WOe},KOe="Anon",YOe=()=>{ye.useContext(So);const[n]=$.useState(localStorage.getItem("name")||KOe),{model:e,characterManager:t}=ye.useContext(Zn),r=()=>{const o=Oe.mergeOptions_sel_option||0;return{createTextureAtlas:Oe.mergeOptions_create_atlas==null?!0:Oe.mergeOptions_create_atlas,mToonAtlasSize:bn(Oe.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:bn(Oe.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:bn(Oe.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:bn(Oe.mergeOptions_atlas_std_transp_size||6),ktxCompression:Oe.merge_options_ktx_compression,exportStdAtlas:o===0||o==2,exportMtoonAtlas:o===1||o==2,twoSidedMaterial:Oe.mergeOptions_two_sided_mat||!1}},i=()=>{const o=r();t.downloadVRM(n,o)},s=()=>{const o=r();t.downloadGLB(n,o)};return N.jsxs($.Fragment,{children:[N.jsx(gn,{theme:"light",text:"GLB",icon:"download",size:14,className:qO.button,onClick:()=>{s()}}),N.jsx(gn,{theme:"light",text:"VRM",icon:"download",size:14,className:qO.button,onClick:i})]})};function $Oe(){const{t:n}=ye.useContext(So),{playSound:e}=$.useContext($s),{isMute:t}=$.useContext(Ys),{setViewMode:r}=$.useContext(Di),i=()=>{r(mt.APPEARANCE),!t&&e("backNextButton")},s=()=>{r(mt.MINT),!t&&e("backNextButton")},o=async a=>{const l=a[0];l&&l.name.toLowerCase().endsWith(".json")};return N.jsxs("div",{className:Dv.container,children:[N.jsx("div",{className:"sectionTitle",children:n("pageTitles.saveCharacter")}),N.jsxs("div",{className:Dv.buttonContainer,children:[N.jsx(Eg,{onFilesDrop:o}),N.jsx(gn,{theme:"light",text:n("callToAction.back"),size:14,className:Dv.buttonLeft,onClick:i}),N.jsx(__,{showCreateAtlas:!0,mergeMenuTitle:"Download Options"}),N.jsx(YOe,{}),N.jsx(gn,{theme:"light",text:"mint",size:14,className:Dv.buttonRight,onClick:s})]})]})}function XOe(){const{t:n}=ye.useContext(So),{setViewMode:e,setIsLoading:t,isLoading:r}=$.useContext(Di),{playSound:i}=$.useContext($s),{isMute:s}=$.useContext(Ys),{manifest:o,characterManager:a}=$.useContext(Zn);ye.useState([]);const[l,A]=ye.useState([]);ye.useEffect(()=>{c()},[]);const c=async()=>{const d=await I2();kDe(d,"the-anata-nft").then(g=>{A(g.nfts),console.log(g.nfts)})},u=()=>{e(mt.LANDING),!s&&i("backNextButton")},f=async d=>{t(!0),a.loadManifest(o[d].manifest).then(()=>{e(mt.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},h=()=>{console.log("ttt"),a.loadManifest(o[0].manifest).then(()=>{a.loadAppendManifest(o[1].manifest,!0).then(()=>{console.log(a.manifestData)})})},p=()=>{!s&&i("classMouseOver")};return N.jsxs("div",{className:`${ot.container} horizontalScroll`,children:[N.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),N.jsx("div",{className:ot.vrmOptimizerButton}),N.jsx("div",{className:ot.topLine}),N.jsx("div",{className:ot.classContainer,children:l.map((d,g)=>N.jsxs("div",{className:ot.class,onClick:()=>f(g),onMouseOver:()=>p(),children:[N.jsx("div",{className:ot.classFrame,style:{backgroundImage:`url(${d.image_url})`},children:N.jsx("div",{className:ot.frameContainer,children:N.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:ot.frame})})}),N.jsx("div",{className:ot.name,children:d.name})]},g))}),N.jsx("div",{className:ot.bottomLine}),N.jsxs("div",{className:ot.buttonContainer,children:[N.jsx(gn,{theme:"light",text:n("callToAction.back"),size:14,className:ot.buttonLeft,onClick:u}),N.jsx(gn,{theme:"light",text:"test",size:14,className:ot.buttonLeft,onClick:h})]})]})}const ZOe=".//manifest.json",JOe=6,qOe=new Z(0,.8,0);new Z(-2.2367993753934425,1.1512971720174363,2.2612065299409223);async function eNe(n){try{const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch manifest. Status: ${e.status}`);return await e.json()}catch(e){return console.error(`Error fetching manifest: ${e.message}`),[]}}async function tNe(){const n=await eNe(ZOe),e=new nme;return{initialManifest:n,effectManager:e}}const nNe=()=>{let n,e;const r=tNe().then(i=>{n="success",e=i},i=>{n="error",e=i});return{read(){if(n==="error")throw e;if(n==="success")return e;throw r}}},rNe=nNe();function iNe(){const{initialManifest:n,effectManager:e}=rNe.read(),[t,r]=ye.useState(!1),{camera:i,controls:s,scene:o,moveCamera:a,setManifest:l,lookAtManager:A,showEnvironmentModels:c}=ye.useContext(Zn),{viewMode:u}=ye.useContext(Di);e.camera=i,e.scene=o;const f=()=>{e.camera&&(a({targetX:0,targetY:qOe.y,targetZ:0,distance:JOe}),s&&([mt.APPEARANCE,mt.SAVE,mt.OPTIMIZER,mt.BATCHDOWNLOAD,mt.BATCHMANIFEST].includes(u)?s.enabled=!0:s.enabled=!1))},[h,p]=ye.useState(!1),[d,g]=ye.useState(""),[m,y]=ye.useState([]),w=(C,T)=>{g(C),p(!0),y([T])},x={[mt.LANDING]:N.jsx(fOe,{}),[mt.APPEARANCE]:N.jsx(APe,{confirmDialog:w}),[mt.OPTIMIZER]:N.jsx(HOe,{}),[mt.CREATE]:N.jsx(AOe,{}),[mt.WALLET]:N.jsx(XOe,{}),[mt.CLAIM]:N.jsx(lOe,{}),[mt.BATCHMANIFEST]:N.jsx(GDe,{}),[mt.BATCHDOWNLOAD]:N.jsx(kPe,{}),[mt.LOAD]:N.jsx(COe,{}),[mt.MINT]:N.jsx(QOe,{}),[mt.SAVE]:N.jsx($Oe,{})};let _=0;return ye.useEffect(()=>{const C=T=>{const b=new Date().getTime(),M=b-_;M<300&&M>10&&T.target.id=="editor-scene"&&r(!t),_=b};return window.addEventListener("touchend",C),window.addEventListener("click",C),()=>{window.removeEventListener("touchend",C),window.removeEventListener("click",C)}},[t]),ye.useEffect(()=>{if(A!=null)return f(),A.enabled=!0,[mt.LANDING,mt.CREATE,mt.CLAIM,mt.LOAD,mt.CLAIM,mt.CLAIM].includes(u)?c(!1):c(!0),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}},[u,A]),ye.useEffect(()=>{l(n)},[n]),ye.useContext(So),N.jsxs(ye.Fragment,{children:[N.jsx("div",{className:"generalTitle",children:"Character Studio"}),N.jsx(wme,{confirmDialogText:d,confirmDialogCallback:m,confirmDialogWindow:h,setConfirmDialogWindow:p}),N.jsx(Bme,{}),x[u]]})}const sNe=n=>{const e=new HM(n);return e.pollingInterval=12e3,e};WB.createRoot(document.getElementById("root")).render(N.jsx($.StrictMode,{children:N.jsx(y7,{getLibrary:sNe,children:N.jsx(TY,{children:N.jsx(Lpe,{children:N.jsx(MY,{children:N.jsx(fde,{children:N.jsx(cde,{children:N.jsx(xde,{children:N.jsx(ye.Suspense,{children:N.jsx(iNe,{})})})})})})})})})}));export{ea as c,El as g};
