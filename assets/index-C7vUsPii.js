function _ne(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function na(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function w7(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var CM={exports:{}},$g={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H4;function xne(){if(H4)return $g;H4=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:r,type:n,key:a,ref:i!==void 0?i:null,props:s}}return $g.Fragment=e,$g.jsx=t,$g.jsxs=t,$g}var Q4;function bne(){return Q4||(Q4=1,CM.exports=xne()),CM.exports}var q=bne(),nb={exports:{}},TM={},e0={},z4;function Ene(){if(z4)return e0;z4=1,e0.byteLength=o,e0.toByteArray=c,e0.fromByteArray=d;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function a(p){var v=p.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=p.indexOf("=");m===-1&&(m=v);var g=m===v?0:4-m%4;return[m,g]}function o(p){var v=a(p),m=v[0],g=v[1];return(m+g)*3/4-g}function l(p,v,m){return(v+m)*3/4-m}function c(p){var v,m=a(p),g=m[0],w=m[1],b=new t(l(p,g,w)),E=0,B=w>0?g-4:g,S;for(S=0;S<B;S+=4)v=e[p.charCodeAt(S)]<<18|e[p.charCodeAt(S+1)]<<12|e[p.charCodeAt(S+2)]<<6|e[p.charCodeAt(S+3)],b[E++]=v>>16&255,b[E++]=v>>8&255,b[E++]=v&255;return w===2&&(v=e[p.charCodeAt(S)]<<2|e[p.charCodeAt(S+1)]>>4,b[E++]=v&255),w===1&&(v=e[p.charCodeAt(S)]<<10|e[p.charCodeAt(S+1)]<<4|e[p.charCodeAt(S+2)]>>2,b[E++]=v>>8&255,b[E++]=v&255),b}function u(p){return r[p>>18&63]+r[p>>12&63]+r[p>>6&63]+r[p&63]}function f(p,v,m){for(var g,w=[],b=v;b<m;b+=3)g=(p[b]<<16&16711680)+(p[b+1]<<8&65280)+(p[b+2]&255),w.push(u(g));return w.join("")}function d(p){for(var v,m=p.length,g=m%3,w=[],b=16383,E=0,B=m-g;E<B;E+=b)w.push(f(p,E,E+b>B?B:E+b));return g===1?(v=p[m-1],w.push(r[v>>2]+r[v<<4&63]+"==")):g===2&&(v=(p[m-2]<<8)+p[m-1],w.push(r[v>>10]+r[v>>4&63]+r[v<<2&63]+"=")),w.join("")}return e0}var Zw={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var V4;function Sne(){return V4||(V4=1,Zw.read=function(r,e,t,n,i){var s,a,o=i*8-n-1,l=(1<<o)-1,c=l>>1,u=-7,f=t?i-1:0,d=t?-1:1,p=r[e+f];for(f+=d,s=p&(1<<-u)-1,p>>=-u,u+=o;u>0;s=s*256+r[e+f],f+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=a*256+r[e+f],f+=d,u-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(p?-1:1)*a*Math.pow(2,s-n)},Zw.write=function(r,e,t,n,i,s){var a,o,l,c=s*8-i-1,u=(1<<c)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,v=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(a++,l/=2),a+f>=u?(o=0,a=u):a+f>=1?(o=(e*l-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;r[t+p]=o&255,p+=v,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;r[t+p]=a&255,p+=v,a/=256,c-=8);r[t+p-v]|=m*128}),Zw}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var G4;function oE(){return G4||(G4=1,function(r){const e=Ene(),t=Sne(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=b,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const J=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(J,j),J.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(J){if(J>i)throw new RangeError('The value "'+J+'" is invalid for option "size"');const j=new Uint8Array(J);return Object.setPrototypeOf(j,o.prototype),j}function o(J,j,X){if(typeof J=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(J)}return l(J,j,X)}o.poolSize=8192;function l(J,j,X){if(typeof J=="string")return d(J,j);if(ArrayBuffer.isView(J))return v(J);if(J==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof J);if(ee(J,ArrayBuffer)||J&&ee(J.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(J,SharedArrayBuffer)||J&&ee(J.buffer,SharedArrayBuffer)))return m(J,j,X);if(typeof J=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const re=J.valueOf&&J.valueOf();if(re!=null&&re!==J)return o.from(re,j,X);const ge=g(J);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof J[Symbol.toPrimitive]=="function")return o.from(J[Symbol.toPrimitive]("string"),j,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof J)}o.from=function(J,j,X){return l(J,j,X)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function c(J){if(typeof J!="number")throw new TypeError('"size" argument must be of type number');if(J<0)throw new RangeError('The value "'+J+'" is invalid for option "size"')}function u(J,j,X){return c(J),J<=0?a(J):j!==void 0?typeof X=="string"?a(J).fill(j,X):a(J).fill(j):a(J)}o.alloc=function(J,j,X){return u(J,j,X)};function f(J){return c(J),a(J<0?0:w(J)|0)}o.allocUnsafe=function(J){return f(J)},o.allocUnsafeSlow=function(J){return f(J)};function d(J,j){if((typeof j!="string"||j==="")&&(j="utf8"),!o.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const X=E(J,j)|0;let re=a(X);const ge=re.write(J,j);return ge!==X&&(re=re.slice(0,ge)),re}function p(J){const j=J.length<0?0:w(J.length)|0,X=a(j);for(let re=0;re<j;re+=1)X[re]=J[re]&255;return X}function v(J){if(ee(J,Uint8Array)){const j=new Uint8Array(J);return m(j.buffer,j.byteOffset,j.byteLength)}return p(J)}function m(J,j,X){if(j<0||J.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<j+(X||0))throw new RangeError('"length" is outside of buffer bounds');let re;return j===void 0&&X===void 0?re=new Uint8Array(J):X===void 0?re=new Uint8Array(J,j):re=new Uint8Array(J,j,X),Object.setPrototypeOf(re,o.prototype),re}function g(J){if(o.isBuffer(J)){const j=w(J.length)|0,X=a(j);return X.length===0||J.copy(X,0,0,j),X}if(J.length!==void 0)return typeof J.length!="number"||pe(J.length)?a(0):p(J);if(J.type==="Buffer"&&Array.isArray(J.data))return p(J.data)}function w(J){if(J>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return J|0}function b(J){return+J!=J&&(J=0),o.alloc(+J)}o.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==o.prototype},o.compare=function(j,X){if(ee(j,Uint8Array)&&(j=o.from(j,j.offset,j.byteLength)),ee(X,Uint8Array)&&(X=o.from(X,X.offset,X.byteLength)),!o.isBuffer(j)||!o.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===X)return 0;let re=j.length,ge=X.length;for(let Me=0,Ee=Math.min(re,ge);Me<Ee;++Me)if(j[Me]!==X[Me]){re=j[Me],ge=X[Me];break}return re<ge?-1:ge<re?1:0},o.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(j,X){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return o.alloc(0);let re;if(X===void 0)for(X=0,re=0;re<j.length;++re)X+=j[re].length;const ge=o.allocUnsafe(X);let Me=0;for(re=0;re<j.length;++re){let Ee=j[re];if(ee(Ee,Uint8Array))Me+Ee.length>ge.length?(o.isBuffer(Ee)||(Ee=o.from(Ee)),Ee.copy(ge,Me)):Uint8Array.prototype.set.call(ge,Ee,Me);else if(o.isBuffer(Ee))Ee.copy(ge,Me);else throw new TypeError('"list" argument must be an Array of Buffers');Me+=Ee.length}return ge};function E(J,j){if(o.isBuffer(J))return J.length;if(ArrayBuffer.isView(J)||ee(J,ArrayBuffer))return J.byteLength;if(typeof J!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof J);const X=J.length,re=arguments.length>2&&arguments[2]===!0;if(!re&&X===0)return 0;let ge=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return se(J).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return ie(J).length;default:if(ge)return re?-1:se(J).length;j=(""+j).toLowerCase(),ge=!0}}o.byteLength=E;function B(J,j,X){let re=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,j>>>=0,X<=j))return"";for(J||(J="utf8");;)switch(J){case"hex":return Y(this,j,X);case"utf8":case"utf-8":return _(this,j,X);case"ascii":return Q(this,j,X);case"latin1":case"binary":return G(this,j,X);case"base64":return F(this,j,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,j,X);default:if(re)throw new TypeError("Unknown encoding: "+J);J=(J+"").toLowerCase(),re=!0}}o.prototype._isBuffer=!0;function S(J,j,X){const re=J[j];J[j]=J[X],J[X]=re}o.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<j;X+=2)S(this,X,X+1);return this},o.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<j;X+=4)S(this,X,X+3),S(this,X+1,X+2);return this},o.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<j;X+=8)S(this,X,X+7),S(this,X+1,X+6),S(this,X+2,X+5),S(this,X+3,X+4);return this},o.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?_(this,0,j):B.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(j){if(!o.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:o.compare(this,j)===0},o.prototype.inspect=function(){let j="";const X=r.INSPECT_MAX_BYTES;return j=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(j+=" ... "),"<Buffer "+j+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(j,X,re,ge,Me){if(ee(j,Uint8Array)&&(j=o.from(j,j.offset,j.byteLength)),!o.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(X===void 0&&(X=0),re===void 0&&(re=j?j.length:0),ge===void 0&&(ge=0),Me===void 0&&(Me=this.length),X<0||re>j.length||ge<0||Me>this.length)throw new RangeError("out of range index");if(ge>=Me&&X>=re)return 0;if(ge>=Me)return-1;if(X>=re)return 1;if(X>>>=0,re>>>=0,ge>>>=0,Me>>>=0,this===j)return 0;let Ee=Me-ge,We=re-X;const et=Math.min(Ee,We),Ze=this.slice(ge,Me),dt=j.slice(X,re);for(let Se=0;Se<et;++Se)if(Ze[Se]!==dt[Se]){Ee=Ze[Se],We=dt[Se];break}return Ee<We?-1:We<Ee?1:0};function M(J,j,X,re,ge){if(J.length===0)return-1;if(typeof X=="string"?(re=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,pe(X)&&(X=ge?0:J.length-1),X<0&&(X=J.length+X),X>=J.length){if(ge)return-1;X=J.length-1}else if(X<0)if(ge)X=0;else return-1;if(typeof j=="string"&&(j=o.from(j,re)),o.isBuffer(j))return j.length===0?-1:I(J,j,X,re,ge);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?ge?Uint8Array.prototype.indexOf.call(J,j,X):Uint8Array.prototype.lastIndexOf.call(J,j,X):I(J,[j],X,re,ge);throw new TypeError("val must be string, number or Buffer")}function I(J,j,X,re,ge){let Me=1,Ee=J.length,We=j.length;if(re!==void 0&&(re=String(re).toLowerCase(),re==="ucs2"||re==="ucs-2"||re==="utf16le"||re==="utf-16le")){if(J.length<2||j.length<2)return-1;Me=2,Ee/=2,We/=2,X/=2}function et(dt,Se){return Me===1?dt[Se]:dt.readUInt16BE(Se*Me)}let Ze;if(ge){let dt=-1;for(Ze=X;Ze<Ee;Ze++)if(et(J,Ze)===et(j,dt===-1?0:Ze-dt)){if(dt===-1&&(dt=Ze),Ze-dt+1===We)return dt*Me}else dt!==-1&&(Ze-=Ze-dt),dt=-1}else for(X+We>Ee&&(X=Ee-We),Ze=X;Ze>=0;Ze--){let dt=!0;for(let Se=0;Se<We;Se++)if(et(J,Ze+Se)!==et(j,Se)){dt=!1;break}if(dt)return Ze}return-1}o.prototype.includes=function(j,X,re){return this.indexOf(j,X,re)!==-1},o.prototype.indexOf=function(j,X,re){return M(this,j,X,re,!0)},o.prototype.lastIndexOf=function(j,X,re){return M(this,j,X,re,!1)};function k(J,j,X,re){X=Number(X)||0;const ge=J.length-X;re?(re=Number(re),re>ge&&(re=ge)):re=ge;const Me=j.length;re>Me/2&&(re=Me/2);let Ee;for(Ee=0;Ee<re;++Ee){const We=parseInt(j.substr(Ee*2,2),16);if(pe(We))return Ee;J[X+Ee]=We}return Ee}function O(J,j,X,re){return $(se(j,J.length-X),J,X,re)}function C(J,j,X,re){return $(ce(j),J,X,re)}function P(J,j,X,re){return $(ie(j),J,X,re)}function D(J,j,X,re){return $(_e(j,J.length-X),J,X,re)}o.prototype.write=function(j,X,re,ge){if(X===void 0)ge="utf8",re=this.length,X=0;else if(re===void 0&&typeof X=="string")ge=X,re=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(re)?(re=re>>>0,ge===void 0&&(ge="utf8")):(ge=re,re=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Me=this.length-X;if((re===void 0||re>Me)&&(re=Me),j.length>0&&(re<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");ge||(ge="utf8");let Ee=!1;for(;;)switch(ge){case"hex":return k(this,j,X,re);case"utf8":case"utf-8":return O(this,j,X,re);case"ascii":case"latin1":case"binary":return C(this,j,X,re);case"base64":return P(this,j,X,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,j,X,re);default:if(Ee)throw new TypeError("Unknown encoding: "+ge);ge=(""+ge).toLowerCase(),Ee=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(J,j,X){return j===0&&X===J.length?e.fromByteArray(J):e.fromByteArray(J.slice(j,X))}function _(J,j,X){X=Math.min(J.length,X);const re=[];let ge=j;for(;ge<X;){const Me=J[ge];let Ee=null,We=Me>239?4:Me>223?3:Me>191?2:1;if(ge+We<=X){let et,Ze,dt,Se;switch(We){case 1:Me<128&&(Ee=Me);break;case 2:et=J[ge+1],(et&192)===128&&(Se=(Me&31)<<6|et&63,Se>127&&(Ee=Se));break;case 3:et=J[ge+1],Ze=J[ge+2],(et&192)===128&&(Ze&192)===128&&(Se=(Me&15)<<12|(et&63)<<6|Ze&63,Se>2047&&(Se<55296||Se>57343)&&(Ee=Se));break;case 4:et=J[ge+1],Ze=J[ge+2],dt=J[ge+3],(et&192)===128&&(Ze&192)===128&&(dt&192)===128&&(Se=(Me&15)<<18|(et&63)<<12|(Ze&63)<<6|dt&63,Se>65535&&Se<1114112&&(Ee=Se))}}Ee===null?(Ee=65533,We=1):Ee>65535&&(Ee-=65536,re.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),re.push(Ee),ge+=We}return L(re)}const R=4096;function L(J){const j=J.length;if(j<=R)return String.fromCharCode.apply(String,J);let X="",re=0;for(;re<j;)X+=String.fromCharCode.apply(String,J.slice(re,re+=R));return X}function Q(J,j,X){let re="";X=Math.min(J.length,X);for(let ge=j;ge<X;++ge)re+=String.fromCharCode(J[ge]&127);return re}function G(J,j,X){let re="";X=Math.min(J.length,X);for(let ge=j;ge<X;++ge)re+=String.fromCharCode(J[ge]);return re}function Y(J,j,X){const re=J.length;(!j||j<0)&&(j=0),(!X||X<0||X>re)&&(X=re);let ge="";for(let Me=j;Me<X;++Me)ge+=xe[J[Me]];return ge}function W(J,j,X){const re=J.slice(j,X);let ge="";for(let Me=0;Me<re.length-1;Me+=2)ge+=String.fromCharCode(re[Me]+re[Me+1]*256);return ge}o.prototype.slice=function(j,X){const re=this.length;j=~~j,X=X===void 0?re:~~X,j<0?(j+=re,j<0&&(j=0)):j>re&&(j=re),X<0?(X+=re,X<0&&(X=0)):X>re&&(X=re),X<j&&(X=j);const ge=this.subarray(j,X);return Object.setPrototypeOf(ge,o.prototype),ge};function V(J,j,X){if(J%1!==0||J<0)throw new RangeError("offset is not uint");if(J+j>X)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(j,X,re){j=j>>>0,X=X>>>0,re||V(j,X,this.length);let ge=this[j],Me=1,Ee=0;for(;++Ee<X&&(Me*=256);)ge+=this[j+Ee]*Me;return ge},o.prototype.readUintBE=o.prototype.readUIntBE=function(j,X,re){j=j>>>0,X=X>>>0,re||V(j,X,this.length);let ge=this[j+--X],Me=1;for(;X>0&&(Me*=256);)ge+=this[j+--X]*Me;return ge},o.prototype.readUint8=o.prototype.readUInt8=function(j,X){return j=j>>>0,X||V(j,1,this.length),this[j]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(j,X){return j=j>>>0,X||V(j,2,this.length),this[j]|this[j+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(j,X){return j=j>>>0,X||V(j,2,this.length),this[j]<<8|this[j+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(j,X){return j=j>>>0,X||V(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(j,X){return j=j>>>0,X||V(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},o.prototype.readBigUInt64LE=be(function(j){j=j>>>0,de(j,"offset");const X=this[j],re=this[j+7];(X===void 0||re===void 0)&&Z(j,this.length-8);const ge=X+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,Me=this[++j]+this[++j]*2**8+this[++j]*2**16+re*2**24;return BigInt(ge)+(BigInt(Me)<<BigInt(32))}),o.prototype.readBigUInt64BE=be(function(j){j=j>>>0,de(j,"offset");const X=this[j],re=this[j+7];(X===void 0||re===void 0)&&Z(j,this.length-8);const ge=X*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],Me=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+re;return(BigInt(ge)<<BigInt(32))+BigInt(Me)}),o.prototype.readIntLE=function(j,X,re){j=j>>>0,X=X>>>0,re||V(j,X,this.length);let ge=this[j],Me=1,Ee=0;for(;++Ee<X&&(Me*=256);)ge+=this[j+Ee]*Me;return Me*=128,ge>=Me&&(ge-=Math.pow(2,8*X)),ge},o.prototype.readIntBE=function(j,X,re){j=j>>>0,X=X>>>0,re||V(j,X,this.length);let ge=X,Me=1,Ee=this[j+--ge];for(;ge>0&&(Me*=256);)Ee+=this[j+--ge]*Me;return Me*=128,Ee>=Me&&(Ee-=Math.pow(2,8*X)),Ee},o.prototype.readInt8=function(j,X){return j=j>>>0,X||V(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},o.prototype.readInt16LE=function(j,X){j=j>>>0,X||V(j,2,this.length);const re=this[j]|this[j+1]<<8;return re&32768?re|4294901760:re},o.prototype.readInt16BE=function(j,X){j=j>>>0,X||V(j,2,this.length);const re=this[j+1]|this[j]<<8;return re&32768?re|4294901760:re},o.prototype.readInt32LE=function(j,X){return j=j>>>0,X||V(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},o.prototype.readInt32BE=function(j,X){return j=j>>>0,X||V(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},o.prototype.readBigInt64LE=be(function(j){j=j>>>0,de(j,"offset");const X=this[j],re=this[j+7];(X===void 0||re===void 0)&&Z(j,this.length-8);const ge=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(re<<24);return(BigInt(ge)<<BigInt(32))+BigInt(X+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),o.prototype.readBigInt64BE=be(function(j){j=j>>>0,de(j,"offset");const X=this[j],re=this[j+7];(X===void 0||re===void 0)&&Z(j,this.length-8);const ge=(X<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(ge)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+re)}),o.prototype.readFloatLE=function(j,X){return j=j>>>0,X||V(j,4,this.length),t.read(this,j,!0,23,4)},o.prototype.readFloatBE=function(j,X){return j=j>>>0,X||V(j,4,this.length),t.read(this,j,!1,23,4)},o.prototype.readDoubleLE=function(j,X){return j=j>>>0,X||V(j,8,this.length),t.read(this,j,!0,52,8)},o.prototype.readDoubleBE=function(j,X){return j=j>>>0,X||V(j,8,this.length),t.read(this,j,!1,52,8)};function T(J,j,X,re,ge,Me){if(!o.isBuffer(J))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>ge||j<Me)throw new RangeError('"value" argument is out of bounds');if(X+re>J.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(j,X,re,ge){if(j=+j,X=X>>>0,re=re>>>0,!ge){const We=Math.pow(2,8*re)-1;T(this,j,X,re,We,0)}let Me=1,Ee=0;for(this[X]=j&255;++Ee<re&&(Me*=256);)this[X+Ee]=j/Me&255;return X+re},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(j,X,re,ge){if(j=+j,X=X>>>0,re=re>>>0,!ge){const We=Math.pow(2,8*re)-1;T(this,j,X,re,We,0)}let Me=re-1,Ee=1;for(this[X+Me]=j&255;--Me>=0&&(Ee*=256);)this[X+Me]=j/Ee&255;return X+re},o.prototype.writeUint8=o.prototype.writeUInt8=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,1,255,0),this[X]=j&255,X+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,2,65535,0),this[X]=j&255,this[X+1]=j>>>8,X+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,2,65535,0),this[X]=j>>>8,this[X+1]=j&255,X+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,4,4294967295,0),this[X+3]=j>>>24,this[X+2]=j>>>16,this[X+1]=j>>>8,this[X]=j&255,X+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,4,4294967295,0),this[X]=j>>>24,this[X+1]=j>>>16,this[X+2]=j>>>8,this[X+3]=j&255,X+4};function H(J,j,X,re,ge){Re(j,re,ge,J,X,7);let Me=Number(j&BigInt(4294967295));J[X++]=Me,Me=Me>>8,J[X++]=Me,Me=Me>>8,J[X++]=Me,Me=Me>>8,J[X++]=Me;let Ee=Number(j>>BigInt(32)&BigInt(4294967295));return J[X++]=Ee,Ee=Ee>>8,J[X++]=Ee,Ee=Ee>>8,J[X++]=Ee,Ee=Ee>>8,J[X++]=Ee,X}function K(J,j,X,re,ge){Re(j,re,ge,J,X,7);let Me=Number(j&BigInt(4294967295));J[X+7]=Me,Me=Me>>8,J[X+6]=Me,Me=Me>>8,J[X+5]=Me,Me=Me>>8,J[X+4]=Me;let Ee=Number(j>>BigInt(32)&BigInt(4294967295));return J[X+3]=Ee,Ee=Ee>>8,J[X+2]=Ee,Ee=Ee>>8,J[X+1]=Ee,Ee=Ee>>8,J[X]=Ee,X+8}o.prototype.writeBigUInt64LE=be(function(j,X=0){return H(this,j,X,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=be(function(j,X=0){return K(this,j,X,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(j,X,re,ge){if(j=+j,X=X>>>0,!ge){const et=Math.pow(2,8*re-1);T(this,j,X,re,et-1,-et)}let Me=0,Ee=1,We=0;for(this[X]=j&255;++Me<re&&(Ee*=256);)j<0&&We===0&&this[X+Me-1]!==0&&(We=1),this[X+Me]=(j/Ee>>0)-We&255;return X+re},o.prototype.writeIntBE=function(j,X,re,ge){if(j=+j,X=X>>>0,!ge){const et=Math.pow(2,8*re-1);T(this,j,X,re,et-1,-et)}let Me=re-1,Ee=1,We=0;for(this[X+Me]=j&255;--Me>=0&&(Ee*=256);)j<0&&We===0&&this[X+Me+1]!==0&&(We=1),this[X+Me]=(j/Ee>>0)-We&255;return X+re},o.prototype.writeInt8=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,1,127,-128),j<0&&(j=255+j+1),this[X]=j&255,X+1},o.prototype.writeInt16LE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,2,32767,-32768),this[X]=j&255,this[X+1]=j>>>8,X+2},o.prototype.writeInt16BE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,2,32767,-32768),this[X]=j>>>8,this[X+1]=j&255,X+2},o.prototype.writeInt32LE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,4,2147483647,-2147483648),this[X]=j&255,this[X+1]=j>>>8,this[X+2]=j>>>16,this[X+3]=j>>>24,X+4},o.prototype.writeInt32BE=function(j,X,re){return j=+j,X=X>>>0,re||T(this,j,X,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[X]=j>>>24,this[X+1]=j>>>16,this[X+2]=j>>>8,this[X+3]=j&255,X+4},o.prototype.writeBigInt64LE=be(function(j,X=0){return H(this,j,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=be(function(j,X=0){return K(this,j,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function N(J,j,X,re,ge,Me){if(X+re>J.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function te(J,j,X,re,ge){return j=+j,X=X>>>0,ge||N(J,j,X,4),t.write(J,j,X,re,23,4),X+4}o.prototype.writeFloatLE=function(j,X,re){return te(this,j,X,!0,re)},o.prototype.writeFloatBE=function(j,X,re){return te(this,j,X,!1,re)};function oe(J,j,X,re,ge){return j=+j,X=X>>>0,ge||N(J,j,X,8),t.write(J,j,X,re,52,8),X+8}o.prototype.writeDoubleLE=function(j,X,re){return oe(this,j,X,!0,re)},o.prototype.writeDoubleBE=function(j,X,re){return oe(this,j,X,!1,re)},o.prototype.copy=function(j,X,re,ge){if(!o.isBuffer(j))throw new TypeError("argument should be a Buffer");if(re||(re=0),!ge&&ge!==0&&(ge=this.length),X>=j.length&&(X=j.length),X||(X=0),ge>0&&ge<re&&(ge=re),ge===re||j.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(re<0||re>=this.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("sourceEnd out of bounds");ge>this.length&&(ge=this.length),j.length-X<ge-re&&(ge=j.length-X+re);const Me=ge-re;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(X,re,ge):Uint8Array.prototype.set.call(j,this.subarray(re,ge),X),Me},o.prototype.fill=function(j,X,re,ge){if(typeof j=="string"){if(typeof X=="string"?(ge=X,X=0,re=this.length):typeof re=="string"&&(ge=re,re=this.length),ge!==void 0&&typeof ge!="string")throw new TypeError("encoding must be a string");if(typeof ge=="string"&&!o.isEncoding(ge))throw new TypeError("Unknown encoding: "+ge);if(j.length===1){const Ee=j.charCodeAt(0);(ge==="utf8"&&Ee<128||ge==="latin1")&&(j=Ee)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(X<0||this.length<X||this.length<re)throw new RangeError("Out of range index");if(re<=X)return this;X=X>>>0,re=re===void 0?this.length:re>>>0,j||(j=0);let Me;if(typeof j=="number")for(Me=X;Me<re;++Me)this[Me]=j;else{const Ee=o.isBuffer(j)?j:o.from(j,ge),We=Ee.length;if(We===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(Me=0;Me<re-X;++Me)this[Me+X]=Ee[Me%We]}return this};const fe={};function he(J,j,X){fe[J]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${J}]`,this.stack,delete this.name}get code(){return J}set code(ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ge,writable:!0})}toString(){return`${this.name} [${J}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function(J){return J?`${J} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function(J,j){return`The "${J}" argument must be of type number. Received type ${typeof j}`},TypeError),he("ERR_OUT_OF_RANGE",function(J,j,X){let re=`The value of "${J}" is out of range.`,ge=X;return Number.isInteger(X)&&Math.abs(X)>2**32?ge=me(String(X)):typeof X=="bigint"&&(ge=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(ge=me(ge)),ge+="n"),re+=` It must be ${j}. Received ${ge}`,re},RangeError);function me(J){let j="",X=J.length;const re=J[0]==="-"?1:0;for(;X>=re+4;X-=3)j=`_${J.slice(X-3,X)}${j}`;return`${J.slice(0,X)}${j}`}function Te(J,j,X){de(j,"offset"),(J[j]===void 0||J[j+X]===void 0)&&Z(j,J.length-(X+1))}function Re(J,j,X,re,ge,Me){if(J>X||J<j){const Ee=typeof j=="bigint"?"n":"";let We;throw j===0||j===BigInt(0)?We=`>= 0${Ee} and < 2${Ee} ** ${(Me+1)*8}${Ee}`:We=`>= -(2${Ee} ** ${(Me+1)*8-1}${Ee}) and < 2 ** ${(Me+1)*8-1}${Ee}`,new fe.ERR_OUT_OF_RANGE("value",We,J)}Te(re,ge,Me)}function de(J,j){if(typeof J!="number")throw new fe.ERR_INVALID_ARG_TYPE(j,"number",J)}function Z(J,j,X){throw Math.floor(J)!==J?(de(J,X),new fe.ERR_OUT_OF_RANGE("offset","an integer",J)):j<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,J)}const ve=/[^+/0-9A-Za-z-_]/g;function ye(J){if(J=J.split("=")[0],J=J.trim().replace(ve,""),J.length<2)return"";for(;J.length%4!==0;)J=J+"=";return J}function se(J,j){j=j||1/0;let X;const re=J.length;let ge=null;const Me=[];for(let Ee=0;Ee<re;++Ee){if(X=J.charCodeAt(Ee),X>55295&&X<57344){if(!ge){if(X>56319){(j-=3)>-1&&Me.push(239,191,189);continue}else if(Ee+1===re){(j-=3)>-1&&Me.push(239,191,189);continue}ge=X;continue}if(X<56320){(j-=3)>-1&&Me.push(239,191,189),ge=X;continue}X=(ge-55296<<10|X-56320)+65536}else ge&&(j-=3)>-1&&Me.push(239,191,189);if(ge=null,X<128){if((j-=1)<0)break;Me.push(X)}else if(X<2048){if((j-=2)<0)break;Me.push(X>>6|192,X&63|128)}else if(X<65536){if((j-=3)<0)break;Me.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((j-=4)<0)break;Me.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Me}function ce(J){const j=[];for(let X=0;X<J.length;++X)j.push(J.charCodeAt(X)&255);return j}function _e(J,j){let X,re,ge;const Me=[];for(let Ee=0;Ee<J.length&&!((j-=2)<0);++Ee)X=J.charCodeAt(Ee),re=X>>8,ge=X%256,Me.push(ge),Me.push(re);return Me}function ie(J){return e.toByteArray(ye(J))}function $(J,j,X,re){let ge;for(ge=0;ge<re&&!(ge+X>=j.length||ge>=J.length);++ge)j[ge+X]=J[ge];return ge}function ee(J,j){return J instanceof j||J!=null&&J.constructor!=null&&J.constructor.name!=null&&J.constructor.name===j.name}function pe(J){return J!==J}const xe=function(){const J="0123456789abcdef",j=new Array(256);for(let X=0;X<16;++X){const re=X*16;for(let ge=0;ge<16;++ge)j[re+ge]=J[X]+J[ge]}return j}();function be(J){return typeof BigInt>"u"?De:J}function De(){throw new Error("BigInt not supported")}}(TM)),TM}var Bne=nb.exports,j4;function _7(){return j4||(j4=1,function(r){(function(e,t){function n(F,_){if(!F)throw new Error(_||"Assertion failed")}function i(F,_){F.super_=_;var R=function(){};R.prototype=_.prototype,F.prototype=new R,F.prototype.constructor=F}function s(F,_,R){if(s.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&((_==="le"||_==="be")&&(R=_,_=10),this._init(F||0,_||10,R||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=oE().Buffer}catch{}s.isBN=function(_){return _ instanceof s?!0:_!==null&&typeof _=="object"&&_.constructor.wordSize===s.wordSize&&Array.isArray(_.words)},s.max=function(_,R){return _.cmp(R)>0?_:R},s.min=function(_,R){return _.cmp(R)<0?_:R},s.prototype._init=function(_,R,L){if(typeof _=="number")return this._initNumber(_,R,L);if(typeof _=="object")return this._initArray(_,R,L);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),_=_.toString().replace(/\s+/g,"");var Q=0;_[0]==="-"&&(Q++,this.negative=1),Q<_.length&&(R===16?this._parseHex(_,Q,L):(this._parseBase(_,R,Q),L==="le"&&this._initArray(this.toArray(),R,L)))},s.prototype._initNumber=function(_,R,L){_<0&&(this.negative=1,_=-_),_<67108864?(this.words=[_&67108863],this.length=1):_<4503599627370496?(this.words=[_&67108863,_/67108864&67108863],this.length=2):(n(_<9007199254740992),this.words=[_&67108863,_/67108864&67108863,1],this.length=3),L==="le"&&this._initArray(this.toArray(),R,L)},s.prototype._initArray=function(_,R,L){if(n(typeof _.length=="number"),_.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_.length/3),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var G,Y,W=0;if(L==="be")for(Q=_.length-1,G=0;Q>=0;Q-=3)Y=_[Q]|_[Q-1]<<8|_[Q-2]<<16,this.words[G]|=Y<<W&67108863,this.words[G+1]=Y>>>26-W&67108863,W+=24,W>=26&&(W-=26,G++);else if(L==="le")for(Q=0,G=0;Q<_.length;Q+=3)Y=_[Q]|_[Q+1]<<8|_[Q+2]<<16,this.words[G]|=Y<<W&67108863,this.words[G+1]=Y>>>26-W&67108863,W+=24,W>=26&&(W-=26,G++);return this._strip()};function o(F,_){var R=F.charCodeAt(_);if(R>=48&&R<=57)return R-48;if(R>=65&&R<=70)return R-55;if(R>=97&&R<=102)return R-87;n(!1,"Invalid character in "+F)}function l(F,_,R){var L=o(F,R);return R-1>=_&&(L|=o(F,R-1)<<4),L}s.prototype._parseHex=function(_,R,L){this.length=Math.ceil((_.length-R)/6),this.words=new Array(this.length);for(var Q=0;Q<this.length;Q++)this.words[Q]=0;var G=0,Y=0,W;if(L==="be")for(Q=_.length-1;Q>=R;Q-=2)W=l(_,R,Q)<<G,this.words[Y]|=W&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=W>>>26):G+=8;else{var V=_.length-R;for(Q=V%2===0?R+1:R;Q<_.length;Q+=2)W=l(_,R,Q)<<G,this.words[Y]|=W&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=W>>>26):G+=8}this._strip()};function c(F,_,R,L){for(var Q=0,G=0,Y=Math.min(F.length,R),W=_;W<Y;W++){var V=F.charCodeAt(W)-48;Q*=L,V>=49?G=V-49+10:V>=17?G=V-17+10:G=V,n(V>=0&&G<L,"Invalid character"),Q+=G}return Q}s.prototype._parseBase=function(_,R,L){this.words=[0],this.length=1;for(var Q=0,G=1;G<=67108863;G*=R)Q++;Q--,G=G/R|0;for(var Y=_.length-L,W=Y%Q,V=Math.min(Y,Y-W)+L,T=0,H=L;H<V;H+=Q)T=c(_,H,H+Q,R),this.imuln(G),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(W!==0){var K=1;for(T=c(_,H,_.length,R),H=0;H<W;H++)K*=R;this.imuln(K),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},s.prototype.copy=function(_){_.words=new Array(this.length);for(var R=0;R<this.length;R++)_.words[R]=this.words[R];_.length=this.length,_.negative=this.negative,_.red=this.red};function u(F,_){F.words=_.words,F.length=_.length,F.negative=_.negative,F.red=_.red}if(s.prototype._move=function(_){u(_,this)},s.prototype.clone=function(){var _=new s(null);return this.copy(_),_},s.prototype._expand=function(_){for(;this.length<_;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(_,R){_=_||10,R=R|0||1;var L;if(_===16||_==="hex"){L="";for(var Q=0,G=0,Y=0;Y<this.length;Y++){var W=this.words[Y],V=((W<<Q|G)&16777215).toString(16);G=W>>>24-Q&16777215,Q+=2,Q>=26&&(Q-=26,Y--),G!==0||Y!==this.length-1?L=d[6-V.length]+V+L:L=V+L}for(G!==0&&(L=G.toString(16)+L);L.length%R!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}if(_===(_|0)&&_>=2&&_<=36){var T=p[_],H=v[_];L="";var K=this.clone();for(K.negative=0;!K.isZero();){var N=K.modrn(H).toString(_);K=K.idivn(H),K.isZero()?L=N+L:L=d[T-N.length]+N+L}for(this.isZero()&&(L="0"+L);L.length%R!==0;)L="0"+L;return this.negative!==0&&(L="-"+L),L}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var _=this.words[0];return this.length===2?_+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_:_},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(_,R){return this.toArrayLike(a,_,R)}),s.prototype.toArray=function(_,R){return this.toArrayLike(Array,_,R)};var m=function(_,R){return _.allocUnsafe?_.allocUnsafe(R):new _(R)};s.prototype.toArrayLike=function(_,R,L){this._strip();var Q=this.byteLength(),G=L||Math.max(1,Q);n(Q<=G,"byte array longer than desired length"),n(G>0,"Requested array length <= 0");var Y=m(_,G),W=R==="le"?"LE":"BE";return this["_toArrayLike"+W](Y,Q),Y},s.prototype._toArrayLikeLE=function(_,R){for(var L=0,Q=0,G=0,Y=0;G<this.length;G++){var W=this.words[G]<<Y|Q;_[L++]=W&255,L<_.length&&(_[L++]=W>>8&255),L<_.length&&(_[L++]=W>>16&255),Y===6?(L<_.length&&(_[L++]=W>>24&255),Q=0,Y=0):(Q=W>>>24,Y+=2)}if(L<_.length)for(_[L++]=Q;L<_.length;)_[L++]=0},s.prototype._toArrayLikeBE=function(_,R){for(var L=_.length-1,Q=0,G=0,Y=0;G<this.length;G++){var W=this.words[G]<<Y|Q;_[L--]=W&255,L>=0&&(_[L--]=W>>8&255),L>=0&&(_[L--]=W>>16&255),Y===6?(L>=0&&(_[L--]=W>>24&255),Q=0,Y=0):(Q=W>>>24,Y+=2)}if(L>=0)for(_[L--]=Q;L>=0;)_[L--]=0},Math.clz32?s.prototype._countBits=function(_){return 32-Math.clz32(_)}:s.prototype._countBits=function(_){var R=_,L=0;return R>=4096&&(L+=13,R>>>=13),R>=64&&(L+=7,R>>>=7),R>=8&&(L+=4,R>>>=4),R>=2&&(L+=2,R>>>=2),L+R},s.prototype._zeroBits=function(_){if(_===0)return 26;var R=_,L=0;return(R&8191)===0&&(L+=13,R>>>=13),(R&127)===0&&(L+=7,R>>>=7),(R&15)===0&&(L+=4,R>>>=4),(R&3)===0&&(L+=2,R>>>=2),(R&1)===0&&L++,L},s.prototype.bitLength=function(){var _=this.words[this.length-1],R=this._countBits(_);return(this.length-1)*26+R};function g(F){for(var _=new Array(F.bitLength()),R=0;R<_.length;R++){var L=R/26|0,Q=R%26;_[R]=F.words[L]>>>Q&1}return _}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _=0,R=0;R<this.length;R++){var L=this._zeroBits(this.words[R]);if(_+=L,L!==26)break}return _},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(_){return this.negative!==0?this.abs().inotn(_).iaddn(1):this.clone()},s.prototype.fromTwos=function(_){return this.testn(_-1)?this.notn(_).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(_){for(;this.length<_.length;)this.words[this.length++]=0;for(var R=0;R<_.length;R++)this.words[R]=this.words[R]|_.words[R];return this._strip()},s.prototype.ior=function(_){return n((this.negative|_.negative)===0),this.iuor(_)},s.prototype.or=function(_){return this.length>_.length?this.clone().ior(_):_.clone().ior(this)},s.prototype.uor=function(_){return this.length>_.length?this.clone().iuor(_):_.clone().iuor(this)},s.prototype.iuand=function(_){var R;this.length>_.length?R=_:R=this;for(var L=0;L<R.length;L++)this.words[L]=this.words[L]&_.words[L];return this.length=R.length,this._strip()},s.prototype.iand=function(_){return n((this.negative|_.negative)===0),this.iuand(_)},s.prototype.and=function(_){return this.length>_.length?this.clone().iand(_):_.clone().iand(this)},s.prototype.uand=function(_){return this.length>_.length?this.clone().iuand(_):_.clone().iuand(this)},s.prototype.iuxor=function(_){var R,L;this.length>_.length?(R=this,L=_):(R=_,L=this);for(var Q=0;Q<L.length;Q++)this.words[Q]=R.words[Q]^L.words[Q];if(this!==R)for(;Q<R.length;Q++)this.words[Q]=R.words[Q];return this.length=R.length,this._strip()},s.prototype.ixor=function(_){return n((this.negative|_.negative)===0),this.iuxor(_)},s.prototype.xor=function(_){return this.length>_.length?this.clone().ixor(_):_.clone().ixor(this)},s.prototype.uxor=function(_){return this.length>_.length?this.clone().iuxor(_):_.clone().iuxor(this)},s.prototype.inotn=function(_){n(typeof _=="number"&&_>=0);var R=Math.ceil(_/26)|0,L=_%26;this._expand(R),L>0&&R--;for(var Q=0;Q<R;Q++)this.words[Q]=~this.words[Q]&67108863;return L>0&&(this.words[Q]=~this.words[Q]&67108863>>26-L),this._strip()},s.prototype.notn=function(_){return this.clone().inotn(_)},s.prototype.setn=function(_,R){n(typeof _=="number"&&_>=0);var L=_/26|0,Q=_%26;return this._expand(L+1),R?this.words[L]=this.words[L]|1<<Q:this.words[L]=this.words[L]&~(1<<Q),this._strip()},s.prototype.iadd=function(_){var R;if(this.negative!==0&&_.negative===0)return this.negative=0,R=this.isub(_),this.negative^=1,this._normSign();if(this.negative===0&&_.negative!==0)return _.negative=0,R=this.isub(_),_.negative=1,R._normSign();var L,Q;this.length>_.length?(L=this,Q=_):(L=_,Q=this);for(var G=0,Y=0;Y<Q.length;Y++)R=(L.words[Y]|0)+(Q.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;for(;G!==0&&Y<L.length;Y++)R=(L.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;if(this.length=L.length,G!==0)this.words[this.length]=G,this.length++;else if(L!==this)for(;Y<L.length;Y++)this.words[Y]=L.words[Y];return this},s.prototype.add=function(_){var R;return _.negative!==0&&this.negative===0?(_.negative=0,R=this.sub(_),_.negative^=1,R):_.negative===0&&this.negative!==0?(this.negative=0,R=_.sub(this),this.negative=1,R):this.length>_.length?this.clone().iadd(_):_.clone().iadd(this)},s.prototype.isub=function(_){if(_.negative!==0){_.negative=0;var R=this.iadd(_);return _.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_),this.negative=1,this._normSign();var L=this.cmp(_);if(L===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Q,G;L>0?(Q=this,G=_):(Q=_,G=this);for(var Y=0,W=0;W<G.length;W++)R=(Q.words[W]|0)-(G.words[W]|0)+Y,Y=R>>26,this.words[W]=R&67108863;for(;Y!==0&&W<Q.length;W++)R=(Q.words[W]|0)+Y,Y=R>>26,this.words[W]=R&67108863;if(Y===0&&W<Q.length&&Q!==this)for(;W<Q.length;W++)this.words[W]=Q.words[W];return this.length=Math.max(this.length,W),Q!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(_){return this.clone().isub(_)};function w(F,_,R){R.negative=_.negative^F.negative;var L=F.length+_.length|0;R.length=L,L=L-1|0;var Q=F.words[0]|0,G=_.words[0]|0,Y=Q*G,W=Y&67108863,V=Y/67108864|0;R.words[0]=W;for(var T=1;T<L;T++){for(var H=V>>>26,K=V&67108863,N=Math.min(T,_.length-1),te=Math.max(0,T-F.length+1);te<=N;te++){var oe=T-te|0;Q=F.words[oe]|0,G=_.words[te]|0,Y=Q*G+K,H+=Y/67108864|0,K=Y&67108863}R.words[T]=K|0,V=H|0}return V!==0?R.words[T]=V|0:R.length--,R._strip()}var b=function(_,R,L){var Q=_.words,G=R.words,Y=L.words,W=0,V,T,H,K=Q[0]|0,N=K&8191,te=K>>>13,oe=Q[1]|0,fe=oe&8191,he=oe>>>13,me=Q[2]|0,Te=me&8191,Re=me>>>13,de=Q[3]|0,Z=de&8191,ve=de>>>13,ye=Q[4]|0,se=ye&8191,ce=ye>>>13,_e=Q[5]|0,ie=_e&8191,$=_e>>>13,ee=Q[6]|0,pe=ee&8191,xe=ee>>>13,be=Q[7]|0,De=be&8191,J=be>>>13,j=Q[8]|0,X=j&8191,re=j>>>13,ge=Q[9]|0,Me=ge&8191,Ee=ge>>>13,We=G[0]|0,et=We&8191,Ze=We>>>13,dt=G[1]|0,Se=dt&8191,Je=dt>>>13,Ve=G[2]|0,je=Ve&8191,Ye=Ve>>>13,rt=G[3]|0,wt=rt&8191,kt=rt>>>13,ur=G[4]|0,bt=ur&8191,en=ur>>>13,ri=G[5]|0,An=ri&8191,Xt=ri>>>13,jn=G[6]|0,pn=jn&8191,Pn=jn>>>13,ia=G[7]|0,kn=ia&8191,Un=ia>>>13,ii=G[8]|0,Hn=ii&8191,yn=ii>>>13,is=G[9]|0,Fn=is&8191,wn=is>>>13;L.negative=_.negative^R.negative,L.length=19,V=Math.imul(N,et),T=Math.imul(N,Ze),T=T+Math.imul(te,et)|0,H=Math.imul(te,Ze);var Ae=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,V=Math.imul(fe,et),T=Math.imul(fe,Ze),T=T+Math.imul(he,et)|0,H=Math.imul(he,Ze),V=V+Math.imul(N,Se)|0,T=T+Math.imul(N,Je)|0,T=T+Math.imul(te,Se)|0,H=H+Math.imul(te,Je)|0;var Ue=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,V=Math.imul(Te,et),T=Math.imul(Te,Ze),T=T+Math.imul(Re,et)|0,H=Math.imul(Re,Ze),V=V+Math.imul(fe,Se)|0,T=T+Math.imul(fe,Je)|0,T=T+Math.imul(he,Se)|0,H=H+Math.imul(he,Je)|0,V=V+Math.imul(N,je)|0,T=T+Math.imul(N,Ye)|0,T=T+Math.imul(te,je)|0,H=H+Math.imul(te,Ye)|0;var Ne=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,V=Math.imul(Z,et),T=Math.imul(Z,Ze),T=T+Math.imul(ve,et)|0,H=Math.imul(ve,Ze),V=V+Math.imul(Te,Se)|0,T=T+Math.imul(Te,Je)|0,T=T+Math.imul(Re,Se)|0,H=H+Math.imul(Re,Je)|0,V=V+Math.imul(fe,je)|0,T=T+Math.imul(fe,Ye)|0,T=T+Math.imul(he,je)|0,H=H+Math.imul(he,Ye)|0,V=V+Math.imul(N,wt)|0,T=T+Math.imul(N,kt)|0,T=T+Math.imul(te,wt)|0,H=H+Math.imul(te,kt)|0;var Pe=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,V=Math.imul(se,et),T=Math.imul(se,Ze),T=T+Math.imul(ce,et)|0,H=Math.imul(ce,Ze),V=V+Math.imul(Z,Se)|0,T=T+Math.imul(Z,Je)|0,T=T+Math.imul(ve,Se)|0,H=H+Math.imul(ve,Je)|0,V=V+Math.imul(Te,je)|0,T=T+Math.imul(Te,Ye)|0,T=T+Math.imul(Re,je)|0,H=H+Math.imul(Re,Ye)|0,V=V+Math.imul(fe,wt)|0,T=T+Math.imul(fe,kt)|0,T=T+Math.imul(he,wt)|0,H=H+Math.imul(he,kt)|0,V=V+Math.imul(N,bt)|0,T=T+Math.imul(N,en)|0,T=T+Math.imul(te,bt)|0,H=H+Math.imul(te,en)|0;var Fe=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,V=Math.imul(ie,et),T=Math.imul(ie,Ze),T=T+Math.imul($,et)|0,H=Math.imul($,Ze),V=V+Math.imul(se,Se)|0,T=T+Math.imul(se,Je)|0,T=T+Math.imul(ce,Se)|0,H=H+Math.imul(ce,Je)|0,V=V+Math.imul(Z,je)|0,T=T+Math.imul(Z,Ye)|0,T=T+Math.imul(ve,je)|0,H=H+Math.imul(ve,Ye)|0,V=V+Math.imul(Te,wt)|0,T=T+Math.imul(Te,kt)|0,T=T+Math.imul(Re,wt)|0,H=H+Math.imul(Re,kt)|0,V=V+Math.imul(fe,bt)|0,T=T+Math.imul(fe,en)|0,T=T+Math.imul(he,bt)|0,H=H+Math.imul(he,en)|0,V=V+Math.imul(N,An)|0,T=T+Math.imul(N,Xt)|0,T=T+Math.imul(te,An)|0,H=H+Math.imul(te,Xt)|0;var nt=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(nt>>>26)|0,nt&=67108863,V=Math.imul(pe,et),T=Math.imul(pe,Ze),T=T+Math.imul(xe,et)|0,H=Math.imul(xe,Ze),V=V+Math.imul(ie,Se)|0,T=T+Math.imul(ie,Je)|0,T=T+Math.imul($,Se)|0,H=H+Math.imul($,Je)|0,V=V+Math.imul(se,je)|0,T=T+Math.imul(se,Ye)|0,T=T+Math.imul(ce,je)|0,H=H+Math.imul(ce,Ye)|0,V=V+Math.imul(Z,wt)|0,T=T+Math.imul(Z,kt)|0,T=T+Math.imul(ve,wt)|0,H=H+Math.imul(ve,kt)|0,V=V+Math.imul(Te,bt)|0,T=T+Math.imul(Te,en)|0,T=T+Math.imul(Re,bt)|0,H=H+Math.imul(Re,en)|0,V=V+Math.imul(fe,An)|0,T=T+Math.imul(fe,Xt)|0,T=T+Math.imul(he,An)|0,H=H+Math.imul(he,Xt)|0,V=V+Math.imul(N,pn)|0,T=T+Math.imul(N,Pn)|0,T=T+Math.imul(te,pn)|0,H=H+Math.imul(te,Pn)|0;var ht=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(ht>>>26)|0,ht&=67108863,V=Math.imul(De,et),T=Math.imul(De,Ze),T=T+Math.imul(J,et)|0,H=Math.imul(J,Ze),V=V+Math.imul(pe,Se)|0,T=T+Math.imul(pe,Je)|0,T=T+Math.imul(xe,Se)|0,H=H+Math.imul(xe,Je)|0,V=V+Math.imul(ie,je)|0,T=T+Math.imul(ie,Ye)|0,T=T+Math.imul($,je)|0,H=H+Math.imul($,Ye)|0,V=V+Math.imul(se,wt)|0,T=T+Math.imul(se,kt)|0,T=T+Math.imul(ce,wt)|0,H=H+Math.imul(ce,kt)|0,V=V+Math.imul(Z,bt)|0,T=T+Math.imul(Z,en)|0,T=T+Math.imul(ve,bt)|0,H=H+Math.imul(ve,en)|0,V=V+Math.imul(Te,An)|0,T=T+Math.imul(Te,Xt)|0,T=T+Math.imul(Re,An)|0,H=H+Math.imul(Re,Xt)|0,V=V+Math.imul(fe,pn)|0,T=T+Math.imul(fe,Pn)|0,T=T+Math.imul(he,pn)|0,H=H+Math.imul(he,Pn)|0,V=V+Math.imul(N,kn)|0,T=T+Math.imul(N,Un)|0,T=T+Math.imul(te,kn)|0,H=H+Math.imul(te,Un)|0;var xt=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(xt>>>26)|0,xt&=67108863,V=Math.imul(X,et),T=Math.imul(X,Ze),T=T+Math.imul(re,et)|0,H=Math.imul(re,Ze),V=V+Math.imul(De,Se)|0,T=T+Math.imul(De,Je)|0,T=T+Math.imul(J,Se)|0,H=H+Math.imul(J,Je)|0,V=V+Math.imul(pe,je)|0,T=T+Math.imul(pe,Ye)|0,T=T+Math.imul(xe,je)|0,H=H+Math.imul(xe,Ye)|0,V=V+Math.imul(ie,wt)|0,T=T+Math.imul(ie,kt)|0,T=T+Math.imul($,wt)|0,H=H+Math.imul($,kt)|0,V=V+Math.imul(se,bt)|0,T=T+Math.imul(se,en)|0,T=T+Math.imul(ce,bt)|0,H=H+Math.imul(ce,en)|0,V=V+Math.imul(Z,An)|0,T=T+Math.imul(Z,Xt)|0,T=T+Math.imul(ve,An)|0,H=H+Math.imul(ve,Xt)|0,V=V+Math.imul(Te,pn)|0,T=T+Math.imul(Te,Pn)|0,T=T+Math.imul(Re,pn)|0,H=H+Math.imul(Re,Pn)|0,V=V+Math.imul(fe,kn)|0,T=T+Math.imul(fe,Un)|0,T=T+Math.imul(he,kn)|0,H=H+Math.imul(he,Un)|0,V=V+Math.imul(N,Hn)|0,T=T+Math.imul(N,yn)|0,T=T+Math.imul(te,Hn)|0,H=H+Math.imul(te,yn)|0;var Et=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Et>>>26)|0,Et&=67108863,V=Math.imul(Me,et),T=Math.imul(Me,Ze),T=T+Math.imul(Ee,et)|0,H=Math.imul(Ee,Ze),V=V+Math.imul(X,Se)|0,T=T+Math.imul(X,Je)|0,T=T+Math.imul(re,Se)|0,H=H+Math.imul(re,Je)|0,V=V+Math.imul(De,je)|0,T=T+Math.imul(De,Ye)|0,T=T+Math.imul(J,je)|0,H=H+Math.imul(J,Ye)|0,V=V+Math.imul(pe,wt)|0,T=T+Math.imul(pe,kt)|0,T=T+Math.imul(xe,wt)|0,H=H+Math.imul(xe,kt)|0,V=V+Math.imul(ie,bt)|0,T=T+Math.imul(ie,en)|0,T=T+Math.imul($,bt)|0,H=H+Math.imul($,en)|0,V=V+Math.imul(se,An)|0,T=T+Math.imul(se,Xt)|0,T=T+Math.imul(ce,An)|0,H=H+Math.imul(ce,Xt)|0,V=V+Math.imul(Z,pn)|0,T=T+Math.imul(Z,Pn)|0,T=T+Math.imul(ve,pn)|0,H=H+Math.imul(ve,Pn)|0,V=V+Math.imul(Te,kn)|0,T=T+Math.imul(Te,Un)|0,T=T+Math.imul(Re,kn)|0,H=H+Math.imul(Re,Un)|0,V=V+Math.imul(fe,Hn)|0,T=T+Math.imul(fe,yn)|0,T=T+Math.imul(he,Hn)|0,H=H+Math.imul(he,yn)|0,V=V+Math.imul(N,Fn)|0,T=T+Math.imul(N,wn)|0,T=T+Math.imul(te,Fn)|0,H=H+Math.imul(te,wn)|0;var Dt=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,V=Math.imul(Me,Se),T=Math.imul(Me,Je),T=T+Math.imul(Ee,Se)|0,H=Math.imul(Ee,Je),V=V+Math.imul(X,je)|0,T=T+Math.imul(X,Ye)|0,T=T+Math.imul(re,je)|0,H=H+Math.imul(re,Ye)|0,V=V+Math.imul(De,wt)|0,T=T+Math.imul(De,kt)|0,T=T+Math.imul(J,wt)|0,H=H+Math.imul(J,kt)|0,V=V+Math.imul(pe,bt)|0,T=T+Math.imul(pe,en)|0,T=T+Math.imul(xe,bt)|0,H=H+Math.imul(xe,en)|0,V=V+Math.imul(ie,An)|0,T=T+Math.imul(ie,Xt)|0,T=T+Math.imul($,An)|0,H=H+Math.imul($,Xt)|0,V=V+Math.imul(se,pn)|0,T=T+Math.imul(se,Pn)|0,T=T+Math.imul(ce,pn)|0,H=H+Math.imul(ce,Pn)|0,V=V+Math.imul(Z,kn)|0,T=T+Math.imul(Z,Un)|0,T=T+Math.imul(ve,kn)|0,H=H+Math.imul(ve,Un)|0,V=V+Math.imul(Te,Hn)|0,T=T+Math.imul(Te,yn)|0,T=T+Math.imul(Re,Hn)|0,H=H+Math.imul(Re,yn)|0,V=V+Math.imul(fe,Fn)|0,T=T+Math.imul(fe,wn)|0,T=T+Math.imul(he,Fn)|0,H=H+Math.imul(he,wn)|0;var Nt=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,V=Math.imul(Me,je),T=Math.imul(Me,Ye),T=T+Math.imul(Ee,je)|0,H=Math.imul(Ee,Ye),V=V+Math.imul(X,wt)|0,T=T+Math.imul(X,kt)|0,T=T+Math.imul(re,wt)|0,H=H+Math.imul(re,kt)|0,V=V+Math.imul(De,bt)|0,T=T+Math.imul(De,en)|0,T=T+Math.imul(J,bt)|0,H=H+Math.imul(J,en)|0,V=V+Math.imul(pe,An)|0,T=T+Math.imul(pe,Xt)|0,T=T+Math.imul(xe,An)|0,H=H+Math.imul(xe,Xt)|0,V=V+Math.imul(ie,pn)|0,T=T+Math.imul(ie,Pn)|0,T=T+Math.imul($,pn)|0,H=H+Math.imul($,Pn)|0,V=V+Math.imul(se,kn)|0,T=T+Math.imul(se,Un)|0,T=T+Math.imul(ce,kn)|0,H=H+Math.imul(ce,Un)|0,V=V+Math.imul(Z,Hn)|0,T=T+Math.imul(Z,yn)|0,T=T+Math.imul(ve,Hn)|0,H=H+Math.imul(ve,yn)|0,V=V+Math.imul(Te,Fn)|0,T=T+Math.imul(Te,wn)|0,T=T+Math.imul(Re,Fn)|0,H=H+Math.imul(Re,wn)|0;var _t=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(_t>>>26)|0,_t&=67108863,V=Math.imul(Me,wt),T=Math.imul(Me,kt),T=T+Math.imul(Ee,wt)|0,H=Math.imul(Ee,kt),V=V+Math.imul(X,bt)|0,T=T+Math.imul(X,en)|0,T=T+Math.imul(re,bt)|0,H=H+Math.imul(re,en)|0,V=V+Math.imul(De,An)|0,T=T+Math.imul(De,Xt)|0,T=T+Math.imul(J,An)|0,H=H+Math.imul(J,Xt)|0,V=V+Math.imul(pe,pn)|0,T=T+Math.imul(pe,Pn)|0,T=T+Math.imul(xe,pn)|0,H=H+Math.imul(xe,Pn)|0,V=V+Math.imul(ie,kn)|0,T=T+Math.imul(ie,Un)|0,T=T+Math.imul($,kn)|0,H=H+Math.imul($,Un)|0,V=V+Math.imul(se,Hn)|0,T=T+Math.imul(se,yn)|0,T=T+Math.imul(ce,Hn)|0,H=H+Math.imul(ce,yn)|0,V=V+Math.imul(Z,Fn)|0,T=T+Math.imul(Z,wn)|0,T=T+Math.imul(ve,Fn)|0,H=H+Math.imul(ve,wn)|0;var _n=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(_n>>>26)|0,_n&=67108863,V=Math.imul(Me,bt),T=Math.imul(Me,en),T=T+Math.imul(Ee,bt)|0,H=Math.imul(Ee,en),V=V+Math.imul(X,An)|0,T=T+Math.imul(X,Xt)|0,T=T+Math.imul(re,An)|0,H=H+Math.imul(re,Xt)|0,V=V+Math.imul(De,pn)|0,T=T+Math.imul(De,Pn)|0,T=T+Math.imul(J,pn)|0,H=H+Math.imul(J,Pn)|0,V=V+Math.imul(pe,kn)|0,T=T+Math.imul(pe,Un)|0,T=T+Math.imul(xe,kn)|0,H=H+Math.imul(xe,Un)|0,V=V+Math.imul(ie,Hn)|0,T=T+Math.imul(ie,yn)|0,T=T+Math.imul($,Hn)|0,H=H+Math.imul($,yn)|0,V=V+Math.imul(se,Fn)|0,T=T+Math.imul(se,wn)|0,T=T+Math.imul(ce,Fn)|0,H=H+Math.imul(ce,wn)|0;var Wn=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,V=Math.imul(Me,An),T=Math.imul(Me,Xt),T=T+Math.imul(Ee,An)|0,H=Math.imul(Ee,Xt),V=V+Math.imul(X,pn)|0,T=T+Math.imul(X,Pn)|0,T=T+Math.imul(re,pn)|0,H=H+Math.imul(re,Pn)|0,V=V+Math.imul(De,kn)|0,T=T+Math.imul(De,Un)|0,T=T+Math.imul(J,kn)|0,H=H+Math.imul(J,Un)|0,V=V+Math.imul(pe,Hn)|0,T=T+Math.imul(pe,yn)|0,T=T+Math.imul(xe,Hn)|0,H=H+Math.imul(xe,yn)|0,V=V+Math.imul(ie,Fn)|0,T=T+Math.imul(ie,wn)|0,T=T+Math.imul($,Fn)|0,H=H+Math.imul($,wn)|0;var Vn=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,V=Math.imul(Me,pn),T=Math.imul(Me,Pn),T=T+Math.imul(Ee,pn)|0,H=Math.imul(Ee,Pn),V=V+Math.imul(X,kn)|0,T=T+Math.imul(X,Un)|0,T=T+Math.imul(re,kn)|0,H=H+Math.imul(re,Un)|0,V=V+Math.imul(De,Hn)|0,T=T+Math.imul(De,yn)|0,T=T+Math.imul(J,Hn)|0,H=H+Math.imul(J,yn)|0,V=V+Math.imul(pe,Fn)|0,T=T+Math.imul(pe,wn)|0,T=T+Math.imul(xe,Fn)|0,H=H+Math.imul(xe,wn)|0;var si=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(si>>>26)|0,si&=67108863,V=Math.imul(Me,kn),T=Math.imul(Me,Un),T=T+Math.imul(Ee,kn)|0,H=Math.imul(Ee,Un),V=V+Math.imul(X,Hn)|0,T=T+Math.imul(X,yn)|0,T=T+Math.imul(re,Hn)|0,H=H+Math.imul(re,yn)|0,V=V+Math.imul(De,Fn)|0,T=T+Math.imul(De,wn)|0,T=T+Math.imul(J,Fn)|0,H=H+Math.imul(J,wn)|0;var mn=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(mn>>>26)|0,mn&=67108863,V=Math.imul(Me,Hn),T=Math.imul(Me,yn),T=T+Math.imul(Ee,Hn)|0,H=Math.imul(Ee,yn),V=V+Math.imul(X,Fn)|0,T=T+Math.imul(X,wn)|0,T=T+Math.imul(re,Fn)|0,H=H+Math.imul(re,wn)|0;var Ct=(W+V|0)+((T&8191)<<13)|0;W=(H+(T>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,V=Math.imul(Me,Fn),T=Math.imul(Me,wn),T=T+Math.imul(Ee,Fn)|0,H=Math.imul(Ee,wn);var Rr=(W+V|0)+((T&8191)<<13)|0;return W=(H+(T>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,Y[0]=Ae,Y[1]=Ue,Y[2]=Ne,Y[3]=Pe,Y[4]=Fe,Y[5]=nt,Y[6]=ht,Y[7]=xt,Y[8]=Et,Y[9]=Dt,Y[10]=Nt,Y[11]=_t,Y[12]=_n,Y[13]=Wn,Y[14]=Vn,Y[15]=si,Y[16]=mn,Y[17]=Ct,Y[18]=Rr,W!==0&&(Y[19]=W,L.length++),L};Math.imul||(b=w);function E(F,_,R){R.negative=_.negative^F.negative,R.length=F.length+_.length;for(var L=0,Q=0,G=0;G<R.length-1;G++){var Y=Q;Q=0;for(var W=L&67108863,V=Math.min(G,_.length-1),T=Math.max(0,G-F.length+1);T<=V;T++){var H=G-T,K=F.words[H]|0,N=_.words[T]|0,te=K*N,oe=te&67108863;Y=Y+(te/67108864|0)|0,oe=oe+W|0,W=oe&67108863,Y=Y+(oe>>>26)|0,Q+=Y>>>26,Y&=67108863}R.words[G]=W,L=Y,Y=Q}return L!==0?R.words[G]=L:R.length--,R._strip()}function B(F,_,R){return E(F,_,R)}s.prototype.mulTo=function(_,R){var L,Q=this.length+_.length;return this.length===10&&_.length===10?L=b(this,_,R):Q<63?L=w(this,_,R):Q<1024?L=E(this,_,R):L=B(this,_,R),L},s.prototype.mul=function(_){var R=new s(null);return R.words=new Array(this.length+_.length),this.mulTo(_,R)},s.prototype.mulf=function(_){var R=new s(null);return R.words=new Array(this.length+_.length),B(this,_,R)},s.prototype.imul=function(_){return this.clone().mulTo(_,this)},s.prototype.imuln=function(_){var R=_<0;R&&(_=-_),n(typeof _=="number"),n(_<67108864);for(var L=0,Q=0;Q<this.length;Q++){var G=(this.words[Q]|0)*_,Y=(G&67108863)+(L&67108863);L>>=26,L+=G/67108864|0,L+=Y>>>26,this.words[Q]=Y&67108863}return L!==0&&(this.words[Q]=L,this.length++),this.length=_===0?1:this.length,R?this.ineg():this},s.prototype.muln=function(_){return this.clone().imuln(_)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(_){var R=g(_);if(R.length===0)return new s(1);for(var L=this,Q=0;Q<R.length&&R[Q]===0;Q++,L=L.sqr());if(++Q<R.length)for(var G=L.sqr();Q<R.length;Q++,G=G.sqr())R[Q]!==0&&(L=L.mul(G));return L},s.prototype.iushln=function(_){n(typeof _=="number"&&_>=0);var R=_%26,L=(_-R)/26,Q=67108863>>>26-R<<26-R,G;if(R!==0){var Y=0;for(G=0;G<this.length;G++){var W=this.words[G]&Q,V=(this.words[G]|0)-W<<R;this.words[G]=V|Y,Y=W>>>26-R}Y&&(this.words[G]=Y,this.length++)}if(L!==0){for(G=this.length-1;G>=0;G--)this.words[G+L]=this.words[G];for(G=0;G<L;G++)this.words[G]=0;this.length+=L}return this._strip()},s.prototype.ishln=function(_){return n(this.negative===0),this.iushln(_)},s.prototype.iushrn=function(_,R,L){n(typeof _=="number"&&_>=0);var Q;R?Q=(R-R%26)/26:Q=0;var G=_%26,Y=Math.min((_-G)/26,this.length),W=67108863^67108863>>>G<<G,V=L;if(Q-=Y,Q=Math.max(0,Q),V){for(var T=0;T<Y;T++)V.words[T]=this.words[T];V.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,T=0;T<this.length;T++)this.words[T]=this.words[T+Y];else this.words[0]=0,this.length=1;var H=0;for(T=this.length-1;T>=0&&(H!==0||T>=Q);T--){var K=this.words[T]|0;this.words[T]=H<<26-G|K>>>G,H=K&W}return V&&H!==0&&(V.words[V.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(_,R,L){return n(this.negative===0),this.iushrn(_,R,L)},s.prototype.shln=function(_){return this.clone().ishln(_)},s.prototype.ushln=function(_){return this.clone().iushln(_)},s.prototype.shrn=function(_){return this.clone().ishrn(_)},s.prototype.ushrn=function(_){return this.clone().iushrn(_)},s.prototype.testn=function(_){n(typeof _=="number"&&_>=0);var R=_%26,L=(_-R)/26,Q=1<<R;if(this.length<=L)return!1;var G=this.words[L];return!!(G&Q)},s.prototype.imaskn=function(_){n(typeof _=="number"&&_>=0);var R=_%26,L=(_-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=L)return this;if(R!==0&&L++,this.length=Math.min(L,this.length),R!==0){var Q=67108863^67108863>>>R<<R;this.words[this.length-1]&=Q}return this._strip()},s.prototype.maskn=function(_){return this.clone().imaskn(_)},s.prototype.iaddn=function(_){return n(typeof _=="number"),n(_<67108864),_<0?this.isubn(-_):this.negative!==0?this.length===1&&(this.words[0]|0)<=_?(this.words[0]=_-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_),this.negative=1,this):this._iaddn(_)},s.prototype._iaddn=function(_){this.words[0]+=_;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},s.prototype.isubn=function(_){if(n(typeof _=="number"),n(_<67108864),_<0)return this.iaddn(-_);if(this.negative!==0)return this.negative=0,this.iaddn(_),this.negative=1,this;if(this.words[0]-=_,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this._strip()},s.prototype.addn=function(_){return this.clone().iaddn(_)},s.prototype.subn=function(_){return this.clone().isubn(_)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(_,R,L){var Q=_.length+L,G;this._expand(Q);var Y,W=0;for(G=0;G<_.length;G++){Y=(this.words[G+L]|0)+W;var V=(_.words[G]|0)*R;Y-=V&67108863,W=(Y>>26)-(V/67108864|0),this.words[G+L]=Y&67108863}for(;G<this.length-L;G++)Y=(this.words[G+L]|0)+W,W=Y>>26,this.words[G+L]=Y&67108863;if(W===0)return this._strip();for(n(W===-1),W=0,G=0;G<this.length;G++)Y=-(this.words[G]|0)+W,W=Y>>26,this.words[G]=Y&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(_,R){var L=this.length-_.length,Q=this.clone(),G=_,Y=G.words[G.length-1]|0,W=this._countBits(Y);L=26-W,L!==0&&(G=G.ushln(L),Q.iushln(L),Y=G.words[G.length-1]|0);var V=Q.length-G.length,T;if(R!=="mod"){T=new s(null),T.length=V+1,T.words=new Array(T.length);for(var H=0;H<T.length;H++)T.words[H]=0}var K=Q.clone()._ishlnsubmul(G,1,V);K.negative===0&&(Q=K,T&&(T.words[V]=1));for(var N=V-1;N>=0;N--){var te=(Q.words[G.length+N]|0)*67108864+(Q.words[G.length+N-1]|0);for(te=Math.min(te/Y|0,67108863),Q._ishlnsubmul(G,te,N);Q.negative!==0;)te--,Q.negative=0,Q._ishlnsubmul(G,1,N),Q.isZero()||(Q.negative^=1);T&&(T.words[N]=te)}return T&&T._strip(),Q._strip(),R!=="div"&&L!==0&&Q.iushrn(L),{div:T||null,mod:Q}},s.prototype.divmod=function(_,R,L){if(n(!_.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var Q,G,Y;return this.negative!==0&&_.negative===0?(Y=this.neg().divmod(_,R),R!=="mod"&&(Q=Y.div.neg()),R!=="div"&&(G=Y.mod.neg(),L&&G.negative!==0&&G.iadd(_)),{div:Q,mod:G}):this.negative===0&&_.negative!==0?(Y=this.divmod(_.neg(),R),R!=="mod"&&(Q=Y.div.neg()),{div:Q,mod:Y.mod}):(this.negative&_.negative)!==0?(Y=this.neg().divmod(_.neg(),R),R!=="div"&&(G=Y.mod.neg(),L&&G.negative!==0&&G.isub(_)),{div:Y.div,mod:G}):_.length>this.length||this.cmp(_)<0?{div:new s(0),mod:this}:_.length===1?R==="div"?{div:this.divn(_.words[0]),mod:null}:R==="mod"?{div:null,mod:new s(this.modrn(_.words[0]))}:{div:this.divn(_.words[0]),mod:new s(this.modrn(_.words[0]))}:this._wordDiv(_,R)},s.prototype.div=function(_){return this.divmod(_,"div",!1).div},s.prototype.mod=function(_){return this.divmod(_,"mod",!1).mod},s.prototype.umod=function(_){return this.divmod(_,"mod",!0).mod},s.prototype.divRound=function(_){var R=this.divmod(_);if(R.mod.isZero())return R.div;var L=R.div.negative!==0?R.mod.isub(_):R.mod,Q=_.ushrn(1),G=_.andln(1),Y=L.cmp(Q);return Y<0||G===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},s.prototype.modrn=function(_){var R=_<0;R&&(_=-_),n(_<=67108863);for(var L=(1<<26)%_,Q=0,G=this.length-1;G>=0;G--)Q=(L*Q+(this.words[G]|0))%_;return R?-Q:Q},s.prototype.modn=function(_){return this.modrn(_)},s.prototype.idivn=function(_){var R=_<0;R&&(_=-_),n(_<=67108863);for(var L=0,Q=this.length-1;Q>=0;Q--){var G=(this.words[Q]|0)+L*67108864;this.words[Q]=G/_|0,L=G%_}return this._strip(),R?this.ineg():this},s.prototype.divn=function(_){return this.clone().idivn(_)},s.prototype.egcd=function(_){n(_.negative===0),n(!_.isZero());var R=this,L=_.clone();R.negative!==0?R=R.umod(_):R=R.clone();for(var Q=new s(1),G=new s(0),Y=new s(0),W=new s(1),V=0;R.isEven()&&L.isEven();)R.iushrn(1),L.iushrn(1),++V;for(var T=L.clone(),H=R.clone();!R.isZero();){for(var K=0,N=1;(R.words[0]&N)===0&&K<26;++K,N<<=1);if(K>0)for(R.iushrn(K);K-- >0;)(Q.isOdd()||G.isOdd())&&(Q.iadd(T),G.isub(H)),Q.iushrn(1),G.iushrn(1);for(var te=0,oe=1;(L.words[0]&oe)===0&&te<26;++te,oe<<=1);if(te>0)for(L.iushrn(te);te-- >0;)(Y.isOdd()||W.isOdd())&&(Y.iadd(T),W.isub(H)),Y.iushrn(1),W.iushrn(1);R.cmp(L)>=0?(R.isub(L),Q.isub(Y),G.isub(W)):(L.isub(R),Y.isub(Q),W.isub(G))}return{a:Y,b:W,gcd:L.iushln(V)}},s.prototype._invmp=function(_){n(_.negative===0),n(!_.isZero());var R=this,L=_.clone();R.negative!==0?R=R.umod(_):R=R.clone();for(var Q=new s(1),G=new s(0),Y=L.clone();R.cmpn(1)>0&&L.cmpn(1)>0;){for(var W=0,V=1;(R.words[0]&V)===0&&W<26;++W,V<<=1);if(W>0)for(R.iushrn(W);W-- >0;)Q.isOdd()&&Q.iadd(Y),Q.iushrn(1);for(var T=0,H=1;(L.words[0]&H)===0&&T<26;++T,H<<=1);if(T>0)for(L.iushrn(T);T-- >0;)G.isOdd()&&G.iadd(Y),G.iushrn(1);R.cmp(L)>=0?(R.isub(L),Q.isub(G)):(L.isub(R),G.isub(Q))}var K;return R.cmpn(1)===0?K=Q:K=G,K.cmpn(0)<0&&K.iadd(_),K},s.prototype.gcd=function(_){if(this.isZero())return _.abs();if(_.isZero())return this.abs();var R=this.clone(),L=_.clone();R.negative=0,L.negative=0;for(var Q=0;R.isEven()&&L.isEven();Q++)R.iushrn(1),L.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;L.isEven();)L.iushrn(1);var G=R.cmp(L);if(G<0){var Y=R;R=L,L=Y}else if(G===0||L.cmpn(1)===0)break;R.isub(L)}while(!0);return L.iushln(Q)},s.prototype.invm=function(_){return this.egcd(_).a.umod(_)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(_){return this.words[0]&_},s.prototype.bincn=function(_){n(typeof _=="number");var R=_%26,L=(_-R)/26,Q=1<<R;if(this.length<=L)return this._expand(L+1),this.words[L]|=Q,this;for(var G=Q,Y=L;G!==0&&Y<this.length;Y++){var W=this.words[Y]|0;W+=G,G=W>>>26,W&=67108863,this.words[Y]=W}return G!==0&&(this.words[Y]=G,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(_){var R=_<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this._strip();var L;if(this.length>1)L=1;else{R&&(_=-_),n(_<=67108863,"Number is too big");var Q=this.words[0]|0;L=Q===_?0:Q<_?-1:1}return this.negative!==0?-L|0:L},s.prototype.cmp=function(_){if(this.negative!==0&&_.negative===0)return-1;if(this.negative===0&&_.negative!==0)return 1;var R=this.ucmp(_);return this.negative!==0?-R|0:R},s.prototype.ucmp=function(_){if(this.length>_.length)return 1;if(this.length<_.length)return-1;for(var R=0,L=this.length-1;L>=0;L--){var Q=this.words[L]|0,G=_.words[L]|0;if(Q!==G){Q<G?R=-1:Q>G&&(R=1);break}}return R},s.prototype.gtn=function(_){return this.cmpn(_)===1},s.prototype.gt=function(_){return this.cmp(_)===1},s.prototype.gten=function(_){return this.cmpn(_)>=0},s.prototype.gte=function(_){return this.cmp(_)>=0},s.prototype.ltn=function(_){return this.cmpn(_)===-1},s.prototype.lt=function(_){return this.cmp(_)===-1},s.prototype.lten=function(_){return this.cmpn(_)<=0},s.prototype.lte=function(_){return this.cmp(_)<=0},s.prototype.eqn=function(_){return this.cmpn(_)===0},s.prototype.eq=function(_){return this.cmp(_)===0},s.red=function(_){return new P(_)},s.prototype.toRed=function(_){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),_.convertTo(this)._forceRed(_)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(_){return this.red=_,this},s.prototype.forceRed=function(_){return n(!this.red,"Already a number in reduction context"),this._forceRed(_)},s.prototype.redAdd=function(_){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,_)},s.prototype.redIAdd=function(_){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_)},s.prototype.redSub=function(_){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,_)},s.prototype.redISub=function(_){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,_)},s.prototype.redShl=function(_){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,_)},s.prototype.redMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.mul(this,_)},s.prototype.redIMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.imul(this,_)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(_){return n(this.red&&!_.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_)};var S={k256:null,p224:null,p192:null,p25519:null};function M(F,_){this.name=F,this.p=new s(_,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}M.prototype._tmp=function(){var _=new s(null);return _.words=new Array(Math.ceil(this.n/13)),_},M.prototype.ireduce=function(_){var R=_,L;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),L=R.bitLength();while(L>this.n);var Q=L<this.n?-1:R.ucmp(this.p);return Q===0?(R.words[0]=0,R.length=1):Q>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},M.prototype.split=function(_,R){_.iushrn(this.n,0,R)},M.prototype.imulK=function(_){return _.imul(this.k)};function I(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(I,M),I.prototype.split=function(_,R){for(var L=4194303,Q=Math.min(_.length,9),G=0;G<Q;G++)R.words[G]=_.words[G];if(R.length=Q,_.length<=9){_.words[0]=0,_.length=1;return}var Y=_.words[9];for(R.words[R.length++]=Y&L,G=10;G<_.length;G++){var W=_.words[G]|0;_.words[G-10]=(W&L)<<4|Y>>>22,Y=W}Y>>>=22,_.words[G-10]=Y,Y===0&&_.length>10?_.length-=10:_.length-=9},I.prototype.imulK=function(_){_.words[_.length]=0,_.words[_.length+1]=0,_.length+=2;for(var R=0,L=0;L<_.length;L++){var Q=_.words[L]|0;R+=Q*977,_.words[L]=R&67108863,R=Q*64+(R/67108864|0)}return _.words[_.length-1]===0&&(_.length--,_.words[_.length-1]===0&&_.length--),_};function k(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(k,M);function O(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(O,M);function C(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(C,M),C.prototype.imulK=function(_){for(var R=0,L=0;L<_.length;L++){var Q=(_.words[L]|0)*19+R,G=Q&67108863;Q>>>=26,_.words[L]=G,R=Q}return R!==0&&(_.words[_.length++]=R),_},s._prime=function(_){if(S[_])return S[_];var R;if(_==="k256")R=new I;else if(_==="p224")R=new k;else if(_==="p192")R=new O;else if(_==="p25519")R=new C;else throw new Error("Unknown prime "+_);return S[_]=R,R};function P(F){if(typeof F=="string"){var _=s._prime(F);this.m=_.p,this.prime=_}else n(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}P.prototype._verify1=function(_){n(_.negative===0,"red works only with positives"),n(_.red,"red works only with red numbers")},P.prototype._verify2=function(_,R){n((_.negative|R.negative)===0,"red works only with positives"),n(_.red&&_.red===R.red,"red works only with red numbers")},P.prototype.imod=function(_){return this.prime?this.prime.ireduce(_)._forceRed(this):(u(_,_.umod(this.m)._forceRed(this)),_)},P.prototype.neg=function(_){return _.isZero()?_.clone():this.m.sub(_)._forceRed(this)},P.prototype.add=function(_,R){this._verify2(_,R);var L=_.add(R);return L.cmp(this.m)>=0&&L.isub(this.m),L._forceRed(this)},P.prototype.iadd=function(_,R){this._verify2(_,R);var L=_.iadd(R);return L.cmp(this.m)>=0&&L.isub(this.m),L},P.prototype.sub=function(_,R){this._verify2(_,R);var L=_.sub(R);return L.cmpn(0)<0&&L.iadd(this.m),L._forceRed(this)},P.prototype.isub=function(_,R){this._verify2(_,R);var L=_.isub(R);return L.cmpn(0)<0&&L.iadd(this.m),L},P.prototype.shl=function(_,R){return this._verify1(_),this.imod(_.ushln(R))},P.prototype.imul=function(_,R){return this._verify2(_,R),this.imod(_.imul(R))},P.prototype.mul=function(_,R){return this._verify2(_,R),this.imod(_.mul(R))},P.prototype.isqr=function(_){return this.imul(_,_.clone())},P.prototype.sqr=function(_){return this.mul(_,_)},P.prototype.sqrt=function(_){if(_.isZero())return _.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var L=this.m.add(new s(1)).iushrn(2);return this.pow(_,L)}for(var Q=this.m.subn(1),G=0;!Q.isZero()&&Q.andln(1)===0;)G++,Q.iushrn(1);n(!Q.isZero());var Y=new s(1).toRed(this),W=Y.redNeg(),V=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new s(2*T*T).toRed(this);this.pow(T,V).cmp(W)!==0;)T.redIAdd(W);for(var H=this.pow(T,Q),K=this.pow(_,Q.addn(1).iushrn(1)),N=this.pow(_,Q),te=G;N.cmp(Y)!==0;){for(var oe=N,fe=0;oe.cmp(Y)!==0;fe++)oe=oe.redSqr();n(fe<te);var he=this.pow(H,new s(1).iushln(te-fe-1));K=K.redMul(he),H=he.redSqr(),N=N.redMul(H),te=fe}return K},P.prototype.invm=function(_){var R=_._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(_,R){if(R.isZero())return new s(1).toRed(this);if(R.cmpn(1)===0)return _.clone();var L=4,Q=new Array(1<<L);Q[0]=new s(1).toRed(this),Q[1]=_;for(var G=2;G<Q.length;G++)Q[G]=this.mul(Q[G-1],_);var Y=Q[0],W=0,V=0,T=R.bitLength()%26;for(T===0&&(T=26),G=R.length-1;G>=0;G--){for(var H=R.words[G],K=T-1;K>=0;K--){var N=H>>K&1;if(Y!==Q[0]&&(Y=this.sqr(Y)),N===0&&W===0){V=0;continue}W<<=1,W|=N,V++,!(V!==L&&(G!==0||K!==0))&&(Y=this.mul(Y,Q[W]),V=0,W=0)}T=26}return Y},P.prototype.convertTo=function(_){var R=_.umod(this.m);return R===_?R.clone():R},P.prototype.convertFrom=function(_){var R=_.clone();return R.red=null,R},s.mont=function(_){return new D(_)};function D(F){P.call(this,F),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(D,P),D.prototype.convertTo=function(_){return this.imod(_.ushln(this.shift))},D.prototype.convertFrom=function(_){var R=this.imod(_.mul(this.rinv));return R.red=null,R},D.prototype.imul=function(_,R){if(_.isZero()||R.isZero())return _.words[0]=0,_.length=1,_;var L=_.imul(R),Q=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=L.isub(Q).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},D.prototype.mul=function(_,R){if(_.isZero()||R.isZero())return new s(0)._forceRed(this);var L=_.mul(R),Q=L.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=L.isub(Q).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},D.prototype.invm=function(_){var R=this.imod(_._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(r,Bne)}(nb)),nb.exports}var Mne=_7();const Yt=na(Mne),Cne="logger/5.8.0";let W4=!1,K4=!1;const rb={debug:1,default:2,info:2,warning:3,error:4,off:5};let q4=rb.default,RM=null;function Tne(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const Y4=Tne();var qU;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(qU||(qU={}));var ul;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(ul||(ul={}));const X4="0123456789abcdef";let Ke=class Ni{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const n=e.toLowerCase();rb[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(q4>rb[n])&&console.log.apply(console,t)}debug(...e){this._log(Ni.levels.DEBUG,e)}info(...e){this._log(Ni.levels.INFO,e)}warn(...e){this._log(Ni.levels.WARNING,e)}makeError(e,t,n){if(K4)return this.makeError("censored error",t,{});t||(t=Ni.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(l=>{const c=n[l];try{if(c instanceof Uint8Array){let u="";for(let f=0;f<c.length;f++)u+=X4[c[f]>>4],u+=X4[c[f]&15];i.push(l+"=Uint8Array(0x"+u+")")}else i.push(l+"="+JSON.stringify(c))}catch{i.push(l+"="+JSON.stringify(n[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let a="";switch(t){case ul.NUMERIC_FAULT:{a="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":a+="-"+l;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case ul.CALL_EXCEPTION:case ul.INSUFFICIENT_FUNDS:case ul.MISSING_NEW:case ul.NONCE_EXPIRED:case ul.REPLACEMENT_UNDERPRICED:case ul.TRANSACTION_REPLACED:case ul.UNPREDICTABLE_GAS_LIMIT:a=t;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=t,Object.keys(n).forEach(function(l){o[l]=n[l]}),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,Ni.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,i){e||this.throwError(t,n,i)}assertArgument(e,t,n,i){e||this.throwArgumentError(t,n,i)}checkNormalize(e){Y4&&this.throwError("platform missing String.prototype.normalize",Ni.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Y4})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Ni.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Ni.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n?n=": "+n:n="",e<t&&this.throwError("missing argument"+n,Ni.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,Ni.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",Ni.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Ni.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Ni.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return RM||(RM=new Ni(Cne)),RM}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Ni.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),W4){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ni.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}K4=!!e,W4=!!t}static setLogLevel(e){const t=rb[e.toLowerCase()];if(t==null){Ni.globalLogger().warn("invalid log level - "+e);return}q4=t}static from(e){return new Ni(e)}};Ke.errors=ul;Ke.levels=qU;const Rne="bytes/5.8.0",Yr=new Ke(Rne);function x7(r){return!!r.toHexString}function Jp(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return Jp(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function CD(r){return $n(r)&&!(r.length%2)||lE(r)}function Z4(r){return typeof r=="number"&&r==r&&r%1===0}function lE(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!Z4(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!Z4(t)||t<0||t>=256)return!1}return!0}function Gt(r,e){if(e||(e={}),typeof r=="number"){Yr.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Jp(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),x7(r)&&(r=r.toHexString()),$n(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Yr.throwArgumentError("hex data is odd-length","value",r));const n=[];for(let i=0;i<t.length;i+=2)n.push(parseInt(t.substring(i,i+2),16));return Jp(new Uint8Array(n))}return lE(r)?Jp(new Uint8Array(r)):Yr.throwArgumentError("invalid arrayify value","value",r)}function Xa(r){const e=r.map(i=>Gt(i)),t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Jp(n)}function dm(r){let e=Gt(r);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function Ine(r,e){r=Gt(r),r.length>e&&Yr.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),Jp(t)}function $n(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const IM="0123456789abcdef";function Ot(r,e){if(e||(e={}),typeof r=="number"){Yr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=IM[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),x7(r))return r.toHexString();if($n(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":Yr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(lE(r)){let t="0x";for(let n=0;n<r.length;n++){let i=r[n];t+=IM[(i&240)>>4]+IM[i&15]}return t}return Yr.throwArgumentError("invalid hexlify value","value",r)}function Ah(r){if(typeof r!="string")r=Ot(r);else if(!$n(r)||r.length%2)return null;return(r.length-2)/2}function Ls(r,e,t){return typeof r!="string"?r=Ot(r):(!$n(r)||r.length%2)&&Yr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function ga(r){let e="0x";return r.forEach(t=>{e+=Ot(t).substring(2)}),e}function TD(r){const e=Une(Ot(r,{hexPad:"left"}));return e==="0x"?"0x0":e}function Une(r){typeof r!="string"&&(r=Ot(r)),$n(r)||Yr.throwArgumentError("invalid hex string","value",r),r=r.substring(2);let e=0;for(;e<r.length&&r[e]==="0";)e++;return"0x"+r.substring(e)}function ei(r,e){for(typeof r!="string"?r=Ot(r):$n(r)||Yr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&Yr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function cE(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(CD(r)){let t=Gt(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Ot(t.slice(0,32)),e.s=Ot(t.slice(32,64))):t.length===65?(e.r=Ot(t.slice(0,32)),e.s=Ot(t.slice(32,64)),e.v=t[64]):Yr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:Yr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Ot(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const i=Ine(Gt(e._vs),32);e._vs=Ot(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Yr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),i[0]&=127;const a=Ot(i);e.s==null?e.s=a:e.s!==a&&Yr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?Yr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Yr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!$n(e.r)?Yr.throwArgumentError("signature missing or invalid r","signature",r):e.r=ei(e.r,32),e.s==null||!$n(e.s)?Yr.throwArgumentError("signature missing or invalid s","signature",r):e.s=ei(e.s,32);const t=Gt(e.s);t[0]>=128&&Yr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const n=Ot(t);e._vs&&($n(e._vs)||Yr.throwArgumentError("signature invalid _vs","signature",r),e._vs=ei(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Yr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const Fne="bignumber/5.8.0";var kb=Yt.BN;const eu=new Ke(Fne),UM={},J4=9007199254740991;let $4=!1;class mt{constructor(e,t){e!==UM&&eu.throwError("cannot call constructor directly; use BigNumber.from",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return ua(Rn(this).fromTwos(e))}toTwos(e){return ua(Rn(this).toTwos(e))}abs(){return this._hex[0]==="-"?mt.from(this._hex.substring(1)):this}add(e){return ua(Rn(this).add(Rn(e)))}sub(e){return ua(Rn(this).sub(Rn(e)))}div(e){return mt.from(e).isZero()&&wo("division-by-zero","div"),ua(Rn(this).div(Rn(e)))}mul(e){return ua(Rn(this).mul(Rn(e)))}mod(e){const t=Rn(e);return t.isNeg()&&wo("division-by-zero","mod"),ua(Rn(this).umod(t))}pow(e){const t=Rn(e);return t.isNeg()&&wo("negative-power","pow"),ua(Rn(this).pow(t))}and(e){const t=Rn(e);return(this.isNegative()||t.isNeg())&&wo("unbound-bitwise-result","and"),ua(Rn(this).and(t))}or(e){const t=Rn(e);return(this.isNegative()||t.isNeg())&&wo("unbound-bitwise-result","or"),ua(Rn(this).or(t))}xor(e){const t=Rn(e);return(this.isNegative()||t.isNeg())&&wo("unbound-bitwise-result","xor"),ua(Rn(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&wo("negative-width","mask"),ua(Rn(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&wo("negative-width","shl"),ua(Rn(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&wo("negative-width","shr"),ua(Rn(this).shrn(e))}eq(e){return Rn(this).eq(Rn(e))}lt(e){return Rn(this).lt(Rn(e))}lte(e){return Rn(this).lte(Rn(e))}gt(e){return Rn(this).gt(Rn(e))}gte(e){return Rn(this).gte(Rn(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Rn(this).isZero()}toNumber(){try{return Rn(this).toNumber()}catch{wo("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return eu.throwError("this platform does not support BigInt",Ke.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?$4||($4=!0,eu.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?eu.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ke.errors.UNEXPECTED_ARGUMENT,{}):eu.throwError("BigNumber.toString does not accept parameters",Ke.errors.UNEXPECTED_ARGUMENT,{})),Rn(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof mt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new mt(UM,Dv(e)):e.match(/^-?[0-9]+$/)?new mt(UM,Dv(new kb(e))):eu.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&wo("underflow","BigNumber.from",e),(e>=J4||e<=-J4)&&wo("overflow","BigNumber.from",e),mt.from(String(e));const t=e;if(typeof t=="bigint")return mt.from(t.toString());if(lE(t))return mt.from(Ot(t));if(t)if(t.toHexString){const n=t.toHexString();if(typeof n=="string")return mt.from(n)}else{let n=t._hex;if(n==null&&t.type==="BigNumber"&&(n=t.hex),typeof n=="string"&&($n(n)||n[0]==="-"&&$n(n.substring(1))))return mt.from(n)}return eu.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Dv(r){if(typeof r!="string")return Dv(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&eu.throwArgumentError("invalid hex","value",r),r=Dv(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function ua(r){return mt.from(Dv(r))}function Rn(r){const e=mt.from(r).toHexString();return e[0]==="-"?new kb("-"+e.substring(3),16):new kb(e.substring(2),16)}function wo(r,e,t){const n={fault:r,operation:e};return t!=null&&(n.value=t),eu.throwError(r,Ke.errors.NUMERIC_FAULT,n)}function Lne(r){return new kb(r,36).toString(16)}const Dne="properties/5.8.0";var One=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Hb=new Ke(Dne);function it(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}function ec(r,e){for(let t=0;t<32;t++){if(r[e])return r[e];if(!r.prototype||typeof r.prototype!="object")break;r=Object.getPrototypeOf(r.prototype).constructor}return null}function Ei(r){return One(this,void 0,void 0,function*(){const e=Object.keys(r).map(n=>{const i=r[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Nne(r,e){(!r||typeof r!="object")&&Hb.throwArgumentError("invalid object","object",r),Object.keys(r).forEach(t=>{e[t]||Hb.throwArgumentError("invalid object key - "+t,"transaction:"+t,r)})}function Qi(r){const e={};for(const t in r)e[t]=r[t];return e}const Pne={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function b7(r){if(r==null||Pne[typeof r])return!0;if(Array.isArray(r)||typeof r=="object"){if(!Object.isFrozen(r))return!1;const e=Object.keys(r);for(let t=0;t<e.length;t++){let n=null;try{n=r[e[t]]}catch{continue}if(!b7(n))return!1}return!0}return Hb.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function kne(r){if(b7(r))return r;if(Array.isArray(r))return Object.freeze(r.map(e=>wu(e)));if(typeof r=="object"){const e={};for(const t in r){const n=r[t];n!==void 0&&it(e,t,wu(n))}return e}return Hb.throwArgumentError(`Cannot deepCopy ${typeof r}`,"object",r)}function wu(r){return kne(r)}class vy{constructor(e){for(const t in e)this[t]=wu(e[t])}}const Hne="abstract-provider/5.8.0";var Qne=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const zne=new Ke(Hne);class Vne extends vy{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class uE{constructor(){zne.checkAbstract(new.target,uE),it(this,"_isProvider",!0)}getFeeData(){return Qne(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ei({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=mt.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Gne="networks/5.8.0",eH=new Ke(Gne);function jne(r){return r&&typeof r.renetwork=="function"}function Al(r){const e=function(t,n){n==null&&(n={});const i=[];if(t.InfuraProvider&&n.infura!=="-")try{i.push(new t.InfuraProvider(r,n.infura))}catch{}if(t.EtherscanProvider&&n.etherscan!=="-")try{i.push(new t.EtherscanProvider(r,n.etherscan))}catch{}if(t.AlchemyProvider&&n.alchemy!=="-")try{i.push(new t.AlchemyProvider(r,n.alchemy))}catch{}if(t.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const a=new t.PocketProvider(r,n.pocket);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}}if(t.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new t.CloudflareProvider(r))}catch{}if(t.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],a=new t.AnkrProvider(r,n.ankr);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}if(t.QuickNodeProvider&&n.quicknode!=="-")try{i.push(new t.QuickNodeProvider(r,n.quicknode))}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:r==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return Al(t)},e}function Qb(r,e){const t=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(r,e):null};return t.renetwork=function(n){return Qb(r,n)},t}const tH={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Al("homestead")},nH={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Al("ropsten")},rH={chainId:63,name:"classicMordor",_defaultProvider:Qb("https://www.ethercluster.com/mordor","classicMordor")},Jw={unspecified:{chainId:0,name:"unspecified"},homestead:tH,mainnet:tH,morden:{chainId:2,name:"morden"},ropsten:nH,testnet:nH,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Al("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Al("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Al("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:Al("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:Al("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:Qb("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:rH,classicTestnet:rH,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Qb("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Al("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:Al("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:Al("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Wne(r){if(r==null)return null;if(typeof r=="number"){for(const n in Jw){const i=Jw[n];if(i.chainId===r)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:r,name:"unknown"}}if(typeof r=="string"){const n=Jw[r];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Jw[r.name];if(!e)return typeof r.chainId!="number"&&eH.throwArgumentError("invalid network chainId","network",r),r;r.chainId!==0&&r.chainId!==e.chainId&&eH.throwArgumentError("network chainId mismatch","network",r);let t=r._defaultProvider||null;return t==null&&e._defaultProvider&&(jne(e._defaultProvider)?t=e._defaultProvider.renetwork(r):t=e._defaultProvider),{name:r.name,chainId:e.chainId,ensAddress:r.ensAddress||e.ensAddress||null,_defaultProvider:t}}function E7(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return Gt(e)}function S7(r){r=Gt(r);let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}class B7{constructor(e){it(this,"alphabet",e),it(this,"base",e.length),it(this,"_alphabetMap",{}),it(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Gt(e);if(t.length===0)return"";let n=[0];for(let s=0;s<t.length;++s){let a=t[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<t.length;++a)s+=t[a]*this.base,t[a]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)t.push(0);return Gt(new Uint8Array(t.reverse()))}}new B7("abcdefghijklmnopqrstuvwxyz234567");const YU=new B7("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Kne="0x0000000000000000000000000000000000000000",qne=mt.from(-1),M7=mt.from(0),Yne=mt.from(1),Xne=mt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Zne="0x0000000000000000000000000000000000000000000000000000000000000000";var FM={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */var iH;function Jne(){return iH||(iH=1,function(r){(function(){var e="input is invalid type",t="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?i=fu:s&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],d=[1,256,65536,16777216],p=[6,1536,393216,100663296],v=[0,8,16,24],m=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],w=[128,256],b=["hex","buffer","arrayBuffer","array","digest"],E={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(N){return Object.prototype.toString.call(N)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(N){return typeof N=="object"&&N.buffer&&N.buffer.constructor===ArrayBuffer});for(var B=function(N,te,oe){return function(fe){return new T(N,te,N).update(fe)[oe]()}},S=function(N,te,oe){return function(fe,he){return new T(N,te,he).update(fe)[oe]()}},M=function(N,te,oe){return function(fe,he,me,Te){return _["cshake"+N].update(fe,he,me,Te)[oe]()}},I=function(N,te,oe){return function(fe,he,me,Te){return _["kmac"+N].update(fe,he,me,Te)[oe]()}},k=function(N,te,oe,fe){for(var he=0;he<b.length;++he){var me=b[he];N[me]=te(oe,fe,me)}return N},O=function(N,te){var oe=B(N,te,"hex");return oe.create=function(){return new T(N,te,N)},oe.update=function(fe){return oe.create().update(fe)},k(oe,B,N,te)},C=function(N,te){var oe=S(N,te,"hex");return oe.create=function(fe){return new T(N,te,fe)},oe.update=function(fe,he){return oe.create(he).update(fe)},k(oe,S,N,te)},P=function(N,te){var oe=E[N],fe=M(N,te,"hex");return fe.create=function(he,me,Te){return!me&&!Te?_["shake"+N].create(he):new T(N,te,he).bytepad([me,Te],oe)},fe.update=function(he,me,Te,Re){return fe.create(me,Te,Re).update(he)},k(fe,M,N,te)},D=function(N,te){var oe=E[N],fe=I(N,te,"hex");return fe.create=function(he,me,Te){return new H(N,te,me).bytepad(["KMAC",Te],oe).bytepad([he],oe)},fe.update=function(he,me,Te,Re){return fe.create(he,Te,Re).update(me)},k(fe,I,N,te)},F=[{name:"keccak",padding:d,bits:g,createMethod:O},{name:"sha3",padding:p,bits:g,createMethod:O},{name:"shake",padding:u,bits:w,createMethod:C},{name:"cshake",padding:f,bits:w,createMethod:P},{name:"kmac",padding:f,bits:w,createMethod:D}],_={},R=[],L=0;L<F.length;++L)for(var Q=F[L],G=Q.bits,Y=0;Y<G.length;++Y){var W=Q.name+"_"+G[Y];if(R.push(W),_[W]=Q.createMethod(G[Y],Q.padding),Q.name!=="sha3"){var V=Q.name+G[Y];R.push(V),_[V]=_[W]}}function T(N,te,oe){this.blocks=[],this.s=[],this.padding=te,this.outputBits=oe,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(N<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=oe>>5,this.extraBytes=(oe&31)>>3;for(var fe=0;fe<50;++fe)this.s[fe]=0}T.prototype.update=function(N){if(this.finalized)throw new Error(t);var te,oe=typeof N;if(oe!=="string"){if(oe==="object"){if(N===null)throw new Error(e);if(l&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!l||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);te=!0}for(var fe=this.blocks,he=this.byteCount,me=N.length,Te=this.blockCount,Re=0,de=this.s,Z,ve;Re<me;){if(this.reset)for(this.reset=!1,fe[0]=this.block,Z=1;Z<Te+1;++Z)fe[Z]=0;if(te)for(Z=this.start;Re<me&&Z<he;++Re)fe[Z>>2]|=N[Re]<<v[Z++&3];else for(Z=this.start;Re<me&&Z<he;++Re)ve=N.charCodeAt(Re),ve<128?fe[Z>>2]|=ve<<v[Z++&3]:ve<2048?(fe[Z>>2]|=(192|ve>>6)<<v[Z++&3],fe[Z>>2]|=(128|ve&63)<<v[Z++&3]):ve<55296||ve>=57344?(fe[Z>>2]|=(224|ve>>12)<<v[Z++&3],fe[Z>>2]|=(128|ve>>6&63)<<v[Z++&3],fe[Z>>2]|=(128|ve&63)<<v[Z++&3]):(ve=65536+((ve&1023)<<10|N.charCodeAt(++Re)&1023),fe[Z>>2]|=(240|ve>>18)<<v[Z++&3],fe[Z>>2]|=(128|ve>>12&63)<<v[Z++&3],fe[Z>>2]|=(128|ve>>6&63)<<v[Z++&3],fe[Z>>2]|=(128|ve&63)<<v[Z++&3]);if(this.lastByteIndex=Z,Z>=he){for(this.start=Z-he,this.block=fe[Te],Z=0;Z<Te;++Z)de[Z]^=fe[Z];K(de),this.reset=!0}else this.start=Z}return this},T.prototype.encode=function(N,te){var oe=N&255,fe=1,he=[oe];for(N=N>>8,oe=N&255;oe>0;)he.unshift(oe),N=N>>8,oe=N&255,++fe;return te?he.push(fe):he.unshift(fe),this.update(he),he.length},T.prototype.encodeString=function(N){var te,oe=typeof N;if(oe!=="string"){if(oe==="object"){if(N===null)throw new Error(e);if(l&&N.constructor===ArrayBuffer)N=new Uint8Array(N);else if(!Array.isArray(N)&&(!l||!ArrayBuffer.isView(N)))throw new Error(e)}else throw new Error(e);te=!0}var fe=0,he=N.length;if(te)fe=he;else for(var me=0;me<N.length;++me){var Te=N.charCodeAt(me);Te<128?fe+=1:Te<2048?fe+=2:Te<55296||Te>=57344?fe+=3:(Te=65536+((Te&1023)<<10|N.charCodeAt(++me)&1023),fe+=4)}return fe+=this.encode(fe*8),this.update(N),fe},T.prototype.bytepad=function(N,te){for(var oe=this.encode(te),fe=0;fe<N.length;++fe)oe+=this.encodeString(N[fe]);var he=te-oe%te,me=[];return me.length=he,this.update(me),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var N=this.blocks,te=this.lastByteIndex,oe=this.blockCount,fe=this.s;if(N[te>>2]|=this.padding[te&3],this.lastByteIndex===this.byteCount)for(N[0]=N[oe],te=1;te<oe+1;++te)N[te]=0;for(N[oe-1]|=2147483648,te=0;te<oe;++te)fe[te]^=N[te];K(fe)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var N=this.blockCount,te=this.s,oe=this.outputBlocks,fe=this.extraBytes,he=0,me=0,Te="",Re;me<oe;){for(he=0;he<N&&me<oe;++he,++me)Re=te[he],Te+=c[Re>>4&15]+c[Re&15]+c[Re>>12&15]+c[Re>>8&15]+c[Re>>20&15]+c[Re>>16&15]+c[Re>>28&15]+c[Re>>24&15];me%N===0&&(K(te),he=0)}return fe&&(Re=te[he],Te+=c[Re>>4&15]+c[Re&15],fe>1&&(Te+=c[Re>>12&15]+c[Re>>8&15]),fe>2&&(Te+=c[Re>>20&15]+c[Re>>16&15])),Te},T.prototype.arrayBuffer=function(){this.finalize();var N=this.blockCount,te=this.s,oe=this.outputBlocks,fe=this.extraBytes,he=0,me=0,Te=this.outputBits>>3,Re;fe?Re=new ArrayBuffer(oe+1<<2):Re=new ArrayBuffer(Te);for(var de=new Uint32Array(Re);me<oe;){for(he=0;he<N&&me<oe;++he,++me)de[me]=te[he];me%N===0&&K(te)}return fe&&(de[he]=te[he],Re=Re.slice(0,Te)),Re},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var N=this.blockCount,te=this.s,oe=this.outputBlocks,fe=this.extraBytes,he=0,me=0,Te=[],Re,de;me<oe;){for(he=0;he<N&&me<oe;++he,++me)Re=me<<2,de=te[he],Te[Re]=de&255,Te[Re+1]=de>>8&255,Te[Re+2]=de>>16&255,Te[Re+3]=de>>24&255;me%N===0&&K(te)}return fe&&(Re=me<<2,de=te[he],Te[Re]=de&255,fe>1&&(Te[Re+1]=de>>8&255),fe>2&&(Te[Re+2]=de>>16&255)),Te};function H(N,te,oe){T.call(this,N,te,oe)}H.prototype=new T,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var K=function(N){var te,oe,fe,he,me,Te,Re,de,Z,ve,ye,se,ce,_e,ie,$,ee,pe,xe,be,De,J,j,X,re,ge,Me,Ee,We,et,Ze,dt,Se,Je,Ve,je,Ye,rt,wt,kt,ur,bt,en,ri,An,Xt,jn,pn,Pn,ia,kn,Un,ii,Hn,yn,is,Fn,wn,Ae,Ue,Ne,Pe,Fe;for(fe=0;fe<48;fe+=2)he=N[0]^N[10]^N[20]^N[30]^N[40],me=N[1]^N[11]^N[21]^N[31]^N[41],Te=N[2]^N[12]^N[22]^N[32]^N[42],Re=N[3]^N[13]^N[23]^N[33]^N[43],de=N[4]^N[14]^N[24]^N[34]^N[44],Z=N[5]^N[15]^N[25]^N[35]^N[45],ve=N[6]^N[16]^N[26]^N[36]^N[46],ye=N[7]^N[17]^N[27]^N[37]^N[47],se=N[8]^N[18]^N[28]^N[38]^N[48],ce=N[9]^N[19]^N[29]^N[39]^N[49],te=se^(Te<<1|Re>>>31),oe=ce^(Re<<1|Te>>>31),N[0]^=te,N[1]^=oe,N[10]^=te,N[11]^=oe,N[20]^=te,N[21]^=oe,N[30]^=te,N[31]^=oe,N[40]^=te,N[41]^=oe,te=he^(de<<1|Z>>>31),oe=me^(Z<<1|de>>>31),N[2]^=te,N[3]^=oe,N[12]^=te,N[13]^=oe,N[22]^=te,N[23]^=oe,N[32]^=te,N[33]^=oe,N[42]^=te,N[43]^=oe,te=Te^(ve<<1|ye>>>31),oe=Re^(ye<<1|ve>>>31),N[4]^=te,N[5]^=oe,N[14]^=te,N[15]^=oe,N[24]^=te,N[25]^=oe,N[34]^=te,N[35]^=oe,N[44]^=te,N[45]^=oe,te=de^(se<<1|ce>>>31),oe=Z^(ce<<1|se>>>31),N[6]^=te,N[7]^=oe,N[16]^=te,N[17]^=oe,N[26]^=te,N[27]^=oe,N[36]^=te,N[37]^=oe,N[46]^=te,N[47]^=oe,te=ve^(he<<1|me>>>31),oe=ye^(me<<1|he>>>31),N[8]^=te,N[9]^=oe,N[18]^=te,N[19]^=oe,N[28]^=te,N[29]^=oe,N[38]^=te,N[39]^=oe,N[48]^=te,N[49]^=oe,_e=N[0],ie=N[1],Xt=N[11]<<4|N[10]>>>28,jn=N[10]<<4|N[11]>>>28,Ee=N[20]<<3|N[21]>>>29,We=N[21]<<3|N[20]>>>29,Ue=N[31]<<9|N[30]>>>23,Ne=N[30]<<9|N[31]>>>23,bt=N[40]<<18|N[41]>>>14,en=N[41]<<18|N[40]>>>14,Je=N[2]<<1|N[3]>>>31,Ve=N[3]<<1|N[2]>>>31,$=N[13]<<12|N[12]>>>20,ee=N[12]<<12|N[13]>>>20,pn=N[22]<<10|N[23]>>>22,Pn=N[23]<<10|N[22]>>>22,et=N[33]<<13|N[32]>>>19,Ze=N[32]<<13|N[33]>>>19,Pe=N[42]<<2|N[43]>>>30,Fe=N[43]<<2|N[42]>>>30,Hn=N[5]<<30|N[4]>>>2,yn=N[4]<<30|N[5]>>>2,je=N[14]<<6|N[15]>>>26,Ye=N[15]<<6|N[14]>>>26,pe=N[25]<<11|N[24]>>>21,xe=N[24]<<11|N[25]>>>21,ia=N[34]<<15|N[35]>>>17,kn=N[35]<<15|N[34]>>>17,dt=N[45]<<29|N[44]>>>3,Se=N[44]<<29|N[45]>>>3,X=N[6]<<28|N[7]>>>4,re=N[7]<<28|N[6]>>>4,is=N[17]<<23|N[16]>>>9,Fn=N[16]<<23|N[17]>>>9,rt=N[26]<<25|N[27]>>>7,wt=N[27]<<25|N[26]>>>7,be=N[36]<<21|N[37]>>>11,De=N[37]<<21|N[36]>>>11,Un=N[47]<<24|N[46]>>>8,ii=N[46]<<24|N[47]>>>8,ri=N[8]<<27|N[9]>>>5,An=N[9]<<27|N[8]>>>5,ge=N[18]<<20|N[19]>>>12,Me=N[19]<<20|N[18]>>>12,wn=N[29]<<7|N[28]>>>25,Ae=N[28]<<7|N[29]>>>25,kt=N[38]<<8|N[39]>>>24,ur=N[39]<<8|N[38]>>>24,J=N[48]<<14|N[49]>>>18,j=N[49]<<14|N[48]>>>18,N[0]=_e^~$&pe,N[1]=ie^~ee&xe,N[10]=X^~ge&Ee,N[11]=re^~Me&We,N[20]=Je^~je&rt,N[21]=Ve^~Ye&wt,N[30]=ri^~Xt&pn,N[31]=An^~jn&Pn,N[40]=Hn^~is&wn,N[41]=yn^~Fn&Ae,N[2]=$^~pe&be,N[3]=ee^~xe&De,N[12]=ge^~Ee&et,N[13]=Me^~We&Ze,N[22]=je^~rt&kt,N[23]=Ye^~wt&ur,N[32]=Xt^~pn&ia,N[33]=jn^~Pn&kn,N[42]=is^~wn&Ue,N[43]=Fn^~Ae&Ne,N[4]=pe^~be&J,N[5]=xe^~De&j,N[14]=Ee^~et&dt,N[15]=We^~Ze&Se,N[24]=rt^~kt&bt,N[25]=wt^~ur&en,N[34]=pn^~ia&Un,N[35]=Pn^~kn&ii,N[44]=wn^~Ue&Pe,N[45]=Ae^~Ne&Fe,N[6]=be^~J&_e,N[7]=De^~j&ie,N[16]=et^~dt&X,N[17]=Ze^~Se&re,N[26]=kt^~bt&Je,N[27]=ur^~en&Ve,N[36]=ia^~Un&ri,N[37]=kn^~ii&An,N[46]=Ue^~Pe&Hn,N[47]=Ne^~Fe&yn,N[8]=J^~_e&$,N[9]=j^~ie&ee,N[18]=dt^~X&ge,N[19]=Se^~re&Me,N[28]=bt^~Je&je,N[29]=en^~Ve&Ye,N[38]=Un^~ri&Xt,N[39]=ii^~An&jn,N[48]=Pe^~Hn&is,N[49]=Fe^~yn&Fn,N[0]^=m[fe],N[1]^=m[fe+1]};if(o)r.exports=_;else for(L=0;L<R.length;++L)i[R[L]]=_[R[L]]})()}(FM)),FM.exports}var $ne=Jne();const ere=na($ne);function Ii(r){return"0x"+ere.keccak_256(Gt(r))}const tre="strings/5.8.0",C7=new Ke(tre);var Ov;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Ov||(Ov={}));var Wa;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(Wa||(Wa={}));function nre(r,e,t,n,i){return C7.throwArgumentError(`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function T7(r,e,t,n,i){if(r===Wa.BAD_PREFIX||r===Wa.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<t.length&&t[a]>>6===2;a++)s++;return s}return r===Wa.OVERRUN?t.length-e-1:0}function rre(r,e,t,n,i){return r===Wa.OVERLONG?(n.push(i),0):(n.push(65533),T7(r,e,t))}const ire=Object.freeze({error:nre,ignore:T7,replace:rre});function R7(r,e){e==null&&(e=ire.error),r=Gt(r);const t=[];let n=0;for(;n<r.length;){const i=r[n++];if(i>>7===0){t.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(Wa.UNEXPECTED_CONTINUE,n-1,r,t):n+=e(Wa.BAD_PREFIX,n-1,r,t);continue}if(n-1+s>=r.length){n+=e(Wa.OVERRUN,n-1,r,t);continue}let o=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let c=r[n];if((c&192)!=128){n+=e(Wa.MISSING_CONTINUE,n,r,t),o=null;break}o=o<<6|c&63,n++}if(o!==null){if(o>1114111){n+=e(Wa.OUT_OF_RANGE,n-1-s,r,t,o);continue}if(o>=55296&&o<=57343){n+=e(Wa.UTF16_SURROGATE,n-1-s,r,t,o);continue}if(o<=a){n+=e(Wa.OVERLONG,n-1-s,r,t,o);continue}t.push(o)}}return t}function oc(r,e=Ov.current){e!=Ov.current&&(C7.checkNormalize(),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);if(n>=r.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return Gt(t)}function sre(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function yy(r,e){return sre(R7(r,e))}function are(r,e=Ov.current){return R7(oc(r,e))}function Lp(r){return Ii(oc(r))}const I7="hash/5.8.0";function U7(r,e){e==null&&(e=1);const t=[],n=t.forEach,i=function(s,a){n.call(s,function(o){a>0&&Array.isArray(o)?i(o,a-1):t.push(o)})};return i(r,e),t}function ore(r){const e={};for(let t=0;t<r.length;t++){const n=r[t];e[n[0]]=n[1]}return e}function lre(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let S=1;S<n;S++)s.push(i+=t());let a=t(),o=e;e+=a;let l=0,c=0;function u(){return l==0&&(c=c<<8|r[e++],l=8),c>>--l&1}const f=31,d=Math.pow(2,f),p=d>>>1,v=p>>1,m=d-1;let g=0;for(let S=0;S<f;S++)g=g<<1|u();let w=[],b=0,E=d;for(;;){let S=Math.floor(((g-b+1)*i-1)/E),M=0,I=n;for(;I-M>1;){let C=M+I>>>1;S<s[C]?I=C:M=C}if(M==0)break;w.push(M);let k=b+Math.floor(E*s[M]/i),O=b+Math.floor(E*s[M+1]/i)-1;for(;((k^O)&p)==0;)g=g<<1&m|u(),k=k<<1&m,O=O<<1&m|1;for(;k&~O&v;)g=g&p|g<<1&m>>>1|u(),k=k<<1^p,O=(O^p)<<1|p|1;b=k,E=1+O-k}let B=n-4;return w.map(S=>{switch(S-B){case 3:return B+65792+(r[o++]<<16|r[o++]<<8|r[o++]);case 2:return B+256+(r[o++]<<8|r[o++]);case 1:return B+r[o++];default:return S-1}})}function cre(r){let e=0;return()=>r[e++]}function ure(r){return cre(lre(r))}function Are(r){return r&1?~r>>1:r>>1}function fre(r,e){let t=Array(r);for(let n=0;n<r;n++)t[n]=1+e();return t}function sH(r,e){let t=Array(r);for(let n=0,i=-1;n<r;n++)t[n]=i+=1+e();return t}function hre(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=Are(e());return t}function zb(r,e){let t=sH(r(),r),n=r(),i=sH(n,r),s=fre(n,r);for(let a=0;a<n;a++)for(let o=0;o<s[a];o++)t.push(i[a]+o);return e?t.map(a=>e[a]):t}function dre(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(mre(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(gre(t,r))}return ore(U7(e))}function pre(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function F7(r,e,t){let n=Array(r).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)hre(r,t).forEach((s,a)=>n[a].push(s));return n}function mre(r,e){let t=1+e(),n=e(),i=pre(e),s=F7(i.length,1+r,e);return U7(s.map((a,o)=>{const l=a[0],c=a.slice(1);return Array(i[o]).fill(void 0).map((u,f)=>{let d=f*n;return[l+f*t,c.map(p=>p+d)]})}))}function gre(r,e){let t=1+e();return F7(t,1+r,e).map(i=>[i[0],i.slice(1)])}function vre(r){let e=zb(r).sort((n,i)=>n-i);return t();function t(){let n=[];for(;;){let c=zb(r,e);if(c.length==0)break;n.push({set:new Set(c),node:t()})}n.sort((c,u)=>u.set.size-c.set.size);let i=r(),s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1,l=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:l}}}function yre(){return ure(E7("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const AE=yre(),wre=new Set(zb(AE)),_re=new Set(zb(AE)),xre=dre(AE),bre=vre(AE),aH=45,oH=95;function L7(r){return are(r)}function Ere(r){return r.filter(e=>e!=65039)}function D7(r){for(let e of r.split(".")){let t=L7(e);try{for(let n=t.lastIndexOf(oH)-1;n>=0;n--)if(t[n]!==oH)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(n=>n<128)&&t[2]===aH&&t[3]===aH)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return r}function Sre(r){return D7(Bre(r,Ere))}function Bre(r,e){let t=L7(r).reverse(),n=[];for(;t.length;){let i=Cre(t);if(i){n.push(...e(i));continue}let s=t.pop();if(wre.has(s)){n.push(s);continue}if(_re.has(s))continue;let a=xre[s];if(a){n.push(...a);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return D7(Mre(String.fromCodePoint(...n)))}function Mre(r){return r.normalize("NFC")}function Cre(r,e){var t;let n=bre,i,s,a=[],o=r.length;for(;o;){let l=r[--o];if(n=(t=n.branches.find(c=>c.set.has(l)))===null||t===void 0?void 0:t.node,!n)break;if(n.save)s=l;else if(n.check&&l===s)break;a.push(l),n.fe0f&&(a.push(65039),o>0&&r[o-1]==65039&&o--),n.valid&&(i=a.slice(),n.valid==2&&i.splice(1,1),r.length=o)}return i}const Tre=new Ke(I7),O7=new Uint8Array(32);O7.fill(0);function lH(r){if(r.length===0)throw new Error("invalid ENS name; empty component");return r}function N7(r){const e=oc(Sre(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(lH(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return t.push(lH(e.slice(n))),t}function ib(r){typeof r!="string"&&Tre.throwArgumentError("invalid ENS name; not a string","name",r);let e=O7;const t=N7(r);for(;t.length;)e=Ii(Xa([e,Ii(t.pop())]));return Ot(e)}function Rre(r){return Ot(Xa(N7(r).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const Ire="rlp/5.8.0",Gl=new Ke(Ire);function cH(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function uH(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function P7(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(P7(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=cH(n.length);return i.unshift(247+i.length),i.concat(n)}CD(r)||Gl.throwArgumentError("RLP object must be BytesLike","object",r);const e=Array.prototype.slice.call(Gt(r));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=cH(e.length);return t.unshift(183+t.length),t.concat(e)}function fE(r){return Ot(P7(r))}function AH(r,e,t,n){const i=[];for(;t<e+1+n;){const s=k7(r,t);i.push(s.result),t+=s.consumed,t>e+1+n&&Gl.throwError("child data too short",Ke.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function k7(r,e){if(r.length===0&&Gl.throwError("data too short",Ke.errors.BUFFER_OVERRUN,{}),r[e]>=248){const t=r[e]-247;e+1+t>r.length&&Gl.throwError("data short segment too short",Ke.errors.BUFFER_OVERRUN,{});const n=uH(r,e+1,t);return e+1+t+n>r.length&&Gl.throwError("data long segment too short",Ke.errors.BUFFER_OVERRUN,{}),AH(r,e,e+1+t,t+n)}else if(r[e]>=192){const t=r[e]-192;return e+1+t>r.length&&Gl.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{}),AH(r,e,e+1,t)}else if(r[e]>=184){const t=r[e]-183;e+1+t>r.length&&Gl.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{});const n=uH(r,e+1,t);e+1+t+n>r.length&&Gl.throwError("data array too short",Ke.errors.BUFFER_OVERRUN,{});const i=Ot(r.slice(e+1+t,e+1+t+n));return{consumed:1+t+n,result:i}}else if(r[e]>=128){const t=r[e]-128;e+1+t>r.length&&Gl.throwError("data too short",Ke.errors.BUFFER_OVERRUN,{});const n=Ot(r.slice(e+1,e+1+t));return{consumed:1+t,result:n}}return{consumed:1,result:Ot(r[e])}}function RD(r){const e=Gt(r),t=k7(e,0);return t.consumed!==e.length&&Gl.throwArgumentError("invalid rlp data","data",r),t.result}const Ure="address/5.8.0",Dp=new Ke(Ure);function fH(r){$n(r,20)||Dp.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=Gt(Ii(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Fre=9007199254740991;function Lre(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const ID={};for(let r=0;r<10;r++)ID[String(r)]=String(r);for(let r=0;r<26;r++)ID[String.fromCharCode(65+r)]=String(10+r);const hH=Math.floor(Lre(Fre));function Dre(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>ID[n]).join("");for(;e.length>=hH;){let n=e.substring(0,hH);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function vs(r){let e=null;if(typeof r!="string"&&Dp.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=fH(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Dp.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==Dre(r)&&Dp.throwArgumentError("bad icap checksum","address",r),e=Lne(r.substring(4));e.length<40;)e="0"+e;e=fH("0x"+e)}else Dp.throwArgumentError("invalid address","address",r);return e}function H7(r){let e=null;try{e=vs(r.from)}catch{Dp.throwArgumentError("missing from address","transaction",r)}const t=dm(Gt(mt.from(r.nonce).toHexString()));return vs(Ls(Ii(fE([e,t])),12))}var Ore=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const kr=new Ke(I7),Q7=new Uint8Array(32);Q7.fill(0);const Nre=mt.from(-1),z7=mt.from(0),V7=mt.from(1),Pre=mt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function kre(r){const e=Gt(r),t=e.length%32;return t?ga([e,Q7.slice(t)]):Ot(e)}const Hre=ei(V7.toHexString(),32),Qre=ei(z7.toHexString(),32),dH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},LM=["name","version","chainId","verifyingContract","salt"];function pH(r){return function(e){return typeof e!="string"&&kr.throwArgumentError(`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const zre={name:pH("name"),version:pH("version"),chainId:function(r){try{return mt.from(r).toString()}catch{}return kr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",r)},verifyingContract:function(r){try{return vs(r).toLowerCase()}catch{}return kr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){try{const e=Gt(r);if(e.length!==32)throw new Error("bad length");return Ot(e)}catch{}return kr.throwArgumentError('invalid domain value "salt"',"domain.salt",r)}};function DM(r){{const e=r.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&kr.throwArgumentError("invalid numeric width","type",r);const i=Pre.mask(t?n-1:n),s=t?i.add(V7).mul(Nre):z7;return function(a){const o=mt.from(a);return(o.lt(s)||o.gt(i))&&kr.throwArgumentError(`value out-of-bounds for ${r}`,"value",a),ei(o.toTwos(256).toHexString(),32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&kr.throwArgumentError("invalid bytes width","type",r),function(n){return Gt(n).length!==t&&kr.throwArgumentError(`invalid length for ${r}`,"value",n),kre(n)}}}switch(r){case"address":return function(e){return ei(vs(e),32)};case"bool":return function(e){return e?Hre:Qre};case"bytes":return function(e){return Ii(e)};case"string":return function(e){return Lp(e)}}return null}function mH(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}class Ga{constructor(e){it(this,"types",Object.freeze(wu(e))),it(this,"_encoderCache",{}),it(this,"_types",{});const t={},n={},i={};Object.keys(e).forEach(o=>{t[o]={},n[o]=[],i[o]={}});for(const o in e){const l={};e[o].forEach(c=>{l[c.name]&&kr.throwArgumentError(`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(o)}`,"types",e),l[c.name]=!0;const u=c.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===o&&kr.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!DM(u)&&(n[u]||kr.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(o),t[o][u]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?kr.throwArgumentError("missing primary type","types",e):s.length>1&&kr.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),it(this,"primaryType",s[0]);function a(o,l){l[o]&&kr.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),l[o]=!0,Object.keys(t[o]).forEach(c=>{n[c]&&(a(c,l),Object.keys(l).forEach(u=>{i[u][c]=!0}))}),delete l[o]}a(this.primaryType,{});for(const o in i){const l=Object.keys(i[o]);l.sort(),this._types[o]=mH(o,e[o])+l.map(c=>mH(c,e[c])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=DM(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),a=parseInt(t[3]);return o=>{a>=0&&o.length!==a&&kr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let l=o.map(s);return this._types[i]&&(l=l.map(Ii)),Ii(ga(l))}}const n=this.types[e];if(n){const i=Lp(this._types[e]);return s=>{const a=n.map(({name:o,type:l})=>{const c=this.getEncoder(l)(s[o]);return this._types[l]?Ii(c):c});return a.unshift(i),ga(a)}}return kr.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||kr.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ii(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(DM(e))return n(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&t.length!==o&&kr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(a,l,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:l})=>(a[o]=this._visit(l,t[o],n),a),{}):kr.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ga(e)}static getPrimaryType(e){return Ga.from(e).primaryType}static hashStruct(e,t,n){return Ga.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){const i=dH[n];i||kr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>LM.indexOf(n.name)-LM.indexOf(i.name)),Ga.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return ga(["0x1901",Ga.hashDomain(e),Ga.from(t).hash(n)])}static hash(e,t,n){return Ii(Ga.encode(e,t,n))}static resolveNames(e,t,n,i){return Ore(this,void 0,void 0,function*(){e=Qi(e);const s={};e.verifyingContract&&!$n(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=Ga.from(t);a.visit(n,(o,l)=>(o==="address"&&!$n(l,20)&&(s[l]="0x"),l));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,l)=>o==="address"&&s[l]?s[l]:l),{domain:e,value:n}})}static getPayload(e,t,n){Ga.hashDomain(e);const i={},s=[];LM.forEach(l=>{const c=e[l];c!=null&&(i[l]=zre[l](c),s.push({name:l,type:dH[l]}))});const a=Ga.from(t),o=Qi(t);return o.EIP712Domain?kr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(l,c)=>{if(l.match(/^bytes(\d*)/))return Ot(Gt(c));if(l.match(/^u?int/))return mt.from(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return typeof c!="string"&&kr.throwArgumentError("invalid string","value",c),c}return kr.throwArgumentError("unsupported type","type",l)})}}}var OM={},dr={},NM,gH;function wy(){if(gH)return NM;gH=1,NM=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,i){if(t!=n)throw new Error(i||"Assertion failed: "+t+" != "+n)},NM}var $w={exports:{}},vH;function Vre(){return vH||(vH=1,typeof Object.create=="function"?$w.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$w.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),$w.exports}var yH;function dc(){if(yH)return dr;yH=1;var r=wy(),e=Vre();dr.inherits=e;function t(D,F){return(D.charCodeAt(F)&64512)!==55296||F<0||F+1>=D.length?!1:(D.charCodeAt(F+1)&64512)===56320}function n(D,F){if(Array.isArray(D))return D.slice();if(!D)return[];var _=[];if(typeof D=="string")if(F){if(F==="hex")for(D=D.replace(/[^a-z0-9]+/ig,""),D.length%2!==0&&(D="0"+D),L=0;L<D.length;L+=2)_.push(parseInt(D[L]+D[L+1],16))}else for(var R=0,L=0;L<D.length;L++){var Q=D.charCodeAt(L);Q<128?_[R++]=Q:Q<2048?(_[R++]=Q>>6|192,_[R++]=Q&63|128):t(D,L)?(Q=65536+((Q&1023)<<10)+(D.charCodeAt(++L)&1023),_[R++]=Q>>18|240,_[R++]=Q>>12&63|128,_[R++]=Q>>6&63|128,_[R++]=Q&63|128):(_[R++]=Q>>12|224,_[R++]=Q>>6&63|128,_[R++]=Q&63|128)}else for(L=0;L<D.length;L++)_[L]=D[L]|0;return _}dr.toArray=n;function i(D){for(var F="",_=0;_<D.length;_++)F+=o(D[_].toString(16));return F}dr.toHex=i;function s(D){var F=D>>>24|D>>>8&65280|D<<8&16711680|(D&255)<<24;return F>>>0}dr.htonl=s;function a(D,F){for(var _="",R=0;R<D.length;R++){var L=D[R];F==="little"&&(L=s(L)),_+=l(L.toString(16))}return _}dr.toHex32=a;function o(D){return D.length===1?"0"+D:D}dr.zero2=o;function l(D){return D.length===7?"0"+D:D.length===6?"00"+D:D.length===5?"000"+D:D.length===4?"0000"+D:D.length===3?"00000"+D:D.length===2?"000000"+D:D.length===1?"0000000"+D:D}dr.zero8=l;function c(D,F,_,R){var L=_-F;r(L%4===0);for(var Q=new Array(L/4),G=0,Y=F;G<Q.length;G++,Y+=4){var W;R==="big"?W=D[Y]<<24|D[Y+1]<<16|D[Y+2]<<8|D[Y+3]:W=D[Y+3]<<24|D[Y+2]<<16|D[Y+1]<<8|D[Y],Q[G]=W>>>0}return Q}dr.join32=c;function u(D,F){for(var _=new Array(D.length*4),R=0,L=0;R<D.length;R++,L+=4){var Q=D[R];F==="big"?(_[L]=Q>>>24,_[L+1]=Q>>>16&255,_[L+2]=Q>>>8&255,_[L+3]=Q&255):(_[L+3]=Q>>>24,_[L+2]=Q>>>16&255,_[L+1]=Q>>>8&255,_[L]=Q&255)}return _}dr.split32=u;function f(D,F){return D>>>F|D<<32-F}dr.rotr32=f;function d(D,F){return D<<F|D>>>32-F}dr.rotl32=d;function p(D,F){return D+F>>>0}dr.sum32=p;function v(D,F,_){return D+F+_>>>0}dr.sum32_3=v;function m(D,F,_,R){return D+F+_+R>>>0}dr.sum32_4=m;function g(D,F,_,R,L){return D+F+_+R+L>>>0}dr.sum32_5=g;function w(D,F,_,R){var L=D[F],Q=D[F+1],G=R+Q>>>0,Y=(G<R?1:0)+_+L;D[F]=Y>>>0,D[F+1]=G}dr.sum64=w;function b(D,F,_,R){var L=F+R>>>0,Q=(L<F?1:0)+D+_;return Q>>>0}dr.sum64_hi=b;function E(D,F,_,R){var L=F+R;return L>>>0}dr.sum64_lo=E;function B(D,F,_,R,L,Q,G,Y){var W=0,V=F;V=V+R>>>0,W+=V<F?1:0,V=V+Q>>>0,W+=V<Q?1:0,V=V+Y>>>0,W+=V<Y?1:0;var T=D+_+L+G+W;return T>>>0}dr.sum64_4_hi=B;function S(D,F,_,R,L,Q,G,Y){var W=F+R+Q+Y;return W>>>0}dr.sum64_4_lo=S;function M(D,F,_,R,L,Q,G,Y,W,V){var T=0,H=F;H=H+R>>>0,T+=H<F?1:0,H=H+Q>>>0,T+=H<Q?1:0,H=H+Y>>>0,T+=H<Y?1:0,H=H+V>>>0,T+=H<V?1:0;var K=D+_+L+G+W+T;return K>>>0}dr.sum64_5_hi=M;function I(D,F,_,R,L,Q,G,Y,W,V){var T=F+R+Q+Y+V;return T>>>0}dr.sum64_5_lo=I;function k(D,F,_){var R=F<<32-_|D>>>_;return R>>>0}dr.rotr64_hi=k;function O(D,F,_){var R=D<<32-_|F>>>_;return R>>>0}dr.rotr64_lo=O;function C(D,F,_){return D>>>_}dr.shr64_hi=C;function P(D,F,_){var R=D<<32-_|F>>>_;return R>>>0}return dr.shr64_lo=P,dr}var PM={},wH;function _y(){if(wH)return PM;wH=1;var r=dc(),e=wy();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return PM.BlockHash=t,t.prototype.update=function(i,s){if(i=r.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var a=i.length%this._delta8;this.pending=i.slice(i.length-a,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-a,this.endian);for(var o=0;o<i.length;o+=this._delta32)this._update(i,o,o+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,a=s-(i+this.padLength)%s,o=new Array(a+this.padLength);o[0]=128;for(var l=1;l<a;l++)o[l]=0;if(i<<=3,this.endian==="big"){for(var c=8;c<this.padLength;c++)o[l++]=0;o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=i>>>24&255,o[l++]=i>>>16&255,o[l++]=i>>>8&255,o[l++]=i&255}else for(o[l++]=i&255,o[l++]=i>>>8&255,o[l++]=i>>>16&255,o[l++]=i>>>24&255,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,c=8;c<this.padLength;c++)o[l++]=0;return o},PM}var Mf={},Ul={},_H;function G7(){if(_H)return Ul;_H=1;var r=dc(),e=r.rotr32;function t(u,f,d,p){if(u===0)return n(f,d,p);if(u===1||u===3)return s(f,d,p);if(u===2)return i(f,d,p)}Ul.ft_1=t;function n(u,f,d){return u&f^~u&d}Ul.ch32=n;function i(u,f,d){return u&f^u&d^f&d}Ul.maj32=i;function s(u,f,d){return u^f^d}Ul.p32=s;function a(u){return e(u,2)^e(u,13)^e(u,22)}Ul.s0_256=a;function o(u){return e(u,6)^e(u,11)^e(u,25)}Ul.s1_256=o;function l(u){return e(u,7)^e(u,18)^u>>>3}Ul.g0_256=l;function c(u){return e(u,17)^e(u,19)^u>>>10}return Ul.g1_256=c,Ul}var kM,xH;function Gre(){if(xH)return kM;xH=1;var r=dc(),e=_y(),t=G7(),n=r.rotl32,i=r.sum32,s=r.sum32_5,a=t.ft_1,o=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(c,o),kM=c,c.blockSize=512,c.outSize=160,c.hmacStrength=80,c.padLength=64,c.prototype._update=function(f,d){for(var p=this.W,v=0;v<16;v++)p[v]=f[d+v];for(;v<p.length;v++)p[v]=n(p[v-3]^p[v-8]^p[v-14]^p[v-16],1);var m=this.h[0],g=this.h[1],w=this.h[2],b=this.h[3],E=this.h[4];for(v=0;v<p.length;v++){var B=~~(v/20),S=s(n(m,5),a(B,g,w,b),E,p[v],l[B]);E=b,b=w,w=n(g,30),g=m,m=S}this.h[0]=i(this.h[0],m),this.h[1]=i(this.h[1],g),this.h[2]=i(this.h[2],w),this.h[3]=i(this.h[3],b),this.h[4]=i(this.h[4],E)},c.prototype._digest=function(f){return f==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},kM}var HM,bH;function j7(){if(bH)return HM;bH=1;var r=dc(),e=_y(),t=G7(),n=wy(),i=r.sum32,s=r.sum32_4,a=r.sum32_5,o=t.ch32,l=t.maj32,c=t.s0_256,u=t.s1_256,f=t.g0_256,d=t.g1_256,p=e.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}return r.inherits(m,p),HM=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(w,b){for(var E=this.W,B=0;B<16;B++)E[B]=w[b+B];for(;B<E.length;B++)E[B]=s(d(E[B-2]),E[B-7],f(E[B-15]),E[B-16]);var S=this.h[0],M=this.h[1],I=this.h[2],k=this.h[3],O=this.h[4],C=this.h[5],P=this.h[6],D=this.h[7];for(n(this.k.length===E.length),B=0;B<E.length;B++){var F=a(D,u(O),o(O,C,P),this.k[B],E[B]),_=i(c(S),l(S,M,I));D=P,P=C,C=O,O=i(k,F),k=I,I=M,M=S,S=i(F,_)}this.h[0]=i(this.h[0],S),this.h[1]=i(this.h[1],M),this.h[2]=i(this.h[2],I),this.h[3]=i(this.h[3],k),this.h[4]=i(this.h[4],O),this.h[5]=i(this.h[5],C),this.h[6]=i(this.h[6],P),this.h[7]=i(this.h[7],D)},m.prototype._digest=function(w){return w==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},HM}var QM,EH;function jre(){if(EH)return QM;EH=1;var r=dc(),e=j7();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),QM=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},QM}var zM,SH;function W7(){if(SH)return zM;SH=1;var r=dc(),e=_y(),t=wy(),n=r.rotr64_hi,i=r.rotr64_lo,s=r.shr64_hi,a=r.shr64_lo,o=r.sum64,l=r.sum64_hi,c=r.sum64_lo,u=r.sum64_4_hi,f=r.sum64_4_lo,d=r.sum64_5_hi,p=r.sum64_5_lo,v=e.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function g(){if(!(this instanceof g))return new g;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}r.inherits(g,v),zM=g,g.blockSize=1024,g.outSize=512,g.hmacStrength=192,g.padLength=128,g.prototype._prepareBlock=function(_,R){for(var L=this.W,Q=0;Q<32;Q++)L[Q]=_[R+Q];for(;Q<L.length;Q+=2){var G=P(L[Q-4],L[Q-3]),Y=D(L[Q-4],L[Q-3]),W=L[Q-14],V=L[Q-13],T=O(L[Q-30],L[Q-29]),H=C(L[Q-30],L[Q-29]),K=L[Q-32],N=L[Q-31];L[Q]=u(G,Y,W,V,T,H,K,N),L[Q+1]=f(G,Y,W,V,T,H,K,N)}},g.prototype._update=function(_,R){this._prepareBlock(_,R);var L=this.W,Q=this.h[0],G=this.h[1],Y=this.h[2],W=this.h[3],V=this.h[4],T=this.h[5],H=this.h[6],K=this.h[7],N=this.h[8],te=this.h[9],oe=this.h[10],fe=this.h[11],he=this.h[12],me=this.h[13],Te=this.h[14],Re=this.h[15];t(this.k.length===L.length);for(var de=0;de<L.length;de+=2){var Z=Te,ve=Re,ye=I(N,te),se=k(N,te),ce=w(N,te,oe,fe,he),_e=b(N,te,oe,fe,he,me),ie=this.k[de],$=this.k[de+1],ee=L[de],pe=L[de+1],xe=d(Z,ve,ye,se,ce,_e,ie,$,ee,pe),be=p(Z,ve,ye,se,ce,_e,ie,$,ee,pe);Z=S(Q,G),ve=M(Q,G),ye=E(Q,G,Y,W,V),se=B(Q,G,Y,W,V,T);var De=l(Z,ve,ye,se),J=c(Z,ve,ye,se);Te=he,Re=me,he=oe,me=fe,oe=N,fe=te,N=l(H,K,xe,be),te=c(K,K,xe,be),H=V,K=T,V=Y,T=W,Y=Q,W=G,Q=l(xe,be,De,J),G=c(xe,be,De,J)}o(this.h,0,Q,G),o(this.h,2,Y,W),o(this.h,4,V,T),o(this.h,6,H,K),o(this.h,8,N,te),o(this.h,10,oe,fe),o(this.h,12,he,me),o(this.h,14,Te,Re)},g.prototype._digest=function(_){return _==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function w(F,_,R,L,Q){var G=F&R^~F&Q;return G<0&&(G+=4294967296),G}function b(F,_,R,L,Q,G){var Y=_&L^~_&G;return Y<0&&(Y+=4294967296),Y}function E(F,_,R,L,Q){var G=F&R^F&Q^R&Q;return G<0&&(G+=4294967296),G}function B(F,_,R,L,Q,G){var Y=_&L^_&G^L&G;return Y<0&&(Y+=4294967296),Y}function S(F,_){var R=n(F,_,28),L=n(_,F,2),Q=n(_,F,7),G=R^L^Q;return G<0&&(G+=4294967296),G}function M(F,_){var R=i(F,_,28),L=i(_,F,2),Q=i(_,F,7),G=R^L^Q;return G<0&&(G+=4294967296),G}function I(F,_){var R=n(F,_,14),L=n(F,_,18),Q=n(_,F,9),G=R^L^Q;return G<0&&(G+=4294967296),G}function k(F,_){var R=i(F,_,14),L=i(F,_,18),Q=i(_,F,9),G=R^L^Q;return G<0&&(G+=4294967296),G}function O(F,_){var R=n(F,_,1),L=n(F,_,8),Q=s(F,_,7),G=R^L^Q;return G<0&&(G+=4294967296),G}function C(F,_){var R=i(F,_,1),L=i(F,_,8),Q=a(F,_,7),G=R^L^Q;return G<0&&(G+=4294967296),G}function P(F,_){var R=n(F,_,19),L=n(_,F,29),Q=s(F,_,6),G=R^L^Q;return G<0&&(G+=4294967296),G}function D(F,_){var R=i(F,_,19),L=i(_,F,29),Q=a(F,_,6),G=R^L^Q;return G<0&&(G+=4294967296),G}return zM}var VM,BH;function Wre(){if(BH)return VM;BH=1;var r=dc(),e=W7();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),VM=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},VM}var MH;function Kre(){return MH||(MH=1,Mf.sha1=Gre(),Mf.sha224=jre(),Mf.sha256=j7(),Mf.sha384=Wre(),Mf.sha512=W7()),Mf}var GM={},CH;function qre(){if(CH)return GM;CH=1;var r=dc(),e=_y(),t=r.rotl32,n=r.sum32,i=r.sum32_3,s=r.sum32_4,a=e.BlockHash;function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(o,a),GM.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(g,w){for(var b=this.h[0],E=this.h[1],B=this.h[2],S=this.h[3],M=this.h[4],I=b,k=E,O=B,C=S,P=M,D=0;D<80;D++){var F=n(t(s(b,l(D,E,B,S),g[f[D]+w],c(D)),p[D]),M);b=M,M=S,S=t(B,10),B=E,E=F,F=n(t(s(I,l(79-D,k,O,C),g[d[D]+w],u(D)),v[D]),P),I=P,P=C,C=t(O,10),O=k,k=F}F=i(this.h[1],B,C),this.h[1]=i(this.h[2],S,P),this.h[2]=i(this.h[3],M,I),this.h[3]=i(this.h[4],b,k),this.h[4]=i(this.h[0],E,O),this.h[0]=F},o.prototype._digest=function(g){return g==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function l(m,g,w,b){return m<=15?g^w^b:m<=31?g&w|~g&b:m<=47?(g|~w)^b:m<=63?g&b|w&~b:g^(w|~b)}function c(m){return m<=15?0:m<=31?1518500249:m<=47?1859775393:m<=63?2400959708:2840853838}function u(m){return m<=15?1352829926:m<=31?1548603684:m<=47?1836072691:m<=63?2053994217:0}var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return GM}var jM,TH;function Yre(){if(TH)return jM;TH=1;var r=dc(),e=wy();function t(n,i,s){if(!(this instanceof t))return new t(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,s))}return jM=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,s){return this.inner.update(i,s),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},jM}var RH;function Xre(){return RH||(RH=1,function(r){var e=r;e.utils=dc(),e.common=_y(),e.sha=Kre(),e.ripemd=qre(),e.hmac=Yre(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(OM)),OM}var Zre=Xre();const zl=na(Zre);function IH(r){return"0x"+zl.sha256().update(Gt(r)).digest("hex")}const Jre="web/5.8.0";var $re=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};function eie(r,e){return $re(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const a=e.fetchOptions;a.mode&&(t.mode=a.mode),a.cache&&(t.cache=a.cache),a.credentials&&(t.credentials=a.credentials),a.redirect&&(t.redirect=a.redirect),a.referrer&&(t.referrer=a.referrer)}const n=yield fetch(r,t),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((a,o)=>{s[o.toLowerCase()]=a}):n.headers.keys().forEach(a=>{s[a.toLowerCase()]=n.headers.get(a)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:Gt(new Uint8Array(i))}})}var tie=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const sl=new Ke(Jre);function UH(r){return new Promise(e=>{setTimeout(e,r)})}function aA(r,e){if(r==null)return null;if(typeof r=="string")return r;if(CD(r)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return yy(r)}catch{}return Ot(r)}return r}function nie(r){return oc(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function rie(r,e,t){const n=typeof r=="object"&&r.throttleLimit!=null?r.throttleLimit:12;sl.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof r=="object"?r.throttleCallback:null,s=typeof r=="object"&&typeof r.throttleSlotInterval=="number"?r.throttleSlotInterval:100;sl.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof r=="object"?!!r.errorPassThrough:!1,o={};let l=null;const c={method:"GET"};let u=!1,f=2*60*1e3;if(typeof r=="string")l=r;else if(typeof r=="object"){if((r==null||r.url==null)&&sl.throwArgumentError("missing URL","connection.url",r),l=r.url,typeof r.timeout=="number"&&r.timeout>0&&(f=r.timeout),r.headers)for(const w in r.headers)o[w.toLowerCase()]={key:w,value:String(r.headers[w])},["if-none-match","if-modified-since"].indexOf(w.toLowerCase())>=0&&(u=!0);if(c.allowGzip=!!r.allowGzip,r.user!=null&&r.password!=null){l.substring(0,6)!=="https:"&&r.allowInsecureAuthentication!==!0&&sl.throwError("basic authentication requires a secure https url",Ke.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:r.user,password:"[REDACTED]"});const w=r.user+":"+r.password;o.authorization={key:"Authorization",value:"Basic "+S7(oc(w))}}r.skipFetchSetup!=null&&(c.skipFetchSetup=!!r.skipFetchSetup),r.fetchOptions!=null&&(c.fetchOptions=Qi(r.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),p=l?l.match(d):null;if(p)try{const w={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]||"text/plain"},body:p[2]?E7(p[3]):nie(p[3])};let b=w.body;return t&&(b=t(w.body,w)),Promise.resolve(b)}catch(w){sl.throwError("processing response error",Ke.errors.SERVER_ERROR,{body:aA(p[1],p[2]),error:w,requestBody:null,requestMethod:"GET",url:l})}e&&(c.method="POST",c.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const v={};Object.keys(o).forEach(w=>{const b=o[w];v[b.key]=b.value}),c.headers=v;const m=function(){let w=null;return{promise:new Promise(function(B,S){f&&(w=setTimeout(()=>{w!=null&&(w=null,S(sl.makeError("timeout",Ke.errors.TIMEOUT,{requestBody:aA(c.body,v["content-type"]),requestMethod:c.method,timeout:f,url:l})))},f))}),cancel:function(){w!=null&&(clearTimeout(w),w=null)}}}(),g=function(){return tie(this,void 0,void 0,function*(){for(let w=0;w<n;w++){let b=null;try{if(b=yield eie(l,c),w<n){if(b.statusCode===301||b.statusCode===302){const B=b.headers.location||"";if(c.method==="GET"&&B.match(/^https:/)){l=b.headers.location;continue}}else if(b.statusCode===429){let B=!0;if(i&&(B=yield i(w,l)),B){let S=0;const M=b.headers["retry-after"];typeof M=="string"&&M.match(/^[1-9][0-9]*$/)?S=parseInt(M)*1e3:S=s*parseInt(String(Math.random()*Math.pow(2,w))),yield UH(S);continue}}}}catch(B){b=B.response,b==null&&(m.cancel(),sl.throwError("missing response",Ke.errors.SERVER_ERROR,{requestBody:aA(c.body,v["content-type"]),requestMethod:c.method,serverError:B,url:l}))}let E=b.body;if(u&&b.statusCode===304?E=null:!a&&(b.statusCode<200||b.statusCode>=300)&&(m.cancel(),sl.throwError("bad response",Ke.errors.SERVER_ERROR,{status:b.statusCode,headers:b.headers,body:aA(E,b.headers?b.headers["content-type"]:null),requestBody:aA(c.body,v["content-type"]),requestMethod:c.method,url:l})),t)try{const B=yield t(E,b);return m.cancel(),B}catch(B){if(B.throttleRetry&&w<n){let S=!0;if(i&&(S=yield i(w,l)),S){const M=s*parseInt(String(Math.random()*Math.pow(2,w)));yield UH(M);continue}}m.cancel(),sl.throwError("processing response error",Ke.errors.SERVER_ERROR,{body:aA(E,b.headers?b.headers["content-type"]:null),error:B,requestBody:aA(c.body,v["content-type"]),requestMethod:c.method,url:l})}return m.cancel(),E}return sl.throwError("failed response",Ke.errors.SERVER_ERROR,{requestBody:aA(c.body,v["content-type"]),requestMethod:c.method,url:l})})}();return Promise.race([m.promise,g])}function UD(r,e,t){let n=(s,a)=>{let o=null;if(s!=null)try{o=JSON.parse(yy(s))}catch(l){sl.throwError("invalid JSON",Ke.errors.SERVER_ERROR,{body:s,error:l})}return t&&(o=t(o,a)),o},i=null;if(e!=null){i=oc(e);const s=typeof r=="string"?{url:r}:Qi(r);s.headers?Object.keys(s.headers).filter(o=>o.toLowerCase()==="content-type").length!==0||(s.headers=Qi(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},r=s}return rie(r,i,n)}function q0(r,e){return e||(e={}),e=Qi(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,n){let i=null,s=!1;const a=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{a()&&n(new Error("timeout"))},e.timeout));const o=e.retryLimit;let l=0;function c(){return r().then(function(u){if(u!==void 0)a()&&t(u);else if(e.oncePoll)e.oncePoll.once("poll",c);else if(e.onceBlock)e.onceBlock.once("block",c);else if(!s){if(l++,l>o){a()&&n(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(c,f)}return null},function(u){a()&&n(u)})}c()})}var WM,FH;function iie(){if(FH)return WM;FH=1;for(var r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={},t=0;t<r.length;t++){var n=r.charAt(t);if(e[n]!==void 0)throw new TypeError(n+" is ambiguous");e[n]=t}function i(m){var g=m>>25;return(m&33554431)<<5^-(g>>0&1)&996825010^-(g>>1&1)&642813549^-(g>>2&1)&513874426^-(g>>3&1)&1027748829^-(g>>4&1)&705979059}function s(m){for(var g=1,w=0;w<m.length;++w){var b=m.charCodeAt(w);if(b<33||b>126)return"Invalid prefix ("+m+")";g=i(g)^b>>5}for(g=i(g),w=0;w<m.length;++w){var E=m.charCodeAt(w);g=i(g)^E&31}return g}function a(m,g,w){if(w=w||90,m.length+7+g.length>w)throw new TypeError("Exceeds length limit");m=m.toLowerCase();var b=s(m);if(typeof b=="string")throw new Error(b);for(var E=m+"1",B=0;B<g.length;++B){var S=g[B];if(S>>5!==0)throw new Error("Non 5-bit word");b=i(b)^S,E+=r.charAt(S)}for(B=0;B<6;++B)b=i(b);for(b^=1,B=0;B<6;++B){var M=b>>(5-B)*5&31;E+=r.charAt(M)}return E}function o(m,g){if(g=g||90,m.length<8)return m+" too short";if(m.length>g)return"Exceeds length limit";var w=m.toLowerCase(),b=m.toUpperCase();if(m!==w&&m!==b)return"Mixed-case string "+m;m=w;var E=m.lastIndexOf("1");if(E===-1)return"No separator character for "+m;if(E===0)return"Missing prefix for "+m;var B=m.slice(0,E),S=m.slice(E+1);if(S.length<6)return"Data too short";var M=s(B);if(typeof M=="string")return M;for(var I=[],k=0;k<S.length;++k){var O=S.charAt(k),C=e[O];if(C===void 0)return"Unknown character "+O;M=i(M)^C,!(k+6>=S.length)&&I.push(C)}return M!==1?"Invalid checksum for "+m:{prefix:B,words:I}}function l(){var m=o.apply(null,arguments);if(typeof m=="object")return m}function c(m){var g=o.apply(null,arguments);if(typeof g=="object")return g;throw new Error(g)}function u(m,g,w,b){for(var E=0,B=0,S=(1<<w)-1,M=[],I=0;I<m.length;++I)for(E=E<<g|m[I],B+=g;B>=w;)B-=w,M.push(E>>B&S);if(b)B>0&&M.push(E<<w-B&S);else{if(B>=g)return"Excess padding";if(E<<w-B&S)return"Non-zero padding"}return M}function f(m){var g=u(m,8,5,!0);if(Array.isArray(g))return g}function d(m){var g=u(m,8,5,!0);if(Array.isArray(g))return g;throw new Error(g)}function p(m){var g=u(m,5,8,!1);if(Array.isArray(g))return g}function v(m){var g=u(m,5,8,!1);if(Array.isArray(g))return g;throw new Error(g)}return WM={decodeUnsafe:l,decode:c,encode:a,toWordsUnsafe:f,toWords:d,fromWordsUnsafe:p,fromWords:v},WM}var sie=iie();const LH=na(sie),hE="providers/5.8.0";function Hm(r,e,t){return t={path:e,exports:{},require:function(n,i){return aie(n,i??t.path)}},r(t,t.exports),t.exports}function aie(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var FD=K7;function K7(r,e){if(!r)throw new Error(e||"Assertion failed")}K7.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var pl=Hm(function(r,e){var t=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var l=[];if(typeof a!="string"){for(var c=0;c<a.length;c++)l[c]=a[c]|0;return l}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var c=0;c<a.length;c+=2)l.push(parseInt(a[c]+a[c+1],16))}else for(var c=0;c<a.length;c++){var u=a.charCodeAt(c),f=u>>8,d=u&255;f?l.push(f,d):l.push(d)}return l}t.toArray=n;function i(a){return a.length===1?"0"+a:a}t.zero2=i;function s(a){for(var o="",l=0;l<a.length;l++)o+=i(a[l].toString(16));return o}t.toHex=s,t.encode=function(o,l){return l==="hex"?s(o):o}}),co=Hm(function(r,e){var t=e;t.assert=FD,t.toArray=pl.toArray,t.zero2=pl.zero2,t.toHex=pl.toHex,t.encode=pl.encode;function n(l,c,u){var f=new Array(Math.max(l.bitLength(),u)+1),d;for(d=0;d<f.length;d+=1)f[d]=0;var p=1<<c+1,v=l.clone();for(d=0;d<f.length;d++){var m,g=v.andln(p-1);v.isOdd()?(g>(p>>1)-1?m=(p>>1)-g:m=g,v.isubn(m)):m=0,f[d]=m,v.iushrn(1)}return f}t.getNAF=n;function i(l,c){var u=[[],[]];l=l.clone(),c=c.clone();for(var f=0,d=0,p;l.cmpn(-f)>0||c.cmpn(-d)>0;){var v=l.andln(3)+f&3,m=c.andln(3)+d&3;v===3&&(v=-1),m===3&&(m=-1);var g;(v&1)===0?g=0:(p=l.andln(7)+f&7,(p===3||p===5)&&m===2?g=-v:g=v),u[0].push(g);var w;(m&1)===0?w=0:(p=c.andln(7)+d&7,(p===3||p===5)&&v===2?w=-m:w=m),u[1].push(w),2*f===g+1&&(f=1-f),2*d===w+1&&(d=1-d),l.iushrn(1),c.iushrn(1)}return u}t.getJSF=i;function s(l,c,u){var f="_"+c;l.prototype[c]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}t.cachedProperty=s;function a(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=a;function o(l){return new Yt(l,"hex","le")}t.intFromLE=o}),Vb=co.getNAF,oie=co.getJSF,Gb=co.assert;function af(r,e){this.type=r,this.p=new Yt(e.p,16),this.red=e.prime?Yt.red(e.prime):Yt.mont(this.p),this.zero=new Yt(0).toRed(this.red),this.one=new Yt(1).toRed(this.red),this.two=new Yt(2).toRed(this.red),this.n=e.n&&new Yt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var xh=af;af.prototype.point=function(){throw new Error("Not implemented")};af.prototype.validate=function(){throw new Error("Not implemented")};af.prototype._fixedNafMul=function(e,t){Gb(e.precomputed);var n=e._getDoubles(),i=Vb(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,l;for(o=0;o<i.length;o+=n.step){l=0;for(var c=o+n.step-1;c>=o;c--)l=(l<<1)+i[c];a.push(l)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=s;d>0;d--){for(o=0;o<a.length;o++)l=a[o],l===d?f=f.mixedAdd(n.points[o]):l===-d&&(f=f.mixedAdd(n.points[o].neg()));u=u.add(f)}return u.toP()};af.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Vb(t,n,this._bitLength),o=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var c=0;l>=0&&a[l]===0;l--)c++;if(l>=0&&c++,o=o.dblp(c),l<0)break;var u=a[l];Gb(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(s[u-1>>1]):o=o.mixedAdd(s[-u-1>>1].neg()):u>0?o=o.add(s[u-1>>1]):o=o.add(s[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};af.prototype._wnafMulAdd=function(e,t,n,i,s){var a=this._wnafT1,o=this._wnafT2,l=this._wnafT3,c=0,u,f,d;for(u=0;u<i;u++){d=t[u];var p=d._getNAFPoints(e);a[u]=p.wnd,o[u]=p.points}for(u=i-1;u>=1;u-=2){var v=u-1,m=u;if(a[v]!==1||a[m]!==1){l[v]=Vb(n[v],a[v],this._bitLength),l[m]=Vb(n[m],a[m],this._bitLength),c=Math.max(l[v].length,c),c=Math.max(l[m].length,c);continue}var g=[t[v],null,null,t[m]];t[v].y.cmp(t[m].y)===0?(g[1]=t[v].add(t[m]),g[2]=t[v].toJ().mixedAdd(t[m].neg())):t[v].y.cmp(t[m].y.redNeg())===0?(g[1]=t[v].toJ().mixedAdd(t[m]),g[2]=t[v].add(t[m].neg())):(g[1]=t[v].toJ().mixedAdd(t[m]),g[2]=t[v].toJ().mixedAdd(t[m].neg()));var w=[-3,-1,-5,-7,0,7,5,1,3],b=oie(n[v],n[m]);for(c=Math.max(b[0].length,c),l[v]=new Array(c),l[m]=new Array(c),f=0;f<c;f++){var E=b[0][f]|0,B=b[1][f]|0;l[v][f]=w[(E+1)*3+(B+1)],l[m][f]=0,o[v]=g}}var S=this.jpoint(null,null,null),M=this._wnafT4;for(u=c;u>=0;u--){for(var I=0;u>=0;){var k=!0;for(f=0;f<i;f++)M[f]=l[f][u]|0,M[f]!==0&&(k=!1);if(!k)break;I++,u--}if(u>=0&&I++,S=S.dblp(I),u<0)break;for(f=0;f<i;f++){var O=M[f];O!==0&&(O>0?d=o[f][O-1>>1]:O<0&&(d=o[f][-O-1>>1].neg()),d.type==="affine"?S=S.mixedAdd(d):S=S.add(d))}}for(u=0;u<i;u++)o[u]=null;return s?S:S.toP()};function Wo(r,e){this.curve=r,this.type=e,this.precomputed=null}af.BasePoint=Wo;Wo.prototype.eq=function(){throw new Error("Not implemented")};Wo.prototype.validate=function(){return this.curve.validate(this)};af.prototype.decodePoint=function(e,t){e=co.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Gb(e[e.length-1]%2===0):e[0]===7&&Gb(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Wo.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Wo.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Wo.prototype.encode=function(e,t){return co.encode(this._encode(t),e)};Wo.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Wo.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Wo.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};Wo.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};Wo.prototype._getBeta=function(){return null};Wo.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var LD=Hm(function(r){typeof Object.create=="function"?r.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,n){if(n){t.super_=n;var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t}}}),lie=co.assert;function Ko(r){xh.call(this,"short",r),this.a=new Yt(r.a,16).toRed(this.red),this.b=new Yt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}LD(Ko,xh);var cie=Ko;Ko.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new Yt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new Yt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],lie(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Yt(o.a,16),b:new Yt(o.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};Ko.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Yt.mont(e),n=new Yt(2).toRed(t).redInvm(),i=n.redNeg(),s=new Yt(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};Ko.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Yt(1),a=new Yt(0),o=new Yt(0),l=new Yt(1),c,u,f,d,p,v,m,g=0,w,b;n.cmpn(0)!==0;){var E=i.div(n);w=i.sub(E.mul(n)),b=o.sub(E.mul(s));var B=l.sub(E.mul(a));if(!f&&w.cmp(t)<0)c=m.neg(),u=s,f=w.neg(),d=b;else if(f&&++g===2)break;m=w,i=n,n=w,o=s,s=b,l=a,a=B}p=w.neg(),v=b;var S=f.sqr().add(d.sqr()),M=p.sqr().add(v.sqr());return M.cmp(S)>=0&&(p=c,v=u),f.negative&&(f=f.neg(),d=d.neg()),p.negative&&(p=p.neg(),v=v.neg()),[{a:f,b:d},{a:p,b:v}]};Ko.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),l=a.mul(i.a),c=s.mul(n.b),u=a.mul(i.b),f=e.sub(o).sub(l),d=c.add(u).neg();return{k1:f,k2:d}};Ko.prototype.pointFromX=function(e,t){e=new Yt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};Ko.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Ko.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),l=e[a],c=l._getBeta();o.k1.negative&&(o.k1.ineg(),l=l.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[a*2]=l,i[a*2+1]=c,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,i,s,a*2,n),f=0;f<a*2;f++)i[f]=null,s[f]=null;return u};function rs(r,e,t,n){xh.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Yt(e,16),this.y=new Yt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}LD(rs,xh.BasePoint);Ko.prototype.point=function(e,t,n){return new rs(this,e,t,n)};Ko.prototype.pointFromJSON=function(e,t){return rs.fromJSON(this,e,t)};rs.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};rs.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};rs.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};rs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};rs.prototype.isInfinity=function(){return this.inf};rs.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};rs.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};rs.prototype.getX=function(){return this.x.fromRed()};rs.prototype.getY=function(){return this.y.fromRed()};rs.prototype.mul=function(e){return e=new Yt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};rs.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};rs.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};rs.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};rs.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};rs.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function ys(r,e,t,n){xh.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Yt(0)):(this.x=new Yt(e,16),this.y=new Yt(t,16),this.z=new Yt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}LD(ys,xh.BasePoint);Ko.prototype.jpoint=function(e,t,n){return new ys(this,e,t,n)};ys.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};ys.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ys.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),l=i.redSub(s),c=a.redSub(o);if(l.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),f=u.redMul(l),d=i.redMul(u),p=c.redSqr().redIAdd(f).redISub(d).redISub(d),v=c.redMul(d.redISub(p)).redISub(a.redMul(f)),m=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(p,v,m)};ys.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),o=n.redSub(i),l=s.redSub(a);if(o.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),f=n.redMul(c),d=l.redSqr().redIAdd(u).redISub(f).redISub(f),p=l.redMul(f.redISub(d)).redISub(s.redMul(u)),v=this.z.redMul(o);return this.curve.jpoint(d,p,v)};ys.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,l=this.z,c=l.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var f=a.redSqr(),d=u.redSqr(),p=d.redSqr(),v=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(c)),m=a.redMul(d),g=v.redSqr().redISub(m.redAdd(m)),w=m.redISub(g),b=v.redMul(w);b=b.redIAdd(b).redISub(p);var E=u.redMul(l);t+1<e&&(c=c.redMul(p)),a=g,l=E,u=b}return this.curve.jpoint(a,u.redMul(s),l)};ys.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ys.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var l=i.redAdd(i).redIAdd(i),c=l.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=c,t=l.redMul(o.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),v=this.x.redAdd(d).redSqr().redISub(f).redISub(p);v=v.redIAdd(v);var m=f.redAdd(f).redIAdd(f),g=m.redSqr(),w=p.redIAdd(p);w=w.redIAdd(w),w=w.redIAdd(w),e=g.redISub(v).redISub(v),t=m.redMul(v.redISub(e)).redISub(w),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};ys.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=l.redSqr().redISub(o).redISub(o);e=c;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),t=l.redMul(o.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),v=this.x.redSub(f).redMul(this.x.redAdd(f));v=v.redAdd(v).redIAdd(v);var m=p.redIAdd(p);m=m.redIAdd(m);var g=m.redAdd(m);e=v.redSqr().redISub(g),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(f);var w=d.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w),t=v.redMul(m.redISub(e)).redISub(w)}return this.curve.jpoint(e,t,n)};ys.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=t.redSqr(),o=n.redSqr(),l=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),c=t.redAdd(t);c=c.redIAdd(c);var u=c.redMul(o),f=l.redSqr().redISub(u.redAdd(u)),d=u.redISub(f),p=o.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=l.redMul(d).redISub(p),m=n.redAdd(n).redMul(i);return this.curve.jpoint(f,v,m)};ys.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var l=o.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(l).redISub(c),f=t.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.x.redMul(l).redISub(f);d=d.redIAdd(d),d=d.redIAdd(d);var p=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(l)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var v=this.z.redAdd(o).redSqr().redISub(n).redISub(l);return this.curve.jpoint(d,p,v)};ys.prototype.mul=function(e,t){return e=new Yt(e,t),this.curve._wnafMul(this,e)};ys.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};ys.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};ys.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ys.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var sb=Hm(function(r,e){var t=e;t.base=xh,t.short=cie,t.mont=null,t.edwards=null}),ab=Hm(function(r,e){var t=e,n=co.assert;function i(o){o.type==="short"?this.curve=new sb.short(o):o.type==="edwards"?this.curve=new sb.edwards(o):this.curve=new sb.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(o,l){Object.defineProperty(t,o,{configurable:!0,enumerable:!0,get:function(){var c=new i(l);return Object.defineProperty(t,o,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:zl.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:zl.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:zl.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:zl.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:zl.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:zl.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:zl.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:zl.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function YA(r){if(!(this instanceof YA))return new YA(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=pl.toArray(r.entropy,r.entropyEnc||"hex"),t=pl.toArray(r.nonce,r.nonceEnc||"hex"),n=pl.toArray(r.pers,r.persEnc||"hex");FD(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var q7=YA;YA.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};YA.prototype._hmac=function(){return new zl.hmac(this.hash,this.K)};YA.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};YA.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=pl.toArray(e,t),n=pl.toArray(n,i),FD(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};YA.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=pl.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,pl.encode(a,t)};var XU=co.assert;function Hs(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var DD=Hs;Hs.fromPublic=function(e,t,n){return t instanceof Hs?t:new Hs(e,{pub:t,pubEnc:n})};Hs.fromPrivate=function(e,t,n){return t instanceof Hs?t:new Hs(e,{priv:t,privEnc:n})};Hs.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Hs.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Hs.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Hs.prototype._importPrivate=function(e,t){this.priv=new Yt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Hs.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?XU(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&XU(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Hs.prototype.derive=function(e){return e.validate()||XU(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Hs.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Hs.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};Hs.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var uie=co.assert;function dE(r,e){if(r instanceof dE)return r;this._importDER(r,e)||(uie(r.r&&r.s,"Signature without r or s"),this.r=new Yt(r.r,16),this.s=new Yt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var pE=dE;function Aie(){this.place=0}function KM(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function DH(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}dE.prototype._importDER=function(e,t){e=co.toArray(e,t);var n=new Aie;if(e[n.place++]!==48)return!1;var i=KM(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=KM(e,n);if(s===!1||(e[n.place]&128)!==0)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=KM(e,n);if(o===!1||e.length!==o+n.place||(e[n.place]&128)!==0)return!1;var l=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new Yt(a),this.s=new Yt(l),this.recoveryParam=null,!0};function qM(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}dE.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=DH(t),n=DH(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];qM(i,t.length),i=i.concat(t),i.push(2),qM(i,n.length);var s=i.concat(n),a=[48];return qM(a,s.length),a=a.concat(s),co.encode(a,e)};var fie=function(){throw new Error("unsupported")},qf=co.assert;function Vo(r){if(!(this instanceof Vo))return new Vo(r);typeof r=="string"&&(qf(Object.prototype.hasOwnProperty.call(ab,r),"Unknown curve "+r),r=ab[r]),r instanceof ab.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var hie=Vo;Vo.prototype.keyPair=function(e){return new DD(this,e)};Vo.prototype.keyFromPrivate=function(e,t){return DD.fromPrivate(this,e,t)};Vo.prototype.keyFromPublic=function(e,t){return DD.fromPublic(this,e,t)};Vo.prototype.genKeyPair=function(e){e||(e={});for(var t=new q7({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||fie(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Yt(2));;){var s=new Yt(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Vo.prototype._truncateToN=function(e,t,n){var i;if(Yt.isBN(e)||typeof e=="number")e=new Yt(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Yt(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Yt(s,16)}typeof n!="number"&&(n=i*8);var a=n-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Vo.prototype.sign=function(e,t,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Yt.isBN(e)){qf(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),qf(e.length>>>0===e.length);for(var s=0;s<e.length;s++)qf((e[s]&255)===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,i.msgBitLength),qf(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),l=e.toArray("be",a);qf(new Yt(l).eq(e),"Can not sign message");for(var c=new q7({hash:this.hash,entropy:o,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new Yt(1)),f=0;;f++){var d=i.k?i.k(f):new Yt(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(u)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var v=p.getX(),m=v.umod(this.n);if(m.cmpn(0)!==0){var g=d.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(g=g.umod(this.n),g.cmpn(0)!==0){var w=(p.getY().isOdd()?1:0)|(v.cmp(m)!==0?2:0);return i.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),w^=1),new pE({r:m,s:g,recoveryParam:w})}}}}}};Vo.prototype.verify=function(e,t,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),t=new pE(t,"hex");var a=t.r,o=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var l=o.invm(this.n),c=l.mul(e).umod(this.n),u=l.mul(a).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.eqXToP(a)):(f=this.g.mulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(a)===0)};Vo.prototype.recoverPubKey=function(r,e,t,n){qf((3&t)===t,"The recovery param is more than two bits"),e=new pE(e,n);var i=this.n,s=new Yt(r),a=e.r,o=e.s,l=t&1,c=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?a=this.curve.pointFromX(a.add(this.curve.n),l):a=this.curve.pointFromX(a,l);var u=e.r.invm(i),f=i.sub(s).mul(u).umod(i),d=o.mul(u).umod(i);return this.g.mulAdd(f,a,d)};Vo.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new pE(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var die=Hm(function(r,e){var t=e;t.version="6.6.1",t.utils=co,t.rand=function(){throw new Error("unsupported")},t.curve=sb,t.curves=ab,t.ec=hie,t.eddsa=null}),pie=die.ec;const mie="signing-key/5.8.0",ZU=new Ke(mie);let YM=null;function MA(){return YM||(YM=new pie("secp256k1")),YM}class gie{constructor(e){it(this,"curve","secp256k1"),it(this,"privateKey",Ot(e)),Ah(this.privateKey)!==32&&ZU.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=MA().keyFromPrivate(Gt(this.privateKey));it(this,"publicKey","0x"+t.getPublic(!1,"hex")),it(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),it(this,"_isSigningKey",!0)}_addPoint(e){const t=MA().keyFromPublic(Gt(this.publicKey)),n=MA().keyFromPublic(Gt(e));return"0x"+t.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const t=MA().keyFromPrivate(Gt(this.privateKey)),n=Gt(e);n.length!==32&&ZU.throwArgumentError("bad digest length","digest",e);const i=t.sign(n,{canonical:!0});return cE({recoveryParam:i.recoveryParam,r:ei("0x"+i.r.toString(16),32),s:ei("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=MA().keyFromPrivate(Gt(this.privateKey)),n=MA().keyFromPublic(Gt(Y7(e)));return ei("0x"+t.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function vie(r,e){const t=cE(e),n={r:Gt(t.r),s:Gt(t.s)};return"0x"+MA().recoverPubKey(Gt(r),n,t.recoveryParam).encode("hex",!1)}function Y7(r,e){const t=Gt(r);return t.length===32?new gie(t).publicKey:t.length===33?"0x"+MA().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?Ot(t):ZU.throwArgumentError("invalid public or private key","key","[REDACTED]")}const yie="transactions/5.8.0",Cu=new Ke(yie);var OH;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(OH||(OH={}));function OD(r){return r==="0x"?null:vs(r)}function Os(r){return r==="0x"?M7:mt.from(r)}function wie(r){const e=Y7(r);return vs(Ls(Ii(Ls(e,1)),12))}function X7(r,e){return wie(vie(Gt(r),e))}function Ka(r,e){const t=dm(mt.from(r).toHexString());return t.length>32&&Cu.throwArgumentError("invalid length for "+e,"transaction:"+e,r),t}function XM(r,e){return{address:vs(r),storageKeys:(e||[]).map((t,n)=>(Ah(t)!==32&&Cu.throwArgumentError("invalid access list storageKey",`accessList[${r}:${n}]`,t),t.toLowerCase()))}}function Qm(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(t.length>2&&Cu.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,t),XM(t[0],t[1])):XM(t.address,t.storageKeys));const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return XM(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function Z7(r){return Qm(r).map(e=>[e.address,e.storageKeys])}function _ie(r,e){if(r.gasPrice!=null){const n=mt.from(r.gasPrice),i=mt.from(r.maxFeePerGas||0);n.eq(i)||Cu.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const t=[Ka(r.chainId||0,"chainId"),Ka(r.nonce||0,"nonce"),Ka(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ka(r.maxFeePerGas||0,"maxFeePerGas"),Ka(r.gasLimit||0,"gasLimit"),r.to!=null?vs(r.to):"0x",Ka(r.value||0,"value"),r.data||"0x",Z7(r.accessList||[])];if(e){const n=cE(e);t.push(Ka(n.recoveryParam,"recoveryParam")),t.push(dm(n.r)),t.push(dm(n.s))}return ga(["0x02",fE(t)])}function xie(r,e){const t=[Ka(r.chainId||0,"chainId"),Ka(r.nonce||0,"nonce"),Ka(r.gasPrice||0,"gasPrice"),Ka(r.gasLimit||0,"gasLimit"),r.to!=null?vs(r.to):"0x",Ka(r.value||0,"value"),r.data||"0x",Z7(r.accessList||[])];if(e){const n=cE(e);t.push(Ka(n.recoveryParam,"recoveryParam")),t.push(dm(n.r)),t.push(dm(n.s))}return ga(["0x01",fE(t)])}function J7(r,e,t){try{const n=Os(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");r.v=n}catch{Cu.throwArgumentError("invalid v for transaction type: 1","v",e[0])}r.r=ei(e[1],32),r.s=ei(e[2],32);try{const n=Ii(t(r));r.from=X7(n,{r:r.r,s:r.s,recoveryParam:r.v})}catch{}}function bie(r){const e=RD(r.slice(1));e.length!==9&&e.length!==12&&Cu.throwArgumentError("invalid component count for transaction type: 2","payload",Ot(r));const t=Os(e[2]),n=Os(e[3]),i={type:2,chainId:Os(e[0]).toNumber(),nonce:Os(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:n,gasPrice:null,gasLimit:Os(e[4]),to:OD(e[5]),value:Os(e[6]),data:e[7],accessList:Qm(e[8])};return e.length===9||(i.hash=Ii(r),J7(i,e.slice(9),_ie)),i}function Eie(r){const e=RD(r.slice(1));e.length!==8&&e.length!==11&&Cu.throwArgumentError("invalid component count for transaction type: 1","payload",Ot(r));const t={type:1,chainId:Os(e[0]).toNumber(),nonce:Os(e[1]).toNumber(),gasPrice:Os(e[2]),gasLimit:Os(e[3]),to:OD(e[4]),value:Os(e[5]),data:e[6],accessList:Qm(e[7])};return e.length===8||(t.hash=Ii(r),J7(t,e.slice(8),xie)),t}function Sie(r){const e=RD(r);e.length!==9&&e.length!==6&&Cu.throwArgumentError("invalid raw transaction","rawTransaction",r);const t={nonce:Os(e[0]).toNumber(),gasPrice:Os(e[1]),gasLimit:Os(e[2]),to:OD(e[3]),value:Os(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=mt.from(e[6]).toNumber()}catch{return t}if(t.r=ei(e[7],32),t.s=ei(e[8],32),mt.from(t.r).isZero()&&mt.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let n=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(Ot(t.chainId)),i.push("0x"),i.push("0x"),n-=t.chainId*2+8);const s=Ii(fE(i));try{t.from=X7(s,{r:Ot(t.r),s:Ot(t.s),recoveryParam:n})}catch{}t.hash=Ii(r)}return t.type=null,t}function Bie(r){const e=Gt(r);if(e[0]>127)return Sie(e);switch(e[0]){case 1:return Eie(e);case 2:return bie(e)}return Cu.throwError(`unsupported transaction type: ${e[0]}`,Ke.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const t0=new Ke(hE);let NH=class Tt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),o=this.hex.bind(this),l=this.number.bind(this),c=this.type.bind(this),u=f=>this.data(f,!0);return e.transaction={hash:a,type:c,accessList:Tt.allowNull(this.accessList.bind(this),null),blockHash:Tt.allowNull(a,null),blockNumber:Tt.allowNull(l,null),transactionIndex:Tt.allowNull(l,null),confirmations:Tt.allowNull(l,null),from:t,gasPrice:Tt.allowNull(n),maxPriorityFeePerGas:Tt.allowNull(n),maxFeePerGas:Tt.allowNull(n),gasLimit:n,to:Tt.allowNull(t,null),value:n,nonce:l,data:s,r:Tt.allowNull(this.uint256),s:Tt.allowNull(this.uint256),v:Tt.allowNull(l),creates:Tt.allowNull(t,null),raw:Tt.allowNull(s)},e.transactionRequest={from:Tt.allowNull(t),nonce:Tt.allowNull(l),gasLimit:Tt.allowNull(n),gasPrice:Tt.allowNull(n),maxPriorityFeePerGas:Tt.allowNull(n),maxFeePerGas:Tt.allowNull(n),to:Tt.allowNull(t),value:Tt.allowNull(n),data:Tt.allowNull(u),type:Tt.allowNull(l),accessList:Tt.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:a,address:t,topics:Tt.arrayOf(a),data:s,logIndex:l,blockHash:a},e.receipt={to:Tt.allowNull(this.address,null),from:Tt.allowNull(this.address,null),contractAddress:Tt.allowNull(t,null),transactionIndex:l,root:Tt.allowNull(o),gasUsed:n,logsBloom:Tt.allowNull(s),blockHash:a,transactionHash:a,logs:Tt.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:Tt.allowNull(l,null),cumulativeGasUsed:n,effectiveGasPrice:Tt.allowNull(n),status:Tt.allowNull(l),type:c},e.block={hash:Tt.allowNull(a),parentHash:a,number:l,timestamp:l,nonce:Tt.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:Tt.allowNull(t),extraData:s,transactions:Tt.allowNull(Tt.arrayOf(a)),baseFeePerGas:Tt.allowNull(n)},e.blockWithTransactions=Qi(e.block),e.blockWithTransactions.transactions=Tt.allowNull(Tt.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Tt.allowNull(i,void 0),toBlock:Tt.allowNull(i,void 0),blockHash:Tt.allowNull(a,void 0),address:Tt.allowNull(t,void 0),topics:Tt.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Tt.allowNull(l),blockHash:Tt.allowNull(a),transactionIndex:l,removed:Tt.allowNull(this.boolean.bind(this)),address:t,data:Tt.allowFalsish(s,"0x"),topics:Tt.arrayOf(a),transactionHash:a,logIndex:l},e}accessList(e){return Qm(e||[])}number(e){return e==="0x"?0:mt.from(e).toNumber()}type(e){return e==="0x"||e==null?0:mt.from(e).toNumber()}bigNumber(e){return mt.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),$n(e))?e.toLowerCase():t0.throwArgumentError("invalid hash","value",e)}data(e,t){const n=this.hex(e,t);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return vs(e)}callAddress(e){if(!$n(e,32))return null;const t=vs(Ls(e,12));return t===Kne?null:t}contractAddress(e){return H7(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||$n(e))return TD(e);throw new Error("invalid blockTag")}hash(e,t){const n=this.hex(e,t);return Ah(n)!==32?t0.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const t=mt.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!$n(e))throw new Error("invalid uint256");return ei(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=Tt.check(t,e);return i._difficulty=n==null?null:mt.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Tt.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&mt.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Tt.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;$n(n)&&(n=mt.from(n).toNumber()),t.chainId=n}else{let n=e.networkId;n==null&&t.v==null&&(n=e.chainId),$n(n)&&(n=mt.from(n).toNumber()),typeof n!="number"&&t.v!=null&&(n=(t.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),t.chainId=n}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return Bie(e)}receiptLog(e){return Tt.check(this.formats.receiptLog,e)}receipt(e){const t=Tt.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const n=mt.from(t.root).toNumber();n===0||n===1?(t.status!=null&&t.status!==n&&t0.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=n,delete t.root):t0.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&t0.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Tt.check(this.formats.filter,e)}filterLog(e){return Tt.check(this.formats.filterLog,e)}static check(e,t){const n={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return n}static allowNull(e,t){return function(n){return n==null?t:e(n)}}static allowFalsish(e,t){return function(n){return n?e(n):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const n=[];return t.forEach(function(i){n.push(e(i))}),n}}};var tn=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const vn=new Ke(hE),Mie=10;function PH(r){return r==null?"null":(Ah(r)!==32&&vn.throwArgumentError("invalid topic","topic",r),r.toLowerCase())}function kH(r){for(r=r.slice();r.length>0&&r[r.length-1]==null;)r.pop();return r.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[PH(i)]=!0});const n=Object.keys(t);return n.sort(),n.join("|")}else return PH(e)}).join("&")}function Cie(r){return r===""?[]:r.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(n=>n==="null"?null:n);return t.length===1?t[0]:t})}function gd(r){if(typeof r=="string"){if(r=r.toLowerCase(),Ah(r)===32)return"tx:"+r;if(r.indexOf(":")===-1)return r}else{if(Array.isArray(r))return"filter:*:"+kH(r);if(Vne.isForkEvent(r))throw vn.warn("not implemented"),new Error("not implemented");if(r&&typeof r=="object")return"filter:"+(r.address||"*")+":"+kH(r.topics||[])}throw new Error("invalid event - "+r)}function n0(){return new Date().getTime()}function HH(r){return new Promise(e=>{setTimeout(e,r)})}const Tie=["block","network","pending","poll"];let Rie=class{constructor(e,t,n){it(this,"tag",e),it(this,"listener",t),it(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],n=Cie(e[2]),i={};return n.length>0&&(i.topics=n),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Tie.indexOf(this.tag)>=0}};const Iie={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ZM(r){return ei(mt.from(r).toHexString(),32)}function QH(r){return YU.encode(Xa([r,Ls(IH(IH(r)),0,4)]))}const $7=new RegExp("^(ipfs)://(.*)$","i"),zH=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),$7,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ob(r,e){try{return yy(Nv(r,e))}catch{}return null}function Nv(r,e){if(r==="0x")return null;const t=mt.from(Ls(r,e,e+32)).toNumber(),n=mt.from(Ls(r,t,t+32)).toNumber();return Ls(r,t+32,t+32+n)}function JM(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):vn.throwArgumentError("unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}function VH(r){const e=Gt(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Uie(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}function eK(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(null),t+=32;for(let n=0;n<r.length;n++){const i=Gt(r[n]);e[n]=VH(t),e.push(VH(i.length)),e.push(Uie(i)),t+=32+Math.ceil(i.length/32)*32}return ga(e)}class GH{constructor(e,t,n,i){it(this,"provider",e),it(this,"name",n),it(this,"address",e.formatter.address(t)),it(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>mt.from(e).eq(1)).catch(e=>{if(e.code===Ke.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return tn(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:ga([e,ib(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=ga(["0x9061b923",eK([Rre(this.name),n.data])]));try{let s=yield this.provider.call(n);return Gt(s).length%32===4&&vn.throwError("resolver threw error",Ke.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Nv(s,0)),s}catch(s){if(s.code===Ke.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return tn(this,void 0,void 0,function*(){const n=yield this._fetch(e,t);return n!=null?Nv(n,0):null})}_getAddress(e,t){const n=Iie[String(e)];if(n==null&&vn.throwError(`unsupported coin type: ${e}`,Ke.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(t);const i=Gt(t);if(n.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return QH(Xa([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return QH(Xa([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let a=i[0];if(a===0?s!==20&&s!==32&&(a=-1):a=-1,a>=0&&i.length===2+s&&s>=1&&s<=75){const o=LH.toWords(i.slice(2));return o.unshift(a),LH.encode(n.prefix,o)}}return null}getAddress(e){return tn(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Zne?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===Ke.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",ZM(e));if(t==null||t==="0x")return null;const n=this._getAddress(e,t);return n==null&&vn.throwError("invalid or unsupported coin data",Ke.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),n})}getAvatar(){return tn(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let n=0;n<zH.length;n++){const i=t.match(zH[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:JM(t)};case"erc721":case"erc1155":{const a=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const o=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const c=yield this.provider.formatter.address(l[0]),u=ei(mt.from(l[1]).toHexString(),32);if(s==="erc721"){const m=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:ga(["0x6352211e",u])}));if(o!==m)return null;e.push({type:"owner",content:m})}else if(s==="erc1155"){const m=mt.from(yield this.provider.call({to:c,data:ga(["0x00fdd58e",ei(o,32),u])}));if(m.isZero())return null;e.push({type:"balance",content:m.toString()})}const f={to:this.provider.formatter.address(l[0]),data:ga([a,u])};let d=ob(yield this.provider.call(f),0);if(d==null)return null;e.push({type:"metadata-url-base",content:d}),s==="erc1155"&&(d=d.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:d})),d.match(/^ipfs:/i)&&(d=JM(d)),e.push({type:"metadata-url",content:d});const p=yield UD(d);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let v=p.image;if(typeof v!="string")return null;if(!v.match(/^(https:\/\/|data:)/i)){if(v.match($7)==null)return null;e.push({type:"url-ipfs",content:v}),v=JM(v)}return e.push({type:"url",content:v}),{linkage:e,url:v}}}}}catch{}return null})}getContentHash(){return tn(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const a=parseInt(t[3],16);if(t[4].length===a*2)return"ipfs://"+YU.encode("0x"+t[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const a=parseInt(n[3],16);if(n[4].length===a*2)return"ipns://"+YU.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const a={"=":"","+":"-","/":"_"};return"sia://"+S7("0x"+s[1]).replace(/[=+\/]/g,l=>a[l])}return vn.throwError("invalid or unsupported content hash data",Ke.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return tn(this,void 0,void 0,function*(){let t=oc(e);t=Xa([ZM(64),ZM(t.length),t]),t.length%32!==0&&(t=Xa([t,ei("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",Ot(t));return n==null||n==="0x"?null:yy(n)})}}let $M=null,Fie=1;class Lie extends uE{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),it(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=ec(new.target,"getNetwork")(e);t?(it(this,"_network",t),this.emit("network",t,null)):vn.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return tn(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||vn.throwError("no network detected",Ke.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:it(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return q0(()=>this._ready().then(e=>e,e=>{if(!(e.code===Ke.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return $M==null&&($M=new NH),$M}static getNetwork(e){return Wne(e??"homestead")}ccipReadFetch(e,t,n){return tn(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const l=n[o],c=l.replace("{sender}",i).replace("{data}",s),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),f=yield UD({url:c,errorPassThrough:!0},u,(p,v)=>(p.status=v.statusCode,p));if(f.data)return f.data;const d=f.message||"unknown error";if(f.status>=400&&f.status<500)return vn.throwError(`response not found during CCIP fetch: ${d}`,Ke.errors.SERVER_ERROR,{url:l,errorMessage:d});a.push(d)}return vn.throwError(`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,Ke.errors.SERVER_ERROR,{urls:n,errorMessages:a})})}_getInternalBlockNumber(e){return tn(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(n0()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=n0(),n=Ei({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const a=n0();return i=mt.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:a}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return tn(this,void 0,void 0,function*(){const e=Fie++,t=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)vn.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",vn.makeError("network block skew detected",Ke.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let a=this.getTransactionReceipt(s).then(o=>(!o||o.blockNumber==null||(this._emitted["t:"+s]=o.blockNumber,this.emit(s,o)),null)).catch(o=>{this.emit("error",o)});t.push(a);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const a=s.toBlock-this._maxFilterBlockRange;a>s.fromBlock&&(s.fromBlock=a),s.fromBlock<0&&(s.fromBlock=0);const o=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(c=>{c.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=c.blockNumber),this._emitted["b:"+c.blockHash]=c.blockNumber,this._emitted["t:"+c.transactionHash]=c.blockNumber,this.emit(s,c)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(o)}break}}}),this._lastBlockNumber=n,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return tn(this,void 0,void 0,function*(){return vn.throwError("provider does not support network detection",Ke.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return tn(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield HH(0),this._network;const n=vn.makeError("underlying network changed",Ke.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=n0();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=n0(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,n){return tn(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,n||0,null)})}_waitForTransaction(e,t,n,i){return tn(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((a,o)=>{const l=[];let c=!1;const u=function(){return c?!0:(c=!0,l.forEach(d=>{d()}),!1)},f=d=>{d.confirmations<t||u()||a(d)};if(this.on(e,f),l.push(()=>{this.removeListener(e,f)}),i){let d=i.startBlock,p=null;const v=m=>tn(this,void 0,void 0,function*(){c||(yield HH(1e3),this.getTransactionCount(i.from).then(g=>tn(this,void 0,void 0,function*(){if(!c){if(g<=i.nonce)d=m;else{{const w=yield this.getTransaction(e);if(w&&w.blockNumber!=null)return}for(p==null&&(p=d-3,p<i.startBlock&&(p=i.startBlock));p<=m;){if(c)return;const w=yield this.getBlockWithTransactions(p);for(let b=0;b<w.transactions.length;b++){const E=w.transactions[b];if(E.hash===e)return;if(E.from===i.from&&E.nonce===i.nonce){if(c)return;const B=yield this.waitForTransaction(E.hash,t);if(u())return;let S="replaced";E.data===i.data&&E.to===i.to&&E.value.eq(i.value)?S="repriced":E.data==="0x"&&E.from===E.to&&E.value.isZero()&&(S="cancelled"),o(vn.makeError("transaction was replaced",Ke.errors.TRANSACTION_REPLACED,{cancelled:S==="replaced"||S==="cancelled",reason:S,replacement:this._wrapTransaction(E),hash:e,receipt:B}));return}}p++}}c||this.once("block",v)}}),g=>{c||this.once("block",v)}))});if(c)return;this.once("block",v),l.push(()=>{this.removeListener("block",v)})}if(typeof n=="number"&&n>0){const d=setTimeout(()=>{u()||o(vn.makeError("timeout exceeded",Ke.errors.TIMEOUT,{timeout:n}))},n);d.unref&&d.unref(),l.push(()=>{clearTimeout(d)})}})})}getBlockNumber(){return tn(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return mt.from(e)}catch(t){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ei({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",n);try{return mt.from(i)}catch(s){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,t){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ei({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",n);try{return mt.from(i).toNumber()}catch(s){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,t){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ei({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",n);try{return Ot(i)}catch(s){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,t,n){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Ei({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(t).then(a=>TD(a))}),s=yield this.perform("getStorageAt",i);try{return Ot(s)}catch(a){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:a})}})}_wrapTransaction(e,t,n){if(t!=null&&Ah(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&vn.throwError("Transaction hash mismatch from Provider.sendTransaction.",Ke.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,a)=>tn(this,void 0,void 0,function*(){s==null&&(s=1),a==null&&(a=0);let o;s!==0&&n!=null&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const l=yield this._waitForTransaction(e.hash,s,a,o);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&vn.throwError("transaction failed",Ke.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>Ot(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return tn(this,void 0,void 0,function*(){const t=yield e,n={};return["from","to"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?mt.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(n.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(n[i]=Promise.resolve(t[i]).then(s=>s?Ot(s):null))}),this.formatter.transactionRequest(yield Ei(n))})}_getFilter(e){return tn(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(t[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(t[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Ei(t))})}_call(e,t,n){return tn(this,void 0,void 0,function*(){n>=Mie&&vn.throwError("CCIP read exceeded maximum redirections",Ke.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(n>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Ah(s)%32===4)try{const a=Ls(s,4),o=Ls(a,0,32);mt.from(o).eq(i)||vn.throwError("CCIP Read sender did not match",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],c=mt.from(Ls(a,32,64)).toNumber(),u=mt.from(Ls(a,c,c+32)).toNumber(),f=Ls(a,c+32);for(let w=0;w<u;w++){const b=ob(f,w*32);b==null&&vn.throwError("CCIP Read contained corrupt URL string",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(b)}const d=Nv(a,64);mt.from(Ls(a,100,128)).isZero()||vn.throwError("CCIP Read callback selector included junk",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const p=Ls(a,96,100),v=Nv(a,128),m=yield this.ccipReadFetch(e,d,l);m==null&&vn.throwError("CCIP Read disabled or provided no URLs",Ke.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g={to:i,data:ga([p,eK([m,v])])};return this._call(g,t,n+1)}catch(a){if(a.code===Ke.errors.SERVER_ERROR)throw a}try{return Ot(s)}catch(a){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:a})}})}call(e,t){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ei({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ei({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",t);try{return mt.from(n)}catch(i){return vn.throwError("bad result from backend",Ke.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:n,error:i})}})}_getAddress(e){return tn(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&vn.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&vn.throwError("ENS name not configured",Ke.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!t};if($n(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),$n(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{vn.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return q0(()=>tn(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(t){let a=null;for(let l=0;l<s.transactions.length;l++){const c=s.transactions[l];if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=a-c.blockNumber+1;u<=0&&(u=1),c.confirmations=u}}const o=this.formatter.blockWithTransactions(s);return o.transactions=o.transactions.map(l=>this._wrapTransaction(l)),o}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return q0(()=>tn(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return tn(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return q0(()=>tn(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",t);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let a=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;a<=0&&(a=1),i.confirmations=a}return i}),{oncePoll:this})})}getLogs(e){return tn(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ei({filter:this._getFilter(e)}),n=yield this.perform("getLogs",t);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),NH.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return tn(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return tn(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&vn.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return tn(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const n=yield this._getResolver(t,"getResolver");if(n!=null){const i=new GH(this,n,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return tn(this,void 0,void 0,function*(){t==null&&(t="ENS");const n=yield this.getNetwork();n.ensAddress||vn.throwError("network does not support ENS",Ke.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+ib(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return tn(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if($n(e))throw n}typeof e!="string"&&vn.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return tn(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(t,"lookupAddress");if(n==null)return null;const i=ob(yield this.call({to:n,data:"0x691f3431"+ib(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return tn(this,void 0,void 0,function*(){let t=null;if($n(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",a=yield this._getResolver(s,"getAvatar");if(!a)return null;t=new GH(this,a,s);try{const o=yield t.getAvatar();if(o)return o.url}catch(o){if(o.code!==Ke.errors.CALL_EXCEPTION)throw o}try{const o=ob(yield this.call({to:a,data:"0x691f3431"+ib(s).substring(2)}),0);t=yield this.getResolver(o)}catch(o){if(o.code!==Ke.errors.CALL_EXCEPTION)throw o;return null}}else if(t=yield this.getResolver(e),!t)return null;const n=yield t.getAvatar();return n==null?null:n.url})}perform(e,t){return vn.throwError(e+" not implemented",Ke.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,n){const i=new Rie(gd(e),t,n);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let n=!1,i=[],s=gd(e);return this._events=this._events.filter(a=>a.tag!==s?!0:(setTimeout(()=>{a.listener.apply(this,t)},0),n=!0,a.once?(i.push(a),!1):!0)),i.forEach(a=>{this._stopEvent(a)}),n}listenerCount(e){if(!e)return this._events.length;let t=gd(e);return this._events.filter(n=>n.tag===t).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let t=gd(e);return this._events.filter(n=>n.tag===t).map(n=>n.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const n=[];let i=!1,s=gd(e);return this._events=this._events.filter(a=>a.tag!==s||a.listener!=t||i?!0:(i=!0,n.push(a),!1)),n.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const n=gd(e);this._events=this._events.filter(i=>i.tag!==n?!0:(t.push(i),!1))}return t.forEach(n=>{this._stopEvent(n)}),this}}const Die="abstract-signer/5.8.0";var $o=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const bo=new Ke(Die),Oie=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Nie=[Ke.errors.INSUFFICIENT_FUNDS,Ke.errors.NONCE_EXPIRED,Ke.errors.REPLACEMENT_UNDERPRICED];class xy{constructor(){bo.checkAbstract(new.target,xy),it(this,"_isSigner",!0)}getBalance(e){return $o(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return $o(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return $o(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ei(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return $o(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Ei(this.checkTransaction(e));return yield this.provider.call(n,t)})}sendTransaction(e){return $o(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),n=yield this.signTransaction(t);return yield this.provider.sendTransaction(n)})}getChainId(){return $o(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return $o(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return $o(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return $o(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)Oie.indexOf(n)===-1&&bo.throwArgumentError("invalid transaction key: "+n,"transaction",e);const t=Qi(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&bo.throwArgumentError("from address mismatch","transaction",e),n[0])),t}populateTransaction(e){return $o(this,void 0,void 0,function*(){const t=yield Ei(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>$o(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&bo.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const n=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||n)?bo.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&n&&bo.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&bo.throwError("network does not support EIP-1559",Ke.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):bo.throwError("failed to get consistent fee data",Ke.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(Nie.indexOf(i.code)>=0)throw i;return bo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&bo.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Ei(t)})}_checkProvider(e){this.provider||bo.throwError("missing provider",Ke.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class ND extends xy{constructor(e,t){super(),it(this,"address",e),it(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{bo.throwError(e,Ke.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new ND(this.address,e)}}var tu=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const Si=new Ke(hE),Pie=["call","estimateGas"];function vv(r,e){if(r==null)return null;if(typeof r.message=="string"&&r.message.match("reverted")){const t=$n(r.data)?r.data:null;if(!e||t)return{message:r.message,data:t}}if(typeof r=="object"){for(const t in r){const n=vv(r[t],e);if(n)return n}return null}if(typeof r=="string")try{return vv(JSON.parse(r),e)}catch{}return null}function tK(r,e,t){const n=t.transaction||t.signedTransaction;if(r==="call"){const s=vv(e,!0);if(s)return s.data;Si.throwError("missing revert data in call exception; Transaction reverted without a reason string",Ke.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(r==="estimateGas"){let s=vv(e.body,!1);s==null&&(s=vv(e,!1)),s&&Si.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:r,transaction:n,error:e})}let i=e.message;throw e.code===Ke.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&Si.throwError("insufficient funds for intrinsic transaction cost",Ke.errors.INSUFFICIENT_FUNDS,{error:e,method:r,transaction:n}),i.match(/nonce (is )?too low/i)&&Si.throwError("nonce has already been used",Ke.errors.NONCE_EXPIRED,{error:e,method:r,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Si.throwError("replacement fee too low",Ke.errors.REPLACEMENT_UNDERPRICED,{error:e,method:r,transaction:n}),i.match(/only replay-protected/i)&&Si.throwError("legacy pre-eip-155 transactions not supported",Ke.errors.UNSUPPORTED_OPERATION,{error:e,method:r,transaction:n}),Pie.indexOf(r)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&Si.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ke.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:r,transaction:n}),e}function jH(r){return new Promise(function(e){setTimeout(e,r)})}function kie(r){if(r.error){const e=new Error(r.error.message);throw e.code=r.error.code,e.data=r.error.data,e}return r.result}function r0(r){return r&&r.toLowerCase()}const JU={};class nK extends xy{constructor(e,t,n){if(super(),e!==JU)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");it(this,"provider",t),n==null&&(n=0),typeof n=="string"?(it(this,"_address",this.provider.formatter.address(n)),it(this,"_index",null)):typeof n=="number"?(it(this,"_index",n),it(this,"_address",null)):Si.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return Si.throwError("cannot alter JSON-RPC Signer connection",Ke.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Hie(JU,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&Si.throwError("unknown account #"+this._index,Ke.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Qi(e);const t=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Qi(e);n.from=t,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>tu(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&Si.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Ei({tx:Ei(e),sender:t}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&Si.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(a=>a,a=>(typeof a.message=="string"&&a.message.match(/user denied/i)&&Si.throwError("user rejected transaction",Ke.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),tK("sendTransaction",a,s)))})}signTransaction(e){return Si.throwError("signing transactions is unsupported",Ke.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return tu(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield q0(()=>tu(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return tu(this,void 0,void 0,function*(){const t=typeof e=="string"?oc(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Ot(t),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Si.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return tu(this,void 0,void 0,function*(){const t=typeof e=="string"?oc(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),Ot(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&Si.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,t,n){return tu(this,void 0,void 0,function*(){const i=yield Ga.resolveNames(e,t,n,a=>this.provider.resolveName(a)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Ga.getPayload(i.domain,t,i.value))])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&Si.throwError("user rejected signing",Ke.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),a}})}unlock(e){return tu(this,void 0,void 0,function*(){const t=this.provider,n=yield this.getAddress();return t.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class Hie extends nK{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(t,n)}))}}const Qie={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class zie extends Lie{constructor(e,t){let n=t;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(a=>{i(a)},a=>{s(a)})},0)})),super(n),e||(e=ec(this.constructor,"defaultUrl")()),typeof e=="string"?it(this,"connection",Object.freeze({url:e})):it(this,"connection",Object.freeze(Qi(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return tu(this,void 0,void 0,function*(){yield jH(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=ec(this.constructor,"getNetwork");try{return t(mt.from(e).toNumber())}catch(n){return Si.throwError("could not detect network",Ke.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return Si.throwError("could not detect network",Ke.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new nK(JU,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:wu(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=UD(this.connection,JSON.stringify(n),kie).then(a=>(this.emit("debug",{action:"response",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:n,provider:this}),a});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[r0(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[r0(t.address),t.blockTag]];case"getCode":return["eth_getCode",[r0(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[r0(t.address),ei(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[ec(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[ec(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=r0(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return tu(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&mt.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Qi(t),t.transaction=Qi(i),delete t.transaction.type)}}const n=this.prepareRequest(e,t);n==null&&Si.throwError(e+" not implemented",Ke.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return tK(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=t)return null;let a=Promise.resolve();return s.forEach(function(o){e._emitted["t:"+o.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(o).then(function(l){return e.emit("pending",l),null})})}),a.then(function(){return jH(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const n=Qi(Qie);if(t)for(const s in t)t[s]&&(n[s]=!0);Nne(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const a=TD(mt.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=a}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=Ot(e[s]))}),e.accessList&&(i.accessList=Qm(e.accessList)),i}}const WH=new Ke(hE);let Vie=1;function KH(r,e){const t="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:Vie++,jsonrpc:"2.0"};return new Promise((a,o)=>{this.emit("debug",{action:"request",fetcher:t,request:wu(s),provider:this}),e(s,(l,c)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),o(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:c,provider:this}),c.error){const u=new Error(c.error.message);return u.code=c.error.code,u.data=c.error.data,o(u)}a(c.result)})})}}function Gie(r){return function(e,t){t==null&&(t=[]);const n={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:wu(n),provider:this}),r.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class jie extends zie{constructor(e,t){e==null&&WH.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=Gie(e)):e.sendAsync?i=KH(e,e.sendAsync.bind(e)):e.send?i=KH(e,e.send.bind(e)):WH.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,t),it(this,"jsonRpcFetchFunc",i),it(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}var eC={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qH;function Wie(){if(qH)return an;qH=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function d(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(W,V,T){this.props=W,this.context=V,this.refs=m,this.updater=T||p}g.prototype.isReactComponent={},g.prototype.setState=function(W,V){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,V,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function w(){}w.prototype=g.prototype;function b(W,V,T){this.props=W,this.context=V,this.refs=m,this.updater=T||p}var E=b.prototype=new w;E.constructor=b,v(E,g.prototype),E.isPureReactComponent=!0;var B=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function I(W,V,T,H,K,N){return T=N.ref,{$$typeof:r,type:W,key:V,ref:T!==void 0?T:null,props:N}}function k(W,V){return I(W.type,V,void 0,void 0,void 0,W.props)}function O(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function C(W){var V={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(T){return V[T]})}var P=/\/+/g;function D(W,V){return typeof W=="object"&&W!==null&&W.key!=null?C(""+W.key):V.toString(36)}function F(){}function _(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(F,F):(W.status="pending",W.then(function(V){W.status==="pending"&&(W.status="fulfilled",W.value=V)},function(V){W.status==="pending"&&(W.status="rejected",W.reason=V)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function R(W,V,T,H,K){var N=typeof W;(N==="undefined"||N==="boolean")&&(W=null);var te=!1;if(W===null)te=!0;else switch(N){case"bigint":case"string":case"number":te=!0;break;case"object":switch(W.$$typeof){case r:case e:te=!0;break;case u:return te=W._init,R(te(W._payload),V,T,H,K)}}if(te)return K=K(W),te=H===""?"."+D(W,0):H,B(K)?(T="",te!=null&&(T=te.replace(P,"$&/")+"/"),R(K,V,T,"",function(he){return he})):K!=null&&(O(K)&&(K=k(K,T+(K.key==null||W&&W.key===K.key?"":(""+K.key).replace(P,"$&/")+"/")+te)),V.push(K)),1;te=0;var oe=H===""?".":H+":";if(B(W))for(var fe=0;fe<W.length;fe++)H=W[fe],N=oe+D(H,fe),te+=R(H,V,T,N,K);else if(fe=d(W),typeof fe=="function")for(W=fe.call(W),fe=0;!(H=W.next()).done;)H=H.value,N=oe+D(H,fe++),te+=R(H,V,T,N,K);else if(N==="object"){if(typeof W.then=="function")return R(_(W),V,T,H,K);throw V=String(W),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return te}function L(W,V,T){if(W==null)return W;var H=[],K=0;return R(W,H,"","",function(N){return V.call(T,N,K++)}),H}function Q(W){if(W._status===-1){var V=W._result;V=V(),V.then(function(T){(W._status===0||W._status===-1)&&(W._status=1,W._result=T)},function(T){(W._status===0||W._status===-1)&&(W._status=2,W._result=T)}),W._status===-1&&(W._status=0,W._result=V)}if(W._status===1)return W._result.default;throw W._result}var G=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function Y(){}return an.Children={map:L,forEach:function(W,V,T){L(W,function(){V.apply(this,arguments)},T)},count:function(W){var V=0;return L(W,function(){V++}),V},toArray:function(W){return L(W,function(V){return V})||[]},only:function(W){if(!O(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},an.Component=g,an.Fragment=t,an.Profiler=i,an.PureComponent=b,an.StrictMode=n,an.Suspense=l,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,an.__COMPILER_RUNTIME={__proto__:null,c:function(W){return S.H.useMemoCache(W)}},an.cache=function(W){return function(){return W.apply(null,arguments)}},an.cloneElement=function(W,V,T){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var H=v({},W.props),K=W.key,N=void 0;if(V!=null)for(te in V.ref!==void 0&&(N=void 0),V.key!==void 0&&(K=""+V.key),V)!M.call(V,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&V.ref===void 0||(H[te]=V[te]);var te=arguments.length-2;if(te===1)H.children=T;else if(1<te){for(var oe=Array(te),fe=0;fe<te;fe++)oe[fe]=arguments[fe+2];H.children=oe}return I(W.type,K,void 0,void 0,N,H)},an.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:s,_context:W},W},an.createElement=function(W,V,T){var H,K={},N=null;if(V!=null)for(H in V.key!==void 0&&(N=""+V.key),V)M.call(V,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(K[H]=V[H]);var te=arguments.length-2;if(te===1)K.children=T;else if(1<te){for(var oe=Array(te),fe=0;fe<te;fe++)oe[fe]=arguments[fe+2];K.children=oe}if(W&&W.defaultProps)for(H in te=W.defaultProps,te)K[H]===void 0&&(K[H]=te[H]);return I(W,N,void 0,void 0,null,K)},an.createRef=function(){return{current:null}},an.forwardRef=function(W){return{$$typeof:o,render:W}},an.isValidElement=O,an.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:Q}},an.memo=function(W,V){return{$$typeof:c,type:W,compare:V===void 0?null:V}},an.startTransition=function(W){var V=S.T,T={};S.T=T;try{var H=W(),K=S.S;K!==null&&K(T,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(Y,G)}catch(N){G(N)}finally{S.T=V}},an.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},an.use=function(W){return S.H.use(W)},an.useActionState=function(W,V,T){return S.H.useActionState(W,V,T)},an.useCallback=function(W,V){return S.H.useCallback(W,V)},an.useContext=function(W){return S.H.useContext(W)},an.useDebugValue=function(){},an.useDeferredValue=function(W,V){return S.H.useDeferredValue(W,V)},an.useEffect=function(W,V,T){var H=S.H;if(typeof T=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(W,V)},an.useId=function(){return S.H.useId()},an.useImperativeHandle=function(W,V,T){return S.H.useImperativeHandle(W,V,T)},an.useInsertionEffect=function(W,V){return S.H.useInsertionEffect(W,V)},an.useLayoutEffect=function(W,V){return S.H.useLayoutEffect(W,V)},an.useMemo=function(W,V){return S.H.useMemo(W,V)},an.useOptimistic=function(W,V){return S.H.useOptimistic(W,V)},an.useReducer=function(W,V,T){return S.H.useReducer(W,V,T)},an.useRef=function(W){return S.H.useRef(W)},an.useState=function(W){return S.H.useState(W)},an.useSyncExternalStore=function(W,V,T){return S.H.useSyncExternalStore(W,V,T)},an.useTransition=function(){return S.H.useTransition()},an.version="19.1.0",an}var YH;function bh(){return YH||(YH=1,eC.exports=Wie()),eC.exports}var we=bh();const le=na(we),XH=_ne({__proto__:null,default:le},[we]);var Kie="Invariant failed";function hu(r,e){throw new Error(Kie)}var hl;(function(r){r.Update="Web3ReactUpdate",r.Error="Web3ReactError",r.Deactivate="Web3ReactDeactivate"})(hl||(hl={}));function Pv(){return Pv=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Pv.apply(this,arguments)}function rK(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,kv(r,e)}function $U(r){return $U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$U(r)}function kv(r,e){return kv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},kv(r,e)}function qie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function lb(r,e,t){return qie()?lb=Reflect.construct:lb=function(i,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(i,o),c=new l;return a&&kv(c,a.prototype),c},lb.apply(null,arguments)}function Yie(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function jb(r){var e=typeof Map=="function"?new Map:void 0;return jb=function(n){if(n===null||!Yie(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return lb(n,arguments,$U(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),kv(i,n)},jb(r)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function ZH(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function iK(r){if(typeof r=="string"){r=r.replace(/^Ox/,"0x");var e=Number.parseInt(r,r.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&hu(),e}else return Number.isInteger(r)||hu(),r}function sK(r){typeof r=="string"&&r.match(/^(0x)?[0-9a-fA-F]{40}$/)||hu();for(var e=r.substring(0,2)==="0x"?r:"0x"+r,t=e.toLowerCase().substring(2).split(""),n=new Uint8Array(40),i=0;i<40;i++)n[i]=t[i].charCodeAt(0);for(var s=Gt(Ii(n)),a=0;a<40;a+=2)s[a>>1]>>4>=8&&(t[a]=t[a].toUpperCase()),(s[a>>1]&15)>=8&&(t[a+1]=t[a+1].toUpperCase());var o="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==o&&hu(),o}var JH=function(e,t){try{var n=function(a){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(o){var l=o[0],c=o[1],u=iK(l);if(e.supportedChainIds&&!e.supportedChainIds.includes(u))throw new aK(u,e.supportedChainIds);var f=c===null?c:sK(c);return{provider:a,chainId:u,account:f}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(n):n(t.provider))}catch(s){return Promise.reject(s)}},e_=function(r){rK(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t}return e}(jb(Error)),aK=function(r){rK(e,r);function e(t,n){var i;return i=r.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+n+".",i}return e}(jb(Error)),Zi;(function(r){r[r.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",r[r.UPDATE=1]="UPDATE",r[r.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",r[r.ERROR=3]="ERROR",r[r.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",r[r.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(Zi||(Zi={}));function Xie(r,e){var t=e.type,n=e.payload;switch(t){case Zi.ACTIVATE_CONNECTOR:{var i=n.connector,s=n.provider,a=n.chainId,o=n.account,l=n.onError;return{connector:i,provider:s,chainId:a,account:o,onError:l}}case Zi.UPDATE:{var c=n.provider,u=n.chainId,f=n.account;return Pv({},r,c===void 0?{}:{provider:c},u===void 0?{}:{chainId:u},f===void 0?{}:{account:f})}case Zi.UPDATE_FROM_ERROR:{var d=n.provider,p=n.chainId,v=n.account;return Pv({},r,d===void 0?{}:{provider:d},p===void 0?{}:{chainId:p},v===void 0?{}:{account:v},{error:void 0})}case Zi.ERROR:{var m=n.error,g=r.connector,w=r.onError;return{connector:g,error:m,onError:w}}case Zi.ERROR_FROM_ACTIVATION:{var b=n.connector,E=n.error;return{connector:b,error:E}}case Zi.DEACTIVATE_CONNECTOR:return{}}}function Zie(){var r=we.useReducer(Xie,{}),e=r[0],t=r[1],n=e.connector,i=e.provider,s=e.chainId,a=e.account,o=e.onError,l=e.error,c=we.useRef(-1);c.current+=1;var u=we.useCallback(function(g,w,b){b===void 0&&(b=!1);try{var E=c.current,B=!1;return Promise.resolve(ZH(function(){return Promise.resolve(g.activate().then(function(S){return B=!0,S})).then(function(S){return Promise.resolve(JH(g,S)).then(function(M){if(c.current>E)throw new e_;t({type:Zi.ACTIVATE_CONNECTOR,payload:Pv({connector:g},M,{onError:w})})})})},function(S){if(S instanceof e_)B&&g.deactivate();else{if(b)throw B&&g.deactivate(),S;w?(B&&g.deactivate(),w(S)):t({type:Zi.ERROR_FROM_ACTIVATION,payload:{connector:g,error:S}})}}))}catch(S){return Promise.reject(S)}},[]),f=we.useCallback(function(g){t({type:Zi.ERROR,payload:{error:g}})},[]),d=we.useCallback(function(){t({type:Zi.DEACTIVATE_CONNECTOR})},[]),p=we.useCallback(function(g){try{if(!n)throw Error("This should never happen, it's just so Typescript stops complaining");var w=c.current;return Promise.resolve(function(){if(l)return ZH(function(){return Promise.resolve(JH(n,g)).then(function(S){if(c.current>w)throw new e_;t({type:Zi.UPDATE_FROM_ERROR,payload:S})})},function(S){S instanceof e_||(o?o(S):t({type:Zi.ERROR,payload:{error:S}}))});var b=g.chainId===void 0?void 0:iK(g.chainId);if(b!==void 0&&n.supportedChainIds&&!n.supportedChainIds.includes(b)){var E=new aK(b,n.supportedChainIds);o?o(E):t({type:Zi.ERROR,payload:{error:E}})}else{var B=typeof g.account=="string"?sK(g.account):g.account;t({type:Zi.UPDATE,payload:{provider:g.provider,chainId:b,account:B}})}}())}catch(b){return Promise.reject(b)}},[n,l,o]),v=we.useCallback(function(g){o?o(g):t({type:Zi.ERROR,payload:{error:g}})},[o]),m=we.useCallback(function(){t({type:Zi.DEACTIVATE_CONNECTOR})},[]);return we.useEffect(function(){return function(){n&&n.deactivate()}},[n]),we.useEffect(function(){return n&&n.on(hl.Update,p).on(hl.Error,v).on(hl.Deactivate,m),function(){n&&n.off(hl.Update,p).off(hl.Error,v).off(hl.Deactivate,m)}},[n,p,v,m]),{connector:n,provider:i,chainId:s,account:a,activate:u,setError:f,deactivate:d,error:l}}var oK="primary",Op={};function Jie(r){Op[r]&&hu(),Op[r]=we.createContext({activate:function(){try{return hu(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){hu()},deactivate:function(){hu()},active:!1}),Op[r].displayName="Web3ReactContext - "+r;var e=Op[r].Provider;return function(n){var i=n.getLibrary,s=n.children,a=Zie(),o=a.connector,l=a.provider,c=a.chainId,u=a.account,f=a.activate,d=a.setError,p=a.deactivate,v=a.error,m=o!==void 0&&c!==void 0&&u!==void 0&&!v,g=we.useMemo(function(){return m&&c!==void 0&&Number.isInteger(c)&&o?i(l,o):void 0},[m,i,l,o,c]),w={connector:o,library:g,chainId:c,account:u,activate:f,setError:d,deactivate:p,active:m,error:v};return le.createElement(e,{value:w},s)}}var $ie=Jie(oK);function ese(r){return r===void 0&&(r=oK),Object.keys(Op).includes(r)||hu(),Op[r]}function tse(r){return we.useContext(ese(r))}var tC={exports:{}},i0={},nC={exports:{}},rC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $H;function nse(){return $H||($H=1,function(r){function e(L,Q){var G=L.length;L.push(Q);e:for(;0<G;){var Y=G-1>>>1,W=L[Y];if(0<i(W,Q))L[Y]=Q,L[G]=W,G=Y;else break e}}function t(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var Q=L[0],G=L.pop();if(G!==Q){L[0]=G;e:for(var Y=0,W=L.length,V=W>>>1;Y<V;){var T=2*(Y+1)-1,H=L[T],K=T+1,N=L[K];if(0>i(H,G))K<W&&0>i(N,H)?(L[Y]=N,L[K]=G,Y=K):(L[Y]=H,L[T]=G,Y=T);else if(K<W&&0>i(N,G))L[Y]=N,L[K]=G,Y=K;else break e}}return Q}function i(L,Q){var G=L.sortIndex-Q.sortIndex;return G!==0?G:L.id-Q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,f=null,d=3,p=!1,v=!1,m=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Q=t(c);Q!==null;){if(Q.callback===null)n(c);else if(Q.startTime<=L)n(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function S(L){if(m=!1,B(L),!v)if(t(l)!==null)v=!0,M||(M=!0,D());else{var Q=t(c);Q!==null&&R(S,Q.startTime-L)}}var M=!1,I=-1,k=5,O=-1;function C(){return g?!0:!(r.unstable_now()-O<k)}function P(){if(g=!1,M){var L=r.unstable_now();O=L;var Q=!0;try{e:{v=!1,m&&(m=!1,b(I),I=-1),p=!0;var G=d;try{t:{for(B(L),f=t(l);f!==null&&!(f.expirationTime>L&&C());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,d=f.priorityLevel;var W=Y(f.expirationTime<=L);if(L=r.unstable_now(),typeof W=="function"){f.callback=W,B(L),Q=!0;break t}f===t(l)&&n(l),B(L)}else n(l);f=t(l)}if(f!==null)Q=!0;else{var V=t(c);V!==null&&R(S,V.startTime-L),Q=!1}}break e}finally{f=null,d=G,p=!1}Q=void 0}}finally{Q?D():M=!1}}}var D;if(typeof E=="function")D=function(){E(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,_=F.port2;F.port1.onmessage=P,D=function(){_.postMessage(null)}}else D=function(){w(P,0)};function R(L,Q){I=w(function(){L(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(L){L.callback=null},r.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<L?Math.floor(1e3/L):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_next=function(L){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var G=d;d=Q;try{return L()}finally{d=G}},r.unstable_requestPaint=function(){g=!0},r.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=d;d=L;try{return Q()}finally{d=G}},r.unstable_scheduleCallback=function(L,Q,G){var Y=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,L){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,L={id:u++,callback:Q,priorityLevel:L,startTime:G,expirationTime:W,sortIndex:-1},G>Y?(L.sortIndex=G,e(c,L),t(l)===null&&L===t(c)&&(m?(b(I),I=-1):m=!0,R(S,G-Y))):(L.sortIndex=W,e(l,L),v||p||(v=!0,M||(M=!0,D()))),L},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(L){var Q=d;return function(){var G=d;d=Q;try{return L.apply(this,arguments)}finally{d=G}}}}(rC)),rC}var eQ;function rse(){return eQ||(eQ=1,nC.exports=nse()),nC.exports}var iC={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tQ;function ise(){if(tQ)return bs;tQ=1;var r=bh();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,bs.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,u)},bs.flushSync=function(l){var c=a.T,u=n.p;try{if(a.T=null,n.p=2,l)return l()}finally{a.T=c,n.p=u,n.d.f()}},bs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},bs.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},bs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=o(u,c.crossOrigin),d=typeof c.integrity=="string"?c.integrity:void 0,p=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:d,fetchPriority:p}):u==="script"&&n.d.X(l,{crossOrigin:f,integrity:d,fetchPriority:p,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},bs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},bs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=o(u,c.crossOrigin);n.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},bs.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},bs.requestFormReset=function(l){n.d.r(l)},bs.unstable_batchedUpdates=function(l,c){return l(c)},bs.useFormState=function(l,c,u){return a.H.useFormState(l,c,u)},bs.useFormStatus=function(){return a.H.useHostTransitionStatus()},bs.version="19.1.0",bs}var nQ;function lK(){if(nQ)return iC.exports;nQ=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),iC.exports=ise(),iC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rQ;function sse(){if(rQ)return i0;rQ=1;var r=rse(),e=bh(),t=lK();function n(A){var h="https://react.dev/errors/"+A;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+A+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var h=A,y=A;if(A.alternate)for(;h.return;)h=h.return;else{A=h;do h=A,(h.flags&4098)!==0&&(y=h.return),A=h.return;while(A)}return h.tag===3?y:null}function a(A){if(A.tag===13){var h=A.memoizedState;if(h===null&&(A=A.alternate,A!==null&&(h=A.memoizedState)),h!==null)return h.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function l(A){var h=A.alternate;if(!h){if(h=s(A),h===null)throw Error(n(188));return h!==A?null:A}for(var y=A,x=h;;){var U=y.return;if(U===null)break;var z=U.alternate;if(z===null){if(x=U.return,x!==null){y=x;continue}break}if(U.child===z.child){for(z=U.child;z;){if(z===y)return o(U),A;if(z===x)return o(U),h;z=z.sibling}throw Error(n(188))}if(y.return!==x.return)y=U,x=z;else{for(var ne=!1,ue=U.child;ue;){if(ue===y){ne=!0,y=U,x=z;break}if(ue===x){ne=!0,x=U,y=z;break}ue=ue.sibling}if(!ne){for(ue=z.child;ue;){if(ue===y){ne=!0,y=z,x=U;break}if(ue===x){ne=!0,x=z,y=U;break}ue=ue.sibling}if(!ne)throw Error(n(189))}}if(y.alternate!==x)throw Error(n(190))}if(y.tag!==3)throw Error(n(188));return y.stateNode.current===y?A:h}function c(A){var h=A.tag;if(h===5||h===26||h===27||h===6)return A;for(A=A.child;A!==null;){if(h=c(A),h!==null)return h;A=A.sibling}return null}var u=Object.assign,f=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),E=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function D(A){return A===null||typeof A!="object"?null:(A=P&&A[P]||A["@@iterator"],typeof A=="function"?A:null)}var F=Symbol.for("react.client.reference");function _(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===F?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case v:return"Fragment";case g:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case M:return"SuspenseList";case O:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case E:return(A.displayName||"Context")+".Provider";case b:return(A._context.displayName||"Context")+".Consumer";case B:var h=A.render;return A=A.displayName,A||(A=h.displayName||h.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case I:return h=A.displayName||null,h!==null?h:_(A.type)||"Memo";case k:h=A._payload,A=A._init;try{return _(A(h))}catch{}}return null}var R=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Y=[],W=-1;function V(A){return{current:A}}function T(A){0>W||(A.current=Y[W],Y[W]=null,W--)}function H(A,h){W++,Y[W]=A.current,A.current=h}var K=V(null),N=V(null),te=V(null),oe=V(null);function fe(A,h){switch(H(te,h),H(N,A),H(K,null),h.nodeType){case 9:case 11:A=(A=h.documentElement)&&(A=A.namespaceURI)?d4(A):0;break;default:if(A=h.tagName,h=h.namespaceURI)h=d4(h),A=p4(h,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}T(K),H(K,A)}function he(){T(K),T(N),T(te)}function me(A){A.memoizedState!==null&&H(oe,A);var h=K.current,y=p4(h,A.type);h!==y&&(H(N,A),H(K,y))}function Te(A){N.current===A&&(T(K),T(N)),oe.current===A&&(T(oe),qg._currentValue=G)}var Re=Object.prototype.hasOwnProperty,de=r.unstable_scheduleCallback,Z=r.unstable_cancelCallback,ve=r.unstable_shouldYield,ye=r.unstable_requestPaint,se=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,_e=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,$=r.unstable_NormalPriority,ee=r.unstable_LowPriority,pe=r.unstable_IdlePriority,xe=r.log,be=r.unstable_setDisableYieldValue,De=null,J=null;function j(A){if(typeof xe=="function"&&be(A),J&&typeof J.setStrictMode=="function")try{J.setStrictMode(De,A)}catch{}}var X=Math.clz32?Math.clz32:Me,re=Math.log,ge=Math.LN2;function Me(A){return A>>>=0,A===0?32:31-(re(A)/ge|0)|0}var Ee=256,We=4194304;function et(A){var h=A&42;if(h!==0)return h;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ze(A,h,y){var x=A.pendingLanes;if(x===0)return 0;var U=0,z=A.suspendedLanes,ne=A.pingedLanes;A=A.warmLanes;var ue=x&134217727;return ue!==0?(x=ue&~z,x!==0?U=et(x):(ne&=ue,ne!==0?U=et(ne):y||(y=ue&~A,y!==0&&(U=et(y))))):(ue=x&~z,ue!==0?U=et(ue):ne!==0?U=et(ne):y||(y=x&~A,y!==0&&(U=et(y)))),U===0?0:h!==0&&h!==U&&(h&z)===0&&(z=U&-U,y=h&-h,z>=y||z===32&&(y&4194048)!==0)?h:U}function dt(A,h){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&h)===0}function Se(A,h){switch(A){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Je(){var A=Ee;return Ee<<=1,(Ee&4194048)===0&&(Ee=256),A}function Ve(){var A=We;return We<<=1,(We&62914560)===0&&(We=4194304),A}function je(A){for(var h=[],y=0;31>y;y++)h.push(A);return h}function Ye(A,h){A.pendingLanes|=h,h!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function rt(A,h,y,x,U,z){var ne=A.pendingLanes;A.pendingLanes=y,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=y,A.entangledLanes&=y,A.errorRecoveryDisabledLanes&=y,A.shellSuspendCounter=0;var ue=A.entanglements,Be=A.expirationTimes,ke=A.hiddenUpdates;for(y=ne&~y;0<y;){var qe=31-X(y),$e=1<<qe;ue[qe]=0,Be[qe]=-1;var Qe=ke[qe];if(Qe!==null)for(ke[qe]=null,qe=0;qe<Qe.length;qe++){var Ge=Qe[qe];Ge!==null&&(Ge.lane&=-536870913)}y&=~$e}x!==0&&wt(A,x,0),z!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=z&~(ne&~h))}function wt(A,h,y){A.pendingLanes|=h,A.suspendedLanes&=~h;var x=31-X(h);A.entangledLanes|=h,A.entanglements[x]=A.entanglements[x]|1073741824|y&4194090}function kt(A,h){var y=A.entangledLanes|=h;for(A=A.entanglements;y;){var x=31-X(y),U=1<<x;U&h|A[x]&h&&(A[x]|=h),y&=~U}}function ur(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function bt(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function en(){var A=Q.p;return A!==0?A:(A=window.event,A===void 0?32:L4(A.type))}function ri(A,h){var y=Q.p;try{return Q.p=A,h()}finally{Q.p=y}}var An=Math.random().toString(36).slice(2),Xt="__reactFiber$"+An,jn="__reactProps$"+An,pn="__reactContainer$"+An,Pn="__reactEvents$"+An,ia="__reactListeners$"+An,kn="__reactHandles$"+An,Un="__reactResources$"+An,ii="__reactMarker$"+An;function Hn(A){delete A[Xt],delete A[jn],delete A[Pn],delete A[ia],delete A[kn]}function yn(A){var h=A[Xt];if(h)return h;for(var y=A.parentNode;y;){if(h=y[pn]||y[Xt]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(A=y4(A);A!==null;){if(y=A[Xt])return y;A=y4(A)}return h}A=y,y=A.parentNode}return null}function is(A){if(A=A[Xt]||A[pn]){var h=A.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return A}return null}function Fn(A){var h=A.tag;if(h===5||h===26||h===27||h===6)return A.stateNode;throw Error(n(33))}function wn(A){var h=A[Un];return h||(h=A[Un]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Ae(A){A[ii]=!0}var Ue=new Set,Ne={};function Pe(A,h){Fe(A,h),Fe(A+"Capture",h)}function Fe(A,h){for(Ne[A]=h,A=0;A<h.length;A++)Ue.add(h[A])}var nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ht={},xt={};function Et(A){return Re.call(xt,A)?!0:Re.call(ht,A)?!1:nt.test(A)?xt[A]=!0:(ht[A]=!0,!1)}function Dt(A,h,y){if(Et(h))if(y===null)A.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":A.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){A.removeAttribute(h);return}}A.setAttribute(h,""+y)}}function Nt(A,h,y){if(y===null)A.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(h);return}A.setAttribute(h,""+y)}}function _t(A,h,y,x){if(x===null)A.removeAttribute(y);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(y);return}A.setAttributeNS(h,y,""+x)}}var _n,Wn;function Vn(A){if(_n===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);_n=h&&h[1]||"",Wn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+A+Wn}var si=!1;function mn(A,h){if(!A||si)return"";si=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(Ge){var Qe=Ge}Reflect.construct(A,[],$e)}else{try{$e.call()}catch(Ge){Qe=Ge}A.call($e.prototype)}}else{try{throw Error()}catch(Ge){Qe=Ge}($e=A())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(Ge){if(Ge&&Qe&&typeof Ge.stack=="string")return[Ge.stack,Qe.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=x.DetermineComponentFrameRoot(),ne=z[0],ue=z[1];if(ne&&ue){var Be=ne.split(`
`),ke=ue.split(`
`);for(U=x=0;x<Be.length&&!Be[x].includes("DetermineComponentFrameRoot");)x++;for(;U<ke.length&&!ke[U].includes("DetermineComponentFrameRoot");)U++;if(x===Be.length||U===ke.length)for(x=Be.length-1,U=ke.length-1;1<=x&&0<=U&&Be[x]!==ke[U];)U--;for(;1<=x&&0<=U;x--,U--)if(Be[x]!==ke[U]){if(x!==1||U!==1)do if(x--,U--,0>U||Be[x]!==ke[U]){var qe=`
`+Be[x].replace(" at new "," at ");return A.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",A.displayName)),qe}while(1<=x&&0<=U);break}}}finally{si=!1,Error.prepareStackTrace=y}return(y=A?A.displayName||A.name:"")?Vn(y):""}function Ct(A){switch(A.tag){case 26:case 27:case 5:return Vn(A.type);case 16:return Vn("Lazy");case 13:return Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return mn(A.type,!1);case 11:return mn(A.type.render,!1);case 1:return mn(A.type,!0);case 31:return Vn("Activity");default:return""}}function Rr(A){try{var h="";do h+=Ct(A),A=A.return;while(A);return h}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function nn(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function sa(A){var h=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Nu(A){var h=sa(A)?"checked":"value",y=Object.getOwnPropertyDescriptor(A.constructor.prototype,h),x=""+A[h];if(!A.hasOwnProperty(h)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var U=y.get,z=y.set;return Object.defineProperty(A,h,{configurable:!0,get:function(){return U.call(this)},set:function(ne){x=""+ne,z.call(this,ne)}}),Object.defineProperty(A,h,{enumerable:y.enumerable}),{getValue:function(){return x},setValue:function(ne){x=""+ne},stopTracking:function(){A._valueTracker=null,delete A[h]}}}}function ji(A){A._valueTracker||(A._valueTracker=Nu(A))}function Nh(A){if(!A)return!1;var h=A._valueTracker;if(!h)return!0;var y=h.getValue(),x="";return A&&(x=sa(A)?A.checked?"true":"false":A.value),A=x,A!==y?(h.setValue(A),!0):!1}function yr(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Bl=/[\n"\\]/g;function ws(A){return A.replace(Bl,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function _s(A,h,y,x,U,z,ne,ue){A.name="",ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?A.type=ne:A.removeAttribute("type"),h!=null?ne==="number"?(h===0&&A.value===""||A.value!=h)&&(A.value=""+nn(h)):A.value!==""+nn(h)&&(A.value=""+nn(h)):ne!=="submit"&&ne!=="reset"||A.removeAttribute("value"),h!=null?ag(A,ne,nn(h)):y!=null?ag(A,ne,nn(y)):x!=null&&A.removeAttribute("value"),U==null&&z!=null&&(A.defaultChecked=!!z),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.name=""+nn(ue):A.removeAttribute("name")}function Ph(A,h,y,x,U,z,ne,ue){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(A.type=z),h!=null||y!=null){if(!(z!=="submit"&&z!=="reset"||h!=null))return;y=y!=null?""+nn(y):"",h=h!=null?""+nn(h):y,ue||h===A.value||(A.value=h),A.defaultValue=h}x=x??U,x=typeof x!="function"&&typeof x!="symbol"&&!!x,A.checked=ue?A.checked:!!x,A.defaultChecked=!!x,ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"&&(A.name=ne)}function ag(A,h,y){h==="number"&&yr(A.ownerDocument)===A||A.defaultValue===""+y||(A.defaultValue=""+y)}function _c(A,h,y,x){if(A=A.options,h){h={};for(var U=0;U<y.length;U++)h["$"+y[U]]=!0;for(y=0;y<A.length;y++)U=h.hasOwnProperty("$"+A[y].value),A[y].selected!==U&&(A[y].selected=U),U&&x&&(A[y].defaultSelected=!0)}else{for(y=""+nn(y),h=null,U=0;U<A.length;U++){if(A[U].value===y){A[U].selected=!0,x&&(A[U].defaultSelected=!0);return}h!==null||A[U].disabled||(h=A[U])}h!==null&&(h.selected=!0)}}function fP(A,h,y){if(h!=null&&(h=""+nn(h),h!==A.value&&(A.value=h),y==null)){A.defaultValue!==h&&(A.defaultValue=h);return}A.defaultValue=y!=null?""+nn(y):""}function hP(A,h,y,x){if(h==null){if(x!=null){if(y!=null)throw Error(n(92));if(R(x)){if(1<x.length)throw Error(n(93));x=x[0]}y=x}y==null&&(y=""),h=y}y=nn(h),A.defaultValue=y,x=A.textContent,x===y&&x!==""&&x!==null&&(A.value=x)}function kh(A,h){if(h){var y=A.firstChild;if(y&&y===A.lastChild&&y.nodeType===3){y.nodeValue=h;return}}A.textContent=h}var vee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dP(A,h,y){var x=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?x?A.setProperty(h,""):h==="float"?A.cssFloat="":A[h]="":x?A.setProperty(h,y):typeof y!="number"||y===0||vee.has(h)?h==="float"?A.cssFloat=y:A[h]=(""+y).trim():A[h]=y+"px"}function pP(A,h,y){if(h!=null&&typeof h!="object")throw Error(n(62));if(A=A.style,y!=null){for(var x in y)!y.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?A.setProperty(x,""):x==="float"?A.cssFloat="":A[x]="");for(var U in h)x=h[U],h.hasOwnProperty(U)&&y[U]!==x&&dP(A,U,x)}else for(var z in h)h.hasOwnProperty(z)&&dP(A,z,h[z])}function MS(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jy(A){return wee.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var CS=null;function TS(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Hh=null,Qh=null;function mP(A){var h=is(A);if(h&&(A=h.stateNode)){var y=A[jn]||null;e:switch(A=h.stateNode,h.type){case"input":if(_s(A,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=A;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ws(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var x=y[h];if(x!==A&&x.form===A.form){var U=x[jn]||null;if(!U)throw Error(n(90));_s(x,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(h=0;h<y.length;h++)x=y[h],x.form===A.form&&Nh(x)}break e;case"textarea":fP(A,y.value,y.defaultValue);break e;case"select":h=y.value,h!=null&&_c(A,!!y.multiple,h,!1)}}}var RS=!1;function gP(A,h,y){if(RS)return A(h,y);RS=!0;try{var x=A(h);return x}finally{if(RS=!1,(Hh!==null||Qh!==null)&&(Rw(),Hh&&(h=Hh,A=Qh,Qh=Hh=null,mP(h),A)))for(h=0;h<A.length;h++)mP(A[h])}}function og(A,h){var y=A.stateNode;if(y===null)return null;var x=y[jn]||null;if(x===null)return null;y=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(A=A.type,x=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!x;break e;default:A=!1}if(A)return null;if(y&&typeof y!="function")throw Error(n(231,h,typeof y));return y}var xc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IS=!1;if(xc)try{var lg={};Object.defineProperty(lg,"passive",{get:function(){IS=!0}}),window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{IS=!1}var Pu=null,US=null,Wy=null;function vP(){if(Wy)return Wy;var A,h=US,y=h.length,x,U="value"in Pu?Pu.value:Pu.textContent,z=U.length;for(A=0;A<y&&h[A]===U[A];A++);var ne=y-A;for(x=1;x<=ne&&h[y-x]===U[z-x];x++);return Wy=U.slice(A,1<x?1-x:void 0)}function Ky(A){var h=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&h===13&&(A=13)):A=h,A===10&&(A=13),32<=A||A===13?A:0}function qy(){return!0}function yP(){return!1}function aa(A){function h(y,x,U,z,ne){this._reactName=y,this._targetInst=U,this.type=x,this.nativeEvent=z,this.target=ne,this.currentTarget=null;for(var ue in A)A.hasOwnProperty(ue)&&(y=A[ue],this[ue]=y?y(z):z[ue]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?qy:yP,this.isPropagationStopped=yP,this}return u(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=qy)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=qy)},persist:function(){},isPersistent:qy}),h}var Af={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yy=aa(Af),cg=u({},Af,{view:0,detail:0}),_ee=aa(cg),FS,LS,ug,Xy=u({},cg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OS,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==ug&&(ug&&A.type==="mousemove"?(FS=A.screenX-ug.screenX,LS=A.screenY-ug.screenY):LS=FS=0,ug=A),FS)},movementY:function(A){return"movementY"in A?A.movementY:LS}}),wP=aa(Xy),xee=u({},Xy,{dataTransfer:0}),bee=aa(xee),Eee=u({},cg,{relatedTarget:0}),DS=aa(Eee),See=u({},Af,{animationName:0,elapsedTime:0,pseudoElement:0}),Bee=aa(See),Mee=u({},Af,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Cee=aa(Mee),Tee=u({},Af,{data:0}),_P=aa(Tee),Ree={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fee(A){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(A):(A=Uee[A])?!!h[A]:!1}function OS(){return Fee}var Lee=u({},cg,{key:function(A){if(A.key){var h=Ree[A.key]||A.key;if(h!=="Unidentified")return h}return A.type==="keypress"?(A=Ky(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Iee[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OS,charCode:function(A){return A.type==="keypress"?Ky(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Ky(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Dee=aa(Lee),Oee=u({},Xy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xP=aa(Oee),Nee=u({},cg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OS}),Pee=aa(Nee),kee=u({},Af,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hee=aa(kee),Qee=u({},Xy,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),zee=aa(Qee),Vee=u({},Af,{newState:0,oldState:0}),Gee=aa(Vee),jee=[9,13,27,32],NS=xc&&"CompositionEvent"in window,Ag=null;xc&&"documentMode"in document&&(Ag=document.documentMode);var Wee=xc&&"TextEvent"in window&&!Ag,bP=xc&&(!NS||Ag&&8<Ag&&11>=Ag),EP=" ",SP=!1;function BP(A,h){switch(A){case"keyup":return jee.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MP(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var zh=!1;function Kee(A,h){switch(A){case"compositionend":return MP(h);case"keypress":return h.which!==32?null:(SP=!0,EP);case"textInput":return A=h.data,A===EP&&SP?null:A;default:return null}}function qee(A,h){if(zh)return A==="compositionend"||!NS&&BP(A,h)?(A=vP(),Wy=US=Pu=null,zh=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return bP&&h.locale!=="ko"?null:h.data;default:return null}}var Yee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CP(A){var h=A&&A.nodeName&&A.nodeName.toLowerCase();return h==="input"?!!Yee[A.type]:h==="textarea"}function TP(A,h,y,x){Hh?Qh?Qh.push(x):Qh=[x]:Hh=x,h=Ow(h,"onChange"),0<h.length&&(y=new Yy("onChange","change",null,y,x),A.push({event:y,listeners:h}))}var fg=null,hg=null;function Xee(A){c4(A,0)}function Zy(A){var h=Fn(A);if(Nh(h))return A}function RP(A,h){if(A==="change")return h}var IP=!1;if(xc){var PS;if(xc){var kS="oninput"in document;if(!kS){var UP=document.createElement("div");UP.setAttribute("oninput","return;"),kS=typeof UP.oninput=="function"}PS=kS}else PS=!1;IP=PS&&(!document.documentMode||9<document.documentMode)}function FP(){fg&&(fg.detachEvent("onpropertychange",LP),hg=fg=null)}function LP(A){if(A.propertyName==="value"&&Zy(hg)){var h=[];TP(h,hg,A,TS(A)),gP(Xee,h)}}function Zee(A,h,y){A==="focusin"?(FP(),fg=h,hg=y,fg.attachEvent("onpropertychange",LP)):A==="focusout"&&FP()}function Jee(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Zy(hg)}function $ee(A,h){if(A==="click")return Zy(h)}function ete(A,h){if(A==="input"||A==="change")return Zy(h)}function tte(A,h){return A===h&&(A!==0||1/A===1/h)||A!==A&&h!==h}var Ua=typeof Object.is=="function"?Object.is:tte;function dg(A,h){if(Ua(A,h))return!0;if(typeof A!="object"||A===null||typeof h!="object"||h===null)return!1;var y=Object.keys(A),x=Object.keys(h);if(y.length!==x.length)return!1;for(x=0;x<y.length;x++){var U=y[x];if(!Re.call(h,U)||!Ua(A[U],h[U]))return!1}return!0}function DP(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function OP(A,h){var y=DP(A);A=0;for(var x;y;){if(y.nodeType===3){if(x=A+y.textContent.length,A<=h&&x>=h)return{node:y,offset:h-A};A=x}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=DP(y)}}function NP(A,h){return A&&h?A===h?!0:A&&A.nodeType===3?!1:h&&h.nodeType===3?NP(A,h.parentNode):"contains"in A?A.contains(h):A.compareDocumentPosition?!!(A.compareDocumentPosition(h)&16):!1:!1}function PP(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var h=yr(A.document);h instanceof A.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)A=h.contentWindow;else break;h=yr(A.document)}return h}function HS(A){var h=A&&A.nodeName&&A.nodeName.toLowerCase();return h&&(h==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||h==="textarea"||A.contentEditable==="true")}var nte=xc&&"documentMode"in document&&11>=document.documentMode,Vh=null,QS=null,pg=null,zS=!1;function kP(A,h,y){var x=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;zS||Vh==null||Vh!==yr(x)||(x=Vh,"selectionStart"in x&&HS(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),pg&&dg(pg,x)||(pg=x,x=Ow(QS,"onSelect"),0<x.length&&(h=new Yy("onSelect","select",null,h,y),A.push({event:h,listeners:x}),h.target=Vh)))}function ff(A,h){var y={};return y[A.toLowerCase()]=h.toLowerCase(),y["Webkit"+A]="webkit"+h,y["Moz"+A]="moz"+h,y}var Gh={animationend:ff("Animation","AnimationEnd"),animationiteration:ff("Animation","AnimationIteration"),animationstart:ff("Animation","AnimationStart"),transitionrun:ff("Transition","TransitionRun"),transitionstart:ff("Transition","TransitionStart"),transitioncancel:ff("Transition","TransitionCancel"),transitionend:ff("Transition","TransitionEnd")},VS={},HP={};xc&&(HP=document.createElement("div").style,"AnimationEvent"in window||(delete Gh.animationend.animation,delete Gh.animationiteration.animation,delete Gh.animationstart.animation),"TransitionEvent"in window||delete Gh.transitionend.transition);function hf(A){if(VS[A])return VS[A];if(!Gh[A])return A;var h=Gh[A],y;for(y in h)if(h.hasOwnProperty(y)&&y in HP)return VS[A]=h[y];return A}var QP=hf("animationend"),zP=hf("animationiteration"),VP=hf("animationstart"),rte=hf("transitionrun"),ite=hf("transitionstart"),ste=hf("transitioncancel"),GP=hf("transitionend"),jP=new Map,GS="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");GS.push("scrollEnd");function Xo(A,h){jP.set(A,h),Pe(h,[A])}var WP=new WeakMap;function fo(A,h){if(typeof A=="object"&&A!==null){var y=WP.get(A);return y!==void 0?y:(h={value:A,source:h,stack:Rr(h)},WP.set(A,h),h)}return{value:A,source:h,stack:Rr(h)}}var ho=[],jh=0,jS=0;function Jy(){for(var A=jh,h=jS=jh=0;h<A;){var y=ho[h];ho[h++]=null;var x=ho[h];ho[h++]=null;var U=ho[h];ho[h++]=null;var z=ho[h];if(ho[h++]=null,x!==null&&U!==null){var ne=x.pending;ne===null?U.next=U:(U.next=ne.next,ne.next=U),x.pending=U}z!==0&&KP(y,U,z)}}function $y(A,h,y,x){ho[jh++]=A,ho[jh++]=h,ho[jh++]=y,ho[jh++]=x,jS|=x,A.lanes|=x,A=A.alternate,A!==null&&(A.lanes|=x)}function WS(A,h,y,x){return $y(A,h,y,x),ew(A)}function Wh(A,h){return $y(A,null,null,h),ew(A)}function KP(A,h,y){A.lanes|=y;var x=A.alternate;x!==null&&(x.lanes|=y);for(var U=!1,z=A.return;z!==null;)z.childLanes|=y,x=z.alternate,x!==null&&(x.childLanes|=y),z.tag===22&&(A=z.stateNode,A===null||A._visibility&1||(U=!0)),A=z,z=z.return;return A.tag===3?(z=A.stateNode,U&&h!==null&&(U=31-X(y),A=z.hiddenUpdates,x=A[U],x===null?A[U]=[h]:x.push(h),h.lane=y|536870912),z):null}function ew(A){if(50<Hg)throw Hg=0,JB=null,Error(n(185));for(var h=A.return;h!==null;)A=h,h=A.return;return A.tag===3?A.stateNode:null}var Kh={};function ate(A,h,y,x){this.tag=A,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(A,h,y,x){return new ate(A,h,y,x)}function KS(A){return A=A.prototype,!(!A||!A.isReactComponent)}function bc(A,h){var y=A.alternate;return y===null?(y=Fa(A.tag,h,A.key,A.mode),y.elementType=A.elementType,y.type=A.type,y.stateNode=A.stateNode,y.alternate=A,A.alternate=y):(y.pendingProps=h,y.type=A.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=A.flags&65011712,y.childLanes=A.childLanes,y.lanes=A.lanes,y.child=A.child,y.memoizedProps=A.memoizedProps,y.memoizedState=A.memoizedState,y.updateQueue=A.updateQueue,h=A.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=A.sibling,y.index=A.index,y.ref=A.ref,y.refCleanup=A.refCleanup,y}function qP(A,h){A.flags&=65011714;var y=A.alternate;return y===null?(A.childLanes=0,A.lanes=h,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=y.childLanes,A.lanes=y.lanes,A.child=y.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=y.memoizedProps,A.memoizedState=y.memoizedState,A.updateQueue=y.updateQueue,A.type=y.type,h=y.dependencies,A.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),A}function tw(A,h,y,x,U,z){var ne=0;if(x=A,typeof A=="function")KS(A)&&(ne=1);else if(typeof A=="string")ne=lne(A,y,K.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case O:return A=Fa(31,y,h,U),A.elementType=O,A.lanes=z,A;case v:return df(y.children,U,z,h);case m:ne=8,U|=24;break;case g:return A=Fa(12,y,h,U|2),A.elementType=g,A.lanes=z,A;case S:return A=Fa(13,y,h,U),A.elementType=S,A.lanes=z,A;case M:return A=Fa(19,y,h,U),A.elementType=M,A.lanes=z,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case w:case E:ne=10;break e;case b:ne=9;break e;case B:ne=11;break e;case I:ne=14;break e;case k:ne=16,x=null;break e}ne=29,y=Error(n(130,A===null?"null":typeof A,"")),x=null}return h=Fa(ne,y,h,U),h.elementType=A,h.type=x,h.lanes=z,h}function df(A,h,y,x){return A=Fa(7,A,x,h),A.lanes=y,A}function qS(A,h,y){return A=Fa(6,A,null,h),A.lanes=y,A}function YS(A,h,y){return h=Fa(4,A.children!==null?A.children:[],A.key,h),h.lanes=y,h.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},h}var qh=[],Yh=0,nw=null,rw=0,po=[],mo=0,pf=null,Ec=1,Sc="";function mf(A,h){qh[Yh++]=rw,qh[Yh++]=nw,nw=A,rw=h}function YP(A,h,y){po[mo++]=Ec,po[mo++]=Sc,po[mo++]=pf,pf=A;var x=Ec;A=Sc;var U=32-X(x)-1;x&=~(1<<U),y+=1;var z=32-X(h)+U;if(30<z){var ne=U-U%5;z=(x&(1<<ne)-1).toString(32),x>>=ne,U-=ne,Ec=1<<32-X(h)+U|y<<U|x,Sc=z+A}else Ec=1<<z|y<<U|x,Sc=A}function XS(A){A.return!==null&&(mf(A,1),YP(A,1,0))}function ZS(A){for(;A===nw;)nw=qh[--Yh],qh[Yh]=null,rw=qh[--Yh],qh[Yh]=null;for(;A===pf;)pf=po[--mo],po[mo]=null,Sc=po[--mo],po[mo]=null,Ec=po[--mo],po[mo]=null}var Gs=null,jr=null,Xn=!1,gf=null,Ml=!1,JS=Error(n(519));function vf(A){var h=Error(n(418,""));throw vg(fo(h,A)),JS}function XP(A){var h=A.stateNode,y=A.type,x=A.memoizedProps;switch(h[Xt]=A,h[jn]=x,y){case"dialog":bn("cancel",h),bn("close",h);break;case"iframe":case"object":case"embed":bn("load",h);break;case"video":case"audio":for(y=0;y<zg.length;y++)bn(zg[y],h);break;case"source":bn("error",h);break;case"img":case"image":case"link":bn("error",h),bn("load",h);break;case"details":bn("toggle",h);break;case"input":bn("invalid",h),Ph(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),ji(h);break;case"select":bn("invalid",h);break;case"textarea":bn("invalid",h),hP(h,x.value,x.defaultValue,x.children),ji(h)}y=x.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||x.suppressHydrationWarning===!0||h4(h.textContent,y)?(x.popover!=null&&(bn("beforetoggle",h),bn("toggle",h)),x.onScroll!=null&&bn("scroll",h),x.onScrollEnd!=null&&bn("scrollend",h),x.onClick!=null&&(h.onclick=Nw),h=!0):h=!1,h||vf(A)}function ZP(A){for(Gs=A.return;Gs;)switch(Gs.tag){case 5:case 13:Ml=!1;return;case 27:case 3:Ml=!0;return;default:Gs=Gs.return}}function mg(A){if(A!==Gs)return!1;if(!Xn)return ZP(A),Xn=!0,!1;var h=A.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=A.type,y=!(y!=="form"&&y!=="button")||dM(A.type,A.memoizedProps)),y=!y),y&&jr&&vf(A),ZP(A),h===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,h=0;A;){if(A.nodeType===8)if(y=A.data,y==="/$"){if(h===0){jr=Jo(A.nextSibling);break e}h--}else y!=="$"&&y!=="$!"&&y!=="$?"||h++;A=A.nextSibling}jr=null}}else h===27?(h=jr,eA(A.type)?(A=vM,vM=null,jr=A):jr=h):jr=Gs?Jo(A.stateNode.nextSibling):null;return!0}function gg(){jr=Gs=null,Xn=!1}function JP(){var A=gf;return A!==null&&(ca===null?ca=A:ca.push.apply(ca,A),gf=null),A}function vg(A){gf===null?gf=[A]:gf.push(A)}var $S=V(null),yf=null,Bc=null;function ku(A,h,y){H($S,h._currentValue),h._currentValue=y}function Mc(A){A._currentValue=$S.current,T($S)}function eB(A,h,y){for(;A!==null;){var x=A.alternate;if((A.childLanes&h)!==h?(A.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),A===y)break;A=A.return}}function tB(A,h,y,x){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var z=U.dependencies;if(z!==null){var ne=U.child;z=z.firstContext;e:for(;z!==null;){var ue=z;z=U;for(var Be=0;Be<h.length;Be++)if(ue.context===h[Be]){z.lanes|=y,ue=z.alternate,ue!==null&&(ue.lanes|=y),eB(z.return,y,A),x||(ne=null);break e}z=ue.next}}else if(U.tag===18){if(ne=U.return,ne===null)throw Error(n(341));ne.lanes|=y,z=ne.alternate,z!==null&&(z.lanes|=y),eB(ne,y,A),ne=null}else ne=U.child;if(ne!==null)ne.return=U;else for(ne=U;ne!==null;){if(ne===A){ne=null;break}if(U=ne.sibling,U!==null){U.return=ne.return,ne=U;break}ne=ne.return}U=ne}}function yg(A,h,y,x){A=null;for(var U=h,z=!1;U!==null;){if(!z){if((U.flags&524288)!==0)z=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ne=U.alternate;if(ne===null)throw Error(n(387));if(ne=ne.memoizedProps,ne!==null){var ue=U.type;Ua(U.pendingProps.value,ne.value)||(A!==null?A.push(ue):A=[ue])}}else if(U===oe.current){if(ne=U.alternate,ne===null)throw Error(n(387));ne.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(qg):A=[qg])}U=U.return}A!==null&&tB(h,A,y,x),h.flags|=262144}function iw(A){for(A=A.firstContext;A!==null;){if(!Ua(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function wf(A){yf=A,Bc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function xs(A){return $P(yf,A)}function sw(A,h){return yf===null&&wf(A),$P(A,h)}function $P(A,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},Bc===null){if(A===null)throw Error(n(308));Bc=h,A.dependencies={lanes:0,firstContext:h},A.flags|=524288}else Bc=Bc.next=h;return y}var ote=typeof AbortController<"u"?AbortController:function(){var A=[],h=this.signal={aborted:!1,addEventListener:function(y,x){A.push(x)}};this.abort=function(){h.aborted=!0,A.forEach(function(y){return y()})}},lte=r.unstable_scheduleCallback,cte=r.unstable_NormalPriority,Li={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nB(){return{controller:new ote,data:new Map,refCount:0}}function wg(A){A.refCount--,A.refCount===0&&lte(cte,function(){A.controller.abort()})}var _g=null,rB=0,Xh=0,Zh=null;function ute(A,h){if(_g===null){var y=_g=[];rB=0,Xh=sM(),Zh={status:"pending",value:void 0,then:function(x){y.push(x)}}}return rB++,h.then(e3,e3),h}function e3(){if(--rB===0&&_g!==null){Zh!==null&&(Zh.status="fulfilled");var A=_g;_g=null,Xh=0,Zh=null;for(var h=0;h<A.length;h++)(0,A[h])()}}function Ate(A,h){var y=[],x={status:"pending",value:null,reason:null,then:function(U){y.push(U)}};return A.then(function(){x.status="fulfilled",x.value=h;for(var U=0;U<y.length;U++)(0,y[U])(h)},function(U){for(x.status="rejected",x.reason=U,U=0;U<y.length;U++)(0,y[U])(void 0)}),x}var t3=L.S;L.S=function(A,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&ute(A,h),t3!==null&&t3(A,h)};var _f=V(null);function iB(){var A=_f.current;return A!==null?A:wr.pooledCache}function aw(A,h){h===null?H(_f,_f.current):H(_f,h.pool)}function n3(){var A=iB();return A===null?null:{parent:Li._currentValue,pool:A}}var xg=Error(n(460)),r3=Error(n(474)),ow=Error(n(542)),sB={then:function(){}};function i3(A){return A=A.status,A==="fulfilled"||A==="rejected"}function lw(){}function s3(A,h,y){switch(y=A[y],y===void 0?A.push(h):y!==h&&(h.then(lw,lw),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw A=h.reason,o3(A),A;default:if(typeof h.status=="string")h.then(lw,lw);else{if(A=wr,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=h,A.status="pending",A.then(function(x){if(h.status==="pending"){var U=h;U.status="fulfilled",U.value=x}},function(x){if(h.status==="pending"){var U=h;U.status="rejected",U.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw A=h.reason,o3(A),A}throw bg=h,xg}}var bg=null;function a3(){if(bg===null)throw Error(n(459));var A=bg;return bg=null,A}function o3(A){if(A===xg||A===ow)throw Error(n(483))}var Hu=!1;function aB(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oB(A,h){A=A.updateQueue,h.updateQueue===A&&(h.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Qu(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function zu(A,h,y){var x=A.updateQueue;if(x===null)return null;if(x=x.shared,(ir&2)!==0){var U=x.pending;return U===null?h.next=h:(h.next=U.next,U.next=h),x.pending=h,h=ew(A),KP(A,null,y),h}return $y(A,x,h,y),ew(A)}function Eg(A,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var x=h.lanes;x&=A.pendingLanes,y|=x,h.lanes=y,kt(A,y)}}function lB(A,h){var y=A.updateQueue,x=A.alternate;if(x!==null&&(x=x.updateQueue,y===x)){var U=null,z=null;if(y=y.firstBaseUpdate,y!==null){do{var ne={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};z===null?U=z=ne:z=z.next=ne,y=y.next}while(y!==null);z===null?U=z=h:z=z.next=h}else U=z=h;y={baseState:x.baseState,firstBaseUpdate:U,lastBaseUpdate:z,shared:x.shared,callbacks:x.callbacks},A.updateQueue=y;return}A=y.lastBaseUpdate,A===null?y.firstBaseUpdate=h:A.next=h,y.lastBaseUpdate=h}var cB=!1;function Sg(){if(cB){var A=Zh;if(A!==null)throw A}}function Bg(A,h,y,x){cB=!1;var U=A.updateQueue;Hu=!1;var z=U.firstBaseUpdate,ne=U.lastBaseUpdate,ue=U.shared.pending;if(ue!==null){U.shared.pending=null;var Be=ue,ke=Be.next;Be.next=null,ne===null?z=ke:ne.next=ke,ne=Be;var qe=A.alternate;qe!==null&&(qe=qe.updateQueue,ue=qe.lastBaseUpdate,ue!==ne&&(ue===null?qe.firstBaseUpdate=ke:ue.next=ke,qe.lastBaseUpdate=Be))}if(z!==null){var $e=U.baseState;ne=0,qe=ke=Be=null,ue=z;do{var Qe=ue.lane&-536870913,Ge=Qe!==ue.lane;if(Ge?(Qn&Qe)===Qe:(x&Qe)===Qe){Qe!==0&&Qe===Xh&&(cB=!0),qe!==null&&(qe=qe.next={lane:0,tag:ue.tag,payload:ue.payload,callback:null,next:null});e:{var Zt=A,zt=ue;Qe=h;var hr=y;switch(zt.tag){case 1:if(Zt=zt.payload,typeof Zt=="function"){$e=Zt.call(hr,$e,Qe);break e}$e=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=zt.payload,Qe=typeof Zt=="function"?Zt.call(hr,$e,Qe):Zt,Qe==null)break e;$e=u({},$e,Qe);break e;case 2:Hu=!0}}Qe=ue.callback,Qe!==null&&(A.flags|=64,Ge&&(A.flags|=8192),Ge=U.callbacks,Ge===null?U.callbacks=[Qe]:Ge.push(Qe))}else Ge={lane:Qe,tag:ue.tag,payload:ue.payload,callback:ue.callback,next:null},qe===null?(ke=qe=Ge,Be=$e):qe=qe.next=Ge,ne|=Qe;if(ue=ue.next,ue===null){if(ue=U.shared.pending,ue===null)break;Ge=ue,ue=Ge.next,Ge.next=null,U.lastBaseUpdate=Ge,U.shared.pending=null}}while(!0);qe===null&&(Be=$e),U.baseState=Be,U.firstBaseUpdate=ke,U.lastBaseUpdate=qe,z===null&&(U.shared.lanes=0),Xu|=ne,A.lanes=ne,A.memoizedState=$e}}function l3(A,h){if(typeof A!="function")throw Error(n(191,A));A.call(h)}function c3(A,h){var y=A.callbacks;if(y!==null)for(A.callbacks=null,A=0;A<y.length;A++)l3(y[A],h)}var Jh=V(null),cw=V(0);function u3(A,h){A=Lc,H(cw,A),H(Jh,h),Lc=A|h.baseLanes}function uB(){H(cw,Lc),H(Jh,Jh.current)}function AB(){Lc=cw.current,T(Jh),T(cw)}var Vu=0,fn=null,Ar=null,yi=null,uw=!1,$h=!1,xf=!1,Aw=0,Mg=0,ed=null,fte=0;function ai(){throw Error(n(321))}function fB(A,h){if(h===null)return!1;for(var y=0;y<h.length&&y<A.length;y++)if(!Ua(A[y],h[y]))return!1;return!0}function hB(A,h,y,x,U,z){return Vu=z,fn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,L.H=A===null||A.memoizedState===null?K3:q3,xf=!1,z=y(x,U),xf=!1,$h&&(z=f3(h,y,x,U)),A3(A),z}function A3(A){L.H=gw;var h=Ar!==null&&Ar.next!==null;if(Vu=0,yi=Ar=fn=null,uw=!1,Mg=0,ed=null,h)throw Error(n(300));A===null||Wi||(A=A.dependencies,A!==null&&iw(A)&&(Wi=!0))}function f3(A,h,y,x){fn=A;var U=0;do{if($h&&(ed=null),Mg=0,$h=!1,25<=U)throw Error(n(301));if(U+=1,yi=Ar=null,A.updateQueue!=null){var z=A.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}L.H=yte,z=h(y,x)}while($h);return z}function hte(){var A=L.H,h=A.useState()[0];return h=typeof h.then=="function"?Cg(h):h,A=A.useState()[0],(Ar!==null?Ar.memoizedState:null)!==A&&(fn.flags|=1024),h}function dB(){var A=Aw!==0;return Aw=0,A}function pB(A,h,y){h.updateQueue=A.updateQueue,h.flags&=-2053,A.lanes&=~y}function mB(A){if(uw){for(A=A.memoizedState;A!==null;){var h=A.queue;h!==null&&(h.pending=null),A=A.next}uw=!1}Vu=0,yi=Ar=fn=null,$h=!1,Mg=Aw=0,ed=null}function oa(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?fn.memoizedState=yi=A:yi=yi.next=A,yi}function wi(){if(Ar===null){var A=fn.alternate;A=A!==null?A.memoizedState:null}else A=Ar.next;var h=yi===null?fn.memoizedState:yi.next;if(h!==null)yi=h,Ar=A;else{if(A===null)throw fn.alternate===null?Error(n(467)):Error(n(310));Ar=A,A={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},yi===null?fn.memoizedState=yi=A:yi=yi.next=A}return yi}function gB(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cg(A){var h=Mg;return Mg+=1,ed===null&&(ed=[]),A=s3(ed,A,h),h=fn,(yi===null?h.memoizedState:yi.next)===null&&(h=h.alternate,L.H=h===null||h.memoizedState===null?K3:q3),A}function fw(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Cg(A);if(A.$$typeof===E)return xs(A)}throw Error(n(438,String(A)))}function vB(A){var h=null,y=fn.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var x=fn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(U){return U.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=gB(),fn.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(A),x=0;x<A;x++)y[x]=C;return h.index++,y}function Cc(A,h){return typeof h=="function"?h(A):h}function hw(A){var h=wi();return yB(h,Ar,A)}function yB(A,h,y){var x=A.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=y;var U=A.baseQueue,z=x.pending;if(z!==null){if(U!==null){var ne=U.next;U.next=z.next,z.next=ne}h.baseQueue=U=z,x.pending=null}if(z=A.baseState,U===null)A.memoizedState=z;else{h=U.next;var ue=ne=null,Be=null,ke=h,qe=!1;do{var $e=ke.lane&-536870913;if($e!==ke.lane?(Qn&$e)===$e:(Vu&$e)===$e){var Qe=ke.revertLane;if(Qe===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),$e===Xh&&(qe=!0);else if((Vu&Qe)===Qe){ke=ke.next,Qe===Xh&&(qe=!0);continue}else $e={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Be===null?(ue=Be=$e,ne=z):Be=Be.next=$e,fn.lanes|=Qe,Xu|=Qe;$e=ke.action,xf&&y(z,$e),z=ke.hasEagerState?ke.eagerState:y(z,$e)}else Qe={lane:$e,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Be===null?(ue=Be=Qe,ne=z):Be=Be.next=Qe,fn.lanes|=$e,Xu|=$e;ke=ke.next}while(ke!==null&&ke!==h);if(Be===null?ne=z:Be.next=ue,!Ua(z,A.memoizedState)&&(Wi=!0,qe&&(y=Zh,y!==null)))throw y;A.memoizedState=z,A.baseState=ne,A.baseQueue=Be,x.lastRenderedState=z}return U===null&&(x.lanes=0),[A.memoizedState,x.dispatch]}function wB(A){var h=wi(),y=h.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=A;var x=y.dispatch,U=y.pending,z=h.memoizedState;if(U!==null){y.pending=null;var ne=U=U.next;do z=A(z,ne.action),ne=ne.next;while(ne!==U);Ua(z,h.memoizedState)||(Wi=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),y.lastRenderedState=z}return[z,x]}function h3(A,h,y){var x=fn,U=wi(),z=Xn;if(z){if(y===void 0)throw Error(n(407));y=y()}else y=h();var ne=!Ua((Ar||U).memoizedState,y);ne&&(U.memoizedState=y,Wi=!0),U=U.queue;var ue=m3.bind(null,x,U,A);if(Tg(2048,8,ue,[A]),U.getSnapshot!==h||ne||yi!==null&&yi.memoizedState.tag&1){if(x.flags|=2048,td(9,dw(),p3.bind(null,x,U,y,h),null),wr===null)throw Error(n(349));z||(Vu&124)!==0||d3(x,h,y)}return y}function d3(A,h,y){A.flags|=16384,A={getSnapshot:h,value:y},h=fn.updateQueue,h===null?(h=gB(),fn.updateQueue=h,h.stores=[A]):(y=h.stores,y===null?h.stores=[A]:y.push(A))}function p3(A,h,y,x){h.value=y,h.getSnapshot=x,g3(h)&&v3(A)}function m3(A,h,y){return y(function(){g3(h)&&v3(A)})}function g3(A){var h=A.getSnapshot;A=A.value;try{var y=h();return!Ua(A,y)}catch{return!0}}function v3(A){var h=Wh(A,2);h!==null&&Pa(h,A,2)}function _B(A){var h=oa();if(typeof A=="function"){var y=A;if(A=y(),xf){j(!0);try{y()}finally{j(!1)}}}return h.memoizedState=h.baseState=A,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:A},h}function y3(A,h,y,x){return A.baseState=y,yB(A,Ar,typeof x=="function"?x:Cc)}function dte(A,h,y,x,U){if(mw(A))throw Error(n(485));if(A=h.action,A!==null){var z={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ne){z.listeners.push(ne)}};L.T!==null?y(!0):z.isTransition=!1,x(z),y=h.pending,y===null?(z.next=h.pending=z,w3(h,z)):(z.next=y.next,h.pending=y.next=z)}}function w3(A,h){var y=h.action,x=h.payload,U=A.state;if(h.isTransition){var z=L.T,ne={};L.T=ne;try{var ue=y(U,x),Be=L.S;Be!==null&&Be(ne,ue),_3(A,h,ue)}catch(ke){xB(A,h,ke)}finally{L.T=z}}else try{z=y(U,x),_3(A,h,z)}catch(ke){xB(A,h,ke)}}function _3(A,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(x){x3(A,h,x)},function(x){return xB(A,h,x)}):x3(A,h,y)}function x3(A,h,y){h.status="fulfilled",h.value=y,b3(h),A.state=y,h=A.pending,h!==null&&(y=h.next,y===h?A.pending=null:(y=y.next,h.next=y,w3(A,y)))}function xB(A,h,y){var x=A.pending;if(A.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=y,b3(h),h=h.next;while(h!==x)}A.action=null}function b3(A){A=A.listeners;for(var h=0;h<A.length;h++)(0,A[h])()}function E3(A,h){return h}function S3(A,h){if(Xn){var y=wr.formState;if(y!==null){e:{var x=fn;if(Xn){if(jr){t:{for(var U=jr,z=Ml;U.nodeType!==8;){if(!z){U=null;break t}if(U=Jo(U.nextSibling),U===null){U=null;break t}}z=U.data,U=z==="F!"||z==="F"?U:null}if(U){jr=Jo(U.nextSibling),x=U.data==="F!";break e}}vf(x)}x=!1}x&&(h=y[0])}}return y=oa(),y.memoizedState=y.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E3,lastRenderedState:h},y.queue=x,y=G3.bind(null,fn,x),x.dispatch=y,x=_B(!1),z=MB.bind(null,fn,!1,x.queue),x=oa(),U={state:h,dispatch:null,action:A,pending:null},x.queue=U,y=dte.bind(null,fn,U,z,y),U.dispatch=y,x.memoizedState=A,[h,y,!1]}function B3(A){var h=wi();return M3(h,Ar,A)}function M3(A,h,y){if(h=yB(A,h,E3)[0],A=hw(Cc)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=Cg(h)}catch(ne){throw ne===xg?ow:ne}else x=h;h=wi();var U=h.queue,z=U.dispatch;return y!==h.memoizedState&&(fn.flags|=2048,td(9,dw(),pte.bind(null,U,y),null)),[x,z,A]}function pte(A,h){A.action=h}function C3(A){var h=wi(),y=Ar;if(y!==null)return M3(h,y,A);wi(),h=h.memoizedState,y=wi();var x=y.queue.dispatch;return y.memoizedState=A,[h,x,!1]}function td(A,h,y,x){return A={tag:A,create:y,deps:x,inst:h,next:null},h=fn.updateQueue,h===null&&(h=gB(),fn.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=A.next=A:(x=y.next,y.next=A,A.next=x,h.lastEffect=A),A}function dw(){return{destroy:void 0,resource:void 0}}function T3(){return wi().memoizedState}function pw(A,h,y,x){var U=oa();x=x===void 0?null:x,fn.flags|=A,U.memoizedState=td(1|h,dw(),y,x)}function Tg(A,h,y,x){var U=wi();x=x===void 0?null:x;var z=U.memoizedState.inst;Ar!==null&&x!==null&&fB(x,Ar.memoizedState.deps)?U.memoizedState=td(h,z,y,x):(fn.flags|=A,U.memoizedState=td(1|h,z,y,x))}function R3(A,h){pw(8390656,8,A,h)}function I3(A,h){Tg(2048,8,A,h)}function U3(A,h){return Tg(4,2,A,h)}function F3(A,h){return Tg(4,4,A,h)}function L3(A,h){if(typeof h=="function"){A=A();var y=h(A);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return A=A(),h.current=A,function(){h.current=null}}function D3(A,h,y){y=y!=null?y.concat([A]):null,Tg(4,4,L3.bind(null,h,A),y)}function bB(){}function O3(A,h){var y=wi();h=h===void 0?null:h;var x=y.memoizedState;return h!==null&&fB(h,x[1])?x[0]:(y.memoizedState=[A,h],A)}function N3(A,h){var y=wi();h=h===void 0?null:h;var x=y.memoizedState;if(h!==null&&fB(h,x[1]))return x[0];if(x=A(),xf){j(!0);try{A()}finally{j(!1)}}return y.memoizedState=[x,h],x}function EB(A,h,y){return y===void 0||(Vu&1073741824)!==0?A.memoizedState=h:(A.memoizedState=y,A=Hk(),fn.lanes|=A,Xu|=A,y)}function P3(A,h,y,x){return Ua(y,h)?y:Jh.current!==null?(A=EB(A,y,x),Ua(A,h)||(Wi=!0),A):(Vu&42)===0?(Wi=!0,A.memoizedState=y):(A=Hk(),fn.lanes|=A,Xu|=A,h)}function k3(A,h,y,x,U){var z=Q.p;Q.p=z!==0&&8>z?z:8;var ne=L.T,ue={};L.T=ue,MB(A,!1,h,y);try{var Be=U(),ke=L.S;if(ke!==null&&ke(ue,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var qe=Ate(Be,x);Rg(A,h,qe,Na(A))}else Rg(A,h,x,Na(A))}catch($e){Rg(A,h,{then:function(){},status:"rejected",reason:$e},Na())}finally{Q.p=z,L.T=ne}}function mte(){}function SB(A,h,y,x){if(A.tag!==5)throw Error(n(476));var U=H3(A).queue;k3(A,U,h,G,y===null?mte:function(){return Q3(A),y(x)})}function H3(A){var h=A.memoizedState;if(h!==null)return h;h={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:G},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:y},next:null},A.memoizedState=h,A=A.alternate,A!==null&&(A.memoizedState=h),h}function Q3(A){var h=H3(A).next.queue;Rg(A,h,{},Na())}function BB(){return xs(qg)}function z3(){return wi().memoizedState}function V3(){return wi().memoizedState}function gte(A){for(var h=A.return;h!==null;){switch(h.tag){case 24:case 3:var y=Na();A=Qu(y);var x=zu(h,A,y);x!==null&&(Pa(x,h,y),Eg(x,h,y)),h={cache:nB()},A.payload=h;return}h=h.return}}function vte(A,h,y){var x=Na();y={lane:x,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},mw(A)?j3(h,y):(y=WS(A,h,y,x),y!==null&&(Pa(y,A,x),W3(y,h,x)))}function G3(A,h,y){var x=Na();Rg(A,h,y,x)}function Rg(A,h,y,x){var U={lane:x,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(mw(A))j3(h,U);else{var z=A.alternate;if(A.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var ne=h.lastRenderedState,ue=z(ne,y);if(U.hasEagerState=!0,U.eagerState=ue,Ua(ue,ne))return $y(A,h,U,0),wr===null&&Jy(),!1}catch{}finally{}if(y=WS(A,h,U,x),y!==null)return Pa(y,A,x),W3(y,h,x),!0}return!1}function MB(A,h,y,x){if(x={lane:2,revertLane:sM(),action:x,hasEagerState:!1,eagerState:null,next:null},mw(A)){if(h)throw Error(n(479))}else h=WS(A,y,x,2),h!==null&&Pa(h,A,2)}function mw(A){var h=A.alternate;return A===fn||h!==null&&h===fn}function j3(A,h){$h=uw=!0;var y=A.pending;y===null?h.next=h:(h.next=y.next,y.next=h),A.pending=h}function W3(A,h,y){if((y&4194048)!==0){var x=h.lanes;x&=A.pendingLanes,y|=x,h.lanes=y,kt(A,y)}}var gw={readContext:xs,use:fw,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai,useHostTransitionStatus:ai,useFormState:ai,useActionState:ai,useOptimistic:ai,useMemoCache:ai,useCacheRefresh:ai},K3={readContext:xs,use:fw,useCallback:function(A,h){return oa().memoizedState=[A,h===void 0?null:h],A},useContext:xs,useEffect:R3,useImperativeHandle:function(A,h,y){y=y!=null?y.concat([A]):null,pw(4194308,4,L3.bind(null,h,A),y)},useLayoutEffect:function(A,h){return pw(4194308,4,A,h)},useInsertionEffect:function(A,h){pw(4,2,A,h)},useMemo:function(A,h){var y=oa();h=h===void 0?null:h;var x=A();if(xf){j(!0);try{A()}finally{j(!1)}}return y.memoizedState=[x,h],x},useReducer:function(A,h,y){var x=oa();if(y!==void 0){var U=y(h);if(xf){j(!0);try{y(h)}finally{j(!1)}}}else U=h;return x.memoizedState=x.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},x.queue=A,A=A.dispatch=vte.bind(null,fn,A),[x.memoizedState,A]},useRef:function(A){var h=oa();return A={current:A},h.memoizedState=A},useState:function(A){A=_B(A);var h=A.queue,y=G3.bind(null,fn,h);return h.dispatch=y,[A.memoizedState,y]},useDebugValue:bB,useDeferredValue:function(A,h){var y=oa();return EB(y,A,h)},useTransition:function(){var A=_B(!1);return A=k3.bind(null,fn,A.queue,!0,!1),oa().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,h,y){var x=fn,U=oa();if(Xn){if(y===void 0)throw Error(n(407));y=y()}else{if(y=h(),wr===null)throw Error(n(349));(Qn&124)!==0||d3(x,h,y)}U.memoizedState=y;var z={value:y,getSnapshot:h};return U.queue=z,R3(m3.bind(null,x,z,A),[A]),x.flags|=2048,td(9,dw(),p3.bind(null,x,z,y,h),null),y},useId:function(){var A=oa(),h=wr.identifierPrefix;if(Xn){var y=Sc,x=Ec;y=(x&~(1<<32-X(x)-1)).toString(32)+y,h="«"+h+"R"+y,y=Aw++,0<y&&(h+="H"+y.toString(32)),h+="»"}else y=fte++,h="«"+h+"r"+y.toString(32)+"»";return A.memoizedState=h},useHostTransitionStatus:BB,useFormState:S3,useActionState:S3,useOptimistic:function(A){var h=oa();h.memoizedState=h.baseState=A;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=MB.bind(null,fn,!0,y),y.dispatch=h,[A,h]},useMemoCache:vB,useCacheRefresh:function(){return oa().memoizedState=gte.bind(null,fn)}},q3={readContext:xs,use:fw,useCallback:O3,useContext:xs,useEffect:I3,useImperativeHandle:D3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:N3,useReducer:hw,useRef:T3,useState:function(){return hw(Cc)},useDebugValue:bB,useDeferredValue:function(A,h){var y=wi();return P3(y,Ar.memoizedState,A,h)},useTransition:function(){var A=hw(Cc)[0],h=wi().memoizedState;return[typeof A=="boolean"?A:Cg(A),h]},useSyncExternalStore:h3,useId:z3,useHostTransitionStatus:BB,useFormState:B3,useActionState:B3,useOptimistic:function(A,h){var y=wi();return y3(y,Ar,A,h)},useMemoCache:vB,useCacheRefresh:V3},yte={readContext:xs,use:fw,useCallback:O3,useContext:xs,useEffect:I3,useImperativeHandle:D3,useInsertionEffect:U3,useLayoutEffect:F3,useMemo:N3,useReducer:wB,useRef:T3,useState:function(){return wB(Cc)},useDebugValue:bB,useDeferredValue:function(A,h){var y=wi();return Ar===null?EB(y,A,h):P3(y,Ar.memoizedState,A,h)},useTransition:function(){var A=wB(Cc)[0],h=wi().memoizedState;return[typeof A=="boolean"?A:Cg(A),h]},useSyncExternalStore:h3,useId:z3,useHostTransitionStatus:BB,useFormState:C3,useActionState:C3,useOptimistic:function(A,h){var y=wi();return Ar!==null?y3(y,Ar,A,h):(y.baseState=A,[A,y.queue.dispatch])},useMemoCache:vB,useCacheRefresh:V3},nd=null,Ig=0;function vw(A){var h=Ig;return Ig+=1,nd===null&&(nd=[]),s3(nd,A,h)}function Ug(A,h){h=h.props.ref,A.ref=h!==void 0?h:null}function yw(A,h){throw h.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(h),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":A)))}function Y3(A){var h=A._init;return h(A._payload)}function X3(A){function h(Le,Ie){if(A){var Oe=Le.deletions;Oe===null?(Le.deletions=[Ie],Le.flags|=16):Oe.push(Ie)}}function y(Le,Ie){if(!A)return null;for(;Ie!==null;)h(Le,Ie),Ie=Ie.sibling;return null}function x(Le){for(var Ie=new Map;Le!==null;)Le.key!==null?Ie.set(Le.key,Le):Ie.set(Le.index,Le),Le=Le.sibling;return Ie}function U(Le,Ie){return Le=bc(Le,Ie),Le.index=0,Le.sibling=null,Le}function z(Le,Ie,Oe){return Le.index=Oe,A?(Oe=Le.alternate,Oe!==null?(Oe=Oe.index,Oe<Ie?(Le.flags|=67108866,Ie):Oe):(Le.flags|=67108866,Ie)):(Le.flags|=1048576,Ie)}function ne(Le){return A&&Le.alternate===null&&(Le.flags|=67108866),Le}function ue(Le,Ie,Oe,Xe){return Ie===null||Ie.tag!==6?(Ie=qS(Oe,Le.mode,Xe),Ie.return=Le,Ie):(Ie=U(Ie,Oe),Ie.return=Le,Ie)}function Be(Le,Ie,Oe,Xe){var Bt=Oe.type;return Bt===v?qe(Le,Ie,Oe.props.children,Xe,Oe.key):Ie!==null&&(Ie.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===k&&Y3(Bt)===Ie.type)?(Ie=U(Ie,Oe.props),Ug(Ie,Oe),Ie.return=Le,Ie):(Ie=tw(Oe.type,Oe.key,Oe.props,null,Le.mode,Xe),Ug(Ie,Oe),Ie.return=Le,Ie)}function ke(Le,Ie,Oe,Xe){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Oe.containerInfo||Ie.stateNode.implementation!==Oe.implementation?(Ie=YS(Oe,Le.mode,Xe),Ie.return=Le,Ie):(Ie=U(Ie,Oe.children||[]),Ie.return=Le,Ie)}function qe(Le,Ie,Oe,Xe,Bt){return Ie===null||Ie.tag!==7?(Ie=df(Oe,Le.mode,Xe,Bt),Ie.return=Le,Ie):(Ie=U(Ie,Oe),Ie.return=Le,Ie)}function $e(Le,Ie,Oe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=qS(""+Ie,Le.mode,Oe),Ie.return=Le,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case d:return Oe=tw(Ie.type,Ie.key,Ie.props,null,Le.mode,Oe),Ug(Oe,Ie),Oe.return=Le,Oe;case p:return Ie=YS(Ie,Le.mode,Oe),Ie.return=Le,Ie;case k:var Xe=Ie._init;return Ie=Xe(Ie._payload),$e(Le,Ie,Oe)}if(R(Ie)||D(Ie))return Ie=df(Ie,Le.mode,Oe,null),Ie.return=Le,Ie;if(typeof Ie.then=="function")return $e(Le,vw(Ie),Oe);if(Ie.$$typeof===E)return $e(Le,sw(Le,Ie),Oe);yw(Le,Ie)}return null}function Qe(Le,Ie,Oe,Xe){var Bt=Ie!==null?Ie.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Bt!==null?null:ue(Le,Ie,""+Oe,Xe);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case d:return Oe.key===Bt?Be(Le,Ie,Oe,Xe):null;case p:return Oe.key===Bt?ke(Le,Ie,Oe,Xe):null;case k:return Bt=Oe._init,Oe=Bt(Oe._payload),Qe(Le,Ie,Oe,Xe)}if(R(Oe)||D(Oe))return Bt!==null?null:qe(Le,Ie,Oe,Xe,null);if(typeof Oe.then=="function")return Qe(Le,Ie,vw(Oe),Xe);if(Oe.$$typeof===E)return Qe(Le,Ie,sw(Le,Oe),Xe);yw(Le,Oe)}return null}function Ge(Le,Ie,Oe,Xe,Bt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Le=Le.get(Oe)||null,ue(Ie,Le,""+Xe,Bt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case d:return Le=Le.get(Xe.key===null?Oe:Xe.key)||null,Be(Ie,Le,Xe,Bt);case p:return Le=Le.get(Xe.key===null?Oe:Xe.key)||null,ke(Ie,Le,Xe,Bt);case k:var gn=Xe._init;return Xe=gn(Xe._payload),Ge(Le,Ie,Oe,Xe,Bt)}if(R(Xe)||D(Xe))return Le=Le.get(Oe)||null,qe(Ie,Le,Xe,Bt,null);if(typeof Xe.then=="function")return Ge(Le,Ie,Oe,vw(Xe),Bt);if(Xe.$$typeof===E)return Ge(Le,Ie,Oe,sw(Ie,Xe),Bt);yw(Ie,Xe)}return null}function Zt(Le,Ie,Oe,Xe){for(var Bt=null,gn=null,Ft=Ie,jt=Ie=0,qi=null;Ft!==null&&jt<Oe.length;jt++){Ft.index>jt?(qi=Ft,Ft=null):qi=Ft.sibling;var Kn=Qe(Le,Ft,Oe[jt],Xe);if(Kn===null){Ft===null&&(Ft=qi);break}A&&Ft&&Kn.alternate===null&&h(Le,Ft),Ie=z(Kn,Ie,jt),gn===null?Bt=Kn:gn.sibling=Kn,gn=Kn,Ft=qi}if(jt===Oe.length)return y(Le,Ft),Xn&&mf(Le,jt),Bt;if(Ft===null){for(;jt<Oe.length;jt++)Ft=$e(Le,Oe[jt],Xe),Ft!==null&&(Ie=z(Ft,Ie,jt),gn===null?Bt=Ft:gn.sibling=Ft,gn=Ft);return Xn&&mf(Le,jt),Bt}for(Ft=x(Ft);jt<Oe.length;jt++)qi=Ge(Ft,Le,jt,Oe[jt],Xe),qi!==null&&(A&&qi.alternate!==null&&Ft.delete(qi.key===null?jt:qi.key),Ie=z(qi,Ie,jt),gn===null?Bt=qi:gn.sibling=qi,gn=qi);return A&&Ft.forEach(function(sA){return h(Le,sA)}),Xn&&mf(Le,jt),Bt}function zt(Le,Ie,Oe,Xe){if(Oe==null)throw Error(n(151));for(var Bt=null,gn=null,Ft=Ie,jt=Ie=0,qi=null,Kn=Oe.next();Ft!==null&&!Kn.done;jt++,Kn=Oe.next()){Ft.index>jt?(qi=Ft,Ft=null):qi=Ft.sibling;var sA=Qe(Le,Ft,Kn.value,Xe);if(sA===null){Ft===null&&(Ft=qi);break}A&&Ft&&sA.alternate===null&&h(Le,Ft),Ie=z(sA,Ie,jt),gn===null?Bt=sA:gn.sibling=sA,gn=sA,Ft=qi}if(Kn.done)return y(Le,Ft),Xn&&mf(Le,jt),Bt;if(Ft===null){for(;!Kn.done;jt++,Kn=Oe.next())Kn=$e(Le,Kn.value,Xe),Kn!==null&&(Ie=z(Kn,Ie,jt),gn===null?Bt=Kn:gn.sibling=Kn,gn=Kn);return Xn&&mf(Le,jt),Bt}for(Ft=x(Ft);!Kn.done;jt++,Kn=Oe.next())Kn=Ge(Ft,Le,jt,Kn.value,Xe),Kn!==null&&(A&&Kn.alternate!==null&&Ft.delete(Kn.key===null?jt:Kn.key),Ie=z(Kn,Ie,jt),gn===null?Bt=Kn:gn.sibling=Kn,gn=Kn);return A&&Ft.forEach(function(wne){return h(Le,wne)}),Xn&&mf(Le,jt),Bt}function hr(Le,Ie,Oe,Xe){if(typeof Oe=="object"&&Oe!==null&&Oe.type===v&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case d:e:{for(var Bt=Oe.key;Ie!==null;){if(Ie.key===Bt){if(Bt=Oe.type,Bt===v){if(Ie.tag===7){y(Le,Ie.sibling),Xe=U(Ie,Oe.props.children),Xe.return=Le,Le=Xe;break e}}else if(Ie.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===k&&Y3(Bt)===Ie.type){y(Le,Ie.sibling),Xe=U(Ie,Oe.props),Ug(Xe,Oe),Xe.return=Le,Le=Xe;break e}y(Le,Ie);break}else h(Le,Ie);Ie=Ie.sibling}Oe.type===v?(Xe=df(Oe.props.children,Le.mode,Xe,Oe.key),Xe.return=Le,Le=Xe):(Xe=tw(Oe.type,Oe.key,Oe.props,null,Le.mode,Xe),Ug(Xe,Oe),Xe.return=Le,Le=Xe)}return ne(Le);case p:e:{for(Bt=Oe.key;Ie!==null;){if(Ie.key===Bt)if(Ie.tag===4&&Ie.stateNode.containerInfo===Oe.containerInfo&&Ie.stateNode.implementation===Oe.implementation){y(Le,Ie.sibling),Xe=U(Ie,Oe.children||[]),Xe.return=Le,Le=Xe;break e}else{y(Le,Ie);break}else h(Le,Ie);Ie=Ie.sibling}Xe=YS(Oe,Le.mode,Xe),Xe.return=Le,Le=Xe}return ne(Le);case k:return Bt=Oe._init,Oe=Bt(Oe._payload),hr(Le,Ie,Oe,Xe)}if(R(Oe))return Zt(Le,Ie,Oe,Xe);if(D(Oe)){if(Bt=D(Oe),typeof Bt!="function")throw Error(n(150));return Oe=Bt.call(Oe),zt(Le,Ie,Oe,Xe)}if(typeof Oe.then=="function")return hr(Le,Ie,vw(Oe),Xe);if(Oe.$$typeof===E)return hr(Le,Ie,sw(Le,Oe),Xe);yw(Le,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,Ie!==null&&Ie.tag===6?(y(Le,Ie.sibling),Xe=U(Ie,Oe),Xe.return=Le,Le=Xe):(y(Le,Ie),Xe=qS(Oe,Le.mode,Xe),Xe.return=Le,Le=Xe),ne(Le)):y(Le,Ie)}return function(Le,Ie,Oe,Xe){try{Ig=0;var Bt=hr(Le,Ie,Oe,Xe);return nd=null,Bt}catch(Ft){if(Ft===xg||Ft===ow)throw Ft;var gn=Fa(29,Ft,null,Le.mode);return gn.lanes=Xe,gn.return=Le,gn}finally{}}}var rd=X3(!0),Z3=X3(!1),go=V(null),Cl=null;function Gu(A){var h=A.alternate;H(Di,Di.current&1),H(go,A),Cl===null&&(h===null||Jh.current!==null||h.memoizedState!==null)&&(Cl=A)}function J3(A){if(A.tag===22){if(H(Di,Di.current),H(go,A),Cl===null){var h=A.alternate;h!==null&&h.memoizedState!==null&&(Cl=A)}}else ju()}function ju(){H(Di,Di.current),H(go,go.current)}function Tc(A){T(go),Cl===A&&(Cl=null),T(Di)}var Di=V(0);function ww(A){for(var h=A;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||gM(y)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===A)break;for(;h.sibling===null;){if(h.return===null||h.return===A)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function CB(A,h,y,x){h=A.memoizedState,y=y(x,h),y=y==null?h:u({},h,y),A.memoizedState=y,A.lanes===0&&(A.updateQueue.baseState=y)}var TB={enqueueSetState:function(A,h,y){A=A._reactInternals;var x=Na(),U=Qu(x);U.payload=h,y!=null&&(U.callback=y),h=zu(A,U,x),h!==null&&(Pa(h,A,x),Eg(h,A,x))},enqueueReplaceState:function(A,h,y){A=A._reactInternals;var x=Na(),U=Qu(x);U.tag=1,U.payload=h,y!=null&&(U.callback=y),h=zu(A,U,x),h!==null&&(Pa(h,A,x),Eg(h,A,x))},enqueueForceUpdate:function(A,h){A=A._reactInternals;var y=Na(),x=Qu(y);x.tag=2,h!=null&&(x.callback=h),h=zu(A,x,y),h!==null&&(Pa(h,A,y),Eg(h,A,y))}};function $3(A,h,y,x,U,z,ne){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(x,z,ne):h.prototype&&h.prototype.isPureReactComponent?!dg(y,x)||!dg(U,z):!0}function ek(A,h,y,x){A=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,x),h.state!==A&&TB.enqueueReplaceState(h,h.state,null)}function bf(A,h){var y=h;if("ref"in h){y={};for(var x in h)x!=="ref"&&(y[x]=h[x])}if(A=A.defaultProps){y===h&&(y=u({},y));for(var U in A)y[U]===void 0&&(y[U]=A[U])}return y}var _w=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function tk(A){_w(A)}function nk(A){console.error(A)}function rk(A){_w(A)}function xw(A,h){try{var y=A.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function ik(A,h,y){try{var x=A.onCaughtError;x(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function RB(A,h,y){return y=Qu(y),y.tag=3,y.payload={element:null},y.callback=function(){xw(A,h)},y}function sk(A){return A=Qu(A),A.tag=3,A}function ak(A,h,y,x){var U=y.type.getDerivedStateFromError;if(typeof U=="function"){var z=x.value;A.payload=function(){return U(z)},A.callback=function(){ik(h,y,x)}}var ne=y.stateNode;ne!==null&&typeof ne.componentDidCatch=="function"&&(A.callback=function(){ik(h,y,x),typeof U!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var ue=x.stack;this.componentDidCatch(x.value,{componentStack:ue!==null?ue:""})})}function wte(A,h,y,x,U){if(y.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=y.alternate,h!==null&&yg(h,y,U,!0),y=go.current,y!==null){switch(y.tag){case 13:return Cl===null?eM():y.alternate===null&&Wr===0&&(Wr=3),y.flags&=-257,y.flags|=65536,y.lanes=U,x===sB?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([x]):h.add(x),nM(A,x,U)),!1;case 22:return y.flags|=65536,x===sB?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([x]):y.add(x)),nM(A,x,U)),!1}throw Error(n(435,y.tag))}return nM(A,x,U),eM(),!1}if(Xn)return h=go.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=U,x!==JS&&(A=Error(n(422),{cause:x}),vg(fo(A,y)))):(x!==JS&&(h=Error(n(423),{cause:x}),vg(fo(h,y))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,x=fo(x,y),U=RB(A.stateNode,x,U),lB(A,U),Wr!==4&&(Wr=2)),!1;var z=Error(n(520),{cause:x});if(z=fo(z,y),kg===null?kg=[z]:kg.push(z),Wr!==4&&(Wr=2),h===null)return!0;x=fo(x,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,A=U&-U,y.lanes|=A,A=RB(y.stateNode,x,A),lB(y,A),!1;case 1:if(h=y.type,z=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Zu===null||!Zu.has(z))))return y.flags|=65536,U&=-U,y.lanes|=U,U=sk(U),ak(U,A,y,x),lB(y,U),!1}y=y.return}while(y!==null);return!1}var ok=Error(n(461)),Wi=!1;function ss(A,h,y,x){h.child=A===null?Z3(h,null,y,x):rd(h,A.child,y,x)}function lk(A,h,y,x,U){y=y.render;var z=h.ref;if("ref"in x){var ne={};for(var ue in x)ue!=="ref"&&(ne[ue]=x[ue])}else ne=x;return wf(h),x=hB(A,h,y,ne,z,U),ue=dB(),A!==null&&!Wi?(pB(A,h,U),Rc(A,h,U)):(Xn&&ue&&XS(h),h.flags|=1,ss(A,h,x,U),h.child)}function ck(A,h,y,x,U){if(A===null){var z=y.type;return typeof z=="function"&&!KS(z)&&z.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=z,uk(A,h,z,x,U)):(A=tw(y.type,null,x,h,h.mode,U),A.ref=h.ref,A.return=h,h.child=A)}if(z=A.child,!PB(A,U)){var ne=z.memoizedProps;if(y=y.compare,y=y!==null?y:dg,y(ne,x)&&A.ref===h.ref)return Rc(A,h,U)}return h.flags|=1,A=bc(z,x),A.ref=h.ref,A.return=h,h.child=A}function uk(A,h,y,x,U){if(A!==null){var z=A.memoizedProps;if(dg(z,x)&&A.ref===h.ref)if(Wi=!1,h.pendingProps=x=z,PB(A,U))(A.flags&131072)!==0&&(Wi=!0);else return h.lanes=A.lanes,Rc(A,h,U)}return IB(A,h,y,x,U)}function Ak(A,h,y){var x=h.pendingProps,U=x.children,z=A!==null?A.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=z!==null?z.baseLanes|y:y,A!==null){for(U=h.child=A.child,z=0;U!==null;)z=z|U.lanes|U.childLanes,U=U.sibling;h.childLanes=z&~x}else h.childLanes=0,h.child=null;return fk(A,h,x,y)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},A!==null&&aw(h,z!==null?z.cachePool:null),z!==null?u3(h,z):uB(),J3(h);else return h.lanes=h.childLanes=536870912,fk(A,h,z!==null?z.baseLanes|y:y,y)}else z!==null?(aw(h,z.cachePool),u3(h,z),ju(),h.memoizedState=null):(A!==null&&aw(h,null),uB(),ju());return ss(A,h,U,y),h.child}function fk(A,h,y,x){var U=iB();return U=U===null?null:{parent:Li._currentValue,pool:U},h.memoizedState={baseLanes:y,cachePool:U},A!==null&&aw(h,null),uB(),J3(h),A!==null&&yg(A,h,x,!0),null}function bw(A,h){var y=h.ref;if(y===null)A!==null&&A.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(n(284));(A===null||A.ref!==y)&&(h.flags|=4194816)}}function IB(A,h,y,x,U){return wf(h),y=hB(A,h,y,x,void 0,U),x=dB(),A!==null&&!Wi?(pB(A,h,U),Rc(A,h,U)):(Xn&&x&&XS(h),h.flags|=1,ss(A,h,y,U),h.child)}function hk(A,h,y,x,U,z){return wf(h),h.updateQueue=null,y=f3(h,x,y,U),A3(A),x=dB(),A!==null&&!Wi?(pB(A,h,z),Rc(A,h,z)):(Xn&&x&&XS(h),h.flags|=1,ss(A,h,y,z),h.child)}function dk(A,h,y,x,U){if(wf(h),h.stateNode===null){var z=Kh,ne=y.contextType;typeof ne=="object"&&ne!==null&&(z=xs(ne)),z=new y(x,z),h.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=TB,h.stateNode=z,z._reactInternals=h,z=h.stateNode,z.props=x,z.state=h.memoizedState,z.refs={},aB(h),ne=y.contextType,z.context=typeof ne=="object"&&ne!==null?xs(ne):Kh,z.state=h.memoizedState,ne=y.getDerivedStateFromProps,typeof ne=="function"&&(CB(h,y,ne,x),z.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(ne=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),ne!==z.state&&TB.enqueueReplaceState(z,z.state,null),Bg(h,x,z,U),Sg(),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(A===null){z=h.stateNode;var ue=h.memoizedProps,Be=bf(y,ue);z.props=Be;var ke=z.context,qe=y.contextType;ne=Kh,typeof qe=="object"&&qe!==null&&(ne=xs(qe));var $e=y.getDerivedStateFromProps;qe=typeof $e=="function"||typeof z.getSnapshotBeforeUpdate=="function",ue=h.pendingProps!==ue,qe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue||ke!==ne)&&ek(h,z,x,ne),Hu=!1;var Qe=h.memoizedState;z.state=Qe,Bg(h,x,z,U),Sg(),ke=h.memoizedState,ue||Qe!==ke||Hu?(typeof $e=="function"&&(CB(h,y,$e,x),ke=h.memoizedState),(Be=Hu||$3(h,y,Be,x,Qe,ke,ne))?(qe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=ke),z.props=x,z.state=ke,z.context=ne,x=Be):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{z=h.stateNode,oB(A,h),ne=h.memoizedProps,qe=bf(y,ne),z.props=qe,$e=h.pendingProps,Qe=z.context,ke=y.contextType,Be=Kh,typeof ke=="object"&&ke!==null&&(Be=xs(ke)),ue=y.getDerivedStateFromProps,(ke=typeof ue=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ne!==$e||Qe!==Be)&&ek(h,z,x,Be),Hu=!1,Qe=h.memoizedState,z.state=Qe,Bg(h,x,z,U),Sg();var Ge=h.memoizedState;ne!==$e||Qe!==Ge||Hu||A!==null&&A.dependencies!==null&&iw(A.dependencies)?(typeof ue=="function"&&(CB(h,y,ue,x),Ge=h.memoizedState),(qe=Hu||$3(h,y,qe,x,Qe,Ge,Be)||A!==null&&A.dependencies!==null&&iw(A.dependencies))?(ke||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(x,Ge,Be),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(x,Ge,Be)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||ne===A.memoizedProps&&Qe===A.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ne===A.memoizedProps&&Qe===A.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=Ge),z.props=x,z.state=Ge,z.context=Be,x=qe):(typeof z.componentDidUpdate!="function"||ne===A.memoizedProps&&Qe===A.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ne===A.memoizedProps&&Qe===A.memoizedState||(h.flags|=1024),x=!1)}return z=x,bw(A,h),x=(h.flags&128)!==0,z||x?(z=h.stateNode,y=x&&typeof y.getDerivedStateFromError!="function"?null:z.render(),h.flags|=1,A!==null&&x?(h.child=rd(h,A.child,null,U),h.child=rd(h,null,y,U)):ss(A,h,y,U),h.memoizedState=z.state,A=h.child):A=Rc(A,h,U),A}function pk(A,h,y,x){return gg(),h.flags|=256,ss(A,h,y,x),h.child}var UB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function FB(A){return{baseLanes:A,cachePool:n3()}}function LB(A,h,y){return A=A!==null?A.childLanes&~y:0,h&&(A|=vo),A}function mk(A,h,y){var x=h.pendingProps,U=!1,z=(h.flags&128)!==0,ne;if((ne=z)||(ne=A!==null&&A.memoizedState===null?!1:(Di.current&2)!==0),ne&&(U=!0,h.flags&=-129),ne=(h.flags&32)!==0,h.flags&=-33,A===null){if(Xn){if(U?Gu(h):ju(),Xn){var ue=jr,Be;if(Be=ue){e:{for(Be=ue,ue=Ml;Be.nodeType!==8;){if(!ue){ue=null;break e}if(Be=Jo(Be.nextSibling),Be===null){ue=null;break e}}ue=Be}ue!==null?(h.memoizedState={dehydrated:ue,treeContext:pf!==null?{id:Ec,overflow:Sc}:null,retryLane:536870912,hydrationErrors:null},Be=Fa(18,null,null,0),Be.stateNode=ue,Be.return=h,h.child=Be,Gs=h,jr=null,Be=!0):Be=!1}Be||vf(h)}if(ue=h.memoizedState,ue!==null&&(ue=ue.dehydrated,ue!==null))return gM(ue)?h.lanes=32:h.lanes=536870912,null;Tc(h)}return ue=x.children,x=x.fallback,U?(ju(),U=h.mode,ue=Ew({mode:"hidden",children:ue},U),x=df(x,U,y,null),ue.return=h,x.return=h,ue.sibling=x,h.child=ue,U=h.child,U.memoizedState=FB(y),U.childLanes=LB(A,ne,y),h.memoizedState=UB,x):(Gu(h),DB(h,ue))}if(Be=A.memoizedState,Be!==null&&(ue=Be.dehydrated,ue!==null)){if(z)h.flags&256?(Gu(h),h.flags&=-257,h=OB(A,h,y)):h.memoizedState!==null?(ju(),h.child=A.child,h.flags|=128,h=null):(ju(),U=x.fallback,ue=h.mode,x=Ew({mode:"visible",children:x.children},ue),U=df(U,ue,y,null),U.flags|=2,x.return=h,U.return=h,x.sibling=U,h.child=x,rd(h,A.child,null,y),x=h.child,x.memoizedState=FB(y),x.childLanes=LB(A,ne,y),h.memoizedState=UB,h=U);else if(Gu(h),gM(ue)){if(ne=ue.nextSibling&&ue.nextSibling.dataset,ne)var ke=ne.dgst;ne=ke,x=Error(n(419)),x.stack="",x.digest=ne,vg({value:x,source:null,stack:null}),h=OB(A,h,y)}else if(Wi||yg(A,h,y,!1),ne=(y&A.childLanes)!==0,Wi||ne){if(ne=wr,ne!==null&&(x=y&-y,x=(x&42)!==0?1:ur(x),x=(x&(ne.suspendedLanes|y))!==0?0:x,x!==0&&x!==Be.retryLane))throw Be.retryLane=x,Wh(A,x),Pa(ne,A,x),ok;ue.data==="$?"||eM(),h=OB(A,h,y)}else ue.data==="$?"?(h.flags|=192,h.child=A.child,h=null):(A=Be.treeContext,jr=Jo(ue.nextSibling),Gs=h,Xn=!0,gf=null,Ml=!1,A!==null&&(po[mo++]=Ec,po[mo++]=Sc,po[mo++]=pf,Ec=A.id,Sc=A.overflow,pf=h),h=DB(h,x.children),h.flags|=4096);return h}return U?(ju(),U=x.fallback,ue=h.mode,Be=A.child,ke=Be.sibling,x=bc(Be,{mode:"hidden",children:x.children}),x.subtreeFlags=Be.subtreeFlags&65011712,ke!==null?U=bc(ke,U):(U=df(U,ue,y,null),U.flags|=2),U.return=h,x.return=h,x.sibling=U,h.child=x,x=U,U=h.child,ue=A.child.memoizedState,ue===null?ue=FB(y):(Be=ue.cachePool,Be!==null?(ke=Li._currentValue,Be=Be.parent!==ke?{parent:ke,pool:ke}:Be):Be=n3(),ue={baseLanes:ue.baseLanes|y,cachePool:Be}),U.memoizedState=ue,U.childLanes=LB(A,ne,y),h.memoizedState=UB,x):(Gu(h),y=A.child,A=y.sibling,y=bc(y,{mode:"visible",children:x.children}),y.return=h,y.sibling=null,A!==null&&(ne=h.deletions,ne===null?(h.deletions=[A],h.flags|=16):ne.push(A)),h.child=y,h.memoizedState=null,y)}function DB(A,h){return h=Ew({mode:"visible",children:h},A.mode),h.return=A,A.child=h}function Ew(A,h){return A=Fa(22,A,null,h),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function OB(A,h,y){return rd(h,A.child,null,y),A=DB(h,h.pendingProps.children),A.flags|=2,h.memoizedState=null,A}function gk(A,h,y){A.lanes|=h;var x=A.alternate;x!==null&&(x.lanes|=h),eB(A.return,h,y)}function NB(A,h,y,x,U){var z=A.memoizedState;z===null?A.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:y,tailMode:U}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=x,z.tail=y,z.tailMode=U)}function vk(A,h,y){var x=h.pendingProps,U=x.revealOrder,z=x.tail;if(ss(A,h,x.children,y),x=Di.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=h.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&gk(A,y,h);else if(A.tag===19)gk(A,y,h);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}x&=1}switch(H(Di,x),U){case"forwards":for(y=h.child,U=null;y!==null;)A=y.alternate,A!==null&&ww(A)===null&&(U=y),y=y.sibling;y=U,y===null?(U=h.child,h.child=null):(U=y.sibling,y.sibling=null),NB(h,!1,U,y,z);break;case"backwards":for(y=null,U=h.child,h.child=null;U!==null;){if(A=U.alternate,A!==null&&ww(A)===null){h.child=U;break}A=U.sibling,U.sibling=y,y=U,U=A}NB(h,!0,y,null,z);break;case"together":NB(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Rc(A,h,y){if(A!==null&&(h.dependencies=A.dependencies),Xu|=h.lanes,(y&h.childLanes)===0)if(A!==null){if(yg(A,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(A!==null&&h.child!==A.child)throw Error(n(153));if(h.child!==null){for(A=h.child,y=bc(A,A.pendingProps),h.child=y,y.return=h;A.sibling!==null;)A=A.sibling,y=y.sibling=bc(A,A.pendingProps),y.return=h;y.sibling=null}return h.child}function PB(A,h){return(A.lanes&h)!==0?!0:(A=A.dependencies,!!(A!==null&&iw(A)))}function _te(A,h,y){switch(h.tag){case 3:fe(h,h.stateNode.containerInfo),ku(h,Li,A.memoizedState.cache),gg();break;case 27:case 5:me(h);break;case 4:fe(h,h.stateNode.containerInfo);break;case 10:ku(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(Gu(h),h.flags|=128,null):(y&h.child.childLanes)!==0?mk(A,h,y):(Gu(h),A=Rc(A,h,y),A!==null?A.sibling:null);Gu(h);break;case 19:var U=(A.flags&128)!==0;if(x=(y&h.childLanes)!==0,x||(yg(A,h,y,!1),x=(y&h.childLanes)!==0),U){if(x)return vk(A,h,y);h.flags|=128}if(U=h.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),H(Di,Di.current),x)break;return null;case 22:case 23:return h.lanes=0,Ak(A,h,y);case 24:ku(h,Li,A.memoizedState.cache)}return Rc(A,h,y)}function yk(A,h,y){if(A!==null)if(A.memoizedProps!==h.pendingProps)Wi=!0;else{if(!PB(A,y)&&(h.flags&128)===0)return Wi=!1,_te(A,h,y);Wi=(A.flags&131072)!==0}else Wi=!1,Xn&&(h.flags&1048576)!==0&&YP(h,rw,h.index);switch(h.lanes=0,h.tag){case 16:e:{A=h.pendingProps;var x=h.elementType,U=x._init;if(x=U(x._payload),h.type=x,typeof x=="function")KS(x)?(A=bf(x,A),h.tag=1,h=dk(null,h,x,A,y)):(h.tag=0,h=IB(null,h,x,A,y));else{if(x!=null){if(U=x.$$typeof,U===B){h.tag=11,h=lk(null,h,x,A,y);break e}else if(U===I){h.tag=14,h=ck(null,h,x,A,y);break e}}throw h=_(x)||x,Error(n(306,h,""))}}return h;case 0:return IB(A,h,h.type,h.pendingProps,y);case 1:return x=h.type,U=bf(x,h.pendingProps),dk(A,h,x,U,y);case 3:e:{if(fe(h,h.stateNode.containerInfo),A===null)throw Error(n(387));x=h.pendingProps;var z=h.memoizedState;U=z.element,oB(A,h),Bg(h,x,null,y);var ne=h.memoizedState;if(x=ne.cache,ku(h,Li,x),x!==z.cache&&tB(h,[Li],y,!0),Sg(),x=ne.element,z.isDehydrated)if(z={element:x,isDehydrated:!1,cache:ne.cache},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){h=pk(A,h,x,y);break e}else if(x!==U){U=fo(Error(n(424)),h),vg(U),h=pk(A,h,x,y);break e}else{switch(A=h.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(jr=Jo(A.firstChild),Gs=h,Xn=!0,gf=null,Ml=!0,y=Z3(h,null,x,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(gg(),x===U){h=Rc(A,h,y);break e}ss(A,h,x,y)}h=h.child}return h;case 26:return bw(A,h),A===null?(y=b4(h.type,null,h.pendingProps,null))?h.memoizedState=y:Xn||(y=h.type,A=h.pendingProps,x=Pw(te.current).createElement(y),x[Xt]=h,x[jn]=A,os(x,y,A),Ae(x),h.stateNode=x):h.memoizedState=b4(h.type,A.memoizedProps,h.pendingProps,A.memoizedState),null;case 27:return me(h),A===null&&Xn&&(x=h.stateNode=w4(h.type,h.pendingProps,te.current),Gs=h,Ml=!0,U=jr,eA(h.type)?(vM=U,jr=Jo(x.firstChild)):jr=U),ss(A,h,h.pendingProps.children,y),bw(A,h),A===null&&(h.flags|=4194304),h.child;case 5:return A===null&&Xn&&((U=x=jr)&&(x=Yte(x,h.type,h.pendingProps,Ml),x!==null?(h.stateNode=x,Gs=h,jr=Jo(x.firstChild),Ml=!1,U=!0):U=!1),U||vf(h)),me(h),U=h.type,z=h.pendingProps,ne=A!==null?A.memoizedProps:null,x=z.children,dM(U,z)?x=null:ne!==null&&dM(U,ne)&&(h.flags|=32),h.memoizedState!==null&&(U=hB(A,h,hte,null,null,y),qg._currentValue=U),bw(A,h),ss(A,h,x,y),h.child;case 6:return A===null&&Xn&&((A=y=jr)&&(y=Xte(y,h.pendingProps,Ml),y!==null?(h.stateNode=y,Gs=h,jr=null,A=!0):A=!1),A||vf(h)),null;case 13:return mk(A,h,y);case 4:return fe(h,h.stateNode.containerInfo),x=h.pendingProps,A===null?h.child=rd(h,null,x,y):ss(A,h,x,y),h.child;case 11:return lk(A,h,h.type,h.pendingProps,y);case 7:return ss(A,h,h.pendingProps,y),h.child;case 8:return ss(A,h,h.pendingProps.children,y),h.child;case 12:return ss(A,h,h.pendingProps.children,y),h.child;case 10:return x=h.pendingProps,ku(h,h.type,x.value),ss(A,h,x.children,y),h.child;case 9:return U=h.type._context,x=h.pendingProps.children,wf(h),U=xs(U),x=x(U),h.flags|=1,ss(A,h,x,y),h.child;case 14:return ck(A,h,h.type,h.pendingProps,y);case 15:return uk(A,h,h.type,h.pendingProps,y);case 19:return vk(A,h,y);case 31:return x=h.pendingProps,y=h.mode,x={mode:x.mode,children:x.children},A===null?(y=Ew(x,y),y.ref=h.ref,h.child=y,y.return=h,h=y):(y=bc(A.child,x),y.ref=h.ref,h.child=y,y.return=h,h=y),h;case 22:return Ak(A,h,y);case 24:return wf(h),x=xs(Li),A===null?(U=iB(),U===null&&(U=wr,z=nB(),U.pooledCache=z,z.refCount++,z!==null&&(U.pooledCacheLanes|=y),U=z),h.memoizedState={parent:x,cache:U},aB(h),ku(h,Li,U)):((A.lanes&y)!==0&&(oB(A,h),Bg(h,null,null,y),Sg()),U=A.memoizedState,z=h.memoizedState,U.parent!==x?(U={parent:x,cache:x},h.memoizedState=U,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=U),ku(h,Li,x)):(x=z.cache,ku(h,Li,x),x!==U.cache&&tB(h,[Li],y,!0))),ss(A,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function Ic(A){A.flags|=4}function wk(A,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!C4(h)){if(h=go.current,h!==null&&((Qn&4194048)===Qn?Cl!==null:(Qn&62914560)!==Qn&&(Qn&536870912)===0||h!==Cl))throw bg=sB,r3;A.flags|=8192}}function Sw(A,h){h!==null&&(A.flags|=4),A.flags&16384&&(h=A.tag!==22?Ve():536870912,A.lanes|=h,od|=h)}function Fg(A,h){if(!Xn)switch(A.tailMode){case"hidden":h=A.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?A.tail=null:y.sibling=null;break;case"collapsed":y=A.tail;for(var x=null;y!==null;)y.alternate!==null&&(x=y),y=y.sibling;x===null?h||A.tail===null?A.tail=null:A.tail.sibling=null:x.sibling=null}}function Nr(A){var h=A.alternate!==null&&A.alternate.child===A.child,y=0,x=0;if(h)for(var U=A.child;U!==null;)y|=U.lanes|U.childLanes,x|=U.subtreeFlags&65011712,x|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)y|=U.lanes|U.childLanes,x|=U.subtreeFlags,x|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=x,A.childLanes=y,h}function xte(A,h,y){var x=h.pendingProps;switch(ZS(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(h),null;case 1:return Nr(h),null;case 3:return y=h.stateNode,x=null,A!==null&&(x=A.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),Mc(Li),he(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(A===null||A.child===null)&&(mg(h)?Ic(h):A===null||A.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,JP())),Nr(h),null;case 26:return y=h.memoizedState,A===null?(Ic(h),y!==null?(Nr(h),wk(h,y)):(Nr(h),h.flags&=-16777217)):y?y!==A.memoizedState?(Ic(h),Nr(h),wk(h,y)):(Nr(h),h.flags&=-16777217):(A.memoizedProps!==x&&Ic(h),Nr(h),h.flags&=-16777217),null;case 27:Te(h),y=te.current;var U=h.type;if(A!==null&&h.stateNode!=null)A.memoizedProps!==x&&Ic(h);else{if(!x){if(h.stateNode===null)throw Error(n(166));return Nr(h),null}A=K.current,mg(h)?XP(h):(A=w4(U,x,y),h.stateNode=A,Ic(h))}return Nr(h),null;case 5:if(Te(h),y=h.type,A!==null&&h.stateNode!=null)A.memoizedProps!==x&&Ic(h);else{if(!x){if(h.stateNode===null)throw Error(n(166));return Nr(h),null}if(A=K.current,mg(h))XP(h);else{switch(U=Pw(te.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof x.is=="string"?U.createElement("select",{is:x.is}):U.createElement("select"),x.multiple?A.multiple=!0:x.size&&(A.size=x.size);break;default:A=typeof x.is=="string"?U.createElement(y,{is:x.is}):U.createElement(y)}}A[Xt]=h,A[jn]=x;e:for(U=h.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===h)break e;for(;U.sibling===null;){if(U.return===null||U.return===h)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}h.stateNode=A;e:switch(os(A,y,x),y){case"button":case"input":case"select":case"textarea":A=!!x.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Ic(h)}}return Nr(h),h.flags&=-16777217,null;case 6:if(A&&h.stateNode!=null)A.memoizedProps!==x&&Ic(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(n(166));if(A=te.current,mg(h)){if(A=h.stateNode,y=h.memoizedProps,x=null,U=Gs,U!==null)switch(U.tag){case 27:case 5:x=U.memoizedProps}A[Xt]=h,A=!!(A.nodeValue===y||x!==null&&x.suppressHydrationWarning===!0||h4(A.nodeValue,y)),A||vf(h)}else A=Pw(A).createTextNode(x),A[Xt]=h,h.stateNode=A}return Nr(h),null;case 13:if(x=h.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=mg(h),x!==null&&x.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=h.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[Xt]=h}else gg(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Nr(h),U=!1}else U=JP(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return h.flags&256?(Tc(h),h):(Tc(h),null)}if(Tc(h),(h.flags&128)!==0)return h.lanes=y,h;if(y=x!==null,A=A!==null&&A.memoizedState!==null,y){x=h.child,U=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(U=x.alternate.memoizedState.cachePool.pool);var z=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(z=x.memoizedState.cachePool.pool),z!==U&&(x.flags|=2048)}return y!==A&&y&&(h.child.flags|=8192),Sw(h,h.updateQueue),Nr(h),null;case 4:return he(),A===null&&cM(h.stateNode.containerInfo),Nr(h),null;case 10:return Mc(h.type),Nr(h),null;case 19:if(T(Di),U=h.memoizedState,U===null)return Nr(h),null;if(x=(h.flags&128)!==0,z=U.rendering,z===null)if(x)Fg(U,!1);else{if(Wr!==0||A!==null&&(A.flags&128)!==0)for(A=h.child;A!==null;){if(z=ww(A),z!==null){for(h.flags|=128,Fg(U,!1),A=z.updateQueue,h.updateQueue=A,Sw(h,A),h.subtreeFlags=0,A=y,y=h.child;y!==null;)qP(y,A),y=y.sibling;return H(Di,Di.current&1|2),h.child}A=A.sibling}U.tail!==null&&se()>Cw&&(h.flags|=128,x=!0,Fg(U,!1),h.lanes=4194304)}else{if(!x)if(A=ww(z),A!==null){if(h.flags|=128,x=!0,A=A.updateQueue,h.updateQueue=A,Sw(h,A),Fg(U,!0),U.tail===null&&U.tailMode==="hidden"&&!z.alternate&&!Xn)return Nr(h),null}else 2*se()-U.renderingStartTime>Cw&&y!==536870912&&(h.flags|=128,x=!0,Fg(U,!1),h.lanes=4194304);U.isBackwards?(z.sibling=h.child,h.child=z):(A=U.last,A!==null?A.sibling=z:h.child=z,U.last=z)}return U.tail!==null?(h=U.tail,U.rendering=h,U.tail=h.sibling,U.renderingStartTime=se(),h.sibling=null,A=Di.current,H(Di,x?A&1|2:A&1),h):(Nr(h),null);case 22:case 23:return Tc(h),AB(),x=h.memoizedState!==null,A!==null?A.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(y&536870912)!==0&&(h.flags&128)===0&&(Nr(h),h.subtreeFlags&6&&(h.flags|=8192)):Nr(h),y=h.updateQueue,y!==null&&Sw(h,y.retryQueue),y=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(y=A.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==y&&(h.flags|=2048),A!==null&&T(_f),null;case 24:return y=null,A!==null&&(y=A.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),Mc(Li),Nr(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function bte(A,h){switch(ZS(h),h.tag){case 1:return A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 3:return Mc(Li),he(),A=h.flags,(A&65536)!==0&&(A&128)===0?(h.flags=A&-65537|128,h):null;case 26:case 27:case 5:return Te(h),null;case 13:if(Tc(h),A=h.memoizedState,A!==null&&A.dehydrated!==null){if(h.alternate===null)throw Error(n(340));gg()}return A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 19:return T(Di),null;case 4:return he(),null;case 10:return Mc(h.type),null;case 22:case 23:return Tc(h),AB(),A!==null&&T(_f),A=h.flags,A&65536?(h.flags=A&-65537|128,h):null;case 24:return Mc(Li),null;case 25:return null;default:return null}}function _k(A,h){switch(ZS(h),h.tag){case 3:Mc(Li),he();break;case 26:case 27:case 5:Te(h);break;case 4:he();break;case 13:Tc(h);break;case 19:T(Di);break;case 10:Mc(h.type);break;case 22:case 23:Tc(h),AB(),A!==null&&T(_f);break;case 24:Mc(Li)}}function Lg(A,h){try{var y=h.updateQueue,x=y!==null?y.lastEffect:null;if(x!==null){var U=x.next;y=U;do{if((y.tag&A)===A){x=void 0;var z=y.create,ne=y.inst;x=z(),ne.destroy=x}y=y.next}while(y!==U)}}catch(ue){mr(h,h.return,ue)}}function Wu(A,h,y){try{var x=h.updateQueue,U=x!==null?x.lastEffect:null;if(U!==null){var z=U.next;x=z;do{if((x.tag&A)===A){var ne=x.inst,ue=ne.destroy;if(ue!==void 0){ne.destroy=void 0,U=h;var Be=y,ke=ue;try{ke()}catch(qe){mr(U,Be,qe)}}}x=x.next}while(x!==z)}}catch(qe){mr(h,h.return,qe)}}function xk(A){var h=A.updateQueue;if(h!==null){var y=A.stateNode;try{c3(h,y)}catch(x){mr(A,A.return,x)}}}function bk(A,h,y){y.props=bf(A.type,A.memoizedProps),y.state=A.memoizedState;try{y.componentWillUnmount()}catch(x){mr(A,h,x)}}function Dg(A,h){try{var y=A.ref;if(y!==null){switch(A.tag){case 26:case 27:case 5:var x=A.stateNode;break;case 30:x=A.stateNode;break;default:x=A.stateNode}typeof y=="function"?A.refCleanup=y(x):y.current=x}}catch(U){mr(A,h,U)}}function Tl(A,h){var y=A.ref,x=A.refCleanup;if(y!==null)if(typeof x=="function")try{x()}catch(U){mr(A,h,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(U){mr(A,h,U)}else y.current=null}function Ek(A){var h=A.type,y=A.memoizedProps,x=A.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&x.focus();break e;case"img":y.src?x.src=y.src:y.srcSet&&(x.srcset=y.srcSet)}}catch(U){mr(A,A.return,U)}}function kB(A,h,y){try{var x=A.stateNode;Gte(x,A.type,y,h),x[jn]=h}catch(U){mr(A,A.return,U)}}function Sk(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&eA(A.type)||A.tag===4}function HB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||Sk(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&eA(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function QB(A,h,y){var x=A.tag;if(x===5||x===6)A=A.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(A,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(A),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=Nw));else if(x!==4&&(x===27&&eA(A.type)&&(y=A.stateNode,h=null),A=A.child,A!==null))for(QB(A,h,y),A=A.sibling;A!==null;)QB(A,h,y),A=A.sibling}function Bw(A,h,y){var x=A.tag;if(x===5||x===6)A=A.stateNode,h?y.insertBefore(A,h):y.appendChild(A);else if(x!==4&&(x===27&&eA(A.type)&&(y=A.stateNode),A=A.child,A!==null))for(Bw(A,h,y),A=A.sibling;A!==null;)Bw(A,h,y),A=A.sibling}function Bk(A){var h=A.stateNode,y=A.memoizedProps;try{for(var x=A.type,U=h.attributes;U.length;)h.removeAttributeNode(U[0]);os(h,x,y),h[Xt]=A,h[jn]=y}catch(z){mr(A,A.return,z)}}var Uc=!1,oi=!1,zB=!1,Mk=typeof WeakSet=="function"?WeakSet:Set,Ki=null;function Ete(A,h){if(A=A.containerInfo,fM=Gw,A=PP(A),HS(A)){if("selectionStart"in A)var y={start:A.selectionStart,end:A.selectionEnd};else e:{y=(y=A.ownerDocument)&&y.defaultView||window;var x=y.getSelection&&y.getSelection();if(x&&x.rangeCount!==0){y=x.anchorNode;var U=x.anchorOffset,z=x.focusNode;x=x.focusOffset;try{y.nodeType,z.nodeType}catch{y=null;break e}var ne=0,ue=-1,Be=-1,ke=0,qe=0,$e=A,Qe=null;t:for(;;){for(var Ge;$e!==y||U!==0&&$e.nodeType!==3||(ue=ne+U),$e!==z||x!==0&&$e.nodeType!==3||(Be=ne+x),$e.nodeType===3&&(ne+=$e.nodeValue.length),(Ge=$e.firstChild)!==null;)Qe=$e,$e=Ge;for(;;){if($e===A)break t;if(Qe===y&&++ke===U&&(ue=ne),Qe===z&&++qe===x&&(Be=ne),(Ge=$e.nextSibling)!==null)break;$e=Qe,Qe=$e.parentNode}$e=Ge}y=ue===-1||Be===-1?null:{start:ue,end:Be}}else y=null}y=y||{start:0,end:0}}else y=null;for(hM={focusedElem:A,selectionRange:y},Gw=!1,Ki=h;Ki!==null;)if(h=Ki,A=h.child,(h.subtreeFlags&1024)!==0&&A!==null)A.return=h,Ki=A;else for(;Ki!==null;){switch(h=Ki,z=h.alternate,A=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&z!==null){A=void 0,y=h,U=z.memoizedProps,z=z.memoizedState,x=y.stateNode;try{var Zt=bf(y.type,U,y.elementType===y.type);A=x.getSnapshotBeforeUpdate(Zt,z),x.__reactInternalSnapshotBeforeUpdate=A}catch(zt){mr(y,y.return,zt)}}break;case 3:if((A&1024)!==0){if(A=h.stateNode.containerInfo,y=A.nodeType,y===9)mM(A);else if(y===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":mM(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=h.sibling,A!==null){A.return=h.return,Ki=A;break}Ki=h.return}}function Ck(A,h,y){var x=y.flags;switch(y.tag){case 0:case 11:case 15:Ku(A,y),x&4&&Lg(5,y);break;case 1:if(Ku(A,y),x&4)if(A=y.stateNode,h===null)try{A.componentDidMount()}catch(ne){mr(y,y.return,ne)}else{var U=bf(y.type,h.memoizedProps);h=h.memoizedState;try{A.componentDidUpdate(U,h,A.__reactInternalSnapshotBeforeUpdate)}catch(ne){mr(y,y.return,ne)}}x&64&&xk(y),x&512&&Dg(y,y.return);break;case 3:if(Ku(A,y),x&64&&(A=y.updateQueue,A!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{c3(A,h)}catch(ne){mr(y,y.return,ne)}}break;case 27:h===null&&x&4&&Bk(y);case 26:case 5:Ku(A,y),h===null&&x&4&&Ek(y),x&512&&Dg(y,y.return);break;case 12:Ku(A,y);break;case 13:Ku(A,y),x&4&&Ik(A,y),x&64&&(A=y.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(y=Fte.bind(null,y),Zte(A,y))));break;case 22:if(x=y.memoizedState!==null||Uc,!x){h=h!==null&&h.memoizedState!==null||oi,U=Uc;var z=oi;Uc=x,(oi=h)&&!z?qu(A,y,(y.subtreeFlags&8772)!==0):Ku(A,y),Uc=U,oi=z}break;case 30:break;default:Ku(A,y)}}function Tk(A){var h=A.alternate;h!==null&&(A.alternate=null,Tk(h)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(h=A.stateNode,h!==null&&Hn(h)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Ir=null,la=!1;function Fc(A,h,y){for(y=y.child;y!==null;)Rk(A,h,y),y=y.sibling}function Rk(A,h,y){if(J&&typeof J.onCommitFiberUnmount=="function")try{J.onCommitFiberUnmount(De,y)}catch{}switch(y.tag){case 26:oi||Tl(y,h),Fc(A,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:oi||Tl(y,h);var x=Ir,U=la;eA(y.type)&&(Ir=y.stateNode,la=!1),Fc(A,h,y),Gg(y.stateNode),Ir=x,la=U;break;case 5:oi||Tl(y,h);case 6:if(x=Ir,U=la,Ir=null,Fc(A,h,y),Ir=x,la=U,Ir!==null)if(la)try{(Ir.nodeType===9?Ir.body:Ir.nodeName==="HTML"?Ir.ownerDocument.body:Ir).removeChild(y.stateNode)}catch(z){mr(y,h,z)}else try{Ir.removeChild(y.stateNode)}catch(z){mr(y,h,z)}break;case 18:Ir!==null&&(la?(A=Ir,v4(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,y.stateNode),Jg(A)):v4(Ir,y.stateNode));break;case 4:x=Ir,U=la,Ir=y.stateNode.containerInfo,la=!0,Fc(A,h,y),Ir=x,la=U;break;case 0:case 11:case 14:case 15:oi||Wu(2,y,h),oi||Wu(4,y,h),Fc(A,h,y);break;case 1:oi||(Tl(y,h),x=y.stateNode,typeof x.componentWillUnmount=="function"&&bk(y,h,x)),Fc(A,h,y);break;case 21:Fc(A,h,y);break;case 22:oi=(x=oi)||y.memoizedState!==null,Fc(A,h,y),oi=x;break;default:Fc(A,h,y)}}function Ik(A,h){if(h.memoizedState===null&&(A=h.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Jg(A)}catch(y){mr(h,h.return,y)}}function Ste(A){switch(A.tag){case 13:case 19:var h=A.stateNode;return h===null&&(h=A.stateNode=new Mk),h;case 22:return A=A.stateNode,h=A._retryCache,h===null&&(h=A._retryCache=new Mk),h;default:throw Error(n(435,A.tag))}}function VB(A,h){var y=Ste(A);h.forEach(function(x){var U=Lte.bind(null,A,x);y.has(x)||(y.add(x),x.then(U,U))})}function La(A,h){var y=h.deletions;if(y!==null)for(var x=0;x<y.length;x++){var U=y[x],z=A,ne=h,ue=ne;e:for(;ue!==null;){switch(ue.tag){case 27:if(eA(ue.type)){Ir=ue.stateNode,la=!1;break e}break;case 5:Ir=ue.stateNode,la=!1;break e;case 3:case 4:Ir=ue.stateNode.containerInfo,la=!0;break e}ue=ue.return}if(Ir===null)throw Error(n(160));Rk(z,ne,U),Ir=null,la=!1,z=U.alternate,z!==null&&(z.return=null),U.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)Uk(h,A),h=h.sibling}var Zo=null;function Uk(A,h){var y=A.alternate,x=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:La(h,A),Da(A),x&4&&(Wu(3,A,A.return),Lg(3,A),Wu(5,A,A.return));break;case 1:La(h,A),Da(A),x&512&&(oi||y===null||Tl(y,y.return)),x&64&&Uc&&(A=A.updateQueue,A!==null&&(x=A.callbacks,x!==null&&(y=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=y===null?x:y.concat(x))));break;case 26:var U=Zo;if(La(h,A),Da(A),x&512&&(oi||y===null||Tl(y,y.return)),x&4){var z=y!==null?y.memoizedState:null;if(x=A.memoizedState,y===null)if(x===null)if(A.stateNode===null){e:{x=A.type,y=A.memoizedProps,U=U.ownerDocument||U;t:switch(x){case"title":z=U.getElementsByTagName("title")[0],(!z||z[ii]||z[Xt]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=U.createElement(x),U.head.insertBefore(z,U.querySelector("head > title"))),os(z,x,y),z[Xt]=A,Ae(z),x=z;break e;case"link":var ne=B4("link","href",U).get(x+(y.href||""));if(ne){for(var ue=0;ue<ne.length;ue++)if(z=ne[ue],z.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&z.getAttribute("rel")===(y.rel==null?null:y.rel)&&z.getAttribute("title")===(y.title==null?null:y.title)&&z.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ne.splice(ue,1);break t}}z=U.createElement(x),os(z,x,y),U.head.appendChild(z);break;case"meta":if(ne=B4("meta","content",U).get(x+(y.content||""))){for(ue=0;ue<ne.length;ue++)if(z=ne[ue],z.getAttribute("content")===(y.content==null?null:""+y.content)&&z.getAttribute("name")===(y.name==null?null:y.name)&&z.getAttribute("property")===(y.property==null?null:y.property)&&z.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&z.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ne.splice(ue,1);break t}}z=U.createElement(x),os(z,x,y),U.head.appendChild(z);break;default:throw Error(n(468,x))}z[Xt]=A,Ae(z),x=z}A.stateNode=x}else M4(U,A.type,A.stateNode);else A.stateNode=S4(U,x,A.memoizedProps);else z!==x?(z===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):z.count--,x===null?M4(U,A.type,A.stateNode):S4(U,x,A.memoizedProps)):x===null&&A.stateNode!==null&&kB(A,A.memoizedProps,y.memoizedProps)}break;case 27:La(h,A),Da(A),x&512&&(oi||y===null||Tl(y,y.return)),y!==null&&x&4&&kB(A,A.memoizedProps,y.memoizedProps);break;case 5:if(La(h,A),Da(A),x&512&&(oi||y===null||Tl(y,y.return)),A.flags&32){U=A.stateNode;try{kh(U,"")}catch(Ge){mr(A,A.return,Ge)}}x&4&&A.stateNode!=null&&(U=A.memoizedProps,kB(A,U,y!==null?y.memoizedProps:U)),x&1024&&(zB=!0);break;case 6:if(La(h,A),Da(A),x&4){if(A.stateNode===null)throw Error(n(162));x=A.memoizedProps,y=A.stateNode;try{y.nodeValue=x}catch(Ge){mr(A,A.return,Ge)}}break;case 3:if(Qw=null,U=Zo,Zo=kw(h.containerInfo),La(h,A),Zo=U,Da(A),x&4&&y!==null&&y.memoizedState.isDehydrated)try{Jg(h.containerInfo)}catch(Ge){mr(A,A.return,Ge)}zB&&(zB=!1,Fk(A));break;case 4:x=Zo,Zo=kw(A.stateNode.containerInfo),La(h,A),Da(A),Zo=x;break;case 12:La(h,A),Da(A);break;case 13:La(h,A),Da(A),A.child.flags&8192&&A.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(YB=se()),x&4&&(x=A.updateQueue,x!==null&&(A.updateQueue=null,VB(A,x)));break;case 22:U=A.memoizedState!==null;var Be=y!==null&&y.memoizedState!==null,ke=Uc,qe=oi;if(Uc=ke||U,oi=qe||Be,La(h,A),oi=qe,Uc=ke,Da(A),x&8192)e:for(h=A.stateNode,h._visibility=U?h._visibility&-2:h._visibility|1,U&&(y===null||Be||Uc||oi||Ef(A)),y=null,h=A;;){if(h.tag===5||h.tag===26){if(y===null){Be=y=h;try{if(z=Be.stateNode,U)ne=z.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none";else{ue=Be.stateNode;var $e=Be.memoizedProps.style,Qe=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;ue.style.display=Qe==null||typeof Qe=="boolean"?"":(""+Qe).trim()}}catch(Ge){mr(Be,Be.return,Ge)}}}else if(h.tag===6){if(y===null){Be=h;try{Be.stateNode.nodeValue=U?"":Be.memoizedProps}catch(Ge){mr(Be,Be.return,Ge)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===A)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===A)break e;for(;h.sibling===null;){if(h.return===null||h.return===A)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=A.updateQueue,x!==null&&(y=x.retryQueue,y!==null&&(x.retryQueue=null,VB(A,y))));break;case 19:La(h,A),Da(A),x&4&&(x=A.updateQueue,x!==null&&(A.updateQueue=null,VB(A,x)));break;case 30:break;case 21:break;default:La(h,A),Da(A)}}function Da(A){var h=A.flags;if(h&2){try{for(var y,x=A.return;x!==null;){if(Sk(x)){y=x;break}x=x.return}if(y==null)throw Error(n(160));switch(y.tag){case 27:var U=y.stateNode,z=HB(A);Bw(A,z,U);break;case 5:var ne=y.stateNode;y.flags&32&&(kh(ne,""),y.flags&=-33);var ue=HB(A);Bw(A,ue,ne);break;case 3:case 4:var Be=y.stateNode.containerInfo,ke=HB(A);QB(A,ke,Be);break;default:throw Error(n(161))}}catch(qe){mr(A,A.return,qe)}A.flags&=-3}h&4096&&(A.flags&=-4097)}function Fk(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var h=A;Fk(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),A=A.sibling}}function Ku(A,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Ck(A,h.alternate,h),h=h.sibling}function Ef(A){for(A=A.child;A!==null;){var h=A;switch(h.tag){case 0:case 11:case 14:case 15:Wu(4,h,h.return),Ef(h);break;case 1:Tl(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&bk(h,h.return,y),Ef(h);break;case 27:Gg(h.stateNode);case 26:case 5:Tl(h,h.return),Ef(h);break;case 22:h.memoizedState===null&&Ef(h);break;case 30:Ef(h);break;default:Ef(h)}A=A.sibling}}function qu(A,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,U=A,z=h,ne=z.flags;switch(z.tag){case 0:case 11:case 15:qu(U,z,y),Lg(4,z);break;case 1:if(qu(U,z,y),x=z,U=x.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(ke){mr(x,x.return,ke)}if(x=z,U=x.updateQueue,U!==null){var ue=x.stateNode;try{var Be=U.shared.hiddenCallbacks;if(Be!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Be.length;U++)l3(Be[U],ue)}catch(ke){mr(x,x.return,ke)}}y&&ne&64&&xk(z),Dg(z,z.return);break;case 27:Bk(z);case 26:case 5:qu(U,z,y),y&&x===null&&ne&4&&Ek(z),Dg(z,z.return);break;case 12:qu(U,z,y);break;case 13:qu(U,z,y),y&&ne&4&&Ik(U,z);break;case 22:z.memoizedState===null&&qu(U,z,y),Dg(z,z.return);break;case 30:break;default:qu(U,z,y)}h=h.sibling}}function GB(A,h){var y=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(y=A.memoizedState.cachePool.pool),A=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),A!==y&&(A!=null&&A.refCount++,y!=null&&wg(y))}function jB(A,h){A=null,h.alternate!==null&&(A=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==A&&(h.refCount++,A!=null&&wg(A))}function Rl(A,h,y,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Lk(A,h,y,x),h=h.sibling}function Lk(A,h,y,x){var U=h.flags;switch(h.tag){case 0:case 11:case 15:Rl(A,h,y,x),U&2048&&Lg(9,h);break;case 1:Rl(A,h,y,x);break;case 3:Rl(A,h,y,x),U&2048&&(A=null,h.alternate!==null&&(A=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==A&&(h.refCount++,A!=null&&wg(A)));break;case 12:if(U&2048){Rl(A,h,y,x),A=h.stateNode;try{var z=h.memoizedProps,ne=z.id,ue=z.onPostCommit;typeof ue=="function"&&ue(ne,h.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Be){mr(h,h.return,Be)}}else Rl(A,h,y,x);break;case 13:Rl(A,h,y,x);break;case 23:break;case 22:z=h.stateNode,ne=h.alternate,h.memoizedState!==null?z._visibility&2?Rl(A,h,y,x):Og(A,h):z._visibility&2?Rl(A,h,y,x):(z._visibility|=2,id(A,h,y,x,(h.subtreeFlags&10256)!==0)),U&2048&&GB(ne,h);break;case 24:Rl(A,h,y,x),U&2048&&jB(h.alternate,h);break;default:Rl(A,h,y,x)}}function id(A,h,y,x,U){for(U=U&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var z=A,ne=h,ue=y,Be=x,ke=ne.flags;switch(ne.tag){case 0:case 11:case 15:id(z,ne,ue,Be,U),Lg(8,ne);break;case 23:break;case 22:var qe=ne.stateNode;ne.memoizedState!==null?qe._visibility&2?id(z,ne,ue,Be,U):Og(z,ne):(qe._visibility|=2,id(z,ne,ue,Be,U)),U&&ke&2048&&GB(ne.alternate,ne);break;case 24:id(z,ne,ue,Be,U),U&&ke&2048&&jB(ne.alternate,ne);break;default:id(z,ne,ue,Be,U)}h=h.sibling}}function Og(A,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=A,x=h,U=x.flags;switch(x.tag){case 22:Og(y,x),U&2048&&GB(x.alternate,x);break;case 24:Og(y,x),U&2048&&jB(x.alternate,x);break;default:Og(y,x)}h=h.sibling}}var Ng=8192;function sd(A){if(A.subtreeFlags&Ng)for(A=A.child;A!==null;)Dk(A),A=A.sibling}function Dk(A){switch(A.tag){case 26:sd(A),A.flags&Ng&&A.memoizedState!==null&&une(Zo,A.memoizedState,A.memoizedProps);break;case 5:sd(A);break;case 3:case 4:var h=Zo;Zo=kw(A.stateNode.containerInfo),sd(A),Zo=h;break;case 22:A.memoizedState===null&&(h=A.alternate,h!==null&&h.memoizedState!==null?(h=Ng,Ng=16777216,sd(A),Ng=h):sd(A));break;default:sd(A)}}function Ok(A){var h=A.alternate;if(h!==null&&(A=h.child,A!==null)){h.child=null;do h=A.sibling,A.sibling=null,A=h;while(A!==null)}}function Pg(A){var h=A.deletions;if((A.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var x=h[y];Ki=x,Pk(x,A)}Ok(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)Nk(A),A=A.sibling}function Nk(A){switch(A.tag){case 0:case 11:case 15:Pg(A),A.flags&2048&&Wu(9,A,A.return);break;case 3:Pg(A);break;case 12:Pg(A);break;case 22:var h=A.stateNode;A.memoizedState!==null&&h._visibility&2&&(A.return===null||A.return.tag!==13)?(h._visibility&=-3,Mw(A)):Pg(A);break;default:Pg(A)}}function Mw(A){var h=A.deletions;if((A.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var x=h[y];Ki=x,Pk(x,A)}Ok(A)}for(A=A.child;A!==null;){switch(h=A,h.tag){case 0:case 11:case 15:Wu(8,h,h.return),Mw(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,Mw(h));break;default:Mw(h)}A=A.sibling}}function Pk(A,h){for(;Ki!==null;){var y=Ki;switch(y.tag){case 0:case 11:case 15:Wu(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var x=y.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:wg(y.memoizedState.cache)}if(x=y.child,x!==null)x.return=y,Ki=x;else e:for(y=A;Ki!==null;){x=Ki;var U=x.sibling,z=x.return;if(Tk(x),x===y){Ki=null;break e}if(U!==null){U.return=z,Ki=U;break e}Ki=z}}}var Bte={getCacheForType:function(A){var h=xs(Li),y=h.data.get(A);return y===void 0&&(y=A(),h.data.set(A,y)),y}},Mte=typeof WeakMap=="function"?WeakMap:Map,ir=0,wr=null,xn=null,Qn=0,sr=0,Oa=null,Yu=!1,ad=!1,WB=!1,Lc=0,Wr=0,Xu=0,Sf=0,KB=0,vo=0,od=0,kg=null,ca=null,qB=!1,YB=0,Cw=1/0,Tw=null,Zu=null,as=0,Ju=null,ld=null,cd=0,XB=0,ZB=null,kk=null,Hg=0,JB=null;function Na(){if((ir&2)!==0&&Qn!==0)return Qn&-Qn;if(L.T!==null){var A=Xh;return A!==0?A:sM()}return en()}function Hk(){vo===0&&(vo=(Qn&536870912)===0||Xn?Je():536870912);var A=go.current;return A!==null&&(A.flags|=32),vo}function Pa(A,h,y){(A===wr&&(sr===2||sr===9)||A.cancelPendingCommit!==null)&&(ud(A,0),$u(A,Qn,vo,!1)),Ye(A,y),((ir&2)===0||A!==wr)&&(A===wr&&((ir&2)===0&&(Sf|=y),Wr===4&&$u(A,Qn,vo,!1)),Il(A))}function Qk(A,h,y){if((ir&6)!==0)throw Error(n(327));var x=!y&&(h&124)===0&&(h&A.expiredLanes)===0||dt(A,h),U=x?Rte(A,h):tM(A,h,!0),z=x;do{if(U===0){ad&&!x&&$u(A,h,0,!1);break}else{if(y=A.current.alternate,z&&!Cte(y)){U=tM(A,h,!1),z=!1;continue}if(U===2){if(z=h,A.errorRecoveryDisabledLanes&z)var ne=0;else ne=A.pendingLanes&-536870913,ne=ne!==0?ne:ne&536870912?536870912:0;if(ne!==0){h=ne;e:{var ue=A;U=kg;var Be=ue.current.memoizedState.isDehydrated;if(Be&&(ud(ue,ne).flags|=256),ne=tM(ue,ne,!1),ne!==2){if(WB&&!Be){ue.errorRecoveryDisabledLanes|=z,Sf|=z,U=4;break e}z=ca,ca=U,z!==null&&(ca===null?ca=z:ca.push.apply(ca,z))}U=ne}if(z=!1,U!==2)continue}}if(U===1){ud(A,0),$u(A,h,0,!0);break}e:{switch(x=A,z=U,z){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:$u(x,h,vo,!Yu);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(U=YB+300-se(),10<U)){if($u(x,h,vo,!Yu),Ze(x,0,!0)!==0)break e;x.timeoutHandle=m4(zk.bind(null,x,y,ca,Tw,qB,h,vo,Sf,od,Yu,z,2,-0,0),U);break e}zk(x,y,ca,Tw,qB,h,vo,Sf,od,Yu,z,0,-0,0)}}break}while(!0);Il(A)}function zk(A,h,y,x,U,z,ne,ue,Be,ke,qe,$e,Qe,Ge){if(A.timeoutHandle=-1,$e=h.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(Kg={stylesheets:null,count:0,unsuspend:cne},Dk(h),$e=Ane(),$e!==null)){A.cancelPendingCommit=$e(Yk.bind(null,A,h,z,y,x,U,ne,ue,Be,qe,1,Qe,Ge)),$u(A,z,ne,!ke);return}Yk(A,h,z,y,x,U,ne,ue,Be)}function Cte(A){for(var h=A;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var x=0;x<y.length;x++){var U=y[x],z=U.getSnapshot;U=U.value;try{if(!Ua(z(),U))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===A)break;for(;h.sibling===null;){if(h.return===null||h.return===A)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function $u(A,h,y,x){h&=~KB,h&=~Sf,A.suspendedLanes|=h,A.pingedLanes&=~h,x&&(A.warmLanes|=h),x=A.expirationTimes;for(var U=h;0<U;){var z=31-X(U),ne=1<<z;x[z]=-1,U&=~ne}y!==0&&wt(A,y,h)}function Rw(){return(ir&6)===0?(Qg(0),!1):!0}function $B(){if(xn!==null){if(sr===0)var A=xn.return;else A=xn,Bc=yf=null,mB(A),nd=null,Ig=0,A=xn;for(;A!==null;)_k(A.alternate,A),A=A.return;xn=null}}function ud(A,h){var y=A.timeoutHandle;y!==-1&&(A.timeoutHandle=-1,Wte(y)),y=A.cancelPendingCommit,y!==null&&(A.cancelPendingCommit=null,y()),$B(),wr=A,xn=y=bc(A.current,null),Qn=h,sr=0,Oa=null,Yu=!1,ad=dt(A,h),WB=!1,od=vo=KB=Sf=Xu=Wr=0,ca=kg=null,qB=!1,(h&8)!==0&&(h|=h&32);var x=A.entangledLanes;if(x!==0)for(A=A.entanglements,x&=h;0<x;){var U=31-X(x),z=1<<U;h|=A[U],x&=~z}return Lc=h,Jy(),y}function Vk(A,h){fn=null,L.H=gw,h===xg||h===ow?(h=a3(),sr=3):h===r3?(h=a3(),sr=4):sr=h===ok?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Oa=h,xn===null&&(Wr=1,xw(A,fo(h,A.current)))}function Gk(){var A=L.H;return L.H=gw,A===null?gw:A}function jk(){var A=L.A;return L.A=Bte,A}function eM(){Wr=4,Yu||(Qn&4194048)!==Qn&&go.current!==null||(ad=!0),(Xu&134217727)===0&&(Sf&134217727)===0||wr===null||$u(wr,Qn,vo,!1)}function tM(A,h,y){var x=ir;ir|=2;var U=Gk(),z=jk();(wr!==A||Qn!==h)&&(Tw=null,ud(A,h)),h=!1;var ne=Wr;e:do try{if(sr!==0&&xn!==null){var ue=xn,Be=Oa;switch(sr){case 8:$B(),ne=6;break e;case 3:case 2:case 9:case 6:go.current===null&&(h=!0);var ke=sr;if(sr=0,Oa=null,Ad(A,ue,Be,ke),y&&ad){ne=0;break e}break;default:ke=sr,sr=0,Oa=null,Ad(A,ue,Be,ke)}}Tte(),ne=Wr;break}catch(qe){Vk(A,qe)}while(!0);return h&&A.shellSuspendCounter++,Bc=yf=null,ir=x,L.H=U,L.A=z,xn===null&&(wr=null,Qn=0,Jy()),ne}function Tte(){for(;xn!==null;)Wk(xn)}function Rte(A,h){var y=ir;ir|=2;var x=Gk(),U=jk();wr!==A||Qn!==h?(Tw=null,Cw=se()+500,ud(A,h)):ad=dt(A,h);e:do try{if(sr!==0&&xn!==null){h=xn;var z=Oa;t:switch(sr){case 1:sr=0,Oa=null,Ad(A,h,z,1);break;case 2:case 9:if(i3(z)){sr=0,Oa=null,Kk(h);break}h=function(){sr!==2&&sr!==9||wr!==A||(sr=7),Il(A)},z.then(h,h);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:i3(z)?(sr=0,Oa=null,Kk(h)):(sr=0,Oa=null,Ad(A,h,z,7));break;case 5:var ne=null;switch(xn.tag){case 26:ne=xn.memoizedState;case 5:case 27:var ue=xn;if(!ne||C4(ne)){sr=0,Oa=null;var Be=ue.sibling;if(Be!==null)xn=Be;else{var ke=ue.return;ke!==null?(xn=ke,Iw(ke)):xn=null}break t}}sr=0,Oa=null,Ad(A,h,z,5);break;case 6:sr=0,Oa=null,Ad(A,h,z,6);break;case 8:$B(),Wr=6;break e;default:throw Error(n(462))}}Ite();break}catch(qe){Vk(A,qe)}while(!0);return Bc=yf=null,L.H=x,L.A=U,ir=y,xn!==null?0:(wr=null,Qn=0,Jy(),Wr)}function Ite(){for(;xn!==null&&!ve();)Wk(xn)}function Wk(A){var h=yk(A.alternate,A,Lc);A.memoizedProps=A.pendingProps,h===null?Iw(A):xn=h}function Kk(A){var h=A,y=h.alternate;switch(h.tag){case 15:case 0:h=hk(y,h,h.pendingProps,h.type,void 0,Qn);break;case 11:h=hk(y,h,h.pendingProps,h.type.render,h.ref,Qn);break;case 5:mB(h);default:_k(y,h),h=xn=qP(h,Lc),h=yk(y,h,Lc)}A.memoizedProps=A.pendingProps,h===null?Iw(A):xn=h}function Ad(A,h,y,x){Bc=yf=null,mB(h),nd=null,Ig=0;var U=h.return;try{if(wte(A,U,h,y,Qn)){Wr=1,xw(A,fo(y,A.current)),xn=null;return}}catch(z){if(U!==null)throw xn=U,z;Wr=1,xw(A,fo(y,A.current)),xn=null;return}h.flags&32768?(Xn||x===1?A=!0:ad||(Qn&536870912)!==0?A=!1:(Yu=A=!0,(x===2||x===9||x===3||x===6)&&(x=go.current,x!==null&&x.tag===13&&(x.flags|=16384))),qk(h,A)):Iw(h)}function Iw(A){var h=A;do{if((h.flags&32768)!==0){qk(h,Yu);return}A=h.return;var y=xte(h.alternate,h,Lc);if(y!==null){xn=y;return}if(h=h.sibling,h!==null){xn=h;return}xn=h=A}while(h!==null);Wr===0&&(Wr=5)}function qk(A,h){do{var y=bte(A.alternate,A);if(y!==null){y.flags&=32767,xn=y;return}if(y=A.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(A=A.sibling,A!==null)){xn=A;return}xn=A=y}while(A!==null);Wr=6,xn=null}function Yk(A,h,y,x,U,z,ne,ue,Be){A.cancelPendingCommit=null;do Uw();while(as!==0);if((ir&6)!==0)throw Error(n(327));if(h!==null){if(h===A.current)throw Error(n(177));if(z=h.lanes|h.childLanes,z|=jS,rt(A,y,z,ne,ue,Be),A===wr&&(xn=wr=null,Qn=0),ld=h,Ju=A,cd=y,XB=z,ZB=U,kk=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Dte($,function(){return e4(),null})):(A.callbackNode=null,A.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=L.T,L.T=null,U=Q.p,Q.p=2,ne=ir,ir|=4;try{Ete(A,h,y)}finally{ir=ne,Q.p=U,L.T=x}}as=1,Xk(),Zk(),Jk()}}function Xk(){if(as===1){as=0;var A=Ju,h=ld,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=L.T,L.T=null;var x=Q.p;Q.p=2;var U=ir;ir|=4;try{Uk(h,A);var z=hM,ne=PP(A.containerInfo),ue=z.focusedElem,Be=z.selectionRange;if(ne!==ue&&ue&&ue.ownerDocument&&NP(ue.ownerDocument.documentElement,ue)){if(Be!==null&&HS(ue)){var ke=Be.start,qe=Be.end;if(qe===void 0&&(qe=ke),"selectionStart"in ue)ue.selectionStart=ke,ue.selectionEnd=Math.min(qe,ue.value.length);else{var $e=ue.ownerDocument||document,Qe=$e&&$e.defaultView||window;if(Qe.getSelection){var Ge=Qe.getSelection(),Zt=ue.textContent.length,zt=Math.min(Be.start,Zt),hr=Be.end===void 0?zt:Math.min(Be.end,Zt);!Ge.extend&&zt>hr&&(ne=hr,hr=zt,zt=ne);var Le=OP(ue,zt),Ie=OP(ue,hr);if(Le&&Ie&&(Ge.rangeCount!==1||Ge.anchorNode!==Le.node||Ge.anchorOffset!==Le.offset||Ge.focusNode!==Ie.node||Ge.focusOffset!==Ie.offset)){var Oe=$e.createRange();Oe.setStart(Le.node,Le.offset),Ge.removeAllRanges(),zt>hr?(Ge.addRange(Oe),Ge.extend(Ie.node,Ie.offset)):(Oe.setEnd(Ie.node,Ie.offset),Ge.addRange(Oe))}}}}for($e=[],Ge=ue;Ge=Ge.parentNode;)Ge.nodeType===1&&$e.push({element:Ge,left:Ge.scrollLeft,top:Ge.scrollTop});for(typeof ue.focus=="function"&&ue.focus(),ue=0;ue<$e.length;ue++){var Xe=$e[ue];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}Gw=!!fM,hM=fM=null}finally{ir=U,Q.p=x,L.T=y}}A.current=h,as=2}}function Zk(){if(as===2){as=0;var A=Ju,h=ld,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=L.T,L.T=null;var x=Q.p;Q.p=2;var U=ir;ir|=4;try{Ck(A,h.alternate,h)}finally{ir=U,Q.p=x,L.T=y}}as=3}}function Jk(){if(as===4||as===3){as=0,ye();var A=Ju,h=ld,y=cd,x=kk;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?as=5:(as=0,ld=Ju=null,$k(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(Zu=null),bt(y),h=h.stateNode,J&&typeof J.onCommitFiberRoot=="function")try{J.onCommitFiberRoot(De,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=L.T,U=Q.p,Q.p=2,L.T=null;try{for(var z=A.onRecoverableError,ne=0;ne<x.length;ne++){var ue=x[ne];z(ue.value,{componentStack:ue.stack})}}finally{L.T=h,Q.p=U}}(cd&3)!==0&&Uw(),Il(A),U=A.pendingLanes,(y&4194090)!==0&&(U&42)!==0?A===JB?Hg++:(Hg=0,JB=A):Hg=0,Qg(0)}}function $k(A,h){(A.pooledCacheLanes&=h)===0&&(h=A.pooledCache,h!=null&&(A.pooledCache=null,wg(h)))}function Uw(A){return Xk(),Zk(),Jk(),e4()}function e4(){if(as!==5)return!1;var A=Ju,h=XB;XB=0;var y=bt(cd),x=L.T,U=Q.p;try{Q.p=32>y?32:y,L.T=null,y=ZB,ZB=null;var z=Ju,ne=cd;if(as=0,ld=Ju=null,cd=0,(ir&6)!==0)throw Error(n(331));var ue=ir;if(ir|=4,Nk(z.current),Lk(z,z.current,ne,y),ir=ue,Qg(0,!1),J&&typeof J.onPostCommitFiberRoot=="function")try{J.onPostCommitFiberRoot(De,z)}catch{}return!0}finally{Q.p=U,L.T=x,$k(A,h)}}function t4(A,h,y){h=fo(y,h),h=RB(A.stateNode,h,2),A=zu(A,h,2),A!==null&&(Ye(A,2),Il(A))}function mr(A,h,y){if(A.tag===3)t4(A,A,y);else for(;h!==null;){if(h.tag===3){t4(h,A,y);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Zu===null||!Zu.has(x))){A=fo(y,A),y=sk(2),x=zu(h,y,2),x!==null&&(ak(y,x,h,A),Ye(x,2),Il(x));break}}h=h.return}}function nM(A,h,y){var x=A.pingCache;if(x===null){x=A.pingCache=new Mte;var U=new Set;x.set(h,U)}else U=x.get(h),U===void 0&&(U=new Set,x.set(h,U));U.has(y)||(WB=!0,U.add(y),A=Ute.bind(null,A,h,y),h.then(A,A))}function Ute(A,h,y){var x=A.pingCache;x!==null&&x.delete(h),A.pingedLanes|=A.suspendedLanes&y,A.warmLanes&=~y,wr===A&&(Qn&y)===y&&(Wr===4||Wr===3&&(Qn&62914560)===Qn&&300>se()-YB?(ir&2)===0&&ud(A,0):KB|=y,od===Qn&&(od=0)),Il(A)}function n4(A,h){h===0&&(h=Ve()),A=Wh(A,h),A!==null&&(Ye(A,h),Il(A))}function Fte(A){var h=A.memoizedState,y=0;h!==null&&(y=h.retryLane),n4(A,y)}function Lte(A,h){var y=0;switch(A.tag){case 13:var x=A.stateNode,U=A.memoizedState;U!==null&&(y=U.retryLane);break;case 19:x=A.stateNode;break;case 22:x=A.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(h),n4(A,y)}function Dte(A,h){return de(A,h)}var Fw=null,fd=null,rM=!1,Lw=!1,iM=!1,Bf=0;function Il(A){A!==fd&&A.next===null&&(fd===null?Fw=fd=A:fd=fd.next=A),Lw=!0,rM||(rM=!0,Nte())}function Qg(A,h){if(!iM&&Lw){iM=!0;do for(var y=!1,x=Fw;x!==null;){if(A!==0){var U=x.pendingLanes;if(U===0)var z=0;else{var ne=x.suspendedLanes,ue=x.pingedLanes;z=(1<<31-X(42|A)+1)-1,z&=U&~(ne&~ue),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(y=!0,a4(x,z))}else z=Qn,z=Ze(x,x===wr?z:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(z&3)===0||dt(x,z)||(y=!0,a4(x,z));x=x.next}while(y);iM=!1}}function Ote(){r4()}function r4(){Lw=rM=!1;var A=0;Bf!==0&&(jte()&&(A=Bf),Bf=0);for(var h=se(),y=null,x=Fw;x!==null;){var U=x.next,z=i4(x,h);z===0?(x.next=null,y===null?Fw=U:y.next=U,U===null&&(fd=y)):(y=x,(A!==0||(z&3)!==0)&&(Lw=!0)),x=U}Qg(A)}function i4(A,h){for(var y=A.suspendedLanes,x=A.pingedLanes,U=A.expirationTimes,z=A.pendingLanes&-62914561;0<z;){var ne=31-X(z),ue=1<<ne,Be=U[ne];Be===-1?((ue&y)===0||(ue&x)!==0)&&(U[ne]=Se(ue,h)):Be<=h&&(A.expiredLanes|=ue),z&=~ue}if(h=wr,y=Qn,y=Ze(A,A===h?y:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),x=A.callbackNode,y===0||A===h&&(sr===2||sr===9)||A.cancelPendingCommit!==null)return x!==null&&x!==null&&Z(x),A.callbackNode=null,A.callbackPriority=0;if((y&3)===0||dt(A,y)){if(h=y&-y,h===A.callbackPriority)return h;switch(x!==null&&Z(x),bt(y)){case 2:case 8:y=ie;break;case 32:y=$;break;case 268435456:y=pe;break;default:y=$}return x=s4.bind(null,A),y=de(y,x),A.callbackPriority=h,A.callbackNode=y,h}return x!==null&&x!==null&&Z(x),A.callbackPriority=2,A.callbackNode=null,2}function s4(A,h){if(as!==0&&as!==5)return A.callbackNode=null,A.callbackPriority=0,null;var y=A.callbackNode;if(Uw()&&A.callbackNode!==y)return null;var x=Qn;return x=Ze(A,A===wr?x:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),x===0?null:(Qk(A,x,h),i4(A,se()),A.callbackNode!=null&&A.callbackNode===y?s4.bind(null,A):null)}function a4(A,h){if(Uw())return null;Qk(A,h,!0)}function Nte(){Kte(function(){(ir&6)!==0?de(_e,Ote):r4()})}function sM(){return Bf===0&&(Bf=Je()),Bf}function o4(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:jy(""+A)}function l4(A,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,A.id&&y.setAttribute("form",A.id),h.parentNode.insertBefore(y,h),A=new FormData(A),y.parentNode.removeChild(y),A}function Pte(A,h,y,x,U){if(h==="submit"&&y&&y.stateNode===U){var z=o4((U[jn]||null).action),ne=x.submitter;ne&&(h=(h=ne[jn]||null)?o4(h.formAction):ne.getAttribute("formAction"),h!==null&&(z=h,ne=null));var ue=new Yy("action","action",null,x,U);A.push({event:ue,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Bf!==0){var Be=ne?l4(U,ne):new FormData(U);SB(y,{pending:!0,data:Be,method:U.method,action:z},null,Be)}}else typeof z=="function"&&(ue.preventDefault(),Be=ne?l4(U,ne):new FormData(U),SB(y,{pending:!0,data:Be,method:U.method,action:z},z,Be))},currentTarget:U}]})}}for(var aM=0;aM<GS.length;aM++){var oM=GS[aM],kte=oM.toLowerCase(),Hte=oM[0].toUpperCase()+oM.slice(1);Xo(kte,"on"+Hte)}Xo(QP,"onAnimationEnd"),Xo(zP,"onAnimationIteration"),Xo(VP,"onAnimationStart"),Xo("dblclick","onDoubleClick"),Xo("focusin","onFocus"),Xo("focusout","onBlur"),Xo(rte,"onTransitionRun"),Xo(ite,"onTransitionStart"),Xo(ste,"onTransitionCancel"),Xo(GP,"onTransitionEnd"),Fe("onMouseEnter",["mouseout","mouseover"]),Fe("onMouseLeave",["mouseout","mouseover"]),Fe("onPointerEnter",["pointerout","pointerover"]),Fe("onPointerLeave",["pointerout","pointerover"]),Pe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zg));function c4(A,h){h=(h&4)!==0;for(var y=0;y<A.length;y++){var x=A[y],U=x.event;x=x.listeners;e:{var z=void 0;if(h)for(var ne=x.length-1;0<=ne;ne--){var ue=x[ne],Be=ue.instance,ke=ue.currentTarget;if(ue=ue.listener,Be!==z&&U.isPropagationStopped())break e;z=ue,U.currentTarget=ke;try{z(U)}catch(qe){_w(qe)}U.currentTarget=null,z=Be}else for(ne=0;ne<x.length;ne++){if(ue=x[ne],Be=ue.instance,ke=ue.currentTarget,ue=ue.listener,Be!==z&&U.isPropagationStopped())break e;z=ue,U.currentTarget=ke;try{z(U)}catch(qe){_w(qe)}U.currentTarget=null,z=Be}}}}function bn(A,h){var y=h[Pn];y===void 0&&(y=h[Pn]=new Set);var x=A+"__bubble";y.has(x)||(u4(h,A,2,!1),y.add(x))}function lM(A,h,y){var x=0;h&&(x|=4),u4(y,A,x,h)}var Dw="_reactListening"+Math.random().toString(36).slice(2);function cM(A){if(!A[Dw]){A[Dw]=!0,Ue.forEach(function(y){y!=="selectionchange"&&(Qte.has(y)||lM(y,!1,A),lM(y,!0,A))});var h=A.nodeType===9?A:A.ownerDocument;h===null||h[Dw]||(h[Dw]=!0,lM("selectionchange",!1,h))}}function u4(A,h,y,x){switch(L4(h)){case 2:var U=dne;break;case 8:U=pne;break;default:U=bM}y=U.bind(null,h,y,A),U=void 0,!IS||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(U=!0),x?U!==void 0?A.addEventListener(h,y,{capture:!0,passive:U}):A.addEventListener(h,y,!0):U!==void 0?A.addEventListener(h,y,{passive:U}):A.addEventListener(h,y,!1)}function uM(A,h,y,x,U){var z=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var ne=x.tag;if(ne===3||ne===4){var ue=x.stateNode.containerInfo;if(ue===U)break;if(ne===4)for(ne=x.return;ne!==null;){var Be=ne.tag;if((Be===3||Be===4)&&ne.stateNode.containerInfo===U)return;ne=ne.return}for(;ue!==null;){if(ne=yn(ue),ne===null)return;if(Be=ne.tag,Be===5||Be===6||Be===26||Be===27){x=z=ne;continue e}ue=ue.parentNode}}x=x.return}gP(function(){var ke=z,qe=TS(y),$e=[];e:{var Qe=jP.get(A);if(Qe!==void 0){var Ge=Yy,Zt=A;switch(A){case"keypress":if(Ky(y)===0)break e;case"keydown":case"keyup":Ge=Dee;break;case"focusin":Zt="focus",Ge=DS;break;case"focusout":Zt="blur",Ge=DS;break;case"beforeblur":case"afterblur":Ge=DS;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=wP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=bee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=Pee;break;case QP:case zP:case VP:Ge=Bee;break;case GP:Ge=Hee;break;case"scroll":case"scrollend":Ge=_ee;break;case"wheel":Ge=zee;break;case"copy":case"cut":case"paste":Ge=Cee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=xP;break;case"toggle":case"beforetoggle":Ge=Gee}var zt=(h&4)!==0,hr=!zt&&(A==="scroll"||A==="scrollend"),Le=zt?Qe!==null?Qe+"Capture":null:Qe;zt=[];for(var Ie=ke,Oe;Ie!==null;){var Xe=Ie;if(Oe=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Oe===null||Le===null||(Xe=og(Ie,Le),Xe!=null&&zt.push(Vg(Ie,Xe,Oe))),hr)break;Ie=Ie.return}0<zt.length&&(Qe=new Ge(Qe,Zt,null,y,qe),$e.push({event:Qe,listeners:zt}))}}if((h&7)===0){e:{if(Qe=A==="mouseover"||A==="pointerover",Ge=A==="mouseout"||A==="pointerout",Qe&&y!==CS&&(Zt=y.relatedTarget||y.fromElement)&&(yn(Zt)||Zt[pn]))break e;if((Ge||Qe)&&(Qe=qe.window===qe?qe:(Qe=qe.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,Ge?(Zt=y.relatedTarget||y.toElement,Ge=ke,Zt=Zt?yn(Zt):null,Zt!==null&&(hr=s(Zt),zt=Zt.tag,Zt!==hr||zt!==5&&zt!==27&&zt!==6)&&(Zt=null)):(Ge=null,Zt=ke),Ge!==Zt)){if(zt=wP,Xe="onMouseLeave",Le="onMouseEnter",Ie="mouse",(A==="pointerout"||A==="pointerover")&&(zt=xP,Xe="onPointerLeave",Le="onPointerEnter",Ie="pointer"),hr=Ge==null?Qe:Fn(Ge),Oe=Zt==null?Qe:Fn(Zt),Qe=new zt(Xe,Ie+"leave",Ge,y,qe),Qe.target=hr,Qe.relatedTarget=Oe,Xe=null,yn(qe)===ke&&(zt=new zt(Le,Ie+"enter",Zt,y,qe),zt.target=Oe,zt.relatedTarget=hr,Xe=zt),hr=Xe,Ge&&Zt)t:{for(zt=Ge,Le=Zt,Ie=0,Oe=zt;Oe;Oe=hd(Oe))Ie++;for(Oe=0,Xe=Le;Xe;Xe=hd(Xe))Oe++;for(;0<Ie-Oe;)zt=hd(zt),Ie--;for(;0<Oe-Ie;)Le=hd(Le),Oe--;for(;Ie--;){if(zt===Le||Le!==null&&zt===Le.alternate)break t;zt=hd(zt),Le=hd(Le)}zt=null}else zt=null;Ge!==null&&A4($e,Qe,Ge,zt,!1),Zt!==null&&hr!==null&&A4($e,hr,Zt,zt,!0)}}e:{if(Qe=ke?Fn(ke):window,Ge=Qe.nodeName&&Qe.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Qe.type==="file")var Bt=RP;else if(CP(Qe))if(IP)Bt=ete;else{Bt=Jee;var gn=Zee}else Ge=Qe.nodeName,!Ge||Ge.toLowerCase()!=="input"||Qe.type!=="checkbox"&&Qe.type!=="radio"?ke&&MS(ke.elementType)&&(Bt=RP):Bt=$ee;if(Bt&&(Bt=Bt(A,ke))){TP($e,Bt,y,qe);break e}gn&&gn(A,Qe,ke),A==="focusout"&&ke&&Qe.type==="number"&&ke.memoizedProps.value!=null&&ag(Qe,"number",Qe.value)}switch(gn=ke?Fn(ke):window,A){case"focusin":(CP(gn)||gn.contentEditable==="true")&&(Vh=gn,QS=ke,pg=null);break;case"focusout":pg=QS=Vh=null;break;case"mousedown":zS=!0;break;case"contextmenu":case"mouseup":case"dragend":zS=!1,kP($e,y,qe);break;case"selectionchange":if(nte)break;case"keydown":case"keyup":kP($e,y,qe)}var Ft;if(NS)e:{switch(A){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else zh?BP(A,y)&&(jt="onCompositionEnd"):A==="keydown"&&y.keyCode===229&&(jt="onCompositionStart");jt&&(bP&&y.locale!=="ko"&&(zh||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&zh&&(Ft=vP()):(Pu=qe,US="value"in Pu?Pu.value:Pu.textContent,zh=!0)),gn=Ow(ke,jt),0<gn.length&&(jt=new _P(jt,A,null,y,qe),$e.push({event:jt,listeners:gn}),Ft?jt.data=Ft:(Ft=MP(y),Ft!==null&&(jt.data=Ft)))),(Ft=Wee?Kee(A,y):qee(A,y))&&(jt=Ow(ke,"onBeforeInput"),0<jt.length&&(gn=new _P("onBeforeInput","beforeinput",null,y,qe),$e.push({event:gn,listeners:jt}),gn.data=Ft)),Pte($e,A,ke,y,qe)}c4($e,h)})}function Vg(A,h,y){return{instance:A,listener:h,currentTarget:y}}function Ow(A,h){for(var y=h+"Capture",x=[];A!==null;){var U=A,z=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||z===null||(U=og(A,y),U!=null&&x.unshift(Vg(A,U,z)),U=og(A,h),U!=null&&x.push(Vg(A,U,z))),A.tag===3)return x;A=A.return}return[]}function hd(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function A4(A,h,y,x,U){for(var z=h._reactName,ne=[];y!==null&&y!==x;){var ue=y,Be=ue.alternate,ke=ue.stateNode;if(ue=ue.tag,Be!==null&&Be===x)break;ue!==5&&ue!==26&&ue!==27||ke===null||(Be=ke,U?(ke=og(y,z),ke!=null&&ne.unshift(Vg(y,ke,Be))):U||(ke=og(y,z),ke!=null&&ne.push(Vg(y,ke,Be)))),y=y.return}ne.length!==0&&A.push({event:h,listeners:ne})}var zte=/\r\n?/g,Vte=/\u0000|\uFFFD/g;function f4(A){return(typeof A=="string"?A:""+A).replace(zte,`
`).replace(Vte,"")}function h4(A,h){return h=f4(h),f4(A)===h}function Nw(){}function fr(A,h,y,x,U,z){switch(y){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||kh(A,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&kh(A,""+x);break;case"className":Nt(A,"class",x);break;case"tabIndex":Nt(A,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Nt(A,y,x);break;case"style":pP(A,x,z);break;case"data":if(h!=="object"){Nt(A,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||y!=="href")){A.removeAttribute(y);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){A.removeAttribute(y);break}x=jy(""+x),A.setAttribute(y,x);break;case"action":case"formAction":if(typeof x=="function"){A.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(y==="formAction"?(h!=="input"&&fr(A,h,"name",U.name,U,null),fr(A,h,"formEncType",U.formEncType,U,null),fr(A,h,"formMethod",U.formMethod,U,null),fr(A,h,"formTarget",U.formTarget,U,null)):(fr(A,h,"encType",U.encType,U,null),fr(A,h,"method",U.method,U,null),fr(A,h,"target",U.target,U,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){A.removeAttribute(y);break}x=jy(""+x),A.setAttribute(y,x);break;case"onClick":x!=null&&(A.onclick=Nw);break;case"onScroll":x!=null&&bn("scroll",A);break;case"onScrollEnd":x!=null&&bn("scrollend",A);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(y=x.__html,y!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=y}}break;case"multiple":A.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":A.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){A.removeAttribute("xlink:href");break}y=jy(""+x),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?A.setAttribute(y,""+x):A.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?A.setAttribute(y,""):A.removeAttribute(y);break;case"capture":case"download":x===!0?A.setAttribute(y,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?A.setAttribute(y,x):A.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?A.setAttribute(y,x):A.removeAttribute(y);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?A.removeAttribute(y):A.setAttribute(y,x);break;case"popover":bn("beforetoggle",A),bn("toggle",A),Dt(A,"popover",x);break;case"xlinkActuate":_t(A,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":_t(A,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":_t(A,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":_t(A,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":_t(A,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":_t(A,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":_t(A,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":_t(A,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":_t(A,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Dt(A,"is",x);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=yee.get(y)||y,Dt(A,y,x))}}function AM(A,h,y,x,U,z){switch(y){case"style":pP(A,x,z);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(y=x.__html,y!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=y}}break;case"children":typeof x=="string"?kh(A,x):(typeof x=="number"||typeof x=="bigint")&&kh(A,""+x);break;case"onScroll":x!=null&&bn("scroll",A);break;case"onScrollEnd":x!=null&&bn("scrollend",A);break;case"onClick":x!=null&&(A.onclick=Nw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ne.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(U=y.endsWith("Capture"),h=y.slice(2,U?y.length-7:void 0),z=A[jn]||null,z=z!=null?z[y]:null,typeof z=="function"&&A.removeEventListener(h,z,U),typeof x=="function")){typeof z!="function"&&z!==null&&(y in A?A[y]=null:A.hasAttribute(y)&&A.removeAttribute(y)),A.addEventListener(h,x,U);break e}y in A?A[y]=x:x===!0?A.setAttribute(y,""):Dt(A,y,x)}}}function os(A,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bn("error",A),bn("load",A);var x=!1,U=!1,z;for(z in y)if(y.hasOwnProperty(z)){var ne=y[z];if(ne!=null)switch(z){case"src":x=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:fr(A,h,z,ne,y,null)}}U&&fr(A,h,"srcSet",y.srcSet,y,null),x&&fr(A,h,"src",y.src,y,null);return;case"input":bn("invalid",A);var ue=z=ne=U=null,Be=null,ke=null;for(x in y)if(y.hasOwnProperty(x)){var qe=y[x];if(qe!=null)switch(x){case"name":U=qe;break;case"type":ne=qe;break;case"checked":Be=qe;break;case"defaultChecked":ke=qe;break;case"value":z=qe;break;case"defaultValue":ue=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,h));break;default:fr(A,h,x,qe,y,null)}}Ph(A,z,ue,Be,ke,ne,U,!1),ji(A);return;case"select":bn("invalid",A),x=ne=z=null;for(U in y)if(y.hasOwnProperty(U)&&(ue=y[U],ue!=null))switch(U){case"value":z=ue;break;case"defaultValue":ne=ue;break;case"multiple":x=ue;default:fr(A,h,U,ue,y,null)}h=z,y=ne,A.multiple=!!x,h!=null?_c(A,!!x,h,!1):y!=null&&_c(A,!!x,y,!0);return;case"textarea":bn("invalid",A),z=U=x=null;for(ne in y)if(y.hasOwnProperty(ne)&&(ue=y[ne],ue!=null))switch(ne){case"value":x=ue;break;case"defaultValue":U=ue;break;case"children":z=ue;break;case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(91));break;default:fr(A,h,ne,ue,y,null)}hP(A,x,U,z),ji(A);return;case"option":for(Be in y)if(y.hasOwnProperty(Be)&&(x=y[Be],x!=null))switch(Be){case"selected":A.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:fr(A,h,Be,x,y,null)}return;case"dialog":bn("beforetoggle",A),bn("toggle",A),bn("cancel",A),bn("close",A);break;case"iframe":case"object":bn("load",A);break;case"video":case"audio":for(x=0;x<zg.length;x++)bn(zg[x],A);break;case"image":bn("error",A),bn("load",A);break;case"details":bn("toggle",A);break;case"embed":case"source":case"link":bn("error",A),bn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in y)if(y.hasOwnProperty(ke)&&(x=y[ke],x!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:fr(A,h,ke,x,y,null)}return;default:if(MS(h)){for(qe in y)y.hasOwnProperty(qe)&&(x=y[qe],x!==void 0&&AM(A,h,qe,x,y,void 0));return}}for(ue in y)y.hasOwnProperty(ue)&&(x=y[ue],x!=null&&fr(A,h,ue,x,y,null))}function Gte(A,h,y,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,z=null,ne=null,ue=null,Be=null,ke=null,qe=null;for(Ge in y){var $e=y[Ge];if(y.hasOwnProperty(Ge)&&$e!=null)switch(Ge){case"checked":break;case"value":break;case"defaultValue":Be=$e;default:x.hasOwnProperty(Ge)||fr(A,h,Ge,null,x,$e)}}for(var Qe in x){var Ge=x[Qe];if($e=y[Qe],x.hasOwnProperty(Qe)&&(Ge!=null||$e!=null))switch(Qe){case"type":z=Ge;break;case"name":U=Ge;break;case"checked":ke=Ge;break;case"defaultChecked":qe=Ge;break;case"value":ne=Ge;break;case"defaultValue":ue=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,h));break;default:Ge!==$e&&fr(A,h,Qe,Ge,x,$e)}}_s(A,ne,ue,Be,ke,qe,z,U);return;case"select":Ge=ne=ue=Qe=null;for(z in y)if(Be=y[z],y.hasOwnProperty(z)&&Be!=null)switch(z){case"value":break;case"multiple":Ge=Be;default:x.hasOwnProperty(z)||fr(A,h,z,null,x,Be)}for(U in x)if(z=x[U],Be=y[U],x.hasOwnProperty(U)&&(z!=null||Be!=null))switch(U){case"value":Qe=z;break;case"defaultValue":ue=z;break;case"multiple":ne=z;default:z!==Be&&fr(A,h,U,z,x,Be)}h=ue,y=ne,x=Ge,Qe!=null?_c(A,!!y,Qe,!1):!!x!=!!y&&(h!=null?_c(A,!!y,h,!0):_c(A,!!y,y?[]:"",!1));return;case"textarea":Ge=Qe=null;for(ue in y)if(U=y[ue],y.hasOwnProperty(ue)&&U!=null&&!x.hasOwnProperty(ue))switch(ue){case"value":break;case"children":break;default:fr(A,h,ue,null,x,U)}for(ne in x)if(U=x[ne],z=y[ne],x.hasOwnProperty(ne)&&(U!=null||z!=null))switch(ne){case"value":Qe=U;break;case"defaultValue":Ge=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==z&&fr(A,h,ne,U,x,z)}fP(A,Qe,Ge);return;case"option":for(var Zt in y)if(Qe=y[Zt],y.hasOwnProperty(Zt)&&Qe!=null&&!x.hasOwnProperty(Zt))switch(Zt){case"selected":A.selected=!1;break;default:fr(A,h,Zt,null,x,Qe)}for(Be in x)if(Qe=x[Be],Ge=y[Be],x.hasOwnProperty(Be)&&Qe!==Ge&&(Qe!=null||Ge!=null))switch(Be){case"selected":A.selected=Qe&&typeof Qe!="function"&&typeof Qe!="symbol";break;default:fr(A,h,Be,Qe,x,Ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var zt in y)Qe=y[zt],y.hasOwnProperty(zt)&&Qe!=null&&!x.hasOwnProperty(zt)&&fr(A,h,zt,null,x,Qe);for(ke in x)if(Qe=x[ke],Ge=y[ke],x.hasOwnProperty(ke)&&Qe!==Ge&&(Qe!=null||Ge!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Qe!=null)throw Error(n(137,h));break;default:fr(A,h,ke,Qe,x,Ge)}return;default:if(MS(h)){for(var hr in y)Qe=y[hr],y.hasOwnProperty(hr)&&Qe!==void 0&&!x.hasOwnProperty(hr)&&AM(A,h,hr,void 0,x,Qe);for(qe in x)Qe=x[qe],Ge=y[qe],!x.hasOwnProperty(qe)||Qe===Ge||Qe===void 0&&Ge===void 0||AM(A,h,qe,Qe,x,Ge);return}}for(var Le in y)Qe=y[Le],y.hasOwnProperty(Le)&&Qe!=null&&!x.hasOwnProperty(Le)&&fr(A,h,Le,null,x,Qe);for($e in x)Qe=x[$e],Ge=y[$e],!x.hasOwnProperty($e)||Qe===Ge||Qe==null&&Ge==null||fr(A,h,$e,Qe,x,Ge)}var fM=null,hM=null;function Pw(A){return A.nodeType===9?A:A.ownerDocument}function d4(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p4(A,h){if(A===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&h==="foreignObject"?0:A}function dM(A,h){return A==="textarea"||A==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var pM=null;function jte(){var A=window.event;return A&&A.type==="popstate"?A===pM?!1:(pM=A,!0):(pM=null,!1)}var m4=typeof setTimeout=="function"?setTimeout:void 0,Wte=typeof clearTimeout=="function"?clearTimeout:void 0,g4=typeof Promise=="function"?Promise:void 0,Kte=typeof queueMicrotask=="function"?queueMicrotask:typeof g4<"u"?function(A){return g4.resolve(null).then(A).catch(qte)}:m4;function qte(A){setTimeout(function(){throw A})}function eA(A){return A==="head"}function v4(A,h){var y=h,x=0,U=0;do{var z=y.nextSibling;if(A.removeChild(y),z&&z.nodeType===8)if(y=z.data,y==="/$"){if(0<x&&8>x){y=x;var ne=A.ownerDocument;if(y&1&&Gg(ne.documentElement),y&2&&Gg(ne.body),y&4)for(y=ne.head,Gg(y),ne=y.firstChild;ne;){var ue=ne.nextSibling,Be=ne.nodeName;ne[ii]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&ne.rel.toLowerCase()==="stylesheet"||y.removeChild(ne),ne=ue}}if(U===0){A.removeChild(z),Jg(h);return}U--}else y==="$"||y==="$?"||y==="$!"?U++:x=y.charCodeAt(0)-48;else x=0;y=z}while(y);Jg(h)}function mM(A){var h=A.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":mM(y),Hn(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}A.removeChild(y)}}function Yte(A,h,y,x){for(;A.nodeType===1;){var U=y;if(A.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(x){if(!A[ii])switch(h){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(z=A.getAttribute("rel"),z==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(z!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(z=A.getAttribute("src"),(z!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&z&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(h==="input"&&A.type==="hidden"){var z=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===z)return A}else return A;if(A=Jo(A.nextSibling),A===null)break}return null}function Xte(A,h,y){if(h==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!y||(A=Jo(A.nextSibling),A===null))return null;return A}function gM(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function Zte(A,h){var y=A.ownerDocument;if(A.data!=="$?"||y.readyState==="complete")h();else{var x=function(){h(),y.removeEventListener("DOMContentLoaded",x)};y.addEventListener("DOMContentLoaded",x),A._reactRetry=x}}function Jo(A){for(;A!=null;A=A.nextSibling){var h=A.nodeType;if(h===1||h===3)break;if(h===8){if(h=A.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return A}var vM=null;function y4(A){A=A.previousSibling;for(var h=0;A;){if(A.nodeType===8){var y=A.data;if(y==="$"||y==="$!"||y==="$?"){if(h===0)return A;h--}else y==="/$"&&h++}A=A.previousSibling}return null}function w4(A,h,y){switch(h=Pw(y),A){case"html":if(A=h.documentElement,!A)throw Error(n(452));return A;case"head":if(A=h.head,!A)throw Error(n(453));return A;case"body":if(A=h.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Gg(A){for(var h=A.attributes;h.length;)A.removeAttributeNode(h[0]);Hn(A)}var yo=new Map,_4=new Set;function kw(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Dc=Q.d;Q.d={f:Jte,r:$te,D:ene,C:tne,L:nne,m:rne,X:sne,S:ine,M:ane};function Jte(){var A=Dc.f(),h=Rw();return A||h}function $te(A){var h=is(A);h!==null&&h.tag===5&&h.type==="form"?Q3(h):Dc.r(A)}var dd=typeof document>"u"?null:document;function x4(A,h,y){var x=dd;if(x&&typeof h=="string"&&h){var U=ws(h);U='link[rel="'+A+'"][href="'+U+'"]',typeof y=="string"&&(U+='[crossorigin="'+y+'"]'),_4.has(U)||(_4.add(U),A={rel:A,crossOrigin:y,href:h},x.querySelector(U)===null&&(h=x.createElement("link"),os(h,"link",A),Ae(h),x.head.appendChild(h)))}}function ene(A){Dc.D(A),x4("dns-prefetch",A,null)}function tne(A,h){Dc.C(A,h),x4("preconnect",A,h)}function nne(A,h,y){Dc.L(A,h,y);var x=dd;if(x&&A&&h){var U='link[rel="preload"][as="'+ws(h)+'"]';h==="image"&&y&&y.imageSrcSet?(U+='[imagesrcset="'+ws(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(U+='[imagesizes="'+ws(y.imageSizes)+'"]')):U+='[href="'+ws(A)+'"]';var z=U;switch(h){case"style":z=pd(A);break;case"script":z=md(A)}yo.has(z)||(A=u({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:A,as:h},y),yo.set(z,A),x.querySelector(U)!==null||h==="style"&&x.querySelector(jg(z))||h==="script"&&x.querySelector(Wg(z))||(h=x.createElement("link"),os(h,"link",A),Ae(h),x.head.appendChild(h)))}}function rne(A,h){Dc.m(A,h);var y=dd;if(y&&A){var x=h&&typeof h.as=="string"?h.as:"script",U='link[rel="modulepreload"][as="'+ws(x)+'"][href="'+ws(A)+'"]',z=U;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=md(A)}if(!yo.has(z)&&(A=u({rel:"modulepreload",href:A},h),yo.set(z,A),y.querySelector(U)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Wg(z)))return}x=y.createElement("link"),os(x,"link",A),Ae(x),y.head.appendChild(x)}}}function ine(A,h,y){Dc.S(A,h,y);var x=dd;if(x&&A){var U=wn(x).hoistableStyles,z=pd(A);h=h||"default";var ne=U.get(z);if(!ne){var ue={loading:0,preload:null};if(ne=x.querySelector(jg(z)))ue.loading=5;else{A=u({rel:"stylesheet",href:A,"data-precedence":h},y),(y=yo.get(z))&&yM(A,y);var Be=ne=x.createElement("link");Ae(Be),os(Be,"link",A),Be._p=new Promise(function(ke,qe){Be.onload=ke,Be.onerror=qe}),Be.addEventListener("load",function(){ue.loading|=1}),Be.addEventListener("error",function(){ue.loading|=2}),ue.loading|=4,Hw(ne,h,x)}ne={type:"stylesheet",instance:ne,count:1,state:ue},U.set(z,ne)}}}function sne(A,h){Dc.X(A,h);var y=dd;if(y&&A){var x=wn(y).hoistableScripts,U=md(A),z=x.get(U);z||(z=y.querySelector(Wg(U)),z||(A=u({src:A,async:!0},h),(h=yo.get(U))&&wM(A,h),z=y.createElement("script"),Ae(z),os(z,"link",A),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(U,z))}}function ane(A,h){Dc.M(A,h);var y=dd;if(y&&A){var x=wn(y).hoistableScripts,U=md(A),z=x.get(U);z||(z=y.querySelector(Wg(U)),z||(A=u({src:A,async:!0,type:"module"},h),(h=yo.get(U))&&wM(A,h),z=y.createElement("script"),Ae(z),os(z,"link",A),y.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(U,z))}}function b4(A,h,y,x){var U=(U=te.current)?kw(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=pd(y.href),y=wn(U).hoistableStyles,x=y.get(h),x||(x={type:"style",instance:null,count:0,state:null},y.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){A=pd(y.href);var z=wn(U).hoistableStyles,ne=z.get(A);if(ne||(U=U.ownerDocument||U,ne={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(A,ne),(z=U.querySelector(jg(A)))&&!z._p&&(ne.instance=z,ne.state.loading=5),yo.has(A)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},yo.set(A,y),z||one(U,A,y,ne.state))),h&&x===null)throw Error(n(528,""));return ne}if(h&&x!==null)throw Error(n(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=md(y),y=wn(U).hoistableScripts,x=y.get(h),x||(x={type:"script",instance:null,count:0,state:null},y.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function pd(A){return'href="'+ws(A)+'"'}function jg(A){return'link[rel="stylesheet"]['+A+"]"}function E4(A){return u({},A,{"data-precedence":A.precedence,precedence:null})}function one(A,h,y,x){A.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=A.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),os(h,"link",y),Ae(h),A.head.appendChild(h))}function md(A){return'[src="'+ws(A)+'"]'}function Wg(A){return"script[async]"+A}function S4(A,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var x=A.querySelector('style[data-href~="'+ws(y.href)+'"]');if(x)return h.instance=x,Ae(x),x;var U=u({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return x=(A.ownerDocument||A).createElement("style"),Ae(x),os(x,"style",U),Hw(x,y.precedence,A),h.instance=x;case"stylesheet":U=pd(y.href);var z=A.querySelector(jg(U));if(z)return h.state.loading|=4,h.instance=z,Ae(z),z;x=E4(y),(U=yo.get(U))&&yM(x,U),z=(A.ownerDocument||A).createElement("link"),Ae(z);var ne=z;return ne._p=new Promise(function(ue,Be){ne.onload=ue,ne.onerror=Be}),os(z,"link",x),h.state.loading|=4,Hw(z,y.precedence,A),h.instance=z;case"script":return z=md(y.src),(U=A.querySelector(Wg(z)))?(h.instance=U,Ae(U),U):(x=y,(U=yo.get(z))&&(x=u({},y),wM(x,U)),A=A.ownerDocument||A,U=A.createElement("script"),Ae(U),os(U,"link",x),A.head.appendChild(U),h.instance=U);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,Hw(x,y.precedence,A));return h.instance}function Hw(A,h,y){for(var x=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=x.length?x[x.length-1]:null,z=U,ne=0;ne<x.length;ne++){var ue=x[ne];if(ue.dataset.precedence===h)z=ue;else if(z!==U)break}z?z.parentNode.insertBefore(A,z.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(A,h.firstChild))}function yM(A,h){A.crossOrigin==null&&(A.crossOrigin=h.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=h.referrerPolicy),A.title==null&&(A.title=h.title)}function wM(A,h){A.crossOrigin==null&&(A.crossOrigin=h.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=h.referrerPolicy),A.integrity==null&&(A.integrity=h.integrity)}var Qw=null;function B4(A,h,y){if(Qw===null){var x=new Map,U=Qw=new Map;U.set(y,x)}else U=Qw,x=U.get(y),x||(x=new Map,U.set(y,x));if(x.has(A))return x;for(x.set(A,null),y=y.getElementsByTagName(A),U=0;U<y.length;U++){var z=y[U];if(!(z[ii]||z[Xt]||A==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var ne=z.getAttribute(h)||"";ne=A+ne;var ue=x.get(ne);ue?ue.push(z):x.set(ne,[z])}}return x}function M4(A,h,y){A=A.ownerDocument||A,A.head.insertBefore(y,h==="title"?A.querySelector("head > title"):null)}function lne(A,h,y){if(y===1||h.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return A=h.disabled,typeof h.precedence=="string"&&A==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function C4(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Kg=null;function cne(){}function une(A,h,y){if(Kg===null)throw Error(n(475));var x=Kg;if(h.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var U=pd(y.href),z=A.querySelector(jg(U));if(z){A=z._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(x.count++,x=zw.bind(x),A.then(x,x)),h.state.loading|=4,h.instance=z,Ae(z);return}z=A.ownerDocument||A,y=E4(y),(U=yo.get(U))&&yM(y,U),z=z.createElement("link"),Ae(z);var ne=z;ne._p=new Promise(function(ue,Be){ne.onload=ue,ne.onerror=Be}),os(z,"link",y),h.instance=z}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,A),(A=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=zw.bind(x),A.addEventListener("load",h),A.addEventListener("error",h))}}function Ane(){if(Kg===null)throw Error(n(475));var A=Kg;return A.stylesheets&&A.count===0&&_M(A,A.stylesheets),0<A.count?function(h){var y=setTimeout(function(){if(A.stylesheets&&_M(A,A.stylesheets),A.unsuspend){var x=A.unsuspend;A.unsuspend=null,x()}},6e4);return A.unsuspend=h,function(){A.unsuspend=null,clearTimeout(y)}}:null}function zw(){if(this.count--,this.count===0){if(this.stylesheets)_M(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var Vw=null;function _M(A,h){A.stylesheets=null,A.unsuspend!==null&&(A.count++,Vw=new Map,h.forEach(fne,A),Vw=null,zw.call(A))}function fne(A,h){if(!(h.state.loading&4)){var y=Vw.get(A);if(y)var x=y.get(null);else{y=new Map,Vw.set(A,y);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<U.length;z++){var ne=U[z];(ne.nodeName==="LINK"||ne.getAttribute("media")!=="not all")&&(y.set(ne.dataset.precedence,ne),x=ne)}x&&y.set(null,x)}U=h.instance,ne=U.getAttribute("data-precedence"),z=y.get(ne)||x,z===x&&y.set(null,U),y.set(ne,U),this.count++,x=zw.bind(this),U.addEventListener("load",x),U.addEventListener("error",x),z?z.parentNode.insertBefore(U,z.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),h.state.loading|=4}}var qg={$$typeof:E,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hne(A,h,y,x,U,z,ne,ue){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=je(0),this.hiddenUpdates=je(null),this.identifierPrefix=x,this.onUncaughtError=U,this.onCaughtError=z,this.onRecoverableError=ne,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ue,this.incompleteTransitions=new Map}function T4(A,h,y,x,U,z,ne,ue,Be,ke,qe,$e){return A=new hne(A,h,y,ne,ue,Be,ke,$e),h=1,z===!0&&(h|=24),z=Fa(3,null,null,h),A.current=z,z.stateNode=A,h=nB(),h.refCount++,A.pooledCache=h,h.refCount++,z.memoizedState={element:x,isDehydrated:y,cache:h},aB(z),A}function R4(A){return A?(A=Kh,A):Kh}function I4(A,h,y,x,U,z){U=R4(U),x.context===null?x.context=U:x.pendingContext=U,x=Qu(h),x.payload={element:y},z=z===void 0?null:z,z!==null&&(x.callback=z),y=zu(A,x,h),y!==null&&(Pa(y,A,h),Eg(y,A,h))}function U4(A,h){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var y=A.retryLane;A.retryLane=y!==0&&y<h?y:h}}function xM(A,h){U4(A,h),(A=A.alternate)&&U4(A,h)}function F4(A){if(A.tag===13){var h=Wh(A,67108864);h!==null&&Pa(h,A,67108864),xM(A,67108864)}}var Gw=!0;function dne(A,h,y,x){var U=L.T;L.T=null;var z=Q.p;try{Q.p=2,bM(A,h,y,x)}finally{Q.p=z,L.T=U}}function pne(A,h,y,x){var U=L.T;L.T=null;var z=Q.p;try{Q.p=8,bM(A,h,y,x)}finally{Q.p=z,L.T=U}}function bM(A,h,y,x){if(Gw){var U=EM(x);if(U===null)uM(A,h,x,jw,y),D4(A,x);else if(gne(U,A,h,y,x))x.stopPropagation();else if(D4(A,x),h&4&&-1<mne.indexOf(A)){for(;U!==null;){var z=is(U);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var ne=et(z.pendingLanes);if(ne!==0){var ue=z;for(ue.pendingLanes|=2,ue.entangledLanes|=2;ne;){var Be=1<<31-X(ne);ue.entanglements[1]|=Be,ne&=~Be}Il(z),(ir&6)===0&&(Cw=se()+500,Qg(0))}}break;case 13:ue=Wh(z,2),ue!==null&&Pa(ue,z,2),Rw(),xM(z,2)}if(z=EM(x),z===null&&uM(A,h,x,jw,y),z===U)break;U=z}U!==null&&x.stopPropagation()}else uM(A,h,x,null,y)}}function EM(A){return A=TS(A),SM(A)}var jw=null;function SM(A){if(jw=null,A=yn(A),A!==null){var h=s(A);if(h===null)A=null;else{var y=h.tag;if(y===13){if(A=a(h),A!==null)return A;A=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;A=null}else h!==A&&(A=null)}}return jw=A,null}function L4(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case _e:return 2;case ie:return 8;case $:case ee:return 32;case pe:return 268435456;default:return 32}default:return 32}}var BM=!1,tA=null,nA=null,rA=null,Yg=new Map,Xg=new Map,iA=[],mne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D4(A,h){switch(A){case"focusin":case"focusout":tA=null;break;case"dragenter":case"dragleave":nA=null;break;case"mouseover":case"mouseout":rA=null;break;case"pointerover":case"pointerout":Yg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xg.delete(h.pointerId)}}function Zg(A,h,y,x,U,z){return A===null||A.nativeEvent!==z?(A={blockedOn:h,domEventName:y,eventSystemFlags:x,nativeEvent:z,targetContainers:[U]},h!==null&&(h=is(h),h!==null&&F4(h)),A):(A.eventSystemFlags|=x,h=A.targetContainers,U!==null&&h.indexOf(U)===-1&&h.push(U),A)}function gne(A,h,y,x,U){switch(h){case"focusin":return tA=Zg(tA,A,h,y,x,U),!0;case"dragenter":return nA=Zg(nA,A,h,y,x,U),!0;case"mouseover":return rA=Zg(rA,A,h,y,x,U),!0;case"pointerover":var z=U.pointerId;return Yg.set(z,Zg(Yg.get(z)||null,A,h,y,x,U)),!0;case"gotpointercapture":return z=U.pointerId,Xg.set(z,Zg(Xg.get(z)||null,A,h,y,x,U)),!0}return!1}function O4(A){var h=yn(A.target);if(h!==null){var y=s(h);if(y!==null){if(h=y.tag,h===13){if(h=a(y),h!==null){A.blockedOn=h,ri(A.priority,function(){if(y.tag===13){var x=Na();x=ur(x);var U=Wh(y,x);U!==null&&Pa(U,y,x),xM(y,x)}});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){A.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Ww(A){if(A.blockedOn!==null)return!1;for(var h=A.targetContainers;0<h.length;){var y=EM(A.nativeEvent);if(y===null){y=A.nativeEvent;var x=new y.constructor(y.type,y);CS=x,y.target.dispatchEvent(x),CS=null}else return h=is(y),h!==null&&F4(h),A.blockedOn=y,!1;h.shift()}return!0}function N4(A,h,y){Ww(A)&&y.delete(h)}function vne(){BM=!1,tA!==null&&Ww(tA)&&(tA=null),nA!==null&&Ww(nA)&&(nA=null),rA!==null&&Ww(rA)&&(rA=null),Yg.forEach(N4),Xg.forEach(N4)}function Kw(A,h){A.blockedOn===h&&(A.blockedOn=null,BM||(BM=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,vne)))}var qw=null;function P4(A){qw!==A&&(qw=A,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qw===A&&(qw=null);for(var h=0;h<A.length;h+=3){var y=A[h],x=A[h+1],U=A[h+2];if(typeof x!="function"){if(SM(x||y)===null)continue;break}var z=is(y);z!==null&&(A.splice(h,3),h-=3,SB(z,{pending:!0,data:U,method:y.method,action:x},x,U))}}))}function Jg(A){function h(Be){return Kw(Be,A)}tA!==null&&Kw(tA,A),nA!==null&&Kw(nA,A),rA!==null&&Kw(rA,A),Yg.forEach(h),Xg.forEach(h);for(var y=0;y<iA.length;y++){var x=iA[y];x.blockedOn===A&&(x.blockedOn=null)}for(;0<iA.length&&(y=iA[0],y.blockedOn===null);)O4(y),y.blockedOn===null&&iA.shift();if(y=(A.ownerDocument||A).$$reactFormReplay,y!=null)for(x=0;x<y.length;x+=3){var U=y[x],z=y[x+1],ne=U[jn]||null;if(typeof z=="function")ne||P4(y);else if(ne){var ue=null;if(z&&z.hasAttribute("formAction")){if(U=z,ne=z[jn]||null)ue=ne.formAction;else if(SM(U)!==null)continue}else ue=ne.action;typeof ue=="function"?y[x+1]=ue:(y.splice(x,3),x-=3),P4(y)}}}function MM(A){this._internalRoot=A}Yw.prototype.render=MM.prototype.render=function(A){var h=this._internalRoot;if(h===null)throw Error(n(409));var y=h.current,x=Na();I4(y,x,A,h,null,null)},Yw.prototype.unmount=MM.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var h=A.containerInfo;I4(A.current,2,null,A,null,null),Rw(),h[pn]=null}};function Yw(A){this._internalRoot=A}Yw.prototype.unstable_scheduleHydration=function(A){if(A){var h=en();A={blockedOn:null,target:A,priority:h};for(var y=0;y<iA.length&&h!==0&&h<iA[y].priority;y++);iA.splice(y,0,A),y===0&&O4(A)}};var k4=e.version;if(k4!=="19.1.0")throw Error(n(527,k4,"19.1.0"));Q.findDOMNode=function(A){var h=A._reactInternals;if(h===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(h),A=A!==null?c(A):null,A=A===null?null:A.stateNode,A};var yne={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xw.isDisabled&&Xw.supportsFiber)try{De=Xw.inject(yne),J=Xw}catch{}}return i0.createRoot=function(A,h){if(!i(A))throw Error(n(299));var y=!1,x="",U=tk,z=nk,ne=rk,ue=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(U=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(ne=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ue=h.unstable_transitionCallbacks)),h=T4(A,1,!1,null,null,y,x,U,z,ne,ue,null),A[pn]=h.current,cM(A),new MM(h)},i0.hydrateRoot=function(A,h,y){if(!i(A))throw Error(n(299));var x=!1,U="",z=tk,ne=nk,ue=rk,Be=null,ke=null;return y!=null&&(y.unstable_strictMode===!0&&(x=!0),y.identifierPrefix!==void 0&&(U=y.identifierPrefix),y.onUncaughtError!==void 0&&(z=y.onUncaughtError),y.onCaughtError!==void 0&&(ne=y.onCaughtError),y.onRecoverableError!==void 0&&(ue=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(Be=y.unstable_transitionCallbacks),y.formState!==void 0&&(ke=y.formState)),h=T4(A,1,!0,h,y??null,x,U,z,ne,ue,Be,ke),h.context=R4(null),y=h.current,x=Na(),x=ur(x),U=Qu(x),U.callback=null,zu(y,U,x),y=x,h.current.lanes=y,Ye(h,y),Il(h),A[pn]=h.current,cM(A),new Yw(h)},i0.version="19.1.0",i0}var iQ;function ase(){if(iQ)return tC.exports;iQ=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tC.exports=sse(),tC.exports}var ose=ase();const lse=na(ose),cse="/assets/cc_bgm_balanced-DbyyTCDY.wav",qo=we.createContext(),use=({children:r})=>{const[e,t]=we.useState(!1),n=le.useRef(null),i=()=>{t(!1);const a=n.current;a.src=cse,a.loop=!0,a.volume=0,a.play();let o=0;const l=5,c=setInterval(()=>{o=Math.max(o+1/(10*l*60),1),o>=1&&clearInterval(c),a.volume=o},1e3/60)},s=()=>{t(!0),n.current.pause()};return q.jsxs(qo.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[q.jsx("audio",{ref:n}),r]})},Ase=we.createContext(),fse=r=>{const[e,t]=we.useState(null),[n,i]=we.useState(null),[s,a]=we.useState(!1),[o,l]=we.useState([]);return q.jsx(Ase.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:n,setEnsName:i,connected:s,setConnected:a,OTTokens:o,setOTTokens:l},children:r.children})};function nu(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cK(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var to={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},pm={duration:.5,overwrite:!1,delay:0},PD,ps,Dr,Lo=1e8,vr=1/Lo,eF=Math.PI*2,hse=eF/4,dse=0,uK=Math.sqrt,pse=Math.cos,mse=Math.sin,ns=function(e){return typeof e=="string"},$r=function(e){return typeof e=="function"},_u=function(e){return typeof e=="number"},kD=function(e){return typeof e>"u"},lc=function(e){return typeof e=="object"},_a=function(e){return e!==!1},HD=function(){return typeof window<"u"},t_=function(e){return $r(e)||ns(e)},AK=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Qs=Array.isArray,tF=/(?:-?\.?\d|\.)+/gi,fK=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Np=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,sC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,hK=/[+-]=-?[.\d]+/,dK=/[^,'"\[\]\s]+/gi,gse=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Hr,jl,nF,QD,ro={},Wb={},pK,mK=function(e){return(Wb=mm(e,ro))&&Ma},zD=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Hv=function(e,t){return!t&&console.warn(e)},gK=function(e,t){return e&&(ro[e]=t)&&Wb&&(Wb[e]=t)||ro},Qv=function(){return 0},vse={suppressEvents:!0,isStart:!0,kill:!1},cb={suppressEvents:!0,kill:!1},yse={suppressEvents:!0},VD={},VA=[],rF={},vK,qa={},aC={},sQ=30,ub=[],GD="",jD=function(e){var t=e[0],n,i;if(lc(t)||$r(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=ub.length;i--&&!ub[i].targetTest(t););n=ub[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new zK(e[i],n)))||e.splice(i,1);return e},ih=function(e){return e._gsap||jD(Do(e))[0]._gsap},yK=function(e,t,n){return(n=e[t])&&$r(n)?e[t]():kD(n)&&e.getAttribute&&e.getAttribute(t)||n},xa=function(e,t){return(e=e.split(",")).forEach(t)||e},pi=function(e){return Math.round(e*1e5)/1e5||0},Ci=function(e){return Math.round(e*1e7)/1e7||0},$p=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},wse=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},Kb=function(){var e=VA.length,t=VA.slice(0),n,i;for(rF={},VA.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},WD=function(e){return!!(e._initted||e._startAt||e.add)},wK=function(e,t,n,i){VA.length&&!ps&&Kb(),e.render(t,n,!!(ps&&t<0&&WD(e))),VA.length&&!ps&&Kb()},_K=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(dK).length<2?t:ns(e)?e.trim():e},xK=function(e){return e},io=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},_se=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},mm=function(e,t){for(var n in t)e[n]=t[n];return e},aQ=function r(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=lc(t[n])?r(e[n]||(e[n]={}),t[n]):t[n]);return e},qb=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},yv=function(e){var t=e.parent||Hr,n=e.keyframes?_se(Qs(e.keyframes)):io;if(_a(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},xse=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},bK=function(e,t,n,i,s){var a=e[i],o;if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},mE=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=t._prev,a=t._next;s?s._next=a:e[n]===t&&(e[n]=a),a?a._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},XA=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},sh=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},bse=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},iF=function(e,t,n,i){return e._startAt&&(ps?e._startAt.revert(cb):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},Ese=function r(e){return!e||e._ts&&r(e.parent)},oQ=function(e){return e._repeat?gm(e._tTime,e=e.duration()+e._rDelay)*e:0},gm=function(e,t){var n=Math.floor(e=Ci(e/t));return e&&n===e?n-1:n},Yb=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},gE=function(e){return e._end=Ci(e._start+(e._tDur/Math.abs(e._ts||e._rts||vr)||0))},vE=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Ci(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),gE(e),n._dirty||sh(n,e)),e},EK=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Yb(e.rawTime(),t),(!t._dur||by(0,t.totalDuration(),n)-t._tTime>vr)&&t.render(n,!0)),sh(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-vr}},Xl=function(e,t,n,i){return t.parent&&XA(t),t._start=Ci((_u(n)?n:n||e!==Hr?So(e,n,t):e._time)+t._delay),t._end=Ci(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),bK(e,t,"_first","_last",e._sort?"_start":0),sF(t)||(e._recent=t),i||EK(e,t),e._ts<0&&vE(e,e._tTime),e},SK=function(e,t){return(ro.ScrollTrigger||zD("scrollTrigger",t))&&ro.ScrollTrigger.create(t,e)},BK=function(e,t,n,i,s){if(qD(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!ps&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&vK!==Ya.frame)return VA.push(e),e._lazy=[s,i],1},Sse=function r(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||r(t))},sF=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},Bse=function(e,t,n,i){var s=e.ratio,a=t<0||!t&&(!e._start&&Sse(e)&&!(!e._initted&&sF(e))||(e._ts<0||e._dp._ts<0)&&!sF(e))?0:1,o=e._rDelay,l=0,c,u,f;if(o&&e._repeat&&(l=by(0,e._tDur,t),u=gm(l,o),e._yoyo&&u&1&&(a=1-a),u!==gm(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ps||i||e._zTime===vr||!t&&e._zTime){if(!e._initted&&BK(e,t,i,n,l))return;for(f=e._zTime,e._zTime=t||(n?vr:0),n||(n=t&&!f),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=l,c=e._pt;c;)c.r(a,c.d),c=c._next;t<0&&iF(e,t,n,!0),e._onUpdate&&!n&&Za(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Za(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&XA(e,1),!n&&!ps&&(Za(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},Mse=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},vm=function(e,t,n,i){var s=e._repeat,a=Ci(t)||0,o=e._tTime/e._tDur;return o&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:Ci(a*(s+1)+e._rDelay*s):a,o>0&&!i&&vE(e,e._tTime=e._tDur*o),e.parent&&gE(e),n||sh(e.parent,e),e},lQ=function(e){return e instanceof Js?sh(e):vm(e,e._dur)},Cse={_start:0,endTime:Qv,totalDuration:Qv},So=function r(e,t,n){var i=e.labels,s=e._recent||Cse,a=e.duration()>=Lo?s.endTime(!1):e._dur,o,l,c;return ns(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(o<0?s:n).totalDuration()/100:1)):o<0?(t in i||(i[t]=a),i[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),c&&n&&(l=l/100*(Qs(n)?n[0]:n).totalDuration()),o>1?r(e,t.substr(0,o-1),n)+l:a+l)):t==null?a:+t},wv=function(e,t,n){var i=_u(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s],o,l;if(i&&(a.duration=t[1]),a.parent=n,e){for(o=a,l=n;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=_a(l.vars.inherit)&&l.parent;a.immediateRender=_a(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new Mi(t[0],a,t[s+1])},of=function(e,t){return e||e===0?t(e):t},by=function(e,t,n){return n<e?e:n>t?t:n},Ns=function(e,t){return!ns(e)||!(t=gse.exec(e))?"":t[1]},Tse=function(e,t,n){return of(n,function(i){return by(e,t,i)})},aF=[].slice,MK=function(e,t){return e&&lc(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&lc(e[0]))&&!e.nodeType&&e!==jl},Rse=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return ns(i)&&!t||MK(i,1)?(s=n).push.apply(s,Do(i)):n.push(i)})||n},Do=function(e,t,n){return Dr&&!t&&Dr.selector?Dr.selector(e):ns(e)&&!n&&(nF||!ym())?aF.call((t||QD).querySelectorAll(e),0):Qs(e)?Rse(e,n):MK(e)?aF.call(e,0):e?[e]:[]},oF=function(e){return e=Do(e)[0]||Hv("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Do(t,n.querySelectorAll?n:n===e?Hv("Invalid scope")||QD.createElement("div"):e)}},CK=function(e){return e.sort(function(){return .5-Math.random()})},TK=function(e){if($r(e))return e;var t=lc(e)?e:{each:e},n=ah(t.ease),i=t.from||0,s=parseFloat(t.base)||0,a={},o=i>0&&i<1,l=isNaN(i)||o,c=t.axis,u=i,f=i;return ns(i)?u=f={center:.5,edges:.5,end:1}[i]||0:!o&&l&&(u=i[0],f=i[1]),function(d,p,v){var m=(v||t).length,g=a[m],w,b,E,B,S,M,I,k,O;if(!g){if(O=t.grid==="auto"?0:(t.grid||[1,Lo])[1],!O){for(I=-Lo;I<(I=v[O++].getBoundingClientRect().left)&&O<m;);O<m&&O--}for(g=a[m]=[],w=l?Math.min(O,m)*u-.5:i%O,b=O===Lo?0:l?m*f/O-.5:i/O|0,I=0,k=Lo,M=0;M<m;M++)E=M%O-w,B=b-(M/O|0),g[M]=S=c?Math.abs(c==="y"?B:E):uK(E*E+B*B),S>I&&(I=S),S<k&&(k=S);i==="random"&&CK(g),g.max=I-k,g.min=k,g.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(O>m?m-1:c?c==="y"?m/O:O:Math.max(O,m/O))||0)*(i==="edges"?-1:1),g.b=m<0?s-m:s,g.u=Ns(t.amount||t.each)||0,n=n&&m<0?kK(n):n}return m=(g[d]-g.min)/g.max||0,Ci(g.b+(n?n(m):m)*g.v)+g.u}},lF=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=Ci(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(_u(n)?0:Ns(n))}},RK=function(e,t){var n=Qs(e),i,s;return!n&&lc(e)&&(i=n=e.radius||Lo,e.values?(e=Do(e.values),(s=!_u(e[0]))&&(i*=i)):e=lF(e.increment)),of(t,n?$r(e)?function(a){return s=e(a),Math.abs(s-a)<=i?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),c=Lo,u=0,f=e.length,d,p;f--;)s?(d=e[f].x-o,p=e[f].y-l,d=d*d+p*p):d=Math.abs(e[f]-o),d<c&&(c=d,u=f);return u=!i||c<=i?e[u]:a,s||u===a||_u(a)?u:u+Ns(a)}:lF(e))},IK=function(e,t,n,i){return of(Qs(e)?!t:n===!0?!!(n=0):!i,function(){return Qs(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},Ise=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(s,a){return a(s)},i)}},Use=function(e,t){return function(n){return e(parseFloat(n))+(t||Ns(n))}},Fse=function(e,t,n){return FK(e,t,0,1,n)},UK=function(e,t,n){return of(n,function(i){return e[~~t(i)]})},Lse=function r(e,t,n){var i=t-e;return Qs(e)?UK(e,r(0,e.length),t):of(n,function(s){return(i+(s-e)%i)%i+e})},Dse=function r(e,t,n){var i=t-e,s=i*2;return Qs(e)?UK(e,r(0,e.length-1),t):of(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},zv=function(e){for(var t=0,n="",i,s,a,o;~(i=e.indexOf("random(",t));)a=e.indexOf(")",i),o=e.charAt(i+7)==="[",s=e.substr(i+7,a-i-7).match(o?dK:tF),n+=e.substr(t,i-t)+IK(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return n+e.substr(t,e.length-t)},FK=function(e,t,n,i,s){var a=t-e,o=i-n;return of(s,function(l){return n+((l-e)/a*o||0)})},Ose=function r(e,t,n,i){var s=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!s){var a=ns(e),o={},l,c,u,f,d;if(n===!0&&(i=1)&&(n=null),a)e={p:e},t={p:t};else if(Qs(e)&&!Qs(t)){for(u=[],f=e.length,d=f-2,c=1;c<f;c++)u.push(r(e[c-1],e[c]));f--,s=function(v){v*=f;var m=Math.min(d,~~v);return u[m](v-m)},n=t}else i||(e=mm(Qs(e)?[]:{},e));if(!u){for(l in t)KD.call(o,e,l,"get",t[l]);s=function(v){return ZD(v,o)||(a?e.p:e)}}}return of(n,s)},cQ=function(e,t,n){var i=e.labels,s=Lo,a,o,l;for(a in i)o=i[a]-t,o<0==!!n&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Za=function(e,t,n){var i=e.vars,s=i[t],a=Dr,o=e._ctx,l,c,u;if(s)return l=i[t+"Params"],c=i.callbackScope||e,n&&VA.length&&Kb(),o&&(Dr=o),u=l?s.apply(c,l):s.call(c),Dr=a,u},Y0=function(e){return XA(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ps),e.progress()<1&&Za(e,"onInterrupt"),e},Pp,LK=[],DK=function(e){if(e)if(e=!e.name&&e.default||e,HD()||e.headless){var t=e.name,n=$r(e),i=t&&!n&&e.init?function(){this._props=[]}:e,s={init:Qv,render:ZD,add:KD,kill:Jse,modifier:Zse,rawVars:0},a={targetTest:0,get:0,getSetter:XD,aliases:{},register:0};if(ym(),e!==i){if(qa[t])return;io(i,io(qb(e,s),a)),mm(i.prototype,mm(s,qb(e,a))),qa[i.prop=t]=i,e.targetTest&&(ub.push(i),VD[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}gK(t,i),e.register&&e.register(Ma,i,ba)}else LK.push(e)},gr=255,X0={aqua:[0,gr,gr],lime:[0,gr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,gr],navy:[0,0,128],white:[gr,gr,gr],olive:[128,128,0],yellow:[gr,gr,0],orange:[gr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[gr,0,0],pink:[gr,192,203],cyan:[0,gr,gr],transparent:[gr,gr,gr,0]},oC=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*gr+.5|0},OK=function(e,t,n){var i=e?_u(e)?[e>>16,e>>8&gr,e&gr]:0:X0.black,s,a,o,l,c,u,f,d,p,v;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),X0[e])i=X0[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&gr,i&gr,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&gr,e&gr]}else if(e.substr(0,3)==="hsl"){if(i=v=e.match(tF),!t)l=+i[0]%360/360,c=+i[1]/100,u=+i[2]/100,a=u<=.5?u*(c+1):u+c-u*c,s=u*2-a,i.length>3&&(i[3]*=1),i[0]=oC(l+1/3,s,a),i[1]=oC(l,s,a),i[2]=oC(l-1/3,s,a);else if(~e.indexOf("="))return i=e.match(fK),n&&i.length<4&&(i[3]=1),i}else i=e.match(tF)||X0.transparent;i=i.map(Number)}return t&&!v&&(s=i[0]/gr,a=i[1]/gr,o=i[2]/gr,f=Math.max(s,a,o),d=Math.min(s,a,o),u=(f+d)/2,f===d?l=c=0:(p=f-d,c=u>.5?p/(2-f-d):p/(f+d),l=f===s?(a-o)/p+(a<o?6:0):f===a?(o-s)/p+2:(s-a)/p+4,l*=60),i[0]=~~(l+.5),i[1]=~~(c*100+.5),i[2]=~~(u*100+.5)),n&&i.length<4&&(i[3]=1),i},NK=function(e){var t=[],n=[],i=-1;return e.split(GA).forEach(function(s){var a=s.match(Np)||[];t.push.apply(t,a),n.push(i+=a.length+1)}),t.c=n,t},uQ=function(e,t,n){var i="",s=(e+i).match(GA),a=t?"hsla(":"rgba(",o=0,l,c,u,f;if(!s)return e;if(s=s.map(function(d){return(d=OK(d,t,1))&&a+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(u=NK(e),l=n.c,l.join(i)!==u.c.join(i)))for(c=e.replace(GA,"1").split(Np),f=c.length-1;o<f;o++)i+=c[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:n).shift());if(!c)for(c=e.split(GA),f=c.length-1;o<f;o++)i+=c[o]+s[o];return i+c[f]},GA=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in X0)r+="|"+e+"\\b";return new RegExp(r+")","gi")}(),Nse=/hsl[a]?\(/,PK=function(e){var t=e.join(" "),n;if(GA.lastIndex=0,GA.test(t))return n=Nse.test(t),e[1]=uQ(e[1],n),e[0]=uQ(e[0],n,NK(e[1])),!0},Vv,Ya=function(){var r=Date.now,e=500,t=33,n=r(),i=n,s=1e3/240,a=s,o=[],l,c,u,f,d,p,v=function m(g){var w=r()-i,b=g===!0,E,B,S,M;if((w>e||w<0)&&(n+=w-t),i+=w,S=i-n,E=S-a,(E>0||b)&&(M=++f.frame,d=S-f.time*1e3,f.time=S=S/1e3,a+=E+(E>=s?4:s-E),B=1),b||(l=c(m)),B)for(p=0;p<o.length;p++)o[p](S,d,M,g)};return f={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){pK&&(!nF&&HD()&&(jl=nF=window,QD=jl.document||{},ro.gsap=Ma,(jl.gsapVersions||(jl.gsapVersions=[])).push(Ma.version),mK(Wb||jl.GreenSockGlobals||!jl.gsap&&jl||{}),LK.forEach(DK)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&f.sleep(),c=u||function(g){return setTimeout(g,a-f.time*1e3+1|0)},Vv=1,v(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),Vv=0,c=Qv},lagSmoothing:function(g,w){e=g||1/0,t=Math.min(w||33,e)},fps:function(g){s=1e3/(g||240),a=f.time*1e3+s},add:function(g,w,b){var E=w?function(B,S,M,I){g(B,S,M,I),f.remove(E)}:g;return f.remove(g),o[b?"unshift":"push"](E),ym(),E},remove:function(g,w){~(w=o.indexOf(g))&&o.splice(w,1)&&p>=w&&p--},_listeners:o},f}(),ym=function(){return!Vv&&Ya.wake()},Nn={},Pse=/^[\d.\-M][\d.\-,\s]/,kse=/["']/g,Hse=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,a=n.length,o,l,c;s<a;s++)l=n[s],o=s!==a-1?l.lastIndexOf(","):l.length,c=l.substr(0,o),t[i]=isNaN(c)?c.replace(kse,"").trim():+c,i=l.substr(o+1).trim();return t},Qse=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},zse=function(e){var t=(e+"").split("("),n=Nn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Hse(t[1])]:Qse(e).split(",").map(_K)):Nn._CE&&Pse.test(e)?Nn._CE("",e):n},kK=function(e){return function(t){return 1-e(1-t)}},HK=function r(e,t){for(var n=e._first,i;n;)n instanceof Js?r(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?r(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},ah=function(e,t){return e&&($r(e)?e:Nn[e]||zse(e))||t},Eh=function(e,t,n,i){n===void 0&&(n=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:i},a;return xa(e,function(o){Nn[o]=ro[o]=s,Nn[a=o.toLowerCase()]=n;for(var l in s)Nn[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Nn[o+"."+l]=s[l]}),s},QK=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},lC=function r(e,t,n){var i=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),a=s/eF*(Math.asin(1/i)||0),o=function(u){return u===1?1:i*Math.pow(2,-10*u)*mse((u-a)*s)+1},l=e==="out"?o:e==="in"?function(c){return 1-o(1-c)}:QK(o);return s=eF/s,l.config=function(c,u){return r(e,c,u)},l},cC=function r(e,t){t===void 0&&(t=1.70158);var n=function(a){return a?--a*a*((t+1)*a+t)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:QK(n);return i.config=function(s){return r(e,s)},i};xa("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,e){var t=e<5?e+1:e;Eh(r+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Nn.Linear.easeNone=Nn.none=Nn.Linear.easeIn;Eh("Elastic",lC("in"),lC("out"),lC());(function(r,e){var t=1/e,n=2*t,i=2.5*t,s=function(o){return o<t?r*o*o:o<n?r*Math.pow(o-1.5/e,2)+.75:o<i?r*(o-=2.25/e)*o+.9375:r*Math.pow(o-2.625/e,2)+.984375};Eh("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Eh("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Eh("Circ",function(r){return-(uK(1-r*r)-1)});Eh("Sine",function(r){return r===1?1:-pse(r*hse)+1});Eh("Back",cC("in"),cC("out"),cC());Nn.SteppedEase=Nn.steps=ro.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),s=t?1:0,a=1-vr;return function(o){return((i*by(0,a,o)|0)+s)*n}}};pm.ease=Nn["quad.out"];xa("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return GD+=r+","+r+"Params,"});var zK=function(e,t){this.id=dse++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:yK,this.set=t?t.getSetter:XD},Gv=function(){function r(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,vm(this,+t.duration,1,1),this.data=t.data,Dr&&(this._ctx=Dr,Dr.data.push(this)),Vv||Ya.wake()}var e=r.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,vm(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(ym(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(vE(this,n),!s._dp||s.parent||EK(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Xl(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===vr||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),wK(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+oQ(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+oQ(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?gm(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-vr?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Yb(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-vr?0:this._rts,this.totalTime(by(-Math.abs(this._delay),this.totalDuration(),s),i!==!1),gE(this),bse(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ym(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==vr&&(this._tTime-=vr)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&Xl(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(_a(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yb(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=yse);var i=ps;return ps=n,WD(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ps=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,lQ(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,lQ(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(So(this,n),_a(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,_a(i)),this._dur||(this._zTime=-vr),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-vr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-vr,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-vr)},e.eventCallback=function(n,i,s){var a=this.vars;return arguments.length>1?(i?(a[n]=i,s&&(a[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete a[n],this):a[n]},e.then=function(n){var i=this;return new Promise(function(s){var a=$r(n)?n:xK,o=function(){var c=i.then;i.then=null,$r(a)&&(a=a(i))&&(a.then||a===i)&&(i.then=c),s(a),i.then=c};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?o():i._prom=o})},e.kill=function(){Y0(this)},r}();io(Gv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-vr,_prom:0,_ps:!1,_rts:1});var Js=function(r){cK(e,r);function e(n,i){var s;return n===void 0&&(n={}),s=r.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=_a(n.sortChildren),Hr&&Xl(n.parent||Hr,nu(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&SK(nu(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,a){return wv(0,arguments,this),this},t.from=function(i,s,a){return wv(1,arguments,this),this},t.fromTo=function(i,s,a,o){return wv(2,arguments,this),this},t.set=function(i,s,a){return s.duration=0,s.parent=this,yv(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Mi(i,s,So(this,a),1),this},t.call=function(i,s,a){return Xl(this,Mi.delayedCall(0,i,s),a)},t.staggerTo=function(i,s,a,o,l,c,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=c,a.onCompleteParams=u,a.parent=this,new Mi(i,a,So(this,l)),this},t.staggerFrom=function(i,s,a,o,l,c,u){return a.runBackwards=1,yv(a).immediateRender=_a(a.immediateRender),this.staggerTo(i,s,a,o,l,c,u)},t.staggerFromTo=function(i,s,a,o,l,c,u,f){return o.startAt=a,yv(o).immediateRender=_a(o.immediateRender),this.staggerTo(i,s,o,l,c,u,f)},t.render=function(i,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:Ci(i),f=this._zTime<0!=i<0&&(this._initted||!c),d,p,v,m,g,w,b,E,B,S,M,I;if(this!==Hr&&u>l&&i>=0&&(u=l),u!==this._tTime||a||f){if(o!==this._time&&c&&(u+=this._time-o,i+=this._time-o),d=u,B=this._start,E=this._ts,w=!E,f&&(c||(o=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(M=this._yoyo,g=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,a);if(d=Ci(u%g),u===l?(m=this._repeat,d=c):(S=Ci(u/g),m=~~S,m&&m===S&&(d=c,m--),d>c&&(d=c)),S=gm(this._tTime,g),!o&&this._tTime&&S!==m&&this._tTime-S*g-this._dur<=0&&(S=m),M&&m&1&&(d=c-d,I=1),m!==S&&!this._lock){var k=M&&S&1,O=k===(M&&m&1);if(m<S&&(k=!k),o=k?0:u%c?c:u,this._lock=1,this.render(o||(I?0:Ci(m*g)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&Za(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),o&&o!==this._time||w!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,O&&(this._lock=2,o=k?c:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!w)return this;HK(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=Mse(this,Ci(o),Ci(d)),b&&(u-=d-(d=b._start))),this._tTime=u,this._time=d,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,o=0),!o&&u&&!s&&!S&&(Za(this,"onStart"),this._tTime!==u))return this;if(d>=o&&i>=0)for(p=this._first;p;){if(v=p._next,(p._act||d>=p._start)&&p._ts&&b!==p){if(p.parent!==this)return this.render(i,s,a);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,s,a),d!==this._time||!this._ts&&!w){b=0,v&&(u+=this._zTime=-vr);break}}p=v}else{p=this._last;for(var C=i<0?i:d;p;){if(v=p._prev,(p._act||C<=p._end)&&p._ts&&b!==p){if(p.parent!==this)return this.render(i,s,a);if(p.render(p._ts>0?(C-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(C-p._start)*p._ts,s,a||ps&&WD(p)),d!==this._time||!this._ts&&!w){b=0,v&&(u+=this._zTime=C?-vr:vr);break}}p=v}}if(b&&!s&&(this.pause(),b.render(d>=o?0:-vr)._zTime=d>=o?1:-1,this._ts))return this._start=B,gE(this),this.render(i,s,a);this._onUpdate&&!s&&Za(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&o)&&(B===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&XA(this,1),!s&&!(i<0&&!o)&&(u||o||!l)&&(Za(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var a=this;if(_u(s)||(s=So(this,s,i)),!(i instanceof Gv)){if(Qs(i))return i.forEach(function(o){return a.add(o,s)}),this;if(ns(i))return this.addLabel(i,s);if($r(i))i=Mi.delayedCall(0,i);else return this}return this!==i?Xl(this,i,s):this},t.getChildren=function(i,s,a,o){i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Lo);for(var l=[],c=this._first;c;)c._start>=o&&(c instanceof Mi?s&&l.push(c):(a&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,a)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===i)return s[a]},t.remove=function(i){return ns(i)?this.removeLabel(i):$r(i)?this.killTweensOf(i):(i.parent===this&&mE(this,i),i===this._recent&&(this._recent=this._last),sh(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ci(Ya.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),r.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=So(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,a){var o=Mi.delayedCall(0,s||Qv,a);return o.data="isPause",this._hasPause=1,Xl(this,o,So(this,i))},t.removePause=function(i){var s=this._first;for(i=So(this,i);s;)s._start===i&&s.data==="isPause"&&XA(s),s=s._next},t.killTweensOf=function(i,s,a){for(var o=this.getTweensOf(i,a),l=o.length;l--;)FA!==o[l]&&o[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var a=[],o=Do(i),l=this._first,c=_u(s),u;l;)l instanceof Mi?wse(l._targets,o)&&(c?(!FA||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(u=l.getTweensOf(o,s)).length&&a.push.apply(a,u),l=l._next;return a},t.tweenTo=function(i,s){s=s||{};var a=this,o=So(a,i),l=s,c=l.startAt,u=l.onStart,f=l.onStartParams,d=l.immediateRender,p,v=Mi.to(a,io({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale())||vr,onStart:function(){if(a.pause(),!p){var g=s.duration||Math.abs((o-(c&&"time"in c?c.time:a._time))/a.timeScale());v._dur!==g&&vm(v,g,0,1).render(v._time,!0,!0),p=1}u&&u.apply(v,f||[])}},s));return d?v.render(0):v},t.tweenFromTo=function(i,s,a){return this.tweenTo(s,io({startAt:{time:So(this,i)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),cQ(this,So(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),cQ(this,So(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+vr)},t.shiftChildren=function(i,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,c;o;)o._start>=a&&(o._start+=i,o._end+=i),o=o._next;if(s)for(c in l)l[c]>=a&&(l[c]+=i);return sh(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return r.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),sh(this)},t.totalDuration=function(i){var s=0,a=this,o=a._last,l=Lo,c,u,f;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-i:i));if(a._dirty){for(f=a.parent;o;)c=o._prev,o._dirty&&o.totalDuration(),u=o._start,u>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,Xl(a,o,u-o._delay,1)._lock=0):l=u,u<0&&o._ts&&(s-=u,(!f&&!a._dp||f&&f.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=c;vm(a,a===Hr&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(i){if(Hr._ts&&(wK(Hr,Yb(i,Hr)),vK=Ya.frame),Ya.frame>=sQ){sQ+=to.autoSleep||120;var s=Hr._first;if((!s||!s._ts)&&to.autoSleep&&Ya._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ya.sleep()}}},e}(Gv);io(Js.prototype,{_lock:0,_hasPause:0,_forcing:0});var Vse=function(e,t,n,i,s,a,o){var l=new ba(this._pt,e,t,0,1,qK,null,s),c=0,u=0,f,d,p,v,m,g,w,b;for(l.b=n,l.e=i,n+="",i+="",(w=~i.indexOf("random("))&&(i=zv(i)),a&&(b=[n,i],a(b,e,t),n=b[0],i=b[1]),d=n.match(sC)||[];f=sC.exec(i);)v=f[0],m=i.substring(c,f.index),p?p=(p+1)%5:m.substr(-5)==="rgba("&&(p=1),v!==d[u++]&&(g=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:m||u===1?m:",",s:g,c:v.charAt(1)==="="?$p(g,v)-g:parseFloat(v)-g,m:p&&p<4?Math.round:0},c=sC.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=o,(hK.test(i)||w)&&(l.e=0),this._pt=l,l},KD=function(e,t,n,i,s,a,o,l,c,u){$r(i)&&(i=i(s||0,e,a));var f=e[t],d=n!=="get"?n:$r(f)?c?e[t.indexOf("set")||!$r(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():f,p=$r(f)?c?qse:WK:YD,v;if(ns(i)&&(~i.indexOf("random(")&&(i=zv(i)),i.charAt(1)==="="&&(v=$p(d,i)+(Ns(d)||0),(v||v===0)&&(i=v))),!u||d!==i||cF)return!isNaN(d*i)&&i!==""?(v=new ba(this._pt,e,t,+d||0,i-(d||0),typeof f=="boolean"?Xse:KK,0,p),c&&(v.fp=c),o&&v.modifier(o,this,e),this._pt=v):(!f&&!(t in e)&&zD(t,i),Vse.call(this,e,t,d,i,p,l||to.stringFilter,c))},Gse=function(e,t,n,i,s){if($r(e)&&(e=_v(e,s,t,n,i)),!lc(e)||e.style&&e.nodeType||Qs(e)||AK(e))return ns(e)?_v(e,s,t,n,i):e;var a={},o;for(o in e)a[o]=_v(e[o],s,t,n,i);return a},VK=function(e,t,n,i,s,a){var o,l,c,u;if(qa[e]&&(o=new qa[e]).init(s,o.rawVars?t[e]:Gse(t[e],i,s,a,n),n,i,a)!==!1&&(n._pt=l=new ba(n._pt,s,e,0,1,o.render,o,0,o.priority),n!==Pp))for(c=n._ptLookup[n._targets.indexOf(s)],u=o._props.length;u--;)c[o._props[u]]=l;return o},FA,cF,qD=function r(e,t,n){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,f=i.yoyoEase,d=i.keyframes,p=i.autoRevert,v=e._dur,m=e._startAt,g=e._targets,w=e.parent,b=w&&w.data==="nested"?w.vars.targets:g,E=e._overwrite==="auto"&&!PD,B=e.timeline,S,M,I,k,O,C,P,D,F,_,R,L,Q;if(B&&(!d||!s)&&(s="none"),e._ease=ah(s,pm.ease),e._yEase=f?kK(ah(f===!0?s:f,pm.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!B&&!!i.runBackwards,!B||d&&!i.stagger){if(D=g[0]?ih(g[0]).harness:0,L=D&&i[D.prop],S=qb(i,VD),m&&(m._zTime<0&&m.progress(1),t<0&&u&&o&&!p?m.render(-1,!0):m.revert(u&&v?cb:vse),m._lazy=0),a){if(XA(e._startAt=Mi.set(g,io({data:"isStart",overwrite:!1,parent:w,immediateRender:!0,lazy:!m&&_a(l),startAt:null,delay:0,onUpdate:c&&function(){return Za(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ps||!o&&!p)&&e._startAt.revert(cb),o&&v&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(u&&v&&!m){if(t&&(o=!1),I=io({overwrite:!1,data:"isFromStart",lazy:o&&!m&&_a(l),immediateRender:o,stagger:0,parent:w},S),L&&(I[D.prop]=L),XA(e._startAt=Mi.set(g,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ps?e._startAt.revert(cb):e._startAt.render(-1,!0)),e._zTime=t,!o)r(e._startAt,vr,vr);else if(!t)return}for(e._pt=e._ptCache=0,l=v&&_a(l)||l&&!v,M=0;M<g.length;M++){if(O=g[M],P=O._gsap||jD(g)[M]._gsap,e._ptLookup[M]=_={},rF[P.id]&&VA.length&&Kb(),R=b===g?M:b.indexOf(O),D&&(F=new D).init(O,L||S,e,R,b)!==!1&&(e._pt=k=new ba(e._pt,O,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(G){_[G]=k}),F.priority&&(C=1)),!D||L)for(I in S)qa[I]&&(F=VK(I,S,e,R,O,b))?F.priority&&(C=1):_[I]=k=KD.call(e,O,I,"get",S[I],R,b,0,i.stringFilter);e._op&&e._op[M]&&e.kill(O,e._op[M]),E&&e._pt&&(FA=e,Hr.killTweensOf(O,_,e.globalTime(t)),Q=!e.parent,FA=0),e._pt&&l&&(rF[P.id]=1)}C&&YK(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!Q,d&&t<=0&&B.render(Lo,!0,!0)},jse=function(e,t,n,i,s,a,o,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,f,d,p;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(u=d[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return cF=1,e.vars[t]="+=0",qD(e,o),cF=0,l?Hv(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)f=c[p],u=f._pt||f,u.s=(i||i===0)&&!s?i:u.s+(i||0)+a*u.c,u.c=n-u.s,f.e&&(f.e=pi(n)+Ns(f.e)),f.b&&(f.b=u.s+Ns(f.b))},Wse=function(e,t){var n=e[0]?ih(e[0]).harness:0,i=n&&n.aliases,s,a,o,l;if(!i)return t;s=mm({},t);for(a in i)if(a in s)for(l=i[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},Kse=function(e,t,n,i){var s=t.ease||i||"power1.inOut",a,o;if(Qs(t))o=n[e]||(n[e]=[]),t.forEach(function(l,c){return o.push({t:c/(t.length-1)*100,v:l,e:s})});else for(a in t)o=n[a]||(n[a]=[]),a==="ease"||o.push({t:parseFloat(e),v:t[a],e:s})},_v=function(e,t,n,i,s){return $r(e)?e.call(t,n,i,s):ns(e)&&~e.indexOf("random(")?zv(e):e},GK=GD+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",jK={};xa(GK+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return jK[r]=1});var Mi=function(r){cK(e,r);function e(n,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=r.call(this,a?i:yv(i))||this;var l=o.vars,c=l.duration,u=l.delay,f=l.immediateRender,d=l.stagger,p=l.overwrite,v=l.keyframes,m=l.defaults,g=l.scrollTrigger,w=l.yoyoEase,b=i.parent||Hr,E=(Qs(n)||AK(n)?_u(n[0]):"length"in i)?[n]:Do(n),B,S,M,I,k,O,C,P;if(o._targets=E.length?jD(E):Hv("GSAP target "+n+" not found. https://gsap.com",!to.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,v||d||t_(c)||t_(u)){if(i=o.vars,B=o.timeline=new Js({data:"nested",defaults:m||{},targets:b&&b.data==="nested"?b.vars.targets:E}),B.kill(),B.parent=B._dp=nu(o),B._start=0,d||t_(c)||t_(u)){if(I=E.length,C=d&&TK(d),lc(d))for(k in d)~GK.indexOf(k)&&(P||(P={}),P[k]=d[k]);for(S=0;S<I;S++)M=qb(i,jK),M.stagger=0,w&&(M.yoyoEase=w),P&&mm(M,P),O=E[S],M.duration=+_v(c,nu(o),S,O,E),M.delay=(+_v(u,nu(o),S,O,E)||0)-o._delay,!d&&I===1&&M.delay&&(o._delay=u=M.delay,o._start+=u,M.delay=0),B.to(O,M,C?C(S,O,E):0),B._ease=Nn.none;B.duration()?c=u=0:o.timeline=0}else if(v){yv(io(B.vars.defaults,{ease:"none"})),B._ease=ah(v.ease||i.ease||"none");var D=0,F,_,R;if(Qs(v))v.forEach(function(L){return B.to(E,L,">")}),B.duration();else{M={};for(k in v)k==="ease"||k==="easeEach"||Kse(k,v[k],M,v.easeEach);for(k in M)for(F=M[k].sort(function(L,Q){return L.t-Q.t}),D=0,S=0;S<F.length;S++)_=F[S],R={ease:_.e,duration:(_.t-(S?F[S-1].t:0))/100*c},R[k]=_.v,B.to(E,R,D),D+=R.duration;B.duration()<c&&B.to({},{duration:c-B.duration()})}}c||o.duration(c=B.duration())}else o.timeline=0;return p===!0&&!PD&&(FA=nu(o),Hr.killTweensOf(E),FA=0),Xl(b,nu(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(f||!c&&!v&&o._start===Ci(b._time)&&_a(f)&&Ese(nu(o))&&b.data!=="nested")&&(o._tTime=-vr,o.render(Math.max(0,-u)||0)),g&&SK(nu(o),g),o}var t=e.prototype;return t.render=function(i,s,a){var o=this._time,l=this._tDur,c=this._dur,u=i<0,f=i>l-vr&&!u?l:i<vr?0:i,d,p,v,m,g,w,b,E,B;if(!c)Bse(this,i,s,a);else if(f!==this._tTime||!i||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(d=f,E=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(m*100+i,s,a);if(d=Ci(f%m),f===l?(v=this._repeat,d=c):(g=Ci(f/m),v=~~g,v&&v===g?(d=c,v--):d>c&&(d=c)),w=this._yoyo&&v&1,w&&(B=this._yEase,d=c-d),g=gm(this._tTime,m),d===o&&!a&&this._initted&&v===g)return this._tTime=f,this;v!==g&&(E&&this._yEase&&HK(E,w),this.vars.repeatRefresh&&!w&&!this._lock&&d!==m&&this._initted&&(this._lock=a=1,this.render(Ci(m*v),!0).invalidate()._lock=0))}if(!this._initted){if(BK(this,u?i:d,a,s,f))return this._tTime=0,this;if(o!==this._time&&!(a&&this.vars.repeatRefresh&&v!==g))return this;if(c!==this._dur)return this.render(i,s,a)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(B||this._ease)(d/c),this._from&&(this.ratio=b=1-b),!o&&f&&!s&&!g&&(Za(this,"onStart"),this._tTime!==f))return this;for(p=this._pt;p;)p.r(b,p.d),p=p._next;E&&E.render(i<0?i:E._dur*E._ease(d/this._dur),s,a)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&iF(this,i,s,a),Za(this,"onUpdate")),this._repeat&&v!==g&&this.vars.onRepeat&&!s&&this.parent&&Za(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&iF(this,i,!0,!0),(i||!c)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&XA(this,1),!s&&!(u&&!o)&&(f||o||w)&&(Za(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),r.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,a,o,l){Vv||Ya.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||qD(this,c),u=this._ease(c/this._dur),jse(this,i,s,a,o,u,c,l)?this.resetTo(i,s,a,o,1):(vE(this,0),this.parent||bK(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Y0(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ps),this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,FA&&FA.vars.overwrite!==!0)._first||Y0(this),this.parent&&a!==this.timeline.totalDuration()&&vm(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=i?Do(i):o,c=this._ptLookup,u=this._pt,f,d,p,v,m,g,w;if((!s||s==="all")&&xse(o,l))return s==="all"&&(this._pt=0),Y0(this);for(f=this._op=this._op||[],s!=="all"&&(ns(s)&&(m={},xa(s,function(b){return m[b]=1}),s=m),s=Wse(o,s)),w=o.length;w--;)if(~l.indexOf(o[w])){d=c[w],s==="all"?(f[w]=s,v=d,p={}):(p=f[w]=f[w]||{},v=s);for(m in v)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&mE(this,g,"_pt"),delete d[m]),p!=="all"&&(p[m]=1)}return this._initted&&!this._pt&&u&&Y0(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return wv(1,arguments)},e.delayedCall=function(i,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(i,s,a){return wv(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,a){return Hr.killTweensOf(i,s,a)},e}(Gv);io(Mi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});xa("staggerTo,staggerFrom,staggerFromTo",function(r){Mi[r]=function(){var e=new Js,t=aF.call(arguments,0);return t.splice(r==="staggerFromTo"?5:4,0,0),e[r].apply(e,t)}});var YD=function(e,t,n){return e[t]=n},WK=function(e,t,n){return e[t](n)},qse=function(e,t,n,i){return e[t](i.fp,n)},Yse=function(e,t,n){return e.setAttribute(t,n)},XD=function(e,t){return $r(e[t])?WK:kD(e[t])&&e.setAttribute?Yse:YD},KK=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Xse=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},qK=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},ZD=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Zse=function(e,t,n,i){for(var s=this._pt,a;s;)a=s._next,s.p===i&&s.modifier(e,t,n),s=a},Jse=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?mE(this,t,"_pt"):t.dep||(n=1),t=i;return!n},$se=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},YK=function(e){for(var t=e._pt,n,i,s,a;t;){for(n=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:a)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:a=t,t=n}e._pt=s},ba=function(){function r(t,n,i,s,a,o,l,c,u){this.t=n,this.s=s,this.c=a,this.p=i,this.r=o||KK,this.d=l||this,this.set=c||YD,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=r.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=$se,this.m=n,this.mt=s,this.tween=i},r}();xa(GD+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return VD[r]=1});ro.TweenMax=ro.TweenLite=Mi;ro.TimelineLite=ro.TimelineMax=Js;Hr=new Js({sortChildren:!1,defaults:pm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});to.stringFilter=PK;var oh=[],Ab={},eae=[],AQ=0,tae=0,uC=function(e){return(Ab[e]||eae).map(function(t){return t()})},uF=function(){var e=Date.now(),t=[];e-AQ>2&&(uC("matchMediaInit"),oh.forEach(function(n){var i=n.queries,s=n.conditions,a,o,l,c;for(o in i)a=jl.matchMedia(i[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,c=1);c&&(n.revert(),l&&t.push(n))}),uC("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),AQ=e,uC("matchMedia"))},XK=function(){function r(t,n){this.selector=n&&oF(n),this.data=[],this._r=[],this.isReverted=!1,this.id=tae++,t&&this.add(t)}var e=r.prototype;return e.add=function(n,i,s){$r(n)&&(s=i,i=n,n=$r);var a=this,o=function(){var c=Dr,u=a.selector,f;return c&&c!==a&&c.data.push(a),s&&(a.selector=oF(s)),Dr=a,f=i.apply(a,arguments),$r(f)&&a._r.push(f),Dr=c,a.selector=u,a.isReverted=!1,f};return a.last=o,n===$r?o(a,function(l){return a.add(null,l)}):n?a[n]=o:o},e.ignore=function(n){var i=Dr;Dr=null,n(this),Dr=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof r?n.push.apply(n,i.getTweens()):i instanceof Mi&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var o=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}));for(o.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,f){return f.g-u.g||-1/0}).forEach(function(u){return u.t.revert(n)}),l=s.data.length;l--;)c=s.data[l],c instanceof Js?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Mi)&&c.revert&&c.revert(n);s._r.forEach(function(u){return u(n,s)}),s.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),i)for(var a=oh.length;a--;)oh[a].id===this.id&&oh.splice(a,1)},e.revert=function(n){this.kill(n||{})},r}(),nae=function(){function r(t){this.contexts=[],this.scope=t,Dr&&Dr.data.push(this)}var e=r.prototype;return e.add=function(n,i,s){lc(n)||(n={matches:n});var a=new XK(0,s||this.scope),o=a.conditions={},l,c,u;Dr&&!a.selector&&(a.selector=Dr.selector),this.contexts.push(a),i=a.add("onMatch",i),a.queries=n;for(c in n)c==="all"?u=1:(l=jl.matchMedia(n[c]),l&&(oh.indexOf(a)<0&&oh.push(a),(o[c]=l.matches)&&(u=1),l.addListener?l.addListener(uF):l.addEventListener("change",uF)));return u&&i(a,function(f){return a.add(null,f)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},r}(),Xb={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return DK(i)})},timeline:function(e){return new Js(e)},getTweensOf:function(e,t){return Hr.getTweensOf(e,t)},getProperty:function(e,t,n,i){ns(e)&&(e=Do(e)[0]);var s=ih(e||{}).get,a=n?xK:_K;return n==="native"&&(n=""),e&&(t?a((qa[t]&&qa[t].get||s)(e,t,n,i)):function(o,l,c){return a((qa[o]&&qa[o].get||s)(e,o,l,c))})},quickSetter:function(e,t,n){if(e=Do(e),e.length>1){var i=e.map(function(u){return Ma.quickSetter(u,t,n)}),s=i.length;return function(u){for(var f=s;f--;)i[f](u)}}e=e[0]||{};var a=qa[t],o=ih(e),l=o.harness&&(o.harness.aliases||{})[t]||t,c=a?function(u){var f=new a;Pp._pt=0,f.init(e,n?u+n:u,Pp,0,[e]),f.render(1,f),Pp._pt&&ZD(1,Pp)}:o.set(e,l);return a?c:function(u){return c(e,l,n?u+n:u,o,1)}},quickTo:function(e,t,n){var i,s=Ma.to(e,io((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),a=function(l,c,u){return s.resetTo(t,l,c,u)};return a.tween=s,a},isTweening:function(e){return Hr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ah(e.ease,pm.ease)),aQ(pm,e||{})},config:function(e){return aQ(to,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,s=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach(function(o){return o&&!qa[o]&&!ro[o]&&Hv(t+" effect requires "+o+" plugin.")}),aC[t]=function(o,l,c){return n(Do(o),io(l||{},s),c)},a&&(Js.prototype[t]=function(o,l,c){return this.add(aC[t](o,lc(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Nn[e]=ah(t)},parseEase:function(e,t){return arguments.length?ah(e,t):Nn},getById:function(e){return Hr.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Js(e),i,s;for(n.smoothChildTiming=_a(e.smoothChildTiming),Hr.remove(n),n._dp=0,n._time=n._tTime=Hr._time,i=Hr._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Mi&&i.vars.onComplete===i._targets[0]))&&Xl(n,i,i._start-i._delay),i=s;return Xl(Hr,n,0),n},context:function(e,t){return e?new XK(e,t):Dr},matchMedia:function(e){return new nae(e)},matchMediaRefresh:function(){return oh.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||uF()},addEventListener:function(e,t){var n=Ab[e]||(Ab[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Ab[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:Lse,wrapYoyo:Dse,distribute:TK,random:IK,snap:RK,normalize:Fse,getUnit:Ns,clamp:Tse,splitColor:OK,toArray:Do,selector:oF,mapRange:FK,pipe:Ise,unitize:Use,interpolate:Ose,shuffle:CK},install:mK,effects:aC,ticker:Ya,updateRoot:Js.updateRoot,plugins:qa,globalTimeline:Hr,core:{PropTween:ba,globals:gK,Tween:Mi,Timeline:Js,Animation:Gv,getCache:ih,_removeLinkedListItem:mE,reverting:function(){return ps},context:function(e){return e&&Dr&&(Dr.data.push(e),e._ctx=Dr),Dr},suppressOverwrites:function(e){return PD=e}}};xa("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return Xb[r]=Mi[r]});Ya.add(Js.updateRoot);Pp=Xb.to({},{duration:0});var rae=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},iae=function(e,t){var n=e._targets,i,s,a;for(i in t)for(s=n.length;s--;)a=e._ptLookup[s][i],a&&(a=a.d)&&(a._pt&&(a=rae(a,i)),a&&a.modifier&&a.modifier(t[i],e,n[s],i))},AC=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,s,a){a._onInit=function(o){var l,c;if(ns(s)&&(l={},xa(s,function(u){return l[u]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}iae(o,s)}}}},Ma=Xb.registerPlugin({name:"attr",init:function(e,t,n,i,s){var a,o,l;this.tween=n;for(a in t)l=e.getAttribute(a)||"",o=this.add(e,"setAttribute",(l||0)+"",t[a],i,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)ps?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},AC("roundProps",lF),AC("modifiers"),AC("snap",RK))||Xb;Mi.version=Js.version=Ma.version="3.13.0";pK=1;HD()&&ym();Nn.Power0;Nn.Power1;Nn.Power2;Nn.Power3;Nn.Power4;Nn.Linear;Nn.Quad;Nn.Cubic;Nn.Quart;Nn.Quint;Nn.Strong;Nn.Elastic;Nn.Back;Nn.SteppedEase;Nn.Bounce;Nn.Sine;Nn.Expo;Nn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var fQ,LA,em,JD,Jf,hQ,$D,sae=function(){return typeof window<"u"},xu={},Wf=180/Math.PI,tm=Math.PI/180,vd=Math.atan2,dQ=1e8,eO=/([A-Z])/g,aae=/(left|right|width|margin|padding|x)/i,oae=/[\s,\(]\S/,tc={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},AF=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},lae=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},cae=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},uae=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},ZK=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},JK=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Aae=function(e,t,n){return e.style[t]=n},fae=function(e,t,n){return e.style.setProperty(t,n)},hae=function(e,t,n){return e._gsap[t]=n},dae=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},pae=function(e,t,n,i,s){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(s,a)},mae=function(e,t,n,i,s){var a=e._gsap;a[t]=n,a.renderTransform(s,a)},zr="transform",Ea=zr+"Origin",gae=function r(e,t){var n=this,i=this.target,s=i.style,a=i._gsap;if(e in xu&&s){if(this.tfm=this.tfm||{},e!=="transform")e=tc[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=iu(i,o)}):this.tfm[e]=a.x?a[e]:iu(i,e),e===Ea&&(this.tfm.zOrigin=a.zOrigin);else return tc.transform.split(",").forEach(function(o){return r.call(n,o,t)});if(this.props.indexOf(zr)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Ea,t,"")),e=zr}(s||t)&&this.props.push(e,t,s[e])},$K=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},vae=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,s,a;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(eO,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)i[a]=this.tfm[a];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=$D(),(!s||!s.isStart)&&!n[zr]&&($K(n),i.zOrigin&&n[Ea]&&(n[Ea]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},eq=function(e,t){var n={target:e,props:[],revert:vae,save:gae};return e._gsap||Ma.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},tq,fF=function(e,t){var n=LA.createElementNS?LA.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):LA.createElement(e);return n&&n.style?n:LA.createElement(e)},Oo=function r(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(eO,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&r(e,wm(t)||t,1)||""},pQ="O,Moz,ms,Ms,Webkit".split(","),wm=function(e,t,n){var i=t||Jf,s=i.style,a=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(pQ[a]+e in s););return a<0?null:(a===3?"ms":a>=0?pQ[a]:"")+e},hF=function(){sae()&&window.document&&(fQ=window,LA=fQ.document,em=LA.documentElement,Jf=fF("div")||{style:{}},fF("div"),zr=wm(zr),Ea=zr+"Origin",Jf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",tq=!!wm("perspective"),$D=Ma.core.reverting,JD=1)},mQ=function(e){var t=e.ownerSVGElement,n=fF("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),em.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),em.removeChild(n),s},gQ=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},nq=function(e){var t,n;try{t=e.getBBox()}catch{t=mQ(e),n=1}return t&&(t.width||t.height)||n||(t=mQ(e)),t&&!t.width&&!t.x&&!t.y?{x:+gQ(e,["x","cx","x1"])||0,y:+gQ(e,["y","cy","y1"])||0,width:0,height:0}:t},rq=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&nq(e))},fh=function(e,t){if(t){var n=e.style,i;t in xu&&t!==Ea&&(t=zr),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(eO,"-$1").toLowerCase())):n.removeAttribute(t)}},DA=function(e,t,n,i,s,a){var o=new ba(e._pt,t,n,0,1,a?JK:ZK);return e._pt=o,o.b=i,o.e=s,e._props.push(n),o},vQ={deg:1,rad:1,turn:1},yae={grid:1,flex:1},ZA=function r(e,t,n,i){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=Jf.style,l=aae.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),f=100,d=i==="px",p=i==="%",v,m,g,w;if(i===a||!s||vQ[i]||vQ[a])return s;if(a!=="px"&&!d&&(s=r(e,t,n,"px")),w=e.getCTM&&rq(e),(p||a==="%")&&(xu[t]||~t.indexOf("adius")))return v=w?e.getBBox()[l?"width":"height"]:e[u],pi(p?s/v*f:s/100*v);if(o[l?"width":"height"]=f+(d?a:i),m=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!c?e:e.parentNode,w&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===LA||!m.appendChild)&&(m=LA.body),g=m._gsap,g&&p&&g.width&&l&&g.time===Ya.time&&!g.uncache)return pi(s/g.width*f);if(p&&(t==="height"||t==="width")){var b=e.style[t];e.style[t]=f+i,v=e[u],b?e.style[t]=b:fh(e,t)}else(p||a==="%")&&!yae[Oo(m,"display")]&&(o.position=Oo(e,"position")),m===e&&(o.position="static"),m.appendChild(Jf),v=Jf[u],m.removeChild(Jf),o.position="absolute";return l&&p&&(g=ih(m),g.time=Ya.time,g.width=m[u]),pi(d?v*s/f:v&&s?f/v*s:0)},iu=function(e,t,n,i){var s;return JD||hF(),t in tc&&t!=="transform"&&(t=tc[t],~t.indexOf(",")&&(t=t.split(",")[0])),xu[t]&&t!=="transform"?(s=Wv(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:Jb(Oo(e,Ea))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Zb[t]&&Zb[t](e,t,n)||Oo(e,t)||yK(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?ZA(e,t,s,n)+n:s},wae=function(e,t,n,i){if(!n||n==="none"){var s=wm(t,e,1),a=s&&Oo(e,s,1);a&&a!==n?(t=s,n=a):t==="borderColor"&&(n=Oo(e,"borderTopColor"))}var o=new ba(this._pt,e.style,t,0,1,qK),l=0,c=0,u,f,d,p,v,m,g,w,b,E,B,S;if(o.b=n,o.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=Oo(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(m=e.style[t],e.style[t]=i,i=Oo(e,t)||i,m?e.style[t]=m:fh(e,t)),u=[n,i],PK(u),n=u[0],i=u[1],d=n.match(Np)||[],S=i.match(Np)||[],S.length){for(;f=Np.exec(i);)g=f[0],b=i.substring(l,f.index),v?v=(v+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(v=1),g!==(m=d[c++]||"")&&(p=parseFloat(m)||0,B=m.substr((p+"").length),g.charAt(1)==="="&&(g=$p(p,g)+B),w=parseFloat(g),E=g.substr((w+"").length),l=Np.lastIndex-E.length,E||(E=E||to.units[t]||B,l===i.length&&(i+=E,o.e+=E)),B!==E&&(p=ZA(e,t,m,E)||0),o._pt={_next:o._pt,p:b||c===1?b:",",s:p,c:w-p,m:v&&v<4||t==="zIndex"?Math.round:0});o.c=l<i.length?i.substring(l,i.length):""}else o.r=t==="display"&&i==="none"?JK:ZK;return hK.test(i)&&(o.e=0),this._pt=o,o},yQ={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_ae=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=yQ[n]||n,t[1]=yQ[i]||i,t.join(" ")},xae=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,s=t.u,a=n._gsap,o,l,c;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)o=s[c],xu[o]&&(l=1,o=o==="transformOrigin"?Ea:zr),fh(n,o);l&&(fh(n,zr),a&&(a.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Wv(n,1),a.uncache=1,$K(i)))}},Zb={clearProps:function(e,t,n,i,s){if(s.data!=="isFromStart"){var a=e._pt=new ba(e._pt,t,n,0,0,xae);return a.u=i,a.pr=-10,a.tween=s,e._props.push(n),1}}},jv=[1,0,0,1,0,0],iq={},sq=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},wQ=function(e){var t=Oo(e,zr);return sq(t)?jv:t.substr(7).match(fK).map(pi)},tO=function(e,t){var n=e._gsap||ih(e),i=e.style,s=wQ(e),a,o,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?jv:s):(s===jv&&!e.offsetParent&&e!==em&&!n.svg&&(l=i.display,i.display="block",a=e.parentNode,(!a||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,o=e.nextElementSibling,em.appendChild(e)),s=wQ(e),l?i.display=l:fh(e,"display"),c&&(o?a.insertBefore(e,o):a?a.appendChild(e):em.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},dF=function(e,t,n,i,s,a){var o=e._gsap,l=s||tO(e,!0),c=o.xOrigin||0,u=o.yOrigin||0,f=o.xOffset||0,d=o.yOffset||0,p=l[0],v=l[1],m=l[2],g=l[3],w=l[4],b=l[5],E=t.split(" "),B=parseFloat(E[0])||0,S=parseFloat(E[1])||0,M,I,k,O;n?l!==jv&&(I=p*g-v*m)&&(k=B*(g/I)+S*(-m/I)+(m*b-g*w)/I,O=B*(-v/I)+S*(p/I)-(p*b-v*w)/I,B=k,S=O):(M=nq(e),B=M.x+(~E[0].indexOf("%")?B/100*M.width:B),S=M.y+(~(E[1]||E[0]).indexOf("%")?S/100*M.height:S)),i||i!==!1&&o.smooth?(w=B-c,b=S-u,o.xOffset=f+(w*p+b*m)-w,o.yOffset=d+(w*v+b*g)-b):o.xOffset=o.yOffset=0,o.xOrigin=B,o.yOrigin=S,o.smooth=!!i,o.origin=t,o.originIsAbsolute=!!n,e.style[Ea]="0px 0px",a&&(DA(a,o,"xOrigin",c,B),DA(a,o,"yOrigin",u,S),DA(a,o,"xOffset",f,o.xOffset),DA(a,o,"yOffset",d,o.yOffset)),e.setAttribute("data-svg-origin",B+" "+S)},Wv=function(e,t){var n=e._gsap||new zK(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,a="px",o="deg",l=getComputedStyle(e),c=Oo(e,Ea)||"0",u,f,d,p,v,m,g,w,b,E,B,S,M,I,k,O,C,P,D,F,_,R,L,Q,G,Y,W,V,T,H,K,N;return u=f=d=m=g=w=b=E=B=0,p=v=1,n.svg=!!(e.getCTM&&rq(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[zr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[zr]!=="none"?l[zr]:"")),i.scale=i.rotate=i.translate="none"),I=tO(e,n.svg),n.svg&&(n.uncache?(G=e.getBBox(),c=n.xOrigin-G.x+"px "+(n.yOrigin-G.y)+"px",Q=""):Q=!t&&e.getAttribute("data-svg-origin"),dF(e,Q||c,!!Q||n.originIsAbsolute,n.smooth!==!1,I)),S=n.xOrigin||0,M=n.yOrigin||0,I!==jv&&(P=I[0],D=I[1],F=I[2],_=I[3],u=R=I[4],f=L=I[5],I.length===6?(p=Math.sqrt(P*P+D*D),v=Math.sqrt(_*_+F*F),m=P||D?vd(D,P)*Wf:0,b=F||_?vd(F,_)*Wf+m:0,b&&(v*=Math.abs(Math.cos(b*tm))),n.svg&&(u-=S-(S*P+M*F),f-=M-(S*D+M*_))):(N=I[6],H=I[7],W=I[8],V=I[9],T=I[10],K=I[11],u=I[12],f=I[13],d=I[14],k=vd(N,T),g=k*Wf,k&&(O=Math.cos(-k),C=Math.sin(-k),Q=R*O+W*C,G=L*O+V*C,Y=N*O+T*C,W=R*-C+W*O,V=L*-C+V*O,T=N*-C+T*O,K=H*-C+K*O,R=Q,L=G,N=Y),k=vd(-F,T),w=k*Wf,k&&(O=Math.cos(-k),C=Math.sin(-k),Q=P*O-W*C,G=D*O-V*C,Y=F*O-T*C,K=_*C+K*O,P=Q,D=G,F=Y),k=vd(D,P),m=k*Wf,k&&(O=Math.cos(k),C=Math.sin(k),Q=P*O+D*C,G=R*O+L*C,D=D*O-P*C,L=L*O-R*C,P=Q,R=G),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,w=180-w),p=pi(Math.sqrt(P*P+D*D+F*F)),v=pi(Math.sqrt(L*L+N*N)),k=vd(R,L),b=Math.abs(k)>2e-4?k*Wf:0,B=K?1/(K<0?-K:K):0),n.svg&&(Q=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!sq(Oo(e,zr)),Q&&e.setAttribute("transform",Q))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(p*=-1,b+=m<=0?180:-180,m+=m<=0?180:-180):(v*=-1,b+=b<=0?180:-180)),t=t||n.uncache,n.x=u-((n.xPercent=u&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+a,n.y=f-((n.yPercent=f&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+a,n.z=d+a,n.scaleX=pi(p),n.scaleY=pi(v),n.rotation=pi(m)+o,n.rotationX=pi(g)+o,n.rotationY=pi(w)+o,n.skewX=b+o,n.skewY=E+o,n.transformPerspective=B+a,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(i[Ea]=Jb(c)),n.xOffset=n.yOffset=0,n.force3D=to.force3D,n.renderTransform=n.svg?Eae:tq?aq:bae,n.uncache=0,n},Jb=function(e){return(e=e.split(" "))[0]+" "+e[1]},fC=function(e,t,n){var i=Ns(t);return pi(parseFloat(t)+parseFloat(ZA(e,"x",n+"px",i)))+i},bae=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,aq(e,t)},Cf="0deg",s0="0px",Tf=") ",aq=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.z,c=n.rotation,u=n.rotationY,f=n.rotationX,d=n.skewX,p=n.skewY,v=n.scaleX,m=n.scaleY,g=n.transformPerspective,w=n.force3D,b=n.target,E=n.zOrigin,B="",S=w==="auto"&&e&&e!==1||w===!0;if(E&&(f!==Cf||u!==Cf)){var M=parseFloat(u)*tm,I=Math.sin(M),k=Math.cos(M),O;M=parseFloat(f)*tm,O=Math.cos(M),a=fC(b,a,I*O*-E),o=fC(b,o,-Math.sin(M)*-E),l=fC(b,l,k*O*-E+E)}g!==s0&&(B+="perspective("+g+Tf),(i||s)&&(B+="translate("+i+"%, "+s+"%) "),(S||a!==s0||o!==s0||l!==s0)&&(B+=l!==s0||S?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+Tf),c!==Cf&&(B+="rotate("+c+Tf),u!==Cf&&(B+="rotateY("+u+Tf),f!==Cf&&(B+="rotateX("+f+Tf),(d!==Cf||p!==Cf)&&(B+="skew("+d+", "+p+Tf),(v!==1||m!==1)&&(B+="scale("+v+", "+m+Tf),b.style[zr]=B||"translate(0, 0)"},Eae=function(e,t){var n=t||this,i=n.xPercent,s=n.yPercent,a=n.x,o=n.y,l=n.rotation,c=n.skewX,u=n.skewY,f=n.scaleX,d=n.scaleY,p=n.target,v=n.xOrigin,m=n.yOrigin,g=n.xOffset,w=n.yOffset,b=n.forceCSS,E=parseFloat(a),B=parseFloat(o),S,M,I,k,O;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=tm,c*=tm,S=Math.cos(l)*f,M=Math.sin(l)*f,I=Math.sin(l-c)*-d,k=Math.cos(l-c)*d,c&&(u*=tm,O=Math.tan(c-u),O=Math.sqrt(1+O*O),I*=O,k*=O,u&&(O=Math.tan(u),O=Math.sqrt(1+O*O),S*=O,M*=O)),S=pi(S),M=pi(M),I=pi(I),k=pi(k)):(S=f,k=d,M=I=0),(E&&!~(a+"").indexOf("px")||B&&!~(o+"").indexOf("px"))&&(E=ZA(p,"x",a,"px"),B=ZA(p,"y",o,"px")),(v||m||g||w)&&(E=pi(E+v-(v*S+m*I)+g),B=pi(B+m-(v*M+m*k)+w)),(i||s)&&(O=p.getBBox(),E=pi(E+i/100*O.width),B=pi(B+s/100*O.height)),O="matrix("+S+","+M+","+I+","+k+","+E+","+B+")",p.setAttribute("transform",O),b&&(p.style[zr]=O)},Sae=function(e,t,n,i,s){var a=360,o=ns(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?Wf:1),c=l-i,u=i+c+"deg",f,d;return o&&(f=s.split("_")[1],f==="short"&&(c%=a,c!==c%(a/2)&&(c+=c<0?a:-a)),f==="cw"&&c<0?c=(c+a*dQ)%a-~~(c/a)*a:f==="ccw"&&c>0&&(c=(c-a*dQ)%a-~~(c/a)*a)),e._pt=d=new ba(e._pt,t,n,i,c,lae),d.e=u,d.u="deg",e._props.push(n),d},_Q=function(e,t){for(var n in t)e[n]=t[n];return e},Bae=function(e,t,n){var i=_Q({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=n.style,o,l,c,u,f,d,p,v;i.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),a[zr]=t,o=Wv(n,1),fh(n,zr),n.setAttribute("transform",c)):(c=getComputedStyle(n)[zr],a[zr]=t,o=Wv(n,1),a[zr]=c);for(l in xu)c=i[l],u=o[l],c!==u&&s.indexOf(l)<0&&(p=Ns(c),v=Ns(u),f=p!==v?ZA(n,l,c,v):parseFloat(c),d=parseFloat(u),e._pt=new ba(e._pt,o,l,f,d-f,AF),e._pt.u=v||0,e._props.push(l));_Q(o,i)};xa("padding,margin,Width,Radius",function(r,e){var t="Top",n="Right",i="Bottom",s="Left",a=(e<3?[t,n,i,s]:[t+s,t+n,i+n,i+s]).map(function(o){return e<2?r+o:"border"+o+r});Zb[e>1?"border"+r:r]=function(o,l,c,u,f){var d,p;if(arguments.length<4)return d=a.map(function(v){return iu(o,v,c)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(u+"").split(" "),p={},a.forEach(function(v,m){return p[v]=d[m]=d[m]||d[(m-1)/2|0]}),o.init(l,p,f)}});var oq={name:"css",register:hF,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,s){var a=this._props,o=e.style,l=n.vars.startAt,c,u,f,d,p,v,m,g,w,b,E,B,S,M,I,k;JD||hF(),this.styles=this.styles||eq(e),k=this.styles.props,this.tween=n;for(m in t)if(m!=="autoRound"&&(u=t[m],!(qa[m]&&VK(m,t,n,i,e,s)))){if(p=typeof u,v=Zb[m],p==="function"&&(u=u.call(n,i,e,s),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=zv(u)),v)v(this,e,m,u,n)&&(I=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",GA.lastIndex=0,GA.test(c)||(g=Ns(c),w=Ns(u)),w?g!==w&&(c=ZA(e,m,c,w)+w):g&&(u+=g),this.add(o,"setProperty",c,u,i,s,0,0,m),a.push(m),k.push(m,0,o[m]);else if(p!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(n,i,e,s):l[m],ns(c)&&~c.indexOf("random(")&&(c=zv(c)),Ns(c+"")||c==="auto"||(c+=to.units[m]||Ns(iu(e,m))||""),(c+"").charAt(1)==="="&&(c=iu(e,m))):c=iu(e,m),d=parseFloat(c),b=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),b&&(u=u.substr(2)),f=parseFloat(u),m in tc&&(m==="autoAlpha"&&(d===1&&iu(e,"visibility")==="hidden"&&f&&(d=0),k.push("visibility",0,o.visibility),DA(this,o,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),m!=="scale"&&m!=="transform"&&(m=tc[m],~m.indexOf(",")&&(m=m.split(",")[0]))),E=m in xu,E){if(this.styles.save(m),p==="string"&&u.substring(0,6)==="var(--"&&(u=Oo(e,u.substring(4,u.indexOf(")"))),f=parseFloat(u)),B||(S=e._gsap,S.renderTransform&&!t.parseTransform||Wv(e,t.parseTransform),M=t.smoothOrigin!==!1&&S.smooth,B=this._pt=new ba(this._pt,o,zr,0,1,S.renderTransform,S,0,-1),B.dep=1),m==="scale")this._pt=new ba(this._pt,S,"scaleY",S.scaleY,(b?$p(S.scaleY,b+f):f)-S.scaleY||0,AF),this._pt.u=0,a.push("scaleY",m),m+="X";else if(m==="transformOrigin"){k.push(Ea,0,o[Ea]),u=_ae(u),S.svg?dF(e,u,0,M,0,this):(w=parseFloat(u.split(" ")[2])||0,w!==S.zOrigin&&DA(this,S,"zOrigin",S.zOrigin,w),DA(this,o,m,Jb(c),Jb(u)));continue}else if(m==="svgOrigin"){dF(e,u,1,M,0,this);continue}else if(m in iq){Sae(this,S,m,d,b?$p(d,b+u):u);continue}else if(m==="smoothOrigin"){DA(this,S,"smooth",S.smooth,u);continue}else if(m==="force3D"){S[m]=u;continue}else if(m==="transform"){Bae(this,u,e);continue}}else m in o||(m=wm(m)||m);if(E||(f||f===0)&&(d||d===0)&&!oae.test(u)&&m in o)g=(c+"").substr((d+"").length),f||(f=0),w=Ns(u)||(m in to.units?to.units[m]:g),g!==w&&(d=ZA(e,m,c,w)),this._pt=new ba(this._pt,E?S:o,m,d,(b?$p(d,b+f):f)-d,!E&&(w==="px"||m==="zIndex")&&t.autoRound!==!1?uae:AF),this._pt.u=w||0,g!==w&&w!=="%"&&(this._pt.b=c,this._pt.r=cae);else if(m in o)wae.call(this,e,m,c,b?b+u:u);else if(m in e)this.add(e,m,c||e[m],b?b+u:u,i,s);else if(m!=="parseTransform"){zD(m,u);continue}E||(m in o?k.push(m,0,o[m]):typeof e[m]=="function"?k.push(m,2,e[m]()):k.push(m,1,c||e[m])),a.push(m)}}I&&YK(this)},render:function(e,t){if(t.tween._time||!$D())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:iu,aliases:tc,getSetter:function(e,t,n){var i=tc[t];return i&&i.indexOf(",")<0&&(t=i),t in xu&&t!==Ea&&(e._gsap.x||iu(e,"x"))?n&&hQ===n?t==="scale"?dae:hae:(hQ=n||{})&&(t==="scale"?pae:mae):e.style&&!kD(e.style[t])?Aae:~t.indexOf("-")?fae:XD(e,t)},core:{_removeProperty:fh,_getMatrix:tO}};Ma.utils.checkPrefix=wm;Ma.core.getStyleSaver=eq;(function(r,e,t,n){var i=xa(r+","+e+","+t,function(s){xu[s]=1});xa(e,function(s){to.units[s]="deg",iq[s]=1}),tc[i[13]]=r+","+e,xa(n,function(s){var a=s.split(":");tc[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");xa("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){to.units[r]="px"});Ma.registerPlugin(oq);var pF=Ma.registerPlugin(oq)||Ma;pF.core.Tween;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const bu="169",nm={ROTATE:0,DOLLY:1,PAN:2},kp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Mae=0,xQ=1,Cae=2,lq=1,Tae=2,Zc=3,so=0,ms=1,Ps=2,gu=0,rm=1,hh=2,bQ=3,EQ=4,Rae=5,Yf=100,Iae=101,Uae=102,Fae=103,Lae=104,Dae=200,Oae=201,Nae=202,Pae=203,mF=204,gF=205,kae=206,Hae=207,Qae=208,zae=209,Vae=210,Gae=211,jae=212,Wae=213,Kae=214,vF=0,yF=1,wF=2,_m=3,_F=4,xF=5,bF=6,EF=7,yE=0,qae=1,Yae=2,jA=0,Xae=1,Zae=2,Jae=3,$ae=4,eoe=5,toe=6,noe=7,SQ="attached",roe="detached",cq=300,xm=301,bm=302,Kv=303,SF=304,wE=306,ao=1e3,Ja=1001,qv=1002,ts=1003,nO=1004,Hp=1005,Hi=1006,xv=1007,ml=1008,Eu=1009,uq=1010,Aq=1011,Yv=1012,rO=1013,JA=1014,ks=1015,nc=1016,iO=1017,sO=1018,Em=1020,fq=35902,hq=1021,dq=1022,zi=1023,pq=1024,mq=1025,im=1026,Sm=1027,aO=1028,_E=1029,gq=1030,oO=1031,lO=1033,fb=33776,hb=33777,db=33778,pb=33779,BF=35840,MF=35841,CF=35842,TF=35843,RF=36196,IF=37492,UF=37496,FF=37808,LF=37809,DF=37810,OF=37811,NF=37812,PF=37813,kF=37814,HF=37815,QF=37816,zF=37817,VF=37818,GF=37819,jF=37820,WF=37821,mb=36492,KF=36494,qF=36495,vq=36283,YF=36284,XF=36285,ZF=36286,ioe=2200,soe=2201,aoe=2202,Bm=2300,Mm=2301,hC=2302,Qp=2400,zp=2401,$b=2402,cO=2500,ooe=2501,loe=0,yq=1,JF=2,coe=3200,uoe=3201,zm=0,Aoe=1,Zl="",Sn="srgb",Fi="srgb-linear",uO="display-p3",xE="display-p3-linear",e1="linear",Sr="srgb",t1="rec709",n1="p3",yd=7680,BQ=519,foe=512,hoe=513,doe=514,wq=515,poe=516,moe=517,goe=518,voe=519,$F=35044,yoe=35048,MQ="300 es",du=2e3,r1=2001;class lf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Es=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let CQ=1234567;const bv=Math.PI/180,Cm=180/Math.PI;function vl(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Es[r&255]+Es[r>>8&255]+Es[r>>16&255]+Es[r>>24&255]+"-"+Es[e&255]+Es[e>>8&255]+"-"+Es[e>>16&15|64]+Es[e>>24&255]+"-"+Es[t&63|128]+Es[t>>8&255]+"-"+Es[t>>16&255]+Es[t>>24&255]+Es[n&255]+Es[n>>8&255]+Es[n>>16&255]+Es[n>>24&255]).toLowerCase()}function gi(r,e,t){return Math.max(e,Math.min(t,r))}function AO(r,e){return(r%e+e)%e}function woe(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function _oe(r,e,t){return r!==e?(t-r)/(e-r):0}function Ev(r,e,t){return(1-t)*r+t*e}function xoe(r,e,t,n){return Ev(r,e,1-Math.exp(-t*n))}function boe(r,e=1){return e-Math.abs(AO(r,e*2)-e)}function Eoe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function Soe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function Boe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function Moe(r,e){return r+Math.random()*(e-r)}function Coe(r){return r*(.5-Math.random())}function Toe(r){r!==void 0&&(CQ=r);let e=CQ+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Roe(r){return r*bv}function Ioe(r){return r*Cm}function Uoe(r){return(r&r-1)===0&&r!==0}function Foe(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Loe(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Doe(r,e,t,n,i){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+n)/2),u=a((e+n)/2),f=s((e-n)/2),d=a((e-n)/2),p=s((n-e)/2),v=a((n-e)/2);switch(i){case"XYX":r.set(o*u,l*f,l*d,o*c);break;case"YZY":r.set(l*d,o*u,l*f,o*c);break;case"ZXZ":r.set(l*f,l*d,o*u,o*c);break;case"XZX":r.set(o*u,l*v,l*p,o*c);break;case"YXY":r.set(l*p,o*u,l*v,o*c);break;case"ZYZ":r.set(l*v,l*p,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function dl(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function or(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const sn={DEG2RAD:bv,RAD2DEG:Cm,generateUUID:vl,clamp:gi,euclideanModulo:AO,mapLinear:woe,inverseLerp:_oe,lerp:Ev,damp:xoe,pingpong:boe,smoothstep:Eoe,smootherstep:Soe,randInt:Boe,randFloat:Moe,randFloatSpread:Coe,seededRandom:Toe,degToRad:Roe,radToDeg:Ioe,isPowerOfTwo:Uoe,ceilPowerOfTwo:Foe,floorPowerOfTwo:Loe,setQuaternionFromProperEuler:Doe,normalize:or,denormalize:dl};class pt{constructor(e=0,t=0){pt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(gi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vt{constructor(e,t,n,i,s,a,o,l,c){Vt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c)}set(e,t,n,i,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=n,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],c=n[1],u=n[4],f=n[7],d=n[2],p=n[5],v=n[8],m=i[0],g=i[3],w=i[6],b=i[1],E=i[4],B=i[7],S=i[2],M=i[5],I=i[8];return s[0]=a*m+o*b+l*S,s[3]=a*g+o*E+l*M,s[6]=a*w+o*B+l*I,s[1]=c*m+u*b+f*S,s[4]=c*g+u*E+f*M,s[7]=c*w+u*B+f*I,s[2]=d*m+p*b+v*S,s[5]=d*g+p*E+v*M,s[8]=d*w+p*B+v*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-n*s*u+n*o*l+i*s*c-i*a*l}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=u*a-o*c,d=o*l-u*s,p=c*s-a*l,v=t*f+n*d+i*p;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/v;return e[0]=f*m,e[1]=(i*c-u*n)*m,e[2]=(o*n-i*a)*m,e[3]=d*m,e[4]=(u*t-i*l)*m,e[5]=(i*s-o*t)*m,e[6]=p*m,e[7]=(n*l-c*t)*m,e[8]=(a*t-n*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*a+c*o)+a+e,-i*c,i*l,-i*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(dC.makeScale(e,t)),this}rotate(e){return this.premultiply(dC.makeRotation(-e)),this}translate(e,t){return this.premultiply(dC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dC=new Vt;function _q(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function Xv(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function Ooe(){const r=Xv("canvas");return r.style.display="block",r}const TQ={};function gb(r){r in TQ||(TQ[r]=!0,console.warn(r))}function Noe(r,e,t){return new Promise(function(n,i){function s(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:i();break;case r.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function Poe(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function koe(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const RQ=new Vt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),IQ=new Vt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),a0={[Fi]:{transfer:e1,primaries:t1,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r,fromReference:r=>r},[Sn]:{transfer:Sr,primaries:t1,luminanceCoefficients:[.2126,.7152,.0722],toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[xE]:{transfer:e1,primaries:n1,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.applyMatrix3(IQ),fromReference:r=>r.applyMatrix3(RQ)},[uO]:{transfer:Sr,primaries:n1,luminanceCoefficients:[.2289,.6917,.0793],toReference:r=>r.convertSRGBToLinear().applyMatrix3(IQ),fromReference:r=>r.applyMatrix3(RQ).convertLinearToSRGB()}},Hoe=new Set([Fi,xE]),on={enabled:!0,_workingColorSpace:Fi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!Hoe.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=a0[e].toReference,i=a0[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return a0[r].primaries},getTransfer:function(r){return r===Zl?e1:a0[r].transfer},getLuminanceCoefficients:function(r,e=this._workingColorSpace){return r.fromArray(a0[e].luminanceCoefficients)}};function sm(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function pC(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let wd;class Qoe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{wd===void 0&&(wd=Xv("canvas")),wd.width=e.width,wd.height=e.height;const n=wd.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=wd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Xv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=sm(s[a]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(sm(t[n]/255)*255):t[n]=sm(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let zoe=0;class fO{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zoe++}),this.uuid=vl(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(mC(i[a].image)):s.push(mC(i[a]))}else s=mC(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function mC(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?Qoe.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Voe=0;class Cr extends lf{constructor(e=Cr.DEFAULT_IMAGE,t=Cr.DEFAULT_MAPPING,n=Ja,i=Ja,s=Hi,a=ml,o=zi,l=Eu,c=Cr.DEFAULT_ANISOTROPY,u=Zl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Voe++}),this.uuid=vl(),this.name="",this.source=new fO(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.center=new pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cq)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ao:e.x=e.x-Math.floor(e.x);break;case Ja:e.x=e.x<0?0:1;break;case qv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ao:e.y=e.y-Math.floor(e.y);break;case Ja:e.y=e.y<0?0:1;break;case qv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Cr.DEFAULT_IMAGE=null;Cr.DEFAULT_MAPPING=cq;Cr.DEFAULT_ANISOTROPY=1;class Cn{constructor(e=0,t=0,n=0,i=1){Cn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const l=e.elements,c=l[0],u=l[4],f=l[8],d=l[1],p=l[5],v=l[9],m=l[2],g=l[6],w=l[10];if(Math.abs(u-d)<.01&&Math.abs(f-m)<.01&&Math.abs(v-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(f+m)<.1&&Math.abs(v+g)<.1&&Math.abs(c+p+w-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,B=(p+1)/2,S=(w+1)/2,M=(u+d)/4,I=(f+m)/4,k=(v+g)/4;return E>B&&E>S?E<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(E),i=M/n,s=I/n):B>S?B<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(B),n=M/i,s=k/i):S<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(S),n=I/s,i=k/s),this.set(n,i,s,t),this}let b=Math.sqrt((g-v)*(g-v)+(f-m)*(f-m)+(d-u)*(d-u));return Math.abs(b)<.001&&(b=1),this.x=(g-v)/b,this.y=(f-m)/b,this.z=(d-u)/b,this.w=Math.acos((c+p+w-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Goe extends lf{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Cn(0,0,e,t),this.scissorTest=!1,this.viewport=new Cn(0,0,e,t);const i={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Hi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Cr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fO(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class cc extends Goe{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class xq extends Cr{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class joe extends Cr{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ja,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rt{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,a,o){let l=n[i+0],c=n[i+1],u=n[i+2],f=n[i+3];const d=s[a+0],p=s[a+1],v=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(o===1){e[t+0]=d,e[t+1]=p,e[t+2]=v,e[t+3]=m;return}if(f!==m||l!==d||c!==p||u!==v){let g=1-o;const w=l*d+c*p+u*v+f*m,b=w>=0?1:-1,E=1-w*w;if(E>Number.EPSILON){const S=Math.sqrt(E),M=Math.atan2(S,w*b);g=Math.sin(g*M)/S,o=Math.sin(o*M)/S}const B=o*b;if(l=l*g+d*B,c=c*g+p*B,u=u*g+v*B,f=f*g+m*B,g===1-o){const S=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=S,c*=S,u*=S,f*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,i,s,a){const o=n[i],l=n[i+1],c=n[i+2],u=n[i+3],f=s[a],d=s[a+1],p=s[a+2],v=s[a+3];return e[t]=o*v+u*f+l*p-c*d,e[t+1]=l*v+u*d+c*f-o*p,e[t+2]=c*v+u*p+o*d-l*f,e[t+3]=u*v-o*f-l*d-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(n/2),u=o(i/2),f=o(s/2),d=l(n/2),p=l(i/2),v=l(s/2);switch(a){case"XYZ":this._x=d*u*f+c*p*v,this._y=c*p*f-d*u*v,this._z=c*u*v+d*p*f,this._w=c*u*f-d*p*v;break;case"YXZ":this._x=d*u*f+c*p*v,this._y=c*p*f-d*u*v,this._z=c*u*v-d*p*f,this._w=c*u*f+d*p*v;break;case"ZXY":this._x=d*u*f-c*p*v,this._y=c*p*f+d*u*v,this._z=c*u*v+d*p*f,this._w=c*u*f-d*p*v;break;case"ZYX":this._x=d*u*f-c*p*v,this._y=c*p*f+d*u*v,this._z=c*u*v-d*p*f,this._w=c*u*f+d*p*v;break;case"YZX":this._x=d*u*f+c*p*v,this._y=c*p*f+d*u*v,this._z=c*u*v-d*p*f,this._w=c*u*f-d*p*v;break;case"XZY":this._x=d*u*f-c*p*v,this._y=c*p*f-d*u*v,this._z=c*u*v+d*p*f,this._w=c*u*f+d*p*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],f=t[10],d=n+o+f;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(a-i)*p}else if(n>o&&n>f){const p=2*Math.sqrt(1+n-o-f);this._w=(u-l)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(s+c)/p}else if(o>f){const p=2*Math.sqrt(1+o-n-f);this._w=(s-c)/p,this._x=(i+a)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+f-n-o);this._w=(a-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=n*u+a*o+i*c-s*l,this._y=i*u+a*l+s*o-n*c,this._z=s*u+a*c+n*l-i*o,this._w=a*u-n*o-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const p=1-t;return this._w=p*a+t*this._w,this._x=p*n+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),f=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=a*f+this._w*d,this._x=n*f+this._x*d,this._y=i*f+this._y*d,this._z=s*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ae{constructor(e=0,t=0,n=0){ae.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(UQ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(UQ.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*i-o*n),u=2*(o*t-s*i),f=2*(s*n-a*t);return this.x=t+l*c+a*f-o*u,this.y=n+l*u+o*c-s*f,this.z=i+l*f+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-s*o,this.y=s*a-n*l,this.z=n*o-i*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return gC.copy(this).projectOnVector(e),this.sub(gC)}reflect(e){return this.sub(gC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(gi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gC=new ae,UQ=new Rt;class Or{constructor(e=new ae(1/0,1/0,1/0),t=new ae(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(el.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(el.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=el.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,el):el.fromBufferAttribute(s,a),el.applyMatrix4(e.matrixWorld),this.expandByPoint(el);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),n_.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),n_.copy(n.boundingBox)),n_.applyMatrix4(e.matrixWorld),this.union(n_)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,el),el.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(o0),r_.subVectors(this.max,o0),_d.subVectors(e.a,o0),xd.subVectors(e.b,o0),bd.subVectors(e.c,o0),oA.subVectors(xd,_d),lA.subVectors(bd,xd),Rf.subVectors(_d,bd);let t=[0,-oA.z,oA.y,0,-lA.z,lA.y,0,-Rf.z,Rf.y,oA.z,0,-oA.x,lA.z,0,-lA.x,Rf.z,0,-Rf.x,-oA.y,oA.x,0,-lA.y,lA.x,0,-Rf.y,Rf.x,0];return!vC(t,_d,xd,bd,r_)||(t=[1,0,0,0,1,0,0,0,1],!vC(t,_d,xd,bd,r_))?!1:(i_.crossVectors(oA,lA),t=[i_.x,i_.y,i_.z],vC(t,_d,xd,bd,r_))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,el).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(el).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Oc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oc=[new ae,new ae,new ae,new ae,new ae,new ae,new ae,new ae],el=new ae,n_=new Or,_d=new ae,xd=new ae,bd=new ae,oA=new ae,lA=new ae,Rf=new ae,o0=new ae,r_=new ae,i_=new ae,If=new ae;function vC(r,e,t,n,i){for(let s=0,a=r.length-3;s<=a;s+=3){If.fromArray(r,s);const o=i.x*Math.abs(If.x)+i.y*Math.abs(If.y)+i.z*Math.abs(If.z),l=e.dot(If),c=t.dot(If),u=n.dot(If);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const Woe=new Or,l0=new ae,yC=new ae;class zs{constructor(e=new ae,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Woe.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;l0.subVectors(e,this.center);const t=l0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(l0,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(l0.copy(e.center).add(yC)),this.expandByPoint(l0.copy(e.center).sub(yC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Nc=new ae,wC=new ae,s_=new ae,cA=new ae,_C=new ae,a_=new ae,xC=new ae;class Sh{constructor(e=new ae,t=new ae(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Nc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nc.copy(this.origin).addScaledVector(this.direction,t),Nc.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){wC.copy(e).add(t).multiplyScalar(.5),s_.copy(t).sub(e).normalize(),cA.copy(this.origin).sub(wC);const s=e.distanceTo(t)*.5,a=-this.direction.dot(s_),o=cA.dot(this.direction),l=-cA.dot(s_),c=cA.lengthSq(),u=Math.abs(1-a*a);let f,d,p,v;if(u>0)if(f=a*l-o,d=a*o-l,v=s*u,f>=0)if(d>=-v)if(d<=v){const m=1/u;f*=m,d*=m,p=f*(f+a*d+2*o)+d*(a*f+d+2*l)+c}else d=s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;else d=-s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;else d<=-v?(f=Math.max(0,-(-a*s+o)),d=f>0?-s:Math.min(Math.max(-s,-l),s),p=-f*f+d*(d+2*l)+c):d<=v?(f=0,d=Math.min(Math.max(-s,-l),s),p=d*(d+2*l)+c):(f=Math.max(0,-(a*s+o)),d=f>0?s:Math.min(Math.max(-s,-l),s),p=-f*f+d*(d+2*l)+c);else d=a>0?-s:s,f=Math.max(0,-(a*d+o)),p=-f*f+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(wC).addScaledVector(s_,d),p}intersectSphere(e,t){Nc.subVectors(e.center,this.origin);const n=Nc.dot(this.direction),i=Nc.dot(Nc)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),f>=0?(o=(e.min.z-d.z)*f,l=(e.max.z-d.z)*f):(o=(e.max.z-d.z)*f,l=(e.min.z-d.z)*f),n>l||o>i)||((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Nc)!==null}intersectTriangle(e,t,n,i,s){_C.subVectors(t,e),a_.subVectors(n,e),xC.crossVectors(_C,a_);let a=this.direction.dot(xC),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;cA.subVectors(this.origin,e);const l=o*this.direction.dot(a_.crossVectors(cA,a_));if(l<0)return null;const c=o*this.direction.dot(_C.cross(cA));if(c<0||l+c>a)return null;const u=-o*cA.dot(xC);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class at{constructor(e,t,n,i,s,a,o,l,c,u,f,d,p,v,m,g){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,a,o,l,c,u,f,d,p,v,m,g)}set(e,t,n,i,s,a,o,l,c,u,f,d,p,v,m,g){const w=this.elements;return w[0]=e,w[4]=t,w[8]=n,w[12]=i,w[1]=s,w[5]=a,w[9]=o,w[13]=l,w[2]=c,w[6]=u,w[10]=f,w[14]=d,w[3]=p,w[7]=v,w[11]=m,w[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Ed.setFromMatrixColumn(e,0).length(),s=1/Ed.setFromMatrixColumn(e,1).length(),a=1/Ed.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const d=a*u,p=a*f,v=o*u,m=o*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=p+v*c,t[5]=d-m*c,t[9]=-o*l,t[2]=m-d*c,t[6]=v+p*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*u,p=l*f,v=c*u,m=c*f;t[0]=d+m*o,t[4]=v*o-p,t[8]=a*c,t[1]=a*f,t[5]=a*u,t[9]=-o,t[2]=p*o-v,t[6]=m+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*u,p=l*f,v=c*u,m=c*f;t[0]=d-m*o,t[4]=-a*f,t[8]=v+p*o,t[1]=p+v*o,t[5]=a*u,t[9]=m-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*u,p=a*f,v=o*u,m=o*f;t[0]=l*u,t[4]=v*c-p,t[8]=d*c+m,t[1]=l*f,t[5]=m*c+d,t[9]=p*c-v,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,p=a*c,v=o*l,m=o*c;t[0]=l*u,t[4]=m-d*f,t[8]=v*f+p,t[1]=f,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=p*f+v,t[10]=d-m*f}else if(e.order==="XZY"){const d=a*l,p=a*c,v=o*l,m=o*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=d*f+m,t[5]=a*u,t[9]=p*f-v,t[2]=v*f-p,t[6]=o*u,t[10]=m*f+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Koe,e,qoe)}lookAt(e,t,n){const i=this.elements;return ka.subVectors(e,t),ka.lengthSq()===0&&(ka.z=1),ka.normalize(),uA.crossVectors(n,ka),uA.lengthSq()===0&&(Math.abs(n.z)===1?ka.x+=1e-4:ka.z+=1e-4,ka.normalize(),uA.crossVectors(n,ka)),uA.normalize(),o_.crossVectors(ka,uA),i[0]=uA.x,i[4]=o_.x,i[8]=ka.x,i[1]=uA.y,i[5]=o_.y,i[9]=ka.y,i[2]=uA.z,i[6]=o_.z,i[10]=ka.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],c=n[12],u=n[1],f=n[5],d=n[9],p=n[13],v=n[2],m=n[6],g=n[10],w=n[14],b=n[3],E=n[7],B=n[11],S=n[15],M=i[0],I=i[4],k=i[8],O=i[12],C=i[1],P=i[5],D=i[9],F=i[13],_=i[2],R=i[6],L=i[10],Q=i[14],G=i[3],Y=i[7],W=i[11],V=i[15];return s[0]=a*M+o*C+l*_+c*G,s[4]=a*I+o*P+l*R+c*Y,s[8]=a*k+o*D+l*L+c*W,s[12]=a*O+o*F+l*Q+c*V,s[1]=u*M+f*C+d*_+p*G,s[5]=u*I+f*P+d*R+p*Y,s[9]=u*k+f*D+d*L+p*W,s[13]=u*O+f*F+d*Q+p*V,s[2]=v*M+m*C+g*_+w*G,s[6]=v*I+m*P+g*R+w*Y,s[10]=v*k+m*D+g*L+w*W,s[14]=v*O+m*F+g*Q+w*V,s[3]=b*M+E*C+B*_+S*G,s[7]=b*I+E*P+B*R+S*Y,s[11]=b*k+E*D+B*L+S*W,s[15]=b*O+E*F+B*Q+S*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],f=e[6],d=e[10],p=e[14],v=e[3],m=e[7],g=e[11],w=e[15];return v*(+s*l*f-i*c*f-s*o*d+n*c*d+i*o*p-n*l*p)+m*(+t*l*p-t*c*d+s*a*d-i*a*p+i*c*u-s*l*u)+g*(+t*c*f-t*o*p-s*a*f+n*a*p+s*o*u-n*c*u)+w*(-i*o*u-t*l*f+t*o*d+i*a*f-n*a*d+n*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],p=e[11],v=e[12],m=e[13],g=e[14],w=e[15],b=f*g*c-m*d*c+m*l*p-o*g*p-f*l*w+o*d*w,E=v*d*c-u*g*c-v*l*p+a*g*p+u*l*w-a*d*w,B=u*m*c-v*f*c+v*o*p-a*m*p-u*o*w+a*f*w,S=v*f*l-u*m*l-v*o*d+a*m*d+u*o*g-a*f*g,M=t*b+n*E+i*B+s*S;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/M;return e[0]=b*I,e[1]=(m*d*s-f*g*s-m*i*p+n*g*p+f*i*w-n*d*w)*I,e[2]=(o*g*s-m*l*s+m*i*c-n*g*c-o*i*w+n*l*w)*I,e[3]=(f*l*s-o*d*s-f*i*c+n*d*c+o*i*p-n*l*p)*I,e[4]=E*I,e[5]=(u*g*s-v*d*s+v*i*p-t*g*p-u*i*w+t*d*w)*I,e[6]=(v*l*s-a*g*s-v*i*c+t*g*c+a*i*w-t*l*w)*I,e[7]=(a*d*s-u*l*s+u*i*c-t*d*c-a*i*p+t*l*p)*I,e[8]=B*I,e[9]=(v*f*s-u*m*s-v*n*p+t*m*p+u*n*w-t*f*w)*I,e[10]=(a*m*s-v*o*s+v*n*c-t*m*c-a*n*w+t*o*w)*I,e[11]=(u*o*s-a*f*s-u*n*c+t*f*c+a*n*p-t*o*p)*I,e[12]=S*I,e[13]=(u*m*i-v*f*i+v*n*d-t*m*d-u*n*g+t*f*g)*I,e[14]=(v*o*i-a*m*i-v*n*l+t*m*l+a*n*g-t*o*g)*I,e[15]=(a*f*i-u*o*i+u*n*l-t*f*l-a*n*d+t*o*d)*I,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+n,c*o-i*l,c*l+i*o,0,c*o+i*l,u*o+n,u*l-i*a,0,c*l-i*o,u*l+i*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,f=o+o,d=s*c,p=s*u,v=s*f,m=a*u,g=a*f,w=o*f,b=l*c,E=l*u,B=l*f,S=n.x,M=n.y,I=n.z;return i[0]=(1-(m+w))*S,i[1]=(p+B)*S,i[2]=(v-E)*S,i[3]=0,i[4]=(p-B)*M,i[5]=(1-(d+w))*M,i[6]=(g+b)*M,i[7]=0,i[8]=(v+E)*I,i[9]=(g-b)*I,i[10]=(1-(d+m))*I,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Ed.set(i[0],i[1],i[2]).length();const a=Ed.set(i[4],i[5],i[6]).length(),o=Ed.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],tl.copy(this);const c=1/s,u=1/a,f=1/o;return tl.elements[0]*=c,tl.elements[1]*=c,tl.elements[2]*=c,tl.elements[4]*=u,tl.elements[5]*=u,tl.elements[6]*=u,tl.elements[8]*=f,tl.elements[9]*=f,tl.elements[10]*=f,t.setFromRotationMatrix(tl),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,i,s,a,o=du){const l=this.elements,c=2*s/(t-e),u=2*s/(n-i),f=(t+e)/(t-e),d=(n+i)/(n-i);let p,v;if(o===du)p=-(a+s)/(a-s),v=-2*a*s/(a-s);else if(o===r1)p=-a/(a-s),v=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,s,a,o=du){const l=this.elements,c=1/(t-e),u=1/(n-i),f=1/(a-s),d=(t+e)*c,p=(n+i)*u;let v,m;if(o===du)v=(a+s)*f,m=-2*f;else if(o===r1)v=s*f,m=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=m,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Ed=new ae,tl=new at,Koe=new ae(0,0,0),qoe=new ae(1,1,1),uA=new ae,o_=new ae,ka=new ae,FQ=new at,LQ=new Rt;class Jr{constructor(e=0,t=0,n=0,i=Jr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],c=i[5],u=i[9],f=i[2],d=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(gi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-gi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(gi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-gi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(gi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-gi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return FQ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FQ,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return LQ.setFromEuler(this),this.setFromQuaternion(LQ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Jr.DEFAULT_ORDER="XYZ";class hO{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Yoe=0;const DQ=new ae,Sd=new Rt,Pc=new at,l_=new ae,c0=new ae,Xoe=new ae,Zoe=new Rt,OQ=new ae(1,0,0),NQ=new ae(0,1,0),PQ=new ae(0,0,1),kQ={type:"added"},Joe={type:"removed"},Bd={type:"childadded",child:null},bC={type:"childremoved",child:null};class Tn extends lf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yoe++}),this.uuid=vl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tn.DEFAULT_UP.clone();const e=new ae,t=new Jr,n=new Rt,i=new ae(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new at},normalMatrix:{value:new Vt}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=Tn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hO,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sd.setFromAxisAngle(e,t),this.quaternion.multiply(Sd),this}rotateOnWorldAxis(e,t){return Sd.setFromAxisAngle(e,t),this.quaternion.premultiply(Sd),this}rotateX(e){return this.rotateOnAxis(OQ,e)}rotateY(e){return this.rotateOnAxis(NQ,e)}rotateZ(e){return this.rotateOnAxis(PQ,e)}translateOnAxis(e,t){return DQ.copy(e).applyQuaternion(this.quaternion),this.position.add(DQ.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(OQ,e)}translateY(e){return this.translateOnAxis(NQ,e)}translateZ(e){return this.translateOnAxis(PQ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pc.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?l_.copy(e):l_.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),c0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pc.lookAt(c0,l_,this.up):Pc.lookAt(l_,c0,this.up),this.quaternion.setFromRotationMatrix(Pc),i&&(Pc.extractRotation(i.matrixWorld),Sd.setFromRotationMatrix(Pc),this.quaternion.premultiply(Sd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(kQ),Bd.child=e,this.dispatchEvent(Bd),Bd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Joe),bC.child=e,this.dispatchEvent(bC),bC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(kQ),Bd.child=e,this.dispatchEvent(Bd),Bd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(c0,e,Xoe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(c0,Zoe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),d=a(e.skeletons),p=a(e.animations),v=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),u.length>0&&(n.images=u),f.length>0&&(n.shapes=f),d.length>0&&(n.skeletons=d),p.length>0&&(n.animations=p),v.length>0&&(n.nodes=v)}return n.object=i,n;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Tn.DEFAULT_UP=new ae(0,1,0);Tn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Tn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const nl=new ae,kc=new ae,EC=new ae,Hc=new ae,Md=new ae,Cd=new ae,HQ=new ae,SC=new ae,BC=new ae,MC=new ae,CC=new Cn,TC=new Cn,RC=new Cn;class es{constructor(e=new ae,t=new ae,n=new ae){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),nl.subVectors(e,t),i.cross(nl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){nl.subVectors(i,t),kc.subVectors(n,t),EC.subVectors(e,t);const a=nl.dot(nl),o=nl.dot(kc),l=nl.dot(EC),c=kc.dot(kc),u=kc.dot(EC),f=a*c-o*o;if(f===0)return s.set(0,0,0),null;const d=1/f,p=(c*l-o*u)*d,v=(a*u-o*l)*d;return s.set(1-p-v,v,p)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Hc)===null?!1:Hc.x>=0&&Hc.y>=0&&Hc.x+Hc.y<=1}static getInterpolation(e,t,n,i,s,a,o,l){return this.getBarycoord(e,t,n,i,Hc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Hc.x),l.addScaledVector(a,Hc.y),l.addScaledVector(o,Hc.z),l)}static getInterpolatedAttribute(e,t,n,i,s,a){return CC.setScalar(0),TC.setScalar(0),RC.setScalar(0),CC.fromBufferAttribute(e,t),TC.fromBufferAttribute(e,n),RC.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(CC,s.x),a.addScaledVector(TC,s.y),a.addScaledVector(RC,s.z),a}static isFrontFacing(e,t,n,i){return nl.subVectors(n,t),kc.subVectors(e,t),nl.cross(kc).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return nl.subVectors(this.c,this.b),kc.subVectors(this.a,this.b),nl.cross(kc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return es.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return es.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,s){return es.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return es.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return es.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let a,o;Md.subVectors(i,n),Cd.subVectors(s,n),SC.subVectors(e,n);const l=Md.dot(SC),c=Cd.dot(SC);if(l<=0&&c<=0)return t.copy(n);BC.subVectors(e,i);const u=Md.dot(BC),f=Cd.dot(BC);if(u>=0&&f<=u)return t.copy(i);const d=l*f-u*c;if(d<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(n).addScaledVector(Md,a);MC.subVectors(e,s);const p=Md.dot(MC),v=Cd.dot(MC);if(v>=0&&p<=v)return t.copy(s);const m=p*c-l*v;if(m<=0&&c>=0&&v<=0)return o=c/(c-v),t.copy(n).addScaledVector(Cd,o);const g=u*v-p*f;if(g<=0&&f-u>=0&&p-v>=0)return HQ.subVectors(s,i),o=(f-u)/(f-u+(p-v)),t.copy(i).addScaledVector(HQ,o);const w=1/(g+m+d);return a=m*w,o=d*w,t.copy(n).addScaledVector(Md,a).addScaledVector(Cd,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const bq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},AA={h:0,s:0,l:0},c_={h:0,s:0,l:0};function IC(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class st{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Sn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,on.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=on.workingColorSpace){return this.r=e,this.g=t,this.b=n,on.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=on.workingColorSpace){if(e=AO(e,1),t=gi(t,0,1),n=gi(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=IC(a,s,e+1/3),this.g=IC(a,s,e),this.b=IC(a,s,e-1/3)}return on.toWorkingColorSpace(this,i),this}setStyle(e,t=Sn){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Sn){const n=bq[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=sm(e.r),this.g=sm(e.g),this.b=sm(e.b),this}copyLinearToSRGB(e){return this.r=pC(e.r),this.g=pC(e.g),this.b=pC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Sn){return on.fromWorkingColorSpace(Ss.copy(this),e),Math.round(gi(Ss.r*255,0,255))*65536+Math.round(gi(Ss.g*255,0,255))*256+Math.round(gi(Ss.b*255,0,255))}getHexString(e=Sn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=on.workingColorSpace){on.fromWorkingColorSpace(Ss.copy(this),t);const n=Ss.r,i=Ss.g,s=Ss.b,a=Math.max(n,i,s),o=Math.min(n,i,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const f=a-o;switch(c=u<=.5?f/(a+o):f/(2-a-o),a){case n:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-n)/f+2;break;case s:l=(n-i)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=on.workingColorSpace){return on.fromWorkingColorSpace(Ss.copy(this),t),e.r=Ss.r,e.g=Ss.g,e.b=Ss.b,e}getStyle(e=Sn){on.fromWorkingColorSpace(Ss.copy(this),e);const t=Ss.r,n=Ss.g,i=Ss.b;return e!==Sn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(AA),this.setHSL(AA.h+e,AA.s+t,AA.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(AA),e.getHSL(c_);const n=Ev(AA.h,c_.h,t),i=Ev(AA.s,c_.s,t),s=Ev(AA.l,c_.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ss=new st;st.NAMES=bq;let $oe=0,Sa=class extends lf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$oe++}),this.uuid=vl(),this.name="",this.type="Material",this.blending=rm,this.side=so,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=mF,this.blendDst=gF,this.blendEquation=Yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new st(0,0,0),this.blendAlpha=0,this.depthFunc=_m,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=BQ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yd,this.stencilZFail=yd,this.stencilZPass=yd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==rm&&(n.blending=this.blending),this.side!==so&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==mF&&(n.blendSrc=this.blendSrc),this.blendDst!==gF&&(n.blendDst=this.blendDst),this.blendEquation!==Yf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==_m&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==BQ&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yd&&(n.stencilFail=this.stencilFail),this.stencilZFail!==yd&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==yd&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=i(e.textures),a=i(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class ya extends Sa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=yE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const au=ele();function ele(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(n[l]=1024>>-c-14,n[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(n[l]=c+15<<10,n[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;(c&8388608)===0;)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function tle(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=gi(r,-65504,65504),au.floatView[0]=r;const e=au.uint32View[0],t=e>>23&511;return au.baseTable[t]+((e&8388607)>>au.shiftTable[t])}function nle(r){const e=r>>10;return au.uint32View[0]=au.mantissaTable[au.offsetTable[e]+(r&1023)]+au.exponentTable[e],au.floatView[0]}const u_={toHalfFloat:tle,fromHalfFloat:nle},_i=new ae,A_=new pt;class Lt{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=$F,this.updateRanges=[],this.gpuType=ks,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)A_.fromBufferAttribute(this,t),A_.applyMatrix3(e),this.setXY(t,A_.x,A_.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix3(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix4(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyNormalMatrix(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.transformDirection(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=dl(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=or(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=dl(t,this.array)),t}setX(e,t){return this.normalized&&(t=or(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=dl(t,this.array)),t}setY(e,t){return this.normalized&&(t=or(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=dl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=or(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=dl(t,this.array)),t}setW(e,t){return this.normalized&&(t=or(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=or(t,this.array),n=or(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=or(t,this.array),n=or(n,this.array),i=or(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=or(t,this.array),n=or(n,this.array),i=or(i,this.array),s=or(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$F&&(e.usage=this.usage),e}}class bE extends Lt{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Eq extends Lt{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class xr extends Lt{constructor(e,t,n){super(new Float32Array(e),t,n)}}let rle=0;const _o=new at,UC=new Tn,Td=new ae,Ha=new Or,u0=new Or,Yi=new ae;class Gn extends lf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rle++}),this.uuid=vl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_q(e)?Eq:bE)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Vt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _o.makeRotationFromQuaternion(e),this.applyMatrix4(_o),this}rotateX(e){return _o.makeRotationX(e),this.applyMatrix4(_o),this}rotateY(e){return _o.makeRotationY(e),this.applyMatrix4(_o),this}rotateZ(e){return _o.makeRotationZ(e),this.applyMatrix4(_o),this}translate(e,t,n){return _o.makeTranslation(e,t,n),this.applyMatrix4(_o),this}scale(e,t,n){return _o.makeScale(e,t,n),this.applyMatrix4(_o),this}lookAt(e){return UC.lookAt(e),UC.updateMatrix(),this.applyMatrix4(UC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Td).negate(),this.translate(Td.x,Td.y,Td.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new xr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ae(-1/0,-1/0,-1/0),new ae(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Ha.setFromBufferAttribute(s),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,Ha.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,Ha.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(Ha.min),this.boundingBox.expandByPoint(Ha.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ae,1/0);return}if(e){const n=this.boundingSphere.center;if(Ha.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];u0.setFromBufferAttribute(o),this.morphTargetsRelative?(Yi.addVectors(Ha.min,u0.min),Ha.expandByPoint(Yi),Yi.addVectors(Ha.max,u0.max),Ha.expandByPoint(Yi)):(Ha.expandByPoint(u0.min),Ha.expandByPoint(u0.max))}Ha.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)Yi.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(Yi));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Yi.fromBufferAttribute(o,c),l&&(Td.fromBufferAttribute(e,c),Yi.add(Td)),i=Math.max(i,n.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Lt(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let k=0;k<n.count;k++)o[k]=new ae,l[k]=new ae;const c=new ae,u=new ae,f=new ae,d=new pt,p=new pt,v=new pt,m=new ae,g=new ae;function w(k,O,C){c.fromBufferAttribute(n,k),u.fromBufferAttribute(n,O),f.fromBufferAttribute(n,C),d.fromBufferAttribute(s,k),p.fromBufferAttribute(s,O),v.fromBufferAttribute(s,C),u.sub(c),f.sub(c),p.sub(d),v.sub(d);const P=1/(p.x*v.y-v.x*p.y);isFinite(P)&&(m.copy(u).multiplyScalar(v.y).addScaledVector(f,-p.y).multiplyScalar(P),g.copy(f).multiplyScalar(p.x).addScaledVector(u,-v.x).multiplyScalar(P),o[k].add(m),o[O].add(m),o[C].add(m),l[k].add(g),l[O].add(g),l[C].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let k=0,O=b.length;k<O;++k){const C=b[k],P=C.start,D=C.count;for(let F=P,_=P+D;F<_;F+=3)w(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const E=new ae,B=new ae,S=new ae,M=new ae;function I(k){S.fromBufferAttribute(i,k),M.copy(S);const O=o[k];E.copy(O),E.sub(S.multiplyScalar(S.dot(O))).normalize(),B.crossVectors(M,O);const P=B.dot(l[k])<0?-1:1;a.setXYZW(k,E.x,E.y,E.z,P)}for(let k=0,O=b.length;k<O;++k){const C=b[k],P=C.start,D=C.count;for(let F=P,_=P+D;F<_;F+=3)I(e.getX(F+0)),I(e.getX(F+1)),I(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Lt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,p=n.count;d<p;d++)n.setXYZ(d,0,0,0);const i=new ae,s=new ae,a=new ae,o=new ae,l=new ae,c=new ae,u=new ae,f=new ae;if(e)for(let d=0,p=e.count;d<p;d+=3){const v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,g),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),o.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),o.add(u),l.add(u),c.add(u),n.setXYZ(v,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(let d=0,p=t.count;d<p;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),u.subVectors(a,s),f.subVectors(i,s),u.cross(f),n.setXYZ(d+0,u.x,u.y,u.z),n.setXYZ(d+1,u.x,u.y,u.z),n.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Yi.fromBufferAttribute(e,t),Yi.normalize(),e.setXYZ(t,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,f=o.normalized,d=new c.constructor(l.length*u);let p=0,v=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?p=l[m]*o.data.stride+o.offset:p=l[m]*u;for(let w=0;w<u;w++)d[v++]=c[p++]}return new Lt(d,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gn,n=this.index.array,i=this.attributes;for(const o in i){const l=i[o],c=e(l,n);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,f=c.length;u<f;u++){const d=c[u],p=e(d,n);l.push(p)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,d=c.length;f<d;f++){const p=c[f];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let d=0,p=f.length;d<p;d++)u.push(f[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const QQ=new at,Uf=new Sh,f_=new zs,zQ=new ae,h_=new ae,d_=new ae,p_=new ae,FC=new ae,m_=new ae,VQ=new ae,g_=new ae;class lr extends Tn{constructor(e=new Gn,t=new ya){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){m_.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],f=s[l];u!==0&&(FC.fromBufferAttribute(f,e),a?m_.addScaledVector(FC,u):m_.addScaledVector(FC.sub(t),u))}t.add(m_)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),f_.copy(n.boundingSphere),f_.applyMatrix4(s),Uf.copy(e.ray).recast(e.near),!(f_.containsPoint(Uf.origin)===!1&&(Uf.intersectSphere(f_,zQ)===null||Uf.origin.distanceToSquared(zQ)>(e.far-e.near)**2))&&(QQ.copy(s).invert(),Uf.copy(e.ray).applyMatrix4(QQ),!(n.boundingBox!==null&&Uf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Uf)))}_computeIntersections(e,t,n){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,d=s.groups,p=s.drawRange;if(o!==null)if(Array.isArray(a))for(let v=0,m=d.length;v<m;v++){const g=d[v],w=a[g.materialIndex],b=Math.max(g.start,p.start),E=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let B=b,S=E;B<S;B+=3){const M=o.getX(B),I=o.getX(B+1),k=o.getX(B+2);i=v_(this,w,e,n,c,u,f,M,I,k),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),m=Math.min(o.count,p.start+p.count);for(let g=v,w=m;g<w;g+=3){const b=o.getX(g),E=o.getX(g+1),B=o.getX(g+2);i=v_(this,a,e,n,c,u,f,b,E,B),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let v=0,m=d.length;v<m;v++){const g=d[v],w=a[g.materialIndex],b=Math.max(g.start,p.start),E=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let B=b,S=E;B<S;B+=3){const M=B,I=B+1,k=B+2;i=v_(this,w,e,n,c,u,f,M,I,k),i&&(i.faceIndex=Math.floor(B/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const v=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let g=v,w=m;g<w;g+=3){const b=g,E=g+1,B=g+2;i=v_(this,a,e,n,c,u,f,b,E,B),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}}}function ile(r,e,t,n,i,s,a,o){let l;if(e.side===ms?l=n.intersectTriangle(a,s,i,!0,o):l=n.intersectTriangle(i,s,a,e.side===so,o),l===null)return null;g_.copy(o),g_.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(g_);return c<t.near||c>t.far?null:{distance:c,point:g_.clone(),object:r}}function v_(r,e,t,n,i,s,a,o,l,c){r.getVertexPosition(o,h_),r.getVertexPosition(l,d_),r.getVertexPosition(c,p_);const u=ile(r,e,t,n,h_,d_,p_,VQ);if(u){const f=new ae;es.getBarycoord(VQ,h_,d_,p_,f),i&&(u.uv=es.getInterpolatedAttribute(i,o,l,c,f,new pt)),s&&(u.uv1=es.getInterpolatedAttribute(s,o,l,c,f,new pt)),a&&(u.normal=es.getInterpolatedAttribute(a,o,l,c,f,new ae),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new ae,materialIndex:0};es.getNormal(h_,d_,p_,d.normal),u.face=d,u.barycoord=f}return u}class Ey extends Gn{constructor(e=1,t=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],f=[];let d=0,p=0;v("z","y","x",-1,-1,n,t,e,a,s,0),v("z","y","x",1,-1,n,t,-e,a,s,1),v("x","z","y",1,1,e,n,t,i,a,2),v("x","z","y",1,-1,e,n,-t,i,a,3),v("x","y","z",1,-1,e,t,n,i,s,4),v("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new xr(c,3)),this.setAttribute("normal",new xr(u,3)),this.setAttribute("uv",new xr(f,2));function v(m,g,w,b,E,B,S,M,I,k,O){const C=B/I,P=S/k,D=B/2,F=S/2,_=M/2,R=I+1,L=k+1;let Q=0,G=0;const Y=new ae;for(let W=0;W<L;W++){const V=W*P-F;for(let T=0;T<R;T++){const H=T*C-D;Y[m]=H*b,Y[g]=V*E,Y[w]=_,c.push(Y.x,Y.y,Y.z),Y[m]=0,Y[g]=0,Y[w]=M>0?1:-1,u.push(Y.x,Y.y,Y.z),f.push(T/I),f.push(1-W/k),Q+=1}}for(let W=0;W<k;W++)for(let V=0;V<I;V++){const T=d+V+R*W,H=d+V+R*(W+1),K=d+(V+1)+R*(W+1),N=d+(V+1)+R*W;l.push(T,H,N),l.push(H,K,N),G+=6}o.addGroup(p,G,O),p+=G,d+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ey(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Tm(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function qs(r){const e={};for(let t=0;t<r.length;t++){const n=Tm(r[t]);for(const i in n)e[i]=n[i]}return e}function sle(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function Sq(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:on.workingColorSpace}const dO={clone:Tm,merge:qs};var ale=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ole=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class vi extends Sa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ale,this.fragmentShader=ole,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tm(e.uniforms),this.uniformsGroups=sle(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?t.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[i]={type:"m4",value:a.toArray()}:t.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Bq extends Tn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at,this.coordinateSystem=du}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const fA=new ae,GQ=new pt,jQ=new pt;class Pi extends Bq{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Cm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Cm*2*Math.atan(Math.tan(bv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){fA.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(fA.x,fA.y).multiplyScalar(-e/fA.z),fA.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(fA.x,fA.y).multiplyScalar(-e/fA.z)}getViewSize(e,t){return this.getViewBounds(e,GQ,jQ),t.subVectors(jQ,GQ)}setViewOffset(e,t,n,i,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bv*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*i/l,t-=a.offsetY*n/c,i*=a.width/l,n*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Rd=-90,Id=1;class lle extends Tn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Pi(Rd,Id,e,t);i.layers=this.layers,this.add(i);const s=new Pi(Rd,Id,e,t);s.layers=this.layers,this.add(s);const a=new Pi(Rd,Id,e,t);a.layers=this.layers,this.add(a);const o=new Pi(Rd,Id,e,t);o.layers=this.layers,this.add(o);const l=new Pi(Rd,Id,e,t);l.layers=this.layers,this.add(l);const c=new Pi(Rd,Id,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===du)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===r1)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,o),e.setRenderTarget(n,3,i),e.render(t,l),e.setRenderTarget(n,4,i),e.render(t,c),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,i),e.render(t,u),e.setRenderTarget(f,d,p),e.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}class Mq extends Cr{constructor(e,t,n,i,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:xm,super(e,t,n,i,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cle extends cc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Mq(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Hi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ey(5,5,5),s=new vi({name:"CubemapFromEquirect",uniforms:Tm(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ms,blending:gu});s.uniforms.tEquirect.value=t;const a=new lr(i,s),o=t.minFilter;return t.minFilter===ml&&(t.minFilter=Hi),new lle(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(s)}}const LC=new ae,ule=new ae,Ale=new Vt;class Wl{constructor(e=new ae(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=LC.subVectors(n,t).cross(ule.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(LC),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Ale.getNormalMatrix(e),i=this.coplanarPoint(LC).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ff=new zs,y_=new ae;class EE{constructor(e=new Wl,t=new Wl,n=new Wl,i=new Wl,s=new Wl,a=new Wl){this.planes=[e,t,n,i,s,a]}set(e,t,n,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=du){const n=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],f=i[6],d=i[7],p=i[8],v=i[9],m=i[10],g=i[11],w=i[12],b=i[13],E=i[14],B=i[15];if(n[0].setComponents(l-s,d-c,g-p,B-w).normalize(),n[1].setComponents(l+s,d+c,g+p,B+w).normalize(),n[2].setComponents(l+a,d+u,g+v,B+b).normalize(),n[3].setComponents(l-a,d-u,g-v,B-b).normalize(),n[4].setComponents(l-o,d-f,g-m,B-E).normalize(),t===du)n[5].setComponents(l+o,d+f,g+m,B+E).normalize();else if(t===r1)n[5].setComponents(o,f,m,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ff.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ff.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ff)}intersectsSprite(e){return Ff.center.set(0,0,0),Ff.radius=.7071067811865476,Ff.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ff)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(y_.x=i.normal.x>0?e.max.x:e.min.x,y_.y=i.normal.y>0?e.max.y:e.min.y,y_.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(y_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Cq(){let r=null,e=!1,t=null,n=null;function i(s,a){t(s,a),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function fle(r){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,f=c.byteLength,d=r.createBuffer();r.bindBuffer(l,d),r.bufferData(l,c,u),o.onUploadCallback();let p;if(c instanceof Float32Array)p=r.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?p=r.HALF_FLOAT:p=r.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=r.SHORT;else if(c instanceof Uint32Array)p=r.UNSIGNED_INT;else if(c instanceof Int32Array)p=r.INT;else if(c instanceof Int8Array)p=r.BYTE;else if(c instanceof Uint8Array)p=r.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:f}}function n(o,l,c){const u=l.array,f=l.updateRanges;if(r.bindBuffer(c,o),f.length===0)r.bufferSubData(c,0,u);else{f.sort((p,v)=>p.start-v.start);let d=0;for(let p=1;p<f.length;p++){const v=f[d],m=f[p];m.start<=v.start+v.count+1?v.count=Math.max(v.count,m.start+m.count-v.start):(++d,f[d]=m)}f.length=d+1;for(let p=0,v=f.length;p<v;p++){const m=f[p];r.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(r.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,o,l),c.version=o.version}}return{get:i,remove:s,update:a}}class Tu extends Gn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(i),c=o+1,u=l+1,f=e/o,d=t/l,p=[],v=[],m=[],g=[];for(let w=0;w<u;w++){const b=w*d-a;for(let E=0;E<c;E++){const B=E*f-s;v.push(B,-b,0),m.push(0,0,1),g.push(E/o),g.push(1-w/l)}}for(let w=0;w<l;w++)for(let b=0;b<o;b++){const E=b+c*w,B=b+c*(w+1),S=b+1+c*(w+1),M=b+1+c*w;p.push(E,B,M),p.push(B,S,M)}this.setIndex(p),this.setAttribute("position",new xr(v,3)),this.setAttribute("normal",new xr(m,3)),this.setAttribute("uv",new xr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tu(e.width,e.height,e.widthSegments,e.heightSegments)}}var hle=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dle=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ple=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mle=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gle=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,vle=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yle=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wle=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_le=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,xle=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ble=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ele=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Sle=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ble=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Mle=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Cle=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Tle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Rle=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ile=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Ule=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Fle=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Lle=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Dle=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Ole=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Nle=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ple=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kle=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Hle=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Qle=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zle=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Vle="gl_FragColor = linearToOutputTexel( gl_FragColor );",Gle=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Wle=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Kle=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,qle=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Yle=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Xle=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Zle=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Jle=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,$le=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ece=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,tce=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nce=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rce=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ice=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,sce=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,ace=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oce=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lce=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cce=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uce=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Ace=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,fce=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hce=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dce=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,pce=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mce=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gce=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vce=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,yce=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,wce=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,_ce=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xce=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bce=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Ece=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Sce=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Bce=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Mce=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Cce=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Tce=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Rce=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ice=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Uce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Fce=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Lce=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Dce=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Oce=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Nce=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Pce=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,kce=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Hce=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Qce=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,zce=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Vce=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Gce=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jce=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Wce=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Kce=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,qce=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Yce=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Xce=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Zce=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Jce=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$ce=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,eue=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tue=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nue=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rue=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iue=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sue=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,aue=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oue=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,lue=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,cue=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uue=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Aue=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const fue=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,hue=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,due=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pue=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gue=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vue=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,yue=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,wue=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_ue=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bue=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Eue=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sue=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bue=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Mue=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cue=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tue=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rue=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Iue=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uue=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Fue=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Lue=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Due=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Oue=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Nue=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pue=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kue=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hue=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Que=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zue=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Vue=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gue=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ln={alphahash_fragment:hle,alphahash_pars_fragment:dle,alphamap_fragment:ple,alphamap_pars_fragment:mle,alphatest_fragment:gle,alphatest_pars_fragment:vle,aomap_fragment:yle,aomap_pars_fragment:wle,batching_pars_vertex:_le,batching_vertex:xle,begin_vertex:ble,beginnormal_vertex:Ele,bsdfs:Sle,iridescence_fragment:Ble,bumpmap_pars_fragment:Mle,clipping_planes_fragment:Cle,clipping_planes_pars_fragment:Tle,clipping_planes_pars_vertex:Rle,clipping_planes_vertex:Ile,color_fragment:Ule,color_pars_fragment:Fle,color_pars_vertex:Lle,color_vertex:Dle,common:Ole,cube_uv_reflection_fragment:Nle,defaultnormal_vertex:Ple,displacementmap_pars_vertex:kle,displacementmap_vertex:Hle,emissivemap_fragment:Qle,emissivemap_pars_fragment:zle,colorspace_fragment:Vle,colorspace_pars_fragment:Gle,envmap_fragment:jle,envmap_common_pars_fragment:Wle,envmap_pars_fragment:Kle,envmap_pars_vertex:qle,envmap_physical_pars_fragment:sce,envmap_vertex:Yle,fog_vertex:Xle,fog_pars_vertex:Zle,fog_fragment:Jle,fog_pars_fragment:$le,gradientmap_pars_fragment:ece,lightmap_pars_fragment:tce,lights_lambert_fragment:nce,lights_lambert_pars_fragment:rce,lights_pars_begin:ice,lights_toon_fragment:ace,lights_toon_pars_fragment:oce,lights_phong_fragment:lce,lights_phong_pars_fragment:cce,lights_physical_fragment:uce,lights_physical_pars_fragment:Ace,lights_fragment_begin:fce,lights_fragment_maps:hce,lights_fragment_end:dce,logdepthbuf_fragment:pce,logdepthbuf_pars_fragment:mce,logdepthbuf_pars_vertex:gce,logdepthbuf_vertex:vce,map_fragment:yce,map_pars_fragment:wce,map_particle_fragment:_ce,map_particle_pars_fragment:xce,metalnessmap_fragment:bce,metalnessmap_pars_fragment:Ece,morphinstance_vertex:Sce,morphcolor_vertex:Bce,morphnormal_vertex:Mce,morphtarget_pars_vertex:Cce,morphtarget_vertex:Tce,normal_fragment_begin:Rce,normal_fragment_maps:Ice,normal_pars_fragment:Uce,normal_pars_vertex:Fce,normal_vertex:Lce,normalmap_pars_fragment:Dce,clearcoat_normal_fragment_begin:Oce,clearcoat_normal_fragment_maps:Nce,clearcoat_pars_fragment:Pce,iridescence_pars_fragment:kce,opaque_fragment:Hce,packing:Qce,premultiplied_alpha_fragment:zce,project_vertex:Vce,dithering_fragment:Gce,dithering_pars_fragment:jce,roughnessmap_fragment:Wce,roughnessmap_pars_fragment:Kce,shadowmap_pars_fragment:qce,shadowmap_pars_vertex:Yce,shadowmap_vertex:Xce,shadowmask_pars_fragment:Zce,skinbase_vertex:Jce,skinning_pars_vertex:$ce,skinning_vertex:eue,skinnormal_vertex:tue,specularmap_fragment:nue,specularmap_pars_fragment:rue,tonemapping_fragment:iue,tonemapping_pars_fragment:sue,transmission_fragment:aue,transmission_pars_fragment:oue,uv_pars_fragment:lue,uv_pars_vertex:cue,uv_vertex:uue,worldpos_vertex:Aue,background_vert:fue,background_frag:hue,backgroundCube_vert:due,backgroundCube_frag:pue,cube_vert:mue,cube_frag:gue,depth_vert:vue,depth_frag:yue,distanceRGBA_vert:wue,distanceRGBA_frag:_ue,equirect_vert:xue,equirect_frag:bue,linedashed_vert:Eue,linedashed_frag:Sue,meshbasic_vert:Bue,meshbasic_frag:Mue,meshlambert_vert:Cue,meshlambert_frag:Tue,meshmatcap_vert:Rue,meshmatcap_frag:Iue,meshnormal_vert:Uue,meshnormal_frag:Fue,meshphong_vert:Lue,meshphong_frag:Due,meshphysical_vert:Oue,meshphysical_frag:Nue,meshtoon_vert:Pue,meshtoon_frag:kue,points_vert:Hue,points_frag:Que,shadow_vert:zue,shadow_frag:Vue,sprite_vert:Gue,sprite_frag:jue},ct={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vt}},envmap:{envMap:{value:null},envMapRotation:{value:new Vt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vt},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0},uvTransform:{value:new Vt}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vt},alphaMap:{value:null},alphaMapTransform:{value:new Vt},alphaTest:{value:0}}},Kl={basic:{uniforms:qs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:qs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new st(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:qs([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:qs([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:qs([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new st(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:qs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:qs([ct.points,ct.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:qs([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:qs([ct.common,ct.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:qs([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:qs([ct.sprite,ct.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new Vt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vt}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:qs([ct.common,ct.displacementmap,{referencePosition:{value:new ae},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:qs([ct.lights,ct.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};Kl.physical={uniforms:qs([Kl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vt},clearcoatNormalScale:{value:new pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vt},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vt},transmissionSamplerSize:{value:new pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vt},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vt},anisotropyVector:{value:new pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vt}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const w_={r:0,b:0,g:0},Lf=new Jr,Wue=new at;function Kue(r,e,t,n,i,s,a){const o=new st(0);let l=s===!0?0:1,c,u,f=null,d=0,p=null;function v(b){let E=b.isScene===!0?b.background:null;return E&&E.isTexture&&(E=(b.backgroundBlurriness>0?t:e).get(E)),E}function m(b){let E=!1;const B=v(b);B===null?w(o,l):B&&B.isColor&&(w(B,1),E=!0);const S=r.xr.getEnvironmentBlendMode();S==="additive"?n.buffers.color.setClear(0,0,0,1,a):S==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(r.autoClear||E)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function g(b,E){const B=v(E);B&&(B.isCubeTexture||B.mapping===wE)?(u===void 0&&(u=new lr(new Ey(1,1,1),new vi({name:"BackgroundCubeMaterial",uniforms:Tm(Kl.backgroundCube.uniforms),vertexShader:Kl.backgroundCube.vertexShader,fragmentShader:Kl.backgroundCube.fragmentShader,side:ms,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,M,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Lf.copy(E.backgroundRotation),Lf.x*=-1,Lf.y*=-1,Lf.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Lf.y*=-1,Lf.z*=-1),u.material.uniforms.envMap.value=B,u.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Wue.makeRotationFromEuler(Lf)),u.material.toneMapped=on.getTransfer(B.colorSpace)!==Sr,(f!==B||d!==B.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,f=B,d=B.version,p=r.toneMapping),u.layers.enableAll(),b.unshift(u,u.geometry,u.material,0,0,null)):B&&B.isTexture&&(c===void 0&&(c=new lr(new Tu(2,2),new vi({name:"BackgroundMaterial",uniforms:Tm(Kl.background.uniforms),vertexShader:Kl.background.vertexShader,fragmentShader:Kl.background.fragmentShader,side:so,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=B,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=on.getTransfer(B.colorSpace)!==Sr,B.matrixAutoUpdate===!0&&B.updateMatrix(),c.material.uniforms.uvTransform.value.copy(B.matrix),(f!==B||d!==B.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,f=B,d=B.version,p=r.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}function w(b,E){b.getRGB(w_,Sq(r)),n.buffers.color.setClear(w_.r,w_.g,w_.b,E,a)}return{getClearColor:function(){return o},setClearColor:function(b,E=1){o.set(b),l=E,w(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,w(o,l)},render:m,addToRenderList:g}}function que(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},i=d(null);let s=i,a=!1;function o(C,P,D,F,_){let R=!1;const L=f(F,D,P);s!==L&&(s=L,c(s.object)),R=p(C,F,D,_),R&&v(C,F,D,_),_!==null&&e.update(_,r.ELEMENT_ARRAY_BUFFER),(R||a)&&(a=!1,B(C,P,D,F),_!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(_).buffer))}function l(){return r.createVertexArray()}function c(C){return r.bindVertexArray(C)}function u(C){return r.deleteVertexArray(C)}function f(C,P,D){const F=D.wireframe===!0;let _=n[C.id];_===void 0&&(_={},n[C.id]=_);let R=_[P.id];R===void 0&&(R={},_[P.id]=R);let L=R[F];return L===void 0&&(L=d(l()),R[F]=L),L}function d(C){const P=[],D=[],F=[];for(let _=0;_<t;_++)P[_]=0,D[_]=0,F[_]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:D,attributeDivisors:F,object:C,attributes:{},index:null}}function p(C,P,D,F){const _=s.attributes,R=P.attributes;let L=0;const Q=D.getAttributes();for(const G in Q)if(Q[G].location>=0){const W=_[G];let V=R[G];if(V===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(V=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(V=C.instanceColor)),W===void 0||W.attribute!==V||V&&W.data!==V.data)return!0;L++}return s.attributesNum!==L||s.index!==F}function v(C,P,D,F){const _={},R=P.attributes;let L=0;const Q=D.getAttributes();for(const G in Q)if(Q[G].location>=0){let W=R[G];W===void 0&&(G==="instanceMatrix"&&C.instanceMatrix&&(W=C.instanceMatrix),G==="instanceColor"&&C.instanceColor&&(W=C.instanceColor));const V={};V.attribute=W,W&&W.data&&(V.data=W.data),_[G]=V,L++}s.attributes=_,s.attributesNum=L,s.index=F}function m(){const C=s.newAttributes;for(let P=0,D=C.length;P<D;P++)C[P]=0}function g(C){w(C,0)}function w(C,P){const D=s.newAttributes,F=s.enabledAttributes,_=s.attributeDivisors;D[C]=1,F[C]===0&&(r.enableVertexAttribArray(C),F[C]=1),_[C]!==P&&(r.vertexAttribDivisor(C,P),_[C]=P)}function b(){const C=s.newAttributes,P=s.enabledAttributes;for(let D=0,F=P.length;D<F;D++)P[D]!==C[D]&&(r.disableVertexAttribArray(D),P[D]=0)}function E(C,P,D,F,_,R,L){L===!0?r.vertexAttribIPointer(C,P,D,_,R):r.vertexAttribPointer(C,P,D,F,_,R)}function B(C,P,D,F){m();const _=F.attributes,R=D.getAttributes(),L=P.defaultAttributeValues;for(const Q in R){const G=R[Q];if(G.location>=0){let Y=_[Q];if(Y===void 0&&(Q==="instanceMatrix"&&C.instanceMatrix&&(Y=C.instanceMatrix),Q==="instanceColor"&&C.instanceColor&&(Y=C.instanceColor)),Y!==void 0){const W=Y.normalized,V=Y.itemSize,T=e.get(Y);if(T===void 0)continue;const H=T.buffer,K=T.type,N=T.bytesPerElement,te=K===r.INT||K===r.UNSIGNED_INT||Y.gpuType===rO;if(Y.isInterleavedBufferAttribute){const oe=Y.data,fe=oe.stride,he=Y.offset;if(oe.isInstancedInterleavedBuffer){for(let me=0;me<G.locationSize;me++)w(G.location+me,oe.meshPerAttribute);C.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let me=0;me<G.locationSize;me++)g(G.location+me);r.bindBuffer(r.ARRAY_BUFFER,H);for(let me=0;me<G.locationSize;me++)E(G.location+me,V/G.locationSize,K,W,fe*N,(he+V/G.locationSize*me)*N,te)}else{if(Y.isInstancedBufferAttribute){for(let oe=0;oe<G.locationSize;oe++)w(G.location+oe,Y.meshPerAttribute);C.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let oe=0;oe<G.locationSize;oe++)g(G.location+oe);r.bindBuffer(r.ARRAY_BUFFER,H);for(let oe=0;oe<G.locationSize;oe++)E(G.location+oe,V/G.locationSize,K,W,V*N,V/G.locationSize*oe*N,te)}}else if(L!==void 0){const W=L[Q];if(W!==void 0)switch(W.length){case 2:r.vertexAttrib2fv(G.location,W);break;case 3:r.vertexAttrib3fv(G.location,W);break;case 4:r.vertexAttrib4fv(G.location,W);break;default:r.vertexAttrib1fv(G.location,W)}}}}b()}function S(){k();for(const C in n){const P=n[C];for(const D in P){const F=P[D];for(const _ in F)u(F[_].object),delete F[_];delete P[D]}delete n[C]}}function M(C){if(n[C.id]===void 0)return;const P=n[C.id];for(const D in P){const F=P[D];for(const _ in F)u(F[_].object),delete F[_];delete P[D]}delete n[C.id]}function I(C){for(const P in n){const D=n[P];if(D[C.id]===void 0)continue;const F=D[C.id];for(const _ in F)u(F[_].object),delete F[_];delete D[C.id]}}function k(){O(),a=!0,s!==i&&(s=i,c(s.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:k,resetDefaultState:O,dispose:S,releaseStatesOfGeometry:M,releaseStatesOfProgram:I,initAttributes:m,enableAttribute:g,disableUnusedAttributes:b}}function Yue(r,e,t){let n;function i(c){n=c}function s(c,u){r.drawArrays(n,c,u),t.update(u,n,1)}function a(c,u,f){f!==0&&(r.drawArraysInstanced(n,c,u,f),t.update(u,n,f))}function o(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,u,0,f);let p=0;for(let v=0;v<f;v++)p+=u[v];t.update(p,n,1)}function l(c,u,f,d){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<c.length;v++)a(c[v],u[v],d[v]);else{p.multiDrawArraysInstancedWEBGL(n,c,0,u,0,d,0,f);let v=0;for(let m=0;m<f;m++)v+=u[m];for(let m=0;m<d.length;m++)t.update(v,n,d[m])}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Xue(r,e,t,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(I){return!(I!==zi&&n.convert(I)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(I){const k=I===nc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Eu&&n.convert(I)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==ks&&!k)}function l(I){if(I==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(d===!0){const I=e.get("EXT_clip_control");I.clipControlEXT(I.LOWER_LEFT_EXT,I.ZERO_TO_ONE_EXT)}const p=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),v=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=r.getParameter(r.MAX_TEXTURE_SIZE),g=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),w=r.getParameter(r.MAX_VERTEX_ATTRIBS),b=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),E=r.getParameter(r.MAX_VARYING_VECTORS),B=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),S=v>0,M=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:d,maxTextures:p,maxVertexTextures:v,maxTextureSize:m,maxCubemapSize:g,maxAttributes:w,maxVertexUniforms:b,maxVaryings:E,maxFragmentUniforms:B,vertexTextures:S,maxSamples:M}}function Zue(r){const e=this;let t=null,n=0,i=!1,s=!1;const a=new Wl,o=new Vt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const p=f.length!==0||d||n!==0||i;return i=d,n=f.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,d){t=u(f,d,0)},this.setState=function(f,d,p){const v=f.clippingPlanes,m=f.clipIntersection,g=f.clipShadows,w=r.get(f);if(!i||v===null||v.length===0||s&&!g)s?u(null):c();else{const b=s?0:n,E=b*4;let B=w.clippingState||null;l.value=B,B=u(v,d,E,p);for(let S=0;S!==E;++S)B[S]=t[S];w.clippingState=B,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(f,d,p,v){const m=f!==null?f.length:0;let g=null;if(m!==0){if(g=l.value,v!==!0||g===null){const w=p+m*4,b=d.matrixWorldInverse;o.getNormalMatrix(b),(g===null||g.length<w)&&(g=new Float32Array(w));for(let E=0,B=p;E!==m;++E,B+=4)a.copy(f[E]).applyMatrix4(b,o),a.normal.toArray(g,B),g[B+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Jue(r){let e=new WeakMap;function t(a,o){return o===Kv?a.mapping=xm:o===SF&&(a.mapping=bm),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Kv||o===SF)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new cle(l.height);return c.fromEquirectangularTexture(r,a),e.set(a,c),a.addEventListener("dispose",i),t(c.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Sy extends Bq{constructor(e=-1,t=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Vp=4,WQ=[.125,.215,.35,.446,.526,.582],Xf=20,DC=new Sy,KQ=new st;let OC=null,NC=0,PC=0,kC=!1;const Kf=(1+Math.sqrt(5))/2,Ud=1/Kf,qQ=[new ae(-Kf,Ud,0),new ae(Kf,Ud,0),new ae(-Ud,0,Kf),new ae(Ud,0,Kf),new ae(0,Kf,-Ud),new ae(0,Kf,Ud),new ae(-1,1,-1),new ae(1,1,-1),new ae(-1,1,1),new ae(1,1,1)];class YQ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){OC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),PC=this._renderer.getActiveMipmapLevel(),kC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=JQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ZQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(OC,NC,PC),this._renderer.xr.enabled=kC,e.scissorTest=!1,__(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xm||e.mapping===bm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),OC=this._renderer.getRenderTarget(),NC=this._renderer.getActiveCubeFace(),PC=this._renderer.getActiveMipmapLevel(),kC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Hi,minFilter:Hi,generateMipmaps:!1,type:nc,format:zi,colorSpace:Fi,depthBuffer:!1},i=XQ(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=XQ(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$ue(s)),this._blurMaterial=eAe(s,e,t)}return i}_compileMaterial(e){const t=new lr(this._lodPlanes[0],e);this._renderer.compile(t,DC)}_sceneToCubeUV(e,t,n,i){const o=new Pi(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,d=u.toneMapping;u.getClearColor(KQ),u.toneMapping=jA,u.autoClear=!1;const p=new ya({name:"PMREM.Background",side:ms,depthWrite:!1,depthTest:!1}),v=new lr(new Ey,p);let m=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,m=!0):(p.color.copy(KQ),m=!0);for(let w=0;w<6;w++){const b=w%3;b===0?(o.up.set(0,l[w],0),o.lookAt(c[w],0,0)):b===1?(o.up.set(0,0,l[w]),o.lookAt(0,c[w],0)):(o.up.set(0,l[w],0),o.lookAt(0,0,c[w]));const E=this._cubeSize;__(i,b*E,w>2?E:0,E,E),u.setRenderTarget(i),m&&u.render(v,o),u.render(e,o)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.autoClear=f,e.background=g}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===xm||e.mapping===bm;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=JQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ZQ());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new lr(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;__(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,DC)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=qQ[(i-s-1)%qQ.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new lr(this._lodPlanes[i],c),d=c.uniforms,p=this._sizeLods[n]-1,v=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Xf-1),m=s/v,g=isFinite(s)?1+Math.floor(u*m):Xf;g>Xf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Xf}`);const w=[];let b=0;for(let I=0;I<Xf;++I){const k=I/m,O=Math.exp(-k*k/2);w.push(O),I===0?b+=O:I<g&&(b+=2*O)}for(let I=0;I<w.length;I++)w[I]=w[I]/b;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=w,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:E}=this;d.dTheta.value=v,d.mipInt.value=E-n;const B=this._sizeLods[i],S=3*B*(i>E-Vp?i-E+Vp:0),M=4*(this._cubeSize-B);__(t,S,M,3*B,2*B),l.setRenderTarget(t),l.render(f,DC)}}function $ue(r){const e=[],t=[],n=[];let i=r;const s=r-Vp+1+WQ.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);t.push(o);let l=1/o;a>r-Vp?l=WQ[a-r+Vp-1]:a===0&&(l=0),n.push(l);const c=1/(o-2),u=-c,f=1+c,d=[u,u,f,u,f,f,u,u,f,f,u,f],p=6,v=6,m=3,g=2,w=1,b=new Float32Array(m*v*p),E=new Float32Array(g*v*p),B=new Float32Array(w*v*p);for(let M=0;M<p;M++){const I=M%3*2/3-1,k=M>2?0:-1,O=[I,k,0,I+2/3,k,0,I+2/3,k+1,0,I,k,0,I+2/3,k+1,0,I,k+1,0];b.set(O,m*v*M),E.set(d,g*v*M);const C=[M,M,M,M,M,M];B.set(C,w*v*M)}const S=new Gn;S.setAttribute("position",new Lt(b,m)),S.setAttribute("uv",new Lt(E,g)),S.setAttribute("faceIndex",new Lt(B,w)),e.push(S),i>Vp&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function XQ(r,e,t){const n=new cc(r,e,t);return n.texture.mapping=wE,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function __(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function eAe(r,e,t){const n=new Float32Array(Xf),i=new ae(0,1,0);return new vi({name:"SphericalGaussianBlur",defines:{n:Xf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:pO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function ZQ(){return new vi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:pO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function JQ(){return new vi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:pO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gu,depthTest:!1,depthWrite:!1})}function pO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function tAe(r){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,c=l===Kv||l===SF,u=l===xm||l===bm;if(c||u){let f=e.get(o);const d=f!==void 0?f.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new YQ(r)),f=c?t.fromEquirectangular(o,f):t.fromCubemap(o,f),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),f.texture;if(f!==void 0)return f.texture;{const p=o.image;return c&&p&&p.height>0||u&&p&&i(p)?(t===null&&(t=new YQ(r)),f=c?t.fromEquirectangular(o):t.fromCubemap(o),f.texture.pmremVersion=o.pmremVersion,e.set(o,f),o.addEventListener("dispose",s),f.texture):null}}}return o}function i(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function nAe(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&gb("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function rAe(r,e,t,n){const i={},s=new WeakMap;function a(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);for(const v in d.morphAttributes){const m=d.morphAttributes[v];for(let g=0,w=m.length;g<w;g++)e.remove(m[g])}d.removeEventListener("dispose",a),delete i[d.id];const p=s.get(d);p&&(e.remove(p),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(f,d){return i[d.id]===!0||(d.addEventListener("dispose",a),i[d.id]=!0,t.memory.geometries++),d}function l(f){const d=f.attributes;for(const v in d)e.update(d[v],r.ARRAY_BUFFER);const p=f.morphAttributes;for(const v in p){const m=p[v];for(let g=0,w=m.length;g<w;g++)e.update(m[g],r.ARRAY_BUFFER)}}function c(f){const d=[],p=f.index,v=f.attributes.position;let m=0;if(p!==null){const b=p.array;m=p.version;for(let E=0,B=b.length;E<B;E+=3){const S=b[E+0],M=b[E+1],I=b[E+2];d.push(S,M,M,I,I,S)}}else if(v!==void 0){const b=v.array;m=v.version;for(let E=0,B=b.length/3-1;E<B;E+=3){const S=E+0,M=E+1,I=E+2;d.push(S,M,M,I,I,S)}}else return;const g=new(_q(d)?Eq:bE)(d,1);g.version=m;const w=s.get(f);w&&e.remove(w),s.set(f,g)}function u(f){const d=s.get(f);if(d){const p=f.index;p!==null&&d.version<p.version&&c(f)}else c(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:u}}function iAe(r,e,t){let n;function i(d){n=d}let s,a;function o(d){s=d.type,a=d.bytesPerElement}function l(d,p){r.drawElements(n,p,s,d*a),t.update(p,n,1)}function c(d,p,v){v!==0&&(r.drawElementsInstanced(n,p,s,d*a,v),t.update(p,n,v))}function u(d,p,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,p,0,s,d,0,v);let g=0;for(let w=0;w<v;w++)g+=p[w];t.update(g,n,1)}function f(d,p,v,m){if(v===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let w=0;w<d.length;w++)c(d[w]/a,p[w],m[w]);else{g.multiDrawElementsInstancedWEBGL(n,p,0,s,d,0,m,0,v);let w=0;for(let b=0;b<v;b++)w+=p[b];for(let b=0;b<m.length;b++)t.update(w,n,m[b])}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function sAe(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case r.TRIANGLES:t.triangles+=o*(s/3);break;case r.LINES:t.lines+=o*(s/2);break;case r.LINE_STRIP:t.lines+=o*(s-1);break;case r.LINE_LOOP:t.lines+=o*s;break;case r.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function aAe(r,e,t){const n=new WeakMap,i=new Cn;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,f=u!==void 0?u.length:0;let d=n.get(o);if(d===void 0||d.count!==f){let O=function(){I.dispose(),n.delete(o),o.removeEventListener("dispose",O)};d!==void 0&&d.texture.dispose();const p=o.morphAttributes.position!==void 0,v=o.morphAttributes.normal!==void 0,m=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],w=o.morphAttributes.normal||[],b=o.morphAttributes.color||[];let E=0;p===!0&&(E=1),v===!0&&(E=2),m===!0&&(E=3);let B=o.attributes.position.count*E,S=1;B>e.maxTextureSize&&(S=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const M=new Float32Array(B*S*4*f),I=new xq(M,B,S,f);I.type=ks,I.needsUpdate=!0;const k=E*4;for(let C=0;C<f;C++){const P=g[C],D=w[C],F=b[C],_=B*S*4*C;for(let R=0;R<P.count;R++){const L=R*k;p===!0&&(i.fromBufferAttribute(P,R),M[_+L+0]=i.x,M[_+L+1]=i.y,M[_+L+2]=i.z,M[_+L+3]=0),v===!0&&(i.fromBufferAttribute(D,R),M[_+L+4]=i.x,M[_+L+5]=i.y,M[_+L+6]=i.z,M[_+L+7]=0),m===!0&&(i.fromBufferAttribute(F,R),M[_+L+8]=i.x,M[_+L+9]=i.y,M[_+L+10]=i.z,M[_+L+11]=F.itemSize===4?i.w:1)}}d={count:f,texture:I,size:new pt(B,S)},n.set(o,d),o.addEventListener("dispose",O)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(r,"morphTexture",a.morphTexture,t);else{let p=0;for(let m=0;m<c.length;m++)p+=c[m];const v=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(r,"morphTargetBaseInfluence",v),l.getUniforms().setValue(r,"morphTargetInfluences",c)}l.getUniforms().setValue(r,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(r,"morphTargetsTextureSize",d.size)}return{update:s}}function oAe(r,e,t,n){let i=new WeakMap;function s(l){const c=n.render.frame,u=l.geometry,f=e.get(l,u);if(i.get(f)!==c&&(e.update(f),i.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==c&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==c&&(d.update(),i.set(d,c))}return f}function a(){i=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}class mO extends Cr{constructor(e,t,n,i,s,a,o,l,c,u=im){if(u!==im&&u!==Sm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===im&&(n=JA),n===void 0&&u===Sm&&(n=Em),super(null,i,s,a,o,l,u,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:ts,this.minFilter=l!==void 0?l:ts,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Tq=new Cr,$Q=new mO(1,1),Rq=new xq,Iq=new joe,Uq=new Mq,e6=[],t6=[],n6=new Float32Array(16),r6=new Float32Array(9),i6=new Float32Array(4);function Vm(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=e6[i];if(s===void 0&&(s=new Float32Array(i),e6[i]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,r[a].toArray(s,o)}return s}function Vi(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function Gi(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function SE(r,e){let t=t6[e];t===void 0&&(t=new Int32Array(e),t6[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function lAe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function cAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vi(t,e))return;r.uniform2fv(this.addr,e),Gi(t,e)}}function uAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vi(t,e))return;r.uniform3fv(this.addr,e),Gi(t,e)}}function AAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vi(t,e))return;r.uniform4fv(this.addr,e),Gi(t,e)}}function fAe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Gi(t,e)}else{if(Vi(t,n))return;i6.set(n),r.uniformMatrix2fv(this.addr,!1,i6),Gi(t,n)}}function hAe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Gi(t,e)}else{if(Vi(t,n))return;r6.set(n),r.uniformMatrix3fv(this.addr,!1,r6),Gi(t,n)}}function dAe(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Vi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Gi(t,e)}else{if(Vi(t,n))return;n6.set(n),r.uniformMatrix4fv(this.addr,!1,n6),Gi(t,n)}}function pAe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function mAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vi(t,e))return;r.uniform2iv(this.addr,e),Gi(t,e)}}function gAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vi(t,e))return;r.uniform3iv(this.addr,e),Gi(t,e)}}function vAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vi(t,e))return;r.uniform4iv(this.addr,e),Gi(t,e)}}function yAe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function wAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vi(t,e))return;r.uniform2uiv(this.addr,e),Gi(t,e)}}function _Ae(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vi(t,e))return;r.uniform3uiv(this.addr,e),Gi(t,e)}}function xAe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vi(t,e))return;r.uniform4uiv(this.addr,e),Gi(t,e)}}function bAe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);let s;this.type===r.SAMPLER_2D_SHADOW?($Q.compareFunction=wq,s=$Q):s=Tq,t.setTexture2D(e||s,i)}function EAe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Iq,i)}function SAe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||Uq,i)}function BAe(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Rq,i)}function MAe(r){switch(r){case 5126:return lAe;case 35664:return cAe;case 35665:return uAe;case 35666:return AAe;case 35674:return fAe;case 35675:return hAe;case 35676:return dAe;case 5124:case 35670:return pAe;case 35667:case 35671:return mAe;case 35668:case 35672:return gAe;case 35669:case 35673:return vAe;case 5125:return yAe;case 36294:return wAe;case 36295:return _Ae;case 36296:return xAe;case 35678:case 36198:case 36298:case 36306:case 35682:return bAe;case 35679:case 36299:case 36307:return EAe;case 35680:case 36300:case 36308:case 36293:return SAe;case 36289:case 36303:case 36311:case 36292:return BAe}}function CAe(r,e){r.uniform1fv(this.addr,e)}function TAe(r,e){const t=Vm(e,this.size,2);r.uniform2fv(this.addr,t)}function RAe(r,e){const t=Vm(e,this.size,3);r.uniform3fv(this.addr,t)}function IAe(r,e){const t=Vm(e,this.size,4);r.uniform4fv(this.addr,t)}function UAe(r,e){const t=Vm(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function FAe(r,e){const t=Vm(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function LAe(r,e){const t=Vm(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function DAe(r,e){r.uniform1iv(this.addr,e)}function OAe(r,e){r.uniform2iv(this.addr,e)}function NAe(r,e){r.uniform3iv(this.addr,e)}function PAe(r,e){r.uniform4iv(this.addr,e)}function kAe(r,e){r.uniform1uiv(this.addr,e)}function HAe(r,e){r.uniform2uiv(this.addr,e)}function QAe(r,e){r.uniform3uiv(this.addr,e)}function zAe(r,e){r.uniform4uiv(this.addr,e)}function VAe(r,e,t){const n=this.cache,i=e.length,s=SE(t,i);Vi(n,s)||(r.uniform1iv(this.addr,s),Gi(n,s));for(let a=0;a!==i;++a)t.setTexture2D(e[a]||Tq,s[a])}function GAe(r,e,t){const n=this.cache,i=e.length,s=SE(t,i);Vi(n,s)||(r.uniform1iv(this.addr,s),Gi(n,s));for(let a=0;a!==i;++a)t.setTexture3D(e[a]||Iq,s[a])}function jAe(r,e,t){const n=this.cache,i=e.length,s=SE(t,i);Vi(n,s)||(r.uniform1iv(this.addr,s),Gi(n,s));for(let a=0;a!==i;++a)t.setTextureCube(e[a]||Uq,s[a])}function WAe(r,e,t){const n=this.cache,i=e.length,s=SE(t,i);Vi(n,s)||(r.uniform1iv(this.addr,s),Gi(n,s));for(let a=0;a!==i;++a)t.setTexture2DArray(e[a]||Rq,s[a])}function KAe(r){switch(r){case 5126:return CAe;case 35664:return TAe;case 35665:return RAe;case 35666:return IAe;case 35674:return UAe;case 35675:return FAe;case 35676:return LAe;case 5124:case 35670:return DAe;case 35667:case 35671:return OAe;case 35668:case 35672:return NAe;case 35669:case 35673:return PAe;case 5125:return kAe;case 36294:return HAe;case 36295:return QAe;case 36296:return zAe;case 35678:case 36198:case 36298:case 36306:case 35682:return VAe;case 35679:case 36299:case 36307:return GAe;case 35680:case 36300:case 36308:case 36293:return jAe;case 36289:case 36303:case 36311:case 36292:return WAe}}class qAe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=MAe(t.type)}}class YAe{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=KAe(t.type)}}class XAe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,t[o.id],n)}}}const HC=/(\w+)(\])?(\[|\.)?/g;function s6(r,e){r.seq.push(e),r.map[e.id]=e}function ZAe(r,e,t){const n=r.name,i=n.length;for(HC.lastIndex=0;;){const s=HC.exec(n),a=HC.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===i){s6(t,c===void 0?new qAe(o,r,e):new YAe(o,r,e));break}else{let f=t.map[o];f===void 0&&(f=new XAe(o),s6(t,f)),t=f}}}class vb{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),a=e.getUniformLocation(t,s.name);ZAe(s,a,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in t&&n.push(a)}return n}}function a6(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const JAe=37297;let $Ae=0;function efe(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=i;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}function tfe(r){const e=on.getPrimaries(on.workingColorSpace),t=on.getPrimaries(r);let n;switch(e===t?n="":e===n1&&t===t1?n="LinearDisplayP3ToLinearSRGB":e===t1&&t===n1&&(n="LinearSRGBToLinearDisplayP3"),r){case Fi:case xE:return[n,"LinearTransferOETF"];case Sn:case uO:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function o6(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+efe(r.getShaderSource(e),a)}else return i}function nfe(r,e){const t=tfe(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function rfe(r,e){let t;switch(e){case Xae:t="Linear";break;case Zae:t="Reinhard";break;case Jae:t="Cineon";break;case $ae:t="ACESFilmic";break;case toe:t="AgX";break;case noe:t="Neutral";break;case eoe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const x_=new ae;function ife(){on.getLuminanceCoefficients(x_);const r=x_.x.toFixed(4),e=x_.y.toFixed(4),t=x_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function sfe(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Z0).join(`
`)}function afe(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function ofe(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),a=s.name;let o=1;s.type===r.FLOAT_MAT2&&(o=2),s.type===r.FLOAT_MAT3&&(o=3),s.type===r.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:r.getAttribLocation(e,a),locationSize:o}}return t}function Z0(r){return r!==""}function l6(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function c6(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const lfe=/^[ \t]*#include +<([\w\d./]+)>/gm;function eL(r){return r.replace(lfe,ufe)}const cfe=new Map;function ufe(r,e){let t=ln[e];if(t===void 0){const n=cfe.get(e);if(n!==void 0)t=ln[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return eL(t)}const Afe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function u6(r){return r.replace(Afe,ffe)}function ffe(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function A6(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function hfe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===lq?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Tae?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Zc&&(e="SHADOWMAP_TYPE_VSM"),e}function dfe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case xm:case bm:e="ENVMAP_TYPE_CUBE";break;case wE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function pfe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case bm:e="ENVMAP_MODE_REFRACTION";break}return e}function mfe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case yE:e="ENVMAP_BLENDING_MULTIPLY";break;case qae:e="ENVMAP_BLENDING_MIX";break;case Yae:e="ENVMAP_BLENDING_ADD";break}return e}function gfe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function vfe(r,e,t,n){const i=r.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=hfe(t),c=dfe(t),u=pfe(t),f=mfe(t),d=gfe(t),p=sfe(t),v=afe(s),m=i.createProgram();let g,w,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Z0).join(`
`),g.length>0&&(g+=`
`),w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(Z0).join(`
`),w.length>0&&(w+=`
`)):(g=[A6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Z0).join(`
`),w=[A6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jA?"#define TONE_MAPPING":"",t.toneMapping!==jA?ln.tonemapping_pars_fragment:"",t.toneMapping!==jA?rfe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ln.colorspace_pars_fragment,nfe("linearToOutputTexel",t.outputColorSpace),ife(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Z0).join(`
`)),a=eL(a),a=l6(a,t),a=c6(a,t),o=eL(o),o=l6(o,t),o=c6(o,t),a=u6(a),o=u6(o),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["#define varying in",t.glslVersion===MQ?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===MQ?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const E=b+g+a,B=b+w+o,S=a6(i,i.VERTEX_SHADER,E),M=a6(i,i.FRAGMENT_SHADER,B);i.attachShader(m,S),i.attachShader(m,M),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function I(P){if(r.debug.checkShaderErrors){const D=i.getProgramInfoLog(m).trim(),F=i.getShaderInfoLog(S).trim(),_=i.getShaderInfoLog(M).trim();let R=!0,L=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(R=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,m,S,M);else{const Q=o6(i,S,"vertex"),G=o6(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+P.name+`
Material Type: `+P.type+`

Program Info Log: `+D+`
`+Q+`
`+G)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(F===""||_==="")&&(L=!1);L&&(P.diagnostics={runnable:R,programLog:D,vertexShader:{log:F,prefix:g},fragmentShader:{log:_,prefix:w}})}i.deleteShader(S),i.deleteShader(M),k=new vb(i,m),O=ofe(i,m)}let k;this.getUniforms=function(){return k===void 0&&I(this),k};let O;this.getAttributes=function(){return O===void 0&&I(this),O};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=i.getProgramParameter(m,JAe)),C},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$Ae++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=M,this}let yfe=0;class wfe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new _fe(e),t.set(e,n)),n}}class _fe{constructor(e){this.id=yfe++,this.code=e,this.usedTimes=0}}function xfe(r,e,t,n,i,s,a){const o=new hO,l=new wfe,c=new Set,u=[],f=i.logarithmicDepthBuffer,d=i.reverseDepthBuffer,p=i.vertexTextures;let v=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(C){return c.add(C),C===0?"uv":`uv${C}`}function w(C,P,D,F,_){const R=F.fog,L=_.geometry,Q=C.isMeshStandardMaterial?F.environment:null,G=(C.isMeshStandardMaterial?t:e).get(C.envMap||Q),Y=G&&G.mapping===wE?G.image.height:null,W=m[C.type];C.precision!==null&&(v=i.getMaxPrecision(C.precision),v!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",v,"instead."));const V=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,T=V!==void 0?V.length:0;let H=0;L.morphAttributes.position!==void 0&&(H=1),L.morphAttributes.normal!==void 0&&(H=2),L.morphAttributes.color!==void 0&&(H=3);let K,N,te,oe;if(W){const en=Kl[W];K=en.vertexShader,N=en.fragmentShader}else K=C.vertexShader,N=C.fragmentShader,l.update(C),te=l.getVertexShaderID(C),oe=l.getFragmentShaderID(C);const fe=r.getRenderTarget(),he=_.isInstancedMesh===!0,me=_.isBatchedMesh===!0,Te=!!C.map,Re=!!C.matcap,de=!!G,Z=!!C.aoMap,ve=!!C.lightMap,ye=!!C.bumpMap,se=!!C.normalMap,ce=!!C.displacementMap,_e=!!C.emissiveMap,ie=!!C.metalnessMap,$=!!C.roughnessMap,ee=C.anisotropy>0,pe=C.clearcoat>0,xe=C.dispersion>0,be=C.iridescence>0,De=C.sheen>0,J=C.transmission>0,j=ee&&!!C.anisotropyMap,X=pe&&!!C.clearcoatMap,re=pe&&!!C.clearcoatNormalMap,ge=pe&&!!C.clearcoatRoughnessMap,Me=be&&!!C.iridescenceMap,Ee=be&&!!C.iridescenceThicknessMap,We=De&&!!C.sheenColorMap,et=De&&!!C.sheenRoughnessMap,Ze=!!C.specularMap,dt=!!C.specularColorMap,Se=!!C.specularIntensityMap,Je=J&&!!C.transmissionMap,Ve=J&&!!C.thicknessMap,je=!!C.gradientMap,Ye=!!C.alphaMap,rt=C.alphaTest>0,wt=!!C.alphaHash,kt=!!C.extensions;let ur=jA;C.toneMapped&&(fe===null||fe.isXRRenderTarget===!0)&&(ur=r.toneMapping);const bt={shaderID:W,shaderType:C.type,shaderName:C.name,vertexShader:K,fragmentShader:N,defines:C.defines,customVertexShaderID:te,customFragmentShaderID:oe,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:v,batching:me,batchingColor:me&&_._colorsTexture!==null,instancing:he,instancingColor:he&&_.instanceColor!==null,instancingMorph:he&&_.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:fe===null?r.outputColorSpace:fe.isXRRenderTarget===!0?fe.texture.colorSpace:Fi,alphaToCoverage:!!C.alphaToCoverage,map:Te,matcap:Re,envMap:de,envMapMode:de&&G.mapping,envMapCubeUVHeight:Y,aoMap:Z,lightMap:ve,bumpMap:ye,normalMap:se,displacementMap:p&&ce,emissiveMap:_e,normalMapObjectSpace:se&&C.normalMapType===Aoe,normalMapTangentSpace:se&&C.normalMapType===zm,metalnessMap:ie,roughnessMap:$,anisotropy:ee,anisotropyMap:j,clearcoat:pe,clearcoatMap:X,clearcoatNormalMap:re,clearcoatRoughnessMap:ge,dispersion:xe,iridescence:be,iridescenceMap:Me,iridescenceThicknessMap:Ee,sheen:De,sheenColorMap:We,sheenRoughnessMap:et,specularMap:Ze,specularColorMap:dt,specularIntensityMap:Se,transmission:J,transmissionMap:Je,thicknessMap:Ve,gradientMap:je,opaque:C.transparent===!1&&C.blending===rm&&C.alphaToCoverage===!1,alphaMap:Ye,alphaTest:rt,alphaHash:wt,combine:C.combine,mapUv:Te&&g(C.map.channel),aoMapUv:Z&&g(C.aoMap.channel),lightMapUv:ve&&g(C.lightMap.channel),bumpMapUv:ye&&g(C.bumpMap.channel),normalMapUv:se&&g(C.normalMap.channel),displacementMapUv:ce&&g(C.displacementMap.channel),emissiveMapUv:_e&&g(C.emissiveMap.channel),metalnessMapUv:ie&&g(C.metalnessMap.channel),roughnessMapUv:$&&g(C.roughnessMap.channel),anisotropyMapUv:j&&g(C.anisotropyMap.channel),clearcoatMapUv:X&&g(C.clearcoatMap.channel),clearcoatNormalMapUv:re&&g(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ge&&g(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Me&&g(C.iridescenceMap.channel),iridescenceThicknessMapUv:Ee&&g(C.iridescenceThicknessMap.channel),sheenColorMapUv:We&&g(C.sheenColorMap.channel),sheenRoughnessMapUv:et&&g(C.sheenRoughnessMap.channel),specularMapUv:Ze&&g(C.specularMap.channel),specularColorMapUv:dt&&g(C.specularColorMap.channel),specularIntensityMapUv:Se&&g(C.specularIntensityMap.channel),transmissionMapUv:Je&&g(C.transmissionMap.channel),thicknessMapUv:Ve&&g(C.thicknessMap.channel),alphaMapUv:Ye&&g(C.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(se||ee),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,pointsUvs:_.isPoints===!0&&!!L.attributes.uv&&(Te||Ye),fog:!!R,useFog:C.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:d,skinning:_.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:T,morphTextureStride:H,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:r.shadowMap.enabled&&D.length>0,shadowMapType:r.shadowMap.type,toneMapping:ur,decodeVideoTexture:Te&&C.map.isVideoTexture===!0&&on.getTransfer(C.map.colorSpace)===Sr,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ps,flipSided:C.side===ms,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:kt&&C.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(kt&&C.extensions.multiDraw===!0||me)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return bt.vertexUv1s=c.has(1),bt.vertexUv2s=c.has(2),bt.vertexUv3s=c.has(3),c.clear(),bt}function b(C){const P=[];if(C.shaderID?P.push(C.shaderID):(P.push(C.customVertexShaderID),P.push(C.customFragmentShaderID)),C.defines!==void 0)for(const D in C.defines)P.push(D),P.push(C.defines[D]);return C.isRawShaderMaterial===!1&&(E(P,C),B(P,C),P.push(r.outputColorSpace)),P.push(C.customProgramCacheKey),P.join()}function E(C,P){C.push(P.precision),C.push(P.outputColorSpace),C.push(P.envMapMode),C.push(P.envMapCubeUVHeight),C.push(P.mapUv),C.push(P.alphaMapUv),C.push(P.lightMapUv),C.push(P.aoMapUv),C.push(P.bumpMapUv),C.push(P.normalMapUv),C.push(P.displacementMapUv),C.push(P.emissiveMapUv),C.push(P.metalnessMapUv),C.push(P.roughnessMapUv),C.push(P.anisotropyMapUv),C.push(P.clearcoatMapUv),C.push(P.clearcoatNormalMapUv),C.push(P.clearcoatRoughnessMapUv),C.push(P.iridescenceMapUv),C.push(P.iridescenceThicknessMapUv),C.push(P.sheenColorMapUv),C.push(P.sheenRoughnessMapUv),C.push(P.specularMapUv),C.push(P.specularColorMapUv),C.push(P.specularIntensityMapUv),C.push(P.transmissionMapUv),C.push(P.thicknessMapUv),C.push(P.combine),C.push(P.fogExp2),C.push(P.sizeAttenuation),C.push(P.morphTargetsCount),C.push(P.morphAttributeCount),C.push(P.numDirLights),C.push(P.numPointLights),C.push(P.numSpotLights),C.push(P.numSpotLightMaps),C.push(P.numHemiLights),C.push(P.numRectAreaLights),C.push(P.numDirLightShadows),C.push(P.numPointLightShadows),C.push(P.numSpotLightShadows),C.push(P.numSpotLightShadowsWithMaps),C.push(P.numLightProbes),C.push(P.shadowMapType),C.push(P.toneMapping),C.push(P.numClippingPlanes),C.push(P.numClipIntersection),C.push(P.depthPacking)}function B(C,P){o.disableAll(),P.supportsVertexTextures&&o.enable(0),P.instancing&&o.enable(1),P.instancingColor&&o.enable(2),P.instancingMorph&&o.enable(3),P.matcap&&o.enable(4),P.envMap&&o.enable(5),P.normalMapObjectSpace&&o.enable(6),P.normalMapTangentSpace&&o.enable(7),P.clearcoat&&o.enable(8),P.iridescence&&o.enable(9),P.alphaTest&&o.enable(10),P.vertexColors&&o.enable(11),P.vertexAlphas&&o.enable(12),P.vertexUv1s&&o.enable(13),P.vertexUv2s&&o.enable(14),P.vertexUv3s&&o.enable(15),P.vertexTangents&&o.enable(16),P.anisotropy&&o.enable(17),P.alphaHash&&o.enable(18),P.batching&&o.enable(19),P.dispersion&&o.enable(20),P.batchingColor&&o.enable(21),C.push(o.mask),o.disableAll(),P.fog&&o.enable(0),P.useFog&&o.enable(1),P.flatShading&&o.enable(2),P.logarithmicDepthBuffer&&o.enable(3),P.reverseDepthBuffer&&o.enable(4),P.skinning&&o.enable(5),P.morphTargets&&o.enable(6),P.morphNormals&&o.enable(7),P.morphColors&&o.enable(8),P.premultipliedAlpha&&o.enable(9),P.shadowMapEnabled&&o.enable(10),P.doubleSided&&o.enable(11),P.flipSided&&o.enable(12),P.useDepthPacking&&o.enable(13),P.dithering&&o.enable(14),P.transmission&&o.enable(15),P.sheen&&o.enable(16),P.opaque&&o.enable(17),P.pointsUvs&&o.enable(18),P.decodeVideoTexture&&o.enable(19),P.alphaToCoverage&&o.enable(20),C.push(o.mask)}function S(C){const P=m[C.type];let D;if(P){const F=Kl[P];D=dO.clone(F.uniforms)}else D=C.uniforms;return D}function M(C,P){let D;for(let F=0,_=u.length;F<_;F++){const R=u[F];if(R.cacheKey===P){D=R,++D.usedTimes;break}}return D===void 0&&(D=new vfe(r,P,C,s),u.push(D)),D}function I(C){if(--C.usedTimes===0){const P=u.indexOf(C);u[P]=u[u.length-1],u.pop(),C.destroy()}}function k(C){l.remove(C)}function O(){l.dispose()}return{getParameters:w,getProgramCacheKey:b,getUniforms:S,acquireProgram:M,releaseProgram:I,releaseShaderCache:k,programs:u,dispose:O}}function bfe(){let r=new WeakMap;function e(a){return r.has(a)}function t(a){let o=r.get(a);return o===void 0&&(o={},r.set(a,o)),o}function n(a){r.delete(a)}function i(a,o,l){r.get(a)[o]=l}function s(){r=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:s}}function Efe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function f6(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function h6(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function a(f,d,p,v,m,g){let w=r[e];return w===void 0?(w={id:f.id,object:f,geometry:d,material:p,groupOrder:v,renderOrder:f.renderOrder,z:m,group:g},r[e]=w):(w.id=f.id,w.object=f,w.geometry=d,w.material=p,w.groupOrder=v,w.renderOrder=f.renderOrder,w.z=m,w.group=g),e++,w}function o(f,d,p,v,m,g){const w=a(f,d,p,v,m,g);p.transmission>0?n.push(w):p.transparent===!0?i.push(w):t.push(w)}function l(f,d,p,v,m,g){const w=a(f,d,p,v,m,g);p.transmission>0?n.unshift(w):p.transparent===!0?i.unshift(w):t.unshift(w)}function c(f,d){t.length>1&&t.sort(f||Efe),n.length>1&&n.sort(d||f6),i.length>1&&i.sort(d||f6)}function u(){for(let f=e,d=r.length;f<d;f++){const p=r[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:o,unshift:l,finish:u,sort:c}}function Sfe(){let r=new WeakMap;function e(n,i){const s=r.get(n);let a;return s===void 0?(a=new h6,r.set(n,[a])):i>=s.length?(a=new h6,s.push(a)):a=s[i],a}function t(){r=new WeakMap}return{get:e,dispose:t}}function Bfe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ae,color:new st};break;case"SpotLight":t={position:new ae,direction:new ae,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ae,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ae,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new ae,halfWidth:new ae,halfHeight:new ae};break}return r[e.id]=t,t}}}function Mfe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let Cfe=0;function Tfe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function Rfe(r){const e=new Bfe,t=Mfe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new ae);const i=new ae,s=new at,a=new at;function o(c){let u=0,f=0,d=0;for(let O=0;O<9;O++)n.probe[O].set(0,0,0);let p=0,v=0,m=0,g=0,w=0,b=0,E=0,B=0,S=0,M=0,I=0;c.sort(Tfe);for(let O=0,C=c.length;O<C;O++){const P=c[O],D=P.color,F=P.intensity,_=P.distance,R=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)u+=D.r*F,f+=D.g*F,d+=D.b*F;else if(P.isLightProbe){for(let L=0;L<9;L++)n.probe[L].addScaledVector(P.sh.coefficients[L],F);I++}else if(P.isDirectionalLight){const L=e.get(P);if(L.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){const Q=P.shadow,G=t.get(P);G.shadowIntensity=Q.intensity,G.shadowBias=Q.bias,G.shadowNormalBias=Q.normalBias,G.shadowRadius=Q.radius,G.shadowMapSize=Q.mapSize,n.directionalShadow[p]=G,n.directionalShadowMap[p]=R,n.directionalShadowMatrix[p]=P.shadow.matrix,b++}n.directional[p]=L,p++}else if(P.isSpotLight){const L=e.get(P);L.position.setFromMatrixPosition(P.matrixWorld),L.color.copy(D).multiplyScalar(F),L.distance=_,L.coneCos=Math.cos(P.angle),L.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),L.decay=P.decay,n.spot[m]=L;const Q=P.shadow;if(P.map&&(n.spotLightMap[S]=P.map,S++,Q.updateMatrices(P),P.castShadow&&M++),n.spotLightMatrix[m]=Q.matrix,P.castShadow){const G=t.get(P);G.shadowIntensity=Q.intensity,G.shadowBias=Q.bias,G.shadowNormalBias=Q.normalBias,G.shadowRadius=Q.radius,G.shadowMapSize=Q.mapSize,n.spotShadow[m]=G,n.spotShadowMap[m]=R,B++}m++}else if(P.isRectAreaLight){const L=e.get(P);L.color.copy(D).multiplyScalar(F),L.halfWidth.set(P.width*.5,0,0),L.halfHeight.set(0,P.height*.5,0),n.rectArea[g]=L,g++}else if(P.isPointLight){const L=e.get(P);if(L.color.copy(P.color).multiplyScalar(P.intensity),L.distance=P.distance,L.decay=P.decay,P.castShadow){const Q=P.shadow,G=t.get(P);G.shadowIntensity=Q.intensity,G.shadowBias=Q.bias,G.shadowNormalBias=Q.normalBias,G.shadowRadius=Q.radius,G.shadowMapSize=Q.mapSize,G.shadowCameraNear=Q.camera.near,G.shadowCameraFar=Q.camera.far,n.pointShadow[v]=G,n.pointShadowMap[v]=R,n.pointShadowMatrix[v]=P.shadow.matrix,E++}n.point[v]=L,v++}else if(P.isHemisphereLight){const L=e.get(P);L.skyColor.copy(P.color).multiplyScalar(F),L.groundColor.copy(P.groundColor).multiplyScalar(F),n.hemi[w]=L,w++}}g>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ct.LTC_FLOAT_1,n.rectAreaLTC2=ct.LTC_FLOAT_2):(n.rectAreaLTC1=ct.LTC_HALF_1,n.rectAreaLTC2=ct.LTC_HALF_2)),n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=d;const k=n.hash;(k.directionalLength!==p||k.pointLength!==v||k.spotLength!==m||k.rectAreaLength!==g||k.hemiLength!==w||k.numDirectionalShadows!==b||k.numPointShadows!==E||k.numSpotShadows!==B||k.numSpotMaps!==S||k.numLightProbes!==I)&&(n.directional.length=p,n.spot.length=m,n.rectArea.length=g,n.point.length=v,n.hemi.length=w,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=E,n.pointShadowMap.length=E,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=E,n.spotLightMatrix.length=B+S-M,n.spotLightMap.length=S,n.numSpotLightShadowsWithMaps=M,n.numLightProbes=I,k.directionalLength=p,k.pointLength=v,k.spotLength=m,k.rectAreaLength=g,k.hemiLength=w,k.numDirectionalShadows=b,k.numPointShadows=E,k.numSpotShadows=B,k.numSpotMaps=S,k.numLightProbes=I,n.version=Cfe++)}function l(c,u){let f=0,d=0,p=0,v=0,m=0;const g=u.matrixWorldInverse;for(let w=0,b=c.length;w<b;w++){const E=c[w];if(E.isDirectionalLight){const B=n.directional[f];B.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(g),f++}else if(E.isSpotLight){const B=n.spot[p];B.position.setFromMatrixPosition(E.matrixWorld),B.position.applyMatrix4(g),B.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),B.direction.sub(i),B.direction.transformDirection(g),p++}else if(E.isRectAreaLight){const B=n.rectArea[v];B.position.setFromMatrixPosition(E.matrixWorld),B.position.applyMatrix4(g),a.identity(),s.copy(E.matrixWorld),s.premultiply(g),a.extractRotation(s),B.halfWidth.set(E.width*.5,0,0),B.halfHeight.set(0,E.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),v++}else if(E.isPointLight){const B=n.point[d];B.position.setFromMatrixPosition(E.matrixWorld),B.position.applyMatrix4(g),d++}else if(E.isHemisphereLight){const B=n.hemi[m];B.direction.setFromMatrixPosition(E.matrixWorld),B.direction.transformDirection(g),m++}}}return{setup:o,setupView:l,state:n}}function d6(r){const e=new Rfe(r),t=[],n=[];function i(u){c.camera=u,t.length=0,n.length=0}function s(u){t.push(u)}function a(u){n.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function Ife(r){let e=new WeakMap;function t(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new d6(r),e.set(i,[o])):s>=a.length?(o=new d6(r),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}class Ufe extends Sa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=coe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ffe extends Sa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Lfe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dfe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ofe(r,e,t){let n=new EE;const i=new pt,s=new pt,a=new Cn,o=new Ufe({depthPacking:uoe}),l=new Ffe,c={},u=t.maxTextureSize,f={[so]:ms,[ms]:so,[Ps]:Ps},d=new vi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pt},radius:{value:4}},vertexShader:Lfe,fragmentShader:Dfe}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const v=new Gn;v.setAttribute("position",new Lt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new lr(v,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lq;let w=this.type;this.render=function(M,I,k){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||M.length===0)return;const O=r.getRenderTarget(),C=r.getActiveCubeFace(),P=r.getActiveMipmapLevel(),D=r.state;D.setBlending(gu),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const F=w!==Zc&&this.type===Zc,_=w===Zc&&this.type!==Zc;for(let R=0,L=M.length;R<L;R++){const Q=M[R],G=Q.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;i.copy(G.mapSize);const Y=G.getFrameExtents();if(i.multiply(Y),s.copy(G.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/Y.x),i.x=s.x*Y.x,G.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/Y.y),i.y=s.y*Y.y,G.mapSize.y=s.y)),G.map===null||F===!0||_===!0){const V=this.type!==Zc?{minFilter:ts,magFilter:ts}:{};G.map!==null&&G.map.dispose(),G.map=new cc(i.x,i.y,V),G.map.texture.name=Q.name+".shadowMap",G.camera.updateProjectionMatrix()}r.setRenderTarget(G.map),r.clear();const W=G.getViewportCount();for(let V=0;V<W;V++){const T=G.getViewport(V);a.set(s.x*T.x,s.y*T.y,s.x*T.z,s.y*T.w),D.viewport(a),G.updateMatrices(Q,V),n=G.getFrustum(),B(I,k,G.camera,Q,this.type)}G.isPointLightShadow!==!0&&this.type===Zc&&b(G,k),G.needsUpdate=!1}w=this.type,g.needsUpdate=!1,r.setRenderTarget(O,C,P)};function b(M,I){const k=e.update(m);d.defines.VSM_SAMPLES!==M.blurSamples&&(d.defines.VSM_SAMPLES=M.blurSamples,p.defines.VSM_SAMPLES=M.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new cc(i.x,i.y)),d.uniforms.shadow_pass.value=M.map.texture,d.uniforms.resolution.value=M.mapSize,d.uniforms.radius.value=M.radius,r.setRenderTarget(M.mapPass),r.clear(),r.renderBufferDirect(I,null,k,d,m,null),p.uniforms.shadow_pass.value=M.mapPass.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,r.setRenderTarget(M.map),r.clear(),r.renderBufferDirect(I,null,k,p,m,null)}function E(M,I,k,O){let C=null;const P=k.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(P!==void 0)C=P;else if(C=k.isPointLight===!0?l:o,r.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const D=C.uuid,F=I.uuid;let _=c[D];_===void 0&&(_={},c[D]=_);let R=_[F];R===void 0&&(R=C.clone(),_[F]=R,I.addEventListener("dispose",S)),C=R}if(C.visible=I.visible,C.wireframe=I.wireframe,O===Zc?C.side=I.shadowSide!==null?I.shadowSide:I.side:C.side=I.shadowSide!==null?I.shadowSide:f[I.side],C.alphaMap=I.alphaMap,C.alphaTest=I.alphaTest,C.map=I.map,C.clipShadows=I.clipShadows,C.clippingPlanes=I.clippingPlanes,C.clipIntersection=I.clipIntersection,C.displacementMap=I.displacementMap,C.displacementScale=I.displacementScale,C.displacementBias=I.displacementBias,C.wireframeLinewidth=I.wireframeLinewidth,C.linewidth=I.linewidth,k.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const D=r.properties.get(C);D.light=k}return C}function B(M,I,k,O,C){if(M.visible===!1)return;if(M.layers.test(I.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&C===Zc)&&(!M.frustumCulled||n.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,M.matrixWorld);const F=e.update(M),_=M.material;if(Array.isArray(_)){const R=F.groups;for(let L=0,Q=R.length;L<Q;L++){const G=R[L],Y=_[G.materialIndex];if(Y&&Y.visible){const W=E(M,Y,O,C);M.onBeforeShadow(r,M,I,k,F,W,G),r.renderBufferDirect(k,null,F,W,M,G),M.onAfterShadow(r,M,I,k,F,W,G)}}}else if(_.visible){const R=E(M,_,O,C);M.onBeforeShadow(r,M,I,k,F,R,null),r.renderBufferDirect(k,null,F,R,M,null),M.onAfterShadow(r,M,I,k,F,R,null)}}const D=M.children;for(let F=0,_=D.length;F<_;F++)B(D[F],I,k,O,C)}function S(M){M.target.removeEventListener("dispose",S);for(const k in c){const O=c[k],C=M.target.uuid;C in O&&(O[C].dispose(),delete O[C])}}}const Nfe={[vF]:yF,[wF]:bF,[_F]:EF,[_m]:xF,[yF]:vF,[bF]:wF,[EF]:_F,[xF]:_m};function Pfe(r){function e(){let Se=!1;const Je=new Cn;let Ve=null;const je=new Cn(0,0,0,0);return{setMask:function(Ye){Ve!==Ye&&!Se&&(r.colorMask(Ye,Ye,Ye,Ye),Ve=Ye)},setLocked:function(Ye){Se=Ye},setClear:function(Ye,rt,wt,kt,ur){ur===!0&&(Ye*=kt,rt*=kt,wt*=kt),Je.set(Ye,rt,wt,kt),je.equals(Je)===!1&&(r.clearColor(Ye,rt,wt,kt),je.copy(Je))},reset:function(){Se=!1,Ve=null,je.set(-1,0,0,0)}}}function t(){let Se=!1,Je=!1,Ve=null,je=null,Ye=null;return{setReversed:function(rt){Je=rt},setTest:function(rt){rt?te(r.DEPTH_TEST):oe(r.DEPTH_TEST)},setMask:function(rt){Ve!==rt&&!Se&&(r.depthMask(rt),Ve=rt)},setFunc:function(rt){if(Je&&(rt=Nfe[rt]),je!==rt){switch(rt){case vF:r.depthFunc(r.NEVER);break;case yF:r.depthFunc(r.ALWAYS);break;case wF:r.depthFunc(r.LESS);break;case _m:r.depthFunc(r.LEQUAL);break;case _F:r.depthFunc(r.EQUAL);break;case xF:r.depthFunc(r.GEQUAL);break;case bF:r.depthFunc(r.GREATER);break;case EF:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}je=rt}},setLocked:function(rt){Se=rt},setClear:function(rt){Ye!==rt&&(r.clearDepth(rt),Ye=rt)},reset:function(){Se=!1,Ve=null,je=null,Ye=null}}}function n(){let Se=!1,Je=null,Ve=null,je=null,Ye=null,rt=null,wt=null,kt=null,ur=null;return{setTest:function(bt){Se||(bt?te(r.STENCIL_TEST):oe(r.STENCIL_TEST))},setMask:function(bt){Je!==bt&&!Se&&(r.stencilMask(bt),Je=bt)},setFunc:function(bt,en,ri){(Ve!==bt||je!==en||Ye!==ri)&&(r.stencilFunc(bt,en,ri),Ve=bt,je=en,Ye=ri)},setOp:function(bt,en,ri){(rt!==bt||wt!==en||kt!==ri)&&(r.stencilOp(bt,en,ri),rt=bt,wt=en,kt=ri)},setLocked:function(bt){Se=bt},setClear:function(bt){ur!==bt&&(r.clearStencil(bt),ur=bt)},reset:function(){Se=!1,Je=null,Ve=null,je=null,Ye=null,rt=null,wt=null,kt=null,ur=null}}}const i=new e,s=new t,a=new n,o=new WeakMap,l=new WeakMap;let c={},u={},f=new WeakMap,d=[],p=null,v=!1,m=null,g=null,w=null,b=null,E=null,B=null,S=null,M=new st(0,0,0),I=0,k=!1,O=null,C=null,P=null,D=null,F=null;const _=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,L=0;const Q=r.getParameter(r.VERSION);Q.indexOf("WebGL")!==-1?(L=parseFloat(/^WebGL (\d)/.exec(Q)[1]),R=L>=1):Q.indexOf("OpenGL ES")!==-1&&(L=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),R=L>=2);let G=null,Y={};const W=r.getParameter(r.SCISSOR_BOX),V=r.getParameter(r.VIEWPORT),T=new Cn().fromArray(W),H=new Cn().fromArray(V);function K(Se,Je,Ve,je){const Ye=new Uint8Array(4),rt=r.createTexture();r.bindTexture(Se,rt),r.texParameteri(Se,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(Se,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let wt=0;wt<Ve;wt++)Se===r.TEXTURE_3D||Se===r.TEXTURE_2D_ARRAY?r.texImage3D(Je,0,r.RGBA,1,1,je,0,r.RGBA,r.UNSIGNED_BYTE,Ye):r.texImage2D(Je+wt,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Ye);return rt}const N={};N[r.TEXTURE_2D]=K(r.TEXTURE_2D,r.TEXTURE_2D,1),N[r.TEXTURE_CUBE_MAP]=K(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),N[r.TEXTURE_2D_ARRAY]=K(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),N[r.TEXTURE_3D]=K(r.TEXTURE_3D,r.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),te(r.DEPTH_TEST),s.setFunc(_m),ve(!1),ye(xQ),te(r.CULL_FACE),de(gu);function te(Se){c[Se]!==!0&&(r.enable(Se),c[Se]=!0)}function oe(Se){c[Se]!==!1&&(r.disable(Se),c[Se]=!1)}function fe(Se,Je){return u[Se]!==Je?(r.bindFramebuffer(Se,Je),u[Se]=Je,Se===r.DRAW_FRAMEBUFFER&&(u[r.FRAMEBUFFER]=Je),Se===r.FRAMEBUFFER&&(u[r.DRAW_FRAMEBUFFER]=Je),!0):!1}function he(Se,Je){let Ve=d,je=!1;if(Se){Ve=f.get(Je),Ve===void 0&&(Ve=[],f.set(Je,Ve));const Ye=Se.textures;if(Ve.length!==Ye.length||Ve[0]!==r.COLOR_ATTACHMENT0){for(let rt=0,wt=Ye.length;rt<wt;rt++)Ve[rt]=r.COLOR_ATTACHMENT0+rt;Ve.length=Ye.length,je=!0}}else Ve[0]!==r.BACK&&(Ve[0]=r.BACK,je=!0);je&&r.drawBuffers(Ve)}function me(Se){return p!==Se?(r.useProgram(Se),p=Se,!0):!1}const Te={[Yf]:r.FUNC_ADD,[Iae]:r.FUNC_SUBTRACT,[Uae]:r.FUNC_REVERSE_SUBTRACT};Te[Fae]=r.MIN,Te[Lae]=r.MAX;const Re={[Dae]:r.ZERO,[Oae]:r.ONE,[Nae]:r.SRC_COLOR,[mF]:r.SRC_ALPHA,[Vae]:r.SRC_ALPHA_SATURATE,[Qae]:r.DST_COLOR,[kae]:r.DST_ALPHA,[Pae]:r.ONE_MINUS_SRC_COLOR,[gF]:r.ONE_MINUS_SRC_ALPHA,[zae]:r.ONE_MINUS_DST_COLOR,[Hae]:r.ONE_MINUS_DST_ALPHA,[Gae]:r.CONSTANT_COLOR,[jae]:r.ONE_MINUS_CONSTANT_COLOR,[Wae]:r.CONSTANT_ALPHA,[Kae]:r.ONE_MINUS_CONSTANT_ALPHA};function de(Se,Je,Ve,je,Ye,rt,wt,kt,ur,bt){if(Se===gu){v===!0&&(oe(r.BLEND),v=!1);return}if(v===!1&&(te(r.BLEND),v=!0),Se!==Rae){if(Se!==m||bt!==k){if((g!==Yf||E!==Yf)&&(r.blendEquation(r.FUNC_ADD),g=Yf,E=Yf),bt)switch(Se){case rm:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case hh:r.blendFunc(r.ONE,r.ONE);break;case bQ:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case EQ:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}else switch(Se){case rm:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case hh:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case bQ:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case EQ:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Se);break}w=null,b=null,B=null,S=null,M.set(0,0,0),I=0,m=Se,k=bt}return}Ye=Ye||Je,rt=rt||Ve,wt=wt||je,(Je!==g||Ye!==E)&&(r.blendEquationSeparate(Te[Je],Te[Ye]),g=Je,E=Ye),(Ve!==w||je!==b||rt!==B||wt!==S)&&(r.blendFuncSeparate(Re[Ve],Re[je],Re[rt],Re[wt]),w=Ve,b=je,B=rt,S=wt),(kt.equals(M)===!1||ur!==I)&&(r.blendColor(kt.r,kt.g,kt.b,ur),M.copy(kt),I=ur),m=Se,k=!1}function Z(Se,Je){Se.side===Ps?oe(r.CULL_FACE):te(r.CULL_FACE);let Ve=Se.side===ms;Je&&(Ve=!Ve),ve(Ve),Se.blending===rm&&Se.transparent===!1?de(gu):de(Se.blending,Se.blendEquation,Se.blendSrc,Se.blendDst,Se.blendEquationAlpha,Se.blendSrcAlpha,Se.blendDstAlpha,Se.blendColor,Se.blendAlpha,Se.premultipliedAlpha),s.setFunc(Se.depthFunc),s.setTest(Se.depthTest),s.setMask(Se.depthWrite),i.setMask(Se.colorWrite);const je=Se.stencilWrite;a.setTest(je),je&&(a.setMask(Se.stencilWriteMask),a.setFunc(Se.stencilFunc,Se.stencilRef,Se.stencilFuncMask),a.setOp(Se.stencilFail,Se.stencilZFail,Se.stencilZPass)),ce(Se.polygonOffset,Se.polygonOffsetFactor,Se.polygonOffsetUnits),Se.alphaToCoverage===!0?te(r.SAMPLE_ALPHA_TO_COVERAGE):oe(r.SAMPLE_ALPHA_TO_COVERAGE)}function ve(Se){O!==Se&&(Se?r.frontFace(r.CW):r.frontFace(r.CCW),O=Se)}function ye(Se){Se!==Mae?(te(r.CULL_FACE),Se!==C&&(Se===xQ?r.cullFace(r.BACK):Se===Cae?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):oe(r.CULL_FACE),C=Se}function se(Se){Se!==P&&(R&&r.lineWidth(Se),P=Se)}function ce(Se,Je,Ve){Se?(te(r.POLYGON_OFFSET_FILL),(D!==Je||F!==Ve)&&(r.polygonOffset(Je,Ve),D=Je,F=Ve)):oe(r.POLYGON_OFFSET_FILL)}function _e(Se){Se?te(r.SCISSOR_TEST):oe(r.SCISSOR_TEST)}function ie(Se){Se===void 0&&(Se=r.TEXTURE0+_-1),G!==Se&&(r.activeTexture(Se),G=Se)}function $(Se,Je,Ve){Ve===void 0&&(G===null?Ve=r.TEXTURE0+_-1:Ve=G);let je=Y[Ve];je===void 0&&(je={type:void 0,texture:void 0},Y[Ve]=je),(je.type!==Se||je.texture!==Je)&&(G!==Ve&&(r.activeTexture(Ve),G=Ve),r.bindTexture(Se,Je||N[Se]),je.type=Se,je.texture=Je)}function ee(){const Se=Y[G];Se!==void 0&&Se.type!==void 0&&(r.bindTexture(Se.type,null),Se.type=void 0,Se.texture=void 0)}function pe(){try{r.compressedTexImage2D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function xe(){try{r.compressedTexImage3D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function be(){try{r.texSubImage2D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function De(){try{r.texSubImage3D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function J(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function j(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function X(){try{r.texStorage2D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function re(){try{r.texStorage3D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function ge(){try{r.texImage2D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Me(){try{r.texImage3D.apply(r,arguments)}catch(Se){console.error("THREE.WebGLState:",Se)}}function Ee(Se){T.equals(Se)===!1&&(r.scissor(Se.x,Se.y,Se.z,Se.w),T.copy(Se))}function We(Se){H.equals(Se)===!1&&(r.viewport(Se.x,Se.y,Se.z,Se.w),H.copy(Se))}function et(Se,Je){let Ve=l.get(Je);Ve===void 0&&(Ve=new WeakMap,l.set(Je,Ve));let je=Ve.get(Se);je===void 0&&(je=r.getUniformBlockIndex(Je,Se.name),Ve.set(Se,je))}function Ze(Se,Je){const je=l.get(Je).get(Se);o.get(Je)!==je&&(r.uniformBlockBinding(Je,je,Se.__bindingPointIndex),o.set(Je,je))}function dt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),c={},G=null,Y={},u={},f=new WeakMap,d=[],p=null,v=!1,m=null,g=null,w=null,b=null,E=null,B=null,S=null,M=new st(0,0,0),I=0,k=!1,O=null,C=null,P=null,D=null,F=null,T.set(0,0,r.canvas.width,r.canvas.height),H.set(0,0,r.canvas.width,r.canvas.height),i.reset(),s.reset(),a.reset()}return{buffers:{color:i,depth:s,stencil:a},enable:te,disable:oe,bindFramebuffer:fe,drawBuffers:he,useProgram:me,setBlending:de,setMaterial:Z,setFlipSided:ve,setCullFace:ye,setLineWidth:se,setPolygonOffset:ce,setScissorTest:_e,activeTexture:ie,bindTexture:$,unbindTexture:ee,compressedTexImage2D:pe,compressedTexImage3D:xe,texImage2D:ge,texImage3D:Me,updateUBOMapping:et,uniformBlockBinding:Ze,texStorage2D:X,texStorage3D:re,texSubImage2D:be,texSubImage3D:De,compressedTexSubImage2D:J,compressedTexSubImage3D:j,scissor:Ee,viewport:We,reset:dt}}function p6(r,e,t,n){const i=kfe(n);switch(t){case hq:return r*e;case pq:return r*e;case mq:return r*e*2;case aO:return r*e/i.components*i.byteLength;case _E:return r*e/i.components*i.byteLength;case gq:return r*e*2/i.components*i.byteLength;case oO:return r*e*2/i.components*i.byteLength;case dq:return r*e*3/i.components*i.byteLength;case zi:return r*e*4/i.components*i.byteLength;case lO:return r*e*4/i.components*i.byteLength;case fb:case hb:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case db:case pb:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case MF:case TF:return Math.max(r,16)*Math.max(e,8)/4;case BF:case CF:return Math.max(r,8)*Math.max(e,8)/2;case RF:case IF:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case UF:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case FF:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case LF:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case DF:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case OF:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case NF:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case PF:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case kF:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case HF:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case QF:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case zF:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case VF:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case GF:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case jF:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case WF:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case mb:case KF:case qF:return Math.ceil(r/4)*Math.ceil(e/4)*16;case vq:case YF:return Math.ceil(r/4)*Math.ceil(e/4)*8;case XF:case ZF:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function kfe(r){switch(r){case Eu:case uq:return{byteLength:1,components:1};case Yv:case Aq:case nc:return{byteLength:2,components:1};case iO:case sO:return{byteLength:2,components:4};case JA:case rO:case ks:return{byteLength:4,components:1};case fq:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}function Hfe(r,e,t,n,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new pt,u=new WeakMap;let f;const d=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(ie,$){return p?new OffscreenCanvas(ie,$):Xv("canvas")}function m(ie,$,ee){let pe=1;const xe=_e(ie);if((xe.width>ee||xe.height>ee)&&(pe=ee/Math.max(xe.width,xe.height)),pe<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const be=Math.floor(pe*xe.width),De=Math.floor(pe*xe.height);f===void 0&&(f=v(be,De));const J=$?v(be,De):f;return J.width=be,J.height=De,J.getContext("2d").drawImage(ie,0,0,be,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+be+"x"+De+")."),J}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),ie;return ie}function g(ie){return ie.generateMipmaps&&ie.minFilter!==ts&&ie.minFilter!==Hi}function w(ie){r.generateMipmap(ie)}function b(ie,$,ee,pe,xe=!1){if(ie!==null){if(r[ie]!==void 0)return r[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let be=$;if($===r.RED&&(ee===r.FLOAT&&(be=r.R32F),ee===r.HALF_FLOAT&&(be=r.R16F),ee===r.UNSIGNED_BYTE&&(be=r.R8)),$===r.RED_INTEGER&&(ee===r.UNSIGNED_BYTE&&(be=r.R8UI),ee===r.UNSIGNED_SHORT&&(be=r.R16UI),ee===r.UNSIGNED_INT&&(be=r.R32UI),ee===r.BYTE&&(be=r.R8I),ee===r.SHORT&&(be=r.R16I),ee===r.INT&&(be=r.R32I)),$===r.RG&&(ee===r.FLOAT&&(be=r.RG32F),ee===r.HALF_FLOAT&&(be=r.RG16F),ee===r.UNSIGNED_BYTE&&(be=r.RG8)),$===r.RG_INTEGER&&(ee===r.UNSIGNED_BYTE&&(be=r.RG8UI),ee===r.UNSIGNED_SHORT&&(be=r.RG16UI),ee===r.UNSIGNED_INT&&(be=r.RG32UI),ee===r.BYTE&&(be=r.RG8I),ee===r.SHORT&&(be=r.RG16I),ee===r.INT&&(be=r.RG32I)),$===r.RGB_INTEGER&&(ee===r.UNSIGNED_BYTE&&(be=r.RGB8UI),ee===r.UNSIGNED_SHORT&&(be=r.RGB16UI),ee===r.UNSIGNED_INT&&(be=r.RGB32UI),ee===r.BYTE&&(be=r.RGB8I),ee===r.SHORT&&(be=r.RGB16I),ee===r.INT&&(be=r.RGB32I)),$===r.RGBA_INTEGER&&(ee===r.UNSIGNED_BYTE&&(be=r.RGBA8UI),ee===r.UNSIGNED_SHORT&&(be=r.RGBA16UI),ee===r.UNSIGNED_INT&&(be=r.RGBA32UI),ee===r.BYTE&&(be=r.RGBA8I),ee===r.SHORT&&(be=r.RGBA16I),ee===r.INT&&(be=r.RGBA32I)),$===r.RGB&&ee===r.UNSIGNED_INT_5_9_9_9_REV&&(be=r.RGB9_E5),$===r.RGBA){const De=xe?e1:on.getTransfer(pe);ee===r.FLOAT&&(be=r.RGBA32F),ee===r.HALF_FLOAT&&(be=r.RGBA16F),ee===r.UNSIGNED_BYTE&&(be=De===Sr?r.SRGB8_ALPHA8:r.RGBA8),ee===r.UNSIGNED_SHORT_4_4_4_4&&(be=r.RGBA4),ee===r.UNSIGNED_SHORT_5_5_5_1&&(be=r.RGB5_A1)}return(be===r.R16F||be===r.R32F||be===r.RG16F||be===r.RG32F||be===r.RGBA16F||be===r.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function E(ie,$){let ee;return ie?$===null||$===JA||$===Em?ee=r.DEPTH24_STENCIL8:$===ks?ee=r.DEPTH32F_STENCIL8:$===Yv&&(ee=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):$===null||$===JA||$===Em?ee=r.DEPTH_COMPONENT24:$===ks?ee=r.DEPTH_COMPONENT32F:$===Yv&&(ee=r.DEPTH_COMPONENT16),ee}function B(ie,$){return g(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==ts&&ie.minFilter!==Hi?Math.log2(Math.max($.width,$.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?$.mipmaps.length:1}function S(ie){const $=ie.target;$.removeEventListener("dispose",S),I($),$.isVideoTexture&&u.delete($)}function M(ie){const $=ie.target;$.removeEventListener("dispose",M),O($)}function I(ie){const $=n.get(ie);if($.__webglInit===void 0)return;const ee=ie.source,pe=d.get(ee);if(pe){const xe=pe[$.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&k(ie),Object.keys(pe).length===0&&d.delete(ee)}n.remove(ie)}function k(ie){const $=n.get(ie);r.deleteTexture($.__webglTexture);const ee=ie.source,pe=d.get(ee);delete pe[$.__cacheKey],a.memory.textures--}function O(ie){const $=n.get(ie);if(ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray($.__webglFramebuffer[pe]))for(let xe=0;xe<$.__webglFramebuffer[pe].length;xe++)r.deleteFramebuffer($.__webglFramebuffer[pe][xe]);else r.deleteFramebuffer($.__webglFramebuffer[pe]);$.__webglDepthbuffer&&r.deleteRenderbuffer($.__webglDepthbuffer[pe])}else{if(Array.isArray($.__webglFramebuffer))for(let pe=0;pe<$.__webglFramebuffer.length;pe++)r.deleteFramebuffer($.__webglFramebuffer[pe]);else r.deleteFramebuffer($.__webglFramebuffer);if($.__webglDepthbuffer&&r.deleteRenderbuffer($.__webglDepthbuffer),$.__webglMultisampledFramebuffer&&r.deleteFramebuffer($.__webglMultisampledFramebuffer),$.__webglColorRenderbuffer)for(let pe=0;pe<$.__webglColorRenderbuffer.length;pe++)$.__webglColorRenderbuffer[pe]&&r.deleteRenderbuffer($.__webglColorRenderbuffer[pe]);$.__webglDepthRenderbuffer&&r.deleteRenderbuffer($.__webglDepthRenderbuffer)}const ee=ie.textures;for(let pe=0,xe=ee.length;pe<xe;pe++){const be=n.get(ee[pe]);be.__webglTexture&&(r.deleteTexture(be.__webglTexture),a.memory.textures--),n.remove(ee[pe])}n.remove(ie)}let C=0;function P(){C=0}function D(){const ie=C;return ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),C+=1,ie}function F(ie){const $=[];return $.push(ie.wrapS),$.push(ie.wrapT),$.push(ie.wrapR||0),$.push(ie.magFilter),$.push(ie.minFilter),$.push(ie.anisotropy),$.push(ie.internalFormat),$.push(ie.format),$.push(ie.type),$.push(ie.generateMipmaps),$.push(ie.premultiplyAlpha),$.push(ie.flipY),$.push(ie.unpackAlignment),$.push(ie.colorSpace),$.join()}function _(ie,$){const ee=n.get(ie);if(ie.isVideoTexture&&se(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&ee.__version!==ie.version){const pe=ie.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{H(ee,ie,$);return}}t.bindTexture(r.TEXTURE_2D,ee.__webglTexture,r.TEXTURE0+$)}function R(ie,$){const ee=n.get(ie);if(ie.version>0&&ee.__version!==ie.version){H(ee,ie,$);return}t.bindTexture(r.TEXTURE_2D_ARRAY,ee.__webglTexture,r.TEXTURE0+$)}function L(ie,$){const ee=n.get(ie);if(ie.version>0&&ee.__version!==ie.version){H(ee,ie,$);return}t.bindTexture(r.TEXTURE_3D,ee.__webglTexture,r.TEXTURE0+$)}function Q(ie,$){const ee=n.get(ie);if(ie.version>0&&ee.__version!==ie.version){K(ee,ie,$);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ee.__webglTexture,r.TEXTURE0+$)}const G={[ao]:r.REPEAT,[Ja]:r.CLAMP_TO_EDGE,[qv]:r.MIRRORED_REPEAT},Y={[ts]:r.NEAREST,[nO]:r.NEAREST_MIPMAP_NEAREST,[Hp]:r.NEAREST_MIPMAP_LINEAR,[Hi]:r.LINEAR,[xv]:r.LINEAR_MIPMAP_NEAREST,[ml]:r.LINEAR_MIPMAP_LINEAR},W={[foe]:r.NEVER,[voe]:r.ALWAYS,[hoe]:r.LESS,[wq]:r.LEQUAL,[doe]:r.EQUAL,[goe]:r.GEQUAL,[poe]:r.GREATER,[moe]:r.NOTEQUAL};function V(ie,$){if($.type===ks&&e.has("OES_texture_float_linear")===!1&&($.magFilter===Hi||$.magFilter===xv||$.magFilter===Hp||$.magFilter===ml||$.minFilter===Hi||$.minFilter===xv||$.minFilter===Hp||$.minFilter===ml)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(ie,r.TEXTURE_WRAP_S,G[$.wrapS]),r.texParameteri(ie,r.TEXTURE_WRAP_T,G[$.wrapT]),(ie===r.TEXTURE_3D||ie===r.TEXTURE_2D_ARRAY)&&r.texParameteri(ie,r.TEXTURE_WRAP_R,G[$.wrapR]),r.texParameteri(ie,r.TEXTURE_MAG_FILTER,Y[$.magFilter]),r.texParameteri(ie,r.TEXTURE_MIN_FILTER,Y[$.minFilter]),$.compareFunction&&(r.texParameteri(ie,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(ie,r.TEXTURE_COMPARE_FUNC,W[$.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if($.magFilter===ts||$.minFilter!==Hp&&$.minFilter!==ml||$.type===ks&&e.has("OES_texture_float_linear")===!1)return;if($.anisotropy>1||n.get($).__currentAnisotropy){const ee=e.get("EXT_texture_filter_anisotropic");r.texParameterf(ie,ee.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($.anisotropy,i.getMaxAnisotropy())),n.get($).__currentAnisotropy=$.anisotropy}}}function T(ie,$){let ee=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,$.addEventListener("dispose",S));const pe=$.source;let xe=d.get(pe);xe===void 0&&(xe={},d.set(pe,xe));const be=F($);if(be!==ie.__cacheKey){xe[be]===void 0&&(xe[be]={texture:r.createTexture(),usedTimes:0},a.memory.textures++,ee=!0),xe[be].usedTimes++;const De=xe[ie.__cacheKey];De!==void 0&&(xe[ie.__cacheKey].usedTimes--,De.usedTimes===0&&k($)),ie.__cacheKey=be,ie.__webglTexture=xe[be].texture}return ee}function H(ie,$,ee){let pe=r.TEXTURE_2D;($.isDataArrayTexture||$.isCompressedArrayTexture)&&(pe=r.TEXTURE_2D_ARRAY),$.isData3DTexture&&(pe=r.TEXTURE_3D);const xe=T(ie,$),be=$.source;t.bindTexture(pe,ie.__webglTexture,r.TEXTURE0+ee);const De=n.get(be);if(be.version!==De.__version||xe===!0){t.activeTexture(r.TEXTURE0+ee);const J=on.getPrimaries(on.workingColorSpace),j=$.colorSpace===Zl?null:on.getPrimaries($.colorSpace),X=$.colorSpace===Zl||J===j?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,$.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,$.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,X);let re=m($.image,!1,i.maxTextureSize);re=ce($,re);const ge=s.convert($.format,$.colorSpace),Me=s.convert($.type);let Ee=b($.internalFormat,ge,Me,$.colorSpace,$.isVideoTexture);V(pe,$);let We;const et=$.mipmaps,Ze=$.isVideoTexture!==!0,dt=De.__version===void 0||xe===!0,Se=be.dataReady,Je=B($,re);if($.isDepthTexture)Ee=E($.format===Sm,$.type),dt&&(Ze?t.texStorage2D(r.TEXTURE_2D,1,Ee,re.width,re.height):t.texImage2D(r.TEXTURE_2D,0,Ee,re.width,re.height,0,ge,Me,null));else if($.isDataTexture)if(et.length>0){Ze&&dt&&t.texStorage2D(r.TEXTURE_2D,Je,Ee,et[0].width,et[0].height);for(let Ve=0,je=et.length;Ve<je;Ve++)We=et[Ve],Ze?Se&&t.texSubImage2D(r.TEXTURE_2D,Ve,0,0,We.width,We.height,ge,Me,We.data):t.texImage2D(r.TEXTURE_2D,Ve,Ee,We.width,We.height,0,ge,Me,We.data);$.generateMipmaps=!1}else Ze?(dt&&t.texStorage2D(r.TEXTURE_2D,Je,Ee,re.width,re.height),Se&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,re.width,re.height,ge,Me,re.data)):t.texImage2D(r.TEXTURE_2D,0,Ee,re.width,re.height,0,ge,Me,re.data);else if($.isCompressedTexture)if($.isCompressedArrayTexture){Ze&&dt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Je,Ee,et[0].width,et[0].height,re.depth);for(let Ve=0,je=et.length;Ve<je;Ve++)if(We=et[Ve],$.format!==zi)if(ge!==null)if(Ze){if(Se)if($.layerUpdates.size>0){const Ye=p6(We.width,We.height,$.format,$.type);for(const rt of $.layerUpdates){const wt=We.data.subarray(rt*Ye/We.data.BYTES_PER_ELEMENT,(rt+1)*Ye/We.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ve,0,0,rt,We.width,We.height,1,ge,wt,0,0)}$.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ve,0,0,0,We.width,We.height,re.depth,ge,We.data,0,0)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ve,Ee,We.width,We.height,re.depth,0,We.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ze?Se&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ve,0,0,0,We.width,We.height,re.depth,ge,Me,We.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ve,Ee,We.width,We.height,re.depth,0,ge,Me,We.data)}else{Ze&&dt&&t.texStorage2D(r.TEXTURE_2D,Je,Ee,et[0].width,et[0].height);for(let Ve=0,je=et.length;Ve<je;Ve++)We=et[Ve],$.format!==zi?ge!==null?Ze?Se&&t.compressedTexSubImage2D(r.TEXTURE_2D,Ve,0,0,We.width,We.height,ge,We.data):t.compressedTexImage2D(r.TEXTURE_2D,Ve,Ee,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ze?Se&&t.texSubImage2D(r.TEXTURE_2D,Ve,0,0,We.width,We.height,ge,Me,We.data):t.texImage2D(r.TEXTURE_2D,Ve,Ee,We.width,We.height,0,ge,Me,We.data)}else if($.isDataArrayTexture)if(Ze){if(dt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Je,Ee,re.width,re.height,re.depth),Se)if($.layerUpdates.size>0){const Ve=p6(re.width,re.height,$.format,$.type);for(const je of $.layerUpdates){const Ye=re.data.subarray(je*Ve/re.data.BYTES_PER_ELEMENT,(je+1)*Ve/re.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,je,re.width,re.height,1,ge,Me,Ye)}$.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,re.width,re.height,re.depth,ge,Me,re.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,Ee,re.width,re.height,re.depth,0,ge,Me,re.data);else if($.isData3DTexture)Ze?(dt&&t.texStorage3D(r.TEXTURE_3D,Je,Ee,re.width,re.height,re.depth),Se&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,re.width,re.height,re.depth,ge,Me,re.data)):t.texImage3D(r.TEXTURE_3D,0,Ee,re.width,re.height,re.depth,0,ge,Me,re.data);else if($.isFramebufferTexture){if(dt)if(Ze)t.texStorage2D(r.TEXTURE_2D,Je,Ee,re.width,re.height);else{let Ve=re.width,je=re.height;for(let Ye=0;Ye<Je;Ye++)t.texImage2D(r.TEXTURE_2D,Ye,Ee,Ve,je,0,ge,Me,null),Ve>>=1,je>>=1}}else if(et.length>0){if(Ze&&dt){const Ve=_e(et[0]);t.texStorage2D(r.TEXTURE_2D,Je,Ee,Ve.width,Ve.height)}for(let Ve=0,je=et.length;Ve<je;Ve++)We=et[Ve],Ze?Se&&t.texSubImage2D(r.TEXTURE_2D,Ve,0,0,ge,Me,We):t.texImage2D(r.TEXTURE_2D,Ve,Ee,ge,Me,We);$.generateMipmaps=!1}else if(Ze){if(dt){const Ve=_e(re);t.texStorage2D(r.TEXTURE_2D,Je,Ee,Ve.width,Ve.height)}Se&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,ge,Me,re)}else t.texImage2D(r.TEXTURE_2D,0,Ee,ge,Me,re);g($)&&w(pe),De.__version=be.version,$.onUpdate&&$.onUpdate($)}ie.__version=$.version}function K(ie,$,ee){if($.image.length!==6)return;const pe=T(ie,$),xe=$.source;t.bindTexture(r.TEXTURE_CUBE_MAP,ie.__webglTexture,r.TEXTURE0+ee);const be=n.get(xe);if(xe.version!==be.__version||pe===!0){t.activeTexture(r.TEXTURE0+ee);const De=on.getPrimaries(on.workingColorSpace),J=$.colorSpace===Zl?null:on.getPrimaries($.colorSpace),j=$.colorSpace===Zl||De===J?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,$.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,$.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,j);const X=$.isCompressedTexture||$.image[0].isCompressedTexture,re=$.image[0]&&$.image[0].isDataTexture,ge=[];for(let je=0;je<6;je++)!X&&!re?ge[je]=m($.image[je],!0,i.maxCubemapSize):ge[je]=re?$.image[je].image:$.image[je],ge[je]=ce($,ge[je]);const Me=ge[0],Ee=s.convert($.format,$.colorSpace),We=s.convert($.type),et=b($.internalFormat,Ee,We,$.colorSpace),Ze=$.isVideoTexture!==!0,dt=be.__version===void 0||pe===!0,Se=xe.dataReady;let Je=B($,Me);V(r.TEXTURE_CUBE_MAP,$);let Ve;if(X){Ze&&dt&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Je,et,Me.width,Me.height);for(let je=0;je<6;je++){Ve=ge[je].mipmaps;for(let Ye=0;Ye<Ve.length;Ye++){const rt=Ve[Ye];$.format!==zi?Ee!==null?Ze?Se&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye,0,0,rt.width,rt.height,Ee,rt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye,et,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ze?Se&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye,0,0,rt.width,rt.height,Ee,We,rt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye,et,rt.width,rt.height,0,Ee,We,rt.data)}}}else{if(Ve=$.mipmaps,Ze&&dt){Ve.length>0&&Je++;const je=_e(ge[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Je,et,je.width,je.height)}for(let je=0;je<6;je++)if(re){Ze?Se&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,ge[je].width,ge[je].height,Ee,We,ge[je].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,et,ge[je].width,ge[je].height,0,Ee,We,ge[je].data);for(let Ye=0;Ye<Ve.length;Ye++){const wt=Ve[Ye].image[je].image;Ze?Se&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye+1,0,0,wt.width,wt.height,Ee,We,wt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye+1,et,wt.width,wt.height,0,Ee,We,wt.data)}}else{Ze?Se&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,0,0,Ee,We,ge[je]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,0,et,Ee,We,ge[je]);for(let Ye=0;Ye<Ve.length;Ye++){const rt=Ve[Ye];Ze?Se&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye+1,0,0,Ee,We,rt.image[je]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+je,Ye+1,et,Ee,We,rt.image[je])}}}g($)&&w(r.TEXTURE_CUBE_MAP),be.__version=xe.version,$.onUpdate&&$.onUpdate($)}ie.__version=$.version}function N(ie,$,ee,pe,xe,be){const De=s.convert(ee.format,ee.colorSpace),J=s.convert(ee.type),j=b(ee.internalFormat,De,J,ee.colorSpace);if(!n.get($).__hasExternalTextures){const re=Math.max(1,$.width>>be),ge=Math.max(1,$.height>>be);xe===r.TEXTURE_3D||xe===r.TEXTURE_2D_ARRAY?t.texImage3D(xe,be,j,re,ge,$.depth,0,De,J,null):t.texImage2D(xe,be,j,re,ge,0,De,J,null)}t.bindFramebuffer(r.FRAMEBUFFER,ie),ye($)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,pe,xe,n.get(ee).__webglTexture,0,ve($)):(xe===r.TEXTURE_2D||xe>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,pe,xe,n.get(ee).__webglTexture,be),t.bindFramebuffer(r.FRAMEBUFFER,null)}function te(ie,$,ee){if(r.bindRenderbuffer(r.RENDERBUFFER,ie),$.depthBuffer){const pe=$.depthTexture,xe=pe&&pe.isDepthTexture?pe.type:null,be=E($.stencilBuffer,xe),De=$.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,J=ve($);ye($)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,J,be,$.width,$.height):ee?r.renderbufferStorageMultisample(r.RENDERBUFFER,J,be,$.width,$.height):r.renderbufferStorage(r.RENDERBUFFER,be,$.width,$.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,De,r.RENDERBUFFER,ie)}else{const pe=$.textures;for(let xe=0;xe<pe.length;xe++){const be=pe[xe],De=s.convert(be.format,be.colorSpace),J=s.convert(be.type),j=b(be.internalFormat,De,J,be.colorSpace),X=ve($);ee&&ye($)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,X,j,$.width,$.height):ye($)?o.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,X,j,$.width,$.height):r.renderbufferStorage(r.RENDERBUFFER,j,$.width,$.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function oe(ie,$){if($&&$.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,ie),!($.depthTexture&&$.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get($.depthTexture).__webglTexture||$.depthTexture.image.width!==$.width||$.depthTexture.image.height!==$.height)&&($.depthTexture.image.width=$.width,$.depthTexture.image.height=$.height,$.depthTexture.needsUpdate=!0),_($.depthTexture,0);const pe=n.get($.depthTexture).__webglTexture,xe=ve($);if($.depthTexture.format===im)ye($)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,pe,0,xe):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,pe,0);else if($.depthTexture.format===Sm)ye($)?o.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,pe,0,xe):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,pe,0);else throw new Error("Unknown depthTexture format")}function fe(ie){const $=n.get(ie),ee=ie.isWebGLCubeRenderTarget===!0;if($.__boundDepthTexture!==ie.depthTexture){const pe=ie.depthTexture;if($.__depthDisposeCallback&&$.__depthDisposeCallback(),pe){const xe=()=>{delete $.__boundDepthTexture,delete $.__depthDisposeCallback,pe.removeEventListener("dispose",xe)};pe.addEventListener("dispose",xe),$.__depthDisposeCallback=xe}$.__boundDepthTexture=pe}if(ie.depthTexture&&!$.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");oe($.__webglFramebuffer,ie)}else if(ee){$.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(t.bindFramebuffer(r.FRAMEBUFFER,$.__webglFramebuffer[pe]),$.__webglDepthbuffer[pe]===void 0)$.__webglDepthbuffer[pe]=r.createRenderbuffer(),te($.__webglDepthbuffer[pe],ie,!1);else{const xe=ie.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,be=$.__webglDepthbuffer[pe];r.bindRenderbuffer(r.RENDERBUFFER,be),r.framebufferRenderbuffer(r.FRAMEBUFFER,xe,r.RENDERBUFFER,be)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,$.__webglFramebuffer),$.__webglDepthbuffer===void 0)$.__webglDepthbuffer=r.createRenderbuffer(),te($.__webglDepthbuffer,ie,!1);else{const pe=ie.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,xe=$.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,xe),r.framebufferRenderbuffer(r.FRAMEBUFFER,pe,r.RENDERBUFFER,xe)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function he(ie,$,ee){const pe=n.get(ie);$!==void 0&&N(pe.__webglFramebuffer,ie,ie.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ee!==void 0&&fe(ie)}function me(ie){const $=ie.texture,ee=n.get(ie),pe=n.get($);ie.addEventListener("dispose",M);const xe=ie.textures,be=ie.isWebGLCubeRenderTarget===!0,De=xe.length>1;if(De||(pe.__webglTexture===void 0&&(pe.__webglTexture=r.createTexture()),pe.__version=$.version,a.memory.textures++),be){ee.__webglFramebuffer=[];for(let J=0;J<6;J++)if($.mipmaps&&$.mipmaps.length>0){ee.__webglFramebuffer[J]=[];for(let j=0;j<$.mipmaps.length;j++)ee.__webglFramebuffer[J][j]=r.createFramebuffer()}else ee.__webglFramebuffer[J]=r.createFramebuffer()}else{if($.mipmaps&&$.mipmaps.length>0){ee.__webglFramebuffer=[];for(let J=0;J<$.mipmaps.length;J++)ee.__webglFramebuffer[J]=r.createFramebuffer()}else ee.__webglFramebuffer=r.createFramebuffer();if(De)for(let J=0,j=xe.length;J<j;J++){const X=n.get(xe[J]);X.__webglTexture===void 0&&(X.__webglTexture=r.createTexture(),a.memory.textures++)}if(ie.samples>0&&ye(ie)===!1){ee.__webglMultisampledFramebuffer=r.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let J=0;J<xe.length;J++){const j=xe[J];ee.__webglColorRenderbuffer[J]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ee.__webglColorRenderbuffer[J]);const X=s.convert(j.format,j.colorSpace),re=s.convert(j.type),ge=b(j.internalFormat,X,re,j.colorSpace,ie.isXRRenderTarget===!0),Me=ve(ie);r.renderbufferStorageMultisample(r.RENDERBUFFER,Me,ge,ie.width,ie.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+J,r.RENDERBUFFER,ee.__webglColorRenderbuffer[J])}r.bindRenderbuffer(r.RENDERBUFFER,null),ie.depthBuffer&&(ee.__webglDepthRenderbuffer=r.createRenderbuffer(),te(ee.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(be){t.bindTexture(r.TEXTURE_CUBE_MAP,pe.__webglTexture),V(r.TEXTURE_CUBE_MAP,$);for(let J=0;J<6;J++)if($.mipmaps&&$.mipmaps.length>0)for(let j=0;j<$.mipmaps.length;j++)N(ee.__webglFramebuffer[J][j],ie,$,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+J,j);else N(ee.__webglFramebuffer[J],ie,$,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+J,0);g($)&&w(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(De){for(let J=0,j=xe.length;J<j;J++){const X=xe[J],re=n.get(X);t.bindTexture(r.TEXTURE_2D,re.__webglTexture),V(r.TEXTURE_2D,X),N(ee.__webglFramebuffer,ie,X,r.COLOR_ATTACHMENT0+J,r.TEXTURE_2D,0),g(X)&&w(r.TEXTURE_2D)}t.unbindTexture()}else{let J=r.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(J=ie.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(J,pe.__webglTexture),V(J,$),$.mipmaps&&$.mipmaps.length>0)for(let j=0;j<$.mipmaps.length;j++)N(ee.__webglFramebuffer[j],ie,$,r.COLOR_ATTACHMENT0,J,j);else N(ee.__webglFramebuffer,ie,$,r.COLOR_ATTACHMENT0,J,0);g($)&&w(J),t.unbindTexture()}ie.depthBuffer&&fe(ie)}function Te(ie){const $=ie.textures;for(let ee=0,pe=$.length;ee<pe;ee++){const xe=$[ee];if(g(xe)){const be=ie.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,De=n.get(xe).__webglTexture;t.bindTexture(be,De),w(be),t.unbindTexture()}}}const Re=[],de=[];function Z(ie){if(ie.samples>0){if(ye(ie)===!1){const $=ie.textures,ee=ie.width,pe=ie.height;let xe=r.COLOR_BUFFER_BIT;const be=ie.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,De=n.get(ie),J=$.length>1;if(J)for(let j=0;j<$.length;j++)t.bindFramebuffer(r.FRAMEBUFFER,De.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+j,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,De.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+j,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,De.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,De.__webglFramebuffer);for(let j=0;j<$.length;j++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&(xe|=r.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&(xe|=r.STENCIL_BUFFER_BIT)),J){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,De.__webglColorRenderbuffer[j]);const X=n.get($[j]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,X,0)}r.blitFramebuffer(0,0,ee,pe,0,0,ee,pe,xe,r.NEAREST),l===!0&&(Re.length=0,de.length=0,Re.push(r.COLOR_ATTACHMENT0+j),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Re.push(be),de.push(be),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,de)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Re))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),J)for(let j=0;j<$.length;j++){t.bindFramebuffer(r.FRAMEBUFFER,De.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+j,r.RENDERBUFFER,De.__webglColorRenderbuffer[j]);const X=n.get($[j]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,De.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+j,r.TEXTURE_2D,X,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,De.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&l){const $=ie.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[$])}}}function ve(ie){return Math.min(i.maxSamples,ie.samples)}function ye(ie){const $=n.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&$.__useRenderToTexture!==!1}function se(ie){const $=a.render.frame;u.get(ie)!==$&&(u.set(ie,$),ie.update())}function ce(ie,$){const ee=ie.colorSpace,pe=ie.format,xe=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||ee!==Fi&&ee!==Zl&&(on.getTransfer(ee)===Sr?(pe!==zi||xe!==Eu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),$}function _e(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(c.width=ie.naturalWidth||ie.width,c.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(c.width=ie.displayWidth,c.height=ie.displayHeight):(c.width=ie.width,c.height=ie.height),c}this.allocateTextureUnit=D,this.resetTextureUnits=P,this.setTexture2D=_,this.setTexture2DArray=R,this.setTexture3D=L,this.setTextureCube=Q,this.rebindTextures=he,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=Z,this.setupDepthRenderbuffer=fe,this.setupFrameBufferTexture=N,this.useMultisampledRTT=ye}function Qfe(r,e){function t(n,i=Zl){let s;const a=on.getTransfer(i);if(n===Eu)return r.UNSIGNED_BYTE;if(n===iO)return r.UNSIGNED_SHORT_4_4_4_4;if(n===sO)return r.UNSIGNED_SHORT_5_5_5_1;if(n===fq)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===uq)return r.BYTE;if(n===Aq)return r.SHORT;if(n===Yv)return r.UNSIGNED_SHORT;if(n===rO)return r.INT;if(n===JA)return r.UNSIGNED_INT;if(n===ks)return r.FLOAT;if(n===nc)return r.HALF_FLOAT;if(n===hq)return r.ALPHA;if(n===dq)return r.RGB;if(n===zi)return r.RGBA;if(n===pq)return r.LUMINANCE;if(n===mq)return r.LUMINANCE_ALPHA;if(n===im)return r.DEPTH_COMPONENT;if(n===Sm)return r.DEPTH_STENCIL;if(n===aO)return r.RED;if(n===_E)return r.RED_INTEGER;if(n===gq)return r.RG;if(n===oO)return r.RG_INTEGER;if(n===lO)return r.RGBA_INTEGER;if(n===fb||n===hb||n===db||n===pb)if(a===Sr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===fb)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===hb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===db)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===pb)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===fb)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===hb)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===db)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===pb)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===BF||n===MF||n===CF||n===TF)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===BF)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===MF)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===CF)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===TF)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===RF||n===IF||n===UF)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===RF||n===IF)return a===Sr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===UF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===FF||n===LF||n===DF||n===OF||n===NF||n===PF||n===kF||n===HF||n===QF||n===zF||n===VF||n===GF||n===jF||n===WF)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===FF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===LF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===DF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===OF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===NF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===PF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===kF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===HF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===QF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===zF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===VF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===GF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===jF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===WF)return a===Sr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===mb||n===KF||n===qF)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===mb)return a===Sr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===KF)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===qF)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===vq||n===YF||n===XF||n===ZF)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===mb)return s.COMPRESSED_RED_RGTC1_EXT;if(n===YF)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===XF)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===ZF)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Em?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:t}}class zfe extends Pi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let hs=class extends Tn{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Vfe={type:"move"};class QC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ae,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ae),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ae,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ae),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,n),w=this._getHandJoint(c,m);g!==null&&(w.matrix.fromArray(g.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,w.jointRadius=g.radius),w.visible=g!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],d=u.position.distanceTo(f.position),p=.02,v=.005;c.inputState.pinching&&d>p+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=p-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Vfe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new hs;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const Gfe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jfe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Wfe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const i=new Cr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new vi({vertexShader:Gfe,fragmentShader:jfe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new lr(new Tu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Kfe extends lf{constructor(e,t){super();const n=this;let i=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,f=null,d=null,p=null,v=null;const m=new Wfe,g=t.getContextAttributes();let w=null,b=null;const E=[],B=[],S=new pt;let M=null;const I=new Pi;I.layers.enable(1),I.viewport=new Cn;const k=new Pi;k.layers.enable(2),k.viewport=new Cn;const O=[I,k],C=new zfe;C.layers.enable(1),C.layers.enable(2);let P=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let N=E[K];return N===void 0&&(N=new QC,E[K]=N),N.getTargetRaySpace()},this.getControllerGrip=function(K){let N=E[K];return N===void 0&&(N=new QC,E[K]=N),N.getGripSpace()},this.getHand=function(K){let N=E[K];return N===void 0&&(N=new QC,E[K]=N),N.getHandSpace()};function F(K){const N=B.indexOf(K.inputSource);if(N===-1)return;const te=E[N];te!==void 0&&(te.update(K.inputSource,K.frame,c||a),te.dispatchEvent({type:K.type,data:K.inputSource}))}function _(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",_),i.removeEventListener("inputsourceschange",R);for(let K=0;K<E.length;K++){const N=B[K];N!==null&&(B[K]=null,E[K].disconnect(N))}P=null,D=null,m.reset(),e.setRenderTarget(w),p=null,d=null,f=null,i=null,b=null,H.stop(),n.isPresenting=!1,e.setPixelRatio(M),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){o=K,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return d!==null?d:p},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",_),i.addEventListener("inputsourceschange",R),g.xrCompatible!==!0&&await t.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0){const N={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,N),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new cc(p.framebufferWidth,p.framebufferHeight,{format:zi,type:Eu,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let N=null,te=null,oe=null;g.depth&&(oe=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,N=g.stencil?Sm:im,te=g.stencil?Em:JA);const fe={colorFormat:t.RGBA8,depthFormat:oe,scaleFactor:s};f=new XRWebGLBinding(i,t),d=f.createProjectionLayer(fe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),b=new cc(d.textureWidth,d.textureHeight,{format:zi,type:Eu,depthTexture:new mO(d.textureWidth,d.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,N),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await i.requestReferenceSpace(o),H.setContext(i),H.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function R(K){for(let N=0;N<K.removed.length;N++){const te=K.removed[N],oe=B.indexOf(te);oe>=0&&(B[oe]=null,E[oe].disconnect(te))}for(let N=0;N<K.added.length;N++){const te=K.added[N];let oe=B.indexOf(te);if(oe===-1){for(let he=0;he<E.length;he++)if(he>=B.length){B.push(te),oe=he;break}else if(B[he]===null){B[he]=te,oe=he;break}if(oe===-1)break}const fe=E[oe];fe&&fe.connect(te)}}const L=new ae,Q=new ae;function G(K,N,te){L.setFromMatrixPosition(N.matrixWorld),Q.setFromMatrixPosition(te.matrixWorld);const oe=L.distanceTo(Q),fe=N.projectionMatrix.elements,he=te.projectionMatrix.elements,me=fe[14]/(fe[10]-1),Te=fe[14]/(fe[10]+1),Re=(fe[9]+1)/fe[5],de=(fe[9]-1)/fe[5],Z=(fe[8]-1)/fe[0],ve=(he[8]+1)/he[0],ye=me*Z,se=me*ve,ce=oe/(-Z+ve),_e=ce*-Z;if(N.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(_e),K.translateZ(ce),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),fe[10]===-1)K.projectionMatrix.copy(N.projectionMatrix),K.projectionMatrixInverse.copy(N.projectionMatrixInverse);else{const ie=me+ce,$=Te+ce,ee=ye-_e,pe=se+(oe-_e),xe=Re*Te/$*ie,be=de*Te/$*ie;K.projectionMatrix.makePerspective(ee,pe,xe,be,ie,$),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function Y(K,N){N===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(N.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;let N=K.near,te=K.far;m.texture!==null&&(m.depthNear>0&&(N=m.depthNear),m.depthFar>0&&(te=m.depthFar)),C.near=k.near=I.near=N,C.far=k.far=I.far=te,(P!==C.near||D!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),P=C.near,D=C.far);const oe=K.parent,fe=C.cameras;Y(C,oe);for(let he=0;he<fe.length;he++)Y(fe[he],oe);fe.length===2?G(C,I,k):C.projectionMatrix.copy(I.projectionMatrix),W(K,C,oe)};function W(K,N,te){te===null?K.matrix.copy(N.matrixWorld):(K.matrix.copy(te.matrixWorld),K.matrix.invert(),K.matrix.multiply(N.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(N.projectionMatrix),K.projectionMatrixInverse.copy(N.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=Cm*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&p===null))return l},this.setFoveation=function(K){l=K,d!==null&&(d.fixedFoveation=K),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=K)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(C)};let V=null;function T(K,N){if(u=N.getViewerPose(c||a),v=N,u!==null){const te=u.views;p!==null&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let oe=!1;te.length!==C.cameras.length&&(C.cameras.length=0,oe=!0);for(let he=0;he<te.length;he++){const me=te[he];let Te=null;if(p!==null)Te=p.getViewport(me);else{const de=f.getViewSubImage(d,me);Te=de.viewport,he===0&&(e.setRenderTargetTextures(b,de.colorTexture,d.ignoreDepthValues?void 0:de.depthStencilTexture),e.setRenderTarget(b))}let Re=O[he];Re===void 0&&(Re=new Pi,Re.layers.enable(he),Re.viewport=new Cn,O[he]=Re),Re.matrix.fromArray(me.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(me.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(Te.x,Te.y,Te.width,Te.height),he===0&&(C.matrix.copy(Re.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),oe===!0&&C.cameras.push(Re)}const fe=i.enabledFeatures;if(fe&&fe.includes("depth-sensing")){const he=f.getDepthInformation(te[0]);he&&he.isValid&&he.texture&&m.init(e,he,i.renderState)}}for(let te=0;te<E.length;te++){const oe=B[te],fe=E[te];oe!==null&&fe!==void 0&&fe.update(oe,N,c||a)}V&&V(K,N),N.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:N}),v=null}const H=new Cq;H.setAnimationLoop(T),this.setAnimationLoop=function(K){V=K},this.dispose=function(){}}}const Df=new Jr,qfe=new at;function Yfe(r,e){function t(g,w){g.matrixAutoUpdate===!0&&g.updateMatrix(),w.value.copy(g.matrix)}function n(g,w){w.color.getRGB(g.fogColor.value,Sq(r)),w.isFog?(g.fogNear.value=w.near,g.fogFar.value=w.far):w.isFogExp2&&(g.fogDensity.value=w.density)}function i(g,w,b,E,B){w.isMeshBasicMaterial||w.isMeshLambertMaterial?s(g,w):w.isMeshToonMaterial?(s(g,w),f(g,w)):w.isMeshPhongMaterial?(s(g,w),u(g,w)):w.isMeshStandardMaterial?(s(g,w),d(g,w),w.isMeshPhysicalMaterial&&p(g,w,B)):w.isMeshMatcapMaterial?(s(g,w),v(g,w)):w.isMeshDepthMaterial?s(g,w):w.isMeshDistanceMaterial?(s(g,w),m(g,w)):w.isMeshNormalMaterial?s(g,w):w.isLineBasicMaterial?(a(g,w),w.isLineDashedMaterial&&o(g,w)):w.isPointsMaterial?l(g,w,b,E):w.isSpriteMaterial?c(g,w):w.isShadowMaterial?(g.color.value.copy(w.color),g.opacity.value=w.opacity):w.isShaderMaterial&&(w.uniformsNeedUpdate=!1)}function s(g,w){g.opacity.value=w.opacity,w.color&&g.diffuse.value.copy(w.color),w.emissive&&g.emissive.value.copy(w.emissive).multiplyScalar(w.emissiveIntensity),w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.bumpMap&&(g.bumpMap.value=w.bumpMap,t(w.bumpMap,g.bumpMapTransform),g.bumpScale.value=w.bumpScale,w.side===ms&&(g.bumpScale.value*=-1)),w.normalMap&&(g.normalMap.value=w.normalMap,t(w.normalMap,g.normalMapTransform),g.normalScale.value.copy(w.normalScale),w.side===ms&&g.normalScale.value.negate()),w.displacementMap&&(g.displacementMap.value=w.displacementMap,t(w.displacementMap,g.displacementMapTransform),g.displacementScale.value=w.displacementScale,g.displacementBias.value=w.displacementBias),w.emissiveMap&&(g.emissiveMap.value=w.emissiveMap,t(w.emissiveMap,g.emissiveMapTransform)),w.specularMap&&(g.specularMap.value=w.specularMap,t(w.specularMap,g.specularMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest);const b=e.get(w),E=b.envMap,B=b.envMapRotation;E&&(g.envMap.value=E,Df.copy(B),Df.x*=-1,Df.y*=-1,Df.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Df.y*=-1,Df.z*=-1),g.envMapRotation.value.setFromMatrix4(qfe.makeRotationFromEuler(Df)),g.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=w.reflectivity,g.ior.value=w.ior,g.refractionRatio.value=w.refractionRatio),w.lightMap&&(g.lightMap.value=w.lightMap,g.lightMapIntensity.value=w.lightMapIntensity,t(w.lightMap,g.lightMapTransform)),w.aoMap&&(g.aoMap.value=w.aoMap,g.aoMapIntensity.value=w.aoMapIntensity,t(w.aoMap,g.aoMapTransform))}function a(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform))}function o(g,w){g.dashSize.value=w.dashSize,g.totalSize.value=w.dashSize+w.gapSize,g.scale.value=w.scale}function l(g,w,b,E){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.size.value=w.size*b,g.scale.value=E*.5,w.map&&(g.map.value=w.map,t(w.map,g.uvTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function c(g,w){g.diffuse.value.copy(w.color),g.opacity.value=w.opacity,g.rotation.value=w.rotation,w.map&&(g.map.value=w.map,t(w.map,g.mapTransform)),w.alphaMap&&(g.alphaMap.value=w.alphaMap,t(w.alphaMap,g.alphaMapTransform)),w.alphaTest>0&&(g.alphaTest.value=w.alphaTest)}function u(g,w){g.specular.value.copy(w.specular),g.shininess.value=Math.max(w.shininess,1e-4)}function f(g,w){w.gradientMap&&(g.gradientMap.value=w.gradientMap)}function d(g,w){g.metalness.value=w.metalness,w.metalnessMap&&(g.metalnessMap.value=w.metalnessMap,t(w.metalnessMap,g.metalnessMapTransform)),g.roughness.value=w.roughness,w.roughnessMap&&(g.roughnessMap.value=w.roughnessMap,t(w.roughnessMap,g.roughnessMapTransform)),w.envMap&&(g.envMapIntensity.value=w.envMapIntensity)}function p(g,w,b){g.ior.value=w.ior,w.sheen>0&&(g.sheenColor.value.copy(w.sheenColor).multiplyScalar(w.sheen),g.sheenRoughness.value=w.sheenRoughness,w.sheenColorMap&&(g.sheenColorMap.value=w.sheenColorMap,t(w.sheenColorMap,g.sheenColorMapTransform)),w.sheenRoughnessMap&&(g.sheenRoughnessMap.value=w.sheenRoughnessMap,t(w.sheenRoughnessMap,g.sheenRoughnessMapTransform))),w.clearcoat>0&&(g.clearcoat.value=w.clearcoat,g.clearcoatRoughness.value=w.clearcoatRoughness,w.clearcoatMap&&(g.clearcoatMap.value=w.clearcoatMap,t(w.clearcoatMap,g.clearcoatMapTransform)),w.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=w.clearcoatRoughnessMap,t(w.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),w.clearcoatNormalMap&&(g.clearcoatNormalMap.value=w.clearcoatNormalMap,t(w.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(w.clearcoatNormalScale),w.side===ms&&g.clearcoatNormalScale.value.negate())),w.dispersion>0&&(g.dispersion.value=w.dispersion),w.iridescence>0&&(g.iridescence.value=w.iridescence,g.iridescenceIOR.value=w.iridescenceIOR,g.iridescenceThicknessMinimum.value=w.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=w.iridescenceThicknessRange[1],w.iridescenceMap&&(g.iridescenceMap.value=w.iridescenceMap,t(w.iridescenceMap,g.iridescenceMapTransform)),w.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=w.iridescenceThicknessMap,t(w.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),w.transmission>0&&(g.transmission.value=w.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),w.transmissionMap&&(g.transmissionMap.value=w.transmissionMap,t(w.transmissionMap,g.transmissionMapTransform)),g.thickness.value=w.thickness,w.thicknessMap&&(g.thicknessMap.value=w.thicknessMap,t(w.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=w.attenuationDistance,g.attenuationColor.value.copy(w.attenuationColor)),w.anisotropy>0&&(g.anisotropyVector.value.set(w.anisotropy*Math.cos(w.anisotropyRotation),w.anisotropy*Math.sin(w.anisotropyRotation)),w.anisotropyMap&&(g.anisotropyMap.value=w.anisotropyMap,t(w.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=w.specularIntensity,g.specularColor.value.copy(w.specularColor),w.specularColorMap&&(g.specularColorMap.value=w.specularColorMap,t(w.specularColorMap,g.specularColorMapTransform)),w.specularIntensityMap&&(g.specularIntensityMap.value=w.specularIntensityMap,t(w.specularIntensityMap,g.specularIntensityMapTransform))}function v(g,w){w.matcap&&(g.matcap.value=w.matcap)}function m(g,w){const b=e.get(w).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function Xfe(r,e,t,n){let i={},s={},a=[];const o=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,E){const B=E.program;n.uniformBlockBinding(b,B)}function c(b,E){let B=i[b.id];B===void 0&&(v(b),B=u(b),i[b.id]=B,b.addEventListener("dispose",g));const S=E.program;n.updateUBOMapping(b,S);const M=e.render.frame;s[b.id]!==M&&(d(b),s[b.id]=M)}function u(b){const E=f();b.__bindingPointIndex=E;const B=r.createBuffer(),S=b.__size,M=b.usage;return r.bindBuffer(r.UNIFORM_BUFFER,B),r.bufferData(r.UNIFORM_BUFFER,S,M),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,E,B),B}function f(){for(let b=0;b<o;b++)if(a.indexOf(b)===-1)return a.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(b){const E=i[b.id],B=b.uniforms,S=b.__cache;r.bindBuffer(r.UNIFORM_BUFFER,E);for(let M=0,I=B.length;M<I;M++){const k=Array.isArray(B[M])?B[M]:[B[M]];for(let O=0,C=k.length;O<C;O++){const P=k[O];if(p(P,M,O,S)===!0){const D=P.__offset,F=Array.isArray(P.value)?P.value:[P.value];let _=0;for(let R=0;R<F.length;R++){const L=F[R],Q=m(L);typeof L=="number"||typeof L=="boolean"?(P.__data[0]=L,r.bufferSubData(r.UNIFORM_BUFFER,D+_,P.__data)):L.isMatrix3?(P.__data[0]=L.elements[0],P.__data[1]=L.elements[1],P.__data[2]=L.elements[2],P.__data[3]=0,P.__data[4]=L.elements[3],P.__data[5]=L.elements[4],P.__data[6]=L.elements[5],P.__data[7]=0,P.__data[8]=L.elements[6],P.__data[9]=L.elements[7],P.__data[10]=L.elements[8],P.__data[11]=0):(L.toArray(P.__data,_),_+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,D,P.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(b,E,B,S){const M=b.value,I=E+"_"+B;if(S[I]===void 0)return typeof M=="number"||typeof M=="boolean"?S[I]=M:S[I]=M.clone(),!0;{const k=S[I];if(typeof M=="number"||typeof M=="boolean"){if(k!==M)return S[I]=M,!0}else if(k.equals(M)===!1)return k.copy(M),!0}return!1}function v(b){const E=b.uniforms;let B=0;const S=16;for(let I=0,k=E.length;I<k;I++){const O=Array.isArray(E[I])?E[I]:[E[I]];for(let C=0,P=O.length;C<P;C++){const D=O[C],F=Array.isArray(D.value)?D.value:[D.value];for(let _=0,R=F.length;_<R;_++){const L=F[_],Q=m(L),G=B%S,Y=G%Q.boundary,W=G+Y;B+=Y,W!==0&&S-W<Q.storage&&(B+=S-W),D.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=B,B+=Q.storage}}}const M=B%S;return M>0&&(B+=S-M),b.__size=B,b.__cache={},this}function m(b){const E={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(E.boundary=4,E.storage=4):b.isVector2?(E.boundary=8,E.storage=8):b.isVector3||b.isColor?(E.boundary=16,E.storage=12):b.isVector4?(E.boundary=16,E.storage=16):b.isMatrix3?(E.boundary=48,E.storage=48):b.isMatrix4?(E.boundary=64,E.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),E}function g(b){const E=b.target;E.removeEventListener("dispose",g);const B=a.indexOf(E.__bindingPointIndex);a.splice(B,1),r.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function w(){for(const b in i)r.deleteBuffer(i[b]);a=[],i={},s={}}return{bind:l,update:c,dispose:w}}class By{constructor(e={}){const{canvas:t=Ooe(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=a;const p=new Uint32Array(4),v=new Int32Array(4);let m=null,g=null;const w=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Sn,this.toneMapping=jA,this.toneMappingExposure=1;const E=this;let B=!1,S=0,M=0,I=null,k=-1,O=null;const C=new Cn,P=new Cn;let D=null;const F=new st(0);let _=0,R=t.width,L=t.height,Q=1,G=null,Y=null;const W=new Cn(0,0,R,L),V=new Cn(0,0,R,L);let T=!1;const H=new EE;let K=!1,N=!1;const te=new at,oe=new at,fe=new ae,he=new Cn,me={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Te=!1;function Re(){return I===null?Q:1}let de=n;function Z(Ae,Ue){return t.getContext(Ae,Ue)}try{const Ae={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${bu}`),t.addEventListener("webglcontextlost",je,!1),t.addEventListener("webglcontextrestored",Ye,!1),t.addEventListener("webglcontextcreationerror",rt,!1),de===null){const Ue="webgl2";if(de=Z(Ue,Ae),de===null)throw Z(Ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ae){throw console.error("THREE.WebGLRenderer: "+Ae.message),Ae}let ve,ye,se,ce,_e,ie,$,ee,pe,xe,be,De,J,j,X,re,ge,Me,Ee,We,et,Ze,dt,Se;function Je(){ve=new nAe(de),ve.init(),Ze=new Qfe(de,ve),ye=new Xue(de,ve,e,Ze),se=new Pfe(de),ye.reverseDepthBuffer&&se.buffers.depth.setReversed(!0),ce=new sAe(de),_e=new bfe,ie=new Hfe(de,ve,se,_e,ye,Ze,ce),$=new Jue(E),ee=new tAe(E),pe=new fle(de),dt=new que(de,pe),xe=new rAe(de,pe,ce,dt),be=new oAe(de,xe,pe,ce),Ee=new aAe(de,ye,ie),re=new Zue(_e),De=new xfe(E,$,ee,ve,ye,dt,re),J=new Yfe(E,_e),j=new Sfe,X=new Ife(ve),Me=new Kue(E,$,ee,se,be,d,l),ge=new Ofe(E,be,ye),Se=new Xfe(de,ce,ye,se),We=new Yue(de,ve,ce),et=new iAe(de,ve,ce),ce.programs=De.programs,E.capabilities=ye,E.extensions=ve,E.properties=_e,E.renderLists=j,E.shadowMap=ge,E.state=se,E.info=ce}Je();const Ve=new Kfe(E,de);this.xr=Ve,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const Ae=ve.get("WEBGL_lose_context");Ae&&Ae.loseContext()},this.forceContextRestore=function(){const Ae=ve.get("WEBGL_lose_context");Ae&&Ae.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(Ae){Ae!==void 0&&(Q=Ae,this.setSize(R,L,!1))},this.getSize=function(Ae){return Ae.set(R,L)},this.setSize=function(Ae,Ue,Ne=!0){if(Ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=Ae,L=Ue,t.width=Math.floor(Ae*Q),t.height=Math.floor(Ue*Q),Ne===!0&&(t.style.width=Ae+"px",t.style.height=Ue+"px"),this.setViewport(0,0,Ae,Ue)},this.getDrawingBufferSize=function(Ae){return Ae.set(R*Q,L*Q).floor()},this.setDrawingBufferSize=function(Ae,Ue,Ne){R=Ae,L=Ue,Q=Ne,t.width=Math.floor(Ae*Ne),t.height=Math.floor(Ue*Ne),this.setViewport(0,0,Ae,Ue)},this.getCurrentViewport=function(Ae){return Ae.copy(C)},this.getViewport=function(Ae){return Ae.copy(W)},this.setViewport=function(Ae,Ue,Ne,Pe){Ae.isVector4?W.set(Ae.x,Ae.y,Ae.z,Ae.w):W.set(Ae,Ue,Ne,Pe),se.viewport(C.copy(W).multiplyScalar(Q).round())},this.getScissor=function(Ae){return Ae.copy(V)},this.setScissor=function(Ae,Ue,Ne,Pe){Ae.isVector4?V.set(Ae.x,Ae.y,Ae.z,Ae.w):V.set(Ae,Ue,Ne,Pe),se.scissor(P.copy(V).multiplyScalar(Q).round())},this.getScissorTest=function(){return T},this.setScissorTest=function(Ae){se.setScissorTest(T=Ae)},this.setOpaqueSort=function(Ae){G=Ae},this.setTransparentSort=function(Ae){Y=Ae},this.getClearColor=function(Ae){return Ae.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(Ae=!0,Ue=!0,Ne=!0){let Pe=0;if(Ae){let Fe=!1;if(I!==null){const nt=I.texture.format;Fe=nt===lO||nt===oO||nt===_E}if(Fe){const nt=I.texture.type,ht=nt===Eu||nt===JA||nt===Yv||nt===Em||nt===iO||nt===sO,xt=Me.getClearColor(),Et=Me.getClearAlpha(),Dt=xt.r,Nt=xt.g,_t=xt.b;ht?(p[0]=Dt,p[1]=Nt,p[2]=_t,p[3]=Et,de.clearBufferuiv(de.COLOR,0,p)):(v[0]=Dt,v[1]=Nt,v[2]=_t,v[3]=Et,de.clearBufferiv(de.COLOR,0,v))}else Pe|=de.COLOR_BUFFER_BIT}Ue&&(Pe|=de.DEPTH_BUFFER_BIT,de.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),Ne&&(Pe|=de.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),de.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",je,!1),t.removeEventListener("webglcontextrestored",Ye,!1),t.removeEventListener("webglcontextcreationerror",rt,!1),j.dispose(),X.dispose(),_e.dispose(),$.dispose(),ee.dispose(),be.dispose(),dt.dispose(),Se.dispose(),De.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",An),Ve.removeEventListener("sessionend",Xt),jn.stop()};function je(Ae){Ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function Ye(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const Ae=ce.autoReset,Ue=ge.enabled,Ne=ge.autoUpdate,Pe=ge.needsUpdate,Fe=ge.type;Je(),ce.autoReset=Ae,ge.enabled=Ue,ge.autoUpdate=Ne,ge.needsUpdate=Pe,ge.type=Fe}function rt(Ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ae.statusMessage)}function wt(Ae){const Ue=Ae.target;Ue.removeEventListener("dispose",wt),kt(Ue)}function kt(Ae){ur(Ae),_e.remove(Ae)}function ur(Ae){const Ue=_e.get(Ae).programs;Ue!==void 0&&(Ue.forEach(function(Ne){De.releaseProgram(Ne)}),Ae.isShaderMaterial&&De.releaseShaderCache(Ae))}this.renderBufferDirect=function(Ae,Ue,Ne,Pe,Fe,nt){Ue===null&&(Ue=me);const ht=Fe.isMesh&&Fe.matrixWorld.determinant()<0,xt=is(Ae,Ue,Ne,Pe,Fe);se.setMaterial(Pe,ht);let Et=Ne.index,Dt=1;if(Pe.wireframe===!0){if(Et=xe.getWireframeAttribute(Ne),Et===void 0)return;Dt=2}const Nt=Ne.drawRange,_t=Ne.attributes.position;let _n=Nt.start*Dt,Wn=(Nt.start+Nt.count)*Dt;nt!==null&&(_n=Math.max(_n,nt.start*Dt),Wn=Math.min(Wn,(nt.start+nt.count)*Dt)),Et!==null?(_n=Math.max(_n,0),Wn=Math.min(Wn,Et.count)):_t!=null&&(_n=Math.max(_n,0),Wn=Math.min(Wn,_t.count));const Vn=Wn-_n;if(Vn<0||Vn===1/0)return;dt.setup(Fe,Pe,xt,Ne,Et);let si,mn=We;if(Et!==null&&(si=pe.get(Et),mn=et,mn.setIndex(si)),Fe.isMesh)Pe.wireframe===!0?(se.setLineWidth(Pe.wireframeLinewidth*Re()),mn.setMode(de.LINES)):mn.setMode(de.TRIANGLES);else if(Fe.isLine){let Ct=Pe.linewidth;Ct===void 0&&(Ct=1),se.setLineWidth(Ct*Re()),Fe.isLineSegments?mn.setMode(de.LINES):Fe.isLineLoop?mn.setMode(de.LINE_LOOP):mn.setMode(de.LINE_STRIP)}else Fe.isPoints?mn.setMode(de.POINTS):Fe.isSprite&&mn.setMode(de.TRIANGLES);if(Fe.isBatchedMesh)if(Fe._multiDrawInstances!==null)mn.renderMultiDrawInstances(Fe._multiDrawStarts,Fe._multiDrawCounts,Fe._multiDrawCount,Fe._multiDrawInstances);else if(ve.get("WEBGL_multi_draw"))mn.renderMultiDraw(Fe._multiDrawStarts,Fe._multiDrawCounts,Fe._multiDrawCount);else{const Ct=Fe._multiDrawStarts,Rr=Fe._multiDrawCounts,nn=Fe._multiDrawCount,sa=Et?pe.get(Et).bytesPerElement:1,Nu=_e.get(Pe).currentProgram.getUniforms();for(let ji=0;ji<nn;ji++)Nu.setValue(de,"_gl_DrawID",ji),mn.render(Ct[ji]/sa,Rr[ji])}else if(Fe.isInstancedMesh)mn.renderInstances(_n,Vn,Fe.count);else if(Ne.isInstancedBufferGeometry){const Ct=Ne._maxInstanceCount!==void 0?Ne._maxInstanceCount:1/0,Rr=Math.min(Ne.instanceCount,Ct);mn.renderInstances(_n,Vn,Rr)}else mn.render(_n,Vn)};function bt(Ae,Ue,Ne){Ae.transparent===!0&&Ae.side===Ps&&Ae.forceSinglePass===!1?(Ae.side=ms,Ae.needsUpdate=!0,ii(Ae,Ue,Ne),Ae.side=so,Ae.needsUpdate=!0,ii(Ae,Ue,Ne),Ae.side=Ps):ii(Ae,Ue,Ne)}this.compile=function(Ae,Ue,Ne=null){Ne===null&&(Ne=Ae),g=X.get(Ne),g.init(Ue),b.push(g),Ne.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(Ue.layers)&&(g.pushLight(Fe),Fe.castShadow&&g.pushShadow(Fe))}),Ae!==Ne&&Ae.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(Ue.layers)&&(g.pushLight(Fe),Fe.castShadow&&g.pushShadow(Fe))}),g.setupLights();const Pe=new Set;return Ae.traverse(function(Fe){if(!(Fe.isMesh||Fe.isPoints||Fe.isLine||Fe.isSprite))return;const nt=Fe.material;if(nt)if(Array.isArray(nt))for(let ht=0;ht<nt.length;ht++){const xt=nt[ht];bt(xt,Ne,Fe),Pe.add(xt)}else bt(nt,Ne,Fe),Pe.add(nt)}),b.pop(),g=null,Pe},this.compileAsync=function(Ae,Ue,Ne=null){const Pe=this.compile(Ae,Ue,Ne);return new Promise(Fe=>{function nt(){if(Pe.forEach(function(ht){_e.get(ht).currentProgram.isReady()&&Pe.delete(ht)}),Pe.size===0){Fe(Ae);return}setTimeout(nt,10)}ve.get("KHR_parallel_shader_compile")!==null?nt():setTimeout(nt,10)})};let en=null;function ri(Ae){en&&en(Ae)}function An(){jn.stop()}function Xt(){jn.start()}const jn=new Cq;jn.setAnimationLoop(ri),typeof self<"u"&&jn.setContext(self),this.setAnimationLoop=function(Ae){en=Ae,Ve.setAnimationLoop(Ae),Ae===null?jn.stop():jn.start()},Ve.addEventListener("sessionstart",An),Ve.addEventListener("sessionend",Xt),this.render=function(Ae,Ue){if(Ue!==void 0&&Ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;if(Ae.matrixWorldAutoUpdate===!0&&Ae.updateMatrixWorld(),Ue.parent===null&&Ue.matrixWorldAutoUpdate===!0&&Ue.updateMatrixWorld(),Ve.enabled===!0&&Ve.isPresenting===!0&&(Ve.cameraAutoUpdate===!0&&Ve.updateCamera(Ue),Ue=Ve.getCamera()),Ae.isScene===!0&&Ae.onBeforeRender(E,Ae,Ue,I),g=X.get(Ae,b.length),g.init(Ue),b.push(g),oe.multiplyMatrices(Ue.projectionMatrix,Ue.matrixWorldInverse),H.setFromProjectionMatrix(oe),N=this.localClippingEnabled,K=re.init(this.clippingPlanes,N),m=j.get(Ae,w.length),m.init(),w.push(m),Ve.enabled===!0&&Ve.isPresenting===!0){const nt=E.xr.getDepthSensingMesh();nt!==null&&pn(nt,Ue,-1/0,E.sortObjects)}pn(Ae,Ue,0,E.sortObjects),m.finish(),E.sortObjects===!0&&m.sort(G,Y),Te=Ve.enabled===!1||Ve.isPresenting===!1||Ve.hasDepthSensing()===!1,Te&&Me.addToRenderList(m,Ae),this.info.render.frame++,K===!0&&re.beginShadows();const Ne=g.state.shadowsArray;ge.render(Ne,Ae,Ue),K===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset();const Pe=m.opaque,Fe=m.transmissive;if(g.setupLights(),Ue.isArrayCamera){const nt=Ue.cameras;if(Fe.length>0)for(let ht=0,xt=nt.length;ht<xt;ht++){const Et=nt[ht];ia(Pe,Fe,Ae,Et)}Te&&Me.render(Ae);for(let ht=0,xt=nt.length;ht<xt;ht++){const Et=nt[ht];Pn(m,Ae,Et,Et.viewport)}}else Fe.length>0&&ia(Pe,Fe,Ae,Ue),Te&&Me.render(Ae),Pn(m,Ae,Ue);I!==null&&(ie.updateMultisampleRenderTarget(I),ie.updateRenderTargetMipmap(I)),Ae.isScene===!0&&Ae.onAfterRender(E,Ae,Ue),dt.resetDefaultState(),k=-1,O=null,b.pop(),b.length>0?(g=b[b.length-1],K===!0&&re.setGlobalState(E.clippingPlanes,g.state.camera)):g=null,w.pop(),w.length>0?m=w[w.length-1]:m=null};function pn(Ae,Ue,Ne,Pe){if(Ae.visible===!1)return;if(Ae.layers.test(Ue.layers)){if(Ae.isGroup)Ne=Ae.renderOrder;else if(Ae.isLOD)Ae.autoUpdate===!0&&Ae.update(Ue);else if(Ae.isLight)g.pushLight(Ae),Ae.castShadow&&g.pushShadow(Ae);else if(Ae.isSprite){if(!Ae.frustumCulled||H.intersectsSprite(Ae)){Pe&&he.setFromMatrixPosition(Ae.matrixWorld).applyMatrix4(oe);const ht=be.update(Ae),xt=Ae.material;xt.visible&&m.push(Ae,ht,xt,Ne,he.z,null)}}else if((Ae.isMesh||Ae.isLine||Ae.isPoints)&&(!Ae.frustumCulled||H.intersectsObject(Ae))){const ht=be.update(Ae),xt=Ae.material;if(Pe&&(Ae.boundingSphere!==void 0?(Ae.boundingSphere===null&&Ae.computeBoundingSphere(),he.copy(Ae.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),he.copy(ht.boundingSphere.center)),he.applyMatrix4(Ae.matrixWorld).applyMatrix4(oe)),Array.isArray(xt)){const Et=ht.groups;for(let Dt=0,Nt=Et.length;Dt<Nt;Dt++){const _t=Et[Dt],_n=xt[_t.materialIndex];_n&&_n.visible&&m.push(Ae,ht,_n,Ne,he.z,_t)}}else xt.visible&&m.push(Ae,ht,xt,Ne,he.z,null)}}const nt=Ae.children;for(let ht=0,xt=nt.length;ht<xt;ht++)pn(nt[ht],Ue,Ne,Pe)}function Pn(Ae,Ue,Ne,Pe){const Fe=Ae.opaque,nt=Ae.transmissive,ht=Ae.transparent;g.setupLightsView(Ne),K===!0&&re.setGlobalState(E.clippingPlanes,Ne),Pe&&se.viewport(C.copy(Pe)),Fe.length>0&&kn(Fe,Ue,Ne),nt.length>0&&kn(nt,Ue,Ne),ht.length>0&&kn(ht,Ue,Ne),se.buffers.depth.setTest(!0),se.buffers.depth.setMask(!0),se.buffers.color.setMask(!0),se.setPolygonOffset(!1)}function ia(Ae,Ue,Ne,Pe){if((Ne.isScene===!0?Ne.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Pe.id]===void 0&&(g.state.transmissionRenderTarget[Pe.id]=new cc(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")||ve.has("EXT_color_buffer_float")?nc:Eu,minFilter:ml,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:on.workingColorSpace}));const nt=g.state.transmissionRenderTarget[Pe.id],ht=Pe.viewport||C;nt.setSize(ht.z,ht.w);const xt=E.getRenderTarget();E.setRenderTarget(nt),E.getClearColor(F),_=E.getClearAlpha(),_<1&&E.setClearColor(16777215,.5),E.clear(),Te&&Me.render(Ne);const Et=E.toneMapping;E.toneMapping=jA;const Dt=Pe.viewport;if(Pe.viewport!==void 0&&(Pe.viewport=void 0),g.setupLightsView(Pe),K===!0&&re.setGlobalState(E.clippingPlanes,Pe),kn(Ae,Ne,Pe),ie.updateMultisampleRenderTarget(nt),ie.updateRenderTargetMipmap(nt),ve.has("WEBGL_multisampled_render_to_texture")===!1){let Nt=!1;for(let _t=0,_n=Ue.length;_t<_n;_t++){const Wn=Ue[_t],Vn=Wn.object,si=Wn.geometry,mn=Wn.material,Ct=Wn.group;if(mn.side===Ps&&Vn.layers.test(Pe.layers)){const Rr=mn.side;mn.side=ms,mn.needsUpdate=!0,Un(Vn,Ne,Pe,si,mn,Ct),mn.side=Rr,mn.needsUpdate=!0,Nt=!0}}Nt===!0&&(ie.updateMultisampleRenderTarget(nt),ie.updateRenderTargetMipmap(nt))}E.setRenderTarget(xt),E.setClearColor(F,_),Dt!==void 0&&(Pe.viewport=Dt),E.toneMapping=Et}function kn(Ae,Ue,Ne){const Pe=Ue.isScene===!0?Ue.overrideMaterial:null;for(let Fe=0,nt=Ae.length;Fe<nt;Fe++){const ht=Ae[Fe],xt=ht.object,Et=ht.geometry,Dt=Pe===null?ht.material:Pe,Nt=ht.group;xt.layers.test(Ne.layers)&&Un(xt,Ue,Ne,Et,Dt,Nt)}}function Un(Ae,Ue,Ne,Pe,Fe,nt){Ae.onBeforeRender(E,Ue,Ne,Pe,Fe,nt),Ae.modelViewMatrix.multiplyMatrices(Ne.matrixWorldInverse,Ae.matrixWorld),Ae.normalMatrix.getNormalMatrix(Ae.modelViewMatrix),Fe.onBeforeRender(E,Ue,Ne,Pe,Ae,nt),Fe.transparent===!0&&Fe.side===Ps&&Fe.forceSinglePass===!1?(Fe.side=ms,Fe.needsUpdate=!0,E.renderBufferDirect(Ne,Ue,Pe,Fe,Ae,nt),Fe.side=so,Fe.needsUpdate=!0,E.renderBufferDirect(Ne,Ue,Pe,Fe,Ae,nt),Fe.side=Ps):E.renderBufferDirect(Ne,Ue,Pe,Fe,Ae,nt),Ae.onAfterRender(E,Ue,Ne,Pe,Fe,nt)}function ii(Ae,Ue,Ne){Ue.isScene!==!0&&(Ue=me);const Pe=_e.get(Ae),Fe=g.state.lights,nt=g.state.shadowsArray,ht=Fe.state.version,xt=De.getParameters(Ae,Fe.state,nt,Ue,Ne),Et=De.getProgramCacheKey(xt);let Dt=Pe.programs;Pe.environment=Ae.isMeshStandardMaterial?Ue.environment:null,Pe.fog=Ue.fog,Pe.envMap=(Ae.isMeshStandardMaterial?ee:$).get(Ae.envMap||Pe.environment),Pe.envMapRotation=Pe.environment!==null&&Ae.envMap===null?Ue.environmentRotation:Ae.envMapRotation,Dt===void 0&&(Ae.addEventListener("dispose",wt),Dt=new Map,Pe.programs=Dt);let Nt=Dt.get(Et);if(Nt!==void 0){if(Pe.currentProgram===Nt&&Pe.lightsStateVersion===ht)return yn(Ae,xt),Nt}else xt.uniforms=De.getUniforms(Ae),Ae.onBeforeCompile(xt,E),Nt=De.acquireProgram(xt,Et),Dt.set(Et,Nt),Pe.uniforms=xt.uniforms;const _t=Pe.uniforms;return(!Ae.isShaderMaterial&&!Ae.isRawShaderMaterial||Ae.clipping===!0)&&(_t.clippingPlanes=re.uniform),yn(Ae,xt),Pe.needsLights=wn(Ae),Pe.lightsStateVersion=ht,Pe.needsLights&&(_t.ambientLightColor.value=Fe.state.ambient,_t.lightProbe.value=Fe.state.probe,_t.directionalLights.value=Fe.state.directional,_t.directionalLightShadows.value=Fe.state.directionalShadow,_t.spotLights.value=Fe.state.spot,_t.spotLightShadows.value=Fe.state.spotShadow,_t.rectAreaLights.value=Fe.state.rectArea,_t.ltc_1.value=Fe.state.rectAreaLTC1,_t.ltc_2.value=Fe.state.rectAreaLTC2,_t.pointLights.value=Fe.state.point,_t.pointLightShadows.value=Fe.state.pointShadow,_t.hemisphereLights.value=Fe.state.hemi,_t.directionalShadowMap.value=Fe.state.directionalShadowMap,_t.directionalShadowMatrix.value=Fe.state.directionalShadowMatrix,_t.spotShadowMap.value=Fe.state.spotShadowMap,_t.spotLightMatrix.value=Fe.state.spotLightMatrix,_t.spotLightMap.value=Fe.state.spotLightMap,_t.pointShadowMap.value=Fe.state.pointShadowMap,_t.pointShadowMatrix.value=Fe.state.pointShadowMatrix),Pe.currentProgram=Nt,Pe.uniformsList=null,Nt}function Hn(Ae){if(Ae.uniformsList===null){const Ue=Ae.currentProgram.getUniforms();Ae.uniformsList=vb.seqWithValue(Ue.seq,Ae.uniforms)}return Ae.uniformsList}function yn(Ae,Ue){const Ne=_e.get(Ae);Ne.outputColorSpace=Ue.outputColorSpace,Ne.batching=Ue.batching,Ne.batchingColor=Ue.batchingColor,Ne.instancing=Ue.instancing,Ne.instancingColor=Ue.instancingColor,Ne.instancingMorph=Ue.instancingMorph,Ne.skinning=Ue.skinning,Ne.morphTargets=Ue.morphTargets,Ne.morphNormals=Ue.morphNormals,Ne.morphColors=Ue.morphColors,Ne.morphTargetsCount=Ue.morphTargetsCount,Ne.numClippingPlanes=Ue.numClippingPlanes,Ne.numIntersection=Ue.numClipIntersection,Ne.vertexAlphas=Ue.vertexAlphas,Ne.vertexTangents=Ue.vertexTangents,Ne.toneMapping=Ue.toneMapping}function is(Ae,Ue,Ne,Pe,Fe){Ue.isScene!==!0&&(Ue=me),ie.resetTextureUnits();const nt=Ue.fog,ht=Pe.isMeshStandardMaterial?Ue.environment:null,xt=I===null?E.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Fi,Et=(Pe.isMeshStandardMaterial?ee:$).get(Pe.envMap||ht),Dt=Pe.vertexColors===!0&&!!Ne.attributes.color&&Ne.attributes.color.itemSize===4,Nt=!!Ne.attributes.tangent&&(!!Pe.normalMap||Pe.anisotropy>0),_t=!!Ne.morphAttributes.position,_n=!!Ne.morphAttributes.normal,Wn=!!Ne.morphAttributes.color;let Vn=jA;Pe.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Vn=E.toneMapping);const si=Ne.morphAttributes.position||Ne.morphAttributes.normal||Ne.morphAttributes.color,mn=si!==void 0?si.length:0,Ct=_e.get(Pe),Rr=g.state.lights;if(K===!0&&(N===!0||Ae!==O)){const _s=Ae===O&&Pe.id===k;re.setState(Pe,Ae,_s)}let nn=!1;Pe.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==Rr.state.version||Ct.outputColorSpace!==xt||Fe.isBatchedMesh&&Ct.batching===!1||!Fe.isBatchedMesh&&Ct.batching===!0||Fe.isBatchedMesh&&Ct.batchingColor===!0&&Fe.colorTexture===null||Fe.isBatchedMesh&&Ct.batchingColor===!1&&Fe.colorTexture!==null||Fe.isInstancedMesh&&Ct.instancing===!1||!Fe.isInstancedMesh&&Ct.instancing===!0||Fe.isSkinnedMesh&&Ct.skinning===!1||!Fe.isSkinnedMesh&&Ct.skinning===!0||Fe.isInstancedMesh&&Ct.instancingColor===!0&&Fe.instanceColor===null||Fe.isInstancedMesh&&Ct.instancingColor===!1&&Fe.instanceColor!==null||Fe.isInstancedMesh&&Ct.instancingMorph===!0&&Fe.morphTexture===null||Fe.isInstancedMesh&&Ct.instancingMorph===!1&&Fe.morphTexture!==null||Ct.envMap!==Et||Pe.fog===!0&&Ct.fog!==nt||Ct.numClippingPlanes!==void 0&&(Ct.numClippingPlanes!==re.numPlanes||Ct.numIntersection!==re.numIntersection)||Ct.vertexAlphas!==Dt||Ct.vertexTangents!==Nt||Ct.morphTargets!==_t||Ct.morphNormals!==_n||Ct.morphColors!==Wn||Ct.toneMapping!==Vn||Ct.morphTargetsCount!==mn)&&(nn=!0):(nn=!0,Ct.__version=Pe.version);let sa=Ct.currentProgram;nn===!0&&(sa=ii(Pe,Ue,Fe));let Nu=!1,ji=!1,Nh=!1;const yr=sa.getUniforms(),Bl=Ct.uniforms;if(se.useProgram(sa.program)&&(Nu=!0,ji=!0,Nh=!0),Pe.id!==k&&(k=Pe.id,ji=!0),Nu||O!==Ae){ye.reverseDepthBuffer?(te.copy(Ae.projectionMatrix),Poe(te),koe(te),yr.setValue(de,"projectionMatrix",te)):yr.setValue(de,"projectionMatrix",Ae.projectionMatrix),yr.setValue(de,"viewMatrix",Ae.matrixWorldInverse);const _s=yr.map.cameraPosition;_s!==void 0&&_s.setValue(de,fe.setFromMatrixPosition(Ae.matrixWorld)),ye.logarithmicDepthBuffer&&yr.setValue(de,"logDepthBufFC",2/(Math.log(Ae.far+1)/Math.LN2)),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&yr.setValue(de,"isOrthographic",Ae.isOrthographicCamera===!0),O!==Ae&&(O=Ae,ji=!0,Nh=!0)}if(Fe.isSkinnedMesh){yr.setOptional(de,Fe,"bindMatrix"),yr.setOptional(de,Fe,"bindMatrixInverse");const _s=Fe.skeleton;_s&&(_s.boneTexture===null&&_s.computeBoneTexture(),yr.setValue(de,"boneTexture",_s.boneTexture,ie))}Fe.isBatchedMesh&&(yr.setOptional(de,Fe,"batchingTexture"),yr.setValue(de,"batchingTexture",Fe._matricesTexture,ie),yr.setOptional(de,Fe,"batchingIdTexture"),yr.setValue(de,"batchingIdTexture",Fe._indirectTexture,ie),yr.setOptional(de,Fe,"batchingColorTexture"),Fe._colorsTexture!==null&&yr.setValue(de,"batchingColorTexture",Fe._colorsTexture,ie));const ws=Ne.morphAttributes;if((ws.position!==void 0||ws.normal!==void 0||ws.color!==void 0)&&Ee.update(Fe,Ne,sa),(ji||Ct.receiveShadow!==Fe.receiveShadow)&&(Ct.receiveShadow=Fe.receiveShadow,yr.setValue(de,"receiveShadow",Fe.receiveShadow)),Pe.isMeshGouraudMaterial&&Pe.envMap!==null&&(Bl.envMap.value=Et,Bl.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),Pe.isMeshStandardMaterial&&Pe.envMap===null&&Ue.environment!==null&&(Bl.envMapIntensity.value=Ue.environmentIntensity),ji&&(yr.setValue(de,"toneMappingExposure",E.toneMappingExposure),Ct.needsLights&&Fn(Bl,Nh),nt&&Pe.fog===!0&&J.refreshFogUniforms(Bl,nt),J.refreshMaterialUniforms(Bl,Pe,Q,L,g.state.transmissionRenderTarget[Ae.id]),vb.upload(de,Hn(Ct),Bl,ie)),Pe.isShaderMaterial&&Pe.uniformsNeedUpdate===!0&&(vb.upload(de,Hn(Ct),Bl,ie),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&yr.setValue(de,"center",Fe.center),yr.setValue(de,"modelViewMatrix",Fe.modelViewMatrix),yr.setValue(de,"normalMatrix",Fe.normalMatrix),yr.setValue(de,"modelMatrix",Fe.matrixWorld),Pe.isShaderMaterial||Pe.isRawShaderMaterial){const _s=Pe.uniformsGroups;for(let Ph=0,ag=_s.length;Ph<ag;Ph++){const _c=_s[Ph];Se.update(_c,sa),Se.bind(_c,sa)}}return sa}function Fn(Ae,Ue){Ae.ambientLightColor.needsUpdate=Ue,Ae.lightProbe.needsUpdate=Ue,Ae.directionalLights.needsUpdate=Ue,Ae.directionalLightShadows.needsUpdate=Ue,Ae.pointLights.needsUpdate=Ue,Ae.pointLightShadows.needsUpdate=Ue,Ae.spotLights.needsUpdate=Ue,Ae.spotLightShadows.needsUpdate=Ue,Ae.rectAreaLights.needsUpdate=Ue,Ae.hemisphereLights.needsUpdate=Ue}function wn(Ae){return Ae.isMeshLambertMaterial||Ae.isMeshToonMaterial||Ae.isMeshPhongMaterial||Ae.isMeshStandardMaterial||Ae.isShadowMaterial||Ae.isShaderMaterial&&Ae.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(Ae,Ue,Ne){_e.get(Ae.texture).__webglTexture=Ue,_e.get(Ae.depthTexture).__webglTexture=Ne;const Pe=_e.get(Ae);Pe.__hasExternalTextures=!0,Pe.__autoAllocateDepthBuffer=Ne===void 0,Pe.__autoAllocateDepthBuffer||ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Pe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Ae,Ue){const Ne=_e.get(Ae);Ne.__webglFramebuffer=Ue,Ne.__useDefaultFramebuffer=Ue===void 0},this.setRenderTarget=function(Ae,Ue=0,Ne=0){I=Ae,S=Ue,M=Ne;let Pe=!0,Fe=null,nt=!1,ht=!1;if(Ae){const Et=_e.get(Ae);if(Et.__useDefaultFramebuffer!==void 0)se.bindFramebuffer(de.FRAMEBUFFER,null),Pe=!1;else if(Et.__webglFramebuffer===void 0)ie.setupRenderTarget(Ae);else if(Et.__hasExternalTextures)ie.rebindTextures(Ae,_e.get(Ae.texture).__webglTexture,_e.get(Ae.depthTexture).__webglTexture);else if(Ae.depthBuffer){const _t=Ae.depthTexture;if(Et.__boundDepthTexture!==_t){if(_t!==null&&_e.has(_t)&&(Ae.width!==_t.image.width||Ae.height!==_t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(Ae)}}const Dt=Ae.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(ht=!0);const Nt=_e.get(Ae).__webglFramebuffer;Ae.isWebGLCubeRenderTarget?(Array.isArray(Nt[Ue])?Fe=Nt[Ue][Ne]:Fe=Nt[Ue],nt=!0):Ae.samples>0&&ie.useMultisampledRTT(Ae)===!1?Fe=_e.get(Ae).__webglMultisampledFramebuffer:Array.isArray(Nt)?Fe=Nt[Ne]:Fe=Nt,C.copy(Ae.viewport),P.copy(Ae.scissor),D=Ae.scissorTest}else C.copy(W).multiplyScalar(Q).floor(),P.copy(V).multiplyScalar(Q).floor(),D=T;if(se.bindFramebuffer(de.FRAMEBUFFER,Fe)&&Pe&&se.drawBuffers(Ae,Fe),se.viewport(C),se.scissor(P),se.setScissorTest(D),nt){const Et=_e.get(Ae.texture);de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_CUBE_MAP_POSITIVE_X+Ue,Et.__webglTexture,Ne)}else if(ht){const Et=_e.get(Ae.texture),Dt=Ue||0;de.framebufferTextureLayer(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,Et.__webglTexture,Ne||0,Dt)}k=-1},this.readRenderTargetPixels=function(Ae,Ue,Ne,Pe,Fe,nt,ht){if(!(Ae&&Ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xt=_e.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&ht!==void 0&&(xt=xt[ht]),xt){se.bindFramebuffer(de.FRAMEBUFFER,xt);try{const Et=Ae.texture,Dt=Et.format,Nt=Et.type;if(!ye.textureFormatReadable(Dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ye.textureTypeReadable(Nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ue>=0&&Ue<=Ae.width-Pe&&Ne>=0&&Ne<=Ae.height-Fe&&de.readPixels(Ue,Ne,Pe,Fe,Ze.convert(Dt),Ze.convert(Nt),nt)}finally{const Et=I!==null?_e.get(I).__webglFramebuffer:null;se.bindFramebuffer(de.FRAMEBUFFER,Et)}}},this.readRenderTargetPixelsAsync=async function(Ae,Ue,Ne,Pe,Fe,nt,ht){if(!(Ae&&Ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let xt=_e.get(Ae).__webglFramebuffer;if(Ae.isWebGLCubeRenderTarget&&ht!==void 0&&(xt=xt[ht]),xt){const Et=Ae.texture,Dt=Et.format,Nt=Et.type;if(!ye.textureFormatReadable(Dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ye.textureTypeReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Ue>=0&&Ue<=Ae.width-Pe&&Ne>=0&&Ne<=Ae.height-Fe){se.bindFramebuffer(de.FRAMEBUFFER,xt);const _t=de.createBuffer();de.bindBuffer(de.PIXEL_PACK_BUFFER,_t),de.bufferData(de.PIXEL_PACK_BUFFER,nt.byteLength,de.STREAM_READ),de.readPixels(Ue,Ne,Pe,Fe,Ze.convert(Dt),Ze.convert(Nt),0);const _n=I!==null?_e.get(I).__webglFramebuffer:null;se.bindFramebuffer(de.FRAMEBUFFER,_n);const Wn=de.fenceSync(de.SYNC_GPU_COMMANDS_COMPLETE,0);return de.flush(),await Noe(de,Wn,4),de.bindBuffer(de.PIXEL_PACK_BUFFER,_t),de.getBufferSubData(de.PIXEL_PACK_BUFFER,0,nt),de.deleteBuffer(_t),de.deleteSync(Wn),nt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Ae,Ue=null,Ne=0){Ae.isTexture!==!0&&(gb("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Ue=arguments[0]||null,Ae=arguments[1]);const Pe=Math.pow(2,-Ne),Fe=Math.floor(Ae.image.width*Pe),nt=Math.floor(Ae.image.height*Pe),ht=Ue!==null?Ue.x:0,xt=Ue!==null?Ue.y:0;ie.setTexture2D(Ae,0),de.copyTexSubImage2D(de.TEXTURE_2D,Ne,0,0,ht,xt,Fe,nt),se.unbindTexture()},this.copyTextureToTexture=function(Ae,Ue,Ne=null,Pe=null,Fe=0){Ae.isTexture!==!0&&(gb("WebGLRenderer: copyTextureToTexture function signature has changed."),Pe=arguments[0]||null,Ae=arguments[1],Ue=arguments[2],Fe=arguments[3]||0,Ne=null);let nt,ht,xt,Et,Dt,Nt;Ne!==null?(nt=Ne.max.x-Ne.min.x,ht=Ne.max.y-Ne.min.y,xt=Ne.min.x,Et=Ne.min.y):(nt=Ae.image.width,ht=Ae.image.height,xt=0,Et=0),Pe!==null?(Dt=Pe.x,Nt=Pe.y):(Dt=0,Nt=0);const _t=Ze.convert(Ue.format),_n=Ze.convert(Ue.type);ie.setTexture2D(Ue,0),de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,Ue.flipY),de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),de.pixelStorei(de.UNPACK_ALIGNMENT,Ue.unpackAlignment);const Wn=de.getParameter(de.UNPACK_ROW_LENGTH),Vn=de.getParameter(de.UNPACK_IMAGE_HEIGHT),si=de.getParameter(de.UNPACK_SKIP_PIXELS),mn=de.getParameter(de.UNPACK_SKIP_ROWS),Ct=de.getParameter(de.UNPACK_SKIP_IMAGES),Rr=Ae.isCompressedTexture?Ae.mipmaps[Fe]:Ae.image;de.pixelStorei(de.UNPACK_ROW_LENGTH,Rr.width),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,Rr.height),de.pixelStorei(de.UNPACK_SKIP_PIXELS,xt),de.pixelStorei(de.UNPACK_SKIP_ROWS,Et),Ae.isDataTexture?de.texSubImage2D(de.TEXTURE_2D,Fe,Dt,Nt,nt,ht,_t,_n,Rr.data):Ae.isCompressedTexture?de.compressedTexSubImage2D(de.TEXTURE_2D,Fe,Dt,Nt,Rr.width,Rr.height,_t,Rr.data):de.texSubImage2D(de.TEXTURE_2D,Fe,Dt,Nt,nt,ht,_t,_n,Rr),de.pixelStorei(de.UNPACK_ROW_LENGTH,Wn),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,Vn),de.pixelStorei(de.UNPACK_SKIP_PIXELS,si),de.pixelStorei(de.UNPACK_SKIP_ROWS,mn),de.pixelStorei(de.UNPACK_SKIP_IMAGES,Ct),Fe===0&&Ue.generateMipmaps&&de.generateMipmap(de.TEXTURE_2D),se.unbindTexture()},this.copyTextureToTexture3D=function(Ae,Ue,Ne=null,Pe=null,Fe=0){Ae.isTexture!==!0&&(gb("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ne=arguments[0]||null,Pe=arguments[1]||null,Ae=arguments[2],Ue=arguments[3],Fe=arguments[4]||0);let nt,ht,xt,Et,Dt,Nt,_t,_n,Wn;const Vn=Ae.isCompressedTexture?Ae.mipmaps[Fe]:Ae.image;Ne!==null?(nt=Ne.max.x-Ne.min.x,ht=Ne.max.y-Ne.min.y,xt=Ne.max.z-Ne.min.z,Et=Ne.min.x,Dt=Ne.min.y,Nt=Ne.min.z):(nt=Vn.width,ht=Vn.height,xt=Vn.depth,Et=0,Dt=0,Nt=0),Pe!==null?(_t=Pe.x,_n=Pe.y,Wn=Pe.z):(_t=0,_n=0,Wn=0);const si=Ze.convert(Ue.format),mn=Ze.convert(Ue.type);let Ct;if(Ue.isData3DTexture)ie.setTexture3D(Ue,0),Ct=de.TEXTURE_3D;else if(Ue.isDataArrayTexture||Ue.isCompressedArrayTexture)ie.setTexture2DArray(Ue,0),Ct=de.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,Ue.flipY),de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ue.premultiplyAlpha),de.pixelStorei(de.UNPACK_ALIGNMENT,Ue.unpackAlignment);const Rr=de.getParameter(de.UNPACK_ROW_LENGTH),nn=de.getParameter(de.UNPACK_IMAGE_HEIGHT),sa=de.getParameter(de.UNPACK_SKIP_PIXELS),Nu=de.getParameter(de.UNPACK_SKIP_ROWS),ji=de.getParameter(de.UNPACK_SKIP_IMAGES);de.pixelStorei(de.UNPACK_ROW_LENGTH,Vn.width),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,Vn.height),de.pixelStorei(de.UNPACK_SKIP_PIXELS,Et),de.pixelStorei(de.UNPACK_SKIP_ROWS,Dt),de.pixelStorei(de.UNPACK_SKIP_IMAGES,Nt),Ae.isDataTexture||Ae.isData3DTexture?de.texSubImage3D(Ct,Fe,_t,_n,Wn,nt,ht,xt,si,mn,Vn.data):Ue.isCompressedArrayTexture?de.compressedTexSubImage3D(Ct,Fe,_t,_n,Wn,nt,ht,xt,si,Vn.data):de.texSubImage3D(Ct,Fe,_t,_n,Wn,nt,ht,xt,si,mn,Vn),de.pixelStorei(de.UNPACK_ROW_LENGTH,Rr),de.pixelStorei(de.UNPACK_IMAGE_HEIGHT,nn),de.pixelStorei(de.UNPACK_SKIP_PIXELS,sa),de.pixelStorei(de.UNPACK_SKIP_ROWS,Nu),de.pixelStorei(de.UNPACK_SKIP_IMAGES,ji),Fe===0&&Ue.generateMipmaps&&de.generateMipmap(Ct),se.unbindTexture()},this.initRenderTarget=function(Ae){_e.get(Ae).__webglFramebuffer===void 0&&ie.setupRenderTarget(Ae)},this.initTexture=function(Ae){Ae.isCubeTexture?ie.setTextureCube(Ae,0):Ae.isData3DTexture?ie.setTexture3D(Ae,0):Ae.isDataArrayTexture||Ae.isCompressedArrayTexture?ie.setTexture2DArray(Ae,0):ie.setTexture2D(Ae,0),se.unbindTexture()},this.resetState=function(){S=0,M=0,I=null,se.reset(),dt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return du}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===uO?"display-p3":"srgb",t.unpackColorSpace=on.workingColorSpace===xE?"display-p3":"srgb"}}class Zv extends Tn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Jr,this.environmentIntensity=1,this.environmentRotation=new Jr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Zfe{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=$F,this.updateRanges=[],this.version=0,this.uuid=vl()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vl()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const js=new ae;class gO{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)js.fromBufferAttribute(this,t),js.applyMatrix4(e),this.setXYZ(t,js.x,js.y,js.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.applyNormalMatrix(e),this.setXYZ(t,js.x,js.y,js.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.transformDirection(e),this.setXYZ(t,js.x,js.y,js.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=dl(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=or(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=or(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=or(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=or(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=or(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=dl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=dl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=dl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=dl(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=or(t,this.array),n=or(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=or(t,this.array),n=or(n,this.array),i=or(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=or(t,this.array),n=or(n,this.array),i=or(i,this.array),s=or(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Lt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new gO(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const m6=new ae,g6=new Cn,v6=new Cn,Jfe=new ae,y6=new at,b_=new ae,zC=new zs,w6=new at,VC=new Sh;class yl extends lr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=SQ,this.bindMatrix=new at,this.bindMatrixInverse=new at,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Or),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,b_),this.boundingBox.expandByPoint(b_)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,b_),this.boundingSphere.expandByPoint(b_)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zC.copy(this.boundingSphere),zC.applyMatrix4(i),e.ray.intersectsSphere(zC)!==!1&&(w6.copy(i).invert(),VC.copy(e.ray).applyMatrix4(w6),!(this.boundingBox!==null&&VC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,VC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Cn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===SQ?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===roe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;g6.fromBufferAttribute(i.attributes.skinIndex,e),v6.fromBufferAttribute(i.attributes.skinWeight,e),m6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=v6.getComponent(s);if(a!==0){const o=g6.getComponent(s);y6.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Jfe.copy(m6).applyMatrix4(y6),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class i1 extends Tn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class lh extends Cr{constructor(e=null,t=1,n=1,i,s,a,o,l,c=ts,u=ts,f,d){super(null,a,o,l,c,u,i,s,f,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _6=new at,$fe=new at;class Ru{constructor(e=[],t=[]){this.uuid=vl(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new at)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new at;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:$fe;_6.multiplyMatrices(o,t[s]),_6.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Ru(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new lh(t,e,e,zi,ks);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new i1),this.bones.push(a),this.boneInverses.push(new at().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const a=t[i];e.bones.push(a.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Jv extends Lt{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Fd=new at,x6=new at,E_=[],b6=new Or,ehe=new at,A0=new lr,f0=new zs;class BE extends lr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jv(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,ehe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Or),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Fd),b6.copy(e.boundingBox).applyMatrix4(Fd),this.boundingBox.union(b6)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new zs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Fd),f0.copy(e.boundingSphere).applyMatrix4(Fd),this.boundingSphere.union(f0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let o=0;o<n.length;o++)n[o]=i[a+o]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(A0.geometry=this.geometry,A0.material=this.material,A0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),f0.copy(this.boundingSphere),f0.applyMatrix4(n),e.ray.intersectsSphere(f0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Fd),x6.multiplyMatrices(n,Fd),A0.matrixWorld=x6,A0.raycast(e,E_);for(let a=0,o=E_.length;a<o;a++){const l=E_[a];l.instanceId=s,l.object=this,t.push(l)}E_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Jv(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new lh(new Float32Array(i*this.count),i,this.count,aO,ks));const s=this.morphTexture.source.data.data;let a=0;for(let c=0;c<n.length;c++)a+=n[c];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function the(r,e){return r.z-e.z}function nhe(r,e){return e.z-r.z}class rhe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const a=i[this.index];s.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=t,a.index=n}reset(){this.list.length=0,this.index=0}}const hA=new at,GC=new at,ihe=new at,she=new st(1,1,1),E6=new at,jC=new EE,S_=new Or,Of=new zs,h0=new ae,S6=new ae,ahe=new ae,WC=new rhe,Bs=new lr,B_=[];function ohe(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,r.getComponent(s,a))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class lhe extends lr{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,i){super(new Gn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new lh(t,e,e,zi,ks);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new lh(t,e,e,_E,JA);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new lh(t,e,e,zi,ks);n.colorSpace=on.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:c}=a,u=new o.constructor(n*l),f=new Lt(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Lt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Or);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,hA),this.getBoundingBoxAt(s,S_).applyMatrix4(hA),e.union(S_)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zs);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,hA),this.getBoundingSphereAt(s,Of).applyMatrix4(hA),e.union(Of)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(i=this._availableInstanceIds.pop(),this._drawInfo[i]=n):(i=this._drawInfo.length,this._drawInfo.push(n));const s=this._matricesTexture,a=s.image.data;ihe.toArray(a,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(she.toArray(o.image.data,i*4),o.needsUpdate=!0),i}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(n===-1?i.indexCount=c.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._geometryCount;return this._geometryCount++,a.push(i),o.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Or,sphereInitialized:!1,sphere:new zs}),this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),o=this._reservedRanges[e];if(i&&a.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,c=o.vertexCount;for(const p in n.attributes){const v=t.getAttribute(p),m=n.getAttribute(p);ohe(v,m,l);const g=v.itemSize;for(let w=v.count,b=c;w<b;w++){const E=l+w;for(let B=0;B<g;B++)m.setComponent(E,B,0)}m.needsUpdate=!0,m.addUpdateRange(l*g,c*g)}if(i){const p=o.indexStart;for(let v=0;v<a.count;v++)s.setX(p+v,l+a.getX(v));for(let v=a.count,m=o.indexCount;v<m;v++)s.setX(p+v,l);s.needsUpdate=!0,s.addUpdateRange(p,o.indexCount)}const u=this._bounds[e];t.boundingBox!==null?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,t.boundingSphere!==null?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const f=this._drawRanges[e],d=t.getAttribute("position");return f.count=i?a.count:d.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.box,s=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const a=s.index,o=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,u=l.start+l.count;c<u;c++){let f=c;a&&(f=a.getX(f)),i.expandByPoint(h0.fromBufferAttribute(o,f))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,S_),S_.getCenter(i.center);const a=s.index,o=s.attributes.position,l=this._drawRanges[e];let c=0;for(let u=l.start,f=l.start+l.count;u<f;u++){let d=u;a&&(d=a.getX(d)),h0.fromBufferAttribute(o,d),c=Math.max(c,i.center.distanceToSquared(h0))}i.radius=Math.sqrt(c),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,i=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(i,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(i,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||t<0||t>=this._geometryCount?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return t.start=n.start,t.count=n.count,t}raycast(e,t){const n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,a=this.geometry;Bs.material=this.material,Bs.geometry.index=a.index,Bs.geometry.attributes=a.attributes,Bs.geometry.boundingBox===null&&(Bs.geometry.boundingBox=new Or),Bs.geometry.boundingSphere===null&&(Bs.geometry.boundingSphere=new zs);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const c=n[o].geometryIndex,u=i[c];Bs.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(o,Bs.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Bs.geometry.boundingBox),this.getBoundingSphereAt(c,Bs.geometry.boundingSphere),Bs.raycast(e,B_);for(let f=0,d=B_.length;f<d;f++){const p=B_[f];p.object=this,p.batchId=o,t.push(p)}B_.length=0}Bs.material=null,Bs.geometry.index=null,Bs.geometry.attributes={},Bs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._drawInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._drawRanges,d=this.perObjectFrustumCulled,p=this._indirectTexture,v=p.image.data;d&&(E6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),jC.setFromProjectionMatrix(E6,e.coordinateSystem));let m=0;if(this.sortObjects){GC.copy(this.matrixWorld).invert(),h0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(GC),S6.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(GC);for(let b=0,E=l.length;b<E;b++)if(l[b].visible&&l[b].active){const B=l[b].geometryIndex;this.getMatrixAt(b,hA),this.getBoundingSphereAt(B,Of).applyMatrix4(hA);let S=!1;if(d&&(S=!jC.intersectsSphere(Of)),!S){const M=ahe.subVectors(Of.center,h0).dot(S6);WC.push(f[B],M,b)}}const g=WC.list,w=this.customSort;w===null?g.sort(s.transparent?nhe:the):w.call(this,g,n);for(let b=0,E=g.length;b<E;b++){const B=g[b];c[m]=B.start*o,u[m]=B.count,v[m]=B.index,m++}WC.reset()}else for(let g=0,w=l.length;g<w;g++)if(l[g].visible&&l[g].active){const b=l[g].geometryIndex;let E=!1;if(d&&(this.getMatrixAt(g,hA),this.getBoundingSphereAt(b,Of).applyMatrix4(hA),E=!jC.intersectsSphere(Of)),!E){const B=f[b];c[m]=B.start*o,u[m]=B.count,v[m]=g,m++}}p.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class Iu extends Sa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const s1=new ae,a1=new ae,B6=new at,d0=new Sh,M_=new zs,KC=new ae,M6=new ae;class Gm extends Tn{constructor(e=new Gn,t=new Iu){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)s1.fromBufferAttribute(t,i-1),a1.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=s1.distanceTo(a1);e.setAttribute("lineDistance",new xr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),M_.copy(n.boundingSphere),M_.applyMatrix4(i),M_.radius+=s,e.ray.intersectsSphere(M_)===!1)return;B6.copy(i).invert(),d0.copy(e.ray).applyMatrix4(B6);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,u=n.index,d=n.attributes.position;if(u!==null){const p=Math.max(0,a.start),v=Math.min(u.count,a.start+a.count);for(let m=p,g=v-1;m<g;m+=c){const w=u.getX(m),b=u.getX(m+1),E=C_(this,e,d0,l,w,b);E&&t.push(E)}if(this.isLineLoop){const m=u.getX(v-1),g=u.getX(p),w=C_(this,e,d0,l,m,g);w&&t.push(w)}}else{const p=Math.max(0,a.start),v=Math.min(d.count,a.start+a.count);for(let m=p,g=v-1;m<g;m+=c){const w=C_(this,e,d0,l,m,m+1);w&&t.push(w)}if(this.isLineLoop){const m=C_(this,e,d0,l,v-1,p);m&&t.push(m)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function C_(r,e,t,n,i,s){const a=r.geometry.attributes.position;if(s1.fromBufferAttribute(a,i),a1.fromBufferAttribute(a,s),t.distanceSqToSegment(s1,a1,KC,M6)>n)return;KC.applyMatrix4(r.matrixWorld);const l=e.ray.origin.distanceTo(KC);if(!(l<e.near||l>e.far))return{distance:l,point:M6.clone().applyMatrix4(r.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:r}}const C6=new ae,T6=new ae;class My extends Gm{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)C6.fromBufferAttribute(t,i),T6.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+C6.distanceTo(T6);e.setAttribute("lineDistance",new xr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class che extends Gm{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Fq extends Sa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const R6=new at,tL=new Sh,T_=new zs,R_=new ae;class uhe extends Tn{constructor(e=new Gn,t=new Fq){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),T_.copy(n.boundingSphere),T_.applyMatrix4(i),T_.radius+=s,e.ray.intersectsSphere(T_)===!1)return;R6.copy(i).invert(),tL.copy(e.ray).applyMatrix4(R6);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=n.index,f=n.attributes.position;if(c!==null){const d=Math.max(0,a.start),p=Math.min(c.count,a.start+a.count);for(let v=d,m=p;v<m;v++){const g=c.getX(v);R_.fromBufferAttribute(f,g),I6(R_,g,l,i,e,t,this)}}else{const d=Math.max(0,a.start),p=Math.min(f.count,a.start+a.count);for(let v=d,m=p;v<m;v++)R_.fromBufferAttribute(f,v),I6(R_,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function I6(r,e,t,n,i,s,a){const o=tL.distanceSqToPoint(r);if(o<t){const l=new ae;tL.closestPointToPoint(r,l),l.applyMatrix4(n);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class qC extends Cr{constructor(e,t,n,i,s,a,o,l,c,u,f,d){super(null,a,o,l,c,u,i,s,f,d),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ahe extends Cr{constructor(e,t,n,i,s,a,o,l,c){super(e,t,n,i,s,a,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class fhe{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,c;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),c=n[i]-a,c<0)o=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(s-1);const u=n[i],d=n[i+1]-u,p=(a-u)/d;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const a=this.getPoint(i),o=this.getPoint(s),l=t||(a.isVector2?new pt:new ae);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new ae,i=[],s=[],a=[],o=new ae,l=new at;for(let p=0;p<=e;p++){const v=p/e;i[p]=this.getTangentAt(v,new ae)}s[0]=new ae,a[0]=new ae;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(i[p-1],i[p]),o.length()>Number.EPSILON){o.normalize();const v=Math.acos(gi(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(o,v))}a[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(gi(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(p=-p);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],p*v)),a[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ME extends Gn{constructor(e=1,t=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],f=[],d=[],p=[];let v=0;const m=[],g=n/2;let w=0;b(),a===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new xr(f,3)),this.setAttribute("normal",new xr(d,3)),this.setAttribute("uv",new xr(p,2));function b(){const B=new ae,S=new ae;let M=0;const I=(t-e)/n;for(let k=0;k<=s;k++){const O=[],C=k/s,P=C*(t-e)+e;for(let D=0;D<=i;D++){const F=D/i,_=F*l+o,R=Math.sin(_),L=Math.cos(_);S.x=P*R,S.y=-C*n+g,S.z=P*L,f.push(S.x,S.y,S.z),B.set(R,I,L).normalize(),d.push(B.x,B.y,B.z),p.push(F,1-C),O.push(v++)}m.push(O)}for(let k=0;k<i;k++)for(let O=0;O<s;O++){const C=m[O][k],P=m[O+1][k],D=m[O+1][k+1],F=m[O][k+1];e>0&&(u.push(C,P,F),M+=3),t>0&&(u.push(P,D,F),M+=3)}c.addGroup(w,M,0),w+=M}function E(B){const S=v,M=new pt,I=new ae;let k=0;const O=B===!0?e:t,C=B===!0?1:-1;for(let D=1;D<=i;D++)f.push(0,g*C,0),d.push(0,C,0),p.push(.5,.5),v++;const P=v;for(let D=0;D<=i;D++){const _=D/i*l+o,R=Math.cos(_),L=Math.sin(_);I.x=O*L,I.y=g*C,I.z=O*R,f.push(I.x,I.y,I.z),d.push(0,C,0),M.x=R*.5+.5,M.y=L*.5*C+.5,p.push(M.x,M.y),v++}for(let D=0;D<i;D++){const F=S+D,_=P+D;B===!0?u.push(_,_+1,F):u.push(_+1,_,F),k+=3}c.addGroup(w,k,B===!0?1:2),w+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ME(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const hhe={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=Lq(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,f,d,p;if(n&&(s=vhe(r,e,s,t)),r.length>80*t){o=c=r[0],l=u=r[1];for(let v=t;v<i;v+=t)f=r[v],d=r[v+1],f<o&&(o=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);p=Math.max(c-o,u-l),p=p!==0?32767/p:0}return $v(s,a,t,o,l,p,0),a}};function Lq(r,e,t,n,i){let s,a;if(i===The(r,e,t,n)>0)for(s=e;s<t;s+=n)a=U6(s,r[s],r[s+1],a);else for(s=t-n;s>=e;s-=n)a=U6(s,r[s],r[s+1],a);return a&&CE(a,a.next)&&(ty(a),a=a.next),a}function dh(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(CE(t,t.next)||Vr(t.prev,t,t.next)===0)){if(ty(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function $v(r,e,t,n,i,s,a){if(!r)return;!a&&s&&bhe(r,n,i,s);let o=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,s?phe(r,n,i,s):dhe(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),ty(r),r=c.next,o=c.next;continue}if(r=c,r===o){a?a===1?(r=mhe(dh(r),e,t),$v(r,e,t,n,i,s,2)):a===2&&ghe(r,e,t,n,i,s):$v(dh(r),e,t,n,i,s,1);break}}}function dhe(r){const e=r.prev,t=r,n=r.next;if(Vr(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,o=e.y,l=t.y,c=n.y,u=i<s?i<a?i:a:s<a?s:a,f=o<l?o<c?o:c:l<c?l:c,d=i>s?i>a?i:a:s>a?s:a,p=o>l?o>c?o:c:l>c?l:c;let v=n.next;for(;v!==e;){if(v.x>=u&&v.x<=d&&v.y>=f&&v.y<=p&&Gp(i,o,s,l,a,c,v.x,v.y)&&Vr(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function phe(r,e,t,n){const i=r.prev,s=r,a=r.next;if(Vr(i,s,a)>=0)return!1;const o=i.x,l=s.x,c=a.x,u=i.y,f=s.y,d=a.y,p=o<l?o<c?o:c:l<c?l:c,v=u<f?u<d?u:d:f<d?f:d,m=o>l?o>c?o:c:l>c?l:c,g=u>f?u>d?u:d:f>d?f:d,w=nL(p,v,e,t,n),b=nL(m,g,e,t,n);let E=r.prevZ,B=r.nextZ;for(;E&&E.z>=w&&B&&B.z<=b;){if(E.x>=p&&E.x<=m&&E.y>=v&&E.y<=g&&E!==i&&E!==a&&Gp(o,u,l,f,c,d,E.x,E.y)&&Vr(E.prev,E,E.next)>=0||(E=E.prevZ,B.x>=p&&B.x<=m&&B.y>=v&&B.y<=g&&B!==i&&B!==a&&Gp(o,u,l,f,c,d,B.x,B.y)&&Vr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;E&&E.z>=w;){if(E.x>=p&&E.x<=m&&E.y>=v&&E.y<=g&&E!==i&&E!==a&&Gp(o,u,l,f,c,d,E.x,E.y)&&Vr(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;B&&B.z<=b;){if(B.x>=p&&B.x<=m&&B.y>=v&&B.y<=g&&B!==i&&B!==a&&Gp(o,u,l,f,c,d,B.x,B.y)&&Vr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function mhe(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!CE(i,s)&&Dq(i,n,n.next,s)&&ey(i,s)&&ey(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),ty(n),ty(n.next),n=r=s),n=n.next}while(n!==r);return dh(n)}function ghe(r,e,t,n,i,s){let a=r;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Bhe(a,o)){let l=Oq(a,o);a=dh(a,a.next),l=dh(l,l.next),$v(a,e,t,n,i,s,0),$v(l,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function vhe(r,e,t,n){const i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:r.length,c=Lq(r,o,l,n,!1),c===c.next&&(c.steiner=!0),i.push(She(c));for(i.sort(yhe),s=0;s<i.length;s++)t=whe(i[s],t);return t}function yhe(r,e){return r.x-e.x}function whe(r,e){const t=_he(r,e);if(!t)return e;const n=Oq(t,r);return dh(n,n.next),dh(t,t.next)}function _he(r,e){let t=e,n=-1/0,i;const s=r.x,a=r.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const d=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>n&&(n=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const o=i,l=i.x,c=i.y;let u=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Gp(a<c?s:n,a,l,c,a<c?n:s,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(s-t.x),ey(t,r)&&(f<u||f===u&&(t.x>i.x||t.x===i.x&&xhe(i,t)))&&(i=t,u=f)),t=t.next;while(t!==o);return i}function xhe(r,e){return Vr(r.prev,r,e.prev)<0&&Vr(e.next,r,r.next)<0}function bhe(r,e,t,n){let i=r;do i.z===0&&(i.z=nL(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,Ehe(i)}function Ehe(r){let e,t,n,i,s,a,o,l,c=1;do{for(t=r,r=null,s=null,a=0;t;){for(a++,n=t,o=0,e=0;e<c&&(o++,n=n.nextZ,!!n);e++);for(l=c;o>0||l>0&&n;)o!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,c*=2}while(a>1);return r}function nL(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function She(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Gp(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function Bhe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!Mhe(r,e)&&(ey(r,e)&&ey(e,r)&&Che(r,e)&&(Vr(r.prev,r,e.prev)||Vr(r,e.prev,e))||CE(r,e)&&Vr(r.prev,r,r.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function CE(r,e){return r.x===e.x&&r.y===e.y}function Dq(r,e,t,n){const i=U_(Vr(r,e,t)),s=U_(Vr(r,e,n)),a=U_(Vr(t,n,r)),o=U_(Vr(t,n,e));return!!(i!==s&&a!==o||i===0&&I_(r,t,e)||s===0&&I_(r,n,e)||a===0&&I_(t,r,n)||o===0&&I_(t,e,n))}function I_(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function U_(r){return r>0?1:r<0?-1:0}function Mhe(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&Dq(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function ey(r,e){return Vr(r.prev,r,r.next)<0?Vr(r,e,r.next)>=0&&Vr(r,r.prev,e)>=0:Vr(r,e,r.prev)<0||Vr(r,r.next,e)<0}function Che(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function Oq(r,e){const t=new rL(r.i,r.x,r.y),n=new rL(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function U6(r,e,t,n){const i=new rL(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function ty(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function rL(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function The(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}class vO{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return vO.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];F6(e),L6(n,e);let a=e.length;t.forEach(F6);for(let l=0;l<t.length;l++)i.push(a),a+=t[l].length,L6(n,t[l]);const o=hhe.triangulate(n,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function F6(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function L6(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class yO extends Gn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let c=0;const u=[],f=new ae,d=new ae,p=[],v=[],m=[],g=[];for(let w=0;w<=n;w++){const b=[],E=w/n;let B=0;w===0&&a===0?B=.5/t:w===n&&l===Math.PI&&(B=-.5/t);for(let S=0;S<=t;S++){const M=S/t;f.x=-e*Math.cos(i+M*s)*Math.sin(a+E*o),f.y=e*Math.cos(a+E*o),f.z=e*Math.sin(i+M*s)*Math.sin(a+E*o),v.push(f.x,f.y,f.z),d.copy(f).normalize(),m.push(d.x,d.y,d.z),g.push(M+B,1-E),b.push(c++)}u.push(b)}for(let w=0;w<n;w++)for(let b=0;b<t;b++){const E=u[w][b+1],B=u[w][b],S=u[w+1][b],M=u[w+1][b+1];(w!==0||a>0)&&p.push(E,B,M),(w!==n-1||l<Math.PI)&&p.push(B,S,M)}this.setIndex(p),this.setAttribute("position",new xr(v,3)),this.setAttribute("normal",new xr(m,3)),this.setAttribute("uv",new xr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yO(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Rm extends Sa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zm,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pc extends Rm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class YC extends Sa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zm,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=yE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rhe extends Sa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zm,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ihe extends Sa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=zm,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Jr,this.combine=yE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function F_(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Uhe(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Fhe(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function D6(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)i[a++]=r[o+l]}return i}function Nq(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=r[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=r[i++];while(s!==void 0)}class Cy{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let a;n:{r:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=i,i=t[++n],e<i)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Lhe extends Cy{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Qp,endingEnd:Qp}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case zp:s=e,o=2*t-n;break;case $b:s=i.length-2,o=t+i[s]-i[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case zp:a=e,l=2*n-t;break;case $b:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=t}const c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,p=this._weightNext,v=(n-t)/(i-t),m=v*v,g=m*v,w=-d*g+2*d*m-d*v,b=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*v+1,E=(-1-p)*g+(1.5+p)*m+.5*v,B=p*g-p*m;for(let S=0;S!==o;++S)s[S]=w*a[u+S]+b*a[c+S]+E*a[l+S]+B*a[f+S];return s}}class Pq extends Cy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(n-t)/(i-t),f=1-u;for(let d=0;d!==o;++d)s[d]=a[c+d]*f+a[l+d]*u;return s}}class Dhe extends Cy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class mc{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=F_(t,this.TimeBufferType),this.values=F_(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:F_(e.times,Array),values:F_(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Dhe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Pq(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lhe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bm:t=this.InterpolantFactoryMethodDiscrete;break;case Mm:t=this.InterpolantFactoryMethodLinear;break;case hC:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bm;case this.InterpolantFactoryMethodLinear:return Mm;case this.InterpolantFactoryMethodSmooth:return hC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&Uhe(i))for(let o=0,l=i.length;o!==l;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===hC,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(i)l=!0;else{const f=o*n,d=f-n,p=f+n;for(let v=0;v!==n;++v){const m=t[f+v];if(m!==t[d+v]||m!==t[p+v]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const f=o*n,d=a*n;for(let p=0;p!==n;++p)t[d+p]=t[f+p]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,c=0;c!==n;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}mc.prototype.TimeBufferType=Float32Array;mc.prototype.ValueBufferType=Float32Array;mc.prototype.DefaultInterpolation=Mm;class jm extends mc{constructor(e,t,n){super(e,t,n)}}jm.prototype.ValueTypeName="bool";jm.prototype.ValueBufferType=Array;jm.prototype.DefaultInterpolation=Bm;jm.prototype.InterpolantFactoryMethodLinear=void 0;jm.prototype.InterpolantFactoryMethodSmooth=void 0;class kq extends mc{}kq.prototype.ValueTypeName="color";class ph extends mc{}ph.prototype.ValueTypeName="number";class Ohe extends Cy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(i-t);let c=e*o;for(let u=c+o;c!==u;c+=4)Rt.slerpFlat(s,0,a,c-o,a,c,l);return s}}class uc extends mc{InterpolantFactoryMethodLinear(e){return new Ohe(this.times,this.values,this.getValueSize(),e)}}uc.prototype.ValueTypeName="quaternion";uc.prototype.InterpolantFactoryMethodSmooth=void 0;class Wm extends mc{constructor(e,t,n){super(e,t,n)}}Wm.prototype.ValueTypeName="string";Wm.prototype.ValueBufferType=Array;Wm.prototype.DefaultInterpolation=Bm;Wm.prototype.InterpolantFactoryMethodLinear=void 0;Wm.prototype.InterpolantFactoryMethodSmooth=void 0;class Su extends mc{}Su.prototype.ValueTypeName="vector";class mh{constructor(e="",t=-1,n=[],i=cO){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=vl(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(Phe(n[a]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(mc.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=Fhe(l);l=D6(l,1,u),c=D6(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new ph(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let d=i[f];d||(i[f]=d=[]),d.push(c)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(f,d,p,v,m){if(p.length!==0){const g=[],w=[];Nq(p,g,w,v),g.length!==0&&m.push(new f(d,g,w))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const d=c[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let m=0;m<d[v].morphTargets.length;m++)p[d[v].morphTargets[m]]=-1;for(const m in p){const g=[],w=[];for(let b=0;b!==d[v].morphTargets.length;++b){const E=d[v];g.push(E.time),w.push(E.morphTarget===m?1:0)}i.push(new ph(".morphTargetInfluence["+m+"]",g,w))}l=p.length*a}else{const p=".bones["+t[f].name+"]";n(Su,p+".position",d,"pos",i),n(uc,p+".quaternion",d,"rot",i),n(Su,p+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Nhe(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ph;case"vector":case"vector2":case"vector3":case"vector4":return Su;case"color":return kq;case"quaternion":return uc;case"bool":case"boolean":return jm;case"string":return Wm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function Phe(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Nhe(r.type);if(r.times===void 0){const t=[],n=[];Nq(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const OA={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Hq{constructor(e,t,n){const i=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){o++,s===!1&&i.onStart!==void 0&&i.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,i.onProgress!==void 0&&i.onProgress(u,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,d=c.length;f<d;f+=2){const p=c[f],v=c[f+1];if(p.global&&(p.lastIndex=0),p.test(u))return v}return null}}}const khe=new Hq;class Ac{constructor(e){this.manager=e!==void 0?e:khe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ac.DEFAULT_MATERIAL_NAME="__DEFAULT";const Qc={};class Hhe extends Error{constructor(e,t){super(e),this.response=t}}class TE extends Ac{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=OA.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Qc[e]!==void 0){Qc[e].push({onLoad:t,onProgress:n,onError:i});return}Qc[e]=[],Qc[e].push({onLoad:t,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Qc[e],f=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=d?parseInt(d):0,v=p!==0;let m=0;const g=new ReadableStream({start(w){b();function b(){f.read().then(({done:E,value:B})=>{if(E)w.close();else{m+=B.byteLength;const S=new ProgressEvent("progress",{lengthComputable:v,loaded:m,total:p});for(let M=0,I=u.length;M<I;M++){const k=u[M];k.onProgress&&k.onProgress(S)}w.enqueue(B),b()}},E=>{w.error(E)})}}});return new Response(g)}else throw new Hhe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),d=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(d);return c.arrayBuffer().then(v=>p.decode(v))}}}).then(c=>{OA.add(e,c);const u=Qc[e];delete Qc[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Qc[e];if(u===void 0)throw this.manager.itemError(e),c;delete Qc[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Qq extends Ac{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=OA.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Xv("img");function l(){u(),OA.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class Qhe extends Ac{constructor(e){super(e)}load(e,t,n,i){const s=this,a=new lh,o=new TE(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Ja,a.wrapT=c.wrapT!==void 0?c.wrapT:Ja,a.magFilter=c.magFilter!==void 0?c.magFilter:Hi,a.minFilter=c.minFilter!==void 0?c.minFilter:Hi,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(a.colorSpace=c.colorSpace),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=ml),c.mipmapCount===1&&(a.minFilter=Hi),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c)},n,i),a}}class cf extends Ac{constructor(e){super(e)}load(e,t,n,i){const s=new Cr,a=new Qq(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class RE extends Tn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const XC=new at,O6=new ae,N6=new ae;class wO{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pt(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EE,this._frameExtents=new pt(1,1),this._viewportCount=1,this._viewports=[new Cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;O6.setFromMatrixPosition(e.matrixWorld),t.position.copy(O6),N6.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(N6),t.updateMatrixWorld(),XC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(XC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(XC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zhe extends wO{constructor(){super(new Pi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Cm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zq extends RE{constructor(e,t,n=0,i=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tn.DEFAULT_UP),this.updateMatrix(),this.target=new Tn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new zhe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const P6=new at,p0=new ae,ZC=new ae;class Vhe extends wO{constructor(){super(new Pi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pt(4,2),this._viewportCount=6,this._viewports=[new Cn(2,1,1,1),new Cn(0,1,1,1),new Cn(3,1,1,1),new Cn(1,1,1,1),new Cn(3,0,1,1),new Cn(1,0,1,1)],this._cubeDirections=[new ae(1,0,0),new ae(-1,0,0),new ae(0,0,1),new ae(0,0,-1),new ae(0,1,0),new ae(0,-1,0)],this._cubeUps=[new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,1,0),new ae(0,0,1),new ae(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),p0.setFromMatrixPosition(e.matrixWorld),n.position.copy(p0),ZC.copy(n.position),ZC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ZC),n.updateMatrixWorld(),i.makeTranslation(-p0.x,-p0.y,-p0.z),P6.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(P6)}}class iL extends RE{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Vhe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ghe extends wO{constructor(){super(new Sy(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _O extends RE{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tn.DEFAULT_UP),this.updateMatrix(),this.target=new Tn,this.shadow=new Ghe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Vq extends RE{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class am{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jhe extends Ac{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=OA.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return OA.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),OA.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});OA.add(e,l),s.manager.itemStart(e)}}class IE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=k6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=k6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function k6(){return performance.now()}class Whe{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,a;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,a=i;s!==a;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,i){Rt.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const a=this._workIndex*s;Rt.multiplyQuaternionsFlat(e,a,e,t,e,n),Rt.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,n,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*i}}_lerpAdditive(e,t,n,i,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*i}}}const xO="\\[\\]\\.:\\/",Khe=new RegExp("["+xO+"]","g"),bO="[^"+xO+"]",qhe="[^"+xO.replace("\\.","")+"]",Yhe=/((?:WC+[\/:])*)/.source.replace("WC",bO),Xhe=/(WCOD+)?/.source.replace("WCOD",qhe),Zhe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bO),Jhe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bO),$he=new RegExp("^"+Yhe+Xhe+Zhe+Jhe+"$"),ede=["material","materials","bones","map"];class tde{constructor(e,t,n){const i=n||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class dn{constructor(e,t,n){this.path=t,this.parsedPath=n||dn.parseTrackName(t),this.node=dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dn.Composite(e,t,n):new dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Khe,"")}static parseTrackName(e){const t=$he.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);ede.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[i];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dn.Composite=tde;dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayElement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement,dn.prototype._setValue_arrayElement_setNeedsUpdate,dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray,dn.prototype._setValue_fromArray_setNeedsUpdate,dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nde{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Qp,endingEnd:Qp};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=soe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case ooe:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case cO:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===aoe;if(e===0)return s===-1?i:a&&(s&1)===1?t-i:i;if(n===ioe){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=zp,i.endingEnd=zp):(e?i.endingStart=this.zeroSlopeAtStart?zp:Qp:i.endingStart=$b,t?i.endingEnd=this.zeroSlopeAtEnd?zp:Qp:i.endingEnd=$b)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const rde=new Float32Array(1);class ide extends lf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const d=i[f],p=d.name;let v=u[p];if(v!==void 0)++v.referenceCount,a[f]=v;else{if(v=a[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,p));continue}const m=t&&t._propertyBindings[f].binding.parsedPath;v=new Whe(dn.create(n,p,m),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,p),a[f]=v}o[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[t];a===void 0&&(a={},i[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Pq(new Float32Array(2),new Float32Array(2),1,rde),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let a=typeof e=="string"?mh.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(n===void 0&&(a!==null?n=a.blendMode:n=cO),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===n)return f;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new nde(this,a,t,n);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?mh.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class EO{constructor(e){this.value=e}clone(){return new EO(this.value.clone===void 0?this.value:this.value.clone())}}class H6{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Q6=new at;class Gq{constructor(e,t,n=0,i=1/0){this.ray=new Sh(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new hO,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Q6.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Q6),this}intersectObject(e,t=!0,n=[]){return sL(e,this,n,t),n.sort(z6),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)sL(e[i],this,n,t);return n.sort(z6),n}}function z6(r,e){return r.distance-e.distance}function sL(r,e,t,n){let i=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const s=r.children;for(let a=0,o=s.length;a<o;a++)sL(s[a],e,t,!0)}}class V6{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(gi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const G6=new ae,L_=new ae;class vu{constructor(e=new ae,t=new ae){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){G6.subVectors(e,this.start),L_.subVectors(this.end,this.start);const n=L_.dot(L_);let s=L_.dot(G6)/n;return t&&(s=gi(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class sde extends My{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Gn;i.setAttribute("position",new xr(t,3)),i.setAttribute("color",new xr(n,3));const s=new Iu({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new st,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ade extends lf{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:bu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=bu);const j6={type:"change"},SO={type:"start"},jq={type:"end"},D_=new Sh,W6=new Wl,ode=Math.cos(70*sn.DEG2RAD),Oi=new ae,Aa=2*Math.PI,pr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},JC=1e-6;class lde extends ade{constructor(e,t=null){super(e,t),this.state=pr.NONE,this.enabled=!0,this.target=new ae,this.cursor=new ae,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:nm.ROTATE,MIDDLE:nm.DOLLY,RIGHT:nm.PAN},this.touches={ONE:kp.ROTATE,TWO:kp.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ae,this._lastQuaternion=new Rt,this._lastTargetPosition=new ae,this._quat=new Rt().setFromUnitVectors(e.up,new ae(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new V6,this._sphericalDelta=new V6,this._scale=1,this._panOffset=new ae,this._rotateStart=new pt,this._rotateEnd=new pt,this._rotateDelta=new pt,this._panStart=new pt,this._panEnd=new pt,this._panDelta=new pt,this._dollyStart=new pt,this._dollyEnd=new pt,this._dollyDelta=new pt,this._dollyDirection=new ae,this._mouse=new pt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ude.bind(this),this._onPointerDown=cde.bind(this),this._onPointerUp=Ade.bind(this),this._onContextMenu=vde.bind(this),this._onMouseWheel=dde.bind(this),this._onKeyDown=pde.bind(this),this._onTouchStart=mde.bind(this),this._onTouchMove=gde.bind(this),this._onMouseDown=fde.bind(this),this._onMouseMove=hde.bind(this),this._interceptControlDown=yde.bind(this),this._interceptControlUp=wde.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(j6),this.update(),this.state=pr.NONE}update(e=null){const t=this.object.position;Oi.copy(t).sub(this.target),Oi.applyQuaternion(this._quat),this._spherical.setFromVector3(Oi),this.autoRotate&&this.state===pr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=Aa:n>Math.PI&&(n-=Aa),i<-Math.PI?i+=Aa:i>Math.PI&&(i-=Aa),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Oi.setFromSpherical(this._spherical),Oi.applyQuaternion(this._quatInverse),t.copy(this.target).add(Oi),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Oi.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new ae(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new ae(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=Oi.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(D_.origin.copy(this.object.position),D_.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(D_.direction))<ode?this.object.lookAt(this.target):(W6.setFromNormalAndCoplanarPoint(this.object.up,this.target),D_.intersectPlane(W6,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>JC||8*(1-this._lastQuaternion.dot(this.object.quaternion))>JC||this._lastTargetPosition.distanceToSquared(this.target)>JC?(this.dispatchEvent(j6),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Aa/60*this.autoRotateSpeed*e:Aa/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Oi.setFromMatrixColumn(t,0),Oi.multiplyScalar(-e),this._panOffset.add(Oi)}_panUp(e,t){this.screenSpacePanning===!0?Oi.setFromMatrixColumn(t,1):(Oi.setFromMatrixColumn(t,0),Oi.crossVectors(this.object.up,Oi)),Oi.multiplyScalar(e),this._panOffset.add(Oi)}_pan(e,t){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Oi.copy(i).sub(this.target);let s=Oi.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*t*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,s=t-n.top,a=n.width,o=n.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Aa*this._rotateDelta.x/t.clientHeight),this._rotateUp(Aa*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(Aa*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-Aa*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(Aa*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-Aa*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(n*n+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Aa*this._rotateDelta.x/t.clientHeight),this._rotateUp(Aa*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),n=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new pt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function cde(r){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(r)&&(this._addPointer(r),r.pointerType==="touch"?this._onTouchStart(r):this._onMouseDown(r)))}function ude(r){this.enabled!==!1&&(r.pointerType==="touch"?this._onTouchMove(r):this._onMouseMove(r))}function Ade(r){switch(this._removePointer(r),this._pointers.length){case 0:this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(jq),this.state=pr.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function fde(r){let e;switch(r.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case nm.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(r),this.state=pr.DOLLY;break;case nm.ROTATE:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=pr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=pr.ROTATE}break;case nm.PAN:if(r.ctrlKey||r.metaKey||r.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(r),this.state=pr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(r),this.state=pr.PAN}break;default:this.state=pr.NONE}this.state!==pr.NONE&&this.dispatchEvent(SO)}function hde(r){switch(this.state){case pr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(r);break;case pr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(r);break;case pr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(r);break}}function dde(r){this.enabled===!1||this.enableZoom===!1||this.state!==pr.NONE||(r.preventDefault(),this.dispatchEvent(SO),this._handleMouseWheel(this._customWheelEvent(r)),this.dispatchEvent(jq))}function pde(r){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(r)}function mde(r){switch(this._trackPointer(r),this._pointers.length){case 1:switch(this.touches.ONE){case kp.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(r),this.state=pr.TOUCH_ROTATE;break;case kp.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(r),this.state=pr.TOUCH_PAN;break;default:this.state=pr.NONE}break;case 2:switch(this.touches.TWO){case kp.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(r),this.state=pr.TOUCH_DOLLY_PAN;break;case kp.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(r),this.state=pr.TOUCH_DOLLY_ROTATE;break;default:this.state=pr.NONE}break;default:this.state=pr.NONE}this.state!==pr.NONE&&this.dispatchEvent(SO)}function gde(r){switch(this._trackPointer(r),this.state){case pr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(r),this.update();break;case pr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(r),this.update();break;case pr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(r),this.update();break;case pr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(r),this.update();break;default:this.state=pr.NONE}}function vde(r){this.enabled!==!1&&r.preventDefault()}function yde(r){r.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function wde(r){r.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Wq(r){let e,t,n,i=-1,s=0;for(let c=0;c<r.length;++c){const u=r[c];if(e===void 0&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=u.itemSize),t!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=u.normalized),n!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(i===-1&&(i=u.gpuType),i!==u.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=u.count*t}const a=new e(s),o=new Lt(a,t,n);let l=0;for(let c=0;c<r.length;++c){const u=r[c];if(u.isInterleavedBufferAttribute){const f=l/t;for(let d=0,p=u.count;d<p;d++)for(let v=0;v<t;v++){const m=u.getComponent(d,v);o.setComponent(d+f,v,m)}}else a.set(u.array,l);l+=u.count*t}return i!==void 0&&(o.gpuType=i),o}function K6(r,e){if(e===loe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===JF||e===yq){let t=r.getIndex();if(t===null){const a=[],o=r.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(e===JF)for(let a=1;a<=n;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}class Kq extends Ac{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Sde(t)}),this.register(function(t){return new Bde(t)}),this.register(function(t){return new Dde(t)}),this.register(function(t){return new Ode(t)}),this.register(function(t){return new Nde(t)}),this.register(function(t){return new Cde(t)}),this.register(function(t){return new Tde(t)}),this.register(function(t){return new Rde(t)}),this.register(function(t){return new Ide(t)}),this.register(function(t){return new Ede(t)}),this.register(function(t){return new Ude(t)}),this.register(function(t){return new Mde(t)}),this.register(function(t){return new Lde(t)}),this.register(function(t){return new Fde(t)}),this.register(function(t){return new xde(t)}),this.register(function(t){return new Pde(t)}),this.register(function(t){return new kde(t)})}load(e,t,n,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=am.extractUrlBase(e);a=am.resolveURL(c,this.path)}else a=am.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new TE(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const a={},o={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===qq){try{a[Mn.KHR_BINARY_GLTF]=new Hde(e)}catch(f){i&&i(f);return}s=JSON.parse(a[Mn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new $de(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](c);f.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[f.name]=f,a[f.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const f=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(f){case Mn.KHR_MATERIALS_UNLIT:a[f]=new bde;break;case Mn.KHR_DRACO_MESH_COMPRESSION:a[f]=new Qde(s,this.dracoLoader);break;case Mn.KHR_TEXTURE_TRANSFORM:a[f]=new zde;break;case Mn.KHR_MESH_QUANTIZATION:a[f]=new Vde;break;default:d.indexOf(f)>=0&&o[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function _de(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Mn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class xde{constructor(e){this.parser=e,this.name=Mn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new st(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Fi);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new _O(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new iL(u),c.distance=f;break;case"spot":c=new zq(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ru(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return n._getNodeRef(t.cache,o,l)})}}let bde=class{constructor(){this.name=Mn.KHR_MATERIALS_UNLIT}getMaterialType(){return ya}extendParams(e,t,n){const i=[];e.color=new st(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Fi),e.opacity=a[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,Sn))}return Promise.all(i)}},Ede=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},Sde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pt(o,o)}return Promise.all(s)}},Bde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},Mde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}},Cde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new st(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Fi)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Sn)),a.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}},Tde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}},Rde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new st().setRGB(o[0],o[1],o[2],Fi),Promise.all(s)}},Ide=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},Ude=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new st().setRGB(o[0],o[1],o[2],Fi),a.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,Sn)),Promise.all(s)}},Fde=class{constructor(e){this.parser=e,this.name=Mn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}},Lde=class{constructor(e){this.parser=e,this.name=Mn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:pc}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}};class Dde{constructor(e){this.parser=e,this.name=Mn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Ode{constructor(e){this.parser=e,this.name=Mn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Nde{constructor(e){this.parser=e,this.name=Mn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const c=n.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Pde{constructor(e){this.name=Mn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=i.byteOffset||0,c=i.byteLength||0,u=i.count,f=i.byteStride,d=new Uint8Array(o,l,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,f,d,i.mode,i.filter).then(function(p){return p.buffer}):a.ready.then(function(){const p=new ArrayBuffer(u*f);return a.decodeGltfBuffer(new Uint8Array(p),u,f,d,i.mode,i.filter),p})})}else return null}}let kde=class{constructor(e){this.name=Mn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const c of i.primitives)if(c.mode!==Bo.TRIANGLES&&c.mode!==Bo.TRIANGLE_STRIP&&c.mode!==Bo.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=n.extensions[this.name].attributes,o=[],l={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(u=>(l[c]=u,l[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const u=c.pop(),f=u.isGroup?u.children:[u],d=c[0].count,p=[];for(const v of f){const m=new at,g=new ae,w=new Rt,b=new ae(1,1,1),E=new BE(v.geometry,v.material,d);for(let B=0;B<d;B++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,B),l.ROTATION&&w.fromBufferAttribute(l.ROTATION,B),l.SCALE&&b.fromBufferAttribute(l.SCALE,B),E.setMatrixAt(B,m.compose(g,w,b));for(const B in l)if(B==="_COLOR_0"){const S=l[B];E.instanceColor=new Jv(S.array,S.itemSize,S.normalized)}else B!=="TRANSLATION"&&B!=="ROTATION"&&B!=="SCALE"&&v.geometry.setAttribute(B,l[B]);Tn.prototype.copy.call(E,v),this.parser.assignFinalMaterial(E),p.push(E)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}};const qq="glTF",m0=12,q6={JSON:1313821514,BIN:5130562};class Hde{constructor(e){this.name=Mn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,m0),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==qq)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-m0,s=new DataView(e,m0);let a=0;for(;a<i;){const o=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===q6.JSON){const c=new Uint8Array(e,m0+a,o);this.content=n.decode(c)}else if(l===q6.BIN){const c=m0+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Qde{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Mn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const f=aL[u]||u.toLowerCase();o[f]=a[u]}for(const u in e.attributes){const f=aL[u]||u.toLowerCase();if(a[u]!==void 0){const d=n.accessors[e.attributes[u]],p=om[d.componentType];c[f]=p.name,l[f]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f,d){i.decodeDracoFile(u,function(p){for(const v in p.attributes){const m=p.attributes[v],g=l[v];g!==void 0&&(m.normalized=g)}f(p)},o,c,Fi,d)})})}}class zde{constructor(){this.name=Mn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Vde{constructor(){this.name=Mn.KHR_MESH_QUANTIZATION}}class Yq extends Cy{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=i-t,f=(n-t)/u,d=f*f,p=d*f,v=e*c,m=v-c,g=-2*p+3*d,w=p-d,b=1-g,E=w-d+f;for(let B=0;B!==o;B++){const S=a[m+B+o],M=a[m+B+l]*u,I=a[v+B+o],k=a[v+B]*u;s[B]=b*S+E*M+g*I+w*k}return s}}const Gde=new Rt;class jde extends Yq{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return Gde.fromArray(s).normalize().toArray(s),s}}const Bo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},om={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Y6={9728:ts,9729:Hi,9984:nO,9985:xv,9986:Hp,9987:ml},X6={33071:Ja,33648:qv,10497:ao},$C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},aL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},dA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Wde={CUBICSPLINE:void 0,LINEAR:Mm,STEP:Bm},eT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Kde(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new Rm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:so})),r.DefaultMaterial}function Nf(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function ru(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function qde(r,e,t){let n=!1,i=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const f=e[c];if(f.POSITION!==void 0&&(n=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];if(n){const d=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):r.attributes.position;a.push(d)}if(i){const d=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):r.attributes.normal;o.push(d)}if(s){const d=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):r.attributes.color;l.push(d)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],d=c[2];return n&&(r.morphAttributes.position=u),i&&(r.morphAttributes.normal=f),s&&(r.morphAttributes.color=d),r.morphTargetsRelative=!0,r})}function Yde(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Xde(r){let e;const t=r.extensions&&r.extensions[Mn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+tT(t.attributes):e=r.indices+":"+tT(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+tT(r.targets[n]);return e}function tT(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function oL(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Zde(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Jde=new at;class $de{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new _de,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,s=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);i=n&&l?parseInt(l[1],10):-1,s=o.indexOf("Firefox")>-1,a=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&i<17||s&&a<98?this.textureLoader=new cf(this.options.manager):this.textureLoader=new jhe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new TE(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return Nf(s,o,i),ru(o,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const a=t[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Mn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){n.load(am.resolveURL(t.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=$C[i.type],o=om[i.componentType],l=i.normalized===!0,c=new o(i.count*a);return Promise.resolve(new Lt(c,a,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=$C[i.type],c=om[i.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,d=i.byteOffset||0,p=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let m,g;if(p&&p!==f){const w=Math.floor(d/p),b="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+w+":"+i.count;let E=t.cache.get(b);E||(m=new c(o,w*p,i.count*p/u),E=new Zfe(m,p/u),t.cache.add(b,E)),g=new gO(E,l,d%p/u,v)}else o===null?m=new c(i.count*l):m=new c(o,d,i.count*l),g=new Lt(m,l,v);if(i.sparse!==void 0){const w=$C.SCALAR,b=om[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,B=i.sparse.values.byteOffset||0,S=new b(a[1],E,i.sparse.count*w),M=new c(a[2],B,i.sparse.count*l);o!==null&&(g=new Lt(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let I=0,k=S.length;I<k;I++){const O=S[I];if(g.setX(O,M[I*l]),l>=2&&g.setY(O,M[I*l+1]),l>=3&&g.setZ(O,M[I*l+2]),l>=4&&g.setW(O,M[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=v}return g})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=n.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,n){const i=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",u.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(u.name=o.uri);const d=(s.samplers||{})[a.sampler]||{};return u.magFilter=Y6[d.magFilter]||Hi,u.minFilter=Y6[d.minFilter]||ml,u.wrapS=X6[d.wrapS]||ao,u.wrapT=X6[d.wrapT]||ao,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(f){c=!0;const d=new Blob([f],{type:a.mimeType});return l=o.createObjectURL(d),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(f){return new Promise(function(d,p){let v=d;t.isImageBitmapLoader===!0&&(v=function(m){const g=new Cr(m);g.needsUpdate=!0,d(g)}),t.load(am.resolveURL(f,s.path),v,void 0,p)})}).then(function(f){return c===!0&&o.revokeObjectURL(l),ru(f,a),f.userData.mimeType=a.mimeType||Zde(a.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=u,u}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[Mn.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Mn.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Mn.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(a.colorSpace=i),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new Fq,Sa.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new Iu,Sa.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(i||s||a){let o="ClonedMaterial:"+n.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Rm}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[Mn.KHR_MATERIALS_UNLIT]){const f=i[Mn.KHR_MATERIALS_UNLIT];a=f.getMaterialType(),c.push(f.extendParams(o,s,t))}else{const f=s.pbrMetallicRoughness||{};if(o.color=new st(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){const d=f.baseColorFactor;o.color.setRGB(d[0],d[1],d[2],Fi),o.opacity=d[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",f.baseColorTexture,Sn)),o.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,o.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Ps);const u=s.alphaMode||eT.OPAQUE;if(u===eT.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===eT.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==ya&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new pt(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;o.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&a!==ya&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==ya){const f=s.emissiveFactor;o.emissive=new st().setRGB(f[0],f[1],f[2],Fi)}return s.emissiveTexture!==void 0&&a!==ya&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Sn)),Promise.all(c).then(function(){const f=new a(o);return s.name&&(f.name=s.name),ru(f,s),t.associations.set(f,{materials:e}),s.extensions&&Nf(i,f,s),f})}createUniqueName(e){const t=dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[Mn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return Z6(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=Xde(c),f=i[u];if(f)a.push(f.promise);else{let d;c.extensions&&c.extensions[Mn.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=Z6(new Gn,c,t),i[u]={primitive:c,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?Kde(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let p=0,v=u.length;p<v;p++){const m=u[p],g=a[p];let w;const b=c[p];if(g.mode===Bo.TRIANGLES||g.mode===Bo.TRIANGLE_STRIP||g.mode===Bo.TRIANGLE_FAN||g.mode===void 0)w=s.isSkinnedMesh===!0?new yl(m,b):new lr(m,b),w.isSkinnedMesh===!0&&w.normalizeSkinWeights(),g.mode===Bo.TRIANGLE_STRIP?w.geometry=K6(w.geometry,yq):g.mode===Bo.TRIANGLE_FAN&&(w.geometry=K6(w.geometry,JF));else if(g.mode===Bo.LINES)w=new My(m,b);else if(g.mode===Bo.LINE_STRIP)w=new Gm(m,b);else if(g.mode===Bo.LINE_LOOP)w=new che(m,b);else if(g.mode===Bo.POINTS)w=new uhe(m,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(w.geometry.morphAttributes).length>0&&Yde(w,s),w.name=t.createUniqueName(s.name||"mesh_"+e),ru(w,s),g.extensions&&Nf(i,w,g),t.assignFinalMaterial(w),f.push(w)}for(let p=0,v=f.length;p<v;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return s.extensions&&Nf(i,f[0],s),f[0];const d=new hs;s.extensions&&Nf(i,d,s),t.associations.set(d,{meshes:e});for(let p=0,v=f.length;p<v;p++)d.add(f[p]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Pi(sn.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Sy(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),ru(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),a=i,o=[],l=[];for(let c=0,u=a.length;c<u;c++){const f=a[c];if(f){o.push(f);const d=new at;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Ru(o,l)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,a=[],o=[],l=[],c=[],u=[];for(let f=0,d=i.channels.length;f<d;f++){const p=i.channels[f],v=i.samplers[p.sampler],m=p.target,g=m.node,w=i.parameters!==void 0?i.parameters[v.input]:v.input,b=i.parameters!==void 0?i.parameters[v.output]:v.output;m.node!==void 0&&(a.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",w)),l.push(this.getDependency("accessor",b)),c.push(v),u.push(m))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(f){const d=f[0],p=f[1],v=f[2],m=f[3],g=f[4],w=[];for(let b=0,E=d.length;b<E;b++){const B=d[b],S=p[b],M=v[b],I=m[b],k=g[b];if(B===void 0)continue;B.updateMatrix&&B.updateMatrix();const O=n._createAnimationTracks(B,S,M,I,k);if(O)for(let C=0;C<O.length;C++)w.push(O[C])}return new mh(s,void 0,w)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=i.weights.length;l<c;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),a=[],o=i.children||[];for(let c=0,u=o.length;c<u;c++)a.push(n.getDependency("node",o[c]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),l]).then(function(c){const u=c[0],f=c[1],d=c[2];d!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(d,Jde)});for(let p=0,v=f.length;p<v;p++)u.add(f[p]);return u})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(c){return i._getNodeRef(i.cameraCache,s.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let u;if(s.isBone===!0?u=new i1:c.length>1?u=new hs:c.length===1?u=c[0]:u=new Tn,u!==c[0])for(let f=0,d=c.length;f<d;f++)u.add(c[f]);if(s.name&&(u.userData.name=s.name,u.name=a),ru(u,s),s.extensions&&Nf(n,u,s),s.matrix!==void 0){const f=new at;f.fromArray(s.matrix),u.applyMatrix4(f)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new hs;n.name&&(s.name=i.createUniqueName(n.name)),ru(s,n),n.extensions&&Nf(t,s,n);const a=n.nodes||[],o=[];for(let l=0,c=a.length;l<c;l++)o.push(i.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let u=0,f=l.length;u<f;u++)s.add(l[u]);const c=u=>{const f=new Map;for(const[d,p]of i.associations)(d instanceof Sa||d instanceof Cr)&&f.set(d,p);return u.traverse(d=>{const p=i.associations.get(d);p!=null&&f.set(d,p)}),f};return i.associations=c(s),s})}_createAnimationTracks(e,t,n,i,s){const a=[],o=e.name?e.name:e.uuid,l=[];dA[s.path]===dA.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(o);let c;switch(dA[s.path]){case dA.weights:c=ph;break;case dA.rotation:c=uc;break;case dA.position:case dA.scale:c=Su;break;default:switch(n.itemSize){case 1:c=ph;break;case 2:case 3:default:c=Su;break}break}const u=i.interpolation!==void 0?Wde[i.interpolation]:Mm,f=this._getArrayFromAccessor(n);for(let d=0,p=l.length;d<p;d++){const v=new c(l[d]+"."+dA[s.path],t.array,f,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),a.push(v)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=oL(t.constructor),i=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof uc?jde:Yq;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function epe(r,e,t){const n=e.attributes,i=new Or;if(n.POSITION!==void 0){const o=t.json.accessors[n.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(i.set(new ae(l[0],l[1],l[2]),new ae(c[0],c[1],c[2])),o.normalized){const u=oL(om[o.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new ae,l=new ae;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const d=t.json.accessors[f.POSITION],p=d.min,v=d.max;if(p!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(v[2]))),d.normalized){const m=oL(om[d.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}r.boundingBox=i;const a=new zs;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function Z6(r,e,t){const n=e.attributes,i=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){r.setAttribute(o,l)})}for(const a in n){const o=aL[a]||a.toLowerCase();o in r.attributes||i.push(s(n[a],o))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(o){r.setIndex(o)});i.push(a)}return on.workingColorSpace!==Fi&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${on.workingColorSpace}" not supported.`),ru(r,e),epe(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?qde(r,e.targets,t):r})}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Uo=Uint8Array,jp=Uint16Array,tpe=Int32Array,Xq=new Uo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zq=new Uo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),npe=new Uo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jq=function(r,e){for(var t=new jp(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new tpe(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},$q=Jq(Xq,2),eY=$q.b,rpe=$q.r;eY[28]=258,rpe[258]=28;var ipe=Jq(Zq,0),spe=ipe.b,lL=new jp(32768);for(var Mr=0;Mr<32768;++Mr){var pA=(Mr&43690)>>1|(Mr&21845)<<1;pA=(pA&52428)>>2|(pA&13107)<<2,pA=(pA&61680)>>4|(pA&3855)<<4,lL[Mr]=((pA&65280)>>8|(pA&255)<<8)>>1}var Sv=function(r,e,t){for(var n=r.length,i=0,s=new jp(e);i<n;++i)r[i]&&++s[r[i]-1];var a=new jp(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new jp(1<<e);var l=15-e;for(i=0;i<n;++i)if(r[i])for(var c=i<<4|r[i],u=e-r[i],f=a[r[i]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)o[lL[f]>>l]=c}else for(o=new jp(n),i=0;i<n;++i)r[i]&&(o[i]=lL[a[r[i]-1]++]>>15-r[i]);return o},Ty=new Uo(288);for(var Mr=0;Mr<144;++Mr)Ty[Mr]=8;for(var Mr=144;Mr<256;++Mr)Ty[Mr]=9;for(var Mr=256;Mr<280;++Mr)Ty[Mr]=7;for(var Mr=280;Mr<288;++Mr)Ty[Mr]=8;var tY=new Uo(32);for(var Mr=0;Mr<32;++Mr)tY[Mr]=5;var ape=Sv(Ty,9,1),ope=Sv(tY,5,1),nT=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},rl=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},rT=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},lpe=function(r){return(r+7)/8|0},cpe=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Uo(r.subarray(e,t))},upe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fl=function(r,e,t){var n=new Error(e||upe[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,fl),!t)throw n;return n},Ape=function(r,e,t,n){var i=r.length,s=0;if(!i||e.f&&!e.l)return t||new Uo(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new Uo(i*3));var c=function(Te){var Re=t.length;if(Te>Re){var de=new Uo(Math.max(Re*2,Te));de.set(t),t=de}},u=e.f||0,f=e.p||0,d=e.b||0,p=e.l,v=e.d,m=e.m,g=e.n,w=i*8;do{if(!p){u=rl(r,f,1);var b=rl(r,f+1,3);if(f+=3,b)if(b==1)p=ape,v=ope,m=9,g=5;else if(b==2){var M=rl(r,f,31)+257,I=rl(r,f+10,15)+4,k=M+rl(r,f+5,31)+1;f+=14;for(var O=new Uo(k),C=new Uo(19),P=0;P<I;++P)C[npe[P]]=rl(r,f+P*3,7);f+=I*3;for(var D=nT(C),F=(1<<D)-1,_=Sv(C,D,1),P=0;P<k;){var R=_[rl(r,f,F)];f+=R&15;var E=R>>4;if(E<16)O[P++]=E;else{var L=0,Q=0;for(E==16?(Q=3+rl(r,f,3),f+=2,L=O[P-1]):E==17?(Q=3+rl(r,f,7),f+=3):E==18&&(Q=11+rl(r,f,127),f+=7);Q--;)O[P++]=L}}var G=O.subarray(0,M),Y=O.subarray(M);m=nT(G),g=nT(Y),p=Sv(G,m,1),v=Sv(Y,g,1)}else fl(1);else{var E=lpe(f)+4,B=r[E-4]|r[E-3]<<8,S=E+B;if(S>i){l&&fl(0);break}o&&c(d+B),t.set(r.subarray(E,S),d),e.b=d+=B,e.p=f=S*8,e.f=u;continue}if(f>w){l&&fl(0);break}}o&&c(d+131072);for(var W=(1<<m)-1,V=(1<<g)-1,T=f;;T=f){var L=p[rT(r,f)&W],H=L>>4;if(f+=L&15,f>w){l&&fl(0);break}if(L||fl(2),H<256)t[d++]=H;else if(H==256){T=f,p=null;break}else{var K=H-254;if(H>264){var P=H-257,N=Xq[P];K=rl(r,f,(1<<N)-1)+eY[P],f+=N}var te=v[rT(r,f)&V],oe=te>>4;te||fl(3),f+=te&15;var Y=spe[oe];if(oe>3){var N=Zq[oe];Y+=rT(r,f)&(1<<N)-1,f+=N}if(f>w){l&&fl(0);break}o&&c(d+131072);var fe=d+K;if(d<Y){var he=s-Y,me=Math.min(Y,fe);for(he+d<0&&fl(3);d<me;++d)t[d]=n[he+d]}for(;d<fe;++d)t[d]=t[d-Y]}}e.l=p,e.p=T,e.b=d,e.f=u,p&&(u=1,e.m=m,e.d=v,e.n=g)}while(!u);return d!=t.length&&a?cpe(t,0,d):t.subarray(0,d)},fpe=new Uo(0),hpe=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&fl(6,"invalid zlib data"),(r[1]>>5&1)==1&&fl(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function dpe(r,e){return Ape(r.subarray(hpe(r),-4),{i:2},e,e)}var ppe=typeof TextDecoder<"u"&&new TextDecoder,mpe=0;try{ppe.decode(fpe,{stream:!0}),mpe=1}catch{}function nY(r,e,t){const n=t.length-r-1;if(e>=t[n])return n-1;if(e<=t[r])return r;let i=r,s=n,a=Math.floor((i+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:i=a,a=Math.floor((i+s)/2);return a}function gpe(r,e,t,n){const i=[],s=[],a=[];i[0]=1;for(let o=1;o<=t;++o){s[o]=e-n[r+1-o],a[o]=n[r+o]-e;let l=0;for(let c=0;c<o;++c){const u=a[c+1],f=s[o-c],d=i[c]/(u+f);i[c]=l+u*d,l=f*d}i[o]=l}return i}function vpe(r,e,t,n){const i=nY(r,n,e),s=gpe(i,n,r,e),a=new Cn(0,0,0,0);for(let o=0;o<=r;++o){const l=t[i-r+o],c=s[o],u=l.w*c;a.x+=l.x*u,a.y+=l.y*u,a.z+=l.z*u,a.w+=l.w*c}return a}function ype(r,e,t,n,i){const s=[];for(let f=0;f<=t;++f)s[f]=0;const a=[];for(let f=0;f<=n;++f)a[f]=s.slice(0);const o=[];for(let f=0;f<=t;++f)o[f]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let f=1;f<=t;++f){l[f]=e-i[r+1-f],c[f]=i[r+f]-e;let d=0;for(let p=0;p<f;++p){const v=c[p+1],m=l[f-p];o[f][p]=v+m;const g=o[p][f-1]/o[f][p];o[p][f]=d+v*g,d=m*g}o[f][f]=d}for(let f=0;f<=t;++f)a[0][f]=o[f][t];for(let f=0;f<=t;++f){let d=0,p=1;const v=[];for(let m=0;m<=t;++m)v[m]=s.slice(0);v[0][0]=1;for(let m=1;m<=n;++m){let g=0;const w=f-m,b=t-m;f>=m&&(v[p][0]=v[d][0]/o[b+1][w],g=v[p][0]*o[w][b]);const E=w>=-1?1:-w,B=f-1<=b?m-1:t-f;for(let M=E;M<=B;++M)v[p][M]=(v[d][M]-v[d][M-1])/o[b+1][w+M],g+=v[p][M]*o[w+M][b];f<=b&&(v[p][m]=-v[d][m-1]/o[b+1][f],g+=v[p][m]*o[f][b]),a[m][f]=g;const S=d;d=p,p=S}}let u=t;for(let f=1;f<=n;++f){for(let d=0;d<=t;++d)a[f][d]*=u;u*=t-f}return a}function wpe(r,e,t,n,i){const s=i<r?i:r,a=[],o=nY(r,n,e),l=ype(o,n,r,s,e),c=[];for(let u=0;u<t.length;++u){const f=t[u].clone(),d=f.w;f.x*=d,f.y*=d,f.z*=d,c[u]=f}for(let u=0;u<=s;++u){const f=c[o-r].clone().multiplyScalar(l[u][0]);for(let d=1;d<=r;++d)f.add(c[o-r+d].clone().multiplyScalar(l[u][d]));a[u]=f}for(let u=s+1;u<=i+1;++u)a[u]=new Cn(0,0,0);return a}function _pe(r,e){let t=1;for(let i=2;i<=r;++i)t*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=r-e;++i)n*=i;return t/n}function xpe(r){const e=r.length,t=[],n=[];for(let s=0;s<e;++s){const a=r[s];t[s]=new ae(a.x,a.y,a.z),n[s]=a.w}const i=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(i[s-o].clone().multiplyScalar(_pe(s,o)*n[o]));i[s]=a.divideScalar(n[0])}return i}function bpe(r,e,t,n,i){const s=wpe(r,e,t,n,i);return xpe(s)}class Epe extends fhe{constructor(e,t,n,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<n.length;++a){const o=n[a];this.controlPoints[a]=new Cn(o.x,o.y,o.z,o.w)}}getPoint(e,t=new ae){const n=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=vpe(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new ae){const n=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=bpe(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let hn,Ai,Ys;class Spe extends Ac{constructor(e){super(e)}load(e,t,n,i){const s=this,a=s.path===""?am.extractUrlBase(e):s.path,o=new TE(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e,t){if(Ipe(e))hn=new Rpe().parse(e);else{const i=sY(e);if(!Upe(i))throw new Error("THREE.FBXLoader: Unknown format.");if($6(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$6(i));hn=new Tpe().parse(i)}const n=new cf(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Bpe(n,this.manager).parse(hn)}}class Bpe{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Ai=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),s=new Mpe().parse(i);return this.parseScene(i,s,n),Ys}parseConnections(){const e=new Map;return"Connections"in hn&&hn.Connections.connections.forEach(function(n){const i=n[0],s=n[1],a=n[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(i).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in hn.Objects){const n=hn.Objects.Video;for(const i in n){const s=n[i],a=parseInt(i);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const c=this.parseImage(n[i]);t[s.RelativeFilename||s.Filename]=c}}}}for(const n in e){const i=e[n];t[i]!==void 0?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in hn.Objects){const n=hn.Objects.Texture;for(const i in n){const s=this.parseTexture(n[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,a=i!==void 0?i.value:0,o=s!==void 0?s.value:0;if(n.wrapS=a===0?ao:Ja,n.wrapT=o===0?ao:Ja,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;n.offset.x=l[0],n.offset.y=l[1]}return n}loadTexture(e,t){const n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),i=e.FileName.split(".").pop().toLowerCase(),s=n.has(i)?this.manager.getHandler(`.${i}`):this.textureLoader;if(!s)return console.warn(`FBXLoader: ${i.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Cr;const a=s.path;a||s.setPath(this.textureLoader.path);const o=Ai.get(e.id).children;let l;o!==void 0&&o.length>0&&t[o[0].ID]!==void 0&&(l=t[o[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&s.setPath(void 0));const c=s.load(l);return s.setPath(a),c}parseMaterials(e){const t=new Map;if("Material"in hn.Objects){const n=hn.Objects.Material;for(const i in n){const s=this.parseMaterial(n[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Ai.has(n))return null;const a=this.parseParameters(e,t,n);let o;switch(s.toLowerCase()){case"phong":o=new YC;break;case"lambert":o=new Ihe;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new YC;break}return o.setValues(a),o.name=i,o}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=on.toWorkingColorSpace(new st().fromArray(e.Diffuse.value),Sn):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=on.toWorkingColorSpace(new st().fromArray(e.DiffuseColor.value),Sn)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=on.toWorkingColorSpace(new st().fromArray(e.Emissive.value),Sn):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=on.toWorkingColorSpace(new st().fromArray(e.EmissiveColor.value),Sn)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=on.toWorkingColorSpace(new st().fromArray(e.Specular.value),Sn):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=on.toWorkingColorSpace(new st().fromArray(e.SpecularColor.value),Sn));const s=this;return Ai.get(n).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":i.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,a.ID),i.map!==void 0&&(i.map.colorSpace=Sn);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,a.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=Sn);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,a.ID),i.envMap!==void 0&&(i.envMap.mapping=Kv,i.envMap.colorSpace=Sn);break;case"SpecularColor":i.specularMap=s.getTexture(t,a.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=Sn);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,a.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,t){return"LayeredTexture"in hn.Objects&&t in hn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Ai.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in hn.Objects){const n=hn.Objects.Deformer;for(const i in n){const s=n[i],a=Ai.get(parseInt(i));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,n);o.ID=i,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[i]=o}else if(s.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(a,n),o.id=i,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const a={ID:i.ID,indices:[],weights:[],transformLink:new at().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),n.push(a)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=Ai.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(o)}return n}parseScene(e,t,n){Ys=new hs;const i=this.parseModels(e.skeletons,t,n),s=hn.Objects.Model,a=this;i.forEach(function(l){const c=s[l.ID];a.setLookAtProperties(l,c),Ai.get(l.ID).parents.forEach(function(f){const d=i.get(f.ID);d!==void 0&&d.add(l)}),l.parent===null&&Ys.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),Ys.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=iY(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const o=new Cpe().parse();Ys.children.length===1&&Ys.children[0].isGroup&&(Ys.children[0].animations=o,Ys=Ys.children[0]),Ys.animations=o}parseModels(e,t,n){const i=new Map,s=hn.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],c=Ai.get(o);let u=this.buildSkeleton(c,e,o,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new i1;break;case"Null":default:u=new hs;break}u.name=l.attrName?dn.sanitizeNodeName(l.attrName):"",u.userData.originalName=l.attrName,u.ID=o}this.getTransformData(u,l),i.set(o,u)}return i}buildSkeleton(e,t,n,i){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(c,u){if(c.ID===a.ID){const f=s;s=new i1,s.matrixWorld.copy(c.transformLink),s.name=i?dn.sanitizeNodeName(i):"",s.userData.originalName=i,s.ID=n,l.bones[u]=s,f!==null&&s.add(f)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(i){const s=hn.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new Tn;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let a=1e3;n.FarPlane!==void 0&&(a=n.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(o=n.AspectWidth.value,l=n.AspectHeight.value);const c=o/l;let u=45;n.FieldOfView!==void 0&&(u=n.FieldOfView.value);const f=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:t=new Pi(u,c,s,a),f!==null&&t.setFocalLength(f);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new Tn;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Tn;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(i){const s=hn.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new Tn;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=on.toWorkingColorSpace(new st().fromArray(n.Color.value),Sn));let a=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(a=0);let o=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?o=0:o=n.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new iL(s,a,o,l);break;case 1:t=new _O(s,a);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=sn.degToRad(n.InnerAngle.value));let u=0;n.OuterAngle!==void 0&&(u=sn.degToRad(n.OuterAngle.value),u=Math.max(u,1)),t=new zq(s,a,o,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new iL(s,a);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,s=null,a=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),n.has(l.ID)&&o.push(n.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new YC({name:Ac.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new yl(s,a),i.normalizeSkinWeights()):i=new lr(s,a),i}createCurve(e,t){const n=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),i=new Iu({name:Ac.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Gm(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=ny(t.RotationOrder.value):n.eulerOrder=ny(0),"Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&Ai.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=hn.Objects.Model[i.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),Ys.add(e.target)):e.lookAt(new ae().fromArray(a))}}})}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const s in e){const a=e[s];Ai.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;Ai.get(c).parents.forEach(function(f){n.has(f.ID)&&n.get(f.ID).bind(new Ru(a.bones),i[f.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in hn.Objects){const t=hn.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new at().fromArray(s.Matrix.a)}):e[i.Node]=new at().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in hn){if("AmbientColor"in hn.GlobalSettings){const e=hn.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(t!==0||n!==0||i!==0){const s=new st().setRGB(t,n,i,Sn);Ys.add(new Vq(s,1))}}"UnitScaleFactor"in hn.GlobalSettings&&(Ys.userData.unitScaleFactor=hn.GlobalSettings.UnitScaleFactor.value)}}}class Mpe{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in hn.Objects){const n=hn.Objects.Geometry;for(const i in n){const s=Ai.get(parseInt(i)),a=this.parseGeometry(s,n[i],e);t.set(parseInt(i),a)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,s=[],a=e.parents.map(function(f){return hn.Objects.Model[f.ID]});if(a.length===0)return;const o=e.children.reduce(function(f,d){return i[d.ID]!==void 0&&(f=i[d.ID]),f},null);e.children.forEach(function(f){n.morphTargets[f.ID]!==void 0&&s.push(n.morphTargets[f.ID])});const l=a[0],c={};"RotationOrder"in l&&(c.eulerOrder=ny(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=iY(c);return this.genGeometry(t,o,s,u)}genGeometry(e,t,n,i){const s=new Gn;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new xr(o.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new xr(o.colors,3)),t&&(s.setAttribute("skinIndex",new bE(o.weightsIndices,4)),s.setAttribute("skinWeight",new xr(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const c=new Vt().getNormalMatrix(i),u=new xr(o.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(o.uvs.forEach(function(c,u){const f=u===0?"uv":`uv${u}`;s.setAttribute(f,new xr(o.uvs[u],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=o.materialIndex[0],u=0;if(o.materialIndex.forEach(function(f,d){f!==c&&(s.addGroup(u,d-u,c),c=f,u=d)}),s.groups.length>0){const f=s.groups[s.groups.length-1],d=f.start+f.count;d!==o.materialIndex.length&&s.addGroup(d,o.materialIndex.length-d,c)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(a,o){n.weightTable[a]===void 0&&(n.weightTable[a]=[]),n.weightTable[a].push({id:s,weight:i.weights[o]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,s=!1,a=[],o=[],l=[],c=[],u=[],f=[];const d=this;return e.vertexIndices.forEach(function(p,v){let m,g=!1;p<0&&(p=p^-1,g=!0);let w=[],b=[];if(a.push(p*3,p*3+1,p*3+2),e.color){const E=O_(v,n,p,e.color);l.push(E[0],E[1],E[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(E){b.push(E.weight),w.push(E.id)}),b.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const E=[0,0,0,0],B=[0,0,0,0];b.forEach(function(S,M){let I=S,k=w[M];B.forEach(function(O,C,P){if(I>O){P[C]=I,I=O;const D=E[C];E[C]=k,k=D}})}),w=E,b=B}for(;b.length<4;)b.push(0),w.push(0);for(let E=0;E<4;++E)u.push(b[E]),f.push(w[E])}if(e.normal){const E=O_(v,n,p,e.normal);o.push(E[0],E[1],E[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=O_(v,n,p,e.material)[0],m<0&&(d.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(E,B){const S=O_(v,n,p,E);c[B]===void 0&&(c[B]=[]),c[B].push(S[0]),c[B].push(S[1])}),i++,g&&(d.genFace(t,e,a,m,o,l,c,u,f,i),n++,i=0,a=[],o=[],l=[],c=[],u=[],f=[])}),t}getNormalNewell(e){const t=new ae(0,0,0);for(let n=0;n<e.length;n++){const i=e[n],s=e[(n+1)%e.length];t.x+=(i.y-s.y)*(i.z+s.z),t.y+=(i.z-s.z)*(i.x+s.x),t.z+=(i.x-s.x)*(i.y+s.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),i=(Math.abs(t.z)>.5?new ae(0,1,0):new ae(0,0,1)).cross(t).normalize(),s=t.clone().cross(i).normalize();return{normal:t,tangent:i,bitangent:s}}flattenVertex(e,t,n){return new pt(e.dot(t),e.dot(n))}genFace(e,t,n,i,s,a,o,l,c,u){let f;if(u>3){const d=[],p=t.baseVertexPositions||t.vertexPositions;for(let w=0;w<n.length;w+=3)d.push(new ae(p[n[w]],p[n[w+1]],p[n[w+2]]));const{tangent:v,bitangent:m}=this.getNormalTangentAndBitangent(d),g=[];for(const w of d)g.push(this.flattenVertex(w,v,m));f=vO.triangulateShape(g,[])}else f=[[0,1,2]];for(const[d,p,v]of f)e.vertex.push(t.vertexPositions[n[d*3]]),e.vertex.push(t.vertexPositions[n[d*3+1]]),e.vertex.push(t.vertexPositions[n[d*3+2]]),e.vertex.push(t.vertexPositions[n[p*3]]),e.vertex.push(t.vertexPositions[n[p*3+1]]),e.vertex.push(t.vertexPositions[n[p*3+2]]),e.vertex.push(t.vertexPositions[n[v*3]]),e.vertex.push(t.vertexPositions[n[v*3+1]]),e.vertex.push(t.vertexPositions[n[v*3+2]]),t.skeleton&&(e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.vertexWeights.push(l[v*4]),e.vertexWeights.push(l[v*4+1]),e.vertexWeights.push(l[v*4+2]),e.vertexWeights.push(l[v*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3]),e.weightsIndices.push(c[p*4]),e.weightsIndices.push(c[p*4+1]),e.weightsIndices.push(c[p*4+2]),e.weightsIndices.push(c[p*4+3]),e.weightsIndices.push(c[v*4]),e.weightsIndices.push(c[v*4+1]),e.weightsIndices.push(c[v*4+2]),e.weightsIndices.push(c[v*4+3])),t.color&&(e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2]),e.colors.push(a[p*3]),e.colors.push(a[p*3+1]),e.colors.push(a[p*3+2]),e.colors.push(a[v*3]),e.colors.push(a[v*3+1]),e.colors.push(a[v*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2]),e.normal.push(s[p*3]),e.normal.push(s[p*3+1]),e.normal.push(s[p*3+2]),e.normal.push(s[v*3]),e.normal.push(s[v*3+1]),e.normal.push(s[v*3+2])),t.uv&&t.uv.forEach(function(m,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(o[g][d*2]),e.uvs[g].push(o[g][d*2+1]),e.uvs[g].push(o[g][p*2]),e.uvs[g].push(o[g][p*2+1]),e.uvs[g].push(o[g][v*2]),e.uvs[g].push(o[g][v*2+1])})}addMorphTargets(e,t,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(a){a.rawTargets.forEach(function(o){const l=hn.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,o.name)})})}genMorphGeometry(e,t,n,i,s){const a=t.Vertices!==void 0?t.Vertices.a:[],o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=n.Vertices!==void 0?n.Vertices.a:[],c=n.Indexes!==void 0?n.Indexes.a:[],u=e.attributes.position.count*3,f=new Float32Array(u);for(let m=0;m<c.length;m++){const g=c[m]*3;f[g]=l[m*3],f[g+1]=l[m*3+1],f[g+2]=l[m*3+2]}const d={vertexIndices:o,vertexPositions:f,baseVertexPositions:a},p=this.genBuffers(d),v=new xr(p.vertex,3);v.name=s||n.attrName,v.applyMatrix4(i),e.morphAttributes.position.push(v)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];n==="IndexToDirect"&&(s=e.ColorIndex.a);for(let a=0,o=new st;a<i.length;a+=4)o.fromArray(i,a),on.toWorkingColorSpace(o,Sn),o.toArray(i,a);return{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,s=[];for(let a=0;a<i.length;++a)s.push(a);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Gn;const n=t-1,i=e.KnotVector.a,s=[],a=e.Points.a;for(let f=0,d=a.length;f<d;f+=4)s.push(new Cn().fromArray(a,f));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=n,l=i.length-1-o;for(let f=0;f<n;++f)s.push(s[f])}const u=new Epe(n,i,s,o,l).getPoints(s.length*12);return new Gn().setFromPoints(u)}}class Cpe{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const i=t[n],s=this.addClip(i);e.push(s)}return e}parseClips(){if(hn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=hn.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=hn.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(Fpe),values:t[n].KeyValueFloat.a},s=Ai.get(i.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=i:o.match(/Y/)?e.get(a).curves.y=i:o.match(/Z/)?e.get(a).curves.z=i:o.match(/DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=i)}}}parseAnimationLayers(e){const t=hn.Objects.AnimationLayer,n=new Map;for(const i in t){const s=[],a=Ai.get(parseInt(i));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const f=Ai.get(l.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(f!==void 0){const d=hn.Objects.Model[f.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const p={modelName:d.attrName?dn.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ys.traverse(function(v){v.ID===d.id&&(p.transform=v.matrix,v.userData.transformData&&(p.eulerOrder=v.userData.transformData.eulerOrder))}),p.transform||(p.transform=new at),"PreRotation"in d&&(p.preRotation=d.PreRotation.value),"PostRotation"in d&&(p.postRotation=d.PostRotation.value),s[c]=p}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const f=Ai.get(l.ID).parents.filter(function(w){return w.relationship!==void 0})[0].ID,d=Ai.get(f).parents[0].ID,p=Ai.get(d).parents[0].ID,v=Ai.get(p).parents[0].ID,m=hn.Objects.Model[v],g={modelName:m.attrName?dn.sanitizeNodeName(m.attrName):"",morphName:hn.Objects.Deformer[f].attrName};s[c]=g}s[c][u.attr]=u}}}),n.set(parseInt(i),s))}return n}parseAnimStacks(e){const t=hn.Objects.AnimationStack,n={};for(const i in t){const s=Ai.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);n[i]={name:t[i].attrName,layer:a}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(i){t=t.concat(n.generateTracks(i))}),new mh(e.name,-1,t)}generateTracks(e){const t=[];let n=new ae,i=new ae;if(e.transform&&e.transform.decompose(n,new Rt,i),n=n.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");s!==void 0&&t.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const s=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&t.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");s!==void 0&&t.push(s)}if(e.DeformPercent!==void 0){const s=this.generateMorphTrack(e);s!==void 0&&t.push(s)}return t}generateVectorTrack(e,t,n,i){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,n);return new Su(e+"."+i,s,a)}generateRotationTrack(e,t,n,i,s){let a,o;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const d=this.interpolateRotations(t.x,t.y,t.z,s);a=d[0],o=d[1]}const l=ny(0);n!==void 0&&(n=n.map(sn.degToRad),n.push(l),n=new Jr().fromArray(n),n=new Rt().setFromEuler(n)),i!==void 0&&(i=i.map(sn.degToRad),i.push(l),i=new Jr().fromArray(i),i=new Rt().setFromEuler(i).invert());const c=new Rt,u=new Jr,f=[];if(!o||!a)return new uc(e+".quaternion",[0],[0]);for(let d=0;d<o.length;d+=3)u.set(o[d],o[d+1],o[d+2],s),c.setFromEuler(u),n!==void 0&&c.premultiply(n),i!==void 0&&c.multiply(i),d>2&&new Rt().fromArray(f,(d-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(f,d/3*4);return new uc(e+".quaternion",a,f)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),i=Ys.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ph(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,i){return n-i}),t.length>1){let n=1,i=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==i&&(t[n]=a,i=a,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const i=n,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(o=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),a!==-1){const u=t.x.values[a];s.push(u),i[0]=u}else s.push(i[0]);if(o!==-1){const u=t.y.values[o];s.push(u),i[1]=u}else s.push(i[1]);if(l!==-1){const u=t.z.values[l];s.push(u),i[2]=u}else s.push(i[2])}),s}interpolateRotations(e,t,n,i){const s=[],a=[];s.push(e.times[0]),a.push(sn.degToRad(e.values[0])),a.push(sn.degToRad(t.values[0])),a.push(sn.degToRad(n.values[0]));for(let o=1;o<e.values.length;o++){const l=[e.values[o-1],t.values[o-1],n.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const c=l.map(sn.degToRad),u=[e.values[o],t.values[o],n.values[o]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;const f=u.map(sn.degToRad),d=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],p=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const m=Math.max(...p)/180,g=new Jr(...c,i),w=new Jr(...f,i),b=new Rt().setFromEuler(g),E=new Rt().setFromEuler(w);b.dot(E)&&E.set(-E.x,-E.y,-E.z,-E.w);const B=e.times[o-1],S=e.times[o]-B,M=new Rt,I=new Jr;for(let k=0;k<1;k+=1/m)M.copy(b.clone().slerp(E.clone(),k)),s.push(B+k*S),I.setFromQuaternion(M,i),a.push(I.x),a.push(I.y),a.push(I.z)}else s.push(e.times[o]),a.push(sn.degToRad(e.values[o])),a.push(sn.degToRad(t.values[o])),a.push(sn.degToRad(n.values[o]))}return[s,a]}}class Tpe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new rY,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,s){const a=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(a||o)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):c?t.parseNodeProperty(i,c,n[++s]):u?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},a=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in o?(n==="PoseNode"?o.PoseNode.push(s):o[n].id!==void 0&&(o[n]={},o[n][o[n].id]=o[n]),a.id!==""&&(o[n][a.id]=s)):typeof a.id=="number"?(o[n]={},o[n][a.id]=s):n!=="Properties70"&&(n==="PoseNode"?o[n]=[s]:o[n]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let f=s.split(",").slice(3);f=f.map(function(d){return d.trim().replace(/^"/,"")}),i="connections",s=[c,u],Dpe(s,f),a[i]===void 0&&(a[i]=[])}i==="Node"&&(a.id=s),i in a&&Array.isArray(a[i])?a[i].push(s):i!=="a"?a[i]=s:a.a=s,this.setCurrentProp(a,i),i==="a"&&s.slice(-1)!==","&&(a.a=sT(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=sT(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],a=i[1],o=i[2],l=i[3];let c=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=sT(c);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class Rpe{parse(e){const t=new J6(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new rY;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(i===0)return null;const l=[];for(let d=0;d<s;d++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",f=l.length>2?l[2]:"";for(n.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const d=this.parseNode(e,t);d!==null&&this.parseSubNode(o,n,d)}return n.propertyList=l,typeof c=="number"&&(n.id=c),u!==""&&(n.attrName=u),f!==""&&(n.attrType=f),o!==""&&(n.name=o),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if(e==="Connections"&&n.name==="C"){const i=[];n.propertyList.forEach(function(s,a){a!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],s=n.propertyList[1];const a=n.propertyList[2],o=n.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],t[i]={type:s,type2:a,flag:o,value:l}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const o=dpe(new Uint8Array(e.getArrayBuffer(a))),l=new J6(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class J6{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=n.indexOf(0);return i>=0&&(n=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(n)}}class rY{add(e,t){this[e]=t}}function Ipe(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===sY(r,0,e.length)}function Upe(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(i){const s=r[i-1];return r=r.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function $6(r){const e=/FBXVersion: (\d+)/,t=r.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Fpe(r){return r/46186158e3}const Lpe=[];function O_(r,e,t,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=r;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);const s=i*n.dataSize,a=s+n.dataSize;return Ope(Lpe,n.buffer,s,a)}const iT=new Jr,Ld=new ae;function iY(r){const e=new at,t=new at,n=new at,i=new at,s=new at,a=new at,o=new at,l=new at,c=new at,u=new at,f=new at,d=new at,p=r.inheritType?r.inheritType:0;r.translation&&e.setPosition(Ld.fromArray(r.translation));const v=ny(0);if(r.preRotation){const P=r.preRotation.map(sn.degToRad);P.push(v),t.makeRotationFromEuler(iT.fromArray(P))}if(r.rotation){const P=r.rotation.map(sn.degToRad);P.push(r.eulerOrder||v),n.makeRotationFromEuler(iT.fromArray(P))}if(r.postRotation){const P=r.postRotation.map(sn.degToRad);P.push(v),i.makeRotationFromEuler(iT.fromArray(P)),i.invert()}r.scale&&s.scale(Ld.fromArray(r.scale)),r.scalingOffset&&o.setPosition(Ld.fromArray(r.scalingOffset)),r.scalingPivot&&a.setPosition(Ld.fromArray(r.scalingPivot)),r.rotationOffset&&l.setPosition(Ld.fromArray(r.rotationOffset)),r.rotationPivot&&c.setPosition(Ld.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(f.copy(r.parentMatrix),u.copy(r.parentMatrixWorld));const m=t.clone().multiply(n).multiply(i),g=new at;g.extractRotation(u);const w=new at;w.copyPosition(u);const b=w.clone().invert().multiply(u),E=g.clone().invert().multiply(b),B=s,S=new at;if(p===0)S.copy(g).multiply(m).multiply(E).multiply(B);else if(p===1)S.copy(g).multiply(E).multiply(m).multiply(B);else{const D=new at().scale(new ae().setFromMatrixScale(f)).clone().invert(),F=E.clone().multiply(D);S.copy(g).multiply(m).multiply(F).multiply(B)}const M=c.clone().invert(),I=a.clone().invert();let k=e.clone().multiply(l).multiply(c).multiply(t).multiply(n).multiply(i).multiply(M).multiply(o).multiply(a).multiply(s).multiply(I);const O=new at().copyPosition(k),C=u.clone().multiply(O);return d.copyPosition(C),k=d.clone().multiply(S),k.premultiply(u.invert()),k}function ny(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function sT(r){return r.split(",").map(function(t){return parseFloat(t)})}function sY(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=r.byteLength),new TextDecoder().decode(new Uint8Array(r,e,t))}function Dpe(r,e){for(let t=0,n=r.length,i=e.length;t<i;t++,n++)r[n]=e[t]}function Ope(r,e,t,n){for(let i=t,s=0;i<n;i++,s++)r[s]=e[i];return r}let g0,aT,Dd,N_;function oT(r,e=1/0,t=null){aT||(aT=new Tu(2,2,1,1)),Dd||(Dd=new vi({uniforms:{blitTexture:new EO(r)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`})),Dd.uniforms.blitTexture.value=r,Dd.defines.IS_SRGB=r.colorSpace==Sn,Dd.needsUpdate=!0,N_||(N_=new lr(aT,Dd),N_.frustumCulled=!1);const n=new Pi,i=new Zv;i.add(N_),t===null&&(t=g0=new By({antialias:!1}));const s=Math.min(r.image.width,e),a=Math.min(r.image.height,e);t.setSize(s,a),t.clear(),t.render(i,n);const o=document.createElement("canvas"),l=o.getContext("2d");o.width=s,o.height=a,l.drawImage(t.domElement,0,0,s,a);const c=new Ahe(o);return c.minFilter=r.minFilter,c.magFilter=r.magFilter,c.wrapS=r.wrapS,c.wrapT=r.wrapT,c.colorSpace=r.colorSpace,c.name=r.name,g0&&(g0.forceContextLoss(),g0.dispose(),g0=null),c}const e5={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class BO{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Wpe(e)}),this.register(function(e){return new Kpe(e)}),this.register(function(e){return new Zpe(e)}),this.register(function(e){return new Jpe(e)}),this.register(function(e){return new $pe(e)}),this.register(function(e){return new eme(e)}),this.register(function(e){return new qpe(e)}),this.register(function(e){return new Ype(e)}),this.register(function(e){return new Xpe(e)}),this.register(function(e){return new tme(e)}),this.register(function(e){return new nme(e)}),this.register(function(e){return new rme(e)}),this.register(function(e){return new ime(e)}),this.register(function(e){return new sme(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){const s=new jpe,a=[];for(let o=0,l=this.pluginCallbacks.length;o<l;o++)a.push(this.pluginCallbacks[o](s));s.setPlugins(a),s.write(e,t,i).catch(n)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,i,s,t)})}}const En={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},lT="KHR_mesh_quantization",$a={};$a[ts]=En.NEAREST;$a[nO]=En.NEAREST_MIPMAP_NEAREST;$a[Hp]=En.NEAREST_MIPMAP_LINEAR;$a[Hi]=En.LINEAR;$a[xv]=En.LINEAR_MIPMAP_NEAREST;$a[ml]=En.LINEAR_MIPMAP_LINEAR;$a[Ja]=En.CLAMP_TO_EDGE;$a[ao]=En.REPEAT;$a[qv]=En.MIRRORED_REPEAT;const t5={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Npe=new st,n5=12,Ppe=1179937895,kpe=2,r5=8,Hpe=1313821514,Qpe=5130562;function J0(r,e){return r.length===e.length&&r.every(function(t,n){return t===e[n]})}function zpe(r){return new TextEncoder().encode(r).buffer}function Vpe(r){return J0(r.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Gpe(r,e,t){const n={min:new Array(r.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(r.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<r.itemSize;s++){let a;r.itemSize>4?a=r.array[i*r.itemSize+s]:(s===0?a=r.getX(i):s===1?a=r.getY(i):s===2?a=r.getZ(i):s===3&&(a=r.getW(i)),r.normalized===!0&&(a=sn.normalize(a,r.array))),n.min[s]=Math.min(n.min[s],a),n.max[s]=Math.max(n.max[s],a)}return n}function aY(r){return Math.ceil(r/4)*4}function cT(r,e=0){const t=aY(r.byteLength);if(t!==r.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(r)),e!==0)for(let i=r.byteLength;i<t;i++)n[i]=e;return n.buffer}return r}function i5(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function s5(r,e){if(r.toBlob!==void 0)return new Promise(n=>r.toBlob(n,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),r.convertToBlob({type:e,quality:t})}class jpe{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+bu}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,a=i.json;n=i.options;const o=i.extensionsUsed,l=i.extensionsRequired,c=new Blob(s,{type:"application/octet-stream"}),u=Object.keys(o),f=Object.keys(l);if(u.length>0&&(a.extensionsUsed=u),f.length>0&&(a.extensionsRequired=f),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=c.size),n.binary===!0){const d=new FileReader;d.readAsArrayBuffer(c),d.onloadend=function(){const p=cT(d.result),v=new DataView(new ArrayBuffer(r5));v.setUint32(0,p.byteLength,!0),v.setUint32(4,Qpe,!0);const m=cT(zpe(JSON.stringify(a)),32),g=new DataView(new ArrayBuffer(r5));g.setUint32(0,m.byteLength,!0),g.setUint32(4,Hpe,!0);const w=new ArrayBuffer(n5),b=new DataView(w);b.setUint32(0,Ppe,!0),b.setUint32(4,kpe,!0);const E=n5+g.byteLength+m.byteLength+v.byteLength+p.byteLength;b.setUint32(8,E,!0);const B=new Blob([w,g,m,v,p],{type:"application/octet-stream"}),S=new FileReader;S.readAsArrayBuffer(B),S.onloadend=function(){t(S.result)}}}else if(a.buffers&&a.buffers.length>0){const d=new FileReader;d.readAsDataURL(c),d.onloadend=function(){const p=d.result;a.buffers[0].uri=p,t(a)}}else t(a)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const n=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const a in s.gltfExtensions)t.extensions[a]=s.gltfExtensions[a],i[a]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new ae;for(let i=0,s=e.count;i<s;i++)if(Math.abs(n.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),i=new ae;for(let s=0,a=n.count;s<a;s++)i.fromBufferAttribute(n,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),n.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),n=!0),t.rotation!==0&&(i.rotation=t.rotation,n=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(p){return p.colorSpace===Sn?function(m){return m<.04045?m*.0773993808:Math.pow(m*.9478672986+.0521327014,2.4)}:function(m){return m}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof qC&&(e=oT(e)),t instanceof qC&&(t=oT(t));const i=e?e.image:null,s=t?t.image:null,a=Math.max(i?i.width:0,s?s.width:0),o=Math.max(i?i.height:0,s?s.height:0),l=i5();l.width=a,l.height=o;const c=l.getContext("2d",{willReadFrequently:!0});c.fillStyle="#00ffff",c.fillRect(0,0,a,o);const u=c.getImageData(0,0,a,o);if(i){c.drawImage(i,0,0,a,o);const p=n(e),v=c.getImageData(0,0,a,o).data;for(let m=2;m<v.length;m+=4)u.data[m]=p(v[m]/256)*256}if(s){c.drawImage(s,0,0,a,o);const p=n(t),v=c.getImageData(0,0,a,o).data;for(let m=1;m<v.length;m+=4)u.data[m]=p(v[m]/256)*256}c.putImageData(u,0,0);const d=(e||t).clone();return d.source=new fO(l),d.colorSpace=Zl,d.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),d}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,i,s){const a=this.json;a.bufferViews||(a.bufferViews=[]);let o;switch(t){case En.BYTE:case En.UNSIGNED_BYTE:o=1;break;case En.SHORT:case En.UNSIGNED_SHORT:o=2;break;default:o=4}let l=e.itemSize*o;s===En.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const c=aY(i*l),u=new DataView(new ArrayBuffer(c));let f=0;for(let v=n;v<n+i;v++){for(let m=0;m<e.itemSize;m++){let g;e.itemSize>4?g=e.array[v*e.itemSize+m]:(m===0?g=e.getX(v):m===1?g=e.getY(v):m===2?g=e.getZ(v):m===3&&(g=e.getW(v)),e.normalized===!0&&(g=sn.normalize(g,e.array))),t===En.FLOAT?u.setFloat32(f,g,!0):t===En.INT?u.setInt32(f,g,!0):t===En.UNSIGNED_INT?u.setUint32(f,g,!0):t===En.SHORT?u.setInt16(f,g,!0):t===En.UNSIGNED_SHORT?u.setUint16(f,g,!0):t===En.BYTE?u.setInt8(f,g):t===En.UNSIGNED_BYTE&&u.setUint8(f,g),f+=o}f%l!==0&&(f+=l-f%l)}const d={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return s!==void 0&&(d.target=s),s===En.ARRAY_BUFFER&&(d.byteStride=l),this.byteOffset+=c,a.bufferViews.push(d),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const a=cT(s.result),o={buffer:t.processBuffer(a),byteOffset:t.byteOffset,byteLength:a.byteLength};t.byteOffset+=a.byteLength,i(n.bufferViews.push(o)-1)}})}processAccessor(e,t,n,i){const s=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let o;if(e.array.constructor===Float32Array)o=En.FLOAT;else if(e.array.constructor===Int32Array)o=En.INT;else if(e.array.constructor===Uint32Array)o=En.UNSIGNED_INT;else if(e.array.constructor===Int16Array)o=En.SHORT;else if(e.array.constructor===Uint16Array)o=En.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)o=En.BYTE;else if(e.array.constructor===Uint8Array)o=En.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),(i===void 0||i===1/0)&&(i=e.count),i===0)return null;const l=Gpe(e,n,i);let c;t!==void 0&&(c=e===t.index?En.ELEMENT_ARRAY_BUFFER:En.ARRAY_BUFFER);const u=this.processBufferView(e,o,n,i,c),f={bufferView:u.id,byteOffset:u.byteOffset,componentType:o,count:i,max:l.max,min:l.min,type:a[e.itemSize]};return e.normalized===!0&&(f.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(f)-1}processImage(e,t,n,i="image/png"){if(e!==null){const s=this,a=s.cache,o=s.json,l=s.options,c=s.pending;a.images.has(e)||a.images.set(e,{});const u=a.images.get(e),f=i+":flipY/"+n.toString();if(u[f]!==void 0)return u[f];o.images||(o.images=[]);const d={mimeType:i},p=i5();p.width=Math.min(e.width,l.maxTextureSize),p.height=Math.min(e.height,l.maxTextureSize);const v=p.getContext("2d",{willReadFrequently:!0});if(n===!0&&(v.translate(0,p.height),v.scale(1,-1)),e.data!==void 0){t!==zi&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const g=new Uint8ClampedArray(e.height*e.width*4);for(let w=0;w<g.length;w+=4)g[w+0]=e.data[w+0],g[w+1]=e.data[w+1],g[w+2]=e.data[w+2],g[w+3]=e.data[w+3];v.putImageData(new ImageData(g,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)v.drawImage(e,0,0,p.width,p.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?c.push(s5(p,i).then(g=>s.processBufferViewImage(g)).then(g=>{d.bufferView=g})):p.toDataURL!==void 0?d.uri=p.toDataURL(i):c.push(s5(p,i).then(g=>new FileReader().readAsDataURL(g)).then(g=>{d.uri=g}));const m=o.images.push(d)-1;return u[f]=m,m}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:$a[e.magFilter],minFilter:$a[e.minFilter],wrapS:$a[e.wrapS],wrapT:$a[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const n=this.options,i=this.cache,s=this.json;if(i.textures.has(e))return i.textures.get(e);s.textures||(s.textures=[]),e instanceof qC&&(e=oT(e,n.maxTextureSize));let a=e.userData.mimeType;a==="image/webp"&&(a="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,a)};e.name&&(o.name=e.name),this._invokeAll(function(c){c.writeTexture&&c.writeTexture(e,o)});const l=s.textures.push(o)-1;return i.textures.set(e,l),l}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(J0(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const o=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(o),channel:o.channel};this.applyTextureTransform(l,o),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const o={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(o,e.map),i.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){const o=e.emissive;if(Math.max(o.r,o.g,o.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),i.emissiveTexture=c}}if(e.normalMap){const o={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(o.scale=e.normalScale.x),this.applyTextureTransform(o,e.normalMap),i.normalTexture=o}if(e.aoMap){const o={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(o.strength=e.aoMapIntensity),this.applyTextureTransform(o,e.aoMap),i.occlusionTexture=o}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Ps&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(o){o.writeMaterial&&o.writeMaterial(e,i)});const a=n.materials.push(i)-1;return t.materials.set(e,a),a}processMesh(e){const t=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let B=0,S=e.material.length;B<S;B++)i.push(e.material[B].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const a=e.geometry;let o;e.isLineSegments?o=En.LINES:e.isLineLoop?o=En.LINE_LOOP:e.isLine?o=En.LINE_STRIP:e.isPoints?o=En.POINTS:o=e.material.wireframe?En.LINES:En.TRIANGLES;const l={},c={},u=[],f=[],d={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=a.getAttribute("normal");p!==void 0&&!this.isNormalizedNormalAttribute(p)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let v=null;for(let B in a.attributes){if(B.slice(0,5)==="morph")continue;const S=a.attributes[B];if(B=d[B]||B.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(B)||(B="_"+B),t.attributes.has(this.getUID(S))){c[B]=t.attributes.get(this.getUID(S));continue}v=null;const I=S.array;B==="JOINTS_0"&&!(I instanceof Uint16Array)&&!(I instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),v=new Lt(new Uint16Array(I),S.itemSize,S.normalized));const k=this.processAccessor(v||S,a);k!==null&&(B.startsWith("_")||this.detectMeshQuantization(B,S),c[B]=k,t.attributes.set(this.getUID(S),k))}if(p!==void 0&&a.setAttribute("normal",p),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const B=[],S=[],M={};if(e.morphTargetDictionary!==void 0)for(const I in e.morphTargetDictionary)M[e.morphTargetDictionary[I]]=I;for(let I=0;I<e.morphTargetInfluences.length;++I){const k={};let O=!1;for(const C in a.morphAttributes){if(C!=="position"&&C!=="normal"){O||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),O=!0);continue}const P=a.morphAttributes[C][I],D=C.toUpperCase(),F=a.attributes[C];if(t.attributes.has(this.getUID(P,!0))){k[D]=t.attributes.get(this.getUID(P,!0));continue}const _=P.clone();if(!a.morphTargetsRelative)for(let R=0,L=P.count;R<L;R++)for(let Q=0;Q<P.itemSize;Q++)Q===0&&_.setX(R,P.getX(R)-F.getX(R)),Q===1&&_.setY(R,P.getY(R)-F.getY(R)),Q===2&&_.setZ(R,P.getZ(R)-F.getZ(R)),Q===3&&_.setW(R,P.getW(R)-F.getW(R));k[D]=this.processAccessor(_,a),t.attributes.set(this.getUID(F,!0),k[D])}f.push(k),B.push(e.morphTargetInfluences[I]),e.morphTargetDictionary!==void 0&&S.push(M[I])}l.weights=B,S.length>0&&(l.extras={},l.extras.targetNames=S)}const m=Array.isArray(e.material);if(m&&a.groups.length===0)return null;let g=!1;if(m&&a.index===null){const B=[];for(let S=0,M=a.attributes.position.count;S<M;S++)B[S]=S;a.setIndex(B),g=!0}const w=m?e.material:[e.material],b=m?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let B=0,S=b.length;B<S;B++){const M={mode:o,attributes:c};if(this.serializeUserData(a,M),f.length>0&&(M.targets=f),a.index!==null){let k=this.getUID(a.index);(b[B].start!==void 0||b[B].count!==void 0)&&(k+=":"+b[B].start+":"+b[B].count),t.attributes.has(k)?M.indices=t.attributes.get(k):(M.indices=this.processAccessor(a.index,a,b[B].start,b[B].count),t.attributes.set(k,M.indices)),M.indices===null&&delete M.indices}const I=this.processMaterial(w[b[B].materialIndex]);I!==null&&(M.material=I),u.push(M)}g===!0&&a.setIndex(null),l.primitives=u,n.meshes||(n.meshes=[]),this._invokeAll(function(B){B.writeMesh&&B.writeMesh(e,l)});const E=n.meshes.push(l)-1;return t.meshes.set(s,E),E}detectMeshQuantization(e,t){if(this.extensionsUsed[lT])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const i=e.split("_",1)[0];e5[i]&&e5[i].includes(n)&&(this.extensionsUsed[lT]=!0,this.extensionsRequired[lT]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:sn.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]),e=BO.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,a=[],o=[];for(let l=0;l<s.length;++l){const c=s[l],u=dn.parseTrackName(c.name);let f=dn.findNode(t,u.nodeName);const d=t5[u.propertyName];if(u.objectName==="bones"&&(f.isSkinnedMesh===!0?f=f.skeleton.getBoneByName(u.objectIndex):f=void 0),!f||!d){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const p=1;let v=c.values.length/c.times.length;d===t5.morphTargetInfluences&&(v/=f.morphTargetInfluences.length);let m;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(m="CUBICSPLINE",v/=3):c.getInterpolation()===Bm?m="STEP":m="LINEAR",o.push({input:this.processAccessor(new Lt(c.times,p)),output:this.processAccessor(new Lt(c.values,v)),interpolation:m}),a.push({sampler:o.length-1,target:{node:i.get(f),path:d}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:a}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],s=e.skeleton;if(s===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const o=[],l=new Float32Array(s.bones.length*16),c=new at;for(let f=0;f<s.bones.length;++f)o.push(n.get(s.bones[f])),c.copy(s.boneInverses[f]),c.multiply(e.bindMatrix).toArray(l,f*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new Lt(l,16)),joints:o,skeleton:n.get(a)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(n.trs){const o=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();J0(o,[0,0,0,1])||(s.rotation=o),J0(l,[0,0,0])||(s.translation=l),J0(c,[1,1,1])||(s.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),Vpe(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const o=this.processMesh(e);o!==null&&(s.mesh=o)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const o=[];for(let l=0,c=e.children.length;l<c;l++){const u=e.children[l];if(u.visible||n.onlyVisible===!1){const f=this.processNode(u);f!==null&&o.push(f)}}o.length>0&&(s.children=o)}this._invokeAll(function(o){o.writeNode&&o.writeNode(e,s)});const a=t.nodes.push(s)-1;return i.set(e,a),a}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let a=0,o=e.children.length;a<o;a++){const l=e.children[a];if(l.visible||n.onlyVisible===!1){const c=this.processNode(l);c!==null&&s.push(c)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new Zv;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const n=[];for(let i=0;i<e.length;i++)e[i]instanceof Zv?this.processScene(e[i]):n.push(e[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class Wpe{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,i=n.json,s=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(1-e.penumbra)*e.angle,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const o=i.extensions[this.name].lights;o.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}}class Kpe{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class qpe{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(a,e.clearcoatMap),s.clearcoatTexture=a}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(a,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(a.scale=e.clearcoatNormalScale.x),n.applyTextureTransform(a,e.clearcoatNormalMap),s.clearcoatNormalTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Ype{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const i=this.writer.extensionsUsed,s={};s.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Xpe{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(a,e.iridescenceMap),s.iridescenceTexture=a}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(a,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Zpe{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const a={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(a,e.transmissionMap),s.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Jpe{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const a={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(a,e.thicknessMap),s.thicknessTexture=a}e.attenuationDistance!==1/0&&(s.attenuationDistance=e.attenuationDistance),s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class $pe{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const i=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class eme{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(Npe)&&!e.specularIntensityMap&&!e.specularColorMap)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.specularIntensityMap){const a={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(a,e.specularIntensityMap),s.specularTexture=a}if(e.specularColorMap){const a={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(a,e.specularColorMap),s.specularColorTexture=a}s.specularFactor=e.specularIntensity,s.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class tme{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.sheenRoughnessMap){const a={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(a,e.sheenRoughnessMap),s.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(a,e.sheenColorMap),s.sheenColorTexture=a}s.sheenRoughnessFactor=e.sheenRoughness,s.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class nme{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.anisotropyMap){const a={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(a,e.anisotropyMap),s.anisotropyTexture=a}s.anisotropyStrength=e.anisotropy,s.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class rme{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const i=this.writer.extensionsUsed,s={};s.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class ime{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.bumpMap){const a={index:n.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};n.applyTextureTransform(a,e.bumpMap),s.bumpTexture=a}s.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class sme{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const n=this.writer,i=e,s=new Float32Array(i.count*3),a=new Float32Array(i.count*4),o=new Float32Array(i.count*3),l=new at,c=new ae,u=new Rt,f=new ae;for(let p=0;p<i.count;p++)i.getMatrixAt(p,l),l.decompose(c,u,f),c.toArray(s,p*3),u.toArray(a,p*4),f.toArray(o,p*3);const d={TRANSLATION:n.processAccessor(new Lt(s,3)),ROTATION:n.processAccessor(new Lt(a,4)),SCALE:n.processAccessor(new Lt(o,3))};i.instanceColor&&(d._COLOR_0=n.processAccessor(i.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:d},n.extensionsUsed[this.name]=!0,n.extensionsRequired[this.name]=!0}}BO.Utils={insertKeyframe:function(r,e){const n=r.getValueSize(),i=new r.TimeBufferType(r.times.length+1),s=new r.ValueBufferType(r.values.length+n),a=r.createInterpolant(new r.ValueBufferType(n));let o;if(r.times.length===0){i[0]=e;for(let l=0;l<n;l++)s[l]=0;o=0}else if(e<r.times[0]){if(Math.abs(r.times[0]-e)<.001)return 0;i[0]=e,i.set(r.times,1),s.set(a.evaluate(e),0),s.set(r.values,n),o=0}else if(e>r.times[r.times.length-1]){if(Math.abs(r.times[r.times.length-1]-e)<.001)return r.times.length-1;i[i.length-1]=e,i.set(r.times,0),s.set(r.values,0),s.set(a.evaluate(e),r.values.length),o=i.length-1}else for(let l=0;l<r.times.length;l++){if(Math.abs(r.times[l]-e)<.001)return l;if(r.times[l]<e&&r.times[l+1]>e){i.set(r.times.slice(0,l+1),0),i[l+1]=e,i.set(r.times.slice(l+1),l+2),s.set(r.values.slice(0,(l+1)*n),0),s.set(a.evaluate(e),(l+1)*n),s.set(r.values.slice((l+1)*n),(l+2)*n),o=l+1;break}}return r.times=i,r.values=s,o},mergeMorphTargetTracks:function(r,e){const t=[],n={},i=r.tracks;for(let s=0;s<i.length;++s){let a=i[s];const o=dn.parseTrackName(a.name),l=dn.findNode(e,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){t.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(Mm)}const c=l.morphTargetInfluences.length,u=l.morphTargetDictionary[o.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let f;if(n[l.uuid]===void 0){f=a.clone();const p=new f.ValueBufferType(c*f.times.length);for(let v=0;v<f.times.length;v++)p[v*c+u]=f.values[v];f.name=(o.nodeName||"")+".morphTargetInfluences",f.values=p,n[l.uuid]=f,t.push(f);continue}const d=a.createInterpolant(new a.ValueBufferType(1));f=n[l.uuid];for(let p=0;p<f.times.length;p++)f.values[p*c+u]=d.evaluate(f.times[p]);for(let p=0;p<a.times.length;p++){const v=this.insertKeyframe(f,a.times[p]);f.values[v*c+u]=a.values[p]}}return r.tracks=t,r}};var un=oE();/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cL=function(r,e){return cL=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},cL(r,e)};function xl(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");cL(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Eo(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,[])).next())})}function Qa(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var gh=function(){function r(e,t,n,i){this.left=e,this.top=t,this.width=n,this.height=i}return r.prototype.add=function(e,t,n,i){return new r(this.left+e,this.top+t,this.width+n,this.height+i)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(i){return i.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r}(),MO=function(r,e){return gh.fromClientRect(r,e.getBoundingClientRect())},UE=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ui=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},a5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ame=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P_=0;P_<a5.length;P_++)ame[a5.charCodeAt(P_)]=P_;var o5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var k_=0;k_<o5.length;k_++)$0[o5.charCodeAt(k_)]=k_;var ome=function(r){var e=r.length*.75,t=r.length,n,i=0,s,a,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<t;n+=4)s=$0[r.charCodeAt(n)],a=$0[r.charCodeAt(n+1)],o=$0[r.charCodeAt(n+2)],l=$0[r.charCodeAt(n+3)],u[i++]=s<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|l&63;return c},lme=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},cme=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},ch=5,CO=11,uT=2,ume=CO-ch,oY=65536>>ch,Ame=1<<ch,AT=Ame-1,fme=1024>>ch,hme=oY+fme,dme=hme,pme=32,mme=dme+pme,gme=65536>>CO,vme=1<<ume,yme=vme-1,l5=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},wme=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},_me=function(r,e){var t=ome(r),n=Array.isArray(t)?cme(t):new Uint32Array(t),i=Array.isArray(t)?lme(t):new Uint16Array(t),s=24,a=l5(i,s/2,n[4]/2),o=n[5]===2?l5(i,(s+n[4])/2):wme(n,Math.ceil((s+n[4])/4));return new xme(n[0],n[1],n[2],n[3],a,o)},xme=function(){function r(e,t,n,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>ch],t=(t<<uT)+(e&AT),this.data[t];if(e<=65535)return t=this.index[oY+(e-55296>>ch)],t=(t<<uT)+(e&AT),this.data[t];if(e<this.highStart)return t=mme-gme+(e>>CO),t=this.index[t],t+=e>>ch&yme,t=this.index[t],t=(t<<uT)+(e&AT),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),c5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bme=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var H_=0;H_<c5.length;H_++)bme[c5.charCodeAt(H_)]=H_;var Eme="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",u5=50,Sme=1,lY=2,cY=3,Bme=4,Mme=5,A5=7,uY=8,f5=9,NA=10,uL=11,h5=12,AL=13,Cme=14,ev=15,fL=16,Q_=17,v0=18,Tme=19,d5=20,hL=21,y0=22,fT=23,Od=24,za=25,tv=26,nv=27,Nd=28,Rme=29,Zf=30,Ime=31,z_=32,V_=33,dL=34,pL=35,mL=36,ry=37,gL=38,yb=39,wb=40,hT=41,AY=42,Ume=43,Fme=[9001,65288],fY="!",In="×",G_="÷",vL=_me(Eme),zc=[Zf,mL],yL=[Sme,lY,cY,Mme],hY=[NA,uY],p5=[nv,tv],Lme=yL.concat(hY),m5=[gL,yb,wb,dL,pL],Dme=[ev,AL],Ome=function(r,e){e===void 0&&(e="strict");var t=[],n=[],i=[];return r.forEach(function(s,a){var o=vL.get(s);if(o>u5?(i.push(!0),o-=u5):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(a),t.push(fL);if(o===Bme||o===uL){if(a===0)return n.push(a),t.push(Zf);var l=t[a-1];return Lme.indexOf(l)===-1?(n.push(n[a-1]),t.push(l)):(n.push(a),t.push(Zf))}if(n.push(a),o===Ime)return t.push(e==="strict"?hL:ry);if(o===AY||o===Rme)return t.push(Zf);if(o===Ume)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(ry):t.push(Zf);t.push(o)}),[n,t,i]},dT=function(r,e,t,n){var i=n[t];if(Array.isArray(r)?r.indexOf(i)!==-1:r===i)for(var s=t;s<=n.length;){s++;var a=n[s];if(a===e)return!0;if(a!==NA)break}if(i===NA)for(var s=t;s>0;){s--;var o=n[s];if(Array.isArray(r)?r.indexOf(o)!==-1:r===o)for(var l=t;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==NA)break}if(o!==NA)break}return!1},g5=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===NA)t--;else return n}return 0},Nme=function(r,e,t,n,i){if(t[n]===0)return In;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return In;var a=s-1,o=s+1,l=e[s],c=a>=0?e[a]:0,u=e[o];if(l===lY&&u===cY)return In;if(yL.indexOf(l)!==-1)return fY;if(yL.indexOf(u)!==-1||hY.indexOf(u)!==-1)return In;if(g5(s,e)===uY)return G_;if(vL.get(r[s])===uL||(l===z_||l===V_)&&vL.get(r[o])===uL||l===A5||u===A5||l===f5||[NA,AL,ev].indexOf(l)===-1&&u===f5||[Q_,v0,Tme,Od,Nd].indexOf(u)!==-1||g5(s,e)===y0||dT(fT,y0,s,e)||dT([Q_,v0],hL,s,e)||dT(h5,h5,s,e))return In;if(l===NA)return G_;if(l===fT||u===fT)return In;if(u===fL||l===fL)return G_;if([AL,ev,hL].indexOf(u)!==-1||l===Cme||c===mL&&Dme.indexOf(l)!==-1||l===Nd&&u===mL||u===d5||zc.indexOf(u)!==-1&&l===za||zc.indexOf(l)!==-1&&u===za||l===nv&&[ry,z_,V_].indexOf(u)!==-1||[ry,z_,V_].indexOf(l)!==-1&&u===tv||zc.indexOf(l)!==-1&&p5.indexOf(u)!==-1||p5.indexOf(l)!==-1&&zc.indexOf(u)!==-1||[nv,tv].indexOf(l)!==-1&&(u===za||[y0,ev].indexOf(u)!==-1&&e[o+1]===za)||[y0,ev].indexOf(l)!==-1&&u===za||l===za&&[za,Nd,Od].indexOf(u)!==-1)return In;if([za,Nd,Od,Q_,v0].indexOf(u)!==-1)for(var f=s;f>=0;){var d=e[f];if(d===za)return In;if([Nd,Od].indexOf(d)!==-1)f--;else break}if([nv,tv].indexOf(u)!==-1)for(var f=[Q_,v0].indexOf(l)!==-1?a:s;f>=0;){var d=e[f];if(d===za)return In;if([Nd,Od].indexOf(d)!==-1)f--;else break}if(gL===l&&[gL,yb,dL,pL].indexOf(u)!==-1||[yb,dL].indexOf(l)!==-1&&[yb,wb].indexOf(u)!==-1||[wb,pL].indexOf(l)!==-1&&u===wb||m5.indexOf(l)!==-1&&[d5,tv].indexOf(u)!==-1||m5.indexOf(u)!==-1&&l===nv||zc.indexOf(l)!==-1&&zc.indexOf(u)!==-1||l===Od&&zc.indexOf(u)!==-1||zc.concat(za).indexOf(l)!==-1&&u===y0&&Fme.indexOf(r[o])===-1||zc.concat(za).indexOf(u)!==-1&&l===v0)return In;if(l===hT&&u===hT){for(var p=t[s],v=1;p>0&&(p--,e[p]===hT);)v++;if(v%2!==0)return In}return l===z_&&u===V_?In:G_},Pme=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Ome(r,e.lineBreak),n=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[za,Zf,AY].indexOf(o)!==-1?ry:o}));var a=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&r[l]>=19968&&r[l]<=40959}):void 0;return[n,i,a]},kme=function(){function r(e,t,n,i){this.codePoints=e,this.required=t===fY,this.start=n,this.end=i}return r.prototype.slice=function(){return ui.apply(void 0,this.codePoints.slice(this.start,this.end))},r}(),Hme=function(r,e){var t=UE(r),n=Pme(t,e),i=n[0],s=n[1],a=n[2],o=t.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=In;c<o&&(u=Nme(t,s,i,++c,a))===In;);if(u!==In||c===o){var f=new kme(t,u,l,c);return l=c,{value:f,done:!1}}return{done:!0,value:null}}}},Qme=1,zme=2,Ry=4,v5=8,o1=10,y5=47,Bv=92,Vme=9,Gme=32,j_=34,w0=61,jme=35,Wme=36,Kme=37,W_=39,K_=40,_0=41,qme=95,ma=45,Yme=33,Xme=60,Zme=62,Jme=64,$me=91,ege=93,tge=61,nge=123,q_=63,rge=125,w5=124,ige=126,sge=128,_5=65533,pT=42,$f=43,age=44,oge=58,lge=59,iy=46,cge=0,uge=8,Age=11,fge=14,hge=31,dge=127,Fl=-1,dY=48,pY=97,mY=101,pge=102,mge=117,gge=122,gY=65,vY=69,yY=70,vge=85,yge=90,Ds=function(r){return r>=dY&&r<=57},wge=function(r){return r>=55296&&r<=57343},Pd=function(r){return Ds(r)||r>=gY&&r<=yY||r>=pY&&r<=pge},_ge=function(r){return r>=pY&&r<=gge},xge=function(r){return r>=gY&&r<=yge},bge=function(r){return _ge(r)||xge(r)},Ege=function(r){return r>=sge},Y_=function(r){return r===o1||r===Vme||r===Gme},l1=function(r){return bge(r)||Ege(r)||r===qme},x5=function(r){return l1(r)||Ds(r)||r===ma},Sge=function(r){return r>=cge&&r<=uge||r===Age||r>=fge&&r<=hge||r===dge},CA=function(r,e){return r!==Bv?!1:e!==o1},X_=function(r,e,t){return r===ma?l1(e)||CA(e,t):l1(r)?!0:!!(r===Bv&&CA(r,e))},mT=function(r,e,t){return r===$f||r===ma?Ds(e)?!0:e===iy&&Ds(t):Ds(r===iy?e:r)},Bge=function(r){var e=0,t=1;(r[e]===$f||r[e]===ma)&&(r[e]===ma&&(t=-1),e++);for(var n=[];Ds(r[e]);)n.push(r[e++]);var i=n.length?parseInt(ui.apply(void 0,n),10):0;r[e]===iy&&e++;for(var s=[];Ds(r[e]);)s.push(r[e++]);var a=s.length,o=a?parseInt(ui.apply(void 0,s),10):0;(r[e]===vY||r[e]===mY)&&e++;var l=1;(r[e]===$f||r[e]===ma)&&(r[e]===ma&&(l=-1),e++);for(var c=[];Ds(r[e]);)c.push(r[e++]);var u=c.length?parseInt(ui.apply(void 0,c),10):0;return t*(i+o*Math.pow(10,-a))*Math.pow(10,l*u)},Mge={type:2},Cge={type:3},Tge={type:4},Rge={type:13},Ige={type:8},Uge={type:21},Fge={type:9},Lge={type:10},Dge={type:11},Oge={type:12},Nge={type:14},Z_={type:23},Pge={type:1},kge={type:25},Hge={type:24},Qge={type:26},zge={type:27},Vge={type:28},Gge={type:29},jge={type:31},wL={type:32},wY=function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(UE(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==wL;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case j_:return this.consumeStringToken(j_);case jme:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(x5(t)||CA(n,i)){var s=X_(t,n,i)?zme:Qme,a=this.consumeName();return{type:5,value:a,flags:s}}break;case Wme:if(this.peekCodePoint(0)===w0)return this.consumeCodePoint(),Rge;break;case W_:return this.consumeStringToken(W_);case K_:return Mge;case _0:return Cge;case pT:if(this.peekCodePoint(0)===w0)return this.consumeCodePoint(),Nge;break;case $f:if(mT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case age:return Tge;case ma:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(mT(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(X_(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===ma&&c===Zme)return this.consumeCodePoint(),this.consumeCodePoint(),Hge;break;case iy:if(mT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case y5:if(this.peekCodePoint(0)===pT)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===pT&&(u=this.consumeCodePoint(),u===y5))return this.consumeToken();if(u===Fl)return this.consumeToken()}break;case oge:return Qge;case lge:return zge;case Xme:if(this.peekCodePoint(0)===Yme&&this.peekCodePoint(1)===ma&&this.peekCodePoint(2)===ma)return this.consumeCodePoint(),this.consumeCodePoint(),kge;break;case Jme:var f=this.peekCodePoint(0),d=this.peekCodePoint(1),p=this.peekCodePoint(2);if(X_(f,d,p)){var a=this.consumeName();return{type:7,value:a}}break;case $me:return Vge;case Bv:if(CA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ege:return Gge;case tge:if(this.peekCodePoint(0)===w0)return this.consumeCodePoint(),Ige;break;case nge:return Dge;case rge:return Oge;case mge:case vge:var v=this.peekCodePoint(0),m=this.peekCodePoint(1);return v===$f&&(Pd(m)||m===q_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case w5:if(this.peekCodePoint(0)===w0)return this.consumeCodePoint(),Fge;if(this.peekCodePoint(0)===w5)return this.consumeCodePoint(),Uge;break;case ige:if(this.peekCodePoint(0)===w0)return this.consumeCodePoint(),Lge;break;case Fl:return wL}return Y_(e)?(this.consumeWhiteSpace(),jge):Ds(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):l1(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ui(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Pd(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===q_&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(ui.apply(void 0,e.map(function(l){return l===q_?dY:l})),16),s=parseInt(ui.apply(void 0,e.map(function(l){return l===q_?yY:l})),16);return{type:30,start:i,end:s}}var a=parseInt(ui.apply(void 0,e),16);if(this.peekCodePoint(0)===ma&&Pd(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];Pd(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var s=parseInt(ui.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===K_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===K_?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fl)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===W_||t===j_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Fl||this.peekCodePoint(0)===_0)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Z_)}for(;;){var i=this.consumeCodePoint();if(i===Fl||i===_0)return{type:22,value:ui.apply(void 0,e)};if(Y_(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Fl||this.peekCodePoint(0)===_0?(this.consumeCodePoint(),{type:22,value:ui.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Z_);if(i===j_||i===W_||i===K_||Sge(i))return this.consumeBadUrlRemnants(),Z_;if(i===Bv)if(CA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Z_;else e.push(i)}},r.prototype.consumeWhiteSpace=function(){for(;Y_(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===_0||e===Fl)return;CA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var i=Math.min(t,e);n+=ui.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var i=this._value[n];if(i===Fl||i===void 0||i===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(i===o1)return this._value.splice(0,n),Pge;if(i===Bv){var s=this._value[n+1];s!==Fl&&s!==void 0&&(s===o1?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):CA(i,s)&&(t+=this.consumeStringSlice(n),t+=ui(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Ry,n=this.peekCodePoint(0);for((n===$f||n===ma)&&e.push(this.consumeCodePoint());Ds(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===iy&&Ds(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=v5;Ds(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===vY||n===mY)&&((i===$f||i===ma)&&Ds(s)||Ds(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=v5;Ds(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Bge(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(X_(i,s,a)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return i===Kme?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Pd(e)){for(var t=ui(e);Pd(this.peekCodePoint(0))&&t.length<6;)t+=ui(this.consumeCodePoint());Y_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||wge(n)||n>1114111?_5:n}return e===Fl?_5:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(x5(t))e+=ui(t);else if(CA(t,this.peekCodePoint(0)))e+=ui(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r}(),_Y=function(){function r(e){this._tokens=e}return r.create=function(e){var t=new wY;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Wge(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?wL:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r}(),Iy=function(r){return r.type===15},FE=function(r){return r.type===17},ni=function(r){return r.type===20},_L=function(r,e){return ni(r)&&r.value===e},LE=function(r){return r.type!==31&&r.type!==4},gc=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},Wge=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},$A=function(r){return r.type===17||r.type===15},Ti=function(r){return r.type===16||$A(r)},xY=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},ds={type:17,number:0,flags:Ry},TO={type:16,number:50,flags:Ry},PA={type:16,number:100,flags:Ry},rv=function(r,e,t){var n=r[0],i=r[1];return[br(n,e),br(typeof i<"u"?i:n,t)]},br=function(r,e){if(r.type===16)return r.number/100*e;if(Iy(r))switch(r.unit){case"rem":case"em":return 16*r.number;case"px":default:return r.number}return r.number},bY="deg",EY="grad",SY="rad",BY="turn",DE={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case bY:return Math.PI*e.number/180;case EY:return Math.PI/200*e.number;case SY:return e.number;case BY:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},MY=function(r){return r.type===15&&(r.unit===bY||r.unit===EY||r.unit===SY||r.unit===BY)},CY=function(r){var e=r.filter(ni).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ds,ds];case"to top":case"bottom":return No(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ds,PA];case"to right":case"left":return No(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[PA,PA];case"to bottom":case"top":return No(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[PA,ds];case"to left":case"right":return No(270)}return 0},No=function(r){return Math.PI*r/180},WA={name:"color",parse:function(r,e){if(e.type===18){var t=Kge[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return kA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return kA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return kA(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return kA(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var o=sy[e.value.toUpperCase()];if(typeof o<"u")return o}return sy.TRANSPARENT}},lm=function(r){return(255&r)===0},Xi=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,i=255&r>>24;return e<255?"rgba("+i+","+n+","+t+","+e/255+")":"rgb("+i+","+n+","+t+")"},kA=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},b5=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},E5=function(r,e){var t=e.filter(LE);if(t.length===3){var n=t.map(b5),i=n[0],s=n[1],a=n[2];return kA(i,s,a,1)}if(t.length===4){var o=t.map(b5),i=o[0],s=o[1],a=o[2],l=o[3];return kA(i,s,a,l)}return 0};function gT(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var S5=function(r,e){var t=e.filter(LE),n=t[0],i=t[1],s=t[2],a=t[3],o=(n.type===17?No(n.number):DE.parse(r,n))/(Math.PI*2),l=Ti(i)?i.number/100:0,c=Ti(s)?s.number/100:0,u=typeof a<"u"&&Ti(a)?br(a,1):1;if(l===0)return kA(c*255,c*255,c*255,1);var f=c<=.5?c*(l+1):c+l-c*l,d=c*2-f,p=gT(d,f,o+1/3),v=gT(d,f,o),m=gT(d,f,o-1/3);return kA(p*255,v*255,m*255,u)},Kge={hsl:S5,hsla:S5,rgb:E5,rgba:E5},B5=function(r,e){return WA.parse(r,_Y.create(e).parseComponentValue())},sy={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},qge={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(ni(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Yge={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OE=function(r,e){var t=WA.parse(r,e[0]),n=e[1];return n&&Ti(n)?{color:t,stop:n}:{color:t,stop:null}},M5=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=ds),n.stop===null&&(n.stop=PA);for(var i=[],s=0,a=0;a<r.length;a++){var o=r[a].stop;if(o!==null){var l=br(o,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var c=null,a=0;a<i.length;a++){var u=i[a];if(u===null)c===null&&(c=a);else if(c!==null){for(var f=a-c,d=i[c-1],p=(u-d)/(f+1),v=1;v<=f;v++)i[c+v-1]=p*v;c=null}}return r.map(function(m,g){var w=m.color;return{color:w,stop:Math.max(Math.min(1,i[g]/e),0)}})},Xge=function(r,e,t){var n=e/2,i=t/2,s=br(r[0],e)-n,a=i-br(r[1],t);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},Zge=function(r,e,t){var n=typeof r=="number"?r:Xge(r,e,t),i=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),s=e/2,a=t/2,o=i/2,l=Math.sin(n-Math.PI/2)*o,c=Math.cos(n-Math.PI/2)*o;return[i,s-c,s+c,a-l,a+l]},al=function(r,e){return Math.sqrt(r*r+e*e)},C5=function(r,e,t,n,i){var s=[[0,0],[0,e],[r,0],[r,e]];return s.reduce(function(a,o){var l=o[0],c=o[1],u=al(t-l,n-c);return(i?u<a.optimumDistance:u>a.optimumDistance)?{optimumCorner:o,optimumDistance:u}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Jge=function(r,e,t,n,i){var s=0,a=0;switch(r.size){case 0:r.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(r.shape===0)s=a=Math.min(al(e,t),al(e,t-i),al(e-n,t),al(e-n,t-i));else if(r.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-n)),l=C5(n,i,e,t,!0),c=l[0],u=l[1];s=al(c-e,(u-t)/o),a=o*s}break;case 1:r.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-i)):r.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(r.shape===0)s=a=Math.max(al(e,t),al(e,t-i),al(e-n,t),al(e-n,t-i));else if(r.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-n)),f=C5(n,i,e,t,!1),c=f[0],u=f[1];s=al(c-e,(u-t)/o),a=o*s}break}return Array.isArray(r.size)&&(s=br(r.size[0],n),a=r.size.length===2?br(r.size[1],i):s),[s,a]},$ge=function(r,e){var t=No(180),n=[];return gc(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){t=CY(i);return}else if(MY(a)){t=DE.parse(r,a);return}}var o=OE(r,i);n.push(o)}),{angle:t,stops:n,type:1}},J_=function(r,e){var t=No(180),n=[];return gc(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){t=CY(i);return}else if(MY(a)){t=(DE.parse(r,a)+No(270))%No(360);return}}var o=OE(r,i);n.push(o)}),{angle:t,stops:n,type:1}},e0e=function(r,e){var t=No(180),n=[],i=1,s=0,a=3,o=[];return gc(e).forEach(function(l,c){var u=l[0];if(c===0){if(ni(u)&&u.value==="linear"){i=1;return}else if(ni(u)&&u.value==="radial"){i=2;return}}if(u.type===18){if(u.name==="from"){var f=WA.parse(r,u.values[0]);n.push({stop:ds,color:f})}else if(u.name==="to"){var f=WA.parse(r,u.values[0]);n.push({stop:PA,color:f})}else if(u.name==="color-stop"){var d=u.values.filter(LE);if(d.length===2){var f=WA.parse(r,d[1]),p=d[0];FE(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),i===1?{angle:(t+No(180))%No(360),stops:n,type:i}:{size:a,shape:s,stops:n,position:o,type:i}},TY="closest-side",RY="farthest-side",IY="closest-corner",UY="farthest-corner",FY="circle",LY="ellipse",DY="cover",OY="contain",t0e=function(r,e){var t=0,n=3,i=[],s=[];return gc(e).forEach(function(a,o){var l=!0;if(o===0){var c=!1;l=a.reduce(function(f,d){if(c)if(ni(d))switch(d.value){case"center":return s.push(TO),f;case"top":case"left":return s.push(ds),f;case"right":case"bottom":return s.push(PA),f}else(Ti(d)||$A(d))&&s.push(d);else if(ni(d))switch(d.value){case FY:return t=0,!1;case LY:return t=1,!1;case"at":return c=!0,!1;case TY:return n=0,!1;case DY:case RY:return n=1,!1;case OY:case IY:return n=2,!1;case UY:return n=3,!1}else if($A(d)||Ti(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return f},l)}if(l){var u=OE(r,a);i.push(u)}}),{size:n,shape:t,stops:i,position:s,type:2}},$_=function(r,e){var t=0,n=3,i=[],s=[];return gc(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(u,f){if(ni(f))switch(f.value){case"center":return s.push(TO),!1;case"top":case"left":return s.push(ds),!1;case"right":case"bottom":return s.push(PA),!1}else if(Ti(f)||$A(f))return s.push(f),!1;return u},l):o===1&&(l=a.reduce(function(u,f){if(ni(f))switch(f.value){case FY:return t=0,!1;case LY:return t=1,!1;case OY:case TY:return n=0,!1;case RY:return n=1,!1;case IY:return n=2,!1;case DY:case UY:return n=3,!1}else if($A(f)||Ti(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return u},l)),l){var c=OE(r,a);i.push(c)}}),{size:n,shape:t,stops:i,position:s,type:2}},n0e=function(r){return r.type===1},r0e=function(r){return r.type===2},RO={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=NY[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function i0e(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!NY[r.name])}var NY={"linear-gradient":$ge,"-moz-linear-gradient":J_,"-ms-linear-gradient":J_,"-o-linear-gradient":J_,"-webkit-linear-gradient":J_,"radial-gradient":t0e,"-moz-radial-gradient":$_,"-ms-radial-gradient":$_,"-o-radial-gradient":$_,"-webkit-radial-gradient":$_,"-webkit-gradient":e0e},s0e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return LE(n)&&i0e(n)}).map(function(n){return RO.parse(r,n)})}},a0e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(ni(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},o0e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return gc(e).map(function(t){return t.filter(Ti)}).map(xY)}},l0e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return gc(e).map(function(t){return t.filter(ni).map(function(n){return n.value}).join(" ")}).map(c0e)}},c0e=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cm;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(cm||(cm={}));var u0e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return gc(e).map(function(t){return t.filter(A0e)})}},A0e=function(r){return ni(r)||Ti(r)},NE=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},f0e=NE("top"),h0e=NE("right"),d0e=NE("bottom"),p0e=NE("left"),PE=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return xY(t.filter(Ti))}}},m0e=PE("top-left"),g0e=PE("top-right"),v0e=PE("bottom-right"),y0e=PE("bottom-left"),kE=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},w0e=kE("top"),_0e=kE("right"),x0e=kE("bottom"),b0e=kE("left"),HE=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Iy(t)?t.number:0}}},E0e=HE("top"),S0e=HE("right"),B0e=HE("bottom"),M0e=HE("left"),C0e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},T0e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},R0e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(ni).reduce(function(t,n){return t|I0e(n.value)},0)}},I0e=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},U0e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},F0e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},c1;(function(r){r.NORMAL="normal",r.STRICT="strict"})(c1||(c1={}));var L0e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"strict":return c1.STRICT;case"normal":default:return c1.NORMAL}}},D0e={name:"line-height",initialValue:"normal",prefix:!1,type:4},T5=function(r,e){return ni(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:Ti(r)?br(r,e):e},O0e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:RO.parse(r,e)}},N0e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},P0e={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},QE=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},k0e=QE("top"),H0e=QE("right"),Q0e=QE("bottom"),z0e=QE("left"),V0e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(ni).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},G0e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},zE=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},j0e=zE("top"),W0e=zE("right"),K0e=zE("bottom"),q0e=zE("left"),Y0e={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},X0e={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Z0e={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&_L(e[0],"none")?[]:gc(e).map(function(t){for(var n={color:sy.TRANSPARENT,offsetX:ds,offsetY:ds,blur:ds},i=0,s=0;s<t.length;s++){var a=t[s];$A(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:n.blur=a,i++):n.color=WA.parse(r,a)}return n})}},J0e={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},$0e={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=nve[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},eve=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},tve=function(r){var e=r.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[t,n,i,s,a,o]:null},nve={matrix:eve,matrix3d:tve},R5={type:16,number:50,flags:Ry},rve=[R5,R5],ive={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(Ti);return t.length!==2?rve:[t[0],t[1]]}},sve={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Mv;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(Mv||(Mv={}));var ave={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return Mv.BREAK_ALL;case"keep-all":return Mv.KEEP_ALL;case"normal":default:return Mv.NORMAL}}},ove={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(FE(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},PY={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},lve={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return FE(e)?e.number:1}},cve={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uve={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(ni).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},Ave={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},fve={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hve={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){if(FE(e))return e.number;if(ni(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},dve={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(ni).map(function(t){return t.value})}},pve={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ki=function(r,e){return(r&e)!==0},mve={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Iy).map(function(t){return PY.parse(r,t)})}},gve={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&_L(e[0],"none")?[]:gc(e).map(function(t){for(var n={color:255,offsetX:ds,offsetY:ds,blur:ds,spread:ds,inset:!1},i=0,s=0;s<t.length;s++){var a=t[s];_L(a,"inset")?n.inset=!0:$A(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:i===2?n.blur=a:n.spread=a,i++):n.color=WA.parse(r,a)}return n})}},vve={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(ni).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},yve={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},wve={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Iy(e)?e.number:0}},_ve=function(){function r(e,t){var n,i;this.animationDuration=St(e,mve,t.animationDuration),this.backgroundClip=St(e,qge,t.backgroundClip),this.backgroundColor=St(e,Yge,t.backgroundColor),this.backgroundImage=St(e,s0e,t.backgroundImage),this.backgroundOrigin=St(e,a0e,t.backgroundOrigin),this.backgroundPosition=St(e,o0e,t.backgroundPosition),this.backgroundRepeat=St(e,l0e,t.backgroundRepeat),this.backgroundSize=St(e,u0e,t.backgroundSize),this.borderTopColor=St(e,f0e,t.borderTopColor),this.borderRightColor=St(e,h0e,t.borderRightColor),this.borderBottomColor=St(e,d0e,t.borderBottomColor),this.borderLeftColor=St(e,p0e,t.borderLeftColor),this.borderTopLeftRadius=St(e,m0e,t.borderTopLeftRadius),this.borderTopRightRadius=St(e,g0e,t.borderTopRightRadius),this.borderBottomRightRadius=St(e,v0e,t.borderBottomRightRadius),this.borderBottomLeftRadius=St(e,y0e,t.borderBottomLeftRadius),this.borderTopStyle=St(e,w0e,t.borderTopStyle),this.borderRightStyle=St(e,_0e,t.borderRightStyle),this.borderBottomStyle=St(e,x0e,t.borderBottomStyle),this.borderLeftStyle=St(e,b0e,t.borderLeftStyle),this.borderTopWidth=St(e,E0e,t.borderTopWidth),this.borderRightWidth=St(e,S0e,t.borderRightWidth),this.borderBottomWidth=St(e,B0e,t.borderBottomWidth),this.borderLeftWidth=St(e,M0e,t.borderLeftWidth),this.boxShadow=St(e,gve,t.boxShadow),this.color=St(e,C0e,t.color),this.direction=St(e,T0e,t.direction),this.display=St(e,R0e,t.display),this.float=St(e,U0e,t.cssFloat),this.fontFamily=St(e,Ave,t.fontFamily),this.fontSize=St(e,fve,t.fontSize),this.fontStyle=St(e,pve,t.fontStyle),this.fontVariant=St(e,dve,t.fontVariant),this.fontWeight=St(e,hve,t.fontWeight),this.letterSpacing=St(e,F0e,t.letterSpacing),this.lineBreak=St(e,L0e,t.lineBreak),this.lineHeight=St(e,D0e,t.lineHeight),this.listStyleImage=St(e,O0e,t.listStyleImage),this.listStylePosition=St(e,N0e,t.listStylePosition),this.listStyleType=St(e,P0e,t.listStyleType),this.marginTop=St(e,k0e,t.marginTop),this.marginRight=St(e,H0e,t.marginRight),this.marginBottom=St(e,Q0e,t.marginBottom),this.marginLeft=St(e,z0e,t.marginLeft),this.opacity=St(e,lve,t.opacity);var s=St(e,V0e,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=St(e,G0e,t.overflowWrap),this.paddingTop=St(e,j0e,t.paddingTop),this.paddingRight=St(e,W0e,t.paddingRight),this.paddingBottom=St(e,K0e,t.paddingBottom),this.paddingLeft=St(e,q0e,t.paddingLeft),this.paintOrder=St(e,vve,t.paintOrder),this.position=St(e,X0e,t.position),this.textAlign=St(e,Y0e,t.textAlign),this.textDecorationColor=St(e,cve,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=St(e,uve,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=St(e,Z0e,t.textShadow),this.textTransform=St(e,J0e,t.textTransform),this.transform=St(e,$0e,t.transform),this.transformOrigin=St(e,ive,t.transformOrigin),this.visibility=St(e,sve,t.visibility),this.webkitTextStrokeColor=St(e,yve,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=St(e,wve,t.webkitTextStrokeWidth),this.wordBreak=St(e,ave,t.wordBreak),this.zIndex=St(e,ove,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return lm(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return ki(this.display,4)||ki(this.display,33554432)||ki(this.display,268435456)||ki(this.display,536870912)||ki(this.display,67108864)||ki(this.display,134217728)},r}(),St=function(r,e,t){var n=new wY,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(i);var s=new _Y(n.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(r,ni(a)?a.value:e.initialValue);case 0:return e.parse(r,s.parseComponentValue());case 1:return e.parse(r,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return DE.parse(r,s.parseComponentValue());case"color":return WA.parse(r,s.parseComponentValue());case"image":return RO.parse(r,s.parseComponentValue());case"length":var o=s.parseComponentValue();return $A(o)?o:ds;case"length-percentage":var l=s.parseComponentValue();return Ti(l)?l:ds;case"time":return PY.parse(r,s.parseComponentValue())}break}},xve="data-html2canvas-debug",bve=function(r){var e=r.getAttribute(xve);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},I5=function(r,e){var t=bve(r);return t===1||e===t},vc=function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,I5(t,3))debugger;this.styles=new _ve(e,window.getComputedStyle(t,null)),bye(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=MO(this.context,t),I5(t,4)&&(this.flags|=16)}return r}(),Eve="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",U5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iv=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ex=0;ex<U5.length;ex++)iv[U5.charCodeAt(ex)]=ex;var Sve=function(r){var e=r.length*.75,t=r.length,n,i=0,s,a,o,l;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(n=0;n<t;n+=4)s=iv[r.charCodeAt(n)],a=iv[r.charCodeAt(n+1)],o=iv[r.charCodeAt(n+2)],l=iv[r.charCodeAt(n+3)],u[i++]=s<<2|a>>4,u[i++]=(a&15)<<4|o>>2,u[i++]=(o&3)<<6|l&63;return c},Bve=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},Mve=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},uh=5,IO=11,vT=2,Cve=IO-uh,kY=65536>>uh,Tve=1<<uh,yT=Tve-1,Rve=1024>>uh,Ive=kY+Rve,Uve=Ive,Fve=32,Lve=Uve+Fve,Dve=65536>>IO,Ove=1<<Cve,Nve=Ove-1,F5=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},Pve=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},kve=function(r,e){var t=Sve(r),n=Array.isArray(t)?Mve(t):new Uint32Array(t),i=Array.isArray(t)?Bve(t):new Uint16Array(t),s=24,a=F5(i,s/2,n[4]/2),o=n[5]===2?F5(i,(s+n[4])/2):Pve(n,Math.ceil((s+n[4])/4));return new Hve(n[0],n[1],n[2],n[3],a,o)},Hve=function(){function r(e,t,n,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>uh],t=(t<<vT)+(e&yT),this.data[t];if(e<=65535)return t=this.index[kY+(e-55296>>uh)],t=(t<<vT)+(e&yT),this.data[t];if(e<this.highStart)return t=Lve-Dve+(e>>IO),t=this.index[t],t+=e>>uh&Nve,t=this.index[t],t=(t<<vT)+(e&yT),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r}(),L5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qve=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tx=0;tx<L5.length;tx++)Qve[L5.charCodeAt(tx)]=tx;var zve=1,wT=2,_T=3,D5=4,O5=5,Vve=7,N5=8,xT=9,bT=10,P5=11,k5=12,H5=13,Q5=14,ET=15,Gve=function(r){for(var e=[],t=0,n=r.length;t<n;){var i=r.charCodeAt(t++);if(i>=55296&&i<=56319&&t<n){var s=r.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},jve=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],i=-1,s="";++i<t;){var a=r[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===t||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Wve=kve(Eve),Mo="×",ST="÷",Kve=function(r){return Wve.get(r)},qve=function(r,e,t){var n=t-2,i=e[n],s=e[t-1],a=e[t];if(s===wT&&a===_T)return Mo;if(s===wT||s===_T||s===D5||a===wT||a===_T||a===D5)return ST;if(s===N5&&[N5,xT,P5,k5].indexOf(a)!==-1||(s===P5||s===xT)&&(a===xT||a===bT)||(s===k5||s===bT)&&a===bT||a===H5||a===O5||a===Vve||s===zve)return Mo;if(s===H5&&a===Q5){for(;i===O5;)i=e[--n];if(i===Q5)return Mo}if(s===ET&&a===ET){for(var o=0;i===ET;)o++,i=e[--n];if(o%2===0)return Mo}return ST},Yve=function(r){var e=Gve(r),t=e.length,n=0,i=0,s=e.map(Kve);return{next:function(){if(n>=t)return{done:!0,value:null};for(var a=Mo;n<t&&(a=qve(e,s,++n))===Mo;);if(a!==Mo||n===t){var o=jve.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},Xve=function(r){for(var e=Yve(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},Zve=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(r.body.removeChild(n),s===e)return!0}}return!1},Jve=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=UE(n.data).map(function(l){return ui(l)}),s=0,a={},o=i.every(function(l,c){t.setStart(n,s),t.setEnd(n,s+l.length);var u=t.getBoundingClientRect();s+=l.length;var f=u.x>a.x||u.y>a.y;return a=u,c===0?!0:f});return r.body.removeChild(e),o},$ve=function(){return typeof new Image().crossOrigin<"u"},eye=function(){return typeof new XMLHttpRequest().responseType=="string"},tye=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},z5=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},nye=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var a=xL(t,t,0,0,i);return n.fillStyle="red",n.fillRect(0,0,t,t),V5(a).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var c=r.createElement("div");return c.style.backgroundImage="url("+s+")",c.style.height=t+"px",z5(l)?V5(xL(t,t,0,0,c)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),z5(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},xL=function(r,e,t,n,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",r.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},V5=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},ja={get SUPPORT_RANGE_BOUNDS(){var r=Zve(document);return Object.defineProperty(ja,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=ja.SUPPORT_RANGE_BOUNDS&&Jve(document);return Object.defineProperty(ja,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=tye(document);return Object.defineProperty(ja,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?nye(document):Promise.resolve(!1);return Object.defineProperty(ja,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=$ve();return Object.defineProperty(ja,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=eye();return Object.defineProperty(ja,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ja,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ja,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Cv=function(){function r(e,t){this.text=e,this.bounds=t}return r}(),rye=function(r,e,t,n){var i=aye(e,t),s=[],a=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(ja.SUPPORT_RANGE_BOUNDS){var l=G5(n,a,o.length).getClientRects();if(l.length>1){var c=UO(o),u=0;c.forEach(function(d){s.push(new Cv(d,gh.fromDOMRectList(r,G5(n,u+a,d.length).getClientRects()))),u+=d.length})}else s.push(new Cv(o,gh.fromDOMRectList(r,l)))}else{var f=n.splitText(o.length);s.push(new Cv(o,iye(r,n))),n=f}else ja.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),s},iye=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=MO(r,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return gh.EMPTY},G5=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(r,e),i.setEnd(r,e+t),i},UO=function(r){if(ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return Xve(r)},sye=function(r,e){if(ja.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return lye(r,e)},aye=function(r,e){return e.letterSpacing!==0?UO(r):sye(r,e)},oye=[32,160,4961,65792,65793,4153,4241],lye=function(r,e){for(var t=Hme(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var a=i.value.slice(),o=UE(a),l="";o.forEach(function(c){oye.indexOf(c)===-1?l+=ui(c):(l.length&&n.push(l),n.push(ui(c)),l="")}),l.length&&n.push(l)}};!(i=t.next()).done;)s();return n},cye=function(){function r(e,t,n){this.text=uye(t.data,n.textTransform),this.textBounds=rye(e,this.text,n,t)}return r}(),uye=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(Aye,fye);case 2:return r.toUpperCase();default:return r}},Aye=/(^|\s|:|-|\(|\))([a-z])/g,fye=function(r,e,t){return r.length>0?e+t.toUpperCase():r},HY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(vc),QY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(vc),zY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=new XMLSerializer,a=MO(t,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(vc),VY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(vc),bL=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(vc),hye=[{type:15,flags:0,unit:"px",number:3}],dye=[{type:16,flags:0,number:50}],pye=function(r){return r.width>r.height?new gh(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new gh(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},mye=function(r){var e=r.type===gye?new Array(r.value.length+1).join("•"):r.value;return e.length===0?r.placeholder||"":e},u1="checkbox",A1="radio",gye="password",j5=707406591,FO=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=mye(n),(i.type===u1||i.type===A1)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=pye(i.bounds)),i.type){case u1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=hye;break;case A1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=dye;break}return i}return e}(vc),GY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(vc),jY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.value=n.value,i}return e}(vc),WY=function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=yye(t,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?B5(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):sy.TRANSPARENT,a=n.contentWindow.document.body?B5(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):sy.TRANSPARENT;i.backgroundColor=lm(s)?lm(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e}(vc),vye=["OL","UL","MENU"],_b=function(r,e,t,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,xye(i)&&i.data.trim().length>0)t.textNodes.push(new cye(r,i,t.styles));else if(qY(i))if(Uye(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return _b(r,o,t,n)});else{var a=KY(r,i);a.styles.isVisible()&&(wye(i,a,n)?a.flags|=4:_ye(a.styles)&&(a.flags|=2),vye.indexOf(i.tagName)!==-1&&(a.flags|=8),t.elements.push(a),i.slot,i.shadowRoot?_b(r,i.shadowRoot,a,n):!XY(i)&&!YY(i)&&!ZY(i)&&_b(r,i,a,n))}},KY=function(r,e){return Rye(e)?new HY(r,e):Tye(e)?new QY(r,e):YY(e)?new zY(r,e):Sye(e)?new VY(r,e):Bye(e)?new bL(r,e):Mye(e)?new FO(r,e):ZY(e)?new GY(r,e):XY(e)?new jY(r,e):Iye(e)?new WY(r,e):new vc(r,e)},yye=function(r,e){var t=KY(r,e);return t.flags|=4,_b(r,e,t,t),t},wye=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Cye(r)&&t.styles.isTransparent()},_ye=function(r){return r.isPositioned()||r.isFloating()},xye=function(r){return r.nodeType===Node.TEXT_NODE},qY=function(r){return r.nodeType===Node.ELEMENT_NODE},bye=function(r){return qY(r)&&typeof r.style<"u"&&!Eye(r)},Eye=function(r){return typeof r.className=="object"},Sye=function(r){return r.tagName==="LI"},Bye=function(r){return r.tagName==="OL"},Mye=function(r){return r.tagName==="INPUT"},YY=function(r){return r.tagName==="svg"},Cye=function(r){return r.tagName==="BODY"},Tye=function(r){return r.tagName==="CANVAS"},Rye=function(r){return r.tagName==="IMG"},Iye=function(r){return r.tagName==="IFRAME"},XY=function(r){return r.tagName==="TEXTAREA"},ZY=function(r){return r.tagName==="SELECT"},Uye=function(r){return r.tagName==="SLOT"},W5={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},K5={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Fye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Lye={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},kd=function(r,e,t,n,i,s){return r<e||r>t?LO(r,i,s.length>0):n.integers.reduce(function(a,o,l){for(;r>=o;)r-=o,a+=n.values[l];return a},"")+s},JY=function(r,e,t,n){var i="";do t||r--,i=n(r)+i,r/=e;while(r*e>=e);return i},li=function(r,e,t,n,i){var s=t-e+1;return(r<0?"-":"")+(JY(Math.abs(r),s,n,function(a){return ui(Math.floor(a%s)+e)})+i)},Pf=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return JY(Math.abs(r),n,!1,function(i){return e[Math.floor(i%n)]})+t},Ap=1,SA=2,BA=4,sv=8,Vc=function(r,e,t,n,i,s){if(r<-9999||r>9999)return LO(r,4,i.length>0);var a=Math.abs(r),o=i;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var c=a%10;c===0&&ki(s,Ap)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&ki(s,SA)||c===1&&l===1&&ki(s,BA)&&r>100||c===1&&l>1&&ki(s,sv)?o=e[c]+(l>0?t[l-1]:"")+o:c===1&&l>0&&(o=t[l-1]+o),a=Math.floor(a/10)}return(r<0?n:"")+o},q5="十百千萬",Y5="拾佰仟萬",X5="マイナス",BT="마이너스",LO=function(r,e,t){var n=t?". ":"",i=t?"、":"",s=t?", ":"",a=t?" ":"";switch(e){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var o=li(r,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Pf(r,"〇一二三四五六七八九",i);case 6:return kd(r,1,3999,W5,3,n).toLowerCase();case 7:return kd(r,1,3999,W5,3,n);case 8:return li(r,945,969,!1,n);case 9:return li(r,97,122,!1,n);case 10:return li(r,65,90,!1,n);case 11:return li(r,1632,1641,!0,n);case 12:case 49:return kd(r,1,9999,K5,3,n);case 35:return kd(r,1,9999,K5,3,n).toLowerCase();case 13:return li(r,2534,2543,!0,n);case 14:case 30:return li(r,6112,6121,!0,n);case 15:return Pf(r,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return Pf(r,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return Vc(r,"零一二三四五六七八九",q5,"負",i,SA|BA|sv);case 47:return Vc(r,"零壹貳參肆伍陸柒捌玖",Y5,"負",i,Ap|SA|BA|sv);case 42:return Vc(r,"零一二三四五六七八九",q5,"负",i,SA|BA|sv);case 41:return Vc(r,"零壹贰叁肆伍陆柒捌玖",Y5,"负",i,Ap|SA|BA|sv);case 26:return Vc(r,"〇一二三四五六七八九","十百千万",X5,i,0);case 25:return Vc(r,"零壱弐参四伍六七八九","拾百千万",X5,i,Ap|SA|BA);case 31:return Vc(r,"영일이삼사오육칠팔구","십백천만",BT,s,Ap|SA|BA);case 33:return Vc(r,"零一二三四五六七八九","十百千萬",BT,s,0);case 32:return Vc(r,"零壹貳參四五六七八九","拾百千",BT,s,Ap|SA|BA);case 18:return li(r,2406,2415,!0,n);case 20:return kd(r,1,19999,Lye,3,n);case 21:return li(r,2790,2799,!0,n);case 22:return li(r,2662,2671,!0,n);case 22:return kd(r,1,10999,Fye,3,n);case 23:return Pf(r,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Pf(r,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return li(r,3302,3311,!0,n);case 28:return Pf(r,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return Pf(r,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return li(r,3792,3801,!0,n);case 37:return li(r,6160,6169,!0,n);case 38:return li(r,4160,4169,!0,n);case 39:return li(r,2918,2927,!0,n);case 40:return li(r,1776,1785,!0,n);case 43:return li(r,3046,3055,!0,n);case 44:return li(r,3174,3183,!0,n);case 45:return li(r,3664,3673,!0,n);case 46:return li(r,3872,3881,!0,n);case 3:default:return li(r,48,57,!0,n)}},Z5;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(Z5||(Z5={}));var Dye=function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r}(),yt=function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r}(),Hd=function(r,e,t){return new yt(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},nx=function(){function r(e,t,n,i){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=i}return r.prototype.subdivide=function(e,t){var n=Hd(this.start,this.startControl,e),i=Hd(this.startControl,this.endControl,e),s=Hd(this.endControl,this.end,e),a=Hd(n,i,e),o=Hd(i,s,e),l=Hd(a,o,e);return t?new r(this.start,n,a,l):new r(l,o,s,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r}(),Io=function(r){return r.type===1},Oye=function(){function r(e){var t=e.styles,n=e.bounds,i=rv(t.borderTopLeftRadius,n.width,n.height),s=i[0],a=i[1],o=rv(t.borderTopRightRadius,n.width,n.height),l=o[0],c=o[1],u=rv(t.borderBottomRightRadius,n.width,n.height),f=u[0],d=u[1],p=rv(t.borderBottomLeftRadius,n.width,n.height),v=p[0],m=p[1],g=[];g.push((s+l)/n.width),g.push((v+f)/n.width),g.push((a+m)/n.height),g.push((c+d)/n.height);var w=Math.max.apply(Math,g);w>1&&(s/=w,a/=w,l/=w,c/=w,f/=w,d/=w,v/=w,m/=w);var b=n.width-l,E=n.height-d,B=n.width-f,S=n.height-m,M=t.borderTopWidth,I=t.borderRightWidth,k=t.borderBottomWidth,O=t.borderLeftWidth,C=br(t.paddingTop,e.bounds.width),P=br(t.paddingRight,e.bounds.width),D=br(t.paddingBottom,e.bounds.width),F=br(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Ur(n.left+O/3,n.top+M/3,s-O/3,a-M/3,tr.TOP_LEFT):new yt(n.left+O/3,n.top+M/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Ur(n.left+b,n.top+M/3,l-I/3,c-M/3,tr.TOP_RIGHT):new yt(n.left+n.width-I/3,n.top+M/3),this.bottomRightBorderDoubleOuterBox=f>0||d>0?Ur(n.left+B,n.top+E,f-I/3,d-k/3,tr.BOTTOM_RIGHT):new yt(n.left+n.width-I/3,n.top+n.height-k/3),this.bottomLeftBorderDoubleOuterBox=v>0||m>0?Ur(n.left+O/3,n.top+S,v-O/3,m-k/3,tr.BOTTOM_LEFT):new yt(n.left+O/3,n.top+n.height-k/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Ur(n.left+O*2/3,n.top+M*2/3,s-O*2/3,a-M*2/3,tr.TOP_LEFT):new yt(n.left+O*2/3,n.top+M*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Ur(n.left+b,n.top+M*2/3,l-I*2/3,c-M*2/3,tr.TOP_RIGHT):new yt(n.left+n.width-I*2/3,n.top+M*2/3),this.bottomRightBorderDoubleInnerBox=f>0||d>0?Ur(n.left+B,n.top+E,f-I*2/3,d-k*2/3,tr.BOTTOM_RIGHT):new yt(n.left+n.width-I*2/3,n.top+n.height-k*2/3),this.bottomLeftBorderDoubleInnerBox=v>0||m>0?Ur(n.left+O*2/3,n.top+S,v-O*2/3,m-k*2/3,tr.BOTTOM_LEFT):new yt(n.left+O*2/3,n.top+n.height-k*2/3),this.topLeftBorderStroke=s>0||a>0?Ur(n.left+O/2,n.top+M/2,s-O/2,a-M/2,tr.TOP_LEFT):new yt(n.left+O/2,n.top+M/2),this.topRightBorderStroke=s>0||a>0?Ur(n.left+b,n.top+M/2,l-I/2,c-M/2,tr.TOP_RIGHT):new yt(n.left+n.width-I/2,n.top+M/2),this.bottomRightBorderStroke=f>0||d>0?Ur(n.left+B,n.top+E,f-I/2,d-k/2,tr.BOTTOM_RIGHT):new yt(n.left+n.width-I/2,n.top+n.height-k/2),this.bottomLeftBorderStroke=v>0||m>0?Ur(n.left+O/2,n.top+S,v-O/2,m-k/2,tr.BOTTOM_LEFT):new yt(n.left+O/2,n.top+n.height-k/2),this.topLeftBorderBox=s>0||a>0?Ur(n.left,n.top,s,a,tr.TOP_LEFT):new yt(n.left,n.top),this.topRightBorderBox=l>0||c>0?Ur(n.left+b,n.top,l,c,tr.TOP_RIGHT):new yt(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||d>0?Ur(n.left+B,n.top+E,f,d,tr.BOTTOM_RIGHT):new yt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=v>0||m>0?Ur(n.left,n.top+S,v,m,tr.BOTTOM_LEFT):new yt(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?Ur(n.left+O,n.top+M,Math.max(0,s-O),Math.max(0,a-M),tr.TOP_LEFT):new yt(n.left+O,n.top+M),this.topRightPaddingBox=l>0||c>0?Ur(n.left+Math.min(b,n.width-I),n.top+M,b>n.width+I?0:Math.max(0,l-I),Math.max(0,c-M),tr.TOP_RIGHT):new yt(n.left+n.width-I,n.top+M),this.bottomRightPaddingBox=f>0||d>0?Ur(n.left+Math.min(B,n.width-O),n.top+Math.min(E,n.height-k),Math.max(0,f-I),Math.max(0,d-k),tr.BOTTOM_RIGHT):new yt(n.left+n.width-I,n.top+n.height-k),this.bottomLeftPaddingBox=v>0||m>0?Ur(n.left+O,n.top+Math.min(S,n.height-k),Math.max(0,v-O),Math.max(0,m-k),tr.BOTTOM_LEFT):new yt(n.left+O,n.top+n.height-k),this.topLeftContentBox=s>0||a>0?Ur(n.left+O+F,n.top+M+C,Math.max(0,s-(O+F)),Math.max(0,a-(M+C)),tr.TOP_LEFT):new yt(n.left+O+F,n.top+M+C),this.topRightContentBox=l>0||c>0?Ur(n.left+Math.min(b,n.width+O+F),n.top+M+C,b>n.width+O+F?0:l-O+F,c-(M+C),tr.TOP_RIGHT):new yt(n.left+n.width-(I+P),n.top+M+C),this.bottomRightContentBox=f>0||d>0?Ur(n.left+Math.min(B,n.width-(O+F)),n.top+Math.min(E,n.height+M+C),Math.max(0,f-(I+P)),d-(k+D),tr.BOTTOM_RIGHT):new yt(n.left+n.width-(I+P),n.top+n.height-(k+D)),this.bottomLeftContentBox=v>0||m>0?Ur(n.left+O+F,n.top+S,Math.max(0,v-(O+F)),m-(k+D),tr.BOTTOM_LEFT):new yt(n.left+O+F,n.top+n.height-(k+D))}return r}(),tr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(tr||(tr={}));var Ur=function(r,e,t,n,i){var s=4*((Math.sqrt(2)-1)/3),a=t*s,o=n*s,l=r+t,c=e+n;switch(i){case tr.TOP_LEFT:return new nx(new yt(r,c),new yt(r,c-o),new yt(l-a,e),new yt(l,e));case tr.TOP_RIGHT:return new nx(new yt(r,e),new yt(r+a,e),new yt(l,c-o),new yt(l,c));case tr.BOTTOM_RIGHT:return new nx(new yt(l,e),new yt(l,e+o),new yt(r+a,c),new yt(r,c));case tr.BOTTOM_LEFT:default:return new nx(new yt(l,c),new yt(l-a,c),new yt(r,e+o),new yt(r,e))}},f1=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},Nye=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},h1=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},Pye=function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r}(),rx=function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r}(),kye=function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r}(),Hye=function(r){return r.type===0},$Y=function(r){return r.type===1},Qye=function(r){return r.type===2},J5=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},zye=function(r,e,t,n,i){return r.map(function(s,a){switch(a){case 0:return s.add(e,t);case 1:return s.add(e+n,t);case 2:return s.add(e+n,t+i);case 3:return s.add(e,t+i)}return s})},eX=function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r}(),tX=function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Oye(this.container),this.container.styles.opacity<1&&this.effects.push(new kye(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Pye(n,i,s))}if(this.container.styles.overflowX!==0){var a=f1(this.curves),o=h1(this.curves);J5(a,o)?this.effects.push(new rx(a,6)):(this.effects.push(new rx(a,2)),this.effects.push(new rx(o,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!$Y(l)});if(t||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=f1(n.curves),o=h1(n.curves);J5(a,o)||i.unshift(new rx(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(l){return ki(l.target,e)})},r}(),EL=function(r,e,t,n){r.container.elements.forEach(function(i){var s=ki(i.flags,4),a=ki(i.flags,2),o=new tX(i,r);ki(i.styles.display,2048)&&n.push(o);var l=ki(i.flags,8)?[]:n;if(s||a){var c=s||i.styles.isPositioned()?t:e,u=new eX(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var f=i.styles.zIndex.order;if(f<0){var d=0;c.negativeZIndex.some(function(v,m){return f>v.element.container.styles.zIndex.order?(d=m,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(f>0){var p=0;c.positiveZIndex.some(function(v,m){return f>=v.element.container.styles.zIndex.order?(p=m+1,!1):p>0}),c.positiveZIndex.splice(p,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else i.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);EL(o,u,s?u:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),EL(o,e,t,l);ki(i.flags,8)&&nX(i,l)})},nX=function(r,e){for(var t=r instanceof bL?r.start:1,n=r instanceof bL?r.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof VY&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=LO(t,s.container.styles.listStyleType,!0),t+=n?-1:1}},Vye=function(r){var e=new tX(r,null),t=new eX(e),n=[];return EL(e,t,t,n),nX(e.container,n),t},$5=function(r,e){switch(e){case 0:return Po(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return Po(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return Po(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);case 3:default:return Po(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},Gye=function(r,e){switch(e){case 0:return Po(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return Po(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return Po(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);case 3:default:return Po(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},jye=function(r,e){switch(e){case 0:return Po(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return Po(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return Po(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);case 3:default:return Po(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},Wye=function(r,e){switch(e){case 0:return ix(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return ix(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return ix(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);case 3:default:return ix(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},ix=function(r,e){var t=[];return Io(r)?t.push(r.subdivide(.5,!1)):t.push(r),Io(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Po=function(r,e,t,n){var i=[];return Io(r)?i.push(r.subdivide(.5,!1)):i.push(r),Io(t)?i.push(t.subdivide(.5,!0)):i.push(t),Io(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Io(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},rX=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},d1=function(r){var e=r.styles,t=r.bounds,n=br(e.paddingLeft,t.width),i=br(e.paddingRight,t.width),s=br(e.paddingTop,t.width),a=br(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},Kye=function(r,e){return r===0?e.bounds:r===2?d1(e):rX(e)},qye=function(r,e){return r===0?e.bounds:r===2?d1(e):rX(e)},MT=function(r,e,t){var n=Kye(fp(r.styles.backgroundOrigin,e),r),i=qye(fp(r.styles.backgroundClip,e),r),s=Yye(fp(r.styles.backgroundSize,e),t,n),a=s[0],o=s[1],l=rv(fp(r.styles.backgroundPosition,e),n.width-a,n.height-o),c=Xye(fp(r.styles.backgroundRepeat,e),l,s,n,i),u=Math.round(n.left+l[0]),f=Math.round(n.top+l[1]);return[c,u,f,a,o]},Qd=function(r){return ni(r)&&r.value===cm.AUTO},sx=function(r){return typeof r=="number"},Yye=function(r,e,t){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1];if(!a)return[0,0];if(Ti(a)&&o&&Ti(o))return[br(a,t.width),br(o,t.height)];var l=sx(s);if(ni(a)&&(a.value===cm.CONTAIN||a.value===cm.COVER)){if(sx(s)){var c=t.width/t.height;return c<s!=(a.value===cm.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var u=sx(n),f=sx(i),d=u||f;if(Qd(a)&&(!o||Qd(o))){if(u&&f)return[n,i];if(!l&&!d)return[t.width,t.height];if(d&&l){var p=u?n:i*s,v=f?i:n/s;return[p,v]}var m=u?n:t.width,g=f?i:t.height;return[m,g]}if(l){var w=0,b=0;return Ti(a)?w=br(a,t.width):Ti(o)&&(b=br(o,t.height)),Qd(a)?w=b*s:(!o||Qd(o))&&(b=w/s),[w,b]}var E=null,B=null;if(Ti(a)?E=br(a,t.width):o&&Ti(o)&&(B=br(o,t.height)),E!==null&&(!o||Qd(o))&&(B=u&&f?E/n*i:t.height),B!==null&&Qd(a)&&(E=u&&f?B/i*n:t.width),E!==null&&B!==null)return[E,B];throw new Error("Unable to calculate background-size for element")},fp=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},Xye=function(r,e,t,n,i){var s=e[0],a=e[1],o=t[0],l=t[1];switch(r){case 2:return[new yt(Math.round(n.left),Math.round(n.top+a)),new yt(Math.round(n.left+n.width),Math.round(n.top+a)),new yt(Math.round(n.left+n.width),Math.round(l+n.top+a)),new yt(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new yt(Math.round(n.left+s),Math.round(n.top)),new yt(Math.round(n.left+s+o),Math.round(n.top)),new yt(Math.round(n.left+s+o),Math.round(n.height+n.top)),new yt(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new yt(Math.round(n.left+s),Math.round(n.top+a)),new yt(Math.round(n.left+s+o),Math.round(n.top+a)),new yt(Math.round(n.left+s+o),Math.round(n.top+a+l)),new yt(Math.round(n.left+s),Math.round(n.top+a+l))];default:return[new yt(Math.round(i.left),Math.round(i.top)),new yt(Math.round(i.left+i.width),Math.round(i.top)),new yt(Math.round(i.left+i.width),Math.round(i.height+i.top)),new yt(Math.round(i.left),Math.round(i.height+i.top))]}},Zye="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e8="Hidden Text",Jye=function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),i.src=Zye,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(e8)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(e8)),n.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:l}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r}(),iX=function(){function r(e,t){this.context=e,this.options=t}return r}(),$ye=1e4;(function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new Jye(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),Qye(t)&&(this.ctx.globalAlpha=t.opacity),Hye(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),$Y(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Eo(this,void 0,void 0,function(){var n;return Qa(this,function(i){switch(i.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Eo(this,void 0,void 0,function(){return Qa(this,function(n){switch(n.label){case 0:if(ki(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,i){var s=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var a=UO(t.text);a.reduce(function(o,l){return s.ctx.fillText(l,o,t.bounds.top+i),o+s.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=iwe(t.fontFamily).join(", "),s=Iy(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,n){return Eo(this,void 0,void 0,function(){var i,s,a,o,l,c,u,f,d=this;return Qa(this,function(p){return i=this.createFontStyle(n),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),c=l.baseline,u=l.middle,f=n.paintOrder,t.textBounds.forEach(function(v){f.forEach(function(m){switch(m){case 0:d.ctx.fillStyle=Xi(n.color),d.renderTextWithLetterSpacing(v,n.letterSpacing,c);var g=n.textShadow;g.length&&v.text.trim().length&&(g.slice(0).reverse().forEach(function(w){d.ctx.shadowColor=Xi(w.color),d.ctx.shadowOffsetX=w.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=w.offsetY.number*d.options.scale,d.ctx.shadowBlur=w.blur.number,d.renderTextWithLetterSpacing(v,n.letterSpacing,c)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),n.textDecorationLine.length&&(d.ctx.fillStyle=Xi(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(w){switch(w){case 1:d.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top+c),v.bounds.width,1);break;case 2:d.ctx.fillRect(v.bounds.left,Math.round(v.bounds.top),v.bounds.width,1);break;case 3:d.ctx.fillRect(v.bounds.left,Math.ceil(v.bounds.top+u),v.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&v.text.trim().length&&(d.ctx.strokeStyle=Xi(n.webkitTextStrokeColor),d.ctx.lineWidth=n.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(v.text,v.bounds.left,v.bounds.top+c)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=d1(t),a=h1(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Eo(this,void 0,void 0,function(){var n,i,s,a,o,l,b,b,c,u,f,d,B,p,v,S,m,g,w,b,E,B,S;return Qa(this,function(M){switch(M.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,s=n.styles,a=0,o=n.textNodes,M.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,s)]):[3,4];case 2:M.sent(),M.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof HY))return[3,8];M.label=5;case 5:return M.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return b=M.sent(),this.renderReplacedElement(n,i,b),[3,8];case 7:return M.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof QY&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof zY))return[3,12];M.label=9;case 9:return M.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return b=M.sent(),this.renderReplacedElement(n,i,b),[3,12];case 11:return M.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof WY&&n.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,c.render(n.tree)]):[3,14];case 13:u=M.sent(),n.width&&n.height&&this.ctx.drawImage(u,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),M.label=14;case 14:if(n instanceof FO&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===u1?n.checked&&(this.ctx.save(),this.path([new yt(n.bounds.left+f*.39363,n.bounds.top+f*.79),new yt(n.bounds.left+f*.16,n.bounds.top+f*.5549),new yt(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new yt(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new yt(n.bounds.left+f*.72983,n.bounds.top+f*.23),new yt(n.bounds.left+f*.84,n.bounds.top+f*.34085),new yt(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Xi(j5),this.ctx.fill(),this.ctx.restore()):n.type===A1&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Xi(j5),this.ctx.fill(),this.ctx.restore())),ewe(n)&&n.value.length){switch(d=this.createFontStyle(s),B=d[0],p=d[1],v=this.fontMetrics.getMetrics(B,p).baseline,this.ctx.font=B,this.ctx.fillStyle=Xi(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=nwe(n.styles.textAlign),S=d1(n),m=0,n.styles.textAlign){case 1:m+=S.width/2;break;case 2:m+=S.width;break}g=S.add(m,0,0,-S.height/2+1),this.ctx.save(),this.path([new yt(S.left,S.top),new yt(S.left+S.width,S.top),new yt(S.left+S.width,S.top+S.height),new yt(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cv(n.value,g),s.letterSpacing,v),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ki(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(w=n.styles.listStyleImage,w.type!==0)return[3,18];b=void 0,E=w.url,M.label=15;case 15:return M.trys.push([15,17,,18]),[4,this.context.cache.match(E)];case 16:return b=M.sent(),this.ctx.drawImage(b,n.bounds.left-(b.width+10),n.bounds.top),[3,18];case 17:return M.sent(),this.context.logger.error("Error loading list-style-image "+E),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(B=this.createFontStyle(s)[0],this.ctx.font=B,this.ctx.fillStyle=Xi(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new gh(n.bounds.left,n.bounds.top+br(n.styles.paddingTop,n.bounds.width),n.bounds.width,T5(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cv(t.listValue,S),s.letterSpacing,T5(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),M.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Eo(this,void 0,void 0,function(){var n,i,w,s,a,w,o,l,w,c,u,w,f,d,w,p,v,w,m,g,w;return Qa(this,function(b){switch(b.label){case 0:if(ki(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:b.sent(),n=0,i=t.negativeZIndex,b.label=2;case 2:return n<i.length?(w=i[n],[4,this.renderStack(w)]):[3,5];case 3:b.sent(),b.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:b.sent(),s=0,a=t.nonInlineLevel,b.label=7;case 7:return s<a.length?(w=a[s],[4,this.renderNode(w)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:o=0,l=t.nonPositionedFloats,b.label=11;case 11:return o<l.length?(w=l[o],[4,this.renderStack(w)]):[3,14];case 12:b.sent(),b.label=13;case 13:return o++,[3,11];case 14:c=0,u=t.nonPositionedInlineLevel,b.label=15;case 15:return c<u.length?(w=u[c],[4,this.renderStack(w)]):[3,18];case 16:b.sent(),b.label=17;case 17:return c++,[3,15];case 18:f=0,d=t.inlineLevel,b.label=19;case 19:return f<d.length?(w=d[f],[4,this.renderNode(w)]):[3,22];case 20:b.sent(),b.label=21;case 21:return f++,[3,19];case 22:p=0,v=t.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return p<v.length?(w=v[p],[4,this.renderStack(w)]):[3,26];case 24:b.sent(),b.label=25;case 25:return p++,[3,23];case 26:m=0,g=t.positiveZIndex,b.label=27;case 27:return m<g.length?(w=g[m],[4,this.renderStack(w)]):[3,30];case 28:b.sent(),b.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(i,s){var a=Io(i)?i.start:i;s===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),Io(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,n,i,s){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,n,i){var s;if(t.width===n&&t.height===i)return t;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(t){return Eo(this,void 0,void 0,function(){var n,i,s,a,o,l;return Qa(this,function(c){switch(c.label){case 0:n=t.styles.backgroundImage.length-1,i=function(u){var f,d,p,C,L,Q,F,_,k,v,C,L,Q,F,_,m,g,w,b,E,B,S,M,I,k,O,C,P,D,F,_,R,L,Q,G,Y,W,V,T,H,K,N;return Qa(this,function(te){switch(te.label){case 0:if(u.type!==0)return[3,5];f=void 0,d=u.url,te.label=1;case 1:return te.trys.push([1,3,,4]),[4,s.context.cache.match(d)];case 2:return f=te.sent(),[3,4];case 3:return te.sent(),s.context.logger.error("Error loading background-image "+d),[3,4];case 4:return f&&(p=MT(t,n,[f.width,f.height,f.width/f.height]),C=p[0],L=p[1],Q=p[2],F=p[3],_=p[4],k=s.ctx.createPattern(s.resizeImage(f,F,_),"repeat"),s.renderRepeat(C,k,L,Q)),[3,6];case 5:n0e(u)?(v=MT(t,n,[null,null,null]),C=v[0],L=v[1],Q=v[2],F=v[3],_=v[4],m=Zge(u.angle,F,_),g=m[0],w=m[1],b=m[2],E=m[3],B=m[4],S=document.createElement("canvas"),S.width=F,S.height=_,M=S.getContext("2d"),I=M.createLinearGradient(w,E,b,B),M5(u.stops,g).forEach(function(oe){return I.addColorStop(oe.stop,Xi(oe.color))}),M.fillStyle=I,M.fillRect(0,0,F,_),F>0&&_>0&&(k=s.ctx.createPattern(S,"repeat"),s.renderRepeat(C,k,L,Q))):r0e(u)&&(O=MT(t,n,[null,null,null]),C=O[0],P=O[1],D=O[2],F=O[3],_=O[4],R=u.position.length===0?[TO]:u.position,L=br(R[0],F),Q=br(R[R.length-1],_),G=Jge(u,L,Q,F,_),Y=G[0],W=G[1],Y>0&&W>0&&(V=s.ctx.createRadialGradient(P+L,D+Q,0,P+L,D+Q,Y),M5(u.stops,Y*2).forEach(function(oe){return V.addColorStop(oe.stop,Xi(oe.color))}),s.path(C),s.ctx.fillStyle=V,Y!==W?(T=t.bounds.left+.5*t.bounds.width,H=t.bounds.top+.5*t.bounds.height,K=W/Y,N=1/K,s.ctx.save(),s.ctx.translate(T,H),s.ctx.transform(1,0,0,K,0,0),s.ctx.translate(-T,-H),s.ctx.fillRect(P,N*(D-H)+H,F,_*N),s.ctx.restore()):s.ctx.fill())),te.label=6;case 6:return n--,[2]}})},s=this,a=0,o=t.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return a<o.length?(l=o[a],[5,i(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,i){return Eo(this,void 0,void 0,function(){return Qa(this,function(s){return this.path($5(i,n)),this.ctx.fillStyle=Xi(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,i,s){return Eo(this,void 0,void 0,function(){var a,o;return Qa(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return a=Gye(s,i),this.path(a),this.ctx.fillStyle=Xi(t),this.ctx.fill(),o=jye(s,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Eo(this,void 0,void 0,function(){var n,i,s,a,o,l,c,u,f=this;return Qa(this,function(d){switch(d.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,i=!lm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=twe(fp(n.backgroundClip,0),t.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),lm(n.backgroundColor)||(this.ctx.fillStyle=Xi(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var v=f1(t.curves),m=p.inset?0:$ye,g=zye(v,-m+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(v),f.ctx.clip(),f.mask(g)):(f.mask(v),f.ctx.clip(),f.path(g)),f.ctx.shadowOffsetX=p.offsetX.number+m,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Xi(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Xi(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),d.label=2;case 2:o=0,l=0,c=s,d.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!lm(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return d.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:d.sent(),d.label=11;case 11:o++,d.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,i,s,a){return Eo(this,void 0,void 0,function(){var o,l,c,u,f,d,p,v,m,g,w,b,E,B,S,M,S,M;return Qa(this,function(I){return this.ctx.save(),o=Wye(s,i),l=$5(s,i),a===2&&(this.path(l),this.ctx.clip()),Io(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Io(l[1])?(f=l[1].end.x,d=l[1].end.y):(f=l[1].x,d=l[1].y),i===0||i===2?p=Math.abs(c-f):p=Math.abs(u-d),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),v=n<3?n*3:n*2,m=n<3?n*2:n,a===3&&(v=n,m=n),g=!0,p<=v*2?g=!1:p<=v*2+m?(w=p/(2*v+m),v*=w,m*=w):(b=Math.floor((p+m)/(v+m)),E=(p-b*v)/(b-1),B=(p-(b+1)*v)/b,m=B<=0||Math.abs(m-E)<Math.abs(m-B)?E:B),g&&(a===3?this.ctx.setLineDash([0,v+m]):this.ctx.setLineDash([v,m])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Xi(t),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(Io(l[0])&&(S=l[3],M=l[0],this.ctx.beginPath(),this.formatPath([new yt(S.end.x,S.end.y),new yt(M.start.x,M.start.y)]),this.ctx.stroke()),Io(l[1])&&(S=l[1],M=l[2],this.ctx.beginPath(),this.formatPath([new yt(S.end.x,S.end.y),new yt(M.start.x,M.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Eo(this,void 0,void 0,function(){var n;return Qa(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Xi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=Vye(t),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(iX);var ewe=function(r){return r instanceof jY||r instanceof GY?!0:r instanceof FO&&r.type!==A1&&r.type!==u1},twe=function(r,e){switch(r){case 0:return f1(e);case 2:return Nye(e);case 1:default:return h1(e)}},nwe=function(r){switch(r){case 1:return"center";case 2:return"right";case 0:default:return"left"}},rwe=["-apple-system","system-ui"],iwe=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return rwe.indexOf(e)===-1}):r};(function(r){xl(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(t){return Eo(this,void 0,void 0,function(){var n,i;return Qa(this,function(s){switch(s.label){case 0:return n=xL(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,swe(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Xi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(iX);var swe=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})};typeof window<"u"&&Dye.setContext(window);/*!
 * @pixiv/three-vrm v3.4.2
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var ax=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),qn=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),p1=class extends Tn{constructor(r){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${r}`,this.expressionName=r,this.type="VRMExpression",this.visible=!1}get binds(){return this._binds}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.outputWeight?1:0:this.overrideBlink==="blend"?this.outputWeight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.outputWeight?1:0:this.overrideLookAt==="blend"?this.outputWeight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.outputWeight?1:0:this.overrideMouth==="blend"?this.outputWeight:0}get outputWeight(){return this.isBinary?this.weight>.5?1:0:this.weight}addBind(r){this._binds.push(r)}deleteBind(r){const e=this._binds.indexOf(r);e>=0&&this._binds.splice(e,1)}applyWeight(r){var e;let t=this.outputWeight;t*=(e=r?.multiplier)!=null?e:1,this.isBinary&&t<1&&(t=0),this._binds.forEach(n=>n.applyWeight(t))}clearAppliedWeight(){this._binds.forEach(r=>r.clearAppliedWeight())}};function sX(r,e,t){var n,i;const s=r.parser.json,a=(n=s.nodes)==null?void 0:n[e];if(a==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const o=a.mesh;if(o==null)return null;const l=(i=s.meshes)==null?void 0:i[o];if(l==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${o}] of glTF but the mesh doesn't exist`),null;const c=l.primitives.length,u=[];return t.traverse(f=>{u.length<c&&f.isMesh&&u.push(f)}),u}function t8(r,e){return qn(this,null,function*(){const t=yield r.parser.getDependency("node",e);return sX(r,e,t)})}function n8(r){return qn(this,null,function*(){const e=yield r.parser.getDependencies("node"),t=new Map;return e.forEach((n,i)=>{const s=sX(r,i,n);s!=null&&t.set(i,s)}),t})}var $i={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function aX(r){return Math.max(Math.min(r,1),0)}var m1=class oX{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values($i));return Object.entries(this._expressionMap).forEach(([n,i])=>{t.has(n)&&(e[n]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values($i));return Object.entries(this._expressionMap).forEach(([n,i])=>{t.has(n)||(e[n]=i)}),e}copy(e){return this._expressions.concat().forEach(n=>{this.unregisterExpression(n)}),e._expressions.forEach(n=>{this.registerExpression(n)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new oX().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!=null?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const n=this.getExpression(e);return(t=n?.weight)!=null?t:null}setValue(e,t){const n=this.getExpression(e);n&&(n.weight=aX(t))}resetValues(){this._expressions.forEach(e=>{e.weight=0})}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let n=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(n*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(n*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(n*=e.mouth),t.applyWeight({multiplier:n})})}_calculateWeightMultipliers(){let e=1,t=1,n=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,n-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),n=Math.max(0,n),{blink:e,lookAt:t,mouth:n}}},x0={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",RimColor:"rimColor",OutlineColor:"outlineColor"},awe={_Color:x0.Color,_EmissionColor:x0.EmissionColor,_ShadeColor:x0.ShadeColor,_RimColor:x0.RimColor,_OutlineColor:x0.OutlineColor},owe=new st,lX=class cX{constructor({material:e,type:t,targetValue:n,targetAlpha:i}){this.material=e,this.type=t,this.targetValue=n,this.targetAlpha=i??1;const s=this._initColorBindState(),a=this._initAlphaBindState();this._state={color:s,alpha:a}}applyWeight(e){const{color:t,alpha:n}=this._state;if(t!=null){const{propertyName:i,deltaValue:s}=t,a=this.material[i];a?.add(owe.copy(s).multiplyScalar(e))}if(n!=null){const{propertyName:i,deltaValue:s}=n;this.material[i]!=null&&(this.material[i]+=s*e)}}clearAppliedWeight(){const{color:e,alpha:t}=this._state;if(e!=null){const{propertyName:n,initialValue:i}=e,s=this.material[n];s?.copy(i)}if(t!=null){const{propertyName:n,initialValue:i}=t;this.material[n]!=null&&(this.material[n]=i)}}_initColorBindState(){var e,t,n;const{material:i,type:s,targetValue:a}=this,o=this._getPropertyNameMap(),l=(t=(e=o?.[s])==null?void 0:e[0])!=null?t:null;if(l==null)return console.warn(`Tried to add a material color bind to the material ${(n=i.name)!=null?n:"(no name)"}, the type ${s} but the material or the type is not supported.`),null;const u=i[l].clone(),f=new st(a.r-u.r,a.g-u.g,a.b-u.b);return{propertyName:l,initialValue:u,deltaValue:f}}_initAlphaBindState(){var e,t,n;const{material:i,type:s,targetAlpha:a}=this,o=this._getPropertyNameMap(),l=(t=(e=o?.[s])==null?void 0:e[1])!=null?t:null;if(l==null&&a!==1)return console.warn(`Tried to add a material alpha bind to the material ${(n=i.name)!=null?n:"(no name)"}, the type ${s} but the material or the type does not support alpha.`),null;if(l==null)return null;const c=i[l],u=a-c;return{propertyName:l,initialValue:c,deltaValue:u}}_getPropertyNameMap(){var e,t;return(t=(e=Object.entries(cX._propertyNameMapMap).find(([n])=>this.material[n]===!0))==null?void 0:e[1])!=null?t:null}};lX._propertyNameMapMap={isMeshStandardMaterial:{color:["color","opacity"],emissionColor:["emissive",null]},isMeshBasicMaterial:{color:["color","opacity"]},isMToonMaterial:{color:["color","opacity"],emissionColor:["emissive",null],outlineColor:["outlineColorFactor",null],matcapColor:["matcapFactor",null],rimColor:["parametricRimColorFactor",null],shadeColor:["shadeColorFactor",null]}};var r8=lX,Im=class{constructor({primitives:r,index:e,weight:t}){this.primitives=r,this.index=e,this.weight=t}applyWeight(r){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)==null?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]+=this.weight*r)})}clearAppliedWeight(){this.primitives.forEach(r=>{var e;((e=r.morphTargetInfluences)==null?void 0:e[this.index])!=null&&(r.morphTargetInfluences[this.index]=0)})}},i8=new pt,uX=class AX{constructor({material:e,scale:t,offset:n}){var i,s;this.material=e,this.scale=t,this.offset=n;const a=(i=Object.entries(AX._propertyNamesMap).find(([o])=>e[o]===!0))==null?void 0:i[1];a==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!=null?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],a.forEach(o=>{var l;const c=(l=e[o])==null?void 0:l.clone();if(!c)return null;e[o]=c;const u=c.offset.clone(),f=c.repeat.clone(),d=n.clone().sub(u),p=t.clone().sub(f);this._properties.push({name:o,initialOffset:u,deltaOffset:d,initialScale:f,deltaScale:p})}))}applyWeight(e){this._properties.forEach(t=>{const n=this.material[t.name];n!==void 0&&(n.offset.add(i8.copy(t.deltaOffset).multiplyScalar(e)),n.repeat.add(i8.copy(t.deltaScale).multiplyScalar(e)))})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale))})}};uX._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};var s8=uX,lwe=new Set(["1.0","1.0-beta"]),fX=class hX{get name(){return"VRMExpressionLoaderPlugin"}constructor(e){this.parser=e}afterRoot(e){return qn(this,null,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return qn(this,null,function*(){const t=yield this._v1Import(e);if(t)return t;const n=yield this._v0Import(e);return n||null})}_v1Import(e){return qn(this,null,function*(){var t,n;const i=this.parser.json;if(!(((t=i.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(n=i.extensions)==null?void 0:n.VRMC_vrm;if(!a)return null;const o=a.specVersion;if(!lwe.has(o))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${o}"`),null;const l=a.expressions;if(!l)return null;const c=new Set(Object.values($i)),u=new Map;l.preset!=null&&Object.entries(l.preset).forEach(([d,p])=>{if(p!=null){if(!c.has(d)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${d}" detected. Ignoring the expression`);return}u.set(d,p)}}),l.custom!=null&&Object.entries(l.custom).forEach(([d,p])=>{if(c.has(d)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${d}". Ignoring the expression`);return}u.set(d,p)});const f=new m1;return yield Promise.all(Array.from(u.entries()).map(d=>qn(this,[d],function*([p,v]){var m,g,w,b,E,B,S;const M=new p1(p);if(e.scene.add(M),M.isBinary=(m=v.isBinary)!=null?m:!1,M.overrideBlink=(g=v.overrideBlink)!=null?g:"none",M.overrideLookAt=(w=v.overrideLookAt)!=null?w:"none",M.overrideMouth=(b=v.overrideMouth)!=null?b:"none",(E=v.morphTargetBinds)==null||E.forEach(I=>qn(this,null,function*(){var k;if(I.node===void 0||I.index===void 0)return;const O=yield t8(e,I.node),C=I.index;if(!O.every(P=>Array.isArray(P.morphTargetInfluences)&&C<P.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${v.name} attempts to index morph #${C} but not found.`);return}M.addBind(new Im({primitives:O,index:C,weight:(k=I.weight)!=null?k:1}))})),v.materialColorBinds||v.textureTransformBinds){const I=[];e.scene.traverse(k=>{const O=k.material;O&&(Array.isArray(O)?I.push(...O):I.push(O))}),(B=v.materialColorBinds)==null||B.forEach(k=>qn(this,null,function*(){I.filter(C=>{var P;const D=(P=this.parser.associations.get(C))==null?void 0:P.materials;return k.material===D}).forEach(C=>{M.addBind(new r8({material:C,type:k.type,targetValue:new st().fromArray(k.targetValue),targetAlpha:k.targetValue[3]}))})})),(S=v.textureTransformBinds)==null||S.forEach(k=>qn(this,null,function*(){I.filter(C=>{var P;const D=(P=this.parser.associations.get(C))==null?void 0:P.materials;return k.material===D}).forEach(C=>{var P,D;M.addBind(new s8({material:C,offset:new pt().fromArray((P=k.offset)!=null?P:[0,0]),scale:new pt().fromArray((D=k.scale)!=null?D:[1,1])}))})}))}f.registerExpression(M)}))),f})}_v0Import(e){return qn(this,null,function*(){var t;const n=this.parser.json,i=(t=n.extensions)==null?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const a=new m1,o=s.blendShapeGroups;if(!o)return a;const l=new Set;return yield Promise.all(o.map(c=>qn(this,null,function*(){var u;const f=c.presetName,d=f!=null&&hX.v0v1PresetNameMap[f]||null,p=d??c.name;if(p==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(l.has(p)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${f} has duplicated entries. Ignoring the expression`);return}l.add(p);const v=new p1(p);e.scene.add(v),v.isBinary=(u=c.isBinary)!=null?u:!1,c.binds&&c.binds.forEach(g=>qn(this,null,function*(){var w;if(g.mesh===void 0||g.index===void 0)return;const b=[];(w=n.nodes)==null||w.forEach((B,S)=>{B.mesh===g.mesh&&b.push(S)});const E=g.index;yield Promise.all(b.map(B=>qn(this,null,function*(){var S;const M=yield t8(e,B);if(!M.every(I=>Array.isArray(I.morphTargetInfluences)&&E<I.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${c.name} attempts to index ${E}th morph but not found.`);return}v.addBind(new Im({primitives:M,index:E,weight:.01*((S=g.weight)!=null?S:100)}))})))}));const m=c.materialValues;m&&m.length!==0&&m.forEach(g=>{if(g.materialName===void 0||g.propertyName===void 0||g.targetValue===void 0)return;const w=[];e.scene.traverse(E=>{if(E.material){const B=E.material;Array.isArray(B)?w.push(...B.filter(S=>(S.name===g.materialName||S.name===g.materialName+" (Outline)")&&w.indexOf(S)===-1)):B.name===g.materialName&&w.indexOf(B)===-1&&w.push(B)}});const b=g.propertyName;w.forEach(E=>{if(b==="_MainTex_ST"){const S=new pt(g.targetValue[0],g.targetValue[1]),M=new pt(g.targetValue[2],g.targetValue[3]);M.y=1-M.y-S.y,v.addBind(new s8({material:E,scale:S,offset:M}));return}const B=awe[b];if(B){v.addBind(new r8({material:E,type:B,targetValue:new st().fromArray(g.targetValue),targetAlpha:g.targetValue[3]}));return}console.warn(b+" is not supported")})}),a.registerExpression(v)}))),a})}};fX.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};var cwe=fX,DO=class hp{constructor(e,t){this._firstPersonOnlyLayer=hp.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=hp.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new hp(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=hp.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=hp.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(n=>{n.meshes.forEach(i=>{n.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):n.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):n.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,n,i){let s=0;if(t!=null&&t.length>0)for(let a=0;a<e.length;a+=3){const o=e[a],l=e[a+1],c=e[a+2],u=t[o],f=n[o];if(u[0]>0&&i.includes(f[0])||u[1]>0&&i.includes(f[1])||u[2]>0&&i.includes(f[2])||u[3]>0&&i.includes(f[3]))continue;const d=t[l],p=n[l];if(d[0]>0&&i.includes(p[0])||d[1]>0&&i.includes(p[1])||d[2]>0&&i.includes(p[2])||d[3]>0&&i.includes(p[3]))continue;const v=t[c],m=n[c];v[0]>0&&i.includes(m[0])||v[1]>0&&i.includes(m[1])||v[2]>0&&i.includes(m[2])||v[3]>0&&i.includes(m[3])||(e[s++]=o,e[s++]=l,e[s++]=c)}return s}_createErasedMesh(e,t){const n=new yl(e.geometry.clone(),e.material);n.name=`${e.name}(erase)`,n.frustumCulled=e.frustumCulled,n.layers.set(this._firstPersonOnlyLayer);const i=n.geometry,s=i.getAttribute("skinIndex"),a=s instanceof H6?[]:s.array,o=[];for(let m=0;m<a.length;m+=4)o.push([a[m],a[m+1],a[m+2],a[m+3]]);const l=i.getAttribute("skinWeight"),c=l instanceof H6?[]:l.array,u=[];for(let m=0;m<c.length;m+=4)u.push([c[m],c[m+1],c[m+2],c[m+3]]);const f=i.getIndex();if(!f)throw new Error("The geometry doesn't have an index buffer");const d=Array.from(f.array),p=this._excludeTriangles(d,u,o,t),v=[];for(let m=0;m<p;m++)v[m]=d[m];return i.setIndex(v),e.onBeforeRender&&(n.onBeforeRender=e.onBeforeRender),n.bind(new Ru(e.skeleton.bones,e.skeleton.boneInverses),new at),n}_createHeadlessModelForSkinnedMesh(e,t){const n=[];if(t.skeleton.bones.forEach((s,a)=>{this._isEraseTarget(s)&&n.push(a)}),!n.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,n);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new hs;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(n=>n.type==="SkinnedMesh").forEach(n=>{const i=n;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}};DO.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;DO.DEFAULT_THIRDPERSON_ONLY_LAYER=10;var a8=DO,uwe=new Set(["1.0","1.0-beta"]),Awe=class{get name(){return"VRMFirstPersonLoaderPlugin"}constructor(r){this.parser=r}afterRoot(r){return qn(this,null,function*(){const e=r.userData.vrmHumanoid;if(e!==null){if(e===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");r.userData.vrmFirstPerson=yield this._import(r,e)}})}_import(r,e){return qn(this,null,function*(){if(e==null)return null;const t=yield this._v1Import(r,e);if(t)return t;const n=yield this._v0Import(r,e);return n||null})}_v1Import(r,e){return qn(this,null,function*(){var t,n;const i=this.parser.json;if(!(((t=i.extensionsUsed)==null?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(n=i.extensions)==null?void 0:n.VRMC_vrm;if(!a)return null;const o=a.specVersion;if(!uwe.has(o))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${o}"`),null;const l=a.firstPerson,c=[],u=yield n8(r);return Array.from(u.entries()).forEach(([f,d])=>{var p,v;const m=(p=l?.meshAnnotations)==null?void 0:p.find(g=>g.node===f);c.push({meshes:d,type:(v=m?.type)!=null?v:"auto"})}),new a8(e,c)})}_v0Import(r,e){return qn(this,null,function*(){var t;const n=this.parser.json,i=(t=n.extensions)==null?void 0:t.VRM;if(!i)return null;const s=i.firstPerson;if(!s)return null;const a=[],o=yield n8(r);return Array.from(o.entries()).forEach(([l,c])=>{const u=n.nodes[l],f=s.meshAnnotations?s.meshAnnotations.find(d=>d.mesh===u.mesh):void 0;a.push({meshes:c,type:this._convertV0FlagToV1Type(f?.firstPersonFlag)})}),new a8(e,a)})}_convertV0FlagToV1Type(r){return r==="FirstPersonOnly"?"firstPersonOnly":r==="ThirdPersonOnly"?"thirdPersonOnly":r==="Both"?"both":"auto"}},o8=new ae,l8=new ae,fwe=new Rt,c8=class extends hs{constructor(r){super(),this.vrmHumanoid=r,this._boneAxesMap=new Map,Object.values(r.humanBones).forEach(e=>{const t=new sde(1);t.matrixAutoUpdate=!1,t.material.depthTest=!1,t.material.depthWrite=!1,this.add(t),this._boneAxesMap.set(e,t)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(r=>{r.geometry.dispose(),r.material.dispose()})}updateMatrixWorld(r){Array.from(this._boneAxesMap.entries()).forEach(([e,t])=>{e.node.updateWorldMatrix(!0,!1),e.node.matrixWorld.decompose(o8,fwe,l8);const n=o8.set(.1,.1,.1).divide(l8);t.matrix.copy(e.node.matrixWorld).scale(n)}),super.updateMatrixWorld(r)}},CT=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],ay={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},hwe={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function dX(r){return r.invert?r.invert():r.inverse(),r}var kf=new ae,Hf=new Rt,SL=class{constructor(r){this.humanBones=r,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const r={};return Object.keys(this.humanBones).forEach(e=>{const t=e,n=this.getBoneNode(t);n&&(kf.copy(n.position),Hf.copy(n.quaternion),r[t]={position:kf.toArray(),rotation:Hf.toArray()})}),r}getPose(){const r={};return Object.keys(this.humanBones).forEach(e=>{const t=e,n=this.getBoneNode(t);if(!n)return;kf.set(0,0,0),Hf.identity();const i=this.restPose[t];i?.position&&kf.fromArray(i.position).negate(),i?.rotation&&dX(Hf.fromArray(i.rotation)),kf.add(n.position),Hf.premultiply(n.quaternion),r[t]={position:kf.toArray(),rotation:Hf.toArray()}}),r}setPose(r){Object.entries(r).forEach(([e,t])=>{const n=e,i=this.getBoneNode(n);if(!i)return;const s=this.restPose[n];s&&(t?.position&&(i.position.fromArray(t.position),s.position&&i.position.add(kf.fromArray(s.position))),t?.rotation&&(i.quaternion.fromArray(t.rotation),s.rotation&&i.quaternion.multiply(Hf.fromArray(s.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([r,e])=>{const t=this.getBoneNode(r);t&&(e?.position&&t.position.fromArray(e.position),e?.rotation&&t.quaternion.fromArray(e.rotation))})}getBone(r){var e;return(e=this.humanBones[r])!=null?e:void 0}getBoneNode(r){var e,t;return(t=(e=this.humanBones[r])==null?void 0:e.node)!=null?t:null}},TT=new ae,dwe=new Rt,pwe=new ae,u8=class pX extends SL{static _setupTransforms(e){const t=new Tn;t.name="VRMHumanoidRig";const n={},i={},s={};CT.forEach(o=>{var l;const c=e.getBoneNode(o);if(c){const u=new ae,f=new Rt;c.updateWorldMatrix(!0,!1),c.matrixWorld.decompose(u,f,TT),n[o]=u,i[o]=c.quaternion.clone();const d=new Rt;(l=c.parent)==null||l.matrixWorld.decompose(TT,d,TT),s[o]=d}});const a={};return CT.forEach(o=>{var l;const c=e.getBoneNode(o);if(c){const u=n[o];let f=o,d;for(;d==null&&(f=hwe[f],f!=null);)d=n[f];const p=new Tn;p.name="Normalized_"+c.name,(f?(l=a[f])==null?void 0:l.node:t).add(p),p.position.copy(u),d&&p.position.sub(d),a[o]={node:p}}}),{rigBones:a,root:t,parentWorldRotations:s,boneRotations:i}}constructor(e){const{rigBones:t,root:n,parentWorldRotations:i,boneRotations:s}=pX._setupTransforms(e);super(t),this.original=e,this.root=n,this._parentWorldRotations=i,this._boneRotations=s}update(){CT.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const n=this.getBoneNode(e),i=this._parentWorldRotations[e],s=dwe.copy(i).invert(),a=this._boneRotations[e];if(t.quaternion.copy(n.quaternion).multiply(i).premultiply(s).multiply(a),e==="hips"){const o=n.getWorldPosition(pwe);t.parent.updateWorldMatrix(!0,!1);const l=t.parent.matrixWorld,c=o.applyMatrix4(l.invert());t.position.copy(c)}}})}},A8=class mX{get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}constructor(e,t){var n;this.autoUpdateHumanBones=(n=t?.autoUpdateHumanBones)!=null?n:!0,this._rawHumanBones=new SL(e),this._normalizedHumanBones=new u8(this._rawHumanBones)}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new SL(e.humanBones),this._normalizedHumanBones=new u8(this._rawHumanBones),this}clone(){return new mX(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}},mwe={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},gwe=new Set(["1.0","1.0-beta"]),f8={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"},vwe=class{get name(){return"VRMHumanoidLoaderPlugin"}constructor(r,e){this.parser=r,this.helperRoot=e?.helperRoot,this.autoUpdateHumanBones=e?.autoUpdateHumanBones}afterRoot(r){return qn(this,null,function*(){r.userData.vrmHumanoid=yield this._import(r)})}_import(r){return qn(this,null,function*(){const e=yield this._v1Import(r);if(e)return e;const t=yield this._v0Import(r);return t||null})}_v1Import(r){return qn(this,null,function*(){var e,t;const n=this.parser.json;if(!(((e=n.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const s=(t=n.extensions)==null?void 0:t.VRMC_vrm;if(!s)return null;const a=s.specVersion;if(!gwe.has(a))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const o=s.humanoid;if(!o)return null;const l=o.humanBones.leftThumbIntermediate!=null||o.humanBones.rightThumbIntermediate!=null,c={};o.humanBones!=null&&(yield Promise.all(Object.entries(o.humanBones).map(f=>qn(this,[f],function*([d,p]){let v=d;const m=p.node;if(l){const w=f8[v];w!=null&&(v=w)}const g=yield this.parser.getDependency("node",m);if(g==null){console.warn(`A glTF node bound to the humanoid bone ${v} (index = ${m}) does not exist`);return}c[v]={node:g}}))));const u=new A8(this._ensureRequiredBonesExist(c),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(r.scene.add(u.normalizedHumanBonesRoot),this.helperRoot){const f=new c8(u);this.helperRoot.add(f),f.renderOrder=this.helperRoot.renderOrder}return u})}_v0Import(r){return qn(this,null,function*(){var e;const n=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!n)return null;const i=n.humanoid;if(!i)return null;const s={};i.humanBones!=null&&(yield Promise.all(i.humanBones.map(o=>qn(this,null,function*(){const l=o.bone,c=o.node;if(l==null||c==null)return;const u=yield this.parser.getDependency("node",c);if(u==null){console.warn(`A glTF node bound to the humanoid bone ${l} (index = ${c}) does not exist`);return}const f=f8[l],d=f??l;if(s[d]!=null){console.warn(`Multiple bone entries for ${d} detected (index = ${c}), ignoring duplicated entries.`);return}s[d]={node:u}}))));const a=new A8(this._ensureRequiredBonesExist(s),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(r.scene.add(a.normalizedHumanBonesRoot),this.helperRoot){const o=new c8(a);this.helperRoot.add(o),o.renderOrder=this.helperRoot.renderOrder}return a})}_ensureRequiredBonesExist(r){const e=Object.values(mwe).filter(t=>r[t]==null);if(e.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${e.join(", ")}`);return r}},h8=class extends Gn{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new Lt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,r=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,r=!0),r&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let r=0;r<64;r++){const e=r/63*this._currentTheta;this._attrPos.setXYZ(r+1,this._currentRadius*Math.sin(e),0,this._currentRadius*Math.cos(e))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let r=0;r<63;r++)this._attrIndex.setXYZ(r*3,0,r+1,r+2);this._attrIndex.needsUpdate=!0}},ywe=class extends Gn{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new ae,this._currentTail=new ae,this._attrPos=new Lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,r=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),r=!0),r&&this._buildPosition()}_buildPosition(){for(let r=0;r<32;r++){const e=r/16*Math.PI;this._attrPos.setXYZ(r,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+r,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+r,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let r=0;r<32;r++){const e=(r+1)%32;this._attrIndex.setXY(r*2,r,e),this._attrIndex.setXY(64+r*2,32+r,32+e),this._attrIndex.setXY(128+r*2,64+r,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},ox=new Rt,d8=new Rt,b0=new ae,p8=new ae,m8=Math.sqrt(2)/2,wwe=new Rt(0,0,-m8,m8),_we=new ae(0,1,0),xwe=class extends hs{constructor(r){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=r;{const e=new h8;e.radius=.5;const t=new ya({color:65280,transparent:!0,opacity:.5,side:Ps,depthTest:!1,depthWrite:!1});this._meshPitch=new lr(e,t),this.add(this._meshPitch)}{const e=new h8;e.radius=.5;const t=new ya({color:16711680,transparent:!0,opacity:.5,side:Ps,depthTest:!1,depthWrite:!1});this._meshYaw=new lr(e,t),this.add(this._meshYaw)}{const e=new ywe;e.radius=.1;const t=new Iu({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new My(e,t),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(r){const e=sn.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=e,this._meshYaw.geometry.update();const t=sn.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=t,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(b0),this.vrmLookAt.getLookAtWorldQuaternion(ox),ox.multiply(this.vrmLookAt.getFaceFrontQuaternion(d8)),this._meshYaw.position.copy(b0),this._meshYaw.quaternion.copy(ox),this._meshPitch.position.copy(b0),this._meshPitch.quaternion.copy(ox),this._meshPitch.quaternion.multiply(d8.setFromAxisAngle(_we,e)),this._meshPitch.quaternion.multiply(wwe);const{target:n,autoUpdate:i}=this.vrmLookAt;n!=null&&i&&(n.getWorldPosition(p8).sub(b0),this._lineTarget.geometry.tail.copy(p8),this._lineTarget.geometry.update(),this._lineTarget.position.copy(b0)),super.updateMatrixWorld(r)}},bwe=new ae,Ewe=new ae;function BL(r,e){return r.matrixWorld.decompose(bwe,e,Ewe),e}function xb(r){return[Math.atan2(-r.z,r.x),Math.atan2(r.y,Math.sqrt(r.x*r.x+r.z*r.z))]}function g8(r){const e=Math.round(r/2/Math.PI);return r-2*Math.PI*e}var v8=new ae(0,0,1),Swe=new ae,Bwe=new ae,Mwe=new ae,Cwe=new Rt,RT=new Rt,y8=new Rt,Twe=new Rt,IT=new Jr,gX=class vX{constructor(e,t){this.offsetFromHeadBone=new ae,this.autoUpdate=!0,this.faceFront=new ae(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new Rt)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new Jr)}getEuler(e){return e.set(sn.DEG2RAD*this._pitch,sn.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new vX(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return BL(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(v8)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,n]=xb(this.faceFront);return IT.set(0,.5*Math.PI+t,n,"YZX"),e.setFromEuler(IT).premultiply(Twe.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(RT),this.getFaceFrontQuaternion(y8),e.copy(v8).applyQuaternion(RT).applyQuaternion(y8).applyEuler(this.getEuler(IT))}lookAt(e){const t=Cwe.copy(this._restHeadWorldQuaternion).multiply(dX(this.getLookAtWorldQuaternion(RT))),n=this.getLookAtWorldPosition(Bwe),i=Mwe.copy(e).sub(n).applyQuaternion(t).normalize(),[s,a]=xb(this.faceFront),[o,l]=xb(i),c=g8(o-s),u=g8(a-l);this._yaw=sn.RAD2DEG*c,this._pitch=sn.RAD2DEG*u,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(Swe)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}};gX.EULER_ORDER="YXZ";var Rwe=gX,Iwe=new ae(0,0,1),Ll=new Rt,zd=new Rt,xo=new Jr(0,0,0,"YXZ"),bb=class{constructor(r,e,t,n,i){this.humanoid=r,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=n,this.rangeMapVerticalUp=i,this.faceFront=new ae(0,0,1),this._restQuatLeftEye=new Rt,this._restQuatRightEye=new Rt,this._restLeftEyeParentWorldQuat=new Rt,this._restRightEyeParentWorldQuat=new Rt;const s=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");s&&(this._restQuatLeftEye.copy(s.quaternion),BL(s.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),BL(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(r,e){const t=this.humanoid.getRawBoneNode("leftEye"),n=this.humanoid.getRawBoneNode("rightEye"),i=this.humanoid.getNormalizedBoneNode("leftEye"),s=this.humanoid.getNormalizedBoneNode("rightEye");t&&(e<0?xo.x=-sn.DEG2RAD*this.rangeMapVerticalDown.map(-e):xo.x=sn.DEG2RAD*this.rangeMapVerticalUp.map(e),r<0?xo.y=-sn.DEG2RAD*this.rangeMapHorizontalInner.map(-r):xo.y=sn.DEG2RAD*this.rangeMapHorizontalOuter.map(r),Ll.setFromEuler(xo),this._getWorldFaceFrontQuat(zd),i.quaternion.copy(zd).multiply(Ll).multiply(zd.invert()),Ll.copy(this._restLeftEyeParentWorldQuat),t.quaternion.copy(i.quaternion).multiply(Ll).premultiply(Ll.invert()).multiply(this._restQuatLeftEye)),n&&(e<0?xo.x=-sn.DEG2RAD*this.rangeMapVerticalDown.map(-e):xo.x=sn.DEG2RAD*this.rangeMapVerticalUp.map(e),r<0?xo.y=-sn.DEG2RAD*this.rangeMapHorizontalOuter.map(-r):xo.y=sn.DEG2RAD*this.rangeMapHorizontalInner.map(r),Ll.setFromEuler(xo),this._getWorldFaceFrontQuat(zd),s.quaternion.copy(zd).multiply(Ll).multiply(zd.invert()),Ll.copy(this._restRightEyeParentWorldQuat),n.quaternion.copy(s.quaternion).multiply(Ll).premultiply(Ll.invert()).multiply(this._restQuatRightEye))}lookAt(r){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=sn.RAD2DEG*r.y,t=sn.RAD2DEG*r.x;this.applyYawPitch(e,t)}_getWorldFaceFrontQuat(r){if(this.faceFront.distanceToSquared(Iwe)<.01)return r.identity();const[e,t]=xb(this.faceFront);return xo.set(0,.5*Math.PI+e,t,"YZX"),r.setFromEuler(xo)}};bb.type="bone";var ML=class{constructor(r,e,t,n,i){this.expressions=r,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=t,this.rangeMapVerticalDown=n,this.rangeMapVerticalUp=i}applyYawPitch(r,e){e<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-e))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(e))),r<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-r))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(r)))}lookAt(r){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=sn.RAD2DEG*r.y,t=sn.RAD2DEG*r.x;this.applyYawPitch(e,t)}};ML.type="expression";var w8=class{constructor(r,e){this.inputMaxValue=r,this.outputScale=e}map(r){return this.outputScale*aX(r/this.inputMaxValue)}},Uwe=new Set(["1.0","1.0-beta"]),lx=.01,Fwe=class{get name(){return"VRMLookAtLoaderPlugin"}constructor(r,e){this.parser=r,this.helperRoot=e?.helperRoot}afterRoot(r){return qn(this,null,function*(){const e=r.userData.vrmHumanoid;if(e===null)return;if(e===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const t=r.userData.vrmExpressionManager;if(t!==null){if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");r.userData.vrmLookAt=yield this._import(r,e,t)}})}_import(r,e,t){return qn(this,null,function*(){if(e==null||t==null)return null;const n=yield this._v1Import(r,e,t);if(n)return n;const i=yield this._v0Import(r,e,t);return i||null})}_v1Import(r,e,t){return qn(this,null,function*(){var n,i,s;const a=this.parser.json;if(!(((n=a.extensionsUsed)==null?void 0:n.indexOf("VRMC_vrm"))!==-1))return null;const l=(i=a.extensions)==null?void 0:i.VRMC_vrm;if(!l)return null;const c=l.specVersion;if(!Uwe.has(c))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${c}"`),null;const u=l.lookAt;if(!u)return null;const f=u.type==="expression"?1:10,d=this._v1ImportRangeMap(u.rangeMapHorizontalInner,f),p=this._v1ImportRangeMap(u.rangeMapHorizontalOuter,f),v=this._v1ImportRangeMap(u.rangeMapVerticalDown,f),m=this._v1ImportRangeMap(u.rangeMapVerticalUp,f);let g;u.type==="expression"?g=new ML(t,d,p,v,m):g=new bb(e,d,p,v,m);const w=this._importLookAt(e,g);return w.offsetFromHeadBone.fromArray((s=u.offsetFromHeadBone)!=null?s:[0,.06,0]),w})}_v1ImportRangeMap(r,e){var t,n;let i=(t=r?.inputMaxValue)!=null?t:90;const s=(n=r?.outputScale)!=null?n:e;return i<lx&&(console.warn("VRMLookAtLoaderPlugin: inputMaxValue of a range map is too small. Consider reviewing the range map!"),i=lx),new w8(i,s)}_v0Import(r,e,t){return qn(this,null,function*(){var n,i,s,a;const l=(n=this.parser.json.extensions)==null?void 0:n.VRM;if(!l)return null;const c=l.firstPerson;if(!c)return null;const u=c.lookAtTypeName==="BlendShape"?1:10,f=this._v0ImportDegreeMap(c.lookAtHorizontalInner,u),d=this._v0ImportDegreeMap(c.lookAtHorizontalOuter,u),p=this._v0ImportDegreeMap(c.lookAtVerticalDown,u),v=this._v0ImportDegreeMap(c.lookAtVerticalUp,u);let m;c.lookAtTypeName==="BlendShape"?m=new ML(t,f,d,p,v):m=new bb(e,f,d,p,v);const g=this._importLookAt(e,m);return c.firstPersonBoneOffset?g.offsetFromHeadBone.set((i=c.firstPersonBoneOffset.x)!=null?i:0,(s=c.firstPersonBoneOffset.y)!=null?s:.06,-((a=c.firstPersonBoneOffset.z)!=null?a:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),m instanceof bb&&m.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(r,e){var t,n;const i=r?.curve;JSON.stringify(i)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported");let s=(t=r?.xRange)!=null?t:90;const a=(n=r?.yRange)!=null?n:e;return s<lx&&(console.warn("VRMLookAtLoaderPlugin: xRange of a degree map is too small. Consider reviewing the degree map!"),s=lx),new w8(s,a)}_importLookAt(r,e){const t=new Rwe(r,e);if(this.helperRoot){const n=new xwe(t);this.helperRoot.add(n),n.renderOrder=this.helperRoot.renderOrder}return t}};function Lwe(r,e){return typeof r!="string"||r===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(r)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(r)||/^data:.*,.*$/i.test(r)||/^blob:.*$/i.test(r)?r:e+r)}var Dwe=new Set(["1.0","1.0-beta"]),Owe=class{get name(){return"VRMMetaLoaderPlugin"}constructor(r,e){var t,n,i;this.parser=r,this.needThumbnailImage=(t=e?.needThumbnailImage)!=null?t:!1,this.acceptLicenseUrls=(n=e?.acceptLicenseUrls)!=null?n:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(i=e?.acceptV0Meta)!=null?i:!0}afterRoot(r){return qn(this,null,function*(){r.userData.vrmMeta=yield this._import(r)})}_import(r){return qn(this,null,function*(){const e=yield this._v1Import(r);if(e!=null)return e;const t=yield this._v0Import(r);return t??null})}_v1Import(r){return qn(this,null,function*(){var e,t,n;const i=this.parser.json;if(!(((e=i.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))!==-1))return null;const a=(t=i.extensions)==null?void 0:t.VRMC_vrm;if(a==null)return null;const o=a.specVersion;if(!Dwe.has(o))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${o}"`),null;const l=a.meta;if(!l)return null;const c=l.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(c))throw new Error(`VRMMetaLoaderPlugin: The license url "${c}" is not accepted`);let f;return this.needThumbnailImage&&l.thumbnailImage!=null&&(f=(n=yield this._extractGLTFImage(l.thumbnailImage))!=null?n:void 0),{metaVersion:"1",name:l.name,version:l.version,authors:l.authors,copyrightInformation:l.copyrightInformation,contactInformation:l.contactInformation,references:l.references,thirdPartyLicenses:l.thirdPartyLicenses,thumbnailImage:f,licenseUrl:l.licenseUrl,avatarPermission:l.avatarPermission,allowExcessivelyViolentUsage:l.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:l.allowExcessivelySexualUsage,commercialUsage:l.commercialUsage,allowPoliticalOrReligiousUsage:l.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:l.allowAntisocialOrHateUsage,creditNotation:l.creditNotation,allowRedistribution:l.allowRedistribution,modification:l.modification,otherLicenseUrl:l.otherLicenseUrl}})}_v0Import(r){return qn(this,null,function*(){var e;const n=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!n)return null;const i=n.meta;if(!i)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let s;return this.needThumbnailImage&&i.texture!=null&&i.texture!==-1&&(s=yield this.parser.getDependency("texture",i.texture)),{metaVersion:"0",allowedUserName:i.allowedUserName,author:i.author,commercialUssageName:i.commercialUssageName,contactInformation:i.contactInformation,licenseName:i.licenseName,otherLicenseUrl:i.otherLicenseUrl,otherPermissionUrl:i.otherPermissionUrl,reference:i.reference,sexualUssageName:i.sexualUssageName,texture:s??void 0,title:i.title,version:i.version,violentUssageName:i.violentUssageName}})}_extractGLTFImage(r){return qn(this,null,function*(){var e;const n=(e=this.parser.json.images)==null?void 0:e[r];if(n==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${r}] of glTF as a thumbnail but the image doesn't exist`),null;let i=n.uri;if(n.bufferView!=null){const a=yield this.parser.getDependency("bufferView",n.bufferView),o=new Blob([a],{type:n.mimeType});i=URL.createObjectURL(o)}return i==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${r}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new Qq().loadAsync(Lwe(i,this.parser.options.path)).catch(a=>(console.error(a),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}},Nwe=class{constructor(r){this.scene=r.scene,this.meta=r.meta,this.humanoid=r.humanoid,this.expressionManager=r.expressionManager,this.firstPerson=r.firstPerson,this.lookAt=r.lookAt}update(r){this.humanoid.update(),this.lookAt&&this.lookAt.update(r),this.expressionManager&&this.expressionManager.update()}},Pwe=class extends Nwe{constructor(r){super(r),this.materials=r.materials,this.springBoneManager=r.springBoneManager,this.nodeConstraintManager=r.nodeConstraintManager}update(r){super.update(r),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(r),this.materials&&this.materials.forEach(e=>{e.update&&e.update(r)})}},kwe=Object.defineProperty,_8=Object.getOwnPropertySymbols,Hwe=Object.prototype.hasOwnProperty,Qwe=Object.prototype.propertyIsEnumerable,x8=(r,e,t)=>e in r?kwe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b8=(r,e)=>{for(var t in e||(e={}))Hwe.call(e,t)&&x8(r,t,e[t]);if(_8)for(var t of _8(e))Qwe.call(e,t)&&x8(r,t,e[t]);return r},eh=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),zwe={"":3e3,srgb:3001};function Vwe(r,e){parseInt(bu,10)>=152?r.colorSpace=e:r.encoding=zwe[e]}var Gwe=class{get pending(){return Promise.all(this._pendings)}constructor(r,e){this._parser=r,this._materialParams=e,this._pendings=[]}assignPrimitive(r,e){e!=null&&(this._materialParams[r]=e)}assignColor(r,e,t){e!=null&&(this._materialParams[r]=new st().fromArray(e),t&&this._materialParams[r].convertSRGBToLinear())}assignTexture(r,e,t){return eh(this,null,function*(){const n=eh(this,null,function*(){e!=null&&(yield this._parser.assignTexture(this._materialParams,r,e),t&&Vwe(this._materialParams[r],"srgb"))});return this._pendings.push(n),n})}assignTextureByIndex(r,e,t){return eh(this,null,function*(){return this.assignTexture(r,e!=null?{index:e}:void 0,t)})}},jwe=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;

  // COMPAT: pre-r151 uses a common uvTransform
  #if THREE_VRM_THREE_REVISION < 151
    uniform mat3 uvTransform;
  #endif
#endif

// #include <uv2_pars_vertex>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    attribute vec2 uv2;
    varying vec2 vUv2;
    uniform mat3 uv2Transform;
  #endif
#endif

// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    // COMPAT: pre-r151 uses a common uvTransform
    #if THREE_VRM_THREE_REVISION >= 151
      vUv = uv;
    #else
      vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
  #endif

  // #include <uv2_vertex>
  // COMAPT: pre-r151 uses uv2 for lightMap and aoMap
  #if THREE_VRM_THREE_REVISION < 151
    #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
    #endif
  #endif

  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  #ifdef OUTLINE
    float worldNormalLength = length( transformedNormal );
    vec3 outlineOffset = outlineWidthFactor * worldNormalLength * objectNormal;

    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      float outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
      outlineOffset *= outlineTex;
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      outlineOffset *= vViewPosition.z / projectionMatrix[ 1 ].y;
    #endif

    gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,Wwe=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

// #include <uv2_pars_fragment>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    varying vec2 vUv2;
  #endif
#endif

#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#include <alphatest_pars_fragment>

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
// COMPAT: pre-r151 doesn't have BRDF_Lambert in <common>
#if THREE_VRM_THREE_REVISION < 151
  vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
  }
#endif

#include <lights_pars_begin>

#include <normal_pars_fragment>

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

// COMPAT: pre-r156 uses a struct GeometricContext
#if THREE_VRM_THREE_REVISION >= 157
  void RE_Direct_MToon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometryNormal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#else
  void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometry.normal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#endif

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
#if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

  uniform mat3 normalMatrix;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( TANGENTSPACE_NORMALMAP ) )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126, r151
  #if THREE_VRM_THREE_REVISION >= 151

    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {

      vec3 q0 = dFdx( eye_pos.xyz );
      vec3 q1 = dFdy( eye_pos.xyz );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = surf_norm;

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );

      return mat3( T * scale, B * scale, N );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <colorspace_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    vec4 sampledDiffuseColor = texture2D( map, mapUv );
    #ifdef DECODE_VIDEO_TEXTURE
      sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
    #endif
    diffuseColor *= sampledDiffuseColor;
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>

  // #include <normal_fragment_begin>
  float faceDirection = gl_FrontFacing ? 1.0 : -1.0;

  #ifdef FLAT_SHADED

    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );

  #else

    vec3 normal = normalize( vNormal );

    #ifdef DOUBLE_SIDED

      normal *= faceDirection;

    #endif

  #endif

  #ifdef USE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;

  #endif

  #ifdef USE_NORMALMAP_TANGENTSPACE

    #ifdef USE_TANGENT

      mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn = getTangentFrame( - vViewPosition, normal, normalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn[0] *= faceDirection;
      tbn[1] *= faceDirection;

    #endif

  #endif

  #ifdef USE_CLEARCOAT_NORMALMAP

    #ifdef USE_TANGENT

      mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn2[0] *= faceDirection;
      tbn2[1] *= faceDirection;

    #endif

  #endif

  // non perturbed normal for clearcoat among others

  vec3 nonPerturbedNormal = normal;

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  // COMPAT: pre-r151
  // USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
  #if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      normal = normal * faceDirection;

    #endif

    normal = normalize( normalMatrix * normal );

  // COMPAT: pre-r151
  // USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
  #elif defined( USE_NORMALMAP_TANGENTSPACE ) || defined( TANGENTSPACE_NORMALMAP )

    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    // COMPAT: pre-r151
    #if THREE_VRM_THREE_REVISION >= 151 || defined( USE_TANGENT )

      normal = normalize( tbn * mapN );

    #else

      normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  // COMPAT: pre-r156 uses a struct GeometricContext
  #if THREE_VRM_THREE_REVISION >= 157
    vec3 geometryPosition = - vViewPosition;
    vec3 geometryNormal = normal;
    vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    vec3 geometryClearcoatNormal;

    #ifdef USE_CLEARCOAT

      geometryClearcoatNormal = clearcoatNormal;

    #endif
  #else
    GeometricContext geometry;

    geometry.position = - vViewPosition;
    geometry.normal = normal;
    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    #ifdef USE_CLEARCOAT

      geometry.clearcoatNormal = clearcoatNormal;

    #endif
  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getPointLightInfo( pointLight, geometryPosition, directLight );
      #else
        getPointLightInfo( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getSpotLightInfo( spotLight, geometryPosition, directLight );
      #else
        getSpotLightInfo( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getDirectionalLightInfo( directionalLight, directLight );
      #else
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    // COMPAT: pre-r156 uses a struct GeometricContext
    // COMPAT: pre-r156 doesn't have a define USE_LIGHT_PROBES
    #if THREE_VRM_THREE_REVISION >= 157
      #if defined( USE_LIGHT_PROBES )
        irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
      #endif
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        // COMPAT: pre-r156 uses a struct GeometricContext
        #if THREE_VRM_THREE_REVISION >= 157
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  #ifdef OPAQUE
    diffuseColor.a = 1.0;
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`,Kwe={None:"none"},E8={None:"none",ScreenCoordinates:"screenCoordinates"},qwe={3e3:"",3001:"srgb"};function UT(r){return parseInt(bu,10)>=152?r.colorSpace:qwe[r.encoding]}var yX=class extends vi{constructor(r={}){var e;super({vertexShader:jwe,fragmentShader:Wwe}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=zm,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=Kwe.None,this._outlineWidthMode=E8.None,this._isOutline=!1,r.transparentWithZWrite&&(r.depthWrite=!0),delete r.transparentWithZWrite,r.fog=!0,r.lights=!0,r.clipping=!0,this.uniforms=dO.merge([ct.common,ct.normalmap,ct.emissivemap,ct.fog,ct.lights,{litFactor:{value:new st(1,1,1)},mapUvTransform:{value:new Vt},colorAlpha:{value:1},normalMapUvTransform:{value:new Vt},shadeColorFactor:{value:new st(0,0,0)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new Vt},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new Vt},shadingShiftTextureScale:{value:1},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new st(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new Vt},parametricRimColorFactor:{value:new st(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new Vt},rimLightingMixFactor:{value:1},parametricRimFresnelPowerFactor:{value:5},parametricRimLiftFactor:{value:0},emissive:{value:new st(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new Vt},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new Vt},outlineWidthFactor:{value:0},outlineColorFactor:{value:new st(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new Vt},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},(e=r.uniforms)!=null?e:{}]),this.setValues(r),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,n])=>`${t}:${n}`),this.matcapTexture?`matcapTextureColorSpace:${UT(this.matcapTexture)}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureColorSpace:${UT(this.shadeMultiplyTexture)}`:"",this.rimMultiplyTexture?`rimMultiplyTextureColorSpace:${UT(this.rimMultiplyTexture)}`:""].join(","),this.onBeforeCompile=t=>{const n=parseInt(bu,10),i=Object.entries(b8(b8({},this._generateDefines()),this.defines)).filter(([s,a])=>!!a).map(([s,a])=>`#define ${s} ${a}`).join(`
`)+`
`;t.vertexShader=i+t.vertexShader,t.fragmentShader=i+t.fragmentShader,n<154&&(t.fragmentShader=t.fragmentShader.replace("#include <colorspace_fragment>","#include <encodings_fragment>"))}}get color(){return this.uniforms.litFactor.value}set color(r){this.uniforms.litFactor.value=r}get map(){return this.uniforms.map.value}set map(r){this.uniforms.map.value=r}get normalMap(){return this.uniforms.normalMap.value}set normalMap(r){this.uniforms.normalMap.value=r}get normalScale(){return this.uniforms.normalScale.value}set normalScale(r){this.uniforms.normalScale.value=r}get emissive(){return this.uniforms.emissive.value}set emissive(r){this.uniforms.emissive.value=r}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(r){this.uniforms.emissiveIntensity.value=r}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(r){this.uniforms.emissiveMap.value=r}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(r){this.uniforms.shadeColorFactor.value=r}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(r){this.uniforms.shadeMultiplyTexture.value=r}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(r){this.uniforms.shadingShiftFactor.value=r}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(r){this.uniforms.shadingShiftTexture.value=r}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(r){this.uniforms.shadingShiftTextureScale.value=r}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(r){this.uniforms.shadingToonyFactor.value=r}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(r){this.uniforms.giEqualizationFactor.value=r}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(r){this.uniforms.matcapFactor.value=r}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(r){this.uniforms.matcapTexture.value=r}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(r){this.uniforms.parametricRimColorFactor.value=r}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(r){this.uniforms.rimMultiplyTexture.value=r}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(r){this.uniforms.rimLightingMixFactor.value=r}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(r){this.uniforms.parametricRimFresnelPowerFactor.value=r}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(r){this.uniforms.parametricRimLiftFactor.value=r}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(r){this.uniforms.outlineWidthMultiplyTexture.value=r}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(r){this.uniforms.outlineWidthFactor.value=r}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(r){this.uniforms.outlineColorFactor.value=r}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(r){this.uniforms.outlineLightingMixFactor.value=r}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(r){this.uniforms.uvAnimationMaskTexture.value=r}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(r){this.uniforms.uvAnimationScrollXOffset.value=r}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(r){this.uniforms.uvAnimationScrollYOffset.value=r}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(r){this.uniforms.uvAnimationRotationPhase.value=r}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(r){this._ignoreVertexColor=r,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(r){this._v0CompatShade=r,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(r){this._debugMode=r,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(r){this._outlineWidthMode=r,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(r){this._isOutline=r,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(r){this._uploadUniformsWorkaround(),this._updateUVAnimation(r)}copy(r){return super.copy(r),this.map=r.map,this.normalMap=r.normalMap,this.emissiveMap=r.emissiveMap,this.shadeMultiplyTexture=r.shadeMultiplyTexture,this.shadingShiftTexture=r.shadingShiftTexture,this.matcapTexture=r.matcapTexture,this.rimMultiplyTexture=r.rimMultiplyTexture,this.outlineWidthMultiplyTexture=r.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=r.uvAnimationMaskTexture,this.normalMapType=r.normalMapType,this.uvAnimationScrollXSpeedFactor=r.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=r.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=r.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=r.ignoreVertexColor,this.v0CompatShade=r.v0CompatShade,this.debugMode=r.debugMode,this.outlineWidthMode=r.outlineWidthMode,this.isOutline=r.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(r){this.uniforms.uvAnimationScrollXOffset.value+=r*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=r*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=r*this.uvAnimationRotationSpeedFactor,this.uniforms.alphaTest.value=this.alphaTest,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),this.uniformsNeedUpdate=!0}_generateDefines(){const r=parseInt(bu,10),e=this.outlineWidthMultiplyTexture!==null,t=this.map!==null||this.normalMap!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:r,OUTLINE:this._isOutline,MTOON_USE_UV:e||t,MTOON_UVS_VERTEX_ONLY:e&&!t,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===E8.ScreenCoordinates}}_updateTextureMatrix(r,e){r.value&&(r.value.matrixAutoUpdate&&r.value.updateMatrix(),e.value.copy(r.value.matrix))}},Ywe=new Set(["1.0","1.0-beta"]),wX=class Eb{get name(){return Eb.EXTENSION_NAME}constructor(e,t={}){var n,i,s,a;this.parser=e,this.materialType=(n=t.materialType)!=null?n:yX,this.renderOrderOffset=(i=t.renderOrderOffset)!=null?i:0,this.v0CompatShade=(s=t.v0CompatShade)!=null?s:!1,this.debugMode=(a=t.debugMode)!=null?a:"none",this._mToonMaterialSet=new Set}beforeRoot(){return eh(this,null,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return eh(this,null,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?this.materialType:null}extendMaterialParams(e,t){const n=this._getMToonExtension(e);return n?this._extendMaterialParams(n,t):null}loadMesh(e){return eh(this,null,function*(){var t;const n=this.parser,s=(t=n.json.meshes)==null?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const a=s.primitives,o=yield n.loadMesh(e);if(a.length===1){const l=o,c=a[0].material;c!=null&&this._setupPrimitive(l,c)}else{const l=o;for(let c=0;c<a.length;c++){const u=l.children[c],f=a[c].material;f!=null&&this._setupPrimitive(u,f)}}return o})}_removeUnlitExtensionIfMToonExists(){const n=this.parser.json.materials;n?.map((i,s)=>{var a;this._getMToonExtension(s)&&((a=i.extensions)!=null&&a.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,n;const a=(t=this.parser.json.materials)==null?void 0:t[e];if(a==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const o=(n=a.extensions)==null?void 0:n[Eb.EXTENSION_NAME];if(o==null)return;const l=o.specVersion;if(!Ywe.has(l)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${Eb.EXTENSION_NAME} specVersion "${l}"`);return}return o}_extendMaterialParams(e,t){return eh(this,null,function*(){var n;delete t.metalness,delete t.roughness;const i=new Gwe(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(n=e.shadingShiftTexture)==null?void 0:n.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const n=this._getMToonExtension(t);if(n){const i=this._parseRenderOrder(n);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_shouldGenerateOutline(e){return typeof e.outlineWidthMode=="string"&&e.outlineWidthMode!=="none"&&typeof e.outlineWidthFactor=="number"&&e.outlineWidthFactor>0}_generateOutline(e){const t=e.material;if(!(t instanceof Sa)||!this._shouldGenerateOutline(t))return;e.material=[t];const n=t.clone();n.name+=" (Outline)",n.isOutline=!0,n.side=ms,e.material.push(n);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,n=new Set;Array.isArray(t)?t.forEach(i=>n.add(i)):n.add(t);for(const i of n)this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!=null?t:0)}};wX.EXTENSION_NAME="VRMC_materials_mtoon";var Xwe=wX,Zwe=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),_X=class CL{get name(){return CL.EXTENSION_NAME}constructor(e){this.parser=e}extendMaterialParams(e,t){return Zwe(this,null,function*(){const n=this._getHDREmissiveMultiplierExtension(e);if(n==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=n.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,n;const a=(t=this.parser.json.materials)==null?void 0:t[e];if(a==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const o=(n=a.extensions)==null?void 0:n[CL.EXTENSION_NAME];if(o!=null)return o}};_X.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";var Jwe=_X,$we=Object.defineProperty,e_e=Object.defineProperties,t_e=Object.getOwnPropertyDescriptors,S8=Object.getOwnPropertySymbols,n_e=Object.prototype.hasOwnProperty,r_e=Object.prototype.propertyIsEnumerable,B8=(r,e,t)=>e in r?$we(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Dl=(r,e)=>{for(var t in e||(e={}))n_e.call(e,t)&&B8(r,t,e[t]);if(S8)for(var t of S8(e))r_e.call(e,t)&&B8(r,t,e[t]);return r},M8=(r,e)=>e_e(r,t_e(e)),i_e=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())});function Vd(r){return Math.pow(r,2.2)}var s_e=class{get name(){return"VRMMaterialsV0CompatPlugin"}constructor(r){var e;this.parser=r,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const t=this.parser.json;t.extensionsUsed=(e=t.extensionsUsed)!=null?e:[],t.extensionsUsed.indexOf("KHR_texture_transform")===-1&&t.extensionsUsed.push("KHR_texture_transform")}beforeRoot(){return i_e(this,null,function*(){var r;const e=this.parser.json,t=(r=e.extensions)==null?void 0:r.VRM,n=t?.materialProperties;n&&(this._populateRenderQueueMap(n),n.forEach((i,s)=>{var a,o;const l=(a=e.materials)==null?void 0:a[s];if(l==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${s}] of glTF but the material doesn't exist`);return}if(i.shader==="VRM/MToon"){const c=this._parseV0MToonProperties(i,l);e.materials[s]=c}else if((o=i.shader)!=null&&o.startsWith("VRM/Unlit")){const c=this._parseV0UnlitProperties(i,l);e.materials[s]=c}else i.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${i.shader}`)}))})}_parseV0MToonProperties(r,e){var t,n,i,s,a,o,l,c,u,f,d,p,v,m,g,w,b,E,B,S,M,I,k,O,C,P,D,F,_,R,L,Q,G,Y,W,V,T,H,K,N,te,oe,fe,he,me,Te,Re,de,Z,ve,ye,se,ce,_e,ie;const $=(n=(t=r.keywordMap)==null?void 0:t._ALPHABLEND_ON)!=null?n:!1,pe=((i=r.floatProperties)==null?void 0:i._ZWrite)===1&&$,xe=this._v0ParseRenderQueue(r),be=(a=(s=r.keywordMap)==null?void 0:s._ALPHATEST_ON)!=null?a:!1,De=$?"BLEND":be?"MASK":"OPAQUE",J=be?(l=(o=r.floatProperties)==null?void 0:o._Cutoff)!=null?l:.5:void 0,X=((u=(c=r.floatProperties)==null?void 0:c._CullMode)!=null?u:2)===0,re=this._portTextureTransform(r),ge=((d=(f=r.vectorProperties)==null?void 0:f._Color)!=null?d:[1,1,1,1]).map((nt,ht)=>ht===3?nt:Vd(nt)),Me=(p=r.textureProperties)==null?void 0:p._MainTex,Ee=Me!=null?{index:Me,extensions:Dl({},re)}:void 0,We=(m=(v=r.floatProperties)==null?void 0:v._BumpScale)!=null?m:1,et=(g=r.textureProperties)==null?void 0:g._BumpMap,Ze=et!=null?{index:et,scale:We,extensions:Dl({},re)}:void 0,dt=((b=(w=r.vectorProperties)==null?void 0:w._EmissionColor)!=null?b:[0,0,0,1]).map(Vd),Se=(E=r.textureProperties)==null?void 0:E._EmissionMap,Je=Se!=null?{index:Se,extensions:Dl({},re)}:void 0,Ve=((S=(B=r.vectorProperties)==null?void 0:B._ShadeColor)!=null?S:[.97,.81,.86,1]).map(Vd),je=(M=r.textureProperties)==null?void 0:M._ShadeTexture,Ye=je!=null?{index:je,extensions:Dl({},re)}:void 0;let rt=(k=(I=r.floatProperties)==null?void 0:I._ShadeShift)!=null?k:0,wt=(C=(O=r.floatProperties)==null?void 0:O._ShadeToony)!=null?C:.9;wt=sn.lerp(wt,1,.5+.5*rt),rt=-rt-(1-wt);const kt=(D=(P=r.floatProperties)==null?void 0:P._IndirectLightIntensity)!=null?D:.1,ur=kt?1-kt:void 0,bt=(F=r.textureProperties)==null?void 0:F._SphereAdd,en=bt!=null?[1,1,1]:void 0,ri=bt!=null?{index:bt}:void 0,An=(R=(_=r.floatProperties)==null?void 0:_._RimLightingMix)!=null?R:0,Xt=(L=r.textureProperties)==null?void 0:L._RimTexture,jn=Xt!=null?{index:Xt,extensions:Dl({},re)}:void 0,pn=((G=(Q=r.vectorProperties)==null?void 0:Q._RimColor)!=null?G:[0,0,0,1]).map(Vd),Pn=(W=(Y=r.floatProperties)==null?void 0:Y._RimFresnelPower)!=null?W:1,ia=(T=(V=r.floatProperties)==null?void 0:V._RimLift)!=null?T:0,kn=["none","worldCoordinates","screenCoordinates"][(K=(H=r.floatProperties)==null?void 0:H._OutlineWidthMode)!=null?K:0];let Un=(te=(N=r.floatProperties)==null?void 0:N._OutlineWidth)!=null?te:0;Un=.01*Un;const ii=(oe=r.textureProperties)==null?void 0:oe._OutlineWidthTexture,Hn=ii!=null?{index:ii,extensions:Dl({},re)}:void 0,yn=((he=(fe=r.vectorProperties)==null?void 0:fe._OutlineColor)!=null?he:[0,0,0]).map(Vd),Fn=((Te=(me=r.floatProperties)==null?void 0:me._OutlineColorMode)!=null?Te:0)===1?(de=(Re=r.floatProperties)==null?void 0:Re._OutlineLightingMix)!=null?de:1:0,wn=(Z=r.textureProperties)==null?void 0:Z._UvAnimMaskTexture,Ae=wn!=null?{index:wn,extensions:Dl({},re)}:void 0,Ue=(ye=(ve=r.floatProperties)==null?void 0:ve._UvAnimScrollX)!=null?ye:0;let Ne=(ce=(se=r.floatProperties)==null?void 0:se._UvAnimScrollY)!=null?ce:0;Ne!=null&&(Ne=-Ne);const Pe=(ie=(_e=r.floatProperties)==null?void 0:_e._UvAnimRotation)!=null?ie:0,Fe={specVersion:"1.0",transparentWithZWrite:pe,renderQueueOffsetNumber:xe,shadeColorFactor:Ve,shadeMultiplyTexture:Ye,shadingShiftFactor:rt,shadingToonyFactor:wt,giEqualizationFactor:ur,matcapFactor:en,matcapTexture:ri,rimLightingMixFactor:An,rimMultiplyTexture:jn,parametricRimColorFactor:pn,parametricRimFresnelPowerFactor:Pn,parametricRimLiftFactor:ia,outlineWidthMode:kn,outlineWidthFactor:Un,outlineWidthMultiplyTexture:Hn,outlineColorFactor:yn,outlineLightingMixFactor:Fn,uvAnimationMaskTexture:Ae,uvAnimationScrollXSpeedFactor:Ue,uvAnimationScrollYSpeedFactor:Ne,uvAnimationRotationSpeedFactor:Pe};return M8(Dl({},e),{pbrMetallicRoughness:{baseColorFactor:ge,baseColorTexture:Ee},normalTexture:Ze,emissiveTexture:Je,emissiveFactor:dt,alphaMode:De,alphaCutoff:J,doubleSided:X,extensions:{VRMC_materials_mtoon:Fe}})}_parseV0UnlitProperties(r,e){var t,n,i,s,a;const o=r.shader==="VRM/UnlitTransparentZWrite",l=r.shader==="VRM/UnlitTransparent"||o,c=this._v0ParseRenderQueue(r),u=r.shader==="VRM/UnlitCutout",f=l?"BLEND":u?"MASK":"OPAQUE",d=u?(n=(t=r.floatProperties)==null?void 0:t._Cutoff)!=null?n:.5:void 0,p=this._portTextureTransform(r),v=((s=(i=r.vectorProperties)==null?void 0:i._Color)!=null?s:[1,1,1,1]).map(Vd),m=(a=r.textureProperties)==null?void 0:a._MainTex,g=m!=null?{index:m,extensions:Dl({},p)}:void 0,w={specVersion:"1.0",transparentWithZWrite:o,renderQueueOffsetNumber:c,shadeColorFactor:v,shadeMultiplyTexture:g};return M8(Dl({},e),{pbrMetallicRoughness:{baseColorFactor:v,baseColorTexture:g},alphaMode:f,alphaCutoff:d,extensions:{VRMC_materials_mtoon:w}})}_portTextureTransform(r){var e,t,n,i,s;const a=(e=r.vectorProperties)==null?void 0:e._MainTex;if(a==null)return{};const o=[(t=a?.[0])!=null?t:0,(n=a?.[1])!=null?n:0],l=[(i=a?.[2])!=null?i:1,(s=a?.[3])!=null?s:1];return o[1]=1-l[1]-o[1],{KHR_texture_transform:{offset:o,scale:l}}}_v0ParseRenderQueue(r){var e,t;const n=r.shader==="VRM/UnlitTransparentZWrite",i=((e=r.keywordMap)==null?void 0:e._ALPHABLEND_ON)!=null||r.shader==="VRM/UnlitTransparent"||n,s=((t=r.floatProperties)==null?void 0:t._ZWrite)===1||n;let a=0;if(i){const o=r.renderQueue;o!=null&&(s?a=this._renderQueueMapTransparentZWrite.get(o):a=this._renderQueueMapTransparent.get(o))}return a}_populateRenderQueueMap(r){const e=new Set,t=new Set;r.forEach(n=>{var i,s;const a=n.shader==="VRM/UnlitTransparentZWrite",o=((i=n.keywordMap)==null?void 0:i._ALPHABLEND_ON)!=null||n.shader==="VRM/UnlitTransparent"||a,l=((s=n.floatProperties)==null?void 0:s._ZWrite)===1||a;if(o){const c=n.renderQueue;c!=null&&(l?t.add(c):e.add(c))}}),e.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${e.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(e).sort().forEach((n,i)=>{const s=Math.min(Math.max(i-e.size+1,-9),0);this._renderQueueMapTransparent.set(n,s)}),Array.from(t).sort().forEach((n,i)=>{const s=Math.min(Math.max(i,0),9);this._renderQueueMapTransparentZWrite.set(n,s)})}},C8=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),mA=new ae,FT=class extends hs{constructor(r){super(),this._attrPosition=new Lt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(yoe);const e=new Gn;e.setAttribute("position",this._attrPosition);const t=new Iu({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Gm(e,t),this.add(this._line),this.constraint=r}updateMatrixWorld(r){mA.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,mA.x,mA.y,mA.z),this.constraint.source&&mA.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,mA.x,mA.y,mA.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(r)}};function T8(r,e){return e.set(r.elements[12],r.elements[13],r.elements[14])}var a_e=new ae,o_e=new ae;function l_e(r,e){return r.decompose(a_e,e,o_e),e}function g1(r){return r.invert?r.invert():r.inverse(),r}var OO=class{constructor(r,e){this.destination=r,this.source=e,this.weight=1}},c_e=new ae,u_e=new ae,A_e=new ae,f_e=new Rt,h_e=new Rt,d_e=new Rt,p_e=class extends OO{get aimAxis(){return this._aimAxis}set aimAxis(r){this._aimAxis=r,this._v3AimAxis.set(r==="PositiveX"?1:r==="NegativeX"?-1:0,r==="PositiveY"?1:r==="NegativeY"?-1:0,r==="PositiveZ"?1:r==="NegativeZ"?-1:0)}get dependencies(){const r=new Set([this.source]);return this.destination.parent&&r.add(this.destination.parent),r}constructor(r,e){super(r,e),this._aimAxis="PositiveX",this._v3AimAxis=new ae(1,0,0),this._dstRestQuat=new Rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const r=f_e.identity(),e=h_e.identity();this.destination.parent&&(l_e(this.destination.parent.matrixWorld,r),g1(e.copy(r)));const t=c_e.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(r),n=T8(this.source.matrixWorld,u_e).sub(T8(this.destination.matrixWorld,A_e)).normalize(),i=d_e.setFromUnitVectors(t,n).premultiply(e).multiply(r).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}};function m_e(r,e){const t=[r];let n=r.parent;for(;n!==null;)t.unshift(n),n=n.parent;t.forEach(i=>{e(i)})}var g_e=class{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(r){this._constraints.add(r);let e=this._objectConstraintsMap.get(r.destination);e==null&&(e=new Set,this._objectConstraintsMap.set(r.destination,e)),e.add(r)}deleteConstraint(r){this._constraints.delete(r),this._objectConstraintsMap.get(r.destination).delete(r)}setInitState(){const r=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,r,e,n=>n.setInitState())}update(){const r=new Set,e=new Set;for(const t of this._constraints)this._processConstraint(t,r,e,n=>n.update())}_processConstraint(r,e,t,n){if(t.has(r))return;if(e.has(r))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");e.add(r);const i=r.dependencies;for(const s of i)m_e(s,a=>{const o=this._objectConstraintsMap.get(a);if(o)for(const l of o)this._processConstraint(l,e,t,n)});n(r),t.add(r)}},v_e=new Rt,y_e=new Rt,w_e=class extends OO{get dependencies(){return new Set([this.source])}constructor(r,e){super(r,e),this._dstRestQuat=new Rt,this._invSrcRestQuat=new Rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),g1(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const r=v_e.copy(this._invSrcRestQuat).multiply(this.source.quaternion),e=y_e.copy(this._dstRestQuat).multiply(r);this.destination.quaternion.copy(this._dstRestQuat).slerp(e,this.weight)}},__e=new ae,x_e=new Rt,b_e=new Rt,E_e=class extends OO{get rollAxis(){return this._rollAxis}set rollAxis(r){this._rollAxis=r,this._v3RollAxis.set(r==="X"?1:0,r==="Y"?1:0,r==="Z"?1:0)}get dependencies(){return new Set([this.source])}constructor(r,e){super(r,e),this._rollAxis="X",this._v3RollAxis=new ae(1,0,0),this._dstRestQuat=new Rt,this._invDstRestQuat=new Rt,this._invSrcRestQuatMulDstRestQuat=new Rt}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),g1(this._invDstRestQuat.copy(this._dstRestQuat)),g1(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const r=x_e.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),e=__e.copy(this._v3RollAxis).applyQuaternion(r),n=b_e.setFromUnitVectors(e,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(r);this.destination.quaternion.copy(this._dstRestQuat).slerp(n,this.weight)}},S_e=new Set(["1.0","1.0-beta"]),xX=class av{get name(){return av.EXTENSION_NAME}constructor(e,t){this.parser=e,this.helperRoot=t?.helperRoot}afterRoot(e){return C8(this,null,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){return C8(this,null,function*(){var t;const n=this.parser.json;if(!(((t=n.extensionsUsed)==null?void 0:t.indexOf(av.EXTENSION_NAME))!==-1))return null;const s=new g_e,a=yield this.parser.getDependencies("node");return a.forEach((o,l)=>{var c;const u=n.nodes[l],f=(c=u?.extensions)==null?void 0:c[av.EXTENSION_NAME];if(f==null)return;const d=f.specVersion;if(!S_e.has(d)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${av.EXTENSION_NAME} specVersion "${d}"`);return}const p=f.constraint;if(p.roll!=null){const v=this._importRollConstraint(o,a,p.roll);s.addConstraint(v)}else if(p.aim!=null){const v=this._importAimConstraint(o,a,p.aim);s.addConstraint(v)}else if(p.rotation!=null){const v=this._importRotationConstraint(o,a,p.rotation);s.addConstraint(v)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,n){const{source:i,rollAxis:s,weight:a}=n,o=t[i],l=new E_e(e,o);if(s!=null&&(l.rollAxis=s),a!=null&&(l.weight=a),this.helperRoot){const c=new FT(l);this.helperRoot.add(c)}return l}_importAimConstraint(e,t,n){const{source:i,aimAxis:s,weight:a}=n,o=t[i],l=new p_e(e,o);if(s!=null&&(l.aimAxis=s),a!=null&&(l.weight=a),this.helperRoot){const c=new FT(l);this.helperRoot.add(c)}return l}_importRotationConstraint(e,t,n){const{source:i,weight:s}=n,a=t[i],o=new w_e(e,a);if(s!=null&&(o.weight=s),this.helperRoot){const l=new FT(o);this.helperRoot.add(l)}return o}};xX.EXTENSION_NAME="VRMC_node_constraint";var B_e=xX,cx=(r,e,t)=>new Promise((n,i)=>{var s=l=>{try{o(t.next(l))}catch(c){i(c)}},a=l=>{try{o(t.throw(l))}catch(c){i(c)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((t=t.apply(r,e)).next())}),NO=class{},LT=new ae,Qf=new ae,bX=class extends NO{get type(){return"capsule"}constructor(r){var e,t,n,i;super(),this.offset=(e=r?.offset)!=null?e:new ae(0,0,0),this.tail=(t=r?.tail)!=null?t:new ae(0,0,0),this.radius=(n=r?.radius)!=null?n:0,this.inside=(i=r?.inside)!=null?i:!1}calculateCollision(r,e,t,n){LT.setFromMatrixPosition(r),Qf.subVectors(this.tail,this.offset).applyMatrix4(r),Qf.sub(LT);const i=Qf.lengthSq();n.copy(e).sub(LT);const s=Qf.dot(n);s<=0||(i<=s||Qf.multiplyScalar(s/i),n.sub(Qf));const a=n.length(),o=this.inside?this.radius-t-a:a-t-this.radius;return o<0&&(n.multiplyScalar(1/a),this.inside&&n.negate()),o}},DT=new ae,R8=new Vt,EX=class extends NO{get type(){return"plane"}constructor(r){var e,t;super(),this.offset=(e=r?.offset)!=null?e:new ae(0,0,0),this.normal=(t=r?.normal)!=null?t:new ae(0,0,1)}calculateCollision(r,e,t,n){n.setFromMatrixPosition(r),n.negate().add(e),R8.getNormalMatrix(r),DT.copy(this.normal).applyNormalMatrix(R8).normalize();const i=n.dot(DT)-t;return n.copy(DT),i}},M_e=new ae,SX=class extends NO{get type(){return"sphere"}constructor(r){var e,t,n;super(),this.offset=(e=r?.offset)!=null?e:new ae(0,0,0),this.radius=(t=r?.radius)!=null?t:0,this.inside=(n=r?.inside)!=null?n:!1}calculateCollision(r,e,t,n){n.subVectors(e,M_e.setFromMatrixPosition(r));const i=n.length(),s=this.inside?this.radius-t-i:i-t-this.radius;return s<0&&(n.multiplyScalar(1/i),this.inside&&n.negate()),s}},Ol=new ae,C_e=class extends Gn{constructor(r){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new ae,this._currentTail=new ae,this._shape=r,this._attrPos=new Lt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,r=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),r=!0);const t=Ol.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(t)>1e-10&&(this._currentTail.copy(t),r=!0),r&&this._buildPosition()}_buildPosition(){Ol.copy(this._currentTail).sub(this._currentOffset);const r=Ol.length()/this._currentRadius;for(let n=0;n<=16;n++){const i=n/16*Math.PI;this._attrPos.setXYZ(n,-Math.sin(i),-Math.cos(i),0),this._attrPos.setXYZ(17+n,r+Math.sin(i),Math.cos(i),0),this._attrPos.setXYZ(34+n,-Math.sin(i),0,-Math.cos(i)),this._attrPos.setXYZ(51+n,r+Math.sin(i),0,Math.cos(i))}for(let n=0;n<32;n++){const i=n/16*Math.PI;this._attrPos.setXYZ(68+n,0,Math.sin(i),Math.cos(i)),this._attrPos.setXYZ(100+n,r,Math.sin(i),Math.cos(i))}const e=Math.atan2(Ol.y,Math.sqrt(Ol.x*Ol.x+Ol.z*Ol.z)),t=-Math.atan2(Ol.z,Ol.x);this.rotateZ(e),this.rotateY(t),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let r=0;r<34;r++){const e=(r+1)%34;this._attrIndex.setXY(r*2,r,e),this._attrIndex.setXY(68+r*2,34+r,34+e)}for(let r=0;r<32;r++){const e=(r+1)%32;this._attrIndex.setXY(136+r*2,68+r,68+e),this._attrIndex.setXY(200+r*2,100+r,100+e)}this._attrIndex.needsUpdate=!0}},T_e=class extends Gn{constructor(r){super(),this.worldScale=1,this._currentOffset=new ae,this._currentNormal=new ae,this._shape=r,this._attrPos=new Lt(new Float32Array(6*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(10),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),r=!0),this._currentNormal.equals(this._shape.normal)||(this._currentNormal.copy(this._shape.normal),r=!0),r&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,-.5,-.5,0),this._attrPos.setXYZ(1,.5,-.5,0),this._attrPos.setXYZ(2,.5,.5,0),this._attrPos.setXYZ(3,-.5,.5,0),this._attrPos.setXYZ(4,0,0,0),this._attrPos.setXYZ(5,0,0,.25),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this.lookAt(this._currentNormal),this._attrPos.needsUpdate=!0}_buildIndex(){this._attrIndex.setXY(0,0,1),this._attrIndex.setXY(2,1,2),this._attrIndex.setXY(4,2,3),this._attrIndex.setXY(6,3,0),this._attrIndex.setXY(8,4,5),this._attrIndex.needsUpdate=!0}},R_e=class extends Gn{constructor(r){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new ae,this._shape=r,this._attrPos=new Lt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,r=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),r=!0),r&&this._buildPosition()}_buildPosition(){for(let r=0;r<32;r++){const e=r/16*Math.PI;this._attrPos.setXYZ(r,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+r,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+r,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let r=0;r<32;r++){const e=(r+1)%32;this._attrIndex.setXY(r*2,r,e),this._attrIndex.setXY(64+r*2,32+r,32+e),this._attrIndex.setXY(128+r*2,64+r,64+e)}this._attrIndex.needsUpdate=!0}},I_e=new ae,OT=class extends hs{constructor(r){if(super(),this.matrixAutoUpdate=!1,this.collider=r,this.collider.shape instanceof SX)this._geometry=new R_e(this.collider.shape);else if(this.collider.shape instanceof bX)this._geometry=new C_e(this.collider.shape);else if(this.collider.shape instanceof EX)this._geometry=new T_e(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const e=new Iu({color:16711935,depthTest:!1,depthWrite:!1});this._line=new My(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(r){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=I_e.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(r)}},U_e=class extends Gn{constructor(r){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new ae,this._springBone=r,this._attrPos=new Lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new Lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let r=!1;const e=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,r=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),r=!0),r&&this._buildPosition()}_buildPosition(){for(let r=0;r<32;r++){const e=r/16*Math.PI;this._attrPos.setXYZ(r,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+r,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+r,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let r=0;r<32;r++){const e=(r+1)%32;this._attrIndex.setXY(r*2,r,e),this._attrIndex.setXY(64+r*2,32+r,32+e),this._attrIndex.setXY(128+r*2,64+r,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},F_e=new ae,L_e=class extends hs{constructor(r){super(),this.matrixAutoUpdate=!1,this.springBone=r,this._geometry=new U_e(this.springBone);const e=new Iu({color:16776960,depthTest:!1,depthWrite:!1});this._line=new My(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(r){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=F_e.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(r)}},Sb=class extends Tn{constructor(r){super(),this.colliderMatrix=new at,this.shape=r}updateWorldMatrix(r,e){super.updateWorldMatrix(r,e),D_e(this.colliderMatrix,this.matrixWorld,this.shape.offset)}};function D_e(r,e,t){const n=e.elements;r.copy(e),t&&(r.elements[12]=n[0]*t.x+n[4]*t.y+n[8]*t.z+n[12],r.elements[13]=n[1]*t.x+n[5]*t.y+n[9]*t.z+n[13],r.elements[14]=n[2]*t.x+n[6]*t.y+n[10]*t.z+n[14])}var O_e=new at;function N_e(r){return r.invert?r.invert():r.getInverse(O_e.copy(r)),r}var P_e=class{constructor(r){this._inverseCache=new at,this._shouldUpdateInverse=!0,this.matrix=r;const e={set:(t,n,i)=>(this._shouldUpdateInverse=!0,t[n]=i,!0)};this._originalElements=r.elements,r.elements=new Proxy(r.elements,e)}get inverse(){return this._shouldUpdateInverse&&(N_e(this._inverseCache.copy(this.matrix)),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}},NT=new at,Gd=new ae,E0=new ae,S0=new ae,B0=new ae,k_e=new at,H_e=class{constructor(r,e,t={},n=[]){this._currentTail=new ae,this._prevTail=new ae,this._boneAxis=new ae,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new at,this._initialLocalRotation=new Rt,this._initialLocalChildPosition=new ae;var i,s,a,o,l,c;this.bone=r,this.bone.matrixAutoUpdate=!1,this.child=e,this.settings={hitRadius:(i=t.hitRadius)!=null?i:0,stiffness:(s=t.stiffness)!=null?s:1,gravityPower:(a=t.gravityPower)!=null?a:0,gravityDir:(l=(o=t.gravityDir)==null?void 0:o.clone())!=null?l:new ae(0,-1,0),dragForce:(c=t.dragForce)!=null?c:.4},this.colliderGroups=n}get dependencies(){const r=new Set,e=this.bone.parent;e&&r.add(e);for(let t=0;t<this.colliderGroups.length;t++)for(let n=0;n<this.colliderGroups[t].colliders.length;n++)r.add(this.colliderGroups[t].colliders[n]);return r}get center(){return this._center}set center(r){var e;(e=this._center)!=null&&e.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=r,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new P_e(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:NT}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const r=this._getMatrixWorldToCenter();this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(r),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const r=this._getMatrixWorldToCenter();this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(r),this._prevTail.copy(this._currentTail)}update(r){if(r<=0)return;this._calcWorldSpaceBoneLength();const e=E0.copy(this._boneAxis).transformDirection(this._initialLocalMatrix).transformDirection(this._parentMatrixWorld);B0.copy(this._currentTail).add(Gd.subVectors(this._currentTail,this._prevTail).multiplyScalar(1-this.settings.dragForce)).applyMatrix4(this._getMatrixCenterToWorld()).addScaledVector(e,this.settings.stiffness*r).addScaledVector(this.settings.gravityDir,this.settings.gravityPower*r),S0.setFromMatrixPosition(this.bone.matrixWorld),B0.sub(S0).normalize().multiplyScalar(this._worldSpaceBoneLength).add(S0),this._collision(B0),this._prevTail.copy(this._currentTail),this._currentTail.copy(B0).applyMatrix4(this._getMatrixWorldToCenter());const t=k_e.multiplyMatrices(this._parentMatrixWorld,this._initialLocalMatrix).invert();this.bone.quaternion.setFromUnitVectors(this._boneAxis,Gd.copy(B0).applyMatrix4(t).normalize()).premultiply(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(r){for(let e=0;e<this.colliderGroups.length;e++)for(let t=0;t<this.colliderGroups[e].colliders.length;t++){const n=this.colliderGroups[e].colliders[t],i=n.shape.calculateCollision(n.colliderMatrix,r,this.settings.hitRadius,Gd);if(i<0){r.addScaledVector(Gd,-i),r.sub(S0);const s=r.length();r.multiplyScalar(this._worldSpaceBoneLength/s).add(S0)}}}_calcWorldSpaceBoneLength(){Gd.setFromMatrixPosition(this.bone.matrixWorld),this.child?E0.setFromMatrixPosition(this.child.matrixWorld):(E0.copy(this._initialLocalChildPosition),E0.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=Gd.sub(E0).length()}_getMatrixCenterToWorld(){return this._center?this._center.matrixWorld:NT}_getMatrixWorldToCenter(){return this._center?this._center.userData.inverseCacheProxy.inverse:NT}};function Q_e(r,e){const t=[];let n=r;for(;n!==null;)t.unshift(n),n=n.parent;t.forEach(i=>{e(i)})}function TL(r,e){r.children.forEach(t=>{e(t)||TL(t,e)})}function z_e(r){var e;const t=new Map;for(const n of r){let i=n;do{const s=((e=t.get(i))!=null?e:0)+1;if(s===r.size)return i;t.set(i,s),i=i.parent}while(i!==null)}return null}var I8=class{constructor(){this._joints=new Set,this._sortedJoints=[],this._hasWarnedCircularDependency=!1,this._ancestors=[],this._objectSpringBonesMap=new Map,this._isSortedJointsDirty=!1,this._relevantChildrenUpdated=this._relevantChildrenUpdated.bind(this)}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const r=new Set;return this._joints.forEach(e=>{e.colliderGroups.forEach(t=>{r.add(t)})}),Array.from(r)}get colliders(){const r=new Set;return this.colliderGroups.forEach(e=>{e.colliders.forEach(t=>{r.add(t)})}),Array.from(r)}addJoint(r){this._joints.add(r);let e=this._objectSpringBonesMap.get(r.bone);e==null&&(e=new Set,this._objectSpringBonesMap.set(r.bone,e)),e.add(r),this._isSortedJointsDirty=!0}addSpringBone(r){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(r)}deleteJoint(r){this._joints.delete(r),this._objectSpringBonesMap.get(r.bone).delete(r),this._isSortedJointsDirty=!0}deleteSpringBone(r){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(r)}setInitState(){this._sortJoints();for(let r=0;r<this._sortedJoints.length;r++){const e=this._sortedJoints[r];e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),e.setInitState()}}reset(){this._sortJoints();for(let r=0;r<this._sortedJoints.length;r++){const e=this._sortedJoints[r];e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),e.reset()}}update(r){this._sortJoints();for(let e=0;e<this._ancestors.length;e++)this._ancestors[e].updateWorldMatrix(e===0,!1);for(let e=0;e<this._sortedJoints.length;e++){const t=this._sortedJoints[e];t.bone.updateMatrix(),t.bone.updateWorldMatrix(!1,!1),t.update(r),TL(t.bone,this._relevantChildrenUpdated)}}_sortJoints(){if(!this._isSortedJointsDirty)return;const r=[],e=new Set,t=new Set,n=new Set;for(const s of this._joints)this._insertJointSort(s,e,t,r,n);this._sortedJoints=r;const i=z_e(n);this._ancestors=[],i&&(this._ancestors.push(i),TL(i,s=>{var a,o;return((o=(a=this._objectSpringBonesMap.get(s))==null?void 0:a.size)!=null?o:0)>0?!0:(this._ancestors.push(s),!1)})),this._isSortedJointsDirty=!1}_insertJointSort(r,e,t,n,i){if(t.has(r))return;if(e.has(r)){this._hasWarnedCircularDependency||(console.warn("VRMSpringBoneManager: Circular dependency detected"),this._hasWarnedCircularDependency=!0);return}e.add(r);const s=r.dependencies;for(const a of s){let o=!1,l=null;Q_e(a,c=>{const u=this._objectSpringBonesMap.get(c);if(u)for(const f of u)o=!0,this._insertJointSort(f,e,t,n,i);else o||(l=c)}),l&&i.add(l)}n.push(r),t.add(r)}_relevantChildrenUpdated(r){var e,t;return((t=(e=this._objectSpringBonesMap.get(r))==null?void 0:e.size)!=null?t:0)>0?!0:(r.updateWorldMatrix(!1,!1),!1)}},U8="VRMC_springBone_extended_collider",V_e=new Set(["1.0","1.0-beta"]),G_e=new Set(["1.0"]),BX=class dp{get name(){return dp.EXTENSION_NAME}constructor(e,t){var n;this.parser=e,this.jointHelperRoot=t?.jointHelperRoot,this.colliderHelperRoot=t?.colliderHelperRoot,this.useExtendedColliders=(n=t?.useExtendedColliders)!=null?n:!0}afterRoot(e){return cx(this,null,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return cx(this,null,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const n=yield this._v0Import(e);return n??null})}_v1Import(e){return cx(this,null,function*(){var t,n,i,s,a;const o=e.parser.json;if(!(((t=o.extensionsUsed)==null?void 0:t.indexOf(dp.EXTENSION_NAME))!==-1))return null;const c=new I8,u=yield e.parser.getDependencies("node"),f=(n=o.extensions)==null?void 0:n[dp.EXTENSION_NAME];if(!f)return null;const d=f.specVersion;if(!V_e.has(d))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${dp.EXTENSION_NAME} specVersion "${d}"`),null;const p=(i=f.colliders)==null?void 0:i.map((m,g)=>{var w,b,E,B,S,M,I,k,O,C,P,D,F,_,R;const L=u[m.node];if(L==null)return console.warn(`VRMSpringBoneLoaderPlugin: The collider #${g} attempted to use the node #${m.node} but not found`),null;const Q=m.shape,G=(w=m.extensions)==null?void 0:w[U8];if(this.useExtendedColliders&&G!=null){const Y=G.specVersion;if(!G_e.has(Y))console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${U8} specVersion "${Y}". Fallbacking to the ${dp.EXTENSION_NAME} definition`);else{const W=G.shape;if(W.sphere)return this._importSphereCollider(L,{offset:new ae().fromArray((b=W.sphere.offset)!=null?b:[0,0,0]),radius:(E=W.sphere.radius)!=null?E:0,inside:(B=W.sphere.inside)!=null?B:!1});if(W.capsule)return this._importCapsuleCollider(L,{offset:new ae().fromArray((S=W.capsule.offset)!=null?S:[0,0,0]),radius:(M=W.capsule.radius)!=null?M:0,tail:new ae().fromArray((I=W.capsule.tail)!=null?I:[0,0,0]),inside:(k=W.capsule.inside)!=null?k:!1});if(W.plane)return this._importPlaneCollider(L,{offset:new ae().fromArray((O=W.plane.offset)!=null?O:[0,0,0]),normal:new ae().fromArray((C=W.plane.normal)!=null?C:[0,0,1])})}}if(Q.sphere)return this._importSphereCollider(L,{offset:new ae().fromArray((P=Q.sphere.offset)!=null?P:[0,0,0]),radius:(D=Q.sphere.radius)!=null?D:0,inside:!1});if(Q.capsule)return this._importCapsuleCollider(L,{offset:new ae().fromArray((F=Q.capsule.offset)!=null?F:[0,0,0]),radius:(_=Q.capsule.radius)!=null?_:0,tail:new ae().fromArray((R=Q.capsule.tail)!=null?R:[0,0,0]),inside:!1});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${g} has no valid shape`)}),v=(s=f.colliderGroups)==null?void 0:s.map((m,g)=>{var w;return{colliders:((w=m.colliders)!=null?w:[]).flatMap(E=>{const B=p?.[E];return B??(console.warn(`VRMSpringBoneLoaderPlugin: The colliderGroup #${g} attempted to use a collider #${E} but not found`),[])}),name:m.name}});return(a=f.springs)==null||a.forEach((m,g)=>{var w;const b=m.joints,E=(w=m.colliderGroups)==null?void 0:w.map(M=>{const I=v?.[M];if(I==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${g} attempted to use a colliderGroup ${M} but not found`);return I}),B=m.center!=null?u[m.center]:void 0;let S;b.forEach(M=>{if(S){const I=S.node,k=u[I],O=M.node,C=u[O],P={hitRadius:S.hitRadius,dragForce:S.dragForce,gravityPower:S.gravityPower,stiffness:S.stiffness,gravityDir:S.gravityDir!=null?new ae().fromArray(S.gravityDir):void 0},D=this._importJoint(k,C,P,E);B&&(D.center=B),c.addJoint(D)}S=M})}),c.setInitState(),c})}_v0Import(e){return cx(this,null,function*(){var t,n,i;const s=e.parser.json;if(!(((t=s.extensionsUsed)==null?void 0:t.indexOf("VRM"))!==-1))return null;const o=(n=s.extensions)==null?void 0:n.VRM,l=o?.secondaryAnimation;if(!l)return null;const c=l?.boneGroups;if(!c)return null;const u=new I8,f=yield e.parser.getDependencies("node"),d=(i=l.colliderGroups)==null?void 0:i.map(p=>{var v;const m=f[p.node];return{colliders:((v=p.colliders)!=null?v:[]).map((w,b)=>{var E,B,S;const M=new ae(0,0,0);return w.offset&&M.set((E=w.offset.x)!=null?E:0,(B=w.offset.y)!=null?B:0,w.offset.z?-w.offset.z:0),this._importSphereCollider(m,{offset:M,radius:(S=w.radius)!=null?S:0,inside:!1})})}});return c?.forEach((p,v)=>{const m=p.bones;m&&m.forEach(g=>{var w,b,E,B;const S=f[g],M=new ae;p.gravityDir?M.set((w=p.gravityDir.x)!=null?w:0,(b=p.gravityDir.y)!=null?b:0,(E=p.gravityDir.z)!=null?E:0):M.set(0,-1,0);const I=p.center!=null?f[p.center]:void 0,k={hitRadius:p.hitRadius,dragForce:p.dragForce,gravityPower:p.gravityPower,stiffness:p.stiffiness,gravityDir:M},O=(B=p.colliderGroups)==null?void 0:B.map(C=>{const P=d?.[C];if(P==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${v} attempted to use a colliderGroup ${C} but not found`);return P});S.traverse(C=>{var P;const D=(P=C.children[0])!=null?P:null,F=this._importJoint(C,D,k,O);I&&(F.center=I),u.addJoint(F)})})}),e.scene.updateMatrixWorld(),u.setInitState(),u})}_importJoint(e,t,n,i){const s=new H_e(e,t,n,i);if(this.jointHelperRoot){const a=new L_e(s);this.jointHelperRoot.add(a),a.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const n=new SX(t),i=new Sb(n);if(e.add(i),this.colliderHelperRoot){const s=new OT(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importCapsuleCollider(e,t){const n=new bX(t),i=new Sb(n);if(e.add(i),this.colliderHelperRoot){const s=new OT(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importPlaneCollider(e,t){const n=new EX(t),i=new Sb(n);if(e.add(i),this.colliderHelperRoot){const s=new OT(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}};BX.EXTENSION_NAME="VRMC_springBone";var j_e=BX,W_e=class{get name(){return"VRMLoaderPlugin"}constructor(r,e){var t,n,i,s,a,o,l,c,u,f;this.parser=r;const d=e?.helperRoot,p=e?.autoUpdateHumanBones;this.expressionPlugin=(t=e?.expressionPlugin)!=null?t:new cwe(r),this.firstPersonPlugin=(n=e?.firstPersonPlugin)!=null?n:new Awe(r),this.humanoidPlugin=(i=e?.humanoidPlugin)!=null?i:new vwe(r,{helperRoot:d,autoUpdateHumanBones:p}),this.lookAtPlugin=(s=e?.lookAtPlugin)!=null?s:new Fwe(r,{helperRoot:d}),this.metaPlugin=(a=e?.metaPlugin)!=null?a:new Owe(r),this.mtoonMaterialPlugin=(o=e?.mtoonMaterialPlugin)!=null?o:new Xwe(r),this.materialsHDREmissiveMultiplierPlugin=(l=e?.materialsHDREmissiveMultiplierPlugin)!=null?l:new Jwe(r),this.materialsV0CompatPlugin=(c=e?.materialsV0CompatPlugin)!=null?c:new s_e(r),this.springBonePlugin=(u=e?.springBonePlugin)!=null?u:new j_e(r,{colliderHelperRoot:d,jointHelperRoot:d}),this.nodeConstraintPlugin=(f=e?.nodeConstraintPlugin)!=null?f:new B_e(r,{helperRoot:d})}beforeRoot(){return ax(this,null,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(r){return ax(this,null,function*(){return yield this.mtoonMaterialPlugin.loadMesh(r)})}getMaterialType(r){const e=this.mtoonMaterialPlugin.getMaterialType(r);return e??null}extendMaterialParams(r,e){return ax(this,null,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(r,e),yield this.mtoonMaterialPlugin.extendMaterialParams(r,e)})}afterRoot(r){return ax(this,null,function*(){yield this.metaPlugin.afterRoot(r),yield this.humanoidPlugin.afterRoot(r),yield this.expressionPlugin.afterRoot(r),yield this.lookAtPlugin.afterRoot(r),yield this.firstPersonPlugin.afterRoot(r),yield this.springBonePlugin.afterRoot(r),yield this.nodeConstraintPlugin.afterRoot(r),yield this.mtoonMaterialPlugin.afterRoot(r);const e=r.userData.vrmMeta,t=r.userData.vrmHumanoid;if(e&&t){const n=new Pwe({scene:r.scene,expressionManager:r.userData.vrmExpressionManager,firstPerson:r.userData.vrmFirstPerson,humanoid:t,lookAt:r.userData.vrmLookAt,meta:e,materials:r.userData.vrmMToonMaterials,springBoneManager:r.userData.vrmSpringBoneManager,nodeConstraintManager:r.userData.vrmNodeConstraintManager});r.userData.vrm=n}})}};function K_e(r){const e=new Set;return r.traverse(t=>{if(!t.isMesh)return;const n=t;e.add(n)}),e}function F8(r,e,t){if(e.size===1){const a=e.values().next().value;if(a.weight===1)return r[a.index]}const n=new Float32Array(r[0].count*3);let i=0;if(t)i=1;else for(const a of e)i+=a.weight;for(const a of e){const o=r[a.index],l=a.weight/i;for(let c=0;c<o.count;c++)n[c*3+0]+=o.getX(c)*l,n[c*3+1]+=o.getY(c)*l,n[c*3+2]+=o.getZ(c)*l}return new Lt(n,3)}function q_e(r){var e;const t=K_e(r.scene),n=new Map,i=(e=r.expressionManager)==null?void 0:e.expressionMap;if(i!=null)for(const[s,a]of Object.entries(i)){const o=new Set;for(const l of a.binds)if(l instanceof Im){if(l.weight!==0)for(const c of l.primitives){let u=n.get(c);u==null&&(u=new Map,n.set(c,u));let f=u.get(s);f==null&&(f=new Set,u.set(s,f)),f.add(l)}o.add(l)}for(const l of o)a.deleteBind(l)}for(const s of t){const a=n.get(s);if(a==null)continue;const o=s.geometry.morphAttributes;s.geometry.morphAttributes={};const l=s.geometry.clone();s.geometry=l;const c=l.morphTargetsRelative,u=o.position!=null,f=o.normal!=null,d={},p={},v=[];if(u||f){u&&(d.position=[]),f&&(d.normal=[]);let m=0;for(const[g,w]of a)u&&(d.position[m]=F8(o.position,w,c)),f&&(d.normal[m]=F8(o.normal,w,c)),i?.[g].addBind(new Im({index:m,weight:1,primitives:[s]})),p[g]=m,v.push(0),m++}l.morphAttributes=d,s.morphTargetDictionary=p,s.morphTargetInfluences=v}}function v1(r,e,t){if(r.getComponent)return r.getComponent(e,t);{let n=r.array[e*r.itemSize+t];return r.normalized&&(n=sn.denormalize(n,r.array)),n}}function MX(r,e,t,n){r.setComponent?r.setComponent(e,t,n):(r.normalized&&(n=sn.normalize(n,r.array)),r.array[e*r.itemSize+t]=n)}function Y_e(r){var e;const t=X_e(r),n=new Set;for(const f of t)n.has(f.geometry)&&(f.geometry=nxe(f.geometry)),n.add(f.geometry);const i=new Map;for(const f of n){const d=f.getAttribute("skinIndex"),p=(e=i.get(d))!=null?e:new Map;i.set(d,p);const v=f.getAttribute("skinWeight"),m=Z_e(d,v);p.set(v,m)}const s=new Map;for(const f of t){const d=J_e(f,i);s.set(f,d)}const a=[];for(const[f,d]of s){let p=!1;for(const v of a)if($_e(d,v.boneInverseMap)){p=!0,v.meshes.add(f);for(const[g,w]of d)v.boneInverseMap.set(g,w);break}p||a.push({boneInverseMap:d,meshes:new Set([f])})}const o=new Map,l=new PT,c=new PT,u=new PT;for(const f of a){const{boneInverseMap:d,meshes:p}=f,v=Array.from(d.keys()),m=Array.from(d.values()),g=new Ru(v,m),w=c.getOrCreate(g);for(const b of p){const E=b.geometry.getAttribute("skinIndex"),B=l.getOrCreate(E),S=b.skeleton.bones,M=S.map(O=>u.getOrCreate(O)).join(","),I=`${B};${w};${M}`;let k=o.get(I);k==null&&(k=E.clone(),exe(k,S,v),o.set(I,k)),b.geometry.setAttribute("skinIndex",k)}for(const b of p)b.bind(g,new at)}}function X_e(r){const e=new Set;return r.traverse(t=>{if(!t.isSkinnedMesh)return;const n=t;e.add(n)}),e}function Z_e(r,e){const t=new Set;for(let n=0;n<r.count;n++)for(let i=0;i<r.itemSize;i++){const s=v1(r,n,i);v1(e,n,i)!==0&&t.add(s)}return t}function J_e(r,e){const t=new Map,n=r.skeleton,i=r.geometry,s=i.getAttribute("skinIndex"),a=i.getAttribute("skinWeight"),o=e.get(s),l=o?.get(a);if(!l)throw new Error("Unreachable. attributeUsedIndexSetMap does not know the skin index attribute or the skin weight attribute.");for(const c of l)t.set(n.bones[c],n.boneInverses[c]);return t}function $_e(r,e){for(const[t,n]of r.entries()){const i=e.get(t);if(i!=null&&!txe(n,i))return!1}return!0}function exe(r,e,t){const n=new Map;for(const s of e)n.set(s,n.size);const i=new Map;for(const[s,a]of t.entries()){const o=n.get(a);i.set(o,s)}for(let s=0;s<r.count;s++)for(let a=0;a<r.itemSize;a++){const o=v1(r,s,a),l=i.get(o);MX(r,s,a,l)}r.needsUpdate=!0}function txe(r,e,t){if(t=t||1e-4,r.elements.length!=e.elements.length)return!1;for(let n=0,i=r.elements.length;n<i;n++)if(Math.abs(r.elements[n]-e.elements[n])>t)return!1;return!0}var PT=class{constructor(){this._objectIndexMap=new Map,this._index=0}get(r){return this._objectIndexMap.get(r)}getOrCreate(r){let e=this._objectIndexMap.get(r);return e==null&&(e=this._index,this._objectIndexMap.set(r,e),this._index++),e}};function nxe(r){var e,t,n,i;const s=new Gn;s.name=r.name,s.setIndex(r.index);for(const[a,o]of Object.entries(r.attributes))s.setAttribute(a,o);for(const[a,o]of Object.entries(r.morphAttributes)){const l=a;s.morphAttributes[l]=o.concat()}s.morphTargetsRelative=r.morphTargetsRelative,s.groups=[];for(const a of r.groups)s.addGroup(a.start,a.count,a.materialIndex);return s.boundingSphere=(t=(e=r.boundingSphere)==null?void 0:e.clone())!=null?t:null,s.boundingBox=(i=(n=r.boundingBox)==null?void 0:n.clone())!=null?i:null,s.drawRange.start=r.drawRange.start,s.drawRange.count=r.drawRange.count,s.userData=r.userData,s}function L8(r){if(Object.values(r).forEach(e=>{e?.isTexture&&e.dispose()}),r.isShaderMaterial){const e=r.uniforms;e&&Object.values(e).forEach(t=>{const n=t.value;n?.isTexture&&n.dispose()})}r.dispose()}function rxe(r){const e=r.geometry;e&&e.dispose();const t=r.skeleton;t&&t.dispose();const n=r.material;n&&(Array.isArray(n)?n.forEach(i=>L8(i)):n&&L8(n))}function ixe(r){r.traverse(rxe)}function sxe(r,e){var t,n;console.warn("VRMUtils.removeUnnecessaryJoints: removeUnnecessaryJoints is deprecated. Use combineSkeletons instead. combineSkeletons contributes more to the performance improvement. This function will be removed in the next major version.");const i=(t=e?.experimentalSameBoneCounts)!=null?t:!1,s=[];r.traverse(l=>{l.type==="SkinnedMesh"&&s.push(l)});const a=new Map;let o=0;for(const l of s){const u=l.geometry.getAttribute("skinIndex");if(a.has(u))continue;const f=new Map,d=new Map;for(let p=0;p<u.count;p++)for(let v=0;v<u.itemSize;v++){const m=v1(u,p,v);let g=f.get(m);g==null&&(g=f.size,f.set(m,g),d.set(g,m)),MX(u,p,v,g)}u.needsUpdate=!0,a.set(u,d),o=Math.max(o,f.size)}for(const l of s){const u=l.geometry.getAttribute("skinIndex"),f=a.get(u),d=[],p=[],v=i?o:f.size;for(let g=0;g<v;g++){const w=(n=f.get(g))!=null?n:0;d.push(l.skeleton.bones[w]),p.push(l.skeleton.boneInverses[w])}const m=new Ru(d,p);l.bind(m,new at)}}function axe(r){const e=new Map;r.traverse(t=>{var n,i,s,a;if(!t.isMesh)return;const o=t,l=o.geometry,c=l.index;if(c==null)return;const u=e.get(l);if(u!=null){o.geometry=u;return}const f=Object.values(l.attributes)[0].count,d=new Array(f);let p=0;const v=c.array;for(let B=0;B<v.length;B++){const S=v[B];d[S]||(d[S]=!0,p++)}if(p===f)return;const m=[],g=[];let w=0;for(let B=0;B<d.length;B++)if(d[B]){const S=w++;m[B]=S,g[S]=B}const b=new Gn;b.name=l.name,b.morphTargetsRelative=l.morphTargetsRelative,l.groups.forEach(B=>{b.addGroup(B.start,B.count,B.materialIndex)}),b.boundingBox=(i=(n=l.boundingBox)==null?void 0:n.clone())!=null?i:null,b.boundingSphere=(a=(s=l.boundingSphere)==null?void 0:s.clone())!=null?a:null,b.setDrawRange(l.drawRange.start,l.drawRange.count),b.userData=l.userData,e.set(l,b);{const B=c.array,S=new B.constructor(B.length);for(let M=0;M<B.length;M++){const I=B[M],k=m[I];S[M]=k}b.setIndex(new Lt(S,1,!1))}Object.keys(l.attributes).forEach(B=>{const S=l.attributes[B];if(S.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const M=S.array,{itemSize:I,normalized:k}=S,O=new M.constructor(g.length*I);g.forEach((C,P)=>{for(let D=0;D<I;D++)O[P*I+D]=M[C*I+D]}),b.setAttribute(B,new Lt(O,I,k))});let E=!0;for(const[B,S]of Object.entries(l.morphAttributes)){const M=B;b.morphAttributes[M]=[];for(let I=0;I<S.length;I++){const k=S[I];if(k.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const O=k.array,{itemSize:C,normalized:P}=k,D=new O.constructor(g.length*C);g.forEach((F,_)=>{for(let R=0;R<C;R++)D[_*C+R]=O[F*C+R]}),E=E&&D.every(F=>F===0),b.morphAttributes[M][I]=new Lt(D,C,P)}}E&&(b.morphAttributes={}),o.geometry=b}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function oxe(r){var e;((e=r.meta)==null?void 0:e.metaVersion)==="0"&&(r.scene.rotation.y=Math.PI)}var Bh=class{constructor(){}};Bh.combineMorphs=q_e;Bh.combineSkeletons=Y_e;Bh.deepDispose=ixe;Bh.removeUnnecessaryJoints=sxe;Bh.removeUnnecessaryVertices=axe;Bh.rotateVRM0=oxe;/*!
 * @pixiv/three-vrm-core v3.4.2
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-mtoon v3.4.2
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v3.4.2
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-v0compat v3.4.2
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-node-constraint v3.4.2
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-springbone v3.4.2
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2025 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var bi;(function(r){r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.LINEAR=9729]="LINEAR",r[r.REPEAT=10497]="REPEAT"})(bi||(bi={}));const y1="blend_",D8="vrmColliderSphere";class lxe{parse(e,t,n,i){const s=e.humanoid,a=e.meta,o=e.materials,l={},c={},u={},f=e.lookAt,d={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(a)if(o){if(!f)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const p=o.filter((me,Te,Re)=>Re.findIndex(de=>de.name===me.name.replace(" (Outline)",""))===Te).map(me=>me),v=p.map(me=>me.name),m=n?{name:"icon",imageBitmap:n.image}:null,g=p.filter(me=>me.map).map(me=>{if(!me.map)throw new Error(me.name+" map is null");return{name:me.name,imageBitmap:me.map.image}}),w=p.filter(me=>me.userData.shadeTexture).map(me=>{if(!me.userData.shadeTexture)throw new Error(me.userData.shadeTexture+" map is null");return{name:me.name+"_shade",imageBitmap:me.userData.shadeTexture.image}}),b=g.concat(w),E=hxe(b,m),B=dxe(E),S=pxe(E),M=fxe(p,b),I=t.children.filter(me=>me.children.length>0&&me.children[0].type===Xs.Bone)[0],k=CX(I).filter(me=>me.name!==D8),O=k.map(me=>me.name),C=k.map(me=>({children:me.children.filter(Te=>Te.name!==D8).map(Te=>O.indexOf(Te.name)),name:me.name,rotation:[me.quaternion.x,me.quaternion.y,me.quaternion.z,me.quaternion.w],scale:[me.scale.x,me.scale.y,me.scale.z],translation:[me.position.x,me.position.y,me.position.z]})),P=[],D=t.children.filter(me=>me.type===Xs.Group||me.type===Xs.SkinnedMesh),F=[];D.forEach(me=>{const Te=me.type===Xs.Group?me.children[0]:me,Re=Te.geometry.attributes;F.push(new Gc(Re.position,bi.FLOAT,nr.POSITION,cl.VEC3,Te.name,void 0)),F.push(new Gc(Re.normal,bi.FLOAT,nr.NORMAL,cl.VEC3,Te.name,void 0)),F.push(new Gc(Re.uv,bi.FLOAT,nr.UV,cl.VEC2,Te.name,void 0)),F.push(new Gc(Re.skinWeight,bi.FLOAT,nr.SKIN_WEIGHT,cl.VEC4,Te.name,void 0)),F.push(new Gc(Re.skinIndex,bi.UNSIGNED_SHORT,nr.SKIN_INDEX,cl.VEC4,Te.name,void 0)),(me.type===Xs.Group?me.children.map(Z=>Z):[me]).forEach(Z=>{if(!Z.geometry.index)throw new Error(Z.name+" geometry.index is null");F.push(new Gc(Z.geometry.index,bi.UNSIGNED_INT,nr.INDEX,cl.SCALAR,Te.name,Z.name))}),Te.morphTargetDictionary||(Te.morphTargetDictionary={},Te.morphTargetInfluences=[],Te.geometry.morphAttributes={},Te.updateMorphTargets()),Te.geometry.userData.targetNames=[];for(const Z in e.expressionManager.expressionMap){const ve=e.expressionManager.expressionMap[Z],ye=ve._binds.map(ce=>({node:k.length,index:ce.index,weight:ce.weight}));let se=!1;for(const ce in $i)if(Z.toLowerCase()===$i[ce].toLowerCase()){l[$i[ce]]={morphTargetBinds:ye,isBinary:ve.isBinary,overrideBlink:ve.overrideBlink,overrideLookAt:ve.overrideLookAt,overrideMouth:ve.overrideMouth},se=!0;break}!se&&Z.toLowerCase()==="surprise"&&(l.surprised={morphTargetBinds:ye,isBinary:ve.isBinary,overrideBlink:ve.overrideBlink,overrideLookAt:ve.overrideLookAt,overrideMouth:ve.overrideMouth},se=!0),se===!1&&(c[Z]={morphTargetBinds:ye,isBinary:ve.isBinary,overrideBlink:ve.overrideBlink,overrideLookAt:ve.overrideLookAt,overrideMouth:ve.overrideMouth})}for(const Z in Te.morphTargetDictionary){Te.geometry.userData.targetNames.push(Z);const ve=Te.morphTargetDictionary[Z],ye=Te.geometry.morphAttributes;F.push(new Gc(ye.position[ve],bi.FLOAT,nr.BLEND_POSITION,cl.VEC3,Te.name,y1+Z)),F.push(new Gc(ye.normal[ve],bi.FLOAT,nr.BLEND_NORMAL,cl.VEC3,Te.name,y1+Z))}}),Object.keys(l).length>0&&(u.preset=l),Object.keys(c).length>0&&(u.custom=c),D.forEach(me=>{const Te=me.type===Xs.Group?me.children[0]:me,Re=new Float32Array(Te.skeleton.boneInverses.map(de=>de.elements).flat());F.push(new Gc(new Lt(Re,16),bi.FLOAT,nr.BIND_MATRIX,cl.MAT4,Te.name,Te.name))}),P.push(...F.map(me=>({bufferView:-1,byteOffset:0,componentType:me.valueType,count:me.attribute.count,max:me.max,min:me.min,normalized:!1,type:me.accessorsType})));const _=uxe(D,F,v);D.forEach((me,Te)=>{C.push({mesh:Te,name:me.name,rotation:[me.quaternion.x,me.quaternion.y,me.quaternion.z,me.quaternion.w],scale:[me.scale.x,me.scale.y,me.scale.z],skin:Te,translation:[me.position.x,me.position.y,me.position.z]})});const R=Axe(D,F,O),L={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:f.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:f.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:f.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:f.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:f.applier.rangeMapVerticalDown.inputMaxValue,outputScale:f.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:f.applier.rangeMapVerticalUp.inputMaxValue,outputScale:f.applier.rangeMapVerticalUp.outputScale},type:"bone"},Q={humanBones:{}};for(const me in s.humanBones)Q.humanBones[me]={node:O.indexOf(s.humanBones[me].node.name)};const G=a,Y=[];Y.push(...b.map(me=>({buffer:O8(me.imageBitmap),type:nr.IMAGE}))),Y.push(...F.map(me=>({buffer:me.buffer,type:me.type}))),m&&Y.push({buffer:O8(m.imageBitmap),type:nr.IMAGE});let W=0,V=0,T=0;const H=Y.map((me,Te)=>{const Re={buffer:0,byteLength:me.buffer.byteLength,byteOffset:W,target:me.type===nr.IMAGE||me.type===nr.BIND_MATRIX?void 0:me.type===nr.INDEX?bi.ELEMENT_ARRAY_BUFFER:bi.ARRAY_BUFFER};return W+=me.buffer.byteLength,me.type===nr.IMAGE?E[V++].bufferView=Te:P[T++].bufferView=Te,Re}),K=mxe(t,C),N={accessors:P,asset:d,buffers:[{byteLength:W}],bufferViews:H,extensions:{VRMC_vrm:{expressions:u,humanoid:Q,lookAt:L,meta:G,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:E,materials:M,meshes:_,nodes:C,samplers:B,avatar:0,scenes:K,skins:R,textures:S},te=new N8(IL(JSON.stringify(N,void 0,2)),"JSON"),oe=new N8(ov(Y.map(me=>me.buffer)),"BIN\0"),fe=ov([te.buffer,oe.buffer]),he=ov([IL("glTF"),RL(2,4),RL(fe.byteLength+12,4)]);i(ov([he,fe]))}}function CX(r){return r.children.length<=0?[r]:[r].concat(r.children.map(e=>CX(e)).flat())}function O8(r){const e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0);const t=e.toDataURL("image/png"),n=atob(t.split(",")[1]),i=new ArrayBuffer(n.length),s=new DataView(i);for(let a=0;a<n.length;a++)s.setUint8(a,n.charCodeAt(a));return i}function RL(r,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,r,!0),t}function IL(r){return new TextEncoder().encode(r).buffer}function ov(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;++i)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t.buffer}function cxe(r,e){const t=e===bi.UNSIGNED_SHORT?2:4,n=r.array;let i=0;const s=new ArrayBuffer(r.count*r.itemSize*t),a=new DataView(s);for(let o=0;o<r.count;o++)for(let l=0;l<r.itemSize;l++){let c;r.itemSize>4?c=n[o*r.itemSize+l]:l===0?c=r.getX(o):l===1?c=r.getY(o):l===2?c=r.getZ(o):c=r.getW(o),e===bi.UNSIGNED_SHORT?a.setUint16(i,c,!0):e===bi.UNSIGNED_INT?a.setUint32(i,c,!0):a.setFloat32(i,c,!0),i+=t}return s}let N8=class{constructor(e,t){this.data=e,this.type=t;const n=this.data;this.buffer=ov([RL(n.byteLength,4),IL(this.type),n])}paddingBinary(e,t){const n=Math.ceil(e.byteLength/4)*4;if(e.byteLength===n)return e;const i=new Uint8Array(n);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<n;s++)i.set(new Uint8Array(t),s);return i.buffer}},Gc=class{constructor(e,t,n,i,s,a){this.attribute=e,this.type=n,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=a,this.buffer=cxe(this.attribute,this.valueType),this.max=n===nr.POSITION||n===nr.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===2))]:void 0,this.min=n===nr.POSITION||n===nr.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((o,l)=>l%3===2))]:void 0}};var Wp;(function(r){r.MeshBasicMaterial="MeshBasicMaterial",r.MeshStandardMaterial="MeshStandardMaterial",r.MToonMaterial="MToonMaterial"})(Wp||(Wp={}));var cl;(function(r){r.SCALAR="SCALAR",r.VEC2="VEC2",r.VEC3="VEC3",r.VEC4="VEC4",r.MAT4="MAT4"})(cl||(cl={}));var nr;(function(r){r.POSITION="POSITION",r.NORMAL="NORMAL",r.UV="UV",r.INDEX="INDEX",r.SKIN_WEIGHT="SKIN_WEIGHT",r.SKIN_INDEX="SKIN_INDEX",r.BLEND_POSITION="BLEND_POSITION",r.BLEND_NORMAL="BLEND_NORMAL",r.BIND_MATRIX="BIND_MATRIX",r.IMAGE="IMAGE"})(nr||(nr={}));var Xs;(function(r){r.Group="Group",r.SkinnedMesh="SkinnedMesh",r.Object3D="Object3D",r.Bone="Bone"})(Xs||(Xs={}));const uxe=(r,e,t)=>r.map(n=>{const i=n.type===Xs.Group?n.children[0]:n,s=n.type===Xs.Group?n.children.map(a=>a):[n];return{name:n.name,primitives:s.map(a=>{const o=e.map(c=>c.meshName===i.name?c.type:null),l=Array.isArray(a.material)?a.material[0].name:a.material.name;return{attributes:{JOINTS_0:o.indexOf(nr.SKIN_INDEX),NORMAL:o.indexOf(nr.NORMAL),POSITION:o.indexOf(nr.POSITION),TEXCOORD_0:o.indexOf(nr.UV),WEIGHTS_0:o.indexOf(nr.SKIN_WEIGHT)},extras:{targetNames:a.geometry.userData.targetNames},indices:e.map(c=>c.type===nr.INDEX&&c.meshName===i.name?c.name:null).indexOf(a.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(c=>({NORMAL:e.map(u=>u.type===nr.BLEND_NORMAL&&u.meshName===i.name?u.name:null).indexOf(y1+c),POSITION:e.map(u=>u.type===nr.BLEND_POSITION&&u.meshName===i.name?u.name:null).indexOf(y1+c)})):void 0}})}}),Axe=(r,e,t)=>r.map(n=>{const i=n.type===Xs.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===nr.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),fxe=(r,e)=>r.map(t=>{let n,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(u=>u.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},n=t.color?[1,1,1,1]:void 0;else{const c=t;n=c.color?[c.color.r,c.color.g,c.color.b,1]:void 0}let s=-1;t.map?s=e.map(c=>c.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(c=>c.name).indexOf(t.uniforms.map.name));const a=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,o=(()=>{switch(t.type){case Wp.MeshStandardMaterial:return t.metalness;case Wp.MeshBasicMaterial:return 0;default:return 0}})(),l=(()=>{switch(t.type){case Wp.MeshStandardMaterial:return t.roughness;case Wp.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:n,baseColorTexture:a,metallicFactor:o,roughnessFactor:l}}}),hxe=(r,e)=>(e?r.concat(e):r).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),dxe=r=>r.map(()=>({magFilter:bi.LINEAR,minFilter:bi.LINEAR,wrapS:bi.REPEAT,wrapT:bi.REPEAT})),pxe=r=>r.map((e,t)=>({sampler:0,source:t})),mxe=(r,e)=>{const t=e.map(n=>n.name);return[{nodes:r.children.filter(n=>n.type===Xs.Object3D||n.type===Xs.SkinnedMesh||n.type===Xs.Group||n.type===Xs.Bone).map(n=>t.indexOf(n.name))}]},TX=0,gxe=1,RX=2,P8=2,kT=1.25,k8=1,Tv=6*4+4+4,VE=65535,vxe=Math.pow(2,-24),HT=Symbol("SKIP_GENERATION");function yxe(r){return r.index?r.index.count:r.attributes.position.count}function Km(r){return yxe(r)/3}function wxe(r,e=ArrayBuffer){return r>65535?new Uint32Array(new e(4*r)):new Uint16Array(new e(2*r))}function _xe(r,e){if(!r.index){const t=r.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=wxe(t,n);r.setIndex(new Lt(i,1));for(let s=0;s<t;s++)i[s]=s}}function IX(r,e){const t=Km(r),n=e||r.drawRange,i=n.start/3,s=(n.start+n.count)/3,a=Math.max(0,i),o=Math.min(t,s)-a;return[{offset:Math.floor(a),count:Math.floor(o)}]}function UX(r,e){if(!r.groups||!r.groups.length)return IX(r,e);const t=[],n=new Set,i=e||r.drawRange,s=i.start/3,a=(i.start+i.count)/3;for(const l of r.groups){const c=l.start/3,u=(l.start+l.count)/3;n.add(Math.max(s,c)),n.add(Math.min(a,u))}const o=Array.from(n.values()).sort((l,c)=>l-c);for(let l=0;l<o.length-1;l++){const c=o[l],u=o[l+1];t.push({offset:Math.floor(c),count:Math.floor(u-c)})}return t}function xxe(r,e){const t=Km(r),n=UX(r,e).sort((a,o)=>a.offset-o.offset),i=n[n.length-1];i.count=Math.min(t-i.offset,i.count);let s=0;return n.forEach(({count:a})=>s+=a),t!==s}function QT(r,e,t,n,i){let s=1/0,a=1/0,o=1/0,l=-1/0,c=-1/0,u=-1/0,f=1/0,d=1/0,p=1/0,v=-1/0,m=-1/0,g=-1/0;for(let w=e*6,b=(e+t)*6;w<b;w+=6){const E=r[w+0],B=r[w+1],S=E-B,M=E+B;S<s&&(s=S),M>l&&(l=M),E<f&&(f=E),E>v&&(v=E);const I=r[w+2],k=r[w+3],O=I-k,C=I+k;O<a&&(a=O),C>c&&(c=C),I<d&&(d=I),I>m&&(m=I);const P=r[w+4],D=r[w+5],F=P-D,_=P+D;F<o&&(o=F),_>u&&(u=_),P<p&&(p=P),P>g&&(g=P)}n[0]=s,n[1]=a,n[2]=o,n[3]=l,n[4]=c,n[5]=u,i[0]=f,i[1]=d,i[2]=p,i[3]=v,i[4]=m,i[5]=g}function bxe(r,e=null,t=null,n=null){const i=r.attributes.position,s=r.index?r.index.array:null,a=Km(r),o=i.normalized;let l;e===null?(l=new Float32Array(a*6),t=0,n=a):(l=e,t=t||0,n=n||a);const c=i.array,u=i.offset||0;let f=3;i.isInterleavedBufferAttribute&&(f=i.data.stride);const d=["getX","getY","getZ"];for(let p=t;p<t+n;p++){const v=p*3,m=p*6;let g=v+0,w=v+1,b=v+2;s&&(g=s[g],w=s[w],b=s[b]),o||(g=g*f+u,w=w*f+u,b=b*f+u);for(let E=0;E<3;E++){let B,S,M;o?(B=i[d[E]](g),S=i[d[E]](w),M=i[d[E]](b)):(B=c[g+E],S=c[w+E],M=c[b+E]);let I=B;S<I&&(I=S),M<I&&(I=M);let k=B;S>k&&(k=S),M>k&&(k=M);const O=(k-I)/2,C=E*2;l[m+C+0]=I+O,l[m+C+1]=O+(Math.abs(I)+O)*vxe}}return l}function Zr(r,e,t){return t.min.x=e[r],t.min.y=e[r+1],t.min.z=e[r+2],t.max.x=e[r+3],t.max.y=e[r+4],t.max.z=e[r+5],t}function H8(r){let e=-1,t=-1/0;for(let n=0;n<3;n++){const i=r[n+3]-r[n];i>t&&(t=i,e=n)}return e}function Q8(r,e){e.set(r)}function z8(r,e,t){let n,i;for(let s=0;s<3;s++){const a=s+3;n=r[s],i=e[s],t[s]=n<i?n:i,n=r[a],i=e[a],t[a]=n>i?n:i}}function ux(r,e,t){for(let n=0;n<3;n++){const i=e[r+2*n],s=e[r+2*n+1],a=i-s,o=i+s;a<t[n]&&(t[n]=a),o>t[n+3]&&(t[n+3]=o)}}function M0(r){const e=r[3]-r[0],t=r[4]-r[1],n=r[5]-r[2];return 2*(e*t+t*n+n*e)}const Jc=32,Exe=(r,e)=>r.candidate-e.candidate,gA=new Array(Jc).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),Ax=new Float32Array(6);function Sxe(r,e,t,n,i,s){let a=-1,o=0;if(s===TX)a=H8(e),a!==-1&&(o=(e[a]+e[a+3])/2);else if(s===gxe)a=H8(r),a!==-1&&(o=Bxe(t,n,i,a));else if(s===RX){const l=M0(r);let c=kT*i;const u=n*6,f=(n+i)*6;for(let d=0;d<3;d++){const p=e[d],g=(e[d+3]-p)/Jc;if(i<Jc/4){const w=[...gA];w.length=i;let b=0;for(let B=u;B<f;B+=6,b++){const S=w[b];S.candidate=t[B+2*d],S.count=0;const{bounds:M,leftCacheBounds:I,rightCacheBounds:k}=S;for(let O=0;O<3;O++)k[O]=1/0,k[O+3]=-1/0,I[O]=1/0,I[O+3]=-1/0,M[O]=1/0,M[O+3]=-1/0;ux(B,t,M)}w.sort(Exe);let E=i;for(let B=0;B<E;B++){const S=w[B];for(;B+1<E&&w[B+1].candidate===S.candidate;)w.splice(B+1,1),E--}for(let B=u;B<f;B+=6){const S=t[B+2*d];for(let M=0;M<E;M++){const I=w[M];S>=I.candidate?ux(B,t,I.rightCacheBounds):(ux(B,t,I.leftCacheBounds),I.count++)}}for(let B=0;B<E;B++){const S=w[B],M=S.count,I=i-S.count,k=S.leftCacheBounds,O=S.rightCacheBounds;let C=0;M!==0&&(C=M0(k)/l);let P=0;I!==0&&(P=M0(O)/l);const D=k8+kT*(C*M+P*I);D<c&&(a=d,c=D,o=S.candidate)}}else{for(let E=0;E<Jc;E++){const B=gA[E];B.count=0,B.candidate=p+g+E*g;const S=B.bounds;for(let M=0;M<3;M++)S[M]=1/0,S[M+3]=-1/0}for(let E=u;E<f;E+=6){let M=~~((t[E+2*d]-p)/g);M>=Jc&&(M=Jc-1);const I=gA[M];I.count++,ux(E,t,I.bounds)}const w=gA[Jc-1];Q8(w.bounds,w.rightCacheBounds);for(let E=Jc-2;E>=0;E--){const B=gA[E],S=gA[E+1];z8(B.bounds,S.rightCacheBounds,B.rightCacheBounds)}let b=0;for(let E=0;E<Jc-1;E++){const B=gA[E],S=B.count,M=B.bounds,k=gA[E+1].rightCacheBounds;S!==0&&(b===0?Q8(M,Ax):z8(M,Ax,Ax)),b+=S;let O=0,C=0;b!==0&&(O=M0(Ax)/l);const P=i-b;P!==0&&(C=M0(k)/l);const D=k8+kT*(O*b+C*P);D<c&&(a=d,c=D,o=B.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Bxe(r,e,t,n){let i=0;for(let s=e,a=e+t;s<a;s++)i+=r[s*6+n*2];return i/t}class zT{constructor(){this.boundingData=new Float32Array(6)}}function Mxe(r,e,t,n,i,s){let a=n,o=n+i-1;const l=s.pos,c=s.axis*2;for(;;){for(;a<=o&&t[a*6+c]<l;)a++;for(;a<=o&&t[o*6+c]>=l;)o--;if(a<o){for(let u=0;u<3;u++){let f=e[a*3+u];e[a*3+u]=e[o*3+u],e[o*3+u]=f}for(let u=0;u<6;u++){let f=t[a*6+u];t[a*6+u]=t[o*6+u],t[o*6+u]=f}a++,o--}else return a}}function Cxe(r,e,t,n,i,s){let a=n,o=n+i-1;const l=s.pos,c=s.axis*2;for(;;){for(;a<=o&&t[a*6+c]<l;)a++;for(;a<=o&&t[o*6+c]>=l;)o--;if(a<o){let u=r[a];r[a]=r[o],r[o]=u;for(let f=0;f<6;f++){let d=t[a*6+f];t[a*6+f]=t[o*6+f],t[o*6+f]=d}a++,o--}else return a}}function va(r,e){return e[r+15]===65535}function eo(r,e){return e[r+6]}function ko(r,e){return e[r+14]}function Ho(r){return r+8}function Qo(r,e){return e[r+6]}function FX(r,e){return e[r+7]}let LX,lv,Bb,DX;const Txe=Math.pow(2,32);function UL(r){return"count"in r?1:1+UL(r.left)+UL(r.right)}function Rxe(r,e,t){return LX=new Float32Array(t),lv=new Uint32Array(t),Bb=new Uint16Array(t),DX=new Uint8Array(t),FL(r,e)}function FL(r,e){const t=r/4,n=r/2,i="count"in e,s=e.boundingData;for(let a=0;a<6;a++)LX[t+a]=s[a];if(i)if(e.buffer){const a=e.buffer;DX.set(new Uint8Array(a),r);for(let o=r,l=r+a.byteLength;o<l;o+=Tv){const c=o/2;va(c,Bb)||(lv[o/4+6]+=t)}return r+a.byteLength}else{const a=e.offset,o=e.count;return lv[t+6]=a,Bb[n+14]=o,Bb[n+15]=VE,r+Tv}else{const a=e.left,o=e.right,l=e.splitAxis;let c;if(c=FL(r+Tv,a),c/4>Txe)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return lv[t+6]=c/4,c=FL(c,o),lv[t+7]=l,c}}function Ixe(r,e){const t=(r.index?r.index.count:r.attributes.position.count)/3,n=t>2**16,i=n?4:2,s=e?new SharedArrayBuffer(t*i):new ArrayBuffer(t*i),a=n?new Uint32Array(s):new Uint16Array(s);for(let o=0,l=a.length;o<l;o++)a[o]=o;return a}function Uxe(r,e,t,n,i){const{maxDepth:s,verbose:a,maxLeafTris:o,strategy:l,onProgress:c,indirect:u}=i,f=r._indirectBuffer,d=r.geometry,p=d.index?d.index.array:null,v=u?Cxe:Mxe,m=Km(d),g=new Float32Array(6);let w=!1;const b=new zT;return QT(e,t,n,b.boundingData,g),B(b,t,n,g),b;function E(S){c&&c(S/m)}function B(S,M,I,k=null,O=0){if(!w&&O>=s&&(w=!0,a&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(d))),I<=o||O>=s)return E(M+I),S.offset=M,S.count=I,S;const C=Sxe(S.boundingData,k,e,M,I,l);if(C.axis===-1)return E(M+I),S.offset=M,S.count=I,S;const P=v(f,p,e,M,I,C);if(P===M||P===M+I)E(M+I),S.offset=M,S.count=I;else{S.splitAxis=C.axis;const D=new zT,F=M,_=P-M;S.left=D,QT(e,F,_,D.boundingData,g),B(D,F,_,g,O+1);const R=new zT,L=P,Q=I-_;S.right=R,QT(e,L,Q,R.boundingData,g),B(R,L,Q,g,O+1)}return S}}function Fxe(r,e){const t=r.geometry;e.indirect&&(r._indirectBuffer=Ixe(t,e.useSharedArrayBuffer),xxe(t,e.range)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),r._indirectBuffer||_xe(t,e);const n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=bxe(t),s=e.indirect?IX(t,e.range):UX(t,e.range);r._roots=s.map(a=>{const o=Uxe(r,i,a.offset,a.count,e),l=UL(o),c=new n(Tv*l);return Rxe(0,o,c),c})}class Bu{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,i=-1/0;for(let s=0,a=e.length;s<a;s++){const l=e[s][t];n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}setFromPoints(e,t){let n=1/0,i=-1/0;for(let s=0,a=t.length;s<a;s++){const o=t[s],l=e.dot(o);n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Bu.prototype.setFromBox=function(){const r=new ae;return function(t,n){const i=n.min,s=n.max;let a=1/0,o=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){r.x=i.x*l+s.x*(1-l),r.y=i.y*c+s.y*(1-c),r.z=i.z*u+s.z*(1-u);const f=t.dot(r);a=Math.min(f,a),o=Math.max(f,o)}this.min=a,this.max=o}}();const Lxe=function(){const r=new ae,e=new ae,t=new ae;return function(i,s,a){const o=i.start,l=r,c=s.start,u=e;t.subVectors(o,c),r.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const f=t.dot(u),d=u.dot(l),p=u.dot(u),v=t.dot(l),g=l.dot(l)*p-d*d;let w,b;g!==0?w=(f*d-v*p)/g:w=0,b=(f+w*d)/p,a.x=w,a.y=b}}(),PO=function(){const r=new pt,e=new ae,t=new ae;return function(i,s,a,o){Lxe(i,s,r);let l=r.x,c=r.y;if(l>=0&&l<=1&&c>=0&&c<=1){i.at(l,a),s.at(c,o);return}else if(l>=0&&l<=1){c<0?s.at(0,o):s.at(1,o),i.closestPointToPoint(o,!0,a);return}else if(c>=0&&c<=1){l<0?i.at(0,a):i.at(1,a),s.closestPointToPoint(a,!0,o);return}else{let u;l<0?u=i.start:u=i.end;let f;c<0?f=s.start:f=s.end;const d=e,p=t;if(i.closestPointToPoint(f,!0,e),s.closestPointToPoint(u,!0,t),d.distanceToSquared(f)<=p.distanceToSquared(u)){a.copy(d),o.copy(f);return}else{a.copy(u),o.copy(p);return}}}}(),Dxe=function(){const r=new ae,e=new ae,t=new Wl,n=new vu;return function(s,a){const{radius:o,center:l}=s,{a:c,b:u,c:f}=a;if(n.start=c,n.end=u,n.closestPointToPoint(l,!0,r).distanceTo(l)<=o||(n.start=c,n.end=f,n.closestPointToPoint(l,!0,r).distanceTo(l)<=o)||(n.start=u,n.end=f,n.closestPointToPoint(l,!0,r).distanceTo(l)<=o))return!0;const m=a.getPlane(t);if(Math.abs(m.distanceToPoint(l))<=o){const w=m.projectPoint(l,e);if(a.containsPoint(w))return!0}return!1}}(),Oxe=1e-15;function VT(r){return Math.abs(r)<Oxe}class wl extends es{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new ae),this.satBounds=new Array(4).fill().map(()=>new Bu),this.points=[this.a,this.b,this.c],this.sphere=new zs,this.plane=new Wl,this.needsUpdate=!0}intersectsSphere(e){return Dxe(e,this)}update(){const e=this.a,t=this.b,n=this.c,i=this.points,s=this.satAxes,a=this.satBounds,o=s[0],l=a[0];this.getNormal(o),l.setFromPoints(o,i);const c=s[1],u=a[1];c.subVectors(e,t),u.setFromPoints(c,i);const f=s[2],d=a[2];f.subVectors(t,n),d.setFromPoints(f,i);const p=s[3],v=a[3];p.subVectors(n,e),v.setFromPoints(p,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}wl.prototype.closestPointToSegment=function(){const r=new ae,e=new ae,t=new vu;return function(i,s=null,a=null){const{start:o,end:l}=i,c=this.points;let u,f=1/0;for(let d=0;d<3;d++){const p=(d+1)%3;t.start.copy(c[d]),t.end.copy(c[p]),PO(t,i,r,e),u=r.distanceToSquared(e),u<f&&(f=u,s&&s.copy(r),a&&a.copy(e))}return this.closestPointToPoint(o,r),u=o.distanceToSquared(r),u<f&&(f=u,s&&s.copy(r),a&&a.copy(o)),this.closestPointToPoint(l,r),u=l.distanceToSquared(r),u<f&&(f=u,s&&s.copy(r),a&&a.copy(l)),Math.sqrt(f)}}();wl.prototype.intersectsTriangle=function(){const r=new wl,e=new Array(3),t=new Array(3),n=new Bu,i=new Bu,s=new ae,a=new ae,o=new ae,l=new ae,c=new ae,u=new vu,f=new vu,d=new vu,p=new ae;function v(m,g,w){const b=m.points;let E=0,B=-1;for(let S=0;S<3;S++){const{start:M,end:I}=u;M.copy(b[S]),I.copy(b[(S+1)%3]),u.delta(a);const k=VT(g.distanceToPoint(M));if(VT(g.normal.dot(a))&&k){w.copy(u),E=2;break}const O=g.intersectLine(u,p);if(!O&&k&&p.copy(M),(O||k)&&!VT(p.distanceTo(I))){if(E<=1)(E===1?w.start:w.end).copy(p),k&&(B=E);else if(E>=2){(B===1?w.start:w.end).copy(p),E=2;break}if(E++,E===2&&B===-1)break}}return E}return function(g,w=null,b=!1){this.needsUpdate&&this.update(),g.isExtendedTriangle?g.needsUpdate&&g.update():(r.copy(g),r.update(),g=r);const E=this.plane,B=g.plane;if(Math.abs(E.normal.dot(B.normal))>1-1e-10){const S=this.satBounds,M=this.satAxes;t[0]=g.a,t[1]=g.b,t[2]=g.c;for(let O=0;O<4;O++){const C=S[O],P=M[O];if(n.setFromPoints(P,t),C.isSeparated(n))return!1}const I=g.satBounds,k=g.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let O=0;O<4;O++){const C=I[O],P=k[O];if(n.setFromPoints(P,e),C.isSeparated(n))return!1}for(let O=0;O<4;O++){const C=M[O];for(let P=0;P<4;P++){const D=k[P];if(s.crossVectors(C,D),n.setFromPoints(s,e),i.setFromPoints(s,t),n.isSeparated(i))return!1}}return w&&(b||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),w.start.set(0,0,0),w.end.set(0,0,0)),!0}else{const S=v(this,B,f);if(S===1&&g.containsPoint(f.end))return w&&(w.start.copy(f.end),w.end.copy(f.end)),!0;if(S!==2)return!1;const M=v(g,E,d);if(M===1&&this.containsPoint(d.end))return w&&(w.start.copy(d.end),w.end.copy(d.end)),!0;if(M!==2)return!1;if(f.delta(o),d.delta(l),o.dot(l)<0){let F=d.start;d.start=d.end,d.end=F}const I=f.start.dot(o),k=f.end.dot(o),O=d.start.dot(o),C=d.end.dot(o),P=k<O,D=I<C;return I!==C&&O!==k&&P===D?!1:(w&&(c.subVectors(f.start,d.start),c.dot(o)>0?w.start.copy(f.start):w.start.copy(d.start),c.subVectors(f.end,d.end),c.dot(o)<0?w.end.copy(f.end):w.end.copy(d.end)),!0)}}}();wl.prototype.distanceToPoint=function(){const r=new ae;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();wl.prototype.distanceToTriangle=function(){const r=new ae,e=new ae,t=["a","b","c"],n=new vu,i=new vu;return function(a,o=null,l=null){const c=o||l?n:null;if(this.intersectsTriangle(a,c))return(o||l)&&(o&&c.getCenter(o),l&&c.getCenter(l)),0;let u=1/0;for(let f=0;f<3;f++){let d;const p=t[f],v=a[p];this.closestPointToPoint(v,r),d=v.distanceToSquared(r),d<u&&(u=d,o&&o.copy(r),l&&l.copy(v));const m=this[p];a.closestPointToPoint(m,r),d=m.distanceToSquared(r),d<u&&(u=d,o&&o.copy(m),l&&l.copy(r))}for(let f=0;f<3;f++){const d=t[f],p=t[(f+1)%3];n.set(this[d],this[p]);for(let v=0;v<3;v++){const m=t[v],g=t[(v+1)%3];i.set(a[m],a[g]),PO(n,i,r,e);const w=r.distanceToSquared(e);w<u&&(u=w,o&&o.copy(r),l&&l.copy(e))}}return Math.sqrt(u)}}();class ra{constructor(e,t,n){this.isOrientedBox=!0,this.min=new ae,this.max=new ae,this.matrix=new at,this.invMatrix=new at,this.points=new Array(8).fill().map(()=>new ae),this.satAxes=new Array(3).fill().map(()=>new ae),this.satBounds=new Array(3).fill().map(()=>new Bu),this.alignedSatBounds=new Array(3).fill().map(()=>new Bu),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}ra.prototype.update=function(){return function(){const e=this.matrix,t=this.min,n=this.max,i=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let f=0;f<=1;f++){const d=1*c|2*u|4*f,p=i[d];p.x=c?n.x:t.x,p.y=u?n.y:t.y,p.z=f?n.z:t.z,p.applyMatrix4(e)}const s=this.satBounds,a=this.satAxes,o=i[0];for(let c=0;c<3;c++){const u=a[c],f=s[c],d=1<<c,p=i[d];u.subVectors(o,p),f.setFromPoints(u,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();ra.prototype.intersectsBox=function(){const r=new Bu;return function(t){this.needsUpdate&&this.update();const n=t.min,i=t.max,s=this.satBounds,a=this.satAxes,o=this.alignedSatBounds;if(r.min=n.x,r.max=i.x,o[0].isSeparated(r)||(r.min=n.y,r.max=i.y,o[1].isSeparated(r))||(r.min=n.z,r.max=i.z,o[2].isSeparated(r)))return!1;for(let l=0;l<3;l++){const c=a[l],u=s[l];if(r.setFromBox(c,t),u.isSeparated(r))return!1}return!0}}();ra.prototype.intersectsTriangle=function(){const r=new wl,e=new Array(3),t=new Bu,n=new Bu,i=new ae;return function(a){this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(r.copy(a),r.update(),a=r);const o=this.satBounds,l=this.satAxes;e[0]=a.a,e[1]=a.b,e[2]=a.c;for(let d=0;d<3;d++){const p=o[d],v=l[d];if(t.setFromPoints(v,e),p.isSeparated(t))return!1}const c=a.satBounds,u=a.satAxes,f=this.points;for(let d=0;d<3;d++){const p=c[d],v=u[d];if(t.setFromPoints(v,f),p.isSeparated(t))return!1}for(let d=0;d<3;d++){const p=l[d];for(let v=0;v<4;v++){const m=u[v];if(i.crossVectors(p,m),t.setFromPoints(i,e),n.setFromPoints(i,f),t.isSeparated(n))return!1}}return!0}}();ra.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();ra.prototype.distanceToPoint=function(){const r=new ae;return function(t){return this.closestPointToPoint(t,r),t.distanceTo(r)}}();ra.prototype.distanceToBox=function(){const r=["x","y","z"],e=new Array(12).fill().map(()=>new vu),t=new Array(12).fill().map(()=>new vu),n=new ae,i=new ae;return function(a,o=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(a))return(l||c)&&(a.getCenter(i),this.closestPointToPoint(i,n),a.closestPointToPoint(n,i),l&&l.copy(n),c&&c.copy(i)),0;const u=o*o,f=a.min,d=a.max,p=this.points;let v=1/0;for(let g=0;g<8;g++){const w=p[g];i.copy(w).clamp(f,d);const b=w.distanceToSquared(i);if(b<v&&(v=b,l&&l.copy(w),c&&c.copy(i),b<u))return Math.sqrt(b)}let m=0;for(let g=0;g<3;g++)for(let w=0;w<=1;w++)for(let b=0;b<=1;b++){const E=(g+1)%3,B=(g+2)%3,S=w<<E|b<<B,M=1<<g|w<<E|b<<B,I=p[S],k=p[M];e[m].set(I,k);const C=r[g],P=r[E],D=r[B],F=t[m],_=F.start,R=F.end;_[C]=f[C],_[P]=w?f[P]:d[P],_[D]=b?f[D]:d[P],R[C]=d[C],R[P]=w?f[P]:d[P],R[D]=b?f[D]:d[P],m++}for(let g=0;g<=1;g++)for(let w=0;w<=1;w++)for(let b=0;b<=1;b++){i.x=g?d.x:f.x,i.y=w?d.y:f.y,i.z=b?d.z:f.z,this.closestPointToPoint(i,n);const E=i.distanceToSquared(n);if(E<v&&(v=E,l&&l.copy(n),c&&c.copy(i),E<u))return Math.sqrt(E)}for(let g=0;g<12;g++){const w=e[g];for(let b=0;b<12;b++){const E=t[b];PO(w,E,n,i);const B=n.distanceToSquared(i);if(B<v&&(v=B,l&&l.copy(n),c&&c.copy(i),B<u))return Math.sqrt(B)}}return Math.sqrt(v)}}();class kO{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class Nxe extends kO{constructor(){super(()=>new wl)}}const zo=new Nxe;class Pxe{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=n=>{t&&e.push(t),t=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Tr=new Pxe;let HA,Kp;const jd=[],fx=new kO(()=>new Or);function kxe(r,e,t,n,i,s){HA=fx.getPrimitive(),Kp=fx.getPrimitive(),jd.push(HA,Kp),Tr.setBuffer(r._roots[e]);const a=LL(0,r.geometry,t,n,i,s);Tr.clearBuffer(),fx.releasePrimitive(HA),fx.releasePrimitive(Kp),jd.pop(),jd.pop();const o=jd.length;return o>0&&(Kp=jd[o-1],HA=jd[o-2]),a}function LL(r,e,t,n,i=null,s=0,a=0){const{float32Array:o,uint16Array:l,uint32Array:c}=Tr;let u=r*2;if(va(u,l)){const d=eo(r,c),p=ko(u,l);return Zr(r,o,HA),n(d,p,!1,a,s+r,HA)}else{let C=function(D){const{uint16Array:F,uint32Array:_}=Tr;let R=D*2;for(;!va(R,F);)D=Ho(D),R=D*2;return eo(D,_)},P=function(D){const{uint16Array:F,uint32Array:_}=Tr;let R=D*2;for(;!va(R,F);)D=Qo(D,_),R=D*2;return eo(D,_)+ko(R,F)};const d=Ho(r),p=Qo(r,c);let v=d,m=p,g,w,b,E;if(i&&(b=HA,E=Kp,Zr(v,o,b),Zr(m,o,E),g=i(b),w=i(E),w<g)){v=p,m=d;const D=g;g=w,w=D,b=E}b||(b=HA,Zr(v,o,b));const B=va(v*2,l),S=t(b,B,g,a+1,s+v);let M;if(S===P8){const D=C(v),_=P(v)-D;M=n(D,_,!0,a+1,s+v,b)}else M=S&&LL(v,e,t,n,i,s,a+1);if(M)return!0;E=Kp,Zr(m,o,E);const I=va(m*2,l),k=t(E,I,w,a+1,s+m);let O;if(k===P8){const D=C(m),_=P(m)-D;O=n(D,_,!0,a+1,s+m,E)}else O=k&&LL(m,e,t,n,i,s,a+1);return!!O}}const C0=new ae,GT=new ae;function Hxe(r,e,t={},n=0,i=1/0){const s=n*n,a=i*i;let o=1/0,l=null;if(r.shapecast({boundsTraverseOrder:u=>(C0.copy(e).clamp(u.min,u.max),C0.distanceToSquared(e)),intersectsBounds:(u,f,d)=>d<o&&d<a,intersectsTriangle:(u,f)=>{u.closestPointToPoint(e,C0);const d=e.distanceToSquared(C0);return d<o&&(GT.copy(C0),o=d,l=f),d<s}}),o===1/0)return null;const c=Math.sqrt(o);return t.point?t.point.copy(GT):t.point=GT.clone(),t.distance=c,t.faceIndex=l,t}const Qxe=parseInt(bu)>=169,zf=new ae,Vf=new ae,Gf=new ae,hx=new pt,dx=new pt,px=new pt,V8=new ae,G8=new ae,j8=new ae,T0=new ae;function zxe(r,e,t,n,i,s,a,o){let l;if(s===ms?l=r.intersectTriangle(n,t,e,!0,i):l=r.intersectTriangle(e,t,n,s!==Ps,i),l===null)return null;const c=r.origin.distanceTo(i);return c<a||c>o?null:{distance:c,point:i.clone()}}function Vxe(r,e,t,n,i,s,a,o,l,c,u){zf.fromBufferAttribute(e,s),Vf.fromBufferAttribute(e,a),Gf.fromBufferAttribute(e,o);const f=zxe(r,zf,Vf,Gf,T0,l,c,u);if(f){const d=new ae;es.getBarycoord(T0,zf,Vf,Gf,d),n&&(hx.fromBufferAttribute(n,s),dx.fromBufferAttribute(n,a),px.fromBufferAttribute(n,o),f.uv=es.getInterpolation(T0,zf,Vf,Gf,hx,dx,px,new pt)),i&&(hx.fromBufferAttribute(i,s),dx.fromBufferAttribute(i,a),px.fromBufferAttribute(i,o),f.uv1=es.getInterpolation(T0,zf,Vf,Gf,hx,dx,px,new pt)),t&&(V8.fromBufferAttribute(t,s),G8.fromBufferAttribute(t,a),j8.fromBufferAttribute(t,o),f.normal=es.getInterpolation(T0,zf,Vf,Gf,V8,G8,j8,new ae),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const p={a:s,b:a,c:o,normal:new ae,materialIndex:0};es.getNormal(zf,Vf,Gf,p.normal),f.face=p,f.faceIndex=s,Qxe&&(f.barycoord=d)}return f}function GE(r,e,t,n,i,s,a){const o=n*3;let l=o+0,c=o+1,u=o+2;const f=r.index;r.index&&(l=f.getX(l),c=f.getX(c),u=f.getX(u));const{position:d,normal:p,uv:v,uv1:m}=r.attributes,g=Vxe(t,d,p,v,m,l,c,u,e,s,a);return g?(g.faceIndex=n,i&&i.push(g),g):null}function Ui(r,e,t,n){const i=r.a,s=r.b,a=r.c;let o=e,l=e+1,c=e+2;t&&(o=t.getX(o),l=t.getX(l),c=t.getX(c)),i.x=n.getX(o),i.y=n.getY(o),i.z=n.getZ(o),s.x=n.getX(l),s.y=n.getY(l),s.z=n.getZ(l),a.x=n.getX(c),a.y=n.getY(c),a.z=n.getZ(c)}function Gxe(r,e,t,n,i,s,a,o){const{geometry:l,_indirectBuffer:c}=r;for(let u=n,f=n+i;u<f;u++)GE(l,e,t,u,s,a,o)}function jxe(r,e,t,n,i,s,a){const{geometry:o,_indirectBuffer:l}=r;let c=1/0,u=null;for(let f=n,d=n+i;f<d;f++){let p;p=GE(o,e,t,f,null,s,a),p&&p.distance<c&&(u=p,c=p.distance)}return u}function Wxe(r,e,t,n,i,s,a){const{geometry:o}=t,{index:l}=o,c=o.attributes.position;for(let u=r,f=e+r;u<f;u++){let d;if(d=u,Ui(a,d*3,l,c),a.needsUpdate=!0,n(a,d,i,s))return!0}return!1}function Kxe(r,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=r.geometry,n=t.index?t.index.array:null,i=t.attributes.position;let s,a,o,l,c=0;const u=r._roots;for(let d=0,p=u.length;d<p;d++)s=u[d],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(d,p,v=!1){const m=d*2;if(o[m+15]===VE){const w=a[d+6],b=o[m+14];let E=1/0,B=1/0,S=1/0,M=-1/0,I=-1/0,k=-1/0;for(let O=3*w,C=3*(w+b);O<C;O++){let P=n[O];const D=i.getX(P),F=i.getY(P),_=i.getZ(P);D<E&&(E=D),D>M&&(M=D),F<B&&(B=F),F>I&&(I=F),_<S&&(S=_),_>k&&(k=_)}return l[d+0]!==E||l[d+1]!==B||l[d+2]!==S||l[d+3]!==M||l[d+4]!==I||l[d+5]!==k?(l[d+0]=E,l[d+1]=B,l[d+2]=S,l[d+3]=M,l[d+4]=I,l[d+5]=k,!0):!1}else{const w=d+8,b=a[d+6],E=w+p,B=b+p;let S=v,M=!1,I=!1;e?S||(M=e.has(E),I=e.has(B),S=!M&&!I):(M=!0,I=!0);const k=S||M,O=S||I;let C=!1;k&&(C=f(w,p,S));let P=!1;O&&(P=f(b,p,S));const D=C||P;if(D)for(let F=0;F<3;F++){const _=w+F,R=b+F,L=l[_],Q=l[_+3],G=l[R],Y=l[R+3];l[d+F]=L<G?L:G,l[d+F+3]=Q>Y?Q:Y}return D}}}function ef(r,e,t,n,i){let s,a,o,l,c,u;const f=1/t.direction.x,d=1/t.direction.y,p=1/t.direction.z,v=t.origin.x,m=t.origin.y,g=t.origin.z;let w=e[r],b=e[r+3],E=e[r+1],B=e[r+3+1],S=e[r+2],M=e[r+3+2];return f>=0?(s=(w-v)*f,a=(b-v)*f):(s=(b-v)*f,a=(w-v)*f),d>=0?(o=(E-m)*d,l=(B-m)*d):(o=(B-m)*d,l=(E-m)*d),s>l||o>a||((o>s||isNaN(s))&&(s=o),(l<a||isNaN(a))&&(a=l),p>=0?(c=(S-g)*p,u=(M-g)*p):(c=(M-g)*p,u=(S-g)*p),s>u||c>a)?!1:((c>s||s!==s)&&(s=c),(u<a||a!==a)&&(a=u),s<=i&&a>=n)}function qxe(r,e,t,n,i,s,a,o){const{geometry:l,_indirectBuffer:c}=r;for(let u=n,f=n+i;u<f;u++){let d=c?c[u]:u;GE(l,e,t,d,s,a,o)}}function Yxe(r,e,t,n,i,s,a){const{geometry:o,_indirectBuffer:l}=r;let c=1/0,u=null;for(let f=n,d=n+i;f<d;f++){let p;p=GE(o,e,t,l?l[f]:f,null,s,a),p&&p.distance<c&&(u=p,c=p.distance)}return u}function Xxe(r,e,t,n,i,s,a){const{geometry:o}=t,{index:l}=o,c=o.attributes.position;for(let u=r,f=e+r;u<f;u++){let d;if(d=t.resolveTriangleIndex(u),Ui(a,d*3,l,c),a.needsUpdate=!0,n(a,d,i,s))return!0}return!1}function Zxe(r,e,t,n,i,s,a){Tr.setBuffer(r._roots[e]),DL(0,r,t,n,i,s,a),Tr.clearBuffer()}function DL(r,e,t,n,i,s,a){const{float32Array:o,uint16Array:l,uint32Array:c}=Tr,u=r*2;if(va(u,l)){const d=eo(r,c),p=ko(u,l);Gxe(e,t,n,d,p,i,s,a)}else{const d=Ho(r);ef(d,o,n,s,a)&&DL(d,e,t,n,i,s,a);const p=Qo(r,c);ef(p,o,n,s,a)&&DL(p,e,t,n,i,s,a)}}const Jxe=["x","y","z"];function $xe(r,e,t,n,i,s){Tr.setBuffer(r._roots[e]);const a=OL(0,r,t,n,i,s);return Tr.clearBuffer(),a}function OL(r,e,t,n,i,s){const{float32Array:a,uint16Array:o,uint32Array:l}=Tr;let c=r*2;if(va(c,o)){const f=eo(r,l),d=ko(c,o);return jxe(e,t,n,f,d,i,s)}else{const f=FX(r,l),d=Jxe[f],v=n.direction[d]>=0;let m,g;v?(m=Ho(r),g=Qo(r,l)):(m=Qo(r,l),g=Ho(r));const b=ef(m,a,n,i,s)?OL(m,e,t,n,i,s):null;if(b){const S=b.point[d];if(v?S<=a[g+f]:S>=a[g+f+3])return b}const B=ef(g,a,n,i,s)?OL(g,e,t,n,i,s):null;return b&&B?b.distance<=B.distance?b:B:b||B||null}}const mx=new Or,Wd=new wl,Kd=new wl,R0=new at,W8=new ra,gx=new ra;function ebe(r,e,t,n){Tr.setBuffer(r._roots[e]);const i=NL(0,r,t,n);return Tr.clearBuffer(),i}function NL(r,e,t,n,i=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Tr;let l=r*2;if(i===null&&(t.boundingBox||t.computeBoundingBox(),W8.set(t.boundingBox.min,t.boundingBox.max,n),i=W8),va(l,a)){const u=e.geometry,f=u.index,d=u.attributes.position,p=t.index,v=t.attributes.position,m=eo(r,o),g=ko(l,a);if(R0.copy(n).invert(),t.boundsTree)return Zr(r,s,gx),gx.matrix.copy(R0),gx.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:b=>gx.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(n),b.b.applyMatrix4(n),b.c.applyMatrix4(n),b.needsUpdate=!0;for(let E=m*3,B=(g+m)*3;E<B;E+=3)if(Ui(Kd,E,f,d),Kd.needsUpdate=!0,b.intersectsTriangle(Kd))return!0;return!1}});for(let w=m*3,b=(g+m)*3;w<b;w+=3){Ui(Wd,w,f,d),Wd.a.applyMatrix4(R0),Wd.b.applyMatrix4(R0),Wd.c.applyMatrix4(R0),Wd.needsUpdate=!0;for(let E=0,B=p.count;E<B;E+=3)if(Ui(Kd,E,p,v),Kd.needsUpdate=!0,Wd.intersectsTriangle(Kd))return!0}}else{const u=r+8,f=o[r+6];return Zr(u,s,mx),!!(i.intersectsBox(mx)&&NL(u,e,t,n,i)||(Zr(f,s,mx),i.intersectsBox(mx)&&NL(f,e,t,n,i)))}}const vx=new at,jT=new ra,I0=new ra,tbe=new ae,nbe=new ae,rbe=new ae,ibe=new ae;function sbe(r,e,t,n={},i={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),jT.set(e.boundingBox.min,e.boundingBox.max,t),jT.needsUpdate=!0;const o=r.geometry,l=o.attributes.position,c=o.index,u=e.attributes.position,f=e.index,d=zo.getPrimitive(),p=zo.getPrimitive();let v=tbe,m=nbe,g=null,w=null;i&&(g=rbe,w=ibe);let b=1/0,E=null,B=null;return vx.copy(t).invert(),I0.matrix.copy(vx),r.shapecast({boundsTraverseOrder:S=>jT.distanceToBox(S),intersectsBounds:(S,M,I)=>I<b&&I<a?(M&&(I0.min.copy(S.min),I0.max.copy(S.max),I0.needsUpdate=!0),!0):!1,intersectsRange:(S,M)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:k=>I0.distanceToBox(k),intersectsBounds:(k,O,C)=>C<b&&C<a,intersectsRange:(k,O)=>{for(let C=k,P=k+O;C<P;C++){Ui(p,3*C,f,u),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let D=S,F=S+M;D<F;D++){Ui(d,3*D,c,l),d.needsUpdate=!0;const _=d.distanceToTriangle(p,v,g);if(_<b&&(m.copy(v),w&&w.copy(g),b=_,E=D,B=C),_<s)return!0}}}});{const I=Km(e);for(let k=0,O=I;k<O;k++){Ui(p,3*k,f,u),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let C=S,P=S+M;C<P;C++){Ui(d,3*C,c,l),d.needsUpdate=!0;const D=d.distanceToTriangle(p,v,g);if(D<b&&(m.copy(v),w&&w.copy(g),b=D,E=C,B=k),D<s)return!0}}}}}),zo.releasePrimitive(d),zo.releasePrimitive(p),b===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=b,n.faceIndex=E,i&&(i.point?i.point.copy(w):i.point=w.clone(),i.point.applyMatrix4(vx),m.applyMatrix4(vx),i.distance=m.sub(i.point).length(),i.faceIndex=B),n)}function abe(r,e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=r.geometry,n=t.index?t.index.array:null,i=t.attributes.position;let s,a,o,l,c=0;const u=r._roots;for(let d=0,p=u.length;d<p;d++)s=u[d],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),f(0,c),c+=s.byteLength;function f(d,p,v=!1){const m=d*2;if(o[m+15]===VE){const w=a[d+6],b=o[m+14];let E=1/0,B=1/0,S=1/0,M=-1/0,I=-1/0,k=-1/0;for(let O=w,C=w+b;O<C;O++){const P=3*r.resolveTriangleIndex(O);for(let D=0;D<3;D++){let F=P+D;F=n?n[F]:F;const _=i.getX(F),R=i.getY(F),L=i.getZ(F);_<E&&(E=_),_>M&&(M=_),R<B&&(B=R),R>I&&(I=R),L<S&&(S=L),L>k&&(k=L)}}return l[d+0]!==E||l[d+1]!==B||l[d+2]!==S||l[d+3]!==M||l[d+4]!==I||l[d+5]!==k?(l[d+0]=E,l[d+1]=B,l[d+2]=S,l[d+3]=M,l[d+4]=I,l[d+5]=k,!0):!1}else{const w=d+8,b=a[d+6],E=w+p,B=b+p;let S=v,M=!1,I=!1;e?S||(M=e.has(E),I=e.has(B),S=!M&&!I):(M=!0,I=!0);const k=S||M,O=S||I;let C=!1;k&&(C=f(w,p,S));let P=!1;O&&(P=f(b,p,S));const D=C||P;if(D)for(let F=0;F<3;F++){const _=w+F,R=b+F,L=l[_],Q=l[_+3],G=l[R],Y=l[R+3];l[d+F]=L<G?L:G,l[d+F+3]=Q>Y?Q:Y}return D}}}function obe(r,e,t,n,i,s,a){Tr.setBuffer(r._roots[e]),PL(0,r,t,n,i,s,a),Tr.clearBuffer()}function PL(r,e,t,n,i,s,a){const{float32Array:o,uint16Array:l,uint32Array:c}=Tr,u=r*2;if(va(u,l)){const d=eo(r,c),p=ko(u,l);qxe(e,t,n,d,p,i,s,a)}else{const d=Ho(r);ef(d,o,n,s,a)&&PL(d,e,t,n,i,s,a);const p=Qo(r,c);ef(p,o,n,s,a)&&PL(p,e,t,n,i,s,a)}}const lbe=["x","y","z"];function cbe(r,e,t,n,i,s){Tr.setBuffer(r._roots[e]);const a=kL(0,r,t,n,i,s);return Tr.clearBuffer(),a}function kL(r,e,t,n,i,s){const{float32Array:a,uint16Array:o,uint32Array:l}=Tr;let c=r*2;if(va(c,o)){const f=eo(r,l),d=ko(c,o);return Yxe(e,t,n,f,d,i,s)}else{const f=FX(r,l),d=lbe[f],v=n.direction[d]>=0;let m,g;v?(m=Ho(r),g=Qo(r,l)):(m=Qo(r,l),g=Ho(r));const b=ef(m,a,n,i,s)?kL(m,e,t,n,i,s):null;if(b){const S=b.point[d];if(v?S<=a[g+f]:S>=a[g+f+3])return b}const B=ef(g,a,n,i,s)?kL(g,e,t,n,i,s):null;return b&&B?b.distance<=B.distance?b:B:b||B||null}}const yx=new Or,qd=new wl,Yd=new wl,U0=new at,K8=new ra,wx=new ra;function ube(r,e,t,n){Tr.setBuffer(r._roots[e]);const i=HL(0,r,t,n);return Tr.clearBuffer(),i}function HL(r,e,t,n,i=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Tr;let l=r*2;if(i===null&&(t.boundingBox||t.computeBoundingBox(),K8.set(t.boundingBox.min,t.boundingBox.max,n),i=K8),va(l,a)){const u=e.geometry,f=u.index,d=u.attributes.position,p=t.index,v=t.attributes.position,m=eo(r,o),g=ko(l,a);if(U0.copy(n).invert(),t.boundsTree)return Zr(r,s,wx),wx.matrix.copy(U0),wx.needsUpdate=!0,t.boundsTree.shapecast({intersectsBounds:b=>wx.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(n),b.b.applyMatrix4(n),b.c.applyMatrix4(n),b.needsUpdate=!0;for(let E=m,B=g+m;E<B;E++)if(Ui(Yd,3*e.resolveTriangleIndex(E),f,d),Yd.needsUpdate=!0,b.intersectsTriangle(Yd))return!0;return!1}});for(let w=m,b=g+m;w<b;w++){const E=e.resolveTriangleIndex(w);Ui(qd,3*E,f,d),qd.a.applyMatrix4(U0),qd.b.applyMatrix4(U0),qd.c.applyMatrix4(U0),qd.needsUpdate=!0;for(let B=0,S=p.count;B<S;B+=3)if(Ui(Yd,B,p,v),Yd.needsUpdate=!0,qd.intersectsTriangle(Yd))return!0}}else{const u=r+8,f=o[r+6];return Zr(u,s,yx),!!(i.intersectsBox(yx)&&HL(u,e,t,n,i)||(Zr(f,s,yx),i.intersectsBox(yx)&&HL(f,e,t,n,i)))}}const _x=new at,WT=new ra,F0=new ra,Abe=new ae,fbe=new ae,hbe=new ae,dbe=new ae;function pbe(r,e,t,n={},i={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),WT.set(e.boundingBox.min,e.boundingBox.max,t),WT.needsUpdate=!0;const o=r.geometry,l=o.attributes.position,c=o.index,u=e.attributes.position,f=e.index,d=zo.getPrimitive(),p=zo.getPrimitive();let v=Abe,m=fbe,g=null,w=null;i&&(g=hbe,w=dbe);let b=1/0,E=null,B=null;return _x.copy(t).invert(),F0.matrix.copy(_x),r.shapecast({boundsTraverseOrder:S=>WT.distanceToBox(S),intersectsBounds:(S,M,I)=>I<b&&I<a?(M&&(F0.min.copy(S.min),F0.max.copy(S.max),F0.needsUpdate=!0),!0):!1,intersectsRange:(S,M)=>{if(e.boundsTree){const I=e.boundsTree;return I.shapecast({boundsTraverseOrder:k=>F0.distanceToBox(k),intersectsBounds:(k,O,C)=>C<b&&C<a,intersectsRange:(k,O)=>{for(let C=k,P=k+O;C<P;C++){const D=I.resolveTriangleIndex(C);Ui(p,3*D,f,u),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let F=S,_=S+M;F<_;F++){const R=r.resolveTriangleIndex(F);Ui(d,3*R,c,l),d.needsUpdate=!0;const L=d.distanceToTriangle(p,v,g);if(L<b&&(m.copy(v),w&&w.copy(g),b=L,E=F,B=C),L<s)return!0}}}})}else{const I=Km(e);for(let k=0,O=I;k<O;k++){Ui(p,3*k,f,u),p.a.applyMatrix4(t),p.b.applyMatrix4(t),p.c.applyMatrix4(t),p.needsUpdate=!0;for(let C=S,P=S+M;C<P;C++){const D=r.resolveTriangleIndex(C);Ui(d,3*D,c,l),d.needsUpdate=!0;const F=d.distanceToTriangle(p,v,g);if(F<b&&(m.copy(v),w&&w.copy(g),b=F,E=C,B=k),F<s)return!0}}}}}),zo.releasePrimitive(d),zo.releasePrimitive(p),b===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=b,n.faceIndex=E,i&&(i.point?i.point.copy(w):i.point=w.clone(),i.point.applyMatrix4(_x),m.applyMatrix4(_x),i.distance=m.sub(i.point).length(),i.faceIndex=B),n)}function mbe(){return typeof SharedArrayBuffer<"u"}const Rv=new Tr.constructor,w1=new Tr.constructor,TA=new kO(()=>new Or),Xd=new Or,Zd=new Or,KT=new Or,qT=new Or;let YT=!1;function gbe(r,e,t,n){if(YT)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");YT=!0;const i=r._roots,s=e._roots;let a,o=0,l=0;const c=new at().copy(t).invert();for(let u=0,f=i.length;u<f;u++){Rv.setBuffer(i[u]),l=0;const d=TA.getPrimitive();Zr(0,Rv.float32Array,d),d.applyMatrix4(c);for(let p=0,v=s.length;p<v&&(w1.setBuffer(s[p]),a=ol(0,0,t,c,n,o,l,0,0,d),w1.clearBuffer(),l+=s[p].length,!a);p++);if(TA.releasePrimitive(d),Rv.clearBuffer(),o+=i[u].length,a)break}return YT=!1,a}function ol(r,e,t,n,i,s=0,a=0,o=0,l=0,c=null,u=!1){let f,d;u?(f=w1,d=Rv):(f=Rv,d=w1);const p=f.float32Array,v=f.uint32Array,m=f.uint16Array,g=d.float32Array,w=d.uint32Array,b=d.uint16Array,E=r*2,B=e*2,S=va(E,m),M=va(B,b);let I=!1;if(M&&S)u?I=i(eo(e,w),ko(e*2,b),eo(r,v),ko(r*2,m),l,a+e,o,s+r):I=i(eo(r,v),ko(r*2,m),eo(e,w),ko(e*2,b),o,s+r,l,a+e);else if(M){const k=TA.getPrimitive();Zr(e,g,k),k.applyMatrix4(t);const O=Ho(r),C=Qo(r,v);Zr(O,p,Xd),Zr(C,p,Zd);const P=k.intersectsBox(Xd),D=k.intersectsBox(Zd);I=P&&ol(e,O,n,t,i,a,s,l,o+1,k,!u)||D&&ol(e,C,n,t,i,a,s,l,o+1,k,!u),TA.releasePrimitive(k)}else{const k=Ho(e),O=Qo(e,w);Zr(k,g,KT),Zr(O,g,qT);const C=c.intersectsBox(KT),P=c.intersectsBox(qT);if(C&&P)I=ol(r,k,t,n,i,s,a,o,l+1,c,u)||ol(r,O,t,n,i,s,a,o,l+1,c,u);else if(C)if(S)I=ol(r,k,t,n,i,s,a,o,l+1,c,u);else{const D=TA.getPrimitive();D.copy(KT).applyMatrix4(t);const F=Ho(r),_=Qo(r,v);Zr(F,p,Xd),Zr(_,p,Zd);const R=D.intersectsBox(Xd),L=D.intersectsBox(Zd);I=R&&ol(k,F,n,t,i,a,s,l,o+1,D,!u)||L&&ol(k,_,n,t,i,a,s,l,o+1,D,!u),TA.releasePrimitive(D)}else if(P)if(S)I=ol(r,O,t,n,i,s,a,o,l+1,c,u);else{const D=TA.getPrimitive();D.copy(qT).applyMatrix4(t);const F=Ho(r),_=Qo(r,v);Zr(F,p,Xd),Zr(_,p,Zd);const R=D.intersectsBox(Xd),L=D.intersectsBox(Zd);I=R&&ol(O,F,n,t,i,a,s,l,o+1,D,!u)||L&&ol(O,_,n,t,i,a,s,l,o+1,D,!u),TA.releasePrimitive(D)}}return I}const xx=new ra,q8=new Or,vbe={strategy:TX,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class HO{static serialize(e,t={}){t={cloneBuffers:!0,...t};const n=e.geometry,i=e._roots,s=e._indirectBuffer,a=n.getIndex();let o;return t.cloneBuffers?o={roots:i.map(l=>l.slice()),index:a?a.array.slice():null,indirectBuffer:s?s.slice():null}:o={roots:i,index:a?a.array:null,indirectBuffer:s},o}static deserialize(e,t,n={}){n={setIndex:!0,indirect:!!e.indirectBuffer,...n};const{index:i,roots:s,indirectBuffer:a}=e,o=new HO(t,{...n,[HT]:!0});if(o._roots=s,o._indirectBuffer=a||null,n.setIndex){const l=t.getIndex();if(l===null){const c=new Lt(e.index,1,!1);t.setIndex(c)}else l.array!==i&&(l.array.set(i),l.needsUpdate=!0)}return o}get indirect(){return!!this._indirectBuffer}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({...vbe,[HT]:!1},t),t.useSharedArrayBuffer&&!mbe())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[HT]||(Fxe(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Or))),this.resolveTriangleIndex=t.indirect?n=>this._indirectBuffer[n]:n=>n}refit(e=null){return(this.indirect?abe:Kxe)(this,e)}traverse(e,t=0){const n=this._roots[t],i=new Uint32Array(n),s=new Uint16Array(n);a(0);function a(o,l=0){const c=o*2,u=s[c+15]===VE;if(u){const f=i[o+6],d=s[c+14];e(l,u,new Float32Array(n,o*4,6),f,d)}else{const f=o+Tv/4,d=i[o+6],p=i[o+7];e(l,u,new Float32Array(n,o*4,6),p)||(a(f,l+1),a(d,l+1))}}}raycast(e,t=so,n=0,i=1/0){const s=this._roots,a=this.geometry,o=[],l=t.isMaterial,c=Array.isArray(t),u=a.groups,f=l?t.side:t,d=this.indirect?obe:Zxe;for(let p=0,v=s.length;p<v;p++){const m=c?t[u[p].materialIndex].side:f,g=o.length;if(d(this,p,m,e,o,n,i),c){const w=u[p].materialIndex;for(let b=g,E=o.length;b<E;b++)o[b].face.materialIndex=w}}return o}raycastFirst(e,t=so,n=0,i=1/0){const s=this._roots,a=this.geometry,o=t.isMaterial,l=Array.isArray(t);let c=null;const u=a.groups,f=o?t.side:t,d=this.indirect?cbe:$xe;for(let p=0,v=s.length;p<v;p++){const m=l?t[u[p].materialIndex].side:f,g=d(this,p,m,e,n,i);g!=null&&(c==null||g.distance<c.distance)&&(c=g,l&&(g.face.materialIndex=u[p].materialIndex))}return c}intersectsGeometry(e,t){let n=!1;const i=this._roots,s=this.indirect?ube:ebe;for(let a=0,o=i.length;a<o&&(n=s(this,a,e,t),!n);a++);return n}shapecast(e){const t=zo.getPrimitive(),n=this.indirect?Xxe:Wxe;let{boundsTraverseOrder:i,intersectsBounds:s,intersectsRange:a,intersectsTriangle:o}=e;if(a&&o){const f=a;a=(d,p,v,m,g)=>f(d,p,v,m,g)?!0:n(d,p,this,o,v,m,t)}else a||(o?a=(f,d,p,v)=>n(f,d,this,o,p,v,t):a=(f,d,p)=>p);let l=!1,c=0;const u=this._roots;for(let f=0,d=u.length;f<d;f++){const p=u[f];if(l=kxe(this,f,s,a,i,c),l)break;c+=p.byteLength}return zo.releasePrimitive(t),l}bvhcast(e,t,n){let{intersectsRanges:i,intersectsTriangles:s}=n;const a=zo.getPrimitive(),o=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?v=>{const m=this.resolveTriangleIndex(v);Ui(a,m*3,o,l)}:v=>{Ui(a,v*3,o,l)},u=zo.getPrimitive(),f=e.geometry.index,d=e.geometry.attributes.position,p=e.indirect?v=>{const m=e.resolveTriangleIndex(v);Ui(u,m*3,f,d)}:v=>{Ui(u,v*3,f,d)};if(s){const v=(m,g,w,b,E,B,S,M)=>{for(let I=w,k=w+b;I<k;I++){p(I),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let O=m,C=m+g;O<C;O++)if(c(O),a.needsUpdate=!0,s(a,u,O,I,E,B,S,M))return!0}return!1};if(i){const m=i;i=function(g,w,b,E,B,S,M,I){return m(g,w,b,E,B,S,M,I)?!0:v(g,w,b,E,B,S,M,I)}}else i=v}return gbe(this,e,t,i)}intersectsBox(e,t){return xx.set(e.min,e.max,t),xx.needsUpdate=!0,this.shapecast({intersectsBounds:n=>xx.intersectsBox(n),intersectsTriangle:n=>xx.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,n={},i={},s=0,a=1/0){return(this.indirect?pbe:sbe)(this,e,t,n,i,s,a)}closestPointToPoint(e,t={},n=0,i=1/0){return Hxe(this,e,t,n,i)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(n=>{Zr(0,new Float32Array(n),q8),e.union(q8)}),e}}function Y8(r,e,t){return r===null?null:(r.point.applyMatrix4(e.matrixWorld),r.distance=r.point.distanceTo(t.ray.origin),r.object=e,r)}const bx=new Sh,X8=new ae,Z8=new at,ybe=lr.prototype.raycast,wbe=lhe.prototype.raycast,J8=new ae,ls=new lr,Ex=[];function _be(r,e){this.isBatchedMesh?xbe.call(this,r,e):bbe.call(this,r,e)}function xbe(r,e){if(this.boundsTrees){const t=this.boundsTrees,n=this._drawInfo||this._instanceInfo,i=this._drawRanges||this._geometryInfo,s=this.matrixWorld;ls.material=this.material,ls.geometry=this.geometry;const a=ls.geometry.boundsTree,o=ls.geometry.drawRange;ls.geometry.boundingSphere===null&&(ls.geometry.boundingSphere=new zs);for(let l=0,c=n.length;l<c;l++){if(!this.getVisibleAt(l))continue;const u=n[l].geometryIndex;if(ls.geometry.boundsTree=t[u],this.getMatrixAt(l,ls.matrixWorld).premultiply(s),!ls.geometry.boundsTree){this.getBoundingBoxAt(u,ls.geometry.boundingBox),this.getBoundingSphereAt(u,ls.geometry.boundingSphere);const f=i[u];ls.geometry.setDrawRange(f.start,f.count)}ls.raycast(r,Ex);for(let f=0,d=Ex.length;f<d;f++){const p=Ex[f];p.object=this,p.batchId=l,e.push(p)}Ex.length=0}ls.geometry.boundsTree=a,ls.geometry.drawRange=o,ls.material=null,ls.geometry=null}else wbe.call(this,r,e)}function bbe(r,e){if(this.geometry.boundsTree){if(this.material===void 0)return;Z8.copy(this.matrixWorld).invert(),bx.copy(r.ray).applyMatrix4(Z8),J8.setFromMatrixScale(this.matrixWorld),X8.copy(bx.direction).multiply(J8);const t=X8.length(),n=r.near/t,i=r.far/t,s=this.geometry.boundsTree;if(r.firstHitOnly===!0){const a=Y8(s.raycastFirst(bx,this.material,n,i),this,r);a&&e.push(a)}else{const a=s.raycast(bx,this.material,n,i);for(let o=0,l=a.length;o<l;o++){const c=Y8(a[o],this,r);c&&e.push(c)}}}else ybe.call(this,r,e)}function Ebe(r={}){return this.boundsTree=new HO(this,r),this.boundsTree}function Sbe(){this.boundsTree=null}let XT=new ae,L0=new ae;const $8=[],Sx=new Gq,Bbe=.03,Mbe=.03,Cbe=new ya({side:so}),Tbe=new ya({side:ms});let cv;Gn.prototype.computeBoundsTree=Ebe;Gn.prototype.disposeBoundsTree=Sbe;lr.prototype.raycast=_be;const Rbe=r=>{const e=r.attributes.position,t=r.index,n=new es,i=new ae,s=new ae,a=new ae,o=[];for(let l=0;l<t.array.length/3;l++){const c=l*3;i.fromBufferAttribute(e,t.getX(c+0)),s.fromBufferAttribute(e,t.getX(c+1)),a.fromBufferAttribute(e,t.getX(c+2)),n.set(i,s,a),o.push(n.getNormal(new ae))}r.userData.faceNormals=o},Ibe=r=>{const e=r.geometry.clone();let t=[];if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)t.push(r.material[i].clone());else t=r.material.clone();if(!r.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const n=new lr(e,t);return Rbe(n.geometry),n.geometry.computeBoundsTree({strategy:RX}),n},Mb=r=>{r.isMesh&&(r.geometry.userData.faceNormals=null,r.geometry.dispose(),r.geometry.disposeBoundsTree(),r.parent&&r.parent.remove(r),r.userData.cancelMesh&&Mb(r.userData.cancelMesh))},OX=r=>{r.userData.cullingClone&&(Mb(r.userData.cullingClone),r.userData.cullingClone=null,Mb(r.userData.cullingCloneP),r.userData.cullingCloneP=null,Mb(r.userData.cullingCloneN),r.userData.cullingCloneN=null,r.userData?.clippedIndexGeometry!=null&&(r.userData.clippedIndexGeometry=null),r.userData?.origIndexBuffer!=null&&(r.userData.origIndexBuffer=null))},Ube=async r=>{if(r==null){console.warn("Null parameter for meshes was provided. Skipping mesh culling.");return}if(!Array.isArray(r)){console.warn("No valid mesh array was provided. Skipping mesh culling.");return}if(r.length==0){console.warn("No mesh array with elements was provided. Skipping mesh culling.");return}const e=[];cv=r[0].parent,cv.lines!=null&&(cv.lines.forEach(i=>{i.visible=!1}),cv.lines.length=0),r.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=Ibe(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,a=i.userData.cullingCloneP,o=i.userData.cullingCloneN;a.material=Cbe,o.userData.cancelMesh=a,o.material=Tbe,a.userData.maxCullDistance=o.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(a),e[i.userData.cullLayer].negMeshes.push(o),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const n=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const a=e[i].origMeshes[s],o=e[i].cloneMeshes[s],l=a.userData.origIndexBuffer.array,c=o.geometry.attributes.position.array,u=o.geometry.attributes.normal.array,f=o.geometry.userData.faceNormals;n.push({geom:a.geometry,index:Lbe(l,c,u,f,t,a.userData.cullDistance)})}t=[...t,...e[i].posMeshes,...e[i].negMeshes]}n.forEach(i=>{i.geom.setIndex(i.index)})},Fbe=r=>{let e=Bbe,t=Mbe;return r&&(isNaN(r)?Array.isArray(r)&&(isNaN(r[0])||(e=r[0]),isNaN(r[1])||(t=r[1])):e=r),[e,t]},Lbe=(r,e,t,n,i,s,a=!1)=>{const o=[],l=Fbe(s);let c=l[0],u=l[1];Sx.far=c+u;for(let d=0;d<r.length/3;d++){n&&L0.set(n[d].x,n[d].y,n[d].z).normalize();const p=d*3;let v=[];for(let m=0;m<3;m++){$8.length=0;const g=r[p+m]*3;n==null&&L0.set(t[g],t[g+1],t[g+2]).normalize(),XT.set(e[g],e[g+1],e[g+2]).add(L0.clone().multiplyScalar(c)),Sx.set(XT,L0.clone().multiplyScalar(-1));const w=Sx.intersectObjects(i,!1,$8);for(let b=w.length-1;b>=0;b--)c-w[b].distance>=w[b].object.userData.maxCullDistance&&w.splice(b,1);if(w.length===0){for(let b=0;b<3;b++)o.push(r[p+b]);break}else{const b=w.map(E=>E.object);for(let E=0;E<b.length;E++){const B=b[E];if(B!=null&&B.userData.cancelMesh){const S=b.indexOf(B.userData.cancelMesh);b[E]=null,S!=-1&&S<E&&(b[S]=null)}}if(b.filter(E=>E).length===0){for(let E=0;E<3;E++)o.push(r[p+E]);break}if(m===0)v=w.map(E=>E.object);else if(v=w.map(E=>{if(v.indexOf(E.object)!==-1)return E.object}),v=v.filter(E=>E),m===2&&v.filter(E=>E).length===0)for(let E=0;E<3;E++)o.push(r[p+E]);a&&Dbe(XT,L0.clone().multiplyScalar(-1),Sx.far,16711680,cv)}}}const f=new Uint32Array(o);return new Lt(f,1,!1)};function Dbe(r,e,t,n,i){i.lines==null&&(i.lines=[]);let s=new ae;s.addVectors(r,e.clone().multiplyScalar(t));const a=[];a.push(r),a.push(s);const o=new Gn().setFromPoints(a),l=[];l.push(new st(0)),l.push(new st(16777215));let c=new Iu({color:n});var u=new Gm(o,c);u.renderOrder=100,i.add(u),i.lines.push(u)}function Obe(r,e=10){if(r<=0)return[];const t=r,n=[{w:e,h:e,x:0,y:0}];function i(a,o,l,c){if(o<=0)return;const u=a.w/2,f=[{w:u,h:u,x:l,y:c},{w:u,h:u,x:l+u,y:c},{w:u,h:u,x:l,y:c+u},{w:u,h:u,x:l+u,y:c+u}];n.push(...f);const d=n.find(w=>w.x===l&&w.y===c&&w.w===a.w&&w.h===a.h);if(n.splice(n.indexOf(d),1),r<=n.length)return;const p=Math.max(...n.map(w=>w.w)),v=n.find(w=>w.w===p),m=v.x,g=v.y;i({w:v.w,h:v.h},o-1,m,g)}if(r==1)return{squares:n,fill:1};for(i({w:e,h:e},t,0,0),n.sort((a,o)=>o.w-a.w);n.length>r;)n.pop();const s=n.reduce((a,o)=>a+o.w*o.h,0)/(e*e);return{squares:n,fill:s}}class jE{width;height;cameraRTT=null;sceneRTT=null;materials=[];quads=[];renderer=null;rtTexture=null;constructor(e,t){this.width=e,this.height=t}_addPlane(e,t=0){if(!this.sceneRTT)return;const n=new ya({side:Ps,transparent:!0,opacity:1,color:new st(1,1,1)});this.materials.push(n);const i=new Tu(1,1),s=new lr(i,n);s.position.z=t*1e-4,s.scale.set(this.width,this.height,1),this.quads.push(s),this.sceneRTT.add(s)}render(e,t,n,i,s=!0){const a=Mt(e);if(a.length===0&&(e=Mt(jE.createSolidColorTexture(n,this.width,this.height))),this.renderer==null){this.sceneRTT=new Zv,this.cameraRTT=new Sy(-this.width/2,this.width/2,this.height/2,-this.height/2,-1e4,1e4),this.cameraRTT.position.z=100,this.sceneRTT.add(this.cameraRTT);for(let c=0;c<a.length;c++){const u=a[c];u&&this._addPlane(u,c)}this.renderer=new By,this.renderer.setPixelRatio(1),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1}else this.cameraRTT&&(this.cameraRTT.left=-this.width/2,this.cameraRTT.right=this.width/2,this.cameraRTT.top=this.height/2,this.cameraRTT.bottom=-this.height/2,this.cameraRTT.updateProjectionMatrix()),this.quads.forEach(c=>{c?.scale.set(this.width,this.height,1)}),this.renderer.setSize(this.width,this.height);if(a.length>this.materials.length){const c=a.length-this.materials.length;for(let u=0;u<c;u++){const f=a[u];this._addPlane(f,u)}}else{if(this.materials.length=a.length,this.quads.length>a.length)for(let c=a.length;c<this.quads.length;c++)this.sceneRTT?.remove(this.quads[c]);this.quads.length=a.length}this.rtTexture=new cc(this.width,this.height),this.rtTexture.texture.colorSpace=s?Sn:Zl;for(let c=0;c<a.length;c++){const u=a[c];u&&(this.materials[c].map=u,this.materials[c].color=t.clone())}this.renderer.setClearColor(n.clone(),i?0:1),this.renderer.setRenderTarget(this.rtTexture),this.renderer.clear(),this.sceneRTT&&this.cameraRTT&&this.renderer.render(this.sceneRTT,this.cameraRTT);let o=new Uint8ClampedArray(this.rtTexture.width*this.rtTexture.height*4);return this.renderer.readRenderTargetPixels(this.rtTexture,0,0,this.width,this.height,o),new ImageData(o,this.width,this.height)}clearRenderer(){this.rtTexture?.dispose(),this.rtTexture=null,this.materials?.length&&this.materials.forEach(e=>{e.map?.dispose(),e.map=null})}destroy(){this.cameraRTT=null,this.sceneRTT?.clear(),this.sceneRTT=null,this.materials.forEach(e=>{e.map?.dispose(),e.map=null}),this.quads.forEach(e=>{this.sceneRTT?.remove(e),e=null}),this.materials.length=0,this.quads.length=0,this.renderer?.dispose(),this.renderer=null,this.rtTexture=null}static createSolidColorTexture(e,t,n){const i=t*n,s=new Uint8Array(4*i),a=Math.floor(e.r*255),o=Math.floor(e.g*255),l=Math.floor(e.b*255);for(let u=0;u<i;u++){const f=u*4;s[f]=a,s[f+1]=o,s[f+2]=l,s[f+3]=255}const c=new lh(s,t,n);return c.needsUpdate=!0,c}}function _1(r,e){return r=r.length==null?r:r[0],r[e]&&r[e].image}function Nbe(r,e){return r=r.length==null?r:r[0],r[e]&&r[e].clone()}function QA(r,e,t,n,i){const s=(r-e)/(t-e);return n+s*(i-n)}const QL={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},Pbe=async({transparentColor:r,meshes:e,includeNonTexturedMeshesInAtlas:t=!1,atlasSize:n=4096,mtoon:i=!0,transparentMaterial:s=!1,transparentTexture:a=!1,twoSidedMaterial:o=!1})=>typeof window>"u"?await kbe({meshes:e,atlasSize:n,mtoon:i,transparentMaterial:s,transparentTexture:a}):await Hbe({backColor:r,meshes:e,atlasSize:n,mtoon:i,includeNonTexturedMeshesInAtlas:t,transparentMaterial:s,transparentTexture:a,twoSidedMaterial:o}),kbe=async({meshes:r,atlasSize:e,mtoon:t,transparentMaterial:n,transparentTexture:i})=>{const s=e,a=["diffuse"],o=[];r.forEach(M=>{const I=M.material;let k=o.find(O=>O.material===I);if(!k)o.push({material:I,mesh:M});else{const{dest:O}=QO({meshes:[k.mesh,M]});k.mesh.geometry=O}});const l=Object.fromEntries(a.map(M=>[M,VO({width:s,height:s,transparent:i})])),c=Math.floor(Math.sqrt(r.length)+1),u=s/c,f=new Map(o.map((M,I)=>{const k=new pt(I%c,Math.floor(I/c)).multiplyScalar(1/c),O=new pt(k.x+1/c,k.y+1/c);return[M.mesh,{min:k,max:O}]})),d=[],p=[];o.forEach(M=>{const{min:I,max:k}=f.get(M.mesh);p.push(k),d.push(I)});const v=new pt(Math.max(...p.map(M=>M.x)),Math.max(...p.map(M=>M.y))),m=new pt(Math.min(...d.map(M=>M.x)),Math.min(...d.map(M=>M.y))),g=1/(v.x-m.x),w=1/(v.y-m.y),b=u*g,E=u*w,B=new Map(o.map(M=>{let{min:I,max:k}=f.get(M.mesh);return I.x=I.x*g,I.y=I.y*w,k.x=k.x*g,k.y=k.y*w,[M.mesh,{min:I,max:k}]}));o.forEach(M=>{const{material:I,mesh:k}=M,{min:O,max:C}=B.get(k);a.forEach(_=>{const R=l[_];R.globalCompositeOperation="source-over";let L=_1(I,QL[_].find(Q=>_1(I,Q)));if(L!==""&&L!==void 0)try{const Q=new Uint8ClampedArray(L.data),G=new ImageData(Q,b,E),Y=document.createElement("canvas");Y.width=b,Y.height=E;const W=Y.getContext("2d");W.putImageData(G,0,0),W.save(),R.drawImage(Y,O.x*s,O.y*s,b,E)}catch(Q){console.error("error",Q)}else R.fillStyle=_==="diffuse"?`#${I.color.clone().getHexString()}`:_==="normal"?"#bcbcff":_==="orm"?`#${new st(I.aoMapIntensity,I.roughness,I.metalness).getHexString()}`:"#7F7F7F",R.fillRect(O.x*s,O.y*s,b,E)});const P=k.geometry,D=P.attributes.uv;if(D)for(let _=0;_<D.array.length;_+=2)D.array[_]=QA(D.array[_],0,1,O.x,C.x),D.array[_+1]=QA(D.array[_+1],0,1,O.y,C.y);const F=P.attributes.uv2;if(F)for(let _=0;_<F.array.length;_+=2)F.array[_]=QA(F.array[_],0,1,O.x,C.x),F.array[_+1]=QA(F.array[_+1],0,1,O.y,C.y);else P.attributes.uv2=P.attributes.uv});const S=Object.fromEntries(await Promise.all(a.map(async M=>{const I=new Cr(l[M].canvas);return I.flipY=!1,[M,I]})));return{bakeObjects:o,textures:S,uvs:B}},Hbe=async({backColor:r,includeNonTexturedMeshesInAtlas:e=!1,meshes:t,atlasSize:n,mtoon:i,transparentMaterial:s,transparentTexture:a,twoSidedMaterial:o,scale:l=1})=>{const c=n,u=i?["diffuse"]:["diffuse","orm","normal"],f=[];let d=null;t.forEach(Y=>{Y=Y.clone();const W=Y.material.length==null?Y.material:Y.material[0];i&&d==null&&W.type=="ShaderMaterial"&&(d=W.clone());let V=f.find(T=>T.material===W);V?(console.log(V),console.log(V.siblings),V.siblings.push(Y)):f.push({material:W,mesh:Y,sibligs:[]})});const p=Object.fromEntries(u.map(Y=>[Y,VO({width:c,height:c,transparent:a&&Y=="diffuse"})])),v=new Set,m=new Map,g=f.map(Y=>{const W=Y.mesh.geometry;if(e==!1){if(!Y.mesh.visible)return v.add(Y.mesh),[Y.mesh,0];let V=!0;for(const T of u)for(const H of QL[T])if(_1(Y.material,H)&&V){V=!1;break}if(V){const T=Y.material;if(T instanceof vi)return[Y.mesh,2];if(m.size==0)return m.set(T,[Y.mesh]),[Y.mesh,1];for(let[H,K]of Array.from(m.entries()))if(H.color.r.toFixed(5)==T.color.r.toFixed(5)&&H.color.g.toFixed(5)==T.color.g.toFixed(5)&&H.color.b.toFixed(5)==T.color.b.toFixed(5)&&H.emissive.equals(T.emissive)&&H.aoMapIntensity==T.aoMapIntensity&&H.metalness==T.metalness&&H.normalScale.equals(T.normalScale)&&H.roughness==T.roughness&&H.transparent==T.transparent&&H.vertexColors==T.vertexColors)return K.push(Y.mesh),[Y.mesh,0];return m.set(T,[Y.mesh]),[Y.mesh,1]}}return console.log(Y),console.log(Y.siblings),Y.siblings?.length>0&&(m.has(Y.material)?m.get(Y.material)?.push(...Y.siblings,Y.mesh):m.set(Y.material,[Y.mesh,...Y.siblings])),[Y.mesh,W.index?W.index.count/3:W.attributes.position.count/3]}).sort((Y,W)=>W[1]-Y[1]),w=g.filter(([,Y])=>Y!=0),{squares:b,fill:E}=Obe(w.length,c);console.log("squaresplit",E);const B=b.map(Y=>({x:Y.x,y:Y.y,width:Y.w,height:Y.h})),S=new Map(B.map((Y,W)=>[g[W][0],Y]));m.forEach(Y=>{if(Y.length>1){const W=S.get(Y[0]);Y.forEach(V=>{S.set(V,W)})}});const M=new Map(Array.from(S.entries()).map(([Y,W])=>{const V=new pt(W.x,W.y),T=new pt(W.x+W.width,W.y+W.height);return[Y,{min:V,max:T}]})),I=[];Array.from(S.keys()).forEach(Y=>{if(v.has(Y))return;const{min:W,max:V}=M.get(Y);I.push(W)});const k=new pt(Math.min(...I.map(Y=>Y.x)),Math.min(...I.map(Y=>Y.y))),O=1/(c-k.x),C=1/(c-k.y),P=new Map(Array.from(S.keys()).map(Y=>{if(v.has(Y))return;let{min:W,max:V}=M.get(Y);return W.x=W.x*O,W.y=W.y*C,V.x=V.x*O,V.y=V.y*C,[Y,{min:W,max:V}]}).filter(Y=>Y));let D=!1;const F=new jE(c,c);Array.from(S.keys()).forEach(Y=>{const W=f.find(fe=>fe.mesh===Y||fe.siblings?.includes(Y)),{material:V}=W;let T,H;const K=P.get(Y);if(K?(T=K.min,H=K.max):(T=new pt(0,0),H=new pt(0,0)),!v.has(W.mesh)){const fe=S.get(Y).width,he=S.get(Y).height;u.forEach(me=>{const Te=p[me];Te.globalCompositeOperation="source-over";let Re,de=new st(1,1,1);switch(me){case"diffuse":Re=V.color||r,V.uniforms?.litFactor?de=V.uniforms.litFactor.value:de=V.color;break;case"normal":Re=new st(12369151);break;case"orm":Re=new st(0,V.roughness,V.metalness);break;default:Re=new st(1,1,1);break}let Z=Nbe(V,QL[me].find(ye=>_1(V,ye)));D==!1&&me=="normal"&&Z!=null&&(D=!0);const ve=F.render(Z,de,Re,me=="diffuse"&&a,me!="normal");createImageBitmap(ve).then(ye=>Te.drawImage(ye,T.x*c,T.y*c,fe,he))})}const N=Y.geometry.clone();Y.geometry=N;const te=N.attributes.uv.clone();if(N.attributes.uv=te,te)for(let fe=0;fe<N.attributes.uv.array.length;fe+=2)te.array[fe]=(te.array[fe]%1+1)%1,te.array[fe+1]=(te.array[fe+1]%1+1)%1,te.array[fe]=QA(te.array[fe],0,1,T.x,H.x),te.array[fe+1]=QA(te.array[fe+1],0,1,T.y,H.y);const oe=N.attributes.uv2;if(oe)for(let fe=0;fe<oe.array.length;fe+=2)oe.array[fe]=(oe.array[fe]%1+1)%1,oe.array[fe+1]=(oe.array[fe+1]%1+1)%1,oe.array[fe]=QA(oe.array[fe],0,1,T.x,H.x),oe.array[fe+1]=QA(oe.array[fe+1],0,1,T.y,H.y);else N.attributes.uv2=N.attributes.uv}),F.destroy();const _=Object.fromEntries(await Promise.all(u.map(async Y=>{const W=new Cr(p[Y].canvas);return W.flipY=!1,[Y,W]}))),R=o?Ps:so;let L;const Q=s?"transparent":"opaque";i?(L=new Rm({map:_.diffuse,transparent:s,side:R}),d==null&&(d=new yX),d.side=R,d.uniforms.map=_.diffuse,d.uniforms.shadeMultiplyTexture=_.diffuse,d.transparent=s,a&&!s&&(L.alphaTest=.5,d.alphaTest=.5),L.userData.vrmMaterial=d,L.userData.shadeTexture=_.uniformColor,L.name="mToon_"+Q,L.map.name=L.name):(L=new Rm({map:_.diffuse,roughnessMap:_.orm,metalnessMap:_.orm,normalMap:D?_.normal:null,transparent:s,side:R}),a&&!s&&(L.alphaTest=.5),L.name="standard_"+Q,L.roughnessMap!=null&&(L.roughnessMap.name=L.name+"_orm"),L.normalMap!=null&&(L.normalMap.name=L.name+"_normal"));const G=[];return f.map(Y=>{Y.siblings?.forEach(W=>{const V=Y.material;G.push({material:V,mesh:W,siblings:[]})})}),f.push(...G),{bakeObjects:f,material:L}};function NX(r){const e=new Map;for(const n of r.skeleton.bones){const i=n.clone(!1);e.set(n,i)}r.skeleton.bones[0].traverse(n=>{if(n.type!=="Bone")return;const i=e.get(n);for(const s of n.children){const a=e.get(s);a&&i.add(a)}});const t=new Ru(r.skeleton.bones.map(n=>e.get(n)));return t.boneInverses=r.skeleton.boneInverses,t.pose(),t}function PX(r,e){const t=new Map;new ae(-1,1,-1),new at,new ae;let n=0;r.forEach(l=>{if(l.skeleton){var c=NX(l);const u=c.bones;c.bones.forEach((f,d)=>{if(u.indexOf(f)!==-1){const p=t.get(f.name);if(p==null){const v={index:n,boneInverses:c.boneInverses[d],bone:f.clone(!1),parentName:f.parent?.type=="Bone"?f.parent.name:null};n++,t.set(f.name,v)}else f.userData.VRMcolliders!=null&&(p.bone.userData.VRMcolliders==null?p.bone.userData.VRMcolliders=f.userData.VRMcolliders:f.userData.VRMcollidersID!=p.bone.userData.VRMcollidersID&&(p.bone.userData.VRMcolliders=[...p.bone.userData.VRMcolliders,...f.userData.VRMcolliders]))}})}});const i=[],s=[];[...t.values()].forEach(l=>{if(i.push(l.bone),s.push(l.boneInverses),l.parentName!=null){const c=t.get(l.parentName)?.bone;c&&c.add(l.bone)}});const o=new Ru(i,s);return o.bones.forEach(l=>{const c=l.userData?.vrm0RestPosition;c&&l.position.set(-c.x,c.y,-c.z),l.position.set(l.position.x*e,l.position.y*e,l.position.z*e)}),o}function Qbe(r,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((a,o)=>{const l=r.bones.filter(u=>u.name===a.name),c=l.length>0?r.bones.indexOf(l[0]):-1;t.set(o,c)});const n=[],i=e.geometry.attributes.skinIndex.array;for(let a=0;a<i.length;a++)n[a]=t.get(i[a]);const s=new Uint16Array(n);return new Lt(s,4,!1)}}function kX(r){const e=[...r];return e.sort(),e.filter((t,n)=>e.indexOf(t)===n)}function zbe(r){const t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(n=>r.constructor===n);return t.length&&t[0]||null}function x1(r,e){const t=[];for(let s=0;s<e.length;s++){const a=s*r.itemSize;for(let o=0;o<r.itemSize;o++)t[a+o]=r.array[e[s]*r.itemSize+o]}const n=zbe(r.array),i=new n(t);return new Lt(i,r.itemSize,r.normalized)}function Vbe(r,e,t){for(let n=0;n<r.attributes.skinIndex.array.length;n+=4){const i=[r.attributes.skinIndex.array[n],r.attributes.skinIndex.array[n+1],r.attributes.skinIndex.array[n+2],r.attributes.skinIndex.array[n+3]];for(let s=0;s<4;s++){const a=i[s],o=Gbe(a,e,t);i[s]=o}r.attributes.skinIndex.array[n]=i[0],r.attributes.skinIndex.array[n+1]=i[1],r.attributes.skinIndex.array[n+2]=i[2],r.attributes.skinIndex.array[n+3]=i[3]}r.attributes.skinIndex.needsUpdate=!0}function Gbe(r,e,t){const n=e.bones[r],i=t.bones.find(s=>s.name===n.name);return i?t.bones.indexOf(i):-1}async function jbe(r,e,t){const{scale:n,isVrm0:i,mergeAppliedMorphs:s}=t,a=[],o=[],l=Um(r,"SkinnedMesh"),c=QX(e),u=HX(e).map(p=>p.id);l.forEach(p=>{const v=p.clone();a.push(v),Array.isArray(p.material)?o.push(...p.material):o.push(p.material)});const f=PX(a,n),d=new Tn;return d.name="AvatarRoot",a.forEach(p=>{const v=new Gn,m={};for(const P in p.geometry.attributes){const D=p.geometry.attributes[P];m[P]=D.clone()}const g={merge:new Set,keep:new Set(c),remove:new Set};if(s){if(!p.morphTargetDictionary||!p.morphTargetInfluences)return;u.forEach(P=>{const D=p.morphTargetDictionary[P];if(D!==void 0&&p.morphTargetInfluences[D]>0)g.merge.add(P);else return g.remove.add(P),null})}if(p.userData?.isVRM0)for(let P=0;P<m.position.array.length;P+=3)m.position.array[P]*=-1,m.position.array[P+2]*=-1;const w={attributes:m,morphTargetDictionaries:new Map(l.map(P=>[P,P.morphTargetDictionary||{}])),morphTargetInfluences:new Map(l.map(P=>[P,P.morphTargetInfluences||[]]))},{dest:b,destMorphToMerge:E}=QO({meshes:[p],scale:n,morphTargetsProcess:g},i);if(i)for(let P=0;P<w.attributes.position.array.length;P+=3)w.attributes.position.array[P]*=-1,w.attributes.position.array[P+2]*=-1;w.attributes=b.attributes,w.morphAttributes=b.morphAttributes,v.morphTargetsRelative=!0;const B=p.geometry.index.array,S=kX(p.geometry.index.array),M=[];for(let P=0;P<B.length;P++)M[P]=S.indexOf(B[P]);Vbe(v,p.skeleton,f);const I=new Uint32Array(M),k=new Lt(I,1,!1);v.setIndex(k);for(const P in v.attributes)v.setAttribute(P,x1(v.getAttribute(P),S));for(const P in v.morphAttributes){const D=v.morphAttributes[P];for(let F=0;F<D.length;F++)D[F]=x1(D[F],S)}const O=v.attributes.position.array;for(let P=0;P<O.length;P+=3)if(O[P]*=n,O[P+1]*=n,O[P+2]*=n,s){if(!E.morphTargetInfluences)return;for(let D=0;D<E.morphTargetInfluences.length;D++){const F=E.morphAttributes?.position[D];if(F)for(let _=0;_<3;_++)O[P+_]+=F.array[P+_]*E.morphTargetInfluences[D]}}const C=new yl(v,p.material);C.name=p.name,C.morphTargetInfluences=b.morphTargetInfluences,C.morphTargetDictionary=b.morphTargetDictionary,C.bind(f),d.add(C),d.add(f.bones[0])}),d.userData.atlasMaterial=o,d}function Wbe(r){const e=r.parent.name,t=new ae,n=new ae;r.getWorldPosition(t),r.getWorldScale(n),r=r.clone();const i=new at,s=new Rt;return r.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),r.userData.boneName=e,r.userData.globalPosition=t,r.userData.globalScale=n,r.userData.globalRotationMatrix=i,r}function Kbe(r,e){const t=new yl(e.geometry,e.material),n=r.clone(),i=n.bones.findIndex(p=>p.name===e.userData.boneName),s=e.userData.globalPosition,a=e.userData.globalScale||new ae(1,1,1),o=e.userData.globalRotationMatrix;t.add(n.bones[0]);const l=[],c=[],u=t.geometry.attributes.position.array,f=new ae,d=e.userData.isVRM0?-1:1;for(let p=0;p<u.length;p+=3)f.set(u[p],u[p+1],u[p+2]),f.applyMatrix4(o),u[p]=d*a.x*f.x+s.x,u[p+1]=a.y*f.y+s.y,u[p+2]=d*a.z*f.z+s.z,l.push(i,0,0,0),c.push(1,0,0,0);return t.geometry.setAttribute("skinIndex",new bE(l,4)),t.geometry.setAttribute("skinWeight",new xr(c,4)),t.bind(n),t}async function qbe(r,e,t){let{transparentColor:n=new st(1,1,1),mToonAtlasSize:i=4096,mToonAtlasSizeTransp:s=4096,stdAtlasSize:a=4096,stdAtlasSizeTransp:o=4096,includeNonTexturedMeshesInAtlas:l=!1,exportMtoonAtlas:c=!1,exportStdAtlas:u=!0,mergeAppliedMorphs:f=!1,isVrm0:d=!1,scale:p=1,twoSidedMaterial:v=!1}=t;const m=Um(r,["Mesh"]);for(let F=0;F<m.length;F++)m[F]=Wbe(m[F]);const g=Um(r,["SkinnedMesh"]),w=[...m,...g];c==!1&&u==!1&&(c=!0);let{stdMesh:b,stdTranspMesh:E,mToonMesh:B,mToonTranspMesh:S,requiresTransparency:M}=e1e(w);c==!1&&(b=[...b,...B],E=[...E,...S],S=[],B=[]),u==!1&&(B=[...B,...b],S=[...S,...E],b=[],E=[]);const I=new Tn;I.name="AvatarRoot",I.userData.atlasMaterial=[];const k=PX(w,p),O={standard:{meshArray:b,size:a,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:E,size:o,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:B,size:i,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:S,size:s,isMtoon:!0,transparentMaterial:!0}},C=QX(e),P=HX(e).map(F=>F.id);for(const F in O){const _=O[F],R=_.meshArray;if(R.length>0){const{bakeObjects:L,material:Q}=await Pbe({transparentColor:n,atlasSize:_.size,meshes:R,mtoon:_.isMtoon,includeNonTexturedMeshesInAtlas:l,transparentMaterial:_.transparentMaterial,transparentTexture:M,twoSidedMaterial:v}),G=L.map(N=>N.mesh),Y=[],W={merge:new Set,keep:new Set(Object.keys(C)),remove:new Set};G.forEach(N=>{if(N.type=="Mesh"&&(N=Kbe(k,N)),Y.push(N),f){if(!N.morphTargetDictionary||!N.morphTargetInfluences)return;P.forEach(Re=>{const de=N.morphTargetDictionary[Re];if(de!==void 0&&N.morphTargetInfluences[de]>0)W.merge.add(Re);else return W.remove.add(Re),null})}const te=N.geometry,oe=te.index.array,fe=kX(N.geometry.index.array),he=[];for(let Re=0;Re<oe.length;Re++)he[Re]=fe.indexOf(oe[Re]);const me=new Uint32Array(he),Te=new Lt(me,1,!1);te.setIndex(Te);for(const Re in te.attributes)te.setAttribute(Re,x1(te.getAttribute(Re),fe));for(const Re in te.morphAttributes){const de=te.morphAttributes[Re];for(let Z=0;Z<de.length;Z++)de[Z]=x1(de[Z],fe)}te.attributes.uv2||(te.attributes.uv2=te.attributes.uv),N.skeleton!=null&&N.geometry.setAttribute("skinIndex",Qbe(k,N));for(let Re=0;Re<8;Re++)delete te.attributes[`morphTarget${Re}`],delete te.attributes[`morphNormal${Re}`]});const{dest:V,destMorphToMerge:T}=QO({meshes:Y,scale:p,morphTargetsProcess:W},d);console.log("destMorphToMerge",T);const H=Zbe(V,T,f,p,d),K=new yl(H,Q);K.name="CombinedMesh_"+F,K.morphTargetInfluences=V.morphTargetInfluences,K.morphTargetDictionary=V.morphTargetDictionary,K.bind(k),I.add(K),K.userData.bindMorphs={old:C,new:{}},Object.keys(C).forEach(N=>{const te=K.morphTargetDictionary[N];te!==void 0&&(K.userData.bindMorphs.new[N]={index:te,primitives:[K.id]})}),I.userData.atlasMaterial.push(Q)}}const D=Object.values(e).find(F=>F?.vrm?.expressionManager)?.vrm.expressionManager;return I.userData.expressionManagerToClone=D,I.add(k.bones[0]),I}function HX(r){return Object.values(r).filter(t=>t)[0]?.traitInfo.manifestData.getAllBlendShapeTraits()||[]}function QX(r){console.warn("expression maps are currently only being take from the frist vrm found that contains blendshapes");const e=Object.values(r).map(i=>i?.vrm).filter(i=>i?.expressionManager?.expressionMap?.aa?._binds.length>0).map(i=>i.expressionManager?.expressionMap),t={};let n=[];for(const i of e)if(i)for(const s of Object.values(i)){if(n.includes(s.expressionName))continue;n.push(s.expressionName);const a=s._binds;!a||a.length==0||a.forEach(o=>{function l(u){const d=o.primitives.map(p=>p.morphTargetDictionary).filter(p=>!!p).find(p=>Object.values(p).includes(u));if(d)return Object.entries(d).find(([,p])=>p==u)}const c=l(o.index);c&&(t[c[0]]={index:c[1],primitives:o.primitives.map(u=>u.id)})})}return t}function ez({meshes:r,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const n=[];return Object.entries(t).map(([i,s])=>{const a=r.find(l=>e.get(l).hasOwnProperty(i)),o=a.morphTargetDictionary[i];n[s]=a.morphTargetInfluences[o]}),n}function Ybe({sourceAttributes:r}){const e=new Set,t=Array.from(r.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const n={};return Array.from(e.keys()).map(i=>{n[i]=Wq(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),n}function tz(r){const{sourceMorphTargetDictionaries:e,morphTargetsProcess:t}=r,n=new Set;Array.from(e.values()).forEach(a=>{Object.keys(a).forEach(o=>{if(!t)n.add(o);else{if(t.remove.has(o)||t.merge.has(o))return;t.keep.has(o)&&n.add(o)}})});const s={};return Array.from(n.keys()).map((a,o)=>{s[a]=o}),s}function nz({meshes:r,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:n,scale:i}){const s=new Set;Array.from(t.values()).forEach(u=>{Object.keys(u).forEach(f=>s.add(f))});const o=Array.from(s),l={};o.forEach(u=>{l[u]=[],Object.entries(n).forEach(([f,d])=>{l[u][d]=[],r.forEach(p=>{let v;const m=e.get(p);if(m.hasOwnProperty(f)&&p.geometry.morphAttributes[u]){const g=m[f];v=p.geometry.morphAttributes[u][g]}else{const g=p.geometry.attributes[u],w=new g.array.constructor(new Array(g.array.length).fill(0));v=new Lt(w,g.itemSize,g.normalized)}l[u][d].push(v)})})});const c={};return o.forEach(u=>{c[u]=[];for(let f=0;f<Object.entries(n).length;f++){c[u][f]=Wq(l[u][f]);const d=c[u][f].array;for(let p=0;p<d.length;p+=3)d[p]*=i,d[p+1]*=i,d[p+2]*=i}}),c}function Xbe({meshes:r}){var e=0,t=[];return r.forEach(n=>{const i=n.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=n.geometry.attributes.position.count}),t}function QO({meshes:r,scale:e,morphTargetsProcess:t},n=!1){let i=0;r.forEach(d=>{if(i+=d.geometry.attributes.uv.count,d.userData?.isVRM0)for(let p=0;p<d.geometry.attributes.position.array.length;p+=3)d.geometry.attributes.position.array[p]*=-1,d.geometry.attributes.position.array[p+2]*=-1});const s={meshes:r,attributes:new Map(r.map(d=>[d,d.geometry.attributes])),morphAttributes:new Map(r.map(d=>[d,d.geometry.morphAttributes])),morphTargetDictionaries:new Map(r.map(d=>[d,d.morphTargetDictionary||{}])),morphTargetInfluences:new Map(r.map(d=>[d,d.morphTargetInfluences||[]]))},a={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};a.attributes=Ybe({sourceAttributes:s.attributes});const o=tz({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:t?.remove||new Set,keep:t?.keep||new Set,merge:t?.merge||new Set}});a.morphTargetDictionary=o,a.morphAttributes=nz({meshes:r,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:o,scale:e}),a.morphTargetInfluences=ez({meshes:r,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:o}),a.index=Xbe({meshes:r});const l={morphAttributes:{},morphTargetDictionaries:{},morphTargetInfluences:null};let c=new Set(t?.keep||[]);t?.merge.forEach(d=>{c.add(d)});const u=tz({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:new Set,keep:c,merge:new Set}});l.morphAttributes=nz({meshes:r,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:u,scale:e});const f=ez({meshes:r,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:u});return l.morphTargetInfluences=f,l.morphTargetDictionaries=u,a.animations={},{source:s,dest:a,destMorphToMerge:l}}function Zbe(r,e,t,n,i=!1){const s=new Gn;if(i)for(let o=0;o<r.attributes.position.array.length;o+=3)r.attributes.position.array[o]*=-1,r.attributes.position.array[o+2]*=-1;s.attributes=r.attributes,s.morphAttributes=r.morphAttributes,s.morphTargetsRelative=!0,s.setIndex(r.index);const a=s.attributes.position.array;for(let o=0;o<a.length;o+=3)if(a[o]*=n,a[o+1]*=n,a[o+2]*=n,t){if(!e.morphTargetInfluences)continue;for(let l=0;l<e.morphTargetInfluences.length;l++){const c=e.morphAttributes?.position[l];if(c)for(let u=0;u<3;u++)a[o+u]+=c.array[o+u]*e.morphTargetInfluences[l]}}return s}function Mt(r){return r==null||r==null?[]:Array.isArray(r)?r:[r]}function Jbe(r,e){let t=r.children.slice();t.forEach(n=>r.remove(n)),r.add(e),t.forEach(n=>r.add(n))}async function $be(r,e){const n=await new cf().load(e);n.colorSpace=Sn,n.flipY=!1,r.traverse(i=>{if(i instanceof lr){const s=Array.isArray(i.material)?i.material:[i.material];for(let a=0;a<s.length;a++)s[a]instanceof vi?s[a].name.includes("(Outline)")||(console.log(s[a].name),s[a].uniforms.map.value=n,s[a].uniforms.shadeMultiplyTexture.value=n):(s[a].map=n,s[a].emissiveMap=n),s[a].needsUpdate=!0}})}function yu(r){return r.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}const ZT=r=>{const e=[];for(const t in r){const n=r[t].vrm;if(n){const i=n.data.cullingLayer;i>=0&&n.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=n.data.cullingDistance,s.userData.maxCullDistance=n.data.maxCullingDistance,e.push(s)})}}Ube(e)};function e1e(r){const e=[],t=[],n=[],i=[];let s=!1;return r.forEach(a=>{const l=Mt(a.material)[0];l.type=="ShaderMaterial"?l.transparent==!0?(i.push(a),s=!0):(n.push(a),l.uniforms.alphaTest?.value!=0&&(s=!0)):l.transparent==!0?(t.push(a),s=!0):(e.push(a),l.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:t,mToonMesh:n,mToonTranspMesh:i,requiresTransparency:s}}function t1e(r){const e=[],t=[],n=[],i=[],s=[],a=[];return r.forEach(o=>{Mt(o.material).forEach(c=>{c.type=="ShaderMaterial"?c.transparent==!0?a.push(c):c.uniforms.alphaTest.value!=0?s.push(c):i.push(c):c.transparent==!0?n.push(c):c.alphaTest!=0?t.push(c):e.push(c)})}),{stdMats:e,stdCutoutpMats:t,stdTranspMats:n,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:a}}function rz(r,e){r.data==null?r.data=e:r.data={...r.data,...e}}function n1e(r,e){if(r.data!=null)return r.data[e]}function r1e(r){const e=n1e(r,"cullingMeshes");e&&(e.forEach(t=>{OX(t)}),r.data.cullingMeshes=null)}function Lr(r){switch(r){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function i1e(r){const e=r.scene;r1e(r),e.traverse(t=>{t.material&&zL(t.material),t.geometry&&(OX(t),t.geometry.dispose(),t.geometry.disposeBoundsTree())}),e.parent&&e.parent.remove(e),Bh.deepDispose(e),r.expressionManager&&r.expressionManager.expressions.forEach(t=>{t._binds&&t._binds.forEach(n=>{n.primitives&&n.primitives.forEach(i=>{i.geometry.dispose(),i.material&&zL(i.material)})})});for(const t in r)r[t]=null}const zL=r=>{if(r.length)for(let e=0;e<r.length;++e)zL(r[e]);else r.map?.dispose&&r.map.dispose(),r.normalMap?.dispose&&r.normalMap.dispose(),r.ormMap?.dispose&&r.ormMap.dispose(),r.aoMap?.dispose&&r.aoMap.dispose(),r.roughnessMap?.dispose&&r.roughnessMap.dispose(),r.metalnessMap?.dispose&&r.metalnessMap.dispose(),r.dispose()},zO=r=>{let e,t,n=0;return Array.isArray(r)?(e=r[0]||0,t=r[1]||0,n=r[2]||0):(typeof r=="string"||r instanceof String)&&r.split("-").forEach(s=>{switch(s=s.toLowerCase(),s){case"left":e=-1;break;case"right":e=1;break;case"bottom":case"down":t=-1;break;case"top":case"up":t=1;break;case"back":case"backward":n=-1;break;case"front":case"forward":n=1;break;default:console.warn("unkown cameraPosition name: "+s+" in: "+r+". Please use left, right, bottom, top, back or front");break}}),new ae(e,t,n)},zX=()=>{const r=new Date().getTime(),e=Math.random().toString(36).substr(2,9);return r+"-"+e},s1e=r=>{const e=r.humanoid.humanBones;e.hips.node.parent.name="rootBone",e.upperChest==null&&e.neck.node.parent!=e.chest&&(e.neck.node.parent!=e.chest.node?e.upperChest={node:e.neck.node.parent}:e.upperChest!=null&&(e.upperChest={node:e.neck.node.parent},e.chest={node:e.neck.node.parent.parent})),e.leftShoulder==null&&(e.leftUpperArm.node.parent!=e.chest?.node&&e.leftUpperArm.node.parent!=e.upperChest?.node&&e.leftUpperArm.node.parent!=e.spine?.node&&e.leftUpperArm.node.parent!=e.neck?.node&&e.leftUpperArm.node.parent!=e.head?.node,e.leftShoulder={node:e.leftUpperArm.node.parent}),e.rightShoulder==null&&(e.rightUpperArm.node.parent!=e.chest?.node&&e.rightUpperArm.node.parent!=e.upperChest?.node&&e.rightUpperArm.node.parent!=e.spine?.node&&e.rightUpperArm.node.parent!=e.neck?.node&&e.rightUpperArm.node.parent!=e.head?.node,e.rightShoulder={node:e.rightUpperArm.node.parent});for(let t in ay)t=t.charAt(0).toLowerCase()+t.slice(1),e[t]?.node&&(e[t].node.name=t)};function VX({candidates:r,predicate:e}){if(!r.length)return null;const t=r.shift();return e(t)?t:(r=r.concat(t.children),VX({candidates:r,predicate:e}))}function GX(r,e){return VX({candidates:[r],predicate:t=>t.name===e})}function jX({candidates:r,predicate:e,results:t=[]}){if(!r.length)return t;const n=r.shift();return e(n)&&t.push(n),r=r.concat(n.children),jX({candidates:r,predicate:e,results:t})}function Um(r,e){return jX({candidates:[r],predicate:t=>Mt(e).includes(t.type)})}function a1e(r,e){if(!r.morphTargetDictionary)return!1;for(const t of Object.keys(r.morphTargetDictionary))if(e[t])return!0;return!1}function VO({width:r,height:e,transparent:t}){const n=document.createElement("canvas");n.width=r,n.height=e;const i=n.getContext("2d");return i.fillStyle="white",t&&(i.globalAlpha=0),i.fillRect(0,0,n.width,n.height),i.globalAlpha=1,i}const o1e={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function WX(r,e,t){const n=mh.findByName(r,"mixamo.com");if(n==null)return null;const i=[],s=new Rt,a=new Rt,o=new Rt,l=new ae,c=e.getObjectByName("mixamorigHips").position.y,u=t.humanoid?.getNormalizedBoneNode("hips").getWorldPosition(l).y,f=t.scene.getWorldPosition(l).y,p=Math.abs(u-f)/c;return n.tracks.forEach(m=>{const g=m.clone(),w=g.name.split("."),b=w[0],B=o1e[b],S=e.getObjectByName(b);if(B!=null){const M=w[1];if(S.getWorldQuaternion(s).invert(),S.parent.getWorldQuaternion(a),g instanceof uc){for(let I=0;I<g.values.length;I+=4){const k=g.values.slice(I,I+4);o.fromArray(k),o.premultiply(a).multiply(s),o.toArray(k),k.forEach((O,C)=>{g.values[C+I]=O})}i.push(new uc(`${B}.${M}`,g.times,g.values.map((I,k)=>t.meta?.metaVersion==="0"&&k%2===0?-I:I)))}else if(g instanceof Su){const I=g.values.map((k,O)=>(t.meta?.metaVersion==="0"&&O%3!==1?-k:k)*p);i.push(new Su(`${B}.${M}`,g.times,I))}}}),new mh("vrmAnimation",n.duration,i)}const l1e=new Spe,c1e=new Kq,JT=.2,u1e=r=>Math.floor(Math.random()*r);class iz{constructor(e,t,n,i,s,a,o){this.mixer=new ide(t),this.actions=[],this.to=null,this.from=null,this.vrm=n,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=n?.humanoid?.humanBones?.neck,this.spineBone=n?.humanoid?.humanBones?.spine,this.timeScale=1,i&&(this.setAnimations(i,null,null,o),this.to=this.actions[s],a!=-1&&(this.from=this.actions[a],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play())}setTimeScale(e){this.timeScale=e,this.actions.forEach(t=>{t.timeScale=e})}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,t=null,n=null,i=!1){if(n=n??this.animationManager.mouseLookEnabled,this.animations=e,t!=null){if(this.vrm!=null){const s=WX(e,t,this.vrm);s&&(e=[s],this.mixamoModel=t)}}else{const s=[];e&&Array.isArray(e)?(e.forEach(a=>{s.push(a.clone())}),e=s):e=[]}if(n&&e.length>0&&e[0]?.tracks&&e[0].tracks.map((s,a)=>{(s.name==="neck.quaternion"||s.name==="spine.quaternion")&&e[0].tracks.splice(a,1)}),i){this.actions.forEach(s=>{s.weight=0,s.stop()}),this.actions=[],this.newAnimationWeight=1;for(let s=0;s<e.length;s++){const a=this.mixer.clipAction(e[s]);a.timeScale=this.timeScale,this.actions.push(a)}this.actions[0].weight=1,this.actions[0].play()}else{this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let s=0;s<e.length;s++){const a=this.mixer.clipAction(e[s]);a.timeScale=this.timeScale,this.actions.push(a)}this.actions.length>0&&this.actions[0]&&(this.actions[0].weight=0,this.actions[0].play())}}update(e,t){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(n=>{n.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(n=>{n.weight=0,n.stop()}),this.fadeOutActions=null),this.actions.forEach(n=>{n.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=t),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}setTime(e){this.mixer.setTime(e)}getTime(){return this.mixer.time}dispose(){this.animationManager.disposeAnimation(this)}}class A1e{constructor(){this.animationPaths=[],this.defaultAnimations=[],this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.paused=!1,this.scale=1,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,this.currentClip=null,setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(t=>{t.setMouseLookEnabled(e)})}setScale(e){this.scale=e}async loadAnimation(e,t,n=0,i=!0,s="",a=""){const o=s+(s!=""?"/":"")+Mt(e)[0];a=a==""?yu(o):a,this.currentAnimationName=a;const c=await(i?l1e:c1e).loadAsync(o);c.scale.set(this.scale,this.scale,this.scale),this._scaleOffsetHips(c.animations);const u=mh.findByName(c.animations,"mixamo.com");u!=null?(this.mixamoModel=c.clone(),this.mixamoAnimations=c.animations,this.currentClip=u):(this.mixamoModel=null,this.animations=c.animations,this.currentClip=c.animations[0]),this.mainControl==null&&(this.curAnimID=0,this.lastAnimID=-1,this.mainControl=new iz(this,c,null,c.animations,this.curAnimID,this.lastAnimID,t),this.animationControls.push(this.mainControl)),this.animationControls.forEach(f=>{f.setAnimations(c.animations,this.mixamoModel,this.mouseLookEnabled,t)}),this.setTime(n),t?this.pause():this.play()}getCurrentClip(){return this.currentClip}getCurrentClipDuration(){return this.currentClip?this.currentClip.duration:0}getCurrentAnimationName(){return this.currentAnimationName}clearCurrentAnimations(){this.animationPaths=this.defaultAnimations,this.animationControls=[],this.mainControl=null}storeAnimationPaths(e,t,n=!0){const i=Mt(e);n?this.animationPaths=[...this.defaultAnimations,...i.map(s=>`${t}/${s}`)]:this.animationPaths=i.map(s=>t!=""?`${t}/${s}`:s)}storeDefaultAnimationPaths(e,t){const n=Mt(e);this.defaultAnimations=n.map(i=>t!=""?`${t}/${i}`:i),this.animationPaths=this.defaultAnimations}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}_scaleOffsetHips(e){e.forEach(t=>{for(let n=0;n<t.tracks.length;n++){const i=t.tracks[n];if(i.name.includes(".position"))for(let s=0;s<i.values.length/3;s++){const a=s*3;i.values[a]/=this.scale,i.values[a+1]/=this.scale,i.values[a+2]/=this.scale}}})}addVRM(e){if(e==null){console.error("Non Existing VRM was provided.");return}let t=null;this.mixamoModel!=null?(t=[WX(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=t)):t=this.animations;const n=new iz(this,e.scene,e,t,this.curAnimID,this.lastAnimID,this.isPaused());this.animationControls.push(n),this.started===!1&&t&&(this.started=!0,this.animRandomizer(t[this.curAnimID].duration)),this.update(!0)}removeVRM(e){const t=this.animationControls.findIndex(n=>n.vrm===e);t!==-1&&this.animationControls.splice(t,1)[0].dispose()}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=u1e(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-JT)},e*1e3)}pause(){this.paused=!0}play(){this.paused=!1}isPaused(){return this.paused}setTime(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTime(e)})}setFrame(e){this.setTime(e*30)}setSpeed(e){this.mainControl&&this.animationControls.forEach(t=>{t.setTimeScale(e)})}update(e=!1){(this.mainControl&&!this.paused||e)&&(this.animationControls.forEach(t=>{t.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*JT):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*JT):this.weightOut=0)}}const f1e={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class qm{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const h1e=new Sy(-1,1,1,-1,0,1);class d1e extends Gn{constructor(){super(),this.setAttribute("position",new xr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new xr([0,2,0,0,2,0],2))}}const p1e=new d1e;class GO{constructor(e){this._mesh=new lr(p1e,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,h1e)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class m1e extends qm{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof vi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=dO.clone(e.uniforms),this.material=new vi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new GO(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class sz extends qm{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class g1e extends qm{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class v1e{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const n=e.getSize(new pt);this._width=n.width,this._height=n.height,t=new cc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:nc}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new m1e(f1e),this.copyPass.material.blending=gu,this.clock=new IE}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}sz!==void 0&&(a instanceof sz?n=!0:a instanceof g1e&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new pt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class y1e extends qm{constructor(e,t,n=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new st}render(e,t,n){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}class w1e extends qm{constructor(e,t,n){super(),this.resolution=e,this.fsQuad=new GO(this.material()),this.scene=t,this.camera=n,this.rgbRenderTarget=Bx(e,zi,!0),this.normalRenderTarget=Bx(e,zi,!1),this.normalMaterial=new Rhe}setResolution(e){this.rgbRenderTarget=Bx(e,zi,!0),this.normalRenderTarget=Bx(e,zi,!1)}render(e,t){e.setRenderTarget(this.rgbRenderTarget),e.render(this.scene,this.camera);const n=this.scene.overrideMaterial;e.setRenderTarget(this.normalRenderTarget),this.scene.overrideMaterial=this.normalMaterial,e.render(this.scene,this.camera),this.scene.overrideMaterial=n;const i=this.fsQuad.material.uniforms;i.tDiffuse.value=this.rgbRenderTarget.texture,i.tDepth.value=this.rgbRenderTarget.depthTexture,i.tNormal.value=this.normalRenderTarget.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new vi({uniforms:{tDiffuse:{value:null},tDepth:{value:null},tNormal:{value:null},resolution:{value:new Cn(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform sampler2D tDepth;
                uniform sampler2D tNormal;
                uniform vec4 resolution;
                varying vec2 vUv;

                float getDepth(int x, int y) {
                    return texture2D( tDepth, vUv + vec2(x, y) * resolution.zw ).r;
                }

                vec3 getNormal(int x, int y) {
                    return texture2D( tNormal, vUv + vec2(x, y) * resolution.zw ).rgb * 2.0 - 1.0;
                }

                float neighborNormalEdgeIndicator(int x, int y, float depth, vec3 normal) {
                    float depthDiff = getDepth(x, y) - depth;
                    vec3 normalEdgeBias = vec3(1., 1., 1.);
                    float normalDiff = dot(normal - getNormal(x, y), normalEdgeBias);
                    float normalIndicator = clamp(smoothstep(-.01, .01, normalDiff), 0.0, 1.0);
                    float depthIndicator = clamp(sign(depthDiff * .25 + .0025), 0.0, 1.0);
                    return distance(normal, getNormal(x, y)) * depthIndicator * normalIndicator;
                }

                float depthEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float diff = 0.0;
                    diff += clamp(getDepth(1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(-1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, 1) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, -1) - depth, 0.0, 1.0);
                    return floor(smoothstep(0.01, 0.02, diff) * 2.) / 2.;
                }

                float normalEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float indicator = 0.0;
                    indicator += neighborNormalEdgeIndicator(0, -1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(0, 1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(-1, 0, depth, normal);
                    indicator += neighborNormalEdgeIndicator(1, 0, depth, normal);
                    return step(0.1, indicator);
                }

                float lum(vec4 color) {
                    vec4 weights = vec4(.2126, .7152, .0722, .0);
                    return dot(color, weights);
                }

                float smoothSign(float x, float radius) {
                    return smoothstep(-radius, radius, x) * 2.0 - 1.0;
                }

                void main() {
                    vec4 texel = texture2D( tDiffuse, vUv );
                    float tLum = lum(texel);
                    float normalEdgeCoefficient = .3;
                    float depthEdgeCoefficient = .4;
                    float dei = depthEdgeIndicator();
                    float nei = normalEdgeIndicator();
                    float coefficient = dei > 0.0 ? (1.0 - depthEdgeCoefficient * dei) : (1.0 + normalEdgeCoefficient * nei);
                    gl_FragColor = texel * coefficient;
                }
                `})}}function Bx(r,e,t){const n=new cc(r.x,r.y,t?{depthTexture:new mO(r.x,r.y),depthBuffer:!0}:void 0);return n.texture.format=e,n.texture.minFilter=ts,n.texture.magFilter=ts,n.texture.generateMipmaps=!1,n.stencilBuffer=!1,n}class _1e extends qm{constructor(e){super(),this.resolution=e,this.fsQuad=new GO(this.material())}setResolution(e){this.resolution=e}render(e,t,n){const i=this.fsQuad.material.uniforms;i.tDiffuse.value=n.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new vi({uniforms:{tDiffuse:{value:null},resolution:{value:new Cn(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform vec4 resolution;
                varying vec2 vUv;
                void main() {
                    vec2 iuv = (floor(resolution.xy * vUv) + .5) * resolution.zw;
                    vec4 texel = texture2D( tDiffuse, iuv );
                    texel.rgb = pow(texel.rgb, vec3(1.0 / 2.2));
                    gl_FragColor = texel;
                }
                `})}}const D0=new ae;class x1e{camera=null;frameOffset={min:.2,max:.2};boneOffsets;cameraDir=new ae;constructor(e){this.camera=e||new Pi,this.boneOffsets={head:null,neck:null,chest:null,hips:null,spine:null,leftUpperLeg:null,leftLowerLeg:null,leftFoot:null,rightUpperLeg:null,rightLowerLeg:null,rightFoot:null}}setupCamera(e,t,n=30){this.camera.position.copy(e),this.camera.lookAt(t),this.camera.fov=n}async calculateBoneOffsets(e,t){for(const n in this.boneOffsets){const i=await this._getMinMaxOffsetByBone(e,n,t);console.log("result",i),this.boneOffsets[n]=i}}frameTarget=null;setFrameTarget(e){this.frameTarget=e}frameCloseupShot(){this.frameShot("head","head")}frameMediumShot(){this.frameShot("chest","head")}frameCowboyShot(){this.frameShot("hips","head")}frameFullShot(){this.frameShot("leftFoot","head")}frameShot(e,t,n=null,i=!1,s=!0){if(!this.frameTarget){console.error("No target object provided, Call setFrameTarget() first;");return}const a=this._getBoneWorldPositionWithOffset(this.frameTarget,e,i),o=this._getBoneWorldPositionWithOffset(this.frameTarget,t,s);a.y-=this.frameOffset.max,o.y+=this.frameOffset.min,n=n||new ae(0,0,0),this.positionCameraBetweenPoints(a,o,n)}setBottomFrameOffset(e){this.frameOffset.min=e}setTopFrameOffset(e){this.frameOffset.max=e}_getBoneWorldPositionWithOffset(e,t,n){const i=this._getFirstBoneWithName(t,e);if(!i||!this.boneOffsets[t])return console.error(`Bone with name '${t}' not found in the model.`),new ae;const s=new ae;i.getWorldPosition(s);const a=n?this.boneOffsets[t].max:this.boneOffsets[t].min;return s.y+=a.y,s}_getFirstBoneWithName(e,t=void 0){let n=null;const i=t||this.frameTarget;if(!i){console.error("_getFirstBoneWithName: No target object provided, Call setFrameTarget() first or provide a targetObject parameter;");return}return i.traverse(s=>{if(s instanceof yl){if(!s.geometry){console.error("Invalid skinned mesh found in children.");return}const a=s.skeleton.bones.findIndex(o=>o.name===e);if(a!==-1){n=s.skeleton.bones[a];return}}}),n}async _getMinMaxOffsetByBone(e,t,n){return new Promise(async(i,s)=>{(!e||!e.traverse)&&(console.error("Invalid parent object provided."),s(null));const a=new ae(1/0,1/0,1/0),o=new ae(-1/0,-1/0,-1/0),l=[];e.traverse(async f=>{f instanceof yl&&(l.push(this._saveBonesPos(f.skeleton)),f.skeleton.pose())});let c=0;await(f=>new Promise(d=>setTimeout(d,f)))(10),e.traverse(f=>{if(f instanceof yl){if(!f.geometry){console.error("Invalid skinned mesh found in children.");return}const d=f.skeleton.bones.findIndex(g=>g.name===t);if(d===-1){console.error(`Bone with name '${t}' not found in one of the skinned meshes.`);return}const p=f.geometry.getAttribute("position"),v=f.geometry.getAttribute("skinWeight"),m=f.geometry.getAttribute("skinIndex");for(let g=0;g<p.count;g++){const w=new ae().fromBufferAttribute(p,g).applyMatrix4(f.matrixWorld);if(m.getX(g)===d&&v.getX(g)>=n){const B=f.skeleton.bones[d],S=new ae().setFromMatrixPosition(B.matrixWorld),M=w.clone().sub(S);a.min(M),o.max(M)}}this._restoreSavedPose(l[c],f.skeleton),c++}}),i({min:a,max:o})})}_saveBonesPos(e){let t=[];return e.bones.forEach(n=>{t.push({position:n.position.clone(),rotation:n.rotation.clone(),scale:n.scale.clone()})}),t}_restoreSavedPose(e,t){e&&t.bones.forEach((n,i)=>{n.position.copy(e[i].position),n.rotation.copy(e[i].rotation),n.scale.copy(e[i].scale)})}positionCameraBetweenPoints(e,t,n,i=30){const s=new Or;s.expandByPoint(e),s.expandByPoint(t),this.camera.fov=i;const a=this.camera.fov*(Math.PI/180),l=s.getSize(new ae).length()/(2*Math.tan(a/2));s.getCenter(D0),this.camera.position.copy(D0),n.y*=.5,this.camera.lookAt(D0.clone().sub(n));const c=new ae;this.camera.getWorldDirection(c),this.camera.position.addScaledVector(c,-l),this.camera.updateProjectionMatrix()}setCamera(e,t,n=30){this.camera.position.copy(e),this.camera.fov=n,D0.set(0,0,-1),this.cameraDir=D0.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*t,this.camera.position.z-=this.cameraDir.z*t}setCameraFrameWithName(e,t){switch(e.toLowerCase()){case"fullshot":this.frameShot("leftFoot","head",t);break;case"cowboyshot":this.frameShot("hips","head",t);break;case"mediumshot":this.frameShot("chest","head",t);break;case"mediumcloseup":case"mediumcloseupshot":this.frameShot("chest","head",t,!0);break;case"closeup":case"closeupshot":this.frameShot("head","head",t);break;default:console.warn("unkown cameraFrame: "+e+". Please use fullShot, cowboyShot, mediumShot, mediumCloseup or closeup"),this.frameShot("leftFoot","head",t);break}}copyCamera(e){this.camera.position.copy(e.position),this.camera.quaternion.copy(e.quaternion),"fov"in e&&(this.camera.fov=e.fov)}}const b1=4096;class b1e{constructor(e,t,n){const i=new By({preserveDrawingBuffer:!0,antialias:!1,alpha:!0});this.pixelSize=n,this.domElement=i.domElement;const s=new pt(b1,b1);i.setClearColor(0,0),i.outputColorSpace=Fi,i.setSize(s.x,s.y),i.setPixelRatio(window.devicePixelRatio);let a=s.clone().divideScalar(n);a.x|=0,a.y|=0;const o=new v1e(i);o.addPass(new y1e(e,t)),this._renderPixelPass=new w1e(a,e,t),this._pixelPass=new _1e(a),o.addPass(this._renderPixelPass),o.addPass(this._pixelPass),this.renderer=i,this.composer=o}setSize(e,t){let i=new pt(e,t).clone().divideScalar(this.pixelSize);i.x|=0,i.y|=0,this.renderer.setSize(e,t),this._renderPixelPass.setResolution(i),this._pixelPass.setResolution(i)}setPixelSize(e){this.pixelSize=e}render(){this.composer.render()}}class E1e{cameraFrameManager;constructor(e,t){this.renderer=new By({preserveDrawingBuffer:!0,antialias:!0,alpha:!0}),this.renderer.setClearAlpha(0),this.renderer.premultipliedAlpha=!1,this.scene=t,this.characterManager=e,this.renderer.outputColorSpace=Sn,this.renderer.setSize(b1,b1);const n=new Pi(30,1,.1,1e3);this.textureLoader=new cf,this.sceneBackground=new st(.1,.1,.1),this.sceneBackgroundAlpha=1,this.usesBackgroundImage=!1,this.backgroundMaterial=new ya({color:16777215,transparent:!0,opacity:.5});const i=new Tu(1e3,1e3),s=new lr(i,this.backgroundMaterial);s.renderOrder=-1,this.backgroundPlane=s,this.pixelRenderer=new b1e(t,n,20),this.cameraFrameManager=new x1e(n),this.cameraFrameManager.setFrameTarget(this.characterManager.characterModel)}setScene(e){this.scene=e}get camera(){return this.cameraFrameManager.camera}setupCamera(e,t,n=30){this.cameraFrameManager.setupCamera(e,t,n)}_getCharacterMinMax(){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;return this.characterManager.characterModel.traverse(n=>{n.geometry&&(n.geometry.computeBoundingBox(),n.geometry.boundingBox&&(n.geometry.boundingBox.applyMatrix4(n.matrixWorld),n.geometry.boundingBox.min.y<e&&(e=n.geometry.boundingBox.min.y),n.geometry.boundingBox.max.y>t&&(t=n.geometry.boundingBox.max.y)))}),{minY:e,maxY:t}}_getBoneWorldPosition(e,t=void 0){const n=this.cameraFrameManager._getFirstBoneWithName(e,t);return n!=null?new ae().setFromMatrixPosition(n.matrixWorld):(console.warn(`Bone with name '${e}' not found in one of the skinned meshes.`),new ae(0,0,0))}setBackground(e){if(Array.isArray(e)){const t=e[3]==null?1:e[3];this.setBackgroundColor(e[0],e[1],e[2],t)}else this.setBackgroundImage(e)}setBackgroundColor(e,t,n,i){const s=new st(e,t,n,i);this.sceneBackground=s,i==null&&(i=1),i>1&&(i=1),i<0&&(i=0),this.sceneBackgroundAlpha=i,this.backgroundMaterial.color=s,this.usesBackgroundImage=!1}setBackgroundImage(e){return new Promise(async(t,n)=>{try{const i=await this.texureLoader.load(e);i&&(i.wrapS=i.wrapT=ao,this.sceneBackground=i,this.usesBackgroundImage=!0,this.sceneBackgroundAlpha=1,t())}catch(i){console.error("Error loading background image: ",i),n(i)}})}_setBackground(){if(this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1)if(this.sceneBackgroundAlpha==0)this.scene.background=null;else{this.scene.background=null,this.scene.add(this.backgroundPlane),this.backgroundPlane.position.copy(this.camera.position);var e=new ae(0,0,-1);e.applyQuaternion(this.camera.quaternion);var t=100;this.backgroundPlane.position.addScaledVector(e,t),this.backgroundPlane.lookAt(this.camera.position)}else this.scene.background=this.sceneBackground}_restoreBackground(){this.scene.background=null,this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1&&this.scene.remove(this.backgroundPlane)}getImageData(e,t,n=null){return this._createImage(e,t,n).split("base64,")[1]}_createImage(e,t,n=null){const i=e/t;typeof n=="number"&&this.pixelRenderer.setPixelSize(n),this.renderer.setSize(e,t),this.pixelRenderer.setSize(e,t);const s="image/png";this.camera.aspect=i,this.camera.updateProjectionMatrix();const a=typeof n=="number"?this.pixelRenderer:this.renderer;try{this._setBackground(),a.render(this.scene,this.camera);let o=a.domElement.toDataURL(s);return this._restoreBackground(),o}catch(o){return console.error(o),null}}savePixelScreenshot(e,t,n,i){this.pixelRenderer.setPixelSize(i),this.pixelRenderer.setSize(t,n);const s=this._createImage(t,n,!0);this.saveFile(s.replace("image/png","image/octet-stream"),e+".png")}saveScreenshot(e,t,n){const i=this._createImage(t,n);this.saveFile(i.replace("image/png","image/octet-stream"),e+".png")}getScreenshotImage(e,t){const n=this._createImage(e,t),i=new Image;return i.src=n,i}getScreenshotTexture(e,t){const n=this.getScreenshotImage(e,t),i=new Cr(n);return i.needsUpdate=!0,i}getScreenshotBlob(e,t){const n=this._createImage(e,t),i=un.Buffer.from(n.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,t){const n=document.createElement("a");typeof n.download=="string"?(document.body.appendChild(n),n.download=t,n.href=e,n.click(),document.body.removeChild(n)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}const S1e=2;class B1e{constructor(e=.5,t=.5,n=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new IE,this.closeTime=e,this.openTime=t,this.continuity=n,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addVRM(e){this.vrmBlinkers.push(e)}removeVRM(e){const t=this.vrmBlinkers.indexOf(e);t!==-1&&this.vrmBlinkers.splice(t,1)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=S1e,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue($i.Blink,1-this._eyeOpen),e.expressionManager.update()})}}class M1e{vrmEmotion;mode;clock;continuous=!1;emotionPlaying=null;emotionValue=0;intensity=1;emotionTime=.1;isTakingScreenShot=!1;_nextEmotion=null;_nextEmotionTime=0;_nextEmotionValue=0;_nextIntensity=1;_nextIsContinuous=!1;constructor(){this.vrmEmotion=[],this.mode="ready",this.clock=new IE,this.isTakingScreenShot=!1,this.update()}get availableEmotions(){const e=Object.keys($i).map(n=>n.toLowerCase()),t=[];for(const n of this.vrmEmotion)for(const i of e){if(i==="blink"||t.includes(i))continue;const s=n.expressionManager?.getExpression(i);s&&s._binds.length>0&&t.push(i)}return t}addVRM(e){e.expressionManager&&this.vrmEmotion.push(e)}hasEmotion(e){return this.availableEmotions.some(t=>t===e)}removeVRM(e){const t=this.vrmEmotion.indexOf(e);t!==-1&&this.vrmEmotion.splice(t,1)}enableScreenshot(){this.isTakingScreenShot=!0,this.emotionPlaying=null,this._updateEmotions()}disableScreenshot(){this.isTakingScreenShot=!1}_isBlink(e){return e==="blink"}playEmotion(e,t=void 0,n=!1,i=1){if(!this.hasEmotion(e)){console.warn(`Emotion ${e} not available`);return}if(this._isBlink(e)){console.warn("Blink is handled by the BlinkManager, ignoring");return}if(e===this.emotionPlaying&&i===this.intensity)return;const s=Math.min(1,Math.max(0,i));if(this.mode==="animating"&&this.emotionPlaying){this.continuous=!1,this._nextEmotion=e,this._nextEmotionTime=t||this.emotionTime,this._nextEmotionValue=0,this._nextIntensity=s,this._nextIsContinuous=n||!1,this.mode="transition";return}this.emotionPlaying=e,this.intensity=s,t&&(this.emotionTime=t),this.continuous=n||!1,this.mode="animating"}_setIsReady(){this.emotionValue=0,this.intensity=1,this.emotionPlaying=null,this.continuous=!1,this.mode="ready"}_removeNextEmotion(){this._nextEmotion=null,this._nextIntensity=1,this._nextEmotionValue=0,this._nextEmotionTime=0,this._nextIsContinuous=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"animating":this.emotionPlaying?(this.emotionValue<this.intensity&&(this.emotionValue+=e/this.emotionTime,this.emotionValue=Math.min(1,this.emotionValue)),!this.continuous&&this.emotionValue>=this.intensity&&(this.mode="stopping")):this._setIsReady(),this._updateEmotions();break;case"stopping":this.emotionPlaying?(this.emotionValue>0&&(this.emotionValue-=e/this.emotionTime,this.emotionValue=Math.max(0,this.emotionValue)),this.emotionValue<=0&&this._setIsReady()):this._setIsReady(),this._updateEmotions();break;case"transition":this._nextEmotion?(this._nextEmotionValue<this._nextIntensity&&(this._nextEmotionValue+=e/this._nextEmotionTime,this.emotionValue=Math.min(this.intensity,this.emotionValue)),this.emotionValue>0?this.emotionValue-=e/this._nextEmotionTime:(this.emotionValue=this._nextEmotionValue,this.emotionTime=this._nextEmotionTime,this.emotionPlaying=this._nextEmotion,this.intensity=this._nextIntensity,this.continuous=this._nextIsContinuous,this.mode="animating",this._removeNextEmotion())):this.emotionPlaying&&(this.mode="animating"),this._updateEmotions()}},1e3/30)}_updateEmotions(){this.emotionPlaying&&this.vrmEmotion.forEach(e=>{this._nextEmotion&&e.expressionManager?.setValue(this._nextEmotion,this._nextEmotionValue),e.expressionManager?.setValue(this.emotionPlaying,this.emotionValue),e.expressionManager?.update()})}}function KX(){return(KX=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function C1e(){return KX.apply(this,arguments)}function T1e(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):r instanceof e}(function(r){r[r.cBASISTexType2D=0]="cBASISTexType2D",r[r.cBASISTexType2DArray=1]="cBASISTexType2DArray",r[r.cBASISTexTypeCubemapArray=2]="cBASISTexTypeCubemapArray",r[r.cBASISTexTypeVideoFrames=3]="cBASISTexTypeVideoFrames",r[r.cBASISTexTypeVolume=4]="cBASISTexTypeVolume"})(GL||(GL={})),function(r){r[r.RAW=0]="RAW",r[r.PNG=1]="PNG",r[r.JPG=2]="JPG"}(jL||(jL={}));class R1e{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class O0{constructor(e,t,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e+4294967296*t}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let n=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}let az=new Uint8Array([0]),us=[171,75,84,88,32,50,48,187,13,10,26,10];function oz(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Buffer.from(r)}function lz(r){return typeof TextDecoder<"u"?new TextDecoder().decode(r):Buffer.from(r).toString("utf8")}function N0(r){let e=0;for(let i of r)e+=i.byteLength;let t=new Uint8Array(e),n=0;for(let i of r)t.set(new Uint8Array(i),n),n+=i.byteLength;return t}function I1e(r){let e=new Uint8Array(r.buffer,r.byteOffset,us.length);if(e[0]!==us[0]||e[1]!==us[1]||e[2]!==us[2]||e[3]!==us[3]||e[4]!==us[4]||e[5]!==us[5]||e[6]!==us[6]||e[7]!==us[7]||e[8]!==us[8]||e[9]!==us[9]||e[10]!==us[10]||e[11]!==us[11])throw Error("Missing KTX 2.0 identifier.");let t=new R1e,n=17*Uint32Array.BYTES_PER_ELEMENT,i=new O0(r,us.length,n,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();let s=i._nextUint32();t.supercompressionScheme=i._nextUint32();let a=i._nextUint32(),o=i._nextUint32(),l=i._nextUint32(),c=i._nextUint32(),u=i._nextUint64(),f=i._nextUint64(),d=new O0(r,us.length+n,24*s,!0);for(let L=0;L<s;L++)t.levels.push({levelData:new Uint8Array(r.buffer,r.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});let p=new O0(r,a,o,!0),v={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(v.descriptorBlockSize/4-6)/4;for(let L=0;L<m;L++){let Q={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Q.channelType?(Q.sampleLower=p._nextInt32(),Q.sampleUpper=p._nextInt32()):(Q.sampleLower=p._nextUint32(),Q.sampleUpper=p._nextUint32()),v.samples[L]=Q}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(v);let g=new O0(r,l,c,!0);for(;g._offset<c;){let L=g._nextUint32(),Q=g._scan(L),G=lz(Q);if(t.keyValue[G]=g._nextUint8Array(L-Q.byteLength-1),G.match(/^ktx/i)){let W=lz(t.keyValue[G]);t.keyValue[G]=W.substring(0,W.lastIndexOf("\0"))}let Y=L%4?4-L%4:0;g._skip(Y)}if(f<=0)return t;let w=new O0(r,u,f,!0),b=w._nextUint16(),E=w._nextUint16(),B=w._nextUint32(),S=w._nextUint32(),M=w._nextUint32(),I=w._nextUint32(),k=[];for(let L=0;L<s;L++)k.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});let O=u+w._offset,C=O+B,P=C+S,D=new Uint8Array(r.buffer,r.byteOffset+O,B),F=new Uint8Array(r.buffer,r.byteOffset+C,S),_=new Uint8Array(r.buffer,r.byteOffset+P,M),R=new Uint8Array(r.buffer,r.byteOffset+(P+M),I);return t.globalData={endpointCount:b,selectorCount:E,imageDescs:k,endpointsData:D,selectorsData:F,tablesData:_,extendedData:R},t}function VL(){return(VL=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}let U1e={keepWriter:!1};function F1e(r,e={}){e=VL({},U1e,e);let t=new ArrayBuffer(0);if(r.globalData){let b=new ArrayBuffer(20+20*r.globalData.imageDescs.length),E=new DataView(b);E.setUint16(0,r.globalData.endpointCount,!0),E.setUint16(2,r.globalData.selectorCount,!0),E.setUint32(4,r.globalData.endpointsData.byteLength,!0),E.setUint32(8,r.globalData.selectorsData.byteLength,!0),E.setUint32(12,r.globalData.tablesData.byteLength,!0),E.setUint32(16,r.globalData.extendedData.byteLength,!0);for(let B=0;B<r.globalData.imageDescs.length;B++){let S=r.globalData.imageDescs[B];E.setUint32(20+20*B+0,S.imageFlags,!0),E.setUint32(20+20*B+4,S.rgbSliceByteOffset,!0),E.setUint32(20+20*B+8,S.rgbSliceByteLength,!0),E.setUint32(20+20*B+12,S.alphaSliceByteOffset,!0),E.setUint32(20+20*B+16,S.alphaSliceByteLength,!0)}t=N0([b,r.globalData.endpointsData,r.globalData.selectorsData,r.globalData.tablesData,r.globalData.extendedData])}let n=[],i=r.keyValue;for(let b in e.keepWriter||(i=VL({},r.keyValue,{KTXwriter:"KTX-Parse v0.6.0"})),i){let E=i[b],B=oz(b),S=typeof E=="string"?N0([oz(E),az]):E,M=B.byteLength+1+S.byteLength,I=M%4?4-M%4:0;n.push(N0([new Uint32Array([M]),B,az,S,new Uint8Array(I).fill(0)]))}let s=N0(n);if(r.dataFormatDescriptor.length!==1||r.dataFormatDescriptor[0].descriptorType!==0)throw Error("Only BASICFORMAT Data Format Descriptor output supported.");let a=r.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*a.samples.length),l=new DataView(o),c=24+16*a.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,a.vendorId,!0),l.setUint16(6,a.descriptorType,!0),l.setUint16(8,a.versionNumber,!0),l.setUint16(10,c,!0),l.setUint8(12,a.colorModel),l.setUint8(13,a.colorPrimaries),l.setUint8(14,a.transferFunction),l.setUint8(15,a.flags),!Array.isArray(a.texelBlockDimension))throw Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,a.texelBlockDimension[0]),l.setUint8(17,a.texelBlockDimension[1]),l.setUint8(18,a.texelBlockDimension[2]),l.setUint8(19,a.texelBlockDimension[3]);for(let b=0;b<8;b++)l.setUint8(20+b,a.bytesPlane[b]);for(let b=0;b<a.samples.length;b++){let E=a.samples[b],B=28+16*b;if(E.channelID)throw Error("channelID has been renamed to channelType.");l.setUint16(B+0,E.bitOffset,!0),l.setUint8(B+2,E.bitLength),l.setUint8(B+3,E.channelType),l.setUint8(B+4,E.samplePosition[0]),l.setUint8(B+5,E.samplePosition[1]),l.setUint8(B+6,E.samplePosition[2]),l.setUint8(B+7,E.samplePosition[3]),64&E.channelType?(l.setInt32(B+8,E.sampleLower,!0),l.setInt32(B+12,E.sampleUpper,!0)):(l.setUint32(B+8,E.sampleLower,!0),l.setUint32(B+12,E.sampleUpper,!0))}let u=us.length+68+24*r.levels.length,f=u+o.byteLength,d=t.byteLength>0?f+s.byteLength:0;d%8&&(d+=8-d%8);let p=[],v=new DataView(new ArrayBuffer(24*r.levels.length)),m=(d||f+s.byteLength)+t.byteLength;for(let b=0;b<r.levels.length;b++){let E=r.levels[b];p.push(E.levelData),v.setBigUint64(24*b+0,BigInt(m),!0),v.setBigUint64(24*b+8,BigInt(E.levelData.byteLength),!0),v.setBigUint64(24*b+16,BigInt(E.uncompressedByteLength),!0),m+=E.levelData.byteLength}let g=new ArrayBuffer(68),w=new DataView(g);return w.setUint32(0,r.vkFormat,!0),w.setUint32(4,r.typeSize,!0),w.setUint32(8,r.pixelWidth,!0),w.setUint32(12,r.pixelHeight,!0),w.setUint32(16,r.pixelDepth,!0),w.setUint32(20,r.layerCount,!0),w.setUint32(24,r.faceCount,!0),w.setUint32(28,r.levels.length,!0),w.setUint32(32,r.supercompressionScheme,!0),w.setUint32(36,u,!0),w.setUint32(40,o.byteLength,!0),w.setUint32(44,f,!0),w.setUint32(48,s.byteLength,!0),w.setBigUint64(52,BigInt(t.byteLength>0?d:0),!0),w.setBigUint64(60,BigInt(t.byteLength),!0),new Uint8Array(N0([new Uint8Array(us).buffer,g,v.buffer,o,s,new ArrayBuffer(d>0?d-(f+s.byteLength):0),t,...p]))}var GL,jL,L1e={enableDebug:!1,isUASTC:!0,isKTX2File:!0,isInputSRGB:!0,generateMipmap:!0,needSupercompression:!0,isSetKTX2SRGBTransferFunc:!0},WL=new OffscreenCanvas(128,128),cz=WL.getContext("2d",{willReadFrequently:!0}),qX=typeof document>"u";function D1e(r){return createImageBitmap(r).then(function(e){return WL.width=e.width,WL.height=e.height,cz.drawImage(e,0,0),cz.getImageData(0,0,e.width,e.height)})}function O1e(r,e){return e===void 0&&(e={}),P1e().then(function(t){var n=new t.BasisEncoder;return N1e(e,n),n.setTexType(GL.cBASISTexType2D),T1e(r,ArrayBuffer)&&(r=new Blob([r])),D1e(r).then(function(i){n.setSliceSourceImage(0,new Uint8Array(i.data),i.width,i.height,jL.RAW);var s=new Uint8Array(10485760),a=n.encode(s);if(a===0)throw"encode failed";var o=new Uint8Array(s.buffer,0,a),l=I1e(s);if(e.kvData){for(var c in e.kvData)l.keyValue[c]=e.kvData[c];o=F1e(l,{keepWriter:!0})}return o})})}function N1e(r,e){r===void 0&&(r={}),(r=C1e({},L1e,r)).enableDebug!==void 0&&e.setDebug(r.enableDebug),r.isUASTC!==void 0&&e.setUASTC(r.isUASTC),r.isKTX2File!==void 0&&e.setCreateKTX2File(r.isKTX2File),r.isSetKTX2SRGBTransferFunc!==void 0&&e.setKTX2SRGBTransferFunc(r.isSetKTX2SRGBTransferFunc),r.generateMipmap!==void 0&&e.setMipGen(r.generateMipmap),r.isYFlip!==void 0&&e.setYFlip(r.isYFlip),r.qualityLevel!==void 0&&e.setQualityLevel(r.qualityLevel),r.compressionLevel!==void 0&&e.setCompressionLevel(r.compressionLevel),r.needSupercompression!==void 0&&e.setKTX2UASTCSupercompression(r.needSupercompression),r.isNormalMap!==void 0&&e.setNormalMap(r.isNormalMap)}var $T=null;function P1e(){return $T||($T=new Promise(function(r,e){qX?(importScripts("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js"),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()}).then(function(t){BASIS({wasmBinary:t}).then(function(n){n.initializeBasis(),r(n)}).catch(e)}).catch(e)):Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js").then(function(t){return t.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()})]).then(function(t){var n=t[0],i=t[1],s=document.createElement("script");s.onload=function(){BASIS({wasmBinary:i}).then(function(a){a.initializeBasis(),r(a)}).catch(e)},s.src=URL.createObjectURL(new Blob([n])),s.onerror=e,document.body.appendChild(s)}).catch(e)})),$T}qX&&self.addEventListener("message",function(r){O1e(r.data).then(function(e){self.postMessage(e)}).catch(function(e){self.postMessage({error:e})})});class k1e{constructor(e,t){if(this.gl=e,this.libktx=null,e!==void 0)if(t===void 0&&LIBKTX!==void 0&&(t=LIBKTX),t!==void 0)this.initializied=this.init(e,t);else{console.error("Failed to initalize KTXDecoder: ktx library undefined");return}else{console.error("Failed to initalize KTXDecoder: WebGL context undefined");return}}async init(e,t){this.libktx=await t({preinitializedWebGLContext:e}),this.libktx.GL.makeContextCurrent(this.libktx.GL.createContext(e.canvas,{majorVersion:2}))}stringToUastcFlags(e){return e==="FASTER"?this.libktx.UastcFlags.LEVEL_FASTER.value:e==="FASTEST"?this.libktx.UastcFlags.LEVEL_FASTEST.value:e==="SLOWER"?this.libktx.UastcFlags.LEVEL_SLOWER.value:e==="SLOWEST"?this.libktx.UastcFlags.LEVEL_VERYSLOW.value:this.libktx.UastcFlags.LEVEL_DEFAULT.value}stringToSupercmpScheme(e){return e==="Zstd"?this.libktx.SupercmpScheme.ZSTD:e==="Zlib"?this.libktx.SupercmpScheme.ZLIB:e==="BasisLZ"?this.libktx.SupercmpScheme.BASIS_LZ:this.libktx.SupercmpScheme.NONE}transcodeRGBA(e){if(!e.needsTranscoding)return;const t=this.libktx.TranscodeTarget.RGBA8888;e.transcodeBasis(t,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}transcode(e){if(e.gpuFormat="RGBA8888",e.needsTranscoding){let t,n=!1,i=!1,s=!1,a=!1,o=!1;n=!!this.gl.getExtension("WEBGL_compressed_texture_astc"),i=!!this.gl.getExtension("WEBGL_compressed_texture_etc1"),s=!!this.gl.getExtension("WEBGL_compressed_texture_s3tc"),a=!!this.gl.getExtension("EXT_texture_compression_bptc"),o=!!this.gl.getExtension("WEBGL_compressed_texture_pvrtc")||!!this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),n?(t=this.libktx.TranscodeTarget.ASTC_4x4_RGBA,e.gpuFormat="ASTC_4x4_RGBA"):a?(t=this.libktx.TranscodeTarget.BC7_RGBA,e.gpuFormat="BC7_RGBA"):s?(t=this.libktx.TranscodeTarget.BC1_OR_3,e.gpuFormat="BC1_OR_3"):o?(t=this.libktx.TranscodeTarget.PVRTC1_4_RGBA,e.gpuFormat="PVRTC1_4_RGBA"):i?(t=this.libktx.TranscodeTarget.ETC,e.gpuFormat="ETC"):(t=this.libktx.TranscodeTarget.RGBA8888,e.gpuFormat="RGBA8888"),e.transcodeBasis(t,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}}async loadKtxFromUri(e){await this.initializied;const t=await fetch(e),n=new Uint8Array(await t.arrayBuffer()),i=new this.libktx.ktxTexture(n);this.transcode(i);let s=i.glUpload();if(s.texture==null){console.error("Could not load KTX data");return}return s.texture.levels=Math.log2(i.baseWidth),s.texture.width=i.baseWidth,s.texture.height=i.baseHeight,s.texture.gpuSize=i.dataSize,s.texture.gpuFormat=i.gpuFormat,s.texture.isSRGB=i.isSRGB,s.texture}async loadKtxFromBuffer(e){await this.initializied;const t=new this.libktx.ktxTexture(e);this.transcode(t);const n=t.glUpload();if(n.texture==null){console.error("Could not load KTX data");return}return n.texture.levels=Math.log2(t.baseWidth),n.texture.width=t.baseWidth,n.texture.height=t.baseHeight,n.texture.gpuSize=t.dataSize,n.texture.gpuFormat=t.gpuFormat,n.texture.isSRGB=t.isSRGB,n.texture}async compress(e,t,n,i,s={}){const a=new this.libktx.ktxTexture(e,t,n,i,s.srgb);if(!s.hasOwnProperty("basisu_options")){const c=new this.libktx.ktxBasisParams;c.uastc=!1,c.noSSE=!0,c.verbose=!1,c.qualityLevel=100,c.compressionLevel=2,s.basisu_options=c}s.hasOwnProperty("compression_level")||(s.compression_level=18),s.hasOwnProperty("supercmp_scheme")||(s.supercmp_scheme=this.libktx.SupercmpScheme.NONE),console.log(s);const o=a.compressBasisU(s.basisu_options,s.supercmp_scheme,s.compression_level);return Uint8ClampedArray.from(o)}}class H1e{constructor(){this.ktxEncoder=null,this.libktx=null,this.init()}async init(){const t=document.createElement("canvas").getContext("webgl"),n=new k1e(t,window.LIBKTX);await n.init(t,window.LIBKTX),this.ktxEncoder=n,this.libktx=n.libktx}async compress(e,t,n,i,s={}){const a=await new this.libktx.ktxBasisParams,o=s;return a.uastc=o.uastc!==void 0?o.uastc:!1,a.noSSE=o.noSSE!==void 0?o.noSSE:!1,a.verbose=o.verbose!==void 0?o.verbose:!1,a.normalMap=o.normalMap!==void 0?o.normalMap:!1,a.compressionLevel=o.compressionLevel!==void 0?o.compressionLevel:1,a.qualityLevel=o.qualityLevel!==void 0?o.qualityLevel:60,a.maxEndpoints=o.ETC1SmaxEndpoints!==void 0?o.ETC1SmaxEndpoints:0,a.endpointRDOThreshold=o.ETC1SEndpointRdoThreshold!==void 0?o.ETC1SEndpointRdoThreshold:1.25,a.maxSelectors=o.ETC1SMaxSelectors!==void 0?o.ETC1SMaxSelectors:0,a.selectorRDOThreshold=o.ETC1SSelectorRdoThreshold!==void 0?o.ETC1SSelectorRdoThreshold:1.25,a.noEndpointRDO=o.ETC1SNoEndpointRdo!==void 0?o.ETC1SNoEndpointRdo:!1,a.noSelectorRDO=o.ETC1SNoSelectorRdo!==void 0?o.ETC1SNoSelectorRdo:!1,a.uastcFlags=this.ktxEncoder.stringToUastcFlags(o.uastcFlags),a.uastcRDO=a.uastcRDO!==void 0?a.uastcRDO:!1,a.uastcRDOQualityScalar=o.uastcRDOQualityScalar!==void 0?o.uastcRDOQualityScalar:1,a.uastcRDODictSize=o.uastcRDODictSize!==void 0?o.uastcRDOQualityScalar:4096,a.uastcRDOMaxSmoothBlockErrorScale=o.uastcRDOMaxSmoothBlockErrorScale!==void 0?o.uastcRDOMaxSmoothBlockErrorScale:10,a.uastcRDOMaxSmoothBlockStdDev=o.uastcRDOMaxSmoothBlockStdDev!==void 0?o.uastcRDOMaxSmoothBlockStdDev:18,a.uastcRDODontFavorSimplerModes=o.uastcRDODontFavorSimplerModes!==void 0?o.uastcRDODontFavorSimplerModes:!1,s.basisu_options=a,s.hasOwnProperty("supercmp_scheme")?s.supercmp_scheme=this.ktxEncoder.stringToSupercmpScheme(s.supercmp_scheme):s.supercmp_scheme=this.libktx.SupercmpScheme.NONE,await this.ktxEncoder.compress(e,t,n,i,s)}}var Xr;(function(r){r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.BYTE=5120]="BYTE",r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.SHORT=5122]="SHORT",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.FLOAT=5126]="FLOAT",r[r.LINEAR=9729]="LINEAR",r[r.REPEAT=10497]="REPEAT"})(Xr||(Xr={}));const KL="blend_",uz="vrmColliderSphere";function Q1e(r){return{title:r.name,version:"v0",author:r.authors?.length>0?r.authors.join(", "):"",reference:r.references!=null?r.references.join(", "):"",contactInformation:r.contactInformation!=null?r.contactInformation:"",otherPermissionUrl:r.otherPermissionUrl,allowedUserName:r.avatarPermission!=null?r.avatarPermission:"",violentUssageName:r.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:r.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:r.commercialUsage=="personalProfit"||r.commercialUsage=="corporation"?"Allow":"Disallow",licenseName:r.copyrightInformation,otherLicenseUrl:r.otherLicenseUrl,metaVersion:"0"}}function z1e(r){const e=[];for(const t in r.humanBones)e.push({bone:t,node:r.humanBones[t].node});return{humanBones:e}}function V1e(r){switch(r){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return r}}function G1e(r){if(r.includes("Thumb")){if(r.includes("Metacarpal"))return r.replace("Metacarpal","Proximal");if(r.includes("Proximal"))return r.replace("Proximal","Intermediate")}return r}class j1e{async parse(e,t,n,i,s,a,o){const l=Q1e(e.meta),c=z1e(e.humanoid),u=e.materials,f=[],d={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(c)if(l){if(!u)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const p=u.filter((ee,pe,xe)=>xe.findIndex(be=>be.name===ee.name.replace(" (Outline)",""))===pe).map(ee=>ee),v=p.map(ee=>ee.name),m=n?{name:"icon",imageBitmap:n.image}:null,g=p.filter(ee=>ee.map).map(ee=>{if(!ee.map)throw new Error(ee.name+" map is null");return{name:ee.name,imageBitmap:ee.map.image}}),w=p.filter(ee=>ee.userData.shadeTexture).map(ee=>{if(!ee.userData.shadeTexture)throw new Error(ee.userData.shadeTexture+" map is null");return{name:ee.name+"_shade",imageBitmap:ee.userData.shadeTexture.image}}),b=p.filter(ee=>ee.roughnessMap).map(ee=>ee.roughnessMap?{name:ee.name+"_orm",imageBitmap:ee.roughnessMap.image}:null),E=p.filter(ee=>ee.roughnessMap).map(ee=>ee.normalMap?{name:ee.name+"_normal",imageBitmap:ee.normalMap.image}:null),B=[...g,...w,...b,...E].filter(ee=>ee!==null),S=Z1e(B,m,s?"image/ktx2":"image/png"),M=J1e(S),I=$1e(S,s),k=X1e(p,B),O=t.children.filter(ee=>ee.children.length>0&&ee.children[0].type===Zs.Bone)[0],C=YX(O).filter(ee=>ee.name!==uz),P=C.map(ee=>ee.name),D=C.map(ee=>{const pe=ee.children.filter(xe=>xe.name!==uz).map(xe=>P.indexOf(xe.name));return{name:ee.name,rotation:[ee.quaternion.x,ee.quaternion.y,ee.quaternion.z,ee.quaternion.w],scale:[ee.scale.x,ee.scale.y,ee.scale.z],translation:[ee.position.x,ee.position.y,ee.position.z],children:pe.length>0?pe:void 0}}),F=[],_=t.children.filter(ee=>ee.type===Zs.Group||ee.type===Zs.SkinnedMesh),R=[];_.forEach((ee,pe)=>{const xe=ee.type===Zs.Group?ee.children[0]:ee,be=xe.geometry.attributes,De=new vA(be.position,Xr.FLOAT,rr.POSITION,Vl.VEC3,xe.name,void 0);R.push(De);const J=R.length-1,j=be.normal.array,X=new Float32Array(j.length);for(let Ee=0;Ee<j.length;Ee+=3){const We=j[Ee],et=j[Ee+1],Ze=j[Ee+2],dt=Math.sqrt(We*We+et*et+Ze*Ze);X[Ee]=We/dt,X[Ee+1]=et/dt,X[Ee+2]=Ze/dt}const re=new vA(new Lt(X,3),Xr.FLOAT,rr.NORMAL,Vl.VEC3,xe.name,void 0);R.push(re),R.push(new vA(be.uv,Xr.FLOAT,rr.UV,Vl.VEC2,xe.name,void 0)),R.push(new vA(be.skinWeight,Xr.FLOAT,rr.SKIN_WEIGHT,Vl.VEC4,xe.name,void 0)),R.push(new vA(be.skinIndex,Xr.UNSIGNED_SHORT,rr.SKIN_INDEX,Vl.VEC4,xe.name,void 0)),(ee.type===Zs.Group?ee.children.map(Ee=>Ee):[ee]).forEach(Ee=>{if(!Ee.geometry.index)throw new Error(Ee.name+" geometry.index is null");R.push(new vA(Ee.geometry.index,Xr.UNSIGNED_INT,rr.INDEX,Vl.SCALAR,xe.name,Ee.name))}),xe.morphTargetDictionary||(xe.morphTargetDictionary={},xe.morphTargetInfluences=[],xe.geometry.morphAttributes={},xe.updateMorphTargets()),xe.geometry.userData.targetNames=[];const Me=(Ee,We,et,Ze)=>{const dt=[],Se=[];for(let Je=0;Je<Ee.length;Je+=3){const Ve=Ee[Je],je=Ee[Je+1],Ye=Ee[Je+2];(Ve!==0||je!==0||Ye!==0)&&(dt.push(Je/3),Se.push(Ve,je,Ye))}if(dt.length>0){const Je=[...dt].sort((Ye,rt)=>Ye-rt),Ve=[];for(let Ye=0;Ye<Je.length;Ye++){const rt=Je[Ye],wt=dt.indexOf(rt);Ve.push(Se[wt*3],Se[wt*3+1],Se[wt*3+2])}const je={targetMeshDataIndex:J,count:Je.length,indices:new Uint32Array(Je),values:new Float32Array(Ve)};R.push(new vA(Ze,Xr.FLOAT,et,Vl.VEC3,xe.name,KL+We,je))}};for(const Ee in xe.morphTargetDictionary){xe.geometry.userData.targetNames.push(Ee);const We=xe.morphTargetDictionary[Ee],et=xe.geometry.morphAttributes;Me(et.position[We].array,Ee,rr.BLEND_POSITION,be.position),et.normal&&Me(et.normal[We].array,Ee,rr.BLEND_NORMAL,be.normal)}}),console.warn("taking only mesh 0 for morph targets now");for(const ee in e.expressionManager.expressionMap){const pe=e.expressionManager.expressionMap[ee],xe=pe._binds.map(be=>({mesh:0,index:be.index,weight:be.weight*100}));if(xe.length>0){let be=!1;for(const De in $i)if(ee===$i[De]&&ee!=="surprised"){f.push({name:ee,presetName:V1e(ee),binds:xe,isBinary:pe.isBinary}),be=!0;break}be===!1&&f.push({name:ee,presetName:"unknown",binds:xe,isBinary:pe.isBinary})}}_.forEach(ee=>{const pe=ee.type===Zs.Group?ee.children[0]:ee,xe=new Float32Array(pe.skeleton.boneInverses.map(be=>be.elements).flat());R.push(new vA(new Lt(xe,16),Xr.FLOAT,rr.BIND_MATRIX,Vl.MAT4,pe.name,pe.name))}),F.push(...R.map(ee=>({componentType:ee.valueType,count:ee.attribute.count,max:ee.max,min:ee.min,normalized:!1,type:ee.accessorsType})));const L=q1e(_,R,v);_.forEach((ee,pe)=>{D.push({mesh:pe,name:ee.name,rotation:[ee.quaternion.x,ee.quaternion.y,ee.quaternion.z,ee.quaternion.w],scale:[ee.scale.x,ee.scale.y,ee.scale.z],skin:pe,translation:[ee.position.x,ee.position.y,ee.position.z]})});const Q=Y1e(_,R,P),G={humanBones:[]};c.humanBones.forEach(ee=>{P.indexOf(ee.node.name)!=-1&&G.humanBones.push({bone:G1e(ee.bone),node:P.indexOf(ee.node.name),useDefaultValues:!0})});const Y={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},W={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},V=[];p.forEach(ee=>{ee.type=="ShaderMaterial"?V.push(Object.assign({},Y)):V.push(Object.assign({},W))});const T=l,H={};i.forEach(ee=>{for(let pe=0;pe<C.length;pe++){const xe=C[pe];if(H[ee.name]||(H[ee.name]=[]),xe.name===ee.bones.name){H[ee.name].push(pe);break}}});const K=[],N=_.find(ee=>ee.isSkinnedMesh)?.skeleton||null;for(let ee=0;ee<N.bones.length;ee++){const pe=N.bones[ee];if(pe.userData.VRMcolliders){const xe={node:P.indexOf(pe.name),colliders:[],name:pe.name};pe.userData.VRMcolliders.forEach(be=>{const De=be.sphere;xe.colliders.push({radius:De.radius*a,offset:{x:De.offset[0]*a,y:De.offset[1]*a,z:De.offset[2]*a}})}),K.push(xe)}}console.log("COLLIDER GROUPS",K);const te=ee=>{for(let pe=0;pe<C.length;pe++)if(C[pe].name===ee)return pe;return-1},oe=[];i.forEach(ee=>{const pe=ee.settings,xe={bones:[],center:-1,colliderGroups:[],dragForce:pe.dragForce,gravityDir:{x:pe.gravityDir.x,y:pe.gravityDir.y,z:pe.gravityDir.z},gravityPower:pe.gravityPower,hitRadius:pe.hitRadius,stiffiness:pe.stiffness};for(const De of ee.bones){const J=te(De.name);if(J===-1){console.warn("Spring bone "+De.name+" was removed during cleanup process. Skipping.");return}xe.bones.push(J)}const be=[];ee.colliderGroups.forEach(De=>{const J=De.colliders[0];if(J!=null){const j=J.parent,X=K.findIndex(re=>re.name===j.name);X!=-1?be.includes(X)||be.push(X):console.warn("No collider group for bone name: ",j.name+" was found")}else console.warn("No colliders definition were present in vrm file file for: ",ee.name+" spring bones")}),xe.colliderGroups.push(...be),xe.center=te(ee.center?.name),xe.center==-1&&console.debug("no center bone for spring bone "+ee.name),oe.push(xe)});const fe={boneGroups:oe,colliderGroups:K};console.log(fe),T.texture=m?S.length-1:void 0;const he=await Promise.all(B.map(async ee=>({buffer:s?await Az(ee.imageBitmap):fz(ee.imageBitmap),type:rr.IMAGE})));R.forEach((ee,pe)=>{ee.buffer?he.push({buffer:ee.buffer,typeString:"",type:ee.type}):ee.sparse&&(he.push({buffer:ee.sparse.indices,typeString:"indices",type:ee.type,count:ee.sparse.count}),he.push({buffer:ee.sparse.values,typeString:"values",type:ee.type})),he.length-1}),m&&he.push({buffer:s?await Az(m.imageBitmap):fz(m.imageBitmap),type:rr.IMAGE});let me=0,Te=0,Re=0,de=0;const Z=he.map(ee=>{const pe={buffer:0,byteLength:ee.buffer.byteLength,byteOffset:me,target:ee.type===rr.IMAGE||ee.type===rr.BIND_MATRIX||ee.typeString==="indices"||ee.typeString==="values"?void 0:ee.type===rr.INDEX?Xr.ELEMENT_ARRAY_BUFFER:Xr.ARRAY_BUFFER};return me+=ee.buffer.byteLength,ee.type===rr.IMAGE?(S[Te++].bufferView=de,de++):R[Re].sparse?(F[Re].sparse==null&&(F[Re].sparse={}),ee.typeString==="indices"&&(F[Re].sparse.count=ee.count,F[Re].sparse[ee.typeString]={bufferView:de,byteOffset:0,componentType:Xr.UNSIGNED_INT}),ee.typeString==="values"&&(F[Re].sparse[ee.typeString]={bufferView:de,byteOffset:0}),ee.typeString==="values"&&Re++,de++):(R[Re].bufferIndex=de,F[Re].bufferView=de,Re++,de++),pe}),ve=eEe(t,D);W1e(T);const ye=["KHR_materials_unlit","KHR_texture_transform","VRM"];s&&ye.push("KHR_texture_basisu");for(const ee of Q){const pe=F.filter(xe=>xe.type=="MAT4");for(let xe of pe)if(ee.joints.length!=xe.count)throw new Error(`The number of joints in the skin is not equal to the number of Accessors of type MAT4. Got ${ee.joints.length} when accessors show ${xe.count} This is usually because of a bone count mismatch in your VRMs!`)}const se={accessors:F,asset:d,buffers:[{byteLength:me}],bufferViews:Z,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:f},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new ae,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:V,humanoid:G,meta:T,secondaryAnimation:fe,specVersion:"0.0"}},extensionsUsed:ye,images:S,materials:k,meshes:L,nodes:D,samplers:M,scenes:ve,skins:Q,textures:I};console.log("output",se);const ce=new hz(YL(JSON.stringify(se,void 0,2)),"JSON"),_e=new hz(uv(he.map(ee=>ee.buffer)),"BIN\0"),ie=uv([ce.buffer,_e.buffer]),$=uv([YL("glTF"),qL(2,4),qL(ie.byteLength+12,4)]);o(uv([$,ie]))}}function W1e(r){r.title=r.title||"Character",r.version=r.version||"1",r.author=r.author||"Anon",r.contactInformation=r.contactInformation||"",r.reference=r.reference||"",r.allowedUserName=r.allowedUserName||"Everyone",r.violentUssageName=r.violentUssageName||"Disallow",r.sexualUssageName=r.sexualUssageName||"Disallow",r.commercialUssageName=r.commercialUssageName||"Disallow",r.otherPermissionUrl=r.otherPermissionUrl||"",r.licenseName=r.licenseName||"Redistribution_Prohibited",r.otherLicenseUrl=r.otherLicenseUrl||""}function YX(r){return r.children.length<=0?[r]:[r].concat(r.children.map(e=>YX(e)).flat())}const K1e=new H1e;async function Az(r){const e=await createImageBitmap(r),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0);const i=n.getImageData(0,0,t.width,t.height),s=new Uint8Array(i.data.buffer);return await K1e.compress(s,t.width,t.height,4,{normalMap:!1,uastc:!1,qualityLevel:50,compressionLevel:2,uastcFlags:"DEFAULT",compressionUASTC_Rdo_Level:18,uastcRDO:!1,uastcRDOQualityScalar:1,uastcRDODictSize:4096,uastcRDOMaxSmoothBlockErrorScale:10,uastcRDOMaxSmoothBlockStdDev:18,uastcRDODontFavorSimplerModes:!1,ETC1SQualityLevel:128,ETC1SmaxEndpoints:0,ETC1SEndpointRdoThreshold:1.25,ETC1SMaxSelectors:0,ETC1SSelectorRdoThreshold:1.25,ETC1SNoEndpointRdo:!1,ETC1SNoSelectorRdo:!1,supercmp_scheme:"Zstd"})}function fz(r){const e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d").drawImage(r,0,0);const t=e.toDataURL("image/png"),n=atob(t.split(",")[1]),i=(4-n.length%4)%4,s=new ArrayBuffer(n.length+i),a=new DataView(s);for(let o=0;o<n.length;o++)a.setUint8(o,n.charCodeAt(o));for(let o=n.length;o<n.length+i;o++)a.setUint8(o,0);return s}function qL(r,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,r,!0),t}function YL(r){return new TextEncoder().encode(r).buffer}function uv(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;++i)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t.buffer}function eR(r,e){const t=e===Xr.UNSIGNED_SHORT?2:4,n=r.array;let i=0;const s=new ArrayBuffer(r.count*r.itemSize*t),a=new DataView(s);for(let o=0;o<r.count;o++)for(let l=0;l<r.itemSize;l++){let c;r.itemSize>4?c=n[o*r.itemSize+l]:l===0?c=r.getX(o):l===1?c=r.getY(o):l===2?c=r.getZ(o):c=r.getW(o),e===Xr.UNSIGNED_SHORT?a.setUint16(i,c,!0):e===Xr.UNSIGNED_INT?a.setUint32(i,c,!0):a.setFloat32(i,c,!0),i+=t}return s}class hz{constructor(e,t){this.data=e,this.type=t;const n=this.padBuffer(this.data,t==="JSON"?32:0);this.buffer=uv([qL(n.byteLength,4),YL(this.type),n])}padBuffer(e,t){const n=Math.ceil(e.byteLength/4)*4;if(e.byteLength===n)return e;const i=new ArrayBuffer(n);return new Uint8Array(i).set(new Uint8Array(e)),new Uint8Array(i).fill(t,e.byteLength),i}}const dz=r=>{const e=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY];for(let n=0;n<r.length;n+=3)e[0]=Math.max(e[0],r[n]),e[1]=Math.max(e[1],r[n+1]),e[2]=Math.max(e[2],r[n+2]),t[0]=Math.min(t[0],r[n]),t[1]=Math.min(t[1],r[n+1]),t[2]=Math.min(t[2],r[n+2]);return{max:e,min:t}};class vA{constructor(e,t,n,i,s,a,o){if(this.attribute=e,this.type=n,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=a,o){const{indices:l,values:c,count:u,targetMeshDataIndex:f}=o,d=new Lt(l,1),p=new Lt(c,e.itemSize);if(this.targetMeshDataIndex=f,this.sparse={targetMeshDataIndex:f,count:u,indices:eR(d,Xr.UNSIGNED_INT),values:eR(p,Xr.FLOAT)},n===rr.POSITION||n===rr.BLEND_POSITION){const{min:v,max:m}=dz(c);this.max=m,this.min=v}}else if(this.buffer=eR(this.attribute,this.valueType),n===rr.POSITION||n===rr.BLEND_POSITION){const{min:l,max:c}=dz(this.attribute.array);this.max=c,this.min=l}}}var qp;(function(r){r.MeshBasicMaterial="MeshBasicMaterial",r.MeshStandardMaterial="MeshStandardMaterial",r.MToonMaterial="MToonMaterial"})(qp||(qp={}));var Vl;(function(r){r.SCALAR="SCALAR",r.VEC2="VEC2",r.VEC3="VEC3",r.VEC4="VEC4",r.MAT4="MAT4"})(Vl||(Vl={}));var rr;(function(r){r.POSITION="POSITION",r.NORMAL="NORMAL",r.UV="UV",r.INDEX="INDEX",r.SKIN_WEIGHT="SKIN_WEIGHT",r.SKIN_INDEX="SKIN_INDEX",r.BLEND_POSITION="BLEND_POSITION",r.BLEND_NORMAL="BLEND_NORMAL",r.BIND_MATRIX="BIND_MATRIX",r.IMAGE="IMAGE"})(rr||(rr={}));var Zs;(function(r){r.Group="Group",r.SkinnedMesh="SkinnedMesh",r.Object3D="Object3D",r.Bone="Bone"})(Zs||(Zs={}));const q1e=(r,e,t)=>r.map(n=>{const i=n.type===Zs.Group?n.children[0]:n,s=n.type===Zs.Group?n.children.map(a=>a):[n];return{name:n.name,primitives:s.map(a=>{const o=e.map(c=>c.meshName===i.name?c.type:null),l=Array.isArray(a.material)?a.material[0].name:a.material.name;return{attributes:{JOINTS_0:o.indexOf(rr.SKIN_INDEX),NORMAL:o.indexOf(rr.NORMAL),POSITION:o.indexOf(rr.POSITION),TEXCOORD_0:o.indexOf(rr.UV),WEIGHTS_0:o.indexOf(rr.SKIN_WEIGHT)},extras:{targetNames:a.geometry.userData.targetNames},indices:e.map(c=>c.type===rr.INDEX&&c.meshName===i.name?c.name:null).indexOf(a.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(c=>{const u=e.map(p=>p.type===rr.BLEND_NORMAL&&p.meshName===i.name?p.name:null).indexOf(KL+c),f=e.map(p=>p.type===rr.BLEND_POSITION&&p.meshName===i.name?p.name:null).indexOf(KL+c),d={};return f!==-1&&(d.POSITION=f),u!==-1&&(d.NORMAL=u),d}):void 0}})}}),Y1e=(r,e,t)=>r.map(n=>{const i=n.type===Zs.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===rr.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)).filter(s=>s!==-1),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),X1e=(r,e)=>r.map(t=>{let n,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(v=>v.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},n=t.color?[1,1,1,1]:void 0;else{const p=t;n=p.color?[p.color.r,p.color.g,p.color.b,1]:void 0}let s=-1;t.map?s=e.map(p=>p.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(p=>p.name).indexOf(t.uniforms.map.name));let a=-1;t.roughnessMap&&(a=e.map(p=>p.name).indexOf(t.name+"_orm"));let o=-1;t.normalMap&&(o=e.map(p=>p.name).indexOf(t.name+"_normal"));const l=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,c={baseColorFactor:n,baseColorTexture:l},u=a>=0?{index:a,texCoord:0}:void 0,f=o>=0?{index:o,texCoord:0}:void 0;if(u)c.metallicRoughnessTexture=u;else{const p=(()=>{switch(t.type){case qp.MeshStandardMaterial:return t.metalness;case qp.MeshBasicMaterial:return 0;default:return 0}})(),v=(()=>{switch(t.type){case qp.MeshStandardMaterial:return t.roughness;case qp.MeshBasicMaterial:return .9;default:return .9}})();c.metallicFactor=p,c.roughnessFactor=v}const d={alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{}}:void 0,name:t.name,pbrMetallicRoughness:c};return f&&(d.normalTexture=f),d}),Z1e=(r,e,t)=>(e?r.concat(e):r).filter(n=>n&&n.imageBitmap).map(n=>({bufferView:-1,mimeType:t,name:n.name})),J1e=r=>r.map(()=>({magFilter:Xr.LINEAR,minFilter:Xr.LINEAR,wrapS:Xr.REPEAT,wrapT:Xr.REPEAT})),$1e=(r,e)=>e?r.map((t,n)=>({sampler:0,extensions:{KHR_texture_basisu:{source:n}}})):r.map((t,n)=>({sampler:0,source:n})),eEe=(r,e)=>{const t=e.map(n=>n.name);return[{nodes:r.children.filter(n=>n.type===Zs.Object3D||n.type===Zs.SkinnedMesh||n.type===Zs.Group||n.type===Zs.Bone).map(n=>t.indexOf(n.name))}]};function tEe(r,e,t){const n=[],i=[];for(const o in r)r[o]?.vrm?.meta!=null&&(r[o].vrm.meta.authors!=null?i.push(r[o].vrm.meta):n.push(r[o].vrm.meta));n.length+i.length==1&&(n.length==1?n[0].title!=null&&(t=n[0].title):i[0].name!=null&&(t=i[0].name)),e!=null&&(e.authors!=null?i.push(e):n.push(e));const s=rEe(n),a=nEe(s,i);return a.licenseUrl="https://vrm.dev/licenses/1.0/",a.name=t,a}function nEe(r,e){let{authors:t=[],otherLicenseUrl:n=[],contactInformation:i=[],references:s=[],allowExcessivelyViolentUsage:a=void 0,allowExcessivelySexualUsage:o=void 0,commercialUsage:l=void 0,copyrightInformation:c="",avatarPermission:u=void 0,otherPermissionUrl:f=[]}=r,d,p,v,m="unnecessary",g,w=[];e.forEach(k=>{t=t.concat(Mt(k.authors)),n=n.concat(Mt(k.otherLicenseUrl)),i=i.concat(Mt(k.contactInformation)),s=s.concat(Mt(k.references)),f=f.concat(Mt(k.otherPermissionUrl)),k.allowExcessivelyViolentUsage===!1&&(a=!1),k.allowExcessivelySexualUsage===!1&&(o=!1),l=ou(aEe,l,k.commercialUsage),c=ou(XX,c,k.copyrightInformation),u=ou(oEe,u,k.avatarPermission),k.allowAntisocialOrHateUsage===!1&&(d=d=!1),k.allowPoliticalOrReligiousUsage===!1&&(p=p=!1),k.allowRedistribution===!1&&(v=v=!1),k.creditNotation==="required"&&(m="required"),w=w.concat(Mt(k.thirdPartyLicenses)),g=ou(sEe,g,k.modification)});const b=[...new Set(t)].filter(k=>k!=""&&k!=null&&k!="undefined"),E=[...new Set(n)].filter(k=>k!=""&&k!=null&&k!="undefined"),B=[...new Set(i)].filter(k=>k!=""&&k!=null&&k!="undefined"),S=[...new Set(s)].filter(k=>k!=""&&k!=null&&k!="undefined"),M=[...new Set(f)].filter(k=>k!=""&&k!=null&&k!="undefined"),I=[...new Set(w)].filter(k=>k!=""&&k!=null&&k!="undefined");return{authors:b,otherLicenseUrl:E.length==0?"":E.join(", "),contactInformation:B.length==0?"":B.join(", "),references:S,otherPermissionUrl:M.length==0?"":M.join(", "),thirdPartyLicenses:I.length==0?"":I.join(", "),allowExcessivelyViolentUsage:a,allowExcessivelySexualUsage:o,commercialUsage:l,copyrightInformation:c,avatarPermission:u,allowAntisocialOrHateUsage:d,allowPoliticalOrReligiousUsage:p,allowRedistribution:v,creditNotation:m,modification:g}}function rEe(r){let e=[],t=[],n=[],i=[],s=[],a,o,l,c,u;r.forEach(g=>{e=e.concat(Mt(g.author)),t=t.concat(Mt(g.contactInformation)),n=n.concat(Mt(g.reference)),i=i.concat(Mt(g.otherPermissionUrl)),s=s.concat(Mt(g.otherLicenseUrl)),a=ou(lEe,a,g.allowedUsername),o=ou(tR,o,g.violentUssageName),l=ou(tR,l,g.sexualUssageName),c=ou(tR,c,g.commercialUssageName),u=ou(XX,u,g.licenseName)});const f=[...new Set(e)].filter(g=>g!=""&&g!=null&&g!="undefined"),d=[...new Set(t)].filter(g=>g!=""&&g!=null&&g!="undefined"),p=[...new Set(n)].filter(g=>g!=""&&g!=null&&g!="undefined"),v=[...new Set(i)].filter(g=>g!=""&&g!=null&&g!="undefined"),m=[...new Set(s)].filter(g=>g!=""&&g!=null&&g!="undefined");return{authors:f,otherLicenseUrl:m,contactInformation:d,references:p,allowExcessivelyViolentUsage:o==="Allow",allowExcessivelySexualUsage:l==="Allow",commercialUsage:c==="Allow"?"personalProfit":"personalNonProfit",copyrightInformation:u,avatarPermission:iEe(a),otherPermissionUrl:v}}function iEe(r){if(r=="OnlyAuthor")return"onlyAuthor";if(r=="ExplicitlyLicensedPerson")return"onlySeparatelyLicensedPerson";if(r=="Everyone")return"everyone"}const sEe={prohibited:0,allowModification:1,allowModificationRedistribution:2},aEe={personalNonProfit:0,personalProfit:1,corporation:2},oEe={onlyAuthor:0,onlySeparatelyLicensedPerson:1,everyone:2},lEe={OnlyAuthor:0,ExplicitlyLicensedPerson:1,Everyone:2},tR={Disallow:0,Allow:1},XX={Redistribution_Prohibited:0,Other:1,CC_BY_NC_ND:2,CC_BY_ND:3,CC_BY_NC_SA:4,CC_BY_SA:5,CC_BY_NC:6,CC_BY:7,CC0:8};function ou(r,e,t){return e===void 0?t:t==null||!(t in r)||r[e]<r[t]?e:t}function ZX(r){const e=r.clone(),t=[];return r.traverse(n=>{n.userData.origIndexBuffer&&t.push(n.userData.origIndexBuffer)}),e.traverse(n=>{n.userData.origIndexBuffer&&(n.userData.origIndexBuffer=t.shift())}),e}function cEe(r){const e=ZX(r);let t;const n=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=NX(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,n.push(s),Array.isArray(s.material)){const a=s.material;s.material=new Rm,s.material.map=a[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new hs;return n.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}function uEe(r,e,t,n){return new Promise(async(i,s)=>{const a=`${t&&t!==""?t:"AvatarCreatorModel"}`;AEe(r,e,n).then(o=>{eZ(o,`${a}.vrm`),i()})})}async function AEe(r,e,t){const n=await JX(r,e,t);return yEe(n,e,t)}function JX(r,e,t){const n=ZX(r);t.mergeAppliedMorphs=!0;const{createTextureAtlas:i=!0}=t;return i?qbe(n,e,t):(console.log("no atlas"),jbe(n,e,t))}async function fEe(r,e="",t){const n=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=t,s=i?await JX(r,t):cEe(r);hEe(s).then(a=>{if(a instanceof ArrayBuffer)eZ(a,`${n}.glb`);else{const o=JSON.stringify(a,null,2);wEe(o,`${n}.gltf`)}})}function hEe(r){return new Promise(e=>new BO().parse(r,n=>{e(n)},n=>{console.error("Error parsing",n)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function dEe(r){const e=[];for(const n in r)if(r[n]?.vrm?.springBoneManager!=null){const i=r[n].vrm.springBoneManager.joints;for(const s of i)e.some(o=>o.name===s.bone.name)||e.push({name:s.bone.name,settings:s.settings,bone:s.bone,colliderGroups:s.colliderGroups,center:s.center})}const t=[];return e.forEach(n=>{if(e.find(s=>s.name==n.bone.parent?.name)==null){t.push({bones:[n],settings:n.settings,center:n.center,colliderGroups:n.colliderGroups,name:n.bone.name});return}}),e.map(n=>{const i=t.find(s=>s.bones.find(a=>a.name==n.bone.parent?.name)!=null);i?.bones.push({name:n.name,bone:n.bone})}),t}function pEe(r){const e=[];for(const n in r)if(r[n]?.vrm?.springBoneManager!=null){const i=r[n].vrm.springBoneManager.joints;for(const s of i)e.some(o=>o.name===s.bone.name)||e.push({name:s.bone.name,settings:s.settings,bone:s.bone,colliderGroups:s.colliderGroups,center:s.center})}const t=[];return e.forEach(n=>{for(const i in ay)if(n.bone.parent.name==ay[i]){t.push(n);break}}),t}function mEe(r){const e={};return r.skeleton.bones.map(t=>{for(const n in ay)if(ay[n]===t.name){e[t.name]={node:t};break}}),e}function gEe(r,e,t){const n=Um(r,"SkinnedMesh");return{humanBones:mEe(n[0]),materials:r.userData.atlasMaterial,meta:vEe(e),...t.mergeAppliedMorphs?{expressionManager:bEe(r)}:{}}}function vEe(r){return r=r||{},{...{authors:["CharacterStudio"],metaVersion:"1",version:"v1",name:"CharacterCreator",licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://m3org.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"},...r}}function yEe(r,e,t){const{screenshot:n=null,isVrm0:i=!1,vrmMeta:s=null,scale:a=1,vrmName:o="CharacterCreator"}=t,l=tEe(e,s,o);return new Promise(async c=>{const u=t.outputVRM0??t.isVrm0??!0,f=u?new j1e:new lxe,d={...xEe(e),...gEe(r,l,t)};let p;r.traverse(g=>{g.isSkinnedMesh&&(p=g)}),(()=>{for(let g=0;g<p.skeleton.bones.length;g++){const w=p.skeleton.bones[g];w.position.x*=-1,w.position.z*=-1}p.skeleton.bones.forEach(g=>{g.updateMatrix(),g.updateMatrixWorld()}),p.skeleton.calculateInverses(),p.skeleton.computeBoneTexture(),p.skeleton.update()})();const m=u?dEe(e):pEe(e);u?f.parse(d,r,n,m,t.ktxCompression,a,g=>{c(g)}):f.parse(d,r,n,g=>{c(g)})})}function $X(r,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(r),t.download=e,t.click()}function wEe(r,e){$X(new Blob([r],{type:"text/plain"}),e)}function eZ(r,e){$X(_Ee(r),e)}function _Ee(r){return new Blob([r],{type:"application/octet-stream"})}function xEe(r){for(const e in r)if(r[e].vrm)return r[e].vrm}function bEe(r){const e=new m1;let t=r.userData.expressionManagerToClone;if(!t){t=new m1;for(const n of Object.values($i)){const i=new p1(n);t.registerExpression(i)}}e.copy(t),r.userData.expressionManagerToClone=null;for(const n of r.children){if(!n.isMesh&&!n.isSkinnedMesh||!n.morphTargetDictionary)continue;const i=n.userData.bindMorphs;if(!i||!a1e(n,i.old))continue;const a=(c,u)=>c.find(f=>f.index==u)?.weight||0,o=Object.entries($i).flat(),l=Object.keys(i.old).filter(c=>o.includes(c));for(const c of Object.keys(t.expressionMap)){const u=t.expressionMap[c];if(!u)continue;const f=u._binds;if(!f||f.length==0){e.unregisterExpression(u);continue}for(const d of l){const p=i.new[d]||i.new[d.toLowerCase()],v=i.old[d]||i.old[d.toLowerCase()];if(p){const m=[];r.traverse(b=>{!b.isMesh&&!b.isSkinnedMesh||p.primitives.includes(b.id)&&m.push(b)}),e.unregisterExpression(u);const g=a(f,v.index),w=new p1(u.expressionName);w.copy(u),console.log("adding bind",u.expressionName),w.addBind(new Im({index:p.index,weight:g,primitives:m})),e.registerExpression(w)}else e.unregisterExpression(u)}}for(const c of e.expressions){const f=EEe(c)[0][0],d=c._binds;if(!i.new[f])continue;const p=i.new[f].index,v=[];d.map(g=>{let w=v.find(b=>b.index==p);w?.primitives.map(b=>b.id).includes(n.id)||(w?w.primitives.push(n):v.push({index:p,weight:g.weight,primitives:[n]}))});const m=v.map(g=>new Im(g));c.userData.processed?c._binds.push(...m):(c.userData.processed=!0,c._binds=m)}}return e}function EEe(r){const e=r._binds;return e?e.map(n=>{let i=[];return n.primitives.forEach(s=>{const a=Object.entries(s.morphTargetDictionary).find(([o,l])=>l==n.index);a&&i.push(a[0])}),i}):[]}function tZ(r,e){return e&&r?r.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):r||e}const SEe=r=>{const t=r.parser.json.meshes,n=r.parser.associations;r.scene.traverse(i=>{if(i instanceof yl&&i.morphTargetDictionary){let s=!1;const a=n.get(i);if(typeof a>"u")return;const o=a.meshes||0,l=a.primitives||0,u=t[o]?.primitives[l];if(u?.extras?.targetNames){const f=u.extras.targetNames;for(let d=0;d<f.length;d++)i.morphTargetDictionary[f[d]]=d,s=!0}if(s)for(const f in i.morphTargetDictionary)isNaN(parseInt(f))||delete i.morphTargetDictionary[f]}})},BEe=r=>{r.parser.json.extensions?.VRM?MEe(r):r.parser.json.extensions?.VRMC_vrm?CEe(r):console.warn("No valid vrm file was provided")},MEe=r=>{const e=r.parser.json,t=r.scene,n=e.nodes,i=e.extensions?.VRM?.secondaryAnimation?.colliderGroups,s=[],a=n.map(o=>nZ(o.name,s));i?.forEach(o=>{const l=a[o.node],c=GX(t,l);if(c!=null){const u=o.colliders;c.userData.VRMcolliders=u.map(f=>({sphere:{radius:f.radius,offset:[f.offset.x,f.offset.y,f.offset.z]}}))}c.userData.VRMcollidersID=zX()})},CEe=r=>{const e=r.parser.json,t=r.scene,n=e.nodes,i=e.extensions?.VRMC_springBone?.colliderGroups,s=e.extensions?.VRMC_springBone?.colliders,a=[],o=n.map(l=>nZ(l.name,a));i?.forEach(l=>{const c=Mt(l.colliders);let u=-1,f=null;c.forEach(d=>{if(u!=s[d].node){u=s[d].node;const p=o[u];f=GX(t,p),f.userData.VRMcolliders=[]}if(f!=null){const p=s[d].shape;for(const v in p){const m=p[v];m?.offset&&(m.offset[0]=-m.offset[0])}f.userData.VRMcollidersID=zX(),f.userData.VRMcolliders.push(p)}else console.error("no node with name "+o[u]+" was found")})})},TEe=r=>{const e=[];return r.scene.traverse(t=>{t.userData?.VRMcolliders&&t.userData.VRMcolliders.length>0&&e.push(t)}),e},nZ=(r,e)=>{const t=dn.sanitizeNodeName(r||"");return t in e?t+"_"+ ++e[t]:(e[t]=0,t)},E1=[0,400,560,2400,4800],S1=[0,500,700,3e3,6e3],XL=[],$c=[],jO=1024,rZ=44100;for(let r=0;r<E1.length;r++)$c[r]=Math.round(2*jO/rZ*E1[r]);for(let r=0;r<S1.length;r++)XL[r]=Math.round(2*jO/rZ*S1[r]);class B1{constructor(e){this.vrm=e;const t=(n,i)=>{requestAnimationFrame(t),this.update(n,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=B1.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=jO,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=B1.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){return this.meter?.shutdown(),this.meter=null,this.mediaStreamSource?.disconnect(),this.audioContext?.close().catch(()=>{})||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue($i.Oh,0),this.vrm.expressionManager.setValue($i.Ah,0),this.vrm.expressionManager.setValue($i.Ee,0);else{const{ah:n,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue($i.Oh,i),this.vrm.expressionManager.setValue($i.Ah,n),this.vrm.expressionManager.setValue($i.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(c){const f=new Float32Array(c.length);for(let d=0;d<c.length;d++)f[d]=.5+(c[d]+20)/140;return f}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const n=e(t),i=new Float32Array(E1.length),s=new Float32Array(S1.length);for(let c=0;c<E1.length-1;c++){for(let u=$c[c];u<=$c[c+1];u++)n[u]>0&&(i[c]+=n[u]);i[c]/=$c[c+1]-$c[c]}for(let c=0;c<S1.length-1;c++){for(let u=$c[c];u<=$c[c+1];u++)n[u]>0&&(s[c]+=n[u]);i[c]/=$c[c+1]-$c[c],s[c]=s[c]/(XL[c+1]-XL[c])}const a=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),o=3*Math.max(i[3],s[3]),l=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:a,ee:l,ah:o}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=n=>{const i=n.inputBuffer.getChannelData(0),s=i.length;let a=0,o;for(let c=0;c<s;c++)o=i[c],Math.abs(o)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),a+=o*o;const l=Math.sqrt(a/s);t.volume=Math.max(l,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const nR=new ae;class REe{constructor(e,t,n){this.bonesInfo=[],this.curMousePos=new pt,this.hotzoneSection=s(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=n,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",a=>{this.curMousePos={x:a.clientX,y:a.clientY}});const i=document.getElementById(t);i&&(i.addEventListener("mouseleave",()=>{this.onCanvas=!1}),i.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=s()});function s(){const a=window.innerWidth*e/100,o=(window.innerWidth-a)/2;return{xStart:o,xEnd:window.innerWidth-o,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){this.userActivated=e,e||this.bonesInfo.forEach(t=>{t.leftEyeBone&&t.leftEyeBone.rotation.set(0,0,0),t.rightEyeBone&&t.rightEyeBone.rotation.set(0,0,0)})}setCamera(e){this.camera=e}addVRM(e){const t=e.data.isVRM0||!1,n=e.humanoid.humanBones;t||(n.neck.node.userData.inverseLookAt=!0,n.spine.node.userData.inverseLookAt=!0,n.leftEye&&(n.leftEye.node.userData.inverseLookAt=!0),n.rightEye&&(n.rightEye.node.userData.inverseLookAt=!0));const i={vrm:e,neckBone:n.neck.node,spineBone:n.spine.node,leftEyeBone:n.leftEye?n.leftEye.node:null,rightEyeBone:n.rightEye?n.rightEye.node:null};this.bonesInfo.push(i)}removeVRM(e){const t=this.bonesInfo.find(n=>n.vrm===e);if(t){const n=this.bonesInfo.indexOf(t);this.bonesInfo.splice(n,1)}}_getMouseDegrees(e,t,n){let i=0,s=0,a,o,l,c,u={x:window.innerWidth,y:window.innerHeight};return e<=u.x/2&&(a=u.x/2-e,o=a/(u.x/2)*100,i=n.maxx*o/100*-1),e>=u.x/2&&(a=e-u.x/2,o=a/(u.x/2)*100,i=n.minx*o/100),t<=u.y/2&&(l=u.y/2-t,c=l/(u.y/2)*100,s=n.maxy*.5*c/100*-1),t>=u.y/2&&(l=t-u.y/2,c=l/(u.y/2)*100,s=n.miny*c/100),{x:i,y:s}}lerp(e,t,n){return(1-n)*e+n*t}_moveJoint(e,t){if(!e)return;const n=e.userData?.inverseLookAt===!0?1:-1;if(Object.keys(e).length!==0){const i=(this.camera.position.y-1.8)*window.innerHeight/2;let s=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-i,t);const a=.8;e.rotation.y=this.lerp(sn.degToRad(s.x),e.rotation.y,a),e.rotation.x=this.lerp(sn.degToRad(s.y*n),e.rotation.x,a)}}update(){nR.set(0,0,1),nR.applyQuaternion(this.camera.quaternion);const e=nR.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&this.bonesInfo.forEach(t=>{t.neckBone&&this._moveJoint(t.neckBone,this.maxLookPercent.neck),t.spineBone&&this._moveJoint(t.spineBone,this.maxLookPercent.spine),t.leftEyeBone&&this._moveJoint(t.leftEyeBone,this.maxLookPercent.left),t.rightEyeBone&&this._moveJoint(t.rightEyeBone,this.maxLookPercent.right)})}}class IEe{targetVRMMeshes=[];baseTexture=null;textures=[];applied=new Map;imageDataRenderer;constructor(e){this.characterManager=e,this.imageDataRenderer=new jE(512,512)}get scene(){return this.characterManager.parentModel}get manifest(){return this.characterManager.manifestData}get targetMaterial(){if(!this.targetVRMMeshes.length)throw new Error("No target meshes found, call setTargetVRM");let e=this.targetVRMMeshes.map(n=>Mt(n.material)).flat(),t=e[0];if(t.map)return t;for(let n=1;n<e.length;n++)if(e[n].map){t=e[n];break}else continue;return t}setTargetVRM(e,t){this.targetVRMMeshes=[],e.scene.traverse(n=>{n instanceof yl&&(t&&t.length?t.includes(n.name)&&this.targetVRMMeshes.push(n):this.targetVRMMeshes.push(n))})}async update(){const e=this.targetMaterial,t=e.map.image,n=t.width,i=t.height;this.imageDataRenderer.clearRenderer(),this.imageDataRenderer.width=n,this.imageDataRenderer.height=i;const s=this.imageDataRenderer.render(this.textures,e.color||new st(1,1,1),new st(1,1,1),!0,!0);s||console.error("Failed to update OverlayTextureManager, ImageData is undefined");const a=VO({width:n,height:i,transparent:!0}),o=await createImageBitmap(s);a.drawImage(o,0,0);const l=new Cr(a.canvas);l.colorSpace=Sn,l.flipY=!1,l.needsUpdate=!0,this.targetMaterial.map=l}async loadOverlayTexture(e,t){const n=new cf,i=e.getAllDecals().find(l=>l.id===t);if(!i)throw new Error("Decal "+t+" not found in trait group");if(this.targetVRMMeshes.length===0)throw new Error("No target meshes found");const s=i.directory;if(!s)throw new Error("Decal not found in trait group");const a=tZ(this.manifest.getTraitsDirectory(),s),o=await n.loadAsync(a);return o.colorSpace=Sn,o.flipY=!1,this.textures.length||this.textures.push(this.targetMaterial.map.clone()),this.textures.push(o),this.applied.set(t,o),this.update()}removeOverlayTexture(e){if(this.applied.has(e)){const t=this.applied.get(e);if(!t)return this.applied.delete(e),Promise.resolve();this.textures.splice(this.textures.indexOf(t),1),this.applied.delete(e)}return this.update()}removeAllOverlayedTextures(){this.textures=[this.textures[0]],this.applied.clear(),this.update()}}class UEe{traitRestrictions;restrictionMaps={};itemRestrictions=new Map;manifestData;constructor(e){this.manifestData=e,this.traitRestrictions=e.traitRestrictions||{},this._validateTraitRestrictions()}_init(){this._setupSpecificItemRestrictions(),this.logRules()}logRules=()=>{const e=[];for(const t in this.restrictionMaps){const n=this.restrictionMaps[t];n.restrictedTraits.size&&console.log(`Trait: ${n.group.trait} is restrciting ${Array.from(n.restrictedTraits.values()).join(", ")}`),n.restrictedTypes.size&&console.log(`Trait: ${n.group.trait} also restricts types ${Array.from(n.restrictedTypes.values()).join(", ")}`),n.restrictedBlendshapes.size&&console.log(`Trait: ${n.group.trait} has blendshape restrictions on trait ${Array.from(n.restrictedBlendshapes.values()).join(", ")}`)}this.itemRestrictions.forEach((t,n)=>{e.push(`Item ${n} is restricting item ${Array.from(t.values()).join(", ")}`)}),console.log(e.join(`
`))};_setupSpecificItemRestrictions=()=>{const e=this.manifestData.getAllTraitOptions();e.forEach(t=>{this.itemRestrictions.set(t.id,new Set)});for(const t of e){if(!t._restrictedItems||t._restrictedItems.length==0)continue;const n=new Set;for(const i of t._restrictedItems){if(!e.find(a=>a.id==i)){console.warn(`[${t.traitGroup.trait}] Restricted item ${i} not found`);continue}n.add(i)}if(this.itemRestrictions.set(t.id,n),n.size>0)for(const i of n){const s=this.itemRestrictions.get(i);s&&(s.has(t.id)||s.add(t.id))}}this.itemRestrictions.forEach((t,n)=>{t.size==0&&this.itemRestrictions.delete(n)})};createTraitRestriction=e=>{if(this.restrictionMaps[e.trait])return this.restrictionMaps[e.trait];const t=new FEe(this,e);return e.restrictions=t,this.restrictionMaps[e.trait]=t,t};getForbiddenTraits=e=>{const t=new Set;for(const n in this.restrictionMaps){if(!e.includes(n))continue;const i=this.restrictionMaps[n];for(const s of i.restrictedTraits)t.add(s)}return Array.from(t.values())};getForbiddenTypes=e=>{const t=new Set;for(const n in this.restrictionMaps){if(!e.includes(n))continue;const i=this.restrictionMaps[n];for(const s of i.restrictedTraits)t.add(s)}return Array.from(t.values())};_validateTraitRestrictions=()=>{const e={};if(this.traitRestrictions)for(const t in this.traitRestrictions)e[t]==null&&(e[t]={restrictedTraits:[],restrictedTypes:[],restrictedBlendshapes:[]}),e[t].restrictedTraits=Mt(this.traitRestrictions[t].restrictedTraits).map(n=>this.manifestData.requiredTraits.includes(n)?null:(console.warn("A required trait cannot be a restricted trait. This is because trait A can remove required trait B when A is selected."),n)).filter(n=>!!n),e[t].restrictedTypes=Mt(this.traitRestrictions[t].restrictedTypes).filter(n=>!!n),e[t].restrictedBlendshapes=Mt(this.traitRestrictions[t].restrictedBlendshapes).filter(n=>!!n);this.traitRestrictions=e}}class FEe{group;restrictedTraits;restrictedTypes;restrictedBlendshapes;constructor(e,t){this.manifestRestrictions=e,this.group=t,this.restrictedTraits=new Set(this.manifestRestrictions.traitRestrictions[t.trait]?.restrictedTraits||[]),this.restrictedTypes=new Set(this.manifestRestrictions.traitRestrictions[t.trait]?.restrictedTypes||[]),this.restrictedBlendshapes=new Set(this.manifestRestrictions.traitRestrictions[t.trait]?.restrictedBlendshapes||[]);for(const n in this.manifestRestrictions.traitRestrictions){if(n==t.trait)continue;const i=this.manifestRestrictions.traitRestrictions[n];for(const s of this.restrictedTraits){const a=this.manifestRestrictions.restrictionMaps[s];a&&(a.restrictedTraits.has(t.trait)||a.restrictedTraits.add(n))}i.restrictedTraits.includes(t.trait)&&!this.restrictedTraits.has(n)&&this.restrictedTraits.add(n)}}get manifestData(){return this.manifestRestrictions.manifestData}get traitId(){return this.group.trait}isTraitAllowed=e=>!this.restrictedTraits.has(e);isTypeAllowed=e=>!this.restrictedTypes.has(e);isReverseTraitAllowed=e=>{const t=this.manifestRestrictions.restrictionMaps[e];if(t){const n=t.isTraitAllowed(this.traitId);return{allowed:n,blockingTrait:n?void 0:this.traitId}}return{allowed:!0,blockingTrait:void 0}};isReverseTypeAllowed=(e,t)=>{if(!e)return{allowed:!0};const n=this.manifestRestrictions.restrictionMaps[t];if(n){const i=n.isTypeAllowed(e);return{allowed:i,blockingType:i?void 0:this.traitId}}return{allowed:!0}};isItemAllowed=(e,t)=>{if(!e)return!0;const n=this.manifestRestrictions.itemRestrictions.get(e);return n?!n.has(t):!0};isReverseItemAllowed=(e,t)=>{if(!e)return{allowed:!0,blockingItemId:void 0};const n=this.manifestRestrictions.itemRestrictions.get(t);if(n){const i=!n.has(e);return{allowed:i,blockingItemId:i?void 0:e}}return{allowed:!0,blockingItemId:void 0}};isReverseAllowed=(e,t,n,i)=>{const s=this.isReverseTraitAllowed(t),a=this.isReverseTypeAllowed(e,t),o=this.isReverseItemAllowed(n,i);return{allowed:s.allowed&&a.allowed&&o.allowed,blocking:{blockingTrait:s.blockingTrait,blockingType:a.blockingType,blockingItemId:o.blockingItemId}}};isBlendshapeOfTraitAllowed=e=>!this.restrictedBlendshapes.has(e);isReverseBlendshapeTraitAllowed=e=>{const t=this.manifestRestrictions.restrictionMaps[e];if(t){const n=t.isBlendshapeOfTraitAllowed(this.traitId);return{allowed:n,blockingTrait:n?void 0:this.traitId}}return{allowed:!0,blockingTrait:void 0}}}const Uy="abi/5.8.0",On=new Ke(Uy),vh={};let pz={calldata:!0,memory:!0,storage:!0},LEe={calldata:!0,memory:!0};function Mx(r,e){if(r==="bytes"||r==="string"){if(pz[e])return!0}else if(r==="address"){if(e==="payable")return!0}else if((r.indexOf("[")>=0||r==="tuple")&&LEe[e])return!0;return(pz[e]||e==="payable")&&On.throwArgumentError("invalid modifier","name",e),!1}function DEe(r,e){let t=r;function n(o){On.throwArgumentError(`unexpected character at position ${o}`,"param",r)}r=r.replace(/\s/g," ");function i(o){let l={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<r.length;o++){let l=r[o];switch(l){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=pp(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Mx(a.type,a.name)&&(a.name=""),a.type=pp(a.type);let c=a;a=a.parent,a||n(o),delete c.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Mx(a.type,a.name)&&(a.name=""),a.type=pp(a.type);let u=i(a.parent);a.parent.components.push(u),delete a.parent,a=u;break;case" ":a.state.allowType&&a.type!==""&&(a.type=pp(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):Mx(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=l,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=l,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=l,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=l,delete a.state.allowArray):a.state.readArray?a.type+=l:n(o)}}return a.parent&&On.throwArgumentError("unexpected eof","param",r),delete s.state,a.name==="indexed"?(e||n(t.length-7),a.indexed&&n(t.length-7),a.indexed=!0,a.name=""):Mx(a.type,a.name)&&(a.name=""),s.type=pp(s.type),s}function Cb(r,e){for(let t in e)it(r,t,e[t])}const Yn=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),OEe=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ji{constructor(e,t){e!==vh&&On.throwError("use fromString",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Cb(this,t);let n=this.type.match(OEe);n?Cb(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Ji.fromObject({type:n[1],components:this.components}),baseType:"array"}):Cb(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Yn.sighash),Yn[e]||On.throwArgumentError("invalid format type","format",e),e===Yn.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Yn.sighash&&(t+=this.type),t+="("+this.components.map(n=>n.format(e)).join(e===Yn.full?", ":",")+")"):t+=this.type,e!==Yn.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Yn.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?Ji.fromString(e,t):Ji.fromObject(e)}static fromObject(e){return Ji.isParamType(e)?e:new Ji(vh,{name:e.name||null,type:pp(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Ji.fromObject):null})}static fromString(e,t){function n(i){return Ji.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(DEe(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function oy(r,e){return PEe(r).map(t=>Ji.fromString(t,e))}class pu{constructor(e,t){e!==vh&&On.throwError("use a static from method",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Cb(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return pu.isFragment(e)?e:typeof e=="string"?pu.fromString(e):pu.fromObject(e)}static fromObject(e){if(pu.isFragment(e))return e;switch(e.type){case"function":return $l.fromObject(e);case"event":return lu.fromObject(e);case"constructor":return Jl.fromObject(e);case"error":return UA.fromObject(e);case"fallback":case"receive":return null}return On.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?lu.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?$l.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Jl.fromString(e.trim()):e.split(" ")[0]==="error"?UA.fromString(e.substring(5).trim()):On.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class lu extends pu{format(e){if(e||(e=Yn.sighash),Yn[e]||On.throwArgumentError("invalid format type","format",e),e===Yn.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Yn.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Yn.full?", ":",")+") ",e!==Yn.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?lu.fromString(e):lu.fromObject(e)}static fromObject(e){if(lu.isEventFragment(e))return e;e.type!=="event"&&On.throwArgumentError("invalid event object","value",e);const t={name:ly(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Ji.fromObject):[],type:"event"};return new lu(vh,t)}static fromString(e){let t=e.match(cy);t||On.throwArgumentError("invalid event string","value",e);let n=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:On.warn("unknown modifier: "+i)}}),lu.fromObject({name:t[1].trim(),anonymous:n,inputs:oy(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function iZ(r,e){e.gas=null;let t=r.split("@");return t.length!==1?(t.length>2&&On.throwArgumentError("invalid human-readable ABI signature","value",r),t[1].match(/^[0-9]+$/)||On.throwArgumentError("invalid human-readable ABI signature gas","value",r),e.gas=mt.from(t[1]),t[0]):r}function sZ(r,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",r.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function aZ(r){let e={constant:!1,payable:!0,stateMutability:"payable"};return r.stateMutability!=null?(e.stateMutability=r.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",r.constant!=null&&!!r.constant!==e.constant&&On.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",r),e.payable=e.stateMutability==="payable",r.payable!=null&&!!r.payable!==e.payable&&On.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",r)):r.payable!=null?(e.payable=!!r.payable,r.constant==null&&!e.payable&&r.type!=="constructor"&&On.throwArgumentError("unable to determine stateMutability","value",r),e.constant=!!r.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&On.throwArgumentError("cannot have constant payable function","value",r)):r.constant!=null?(e.constant=!!r.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):r.type!=="constructor"&&On.throwArgumentError("unable to determine stateMutability","value",r),e}class Jl extends pu{format(e){if(e||(e=Yn.sighash),Yn[e]||On.throwArgumentError("invalid format type","format",e),e===Yn.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Yn.sighash&&On.throwError("cannot format a constructor for sighash",Ke.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(n=>n.format(e)).join(e===Yn.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?Jl.fromString(e):Jl.fromObject(e)}static fromObject(e){if(Jl.isConstructorFragment(e))return e;e.type!=="constructor"&&On.throwArgumentError("invalid constructor object","value",e);let t=aZ(e);t.constant&&On.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Ji.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?mt.from(e.gas):null};return new Jl(vh,n)}static fromString(e){let t={type:"constructor"};e=iZ(e,t);let n=e.match(cy);return(!n||n[1].trim()!=="constructor")&&On.throwArgumentError("invalid constructor string","value",e),t.inputs=oy(n[2].trim(),!1),sZ(n[3].trim(),t),Jl.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class $l extends Jl{format(e){if(e||(e=Yn.sighash),Yn[e]||On.throwArgumentError("invalid format type","format",e),e===Yn.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Yn.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Yn.full?", ":",")+") ",e!==Yn.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?$l.fromString(e):$l.fromObject(e)}static fromObject(e){if($l.isFunctionFragment(e))return e;e.type!=="function"&&On.throwArgumentError("invalid function object","value",e);let t=aZ(e);const n={type:e.type,name:ly(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Ji.fromObject):[],outputs:e.outputs?e.outputs.map(Ji.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?mt.from(e.gas):null};return new $l(vh,n)}static fromString(e){let t={type:"function"};e=iZ(e,t);let n=e.split(" returns ");n.length>2&&On.throwArgumentError("invalid function string","value",e);let i=n[0].match(cy);if(i||On.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&ly(t.name),t.inputs=oy(i[2],!1),sZ(i[3].trim(),t),n.length>1){let s=n[1].match(cy);(s[1].trim()!=""||s[3].trim()!="")&&On.throwArgumentError("unexpected tokens","value",e),t.outputs=oy(s[2],!1)}else t.outputs=[];return $l.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function mz(r){const e=r.format();return(e==="Error(string)"||e==="Panic(uint256)")&&On.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",r),r}class UA extends pu{format(e){if(e||(e=Yn.sighash),Yn[e]||On.throwArgumentError("invalid format type","format",e),e===Yn.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t="";return e!==Yn.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Yn.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?UA.fromString(e):UA.fromObject(e)}static fromObject(e){if(UA.isErrorFragment(e))return e;e.type!=="error"&&On.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:ly(e.name),inputs:e.inputs?e.inputs.map(Ji.fromObject):[]};return mz(new UA(vh,t))}static fromString(e){let t={type:"error"},n=e.match(cy);return n||On.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&ly(t.name),t.inputs=oy(n[2],!1),mz(UA.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function pp(r){return r.match(/^uint($|[^1-9])/)?r="uint256"+r.substring(4):r.match(/^int($|[^1-9])/)&&(r="int256"+r.substring(3)),r}const NEe=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ly(r){return(!r||!r.match(NEe))&&On.throwArgumentError(`invalid identifier "${r}"`,"value",r),r}const cy=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function PEe(r){r=r.trim();let e=[],t="",n=0;for(let i=0;i<r.length;i++){let s=r[i];s===","&&n===0?(e.push(t),t=""):(t+=s,s==="("?n++:s===")"&&(n--,n===-1&&On.throwArgumentError("unbalanced parenthesis","value",r)))}return t&&e.push(t),e}const WO=new Ke(Uy);function kEe(r){const e=[],t=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{t(a,i[s])}catch(o){e.push({path:a,error:o})}}};return t([],r),e}class Uu{constructor(e,t,n,i){this.name=e,this.type=t,this.localName=n,this.dynamic=i}_throwError(e,t){WO.throwArgumentError(e,this.localName,t)}}class ZL{constructor(e){it(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return ga(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Xa(e._data))}writeBytes(e){let t=Gt(e);const n=t.length%this.wordSize;return n&&(t=Xa([t,this._padding.slice(n)])),this._writeData(t)}_getValue(e){let t=Gt(mt.from(e));return t.length>this.wordSize&&WO.throwError("value out-of-bounds",Ke.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=Xa([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class M1{constructor(e,t,n,i){it(this,"_data",Gt(e)),it(this,"wordSize",t||32),it(this,"_coerceFunc",n),it(this,"allowLoose",i),this._offset=0}get data(){return Ot(this._data)}get consumed(){return this._offset}static coerce(e,t){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):M1.coerce(e,t)}_peekBytes(e,t,n){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+t<=this._data.length?i=t:WO.throwError("data out-of-bounds",Ke.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new M1(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let n=this._peekBytes(0,e,!!t);return this._offset+=n.length,n.slice(0,e)}readValue(){return mt.from(this.readBytes(this.wordSize))}}class HEe extends Uu{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=vs(t)}catch(n){this._throwError(n.message,t)}return e.writeValue(t)}decode(e){return vs(ei(e.readValue().toHexString(),20))}}class QEe extends Uu{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Yp=new Ke(Uy);function oZ(r,e,t){let n=null;if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let l={};n=e.map(c=>{const u=c.localName;return u||Yp.throwError("cannot encode object for signature with missing names",Ke.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:t}),l[u]&&Yp.throwError("cannot encode object for signature with duplicate names",Ke.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:t}),l[u]=!0,t[u]})}else Yp.throwArgumentError("invalid tuple value","tuple",t);e.length!==n.length&&Yp.throwArgumentError("types/value length mismatch","tuple",t);let i=new ZL(r.wordSize),s=new ZL(r.wordSize),a=[];e.forEach((l,c)=>{let u=n[c];if(l.dynamic){let f=s.length;l.encode(s,u);let d=i.writeUpdatableValue();a.push(p=>{d(p+f)})}else l.encode(i,u)}),a.forEach(l=>{l(i.length)});let o=r.appendWriter(i);return o+=r.appendWriter(s),o}function lZ(r,e){let t=[],n=r.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=r.readValue(),l=n.subReader(o.toNumber());try{a=s.decode(l)}catch(c){if(c.code===Ke.errors.BUFFER_OVERRUN)throw c;a=c,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(r)}catch(o){if(o.code===Ke.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&t.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),t[o]!=null))return;const l=t[a];l instanceof Error?Object.defineProperty(t,o,{enumerable:!0,get:()=>{throw l}}):t[o]=l});for(let s=0;s<t.length;s++){const a=t[s];a instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(t)}class zEe extends Uu{constructor(e,t,n){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let n=this.length;n===-1&&(n=t.length,e.writeValue(t.length)),Yp.checkArgumentCount(t.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return oZ(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Yp.throwError("insufficient data length",Ke.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let n=[];for(let i=0;i<t;i++)n.push(new QEe(this.coder));return e.coerce(this.name,lZ(e,n))}}class VEe extends Uu{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class cZ extends Uu{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Gt(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class GEe extends cZ{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Ot(super.decode(e)))}}class jEe extends Uu{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let n=Gt(t);return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return e.coerce(this.name,Ot(e.readBytes(this.size)))}}class WEe extends Uu{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class KEe extends Uu{constructor(e,t,n){const i=(t?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let n=mt.from(t),i=Xne.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Yne).mul(qne)))&&this._throwError("value out-of-bounds",t)}else(n.lt(M7)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class qEe extends cZ{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,oc(t))}decode(e){return yy(super.decode(e))}}class Cx extends Uu{constructor(e,t){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const t=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return oZ(e,this.coders,t)}decode(e){return e.coerce(this.name,lZ(e,this.coders))}}const Tx=new Ke(Uy),YEe=new RegExp(/^bytes([0-9]*)$/),XEe=new RegExp(/^(u?int)([0-9]*)$/);class ZEe{constructor(e){it(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new HEe(e.name);case"bool":return new VEe(e.name);case"string":return new qEe(e.name);case"bytes":return new GEe(e.name);case"array":return new zEe(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Cx((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new WEe(e.name)}let t=e.type.match(XEe);if(t){let n=parseInt(t[2]||"256");return(n===0||n>256||n%8!==0)&&Tx.throwArgumentError("invalid "+t[1]+" bit length","param",e),new KEe(n/8,t[1]==="int",e.name)}if(t=e.type.match(YEe),t){let n=parseInt(t[1]);return(n===0||n>32)&&Tx.throwArgumentError("invalid bytes length","param",e),new jEe(n,e.name)}return Tx.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new M1(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new ZL(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(Ji.from(i)));return new Cx(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Tx.throwError("types/values length mismatch",Ke.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const n=e.map(a=>this._getCoder(Ji.from(a))),i=new Cx(n,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(a=>this._getCoder(Ji.from(a)));return new Cx(i,"_").decode(this._getReader(Gt(t),n))}}const JEe=new ZEe,Pr=new Ke(Uy);class $Ee extends vy{}class eSe extends vy{}class tSe extends vy{}class JL extends vy{static isIndexed(e){return!!(e&&e._isIndexed)}}const nSe={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function gz(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);return t.error=e,t}class vz{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,it(this,"fragments",t.map(n=>pu.from(n)).filter(n=>n!=null)),it(this,"_abiCoder",ec(new.target,"getAbiCoder")()),it(this,"functions",{}),it(this,"errors",{}),it(this,"events",{}),it(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Pr.warn("duplicate definition - constructor");return}it(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Pr.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||it(this,"deploy",Jl.from({payable:!1,type:"constructor"})),it(this,"_isInterface",!0)}format(e){e||(e=Yn.full),e===Yn.sighash&&Pr.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(n=>n.format(e));return e===Yn.json?JSON.stringify(t.map(n=>JSON.parse(n))):t}static getAbiCoder(){return JEe}static getAddress(e){return vs(e)}static getSighash(e){return Ls(Lp(e.format()),0,4)}static getEventTopic(e){return Lp(e.format())}getFunction(e){if($n(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Pr.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Pr.throwArgumentError("no matching function","name",n):i.length>1&&Pr.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const t=this.functions[$l.fromString(e).format()];return t||Pr.throwArgumentError("no matching function","signature",e),t}getEvent(e){if($n(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Pr.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Pr.throwArgumentError("no matching event","name",n):i.length>1&&Pr.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const t=this.events[lu.fromString(e).format()];return t||Pr.throwArgumentError("no matching event","signature",e),t}getError(e){if($n(e)){const n=ec(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Pr.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Pr.throwArgumentError("no matching error","name",n):i.length>1&&Pr.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const t=this.errors[$l.fromString(e).format()];return t||Pr.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return ec(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),ec(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const n=Gt(t);return Ot(n.slice(0,4))!==this.getSighash(e)&&Pr.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Ot(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),Ot(Xa([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const n=Gt(t);return Ot(n.slice(0,4))!==this.getSighash(e)&&Pr.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Ot(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Ot(Xa([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let n=Gt(t),i=null,s="",a=null,o=null,l=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const c=Ot(n.slice(0,4)),u=nSe[c];if(u)a=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,l=u.signature,u.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const f=this.getError(c);a=this._abiCoder.decode(f.inputs,n.slice(4)),o=f.name,l=f.format()}catch{}break}}return Pr.throwError("call revert exception"+s,Ke.errors.CALL_EXCEPTION,{method:e.format(),data:Ot(t),errorArgs:a,errorName:o,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),Ot(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&Pr.throwError("too many arguments for "+e.format(),Ke.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?Lp(a):s.type==="bytes"?Ii(Ot(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=mt.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),ei(Ot(a),32));for(t.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&Pr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Pr.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(l=>i(o,l))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Pr.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((a,o)=>{const l=t[o];if(a.indexed)if(a.type==="string")n.push(Lp(l));else if(a.type==="bytes")n.push(Ii(l));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[l]))}else i.push(a),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let d=this.getEventTopic(e);(!$n(n[0],32)||n[0].toLowerCase()!==d)&&Pr.throwError("fragment/topic mismatch",Ke.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:d,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((d,p)=>{d.indexed?d.type==="string"||d.type==="bytes"||d.baseType==="tuple"||d.baseType==="array"?(i.push(Ji.fromObject({type:"bytes32",name:d.name})),a.push(!0)):(i.push(d),a.push(!1)):(s.push(d),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,Xa(n)):null,l=this._abiCoder.decode(s,t,!0),c=[],u=0,f=0;e.inputs.forEach((d,p)=>{if(d.indexed)if(o==null)c[p]=new JL({_isIndexed:!0,hash:null});else if(a[p])c[p]=new JL({_isIndexed:!0,hash:o[f++]});else try{c[p]=o[f++]}catch(v){c[p]=v}else try{c[p]=l[u++]}catch(v){c[p]=v}if(d.name&&c[d.name]==null){const v=c[p];v instanceof Error?Object.defineProperty(c,d.name,{enumerable:!0,get:()=>{throw gz(`property ${JSON.stringify(d.name)}`,v)}}):c[d.name]=v}});for(let d=0;d<c.length;d++){const p=c[d];p instanceof Error&&Object.defineProperty(c,d,{enumerable:!0,get:()=>{throw gz(`index ${d}`,p)}})}return Object.freeze(c)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new eSe({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:mt.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new $Ee({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=Ot(e);let n=this.getError(t.substring(0,10).toLowerCase());return n?new tSe({args:this._abiCoder.decode(n.inputs,"0x"+t.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const rSe="contracts/5.8.0";var yh=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(u){try{c(n.next(u))}catch(f){a(f)}}function l(u){try{c(n.throw(u))}catch(f){a(f)}}function c(u){u.done?s(u.value):i(u.value).then(o,l)}c((n=n.apply(r,e||[])).next())})};const fi=new Ke(rSe);function C1(r,e){return yh(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&fi.throwArgumentError("invalid address or ENS name","name",t);try{return vs(t)}catch{}r||fi.throwError("a provider or signer is needed to resolve ENS names",Ke.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield r.resolveName(t);return n==null&&fi.throwArgumentError("resolver or addr is not configured for ENS name","name",t),n})}function Tb(r,e,t){return yh(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((n,i)=>Tb(r,Array.isArray(e)?e[i]:e[n.name],n))):t.type==="address"?yield C1(r,e):t.type==="tuple"?yield Tb(r,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>Tb(r,n,t.arrayChildren))):Promise.reject(fi.makeError("invalid value for array",Ke.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function WE(r,e,t){return yh(this,void 0,void 0,function*(){let n={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(n=Qi(t.pop())),fi.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),r.signer?n.from?n.from=Ei({override:C1(r.signer,n.from),signer:r.signer.getAddress()}).then(c=>yh(this,void 0,void 0,function*(){return vs(c.signer)!==c.override&&fi.throwError("Contract with a Signer cannot override from",Ke.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),c.override})):n.from=r.signer.getAddress():n.from&&(n.from=C1(r.provider,n.from));const i=yield Ei({args:Tb(r.signer||r.provider,t,e.inputs),address:r.resolvedAddress,overrides:Ei(n)||{}}),s=r.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=mt.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=mt.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=mt.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=mt.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=mt.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Qm(o.accessList)),a.gasLimit==null&&e.gas!=null){let c=21e3;const u=Gt(s);for(let f=0;f<u.length;f++)c+=4,u[f]&&(c+=64);a.gasLimit=mt.from(e.gas).add(c)}if(o.value){const c=mt.from(o.value);!c.isZero()&&!e.payable&&fi.throwError("non-payable method cannot override value",Ke.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=c}o.customData&&(a.customData=Qi(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const l=Object.keys(n).filter(c=>n[c]!=null);return l.length&&fi.throwError(`cannot override ${l.map(c=>JSON.stringify(c)).join(",")}`,Ke.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),a})}function iSe(r,e){return function(...t){return WE(r,e,t)}}function sSe(r,e){const t=r.signer||r.provider;return function(...n){return yh(this,void 0,void 0,function*(){t||fi.throwError("estimate require a provider or signer",Ke.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield WE(r,e,n);return yield t.estimateGas(i)})}}function aSe(r,e){const t=e.wait.bind(e);e.wait=n=>t(n).then(i=>(i.events=i.logs.map(s=>{let a=wu(s),o=null;try{o=r.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(l,c)=>r.interface.decodeEventLog(o.eventFragment,l,c),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>r.provider,a.getBlock=()=>r.provider.getBlock(i.blockHash),a.getTransaction=()=>r.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function uZ(r,e,t){const n=r.signer||r.provider;return function(...i){return yh(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Qi(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}r.deployTransaction!=null&&(yield r._deployed(s));const a=yield WE(r,e,i),o=yield n.call(a,s);try{let l=r.interface.decodeFunctionResult(e,o);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===Ke.errors.CALL_EXCEPTION&&(l.address=r.address,l.args=i,l.transaction=a),l}})}}function oSe(r,e){return function(...t){return yh(this,void 0,void 0,function*(){r.signer||fi.throwError("sending a transaction requires a signer",Ke.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),r.deployTransaction!=null&&(yield r._deployed());const n=yield WE(r,e,t),i=yield r.signer.sendTransaction(n);return aSe(r,i),i})}}function yz(r,e,t){return e.constant?uZ(r,e,t):oSe(r,e)}function AZ(r){return r.address&&(r.topics==null||r.topics.length===0)?"*":(r.address||"*")+"@"+(r.topics?r.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class uy{constructor(e,t){it(this,"tag",e),it(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(n=>t||n.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class lSe extends uy{constructor(){super("error",null)}}class wz extends uy{constructor(e,t,n,i){const s={address:e};let a=t.getEventTopic(n);i?(a!==i[0]&&fi.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(AZ(s),s),it(this,"address",e),it(this,"interface",t),it(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,n)=>this.interface.decodeEventLog(this.fragment,t,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=kEe(e.args);if(t.length)throw t[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class _z extends uy{constructor(e,t){super("*",{address:e}),it(this,"address",e),it(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(n,i)=>this.interface.decodeEventLog(t.eventFragment,n,i),e.args=t.args}catch{}}}class cSe{constructor(e,t,n){it(this,"interface",ec(new.target,"getInterface")(t)),n==null?(it(this,"provider",null),it(this,"signer",null)):xy.isSigner(n)?(it(this,"provider",n.provider||null),it(this,"signer",n)):uE.isProvider(n)?(it(this,"provider",n),it(this,"signer",null)):fi.throwArgumentError("invalid signer or provider","signerOrProvider",n),it(this,"callStatic",{}),it(this,"estimateGas",{}),it(this,"functions",{}),it(this,"populateTransaction",{}),it(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const l=this.interface.events[o];it(this.filters,o,(...c)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,c)})),a[l.name]||(a[l.name]=[]),a[l.name].push(o)}),Object.keys(a).forEach(o=>{const l=a[o];l.length===1?it(this.filters,o,this.filters[l[0]]):fi.warn(`Duplicate definition of ${o} (${l.join(", ")})`)})}if(it(this,"_runningEvents",{}),it(this,"_wrappedEmits",{}),e==null&&fi.throwArgumentError("invalid contract address or ENS name","addressOrName",e),it(this,"address",e),this.provider)it(this,"resolvedAddress",C1(this.provider,e));else try{it(this,"resolvedAddress",Promise.resolve(vs(e)))}catch{fi.throwError("provider is required to use ENS name as contract address",Ke.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){fi.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const l=o.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(a)}this[a]==null&&it(this,a,yz(this,o,!0)),this.functions[a]==null&&it(this.functions,a,yz(this,o,!1)),this.callStatic[a]==null&&it(this.callStatic,a,uZ(this,o,!0)),this.populateTransaction[a]==null&&it(this.populateTransaction,a,iSe(this,o)),this.estimateGas[a]==null&&it(this.estimateGas,a,sSe(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const l=o[0];try{this[a]==null&&it(this,a,this[l])}catch{}this.functions[a]==null&&it(this.functions,a,this.functions[l]),this.callStatic[a]==null&&it(this.callStatic,a,this.callStatic[l]),this.populateTransaction[a]==null&&it(this.populateTransaction,a,this.populateTransaction[l]),this.estimateGas[a]==null&&it(this.estimateGas,a,this.estimateGas[l])})}static getContractAddress(e){return H7(e)}static getInterface(e){return vz.isInterface(e)?e:new vz(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&fi.throwError("contract not deployed",Ke.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||fi.throwError("sending a transactions require a signer",Ke.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Qi(e||{});return["from","to"].forEach(function(n){t[n]!=null&&fi.throwError("cannot override "+n,Ke.errors.UNSUPPORTED_OPERATION,{operation:n})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new ND(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&it(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return JL.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new lSe);if(e==="event")return this._normalizeRunningEvent(new uy("event",null));if(e==="*")return this._normalizeRunningEvent(new _z(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new wz(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new wz(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new uy(AZ(t),t))}return this._normalizeRunningEvent(new _z(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,n){const i=wu(t);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,n){if(this.provider||fi.throwError("events require a provider or a signer with a provider",Ke.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,t);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,n){const i=this._getRunningEvent(e),s=Qi(i.filter);return typeof t=="string"&&$n(t,32)?(n!=null&&fi.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(t)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,n)=>t+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(t),this._checkRunningEvents(n),this}removeListener(e,t){return this.off(e,t)}}class uSe extends cSe{}const ASe=void 0,fSe=`https://devnet.helius-rpc.com/?api-key=${ASe}`;class hSe{constructor(){}async getUserCNFTs(e,t,n){const o=await(await fetch(fSe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"searchAssets",id:"search-character",params:{ownerAddress:e,delegate:t,limit:50,tokenType:"compressedNft"},options:{showCollectionMetadata:!0}})})).json();if(!o.result||!o.result.items)return null;const l=n!=null?o.result.items.filter(f=>f.content.metadata.name===n):o.result.items;if(l.length==0)return null;l.length>1&&console.warn("more than one cnft with collection name: "+n+" was found, taking latest mint");const c=l[l.length-1],u=await fetch(c.content.json_uri);if(u.ok)return await u.json();throw new Error(`HTTP error! Status: ${u.status}`)}}const Jd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function KO(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function $L(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function fc(r,...e){if(!KO(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function dSe(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$L(r.outputLen),$L(r.blockLen)}function T1(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function pSe(r,e){fc(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Fm(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function rR(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Nl(r,e){return r<<32-e|r>>>e}const fZ=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",mSe=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Lm(r){if(fc(r),fZ)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=mSe[r[t]];return e}const jc={_0:48,_9:57,A:65,F:70,a:97,f:102};function xz(r){if(r>=jc._0&&r<=jc._9)return r-jc._0;if(r>=jc.A&&r<=jc.F)return r-(jc.A-10);if(r>=jc.a&&r<=jc.f)return r-(jc.a-10)}function qO(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(fZ)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const a=xz(r.charCodeAt(s)),o=xz(r.charCodeAt(s+1));if(a===void 0||o===void 0){const l=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=a*16+o}return n}function gSe(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function YO(r){return typeof r=="string"&&(r=gSe(r)),fc(r),r}function mu(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];fc(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}let hZ=class{};function dZ(r){const e=n=>r().update(YO(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function pZ(r=32){if(Jd&&typeof Jd.getRandomValues=="function")return Jd.getRandomValues(new Uint8Array(r));if(Jd&&typeof Jd.randomBytes=="function")return Uint8Array.from(Jd.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function vSe(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(t>>i&s),o=Number(t&s),l=n?4:0,c=n?0:4;r.setUint32(e+l,a,n),r.setUint32(e+c,o,n)}function ySe(r,e,t){return r&e^~r&t}function wSe(r,e,t){return r&e^r&t^e&t}class mZ extends hZ{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=rR(this.buffer)}update(e){T1(this),e=YO(e),fc(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const l=rR(e);for(;i<=s-a;a+=i)this.process(l,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){T1(this),pSe(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,Fm(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(n,0),a=0);for(let f=a;f<i;f++)t[f]=0;vSe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=rR(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)o.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=s,e.length=i,e.pos=o,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const yA=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ms=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Rx=BigInt(2**32-1),bz=BigInt(32);function _Se(r,e=!1){return e?{h:Number(r&Rx),l:Number(r>>bz&Rx)}:{h:Number(r>>bz&Rx)|0,l:Number(r&Rx)|0}}function xSe(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:a,l:o}=_Se(r[s],e);[n[s],i[s]]=[a,o]}return[n,i]}const Ez=(r,e,t)=>r>>>t,Sz=(r,e,t)=>r<<32-t|e>>>t,$d=(r,e,t)=>r>>>t|e<<32-t,ep=(r,e,t)=>r<<32-t|e>>>t,Ix=(r,e,t)=>r<<64-t|e>>>t-32,Ux=(r,e,t)=>r>>>t-32|e<<64-t;function Wc(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const bSe=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),ESe=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,SSe=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),BSe=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,MSe=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),CSe=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,TSe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wA=new Uint32Array(64);class RSe extends mZ{constructor(e=32){super(64,e,8,!1),this.A=yA[0]|0,this.B=yA[1]|0,this.C=yA[2]|0,this.D=yA[3]|0,this.E=yA[4]|0,this.F=yA[5]|0,this.G=yA[6]|0,this.H=yA[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:a,G:o,H:l}=this;return[e,t,n,i,s,a,o,l]}set(e,t,n,i,s,a,o,l){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)wA[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const d=wA[f-15],p=wA[f-2],v=Nl(d,7)^Nl(d,18)^d>>>3,m=Nl(p,17)^Nl(p,19)^p>>>10;wA[f]=m+wA[f-7]+v+wA[f-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const d=Nl(o,6)^Nl(o,11)^Nl(o,25),p=u+d+ySe(o,l,c)+TSe[f]+wA[f]|0,m=(Nl(n,2)^Nl(n,13)^Nl(n,22))+wSe(n,i,s)|0;u=c,c=l,l=o,o=a+p|0,a=s,s=i,i=n,n=p+m|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,i,s,a,o,l,c,u)}roundClean(){Fm(wA)}destroy(){this.set(0,0,0,0,0,0,0,0),Fm(this.buffer)}}const gZ=xSe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ISe=gZ[0],USe=gZ[1],_A=new Uint32Array(80),xA=new Uint32Array(80);class FSe extends mZ{constructor(e=64){super(128,e,16,!1),this.Ah=Ms[0]|0,this.Al=Ms[1]|0,this.Bh=Ms[2]|0,this.Bl=Ms[3]|0,this.Ch=Ms[4]|0,this.Cl=Ms[5]|0,this.Dh=Ms[6]|0,this.Dl=Ms[7]|0,this.Eh=Ms[8]|0,this.El=Ms[9]|0,this.Fh=Ms[10]|0,this.Fl=Ms[11]|0,this.Gh=Ms[12]|0,this.Gl=Ms[13]|0,this.Hh=Ms[14]|0,this.Hl=Ms[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:l,Eh:c,El:u,Fh:f,Fl:d,Gh:p,Gl:v,Hh:m,Hl:g}=this;return[e,t,n,i,s,a,o,l,c,u,f,d,p,v,m,g]}set(e,t,n,i,s,a,o,l,c,u,f,d,p,v,m,g){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=v|0,this.Hh=m|0,this.Hl=g|0}process(e,t){for(let E=0;E<16;E++,t+=4)_A[E]=e.getUint32(t),xA[E]=e.getUint32(t+=4);for(let E=16;E<80;E++){const B=_A[E-15]|0,S=xA[E-15]|0,M=$d(B,S,1)^$d(B,S,8)^Ez(B,S,7),I=ep(B,S,1)^ep(B,S,8)^Sz(B,S,7),k=_A[E-2]|0,O=xA[E-2]|0,C=$d(k,O,19)^Ix(k,O,61)^Ez(k,O,6),P=ep(k,O,19)^Ux(k,O,61)^Sz(k,O,6),D=SSe(I,P,xA[E-7],xA[E-16]),F=BSe(D,M,C,_A[E-7],_A[E-16]);_A[E]=F|0,xA[E]=D|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:l,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:v,Gh:m,Gl:g,Hh:w,Hl:b}=this;for(let E=0;E<80;E++){const B=$d(f,d,14)^$d(f,d,18)^Ix(f,d,41),S=ep(f,d,14)^ep(f,d,18)^Ux(f,d,41),M=f&p^~f&m,I=d&v^~d&g,k=MSe(b,S,I,USe[E],xA[E]),O=CSe(k,w,B,M,ISe[E],_A[E]),C=k|0,P=$d(n,i,28)^Ix(n,i,34)^Ix(n,i,39),D=ep(n,i,28)^Ux(n,i,34)^Ux(n,i,39),F=n&s^n&o^s&o,_=i&a^i&l^a&l;w=m|0,b=g|0,m=p|0,g=v|0,p=f|0,v=d|0,{h:f,l:d}=Wc(c|0,u|0,O|0,C|0),c=o|0,u=l|0,o=s|0,l=a|0,s=n|0,a=i|0;const R=bSe(C,D,_);n=ESe(R,O,P,F),i=R|0}({h:n,l:i}=Wc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=Wc(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l}=Wc(this.Ch|0,this.Cl|0,o|0,l|0),{h:c,l:u}=Wc(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:d}=Wc(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:v}=Wc(this.Fh|0,this.Fl|0,p|0,v|0),{h:m,l:g}=Wc(this.Gh|0,this.Gl|0,m|0,g|0),{h:w,l:b}=Wc(this.Hh|0,this.Hl|0,w|0,b|0),this.set(n,i,s,a,o,l,c,u,f,d,p,v,m,g,w,b)}roundClean(){Fm(_A,xA)}destroy(){Fm(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vZ=dZ(()=>new RSe),LSe=dZ(()=>new FSe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XO=BigInt(0),eD=BigInt(1);function wh(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function Fx(r){const e=r.toString(16);return e.length&1?"0"+e:e}function yZ(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?XO:BigInt("0x"+r)}function KE(r){return yZ(Lm(r))}function Ay(r){return fc(r),yZ(Lm(Uint8Array.from(r).reverse()))}function ZO(r,e){return qO(r.toString(16).padStart(e*2,"0"))}function qE(r,e){return ZO(r,e).reverse()}function di(r,e,t){let n;if(typeof e=="string")try{n=qO(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(KO(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}const iR=r=>typeof r=="bigint"&&XO<=r;function DSe(r,e,t){return iR(r)&&iR(e)&&iR(t)&&e<=r&&r<t}function Xp(r,e,t,n){if(!DSe(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function OSe(r){let e;for(e=0;r>XO;r>>=eD,e+=1);return e}const YE=r=>(eD<<BigInt(r))-eD;function NSe(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=p=>new Uint8Array(p),i=p=>Uint8Array.of(p);let s=n(r),a=n(r),o=0;const l=()=>{s.fill(1),a.fill(0),o=0},c=(...p)=>t(a,s,...p),u=(p=n(0))=>{a=c(i(0),p),s=c(),p.length!==0&&(a=c(i(1),p),s=c())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const v=[];for(;p<e;){s=c();const m=s.slice();v.push(m),p+=s.length}return mu(...v)};return(p,v)=>{l(),u(p);let m;for(;!(m=v(f()));)u();return l(),m}}function Fy(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,a){const o=r[i];if(a&&o===void 0)return;const l=typeof o;if(l!==s||o===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function R1(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wa=BigInt(0),gs=BigInt(1),th=BigInt(2),PSe=BigInt(3),wZ=BigInt(4),_Z=BigInt(5),xZ=BigInt(8);function mi(r,e){const t=r%e;return t>=wa?t:e+t}function qr(r,e,t){let n=r;for(;e-- >wa;)n*=n,n%=t;return n}function Bz(r,e){if(r===wa)throw new Error("invert: expected non-zero number");if(e<=wa)throw new Error("invert: expected positive modulus, got "+e);let t=mi(r,e),n=e,i=wa,s=gs;for(;t!==wa;){const o=n/t,l=n%t,c=i-s*o;n=t,t=l,i=s,s=c}if(n!==gs)throw new Error("invert: does not exist");return mi(i,e)}function bZ(r,e){const t=(r.ORDER+gs)/wZ,n=r.pow(e,t);if(!r.eql(r.sqr(n),e))throw new Error("Cannot find square root");return n}function kSe(r,e){const t=(r.ORDER-_Z)/xZ,n=r.mul(e,th),i=r.pow(n,t),s=r.mul(e,i),a=r.mul(r.mul(s,th),i),o=r.mul(s,r.sub(a,r.ONE));if(!r.eql(r.sqr(o),e))throw new Error("Cannot find square root");return o}function HSe(r){if(r<BigInt(3))throw new Error("sqrt is not defined for small field");let e=r-gs,t=0;for(;e%th===wa;)e/=th,t++;let n=th;const i=Ym(r);for(;Mz(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return bZ;let s=i.pow(n,e);const a=(e+gs)/th;return function(l,c){if(l.is0(c))return c;if(Mz(l,c)!==1)throw new Error("Cannot find square root");let u=t,f=l.mul(l.ONE,s),d=l.pow(c,e),p=l.pow(c,a);for(;!l.eql(d,l.ONE);){if(l.is0(d))return l.ZERO;let v=1,m=l.sqr(d);for(;!l.eql(m,l.ONE);)if(v++,m=l.sqr(m),v===u)throw new Error("Cannot find square root");const g=gs<<BigInt(u-v-1),w=l.pow(f,g);u=v,f=l.sqr(w),d=l.mul(d,f),p=l.mul(p,w)}return p}}function QSe(r){return r%wZ===PSe?bZ:r%xZ===_Z?kSe:HSe(r)}const zSe=(r,e)=>(mi(r,e)&gs)===gs,VSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function GSe(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=VSe.reduce((n,i)=>(n[i]="function",n),e);return Fy(r,t),r}function jSe(r,e,t){if(t<wa)throw new Error("invalid exponent, negatives unsupported");if(t===wa)return r.ONE;if(t===gs)return e;let n=r.ONE,i=e;for(;t>wa;)t&gs&&(n=r.mul(n,i)),i=r.sqr(i),t>>=gs;return n}function EZ(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((a,o,l)=>r.is0(o)?a:(n[l]=a,r.mul(a,o)),r.ONE),s=r.inv(i);return e.reduceRight((a,o,l)=>r.is0(o)?a:(n[l]=r.mul(a,n[l]),r.mul(a,o)),s),n}function Mz(r,e){const t=(r.ORDER-gs)/th,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),a=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!a)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function WSe(r,e){e!==void 0&&$L(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Ym(r,e,t=!1,n={}){if(r<=wa)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(i=u.BITS),u.sqrt&&(s=u.sqrt),typeof u.isLE=="boolean"&&(t=u.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:a,nByteLength:o}=WSe(r,i);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const c=Object.freeze({ORDER:r,isLE:t,BITS:a,BYTES:o,MASK:YE(a),ZERO:wa,ONE:gs,create:u=>mi(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return wa<=u&&u<r},is0:u=>u===wa,isValidNot0:u=>!c.is0(u)&&c.isValid(u),isOdd:u=>(u&gs)===gs,neg:u=>mi(-u,r),eql:(u,f)=>u===f,sqr:u=>mi(u*u,r),add:(u,f)=>mi(u+f,r),sub:(u,f)=>mi(u-f,r),mul:(u,f)=>mi(u*f,r),pow:(u,f)=>jSe(c,u,f),div:(u,f)=>mi(u*Bz(f,r),r),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>Bz(u,r),sqrt:s||(u=>(l||(l=QSe(r)),l(c,u))),toBytes:u=>t?qE(u,o):ZO(u,o),fromBytes:u=>{if(u.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+u.length);return t?Ay(u):KE(u)},invertBatch:u=>EZ(c,u),cmov:(u,f,d)=>d?f:u});return Object.freeze(c)}function SZ(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function BZ(r){const e=SZ(r);return e+Math.ceil(e/2)}function KSe(r,e,t=!1){const n=r.length,i=SZ(e),s=BZ(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=t?Ay(r):KE(r),o=mi(a,e-gs)+gs;return t?qE(o,i):ZO(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dm=BigInt(0),nh=BigInt(1);function Iv(r,e){const t=e.negate();return r?t:e}function MZ(r,e,t){const n=e==="pz"?a=>a.pz:a=>a.ez,i=EZ(r.Fp,t.map(n));return t.map((a,o)=>a.toAffine(i[o])).map(r.fromAffine)}function CZ(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function sR(r,e){CZ(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=YE(r),a=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:a}}function Cz(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=t;let o=Number(r&i),l=r>>a;o>n&&(o-=s,l+=nh);const c=e*n,u=c+Math.abs(o)-1,f=o===0,d=o<0,p=e%2!==0;return{nextN:l,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:c}}function qSe(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function YSe(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const aR=new WeakMap,TZ=new WeakMap;function oR(r){return TZ.get(r)||1}function Tz(r){if(r!==Dm)throw new Error("invalid wNAF")}function RZ(r,e){return{constTimeNegate:Iv,hasPrecomputes(t){return oR(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>Dm;)n&nh&&(i=i.add(s)),s=s.double(),n>>=nh;return i},precomputeWindow(t,n){const{windows:i,windowSize:s}=sR(n,e),a=[];let o=t,l=o;for(let c=0;c<i;c++){l=o,a.push(l);for(let u=1;u<s;u++)l=l.add(o),a.push(l);o=l.double()}return a},wNAF(t,n,i){let s=r.ZERO,a=r.BASE;const o=sR(t,e);for(let l=0;l<o.windows;l++){const{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:v}=Cz(i,l,o);i=c,f?a=a.add(Iv(p,n[v])):s=s.add(Iv(d,n[u]))}return Tz(i),{p:s,f:a}},wNAFUnsafe(t,n,i,s=r.ZERO){const a=sR(t,e);for(let o=0;o<a.windows&&i!==Dm;o++){const{nextN:l,offset:c,isZero:u,isNeg:f}=Cz(i,o,a);if(i=l,!u){const d=n[c];s=s.add(f?d.negate():d)}}return Tz(i),s},getPrecomputes(t,n,i){let s=aR.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&(typeof i=="function"&&(s=i(s)),aR.set(n,s))),s},wNAFCached(t,n,i){const s=oR(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){const a=oR(t);return a===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(a,this.getPrecomputes(a,t,i),n,s)},setWindowSize(t,n){CZ(n,e),TZ.set(t,n),aR.delete(t)}}}function XSe(r,e,t,n){let i=e,s=r.ZERO,a=r.ZERO;for(;t>Dm||n>Dm;)t&nh&&(s=s.add(i)),n&nh&&(a=a.add(i)),i=i.double(),t>>=nh,n>>=nh;return{p1:s,p2:a}}function IZ(r,e,t,n){qSe(t,r),YSe(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const a=r.ZERO,o=OSe(BigInt(i));let l=1;o>12?l=o-3:o>4?l=o-2:o>0&&(l=2);const c=YE(l),u=new Array(Number(c)+1).fill(a),f=Math.floor((e.BITS-1)/l)*l;let d=a;for(let p=f;p>=0;p-=l){u.fill(a);for(let m=0;m<s;m++){const g=n[m],w=Number(g>>BigInt(p)&c);u[w]=u[w].add(t[m])}let v=a;for(let m=u.length-1,g=a;m>0;m--)g=g.add(u[m]),v=v.add(g);if(d=d.add(v),p!==0)for(let m=0;m<l;m++)d=d.double()}return d}function Rz(r,e){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return GSe(e),e}else return Ym(r)}function UZ(r,e,t={}){if(!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const o of["p","n","h"]){const l=e[o];if(!(typeof l=="bigint"&&l>Dm))throw new Error(`CURVE.${o} must be positive bigint`)}const n=Rz(e.p,t.Fp),i=Rz(e.n,t.Fn),a=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const o of a)if(!n.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ql=BigInt(0),Ws=BigInt(1),lR=BigInt(2),ZSe=BigInt(8),JSe={zip215:!0};function $Se(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),a=r.add(r.mul(e.a,i),s),o=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(a,o)}function eBe(r,e={}){const{Fp:t,Fn:n}=UZ("edwards",r,e),{h:i,n:s}=r;Fy(e,{},{uvRatio:"function"});const a=lR<<BigInt(n.BYTES*8)-Ws,o=m=>t.create(m),l=e.uvRatio||((m,g)=>{try{return{isValid:!0,value:t.sqrt(t.div(m,g))}}catch{return{isValid:!1,value:Ql}}});if(!$Se(t,r,r.Gx,r.Gy))throw new Error("bad curve params: generator point");function c(m,g,w=!1){const b=w?Ws:Ql;return Xp("coordinate "+m,g,b,a),g}function u(m){if(!(m instanceof p))throw new Error("ExtendedPoint expected")}const f=R1((m,g)=>{const{ex:w,ey:b,ez:E}=m,B=m.is0();g==null&&(g=B?ZSe:t.inv(E));const S=o(w*g),M=o(b*g),I=o(E*g);if(B)return{x:Ql,y:Ws};if(I!==Ws)throw new Error("invZ was invalid");return{x:S,y:M}}),d=R1(m=>{const{a:g,d:w}=r;if(m.is0())throw new Error("bad point: ZERO");const{ex:b,ey:E,ez:B,et:S}=m,M=o(b*b),I=o(E*E),k=o(B*B),O=o(k*k),C=o(M*g),P=o(k*o(C+I)),D=o(O+o(w*o(M*I)));if(P!==D)throw new Error("bad point: equation left != right (1)");const F=o(b*E),_=o(B*S);if(F!==_)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(g,w,b,E){this.ex=c("x",g),this.ey=c("y",w),this.ez=c("z",b,!0),this.et=c("t",E),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof p)throw new Error("extended point not allowed");const{x:w,y:b}=g||{};return c("x",w),c("y",b),new p(w,b,Ws,o(w*b))}static normalizeZ(g){return MZ(p,"ez",g)}static msm(g,w){return IZ(p,n,g,w)}_setWindowSize(g){this.precompute(g)}precompute(g=8,w=!0){return v.setWindowSize(this,g),w||this.multiply(lR),this}assertValidity(){d(this)}equals(g){u(g);const{ex:w,ey:b,ez:E}=this,{ex:B,ey:S,ez:M}=g,I=o(w*M),k=o(B*E),O=o(b*M),C=o(S*E);return I===k&&O===C}is0(){return this.equals(p.ZERO)}negate(){return new p(o(-this.ex),this.ey,this.ez,o(-this.et))}double(){const{a:g}=r,{ex:w,ey:b,ez:E}=this,B=o(w*w),S=o(b*b),M=o(lR*o(E*E)),I=o(g*B),k=w+b,O=o(o(k*k)-B-S),C=I+S,P=C-M,D=I-S,F=o(O*P),_=o(C*D),R=o(O*D),L=o(P*C);return new p(F,_,L,R)}add(g){u(g);const{a:w,d:b}=r,{ex:E,ey:B,ez:S,et:M}=this,{ex:I,ey:k,ez:O,et:C}=g,P=o(E*I),D=o(B*k),F=o(M*b*C),_=o(S*O),R=o((E+B)*(I+k)-P-D),L=_-F,Q=_+F,G=o(D-w*P),Y=o(R*L),W=o(Q*G),V=o(R*G),T=o(L*Q);return new p(Y,W,T,V)}subtract(g){return this.add(g.negate())}multiply(g){const w=g;Xp("scalar",w,Ws,s);const{p:b,f:E}=v.wNAFCached(this,w,p.normalizeZ);return p.normalizeZ([b,E])[0]}multiplyUnsafe(g,w=p.ZERO){const b=g;return Xp("scalar",b,Ql,s),b===Ql?p.ZERO:this.is0()||b===Ws?this:v.wNAFCachedUnsafe(this,b,p.normalizeZ,w)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return v.wNAFCachedUnsafe(this,s).is0()}toAffine(g){return f(this,g)}clearCofactor(){return i===Ws?this:this.multiplyUnsafe(i)}static fromBytes(g,w=!1){return fc(g),this.fromHex(g,w)}static fromHex(g,w=!1){const{d:b,a:E}=r,B=t.BYTES;g=di("pointHex",g,B),wh("zip215",w);const S=g.slice(),M=g[B-1];S[B-1]=M&-129;const I=Ay(S),k=w?a:t.ORDER;Xp("pointHex.y",I,Ql,k);const O=o(I*I),C=o(O-Ws),P=o(b*O-E);let{isValid:D,value:F}=l(C,P);if(!D)throw new Error("Point.fromHex: invalid y coordinate");const _=(F&Ws)===Ws,R=(M&128)!==0;if(!w&&F===Ql&&R)throw new Error("Point.fromHex: x=0 and x_0=1");return R!==_&&(F=o(-F)),p.fromAffine({x:F,y:I})}static fromPrivateScalar(g){return p.BASE.multiply(g)}toBytes(){const{x:g,y:w}=this.toAffine(),b=qE(w,t.BYTES);return b[b.length-1]|=g&Ws?128:0,b}toRawBytes(){return this.toBytes()}toHex(){return Lm(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}p.BASE=new p(r.Gx,r.Gy,Ws,o(r.Gx*r.Gy)),p.ZERO=new p(Ql,Ws,Ws,Ql),p.Fp=t,p.Fn=n;const v=RZ(p,n.BYTES*8);return p}function tBe(r,e){Fy(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=e,{BASE:i,Fp:s,Fn:a}=r,o=a.ORDER,l=e.randomBytes||pZ,c=e.adjustScalarBytes||(S=>S),u=e.domain||((S,M,I)=>{if(wh("phflag",I),M.length||I)throw new Error("Contexts/pre-hash are not supported");return S});function f(S){return a.create(S)}function d(S){return f(Ay(S))}function p(S){const M=s.BYTES;S=di("private key",S,M);const I=di("hashed private key",n(S),2*M),k=c(I.slice(0,M)),O=I.slice(M,2*M),C=d(k);return{head:k,prefix:O,scalar:C}}function v(S){const{head:M,prefix:I,scalar:k}=p(S),O=i.multiply(k),C=O.toBytes();return{head:M,prefix:I,scalar:k,point:O,pointBytes:C}}function m(S){return v(S).pointBytes}function g(S=Uint8Array.of(),...M){const I=mu(...M);return d(n(u(I,di("context",S),!!t)))}function w(S,M,I={}){S=di("message",S),t&&(S=t(S));const{prefix:k,scalar:O,pointBytes:C}=v(M),P=g(I.context,k,S),D=i.multiply(P).toBytes(),F=g(I.context,D,C,S),_=f(P+F*O);Xp("signature.s",_,Ql,o);const R=s.BYTES,L=mu(D,qE(_,R));return di("result",L,R*2)}const b=JSe;function E(S,M,I,k=b){const{context:O,zip215:C}=k,P=s.BYTES;S=di("signature",S,2*P),M=di("message",M),I=di("publicKey",I,P),C!==void 0&&wh("zip215",C),t&&(M=t(M));const D=Ay(S.slice(P,2*P));let F,_,R;try{F=r.fromHex(I,C),_=r.fromHex(S.slice(0,P),C),R=i.multiplyUnsafe(D)}catch{return!1}if(!C&&F.isSmallOrder())return!1;const L=g(O,_.toBytes(),F.toBytes(),M);return _.add(F.multiplyUnsafe(L)).subtract(R).clearCofactor().is0()}return i.precompute(8),{getPublicKey:m,sign:w,verify:E,utils:{getExtendedPublicKey:v,randomPrivateKey:()=>l(s.BYTES),precompute(S=8,M=r.BASE){return M.precompute(S,!1)}},Point:r}}function nBe(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ym(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={hash:r.hash,randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:s}}function rBe(r,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:r})}function iBe(r){const{CURVE:e,curveOpts:t,eddsaOpts:n}=nBe(r),i=eBe(e,t),s=tBe(i,n);return rBe(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const sBe=BigInt(1),Iz=BigInt(2);BigInt(3);const aBe=BigInt(5),oBe=BigInt(8),XE={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:oBe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function lBe(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=XE.p,o=r*r%s*r%s,l=qr(o,Iz,s)*o%s,c=qr(l,sBe,s)*r%s,u=qr(c,aBe,s)*c%s,f=qr(u,e,s)*u%s,d=qr(f,t,s)*f%s,p=qr(d,n,s)*d%s,v=qr(p,i,s)*p%s,m=qr(v,i,s)*p%s,g=qr(m,e,s)*u%s;return{pow_p_5_8:qr(g,Iz,s)*r%s,b2:o}}function cBe(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Uz=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function uBe(r,e){const t=XE.p,n=mi(e*e*e,t),i=mi(n*n*e,t),s=lBe(r*i).pow_p_5_8;let a=mi(r*n*s,t);const o=mi(e*a*a,t),l=a,c=mi(a*Uz,t),u=o===r,f=o===mi(-r,t),d=o===mi(-r*Uz,t);return u&&(a=l),(f||d)&&(a=c),zSe(a,t)&&(a=mi(-a,t)),{isValid:u||f,value:a}}const ABe=Ym(XE.p,void 0,!0),fBe={...XE,Fp:ABe,hash:LSe,adjustScalarBytes:cBe,uvRatio:uBe},Ly=iBe(fBe);var Lx={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Fz;function FZ(){return Fz||(Fz=1,function(r,e){var t=oE(),n=t.Buffer;function i(a,o){for(var l in a)o[l]=a[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(a,o,l){return n(a,o,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var c=n(a);return o!==void 0?typeof l=="string"?c.fill(o,l):c.fill(o):c.fill(0),c},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}}(Lx,Lx.exports)),Lx.exports}var cR,Lz;function hBe(){if(Lz)return cR;Lz=1;var r=FZ().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var a=t.charAt(s),o=a.charCodeAt(0);if(n[o]!==255)throw new TypeError(a+" is ambiguous");n[o]=s}var l=t.length,c=t.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function d(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=r.from(m)),!r.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var g=0,w=0,b=0,E=m.length;b!==E&&m[b]===0;)b++,g++;for(var B=(E-b)*f+1>>>0,S=new Uint8Array(B);b!==E;){for(var M=m[b],I=0,k=B-1;(M!==0||I<w)&&k!==-1;k--,I++)M+=256*S[k]>>>0,S[k]=M%l>>>0,M=M/l>>>0;if(M!==0)throw new Error("Non-zero carry");w=I,b++}for(var O=B-w;O!==B&&S[O]===0;)O++;for(var C=c.repeat(g);O<B;++O)C+=t.charAt(S[O]);return C}function p(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return r.alloc(0);for(var g=0,w=0,b=0;m[g]===c;)w++,g++;for(var E=(m.length-g)*u+1>>>0,B=new Uint8Array(E);g<m.length;){var S=m.charCodeAt(g);if(S>255)return;var M=n[S];if(M===255)return;for(var I=0,k=E-1;(M!==0||I<b)&&k!==-1;k--,I++)M+=l*B[k]>>>0,B[k]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");b=I,g++}for(var O=E-b;O!==E&&B[O]===0;)O++;var C=r.allocUnsafe(w+(E-O));C.fill(0,0,w);for(var P=w;O!==E;)C[P++]=B[O++];return C}function v(m){var g=p(m);if(g)return g;throw new Error("Non-base"+l+" character")}return{encode:d,decodeUnsafe:p,decode:v}}return cR=e,cR}var uR,Dz;function dBe(){if(Dz)return uR;Dz=1;var r=hBe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return uR=r(e),uR}var pBe=dBe();const fs=na(pBe),Oz=vZ;var ar={},AR,Nz;function mBe(){if(Nz)return AR;Nz=1;var r=FZ().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var a=t.charAt(s),o=a.charCodeAt(0);if(n[o]!==255)throw new TypeError(a+" is ambiguous");n[o]=s}var l=t.length,c=t.charAt(0),u=Math.log(l)/Math.log(256),f=Math.log(256)/Math.log(l);function d(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=r.from(m)),!r.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var g=0,w=0,b=0,E=m.length;b!==E&&m[b]===0;)b++,g++;for(var B=(E-b)*f+1>>>0,S=new Uint8Array(B);b!==E;){for(var M=m[b],I=0,k=B-1;(M!==0||I<w)&&k!==-1;k--,I++)M+=256*S[k]>>>0,S[k]=M%l>>>0,M=M/l>>>0;if(M!==0)throw new Error("Non-zero carry");w=I,b++}for(var O=B-w;O!==B&&S[O]===0;)O++;for(var C=c.repeat(g);O<B;++O)C+=t.charAt(S[O]);return C}function p(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return r.alloc(0);for(var g=0,w=0,b=0;m[g]===c;)w++,g++;for(var E=(m.length-g)*u+1>>>0,B=new Uint8Array(E);g<m.length;){var S=m.charCodeAt(g);if(S>255)return;var M=n[S];if(M===255)return;for(var I=0,k=E-1;(M!==0||I<b)&&k!==-1;k--,I++)M+=l*B[k]>>>0,B[k]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");b=I,g++}for(var O=E-b;O!==E&&B[O]===0;)O++;var C=r.allocUnsafe(w+(E-O));C.fill(0,0,w);for(var P=w;O!==E;)C[P++]=B[O++];return C}function v(m){var g=p(m);if(g)return g;throw new Error("Non-base"+l+" character")}return{encode:d,decodeUnsafe:p,decode:v}}return AR=e,AR}var fR,Pz;function gBe(){if(Pz)return fR;Pz=1;var r=mBe(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return fR=r(e),fR}function cu(r,e,t){return e<=r&&r<=t}function ZE(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function vBe(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var a=r.charCodeAt(n+1);if(56320<=a&&a<=57343){var o=s&1023,l=a&1023;i.push(65536+(o<<10)+l),n+=1}else i.push(65533)}n+=1}return i}function yBe(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var I1=-1;function JO(r){this.tokens=[].slice.call(r)}JO.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():I1},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Om=-1;function hR(r,e){if(r)throw TypeError("Decoder error");return e||65533}var U1="utf-8";function F1(r,e){if(!(this instanceof F1))return new F1(r,e);if(r=r!==void 0?String(r).toLowerCase():U1,r!==U1)throw new Error("Encoding not supported. Only utf-8 is supported");e=ZE(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}F1.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=ZE(t),this._streaming||(this._decoder=new wBe({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new JO(n),s=[],a;!i.endOfStream()&&(a=this._decoder.handler(i,i.read()),a!==Om);)a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));if(!this._streaming){do{if(a=this._decoder.handler(i,i.read()),a===Om)break;a!==null&&(Array.isArray(a)?s.push.apply(s,a):s.push(a))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),yBe(s)}};function L1(r,e){if(!(this instanceof L1))return new L1(r,e);if(r=r!==void 0?String(r).toLowerCase():U1,r!==U1)throw new Error("Encoding not supported. Only utf-8 is supported");e=ZE(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}L1.prototype={encode:function(e,t){e=e?String(e):"",t=ZE(t),this._streaming||(this._encoder=new _Be(this._options)),this._streaming=!!t.stream;for(var n=[],i=new JO(vBe(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Om);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Om;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function wBe(r){var e=r.fatal,t=0,n=0,i=0,s=128,a=191;this.handler=function(o,l){if(l===I1&&i!==0)return i=0,hR(e);if(l===I1)return Om;if(i===0){if(cu(l,0,127))return l;if(cu(l,194,223))i=1,t=l-192;else if(cu(l,224,239))l===224&&(s=160),l===237&&(a=159),i=2,t=l-224;else if(cu(l,240,244))l===240&&(s=144),l===244&&(a=143),i=3,t=l-240;else return hR(e);return t=t<<6*i,null}if(!cu(l,s,a))return t=i=n=0,s=128,a=191,o.prepend(l),hR(e);if(s=128,a=191,n+=1,t+=l-128<<6*(i-n),n!==i)return null;var c=t;return t=i=n=0,c}}function _Be(r){r.fatal,this.handler=function(e,t){if(t===I1)return Om;if(cu(t,0,127))return t;var n,i;cu(t,128,2047)?(n=1,i=192):cu(t,2048,65535)?(n=2,i=224):cu(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var a=t>>6*(n-1);s.push(128|a&63),n-=1}return s}}const xBe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:F1,TextEncoder:L1},Symbol.toStringTag,{value:"Module"})),bBe=w7(xBe);var kz;function EBe(){if(kz)return ar;kz=1;var r=ar&&ar.__createBinding||(Object.create?function(O,C,P,D){D===void 0&&(D=P),Object.defineProperty(O,D,{enumerable:!0,get:function(){return C[P]}})}:function(O,C,P,D){D===void 0&&(D=P),O[D]=C[P]}),e=ar&&ar.__setModuleDefault||(Object.create?function(O,C){Object.defineProperty(O,"default",{enumerable:!0,value:C})}:function(O,C){O.default=C}),t=ar&&ar.__decorate||function(O,C,P,D){var F=arguments.length,_=F<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,P):D,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(O,C,P,D);else for(var L=O.length-1;L>=0;L--)(R=O[L])&&(_=(F<3?R(_):F>3?R(C,P,_):R(C,P))||_);return F>3&&_&&Object.defineProperty(C,P,_),_},n=ar&&ar.__importStar||function(O){if(O&&O.__esModule)return O;var C={};if(O!=null)for(var P in O)P!=="default"&&Object.hasOwnProperty.call(O,P)&&r(C,O,P);return e(C,O),C},i=ar&&ar.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(ar,"__esModule",{value:!0}),ar.deserializeUnchecked=ar.deserialize=ar.serialize=ar.BinaryReader=ar.BinaryWriter=ar.BorshError=ar.baseDecode=ar.baseEncode=void 0;const s=i(_7()),a=i(gBe()),o=n(bBe),l=typeof TextDecoder!="function"?o.TextDecoder:TextDecoder,c=new l("utf-8",{fatal:!0});function u(O){return typeof O=="string"&&(O=Buffer.from(O,"utf8")),a.default.encode(Buffer.from(O))}ar.baseEncode=u;function f(O){return Buffer.from(a.default.decode(O))}ar.baseDecode=f;const d=1024;class p extends Error{constructor(C){super(C),this.fieldPath=[],this.originalMessage=C}addToFieldPath(C){this.fieldPath.splice(0,0,C),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ar.BorshError=p;class v{constructor(){this.buf=Buffer.alloc(d),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(d)]))}writeU8(C){this.maybeResize(),this.buf.writeUInt8(C,this.length),this.length+=1}writeU16(C){this.maybeResize(),this.buf.writeUInt16LE(C,this.length),this.length+=2}writeU32(C){this.maybeResize(),this.buf.writeUInt32LE(C,this.length),this.length+=4}writeU64(C){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(C).toArray("le",8)))}writeU128(C){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(C).toArray("le",16)))}writeU256(C){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(C).toArray("le",32)))}writeU512(C){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(C).toArray("le",64)))}writeBuffer(C){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),C,Buffer.alloc(d)]),this.length+=C.length}writeString(C){this.maybeResize();const P=Buffer.from(C,"utf8");this.writeU32(P.length),this.writeBuffer(P)}writeFixedArray(C){this.writeBuffer(Buffer.from(C))}writeArray(C,P){this.maybeResize(),this.writeU32(C.length);for(const D of C)this.maybeResize(),P(D)}toArray(){return this.buf.subarray(0,this.length)}}ar.BinaryWriter=v;function m(O,C,P){const D=P.value;P.value=function(...F){try{return D.apply(this,F)}catch(_){if(_ instanceof RangeError){const R=_.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(R)>=0)throw new p("Reached the end of buffer when deserializing")}throw _}}}class g{constructor(C){this.buf=C,this.offset=0}readU8(){const C=this.buf.readUInt8(this.offset);return this.offset+=1,C}readU16(){const C=this.buf.readUInt16LE(this.offset);return this.offset+=2,C}readU32(){const C=this.buf.readUInt32LE(this.offset);return this.offset+=4,C}readU64(){const C=this.readBuffer(8);return new s.default(C,"le")}readU128(){const C=this.readBuffer(16);return new s.default(C,"le")}readU256(){const C=this.readBuffer(32);return new s.default(C,"le")}readU512(){const C=this.readBuffer(64);return new s.default(C,"le")}readBuffer(C){if(this.offset+C>this.buf.length)throw new p(`Expected buffer length ${C} isn't within bounds`);const P=this.buf.slice(this.offset,this.offset+C);return this.offset+=C,P}readString(){const C=this.readU32(),P=this.readBuffer(C);try{return c.decode(P)}catch(D){throw new p(`Error decoding UTF-8 string: ${D}`)}}readFixedArray(C){return new Uint8Array(this.readBuffer(C))}readArray(C){const P=this.readU32(),D=Array();for(let F=0;F<P;++F)D.push(C());return D}}t([m],g.prototype,"readU8",null),t([m],g.prototype,"readU16",null),t([m],g.prototype,"readU32",null),t([m],g.prototype,"readU64",null),t([m],g.prototype,"readU128",null),t([m],g.prototype,"readU256",null),t([m],g.prototype,"readU512",null),t([m],g.prototype,"readString",null),t([m],g.prototype,"readFixedArray",null),t([m],g.prototype,"readArray",null),ar.BinaryReader=g;function w(O){return O.charAt(0).toUpperCase()+O.slice(1)}function b(O,C,P,D,F){try{if(typeof D=="string")F[`write${w(D)}`](P);else if(D instanceof Array)if(typeof D[0]=="number"){if(P.length!==D[0])throw new p(`Expecting byte array of length ${D[0]}, but got ${P.length} bytes`);F.writeFixedArray(P)}else if(D.length===2&&typeof D[1]=="number"){if(P.length!==D[1])throw new p(`Expecting byte array of length ${D[1]}, but got ${P.length} bytes`);for(let _=0;_<D[1];_++)b(O,null,P[_],D[0],F)}else F.writeArray(P,_=>{b(O,C,_,D[0],F)});else if(D.kind!==void 0)switch(D.kind){case"option":{P==null?F.writeU8(0):(F.writeU8(1),b(O,C,P,D.type,F));break}case"map":{F.writeU32(P.size),P.forEach((_,R)=>{b(O,C,R,D.key,F),b(O,C,_,D.value,F)});break}default:throw new p(`FieldType ${D} unrecognized`)}else E(O,P,F)}catch(_){throw _ instanceof p&&_.addToFieldPath(C),_}}function E(O,C,P){if(typeof C.borshSerialize=="function"){C.borshSerialize(P);return}const D=O.get(C.constructor);if(!D)throw new p(`Class ${C.constructor.name} is missing in schema`);if(D.kind==="struct")D.fields.map(([F,_])=>{b(O,F,C[F],_,P)});else if(D.kind==="enum"){const F=C[D.field];for(let _=0;_<D.values.length;++_){const[R,L]=D.values[_];if(R===F){P.writeU8(_),b(O,R,C[R],L,P);break}}}else throw new p(`Unexpected schema kind: ${D.kind} for ${C.constructor.name}`)}function B(O,C,P=v){const D=new P;return E(O,C,D),D.toArray()}ar.serialize=B;function S(O,C,P,D){try{if(typeof P=="string")return D[`read${w(P)}`]();if(P instanceof Array){if(typeof P[0]=="number")return D.readFixedArray(P[0]);if(typeof P[1]=="number"){const F=[];for(let _=0;_<P[1];_++)F.push(S(O,null,P[0],D));return F}else return D.readArray(()=>S(O,C,P[0],D))}if(P.kind==="option")return D.readU8()?S(O,C,P.type,D):void 0;if(P.kind==="map"){let F=new Map;const _=D.readU32();for(let R=0;R<_;R++){const L=S(O,C,P.key,D),Q=S(O,C,P.value,D);F.set(L,Q)}return F}return M(O,P,D)}catch(F){throw F instanceof p&&F.addToFieldPath(C),F}}function M(O,C,P){if(typeof C.borshDeserialize=="function")return C.borshDeserialize(P);const D=O.get(C);if(!D)throw new p(`Class ${C.name} is missing in schema`);if(D.kind==="struct"){const F={};for(const[_,R]of O.get(C).fields)F[_]=S(O,_,R,P);return new C(F)}if(D.kind==="enum"){const F=P.readU8();if(F>=D.values.length)throw new p(`Enum index: ${F} is out of range`);const[_,R]=D.values[F],L=S(O,_,R,P);return new C({[_]:L})}throw new p(`Unexpected schema kind: ${D.kind} for ${C.constructor.name}`)}function I(O,C,P,D=g){const F=new D(P),_=M(O,C,F);if(F.offset<P.length)throw new p(`Unexpected ${P.length-F.offset} bytes after deserialized data`);return _}ar.deserialize=I;function k(O,C,P,D=g){const F=new D(P);return M(O,C,F)}return ar.deserializeUnchecked=k,ar}var dR=EBe(),ze={},Hz;function SBe(){if(Hz)return ze;Hz=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.s16=ze.s8=ze.nu64be=ze.u48be=ze.u40be=ze.u32be=ze.u24be=ze.u16be=ze.nu64=ze.u48=ze.u40=ze.u32=ze.u24=ze.u16=ze.u8=ze.offset=ze.greedy=ze.Constant=ze.UTF8=ze.CString=ze.Blob=ze.Boolean=ze.BitField=ze.BitStructure=ze.VariantLayout=ze.Union=ze.UnionLayoutDiscriminator=ze.UnionDiscriminator=ze.Structure=ze.Sequence=ze.DoubleBE=ze.Double=ze.FloatBE=ze.Float=ze.NearInt64BE=ze.NearInt64=ze.NearUInt64BE=ze.NearUInt64=ze.IntBE=ze.Int=ze.UIntBE=ze.UInt=ze.OffsetLayout=ze.GreedyCount=ze.ExternalLayout=ze.bindConstructorLayout=ze.nameWithProperty=ze.Layout=ze.uint8ArrayToBuffer=ze.checkUint8Array=void 0,ze.constant=ze.utf8=ze.cstr=ze.blob=ze.unionLayoutDiscriminator=ze.union=ze.seq=ze.bits=ze.struct=ze.f64be=ze.f64=ze.f32be=ze.f32=ze.ns64be=ze.s48be=ze.s40be=ze.s32be=ze.s24be=ze.s16be=ze.ns64=ze.s48=ze.s40=ze.s32=ze.s24=void 0;const r=oE();function e(T){if(!(T instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ze.checkUint8Array=e;function t(T){return e(T),r.Buffer.from(T.buffer,T.byteOffset,T.length)}ze.uint8ArrayToBuffer=t;let n=class{constructor(H,K){if(!Number.isInteger(H))throw new TypeError("span must be an integer");this.span=H,this.property=K}makeDestinationObject(){return{}}getSpan(H,K){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(H){const K=Object.create(this.constructor.prototype);return Object.assign(K,this),K.property=H,K}fromArray(H){}};ze.Layout=n;function i(T,H){return H.property?T+"["+H.property+"]":T}ze.nameWithProperty=i;function s(T,H){if(typeof T!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(T,"layout_"))throw new Error("Class is already bound to a layout");if(!(H&&H instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(H,"boundConstructor_"))throw new Error("layout is already bound to a constructor");T.layout_=H,H.boundConstructor_=T,H.makeDestinationObject=()=>new T,Object.defineProperty(T.prototype,"encode",{value(K,N){return H.encode(this,K,N)},writable:!0}),Object.defineProperty(T,"decode",{value(K,N){return H.decode(K,N)},writable:!0})}ze.bindConstructorLayout=s;class a extends n{isCount(){throw new Error("ExternalLayout is abstract")}}ze.ExternalLayout=a;class o extends a{constructor(H=1,K){if(!Number.isInteger(H)||0>=H)throw new TypeError("elementSpan must be a (positive) integer");super(-1,K),this.elementSpan=H}isCount(){return!0}decode(H,K=0){e(H);const N=H.length-K;return Math.floor(N/this.elementSpan)}encode(H,K,N){return 0}}ze.GreedyCount=o;class l extends a{constructor(H,K=0,N){if(!(H instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(K))throw new TypeError("offset must be integer or undefined");super(H.span,N||H.property),this.layout=H,this.offset=K}isCount(){return this.layout instanceof c||this.layout instanceof u}decode(H,K=0){return this.layout.decode(H,K+this.offset)}encode(H,K,N=0){return this.layout.encode(H,K,N+this.offset)}}ze.OffsetLayout=l;class c extends n{constructor(H,K){if(super(H,K),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(H,K=0){return t(H).readUIntLE(K,this.span)}encode(H,K,N=0){return t(K).writeUIntLE(H,N,this.span),this.span}}ze.UInt=c;class u extends n{constructor(H,K){if(super(H,K),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(H,K=0){return t(H).readUIntBE(K,this.span)}encode(H,K,N=0){return t(K).writeUIntBE(H,N,this.span),this.span}}ze.UIntBE=u;class f extends n{constructor(H,K){if(super(H,K),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(H,K=0){return t(H).readIntLE(K,this.span)}encode(H,K,N=0){return t(K).writeIntLE(H,N,this.span),this.span}}ze.Int=f;class d extends n{constructor(H,K){if(super(H,K),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(H,K=0){return t(H).readIntBE(K,this.span)}encode(H,K,N=0){return t(K).writeIntBE(H,N,this.span),this.span}}ze.IntBE=d;const p=Math.pow(2,32);function v(T){const H=Math.floor(T/p),K=T-H*p;return{hi32:H,lo32:K}}function m(T,H){return T*p+H}class g extends n{constructor(H){super(8,H)}decode(H,K=0){const N=t(H),te=N.readUInt32LE(K),oe=N.readUInt32LE(K+4);return m(oe,te)}encode(H,K,N=0){const te=v(H),oe=t(K);return oe.writeUInt32LE(te.lo32,N),oe.writeUInt32LE(te.hi32,N+4),8}}ze.NearUInt64=g;class w extends n{constructor(H){super(8,H)}decode(H,K=0){const N=t(H),te=N.readUInt32BE(K),oe=N.readUInt32BE(K+4);return m(te,oe)}encode(H,K,N=0){const te=v(H),oe=t(K);return oe.writeUInt32BE(te.hi32,N),oe.writeUInt32BE(te.lo32,N+4),8}}ze.NearUInt64BE=w;class b extends n{constructor(H){super(8,H)}decode(H,K=0){const N=t(H),te=N.readUInt32LE(K),oe=N.readInt32LE(K+4);return m(oe,te)}encode(H,K,N=0){const te=v(H),oe=t(K);return oe.writeUInt32LE(te.lo32,N),oe.writeInt32LE(te.hi32,N+4),8}}ze.NearInt64=b;class E extends n{constructor(H){super(8,H)}decode(H,K=0){const N=t(H),te=N.readInt32BE(K),oe=N.readUInt32BE(K+4);return m(te,oe)}encode(H,K,N=0){const te=v(H),oe=t(K);return oe.writeInt32BE(te.hi32,N),oe.writeUInt32BE(te.lo32,N+4),8}}ze.NearInt64BE=E;class B extends n{constructor(H){super(4,H)}decode(H,K=0){return t(H).readFloatLE(K)}encode(H,K,N=0){return t(K).writeFloatLE(H,N),4}}ze.Float=B;class S extends n{constructor(H){super(4,H)}decode(H,K=0){return t(H).readFloatBE(K)}encode(H,K,N=0){return t(K).writeFloatBE(H,N),4}}ze.FloatBE=S;class M extends n{constructor(H){super(8,H)}decode(H,K=0){return t(H).readDoubleLE(K)}encode(H,K,N=0){return t(K).writeDoubleLE(H,N),8}}ze.Double=M;class I extends n{constructor(H){super(8,H)}decode(H,K=0){return t(H).readDoubleBE(K)}encode(H,K,N=0){return t(K).writeDoubleBE(H,N),8}}ze.DoubleBE=I;class k extends n{constructor(H,K,N){if(!(H instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(K instanceof a&&K.isCount()||Number.isInteger(K)&&0<=K))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let te=-1;!(K instanceof a)&&0<H.span&&(te=K*H.span),super(te,N),this.elementLayout=H,this.count=K}getSpan(H,K=0){if(0<=this.span)return this.span;let N=0,te=this.count;if(te instanceof a&&(te=te.decode(H,K)),0<this.elementLayout.span)N=te*this.elementLayout.span;else{let oe=0;for(;oe<te;)N+=this.elementLayout.getSpan(H,K+N),++oe}return N}decode(H,K=0){const N=[];let te=0,oe=this.count;for(oe instanceof a&&(oe=oe.decode(H,K));te<oe;)N.push(this.elementLayout.decode(H,K)),K+=this.elementLayout.getSpan(H,K),te+=1;return N}encode(H,K,N=0){const te=this.elementLayout,oe=H.reduce((fe,he)=>fe+te.encode(he,K,N+fe),0);return this.count instanceof a&&this.count.encode(H.length,K,N),oe}}ze.Sequence=k;class O extends n{constructor(H,K,N){if(!(Array.isArray(H)&&H.reduce((oe,fe)=>oe&&fe instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof K=="boolean"&&N===void 0&&(N=K,K=void 0);for(const oe of H)if(0>oe.span&&oe.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let te=-1;try{te=H.reduce((oe,fe)=>oe+fe.getSpan(),0)}catch{}super(te,K),this.fields=H,this.decodePrefixes=!!N}getSpan(H,K=0){if(0<=this.span)return this.span;let N=0;try{N=this.fields.reduce((te,oe)=>{const fe=oe.getSpan(H,K);return K+=fe,te+fe},0)}catch{throw new RangeError("indeterminate span")}return N}decode(H,K=0){e(H);const N=this.makeDestinationObject();for(const te of this.fields)if(te.property!==void 0&&(N[te.property]=te.decode(H,K)),K+=te.getSpan(H,K),this.decodePrefixes&&H.length===K)break;return N}encode(H,K,N=0){const te=N;let oe=0,fe=0;for(const he of this.fields){let me=he.span;if(fe=0<me?me:0,he.property!==void 0){const Te=H[he.property];Te!==void 0&&(fe=he.encode(Te,K,N),0>me&&(me=he.getSpan(K,N)))}oe=N,N+=me}return oe+fe-te}fromArray(H){const K=this.makeDestinationObject();for(const N of this.fields)N.property!==void 0&&0<H.length&&(K[N.property]=H.shift());return K}layoutFor(H){if(typeof H!="string")throw new TypeError("property must be string");for(const K of this.fields)if(K.property===H)return K}offsetOf(H){if(typeof H!="string")throw new TypeError("property must be string");let K=0;for(const N of this.fields){if(N.property===H)return K;0>N.span?K=-1:0<=K&&(K+=N.span)}}}ze.Structure=O;class C{constructor(H){this.property=H}decode(H,K){throw new Error("UnionDiscriminator is abstract")}encode(H,K,N){throw new Error("UnionDiscriminator is abstract")}}ze.UnionDiscriminator=C;class P extends C{constructor(H,K){if(!(H instanceof a&&H.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(K||H.property||"variant"),this.layout=H}decode(H,K){return this.layout.decode(H,K)}encode(H,K,N){return this.layout.encode(H,K,N)}}ze.UnionLayoutDiscriminator=P;class D extends n{constructor(H,K,N){let te;if(H instanceof c||H instanceof u)te=new P(new l(H));else if(H instanceof a&&H.isCount())te=new P(H);else if(H instanceof C)te=H;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(K===void 0&&(K=null),!(K===null||K instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(K!==null){if(0>K.span)throw new Error("defaultLayout must have constant span");K.property===void 0&&(K=K.replicate("content"))}let oe=-1;K&&(oe=K.span,0<=oe&&(H instanceof c||H instanceof u)&&(oe+=te.layout.span)),super(oe,N),this.discriminator=te,this.usesPrefixDiscriminator=H instanceof c||H instanceof u,this.defaultLayout=K,this.registry={};let fe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(he){return fe(he)},this.configGetSourceVariant=function(he){fe=he.bind(this)}}getSpan(H,K=0){if(0<=this.span)return this.span;const N=this.getVariant(H,K);if(!N)throw new Error("unable to determine span for unrecognized variant");return N.getSpan(H,K)}defaultGetSourceVariant(H){if(Object.prototype.hasOwnProperty.call(H,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(H,this.defaultLayout.property))return;const K=this.registry[H[this.discriminator.property]];if(K&&(!K.layout||K.property&&Object.prototype.hasOwnProperty.call(H,K.property)))return K}else for(const K in this.registry){const N=this.registry[K];if(N.property&&Object.prototype.hasOwnProperty.call(H,N.property))return N}throw new Error("unable to infer src variant")}decode(H,K=0){let N;const te=this.discriminator,oe=te.decode(H,K),fe=this.registry[oe];if(fe===void 0){const he=this.defaultLayout;let me=0;this.usesPrefixDiscriminator&&(me=te.layout.span),N=this.makeDestinationObject(),N[te.property]=oe,N[he.property]=he.decode(H,K+me)}else N=fe.decode(H,K);return N}encode(H,K,N=0){const te=this.getSourceVariant(H);if(te===void 0){const oe=this.discriminator,fe=this.defaultLayout;let he=0;return this.usesPrefixDiscriminator&&(he=oe.layout.span),oe.encode(H[oe.property],K,N),he+fe.encode(H[fe.property],K,N+he)}return te.encode(H,K,N)}addVariant(H,K,N){const te=new F(this,H,K,N);return this.registry[H]=te,te}getVariant(H,K=0){let N;return H instanceof Uint8Array?N=this.discriminator.decode(H,K):N=H,this.registry[N]}}ze.Union=D;class F extends n{constructor(H,K,N,te){if(!(H instanceof D))throw new TypeError("union must be a Union");if(!Number.isInteger(K)||0>K)throw new TypeError("variant must be a (non-negative) integer");if(typeof N=="string"&&te===void 0&&(te=N,N=null),N){if(!(N instanceof n))throw new TypeError("layout must be a Layout");if(H.defaultLayout!==null&&0<=N.span&&N.span>H.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof te!="string")throw new TypeError("variant must have a String property")}let oe=H.span;0>H.span&&(oe=N?N.span:0,0<=oe&&H.usesPrefixDiscriminator&&(oe+=H.discriminator.layout.span)),super(oe,te),this.union=H,this.variant=K,this.layout=N||null}getSpan(H,K=0){if(0<=this.span)return this.span;let N=0;this.union.usesPrefixDiscriminator&&(N=this.union.discriminator.layout.span);let te=0;return this.layout&&(te=this.layout.getSpan(H,K+N)),N+te}decode(H,K=0){const N=this.makeDestinationObject();if(this!==this.union.getVariant(H,K))throw new Error("variant mismatch");let te=0;return this.union.usesPrefixDiscriminator&&(te=this.union.discriminator.layout.span),this.layout?N[this.property]=this.layout.decode(H,K+te):this.property?N[this.property]=!0:this.union.usesPrefixDiscriminator&&(N[this.union.discriminator.property]=this.variant),N}encode(H,K,N=0){let te=0;if(this.union.usesPrefixDiscriminator&&(te=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(H,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,K,N);let oe=te;if(this.layout&&(this.layout.encode(H[this.property],K,N+te),oe+=this.layout.getSpan(K,N+te),0<=this.union.span&&oe>this.union.span))throw new Error("encoded variant overruns containing union");return oe}fromArray(H){if(this.layout)return this.layout.fromArray(H)}}ze.VariantLayout=F;function _(T){return 0>T&&(T+=4294967296),T}class R extends n{constructor(H,K,N){if(!(H instanceof c||H instanceof u))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof K=="string"&&N===void 0&&(N=K,K=!1),4<H.span)throw new RangeError("word cannot exceed 32 bits");super(H.span,N),this.word=H,this.msb=!!K,this.fields=[];let te=0;this._packedSetValue=function(oe){return te=_(oe),this},this._packedGetValue=function(){return te}}decode(H,K=0){const N=this.makeDestinationObject(),te=this.word.decode(H,K);this._packedSetValue(te);for(const oe of this.fields)oe.property!==void 0&&(N[oe.property]=oe.decode(H));return N}encode(H,K,N=0){const te=this.word.decode(K,N);this._packedSetValue(te);for(const oe of this.fields)if(oe.property!==void 0){const fe=H[oe.property];fe!==void 0&&oe.encode(fe)}return this.word.encode(this._packedGetValue(),K,N)}addField(H,K){const N=new L(this,H,K);return this.fields.push(N),N}addBoolean(H){const K=new Q(this,H);return this.fields.push(K),K}fieldFor(H){if(typeof H!="string")throw new TypeError("property must be string");for(const K of this.fields)if(K.property===H)return K}}ze.BitStructure=R;class L{constructor(H,K,N){if(!(H instanceof R))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(K)||0>=K)throw new TypeError("bits must be positive integer");const te=8*H.span,oe=H.fields.reduce((fe,he)=>fe+he.bits,0);if(K+oe>te)throw new Error("bits too long for span remainder ("+(te-oe)+" of "+te+" remain)");this.container=H,this.bits=K,this.valueMask=(1<<K)-1,K===32&&(this.valueMask=4294967295),this.start=oe,this.container.msb&&(this.start=te-oe-K),this.wordMask=_(this.valueMask<<this.start),this.property=N}decode(H,K){const N=this.container._packedGetValue();return _(N&this.wordMask)>>>this.start}encode(H){if(typeof H!="number"||!Number.isInteger(H)||H!==_(H&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const K=this.container._packedGetValue(),N=_(H<<this.start);this.container._packedSetValue(_(K&~this.wordMask)|N)}}ze.BitField=L;class Q extends L{constructor(H,K){super(H,1,K)}decode(H,K){return!!super.decode(H,K)}encode(H){typeof H=="boolean"&&(H=+H),super.encode(H)}}ze.Boolean=Q;class G extends n{constructor(H,K){if(!(H instanceof a&&H.isCount()||Number.isInteger(H)&&0<=H))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let N=-1;H instanceof a||(N=H),super(N,K),this.length=H}getSpan(H,K){let N=this.span;return 0>N&&(N=this.length.decode(H,K)),N}decode(H,K=0){let N=this.span;return 0>N&&(N=this.length.decode(H,K)),t(H).slice(K,K+N)}encode(H,K,N){let te=this.length;if(this.length instanceof a&&(te=H.length),!(H instanceof Uint8Array&&te===H.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+te+") Uint8Array as src");if(N+te>K.length)throw new RangeError("encoding overruns Uint8Array");const oe=t(H);return t(K).write(oe.toString("hex"),N,te,"hex"),this.length instanceof a&&this.length.encode(te,K,N),te}}ze.Blob=G;class Y extends n{constructor(H){super(-1,H)}getSpan(H,K=0){e(H);let N=K;for(;N<H.length&&H[N]!==0;)N+=1;return 1+N-K}decode(H,K=0){const N=this.getSpan(H,K);return t(H).slice(K,K+N-1).toString("utf-8")}encode(H,K,N=0){typeof H!="string"&&(H=String(H));const te=r.Buffer.from(H,"utf8"),oe=te.length;if(N+oe>K.length)throw new RangeError("encoding overruns Buffer");const fe=t(K);return te.copy(fe,N),fe[N+oe]=0,oe+1}}ze.CString=Y;class W extends n{constructor(H,K){if(typeof H=="string"&&K===void 0&&(K=H,H=void 0),H===void 0)H=-1;else if(!Number.isInteger(H))throw new TypeError("maxSpan must be an integer");super(-1,K),this.maxSpan=H}getSpan(H,K=0){return e(H),H.length-K}decode(H,K=0){const N=this.getSpan(H,K);if(0<=this.maxSpan&&this.maxSpan<N)throw new RangeError("text length exceeds maxSpan");return t(H).slice(K,K+N).toString("utf-8")}encode(H,K,N=0){typeof H!="string"&&(H=String(H));const te=r.Buffer.from(H,"utf8"),oe=te.length;if(0<=this.maxSpan&&this.maxSpan<oe)throw new RangeError("text length exceeds maxSpan");if(N+oe>K.length)throw new RangeError("encoding overruns Buffer");return te.copy(t(K),N),oe}}ze.UTF8=W;class V extends n{constructor(H,K){super(0,K),this.value=H}decode(H,K){return this.value}encode(H,K,N){return 0}}return ze.Constant=V,ze.greedy=(T,H)=>new o(T,H),ze.offset=(T,H,K)=>new l(T,H,K),ze.u8=T=>new c(1,T),ze.u16=T=>new c(2,T),ze.u24=T=>new c(3,T),ze.u32=T=>new c(4,T),ze.u40=T=>new c(5,T),ze.u48=T=>new c(6,T),ze.nu64=T=>new g(T),ze.u16be=T=>new u(2,T),ze.u24be=T=>new u(3,T),ze.u32be=T=>new u(4,T),ze.u40be=T=>new u(5,T),ze.u48be=T=>new u(6,T),ze.nu64be=T=>new w(T),ze.s8=T=>new f(1,T),ze.s16=T=>new f(2,T),ze.s24=T=>new f(3,T),ze.s32=T=>new f(4,T),ze.s40=T=>new f(5,T),ze.s48=T=>new f(6,T),ze.ns64=T=>new b(T),ze.s16be=T=>new d(2,T),ze.s24be=T=>new d(3,T),ze.s32be=T=>new d(4,T),ze.s40be=T=>new d(5,T),ze.s48be=T=>new d(6,T),ze.ns64be=T=>new E(T),ze.f32=T=>new B(T),ze.f32be=T=>new S(T),ze.f64=T=>new M(T),ze.f64be=T=>new I(T),ze.struct=(T,H,K)=>new O(T,H,K),ze.bits=(T,H,K)=>new R(T,H,K),ze.seq=(T,H,K)=>new k(T,H,K),ze.union=(T,H,K)=>new D(T,H,K),ze.unionLayoutDiscriminator=(T,H)=>new P(T,H),ze.blob=(T,H)=>new G(T,H),ze.cstr=T=>new Y(T),ze.utf8=(T,H)=>new W(T,H),ze.constant=(T,H)=>new V(T,H),ze}var Ce=SBe(),BBe=8078e3,MBe=8078001,CBe=8078004,TBe=8078005,RBe=8078006,IBe=8078011;function LZ(r){return Array.isArray(r)?"%5B"+r.map(LZ).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function UBe([r,e]){return`${r}=${LZ(e)}`}function FBe(r){const e=Object.entries(r).map(UBe).join("&");return btoa(e)}function LBe(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${FBe(e)}'`),`${t}\``}}var um=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){const{cause:s,...a}=e;s&&(n={cause:s}),Object.keys(a).length>0&&(t=a)}const i=LBe(r,t);super(i,n),this.context={__code:r,...t},this.name="SolanaError"}};function DBe(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function OBe(r){return Object.freeze({...r,encode:e=>{const t=new Uint8Array(DBe(e,r));return r.write(e,t,0),t}})}function NBe(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function tp(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function PBe(r,e){if(tp(r)!==tp(e))throw new um(CBe);if(tp(r)&&tp(e)&&r.fixedSize!==e.fixedSize)throw new um(TBe,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!tp(r)&&!tp(e)&&r.maxSize!==e.maxSize)throw new um(RBe,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function kBe(r,e,t=0){if(e.length-t<=0)throw new um(BBe,{codecDescription:r})}function HBe(r,e,t,n=0){const i=t.length-n;if(i<e)throw new um(MBe,{bytesLength:i,codecDescription:r,expected:e})}function QBe(r,e,t,n){if(n<e||n>t)throw new um(IBe,{codecDescription:r,max:t,min:e,value:n})}function DZ(r){return r?.endian!==1}function zBe(r){return OBe({fixedSize:r.size,write(e,t,n){r.range&&QBe(r.name,r.range[0],r.range[1],e);const i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,DZ(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function VBe(r){return NBe({fixedSize:r.size,read(e,t=0){kBe(r.name,e,t),HBe(r.name,r.size,e,t);const n=new DataView(GBe(e,t,r.size));return[r.get(n,DZ(r.config)),t+r.size]}})}function GBe(r,e,t){const n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var jBe=(r={})=>zBe({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),WBe=(r={})=>VBe({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),KBe=(r={})=>PBe(jBe(r),WBe(r));class qBe extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...a}=e,{path:o}=e,l=o.length===0?i:`At path: ${o.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function YBe(r){return Dy(r)&&typeof r[Symbol.iterator]=="function"}function Dy(r){return typeof r=="object"&&r!=null}function D1(r){return Dy(r)&&!Array.isArray(r)}function _l(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function XBe(r){const{done:e,value:t}=r.next();return e?void 0:t}function ZBe(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:a}=t,{refinement:o,message:l=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${_l(n)}\``}=r;return{value:n,type:a,refinement:o,key:i[i.length-1],path:i,branch:s,...r,message:l}}function*Qz(r,e,t,n){YBe(r)||(r=[r]);for(const i of r){const s=ZBe(i,e,t,n);s&&(yield s)}}function*$O(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:a=!1}=t,o={path:n,branch:i,mask:a};s&&(r=e.coercer(r,o));let l="valid";for(const c of e.validator(r,o))c.explanation=t.message,l="not_valid",yield[c,void 0];for(let[c,u,f]of e.entries(r,o)){const d=$O(u,f,{path:c===void 0?n:[...n,c],branch:c===void 0?i:[...i,u],coerce:s,mask:a,message:t.message});for(const p of d)p[0]?(l=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):s&&(u=p[1],c===void 0?r=u:r instanceof Map?r.set(c,u):r instanceof Set?r.add(u):Dy(r)&&(u!==void 0||c in r)&&(r[c]=u))}if(l!=="not_valid")for(const c of e.refiner(r,o))c.explanation=t.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,r])}let yc=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:a=l=>l,entries:o=function*(){}}=e;this.type=t,this.schema=n,this.entries=o,this.coercer=a,i?this.validator=(l,c)=>{const u=i(l,c);return Qz(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return Qz(u,c,this,l)}:this.refiner=()=>[]}assert(e,t){return JBe(e,this,t)}create(e,t){return ft(e,this,t)}is(e){return OZ(e,this)}mask(e,t){return $Be(e,this,t)}validate(e,t={}){return Oy(e,this,t)}};function JBe(r,e,t){const n=Oy(r,e,{message:t});if(n[0])throw n[0]}function ft(r,e,t){const n=Oy(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function $Be(r,e,t){const n=Oy(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function OZ(r,e){return!Oy(r,e)[0]}function Oy(r,e,t={}){const n=$O(r,e,t),i=XBe(n);return i[0]?[new qBe(i[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,i[1]]}function Mh(r,e){return new yc({type:r,schema:null,validator:e})}function eMe(){return Mh("any",()=>!0)}function gt(r){return new yc({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${_l(e)}`}})}function hc(){return Mh("boolean",r=>typeof r=="boolean")}function eN(r){return Mh("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${_l(e)}`)}function Qr(r){const e=_l(r),t=typeof r;return new yc({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${_l(n)}`}})}function tMe(){return Mh("never",()=>!1)}function vt(r){return new yc({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function He(){return Mh("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${_l(r)}`)}function Qt(r){return new yc({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function NZ(r,e){return new yc({type:"record",schema:null,*entries(t){if(Dy(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return D1(t)||`Expected an object, but received: ${_l(t)}`},coercer(t){return D1(t)?{...t}:t}})}function ot(){return Mh("string",r=>typeof r=="string"||`Expected a string, but received: ${_l(r)}`)}function tN(r){const e=tMe();return new yc({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${_l(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function tt(r){const e=Object.keys(r);return new yc({type:"type",schema:r,*entries(t){if(Dy(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return D1(t)||`Expected an object, but received: ${_l(t)}`},coercer(t){return D1(t)?{...t}:t}})}function ta(r){const e=r.map(t=>t.type).join(" | ");return new yc({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,a]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return a}return t},validator(t,n){const i=[];for(const s of r){const[...a]=$O(t,s,n),[o]=a;if(o[0])for(const[l]of a)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${_l(t)}`,...i]}})}function Xm(){return Mh("unknown",()=>!0)}function Ny(r,e,t){return new yc({...r,coercer:(n,i)=>OZ(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var Dx,nMe=new Uint8Array(16);function PZ(){if(!Dx&&(Dx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Dx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dx(nMe)}const rMe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function JE(r){return typeof r=="string"&&rMe.test(r)}var cs=[];for(var pR=0;pR<256;++pR)cs.push((pR+256).toString(16).substr(1));function $E(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(cs[r[e+0]]+cs[r[e+1]]+cs[r[e+2]]+cs[r[e+3]]+"-"+cs[r[e+4]]+cs[r[e+5]]+"-"+cs[r[e+6]]+cs[r[e+7]]+"-"+cs[r[e+8]]+cs[r[e+9]]+"-"+cs[r[e+10]]+cs[r[e+11]]+cs[r[e+12]]+cs[r[e+13]]+cs[r[e+14]]+cs[r[e+15]]).toLowerCase();if(!JE(t))throw TypeError("Stringified UUID is invalid");return t}var zz,mR,gR=0,vR=0;function iMe(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||zz,a=r.clockseq!==void 0?r.clockseq:mR;if(s==null||a==null){var o=r.random||(r.rng||PZ)();s==null&&(s=zz=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),a==null&&(a=mR=(o[6]<<8|o[7])&16383)}var l=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:vR+1,u=l-gR+(c-vR)/1e4;if(u<0&&r.clockseq===void 0&&(a=a+1&16383),(u<0||l>gR)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");gR=l,vR=c,mR=a,l+=122192928e5;var f=((l&268435455)*1e4+c)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;var d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(var p=0;p<6;++p)i[n+p]=s[p];return e||$E(i)}function kZ(r){if(!JE(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function sMe(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var aMe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",oMe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function HZ(r,e,t){function n(i,s,a,o){if(typeof i=="string"&&(i=sMe(i)),typeof s=="string"&&(s=kZ(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,a){o=o||0;for(var c=0;c<16;++c)a[o+c]=l[c];return a}return $E(l)}try{n.name=r}catch{}return n.DNS=aMe,n.URL=oMe,n}function lMe(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return cMe(uMe(AMe(r),r.length*8))}function cMe(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(a)}return e}function QZ(r){return(r+64>>>9<<4)+14+1}function uMe(r,e){r[e>>5]|=128<<e%32,r[QZ(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,a=0;a<r.length;a+=16){var o=t,l=n,c=i,u=s;t=Cs(t,n,i,s,r[a],7,-680876936),s=Cs(s,t,n,i,r[a+1],12,-389564586),i=Cs(i,s,t,n,r[a+2],17,606105819),n=Cs(n,i,s,t,r[a+3],22,-1044525330),t=Cs(t,n,i,s,r[a+4],7,-176418897),s=Cs(s,t,n,i,r[a+5],12,1200080426),i=Cs(i,s,t,n,r[a+6],17,-1473231341),n=Cs(n,i,s,t,r[a+7],22,-45705983),t=Cs(t,n,i,s,r[a+8],7,1770035416),s=Cs(s,t,n,i,r[a+9],12,-1958414417),i=Cs(i,s,t,n,r[a+10],17,-42063),n=Cs(n,i,s,t,r[a+11],22,-1990404162),t=Cs(t,n,i,s,r[a+12],7,1804603682),s=Cs(s,t,n,i,r[a+13],12,-40341101),i=Cs(i,s,t,n,r[a+14],17,-1502002290),n=Cs(n,i,s,t,r[a+15],22,1236535329),t=Ts(t,n,i,s,r[a+1],5,-165796510),s=Ts(s,t,n,i,r[a+6],9,-1069501632),i=Ts(i,s,t,n,r[a+11],14,643717713),n=Ts(n,i,s,t,r[a],20,-373897302),t=Ts(t,n,i,s,r[a+5],5,-701558691),s=Ts(s,t,n,i,r[a+10],9,38016083),i=Ts(i,s,t,n,r[a+15],14,-660478335),n=Ts(n,i,s,t,r[a+4],20,-405537848),t=Ts(t,n,i,s,r[a+9],5,568446438),s=Ts(s,t,n,i,r[a+14],9,-1019803690),i=Ts(i,s,t,n,r[a+3],14,-187363961),n=Ts(n,i,s,t,r[a+8],20,1163531501),t=Ts(t,n,i,s,r[a+13],5,-1444681467),s=Ts(s,t,n,i,r[a+2],9,-51403784),i=Ts(i,s,t,n,r[a+7],14,1735328473),n=Ts(n,i,s,t,r[a+12],20,-1926607734),t=Rs(t,n,i,s,r[a+5],4,-378558),s=Rs(s,t,n,i,r[a+8],11,-2022574463),i=Rs(i,s,t,n,r[a+11],16,1839030562),n=Rs(n,i,s,t,r[a+14],23,-35309556),t=Rs(t,n,i,s,r[a+1],4,-1530992060),s=Rs(s,t,n,i,r[a+4],11,1272893353),i=Rs(i,s,t,n,r[a+7],16,-155497632),n=Rs(n,i,s,t,r[a+10],23,-1094730640),t=Rs(t,n,i,s,r[a+13],4,681279174),s=Rs(s,t,n,i,r[a],11,-358537222),i=Rs(i,s,t,n,r[a+3],16,-722521979),n=Rs(n,i,s,t,r[a+6],23,76029189),t=Rs(t,n,i,s,r[a+9],4,-640364487),s=Rs(s,t,n,i,r[a+12],11,-421815835),i=Rs(i,s,t,n,r[a+15],16,530742520),n=Rs(n,i,s,t,r[a+2],23,-995338651),t=Is(t,n,i,s,r[a],6,-198630844),s=Is(s,t,n,i,r[a+7],10,1126891415),i=Is(i,s,t,n,r[a+14],15,-1416354905),n=Is(n,i,s,t,r[a+5],21,-57434055),t=Is(t,n,i,s,r[a+12],6,1700485571),s=Is(s,t,n,i,r[a+3],10,-1894986606),i=Is(i,s,t,n,r[a+10],15,-1051523),n=Is(n,i,s,t,r[a+1],21,-2054922799),t=Is(t,n,i,s,r[a+8],6,1873313359),s=Is(s,t,n,i,r[a+15],10,-30611744),i=Is(i,s,t,n,r[a+6],15,-1560198380),n=Is(n,i,s,t,r[a+13],21,1309151649),t=Is(t,n,i,s,r[a+4],6,-145523070),s=Is(s,t,n,i,r[a+11],10,-1120210379),i=Is(i,s,t,n,r[a+2],15,718787259),n=Is(n,i,s,t,r[a+9],21,-343485551),t=zA(t,o),n=zA(n,l),i=zA(i,c),s=zA(s,u)}return[t,n,i,s]}function AMe(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(QZ(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function zA(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function fMe(r,e){return r<<e|r>>>32-e}function eS(r,e,t,n,i,s){return zA(fMe(zA(zA(e,r),zA(n,s)),i),t)}function Cs(r,e,t,n,i,s,a){return eS(e&t|~e&n,r,e,i,s,a)}function Ts(r,e,t,n,i,s,a){return eS(e&n|t&~n,r,e,i,s,a)}function Rs(r,e,t,n,i,s,a){return eS(e^t^n,r,e,i,s,a)}function Is(r,e,t,n,i,s,a){return eS(t^(e|~n),r,e,i,s,a)}var hMe=HZ("v3",48,lMe);function dMe(r,e,t){r=r||{};var n=r.random||(r.rng||PZ)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return $E(n)}function pMe(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function yR(r,e){return r<<e|r>>>32-e}function mMe(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,a=Math.ceil(s/16),o=new Array(a),l=0;l<a;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=r[l*64+u*4]<<24|r[l*64+u*4+1]<<16|r[l*64+u*4+2]<<8|r[l*64+u*4+3];o[l]=c}o[a-1][14]=(r.length-1)*8/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=(r.length-1)*8&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=o[f][p];for(var v=16;v<80;++v)d[v]=yR(d[v-3]^d[v-8]^d[v-14]^d[v-16],1);for(var m=t[0],g=t[1],w=t[2],b=t[3],E=t[4],B=0;B<80;++B){var S=Math.floor(B/20),M=yR(m,5)+pMe(S,g,w,b)+E+e[S]+d[B]>>>0;E=b,b=w,w=yR(g,30)>>>0,g=m,m=M}t[0]=t[0]+m>>>0,t[1]=t[1]+g>>>0,t[2]=t[2]+w>>>0,t[3]=t[3]+b>>>0,t[4]=t[4]+E>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var gMe=HZ("v5",80,mMe);const vMe="00000000-0000-0000-0000-000000000000";function yMe(r){if(!JE(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const wMe=Object.freeze(Object.defineProperty({__proto__:null,NIL:vMe,parse:kZ,stringify:$E,v1:iMe,v3:hMe,v4:dMe,v5:gMe,validate:JE,version:yMe},Symbol.toStringTag,{value:"Module"})),zZ=w7(wMe);var wR,Vz;function _Me(){if(Vz)return wR;Vz=1;const r=zZ.v4;return wR=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const a=typeof s.version=="number"?s.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const o={method:t};if(a===2&&(o.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");o.params=n}if(typeof i>"u"){const l=typeof s.generator=="function"?s.generator:function(){return r()};o.id=l(o,s)}else a===2&&i===null?s.notificationIdNull&&(o.id=null):o.id=i;return o},wR}var _R,Gz;function xMe(){if(Gz)return _R;Gz=1;const r=zZ.v4,e=_Me(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return _R=t,t.prototype.request=function(n,i,s,a){const o=this;let l=null;const c=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&c)throw new TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&n&&typeof n=="object"&&typeof i=="function")a=i,l=n;else{typeof s=="function"&&(a=s,s=void 0);const d=typeof a=="function";try{l=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(d)return a(p);throw p}if(!d)return l}let f;try{f=JSON.stringify(l,this.options.replacer)}catch(d){return a(d)}return this.callServer(f,function(d,p){o._parseResponse(d,p,a)}),l},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let a;try{a=JSON.parse(i,this.options.reviver)}catch(o){return s(o)}if(s.length===3)if(Array.isArray(a)){const o=function(c){return typeof c.error<"u"},l=function(c){return!o(c)};return s(null,a.filter(o),a.filter(l))}else return s(null,a.error,a.result);s(null,a)},_R}var bMe=xMe();const EMe=na(bMe);var xR={exports:{}},jz;function SMe(){return jz||(jz=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,f||l,d),v=t?t+c:c;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,v=new Array(p);d<p;d++)v[d]=f[d].fn;return v},o.prototype.listenerCount=function(c){var u=t?t+c:c,f=this._events[u];return f?f.fn?1:f.length:0},o.prototype.emit=function(c,u,f,d,p,v){var m=t?t+c:c;if(!this._events[m])return!1;var g=this._events[m],w=arguments.length,b,E;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),w){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,d),!0;case 5:return g.fn.call(g.context,u,f,d,p),!0;case 6:return g.fn.call(g.context,u,f,d,p,v),!0}for(E=1,b=new Array(w-1);E<w;E++)b[E-1]=arguments[E];g.fn.apply(g.context,b)}else{var B=g.length,S;for(E=0;E<B;E++)switch(g[E].once&&this.removeListener(c,g[E].fn,void 0,!0),w){case 1:g[E].fn.call(g[E].context);break;case 2:g[E].fn.call(g[E].context,u);break;case 3:g[E].fn.call(g[E].context,u,f);break;case 4:g[E].fn.call(g[E].context,u,f,d);break;default:if(!b)for(S=1,b=new Array(w-1);S<w;S++)b[S-1]=arguments[S];g[E].fn.apply(g[E].context,b)}}return!0},o.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},o.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},o.prototype.removeListener=function(c,u,f,d){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!d||v.once)&&(!f||v.context===f)&&a(this,p);else{for(var m=0,g=[],w=v.length;m<w;m++)(v[m].fn!==u||d&&!v[m].once||f&&v[m].context!==f)&&g.push(v[m]);g.length?this._events[p]=g.length===1?g[0]:g:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o}(xR)),xR.exports}var BMe=SMe();const VZ=na(BMe);var MMe=class extends VZ{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(i){n(i)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function CMe(r,e){return new MMe(r,e)}var TMe=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},RMe=class extends VZ{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...a}={},o,l){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=o||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new TMe,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const a=this.generate_request_id(r,e),o={jsonrpc:"2.0",method:r,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(o),n,l=>{if(l)return s(l);this.queue[a]={promise:[i,s]},t&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],s(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(i),s=>{if(s)return n(s);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=un.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let i=0;i<t.params.length;i++)n.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};class GZ extends hZ{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,dSe(e);const n=YO(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),Fm(s)}update(e){return T1(this),this.iHash.update(e),this}digestInto(e){T1(this),fc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const jZ=(r,e,t)=>new GZ(r,e).update(t).digest();jZ.create=(r,e)=>new GZ(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wz(r){r.lowS!==void 0&&wh("lowS",r.lowS),r.prehash!==void 0&&wh("prehash",r.prehash)}class IMe extends Error{constructor(e=""){super(e)}}const su={Err:IMe,_tlv:{encode:(r,e)=>{const{Err:t}=su;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=Fx(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?Fx(i.length/2|128):"";return Fx(r)+s+i+e},decode(r,e){const{Err:t}=su;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const l=i&127;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const c=e.subarray(n,n+l);if(c.length!==l)throw new t("tlv.decode: length bytes not complete");if(c[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const u of c)a=a<<8|u;if(n+=l,a<128)throw new t("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new t("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(r){const{Err:e}=su;if(r<Uv)throw new e("integer: negative integers are not allowed");let t=Fx(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=su;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return KE(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=su,i=di("signature",r),{v:s,l:a}=n.decode(48,i);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(o),s:t.decode(c)}},hexFromSig(r){const{_tlv:e,_int:t}=su,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},Uv=BigInt(0),Fv=BigInt(1),UMe=BigInt(2),Ox=BigInt(3),FMe=BigInt(4);function LMe(r,e,t){function n(i){const s=r.sqr(i),a=r.mul(s,i);return r.add(r.add(a,r.mul(i,e)),t)}return n}function WZ(r,e,t){const{BYTES:n}=r;function i(s){let a;if(typeof s=="bigint")a=s;else{let o=di("private key",s);if(e){if(!e.includes(o.length*2))throw new Error("invalid private key");const l=new Uint8Array(n);l.set(o,l.length-o.length),o=l}try{a=r.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(t&&(a=r.create(a)),!r.isValidNot0(a))throw new Error("invalid private key: out of range [1..N-1]");return a}return i}function DMe(r,e={}){const{Fp:t,Fn:n}=UZ("weierstrass",r,e),{h:i,n:s}=r;Fy(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=e;if(a&&(!t.is0(r.a)||typeof a.beta!="bigint"||typeof a.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function o(){if(!t.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(k,O,C){const{x:P,y:D}=O.toAffine(),F=t.toBytes(P);if(wh("isCompressed",C),C){o();const _=!t.isOdd(D);return mu(KZ(_),F)}else return mu(Uint8Array.of(4),F,t.toBytes(D))}function c(k){fc(k);const O=t.BYTES,C=O+1,P=2*O+1,D=k.length,F=k[0],_=k.subarray(1);if(D===C&&(F===2||F===3)){const R=t.fromBytes(_);if(!t.isValid(R))throw new Error("bad point: is not on curve, wrong x");const L=d(R);let Q;try{Q=t.sqrt(L)}catch(W){const V=W instanceof Error?": "+W.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}o();const G=t.isOdd(Q);return(F&1)===1!==G&&(Q=t.neg(Q)),{x:R,y:Q}}else if(D===P&&F===4){const R=t.fromBytes(_.subarray(O*0,O*1)),L=t.fromBytes(_.subarray(O*1,O*2));if(!p(R,L))throw new Error("bad point: is not on curve");return{x:R,y:L}}else throw new Error(`bad point: got length ${D}, expected compressed=${C} or uncompressed=${P}`)}const u=e.toBytes||l,f=e.fromBytes||c,d=LMe(t,r.a,r.b);function p(k,O){const C=t.sqr(O),P=d(k);return t.eql(C,P)}if(!p(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const v=t.mul(t.pow(r.a,Ox),FMe),m=t.mul(t.sqr(r.b),BigInt(27));if(t.is0(t.add(v,m)))throw new Error("bad curve params: a or b");function g(k,O,C=!1){if(!t.isValid(O)||C&&t.is0(O))throw new Error(`bad point coordinate ${k}`);return O}function w(k){if(!(k instanceof S))throw new Error("ProjectivePoint expected")}const b=R1((k,O)=>{const{px:C,py:P,pz:D}=k;if(t.eql(D,t.ONE))return{x:C,y:P};const F=k.is0();O==null&&(O=F?t.ONE:t.inv(D));const _=t.mul(C,O),R=t.mul(P,O),L=t.mul(D,O);if(F)return{x:t.ZERO,y:t.ZERO};if(!t.eql(L,t.ONE))throw new Error("invZ was invalid");return{x:_,y:R}}),E=R1(k=>{if(k.is0()){if(e.allowInfinityPoint&&!t.is0(k.py))return;throw new Error("bad point: ZERO")}const{x:O,y:C}=k.toAffine();if(!t.isValid(O)||!t.isValid(C))throw new Error("bad point: x or y not field elements");if(!p(O,C))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(k,O,C,P,D){return C=new S(t.mul(C.px,k),C.py,C.pz),O=Iv(P,O),C=Iv(D,C),O.add(C)}class S{constructor(O,C,P){this.px=g("x",O),this.py=g("y",C,!0),this.pz=g("z",P),Object.freeze(this)}static fromAffine(O){const{x:C,y:P}=O||{};if(!O||!t.isValid(C)||!t.isValid(P))throw new Error("invalid affine point");if(O instanceof S)throw new Error("projective point not allowed");return t.is0(C)&&t.is0(P)?S.ZERO:new S(C,P,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(O){return MZ(S,"pz",O)}static fromBytes(O){return fc(O),S.fromHex(O)}static fromHex(O){const C=S.fromAffine(f(di("pointHex",O)));return C.assertValidity(),C}static fromPrivateKey(O){const C=WZ(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return S.BASE.multiply(C(O))}static msm(O,C){return IZ(S,n,O,C)}precompute(O=8,C=!0){return I.setWindowSize(this,O),C||this.multiply(Ox),this}_setWindowSize(O){this.precompute(O)}assertValidity(){E(this)}hasEvenY(){const{y:O}=this.toAffine();if(!t.isOdd)throw new Error("Field doesn't support isOdd");return!t.isOdd(O)}equals(O){w(O);const{px:C,py:P,pz:D}=this,{px:F,py:_,pz:R}=O,L=t.eql(t.mul(C,R),t.mul(F,D)),Q=t.eql(t.mul(P,R),t.mul(_,D));return L&&Q}negate(){return new S(this.px,t.neg(this.py),this.pz)}double(){const{a:O,b:C}=r,P=t.mul(C,Ox),{px:D,py:F,pz:_}=this;let R=t.ZERO,L=t.ZERO,Q=t.ZERO,G=t.mul(D,D),Y=t.mul(F,F),W=t.mul(_,_),V=t.mul(D,F);return V=t.add(V,V),Q=t.mul(D,_),Q=t.add(Q,Q),R=t.mul(O,Q),L=t.mul(P,W),L=t.add(R,L),R=t.sub(Y,L),L=t.add(Y,L),L=t.mul(R,L),R=t.mul(V,R),Q=t.mul(P,Q),W=t.mul(O,W),V=t.sub(G,W),V=t.mul(O,V),V=t.add(V,Q),Q=t.add(G,G),G=t.add(Q,G),G=t.add(G,W),G=t.mul(G,V),L=t.add(L,G),W=t.mul(F,_),W=t.add(W,W),G=t.mul(W,V),R=t.sub(R,G),Q=t.mul(W,Y),Q=t.add(Q,Q),Q=t.add(Q,Q),new S(R,L,Q)}add(O){w(O);const{px:C,py:P,pz:D}=this,{px:F,py:_,pz:R}=O;let L=t.ZERO,Q=t.ZERO,G=t.ZERO;const Y=r.a,W=t.mul(r.b,Ox);let V=t.mul(C,F),T=t.mul(P,_),H=t.mul(D,R),K=t.add(C,P),N=t.add(F,_);K=t.mul(K,N),N=t.add(V,T),K=t.sub(K,N),N=t.add(C,D);let te=t.add(F,R);return N=t.mul(N,te),te=t.add(V,H),N=t.sub(N,te),te=t.add(P,D),L=t.add(_,R),te=t.mul(te,L),L=t.add(T,H),te=t.sub(te,L),G=t.mul(Y,N),L=t.mul(W,H),G=t.add(L,G),L=t.sub(T,G),G=t.add(T,G),Q=t.mul(L,G),T=t.add(V,V),T=t.add(T,V),H=t.mul(Y,H),N=t.mul(W,N),T=t.add(T,H),H=t.sub(V,H),H=t.mul(Y,H),N=t.add(N,H),V=t.mul(T,N),Q=t.add(Q,V),V=t.mul(te,N),L=t.mul(K,L),L=t.sub(L,V),V=t.mul(K,T),G=t.mul(te,G),G=t.add(G,V),new S(L,Q,G)}subtract(O){return this.add(O.negate())}is0(){return this.equals(S.ZERO)}multiply(O){const{endo:C}=e;if(!n.isValidNot0(O))throw new Error("invalid scalar: out of range");let P,D;const F=_=>I.wNAFCached(this,_,S.normalizeZ);if(C){const{k1neg:_,k1:R,k2neg:L,k2:Q}=C.splitScalar(O),{p:G,f:Y}=F(R),{p:W,f:V}=F(Q);D=Y.add(V),P=B(C.beta,G,W,_,L)}else{const{p:_,f:R}=F(O);P=_,D=R}return S.normalizeZ([P,D])[0]}multiplyUnsafe(O){const{endo:C}=e,P=this;if(!n.isValid(O))throw new Error("invalid scalar: out of range");if(O===Uv||P.is0())return S.ZERO;if(O===Fv)return P;if(I.hasPrecomputes(this))return this.multiply(O);if(C){const{k1neg:D,k1:F,k2neg:_,k2:R}=C.splitScalar(O),{p1:L,p2:Q}=XSe(S,P,F,R);return B(C.beta,L,Q,D,_)}else return I.wNAFCachedUnsafe(P,O)}multiplyAndAddUnsafe(O,C,P){const D=this.multiplyUnsafe(C).add(O.multiplyUnsafe(P));return D.is0()?void 0:D}toAffine(O){return b(this,O)}isTorsionFree(){const{isTorsionFree:O}=e;return i===Fv?!0:O?O(S,this):I.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:O}=e;return i===Fv?this:O?O(S,this):this.multiplyUnsafe(i)}toBytes(O=!0){return wh("isCompressed",O),this.assertValidity(),u(S,this,O)}toRawBytes(O=!0){return this.toBytes(O)}toHex(O=!0){return Lm(this.toBytes(O))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(r.Gx,r.Gy,t.ONE),S.ZERO=new S(t.ZERO,t.ONE,t.ZERO),S.Fp=t,S.Fn=n;const M=n.BITS,I=RZ(S,e.endo?Math.ceil(M/2):M);return S}function KZ(r){return Uint8Array.of(r?2:3)}function OMe(r,e,t={}){Fy(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||pZ,i=e.hmac||((P,...D)=>jZ(e.hash,P,mu(...D))),{Fp:s,Fn:a}=r,{ORDER:o,BITS:l}=a;function c(P){const D=o>>Fv;return P>D}function u(P){return c(P)?a.neg(P):P}function f(P,D){if(!a.isValidNot0(D))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class d{constructor(D,F,_){f("r",D),f("s",F),this.r=D,this.s=F,_!=null&&(this.recovery=_),Object.freeze(this)}static fromCompact(D){const F=a.BYTES,_=di("compactSignature",D,F*2);return new d(a.fromBytes(_.subarray(0,F)),a.fromBytes(_.subarray(F,F*2)))}static fromDER(D){const{r:F,s:_}=su.toSig(di("DER",D));return new d(F,_)}assertValidity(){}addRecoveryBit(D){return new d(this.r,this.s,D)}recoverPublicKey(D){const F=s.ORDER,{r:_,s:R,recovery:L}=this;if(L==null||![0,1,2,3].includes(L))throw new Error("recovery id invalid");if(o*UMe<F&&L>1)throw new Error("recovery id is ambiguous for h>1 curve");const G=L===2||L===3?_+o:_;if(!s.isValid(G))throw new Error("recovery id 2 or 3 invalid");const Y=s.toBytes(G),W=r.fromHex(mu(KZ((L&1)===0),Y)),V=a.inv(G),T=E(di("msgHash",D)),H=a.create(-T*V),K=a.create(R*V),N=r.BASE.multiplyUnsafe(H).add(W.multiplyUnsafe(K));if(N.is0())throw new Error("point at infinify");return N.assertValidity(),N}hasHighS(){return c(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,a.neg(this.s),this.recovery):this}toBytes(D){if(D==="compact")return mu(a.toBytes(this.r),a.toBytes(this.s));if(D==="der")return qO(su.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Lm(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Lm(this.toBytes("compact"))}}const p=WZ(a,t.allowedPrivateKeyLengths,t.wrapPrivateKey),v={isValidPrivateKey(P){try{return p(P),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const P=o;return KSe(n(BZ(P)),P)},precompute(P=8,D=r.BASE){return D.precompute(P,!1)}};function m(P,D=!0){return r.fromPrivateKey(P).toBytes(D)}function g(P){if(typeof P=="bigint")return!1;if(P instanceof r)return!0;const F=di("key",P).length,_=s.BYTES,R=_+1,L=2*_+1;if(!(t.allowedPrivateKeyLengths||a.BYTES===R))return F===R||F===L}function w(P,D,F=!0){if(g(P)===!0)throw new Error("first arg must be private key");if(g(D)===!1)throw new Error("second arg must be public key");return r.fromHex(D).multiply(p(P)).toBytes(F)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const D=KE(P),F=P.length*8-l;return F>0?D>>BigInt(F):D},E=e.bits2int_modN||function(P){return a.create(b(P))},B=YE(l);function S(P){return Xp("num < 2^"+l,P,Uv,B),a.toBytes(P)}function M(P,D,F=I){if(["recovered","canonical"].some(K=>K in F))throw new Error("sign() legacy options not supported");const{hash:_}=e;let{lowS:R,prehash:L,extraEntropy:Q}=F;R==null&&(R=!0),P=di("msgHash",P),Wz(F),L&&(P=di("prehashed msgHash",_(P)));const G=E(P),Y=p(D),W=[S(Y),S(G)];if(Q!=null&&Q!==!1){const K=Q===!0?n(s.BYTES):Q;W.push(di("extraEntropy",K))}const V=mu(...W),T=G;function H(K){const N=b(K);if(!a.isValidNot0(N))return;const te=a.inv(N),oe=r.BASE.multiply(N).toAffine(),fe=a.create(oe.x);if(fe===Uv)return;const he=a.create(te*a.create(T+fe*Y));if(he===Uv)return;let me=(oe.x===fe?0:2)|Number(oe.y&Fv),Te=he;return R&&c(he)&&(Te=u(he),me^=1),new d(fe,Te,me)}return{seed:V,k2sig:H}}const I={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function O(P,D,F=I){const{seed:_,k2sig:R}=M(P,D,F);return NSe(e.hash.outputLen,a.BYTES,i)(_,R)}r.BASE.precompute(8);function C(P,D,F,_=k){const R=P;D=di("msgHash",D),F=di("publicKey",F),Wz(_);const{lowS:L,prehash:Q,format:G}=_;if("strict"in _)throw new Error("options.strict was renamed to lowS");if(G!==void 0&&!["compact","der","js"].includes(G))throw new Error('format must be "compact", "der" or "js"');const Y=typeof R=="string"||KO(R),W=!Y&&!G&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!Y&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,T;try{if(W)if(G===void 0||G==="js")V=new d(R.r,R.s);else throw new Error("invalid format");if(Y){try{G!=="compact"&&(V=d.fromDER(R))}catch(Te){if(!(Te instanceof su.Err))throw Te}!V&&G!=="der"&&(V=d.fromCompact(R))}T=r.fromHex(F)}catch{return!1}if(!V||L&&V.hasHighS())return!1;Q&&(D=e.hash(D));const{r:H,s:K}=V,N=E(D),te=a.inv(K),oe=a.create(N*te),fe=a.create(H*te),he=r.BASE.multiplyUnsafe(oe).add(T.multiplyUnsafe(fe));return he.is0()?!1:a.create(he.x)===H}return Object.freeze({getPublicKey:m,getSharedSecret:w,sign:O,verify:C,utils:v,Point:r,Signature:d})}function NMe(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Ym(e.n,r.nBitLength),i={Fp:t,Fn:n,allowedPrivateKeyLengths:r.allowedPrivateKeyLengths,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,wrapPrivateKey:r.wrapPrivateKey,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:i}}function PMe(r){const{CURVE:e,curveOpts:t}=NMe(r),n={hash:r.hash,hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,ecdsaOpts:n}}function kMe(r,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:r})}function HMe(r){const{CURVE:e,curveOpts:t,ecdsaOpts:n}=PMe(r),i=DMe(e,t),s=OMe(i,n,t);return kMe(r,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function QMe(r,e){const t=n=>HMe({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O1={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const zMe=BigInt(1),tD=BigInt(2),Kz=(r,e)=>(r+e/tD)/e;function VMe(r){const e=O1.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),c=r*r*r%e,u=c*c*r%e,f=qr(u,t,e)*u%e,d=qr(f,t,e)*u%e,p=qr(d,tD,e)*c%e,v=qr(p,i,e)*p%e,m=qr(v,s,e)*v%e,g=qr(m,o,e)*m%e,w=qr(g,l,e)*g%e,b=qr(w,o,e)*m%e,E=qr(b,t,e)*u%e,B=qr(E,a,e)*v%e,S=qr(B,n,e)*c%e,M=qr(S,tD,e);if(!nD.eql(nD.sqr(M),r))throw new Error("Cannot find square root");return M}const nD=Ym(O1.p,void 0,void 0,{sqrt:VMe}),GMe=QMe({...O1,Fp:nD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=O1.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-zMe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),o=Kz(s*r,e),l=Kz(-n*r,e);let c=mi(r-o*t-l*i,e),u=mi(-o*n-l*s,e);const f=c>a,d=u>a;if(f&&(c=e-c),d&&(u=e-u),c>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:f,k1:c,k2neg:d,k2:u}}}},vZ);Ly.utils.randomPrivateKey;Ly.getPublicKey;function qz(r){try{return Ly.ExtendedPoint.fromHex(r),!0}catch{return!1}}const jMe=(r,e)=>Ly.sign(r,e.slice(0,32)),WMe=Ly.verify,Nm=r=>un.Buffer.isBuffer(r)?r:r instanceof Uint8Array?un.Buffer.from(r.buffer,r.byteOffset,r.byteLength):un.Buffer.from(r);class KMe{constructor(e){Object.assign(this,e)}encode(){return un.Buffer.from(dR.serialize(Rb,this))}static decode(e){return dR.deserialize(Rb,this,e)}static decodeUnchecked(e){return dR.deserializeUnchecked(Rb,this,e)}}const Rb=new Map;var qZ;const qMe=32,KA=32;function YMe(r){return r._bn!==void 0}let Yz=1;class Jt extends KMe{constructor(e){if(super({}),this._bn=void 0,YMe(e))this._bn=e._bn;else{if(typeof e=="string"){const t=fs.decode(e);if(t.length!=KA)throw new Error("Invalid public key input");this._bn=new Yt(t)}else this._bn=new Yt(e);if(this._bn.byteLength()>KA)throw new Error("Invalid public key input")}}static unique(){const e=new Jt(Yz);return Yz+=1,new Jt(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return fs.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(un.Buffer);if(e.length===KA)return e;const t=un.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=un.Buffer.concat([e.toBuffer(),un.Buffer.from(t),n.toBuffer()]),s=Oz(i);return new Jt(s)}static createProgramAddressSync(e,t){let n=un.Buffer.alloc(0);e.forEach(function(s){if(s.length>qMe)throw new TypeError("Max seed length exceeded");n=un.Buffer.concat([n,Nm(s)])}),n=un.Buffer.concat([n,t.toBuffer(),un.Buffer.from("ProgramDerivedAddress")]);const i=Oz(n);if(qz(i))throw new Error("Invalid seeds, address must fall off the curve");return new Jt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(un.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new Jt(e);return qz(t.toBytes())}}qZ=Jt;Jt.default=new qZ("11111111111111111111111111111111");Rb.set(Jt,{kind:"struct",fields:[["_bn","u256"]]});new Jt("BPFLoader1111111111111111111111111111111111");const Am=1232,YZ=127,XZ=64;class ZZ extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ZZ.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class JZ extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(JZ.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Av extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Av.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class N1{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,a)=>{n.set(s.toBase58(),a)});const i=s=>{const a=n.get(s.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(a=>i(a.pubkey)),data:s.data}))}}const Bn=(r="publicKey")=>Ce.blob(32,r),Zp=(r="string")=>{const e=Ce.struct([Ce.u32("length"),Ce.u32("lengthPadding"),Ce.blob(Ce.offset(Ce.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,a)=>t(s,a).chars.toString(),i.encode=(s,a,o)=>{const l={chars:un.Buffer.from(s,"utf8")};return n(l,a,o)},i.alloc=s=>Ce.u32().span+Ce.u32().span+un.Buffer.from(s,"utf8").length,i},XMe=(r="authorized")=>Ce.struct([Bn("staker"),Bn("withdrawer")],r),ZMe=(r="lockup")=>Ce.struct([Ce.ns64("unixTimestamp"),Ce.ns64("epoch"),Bn("custodian")],r),JMe=(r="voteInit")=>Ce.struct([Bn("nodePubkey"),Bn("authorizedVoter"),Bn("authorizedWithdrawer"),Ce.u8("commission")],r),$Me=(r="voteAuthorizeWithSeedArgs")=>Ce.struct([Ce.u32("voteAuthorizationType"),Bn("currentAuthorityDerivedKeyOwnerPubkey"),Zp("currentAuthorityDerivedKeySeed"),Bn("newAuthorized")],r);function Co(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function To(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Bi(r,e){if(!r)throw new Error(e||"Assertion failed")}class tS{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=a=>{const o=a.toBase58();let l=n.get(o);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(o,l)),l},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const a of e){i(a.programId).isInvoked=!0;for(const o of a.keys){const l=i(o.pubkey);l.isSigner||=o.isSigner,l.isWritable||=o.isWritable}}return new tS(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Bi(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),n=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),a={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{Bi(t.length>0,"Expected at least one writable signer key");const[l]=t[0];Bi(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const o=[...t.map(([l])=>new Jt(l)),...n.map(([l])=>new Jt(l)),...i.map(([l])=>new Jt(l)),...s.map(([l])=>new Jt(l))];return[a,o]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,a]of this.keyMetaMap.entries())if(t(a)){const o=new Jt(s),l=e.findIndex(c=>c.equals(o));l>=0&&(Bi(l<256,"Max lookup table index exceeded"),n.push(l),i.push(o),this.keyMetaMap.delete(s))}return[n,i]}}const $Z="Reached end of buffer unexpectedly";function uu(r){if(r.length===0)throw new Error($Z);return r.shift()}function Ro(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error($Z);return r.splice(...e)}class tf{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Jt(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:fs.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new N1(this.staticAccountKeys)}static compile(e){const t=tS.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),a=new N1(i).compileInstructions(e.instructions).map(o=>({programIdIndex:o.programIdIndex,accounts:o.accountKeyIndexes,data:fs.encode(o.data)}));return new tf({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:a})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];To(t,e);const n=this.instructions.map(f=>{const{accounts:d,programIdIndex:p}=f,v=Array.from(fs.decode(f.data));let m=[];To(m,d.length);let g=[];return To(g,v.length),{programIdIndex:p,keyIndicesCount:un.Buffer.from(m),keyIndices:d,dataLength:un.Buffer.from(g),data:v}});let i=[];To(i,n.length);let s=un.Buffer.alloc(Am);un.Buffer.from(i).copy(s);let a=i.length;n.forEach(f=>{const p=Ce.struct([Ce.u8("programIdIndex"),Ce.blob(f.keyIndicesCount.length,"keyIndicesCount"),Ce.seq(Ce.u8("keyIndex"),f.keyIndices.length,"keyIndices"),Ce.blob(f.dataLength.length,"dataLength"),Ce.seq(Ce.u8("userdatum"),f.data.length,"data")]).encode(f,s,a);a+=p}),s=s.slice(0,a);const o=Ce.struct([Ce.blob(1,"numRequiredSignatures"),Ce.blob(1,"numReadonlySignedAccounts"),Ce.blob(1,"numReadonlyUnsignedAccounts"),Ce.blob(t.length,"keyCount"),Ce.seq(Bn("key"),e,"keys"),Bn("recentBlockhash")]),l={numRequiredSignatures:un.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:un.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:un.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:un.Buffer.from(t),keys:this.accountKeys.map(f=>Nm(f.toBytes())),recentBlockhash:fs.decode(this.recentBlockhash)};let c=un.Buffer.alloc(2048);const u=o.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let t=[...e];const n=uu(t);if(n!==(n&YZ))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=uu(t),s=uu(t),a=Co(t);let o=[];for(let d=0;d<a;d++){const p=Ro(t,0,KA);o.push(new Jt(un.Buffer.from(p)))}const l=Ro(t,0,KA),c=Co(t);let u=[];for(let d=0;d<c;d++){const p=uu(t),v=Co(t),m=Ro(t,0,v),g=Co(t),w=Ro(t,0,g),b=fs.encode(un.Buffer.from(w));u.push({programIdIndex:p,accounts:m,data:b})}const f={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:fs.encode(un.Buffer.from(l)),accountKeys:o,instructions:u};return new tf(f)}}class P1{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new N1(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((a,o)=>a+o.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,a=n-t-this.header.numReadonlyUnsignedAccounts;return i<a}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=tS.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const f=t.extractTableLookup(u);if(f!==void 0){const[d,{writable:p,readonly:v}]=f;n.push(d),i.writable.push(...p),i.readonly.push(...v)}}const[a,o]=t.getMessageComponents(),c=new N1(o,i).compileInstructions(e.instructions);return new P1({header:a,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:n})}serialize(){const e=Array();To(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();To(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();To(s,this.addressTableLookups.length);const a=Ce.struct([Ce.u8("prefix"),Ce.struct([Ce.u8("numRequiredSignatures"),Ce.u8("numReadonlySignedAccounts"),Ce.u8("numReadonlyUnsignedAccounts")],"header"),Ce.blob(e.length,"staticAccountKeysLength"),Ce.seq(Bn(),this.staticAccountKeys.length,"staticAccountKeys"),Bn("recentBlockhash"),Ce.blob(n.length,"instructionsLength"),Ce.blob(t.length,"serializedInstructions"),Ce.blob(s.length,"addressTableLookupsLength"),Ce.blob(i.length,"serializedAddressTableLookups")]),o=new Uint8Array(Am),c=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:fs.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},o);return o.slice(0,c)}serializeInstructions(){let e=0;const t=new Uint8Array(Am);for(const n of this.compiledInstructions){const i=Array();To(i,n.accountKeyIndexes.length);const s=Array();To(s,n.data.length);const a=Ce.struct([Ce.u8("programIdIndex"),Ce.blob(i.length,"encodedAccountKeyIndexesLength"),Ce.seq(Ce.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ce.blob(s.length,"encodedDataLength"),Ce.blob(n.data.length,"data")]);e+=a.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Am);for(const n of this.addressTableLookups){const i=Array();To(i,n.writableIndexes.length);const s=Array();To(s,n.readonlyIndexes.length);const a=Ce.struct([Bn("accountKey"),Ce.blob(i.length,"encodedWritableIndexesLength"),Ce.seq(Ce.u8(),n.writableIndexes.length,"writableIndexes"),Ce.blob(s.length,"encodedReadonlyIndexesLength"),Ce.seq(Ce.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=a.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=uu(t),i=n&YZ;Bi(n!==i,"Expected versioned message but received legacy message");const s=i;Bi(s===0,`Expected versioned message with version 0 but found version ${s}`);const a={numRequiredSignatures:uu(t),numReadonlySignedAccounts:uu(t),numReadonlyUnsignedAccounts:uu(t)},o=[],l=Co(t);for(let v=0;v<l;v++)o.push(new Jt(Ro(t,0,KA)));const c=fs.encode(Ro(t,0,KA)),u=Co(t),f=[];for(let v=0;v<u;v++){const m=uu(t),g=Co(t),w=Ro(t,0,g),b=Co(t),E=new Uint8Array(Ro(t,0,b));f.push({programIdIndex:m,accountKeyIndexes:w,data:E})}const d=Co(t),p=[];for(let v=0;v<d;v++){const m=new Jt(Ro(t,0,KA)),g=Co(t),w=Ro(t,0,g),b=Co(t),E=Ro(t,0,b);p.push({accountKey:m,writableIndexes:w,readonlyIndexes:E})}return new P1({header:a,staticAccountKeys:o,recentBlockhash:c,compiledInstructions:f,addressTableLookups:p})}}let bA=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const eCe=un.Buffer.alloc(XZ).fill(0);class Xz{constructor(e){this.keys=void 0,this.programId=void 0,this.data=un.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Au{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Xz(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let m=0;m<t.length;m++)if(t[m].programId===void 0)throw new Error(`Transaction instruction index ${m} has undefined program id`);const i=[],s=[];t.forEach(m=>{m.keys.forEach(w=>{s.push({...w})});const g=m.programId.toString();i.includes(g)||i.push(g)}),i.forEach(m=>{s.push({pubkey:new Jt(m),isSigner:!1,isWritable:!1})});const a=[];s.forEach(m=>{const g=m.pubkey.toString(),w=a.findIndex(b=>b.pubkey.toString()===g);w>-1?(a[w].isWritable=a[w].isWritable||m.isWritable,a[w].isSigner=a[w].isSigner||m.isSigner):a.push(m)}),a.sort(function(m,g){if(m.isSigner!==g.isSigner)return m.isSigner?-1:1;if(m.isWritable!==g.isWritable)return m.isWritable?-1:1;const w={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return m.pubkey.toBase58().localeCompare(g.pubkey.toBase58(),"en",w)});const o=a.findIndex(m=>m.pubkey.equals(n));if(o>-1){const[m]=a.splice(o,1);m.isSigner=!0,m.isWritable=!0,a.unshift(m)}else a.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const m of this.signatures){const g=a.findIndex(w=>w.pubkey.equals(m.publicKey));if(g>-1)a[g].isSigner||(a[g].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${m.publicKey.toString()}`)}let l=0,c=0,u=0;const f=[],d=[];a.forEach(({pubkey:m,isSigner:g,isWritable:w})=>{g?(f.push(m.toString()),l+=1,w||(c+=1)):(d.push(m.toString()),w||(u+=1))});const p=f.concat(d),v=t.map(m=>{const{data:g,programId:w}=m;return{programIdIndex:p.indexOf(w.toString()),accounts:m.keys.map(b=>p.indexOf(b.pubkey.toString())),data:fs.encode(g)}});return v.forEach(m=>{Bi(m.programIdIndex>=0),m.accounts.forEach(g=>Bi(g>=0))}),new tf({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:p,recentBlockhash:e,instructions:v})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const a=s.publicKey.toString();t.has(a)||(t.add(a),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=jMe(n,i.secretKey);this._addSignature(i.publicKey,Nm(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Bi(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=un.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||=[]).push(s):WMe(i,e,s.toBytes())||(n.invalid||=[]).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let a="Signature verification failed.";throw s.invalid&&(a+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(o=>o.toBase58()).join("`, `")}\`].`),s.missing&&(a+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(o=>o.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];To(n,t.length);const i=n.length+t.length*64+e.length,s=un.Buffer.alloc(i);return Bi(t.length<256),un.Buffer.from(n).copy(s,0),t.forEach(({signature:a},o)=>{a!==null&&(Bi(a.length===64,"signature has invalid length"),un.Buffer.from(a).copy(s,n.length+o*64))}),e.copy(s,n.length+t.length*64),Bi(s.length<=Am,`Transaction too large: ${s.length} > ${Am}`),s}get keys(){return Bi(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Bi(this.instructions.length===1),this.instructions[0].programId}get data(){return Bi(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Co(t);let i=[];for(let s=0;s<n;s++){const a=Ro(t,0,XZ);i.push(fs.encode(un.Buffer.from(a)))}return Au.populate(tf.from(t),i)}static populate(e,t=[]){const n=new Au;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const a={signature:i==fs.encode(eCe)?null:fs.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(a)}),e.instructions.forEach(i=>{const s=i.accounts.map(a=>{const o=e.accountKeys[a];return{pubkey:o,isSigner:n.signatures.some(l=>l.publicKey.toString()===o.toString())||e.isAccountSigner(a),isWritable:e.isAccountWritable(a)}});n.instructions.push(new Xz({keys:s,programId:e.accountKeys[i.programIdIndex],data:fs.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}const tCe=160,nCe=64,rCe=tCe/nCe,iCe=1e3/rCe;new Jt("SysvarC1ock11111111111111111111111111111111");new Jt("SysvarEpochSchedu1e111111111111111111111111");new Jt("Sysvar1nstructions1111111111111111111111111");new Jt("SysvarRecentB1ockHashes11111111111111111111");new Jt("SysvarRent111111111111111111111111111111111");new Jt("SysvarRewards111111111111111111111111111111");new Jt("SysvarS1otHashes111111111111111111111111111");new Jt("SysvarS1otHistory11111111111111111111111111");new Jt("SysvarStakeHistory1111111111111111111111111");class Zz extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. 
${n}. `+s+a;break;case"simulate":o=`Simulation failed. 
Message: ${n}. 
`+s+a;break;default:o=`Unknown action '${(l=>l)(e)}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Ut extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function mp(r){return new Promise(e=>setTimeout(e,r))}const sCe=Ce.nu64("lamportsPerSignature"),eJ=Ce.struct([Ce.u32("version"),Ce.u32("state"),Bn("authorizedPubkey"),Bn("nonce"),Ce.struct([sCe],"feeCalculator")]);eJ.span;class nN{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=eJ.decode(Nm(e),0);return new nN({authorizedPubkey:new Jt(t.authorizedPubkey),nonce:new Jt(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function Pm(r){const e=Ce.blob(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,s=KBe();return i.decode=(a,o)=>{const l=t(a,o);return s.decode(l)},i.encode=(a,o,l)=>{const c=s.encode(a);return n(c,o,l)},i}Object.freeze({Create:{index:0,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("lamports"),Ce.ns64("space"),Bn("programId")])},Assign:{index:1,layout:Ce.struct([Ce.u32("instruction"),Bn("programId")])},Transfer:{index:2,layout:Ce.struct([Ce.u32("instruction"),Pm("lamports")])},CreateWithSeed:{index:3,layout:Ce.struct([Ce.u32("instruction"),Bn("base"),Zp("seed"),Ce.ns64("lamports"),Ce.ns64("space"),Bn("programId")])},AdvanceNonceAccount:{index:4,layout:Ce.struct([Ce.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:Ce.struct([Ce.u32("instruction"),Bn("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ce.struct([Ce.u32("instruction"),Bn("authorized")])},Allocate:{index:8,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("space")])},AllocateWithSeed:{index:9,layout:Ce.struct([Ce.u32("instruction"),Bn("base"),Zp("seed"),Ce.ns64("space"),Bn("programId")])},AssignWithSeed:{index:10,layout:Ce.struct([Ce.u32("instruction"),Bn("base"),Zp("seed"),Bn("programId")])},TransferWithSeed:{index:11,layout:Ce.struct([Ce.u32("instruction"),Pm("lamports"),Zp("seed"),Bn("programId")])},UpgradeNonceAccount:{index:12,layout:Ce.struct([Ce.u32("instruction")])}});new Jt("11111111111111111111111111111111");new Jt("BPFLoader2111111111111111111111111111111111");function aCe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var bR,Jz;function oCe(){if(Jz)return bR;Jz=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,a,o,l,c,u,f;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(f=r.call(n),f==="[object Array]"){for(o="[",a=n.length-1,s=0;s<a;s++)o+=t(n[s],!0)+",";return a>-1&&(o+=t(n[s],!0)),o+"]"}else if(f==="[object Object]"){for(l=e(n).sort(),a=l.length,o="",s=0;s<a;)c=l[s],u=t(n[c],!1),u!==void 0&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u),s++;return"{"+o+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return bR=function(n){var i=t(n,!1);if(i!==void 0)return""+i},bR}var lCe=oCe(),$z=aCe(lCe);const P0=32;function ER(r){let e=0;for(;r>1;)r/=2,e++;return e}function cCe(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class uCe{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=ER(cCe(e+P0+1))-ER(P0)-1,n=this.getSlotsInEpoch(t),i=e-(n-P0);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*P0:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+ER(P0)):this.slotsPerEpoch}}var ACe=globalThis.fetch;class fCe extends RMe{constructor(e,t,n){const i=s=>{const a=CMe(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function hCe(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const eV=56;class tV{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=hCe(dCe,e),n=e.length-eV;Bi(n>=0,"lookup table is invalid"),Bi(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=Ce.struct([Ce.seq(Bn(),i,"addresses")]).decode(e.slice(eV));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Jt(t.authority[0]):void 0,addresses:s.map(a=>new Jt(a))}}}const dCe={index:1,layout:Ce.struct([Ce.u32("typeIndex"),Pm("deactivationSlot"),Ce.nu64("lastExtendedSlot"),Ce.u8("lastExtendedStartIndex"),Ce.u8(),Ce.seq(Bn(),Ce.offset(Ce.u8(),-1),"authority")])},pCe=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function mCe(r){const e=r.match(pCe);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,a=r.startsWith("https:")?"wss:":"ws:",o=i==null?null:parseInt(i.slice(1),10),l=o==null?"":`:${o+1}`;return`${a}//${n}${l}${s}`}const Gr=Ny(eN(Jt),ot(),r=>new Jt(r)),tJ=tN([ot(),Qr("base64")]),rN=Ny(eN(un.Buffer),tJ,r=>un.Buffer.from(r[0],"base64")),gCe=30*1e3;function vCe(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function _r(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function nV(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function nJ(r){return ta([tt({jsonrpc:Qr("2.0"),id:ot(),result:r}),tt({jsonrpc:Qr("2.0"),id:ot(),error:tt({code:Xm(),message:ot(),data:Qt(eMe())})})])}const yCe=nJ(Xm());function cn(r){return Ny(nJ(r),yCe,e=>"error"in e?e:{...e,result:ft(e.result,r)})}function hi(r){return cn(tt({context:tt({slot:He()}),value:r}))}function nS(r){return tt({context:tt({slot:He()}),value:r})}function SR(r,e){return r===0?new P1({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Jt(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:fs.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new tf(e)}const wCe=tt({foundation:He(),foundationTerm:He(),initial:He(),taper:He(),terminal:He()}),_Ce=cn(gt(vt(tt({epoch:He(),effectiveSlot:He(),amount:He(),postBalance:He(),commission:Qt(vt(He()))})))),xCe=gt(tt({slot:He(),prioritizationFee:He()})),bCe=tt({total:He(),validator:He(),foundation:He(),epoch:He()}),ECe=tt({epoch:He(),slotIndex:He(),slotsInEpoch:He(),absoluteSlot:He(),blockHeight:Qt(He()),transactionCount:Qt(He())}),SCe=tt({slotsPerEpoch:He(),leaderScheduleSlotOffset:He(),warmup:hc(),firstNormalEpoch:He(),firstNormalSlot:He()}),BCe=NZ(ot(),gt(He())),Ch=vt(ta([tt({}),ot()])),MCe=tt({err:Ch}),CCe=Qr("receivedSignature"),TCe=tt({"solana-core":ot(),"feature-set":Qt(He())}),RCe=tt({program:ot(),programId:Gr,parsed:Xm()}),ICe=tt({programId:Gr,accounts:gt(Gr),data:ot()}),rV=hi(tt({err:vt(ta([tt({}),ot()])),logs:vt(gt(ot())),accounts:Qt(vt(gt(vt(tt({executable:hc(),owner:ot(),lamports:He(),data:gt(ot()),rentEpoch:Qt(He())}))))),unitsConsumed:Qt(He()),returnData:Qt(vt(tt({programId:ot(),data:tN([ot(),Qr("base64")])}))),innerInstructions:Qt(vt(gt(tt({index:He(),instructions:gt(ta([RCe,ICe]))}))))})),UCe=hi(tt({byIdentity:NZ(ot(),gt(He())),range:tt({firstSlot:He(),lastSlot:He()})}));function FCe(r,e,t,n,i,s){const a=t||ACe;let o;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return n&&(l=async(u,f)=>{const d=await new Promise((p,v)=>{try{n(u,f,(m,g)=>p([m,g]))}catch(m){v(m)}});return await a(...d)}),new EMe(async(u,f)=>{const d={method:"POST",body:u,agent:o,headers:Object.assign({"Content-Type":"application/json"},e||{},FTe)};try{let p=5,v,m=500;for(;l?v=await l(r,d):v=await a(r,d),!(v.status!==429||i===!0||(p-=1,p===0));)console.error(`Server responded with ${v.status} ${v.statusText}.  Retrying after ${m}ms delay...`),await mp(m),m*=2;const g=await v.text();v.ok?f(null,g):f(new Error(`${v.status} ${v.statusText}: ${g}`))}catch(p){p instanceof Error&&f(p)}},{})}function LCe(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,a)=>{if(s){i(s);return}n(a)})})}function DCe(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,a)=>{if(s){n(s);return}t(a)})})}const OCe=cn(wCe),NCe=cn(bCe),PCe=cn(xCe),kCe=cn(ECe),HCe=cn(SCe),QCe=cn(BCe),zCe=cn(He()),VCe=hi(tt({total:He(),circulating:He(),nonCirculating:He(),nonCirculatingAccounts:gt(Gr)})),rD=tt({amount:ot(),uiAmount:vt(He()),decimals:He(),uiAmountString:Qt(ot())}),GCe=hi(gt(tt({address:Gr,amount:ot(),uiAmount:vt(He()),decimals:He(),uiAmountString:Qt(ot())}))),jCe=hi(gt(tt({pubkey:Gr,account:tt({executable:hc(),owner:Gr,lamports:He(),data:rN,rentEpoch:He()})}))),iD=tt({program:ot(),parsed:Xm(),space:He()}),WCe=hi(gt(tt({pubkey:Gr,account:tt({executable:hc(),owner:Gr,lamports:He(),data:iD,rentEpoch:He()})}))),KCe=hi(gt(tt({lamports:He(),address:Gr}))),fy=tt({executable:hc(),owner:Gr,lamports:He(),data:rN,rentEpoch:He()}),qCe=tt({pubkey:Gr,account:fy}),YCe=Ny(ta([eN(un.Buffer),iD]),ta([tJ,iD]),r=>Array.isArray(r)?ft(r,rN):r),sD=tt({executable:hc(),owner:Gr,lamports:He(),data:YCe,rentEpoch:He()}),XCe=tt({pubkey:Gr,account:sD}),ZCe=tt({state:ta([Qr("active"),Qr("inactive"),Qr("activating"),Qr("deactivating")]),active:He(),inactive:He()}),JCe=cn(gt(tt({signature:ot(),slot:He(),err:Ch,memo:vt(ot()),blockTime:Qt(vt(He()))}))),$Ce=cn(gt(tt({signature:ot(),slot:He(),err:Ch,memo:vt(ot()),blockTime:Qt(vt(He()))}))),eTe=tt({subscription:He(),result:nS(fy)}),tTe=tt({pubkey:Gr,account:fy}),nTe=tt({subscription:He(),result:nS(tTe)}),rTe=tt({parent:He(),slot:He(),root:He()}),iTe=tt({subscription:He(),result:rTe}),sTe=ta([tt({type:ta([Qr("firstShredReceived"),Qr("completed"),Qr("optimisticConfirmation"),Qr("root")]),slot:He(),timestamp:He()}),tt({type:Qr("createdBank"),parent:He(),slot:He(),timestamp:He()}),tt({type:Qr("frozen"),slot:He(),timestamp:He(),stats:tt({numTransactionEntries:He(),numSuccessfulTransactions:He(),numFailedTransactions:He(),maxTransactionsPerEntry:He()})}),tt({type:Qr("dead"),slot:He(),timestamp:He(),err:ot()})]),aTe=tt({subscription:He(),result:sTe}),oTe=tt({subscription:He(),result:nS(ta([MCe,CCe]))}),lTe=tt({subscription:He(),result:He()}),cTe=tt({pubkey:ot(),gossip:vt(ot()),tpu:vt(ot()),rpc:vt(ot()),version:vt(ot())}),iV=tt({votePubkey:ot(),nodePubkey:ot(),activatedStake:He(),epochVoteAccount:hc(),epochCredits:gt(tN([He(),He(),He()])),commission:He(),lastVote:He(),rootSlot:vt(He())}),uTe=cn(tt({current:gt(iV),delinquent:gt(iV)})),ATe=ta([Qr("processed"),Qr("confirmed"),Qr("finalized")]),fTe=tt({slot:He(),confirmations:vt(He()),err:Ch,confirmationStatus:Qt(ATe)}),hTe=hi(gt(vt(fTe))),dTe=cn(He()),rJ=tt({accountKey:Gr,writableIndexes:gt(He()),readonlyIndexes:gt(He())}),iN=tt({signatures:gt(ot()),message:tt({accountKeys:gt(ot()),header:tt({numRequiredSignatures:He(),numReadonlySignedAccounts:He(),numReadonlyUnsignedAccounts:He()}),instructions:gt(tt({accounts:gt(He()),data:ot(),programIdIndex:He()})),recentBlockhash:ot(),addressTableLookups:Qt(gt(rJ))})}),iJ=tt({pubkey:Gr,signer:hc(),writable:hc(),source:Qt(ta([Qr("transaction"),Qr("lookupTable")]))}),sJ=tt({accountKeys:gt(iJ),signatures:gt(ot())}),aJ=tt({parsed:Xm(),program:ot(),programId:Gr}),oJ=tt({accounts:gt(Gr),data:ot(),programId:Gr}),pTe=ta([oJ,aJ]),mTe=ta([tt({parsed:Xm(),program:ot(),programId:ot()}),tt({accounts:gt(ot()),data:ot(),programId:ot()})]),lJ=Ny(pTe,mTe,r=>"accounts"in r?ft(r,oJ):ft(r,aJ)),cJ=tt({signatures:gt(ot()),message:tt({accountKeys:gt(iJ),instructions:gt(lJ),recentBlockhash:ot(),addressTableLookups:Qt(vt(gt(rJ)))})}),k1=tt({accountIndex:He(),mint:ot(),owner:Qt(ot()),programId:Qt(ot()),uiTokenAmount:rD}),uJ=tt({writable:gt(Gr),readonly:gt(Gr)}),rS=tt({err:Ch,fee:He(),innerInstructions:Qt(vt(gt(tt({index:He(),instructions:gt(tt({accounts:gt(He()),data:ot(),programIdIndex:He()}))})))),preBalances:gt(He()),postBalances:gt(He()),logMessages:Qt(vt(gt(ot()))),preTokenBalances:Qt(vt(gt(k1))),postTokenBalances:Qt(vt(gt(k1))),loadedAddresses:Qt(uJ),computeUnitsConsumed:Qt(He())}),sN=tt({err:Ch,fee:He(),innerInstructions:Qt(vt(gt(tt({index:He(),instructions:gt(lJ)})))),preBalances:gt(He()),postBalances:gt(He()),logMessages:Qt(vt(gt(ot()))),preTokenBalances:Qt(vt(gt(k1))),postTokenBalances:Qt(vt(gt(k1))),loadedAddresses:Qt(uJ),computeUnitsConsumed:Qt(He())}),Zm=ta([Qr(0),Qr("legacy")]),Th=tt({pubkey:ot(),lamports:He(),postBalance:vt(He()),rewardType:vt(ot()),commission:Qt(vt(He()))}),gTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),transactions:gt(tt({transaction:iN,meta:vt(rS),version:Qt(Zm)})),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),vTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),yTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),transactions:gt(tt({transaction:sJ,meta:vt(rS),version:Qt(Zm)})),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),wTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),transactions:gt(tt({transaction:cJ,meta:vt(sN),version:Qt(Zm)})),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),_Te=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),transactions:gt(tt({transaction:sJ,meta:vt(sN),version:Qt(Zm)})),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),xTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),rewards:Qt(gt(Th)),blockTime:vt(He()),blockHeight:vt(He())}))),bTe=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),transactions:gt(tt({transaction:iN,meta:vt(rS)})),rewards:Qt(gt(Th)),blockTime:vt(He())}))),sV=cn(vt(tt({blockhash:ot(),previousBlockhash:ot(),parentSlot:He(),signatures:gt(ot()),blockTime:vt(He())}))),BR=cn(vt(tt({slot:He(),meta:vt(rS),blockTime:Qt(vt(He())),transaction:iN,version:Qt(Zm)}))),Nx=cn(vt(tt({slot:He(),transaction:cJ,meta:vt(sN),blockTime:Qt(vt(He())),version:Qt(Zm)}))),ETe=hi(tt({blockhash:ot(),lastValidBlockHeight:He()})),STe=hi(hc()),BTe=tt({slot:He(),numTransactions:He(),numSlots:He(),samplePeriodSecs:He()}),MTe=cn(gt(BTe)),CTe=hi(vt(tt({feeCalculator:tt({lamportsPerSignature:He()})}))),TTe=cn(ot()),RTe=cn(ot()),ITe=tt({err:Ch,logs:gt(ot()),signature:ot()}),UTe=tt({result:nS(ITe),subscription:He()}),FTe={"solana-client":"js/1.0.0-maintenance"};class LTe{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:f,config:d}=_r(u),p=this._buildArgs([],f,void 0,d),v=$z(p);return c[v]=c[v]??(async()=>{try{const m=await this._rpcRequest("getBlockHeight",p),g=ft(m,cn(He()));if("error"in g)throw new Ut(g.error,"failed to get block height information");return g.result}finally{delete c[v]}})(),await c[v]}})();let n,i,s,a,o,l;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,a=t.fetchMiddleware,o=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=vCe(e),this._rpcWsEndpoint=n||mCe(e),this._rpcClient=FCe(e,i,s,a,o,l),this._rpcRequest=LCe(this._rpcClient),this._rpcBatchRequest=DCe(this._rpcClient),this._rpcWebSocket=new fCe(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgs([e.toBase58()],n,void 0,i),a=await this._rpcRequest("getBalance",s),o=ft(a,hi(He()));if("error"in o)throw new Ut(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=ft(t,cn(vt(He())));if("error"in n)throw new Ut(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=ft(e,cn(He()));if("error"in t)throw new Ut(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=ft(e,zCe);if("error"in t)throw new Ut(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=ft(n,VCe);if("error"in i)throw new Ut(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=ft(i,hi(rD));if("error"in s)throw new Ut(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=ft(i,hi(rD));if("error"in s)throw new Ut(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=_r(n);let a=[e.toBase58()];"mint"in t?a.push({mint:t.mint.toBase58()}):a.push({programId:t.programId.toBase58()});const o=this._buildArgs(a,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",o),c=ft(l,jCe);if("error"in c)throw new Ut(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",s),o=ft(a,WCe);if("error"in o)throw new Ut(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=ft(i,KCe);if("error"in s)throw new Ut(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=ft(i,GCe);if("error"in s)throw new Ut(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgs([e.toBase58()],n,"base64",i),a=await this._rpcRequest("getAccountInfo",s),o=ft(a,hi(vt(fy)));if("error"in o)throw new Ut(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getAccountInfo",s),o=ft(a,hi(vt(sD)));if("error"in o)throw new Ut(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=_r(t),s=e.map(c=>c.toBase58()),a=this._buildArgs([s],n,"jsonParsed",i),o=await this._rpcRequest("getMultipleAccounts",a),l=ft(o,hi(gt(vt(sD))));if("error"in l)throw new Ut(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=_r(t),s=e.map(c=>c.toBase58()),a=this._buildArgs([s],n,"base64",i),o=await this._rpcRequest("getMultipleAccounts",a),l=ft(o,hi(gt(vt(fy))));if("error"in l)throw new Ut(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=_r(t),a=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??s?.epoch}),o=await this._rpcRequest("getStakeActivation",a),l=ft(o,cn(ZCe));if("error"in l)throw new Ut(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=_r(t),{encoding:s,...a}=i||{},o=this._buildArgs([e.toBase58()],n,s||"base64",{...a,...a.filters?{filters:nV(a.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",o),c=gt(qCe),u=a.withContext===!0?ft(l,hi(c)):ft(l,cn(c));if("error"in u)throw new Ut(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),a=await this._rpcRequest("getProgramAccounts",s),o=ft(a,cn(gt(XCe)));if("error"in o)throw new Ut(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let i;try{i=fs.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Bi(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const a=new Promise((l,c)=>{try{n=this.onSignature(t,(f,d)=>{n=void 0;const p={context:d,value:f};l({__type:bA.PROCESSED,response:p})},e);const u=new Promise(f=>{n==null?f():i=this._onSubscriptionStateChange(n,d=>{d==="subscribed"&&f()})});(async()=>{if(await u,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:d,value:p}=f;if(p!=null)if(p?.err)c(p.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(p.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(p.confirmationStatus==="processed"||p.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:bA.PROCESSED,response:{context:d,value:p}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const a=new Promise(f=>{const d=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let p=await d();if(!s){for(;p<=n;)if(await mp(1e3),s||(p=await d(),s))return;f({__type:bA.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),c=this.getCancellationPromise(t);let u;try{const f=await Promise.race([c,l,a]);if(f.__type===bA.PROCESSED)u=f.response;else throw new ZZ(i)}finally{s=!0,o()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:a}}){let o=!1;const l=new Promise(p=>{let v=s,m=null;const g=async()=>{try{const{context:w,value:b}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return m=w.slot,b?.nonce}catch{return v}};(async()=>{if(v=await g(),!o)for(;;){if(s!==v){p({__type:bA.NONCE_INVALID,slotInWhichNonceDidAdvance:m});return}if(await mp(2e3),o||(v=await g(),o))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:a}),f=this.getCancellationPromise(t);let d;try{const p=await Promise.race([f,u,l]);if(p.__type===bA.PROCESSED)d=p.response;else{let v;for(;;){const m=await this.getSignatureStatus(a);if(m==null)break;if(m.context.slot<(p.slotInWhichNonceDidAdvance??n)){await mp(400);continue}v=m;break}if(v?.value){const m=e||"finalized",{confirmationStatus:g}=v.value;switch(m){case"processed":case"recent":if(g!=="processed"&&g!=="confirmed"&&g!=="finalized")throw new Av(a);break;case"confirmed":case"single":case"singleGossip":if(g!=="confirmed"&&g!=="finalized")throw new Av(a);break;case"finalized":case"max":case"root":if(g!=="finalized")throw new Av(a);break;default:}d={context:v.context,value:{err:v.value.err}}}else throw new Av(a)}}finally{o=!0,c()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>l({__type:bA.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let o;try{const l=await Promise.race([a,i]);if(l.__type===bA.PROCESSED)o=l.response;else throw new JZ(t,l.timeoutMs/1e3)}finally{clearTimeout(n),s()}return o}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=ft(e,cn(gt(cTe)));if("error"in t)throw new Ut(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=ft(n,uTe);if("error"in i)throw new Ut(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),a=ft(s,cn(He()));if("error"in a)throw new Ut(a.error,"failed to get slot");return a.result}async getSlotLeader(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),a=ft(s,cn(ot()));if("error"in a)throw new Ut(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=ft(i,cn(gt(Gr)));if("error"in s)throw new Ut(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);Bi(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=ft(i,hTe);if("error"in s)throw new Ut(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),a=ft(s,cn(He()));if("error"in a)throw new Ut(a.error,"failed to get transaction count");return a.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=ft(n,OCe);if("error"in i)throw new Ut(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=_r(n),a=this._buildArgs([e.map(c=>c.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),o=await this._rpcRequest("getInflationReward",a),l=ft(o,_Ce);if("error"in l)throw new Ut(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=ft(e,NCe);if("error"in t)throw new Ut(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),a=ft(s,kCe);if("error"in a)throw new Ut(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=ft(e,HCe);if("error"in t)throw new Ut(t.error,"failed to get epoch schedule");const n=t.result;return new uCe(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=ft(e,QCe);if("error"in t)throw new Ut(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=ft(i,dTe);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=ft(t,MTe);if("error"in n)throw new Ut(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=ft(i,CTe);if("error"in s)throw new Ut(s.error,"failed to get fee calculator");const{context:a,value:o}=s.result;return{context:a,value:o!==null?o.feeCalculator:null}}async getFeeForMessage(e,t){const n=Nm(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),a=ft(s,hi(vt(He())));if("error"in a)throw new Ut(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(a=>a.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=ft(i,PCe);if("error"in s)throw new Ut(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),a=ft(s,ETe);if("error"in a)throw new Ut(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgs([e],n,void 0,i),a=await this._rpcRequest("isBlockhashValid",s),o=ft(a,STe);if("error"in o)throw new Ut(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=ft(e,cn(TCe));if("error"in t)throw new Ut(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=ft(e,cn(ot()));if("error"in t)throw new Ut(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const o=ft(a,yTe);if("error"in o)throw o.error;return o.result}case"none":{const o=ft(a,vTe);if("error"in o)throw o.error;return o.result}default:{const o=ft(a,gTe);if("error"in o)throw o.error;const{result:l}=o;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:f})=>({meta:u,transaction:{...c,message:SR(f,c.message)},version:f}))}:null}}}catch(o){throw new Ut(o,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const o=ft(a,_Te);if("error"in o)throw o.error;return o.result}case"none":{const o=ft(a,xTe);if("error"in o)throw o.error;return o.result}default:{const o=ft(a,wTe);if("error"in o)throw o.error;return o.result}}}catch(o){throw new Ut(o,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:o,...l}=e;n=o,t=l}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),a=ft(s,UCe);if("error"in a)throw new Ut(a.error,"failed to get block production information");return a.result}async getTransaction(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),a=await this._rpcRequest("getTransaction",s),o=ft(a,BR);if("error"in o)throw new Ut(o.error,"failed to get transaction");const l=o.result;return l&&{...l,transaction:{...l.transaction,message:SR(l.version,l.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=_r(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),a=await this._rpcRequest("getTransaction",s),o=ft(a,Nx);if("error"in o)throw new Ut(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=_r(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=ft(l,Nx);if("error"in c)throw new Ut(c.error,"failed to get transactions");return c.result})}async getTransactions(e,t){const{commitment:n,config:i}=_r(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=ft(l,BR);if("error"in c)throw new Ut(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:SR(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=ft(i,bTe);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");const o={...a,transactions:a.transactions.map(({transaction:l,meta:c})=>{const u=new tf(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...o,transactions:o.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Au.populate(l.message,l.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),a=ft(s,cn(gt(He())));if("error"in a)throw new Ut(a.error,"failed to get blocks");return a.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=ft(i,sV);if("error"in s)throw new Ut(s.error,"failed to get block");const a=s.result;if(!a)throw new Error("Block "+e+" not found");return a}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=ft(i,sV);if("error"in s)throw new Ut(s.error,"failed to get confirmed block");const a=s.result;if(!a)throw new Error("Confirmed block "+e+" not found");return a}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=ft(i,BR);if("error"in s)throw new Ut(s.error,"failed to get transaction");const a=s.result;if(!a)return a;const o=new tf(a.transaction.message),l=a.transaction.signatures;return{...a,transaction:Au.populate(o,l)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=ft(i,Nx);if("error"in s)throw new Ut(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(a=>{const o=ft(a,Nx);if("error"in o)throw new Ut(o.error,"failed to get confirmed transactions");return o.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const l=await this.getConfirmedBlockSignatures(t,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let a=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>a));)try{const l=await this.getConfirmedBlockSignatures(n);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),a=ft(s,JCe);if("error"in a)throw new Ut(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),a=ft(s,$Ce);if("error"in a)throw new Ut(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new tV({key:e,state:tV.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=nN.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=ft(n,TTe);if("error"in i)throw new Ut(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await mp(100);const n=Date.now()-this._blockhashInfo.lastFetch>=gCe;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await mp(iCe/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=_r(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),a=ft(s,hi(He()));if("error"in a)throw new Ut(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(e,t,n){if("message"in e){const m=e.serialize(),g=un.Buffer.from(m).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const w=t||{};w.encoding="base64","commitment"in w||(w.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(w.innerInstructions=t.innerInstructions);const b=[g,w],E=await this._rpcRequest("simulateTransaction",b),B=ft(E,rV);if("error"in B)throw new Error("failed to simulate transaction: "+B.error.message);return B.result}let i;if(e instanceof Au){let v=e;i=new Au,i.feePayer=v.feePayer,i.instructions=e.instructions,i.nonceInfo=v.nonceInfo,i.signatures=v.signatures}else i=Au.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let v=this._disableBlockhashCaching;for(;;){const m=await this._blockhashWithExpiryBlockHeight(v);if(i.lastValidBlockHeight=m.lastValidBlockHeight,i.recentBlockhash=m.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const g=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(g)&&!this._blockhashInfo.transactionSignatures.includes(g)){this._blockhashInfo.simulatedSignatures.push(g);break}else v=!0}}const a=i._compile(),o=a.serialize(),c=i._serialize(o).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(n){const v=(Array.isArray(n)?n:a.nonProgramIds()).map(m=>m.toBase58());u.accounts={encoding:"base64",addresses:v}}s&&(u.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(u.innerInstructions=t.innerInstructions);const f=[c,u],d=await this._rpcRequest("simulateTransaction",f),p=ft(d,rV);if("error"in p){let v;if("data"in p.error&&(v=p.error.data.logs,v&&Array.isArray(v))){const m=`
    `,g=m+v.join(m);console.error(p.error.message,g)}throw new Zz({action:"simulate",signature:"",transactionMessage:p.error.message,logs:v})}return p.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const a=e.serialize();return await this.sendRawTransaction(a,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let a=this._disableBlockhashCaching;for(;;){const o=await this._blockhashWithExpiryBlockHeight(a);if(e.lastValidBlockHeight=o.lastValidBlockHeight,e.recentBlockhash=o.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))a=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=Nm(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const a=[e,n],o=await this._rpcRequest("sendTransaction",a),l=ft(o,RTe);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new Zz({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:a}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const o=await this._rpcWebSocket.call(a,s);this._setSubscription(n,{...i,serverSubscriptionId:o,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[o]=i.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:s,error:o}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:a}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[s])}catch(o){if(o instanceof Error&&console.error(`${a} error:`,o.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=ft(e,eTe);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=$z([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const a=this._subscriptionsByHash[i];Bi(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),a.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=_r(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=ft(e,nTe);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:a}=_r(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",a||(i?{filters:nV(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=ft(e,UTe);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=ft(e,iTe);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=ft(e,aTe);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let a={};n&&(a.encoding=n),s&&(a.commitment=s),i&&(a=Object.assign(a,i)),e.push(a)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=ft(e,oTe);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(a,o)=>{if(a.type==="status"){t(a.result,o);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},a=this._buildArgs([e],i,void 0,s),o=this._makeSubscription({callback:(l,c)=>{t(l,c);try{this.removeSignatureListener(o)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=ft(e,lTe);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Ce.struct([Ce.u32("instruction"),Pm("recentSlot"),Ce.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ce.struct([Ce.u32("instruction")])},ExtendLookupTable:{index:2,layout:Ce.struct([Ce.u32("instruction"),Pm(),Ce.seq(Bn(),Ce.offset(Ce.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ce.struct([Ce.u32("instruction")])},CloseLookupTable:{index:4,layout:Ce.struct([Ce.u32("instruction")])}});new Jt("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Ce.struct([Ce.u8("instruction"),Ce.u32("units"),Ce.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:Ce.struct([Ce.u8("instruction"),Ce.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:Ce.struct([Ce.u8("instruction"),Ce.u32("units")])},SetComputeUnitPrice:{index:3,layout:Ce.struct([Ce.u8("instruction"),Pm("microLamports")])}});new Jt("ComputeBudget111111111111111111111111111111");Ce.struct([Ce.u8("numSignatures"),Ce.u8("padding"),Ce.u16("signatureOffset"),Ce.u16("signatureInstructionIndex"),Ce.u16("publicKeyOffset"),Ce.u16("publicKeyInstructionIndex"),Ce.u16("messageDataOffset"),Ce.u16("messageDataSize"),Ce.u16("messageInstructionIndex")]);new Jt("Ed25519SigVerify111111111111111111111111111");GMe.utils.isValidPrivateKey;Ce.struct([Ce.u8("numSignatures"),Ce.u16("signatureOffset"),Ce.u8("signatureInstructionIndex"),Ce.u16("ethAddressOffset"),Ce.u8("ethAddressInstructionIndex"),Ce.u16("messageDataOffset"),Ce.u16("messageDataSize"),Ce.u8("messageInstructionIndex"),Ce.blob(20,"ethAddress"),Ce.blob(64,"signature"),Ce.u8("recoveryId")]);new Jt("KeccakSecp256k11111111111111111111111111111");var AJ;new Jt("StakeConfig11111111111111111111111111111111");class fJ{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}AJ=fJ;fJ.default=new AJ(0,0,Jt.default);Object.freeze({Initialize:{index:0,layout:Ce.struct([Ce.u32("instruction"),XMe(),ZMe()])},Authorize:{index:1,layout:Ce.struct([Ce.u32("instruction"),Bn("newAuthorized"),Ce.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:Ce.struct([Ce.u32("instruction")])},Split:{index:3,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("lamports")])},Withdraw:{index:4,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("lamports")])},Deactivate:{index:5,layout:Ce.struct([Ce.u32("instruction")])},Merge:{index:7,layout:Ce.struct([Ce.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:Ce.struct([Ce.u32("instruction"),Bn("newAuthorized"),Ce.u32("stakeAuthorizationType"),Zp("authoritySeed"),Bn("authorityOwner")])}});new Jt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Ce.struct([Ce.u32("instruction"),JMe()])},Authorize:{index:1,layout:Ce.struct([Ce.u32("instruction"),Bn("newAuthorized"),Ce.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:Ce.struct([Ce.u32("instruction"),Ce.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ce.struct([Ce.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:Ce.struct([Ce.u32("instruction"),$Me()])}});new Jt("Vote111111111111111111111111111111111111111");new Jt("Va1idator1nfo111111111111111111111111111111");tt({name:ot(),website:Qt(ot()),details:Qt(ot()),iconUrl:Qt(ot()),keybaseUsername:Qt(ot())});new Jt("Vote111111111111111111111111111111111111111");Ce.struct([Bn("nodePubkey"),Bn("authorizedWithdrawer"),Ce.u8("commission"),Ce.nu64(),Ce.seq(Ce.struct([Ce.nu64("slot"),Ce.u32("confirmationCount")]),Ce.offset(Ce.u32(),-8),"votes"),Ce.u8("rootSlotValid"),Ce.nu64("rootSlot"),Ce.nu64(),Ce.seq(Ce.struct([Ce.nu64("epoch"),Bn("authorizedVoter")]),Ce.offset(Ce.u32(),-8),"authorizedVoters"),Ce.struct([Ce.seq(Ce.struct([Bn("authorizedPubkey"),Ce.nu64("epochOfLastAuthorizedSwitch"),Ce.nu64("targetEpoch")]),32,"buf"),Ce.nu64("idx"),Ce.u8("isEmpty")],"priorVoters"),Ce.nu64(),Ce.seq(Ce.struct([Ce.nu64("epoch"),Ce.nu64("credits"),Ce.nu64("prevCredits")]),Ce.offset(Ce.u32(),-8),"epochCredits"),Ce.struct([Ce.nu64("slot"),Ce.nu64("timestamp")],"lastTimestamp")]);const DTe=void 0,OTe=`https://devnet.helius-rpc.com/?api-key=${DTe}`,NTe=void 0,hJ=new hSe;console.log(hJ);function PTe(r,e,t){return new Promise((n,i)=>{dJ(r,e).then(s=>{n(s?.nfts?.length>0)}).catch(s=>{i(s)})})}function kTe(r,e,t){return new Promise((n,i)=>{hJ.getUserCNFTs(r,e,t).then(s=>{n(s)}).catch(s=>{i(s)})})}function HTe(r,e,t,n,i){return new Promise(async(s,a)=>{const{solana:o}=window;console.log(window.solana),(!o||!o.isPhantom)&&(alert("Please install Phantom Wallet!"),a()),alert("VITE_VALIDATION_SERVER_URL not defined in .env"),a();try{const c=(await window.solana.connect()).publicKey.toString(),f=await(await fetch(`${NTe}/request-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buyerPublicKey:c,merchantPublicKey:r,treeAddress:e,collectionName:t,purchaseNFTs:i,amount:n})})).json();if(f.transaction){const d=f.transaction;await QTe(d)==null?a():s()}else console.error("Error requesting payment:",f.error),a()}catch(l){console.error("Error requesting payment:",l.message),a()}})}async function QTe(r){const{solana:e}=window;if(!e||!e.isPhantom){alert("Please install Phantom Wallet!");return}try{const t=new LTe(OTe),n=Uint8Array.from(atob(r),o=>o.charCodeAt(0)),i=Au.from(n),s=await e.signTransaction(i),a=await t.sendRawTransaction(s.serialize({requireAllSignatures:!1}));return console.log("✅ Transaction Signature:",a),a}catch(t){if(console.error("❌ Transaction failed:",t),t.logs)console.error("🔍 Transaction logs:",t.logs);else if(t.signature){console.log("Fetching logs for signature:",t.signature);const n=await connection.getTransaction(t.signature,{commitment:"confirmed"});console.error("🔍 Transaction logs:",n?.meta?.logMessages)}}}function dJ(r,e,t){switch(e.toLowerCase()){case"ethereum":return aV();case"polygon":return aV();case"solana":return console.warn("solana work in progress"),Promise.resolve(!1);default:return console.log("Unsupported Netwrok: "+r),Promise.resolve(!1)}}const aV=(r,e,t)=>{{console.error("No opensea key was provided. Cant fetch user's owned nft's");return}};function MR(r){return console.log("connect wallet:",r),new Promise(async(e,t)=>{try{switch(r.toLowerCase()){case"ethereum":case"polygon":{if(!window.ethereum)return t(new Error("Ethereum wallet is not available."));const n={ethereum:"0x1",polygon:"0x89"},i=r.toLowerCase()==ethereum?n.ethereum:n.polygon;await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:i}]});const s=await window.ethereum.request({method:"eth_requestAccounts"});return e(s.length>0?s[0]:"")}case"solana":{if(!window.solana||!window.solana.isPhantom)return t(new Error("Solana wallet (Phantom) is not available."));const n=await window.solana.connect();return e(n.publicKey.toString())}default:return t(new Error("Unsupported network."))}}catch(n){return t(n)}})}async function zTe(r,e,t,n,i){throw r?new Error("No screenshot was provided"):new Error("No avatar was provided")}class Ib{constructor(e,t){switch(this.ownedTraits={},this.ownedIDs=[],t){case"name":e.forEach(n=>{console.log(n),this.addOwnedID(n.name)});break;case"attributes":e.forEach(n=>{n.attributes.forEach(i=>{this.addOwnedTrait(i.trait_type,i.value)})});break;case"image":e.forEach(n=>{const i=atob(n.image.split(",")[1]);[...new DOMParser().parseFromString(i,"image/svg+xml").querySelectorAll("text")].map(l=>l.textContent).forEach(l=>{this.addOwnedID(l)})});break;default:this.ownedTraits=e.ownedTraits||{},this.ownedIDs=e.ownedIDs||[];break}}addOwnedID(e){this.ownedIDs.includes(e)||this.ownedIDs.push(e)}addOwnedTrait(e,t){this.ownedTraits[e]==null&&(this.ownedTraits[e]=[]),this.ownedTraits[e].includes(t)||this.ownedTraits[e].push(t)}getOwnedTraitIDs(e){return[...this.ownedTraits[e]||[],...this.ownedIDs]}ownTraits(){return Object.keys(this.ownedTraits).length>0||this.ownedIDs.length>0}}class pJ{constructor(){}getSolanaPurchasedAssets(e,t){console.log(e);const{delegateAddress:n,collectionName:i}=e,s=t?Promise.resolve(t):MR("solana");return new Promise(a=>{s.then(o=>kTe(o,n,i).then(l=>{a(new Ib({ownedIDs:l.ownedIDs,ownedTraits:l.ownedTraits}))})).catch(o=>{a(null)})})}checkForOwnership(e,t,n){return(n?Promise.resolve(n):MR(t)).then(s=>PTe(s,network))}getNftsFromCollection(e,t,n){return(n?Promise.resolve(n):MR(t)).then(s=>dJ(s,t)).then(s=>Mt(s?.nfts))}getMetaFromCollection(e,t,n){return this.getNftsFromCollection(e,t,n).then(i=>(console.log(i),(a=>{const o=[],l=a.map(c=>new Promise(u=>{console.log(c),fetch(c.metadata_url).then(f=>f.json()).then(f=>{o.push(f),u()}).catch(f=>{console.warn("Error processing metadata:",c.metadata_url),console.error(f),u()})}));return Promise.all(l).then(()=>o)})(i)))}getTraitsFromCollection(e,t,n,i){return e==null||t==null||n==null?(console.error("Missing parameter: collectionName, chainName or dataSource to fetch nft collection, skipping nft validation"),Promise.resolve({})):(console.log("gets"),n=="name"?this.getNftsFromCollection(e,t,i).then(s=>(console.log(s),new Ib(s,n))):this.getMetaFromCollection(e,t,i).then(s=>new Ib(s,n)))}}class oV{constructor(e,t){const{chainName:n,collectionLockID:i,dataSource:s,solanaPurchaseAssets:a,price:o,currency:l,purchasable:c,locked:u,assetsLocation:f,traitsDirectory:d,thumbnailsDirectory:p,traitIconsDirectorySvg:v,animationPath:m,exportScale:g,displayScale:w,initialTraits:b,requiredTraits:E,randomTraits:B,colliderTraits:S,lipSyncTraits:M,blinkerTraits:I,traitRestrictions:k,defaultCullingLayer:O,defaultCullingDistance:C,offset:P,vrmMeta:D,traits:F,textureCollections:_,decalCollections:R,colorCollections:L,canDownload:Q=!0,downloadOptions:G={}}=e;this.collectionID=t,this.walletCollections=new pJ,this.chainName=n,this.dataSource=s,this.collectionLockID=i,this.solanaPurchaseAssets=JTe(a),u==null?this.locked=i!=null||this.solanaPurchaseAssets!=null:this.locked=u,console.log(this.solanaPurchaseAssets),this.price=o,this.currency=l||"sol",this.purchasable=c,this.assetsLocation=f,this.traitsDirectory=d,this.thumbnailsDirectory=p,this.traitIconsDirectorySvg=v,this.displayScale=w||g||1,this.animationPath=Mt(m),this.requiredTraits=Mt(E),this.randomTraits=Mt(B),this.initialTraits=b||[...new Set(this.requiredTraits.concat(this.randomTraits))],this.colliderTraits=Mt(S),this.lipSyncTraits=Mt(M),this.blinkerTraits=Mt(I),this.traitRestrictions=k,this.defaultCullingLayer=O,this.defaultCullingDistance=C,this.offset=P,this.canDownload=Q,this.downloadOptions=G;const Y=()=>{const V=[];for(const T in F)V.push(F[T].trait);return V};this.allTraits=Y(),Y(),(()=>{G.vrmMeta=G.vrmMeta||D,G.scale=G.scale||g||1,G.mToonAtlasSize=G.mToonAtlasSize||2048,G.mToonAtlasSizeTransp=G.mToonAtlasSizeTransp||1024,G.stdAtlasSize=G.stdAtlasSize||2048,G.stdAtlasSizeTransp=G.stdAtlasSizeTransp||1024,G.exportStdAtlas=G.exportStdAtlas||!1,G.exportMtoonAtlas=G.exportMtoonAtlas||!0,G.screenshotFaceDistance=G.screenshotFaceDistance||1,G.screenshotFaceOffset=G.screenshotFaceOffset||[0,0,0],G.screenshotResolution=G.screenshotResolution||[512,512],G.screenshotBackground=G.screenshotBackground||[.1,.1,.1],G.screenshotFOV=G.screenshotFOV||75,!G.exportStdAtlas&&!G.exportMtoonAtlas&&(G.exportMtoonAtlas=!0)})(),this.manifestRestrictions=new UEe(this),this.textureTraits=[],this.textureTraitsMap=null,this.createTextureTraits(_,!1),this.decalTraits=[],this.decalTraitsMap=null,this.createDecalTraits(R),this.colorTraits=[],this.colorTraitsMap=null,this.createColorTraits(L,!1),this.modelTraits=[],this.modelTraitsMap=null,this.createModelTraits(F,!1),this.manifestRestrictions._init(),this.unlockPurchasedAssetsWithWallet()}getCurrency(){return this.currency}getSolanaPurchaseAssets(){return this.solanaPurchaseAssets}isNFTLocked(){return this.locked}unlockPurchasedAssetsWithWallet(e){return this.solanaPurchaseAssets==null?Promise.resolve():new Promise(t=>{this.walletCollections.getSolanaPurchasedAssets(this.solanaPurchaseAssets,e).then(n=>{this.unlockTraits(n),t()}).catch(n=>{console.log(n),t()})})}unlockNFTAssetsWithWallet(e=null){return this.collectionLockID==null?Promise.resolve():new Promise(t=>{this.walletCollections.getTraitsFromCollection(this.collectionLockID,this.chainName,this.dataSource,e).then(n=>{this.unlockTraits(n),t()}).catch(n=>{t()})})}unlockWalletOwnedTraits(e=null){return this.locked==!1?(console.log("Already unlocked"),Promise.resolve()):new Promise(t=>{Promise.all([this.unlockNFTAssetsWithWallet(e),this.unlockPurchasedAssetsWithWallet(e)]).then(()=>{console.log("fini"),t()}).catch(n=>{console.log("Error:",n),t()})})}getExportOptions(){return this.downloadOptions}getGroupModelTraits(){return this.modelTraits}getInitialTraits(){return this.getRandomTraits(this.initialTraits)}getSelectionForAllTraits(){return this.getRandomTraits(this.allTraits)}getTraitOptionById(e){return this.getAllTraitOptions().find(t=>t.id==e)}getTraitOptionsByType(e){return this.getAllTraitOptions().filter(t=>t.type==e)}getAllTraitOptions(){return this.modelTraits.map(e=>e?.getCollection()).flat()}getAllBlendShapeTraits(){return this.modelTraits.map(e=>e.getCollection()).flat().map(e=>e.blendshapeTraits).flat().map(e=>e?.collection).flat().filter(e=>!!e)}isColliderRequired(e){return this.colliderTraits.indexOf(e)!=-1}isLipsyncTrait(e){return this.lipSyncTraits.indexOf(e)!=-1}getNFTraitOptionsFromURL(e,t){return new Promise(async n=>{try{const i=await this._fetchJson(e);n(this.getNFTraitOptionsFromObject(i,t))}catch{console.log("unable to fetch from url:",e),n(null)}})}getNFTraitOptionsFromObject(e,t){const n=e.attributes;if(n){t=Mt(t);const i=[];return n.forEach(s=>{if(t.indexOf(s.trait_type)==-1){const a=this.getTraitOption(s.trait_type,s.value);a&&i.push(a)}}),i}else return console.warn("No attiributes parameter was found in ",e),null}getRandomTraits(e){const t=[];return(e||this.randomTraits).forEach(i=>{const s=this.getRandomTrait(i);s&&t.push(s)}),t}getRandomTrait(e){const t=this.getModelGroup(e);if(t){const n=t.getRandomTrait();if(n){const i=n.targetTextureCollection?.getRandomTrait(),s=n.targetColorCollection?.getRandomTrait();return new CR(n,i,s)}else return null}else return console.warn("No trait group with name "+e+" was found."),null}async _fetchJson(e){return await(await fetch(e)).json()}getTraitOption(e,t){const n=this.getModelTrait(e,t);if(n){const i=n.targetTextureCollection?.getRandomTrait(),s=n.targetColorCollection?.getRandomTrait();return new CR(n,i,s)}return null}getCustomTraitOption(e,t){const n=this.getCustomModelTrait(e,t);return n?new CR(n,null,null):null}getCustomModelTrait(e,t){return this.getModelGroup(e)?.getCustomTrait(t)}getModelTrait(e,t){return this.getModelGroup(e)?.getTrait(t)}getModelTraits(e){const t=this.getModelGroup(e);return t?t.getCollection():null}unlockTraits(e){const t=e.ownedIDs||[],n=e.ownedTraits||{};t.length>0&&(this.textureTraits.forEach(i=>{i.unlockTraits(t)}),this.decalTraits.forEach(i=>{i.unlockTraits(t)}),this.colorTraits.forEach(i=>{i.unlockTraits(t)}),this.modelTraits.forEach(i=>{i.unlockTraits(t)}));for(const i in n){const s=this.getTextureGroup(i);s&&s.unlockTraits(n[i]);const a=this.getDecalGroup(i);a&&a.unlockTraits(n[i]);const o=this.getColorGroup(i);o&&o.unlockTraits(n[i]);const l=this.getModelGroup(i);l&&l.unlockTraits(n[i])}}getModelGroup(e){return this.modelTraitsMap.get(e)}getTextureTrait(e,t){return this.getTextureGroup(e)?.getTrait(t)}getTextureGroup(e){return this.textureTraitsMap.get(e)}getDecalTrait(e,t){return this.getDecalGroup(e)?.getTrait(t)}getDecalGroup(e){return this.decalTraitsMap.get(e)}getColorTrait(e,t){return this.getColorGroup(e)?.getTrait(t)}getColorGroup(e){return this.colorTraitsMap.get(e)}getTraitsDirectory(){let e=(this.assetsLocation||"")+(this.traitsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getThumbnailsDirectory(){let e=(this.assetsLocation||"")+(this.thumbnailsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getTraitIconsDirectorySvg(){let e=(this.assetsLocation||"")+(this.traitIconsDirectorySvg||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getAssetsDirectory(){let e=this.assetsLocation||"";return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getDecalsDirectory(){let e=(this.assetsLocation||"")+(this.decalDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}createModelTraits(e,t=!1){t&&(this.modelTraits=[]);let n=!1;Mt(e).forEach(i=>{const s=new VTe(this,i);this.modelTraits.push(s),n&&s.getAllDecals()?.length?console.warn("Detected multiple traits with decals; only one trait with decals is supported at the moment"):s.getAllDecals()?.length||(n=!0)}),this.modelTraitsMap=new Map(this.modelTraits.map(i=>[i.trait,i])),this.modelTraits.forEach(i=>{this.manifestRestrictions.createTraitRestriction(i)})}createTextureTraits(e,t=!1){t&&(this.textureTraits=[]),Mt(e).forEach(n=>{this.textureTraits.push(new GTe(this,n))}),this.textureTraitsMap=new Map(this.textureTraits.map(n=>[n.trait,n]))}createDecalTraits(e,t=!1){t&&(this.decalTraits=[]),Mt(e).forEach(n=>{this.decalTraits.push(new jTe(this,n))}),this.decalTraitsMap=new Map(this.decalTraits.map(n=>[n.trait,n]))}createColorTraits(e,t=!1){t&&(this.colorTraits=[]),Mt(e).forEach(n=>{this.colorTraits.push(new WTe(this,n))}),this.colorTraitsMap=new Map(this.colorTraits.map(n=>[n.trait,n]))}}class VTe{collection;manifestData;restrictions;constructor(e,t){const{locked:n,price:i,purchasable:s,trait:a,name:o,iconSvg:l,cameraTarget:c={distance:3,height:1},cullingDistance:u,cullingLayer:f,collection:d}=t;this.manifestData=e,this.collectionID=e.collectionID,this.locked=n??e.locked,this.price=i??e.price,this.purchasable=s??e.purchasable,this.isRequired=e.requiredTraits.indexOf(a)!==-1,this.trait=a,this.name=o,this.iconSvg=l,this.fullIconSvg=e.getTraitIconsDirectorySvg()+l,this.cameraTarget=c,this.cullingDistance=u,this.cullingLayer=f,this.collection=[],this.collectionMap=null,this.createCollection(d)}appendCollection(e,t){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(t){console.log(`Model with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Model with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,t=!1){t&&(this.collection=[]),Mt(e).forEach(n=>{this.collection.push(new lV(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getCustomTrait(e){return new lV(this,{directory:e,fullDirectory:e,collectionID:this.collectionID,id:"_custom",name:"Custom"})}getTrait(e){return this.collectionMap.get(e)}unlockTraits(e){e.forEach(t=>{const n=this.collectionMap.get(t);n!=null&&(n.locked=!1)})}getAllDecals(){return this.collection.map(t=>t.targetDecalCollection).flat().map(t=>t?.collection).flat().filter(t=>!!t)}getTraitByIndex(e=!0){return this.getCollection(e)[index]}getRandomTrait(e=!0){const t=this.getCollection(e,!1);return t.length>0?t[Math.floor(Math.random()*t.length)]:null}getCollection(e=!0,t=!0){return e?this.collection.filter(i=>i.locked===!1||i.purchasable===!0&&i.price!=null&&t===!0):this.collection}}class GTe{constructor(e,t){const{trait:n,collection:i}=t;n?this.trait=n:(console.warn("TraitTexturesGroup is missing property trait"),this.trait="undefined"+Math.floor(Math.random()*10)),this.manifestData=e,this.collectionID=e.collectionID,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(t){console.log(`Texture with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Texture with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,t=!1){t&&(this.collection=[]),Mt(e).forEach(n=>{this.collection.push(new mJ(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}unlockTraits(e){e.forEach(t=>{const n=this.collectionMap.get(t);n!=null&&(n.locked=!1)})}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class jTe{trait;collection;collectionMap;constructor(e,t){const{trait:n,collection:i}=t;this.manifestData=e,this.collectionID=e.collectionID,n?this.trait=n:(console.warn("DecalTextureGroup is missing property trait"),this.trait="undefined"+Math.floor(Math.random()*10)),this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t=!1){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(t){console.log(`Texture with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Texture with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,t=!1){t&&(this.collection=[]),Mt(e).forEach(n=>{this.collection.push(new YTe(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}unlockTraits(e){e.forEach(t=>{const n=this.collectionMap.get(t);n!=null&&(n.locked=!1)})}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class WTe{constructor(e,t){const{trait:n,collection:i}=t;this.manifestData=e,this.collectionID=e.collectionID,this.trait=n,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(t){console.log(`Color with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Color with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,t=!1){t&&(this.collection=[]),Mt(e).forEach(n=>{this.collection.push(new XTe(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}unlockTraits(e){e.forEach(t=>{const n=this.collectionMap.get(t);n!=null&&(n.locked=!1)})}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class lV{type;blendshapeTraits=[];decalMeshNameTargets=[];targetDecalCollection=null;traitGroup;blendshapeTraitsMap=new Map;_restrictedItems=[];constructor(e,t){const{locked:n,price:i,id:s,purchasable:a,type:o="",directory:l,name:c,thumbnail:u,cullingDistance:f,cullingLayer:d,textureCollection:p,blendshapeTraits:v,colorCollection:m,decalCollection:g,decalMeshNameTargets:w,fullDirectory:b,fullThumbnail:E,restrictedItems:B}=t;if(this.manifestData=e.manifestData,this.collectionID=e.collectionID,this.locked=n??e.locked,this.price=i??e.price,this.purchasable=a??e.purchasable,this.traitGroup=e,this.decalMeshNameTargets=Mt(w),this.id=s,this.directory=l,this._restrictedItems=B||[],b)this.fullDirectory=b;else if(Array.isArray(l)){this.fullDirectory=[];for(let S=0;S<l.length;S++)this.fullDirectory[S]=e.manifestData.getTraitsDirectory()+l[S]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+l;this.name=c,this.thumbnail=u,this.fullThumbnail=E||e.manifestData.getThumbnailsDirectory()+u,this.cullHiddenMeshes=f||[0,0],this.cullingLayer=d??e.cullingLayer??e.manifestData.defaultCullingLayer??0,this.cullingDistance=f||e.cullingDistance||e.manifestData.defaultCullingDistance||[0,0],this.type=o,this.targetTextureCollection=p?e.manifestData.getTextureGroup(p):null,this.targetColorCollection=m?e.manifestData.getColorGroup(m):null,this.targetDecalCollection=g?e.manifestData.getDecalGroup(g):null,v&&Array.isArray(v)&&(this.blendshapeTraits=v.map(S=>new KTe(this,S)),this.blendshapeTraitsMap=new Map(this.blendshapeTraits.map(S=>[S.trait,S])))}isRestricted(e){return!(e==null||this.traitGroup.restrictions?.isTraitAllowed(e.traitGroup.trait)||this.traitGroup.restrictions?.isTypeAllowed(e.type))}getGroupBlendShapeTraits(){return this.blendshapeTraits}getBlendShapes(e){return this.blendshapeTraitsMap?.get(e)?.collection}getBlendShape(e,t){return this.blendshapeTraitsMap?.get(e)?.getTrait(t)}}class KTe{trait;name;isBlendShapeGroup=!0;collection=[];cameraTarget=null;collectionMap=null;constructor(e,t){const{trait:n,name:i,collection:s,cameraTarget:a=e.traitGroup.cameraTarget||{distance:3,height:1}}=t;this.modelTrait=e,this.collectionID=e.collectionID,this.trait=n,this.name=i,this.cameraTarget=a,this.createCollection(s)}createCollection(e,t=!1){t&&(this.collection=[]),Mt(e).forEach(n=>{this.collection.push(new qTe(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class qTe{id;name;fullThumbnail=void 0;isBlendShape=!0;constructor(e,t){const{id:n,name:i,fullThumbnail:s}=t;n||console.warn("BlendShapeTrait is missing id, parent trait: "+e.trait),i||console.warn("BlendShapeTrait is missing name, parent trait: "+e.trait),this.parentGroup=e,this.collectionID=e.collectionID,this.id=n,this.fullThumbnail=s,this.name=i}getGroupId(){return this.parentGroup.trait}}class mJ{constructor(e,t){const{id:n,directory:i,fullDirectory:s,name:a,thumbnail:o}=t;if(this.traitGroup=e,this.collectionID=e.collectionID,this.id=n,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+o;this.name=a,this.thumbnail=o,this.fullThumbnail=e.manifestData.getThumbnailsDirectory()+o}}class YTe extends mJ{id;directory;fullDirectory;name;thumbnail;fullThumbnail;traitGroup;constructor(e,t){super(e,t);const{id:n,directory:i,fullDirectory:s,name:a,thumbnail:o}=t;if(this.traitGroup=e,this.collectionID=e.collectionID,this.id=n,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+o;this.name=a,this.thumbnail=o,this.fullThumbnail=e.manifestData.getThumbnailsDirectory()+o}}class XTe{constructor(e,t){const{id:n,value:i,name:s}=t;this.traitGroup=e,this.collectionID=e.collectionID,this.id=n,this.name=s,this.value=i}}class CR{constructor(e,t,n){this.traitModel=e,this.traitTexture=t,this.traitColor=n}}class ZTe{constructor(e){const{merkleTreeAddress:t,depositAddress:n,collectionName:i}=e;this.merkleTreeAddress=t,this.collectionName=i,this.depositAddress=n}}function JTe(r){return r==null?null:!r?.merkleTreeAddress||!r?.collectionName||!r?.depositAddress?(console.warn("solanaPurchaseCNFT defined incomplete in manifest, missing either merkleTreeAddress or collectionName or depositAddress, setting as null"),null):new ZTe(r)}class $Te{constructor(){this.mainManifestData=null,this.manifestDataCollection=[],this.manifestDataByIdentifier={},this.defaultValues={defaultCullingLayer:-1,defaultCullingDistance:null,maxCullingDistance:1/0}}getLoadedLockedManifests(e){return this.manifestDataCollection.filter(t=>t.locked==e)}getMainCurrency(){return this.mainManifestData.getCurrency()}getMainSolanaPurchaseAssetsDefinition(){return this.mainManifestData.getSolanaPurchaseAssets()}unlockMainPurchasedAssets(e){this.mainManifestData.unlockTraits(e)}getLoadedManifests(){return this.manifestDataCollection}getLoadedManifestByIdentifier(e){return this.manifestDataByIdentifier[e]}getLoadedManifestByIndex(e){return this.manifestDataCollection[e]}unlockManifestByIndex(e,t=null){const n=this.manifestDataCollection[e];return n!=null?n.unlockWalletOwnedTraits(t):(console.error(`No manifest with index ${e} was found.`),Promise.reject())}unlockManifestByIdentifier(e,t=null){const n=this.manifestDataByIdentifier[e];return n!=null?n.unlockWalletOwnedTraits(t):(console.error(`No manifest with identifier ${e} was found.`),Promise.reject())}isManifestByIndexNFTLocked(e){return this.manifestDataCollection[e]?.isNFTLocked(testWallet)}isManifestByIdentifierNFTLocked(e){return this.manifestDataByIdentifier[e]?.isNFTLocked(testWallet)}clearManifests(){this.mainManifestData=null,this.manifestDataCollection=[],this.manifestDataByIdentifier={}}getDisplayScale(){return this.mainManifestData==null?(console.warn("no manifest loaded, returning display scale of 1"),1):this.mainManifestData.displayScale}getDefaultValues(){return this.defaultValues}setManifestDefaultValues(e){this.defaultValues={defaultCullingLayer:e.defaultCullingLayer!=null?e.defaultCullingLayer:-1,defaultCullingDistance:e.defaultCullingDistance!=null?e.defaultCullingDistance:null,maxCullingDistance:e.maxCullingDistance!=null?e.maxCullingDistance:1/0}}isGroupTraitRestrictedInAnyManifest(e,t){for(const n of this.manifestDataCollection)n.manifestRestrictions.restrictionMaps[e]?.isReverseBlendsh}setCustomManifest(){const e={colliderTraits:["CUSTOM"],traits:[{name:"Custom",trait:"CUSTOM",collection:[]}]};this.setManifestDefaultValues(e),this.mainManifestData=new oV(e,"_custom"),this.manifestDataCollection.push(this.mainManifestData),this.manifestDataByIdentifier._custom=this.mainManifestData}loadManifest(e,t){return t==null&&(t="main"),this.manifestDataByIdentifier[t]!=null?(console.log(`Manifest with ID ${t} has been already loaded.`),Promise.reject(new Error(`Manifest with ID ${t} has been already loaded.`))):new Promise((n,i)=>{try{this._fetchManifest(e).then(s=>{this.setManifest(s,t).then(()=>{n()})})}catch(s){console.error("Error loading manifest:",s.message),i(new Error("Failed to load the manifest."))}})}setManifest(e,t){return t==null&&(t="main"),this.manifestDataByIdentifier[t]!=null?(console.log(`Manifest with ID ${t} has been already loaded.`),Promise.reject(new Error(`Manifest with ID ${t} has been already loaded.`))):new Promise(async(n,i)=>{try{if(e){const s=new oV(e,t);this.mainManifestData==null&&(this.mainManifestData=s,this.setManifestDefaultValues(s)),this.manifestDataCollection.push(s),this.manifestDataByIdentifier[t]=s,n()}else{const s="Failed to fetch or parse the manifest.";console.error(s),i(new Error(s))}}catch(s){console.error("Error setting manifest:",s.message),i(new Error("Failed to set the manifest."))}})}hasExistingManifest(){return this.mainManifestData!=null}getTraitOption(e,t,n){if(n!=null){const i=this.manifestDataByIdentifier[n];return i!=null?i.getTraitOption(e,t):(console.warn(`No manifest data with name ${n} was found.`),null)}else{let i=null;return this.manifestDataCollection.forEach(s=>{i==null&&(i=s.getTraitOption(e,t))}),i}}getTraitOptionById(e,t){if(t!=null){const n=this.manifestDataByIdentifier[t];return n!=null?n[identifier]?.getTraitOptionById(e):(console.warn(`No manifest data with name ${t} was found.`),null)}else return traitOption=null,this.manifestDataCollection.forEach(n=>{traitOption==null&&(traitOption=n.getTraitOptionById(e))}),traitOption}getTraitOptionsByType(e,t){if(t!=null){const n=this.manifestDataByIdentifier[t];return n!=null?n.getTraitOptionsByType(e):(console.warn(`No manifest data with name ${t} was found.`),null)}else{const n=[];return this.manifestDataCollection.forEach(i=>{n.push(...Mt(i.getTraitOptionsByType(e)))}),n}}getAllBlendShapeTraits(e){if(e!=null){const t=this.manifestDataByIdentifier[e];return t!=null?t.getAllBlendShapeTraits():(console.warn(`No manifest data with name ${e} was found.`),null)}else{const t=[];return this.manifestDataCollection.forEach(n=>{t.push(...Mt(n.getAllBlendShapeTraits()))}),t}}isColliderRequired(e){let t=!1;return this.manifestDataCollection.forEach(n=>{n.isColliderRequired(e)&&(t=!0)}),t}isLipsyncTrait(e,t){t==null&&console.log("Identifier was not provided. Using main manifest");const n=t==null?this.mainManifestData:this.manifestDataByIdentifier[t];return n!=null?n.isLipsyncTrait(e):!1}getCustomTraitOption(e,t){return this.mainManifestData.getCustomTraitOption(e,t)}getNFTraitOptionsFromURL(e,t,n){n==null&&console.log("Identifier was not provided. Using main manifest");const i=n==null?this.mainManifestData:this.manifestDataByIdentifier[n];return i==null?(console.log(`No manifest with identifier: ${n}  was previously loaded.`),Promise.resolve()):new Promise(async s=>{try{const a=await i(e,t);s(a)}catch{console.log("an error ocurred while trying to load:",e),s(null)}})}getNFTraitOptionsFromObject(e,t,n){return n==null&&console.log("Identifier was not provided. Using main manifest"),(n==null?this.mainManifestData:this.manifestDataByIdentifier[n])?.getNFTraitOptionsFromObject(e,t)}canDownload(){let e=!0;return this.manifestDataCollection.forEach(t=>{t.canDownload==!1&&(e=!1)}),e}containsModelGroupWithID(e){let t=!1;return this.manifestDataCollection.forEach(n=>{n.getModelGroup(e)!=null&&(t=!0)}),t}getModelGroup(e,t){return t==null&&console.log("Identifier was not provided. Using main manifest"),(t==null?this.mainManifestData:this.manifestDataByIdentifier[t]).getModelGroup(e)}isTraitGroupRequired(e){let t=!1;return this.mainManifestData.getModelGroup(e)?.isRequired&&(t=!0),t}getModelTraits(e,t){if(t!=null){const n=this.manifestDataByIdentifier[t];return n!=null?n.getModelTraits(traitType):(console.warn(`No manifest data with name ${t} was found.`),null)}else{const n=[];for(const i in this.manifestDataByIdentifier){const s=this.manifestDataByIdentifier[i];n.push(...Mt(s.getModelTraits(e)))}return n}}getRandomTrait(e){const t=[];return this.manifestDataCollection.forEach(n=>{const i=n.getRandomTrait(e);i!=null&&t.push(i)}),t.length>0?t[Math.floor(Math.random()*t.length)]:null}getRandomTraits(e){const t={};this.manifestDataCollection.forEach(i=>{(e||i.randomTraits).forEach(a=>{const o=this.getRandomTrait(a);o&&(t[a]!=null&&Math.random()<.5,t[a]=o)})});const n=Object.values(t);return console.log("loaded random traits:",n),this._filterTraitOptions(n)}getInitialTraits(){return this.mainManifestData.getInitialTraits()}getSelectionForAllTraits(){const e={};this.manifestDataCollection.forEach(n=>{n.allTraits.forEach(s=>{const a=this.getRandomTrait(s);a&&(e[s]!=null&&Math.random()<.5,e[s]=a)})});const t=Object.values(e);return console.log("loaded all traits:",t),this._filterTraitOptions(t)}getGroupModelTraits(e=!0,t=null){if(t!=null){const n=this.manifestDataByIdentifier[t];return n!=null?n.getGroupModelTraits():(console.warn(`No manifest data with name ${t} was found.`),[])}else if(e==!0){const n={};return this.manifestDataCollection.forEach(s=>{s.getGroupModelTraits().forEach(a=>{n[a.trait]||(n[a.trait]=a)})}),Object.values(n)}else{const n=[];return this.manifestDataCollection.forEach(i=>{n.push(Mt(...i.getGroupModelTraits()))}),n}}isManifestNFTLocked(e){e==null&&console.log("Identifier was not provided. Using main manifest");const t=e==null?this.mainManifestData:this.manifestDataByIdentifier[e];return t!=null?t.isNFTLocked():!1}hasManifestWithNFTLock(){let e=!1;return this.manifestDataCollection.forEach(t=>{t.isNFTLocked()&&(e=!0)}),e}getBlendShapeGroupTraits(e,t,n){n==null&&console.log("Identifier was not provided. Using main manifest");const i=n==null?this.mainManifestData:this.manifestDataByIdentifier[n];return Mt(i?.getModelTrait(e,t)?.getGroupBlendShapeTraits())}getExportOptions(){return this.mainManifestData.getExportOptions()}_filterTraitOptions(e){const t=[],n=[];for(let i=0;i<e.length;i++){const s=e[i].traitModel;let a=!1;for(let o=0;o<t.length;o++){const l=t[o].traitModel;if(a=s.isRestricted(l),a)break}a?n.push(e[i]):t.push(e[i])}return n.length>0&&console.log("options were filtered to fullfill restrictions: ",n),t}_fetchManifest(e){return new Promise((t,n)=>{fetch(e).then(i=>{i.json().then(s=>{t(s)}).catch(s=>{console.error("Unable to convert manifest to json data: "+s),n()})}).catch(i=>{console.error("Unable to fetch manifesta: "+i),n()})})}}const TR=new pt,cV=new Gq,Kc=new ae;class eRe{emotionManager=null;animationManager=null;blinkManager;screenshotManager;constructor(e){this._start(e)}async _start(e){const{parentModel:t=null,renderCamera:n=null,manifestURL:i=null,manifestIdentifier:s=null}=e;this.rootModel=new Tn,this.characterModel=new Tn,this.parentModel=t,t&&t.add(this.rootModel),this.lipSync=null,this.lookAtManager=null,this.animationManager=new A1e,this.screenshotManager=new E1e(this,t||this.rootModel),this.overlayedTextureManager=new IEe(this),this.blinkManager=new B1e(.1,.1,.5,5),this.emotionManager=new M1e,this.walletCollections=new pJ,this.rootModel.add(this.characterModel),this.renderCamera=n,this.manifestDataManager=new $Te,i&&this.manifestDataManager.loadManifest(i,s).then(()=>{this.animationManager.setScale(this.manifestDataManager.getDisplayScale())}),this.avatar={},this.storedAvatar={},this.traitLoadManager=new tRe;const a=new hs;a.renderOrder=1e4,this.rootModel.add(a),this.vrmHelperRoot=a}togglePauseSpringBoneAnimation(e){for(const[t,n]of Object.entries(this.avatar))n.vrm.springBoneManager&&(n.vrm.springBoneManager.paused=e)}update(e){if(this.lookAtManager!=null&&this.lookAtManager.update(),this.avatar){for(const t in this.avatar)if(this.avatar[t]?.vrm!=null){if(this.avatar[t].vrm.springBoneManager?.paused)return;this.avatar[t].vrm.springBoneManager?.update(e)}}}unlockManifestByIndex(e,t=null){return console.log(e),this.manifestDataManager.unlockManifestByIndex(e,t)}unlockManifestByIdentifier(e,t=null){return this.manifestDataManager.unlockManifestByIdentifier(e,t)}isManifestByIndexLocked(e){return this.manifestDataManager.isManifestByIndexNFTLocked(e)}isManifestByIdentifierLocked(e){return this.manifestDataManager.isManifestByIdentifierNFTLocked(e)}getLoadedLockedManifests(e){return this.manifestDataManager.getLoadedLockedManifests(e)}getLoadedManifests(){return this.manifestDataManager.getLoadedManifests()}addLookAtMouse(e,t,n,i=!0){this.lookAtManager=new REe(e,t,n),this.lookAtManager.enabled=!0;for(const s in this.avatar)this.avatar[s]?.vrm!=null&&this.lookAtManager.addVRM(this.avatar[s].vrm)}toggleCharacterLookAtMouse(e){this.lookAtManager!=null?(this.lookAtManager.setActive(e),this.animationManager&&this.animationManager.enableMouseLook(e)):console.warn("toggleCharacterLookAtMouse() was called, but no lookAtManager exist. Make sure to set it up first with addLookArMous()")}savePortraitScreenshot(e,t,n,i=1,s=0){this.blinkManager.enableScreenshot(),this.characterModel.traverse(a=>{a.isSkinnedMesh&&a.skeleton.bones.filter(l=>l.name==="head")[0].getWorldPosition(Kc)}),Kc.z+=.3,Kc.y+=s,this.screenshotManager.cameraFrameManager.setCamera(Kc,i),this.screenshotManager.saveScreenshot(e,t,n),this.blinkManager.disableScreenshot()}cameraRaycastCulling(e,t,n=!0){if(this.renderCamera==null){console.warn("No camera was set in character manager. Please call setRenderCamera(camera) before calling this function");return}const i=()=>{this.characterModel.traverse(c=>{c.isMesh&&c.userData.origIndexBuffer&&(c.userData.clippedIndexGeometry=c.geometry.index.clone(),c.geometry.setIndex(c.userData.origIndexBuffer))})},s=()=>{this.characterModel.traverse(c=>{c.isMesh&&c.userData.origIndexBuffer&&c.geometry.setIndex(c.userData.clippedIndexGeometry)})},a=(c,u)=>{for(let f=0;f<c.length;f+=3)if(u[0]==c[f]&&u[1]==c[f+1]&&u[2]==c[f+2])return f;return-1},o=(c,u)=>{const f=c.object,d=c.face,p=[d.a,d.b,d.c],v=f.userData?.clippedIndexGeometry?.array;if(v!=null){const m=a(v,p),g=Array.from(v);if(m==-1&&!u){const w=[...g,...p];f.userData.clippedIndexGeometry=new Lt(new Uint32Array(w),1,!1)}m!=1&&u&&(g.splice(m,3),f.userData.clippedIndexGeometry=new Lt(new Uint32Array(g),1,!1))}};TR.x=e,TR.y=t,i(),cV.setFromCamera(TR,this.renderCamera);const l=cV.intersectObjects(this.characterModel.children);if(l.length>0){const c=l[0];o(c,n)}s()}removeCurrentCharacter(){const e=[];for(const t in this.avatar)e.push(new Ub({traitGroupID:t,traitModel:null}));e.forEach(t=>{this._addLoadedData(t)}),this.avatar={}}removeCurrentManifest(){this.removeCurrentCharacter(),this.manifestDataManager.clearManifests(),this.animationManager&&this.animationManager.clearCurrentAnimations()}canDownload(){return this.manifestDataManager.canDownload()}downloadVRM(e,t=null){return new Promise(async(n,i)=>{if(this.canDownload())try{t=t||{};const s=this.manifestDataManager.getExportOptions();console.log(s);const a={...s,...t};a.screenshot=this._getPortaitScreenshotTexture(!1,a),console.log(a),await uEe(this.characterModel,this.avatar,e,a),n()}catch(s){console.error("Error downloading VRM:",s.message),i(new Error("Failed to download VRM."))}else{const s="Download not supported.";console.error(s),i(new Error(s))}})}downloadGLB(e,t=null){if(console.log("XXX fix glb downloader"),this.canDownload()){t=t||{};const n={...this.manifestDataManager.getExportOptions(),...t};fEe(this.characterModel,e,n)}else console.error("Download not supported")}getAvatarSelection(){var e={};for(const t in this.avatar)e[t]={name:this.avatar[t].name,id:this.avatar[t].traitInfo?.id};return e}getBoneTriangleCount(){let e=0,t=new Set;for(const n in this.avatar)this.avatar[n].model.traverse(i=>{i.isMesh&&(e+=i.geometry.index.array.length),i.isSkinnedMesh&&i.skeleton.bones.forEach(s=>{t.add(s.name)})});return{triangles:e/3,bones:t.size}}getGroupTraits(){return this.manifestDataManager.getGroupModelTraits()}getBlendShapeGroupTraits(e,t,n){this.manifestDataManager.getGroupBlendShapeTraits(e,t,n)}hasManifestWithNFTLock(){return this.manifestDataManager.hasManifestWithNFTLock()}getCurrentCharacterModel(){return this.characterModel}isTraitGroupRequired(e){return this.manifestDataManager.isTraitGroupRequired(e)}getTraits(e,t){return this.manifestDataManager.getModelTraits(e,t)}getCurrentTraitID(e){return this.avatar[e]?.traitInfo?.id}getCurrentTraitData(e){return this.avatar[e]?.traitInfo}getCurrentBlendShapeTraitData(e){return this.avatar[e]?.blendShapeTraitsInfo||{}}getCurrentTraitVRM(e){return this.avatar[e]?.vrm}setParentModel(e){e.add(this.rootModel),this.parentModel=e,this.screenshotManager&&this.screenshotManager.setScene(this.parentModel)}setRenderCamera(e){this.renderCamera=e}loadRandomTraits(){return new Promise(async(e,t)=>{if(this.manifestDataManager.hasExistingManifest()){const n=this.manifestDataManager.getRandomTraits();await this._loadTraits(n),e()}else{const n="No manifest was loaded, random traits cannot be loaded.";console.error(n),t(new Error(n))}})}loadRandomTrait(e){return new Promise(async(t,n)=>{if(this.manifestDataManager.hasExistingManifest()){const i=this.manifestDataManager.getRandomTrait(e);await this._loadTraits(Mt(i)),t()}else{const i="No manifest was loaded, random traits cannot be loaded.";console.error(i),n(new Error(i))}})}loadTraitsFromNFT(e,t=null,n=!0,i=null){return new Promise(async(s,a)=>{try{if(this.manifestDataManager.hasExistingManifest()){const o=await this.manifestDataManager.getNFTraitOptionsFromURL(e,i,t);await this._loadTraits(o,n),s()}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),a(new Error(o))}}catch(o){a(o)}})}loadTraitsFromNFTObject(e,t=null,n=!0,i=null){return new Promise(async(s,a)=>{if(this.manifestDataManager.hasExistingManifest())try{const o=this.manifestDataManager.getNFTraitOptionsFromObject(e,i,t);await this._loadTraits(o,n),s()}catch(o){console.error("Error loading traits from NFT object:",o.message),a(new Error("Failed to load traits from NFT object."))}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),a(new Error(o))}})}loadInitialTraits(){return new Promise(async(e,t)=>{if(this.manifestDataManager.hasExistingManifest())await this._loadTraits(this.manifestDataManager.getInitialTraits()),e();else{const n="No manifest was loaded, initial traits cannot be loaded.";console.error(n),t(new Error(n))}})}loadAllTraits(){return new Promise(async(e,t)=>{if(this.manifestDataManager.hasExistingManifest())await this._loadTraits(this.manifestDataManager.getSelectionForAllTraits()),e();else{const n="No manifest was loaded, initial traits cannot be loaded.";console.error(n),t(new Error(n))}})}loadBlendShapeTrait(e,t,n){if(!this.avatar[e]){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(!this.manifestDataManager.hasExistingManifest()){console.warn("No manifest data was loaded.");return}try{this._loadBlendShapeTrait(e,t,n)}catch{console.error("Error loading blendshape trait "+e,t,n)}}removeBlendShapeTrait(e,t){this.avatar[e]?this._loadBlendShapeTrait(e,t,null):console.warn(`No trait with name: ${e} was found.`)}_getTraitAllowedRules(e,t){const n=[];for(const i in this.avatar){const s=this.avatar[i],a=s.traitInfo.traitGroup.restrictions?.isReverseAllowed(s.traitInfo.type,e,s.traitInfo.id,t);a&&!a?.allowed&&n.push(a)}return n.length?n:[{allowed:!0,blocking:{}}]}_checkBlendshapeRestrictions(e){for(const t in this.avatar)this.manifestDataManager.isGroupTraitRestrictedInAnyManifest(t,e)&&(console.warn(`Trait with name: Blendshapes of ${t} is not allowed to be loaded with ${e}`),this.removeBlendShapeTrait(t,null))}_checkRestrictionsBeforeLoad(e,t){const n=this._getTraitAllowedRules(e,t);if(n[0].allowed){this._checkBlendshapeRestrictions(e);return}for(const i of n){if(i.blocking.blockingTrait&&this.removeTrait(i.blocking.blockingTrait),i.blocking.blockingItemId){const s=this.manifestDataManager.getTraitOptionById(i.blocking.blockingItemId);s&&this.removeTrait(s.traitGroup.trait)}if(i.blocking.blockingType&&this.manifestDataManager.getTraitOptionsByType(i.blocking.blockingType).length)for(const a in this.avatar)this.avatar[a].traitInfo.type==i.blocking.blockingType&&this.removeTrait(a)}}loadTrait(e,t,n,i=!1){return new Promise(async(s,a)=>{if(this.manifestDataManager.hasExistingManifest())try{const o=this.manifestDataManager.getTraitOption(e,t,n);this._checkRestrictionsBeforeLoad(e,t),console.log(o),o&&(await this._loadTraits(Mt(o),i),s())}catch(o){console.error("Error loading specific trait:",o.message),a(new Error("Failed to load specific trait."))}else{const o="No manifest was loaded, specific trait cannot be loaded.";console.error(o),a(new Error(o))}})}loadCustomTrait(e,t){return new Promise(async(n,i)=>{if(this.manifestDataManager.hasExistingManifest())try{const s=this.manifestDataManager.getCustomTraitOption(e,t);console.log(s),s&&(await this._loadTraits(Mt(s)),n())}catch(s){console.error("Error loading custom trait:",s.message),i(new Error("Failed to load custom trait."))}else{const s="No manifest was loaded, custom trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTexture(e,t){return new Promise(async(n,i)=>{const s=this.avatar[e]?.model;if(s)await $be(s,t),n();else{const a="No Group Trait with name "+e+" was found.";console.warn(a),i(new Error(a))}})}setTraitColor(e,t){const n=this.avatar[e]?.model;if(n)try{const i=new st(t);n.traverse(s=>{s.isMesh&&(s.material.type==="MeshStandardMaterial"?Array.isArray(s.material)?s.material.forEach(a=>{a.color=i}):s.material.color=i:(s.material[0].uniforms.litFactor.value=i,s.material[0].uniforms.shadeColorFactor.value=new st(i.r*.8,i.g*.8,i.b*.8)))})}catch(i){throw console.error("Error setting trait color:",i.message),new Error("Failed to set trait color.")}else{const i="No Group Trait with name "+e+" was found.";throw console.warn(i),new Error(i)}}removeTrait(e,t=!1){if(this.isTraitGroupRequired(e)&&!t){console.warn(`No trait with name: ${e} is not removable.`);return}if(this.manifestDataManager.containsModelGroupWithID(e)){const n=new Ub({traitGroupID:e,traitModel:null});this._addLoadedData(n),ZT(this.avatar)}else console.warn(`No trait with name: ${e} was found.`)}updateCullHiddenMeshes(){ZT(this.avatar)}loadOptimizerManifest(){this.manifestDataManager.setCustomManifest()}setManifest(e,t){return this.manifestDataManager.setManifest(e,t)}loadManifest(e,t){return this.manifestDataManager.loadManifest(e,t)}getCurrentOptimizerCharacterModel(){return this.avatar.CUSTOM?.vrm}loadOptimizerCharacter(e){return this.loadCustomTrait("CUSTOM",e)}async soloTargetGroupTrait(e){const t=Mt(e),n=[];for(const i in this.avatar)t.includes(i)&&n.push(this.manifestDataManager.getTraitOption(i,this.avatar[i].traitInfo.id));await this._loadTraits(n,!0)}storeCurrentAvatar(){this.storedAvatar={...this.avatar}}async loadStoredAvatar(){const e=[];for(const t in this.storedAvatar)e.push(this.manifestDataManager.getTraitOption(t,this.storedAvatar[t].traitInfo.id));this._loadTraits(e,!0)}async _loadTraits(e,t=!1){console.log("loaded traits:",e),await this.traitLoadManager.loadTraitOptions(Mt(e)).then(n=>{t&&this.getGroupTraits().forEach(s=>{n.some(o=>o.traitModel?.traitGroup.trait===s.trait)||this.avatar[s.trait]!=null&&n.push(new Ub({collectionID:s.collectionID,traitGroupID:s.trait,traitModel:null}))}),n.forEach(i=>{this._addLoadedData(i)}),ZT(this.avatar)})}async _loadBlendShapeTrait(e,t,n){const i=this.avatar[e];if(!i){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(i.blendShapeTraitsInfo||(i.blendShapeTraitsInfo={}),!t){for(const a in i.blendShapeTraitsInfo)this.toggleBinaryBlendShape(i.model,i.blendShapeTraitsInfo[a],!1);return}if(i.blendShapeTraitsInfo[t]&&this.toggleBinaryBlendShape(i.model,i.blendShapeTraitsInfo[t],!1),n==null){delete this.avatar[e].blendShapeTraitsInfo[t];return}const s=i.traitInfo.getBlendShape(t,n);if(!s){console.warn(`Blendshape with name: ${n} was not found.`);return}this.toggleBinaryBlendShape(i.model,s,!0),this.avatar[e].blendShapeTraitsInfo[s.getGroupId()]=s}toggleBinaryBlendShape=(e,t,n)=>{e.traverse(i=>{if(i.isMesh||i.isSkinnedMesh){const s=i;if(!s.morphTargetDictionary||!s.morphTargetInfluences)return;const a=s.morphTargetDictionary[t.id];a!=null&&(s.morphTargetInfluences[a]=n?1:0)}})};getCurrentTotalPrice(){const e=this.avatar;let t=0;for(const n in e){const i=e[n].traitInfo;i.locked===!0&&i.purchasable===!0&&(t+=i.price)}return t}getMainPriceCurrency(){return this.manifestDataManager.getMainCurrency()}unlockManifestByIndex(e,t=null){return console.log(e),this.manifestDataManager.unlockManifestByIndex(e,t)}purchaseAssetsFromAvatar(){console.warn("TODO!! STILL NEEDS TO DETECT DIFFERENT COLLECTIONS!!");const e=this.getPurchaseTraitsArray(),t={};e.forEach(i=>{t[i.traitGroup.trait]==null&&(t[i.traitGroup.trait]=[]),t[i.traitGroup.trait].push(i.id)});const n=new Ib({ownedTraits:t});return console.log(n),new Promise((i,s)=>{const{depositAddress:a,merkleTreeAddress:o,collectionName:l}=this.manifestDataManager.getMainSolanaPurchaseAssetsDefinition();HTe(a,o,l,this.getCurrentTotalPrice(),n).then(()=>{console.log("enters"),this.manifestDataManager.unlockMainPurchasedAssets(n),i()}).catch(c=>{console.error(c),s()})})}getPurchaseTraitsArray(){const e=this.avatar,t=[];for(const n in e){const i=e[n].traitInfo;i.locked===!0&&i.purchasable===!0&&t.push(i)}return t}async _animationManagerSetup(e,t,n){const i=Mt(e);this.animationManager&&(this.animationManager.setScale(n),e.length>0&&(this.animationManager.storeAnimationPaths(i,t||""),await this.animationManager.loadAnimation(i,!1,0,i[0].endsWith(".fbx"),t||"")))}_getPortaitScreenshotTexture(e,t){this.blinkManager.enableScreenshot(),this.characterModel.traverse(f=>{f.isSkinnedMesh&&f.skeleton.bones.filter(p=>p.name==="head")[0].getWorldPosition(Kc)});const{screenshotResolution:n,screenshotFaceDistance:i,screenshotFaceOffset:s,screenshotBackground:a,screenshotFOV:o}=t,l=n[0],c=n[1];Kc.x+=s[0],Kc.y+=s[1],Kc.z+=s[2],this.screenshotManager.setBackground(a),this.screenshotManager.cameraFrameManager.setCamera(Kc,i,o);const u=e?this.screenshotManager.getScreenshotBlob(l,c):this.screenshotManager.getScreenshotTexture(l,c);return this.blinkManager.disableScreenshot(),u}_setupWireframeMaterial(e){e.origMat=e.material;const t=()=>{const a=.1+Math.random()*.9,o=.1+Math.random()*(1-.1),l=.1+Math.random()*(1-.1);return new st(a,o,l)},n=new ya({color:t(),wireframe:!0,wireframeLinewidth:.2}),i=e.material;e.setDebugMode=s=>{s?e.material.length?(e.material[0]=n,e.material[1]=n):e.material=n:e.material=i}}_VRMBaseSetup(e,t,n,i,s,a){let o=e.userData.vrm;if(e.userData.vrm==null)return console.error("No valid VRM was provided for "+i+" trait, skipping file."),null;if(rz(o,{isVRM0:o.meta?.metaVersion==="0"}),this.manifestDataManager.isColliderRequired(i)&&BEe(e),this._applySpringBoneColliders(o),s1e(o),SEe(e),this._unregisterMorphTargetsFromManifest(o,t),this.manifestDataManager.isLipsyncTrait(i,t)&&(this.lipSync=new B1(o)),this._modelBaseSetup(o,t,n,i,s,a),o.meta?.metaVersion==="0"){if(o.humanoid.humanBones.hips.node.parent==o.scene){const l=new Tn;l.name="newRootNode",Jbe(o.scene,l),l.add(o.humanoid.humanBones.hips.node)}o.humanoid.humanBones.hips.node.parent.rotateY(3.14159),o.scene.traverse(l=>{if(l.isSkinnedMesh){for(let c=0;c<l.skeleton.bones.length;c++)l.skeleton.bones[c].userData.vrm0RestPosition={...l.skeleton.bones[c].position};l.userData.isVRM0=!0}}),console.log("Loaded VRM0 file ",o)}else console.log("Loaded VRM1 file ",o);return o}_applySpringBoneColliders(e){function t(s){e.springBoneManager.joints.forEach(a=>{for(const o of s){const l=a.colliderGroups.find(c=>c.name==o.name);if(l){if(o.colliders.length!=l.colliders.length){const c=o.colliders.filter(u=>!l.colliders.find(f=>f.name==u.name));l.colliders.push(...c)}}else a.colliderGroups.push(o)}})}const i=(()=>{const s=[];return Object.entries(this.avatar).map(([a,o])=>{const l=TEe(o.vrm);l.length!==0&&l.forEach(c=>{if(!e.springBoneManager)return;const u={colliders:[],name:c.name};for(const f of c.children)f instanceof Sb&&u.colliders.indexOf(f)===-1&&u.colliders.push(f);if(u.colliders.length){const f=s.find(d=>d.name==u.name);if(f&&f.colliders.length!=u.colliders.length){const d=u.colliders.filter(p=>!f.colliders.find(v=>v.name==p.name));f.colliders.push(...d)}else f||s.push(u)}})}),s})();t(i)}_unregisterMorphTargetsFromManifest(e,t){const n=this.manifestDataManager.getAllBlendShapeTraits(t),i=e.expressionManager?.expressions;if(n.length==0||!i)return;const s=[];for(const a of i)n.map(o=>o.id).includes(a.expressionName)&&s.push(a);for(const a of s)e.expressionManager.unregisterExpression(a)}_modelBaseSetup(e,t,n,i,s,a){const o=[],l=Mt(n.cullingIgnore),c=[];n.meshTargets&&Mt(n.meshTargets).map(d=>{const p=e.scene.getObjectByName(d);p?.isMesh&&o.push(p)}),e.scene.traverse(d=>{!n.meshTargets&&d.isMesh&&o.push(d),d.frustumCulled=!1,d.isMesh&&(this._setupWireframeMaterial(d),l.indexOf(d.name)===-1&&c.push(d))});const u=this.manifestDataManager.getDefaultValues(),f=this.manifestDataManager.getModelGroup(i,t);rz(e,{cullingLayer:n.cullingLayer!=null?n.cullingLayer:f?.cullingLayer!=null?f?.cullingLayer:u.defaultCullingLayer!=null?u.defaultCullingLayer:-1,cullingDistance:n.cullingDistance!=null?n.cullingDistance:f?.cullingDistance!=null?f?.cullingDistance:u.defaultCullingDistance!=null?u.defaultCullingDistance:null,maxCullingDistance:n.maxCullingDistance!=null?n.maxCullingDistance:f?.maxCullingDistance!=null?f?.maxCullingDistance:u.maxCullingDistance!=null?u.maxCullingDistance:1/0,cullingMeshes:c}),o.map((d,p)=>{if(s){const v=s[p]||s[0];v!=null&&Mt(d.material).map(m=>{nRe(m,v)})}if(a){const v=a[p]||a[0];v!=null&&(d.material[0].uniforms.litFactor.value=v,d.material[0].uniforms.shadeColorFactor.value=new st(v.r*.8,v.g*.8,v.b*.8))}})}_applyManagers(e){this.blinkManager.addVRM(e),this.emotionManager.addVRM(e),this.lookAtManager&&this.lookAtManager.addVRM(e),this.animationManager&&this.animationManager.addVRM(e)}_displayModel(e){if(e){const t=e.scene;this.characterModel.attach(t)}}_positionModel(e){const t=this.manifestDataManager.getDisplayScale();e.scene.scale.set(t,t,t)}_disposeTrait(e){this.blinkManager.removeVRM(e),this.emotionManager.removeVRM(e),this.lookAtManager&&this.lookAtManager.removeVRM(e),this.animationManager&&this.animationManager.removeVRM(e),i1e(e)}_addLoadedData(e){const{collectionID:t,traitGroupID:n,traitModel:i,textureTrait:s,colorTrait:a,models:o,textures:l,colors:c}=e;if(i==null){this.avatar[n]&&this.avatar[n].vrm&&(this._disposeTrait(this.avatar[n].vrm),delete this.avatar[n]);return}let u=null;o.map(f=>{f!=null&&(u=this._VRMBaseSetup(f,t,i,n,l,c))}),u!=null&&(this.avatar[n]&&this.avatar[n].vrm&&this._disposeTrait(this.avatar[n].vrm),this._positionModel(u),this._displayModel(u),this._applyManagers(u),this.overlayedTextureManager&&i.targetDecalCollection&&this.overlayedTextureManager.setTargetVRM(u,i.decalMeshNameTargets),this.avatar[n]={traitInfo:i,blendShapeTraitsInfo:{},textureInfo:s,colorInfo:a,name:i.name,model:u&&u.scene,vrm:u})}}class tRe{constructor(){const e=new Hq;e.onProgress=(i,s,a)=>{this.setLoadPercentage(Math.round(s/a*100))};const t=new Kq(e);t.crossOrigin="anonymous",t.register(i=>new W_e(i,{autoUpdateHumanBones:!0}));const n=new cf(e);this.loadPercentager=0,this.loadingManager=e,this.gltfLoader=t,this.textureLoader=n,this.isLoading=!1}setLoadPercentage(e){this.loadPercentager=e}loadTraitOptions(e){return new Promise(t=>{this.isLoading=!0;const n=[],i=e.map(async(s,a)=>{if(s==null){n[a]=null;return}const o=await Promise.all(Mt(s?.traitModel?.fullDirectory).map(async u=>{try{return await this.gltfLoader.loadAsync(u)}catch(f){return console.error(`Error loading modelsss ${u}:`,f),null}})),l=await Promise.all(Mt(s?.traitTexture?.fullDirectory).map(u=>new Promise(f=>{this.textureLoader.load(u,d=>{d.flipY=!1,d.colorSpace=Sn,f(d)},null,d=>{console.error("error loading texture: ",d),f(null)})}))),c=Mt(s?.traitColor?.value).map(u=>new st(u));n[a]=new Ub({collectionID:s?.traitModel.collectionID,traitGroupID:s?.traitModel.traitGroup.trait,traitModel:s?.traitModel,textureTrait:s?.traitTexture,colorTrait:s?.traitColor,models:o,textures:l,colors:c})});Promise.allSettled(i).then(()=>{this.setLoadPercentage(100),t(n),this.isLoading=!1}).catch(s=>{this.setLoadPercentage(100),console.error("An error occurred:",s),t(n),this.isLoading=!1})})}}class Ub{constructor(e){const{collectionID:t,traitGroupID:n,traitModel:i,textureTrait:s,colorTrait:a,models:o,textures:l,colors:c}=e;this.collectionID=t,this.traitGroupID=n,this.traitModel=i,this.textureTrait=s,this.colorTrait=a,this.models=o,this.textures=l,this.colors=c}}function nRe(r,e){if(r.type==="Shadermaterial"&&!r.isMToonMaterial){console.warn("XXX set material texture to shader material",r);return}r.map=e,r.needsUpdate=!0}class rRe extends Qhe{constructor(e){super(e),this.type=nc}parse(e){const a=function(k,O){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(O||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(O||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(O||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(O||""))}},u=`
`,f=function(k,O,C){O=O||1024;let D=k.pos,F=-1,_=0,R="",L=String.fromCharCode.apply(null,new Uint16Array(k.subarray(D,D+128)));for(;0>(F=L.indexOf(u))&&_<O&&D<k.byteLength;)R+=L,_+=L.length,D+=128,L+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(D,D+128)));return-1<F?(k.pos+=_+F+1,R+L.slice(0,F)):!1},d=function(k){const O=/^#\?(\S+)/,C=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,P=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*FORMAT=(\S+)\s*$/,F=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,_={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let R,L;for((k.pos>=k.byteLength||!(R=f(k)))&&a(1,"no header found"),(L=R.match(O))||a(3,"bad initial token"),_.valid|=1,_.programtype=L[1],_.string+=R+`
`;R=f(k),R!==!1;){if(_.string+=R+`
`,R.charAt(0)==="#"){_.comments+=R+`
`;continue}if((L=R.match(C))&&(_.gamma=parseFloat(L[1])),(L=R.match(P))&&(_.exposure=parseFloat(L[1])),(L=R.match(D))&&(_.valid|=2,_.format=L[1]),(L=R.match(F))&&(_.valid|=4,_.height=parseInt(L[1],10),_.width=parseInt(L[2],10)),_.valid&2&&_.valid&4)break}return _.valid&2||a(3,"missing format specifier"),_.valid&4||a(3,"missing image size specifier"),_},p=function(k,O,C){const P=O;if(P<8||P>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);P!==(k[2]<<8|k[3])&&a(3,"wrong scanline width");const D=new Uint8Array(4*O*C);D.length||a(4,"unable to allocate buffer space");let F=0,_=0;const R=4*P,L=new Uint8Array(4),Q=new Uint8Array(R);let G=C;for(;G>0&&_<k.byteLength;){_+4>k.byteLength&&a(1),L[0]=k[_++],L[1]=k[_++],L[2]=k[_++],L[3]=k[_++],(L[0]!=2||L[1]!=2||(L[2]<<8|L[3])!=P)&&a(3,"bad rgbe scanline format");let Y=0,W;for(;Y<R&&_<k.byteLength;){W=k[_++];const T=W>128;if(T&&(W-=128),(W===0||Y+W>R)&&a(3,"bad scanline data"),T){const H=k[_++];for(let K=0;K<W;K++)Q[Y++]=H}else Q.set(k.subarray(_,_+W),Y),Y+=W,_+=W}const V=P;for(let T=0;T<V;T++){let H=0;D[F]=Q[T+H],H+=P,D[F+1]=Q[T+H],H+=P,D[F+2]=Q[T+H],H+=P,D[F+3]=Q[T+H],F+=4}G--}return D},v=function(k,O,C,P){const D=k[O+3],F=Math.pow(2,D-128)/255;C[P+0]=k[O+0]*F,C[P+1]=k[O+1]*F,C[P+2]=k[O+2]*F,C[P+3]=1},m=function(k,O,C,P){const D=k[O+3],F=Math.pow(2,D-128)/255;C[P+0]=u_.toHalfFloat(Math.min(k[O+0]*F,65504)),C[P+1]=u_.toHalfFloat(Math.min(k[O+1]*F,65504)),C[P+2]=u_.toHalfFloat(Math.min(k[O+2]*F,65504)),C[P+3]=u_.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const w=d(g),b=w.width,E=w.height,B=p(g.subarray(g.pos),b,E);let S,M,I;switch(this.type){case ks:I=B.length/4;const k=new Float32Array(I*4);for(let C=0;C<I;C++)v(B,C*4,k,C*4);S=k,M=ks;break;case nc:I=B.length/4;const O=new Uint16Array(I*4);for(let C=0;C<I;C++)m(B,C*4,O,C*4);S=O,M=nc;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:E,data:S,header:w.string,gamma:w.gamma,exposure:w.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(a,o){switch(a.type){case ks:case nc:a.colorSpace=Fi,a.minFilter=Hi,a.magFilter=Hi,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,s,n,i)}}function iRe(r){const e=new Zv;new rRe().load("./hdr/studio_small_09_2k.hdr",w=>{w.mapping=Kv,w.colorSpace=Fi,e.environment=w}),e.environmentIntensity=.5;const t=new Vq(16777215,.8);e.add(t);const n=new _O(16777215,.8);n.position.set(0,1,1),e.add(n);const i=new Tn;e.add(i);const s=new Pi(30,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,1.3,2);const a=new eRe({parentModel:e,createAnimationManager:!0,renderCamera:s});a.addLookAtMouse(80,r,s,!0);const o=document.getElementById(r),l=new By({canvas:o,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),c=new lde(s,l.domElement);c.minDistance=1,c.maxDistance=4,c.maxPolarAngle=Math.PI/2,c.enablePan=!0,c.target=new ae(0,1,0),c.enableDamping=!0,c.dampingFactor=.1;const u=new ae(-.5,0,-.5),f=new ae(.5,1.7,.5),d=()=>{l.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()};window.addEventListener("resize",d),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),l.outputColorSpace=Sn;const p=new IE,v=()=>{requestAnimationFrame(v);const w=p.getDelta();c.target.clamp(u,f),c?.update(),a.update(w),l.render(e,s)};v();const m=w=>{const b=w.ctrlKey,E=o.getBoundingClientRect(),B=(w.clientX-E.left)/E.width*2-1,S=-((w.clientY-E.top)/E.height)*2+1;a.cameraRaycastCulling(B,S,b)};async function g(){}return g(),o.addEventListener("click",m),{scene:e,camera:s,controls:c,characterManager:a,sceneElements:i,clock:p}}function Px(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var RR={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var uV;function sRe(){return uV||(uV=1,function(r,e){(function(t){r.exports=t()})(function(){return function t(n,i,s){function a(c,u){if(!i[c]){if(!n[c]){var f=typeof Px=="function"&&Px;if(!u&&f)return f(c,!0);if(o)return o(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var p=i[c]={exports:{}};n[c][0].call(p.exports,function(v){var m=n[c][1][v];return a(m||v)},p,p.exports,t,n,i,s)}return i[c].exports}for(var o=typeof Px=="function"&&Px,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,i){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,f,d,p,v,m,g=[],w=0,b=l.length,E=b,B=s.getTypeOf(l)!=="string";w<l.length;)E=b-w,f=B?(c=l[w++],u=w<b?l[w++]:0,w<b?l[w++]:0):(c=l.charCodeAt(w++),u=w<b?l.charCodeAt(w++):0,w<b?l.charCodeAt(w++):0),d=c>>2,p=(3&c)<<4|u>>4,v=1<E?(15&u)<<2|f>>6:64,m=2<E?63&f:64,g.push(o.charAt(d)+o.charAt(p)+o.charAt(v)+o.charAt(m));return g.join("")},i.decode=function(l){var c,u,f,d,p,v,m=0,g=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=a.uint8array?new Uint8Array(0|E):new Array(0|E);m<l.length;)c=o.indexOf(l.charAt(m++))<<2|(d=o.indexOf(l.charAt(m++)))>>4,u=(15&d)<<4|(p=o.indexOf(l.charAt(m++)))>>2,f=(3&p)<<6|(v=o.indexOf(l.charAt(m++))),b[g++]=c,p!==64&&(b[g++]=u),v!==64&&(b[g++]=f);return b}},{"./support":30,"./utils":32}],2:[function(t,n,i){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function c(u,f,d,p,v){this.compressedSize=u,this.uncompressedSize=f,this.crc32=d,this.compression=p,this.compressedContent=v}c.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),f=this;return u.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,f,d){return u.pipe(new o).pipe(new l("uncompressedSize")).pipe(f.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",f)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,i){var s=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,i){var s=t("./utils"),a=function(){for(var o,l=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;l[c]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(c,u,f,d){var p=a,v=d+f;c^=-1;for(var m=d;m<v;m++)c=c>>>8^p[255&(c^u[m])];return-1^c}(0|l,o,o.length,0):function(c,u,f,d){var p=a,v=d+f;c^=-1;for(var m=d;m<v;m++)c=c>>>8^p[255&(c^u.charCodeAt(m))];return-1^c}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,n,i){var s=null;s=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),c=s?"uint8array":"array";function u(f,d){l.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=d,this.meta={}}i.magic="\b\0",o.inherits(u,l),u.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(c,f.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(d){f.push({data:d,meta:f.meta})}},i.compressWorker=function(f){return new u("Deflate",f)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,i){function s(p,v){var m,g="";for(m=0;m<v;m++)g+=String.fromCharCode(255&p),p>>>=8;return g}function a(p,v,m,g,w,b){var E,B,S=p.file,M=p.compression,I=b!==c.utf8encode,k=o.transformTo("string",b(S.name)),O=o.transformTo("string",c.utf8encode(S.name)),C=S.comment,P=o.transformTo("string",b(C)),D=o.transformTo("string",c.utf8encode(C)),F=O.length!==S.name.length,_=D.length!==C.length,R="",L="",Q="",G=S.dir,Y=S.date,W={crc32:0,compressedSize:0,uncompressedSize:0};v&&!m||(W.crc32=p.crc32,W.compressedSize=p.compressedSize,W.uncompressedSize=p.uncompressedSize);var V=0;v&&(V|=8),I||!F&&!_||(V|=2048);var T=0,H=0;G&&(T|=16),w==="UNIX"?(H=798,T|=function(N,te){var oe=N;return N||(oe=te?16893:33204),(65535&oe)<<16}(S.unixPermissions,G)):(H=20,T|=function(N){return 63&(N||0)}(S.dosPermissions)),E=Y.getUTCHours(),E<<=6,E|=Y.getUTCMinutes(),E<<=5,E|=Y.getUTCSeconds()/2,B=Y.getUTCFullYear()-1980,B<<=4,B|=Y.getUTCMonth()+1,B<<=5,B|=Y.getUTCDate(),F&&(L=s(1,1)+s(u(k),4)+O,R+="up"+s(L.length,2)+L),_&&(Q=s(1,1)+s(u(P),4)+D,R+="uc"+s(Q.length,2)+Q);var K="";return K+=`
\0`,K+=s(V,2),K+=M.magic,K+=s(E,2),K+=s(B,2),K+=s(W.crc32,4),K+=s(W.compressedSize,4),K+=s(W.uncompressedSize,4),K+=s(k.length,2),K+=s(R.length,2),{fileRecord:f.LOCAL_FILE_HEADER+K+k+R,dirRecord:f.CENTRAL_FILE_HEADER+s(H,2)+K+s(P.length,2)+"\0\0\0\0"+s(T,4)+s(g,4)+k+R+P}}var o=t("../utils"),l=t("../stream/GenericWorker"),c=t("../utf8"),u=t("../crc32"),f=t("../signature");function d(p,v,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(d,l),d.prototype.push=function(p){var v=p.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(v+100*(m-g-1))/m:100}}))},d.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var m=a(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,m=a(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),v)this.push({data:function(g){return f.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var m=this.bytesWritten-p,g=function(w,b,E,B,S){var M=o.transformTo("string",S(B));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(w,2)+s(w,2)+s(b,4)+s(E,4)+s(M.length,2)+M}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(m){v.processChunk(m)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(m){v.error(m)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(p){var v=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var m=0;m<v.length;m++)try{v[m].error(p)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,i){var s=t("../compressions"),a=t("./ZipFileWorker");i.generateWorker=function(o,l,c){var u=new a(l.streamFiles,c,l.platform,l.encodeFileName),f=0;try{o.forEach(function(d,p){f++;var v=function(b,E){var B=b||E,S=s[B];if(!S)throw new Error(B+" is not a valid compression method !");return S}(p.options.compression,l.compression),m=p.options.compressionOptions||l.compressionOptions||{},g=p.dir,w=p.date;p._compressWorker(v,m).withStreamInfo("file",{name:d,dir:g,date:w,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(u)}),u.entriesCount=f}catch(d){u.error(d)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,i){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),c=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function f(d){return new a.Promise(function(p,v){var m=d.decompressed.getContentWorker().pipe(new c);m.on("error",function(g){v(g)}).on("end",function(){m.streamInfo.crc32!==d.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}n.exports=function(d,p){var v=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(d)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,p.optimizedBinaryString,p.base64).then(function(m){var g=new l(p);return g.load(m),g}).then(function(m){var g=[a.Promise.resolve(m)],w=m.files;if(p.checkCRC32)for(var b=0;b<w.length;b++)g.push(f(w[b]));return a.Promise.all(g)}).then(function(m){for(var g=m.shift(),w=g.files,b=0;b<w.length;b++){var E=w[b],B=E.fileNameStr,S=s.resolve(E.fileNameStr);v.file(S,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:p.createFolders}),E.dir||(v.file(S).unsafeOriginalName=B)}return g.zipComment.length&&(v.comment=g.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,i){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,c){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(o,a),o.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,i){var s=t("readable-stream").Readable;function a(o,l,c){s.call(this,l),this._helper=o;var u=this;o.on("data",function(f,d){u.push(f)||u._helper.pause(),c&&c(d)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,i){function s(S,M,I){var k,O=o.getTypeOf(M),C=o.extend(I||{},u);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&16384&C.unixPermissions&&(C.dir=!0),C.dosPermissions&&16&C.dosPermissions&&(C.dir=!0),C.dir&&(S=w(S)),C.createFolders&&(k=g(S))&&b.call(this,k,!0);var P=O==="string"&&C.binary===!1&&C.base64===!1;I&&I.binary!==void 0||(C.binary=!P),(M instanceof f&&M.uncompressedSize===0||C.dir||!M||M.length===0)&&(C.base64=!1,C.binary=!0,M="",C.compression="STORE",O="string");var D=null;D=M instanceof f||M instanceof l?M:v.isNode&&v.isStream(M)?new m(S,M):o.prepareContent(S,M,C.binary,C.optimizedBinaryString,C.base64);var F=new d(S,D,C);this.files[S]=F}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),u=t("./defaults"),f=t("./compressedObject"),d=t("./zipObject"),p=t("./generate"),v=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),g=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var M=S.lastIndexOf("/");return 0<M?S.substring(0,M):""},w=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},b=function(S,M){return M=M!==void 0?M:u.createFolders,S=w(S),this.files[S]||s.call(this,S,null,{dir:!0,createFolders:M}),this.files[S]};function E(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var B={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var M,I,k;for(M in this.files)k=this.files[M],(I=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&S(I,k)},filter:function(S){var M=[];return this.forEach(function(I,k){S(I,k)&&M.push(k)}),M},file:function(S,M,I){if(arguments.length!==1)return S=this.root+S,s.call(this,S,M,I),this;if(E(S)){var k=S;return this.filter(function(C,P){return!P.dir&&k.test(C)})}var O=this.files[this.root+S];return O&&!O.dir?O:null},folder:function(S){if(!S)return this;if(E(S))return this.filter(function(O,C){return C.dir&&S.test(O)});var M=this.root+S,I=b.call(this,M),k=this.clone();return k.root=I.name,k},remove:function(S){S=this.root+S;var M=this.files[S];if(M||(S.slice(-1)!=="/"&&(S+="/"),M=this.files[S]),M&&!M.dir)delete this.files[S];else for(var I=this.filter(function(O,C){return C.name.slice(0,S.length)===S}),k=0;k<I.length;k++)delete this.files[I[k].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var M,I={};try{if((I=o.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");o.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var k=I.comment||this.comment||"";M=p.generateWorker(this,I,k)}catch(O){(M=new l("error")).error(O)}return new c(M,I.type||"string",I.mimeType)},generateAsync:function(S,M){return this.generateInternalStream(S).accumulate(M)},generateNodeStream:function(S,M){return(S=S||{}).type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(M)}};n.exports=B},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,i){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===c&&this.data[d+2]===u&&this.data[d+3]===f)return d-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),c=o.charCodeAt(1),u=o.charCodeAt(2),f=o.charCodeAt(3),d=this.readData(4);return l===d[0]&&c===d[1]&&u===d[2]&&f===d[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,n,i){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,c=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=o,c},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,i){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,i){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,n,i){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,i){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),c=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");n.exports=function(f){var d=s.getTypeOf(f);return s.checkSupport(d),d!=="string"||a.uint8array?d==="nodebuffer"?new c(f):a.uint8array?new u(s.transformTo("uint8array",f)):new o(s.transformTo("array",f)):new l(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,i){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,i){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,i){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,i){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),c=t("../support"),u=t("../external"),f=null;if(c.nodestream)try{f=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(v,m){return new u.Promise(function(g,w){var b=[],E=v._internalType,B=v._outputType,S=v._mimeType;v.on("data",function(M,I){b.push(M),m&&m(I)}).on("error",function(M){b=[],w(M)}).on("end",function(){try{var M=function(I,k,O){switch(I){case"blob":return s.newBlob(s.transformTo("arraybuffer",k),O);case"base64":return l.encode(k);default:return s.transformTo(I,k)}}(B,function(I,k){var O,C=0,P=null,D=0;for(O=0;O<k.length;O++)D+=k[O].length;switch(I){case"string":return k.join("");case"array":return Array.prototype.concat.apply([],k);case"uint8array":for(P=new Uint8Array(D),O=0;O<k.length;O++)P.set(k[O],C),C+=k[O].length;return P;case"nodebuffer":return Buffer.concat(k);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,b),S);g(M)}catch(I){w(I)}b=[]}).resume()})}function p(v,m,g){var w=m;switch(m){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=m,this._mimeType=g,s.checkSupport(w),this._worker=v.pipe(new a(w)),v.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}p.prototype={accumulate:function(v){return d(this,v)},on:function(v,m){var g=this;return v==="data"?this._worker.on(v,function(w){m.call(g,w.data,w.meta)}):this._worker.on(v,function(){s.delay(m,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,i){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function f(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}i.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(v){var m,g,w,b,E,B=v.length,S=0;for(b=0;b<B;b++)(64512&(g=v.charCodeAt(b)))==55296&&b+1<B&&(64512&(w=v.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=a.uint8array?new Uint8Array(S):new Array(S),b=E=0;E<S;b++)(64512&(g=v.charCodeAt(b)))==55296&&b+1<B&&(64512&(w=v.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),b++),g<128?m[E++]=g:(g<2048?m[E++]=192|g>>>6:(g<65536?m[E++]=224|g>>>12:(m[E++]=240|g>>>18,m[E++]=128|g>>>12&63),m[E++]=128|g>>>6&63),m[E++]=128|63&g);return m}(p)},i.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(v){var m,g,w,b,E=v.length,B=new Array(2*E);for(m=g=0;m<E;)if((w=v[m++])<128)B[g++]=w;else if(4<(b=c[w]))B[g++]=65533,m+=b-1;else{for(w&=b===2?31:b===3?15:7;1<b&&m<E;)w=w<<6|63&v[m++],b--;1<b?B[g++]=65533:w<65536?B[g++]=w:(w-=65536,B[g++]=55296|w>>10&1023,B[g++]=56320|1023&w)}return B.length!==g&&(B.subarray?B=B.subarray(0,g):B.length=g),s.applyFromCharCode(B)}(p=s.transformTo(a.uint8array?"uint8array":"array",p))},s.inherits(f,l),f.prototype.processChunk=function(p){var v=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=v;(v=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),v.set(m,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var g=function(b,E){var B;for((E=E||b.length)>b.length&&(E=b.length),B=E-1;0<=B&&(192&b[B])==128;)B--;return B<0||B===0?E:B+c[b[B]]>E?B:E}(v),w=v;g!==v.length&&(a.uint8array?(w=v.subarray(0,g),this.leftOver=v.subarray(g,v.length)):(w=v.slice(0,g),this.leftOver=v.slice(g,v.length))),this.push({data:i.utf8decode(w),meta:p.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,s.inherits(d,l),d.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,i){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function c(m){return m}function u(m,g){for(var w=0;w<m.length;++w)g[w]=255&m.charCodeAt(w);return g}t("setimmediate"),i.newBlob=function(m,g){i.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(m),w.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(m,g,w){var b=[],E=0,B=m.length;if(B<=w)return String.fromCharCode.apply(null,m);for(;E<B;)g==="array"||g==="nodebuffer"?b.push(String.fromCharCode.apply(null,m.slice(E,Math.min(E+w,B)))):b.push(String.fromCharCode.apply(null,m.subarray(E,Math.min(E+w,B)))),E+=w;return b.join("")},stringifyByChar:function(m){for(var g="",w=0;w<m.length;w++)g+=String.fromCharCode(m[w]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(m){var g=65536,w=i.getTypeOf(m),b=!0;if(w==="uint8array"?b=f.applyCanBeUsed.uint8array:w==="nodebuffer"&&(b=f.applyCanBeUsed.nodebuffer),b)for(;1<g;)try{return f.stringifyByChunk(m,w,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(m)}function p(m,g){for(var w=0;w<m.length;w++)g[w]=m[w];return g}i.applyFromCharCode=d;var v={};v.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return v.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,o.allocBuffer(m.length))}},v.array={string:d,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},v.arraybuffer={string:function(m){return d(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},v.uint8array={string:d,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return o.newBufferFrom(m)}},v.nodebuffer={string:d,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return v.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,g){if(g=g||"",!m)return g;i.checkSupport(m);var w=i.getTypeOf(g);return v[w][m](g)},i.resolve=function(m){for(var g=m.split("/"),w=[],b=0;b<g.length;b++){var E=g[b];E==="."||E===""&&b!==0&&b!==g.length-1||(E===".."?w.pop():w.push(E))}return w.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var g,w,b="";for(w=0;w<(m||"").length;w++)b+="\\x"+((g=m.charCodeAt(w))<16?"0":"")+g.toString(16).toUpperCase();return b},i.delay=function(m,g,w){setImmediate(function(){m.apply(w||null,g||[])})},i.inherits=function(m,g){function w(){}w.prototype=g.prototype,m.prototype=new w},i.extend=function(){var m,g,w={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&w[g]===void 0&&(w[g]=arguments[m][g]);return w},i.prepareContent=function(m,g,w,b,E){return l.Promise.resolve(g).then(function(B){return s.blob&&(B instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(B))!==-1)&&typeof FileReader<"u"?new l.Promise(function(S,M){var I=new FileReader;I.onload=function(k){S(k.target.result)},I.onerror=function(k){M(k.target.error)},I.readAsArrayBuffer(B)}):B}).then(function(B){var S=i.getTypeOf(B);return S?(S==="arraybuffer"?B=i.transformTo("uint8array",B):S==="string"&&(E?B=a.decode(B):w&&b!==!0&&(B=function(M){return u(M,s.uint8array?new Uint8Array(M.length):new Array(M.length))}(B))),B):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),c=t("./support");function u(f){this.files=[],this.loadOptions=f}u.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(d)+", expected "+a.pretty(f)+")")}},isSignature:function(f,d){var p=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===d;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),d=c.uint8array?"uint8array":"array",p=a.transformTo(d,f);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,d,p,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),d=this.reader.readInt(4),p=this.reader.readData(d),this.zip64ExtensibleData[f]={id:f,length:d,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,d;for(f=0;f<this.files.length;f++)d=this.files[f],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(f=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var d=f;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=d-p;if(0<v)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,i){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),c=t("./utf8"),u=t("./compressions"),f=t("./support");function d(p,v){this.options=p,this.loadOptions=v}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(g){for(var w in u)if(Object.prototype.hasOwnProperty.call(u,w)&&u[w].magic===g)return u[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,m,g,w=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<w;)v=p.readInt(2),m=p.readInt(2),g=p.readData(m),this.extraFields[v]={id:v,length:m,value:g};p.setIndex(w)},handleUTF8:function(){var p=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var m=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var w=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=s(p.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=s(p.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,i){function s(v,m,g){this.name=v,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),c=t("./compressedObject"),u=t("./stream/GenericWorker");s.prototype={internalStream:function(v){var m=null,g="string";try{if(!v)throw new Error("No output type specified.");var w=(g=v.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var b=!this._dataBinary;b&&!w&&(m=m.pipe(new l.Utf8EncodeWorker)),!b&&w&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(E){(m=new u("error")).error(E)}return new a(m,g,"")},async:function(v,m){return this.internalStream(v).accumulate(m)},nodeStream:function(v,m){return this.internalStream(v||"nodebuffer").toNodejsStream(m)},_compressWorker:function(v,m){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(g,v,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<f.length;p++)s.prototype[f[p]]=d;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,i){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(v),f=s.document.createTextNode("");u.observe(f,{characterData:!0}),a=function(){f.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){v(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(v,0)};else{var d=new s.MessageChannel;d.port1.onmessage=v,a=function(){d.port2.postMessage(0)}}var p=[];function v(){var m,g;o=!0;for(var w=p.length;w;){for(g=p,p=[],m=-1;++m<w;)g[m]();w=p.length}o=!1}n.exports=function(m){p.push(m)!==1||o||a()}}).call(this,typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,i){var s=t("immediate");function a(){}var o={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,w!==a&&m(this,w)}function d(w,b,E){this.promise=w,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function p(w,b,E){s(function(){var B;try{B=b(E)}catch(S){return o.reject(w,S)}B===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,B)})}function v(w){var b=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof b=="function")return function(){b.apply(w,arguments)}}function m(w,b){var E=!1;function B(I){E||(E=!0,o.reject(w,I))}function S(I){E||(E=!0,o.resolve(w,I))}var M=g(function(){b(S,B)});M.status==="error"&&B(M.value)}function g(w,b){var E={};try{E.value=w(b),E.status="success"}catch(B){E.status="error",E.value=B}return E}(n.exports=f).prototype.finally=function(w){if(typeof w!="function")return this;var b=this.constructor;return this.then(function(E){return b.resolve(w()).then(function(){return E})},function(E){return b.resolve(w()).then(function(){throw E})})},f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,b){if(typeof w!="function"&&this.state===c||typeof b!="function"&&this.state===l)return this;var E=new this.constructor(a);return this.state!==u?p(E,this.state===c?w:b,this.outcome):this.queue.push(new d(E,w,b)),E},d.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},d.prototype.otherCallFulfilled=function(w){p(this.promise,this.onFulfilled,w)},d.prototype.callRejected=function(w){o.reject(this.promise,w)},d.prototype.otherCallRejected=function(w){p(this.promise,this.onRejected,w)},o.resolve=function(w,b){var E=g(v,b);if(E.status==="error")return o.reject(w,E.value);var B=E.value;if(B)m(w,B);else{w.state=c,w.outcome=b;for(var S=-1,M=w.queue.length;++S<M;)w.queue[S].callFulfilled(b)}return w},o.reject=function(w,b){w.state=l,w.outcome=b;for(var E=-1,B=w.queue.length;++E<B;)w.queue[E].callRejected(b);return w},f.resolve=function(w){return w instanceof this?w:o.resolve(new this(a),w)},f.reject=function(w){var b=new this(a);return o.reject(b,w)},f.all=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,B=!1;if(!E)return this.resolve([]);for(var S=new Array(E),M=0,I=-1,k=new this(a);++I<E;)O(w[I],I);return k;function O(C,P){b.resolve(C).then(function(D){S[P]=D,++M!==E||B||(B=!0,o.resolve(k,S))},function(D){B||(B=!0,o.reject(k,D))})}},f.race=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,B=!1;if(!E)return this.resolve([]);for(var S=-1,M=new this(a);++S<E;)I=w[S],b.resolve(I).then(function(k){B||(B=!0,o.resolve(M,k))},function(k){B||(B=!0,o.reject(M,k))});var I;return M}},{immediate:36}],38:[function(t,n,i){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,i){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),c=t("./zlib/zstream"),u=Object.prototype.toString,f=0,d=-1,p=0,v=8;function m(w){if(!(this instanceof m))return new m(w);this.options=a.assign({level:d,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},w||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==f)throw new Error(l[E]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var B;if(B=typeof b.dictionary=="string"?o.string2buf(b.dictionary):u.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(E=s.deflateSetDictionary(this.strm,B))!==f)throw new Error(l[E]);this._dict_set=!0}}function g(w,b){var E=new m(b);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}m.prototype.push=function(w,b){var E,B,S=this.strm,M=this.options.chunkSize;if(this.ended)return!1;B=b===~~b?b:b===!0?4:0,typeof w=="string"?S.input=o.string2buf(w):u.call(w)==="[object ArrayBuffer]"?S.input=new Uint8Array(w):S.input=w,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new a.Buf8(M),S.next_out=0,S.avail_out=M),(E=s.deflate(S,B))!==1&&E!==f)return this.onEnd(E),!(this.ended=!0);S.avail_out!==0&&(S.avail_in!==0||B!==4&&B!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(S.output,S.next_out))):this.onData(a.shrinkBuf(S.output,S.next_out)))}while((0<S.avail_in||S.avail_out===0)&&E!==1);return B===4?(E=s.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===f):B!==2||(this.onEnd(f),!(S.avail_out=0))},m.prototype.onData=function(w){this.chunks.push(w)},m.prototype.onEnd=function(w){w===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=m,i.deflate=g,i.deflateRaw=function(w,b){return(b=b||{}).raw=!0,g(w,b)},i.gzip=function(w,b){return(b=b||{}).gzip=!0,g(w,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,i){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),c=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),d=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var w=s.inflateInit2(this.strm,g.windowBits);if(w!==l.Z_OK)throw new Error(c[w]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function v(m,g){var w=new p(g);if(w.push(m,!0),w.err)throw w.msg||c[w.err];return w.result}p.prototype.push=function(m,g){var w,b,E,B,S,M,I=this.strm,k=this.options.chunkSize,O=this.options.dictionary,C=!1;if(this.ended)return!1;b=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?I.input=o.binstring2buf(m):d.call(m)==="[object ArrayBuffer]"?I.input=new Uint8Array(m):I.input=m,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new a.Buf8(k),I.next_out=0,I.avail_out=k),(w=s.inflate(I,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(M=typeof O=="string"?o.string2buf(O):d.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,w=s.inflateSetDictionary(this.strm,M)),w===l.Z_BUF_ERROR&&C===!0&&(w=l.Z_OK,C=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&w!==l.Z_STREAM_END&&(I.avail_in!==0||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(I.output,I.next_out),B=I.next_out-E,S=o.buf2string(I.output,E),I.next_out=B,I.avail_out=k-B,B&&a.arraySet(I.output,I.output,E,B,0),this.onData(S)):this.onData(a.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(C=!0)}while((0<I.avail_in||I.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(w=s.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(I.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=p,i.inflate=v,i.inflateRaw=function(m,g){return(g=g||{}).raw=!0,v(m,g)},i.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var f in u)u.hasOwnProperty(f)&&(l[f]=u[f])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var a={arraySet:function(l,c,u,f,d){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+f),d);else for(var p=0;p<f;p++)l[d+p]=c[u+p]},flattenChunks:function(l){var c,u,f,d,p,v;for(c=f=0,u=l.length;c<u;c++)f+=l[c].length;for(v=new Uint8Array(f),c=d=0,u=l.length;c<u;c++)p=l[c],v.set(p,d),d+=p.length;return v}},o={arraySet:function(l,c,u,f,d){for(var p=0;p<f;p++)l[d+p]=c[u+p]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(t,n,i){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(f,d){if(d<65537&&(f.subarray&&o||!f.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(f,d));for(var p="",v=0;v<d;v++)p+=String.fromCharCode(f[v]);return p}l[254]=l[254]=1,i.string2buf=function(f){var d,p,v,m,g,w=f.length,b=0;for(m=0;m<w;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<w&&(64512&(v=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),b+=p<128?1:p<2048?2:p<65536?3:4;for(d=new s.Buf8(b),m=g=0;g<b;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<w&&(64512&(v=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),p<128?d[g++]=p:(p<2048?d[g++]=192|p>>>6:(p<65536?d[g++]=224|p>>>12:(d[g++]=240|p>>>18,d[g++]=128|p>>>12&63),d[g++]=128|p>>>6&63),d[g++]=128|63&p);return d},i.buf2binstring=function(f){return u(f,f.length)},i.binstring2buf=function(f){for(var d=new s.Buf8(f.length),p=0,v=d.length;p<v;p++)d[p]=f.charCodeAt(p);return d},i.buf2string=function(f,d){var p,v,m,g,w=d||f.length,b=new Array(2*w);for(p=v=0;p<w;)if((m=f[p++])<128)b[v++]=m;else if(4<(g=l[m]))b[v++]=65533,p+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&p<w;)m=m<<6|63&f[p++],g--;1<g?b[v++]=65533:m<65536?b[v++]=m:(m-=65536,b[v++]=55296|m>>10&1023,b[v++]=56320|1023&m)}return u(b,v)},i.utf8border=function(f,d){var p;for((d=d||f.length)>f.length&&(d=f.length),p=d-1;0<=p&&(192&f[p])==128;)p--;return p<0||p===0?d:p+l[f[p]]>d?p:d}},{"./common":41}],43:[function(t,n,i){n.exports=function(s,a,o,l){for(var c=65535&s|0,u=s>>>16&65535|0,f=0;o!==0;){for(o-=f=2e3<o?2e3:o;u=u+(c=c+a[l++]|0)|0,--f;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(t,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,i){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,c){var u=s,f=c+l;a^=-1;for(var d=c;d<f;d++)a=a>>>8^u[255&(a^o[d])];return-1^a}},{}],46:[function(t,n,i){var s,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),c=t("./crc32"),u=t("./messages"),f=0,d=4,p=0,v=-2,m=-1,g=4,w=2,b=8,E=9,B=286,S=30,M=19,I=2*B+1,k=15,O=3,C=258,P=C+O+1,D=42,F=113,_=1,R=2,L=3,Q=4;function G(Z,ve){return Z.msg=u[ve],ve}function Y(Z){return(Z<<1)-(4<Z?9:0)}function W(Z){for(var ve=Z.length;0<=--ve;)Z[ve]=0}function V(Z){var ve=Z.state,ye=ve.pending;ye>Z.avail_out&&(ye=Z.avail_out),ye!==0&&(a.arraySet(Z.output,ve.pending_buf,ve.pending_out,ye,Z.next_out),Z.next_out+=ye,ve.pending_out+=ye,Z.total_out+=ye,Z.avail_out-=ye,ve.pending-=ye,ve.pending===0&&(ve.pending_out=0))}function T(Z,ve){o._tr_flush_block(Z,0<=Z.block_start?Z.block_start:-1,Z.strstart-Z.block_start,ve),Z.block_start=Z.strstart,V(Z.strm)}function H(Z,ve){Z.pending_buf[Z.pending++]=ve}function K(Z,ve){Z.pending_buf[Z.pending++]=ve>>>8&255,Z.pending_buf[Z.pending++]=255&ve}function N(Z,ve){var ye,se,ce=Z.max_chain_length,_e=Z.strstart,ie=Z.prev_length,$=Z.nice_match,ee=Z.strstart>Z.w_size-P?Z.strstart-(Z.w_size-P):0,pe=Z.window,xe=Z.w_mask,be=Z.prev,De=Z.strstart+C,J=pe[_e+ie-1],j=pe[_e+ie];Z.prev_length>=Z.good_match&&(ce>>=2),$>Z.lookahead&&($=Z.lookahead);do if(pe[(ye=ve)+ie]===j&&pe[ye+ie-1]===J&&pe[ye]===pe[_e]&&pe[++ye]===pe[_e+1]){_e+=2,ye++;do;while(pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&pe[++_e]===pe[++ye]&&_e<De);if(se=C-(De-_e),_e=De-C,ie<se){if(Z.match_start=ve,$<=(ie=se))break;J=pe[_e+ie-1],j=pe[_e+ie]}}while((ve=be[ve&xe])>ee&&--ce!=0);return ie<=Z.lookahead?ie:Z.lookahead}function te(Z){var ve,ye,se,ce,_e,ie,$,ee,pe,xe,be=Z.w_size;do{if(ce=Z.window_size-Z.lookahead-Z.strstart,Z.strstart>=be+(be-P)){for(a.arraySet(Z.window,Z.window,be,be,0),Z.match_start-=be,Z.strstart-=be,Z.block_start-=be,ve=ye=Z.hash_size;se=Z.head[--ve],Z.head[ve]=be<=se?se-be:0,--ye;);for(ve=ye=be;se=Z.prev[--ve],Z.prev[ve]=be<=se?se-be:0,--ye;);ce+=be}if(Z.strm.avail_in===0)break;if(ie=Z.strm,$=Z.window,ee=Z.strstart+Z.lookahead,pe=ce,xe=void 0,xe=ie.avail_in,pe<xe&&(xe=pe),ye=xe===0?0:(ie.avail_in-=xe,a.arraySet($,ie.input,ie.next_in,xe,ee),ie.state.wrap===1?ie.adler=l(ie.adler,$,xe,ee):ie.state.wrap===2&&(ie.adler=c(ie.adler,$,xe,ee)),ie.next_in+=xe,ie.total_in+=xe,xe),Z.lookahead+=ye,Z.lookahead+Z.insert>=O)for(_e=Z.strstart-Z.insert,Z.ins_h=Z.window[_e],Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[_e+1])&Z.hash_mask;Z.insert&&(Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[_e+O-1])&Z.hash_mask,Z.prev[_e&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=_e,_e++,Z.insert--,!(Z.lookahead+Z.insert<O)););}while(Z.lookahead<P&&Z.strm.avail_in!==0)}function oe(Z,ve){for(var ye,se;;){if(Z.lookahead<P){if(te(Z),Z.lookahead<P&&ve===f)return _;if(Z.lookahead===0)break}if(ye=0,Z.lookahead>=O&&(Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[Z.strstart+O-1])&Z.hash_mask,ye=Z.prev[Z.strstart&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=Z.strstart),ye!==0&&Z.strstart-ye<=Z.w_size-P&&(Z.match_length=N(Z,ye)),Z.match_length>=O)if(se=o._tr_tally(Z,Z.strstart-Z.match_start,Z.match_length-O),Z.lookahead-=Z.match_length,Z.match_length<=Z.max_lazy_match&&Z.lookahead>=O){for(Z.match_length--;Z.strstart++,Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[Z.strstart+O-1])&Z.hash_mask,ye=Z.prev[Z.strstart&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=Z.strstart,--Z.match_length!=0;);Z.strstart++}else Z.strstart+=Z.match_length,Z.match_length=0,Z.ins_h=Z.window[Z.strstart],Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[Z.strstart+1])&Z.hash_mask;else se=o._tr_tally(Z,0,Z.window[Z.strstart]),Z.lookahead--,Z.strstart++;if(se&&(T(Z,!1),Z.strm.avail_out===0))return _}return Z.insert=Z.strstart<O-1?Z.strstart:O-1,ve===d?(T(Z,!0),Z.strm.avail_out===0?L:Q):Z.last_lit&&(T(Z,!1),Z.strm.avail_out===0)?_:R}function fe(Z,ve){for(var ye,se,ce;;){if(Z.lookahead<P){if(te(Z),Z.lookahead<P&&ve===f)return _;if(Z.lookahead===0)break}if(ye=0,Z.lookahead>=O&&(Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[Z.strstart+O-1])&Z.hash_mask,ye=Z.prev[Z.strstart&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=Z.strstart),Z.prev_length=Z.match_length,Z.prev_match=Z.match_start,Z.match_length=O-1,ye!==0&&Z.prev_length<Z.max_lazy_match&&Z.strstart-ye<=Z.w_size-P&&(Z.match_length=N(Z,ye),Z.match_length<=5&&(Z.strategy===1||Z.match_length===O&&4096<Z.strstart-Z.match_start)&&(Z.match_length=O-1)),Z.prev_length>=O&&Z.match_length<=Z.prev_length){for(ce=Z.strstart+Z.lookahead-O,se=o._tr_tally(Z,Z.strstart-1-Z.prev_match,Z.prev_length-O),Z.lookahead-=Z.prev_length-1,Z.prev_length-=2;++Z.strstart<=ce&&(Z.ins_h=(Z.ins_h<<Z.hash_shift^Z.window[Z.strstart+O-1])&Z.hash_mask,ye=Z.prev[Z.strstart&Z.w_mask]=Z.head[Z.ins_h],Z.head[Z.ins_h]=Z.strstart),--Z.prev_length!=0;);if(Z.match_available=0,Z.match_length=O-1,Z.strstart++,se&&(T(Z,!1),Z.strm.avail_out===0))return _}else if(Z.match_available){if((se=o._tr_tally(Z,0,Z.window[Z.strstart-1]))&&T(Z,!1),Z.strstart++,Z.lookahead--,Z.strm.avail_out===0)return _}else Z.match_available=1,Z.strstart++,Z.lookahead--}return Z.match_available&&(se=o._tr_tally(Z,0,Z.window[Z.strstart-1]),Z.match_available=0),Z.insert=Z.strstart<O-1?Z.strstart:O-1,ve===d?(T(Z,!0),Z.strm.avail_out===0?L:Q):Z.last_lit&&(T(Z,!1),Z.strm.avail_out===0)?_:R}function he(Z,ve,ye,se,ce){this.good_length=Z,this.max_lazy=ve,this.nice_length=ye,this.max_chain=se,this.func=ce}function me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*I),this.dyn_dtree=new a.Buf16(2*(2*S+1)),this.bl_tree=new a.Buf16(2*(2*M+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(k+1),this.heap=new a.Buf16(2*B+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*B+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Te(Z){var ve;return Z&&Z.state?(Z.total_in=Z.total_out=0,Z.data_type=w,(ve=Z.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?D:F,Z.adler=ve.wrap===2?0:1,ve.last_flush=f,o._tr_init(ve),p):G(Z,v)}function Re(Z){var ve=Te(Z);return ve===p&&function(ye){ye.window_size=2*ye.w_size,W(ye.head),ye.max_lazy_match=s[ye.level].max_lazy,ye.good_match=s[ye.level].good_length,ye.nice_match=s[ye.level].nice_length,ye.max_chain_length=s[ye.level].max_chain,ye.strstart=0,ye.block_start=0,ye.lookahead=0,ye.insert=0,ye.match_length=ye.prev_length=O-1,ye.match_available=0,ye.ins_h=0}(Z.state),ve}function de(Z,ve,ye,se,ce,_e){if(!Z)return v;var ie=1;if(ve===m&&(ve=6),se<0?(ie=0,se=-se):15<se&&(ie=2,se-=16),ce<1||E<ce||ye!==b||se<8||15<se||ve<0||9<ve||_e<0||g<_e)return G(Z,v);se===8&&(se=9);var $=new me;return(Z.state=$).strm=Z,$.wrap=ie,$.gzhead=null,$.w_bits=se,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=ce+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+O-1)/O),$.window=new a.Buf8(2*$.w_size),$.head=new a.Buf16($.hash_size),$.prev=new a.Buf16($.w_size),$.lit_bufsize=1<<ce+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new a.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=ve,$.strategy=_e,$.method=ye,Re(Z)}s=[new he(0,0,0,0,function(Z,ve){var ye=65535;for(ye>Z.pending_buf_size-5&&(ye=Z.pending_buf_size-5);;){if(Z.lookahead<=1){if(te(Z),Z.lookahead===0&&ve===f)return _;if(Z.lookahead===0)break}Z.strstart+=Z.lookahead,Z.lookahead=0;var se=Z.block_start+ye;if((Z.strstart===0||Z.strstart>=se)&&(Z.lookahead=Z.strstart-se,Z.strstart=se,T(Z,!1),Z.strm.avail_out===0)||Z.strstart-Z.block_start>=Z.w_size-P&&(T(Z,!1),Z.strm.avail_out===0))return _}return Z.insert=0,ve===d?(T(Z,!0),Z.strm.avail_out===0?L:Q):(Z.strstart>Z.block_start&&(T(Z,!1),Z.strm.avail_out),_)}),new he(4,4,8,4,oe),new he(4,5,16,8,oe),new he(4,6,32,32,oe),new he(4,4,16,16,fe),new he(8,16,32,32,fe),new he(8,16,128,128,fe),new he(8,32,128,256,fe),new he(32,128,258,1024,fe),new he(32,258,258,4096,fe)],i.deflateInit=function(Z,ve){return de(Z,ve,b,15,8,0)},i.deflateInit2=de,i.deflateReset=Re,i.deflateResetKeep=Te,i.deflateSetHeader=function(Z,ve){return Z&&Z.state?Z.state.wrap!==2?v:(Z.state.gzhead=ve,p):v},i.deflate=function(Z,ve){var ye,se,ce,_e;if(!Z||!Z.state||5<ve||ve<0)return Z?G(Z,v):v;if(se=Z.state,!Z.output||!Z.input&&Z.avail_in!==0||se.status===666&&ve!==d)return G(Z,Z.avail_out===0?-5:v);if(se.strm=Z,ye=se.last_flush,se.last_flush=ve,se.status===D)if(se.wrap===2)Z.adler=0,H(se,31),H(se,139),H(se,8),se.gzhead?(H(se,(se.gzhead.text?1:0)+(se.gzhead.hcrc?2:0)+(se.gzhead.extra?4:0)+(se.gzhead.name?8:0)+(se.gzhead.comment?16:0)),H(se,255&se.gzhead.time),H(se,se.gzhead.time>>8&255),H(se,se.gzhead.time>>16&255),H(se,se.gzhead.time>>24&255),H(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),H(se,255&se.gzhead.os),se.gzhead.extra&&se.gzhead.extra.length&&(H(se,255&se.gzhead.extra.length),H(se,se.gzhead.extra.length>>8&255)),se.gzhead.hcrc&&(Z.adler=c(Z.adler,se.pending_buf,se.pending,0)),se.gzindex=0,se.status=69):(H(se,0),H(se,0),H(se,0),H(se,0),H(se,0),H(se,se.level===9?2:2<=se.strategy||se.level<2?4:0),H(se,3),se.status=F);else{var ie=b+(se.w_bits-8<<4)<<8;ie|=(2<=se.strategy||se.level<2?0:se.level<6?1:se.level===6?2:3)<<6,se.strstart!==0&&(ie|=32),ie+=31-ie%31,se.status=F,K(se,ie),se.strstart!==0&&(K(se,Z.adler>>>16),K(se,65535&Z.adler)),Z.adler=1}if(se.status===69)if(se.gzhead.extra){for(ce=se.pending;se.gzindex<(65535&se.gzhead.extra.length)&&(se.pending!==se.pending_buf_size||(se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),V(Z),ce=se.pending,se.pending!==se.pending_buf_size));)H(se,255&se.gzhead.extra[se.gzindex]),se.gzindex++;se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),se.gzindex===se.gzhead.extra.length&&(se.gzindex=0,se.status=73)}else se.status=73;if(se.status===73)if(se.gzhead.name){ce=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),V(Z),ce=se.pending,se.pending===se.pending_buf_size)){_e=1;break}_e=se.gzindex<se.gzhead.name.length?255&se.gzhead.name.charCodeAt(se.gzindex++):0,H(se,_e)}while(_e!==0);se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),_e===0&&(se.gzindex=0,se.status=91)}else se.status=91;if(se.status===91)if(se.gzhead.comment){ce=se.pending;do{if(se.pending===se.pending_buf_size&&(se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),V(Z),ce=se.pending,se.pending===se.pending_buf_size)){_e=1;break}_e=se.gzindex<se.gzhead.comment.length?255&se.gzhead.comment.charCodeAt(se.gzindex++):0,H(se,_e)}while(_e!==0);se.gzhead.hcrc&&se.pending>ce&&(Z.adler=c(Z.adler,se.pending_buf,se.pending-ce,ce)),_e===0&&(se.status=103)}else se.status=103;if(se.status===103&&(se.gzhead.hcrc?(se.pending+2>se.pending_buf_size&&V(Z),se.pending+2<=se.pending_buf_size&&(H(se,255&Z.adler),H(se,Z.adler>>8&255),Z.adler=0,se.status=F)):se.status=F),se.pending!==0){if(V(Z),Z.avail_out===0)return se.last_flush=-1,p}else if(Z.avail_in===0&&Y(ve)<=Y(ye)&&ve!==d)return G(Z,-5);if(se.status===666&&Z.avail_in!==0)return G(Z,-5);if(Z.avail_in!==0||se.lookahead!==0||ve!==f&&se.status!==666){var $=se.strategy===2?function(ee,pe){for(var xe;;){if(ee.lookahead===0&&(te(ee),ee.lookahead===0)){if(pe===f)return _;break}if(ee.match_length=0,xe=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,xe&&(T(ee,!1),ee.strm.avail_out===0))return _}return ee.insert=0,pe===d?(T(ee,!0),ee.strm.avail_out===0?L:Q):ee.last_lit&&(T(ee,!1),ee.strm.avail_out===0)?_:R}(se,ve):se.strategy===3?function(ee,pe){for(var xe,be,De,J,j=ee.window;;){if(ee.lookahead<=C){if(te(ee),ee.lookahead<=C&&pe===f)return _;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=O&&0<ee.strstart&&(be=j[De=ee.strstart-1])===j[++De]&&be===j[++De]&&be===j[++De]){J=ee.strstart+C;do;while(be===j[++De]&&be===j[++De]&&be===j[++De]&&be===j[++De]&&be===j[++De]&&be===j[++De]&&be===j[++De]&&be===j[++De]&&De<J);ee.match_length=C-(J-De),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=O?(xe=o._tr_tally(ee,1,ee.match_length-O),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(xe=o._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),xe&&(T(ee,!1),ee.strm.avail_out===0))return _}return ee.insert=0,pe===d?(T(ee,!0),ee.strm.avail_out===0?L:Q):ee.last_lit&&(T(ee,!1),ee.strm.avail_out===0)?_:R}(se,ve):s[se.level].func(se,ve);if($!==L&&$!==Q||(se.status=666),$===_||$===L)return Z.avail_out===0&&(se.last_flush=-1),p;if($===R&&(ve===1?o._tr_align(se):ve!==5&&(o._tr_stored_block(se,0,0,!1),ve===3&&(W(se.head),se.lookahead===0&&(se.strstart=0,se.block_start=0,se.insert=0))),V(Z),Z.avail_out===0))return se.last_flush=-1,p}return ve!==d?p:se.wrap<=0?1:(se.wrap===2?(H(se,255&Z.adler),H(se,Z.adler>>8&255),H(se,Z.adler>>16&255),H(se,Z.adler>>24&255),H(se,255&Z.total_in),H(se,Z.total_in>>8&255),H(se,Z.total_in>>16&255),H(se,Z.total_in>>24&255)):(K(se,Z.adler>>>16),K(se,65535&Z.adler)),V(Z),0<se.wrap&&(se.wrap=-se.wrap),se.pending!==0?p:1)},i.deflateEnd=function(Z){var ve;return Z&&Z.state?(ve=Z.state.status)!==D&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==F&&ve!==666?G(Z,v):(Z.state=null,ve===F?G(Z,-3):p):v},i.deflateSetDictionary=function(Z,ve){var ye,se,ce,_e,ie,$,ee,pe,xe=ve.length;if(!Z||!Z.state||(_e=(ye=Z.state).wrap)===2||_e===1&&ye.status!==D||ye.lookahead)return v;for(_e===1&&(Z.adler=l(Z.adler,ve,xe,0)),ye.wrap=0,xe>=ye.w_size&&(_e===0&&(W(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),pe=new a.Buf8(ye.w_size),a.arraySet(pe,ve,xe-ye.w_size,ye.w_size,0),ve=pe,xe=ye.w_size),ie=Z.avail_in,$=Z.next_in,ee=Z.input,Z.avail_in=xe,Z.next_in=0,Z.input=ve,te(ye);ye.lookahead>=O;){for(se=ye.strstart,ce=ye.lookahead-(O-1);ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[se+O-1])&ye.hash_mask,ye.prev[se&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=se,se++,--ce;);ye.strstart=se,ye.lookahead=O-1,te(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=O-1,ye.match_available=0,Z.next_in=$,Z.input=ee,Z.avail_in=ie,ye.wrap=_e,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,i){n.exports=function(s,a){var o,l,c,u,f,d,p,v,m,g,w,b,E,B,S,M,I,k,O,C,P,D,F,_,R;o=s.state,l=s.next_in,_=s.input,c=l+(s.avail_in-5),u=s.next_out,R=s.output,f=u-(a-s.avail_out),d=u+(s.avail_out-257),p=o.dmax,v=o.wsize,m=o.whave,g=o.wnext,w=o.window,b=o.hold,E=o.bits,B=o.lencode,S=o.distcode,M=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;e:do{E<15&&(b+=_[l++]<<E,E+=8,b+=_[l++]<<E,E+=8),k=B[b&M];t:for(;;){if(b>>>=O=k>>>24,E-=O,(O=k>>>16&255)===0)R[u++]=65535&k;else{if(!(16&O)){if((64&O)==0){k=B[(65535&k)+(b&(1<<O)-1)];continue t}if(32&O){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}C=65535&k,(O&=15)&&(E<O&&(b+=_[l++]<<E,E+=8),C+=b&(1<<O)-1,b>>>=O,E-=O),E<15&&(b+=_[l++]<<E,E+=8,b+=_[l++]<<E,E+=8),k=S[b&I];n:for(;;){if(b>>>=O=k>>>24,E-=O,!(16&(O=k>>>16&255))){if((64&O)==0){k=S[(65535&k)+(b&(1<<O)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(P=65535&k,E<(O&=15)&&(b+=_[l++]<<E,(E+=8)<O&&(b+=_[l++]<<E,E+=8)),p<(P+=b&(1<<O)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=O,E-=O,(O=u-f)<P){if(m<(O=P-O)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(F=w,(D=0)===g){if(D+=v-O,O<C){for(C-=O;R[u++]=w[D++],--O;);D=u-P,F=R}}else if(g<O){if(D+=v+g-O,(O-=g)<C){for(C-=O;R[u++]=w[D++],--O;);if(D=0,g<C){for(C-=O=g;R[u++]=w[D++],--O;);D=u-P,F=R}}}else if(D+=g-O,O<C){for(C-=O;R[u++]=w[D++],--O;);D=u-P,F=R}for(;2<C;)R[u++]=F[D++],R[u++]=F[D++],R[u++]=F[D++],C-=3;C&&(R[u++]=F[D++],1<C&&(R[u++]=F[D++]))}else{for(D=u-P;R[u++]=R[D++],R[u++]=R[D++],R[u++]=R[D++],2<(C-=3););C&&(R[u++]=R[D++],1<C&&(R[u++]=R[D++]))}break}}break}}while(l<c&&u<d);l-=C=E>>3,b&=(1<<(E-=C<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<d?d-u+257:257-(u-d),o.hold=b,o.bits=E}},{}],49:[function(t,n,i){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),c=t("./inftrees"),u=1,f=2,d=0,p=-2,v=1,m=852,g=592;function w(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(D){var F;return D&&D.state?(F=D.state,D.total_in=D.total_out=F.total=0,D.msg="",F.wrap&&(D.adler=1&F.wrap),F.mode=v,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(m),F.distcode=F.distdyn=new s.Buf32(g),F.sane=1,F.back=-1,d):p}function B(D){var F;return D&&D.state?((F=D.state).wsize=0,F.whave=0,F.wnext=0,E(D)):p}function S(D,F){var _,R;return D&&D.state?(R=D.state,F<0?(_=0,F=-F):(_=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?p:(R.window!==null&&R.wbits!==F&&(R.window=null),R.wrap=_,R.wbits=F,B(D))):p}function M(D,F){var _,R;return D?(R=new b,(D.state=R).window=null,(_=S(D,F))!==d&&(D.state=null),_):p}var I,k,O=!0;function C(D){if(O){var F;for(I=new s.Buf32(512),k=new s.Buf32(32),F=0;F<144;)D.lens[F++]=8;for(;F<256;)D.lens[F++]=9;for(;F<280;)D.lens[F++]=7;for(;F<288;)D.lens[F++]=8;for(c(u,D.lens,0,288,I,0,D.work,{bits:9}),F=0;F<32;)D.lens[F++]=5;c(f,D.lens,0,32,k,0,D.work,{bits:5}),O=!1}D.lencode=I,D.lenbits=9,D.distcode=k,D.distbits=5}function P(D,F,_,R){var L,Q=D.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new s.Buf8(Q.wsize)),R>=Q.wsize?(s.arraySet(Q.window,F,_-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):(R<(L=Q.wsize-Q.wnext)&&(L=R),s.arraySet(Q.window,F,_-R,L,Q.wnext),(R-=L)?(s.arraySet(Q.window,F,_-R,R,0),Q.wnext=R,Q.whave=Q.wsize):(Q.wnext+=L,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=L))),0}i.inflateReset=B,i.inflateReset2=S,i.inflateResetKeep=E,i.inflateInit=function(D){return M(D,15)},i.inflateInit2=M,i.inflate=function(D,F){var _,R,L,Q,G,Y,W,V,T,H,K,N,te,oe,fe,he,me,Te,Re,de,Z,ve,ye,se,ce=0,_e=new s.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return p;(_=D.state).mode===12&&(_.mode=13),G=D.next_out,L=D.output,W=D.avail_out,Q=D.next_in,R=D.input,Y=D.avail_in,V=_.hold,T=_.bits,H=Y,K=W,ve=d;e:for(;;)switch(_.mode){case v:if(_.wrap===0){_.mode=13;break}for(;T<16;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(2&_.wrap&&V===35615){_e[_.check=0]=255&V,_e[1]=V>>>8&255,_.check=o(_.check,_e,2,0),T=V=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&V)<<8)+(V>>8))%31){D.msg="incorrect header check",_.mode=30;break}if((15&V)!=8){D.msg="unknown compression method",_.mode=30;break}if(T-=4,Z=8+(15&(V>>>=4)),_.wbits===0)_.wbits=Z;else if(Z>_.wbits){D.msg="invalid window size",_.mode=30;break}_.dmax=1<<Z,D.adler=_.check=1,_.mode=512&V?10:12,T=V=0;break;case 2:for(;T<16;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(_.flags=V,(255&_.flags)!=8){D.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){D.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=V>>8&1),512&_.flags&&(_e[0]=255&V,_e[1]=V>>>8&255,_.check=o(_.check,_e,2,0)),T=V=0,_.mode=3;case 3:for(;T<32;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.head&&(_.head.time=V),512&_.flags&&(_e[0]=255&V,_e[1]=V>>>8&255,_e[2]=V>>>16&255,_e[3]=V>>>24&255,_.check=o(_.check,_e,4,0)),T=V=0,_.mode=4;case 4:for(;T<16;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.head&&(_.head.xflags=255&V,_.head.os=V>>8),512&_.flags&&(_e[0]=255&V,_e[1]=V>>>8&255,_.check=o(_.check,_e,2,0)),T=V=0,_.mode=5;case 5:if(1024&_.flags){for(;T<16;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.length=V,_.head&&(_.head.extra_len=V),512&_.flags&&(_e[0]=255&V,_e[1]=V>>>8&255,_.check=o(_.check,_e,2,0)),T=V=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(Y<(N=_.length)&&(N=Y),N&&(_.head&&(Z=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),s.arraySet(_.head.extra,R,Q,N,Z)),512&_.flags&&(_.check=o(_.check,R,N,Q)),Y-=N,Q+=N,_.length-=N),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(Y===0)break e;for(N=0;Z=R[Q+N++],_.head&&Z&&_.length<65536&&(_.head.name+=String.fromCharCode(Z)),Z&&N<Y;);if(512&_.flags&&(_.check=o(_.check,R,N,Q)),Y-=N,Q+=N,Z)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(Y===0)break e;for(N=0;Z=R[Q+N++],_.head&&Z&&_.length<65536&&(_.head.comment+=String.fromCharCode(Z)),Z&&N<Y;);if(512&_.flags&&(_.check=o(_.check,R,N,Q)),Y-=N,Q+=N,Z)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;T<16;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(V!==(65535&_.check)){D.msg="header crc mismatch",_.mode=30;break}T=V=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),D.adler=_.check=0,_.mode=12;break;case 10:for(;T<32;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}D.adler=_.check=w(V),T=V=0,_.mode=11;case 11:if(_.havedict===0)return D.next_out=G,D.avail_out=W,D.next_in=Q,D.avail_in=Y,_.hold=V,_.bits=T,2;D.adler=_.check=1,_.mode=12;case 12:if(F===5||F===6)break e;case 13:if(_.last){V>>>=7&T,T-=7&T,_.mode=27;break}for(;T<3;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}switch(_.last=1&V,T-=1,3&(V>>>=1)){case 0:_.mode=14;break;case 1:if(C(_),_.mode=20,F!==6)break;V>>>=2,T-=2;break e;case 2:_.mode=17;break;case 3:D.msg="invalid block type",_.mode=30}V>>>=2,T-=2;break;case 14:for(V>>>=7&T,T-=7&T;T<32;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if((65535&V)!=(V>>>16^65535)){D.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&V,T=V=0,_.mode=15,F===6)break e;case 15:_.mode=16;case 16:if(N=_.length){if(Y<N&&(N=Y),W<N&&(N=W),N===0)break e;s.arraySet(L,R,Q,N,G),Y-=N,Q+=N,W-=N,G+=N,_.length-=N;break}_.mode=12;break;case 17:for(;T<14;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(_.nlen=257+(31&V),V>>>=5,T-=5,_.ndist=1+(31&V),V>>>=5,T-=5,_.ncode=4+(15&V),V>>>=4,T-=4,286<_.nlen||30<_.ndist){D.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;T<3;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.lens[ie[_.have++]]=7&V,V>>>=3,T-=3}for(;_.have<19;)_.lens[ie[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,ye={bits:_.lenbits},ve=c(0,_.lens,0,19,_.lencode,0,_.work,ye),_.lenbits=ye.bits,ve){D.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;he=(ce=_.lencode[V&(1<<_.lenbits)-1])>>>16&255,me=65535&ce,!((fe=ce>>>24)<=T);){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(me<16)V>>>=fe,T-=fe,_.lens[_.have++]=me;else{if(me===16){for(se=fe+2;T<se;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(V>>>=fe,T-=fe,_.have===0){D.msg="invalid bit length repeat",_.mode=30;break}Z=_.lens[_.have-1],N=3+(3&V),V>>>=2,T-=2}else if(me===17){for(se=fe+3;T<se;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}T-=fe,Z=0,N=3+(7&(V>>>=fe)),V>>>=3,T-=3}else{for(se=fe+7;T<se;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}T-=fe,Z=0,N=11+(127&(V>>>=fe)),V>>>=7,T-=7}if(_.have+N>_.nlen+_.ndist){D.msg="invalid bit length repeat",_.mode=30;break}for(;N--;)_.lens[_.have++]=Z}}if(_.mode===30)break;if(_.lens[256]===0){D.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,ye={bits:_.lenbits},ve=c(u,_.lens,0,_.nlen,_.lencode,0,_.work,ye),_.lenbits=ye.bits,ve){D.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,ye={bits:_.distbits},ve=c(f,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,ye),_.distbits=ye.bits,ve){D.msg="invalid distances set",_.mode=30;break}if(_.mode=20,F===6)break e;case 20:_.mode=21;case 21:if(6<=Y&&258<=W){D.next_out=G,D.avail_out=W,D.next_in=Q,D.avail_in=Y,_.hold=V,_.bits=T,l(D,K),G=D.next_out,L=D.output,W=D.avail_out,Q=D.next_in,R=D.input,Y=D.avail_in,V=_.hold,T=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;he=(ce=_.lencode[V&(1<<_.lenbits)-1])>>>16&255,me=65535&ce,!((fe=ce>>>24)<=T);){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(he&&(240&he)==0){for(Te=fe,Re=he,de=me;he=(ce=_.lencode[de+((V&(1<<Te+Re)-1)>>Te)])>>>16&255,me=65535&ce,!(Te+(fe=ce>>>24)<=T);){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}V>>>=Te,T-=Te,_.back+=Te}if(V>>>=fe,T-=fe,_.back+=fe,_.length=me,he===0){_.mode=26;break}if(32&he){_.back=-1,_.mode=12;break}if(64&he){D.msg="invalid literal/length code",_.mode=30;break}_.extra=15&he,_.mode=22;case 22:if(_.extra){for(se=_.extra;T<se;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.length+=V&(1<<_.extra)-1,V>>>=_.extra,T-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;he=(ce=_.distcode[V&(1<<_.distbits)-1])>>>16&255,me=65535&ce,!((fe=ce>>>24)<=T);){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if((240&he)==0){for(Te=fe,Re=he,de=me;he=(ce=_.distcode[de+((V&(1<<Te+Re)-1)>>Te)])>>>16&255,me=65535&ce,!(Te+(fe=ce>>>24)<=T);){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}V>>>=Te,T-=Te,_.back+=Te}if(V>>>=fe,T-=fe,_.back+=fe,64&he){D.msg="invalid distance code",_.mode=30;break}_.offset=me,_.extra=15&he,_.mode=24;case 24:if(_.extra){for(se=_.extra;T<se;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}_.offset+=V&(1<<_.extra)-1,V>>>=_.extra,T-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){D.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(W===0)break e;if(N=K-W,_.offset>N){if((N=_.offset-N)>_.whave&&_.sane){D.msg="invalid distance too far back",_.mode=30;break}te=N>_.wnext?(N-=_.wnext,_.wsize-N):_.wnext-N,N>_.length&&(N=_.length),oe=_.window}else oe=L,te=G-_.offset,N=_.length;for(W<N&&(N=W),W-=N,_.length-=N;L[G++]=oe[te++],--N;);_.length===0&&(_.mode=21);break;case 26:if(W===0)break e;L[G++]=_.length,W--,_.mode=21;break;case 27:if(_.wrap){for(;T<32;){if(Y===0)break e;Y--,V|=R[Q++]<<T,T+=8}if(K-=W,D.total_out+=K,_.total+=K,K&&(D.adler=_.check=_.flags?o(_.check,L,K,G-K):a(_.check,L,K,G-K)),K=W,(_.flags?V:w(V))!==_.check){D.msg="incorrect data check",_.mode=30;break}T=V=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;T<32;){if(Y===0)break e;Y--,V+=R[Q++]<<T,T+=8}if(V!==(4294967295&_.total)){D.msg="incorrect length check",_.mode=30;break}T=V=0}_.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return p}return D.next_out=G,D.avail_out=W,D.next_in=Q,D.avail_in=Y,_.hold=V,_.bits=T,(_.wsize||K!==D.avail_out&&_.mode<30&&(_.mode<27||F!==4))&&P(D,D.output,D.next_out,K-D.avail_out)?(_.mode=31,-4):(H-=D.avail_in,K-=D.avail_out,D.total_in+=H,D.total_out+=K,_.total+=K,_.wrap&&K&&(D.adler=_.check=_.flags?o(_.check,L,K,D.next_out-K):a(_.check,L,K,D.next_out-K)),D.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(H==0&&K===0||F===4)&&ve===d&&(ve=-5),ve)},i.inflateEnd=function(D){if(!D||!D.state)return p;var F=D.state;return F.window&&(F.window=null),D.state=null,d},i.inflateGetHeader=function(D,F){var _;return D&&D.state?(2&(_=D.state).wrap)==0?p:((_.head=F).done=!1,d):p},i.inflateSetDictionary=function(D,F){var _,R=F.length;return D&&D.state?(_=D.state).wrap!==0&&_.mode!==11?p:_.mode===11&&a(1,F,R,0)!==_.check?-3:P(D,F,R,R)?(_.mode=31,-4):(_.havedict=1,d):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,i){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(u,f,d,p,v,m,g,w){var b,E,B,S,M,I,k,O,C,P=w.bits,D=0,F=0,_=0,R=0,L=0,Q=0,G=0,Y=0,W=0,V=0,T=null,H=0,K=new s.Buf16(16),N=new s.Buf16(16),te=null,oe=0;for(D=0;D<=15;D++)K[D]=0;for(F=0;F<p;F++)K[f[d+F]]++;for(L=P,R=15;1<=R&&K[R]===0;R--);if(R<L&&(L=R),R===0)return v[m++]=20971520,v[m++]=20971520,w.bits=1,0;for(_=1;_<R&&K[_]===0;_++);for(L<_&&(L=_),D=Y=1;D<=15;D++)if(Y<<=1,(Y-=K[D])<0)return-1;if(0<Y&&(u===0||R!==1))return-1;for(N[1]=0,D=1;D<15;D++)N[D+1]=N[D]+K[D];for(F=0;F<p;F++)f[d+F]!==0&&(g[N[f[d+F]]++]=F);if(I=u===0?(T=te=g,19):u===1?(T=a,H-=257,te=o,oe-=257,256):(T=l,te=c,-1),D=_,M=m,G=F=V=0,B=-1,S=(W=1<<(Q=L))-1,u===1&&852<W||u===2&&592<W)return 1;for(;;){for(k=D-G,C=g[F]<I?(O=0,g[F]):g[F]>I?(O=te[oe+g[F]],T[H+g[F]]):(O=96,0),b=1<<D-G,_=E=1<<Q;v[M+(V>>G)+(E-=b)]=k<<24|O<<16|C|0,E!==0;);for(b=1<<D-1;V&b;)b>>=1;if(b!==0?(V&=b-1,V+=b):V=0,F++,--K[D]==0){if(D===R)break;D=f[d+g[F]]}if(L<D&&(V&S)!==B){for(G===0&&(G=L),M+=_,Y=1<<(Q=D-G);Q+G<R&&!((Y-=K[Q+G])<=0);)Q++,Y<<=1;if(W+=1<<Q,u===1&&852<W||u===2&&592<W)return 1;v[B=V&S]=L<<24|Q<<16|M-m|0}}return V!==0&&(v[M+V]=D-G<<24|64<<16|0),w.bits=L,0}},{"../utils/common":41}],51:[function(t,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,i){var s=t("../utils/common"),a=0,o=1;function l(ce){for(var _e=ce.length;0<=--_e;)ce[_e]=0}var c=0,u=29,f=256,d=f+1+u,p=30,v=19,m=2*d+1,g=15,w=16,b=7,E=256,B=16,S=17,M=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(d+2));l(P);var D=new Array(2*p);l(D);var F=new Array(512);l(F);var _=new Array(256);l(_);var R=new Array(u);l(R);var L,Q,G,Y=new Array(p);function W(ce,_e,ie,$,ee){this.static_tree=ce,this.extra_bits=_e,this.extra_base=ie,this.elems=$,this.max_length=ee,this.has_stree=ce&&ce.length}function V(ce,_e){this.dyn_tree=ce,this.max_code=0,this.stat_desc=_e}function T(ce){return ce<256?F[ce]:F[256+(ce>>>7)]}function H(ce,_e){ce.pending_buf[ce.pending++]=255&_e,ce.pending_buf[ce.pending++]=_e>>>8&255}function K(ce,_e,ie){ce.bi_valid>w-ie?(ce.bi_buf|=_e<<ce.bi_valid&65535,H(ce,ce.bi_buf),ce.bi_buf=_e>>w-ce.bi_valid,ce.bi_valid+=ie-w):(ce.bi_buf|=_e<<ce.bi_valid&65535,ce.bi_valid+=ie)}function N(ce,_e,ie){K(ce,ie[2*_e],ie[2*_e+1])}function te(ce,_e){for(var ie=0;ie|=1&ce,ce>>>=1,ie<<=1,0<--_e;);return ie>>>1}function oe(ce,_e,ie){var $,ee,pe=new Array(g+1),xe=0;for($=1;$<=g;$++)pe[$]=xe=xe+ie[$-1]<<1;for(ee=0;ee<=_e;ee++){var be=ce[2*ee+1];be!==0&&(ce[2*ee]=te(pe[be]++,be))}}function fe(ce){var _e;for(_e=0;_e<d;_e++)ce.dyn_ltree[2*_e]=0;for(_e=0;_e<p;_e++)ce.dyn_dtree[2*_e]=0;for(_e=0;_e<v;_e++)ce.bl_tree[2*_e]=0;ce.dyn_ltree[2*E]=1,ce.opt_len=ce.static_len=0,ce.last_lit=ce.matches=0}function he(ce){8<ce.bi_valid?H(ce,ce.bi_buf):0<ce.bi_valid&&(ce.pending_buf[ce.pending++]=ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0}function me(ce,_e,ie,$){var ee=2*_e,pe=2*ie;return ce[ee]<ce[pe]||ce[ee]===ce[pe]&&$[_e]<=$[ie]}function Te(ce,_e,ie){for(var $=ce.heap[ie],ee=ie<<1;ee<=ce.heap_len&&(ee<ce.heap_len&&me(_e,ce.heap[ee+1],ce.heap[ee],ce.depth)&&ee++,!me(_e,$,ce.heap[ee],ce.depth));)ce.heap[ie]=ce.heap[ee],ie=ee,ee<<=1;ce.heap[ie]=$}function Re(ce,_e,ie){var $,ee,pe,xe,be=0;if(ce.last_lit!==0)for(;$=ce.pending_buf[ce.d_buf+2*be]<<8|ce.pending_buf[ce.d_buf+2*be+1],ee=ce.pending_buf[ce.l_buf+be],be++,$===0?N(ce,ee,_e):(N(ce,(pe=_[ee])+f+1,_e),(xe=I[pe])!==0&&K(ce,ee-=R[pe],xe),N(ce,pe=T(--$),ie),(xe=k[pe])!==0&&K(ce,$-=Y[pe],xe)),be<ce.last_lit;);N(ce,E,_e)}function de(ce,_e){var ie,$,ee,pe=_e.dyn_tree,xe=_e.stat_desc.static_tree,be=_e.stat_desc.has_stree,De=_e.stat_desc.elems,J=-1;for(ce.heap_len=0,ce.heap_max=m,ie=0;ie<De;ie++)pe[2*ie]!==0?(ce.heap[++ce.heap_len]=J=ie,ce.depth[ie]=0):pe[2*ie+1]=0;for(;ce.heap_len<2;)pe[2*(ee=ce.heap[++ce.heap_len]=J<2?++J:0)]=1,ce.depth[ee]=0,ce.opt_len--,be&&(ce.static_len-=xe[2*ee+1]);for(_e.max_code=J,ie=ce.heap_len>>1;1<=ie;ie--)Te(ce,pe,ie);for(ee=De;ie=ce.heap[1],ce.heap[1]=ce.heap[ce.heap_len--],Te(ce,pe,1),$=ce.heap[1],ce.heap[--ce.heap_max]=ie,ce.heap[--ce.heap_max]=$,pe[2*ee]=pe[2*ie]+pe[2*$],ce.depth[ee]=(ce.depth[ie]>=ce.depth[$]?ce.depth[ie]:ce.depth[$])+1,pe[2*ie+1]=pe[2*$+1]=ee,ce.heap[1]=ee++,Te(ce,pe,1),2<=ce.heap_len;);ce.heap[--ce.heap_max]=ce.heap[1],function(j,X){var re,ge,Me,Ee,We,et,Ze=X.dyn_tree,dt=X.max_code,Se=X.stat_desc.static_tree,Je=X.stat_desc.has_stree,Ve=X.stat_desc.extra_bits,je=X.stat_desc.extra_base,Ye=X.stat_desc.max_length,rt=0;for(Ee=0;Ee<=g;Ee++)j.bl_count[Ee]=0;for(Ze[2*j.heap[j.heap_max]+1]=0,re=j.heap_max+1;re<m;re++)Ye<(Ee=Ze[2*Ze[2*(ge=j.heap[re])+1]+1]+1)&&(Ee=Ye,rt++),Ze[2*ge+1]=Ee,dt<ge||(j.bl_count[Ee]++,We=0,je<=ge&&(We=Ve[ge-je]),et=Ze[2*ge],j.opt_len+=et*(Ee+We),Je&&(j.static_len+=et*(Se[2*ge+1]+We)));if(rt!==0){do{for(Ee=Ye-1;j.bl_count[Ee]===0;)Ee--;j.bl_count[Ee]--,j.bl_count[Ee+1]+=2,j.bl_count[Ye]--,rt-=2}while(0<rt);for(Ee=Ye;Ee!==0;Ee--)for(ge=j.bl_count[Ee];ge!==0;)dt<(Me=j.heap[--re])||(Ze[2*Me+1]!==Ee&&(j.opt_len+=(Ee-Ze[2*Me+1])*Ze[2*Me],Ze[2*Me+1]=Ee),ge--)}}(ce,_e),oe(pe,J,ce.bl_count)}function Z(ce,_e,ie){var $,ee,pe=-1,xe=_e[1],be=0,De=7,J=4;for(xe===0&&(De=138,J=3),_e[2*(ie+1)+1]=65535,$=0;$<=ie;$++)ee=xe,xe=_e[2*($+1)+1],++be<De&&ee===xe||(be<J?ce.bl_tree[2*ee]+=be:ee!==0?(ee!==pe&&ce.bl_tree[2*ee]++,ce.bl_tree[2*B]++):be<=10?ce.bl_tree[2*S]++:ce.bl_tree[2*M]++,pe=ee,J=(be=0)===xe?(De=138,3):ee===xe?(De=6,3):(De=7,4))}function ve(ce,_e,ie){var $,ee,pe=-1,xe=_e[1],be=0,De=7,J=4;for(xe===0&&(De=138,J=3),$=0;$<=ie;$++)if(ee=xe,xe=_e[2*($+1)+1],!(++be<De&&ee===xe)){if(be<J)for(;N(ce,ee,ce.bl_tree),--be!=0;);else ee!==0?(ee!==pe&&(N(ce,ee,ce.bl_tree),be--),N(ce,B,ce.bl_tree),K(ce,be-3,2)):be<=10?(N(ce,S,ce.bl_tree),K(ce,be-3,3)):(N(ce,M,ce.bl_tree),K(ce,be-11,7));pe=ee,J=(be=0)===xe?(De=138,3):ee===xe?(De=6,3):(De=7,4)}}l(Y);var ye=!1;function se(ce,_e,ie,$){K(ce,(c<<1)+($?1:0),3),function(ee,pe,xe,be){he(ee),H(ee,xe),H(ee,~xe),s.arraySet(ee.pending_buf,ee.window,pe,xe,ee.pending),ee.pending+=xe}(ce,_e,ie)}i._tr_init=function(ce){ye||(function(){var _e,ie,$,ee,pe,xe=new Array(g+1);for(ee=$=0;ee<u-1;ee++)for(R[ee]=$,_e=0;_e<1<<I[ee];_e++)_[$++]=ee;for(_[$-1]=ee,ee=pe=0;ee<16;ee++)for(Y[ee]=pe,_e=0;_e<1<<k[ee];_e++)F[pe++]=ee;for(pe>>=7;ee<p;ee++)for(Y[ee]=pe<<7,_e=0;_e<1<<k[ee]-7;_e++)F[256+pe++]=ee;for(ie=0;ie<=g;ie++)xe[ie]=0;for(_e=0;_e<=143;)P[2*_e+1]=8,_e++,xe[8]++;for(;_e<=255;)P[2*_e+1]=9,_e++,xe[9]++;for(;_e<=279;)P[2*_e+1]=7,_e++,xe[7]++;for(;_e<=287;)P[2*_e+1]=8,_e++,xe[8]++;for(oe(P,d+1,xe),_e=0;_e<p;_e++)D[2*_e+1]=5,D[2*_e]=te(_e,5);L=new W(P,I,f+1,d,g),Q=new W(D,k,0,p,g),G=new W(new Array(0),O,0,v,b)}(),ye=!0),ce.l_desc=new V(ce.dyn_ltree,L),ce.d_desc=new V(ce.dyn_dtree,Q),ce.bl_desc=new V(ce.bl_tree,G),ce.bi_buf=0,ce.bi_valid=0,fe(ce)},i._tr_stored_block=se,i._tr_flush_block=function(ce,_e,ie,$){var ee,pe,xe=0;0<ce.level?(ce.strm.data_type===2&&(ce.strm.data_type=function(be){var De,J=4093624447;for(De=0;De<=31;De++,J>>>=1)if(1&J&&be.dyn_ltree[2*De]!==0)return a;if(be.dyn_ltree[18]!==0||be.dyn_ltree[20]!==0||be.dyn_ltree[26]!==0)return o;for(De=32;De<f;De++)if(be.dyn_ltree[2*De]!==0)return o;return a}(ce)),de(ce,ce.l_desc),de(ce,ce.d_desc),xe=function(be){var De;for(Z(be,be.dyn_ltree,be.l_desc.max_code),Z(be,be.dyn_dtree,be.d_desc.max_code),de(be,be.bl_desc),De=v-1;3<=De&&be.bl_tree[2*C[De]+1]===0;De--);return be.opt_len+=3*(De+1)+5+5+4,De}(ce),ee=ce.opt_len+3+7>>>3,(pe=ce.static_len+3+7>>>3)<=ee&&(ee=pe)):ee=pe=ie+5,ie+4<=ee&&_e!==-1?se(ce,_e,ie,$):ce.strategy===4||pe===ee?(K(ce,2+($?1:0),3),Re(ce,P,D)):(K(ce,4+($?1:0),3),function(be,De,J,j){var X;for(K(be,De-257,5),K(be,J-1,5),K(be,j-4,4),X=0;X<j;X++)K(be,be.bl_tree[2*C[X]+1],3);ve(be,be.dyn_ltree,De-1),ve(be,be.dyn_dtree,J-1)}(ce,ce.l_desc.max_code+1,ce.d_desc.max_code+1,xe+1),Re(ce,ce.dyn_ltree,ce.dyn_dtree)),fe(ce),$&&he(ce)},i._tr_tally=function(ce,_e,ie){return ce.pending_buf[ce.d_buf+2*ce.last_lit]=_e>>>8&255,ce.pending_buf[ce.d_buf+2*ce.last_lit+1]=255&_e,ce.pending_buf[ce.l_buf+ce.last_lit]=255&ie,ce.last_lit++,_e===0?ce.dyn_ltree[2*ie]++:(ce.matches++,_e--,ce.dyn_ltree[2*(_[ie]+f+1)]++,ce.dyn_dtree[2*T(_e)]++),ce.last_lit===ce.lit_bufsize-1},i._tr_align=function(ce){K(ce,2,3),N(ce,E,P),function(_e){_e.bi_valid===16?(H(_e,_e.bi_buf),_e.bi_buf=0,_e.bi_valid=0):8<=_e.bi_valid&&(_e.pending_buf[_e.pending++]=255&_e.bi_buf,_e.bi_buf>>=8,_e.bi_valid-=8)}(ce)}},{"../utils/common":41}],53:[function(t,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,i){(function(s){(function(a,o){if(!a.setImmediate){var l,c,u,f,d=1,p={},v=!1,m=a.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(a);g=g&&g.setTimeout?g:a,l={}.toString.call(a.process)==="[object process]"?function(B){process.nextTick(function(){b(B)})}:function(){if(a.postMessage&&!a.importScripts){var B=!0,S=a.onmessage;return a.onmessage=function(){B=!1},a.postMessage("","*"),a.onmessage=S,B}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function(B){a.postMessage(f+B,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(B){b(B.data)},function(B){u.port2.postMessage(B)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(B){var S=m.createElement("script");S.onreadystatechange=function(){b(B),S.onreadystatechange=null,c.removeChild(S),S=null},c.appendChild(S)}):function(B){setTimeout(b,0,B)},g.setImmediate=function(B){typeof B!="function"&&(B=new Function(""+B));for(var S=new Array(arguments.length-1),M=0;M<S.length;M++)S[M]=arguments[M+1];var I={callback:B,args:S};return p[d]=I,l(d),d++},g.clearImmediate=w}function w(B){delete p[B]}function b(B){if(v)setTimeout(b,0,B);else{var S=p[B];if(S){v=!0;try{(function(M){var I=M.callback,k=M.args;switch(k.length){case 0:I();break;case 1:I(k[0]);break;case 2:I(k[0],k[1]);break;case 3:I(k[0],k[1],k[2]);break;default:I.apply(o,k)}})(S)}finally{w(B),v=!1}}}}function E(B){B.source===a&&typeof B.data=="string"&&B.data.indexOf(f)===0&&b(+B.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(RR)),RR.exports}var aRe=sRe();const oRe=na(aRe);class Jm{constructor(){this.zipContainer={}}addData(e,t,n,i=""){i==""&&(i="_"),this.zipContainer[i]==null&&(this.zipContainer[i]=[]),this.zipContainer[i].push({data:e,name:t,extension:n})}saveZip(e,t=!0){const n=this.zipContainer,i=new oRe;for(const s in n)if(s=="_")n[s].forEach((a,o)=>{i.file(a.name+"."+a.extension,a.data,{base64:!0})});else{const a=i.folder(s);n[s].forEach((o,l)=>{const c=o.extension!="txt";a.file(o.name+"."+o.extension,o.data,{base64:c})})}i.generateAsync({type:"blob"}).then(s=>{this._saveZipFile(s,e+".zip")}),t&&(this.zipContainer={})}_saveZipFile(e,t){const n=new Blob([e],{type:"application/zip"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(n,t);else{const i=document.createElement("a");typeof i.download=="string"?(document.body.appendChild(i),i.download=t,i.href=URL.createObjectURL(n),i.click(),document.body.removeChild(i)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}}class lRe{screenshotManager;constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager,this.temptime=0}get vrms(){return Object.values(this.characterManager.avatar).map(e=>e.vrm)}async createLoraData(e,t=null,n=""){const i=e.manifest,s=e.name?"loraData/"+e.name:"loraData",a=await this._fetchManifest(i),{assetsLocation:o="",animationsDirectory:l="",backgroundGrayscale:c=1,backgroundDescription:u="",width:f=512,height:d=512,dataCollection:p}=a,v=o+l+"/";this.screenshotManager.setBackground([c,c,c]),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let m=0;const g=this;if(Array.isArray(p)){const w=t??new Jm;await(async()=>{if(Array.isArray(p))for(let E=0;E<p.length;E++){const{animationPath:B,animationTime:S=0,animationFrame:M,cameraPosition:I,cameraFrame:k,description:O}=p[E];m++;const C=m.toString().padStart(4,"0"),P=M?M/30:S;await g.animationManager.loadAnimation(v+B,!0,P),this.vrms.forEach(_=>{_.springBoneManager?.reset()});const D=zO(I);g.screenshotManager.cameraFrameManager.setCameraFrameWithName(k,D);const F=g.screenshotManager.getImageData(f,d,!1);w.addData(F,C,"png",s),w.addData("anata "+O+" "+u,C,"txt",s)}})(),t==null&&(n==""&&(n="lora_zip"),w.saveZip(n))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class cRe{screenshotManager;constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createSpriteAtlas(e,t=null,n=""){const i=e.manifest,s=e.name?"spriteData/"+e.name:"spriteData",a=await this._fetchManifest(i),{assetsLocation:o="",animationsDirectory:l="",backgroundColor:c=[1,1,1,1],screenshotOffset:u,topFrameOffset:f=.1,bottomFrameOffset:d=.1,pixelStyleSize:p,atlasWidth:v=512,atlasHeight:m=512,spritesCollection:g}=a,w=o+l+"/";this.screenshotManager.cameraFrameManager.setBottomFrameOffset(d),this.screenshotManager.cameraFrameManager.setTopFrameOffset(f),this.screenshotManager.setBackground(c),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let b=0;const E=this;if(Array.isArray(g)){const B=t??new Jm;await(async()=>{if(Array.isArray(g))for(const M of g){const{animationName:I,animationPath:k,framesNumber:O,lookAtCamera:C,expression:P,cameraPosition:D,cameraFrame:F}=M;b++;const _=s+"/"+(I||b.toString().padStart(2,"0"));await E.animationManager.loadAnimation(w+k,!0,0);const R=zO(D);E.screenshotManager.cameraFrameManager.setCameraFrameWithName(F,R);const Q=E.animationManager.getCurrentClipDuration()/O;for(let G=0;G<O;G++){E.animationManager.setTime(G*Q);const Y=E.screenshotManager.getImageData(v,m,p);B.addData(Y,G.toString().padStart(2,"0"),"png",_)}}})(),t==null&&(n==""&&(n="sprites_zip"),B.saveZip(n))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class uRe{screenshotManager;constructor(e){this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createThumbnailsWithObjectData(e,t=!0,n=null,i=""){const{assetsLocation:s="",poseAnimation:a="",animationFrame:o,animationTime:l,backgroundColor:c=[1,1,1,0],screenshotOffset:u,topFrameOffset:f=.1,bottomFrameOffset:d=.1,thumbnailsWidth:p=128,thumbnailsHeight:v=128,thumbnailsCollection:m}=e,g=s+"/";let w=o||0;l!=null&&(w=l*30),t&&await this.animationManager.loadAnimation(g+a,!0,w),this.screenshotManager.cameraFrameManager.setBottomFrameOffset(d),this.screenshotManager.cameraFrameManager.setTopFrameOffset(f),this.screenshotManager.setBackground(c),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);const b=this;if(Array.isArray(m)){const E=n??new Jm;let B=!1;await(async()=>{for(const M of m){const{traitGroup:I,cameraPosition:k="front",bottomBoneName:O,bottomBoneMaxVertex:C=!1,topBoneName:P,topBoneMaxVertex:D=!0,groupTopOffset:F,groupBotomOffset:_,cameraFrame:R,saveOnlyIDs:L}=M;if((!O||!P)&&(R||console.warn("missing bonename info or camera frame. Skipping")),!I){console.warn("missing trait group for thumbnail info. Skipping");continue}const Q=()=>{const W=[];return Mt(L).forEach(T=>{W.push({id:T})}),W},G=L==null?b.characterManager.getTraits(I):Q();if(G==null){console.log("SKipping Thumbnail Generation for trait group "+I+", its not present in the character manifest.");continue}const Y=zO(k);R?b.screenshotManager.cameraFrameManager.setCameraFrameWithName(R,Y):b.screenshotManager.cameraFrameManager.frameShot(O,P,Y,C,D);for(let W=0;W<G.length;W++){const V=G[W].id,T=G[W].collectionID;let H=V;if(G[W].fullDirectory!=null){const K=G[W].fullDirectory.split("/");H=K[K.length-1].split(".")[0]}if(await b.characterManager.loadTrait(I,V,T,!0),m.length==1&&G.length==1)B=!0,b.screenshotManager.saveScreenshot(H,p,v);else{const K=b.screenshotManager.getImageData(p,v);E.addData(K,H,"png",I)}}}})(),n==null&&B==!1&&(i==""&&(i="thumbnails_zip"),E.saveZip(i))}this.blinkManager.disableScreenshot()}async createThumbnails(e,t=null,n=""){const i=e.manifest,s=await this._fetchManifest(i);await this.createThumbnailsWithObjectData(s,!0,t,n)}async _fetchManifest(e){return await(await fetch(e)).json()}}const Er=we.createContext({characterManager:null,moveCamera:r=>{}}),ARe=r=>{const[e,t]=we.useState(null),[n,i]=we.useState(null),[s,a]=we.useState(null),[o,l]=we.useState(null),[c,u]=we.useState(null),[f,d]=we.useState(null),[p,v]=we.useState(null),[m,g]=we.useState(null),[w,b]=we.useState(null),[E,B]=we.useState(null),[S,M]=we.useState(null),[I,k]=we.useState(null),[O,C]=we.useState(!1);let P=!1,[D,F]=we.useState(!1);we.useEffect(()=>{if(P||D)return;F(!0),P=!0;const{scene:Q,camera:G,controls:Y,characterManager:W,sceneElements:V}=iRe("editor-scene");B(G),b(Q),t(W),d(V),v(W.animationManager),g(W.lookAtManager),l(W.overlayedTextureManager),M(Y),i(new lRe(W)),a(new cRe(W)),u(new uRe(W))},[]);const _=Q=>{Q==null&&(Q=!O),C(Q),w.traverse(G=>{G.isMesh&&G.setDebugMode&&G.setDebugMode(Q)})};we.useEffect(()=>{if(I!=null&&I.defaultAnimations){const Q=I.defaultAnimations.map(G=>G.location);p.storeDefaultAnimationPaths(Q,"")}},[I]);const R=Q=>{Q?w.add(f):w.remove(f)},L=Q=>{S&&(pF.to(S.target,{x:Q.targetX??0,y:Q.targetY??0,z:Q.targetZ??0,duration:1}),pF.fromTo(S,{maxDistance:S.getDistance(),minDistance:S.getDistance(),minPolarAngle:S.getPolarAngle(),maxPolarAngle:S.getPolarAngle(),minAzimuthAngle:S.getAzimuthalAngle(),maxAzimuthAngle:S.getAzimuthalAngle()},{maxDistance:Q.distance,minDistance:Q.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{S.minPolarAngle=0,S.maxPolarAngle=3.1415,S.minDistance=.5,S.maxDistance=10,S.minAzimuthAngle=1/0,S.maxAzimuthAngle=1/0}))};return q.jsx(Er.Provider,{value:{manifest:I,setManifest:k,scene:w,decalManager:o,characterManager:e,loraDataGenerator:n,spriteAtlasGenerator:s,thumbnailsGenerator:c,showEnvironmentModels:R,debugMode:O,toggleDebugMode:_,animationManager:p,lookAtManager:m,camera:E,moveCamera:L,controls:S,sceneElements:f},children:r.children})},fRe={NORMAL:"NORMAL"},rn={LANDING:"LANDING",CREATE:"CREATE",CLAIM:"CLAIM",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BATCHDOWNLOAD:"BATCHDOWNLOAD",SAVE:"SAVE",MINT:"MINT",OPTIMIZER:"OPTIMIZER",BATCHMANIFEST:"BATCHMANIFEST",WALLET:"WALLET"},Ta=le.createContext(),hRe=r=>{const[e,t]=le.useState(fRe.NORMAL),[n,i]=le.useState(rn.LANDING),[s,a]=le.useState(!1),[o,l]=le.useState(!1);return q.jsx(Ta.Provider,{value:{viewMode:n,setViewMode:i,isLoading:s,setIsLoading:a,mouseIsOverUI:o,setMouseIsOverUI:l,currentCameraMode:e,setCurrentCameraMode:t},children:r.children})},dRe="modulepreload",pRe=function(r){return"/"+r},AV={},mRe=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(c=>{if(c=pRe(c),c in AV)return;AV[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":dRe,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((p,v)=>{d.addEventListener("load",p),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function H1(){return H1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},H1.apply(null,arguments)}function gRe(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function vRe(r){we.useEffect(r,[])}var yRe=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function wRe(r,e){var t=e===void 0?{}:e,n=t.volume,i=n===void 0?1:n,s=t.playbackRate,a=s===void 0?1:s,o=t.soundEnabled,l=o===void 0?!0:o,c=t.interrupt,u=c===void 0?!1:c,f=t.onload,d=gRe(t,yRe),p=le.useRef(null),v=le.useRef(!1),m=le.useState(null),g=m[0],w=m[1],b=le.useState(null),E=b[0],B=b[1],S=function(){typeof f=="function"&&f.call(this),v.current&&w(this.duration()*1e3),B(this)};vRe(function(){return mRe(()=>import("./howler-Cqc8jTfK.js").then(C=>C.h),[]).then(function(C){if(!v.current){var P;p.current=(P=C.Howl)!==null&&P!==void 0?P:C.default.Howl,v.current=!0,new p.current(H1({src:Array.isArray(r)?r:[r],volume:i,rate:a,onload:S},d))}}),function(){v.current=!1}}),le.useEffect(function(){p.current&&E&&B(new p.current(H1({src:Array.isArray(r)?r:[r],volume:i,onload:S},d)))},[JSON.stringify(r)]),le.useEffect(function(){E&&(E.volume(i),d.sprite||E.rate(a))},[E,i,a]);var M=le.useCallback(function(C){typeof C>"u"&&(C={}),!(!E||!l&&!C.forceSoundEnabled)&&(u&&E.stop(),C.playbackRate&&E.rate(C.playbackRate),E.play(C.id))},[E,l,u]),I=le.useCallback(function(C){E&&E.stop(C)},[E]),k=le.useCallback(function(C){E&&E.pause(C)},[E]),O=[M,{sound:E,stop:I,pause:k,duration:g}];return O}const _Re=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],xRe="/assets/sounds-C7I4r9ze.mp3",Yo=we.createContext(),bRe=r=>{const e=i=>_Re.find(s=>i.test(s.name)),[t]=wRe(xRe,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),n=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return q.jsx(Yo.Provider,{value:{playSound:n},children:r.children})};function Ba(r){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(r)}function uo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ERe(r,e){if(Ba(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ba(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gJ(r){var e=ERe(r,"string");return Ba(e)=="symbol"?e:e+""}function fV(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,gJ(n.key),n)}}function Ao(r,e,t){return e&&fV(r.prototype,e),t&&fV(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function qA(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function aD(r,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},aD(r,e)}function Py(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&aD(r,e)}function $m(r,e){if(e&&(Ba(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qA(r)}function Go(r){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Go(r)}function ea(r,e,t){return(e=gJ(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vJ(r){if(Array.isArray(r))return r}function yJ(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function oD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function aN(r,e){if(r){if(typeof r=="string")return oD(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oD(r,e):void 0}}function wJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SRe(r){return vJ(r)||yJ(r)||aN(r)||wJ()}function hV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var BRe={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},MRe=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uo(this,r),this.init(e,t)}return Ao(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||BRe,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new r(this.logger,dV(dV({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new r(this.logger,t)}}]),r}(),rc=new MRe,nf=function(){function r(){uo(this,r),this.observers={}}return Ao(r,[{key:"on",value:function(t,n){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(n)}),this}},{key:"off",value:function(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(this.observers[t]){var a=[].concat(this.observers[t]);a.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(l){l.apply(l,[t].concat(i))})}}}]),r}();function k0(){var r,e,t=new Promise(function(n,i){r=n,e=i});return t.resolve=r,t.reject=e,t}function pV(r){return r==null?"":""+r}function CRe(r,e,t){r.forEach(function(n){e[n]&&(t[n]=e[n])})}function oN(r,e,t){function n(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function i(){return!r||typeof r=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var a=n(s.shift());!r[a]&&t&&(r[a]=new t),Object.prototype.hasOwnProperty.call(r,a)?r=r[a]:r={}}return i()?{}:{obj:r,k:n(s.shift())}}function mV(r,e,t){var n=oN(r,e,Object),i=n.obj,s=n.k;i[s]=t}function TRe(r,e,t,n){var i=oN(r,e,Object),s=i.obj,a=i.k;s[a]=s[a]||[],s[a].push(t)}function Q1(r,e){var t=oN(r,e),n=t.obj,i=t.k;if(n)return n[i]}function RRe(r,e,t){var n=Q1(r,t);return n!==void 0?n:Q1(e,t)}function _J(r,e,t){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in r?typeof r[n]=="string"||r[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?t&&(r[n]=e[n]):_J(r[n],e[n],t):r[n]=e[n]);return r}function np(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var IRe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function URe(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,function(e){return IRe[e]}):r}var iS=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,FRe=[" ",",","?","!",";"];function LRe(r,e,t){e=e||"",t=t||"";var n=FRe.filter(function(o){return e.indexOf(o)<0&&t.indexOf(o)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(o){return o==="?"?"\\?":o}).join("|"),")")),s=!i.test(r);if(!s){var a=r.indexOf(t);a>0&&!i.test(r.substring(0,a))&&(s=!0)}return s}function z1(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(r){if(r[e])return r[e];for(var n=e.split(t),i=r,s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){for(var a=2,o=n.slice(s,s+a).join(t),l=i[o];l===void 0&&n.length>s+a;)a++,o=n.slice(s,s+a).join(t),l=i[o];if(l===void 0)return;if(l===null)return null;if(e.endsWith(o)){if(typeof l=="string")return l;if(o&&typeof l[o]=="string")return l[o]}var c=n.slice(s+a).join(t);return c?z1(l,c,t):void 0}i=i[n[s]]}return i}}function gV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function kx(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function DRe(r){var e=ORe();return function(){var n=Go(r),i;if(e){var s=Go(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $m(this,i)}}function ORe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var NRe=function(r){Py(t,r);var e=DRe(t);function t(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return uo(this,t),i=e.call(this),iS&&nf.call(qA(i)),i.data=n||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ao(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,c=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[i,s];a&&typeof a!="string"&&(u=u.concat(a)),a&&typeof a=="string"&&(u=u.concat(l?a.split(l):a)),i.indexOf(".")>-1&&(u=i.split("."));var f=Q1(this.data,u);return f||!c||typeof a!="string"?f:z1(this.data&&this.data[i]&&this.data[i][s],a,l)}},{key:"addResource",value:function(i,s,a,o){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,u=[i,s];a&&(u=u.concat(c?a.split(c):a)),i.indexOf(".")>-1&&(u=i.split("."),o=s,s=u[1]),this.addNamespaces(s),mV(this.data,u,o),l.silent||this.emit("added",i,s,a,o)}},{key:"addResources",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in a)(typeof a[l]=="string"||Object.prototype.toString.apply(a[l])==="[object Array]")&&this.addResource(i,s,l,a[l],{silent:!0});o.silent||this.emit("added",i,s,a)}},{key:"addResourceBundle",value:function(i,s,a,o,l){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[i,s];i.indexOf(".")>-1&&(u=i.split("."),o=a,a=s,s=u[1]),this.addNamespaces(s);var f=Q1(this.data,u)||{};o?_J(f,a,l):f=kx(kx({},f),a),mV(this.data,u,f),c.silent||this.emit("added",i,s,a)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?kx(kx({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),a=s&&Object.keys(s)||[];return!!a.find(function(o){return s[o]&&Object.keys(s[o]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(nf),xJ={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,i,s){var a=this;return e.forEach(function(o){a.processors[o]&&(t=a.processors[o].process(t,n,i,s))}),t}};function vV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Us(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function PRe(r){var e=kRe();return function(){var n=Go(r),i;if(e){var s=Go(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $m(this,i)}}function kRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yV={},wV=function(r){Py(t,r);var e=PRe(t);function t(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return uo(this,t),i=e.call(this),iS&&nf.call(qA(i)),CRe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,qA(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=rc.create("translator"),i}return Ao(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var a=this.resolve(i,s);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(i,s){var a=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ns||this.options.defaultNS||[],c=a&&i.indexOf(a)>-1,u=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!LRe(i,a,o);if(c&&!u){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:l};var d=i.split(a);(a!==o||a===o&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),i=d.join(o)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,s,a){var o=this;if(Ba(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),Ba(s)==="object"&&(s=Us({},s)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,c=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=this.extractFromKey(i[i.length-1],s),f=u.key,d=u.namespaces,p=d[d.length-1],v=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v&&v.toLowerCase()==="cimode"){if(m){var g=s.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(p).concat(g).concat(f),usedKey:f,exactUsedKey:f,usedLng:v,usedNS:p}:"".concat(p).concat(g).concat(f)}return l?{res:f,usedKey:f,exactUsedKey:f,usedLng:v,usedNS:p}:f}var w=this.resolve(i,s),b=w&&w.res,E=w&&w.usedKey||f,B=w&&w.exactUsedKey||f,S=Object.prototype.toString.apply(b),M=["[object Number]","[object Function]","[object RegExp]"],I=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,O=typeof b!="string"&&typeof b!="boolean"&&typeof b!="number";if(k&&b&&O&&M.indexOf(S)<0&&!(typeof I=="string"&&S==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(E,b,Us(Us({},s),{},{ns:d})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return l?(w.res=C,w):C}if(c){var P=S==="[object Array]",D=P?[]:{},F=P?B:E;for(var _ in b)if(Object.prototype.hasOwnProperty.call(b,_)){var R="".concat(F).concat(c).concat(_);D[_]=this.translate(R,Us(Us({},s),{joinArrays:!1,ns:d})),D[_]===R&&(D[_]=b[_])}b=D}}else if(k&&typeof I=="string"&&S==="[object Array]")b=b.join(I),b&&(b=this.extendTranslation(b,i,s,a));else{var L=!1,Q=!1,G=s.count!==void 0&&typeof s.count!="string",Y=t.hasDefaultValue(s),W=G?this.pluralResolver.getSuffix(v,s.count,s):"",V=s["defaultValue".concat(W)]||s.defaultValue;!this.isValidLookup(b)&&Y&&(L=!0,b=V),this.isValidLookup(b)||(Q=!0,b=f);var T=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,H=T&&Q?void 0:b,K=Y&&V!==b&&this.options.updateMissing;if(Q||L||K){if(this.logger.log(K?"updateKey":"missingKey",v,p,f,K?V:b),c){var N=this.resolve(f,Us(Us({},s),{},{keySeparator:!1}));N&&N.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var te=[],oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&oe&&oe[0])for(var fe=0;fe<oe.length;fe++)te.push(oe[fe]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(s.lng||this.language):te.push(s.lng||this.language);var he=function(Te,Re,de){var Z=Y&&de!==b?de:H;o.options.missingKeyHandler?o.options.missingKeyHandler(Te,p,Re,Z,K,s):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(Te,p,Re,Z,K,s),o.emit("missingKey",Te,p,Re,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&G?te.forEach(function(me){o.pluralResolver.getSuffixes(me,s).forEach(function(Te){he([me],f+Te,s["defaultValue".concat(Te)]||V)})}):he(te,f,V))}b=this.extendTranslation(b,i,s,w,a),Q&&b===f&&this.options.appendNamespaceToMissingKey&&(b="".concat(p,":").concat(f)),(Q||L)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(p,":").concat(f):f,L?b:void 0):b=this.options.parseMissingKeyHandler(b))}return l?(w.res=b,w):b}},{key:"extendTranslation",value:function(i,s,a,o,l){var c=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,Us(Us({},this.options.interpolation.defaultVariables),a),o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(Us(Us({},a),{interpolation:Us(Us({},this.options.interpolation),a.interpolation)}));var u=typeof i=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(u){var d=i.match(this.interpolator.nestingRegexp);f=d&&d.length}var p=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(p=Us(Us({},this.options.interpolation.defaultVariables),p)),i=this.interpolator.interpolate(i,p,a.lng||this.language,a),u){var v=i.match(this.interpolator.nestingRegexp),m=v&&v.length;f<m&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(a.lng=o.usedLng),a.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var b=arguments.length,E=new Array(b),B=0;B<b;B++)E[B]=arguments[B];return l&&l[0]===E[0]&&!a.context?(c.logger.warn("It seems you are nesting recursively key: ".concat(E[0]," in key: ").concat(s[0])),null):c.translate.apply(c,E.concat([s]))},a)),a.interpolation&&this.interpolator.reset()}var g=a.postProcess||this.options.postProcess,w=typeof g=="string"?[g]:g;return i!=null&&w&&w.length&&a.applyPostProcessor!==!1&&(i=xJ.handle(w,i,s,this.options&&this.options.postProcessPassResolved?Us({i18nResolved:o},a):a,this)),i}},{key:"resolve",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,l,c,u,f;return typeof i=="string"&&(i=[i]),i.forEach(function(d){if(!s.isValidLookup(o)){var p=s.extractFromKey(d,a),v=p.key;l=v;var m=p.namespaces;s.options.fallbackNS&&(m=m.concat(s.options.fallbackNS));var g=a.count!==void 0&&typeof a.count!="string",w=g&&!a.ordinal&&a.count===0&&s.pluralResolver.shouldUseIntlApi(),b=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",E=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);m.forEach(function(B){s.isValidLookup(o)||(f=B,!yV["".concat(E[0],"-").concat(B)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(f)&&(yV["".concat(E[0],"-").concat(B)]=!0,s.logger.warn('key "'.concat(l,'" for languages "').concat(E.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),E.forEach(function(S){if(!s.isValidLookup(o)){u=S;var M=[v];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(M,v,S,B,a);else{var I;g&&(I=s.pluralResolver.getSuffix(S,a.count,a));var k="".concat(s.options.pluralSeparator,"zero");if(g&&(M.push(v+I),w&&M.push(v+k)),b){var O="".concat(v).concat(s.options.contextSeparator).concat(a.context);M.push(O),g&&(M.push(O+I),w&&M.push(O+k))}}for(var C;C=M.pop();)s.isValidLookup(o)||(c=C,o=s.getResource(S,B,C,a))}}))})}}),{res:o,usedKey:l,exactUsedKey:c,usedLng:u,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,a,o):this.resourceStore.getResource(i,s,a,o)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)&&s===a.substring(0,s.length)&&i[a]!==void 0)return!0;return!1}}]),t}(nf);function IR(r){return r.charAt(0).toUpperCase()+r.slice(1)}var _V=function(){function r(e){uo(this,r),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=rc.create("languageUtils")}return Ao(r,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=IR(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=IR(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=IR(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var a=n.formatLanguageCode(s);(!n.options.supportedLngs||n.isSupportedCode(a))&&(i=a)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var a=n.getLanguagePartFromCode(s);if(n.isSupportedCode(a))return i=a;i=n.options.supportedLngs.find(function(o){if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&o.indexOf(a)===0)return o})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var i=t[n];return i||(i=t[this.getScriptPartFromCode(n)]),i||(i=t[this.formatLanguageCode(n)]),i||(i=t[this.getLanguagePartFromCode(n)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,n){var i=this,s=this.getFallbackCodes(n||this.options.fallbackLng||[],t),a=[],o=function(c){c&&(i.isSupportedCode(c)?a.push(c):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),s.forEach(function(l){a.indexOf(l)<0&&o(i.formatLanguageCode(l))}),a}}]),r}(),HRe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],QRe={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},zRe=["v1","v2","v3"],xV={zero:0,one:1,two:2,few:3,many:4,other:5};function VRe(){var r={};return HRe.forEach(function(e){e.lngs.forEach(function(t){r[t]={numbers:e.nr,plurals:QRe[e.fc]}})}),r}var GRe=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uo(this,r),this.languageUtils=e,this.options=t,this.logger=rc.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=VRe()}return Ao(r,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(n).concat(s)})}},{key:"getSuffixes",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(a,o){return xV[a]-xV[o]}).map(function(a){return"".concat(n.options.prepend).concat(a)}):s.numbers.map(function(a){return n.getSuffix(t,a,i)}):[]}},{key:"getSuffix",value:function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(n)):this.getSuffixRetroCompatible(s,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var i=this,s=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),a=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var o=function(){return i.options.prepend&&a.toString()?i.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!zRe.includes(this.options.compatibilityJSON)}}]),r}();function bV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function il(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function EV(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=RRe(r,e,t);return!s&&i&&typeof t=="string"&&(s=z1(r,t,n),s===void 0&&(s=z1(e,t,n))),s}var jRe=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};uo(this,r),this.logger=rc.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Ao(r,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:URe,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?np(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?np(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?np(n.nestingPrefix):n.nestingPrefixEscaped||np("$t("),this.nestingSuffix=n.nestingSuffix?np(n.nestingSuffix):n.nestingSuffixEscaped||np(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,n,i,s){var a=this,o,l,c,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(g){return g.replace(/\$/g,"$$$$")}var d=function(w){if(w.indexOf(a.formatSeparator)<0){var b=EV(n,u,w,a.options.keySeparator,a.options.ignoreJSONStructure);return a.alwaysFormat?a.format(b,void 0,i,il(il(il({},s),n),{},{interpolationkey:w})):b}var E=w.split(a.formatSeparator),B=E.shift().trim(),S=E.join(a.formatSeparator).trim();return a.format(EV(n,u,B,a.options.keySeparator,a.options.ignoreJSONStructure),S,i,il(il(il({},s),n),{},{interpolationkey:B}))};this.resetRegExp();var p=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,m=[{regex:this.regexpUnescape,safeValue:function(w){return f(w)}},{regex:this.regexp,safeValue:function(w){return a.escapeValue?f(a.escape(w)):f(w)}}];return m.forEach(function(g){for(c=0;o=g.regex.exec(t);){var w=o[1].trim();if(l=d(w),l===void 0)if(typeof p=="function"){var b=p(t,o,s);l=typeof b=="string"?b:""}else if(s&&Object.prototype.hasOwnProperty.call(s,w))l="";else if(v){l=o[0];continue}else a.logger.warn("missed to pass in variable ".concat(w," for interpolating ").concat(t)),l="";else typeof l!="string"&&!a.useRawValueToEscape&&(l=pV(l));var E=g.safeValue(l);if(t=t.replace(o[0],E),v?(g.regex.lastIndex+=l.length,g.regex.lastIndex-=o[0].length):g.regex.lastIndex=0,c++,c>=a.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,l;function c(p,v){var m=this.nestingOptionsSeparator;if(p.indexOf(m)<0)return p;var g=p.split(new RegExp("".concat(m,"[ ]*{"))),w="{".concat(g[1]);p=g[0],w=this.interpolate(w,l);var b=w.match(/'/g),E=w.match(/"/g);(b&&b.length%2===0&&!E||E.length%2!==0)&&(w=w.replace(/'/g,'"'));try{l=JSON.parse(w),v&&(l=il(il({},v),l))}catch(B){return this.logger.warn("failed parsing options string in nesting for key ".concat(p),B),"".concat(p).concat(m).concat(w)}return delete l.defaultValue,p}for(;a=this.nestingRegexp.exec(t);){var u=[];l=il({},s),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var f=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var d=a[1].split(this.formatSeparator).map(function(p){return p.trim()});a[1]=d.shift(),u=d,f=!0}if(o=n(c.call(this,a[1].trim(),l),l),o&&a[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=pV(o)),o||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(t)),o=""),f&&(o=u.reduce(function(p,v){return i.format(p,v,s.lng,il(il({},s),{},{interpolationkey:a[1].trim()}))},o.trim())),t=t.replace(a[0],o),this.regexp.lastIndex=0}return t}}]),r}();function SV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):SV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function WRe(r){var e=r.toLowerCase().trim(),t={};if(r.indexOf("(")>-1){var n=r.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(a){if(a){var o=a.split(":"),l=SRe(o),c=l[0],u=l.slice(1),f=u.join(":").trim().replace(/^'+|'+$/g,"");t[c.trim()]||(t[c.trim()]=f),f==="false"&&(t[c.trim()]=!1),f==="true"&&(t[c.trim()]=!0),isNaN(f)||(t[c.trim()]=parseInt(f,10))}})}}return{formatName:e,formatOptions:t}}function rp(r){var e={};return function(n,i,s){var a=i+JSON.stringify(s),o=e[a];return o||(o=r(i,s),e[a]=o),o(n)}}var KRe=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};uo(this,r),this.logger=rc.create("formatter"),this.options=e,this.formats={number:rp(function(t,n){var i=new Intl.NumberFormat(t,qc({},n));return function(s){return i.format(s)}}),currency:rp(function(t,n){var i=new Intl.NumberFormat(t,qc(qc({},n),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:rp(function(t,n){var i=new Intl.DateTimeFormat(t,qc({},n));return function(s){return i.format(s)}}),relativetime:rp(function(t,n){var i=new Intl.RelativeTimeFormat(t,qc({},n));return function(s){return i.format(s,n.range||"day")}}),list:rp(function(t,n){var i=new Intl.ListFormat(t,qc({},n));return function(s){return i.format(s)}})},this.init(e)}return Ao(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=rp(n)}},{key:"format",value:function(t,n,i){var s=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=n.split(this.formatSeparator),l=o.reduce(function(c,u){var f=WRe(u),d=f.formatName,p=f.formatOptions;if(s.formats[d]){var v=c;try{var m=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},g=m.locale||m.lng||a.locale||a.lng||i;v=s.formats[d](c,g,qc(qc(qc({},p),a),m))}catch(w){s.logger.warn(w)}return v}else s.logger.warn("there was no format function for ".concat(d));return c},t);return l}}]),r}();function BV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function MV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):BV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qRe(r){var e=YRe();return function(){var n=Go(r),i;if(e){var s=Go(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $m(this,i)}}function YRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function XRe(r,e){r.pending[e]!==void 0&&(delete r.pending[e],r.pendingCount--)}var ZRe=function(r){Py(t,r);var e=qRe(t);function t(n,i,s){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return uo(this,t),a=e.call(this),iS&&nf.call(qA(a)),a.backend=n,a.store=i,a.services=s,a.languageUtils=s.languageUtils,a.options=o,a.logger=rc.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(s,o.backend,o),a}return Ao(t,[{key:"queueLoad",value:function(i,s,a,o){var l=this,c={},u={},f={},d={};return i.forEach(function(p){var v=!0;s.forEach(function(m){var g="".concat(p,"|").concat(m);!a.reload&&l.store.hasResourceBundle(p,m)?l.state[g]=2:l.state[g]<0||(l.state[g]===1?u[g]===void 0&&(u[g]=!0):(l.state[g]=1,v=!1,u[g]===void 0&&(u[g]=!0),c[g]===void 0&&(c[g]=!0),d[m]===void 0&&(d[m]=!0)))}),v||(f[p]=!0)}),(Object.keys(c).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(c),pending:Object.keys(u),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(d)}}},{key:"loaded",value:function(i,s,a){var o=i.split("|"),l=o[0],c=o[1];s&&this.emit("failedLoading",l,c,s),a&&this.store.addResourceBundle(l,c,a),this.state[i]=s?-1:2;var u={};this.queue.forEach(function(f){TRe(f.loaded,[l],c),XRe(f,i),s&&f.errors.push(s),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(d){u[d]||(u[d]={});var p=f.loaded[d];p.length&&p.forEach(function(v){u[d][v]===void 0&&(u[d][v]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,s,a){var o=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!i.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:a,tried:l,wait:c,callback:u});return}this.readingCalls++;var f=function(m,g){if(o.readingCalls--,o.waitingReads.length>0){var w=o.waitingReads.shift();o.read(w.lng,w.ns,w.fcName,w.tried,w.wait,w.callback)}if(m&&g&&l<o.maxRetries){setTimeout(function(){o.read.call(o,i,s,a,l+1,c*2,u)},c);return}u(m,g)},d=this.backend[a].bind(this.backend);if(d.length===2){try{var p=d(i,s);p&&typeof p.then=="function"?p.then(function(v){return f(null,v)}).catch(f):f(null,p)}catch(v){f(v)}return}return d(i,s,f)}},{key:"prepareLoading",value:function(i,s){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var c=this.queueLoad(i,s,o,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(function(u){a.loadOne(u)})}},{key:"load",value:function(i,s,a){this.prepareLoading(i,s,{},a)}},{key:"reload",value:function(i,s,a){this.prepareLoading(i,s,{reload:!0},a)}},{key:"loadOne",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=i.split("|"),l=o[0],c=o[1];this.read(l,c,"read",void 0,void 0,function(u,f){u&&s.logger.warn("".concat(a,"loading namespace ").concat(c," for language ").concat(l," failed"),u),!u&&f&&s.logger.log("".concat(a,"loaded namespace ").concat(c," for language ").concat(l),f),s.loaded(i,u,f)})}},{key:"saveMissing",value:function(i,s,a,o,l){var c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var f=MV(MV({},c),{},{isUpdate:l}),d=this.backend.create.bind(this.backend);if(d.length<6)try{var p;d.length===5?p=d(i,s,a,o,f):p=d(i,s,a,o),p&&typeof p.then=="function"?p.then(function(v){return u(null,v)}).catch(u):u(null,p)}catch(v){u(v)}else d(i,s,a,o,u,f)}!i||!i[0]||this.store.addResource(i[0],s,a,o)}}}]),t}(nf);function CV(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(Ba(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),Ba(e[2])==="object"||Ba(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){t[i]=n[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function TV(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function RV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Pl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):RV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function JRe(r){var e=$Re();return function(){var n=Go(r),i;if(e){var s=Go(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return $m(this,i)}}function $Re(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hx(){}function eIe(r){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(r));e.forEach(function(t){typeof r[t]=="function"&&(r[t]=r[t].bind(r))})}var V1=function(r){Py(t,r);var e=JRe(t);function t(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(uo(this,t),n=e.call(this),iS&&nf.call(qA(n)),n.options=TV(i),n.services={},n.logger=rc,n.modules={external:[]},eIe(qA(n)),s&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,s),$m(n,qA(n));setTimeout(function(){n.init(i,s)},0)}return n}return Ao(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(a=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var o=CV();this.options=Pl(Pl(Pl({},o),this.options),TV(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Pl(Pl({},o.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(w){return w?typeof w=="function"?new w:w:null}if(!this.options.isClone){this.modules.logger?rc.init(l(this.modules.logger),this.options):rc.init(null,this.options);var c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=KRe);var u=new _V(this.options);this.store=new NRe(this.options.resources,this.options);var f=this.services;f.logger=rc,f.resourceStore=this.store,f.languageUtils=u,f.pluralResolver=new GRe(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(f.formatter=l(c),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new jRe(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new ZRe(l(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(w){for(var b=arguments.length,E=new Array(b>1?b-1:0),B=1;B<b;B++)E[B-1]=arguments[B];i.emit.apply(i,[w].concat(E))}),this.modules.languageDetector&&(f.languageDetector=l(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=l(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new wV(this.services,this.options),this.translator.on("*",function(w){for(var b=arguments.length,E=new Array(b>1?b-1:0),B=1;B<b;B++)E[B-1]=arguments[B];i.emit.apply(i,[w].concat(E))}),this.modules.external.forEach(function(w){w.init&&w.init(i)})}if(this.format=this.options.interpolation.format,a||(a=Hx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var p=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];p.forEach(function(w){i[w]=function(){var b;return(b=i.store)[w].apply(b,arguments)}});var v=["addResource","addResources","addResourceBundle","removeResourceBundle"];v.forEach(function(w){i[w]=function(){var b;return(b=i.store)[w].apply(b,arguments),i}});var m=k0(),g=function(){var b=function(B,S){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),m.resolve(S),a(B,S)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return b(null,i.t.bind(i));i.changeLanguage(i.options.lng,b)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),m}},{key:"loadResources",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hx,o=a,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(o=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return o();var c=[],u=function(p){if(p){var v=s.services.languageUtils.toResolveHierarchy(p);v.forEach(function(m){c.indexOf(m)<0&&c.push(m)})}};if(l)u(l);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(d){return u(d)})}this.options.preload&&this.options.preload.forEach(function(d){return u(d)}),this.services.backendConnector.load(c,this.options.ns,function(d){!d&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),o(d)})}else o(null)}},{key:"reloadResources",value:function(i,s,a){var o=k0();return i||(i=this.languages),s||(s=this.options.ns),a||(a=Hx),this.services.backendConnector.reload(i,s,function(l){o.resolve(),a(l)}),o}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&xJ.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var a=this.languages[s];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(i,s){var a=this;this.isLanguageChangingTo=i;var o=k0();this.emit("languageChanging",i);var l=function(d){a.language=d,a.languages=a.services.languageUtils.toResolveHierarchy(d),a.resolvedLanguage=void 0,a.setResolvedLanguage(d)},c=function(d,p){p?(l(p),a.translator.changeLanguage(p),a.isLanguageChangingTo=void 0,a.emit("languageChanged",p),a.logger.log("languageChanged",p)):a.isLanguageChangingTo=void 0,o.resolve(function(){return a.t.apply(a,arguments)}),s&&s(d,function(){return a.t.apply(a,arguments)})},u=function(d){!i&&!d&&a.services.languageDetector&&(d=[]);var p=typeof d=="string"?d:a.services.languageUtils.getBestMatchFromCodes(d);p&&(a.language||l(p),a.translator.language||a.translator.changeLanguage(p),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(p)),a.loadResources(p,function(v){c(v,p)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(i),o}},{key:"getFixedT",value:function(i,s,a){var o=this,l=function c(u,f){var d;if(Ba(f)!=="object"){for(var p=arguments.length,v=new Array(p>2?p-2:0),m=2;m<p;m++)v[m-2]=arguments[m];d=o.options.overloadTranslationOptionHandler([u,f].concat(v))}else d=Pl({},f);d.lng=d.lng||c.lng,d.lngs=d.lngs||c.lngs,d.ns=d.ns||c.ns,d.keyPrefix=d.keyPrefix||a||c.keyPrefix;var g=o.options.keySeparator||".",w;return d.keyPrefix&&Array.isArray(u)?w=u.map(function(b){return"".concat(d.keyPrefix).concat(g).concat(b)}):w=d.keyPrefix?"".concat(d.keyPrefix).concat(g).concat(u):u,o.t(w,d)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=a,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=a.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;var u=function(p,v){var m=s.services.backendConnector.state["".concat(p,"|").concat(v)];return m===-1||m===2};if(a.precheck){var f=a.precheck(this,u);if(f!==void 0)return f}return!!(this.hasResourceBundle(o,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(o,i)&&(!l||u(c,i)))}},{key:"loadNamespaces",value:function(i,s){var a=this,o=k0();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){a.options.ns.indexOf(l)<0&&a.options.ns.push(l)}),this.loadResources(function(l){o.resolve(),s&&s(l)}),o):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var a=k0();typeof i=="string"&&(i=[i]);var o=this.options.preload||[],l=i.filter(function(c){return o.indexOf(c)<0});return l.length?(this.options.preload=o.concat(l),this.loadResources(function(c){a.resolve(),s&&s(c)}),a):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new _V(CV());return s.indexOf(a.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hx,o=Pl(Pl(Pl({},this.options),s),{isClone:!0}),l=new t(o);(s.debug!==void 0||s.prefix!==void 0)&&(l.logger=l.logger.clone(s));var c=["store","services","language"];return c.forEach(function(u){l[u]=i[u]}),l.services=Pl({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new wV(l.services,l.options),l.translator.on("*",function(u){for(var f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];l.emit.apply(l,[u].concat(d))}),l.init(o,a),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(nf);ea(V1,"createInstance",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new V1(r,e)});var Vs=V1.createInstance();Vs.createInstance=V1.createInstance;Vs.createInstance;Vs.dir;Vs.init;Vs.loadResources;Vs.reloadResources;Vs.use;Vs.changeLanguage;Vs.getFixedT;Vs.t;Vs.exists;Vs.setDefaultNamespace;Vs.hasLoadedNamespace;Vs.loadNamespaces;Vs.loadLanguages;function tIe(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function Fu(r,e){if(r==null)return{};var t,n,i=tIe(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function nIe(){if(console&&console.warn){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(r=console).warn.apply(r,t)}}var IV={};function lD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];typeof e[0]=="string"&&IV[e[0]]||(typeof e[0]=="string"&&(IV[e[0]]=new Date),nIe.apply(void 0,e))}var bJ=function(e,t){return function(){if(e.isInitialized)t();else{var n=function i(){setTimeout(function(){e.off("initialized",i)},0),t()};e.on("initialized",n)}}};function UV(r,e,t){r.loadNamespaces(e,bJ(r,t))}function FV(r,e,t,n){typeof t=="string"&&(t=[t]),t.forEach(function(i){r.options.ns.indexOf(i)<0&&r.options.ns.push(i)}),r.loadLanguages(e,bJ(r,n))}function rIe(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var a=function(l,c){var u=e.services.backendConnector.state["".concat(l,"|").concat(c)];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,r)?!1:!!(e.hasResourceBundle(n,r)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(n,r)&&(!i||a(s,r)))}function iIe(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return lD("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(r,{lng:t.lng,precheck:function(s,a){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!a(s.isLanguageChangingTo,r))return!1}}):rIe(r,e,t)}var sIe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,aIe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},oIe=function(e){return aIe[e]},lIe=function(e){return e.replace(sIe,oIe)};function LV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function DV(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):LV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var cD={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:lIe};function cIe(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};cD=DV(DV({},cD),r)}function uIe(){return cD}var EJ;function AIe(r){EJ=r}function fIe(){return EJ}var hIe={type:"3rdParty",init:function(e){cIe(e.options.react),AIe(e)}},dIe=we.createContext(),pIe=function(){function r(){uo(this,r),this.usedNamespaces={}}return Ao(r,[{key:"addUsedNamespaces",value:function(t){var n=this;t.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),r}();function mIe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}function ic(r,e){return vJ(r)||mIe(r,e)||aN(r,e)||wJ()}function OV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function UR(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):OV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var gIe=function(e,t){var n=we.useRef();return we.useEffect(function(){n.current=e},[e,t]),n.current};function vIe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,n=we.useContext(dIe)||{},i=n.i18n,s=n.defaultNS,a=t||i||fIe();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new pIe),!a){lD("You will need to pass in an i18next instance by using initReactI18next");var o=function(O,C){return typeof C=="string"?C:C&&Ba(C)==="object"&&typeof C.defaultValue=="string"?C.defaultValue:Array.isArray(O)?O[O.length-1]:O},l=[o,{},!1];return l.t=o,l.i18n={},l.ready=!1,l}a.options.react&&a.options.react.wait!==void 0&&lD("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var c=UR(UR(UR({},uIe()),a.options.react),e),u=c.useSuspense,f=c.keyPrefix,d=s||a.options&&a.options.defaultNS;d=typeof d=="string"?[d]:d||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(d);var p=(a.isInitialized||a.initializedStoreOnce)&&d.every(function(k){return iIe(k,a,c)});function v(){return a.getFixedT(e.lng||null,c.nsMode==="fallback"?d:d[0],f)}var m=we.useState(v),g=ic(m,2),w=g[0],b=g[1],E=d.join();e.lng&&(E="".concat(e.lng).concat(E));var B=gIe(E),S=we.useRef(!0);we.useEffect(function(){var k=c.bindI18n,O=c.bindI18nStore;S.current=!0,!p&&!u&&(e.lng?FV(a,e.lng,d,function(){S.current&&b(v)}):UV(a,d,function(){S.current&&b(v)})),p&&B&&B!==E&&S.current&&b(v);function C(){S.current&&b(v)}return k&&a&&a.on(k,C),O&&a&&a.store.on(O,C),function(){S.current=!1,k&&a&&k.split(" ").forEach(function(P){return a.off(P,C)}),O&&a&&O.split(" ").forEach(function(P){return a.store.off(P,C)})}},[a,E]);var M=we.useRef(!0);we.useEffect(function(){S.current&&!M.current&&b(v),M.current=!1},[a,f]);var I=[w,a,p];if(I.t=w,I.i18n=a,I.ready=p,p||!p&&!u)return I;throw new Promise(function(k){e.lng?FV(a,e.lng,d,function(){return k()}):UV(a,d,function(){return k()})})}var SJ=[],yIe=SJ.forEach,wIe=SJ.slice;function _Ie(r){return yIe.call(wIe.call(arguments,1),function(e){if(e)for(var t in e)r[t]===void 0&&(r[t]=e[t])}),r}var NV=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,xIe=function(e,t,n){var i=n||{};i.path=i.path||"/";var s=encodeURIComponent(t),a="".concat(e,"=").concat(s);if(i.maxAge>0){var o=i.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");a+="; Max-Age=".concat(Math.floor(o))}if(i.domain){if(!NV.test(i.domain))throw new TypeError("option domain is invalid");a+="; Domain=".concat(i.domain)}if(i.path){if(!NV.test(i.path))throw new TypeError("option path is invalid");a+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(a+="; HttpOnly"),i.secure&&(a+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a},PV={create:function(e,t,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),i&&(s.domain=i),document.cookie=xIe(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},bIe={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var n=PV.read(e.lookupCookie);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&PV.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},EIe={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1),s=i.split("&"),a=0;a<s.length;a++){var o=s[a].indexOf("=");if(o>0){var l=s[a].substring(0,o);l===e.lookupQuerystring&&(t=s[a].substring(o+1))}}}return t}},H0=null,kV=function(){if(H0!==null)return H0;try{H0=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{H0=!1}return H0},SIe={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&kV()){var n=window.localStorage.getItem(e.lookupLocalStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&kV()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Q0=null,HV=function(){if(Q0!==null)return Q0;try{Q0=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Q0=!1}return Q0},BIe={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&HV()){var n=window.sessionStorage.getItem(e.lookupSessionStorage);n&&(t=n)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&HV()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},MIe={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)t.push(navigator.languages[n]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},CIe={name:"htmlTag",lookup:function(e){var t,n=e.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(t=n.getAttribute("lang")),t}},TIe={name:"path",lookup:function(e){var t;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof n[e.lookupFromPathIndex]!="string")return;t=n[e.lookupFromPathIndex].replace("/","")}else t=n[0].replace("/","")}return t}},RIe={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[t]}},BJ=!1;try{document.cookie,BJ=!0}catch{}var MJ=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];BJ||MJ.splice(1,1);function IIe(){return{order:MJ,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var CJ=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uo(this,r),this.type="languageDetector",this.detectors={},this.init(e,t)}return Ao(r,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t||{languageUtils:{}},this.options=_Ie(n,this.options||{},IIe()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(s){return s.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(bIe),this.addDetector(EIe),this.addDetector(SIe),this.addDetector(BIe),this.addDetector(MIe),this.addDetector(CIe),this.addDetector(TIe),this.addDetector(RIe)}},{key:"addDetector",value:function(t){return this.detectors[t.name]=t,this}},{key:"detect",value:function(t){var n=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(n.detectors[s]){var a=n.detectors[s].lookup(n.options);a&&typeof a=="string"&&(a=[a]),a&&(i=i.concat(a))}}),i=i.map(function(s){return n.options.convertDetectedLanguage(s)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,n){var i=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}])}();CJ.type="languageDetector";const UIe={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",saveCharacter:"Save Your Character"},callToAction:{next:"Next",back:"Back",randomize:"Randomize",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},FIe={translation:{pageTitles:{chooseClass:"Выбрать Класс Персонажа",chooseAppearance:"Выбрать Внешность",saveCharacter:"Сохранить Персонажа"},callToAction:{next:"Далее",back:"Назад",randomize:"Рандомизировать",send:"Отправить"},editor:{title:"Внешность",head:"Голова",body:"Тело",eyes:"Глаза",outer:"Внешний",chest:"Грудь",legs:"Ноги",feet:"Стопы",accessories:"Аксессуары"},labels:{name:"Имя",voice:"Голос",favoriteColor:"Любимый Цвет",preferredGreeting:"Предпочитаемое Приветствие",question:"Вопрос",yourName:"Ваше Имя",conversation:"Разговор"},text:{unoptimized:"Неоптимизи­рованный",apiUnderMaintnance:"API генерации голоса временно отключен на техническое обслуживание."}}},LIe={translation:{pageTitles:{chooseClass:"选择角色类型",chooseAppearance:"选择外观",saveCharacter:"保存角色"},callToAction:{next:"下一步",back:"返回",randomize:"随机",send:"发送"},editor:{title:"外观",head:"头部",body:"身体",eyes:"眼睛",outer:"外套",chest:"上身",legs:"腿部",feet:"脚部",accessories:"配件"},labels:{name:"名字",voice:"语音",favoriteColor:"颜色偏好",preferredGreeting:"首选问候语",question:"问题",yourName:"你的名字",conversation:"对话"},text:{unoptimized:"未优化",apiUnderMaintnance:"语音生成API暂时关闭进行维护!"}}},DIe={en:UIe,ru:FIe,zh:LIe};Vs.use(CJ).use(hIe).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:DIe});const bl=we.createContext(),OIe=r=>{const{t:e}=vIe();return q.jsx(bl.Provider,{value:{t:e},children:r.children})},NIe=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,PIe=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,kIe=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,HIe=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,QIe=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,zIe=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,VIe=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,GIe=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,jIe=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,WIe=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,lN=(r,e,t)=>{const n=new Gn;["position","normal","uv"].forEach(a=>{n.setAttribute(a,r.attributes[a])}),n.setIndex(r.index);const i=new Float32Array(t*3),s=new Jv(i,3);n.setAttribute("positions",s);for(const a of e){const{name:o,itemSize:l}=a,c=new Float32Array(t*l);n.setAttribute(o,new Jv(c,l))}return n},KIe=r=>{const n=new ME(.45,.45,5,50,50,!0),i=new vi({uniforms:{auraTexture:{value:null}},vertexShader:NIe,fragmentShader:PIe,transparent:!0,blending:hh});i.uniforms.cameraDir=r.cameraDir,i.uniforms.eye=r.eye,i.uniforms.switchItemTime=r.switchItemTime,i.uniforms.switchItemDuration=r.switchItemDuration;const s=new lr(n,i);return s.frustumCulled=!1,s.position.y=5*.46,s},qIe=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,n=new Tu(t,t),i=lN(n,e,20),s=new vi({uniforms:{cameraBillboardQuaternion:{value:new Rt}},vertexShader:kIe,fragmentShader:HIe,depthWrite:!1,blending:hh}),a=new BE(i,s,20);return a.info={particleCount:20,velocity:[20]},a},YIe=r=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const n=.43,i=new yO(n,32,32),s=lN(i,t,10),a=new vi({uniforms:{radius:{value:n}},vertexShader:QIe,fragmentShader:zIe,depthWrite:!1,blending:hh});a.uniforms.cameraDir=r.cameraDir,a.uniforms.eye=r.eye,a.uniforms.fadeInAvatarTime=r.fadeInAvatarTime;const o=new BE(s,a,10);return o.info={particleCount:10,velocity:[10],currentIndex:0},o},XIe=r=>{const t=new Tu(1,1),n=new vi({uniforms:{cameraBillboardQuaternion:{value:new Rt}},vertexShader:VIe,fragmentShader:GIe,depthWrite:!1,blending:hh});return new lr(t,n)},ZIe=r=>{const t=[],s=new ME(.645,.43,2.5,50,50,!0),a=lN(s,t,2),o=new vi({uniforms:{opacity:{value:0}},vertexShader:jIe,fragmentShader:WIe,transparent:!0,blending:hh});o.uniforms.cameraDir=r.cameraDir,o.uniforms.eye=r.eye;const l=new BE(a,o,2);return l.fadeIn=!1,l.frustumCulled=!1,l.position.y=2.5*.46,l},QV=100,JIe=0,G1=1.5,$Ie=.1,Fb=0,zV=1,VV=.05,uD=0,e2e=1,t2e=.015,pa={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},n2e=new cf,TJ=n2e.load("./textures/beam2.png");TJ.wrapS=ao;class r2e{constructor(e,t,n){this.scene=e,this.camera=t,this.globalUniforms=n,this.eye=new ae,this.cameraDir=new ae,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let a=0;a<i;a++){a%2===0?e.setXY(a,.2,.2):e.setXY(a,.1,3+Math.random());const o=a/i*Math.PI*2;t.setXYZ(a,Math.cos(o)*s,(Math.random()-.5)*2,Math.sin(o)*s),n.setX(a,1+Math.random()),this.pixelMesh.info.velocity[a]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,n.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let a=0;a<i;a++)if(n.getX(a)<.01){a%2===0?e.setXY(a,.2,.2):e.setXY(a,.1,3+Math.random());const o=a/i*Math.PI*2;t.setXYZ(a,Math.cos(o)*s,Math.random()*-1,Math.sin(o)*s),n.setX(a,1+Math.random()),this.pixelMesh.info.velocity[a]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,n.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),n=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,a=this.ringMesh.info.currentIndex,o=a-1<0?s-1:a-1,l=.1;(n.getY(o)>l+e||i.getX(o)<=0)&&(n.setXYZ(a,0,l,0),t.setXY(a,1,.06),i.setX(a,1),this.ringMesh.info.velocity[a]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=KIe(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=TJ,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=qIe(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=YIe(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=XIe(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=ZIe(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==pa.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)n.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),n.setX(s,n.getX(s)/1.3)):(n.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,n.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),n=this.ringMesh.info.particleCount;for(let i=0;i<n;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==pa.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===pa.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const n=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,n*s,i),this.teleportMesh.position.y=n*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const RJ=new cf,AD=RJ.load("./textures/pixel9.png");AD.wrapS=AD.wrapT=ao;const fD=RJ.load("./textures/noise3.jpg");fD.wrapS=fD.wrapT=ao;const Ln={switchItemDuration:{value:G1},switchItemTime:{value:G1},eye:{value:new ae},cameraDir:{value:new ae},fadeOutAvatarTime:{value:Fb},fadeInAvatarTime:{value:uD},transitionEffectType:{value:pa.normal}},GV={pixelTexture:{value:AD},noiseTexture:{value:fD}};class i2e extends EventTarget{constructor(){super(),this.cameraDir=new ae,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=QV,this.update()}setCustomShader(e){e.vertexShader&&(e.vertexShader=e.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),e.vertexShader=e.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),e.vertexShader=e.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),e.fragmentShader=e.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),e.uniforms.pixelTexture=GV.pixelTexture,e.uniforms.noiseTexture=GV.noiseTexture,e.uniforms.cameraDir=Ln.cameraDir,e.uniforms.eye=Ln.eye,e.uniforms.switchItemTime=Ln.switchItemTime,e.uniforms.switchItemDuration=Ln.switchItemDuration,e.uniforms.transitionEffectType=Ln.transitionEffectType,e.uniforms.fadeInAvatarTime=Ln.fadeInAvatarTime)}setTransitionEffect=e=>{this.transitionEffectType=e};getTransitionEffect=e=>this.transitionEffectType===e;playFadeOutEffect(){Ln.transitionEffectType.value=pa.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((zV-Fb)/VV),this.initialFadeOutTimer()}playFadeInEffect(){Ln.transitionEffectType.value=pa.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Ln.switchItemTime.value=JIe,Ln.transitionEffectType.value=pa.switchItem,this.transitionTime=QV}setParticle(e,t){this.particleEffect=new r2e(e,t,Ln)}initialFadeOutTimer(){Ln.fadeOutAvatarTime.value=Fb}initialFadeInTimer(){Ln.fadeInAvatarTime.value=uD}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Ln.transitionEffectType.value===pa.switchItem?Ln.switchItemTime.value<G1?Ln.switchItemTime.value+=$Ie:(Ln.switchItemTime.value=G1,Ln.transitionEffectType.value=pa.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Ln.transitionEffectType.value===pa.fadeOutAvatar?(Ln.fadeOutAvatarTime.value+=VV,Ln.fadeOutAvatarTime.value>zV&&(Ln.fadeOutAvatarTime.value=Fb,Ln.transitionEffectType.value=pa.loadingAvatar)):Ln.transitionEffectType.value===pa.loadingAvatar||Ln.transitionEffectType.value===pa.fadeInAvatar&&(Ln.fadeInAvatarTime.value>.1&&Ln.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Ln.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Ln.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Ln.fadeInAvatarTime.value+=t2e,Ln.fadeInAvatarTime.value>e2e&&(Ln.fadeInAvatarTime.value=uD,Ln.transitionEffectType.value=pa.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Ln.cameraDir.value.copy(this.cameraDir),Ln.eye.value.copy(this.camera.position))},this.frameRate)}}const s2e="_container_gmnew_1",a2e="_messageWindow_gmnew_11",o2e="_messageTitle_gmnew_23",l2e="_buttonContainer_gmnew_36",Qx={container:s2e,messageWindow:a2e,messageTitle:o2e,buttonContainer:l2e};var FR={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var jV;function c2e(){return jV||(jV=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(FR)),FR.exports}var u2e=c2e();const fm=na(u2e),A2e="_iconButtonWrap_1fm7l_1",f2e="_buttonBackground_1fm7l_8",h2e="_buttonBackgroundColor_1fm7l_13",d2e="_innerBackgroundColor_1fm7l_16",p2e="_dark_1fm7l_20",m2e="_iconWrap_1fm7l_28",g2e="_icon_1fm7l_1",v2e="_active_1fm7l_83",y2e="_buttonWrap_1fm7l_95",w2e="_buttonIconWrap_1fm7l_108",_2e="_innerWrap_1fm7l_127",Kr={iconButtonWrap:A2e,buttonBackground:f2e,buttonBackgroundColor:h2e,innerBackgroundColor:d2e,dark:p2e,iconWrap:m2e,icon:g2e,active:v2e,buttonWrap:y2e,buttonIconWrap:w2e,innerWrap:_2e},x2e=[{name:"backpack",file:"./assets/icons/backpack.svg"},{name:"microphone",file:"./assets/icons/microphone.svg"},{name:"speechToText",file:"./assets/icons/speechToText.svg"},{name:"arrowRight",file:"./assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"./assets/icons/arrowLeft.svg"},{name:"rooms",file:"./assets/icons/rooms.svg"},{name:"scenes",file:"./assets/icons/scenes.svg"},{name:"settings",file:"./assets/icons/settings.svg"},{name:"tokens",file:"./assets/icons/tokens.svg"},{name:"voice",file:"./assets/icons/voice.svg"},{name:"vr",file:"./assets/icons/vr.svg"},{name:"discord",file:"./assets/icons/discord.svg"},{name:"metamask",file:"./assets/icons/metamask.svg"},{name:"close",file:"./assets/icons/close.svg"},{name:"hide",file:"./assets/icons/hide.svg"},{name:"map",file:"./assets/icons/map.svg"},{name:"login",file:"./assets/icons/login.svg"},{name:"logout",file:"./assets/icons/logout.svg"},{name:"plus",file:"./assets/icons/plus.svg"},{name:"minus",file:"./assets/icons/minus.svg"},{name:"mint",file:"./assets/icons/mint.svg"},{name:"download",file:"./assets/icons/download.svg"},{name:"purchase",file:"./assets/icons/purchase.svg"},{name:"classDropHunter",file:"./assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"./assets/icons/class-engineer.svg"},{name:"classCustom",file:"./assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"./assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"./assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"./assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"./assets/icons/class-beast-painter.svg"},{name:"soundon",file:"./assets/icons/soundon.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"polygon",file:"./assets/icons/polygon.svg"}];async function b2e(r){const e=x2e.find(t=>t.name===r);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function cr(r){const{size:e,icon:t,className:n,onClick:i,theme:s,type:a,text:o,onMouseEnter:l,active:c,onSubmit:u,minWidth:f,disabled:d}=r,p=we.useRef(null);return we.useEffect(()=>{t&&b2e(t).then(v=>{p.current&&(p.current.innerHTML="",v&&(v.classList.add(Kr.icon),p.current.append(v)))})},[t]),a&&a==="login"?q.jsxs("div",{className:fm(n,Kr.iconButtonWrap,s&&s==="dark"?Kr.dark:Kr.light,c&&Kr.active),style:{height:e},onClick:i,onMouseEnter:l,children:[q.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Kr.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[q.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Kr.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),q.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Kr.innerBackgroundColor})]}),q.jsx("span",{ref:p,className:Kr.iconWrap})]}):a&&a==="icon"?q.jsxs("div",{className:fm(n,Kr.iconButtonWrap,s&&s==="dark"?Kr.dark:Kr.light,c&&Kr.active),style:{height:e},onClick:i,onMouseEnter:l,children:[q.jsxs("svg",{className:Kr.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[q.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Kr.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),q.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Kr.innerBackgroundColor})]}),q.jsx("span",{ref:p,className:Kr.iconWrap})]}):q.jsx("button",{className:fm(n,Kr.buttonWrap,s&&s==="dark"?Kr.dark:Kr.light),onClick:i,onMouseEnter:l,onSubmit:u,type:a,disabled:d,style:{minWidth:f?f+"px":""},children:q.jsxs("div",{className:Kr.innerWrap,style:{fontSize:e},children:[t&&q.jsx("span",{ref:p,className:Kr.buttonIconWrap,style:{height:e,width:e,opacity:d?"0.4":"1"}}),o&&o]})})}function IJ(r){const{cancelOption:e=!0,confirmDialogText:t,confirmDialogWindow:n,setConfirmDialogWindow:i,confirmDialogCallback:s}=r;return n?q.jsx("div",{className:Qx.container,children:q.jsxs("div",{className:Qx.messageWindow,children:[q.jsx("div",{className:Qx.messageTitle,children:t}),q.jsxs("div",{className:Qx.buttonContainer,children:[e&&q.jsx(cr,{size:16,theme:"light",text:"Cancel",onClick:()=>{s.length>0&&s[0](!1),i(!1)}}),q.jsx(cr,{size:16,theme:"light",text:"Continue",onClick:()=>{s.length>0&&s[0](!0),i(!1)}})]})]})}):q.jsx("div",{})}const E2e="_backgroundImg_1yy0g_1",S2e="_darkBackground_1yy0g_16",zx={backgroundImg:E2e,darkBackground:S2e};function B2e(){const{debugMode:r}=le.useContext(Er);return q.jsxs("div",{className:r?zx.darkBackground:zx.backgroundImg,children:[q.jsx("div",{className:zx.backgroundBlur}),q.jsx("div",{className:zx.Background})]})}const M2e="_buttonContainer_1x1gj_1",C2e="_buttonLeft_1x1gj_10",T2e="_buttonRight_1x1gj_14",R2e="_sideMenu_1x1gj_33",I2e="_scrollContainer_1x1gj_44",U2e="_scrollContainerOptions_1x1gj_52",F2e="_bottomLine_1x1gj_60",L2e="_editorButton_1x1gj_94",D2e="_editorText_1x1gj_102",O2e="_selectorContainerPos_1x1gj_112",N2e="_selectorButton_1x1gj_137",P2e="_selectorColorPickerUI_1x1gj_146",k2e="_selectorColorPickerButton_1x1gj_152",H2e="_selectorPickerTabs_1x1gj_162",Q2e="_selectorColorPickerImg_1x1gj_170",z2e="_uploadContainer_1x1gj_176",V2e="_uploadButton_1x1gj_189",G2e="_blendshapeGroup_1x1gj_213",zn={buttonContainer:M2e,buttonLeft:C2e,buttonRight:T2e,sideMenu:R2e,scrollContainer:I2e,scrollContainerOptions:U2e,bottomLine:F2e,"editor-container":"_editor-container_1x1gj_87",editorButton:L2e,editorText:D2e,selectorContainerPos:O2e,"selector-container":"_selector-container_1x1gj_123","selector-container-column":"_selector-container-column_1x1gj_129",selectorButton:N2e,selectorColorPickerUI:P2e,selectorColorPickerButton:k2e,selectorPickerTabs:H2e,selectorColorPickerImg:Q2e,uploadContainer:z2e,uploadButton:V2e,blendshapeGroup:G2e},j2e="_dropArea_1a0z4_1",W2e={dropArea:j2e};function ky({onFilesDrop:r}){const[e,t]=we.useState(!1),[n,i]=le.useState(null);we.useEffect(()=>{const a=l=>{l.preventDefault(),t(!1);const c=l.dataTransfer.files;r&&i(c)},o=l=>{l.preventDefault(),t(!0)};return window.addEventListener("drop",a),window.addEventListener("dragover",o),()=>{window.removeEventListener("drop",a),window.removeEventListener("dragover",o)}},[]),we.useEffect(()=>{n&&r(n)},[n]);const s=()=>{t(!1)};return q.jsx("div",{onDragLeave:s,className:W2e.dropArea,style:{display:e?"flex":"none"}})}const K2e="_mainTitleWrap_4fb0s_1",q2e="_mainTitle_4fb0s_1",Y2e="_topLine_4fb0s_18",LR={mainTitleWrap:K2e,mainTitle:q2e,topLine:Y2e};function oo({title:r,width:e,left:t,right:n}){const i={width:e?`${e}px`:null,left:t?`${t}px`:null,right:n?`${n}px`:null};return r&&q.jsxs("div",{className:LR.mainTitleWrap,style:i,children:[q.jsx("div",{className:LR.topLine}),q.jsx("div",{className:LR.mainTitle,children:r})]})}const X2e="_ContainerPositionTop_v15ql_2",Z2e="_ContainerPosition_v15ql_2",J2e="_Container_v15ql_2",$2e="_topLine_v15ql_68",eUe="_traitInfoTitle_v15ql_96",tUe="_flexSelect_v15ql_105",nUe="_flexButtons_v15ql_114",rUe="_flexButtonsTop_v15ql_122",iUe="_optionButtons_v15ql_131",sUe="_optionButtonsSmall_v15ql_143",xi={ContainerPositionTop:X2e,ContainerPosition:Z2e,Container:J2e,"arrow-button":"_arrow-button_v15ql_39","left-button":"_left-button_v15ql_55","right-button":"_right-button_v15ql_62",topLine:$2e,traitInfoTitle:eUe,flexSelect:tUe,flexButtons:nUe,flexButtonsTop:rUe,optionButtons:iUe,optionButtonsSmall:sUe},aUe="/assets/randomize-green-BXB3qK1m.png",oUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNiOTBlZjU3LTIwOWItYzQ0Zi05OWNjLTkwYjYxM2Q0MWJiOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1ZDdmMmJiLWMxYjctYjc0My1hYmIzLTFmM2VjNjMxYjE0NCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYjkwZWY1Ny0yMDliLWM0NGYtOTljYy05MGI2MTNkNDFiYjgiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bbHqfAAAFoklEQVR42u2duWtWQRTFo5hGRNAETKFiIQqCSxGto4iCqSLon6BoQJJCEcEFLASbD7QRRcTKNbihoLgUWhj/AItUCi7gVmjikubzPphAiOYts9659xQHAnl5M2/u73vnzHwvbzra7XaHNg1cPrKadJs0bnSHtEbjWGgr/HxSi9SeRWeLYwCAzOIPmk97u0ITpAMAQE7h+0ivaxR+psZIWwBAvoVfSXpsUfiZelZkBgAgx+dtJTIfaPV5W4nLB9p93lZi8oEEn39iWcRPpK2kzaSPlud4mns+0Ojzk6QTpM5p5+skHSP90ZYPtPn8DVJ3ybkXk65oygdafH6UtKlBW72klxrygfT5/BfSLoe2B0xWELt+oMbnHfoxj3RUaj6Q6vNdAfq0SGI+UOvzDn0UlQ/U+7z2fACfV54P4PPK8wF8Xnk+gM8rzwfweeX5AD6vPB/A55XnA/i88nwAn1eeD+DzyvMBfF55PoDPK88H8Hnl+aBup/aQflp26HrZc3hQaT64Zjnmv0h7nQEwT8u24PNJQdjokA9aVXfdqsaH4fNsQNhJ+mxRj2EXAO41bGw/ihUchH0Na3LXBYC7DRs7T1qOQgUr/lLSuZgA3LL0nkukhSiat8IvIF2wrMWtFABMJdHDpLkoolPxD5mxbOcGwJTekfpRzMaF305662H8kwMwpRekDShuZeHXkp57HHc2ACAfhPP5JAB8MB3+jXyQzOeLJfaLpPcpAPhmjlnmcMtSnQ8cfb6w1BXmPF9TAFB8N9Az7dhtpDfIB8F9vvjQ7Jh2rp6K72mCArDkP39z0GHaIjofOPr8lG3OmXHOJawAmHah57F+4G0+P+sHgyUAHm91/fD5cmtkDYDmfODT57MHQFM+COHzYgCQng9C+bwoACTmg9A+LxIACfkgls+LBiDHfBDb51UAkEs+SOHzagDgnA9S+rw6ADjlAw4+rxaAlPmAk8+rByB2PuDm8wAgUj7g6vMAIHA+4O7zACDc7fqk+a/lbJel1QPgIR9k/cUUAAj7SDX7r6YBgP98wM7nAUCa9YOo83kAwC8f5PIACgDwnA+yegQNADQfsGdlb9rK8HoAQMMBK3vryT0AIB+ARyXX9AgAyAfgYck1PQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlALQAwCSX0+y18V/L/a3BQDJr2cx6UcKAMZz3BRaIADdphZJNo16ldsG0ZIAoP721thY2gmAulvH3iB1AYCot/0rMbaObbJ59KR53UonAAjW907ScTPWUfYOHpK2fXyuADhsHz/kAkBBXMvy5QqjHPNBbgBQnzbW8PnZ1Kq6I9ftxJ6KuWaZrnOaLeQCQDHFJl1zeLPJ3jrtNOnQfIe7AZt8wB0A6sM80lHSH8uxPlPUqm57Nh1cSXps2bnk+YAzANT+AOmT5dg+Ja1q2qZLZ/tIry07m2z9gCMAjj4/Rtpi27aPzg9WrERVrR90awXAzOevWo7dBOmAax98XUg2+YADAGZ2dSyWzwcHIKd8kBoAM5+P6vPRAMghH6QCIKXPRweAcz6IDQAHn08GAMd8EAsATj6fFABu+SAGANx8ngUAXPJBSAC4+jwrADzlg5u2+SAEANx9niUAqfKBTwBy8Xm2AHjKB19Ju2MDkJPPswcgZj5wBSBHn88GgBj5wBaAnH0+OwBC5oOmAEjw+SwBCJUPmrwuXorPZw2Ax3yw3pxnpOS4EXPMOkk+LwKAGflgwrI4p0kPSn5/n3RKms+LAsBDPggh1j4vDgBP+cCHsvB5sQB4ygfifV48AJ7WD8T6vBoAAueDbH1eFQAB8kH2Pq8SAA/5QIzPqwbAIh+I83kAUD8fiPR5APAvCKtJt80dYdz8vEbjWPwFnWtJD/nY2zYAAAAASUVORK5CYII=",lUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NDY5Y2JiLWFkMzUtYmQ0Ny04M2Q1LWU0NGQ0MTI2YmYwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIyNTIzNmU1LWZhMWItZTM0NS04ZDM2LTE5YmQyYTRiZjM1MSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNjQ2OWNiYi1hZDM1LWJkNDctODNkNS1lNDRkNDEyNmJmMDYiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qPgTwAAAEeUlEQVR42u2dX4tNURiH58KfwR1K0USSj6BoIpdydcY0TUMmIy58BPdK/uTCLReaG7kwooQoH4FQyneQMNw53t2cqdOJPfusvfZa77ve5+JX1DlnOns9PM+cqT0T/X5/wtt6D64ekj2W/ZKtDv582OO18Hbwk7I7sv5/dle2DQDKPPzLsp81h7++6n+EKwBQzsGfkH1ucPCj+yI7CQB2D/6A7GXAwY/utewgAJTj+dAV2QdePR+64vrAu+dDV0wf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5532A5533AZ533gd43nkf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5530wzsHvkr3hQqvfW9nuLgDYKXvGBVa/F50AMATCHtkKF1rdqn+ce1NG4BHZOy589n2QHc35beBZ2VcOIvm+yRa1fBC0SXZN9oeDSbLrss0aPwqmDxR6PggA+ULnZRfpA9uel+ddkJ0LAWB56AOG/fSBLc/L86ZkrwavsxwCwOgPd6q/T9IHuj0vz9kquzl6djEAqPZDdok+0Ol5ed6S7Ps/XjMaAOurfgh0nD5Q4/lp2aea144OwPDHjvRBXs8/b/A1OgOAPtDj+awA0Af5PZ8dAPogr+fVAEAf5PG8OgDog7SeVwuA1z5I7XnVAHjqg1yeNwFAyX2Q2/OmACitDzR43iQA1vtAk+fNAmCxDzR63jwAFvpAs+eLAUBrH2j3fHEAaOkDK54vEoCcfWDN80UDkLIPrHreBQBd94Flz7sCIEYfPCnM8+4AiNEHZ2RzhXjeLQCt+6AQz7sHoFUfFOB5AIjRB4Y9DwAx+8Cg5wEgVh8Y9TwANNjt6rOADT4nuFHg+waAoc3WvOfZQt8zAAxtruY9zwFA+QDM1LznGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANsA3AeAYnYvBIBTsvcAYH4fZaeDf328PHmxt3bzRACwteqWNkvBvz5+5MJs6a3dRBEAbOxWdVOrJmc77j1z9smeAoDaVbe1mRrnTENvnnSst3YzZQDQsepGVtMhZ9n29mkW+6AkABp5vjMAjPZBKQA09nynABjsA+sAjO35JAAY6gOrAAR7PikABvrAGgCtPZ8FAMV9YAmAKJ7PBoDSPrAAQFTPZwdAWR9oBqATz6sBQEkfaASgU8+rAyBzH2gDoHPPqwQgYx9oASCZ51UDkKEPcgOQ3PMmAEjYB7kAyOZ5UwAk6IMcAGT1vDkAOu6DlACo8LxZADrqgxQAqPK8eQAi90GXAKj0fDEAROqDrgBQ6/miAIjQB7EBUO/5IgFo0QexADDj+aIBCOiDtgCY87wLAMbogzYAmPS8GwAa9kEIAKY97w6ADfpgHACK8LxbAEb6YHVwqPM1j5sfPOZ3SZ53D8DgcLfLHsoWah6zIHsk2+HluvwF92zupxEV3NQAAAAASUVORK5CYII=",cUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmY3YWFkYzZiLWM2ZmEtNjE0OC05YWZkLTgxN2Q1OWRkZTI0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2NTFhZmQyLWU5YTctOTc0Zi1hZWFkLTdiMWMyODQ2YWEzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmN2FhZGM2Yi1jNmZhLTYxNDgtOWFmZC04MTdkNTlkZGUyNDIiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6TWt7cAAAFm0lEQVR42u2dT2xURQCHSTXpQTH0oIJpgfZKi1ETiSK1MV7FbORQNcG0Hmg3oQVjjKARrhDBBDEYMSEYS6kWkxoVAheDiBc9kHBBuaGgMSo1KgTF+pt0JLq6dOe93X3z5zt8SbPdvtmZ37fvvc7Mm5k3MzMzD9KFRkAAGgEBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABPKO0f3OrWCxWiTViROwQ+8QBcchywL62w77HvLdPdJpjIEAYYd8sHhDPiD3iuLggfhczGblqj/GJ2Cs2il5xCwL4EfoK8bw4LH7MEbQrF8UR8aK4T7QgQPNC77On6jNNDHwuzopXzGdDgMaEvlRsEqc8Cr0ap+2ZoRMB8gdvrulviT8CCP7/7h/GxIMI4B78Q+KjAEOvhrlHeRgB5g7e3FB9GFHwlZi6rUSA/wZ/m3g94uAreVMsRIDZ8J8S3yUU/t98L55OVgDby3Y4weArMf0JXUkJoAo/Ln4i/GtMiyeTEEAV3U3gVXktWgFUuXbxKSHPyWeiIyoBVKG7xXnCrRnTVvdEIYAqsjrniFwjGteciabEuGXKvnbes57ER4MWQBVY60FD/ioOiiHRfb3xfTt/oNu+1/zNLx58/rVBCqAPPlxww52x4/e356jDrfYYXxZcl+GgBCg4/Gk7KaSljvVpsSJcLLBe5SAEMB+04L72JQ08qy0ueKyi7LUABYe/pYn/0r4UiwSxhD9UQIfWuhgkiOGav67A8YzgJeC0n7/+W0KWIOTwj3o0keVoqBKEGv5vYoFHAiwQl0KUIMTwDSM5wuoQg3Ya90HLTvtaR47jjhbcJuWmCOBB+OcyBrTcPgJ25TrHvmKFuDNjGedCkyC08DN9+20vnms5GwM8CzhLEFr45jo73zGUbTnK2+5Y1nxxOSQJQgrf8G4B38gRxzInPWmrcl0E8Ch8w4BDEF11LLfLodwBj9qrnEsAz8I3LHMI4r06ljvpUO4yz9qsnEkA/WG/ZxX5VtxQYwh3NKD8RTWWfaOHzzn0OwmgP2izU5J8qsQJh2/hYMGXnxMePqja5iLAdg8nSk45BPBqA8rf5VD+lIftt81FgC88rMC4QwDvNKD8CYfyxz1sv88RAAG4BHAJSOMmcICbwBw3gRH8G7ioAeUvTObfwEg6giYL6gjqjqIjiK7gzF3Bg6VYuoIjGAwaYTAoruHgywwHFzAc7JkEoxkmamwQfzIhJI4pYd9knK7VU+OUMNOJszxjGV9HPSXMIwlGc0zebLf9BDsrJoWa19pzHHdDEpNCPZHgUrWOjYKmhbclNS3cEwmOeSTAseQeDPFEgq08GsbDoUMFhj+U/MOhnpwJhgmfBSK2ctpniRizx8DSBga/hCVi/JfgZ/FsrUPHjotETbNIVDjLxH1lVwtjmTgWitw8YYXsqWGhyB773gkWiqyPBI/M0f/ebC7YZWHf/0dXsPn5pP2dL5/TLK+7OpbFou8ygzgsAl37gJdpM5aLT5OTeQalQtgwYhchV2V3KlvG9LNlzL8waxA/kdqmUWY7WDaNmm2DtDaNYtu4a9vGDbJxZJobR75RYuPIqlvHfhBx8GYc4X62jk1v82hTFzaPzrh9/H7PNp2qFbPl/duil+3j6zMMu0mcCiD40+IF0RlC2wYhQIUMveJluymUL6GftWsP94XWnsEJUCHDveI5e439oYmBm06sI/abvqKeG1QhQHYZbhIr7fj9HvFxaXYjyDz3D1ftMY6LvfbYq1yfT0SA4qRotcvDm5vJNfZpYXP52CfGxCHLmH3N/G69eMyczkuzW9y3xtxGUQsACAAIAAgACAAIAAgACAAIAAgACAAIAAiAADQCAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkCc/AWkhfX2hx9ZaQAAAABJRU5ErkJggg==",uUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAATr2AAE69gE6sVc6AAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslPja4AAAbiSURBVHja7Z17iFVFHMc1K80ybc3SP9K21YrubtLDiIJqK5WMpbYt1MpSKiKkba0gtU0rCCpoyxRXSKrNiJIwCmtD0u2JEWFuSC/t2sueghDU2svbd2D+uFzce89rzvxm5vvHB2TX5Zw758PMufN7zJBSqTSEhAsHgQJwECgAoQCEAhAKQCgAoQCEAhAKQCgAoQCEAhAKQCgAoQDVaO1ZOgWsB7+CAbALLAPDOdCeC4CH3AJKg/AlGM/B9lQAPNxG8HcVARS7wQQOuJ8CPFvj4VMCXwXAAx0BfowoACXwUIA68EcMASiBh0vApzEFoASeCdCZQABK4JEAw0A/JQh7H2A8KFKCsHcCxUugX1qnghlgLrgBzNP/bgXTwTRwAjiEAsQf4AkpJChmJYF+0M1gIegGm8Dn4M+I9/If+B68B3rAneBiMIoCCJwJ8DejwZVgBfgQ7E94/Vqor7ybwVJwOgWwKAH+z3HgJrDR4AOvxU7wIDiFAuQoAX7XZumBV0MtF20UID8JnhMoQUlvjXeAw5kQYl6CVUIlUOwD7WBo8BlBhiVYK1gCxU/giuBTwgxL8IJwCRTvg/qgcwINS/CKAxIolgSdFGpYgjcdkeATMDHYrGDDErzriASK+cGmhZuSAD8/DHzskARrg60LMCjBkQkTVWwuCccGWRhiUIIx4DOHJNgLCkFWBhmUYJzer3dFAhWFnOXjRtAosA6cb0ECFaL+xiEJFAt8E6BXf7Cfq22GGJRgIvjBMQlu9yUWsOUgW6M2JGgAvzgmQYfr0cA3quyPm5KgWEWCaXpLVhWtXqVp11k/6uffCpRgoav5AC9GCJvWS0svw99NVhs0OtHkgBAJ5rmWEbQiRqSs3saOYcTPcTzoAv8KkGCGKzmBnQnCpbkvBwlE2GRZAJXQ2ig9K3hOipi52Jmg7D7aLUvwXdbp81k+/DPAPykTJ1yQYKbld4MPJFYGHZPi4bgowaWWZ4I10gTYmHEKlQsS3GxZgtukFIfeayiPzgUJnrYswVm2G0Q0G06mFC2BCuHq7W1bAmxPW8OYNsBjOtJmUoKvwaQMJOiwPAussiVAXoUZJiVQJWW/gR3gSdXrMME4jIzZJ8kEl+UqgC7EzDu33pQElSxPMB6PWRZANeU8KhcBdJKFDeNNxg4q6Yk5JhcJ2CpemZcA6yxX2YibCVQdoIBlQHGhUQHUWiOk+PLEnCRoTJD0YpM+0wJIybS9xmCnknK6YozNGiFjM8eIAAJ2vsqjYlEaSGQxE2yLMT4PCBmfreBkEwK8JuQDfhTjnpsySNUeGfFaiwVlEd1hQoBXhXy4vpjf0femvF6TYzOAMQGkLAHbY763bEt5vWLEJadb0BIwxeeXQJXZOyLGPT+ewTVrSqDi9EIEmO3718DI07K+50JG16xVlfywgHHpzWMj6CkBH/SWmPe8PCcJHrU4JurUltPyEODoDDdakvJ8gvvuyejaRaES3JVnMMj2UvA7GJvgvu/zdCbYYiMc/IRlCRYlvO8GHfrdoY+42+/4TPBXkqk/q4wgm504dsf5NlDlM0zS4VQTM8Ej0nMD0w5ewWKf3kSxews9i0xK8LKEpND5lpeCMx2QwMRyoFLaxkhJC++yKIBay48IcCY4T1pl0GaLErzuSAu7rGaCzJpHZCnAOD0AtiTYEIgEqyUXhxYSHCSZaahYlal5LME7LpSHTxewSdTioQS7TPQSNNUgYoGAeMFbWdTTm+xPEEMCVbvQ4FqLmEVCIodv62PhRjs6E6iS+7NdbRJ1j6AsmQEtw0r1Fg2uBVdrHtJNoqYKlKDZ9TZxSxxqy2atIHWQfYLLfWkUeTcliC3BTN+OjLmVEkSSQEUqr/f1yJgWQb33vGhS4eKRMY36aw0lECCBrfbwdQ6d6uG1BLbPCeimBHYlkHBYxNyU/QUpgScnhmylBPlLIOoUS71Dd4ASBCpAWW1/LyUIVICyQbxE+IFPXkgg/nx7DMSNQvrveCmBeAEqRJA4I+wD57oqgTMCVHTqlvaO0GcrnyA4ASpeFhdn0AAiKTt1HF8dRHWozaSSIAWoGNyTdM/eDQbjDOq0jvX61JCmFPsdoiTwQoCDNG08R7e0Wa1zA7/SGUFRBnqP3pRSp57dD9rAqWBohjOX1TOQvBagysCP1V3DLgCz9IOdDa4DrarSRjWgBMNcPSuZArglpAgJ+DDclaA/i9mKD8JtCTopQNgS9FOAsCVQdZh1FCBcCfakbZPDgXdbgme4BIQrgWoMWaAA/kqgTiz/oooALdwH8F+C4WCZDjwN6L6GL4HJ3AkkFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIByGD8DzQJyO8fOgE8AAAAAElFTkSuQmCC",AUe="/assets/play-BjRVB4Gs.png",fUe="/assets/reverse-C0jPWvOr.png",hUe="/assets/pause-BItvN20-.png",dUe="/assets/fast-forward-DmKQVjhl.png",pUe="/assets/fast-backward-B8xvvwPg.png";function sS({loadedAnimationName:r,randomize:e}){const{characterManager:t,toggleDebugMode:n,debugMode:i,lookAtManager:s,animationManager:a}=we.useContext(Er),[o,l]=we.useState(s.userActivated),[c,u]=le.useState(a?.getCurrentAnimationName()||"");we.useEffect(()=>{r==null&&(r="T-Pose"),r!=""&&u(r)},[r]);const f=()=>{n()},d=w=>{w?a.play():a.pause(),a.setSpeed(1)},p=w=>{a.play(),a.setSpeed(w)},v=()=>{s.setActive(!o),a.enableMouseLook(!o),l(!o)},m=async()=>{console.log("play next"),await a.loadNextAnimation(),u(a.getCurrentAnimationName())},g=async()=>{console.log("play prev"),await a.loadPreviousAnimation(),u(a.getCurrentAnimationName())};return q.jsxs("div",{className:xi.Container,children:[q.jsx("div",{className:xi.ContainerPositionTop,children:q.jsxs("div",{className:xi.flexButtonsTop,children:[q.jsx("div",{className:`${xi.optionButtonsSmall}`,onClick:()=>{p(-2)},children:q.jsx("img",{src:pUe})}),q.jsx("div",{className:`${xi.optionButtonsSmall}`,onClick:()=>{p(-1)},children:q.jsx("img",{src:fUe})}),q.jsx("div",{className:`${xi.optionButtonsSmall}`,onClick:()=>{d(!1)},children:q.jsx("img",{src:hUe})}),q.jsx("div",{className:`${xi.optionButtonsSmall}`,onClick:()=>{d(!0)},children:q.jsx("img",{src:AUe})}),q.jsx("div",{className:`${xi.optionButtonsSmall}`,onClick:()=>{p(2)},children:q.jsx("img",{src:dUe})})]})}),q.jsxs("div",{className:xi.ContainerPosition,children:[q.jsx("div",{className:xi.topLine}),q.jsxs("div",{className:xi.flexSelect,children:[q.jsx("div",{className:`${xi["arrow-button"]} ${xi["left-button"]}`,onClick:g}),q.jsx("div",{className:xi.traitInfoTitle,style:{marginBottom:"10px"},children:c}),q.jsx("div",{className:`${xi["arrow-button"]} ${xi["right-button"]}`,onClick:m})]}),q.jsxs("div",{className:xi.flexButtons,children:[e&&q.jsx("div",{className:`${xi.optionButtons}`,onClick:e,children:q.jsx("img",{src:aUe})}),q.jsx("div",{className:`${xi.optionButtons}`,onClick:v,children:q.jsx("img",{src:o?uUe:cUe})}),q.jsx("div",{className:`${xi.optionButtons}`,onClick:f,children:q.jsx("img",{src:i?lUe:oUe})})]})]})]})}const mUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAAAXNSR0IB2cksfwAAAAlwSFlzAAACxQAAAsUBidZ/7wAAAAZQTFRFAAAAr8rpn4DGigAAAAJ0Uk5TAP9bkSK1AAABRUlEQVR4nEWSMU6GQBSE5wEJGAvotIPOY/AbC8/hLfwr2Nh4HU+gHOEv7aSTTgrjkgDrvLeaP0DyhX07zM4gALpeAN65x1wp1B/YMoWu1wVeO8eGg+gIOCQov9D3SyGcHW73LRO0r4k+gu5YcFkEYWyQrk5kd9QJg6Sr6OceJP9JCO2L5N8ZoT5JORWEcpJyrAj5LPXQENLlDK07EGQ7Qye92Y7QvhEczK2BupXAb9It3yY2EoEnCwYB2BTSFVgUdNP8D6Osme0e9A1zgVMwmT8IiQL1GAKBeowlAoMKom7Ghn4UmGEE19Pz02rxGoQEPNfdasm37t5TBjz7TSzFgHkynytPGcJUesqAGV56LYupXnjKgDkXnjJq8fmRMlwNn9eUIdAoZQi0ThlogyoD61T70ZZVxnpXGfsTjkWE+lRFyN+1ll9u0JghRPMM5gAAAABJRU5ErkJggg==",gUe="_tokenBoxWrap_q4pvo_1",vUe="_mask_q4pvo_7",yUe="_timer_q4pvo_31",wUe="_level_q4pvo_42",_Ue="_mythic_q4pvo_55",xUe="_epic_q4pvo_60",bUe="_rare_q4pvo_65",EUe="_uncommon_q4pvo_70",SUe="_common_q4pvo_75",BUe="_none_q4pvo_80",MUe="_value_q4pvo_85",CUe="_frame_q4pvo_95",TUe="_emptyIcon_q4pvo_111",RUe="_badge_q4pvo_123",IUe="_frameActive_q4pvo_131",Yc={tokenBoxWrap:gUe,mask:vUe,timer:yUe,level:wUe,mythic:_Ue,epic:xUe,rare:bUe,uncommon:EUe,common:SUe,none:BUe,value:MUe,frame:CUe,emptyIcon:TUe,badge:RUe,frameActive:IUe,default:"_default_q4pvo_159"},UUe="/assets/magic-box-BcQ4_J16.png",Fo=r=>{const{size:e,active:t,onClick:n,level:i,iconOverlay:s,icon:a,rarity:o,style:l}=r,[c,u]=le.useState(!1),f=()=>{u(!0)};return q.jsxs("div",{className:Yc.tokenBoxWrap,style:{width:e,height:e},onClick:n,children:[t&&q.jsx("div",{className:fm(Yc.frame,Yc.frameActive)}),q.jsx("div",{className:fm(Yc.frame,o&&Yc[o])}),q.jsx("img",{src:c?UUe:a,className:Yc.emptyIcon,style:l,onError:f}),s&&q.jsx("img",{src:s,className:Yc.emptyIcon,style:l}),i&&q.jsxs("div",{className:fm(Yc.level,o&&Yc[o]),children:["Lv.",i]})]})},FUe="_InformationContainerPos_72ckd_2",LUe="_scrollContainer_72ckd_15",DUe="_traitInfoTitle_72ckd_27",OUe="_traitInfoText_72ckd_35",NUe="_flexSelect_72ckd_62",kl={InformationContainerPos:FUe,scrollContainer:LUe,traitInfoTitle:DUe,traitInfoText:OUe,flexSelect:NUe,"arrow-button":"_arrow-button_72ckd_70","left-button":"_left-button_72ckd_86","right-button":"_right-button_72ckd_93"};function cN({jsonSelectionArray:r,byManifest:e=!1}){const{isLoading:t,setIsLoading:n}=le.useContext(Ta),{characterManager:i}=we.useContext(Er),[s,a]=we.useState(0),[o,l]=le.useState({}),[c,u]=le.useState([]),f=m=>{i.removeCurrentManifest(),i.setManifest(m),i.loadInitialTraits().then(()=>{n(!1)})};we.useEffect(()=>{t==!1&&(l(i.getAvatarSelection()),u(Object.keys(i.getAvatarSelection())))},[t]);const d=m=>{i.loadTraitsFromNFTObject(m).then(()=>{n(!1)})},p=async()=>{if(!t)if(n(!0),s>=r.length-1)e?f(r[0]):d(r[0]),a(0);else{const m=s+1;e?f(r[m]):d(r[m]),a(m)}},v=async()=>{if(!t)if(n(!0),s<=0)e?f(r[r.length-1]):d(r[r.length-1]),a(r.length-1);else{const m=s-1;e?f(r[m]):d(r[m]),a(m)}};return r?.length>0?q.jsxs("div",{className:kl.InformationContainerPos,children:[q.jsx(oo,{title:"Trait Selection",width:180,right:20}),q.jsxs("div",{className:kl.scrollContainer,children:[q.jsxs("div",{className:kl.flexSelect,children:[r?.length>1?q.jsx("div",{className:`${kl["arrow-button"]} ${kl["left-button"]}`,onClick:v}):q.jsx(q.Fragment,{}),(r[s].name||r[s].manifestName)&&q.jsx("div",{style:{textAlign:"center",flex:1},children:q.jsx("div",{className:kl.traitInfoTitle,children:e?r[s].manifestName:r[s].name})}),r?.length>1?q.jsx("div",{className:`${kl["arrow-button"]} ${kl["right-button"]}`,onClick:p}):q.jsx(q.Fragment,{})]}),(r[s].thumb||r[s].thumbnail)&&q.jsx("img",{src:r[s].thumb||r[s].thumbnail,alt:"Selection Thumbnail",style:{width:"256px",height:"256px",display:"block",margin:"20px auto 20px"}}),r[s].attributes&&r[s].attributes.map(m=>q.jsx("div",{children:q.jsx("div",{className:kl.traitInfoText,children:`${m.trait_type} : ${m.value}`})},`json:${m.trait_type}_${m.value}`)),e&&c.map(m=>q.jsx("div",{children:q.jsx("div",{className:kl.traitInfoText,children:`${m} : ${o[m].id}`})},`val:${m}`))]})]}):q.jsx(q.Fragment,{})}const j1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",WV=({active:r,src:e,select:t})=>q.jsx("div",{className:`${zn.selectorButton}`,onClick:t,children:q.jsx(Fo,{size:56,icon:e||"",rarity:r?"mythic":"none"})}),PUe=({selectedTraitGroup:r,onBack:e})=>{const{decalManager:t,characterManager:n}=le.useContext(Er),[i,s]=le.useState([]),a=r.getAllDecals();return le.useEffect(()=>{const o=Array.from(t.applied.keys());s(o.map(l=>l))},[]),q.jsxs("div",{className:zn["selector-container-column"],children:[q.jsx(cr,{theme:"dark",text:"Back",size:14,className:zn.buttonLeft,onClick:e}),q.jsxs("div",{className:zn["selector-container"],children:[q.jsx(WV,{src:j1,active:!1,select:()=>{t.removeAllOverlayedTextures(),s([])}},"empty"),a.map(o=>{const l=tZ(n.manifestData.getTraitsDirectory(),o.thumbnail);return q.jsx(WV,{src:l,active:i.includes(o.id),select:()=>{i.includes(o.id)?t.removeOverlayTexture(o.id).then(()=>{s(i.filter(c=>c!==o.id))}):t.loadOverlayTexture(r,o.id).then(()=>{s(i.concat([o.id]))})}},o.id)})]})]})},kUe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0wMlQxMTo0OTozNy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBiNWViMTliLTkxMmEtMmI0NS1iOTZlLTliNDUxOGUzZDU4NyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg4ODliZDlkLTAxZjItMTQ0Ni04NDE4LWYyYzNjNjQ1ODNlOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODg4OWJkOWQtMDFmMi0xNDQ2LTg0MTgtZjJjM2M2NDU4M2U4IiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAyVDExOjQ5OjM3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wMlQxMTo1MjoyMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0y+4AAAASPSURBVHja7ZxrSBVBFMctyqIgC0ujJ5UFaQpZRC/7YoUVQYUUkZQYQoVfJBF62PtBlhlJoJWSUQRSEYUFUVRiSEWRiokVgZqRWUEv7W3/oQkul53Ze+/OXWfyfPh98e6cPfNjnZ2ZPbshnZ2dIUTwIAkkmAQTJJgEk2CCBJNgEkyQYBKsgFnzlsaCanARZICFIJwEqxN8CXR68R08479lgxVgDAkOTPATC8EiXoLbYB9YDeJJsFzucPDLD8FWvABlIBcsAeNBKAn+K3i+Q7ki3oNycAys4eP8gO4oeH2QBFvxFVSAYj6uR3cHwWdcFGzFG1AF8sBakOBkeNFR8AMbAY/BedDqovQPoA6UgghjBbMxkXfGqpMfwUyv4w90wRV+1GTBCyQdmy5oc8hlwQdMFrxF0KlzkjbDwA8XBSebLPikv1cNfusBml0UHGWy4BpBp0olbYaAjgBlselZHBgNloNGm+PbQF8jBfsgKlrQbnuActMtYoWCBkmb68ZO09hNzEbIUzDCq82GAOXekuSRJGl3xGTBmT6IYXsU10Ahn5cGOo5ukeQxCLQL2q0zWXCBizeq7TZD1XdBu1iTBVe4KPieJI9kQZtPYKCRgpF4P/DW5QVDnkUeUVyk1fH3jd2L4Pu1KqSxMfohH6cbfbmS+eqRTdX22ixYck0WnKZAbguY5BV3o8IrPsVkwWUKBMQIYmcpEjzdZMF3eCfaA4C1OxGkld4/WgPdE9ZBLttLGMwJD4AI0F8SvycfPpwIvkuFJ2LBQyXzWl8pck0wmwuCcWCUZrCcwizy3aZg/E13RTBONMXjpL81g+W0wyvf/YpucHPdEpzbxQ8k7djlkesmRTHbnZRt+Ss4T3PBOz1y3aooZq1rj+1xsoMGCd6sKOYFEhxcwRm6Cf4JvmksuIUXlrz2MeZknQTv5k95e4HZvCM6CU73c5O/w2ldskrBqTbL4K4WnCbIL0MS75GrtWkSwZWSNgkaCK63Wao3CeKd0kVwgaRNmGQT2y3BZ236VS6Il6OL4OOSNpEK9gKcCq6y6VetIF6iLoKbRdt5vNhZhzE4UZDfYkm8kboIZpy2OH4C+KyJYFZsPdUrvzmSWM9dL8D2YZpWw4tBlrEyTz4n1mmaxvK5DvLBTY9NIitKdBT8P63k1pPg4ApOMllwBX+9agZYKamqdCI4x0Ec9vg+0lTBhYLYVxQLznYQp65L3jJSILhN9G4a/j5RseAefBW5gy00/PwvuWSq4GKb+PWqBAviR/Ay2UxeTV8pqObJMlVwiU38hmAKlizl4/iCqIjXIS8yeYgIE8SOUTlEGPkyuKKb3FlB7FskWN00jX1sIxVM4/uxTaqnad1dcNAXGiSYBGsjuJoXvJTy95VJsEJWeZ2/N7hBghWXQXnl0Ae8IsHOGSfJ4zAJdv59HVlR9SYS7JxESR4XSbBzLgtyiKebnDqugrEe248pkveISbAD3oEvtNCglRwJ1l1wvuaC95gueJ/mgnNMFxzFH6m84V841YVW/nZ9DH0/mD4xTpBgEkyQYBJMggkSTIJJMEGCteYPxO/zzCRZDV4AAAAASUVORK5CYII=",HUe="/assets/color-palette-y-aMD83k.png";var fa={},ip={},DR,KV;function UJ(){if(KV)return DR;KV=1;var r=typeof fu=="object"&&fu&&fu.Object===Object&&fu;return DR=r,DR}var OR,qV;function wc(){if(qV)return OR;qV=1;var r=UJ(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return OR=t,OR}var NR,YV;function Hy(){if(YV)return NR;YV=1;var r=wc(),e=r.Symbol;return NR=e,NR}var PR,XV;function QUe(){if(XV)return PR;XV=1;var r=Hy(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function s(a){var o=t.call(a,i),l=a[i];try{a[i]=void 0;var c=!0}catch{}var u=n.call(a);return c&&(o?a[i]=l:delete a[i]),u}return PR=s,PR}var kR,ZV;function zUe(){if(ZV)return kR;ZV=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return kR=t,kR}var HR,JV;function Rh(){if(JV)return HR;JV=1;var r=Hy(),e=QUe(),t=zUe(),n="[object Null]",i="[object Undefined]",s=r?r.toStringTag:void 0;function a(o){return o==null?o===void 0?i:n:s&&s in Object(o)?e(o):t(o)}return HR=a,HR}var QR,$V;function El(){if($V)return QR;$V=1;var r=Array.isArray;return QR=r,QR}var zR,eG;function Lu(){if(eG)return zR;eG=1;function r(e){return e!=null&&typeof e=="object"}return zR=r,zR}var VR,tG;function VUe(){if(tG)return VR;tG=1;var r=Rh(),e=El(),t=Lu(),n="[object String]";function i(s){return typeof s=="string"||!e(s)&&t(s)&&r(s)==n}return VR=i,VR}var GR,nG;function GUe(){if(nG)return GR;nG=1;function r(e){return function(t,n,i){for(var s=-1,a=Object(t),o=i(t),l=o.length;l--;){var c=o[e?l:++s];if(n(a[c],c,a)===!1)break}return t}}return GR=r,GR}var jR,rG;function jUe(){if(rG)return jR;rG=1;var r=GUe(),e=r();return jR=e,jR}var WR,iG;function WUe(){if(iG)return WR;iG=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return WR=r,WR}var KR,sG;function KUe(){if(sG)return KR;sG=1;var r=Rh(),e=Lu(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return KR=n,KR}var qR,aG;function FJ(){if(aG)return qR;aG=1;var r=KUe(),e=Lu(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(a){return e(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return qR=s,qR}var fv={exports:{}},YR,oG;function qUe(){if(oG)return YR;oG=1;function r(){return!1}return YR=r,YR}fv.exports;var lG;function uN(){return lG||(lG=1,function(r,e){var t=wc(),n=qUe(),i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===i,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;r.exports=c}(fv,fv.exports)),fv.exports}var XR,cG;function LJ(){if(cG)return XR;cG=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var s=typeof n;return i=i??r,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return XR=t,XR}var ZR,uG;function AN(){if(uG)return ZR;uG=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return ZR=e,ZR}var JR,AG;function YUe(){if(AG)return JR;AG=1;var r=Rh(),e=AN(),t=Lu(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",f="[object Object]",d="[object RegExp]",p="[object Set]",v="[object String]",m="[object WeakMap]",g="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",E="[object Float64Array]",B="[object Int8Array]",S="[object Int16Array]",M="[object Int32Array]",I="[object Uint8Array]",k="[object Uint8ClampedArray]",O="[object Uint16Array]",C="[object Uint32Array]",P={};P[b]=P[E]=P[B]=P[S]=P[M]=P[I]=P[k]=P[O]=P[C]=!0,P[n]=P[i]=P[g]=P[s]=P[w]=P[a]=P[o]=P[l]=P[c]=P[u]=P[f]=P[d]=P[p]=P[v]=P[m]=!1;function D(F){return t(F)&&e(F.length)&&!!P[r(F)]}return JR=D,JR}var $R,fG;function fN(){if(fG)return $R;fG=1;function r(e){return function(t){return e(t)}}return $R=r,$R}var hv={exports:{}};hv.exports;var hG;function hN(){return hG||(hG=1,function(r,e){var t=UJ(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s&&t.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();r.exports=o}(hv,hv.exports)),hv.exports}var eI,dG;function DJ(){if(dG)return eI;dG=1;var r=YUe(),e=fN(),t=hN(),n=t&&t.isTypedArray,i=n?e(n):r;return eI=i,eI}var tI,pG;function OJ(){if(pG)return tI;pG=1;var r=WUe(),e=FJ(),t=El(),n=uN(),i=LJ(),s=DJ(),a=Object.prototype,o=a.hasOwnProperty;function l(c,u){var f=t(c),d=!f&&e(c),p=!f&&!d&&n(c),v=!f&&!d&&!p&&s(c),m=f||d||p||v,g=m?r(c.length,String):[],w=g.length;for(var b in c)(u||o.call(c,b))&&!(m&&(b=="length"||p&&(b=="offset"||b=="parent")||v&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,w)))&&g.push(b);return g}return tI=l,tI}var nI,mG;function dN(){if(mG)return nI;mG=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return nI=e,nI}var rI,gG;function NJ(){if(gG)return rI;gG=1;function r(e,t){return function(n){return e(t(n))}}return rI=r,rI}var iI,vG;function XUe(){if(vG)return iI;vG=1;var r=NJ(),e=r(Object.keys,Object);return iI=e,iI}var sI,yG;function ZUe(){if(yG)return sI;yG=1;var r=dN(),e=XUe(),t=Object.prototype,n=t.hasOwnProperty;function i(s){if(!r(s))return e(s);var a=[];for(var o in Object(s))n.call(s,o)&&o!="constructor"&&a.push(o);return a}return sI=i,sI}var aI,wG;function eg(){if(wG)return aI;wG=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return aI=r,aI}var oI,_G;function PJ(){if(_G)return oI;_G=1;var r=Rh(),e=eg(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!e(o))return!1;var l=r(o);return l==n||l==i||l==t||l==s}return oI=a,oI}var lI,xG;function aS(){if(xG)return lI;xG=1;var r=PJ(),e=AN();function t(n){return n!=null&&e(n.length)&&!r(n)}return lI=t,lI}var cI,bG;function Qy(){if(bG)return cI;bG=1;var r=OJ(),e=ZUe(),t=aS();function n(i){return t(i)?r(i):e(i)}return cI=n,cI}var uI,EG;function kJ(){if(EG)return uI;EG=1;var r=jUe(),e=Qy();function t(n,i){return n&&r(n,i,e)}return uI=t,uI}var AI,SG;function HJ(){if(SG)return AI;SG=1;function r(e){return e}return AI=r,AI}var fI,BG;function JUe(){if(BG)return fI;BG=1;var r=HJ();function e(t){return typeof t=="function"?t:r}return fI=e,fI}var hI,MG;function pN(){if(MG)return hI;MG=1;var r=kJ(),e=JUe();function t(n,i){return n&&r(n,e(i))}return hI=t,hI}var dI,CG;function mN(){if(CG)return dI;CG=1;var r=NJ(),e=r(Object.getPrototypeOf,Object);return dI=e,dI}var pI,TG;function $Ue(){if(TG)return pI;TG=1;var r=Rh(),e=mN(),t=Lu(),n="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function c(u){if(!t(u)||r(u)!=n)return!1;var f=e(u);if(f===null)return!0;var d=o.call(f,"constructor")&&f.constructor;return typeof d=="function"&&d instanceof d&&a.call(d)==l}return pI=c,pI}var mI,RG;function QJ(){if(RG)return mI;RG=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=t(e[n],n,e);return s}return mI=r,mI}var gI,IG;function eFe(){if(IG)return gI;IG=1;function r(){this.__data__=[],this.size=0}return gI=r,gI}var vI,UG;function gN(){if(UG)return vI;UG=1;function r(e,t){return e===t||e!==e&&t!==t}return vI=r,vI}var yI,FG;function oS(){if(FG)return yI;FG=1;var r=gN();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return yI=e,yI}var wI,LG;function tFe(){if(LG)return wI;LG=1;var r=oS(),e=Array.prototype,t=e.splice;function n(i){var s=this.__data__,a=r(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():t.call(s,a,1),--this.size,!0}return wI=n,wI}var _I,DG;function nFe(){if(DG)return _I;DG=1;var r=oS();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return _I=e,_I}var xI,OG;function rFe(){if(OG)return xI;OG=1;var r=oS();function e(t){return r(this.__data__,t)>-1}return xI=e,xI}var bI,NG;function iFe(){if(NG)return bI;NG=1;var r=oS();function e(t,n){var i=this.__data__,s=r(i,t);return s<0?(++this.size,i.push([t,n])):i[s][1]=n,this}return bI=e,bI}var EI,PG;function lS(){if(PG)return EI;PG=1;var r=eFe(),e=tFe(),t=nFe(),n=rFe(),i=iFe();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,EI=s,EI}var SI,kG;function sFe(){if(kG)return SI;kG=1;var r=lS();function e(){this.__data__=new r,this.size=0}return SI=e,SI}var BI,HG;function aFe(){if(HG)return BI;HG=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return BI=r,BI}var MI,QG;function oFe(){if(QG)return MI;QG=1;function r(e){return this.__data__.get(e)}return MI=r,MI}var CI,zG;function lFe(){if(zG)return CI;zG=1;function r(e){return this.__data__.has(e)}return CI=r,CI}var TI,VG;function cFe(){if(VG)return TI;VG=1;var r=wc(),e=r["__core-js_shared__"];return TI=e,TI}var RI,GG;function uFe(){if(GG)return RI;GG=1;var r=cFe(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return RI=t,RI}var II,jG;function zJ(){if(jG)return II;jG=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return II=t,II}var UI,WG;function AFe(){if(WG)return UI;WG=1;var r=PJ(),e=uFe(),t=eg(),n=zJ(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!t(d)||e(d))return!1;var p=r(d)?u:s;return p.test(n(d))}return UI=f,UI}var FI,KG;function fFe(){if(KG)return FI;KG=1;function r(e,t){return e?.[t]}return FI=r,FI}var LI,qG;function Ih(){if(qG)return LI;qG=1;var r=AFe(),e=fFe();function t(n,i){var s=e(n,i);return r(s)?s:void 0}return LI=t,LI}var DI,YG;function vN(){if(YG)return DI;YG=1;var r=Ih(),e=wc(),t=r(e,"Map");return DI=t,DI}var OI,XG;function cS(){if(XG)return OI;XG=1;var r=Ih(),e=r(Object,"create");return OI=e,OI}var NI,ZG;function hFe(){if(ZG)return NI;ZG=1;var r=cS();function e(){this.__data__=r?r(null):{},this.size=0}return NI=e,NI}var PI,JG;function dFe(){if(JG)return PI;JG=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return PI=r,PI}var kI,$G;function pFe(){if($G)return kI;$G=1;var r=cS(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(s){var a=this.__data__;if(r){var o=a[s];return o===e?void 0:o}return n.call(a,s)?a[s]:void 0}return kI=i,kI}var HI,ej;function mFe(){if(ej)return HI;ej=1;var r=cS(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var s=this.__data__;return r?s[i]!==void 0:t.call(s,i)}return HI=n,HI}var QI,tj;function gFe(){if(tj)return QI;tj=1;var r=cS(),e="__lodash_hash_undefined__";function t(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=r&&i===void 0?e:i,this}return QI=t,QI}var zI,nj;function vFe(){if(nj)return zI;nj=1;var r=hFe(),e=dFe(),t=pFe(),n=mFe(),i=gFe();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,zI=s,zI}var VI,rj;function yFe(){if(rj)return VI;rj=1;var r=vFe(),e=lS(),t=vN();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return VI=n,VI}var GI,ij;function wFe(){if(ij)return GI;ij=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return GI=r,GI}var jI,sj;function uS(){if(sj)return jI;sj=1;var r=wFe();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return jI=e,jI}var WI,aj;function _Fe(){if(aj)return WI;aj=1;var r=uS();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return WI=e,WI}var KI,oj;function xFe(){if(oj)return KI;oj=1;var r=uS();function e(t){return r(this,t).get(t)}return KI=e,KI}var qI,lj;function bFe(){if(lj)return qI;lj=1;var r=uS();function e(t){return r(this,t).has(t)}return qI=e,qI}var YI,cj;function EFe(){if(cj)return YI;cj=1;var r=uS();function e(t,n){var i=r(this,t),s=i.size;return i.set(t,n),this.size+=i.size==s?0:1,this}return YI=e,YI}var XI,uj;function yN(){if(uj)return XI;uj=1;var r=yFe(),e=_Fe(),t=xFe(),n=bFe(),i=EFe();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=r,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=i,XI=s,XI}var ZI,Aj;function SFe(){if(Aj)return ZI;Aj=1;var r=lS(),e=vN(),t=yN(),n=200;function i(s,a){var o=this.__data__;if(o instanceof r){var l=o.__data__;if(!e||l.length<n-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new t(l)}return o.set(s,a),this.size=o.size,this}return ZI=i,ZI}var JI,fj;function wN(){if(fj)return JI;fj=1;var r=lS(),e=sFe(),t=aFe(),n=oFe(),i=lFe(),s=SFe();function a(o){var l=this.__data__=new r(o);this.size=l.size}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=i,a.prototype.set=s,JI=a,JI}var $I,hj;function BFe(){if(hj)return $I;hj=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return $I=e,$I}var e2,dj;function MFe(){if(dj)return e2;dj=1;function r(e){return this.__data__.has(e)}return e2=r,e2}var t2,pj;function CFe(){if(pj)return t2;pj=1;var r=yN(),e=BFe(),t=MFe();function n(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new r;++s<a;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,t2=n,t2}var n2,mj;function TFe(){if(mj)return n2;mj=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return n2=r,n2}var r2,gj;function RFe(){if(gj)return r2;gj=1;function r(e,t){return e.has(t)}return r2=r,r2}var i2,vj;function VJ(){if(vj)return i2;vj=1;var r=CFe(),e=TFe(),t=RFe(),n=1,i=2;function s(a,o,l,c,u,f){var d=l&n,p=a.length,v=o.length;if(p!=v&&!(d&&v>p))return!1;var m=f.get(a),g=f.get(o);if(m&&g)return m==o&&g==a;var w=-1,b=!0,E=l&i?new r:void 0;for(f.set(a,o),f.set(o,a);++w<p;){var B=a[w],S=o[w];if(c)var M=d?c(S,B,w,o,a,f):c(B,S,w,a,o,f);if(M!==void 0){if(M)continue;b=!1;break}if(E){if(!e(o,function(I,k){if(!t(E,k)&&(B===I||u(B,I,l,c,f)))return E.push(k)})){b=!1;break}}else if(!(B===S||u(B,S,l,c,f))){b=!1;break}}return f.delete(a),f.delete(o),b}return i2=s,i2}var s2,yj;function GJ(){if(yj)return s2;yj=1;var r=wc(),e=r.Uint8Array;return s2=e,s2}var a2,wj;function IFe(){if(wj)return a2;wj=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,s){n[++t]=[s,i]}),n}return a2=r,a2}var o2,_j;function UFe(){if(_j)return o2;_j=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return o2=r,o2}var l2,xj;function FFe(){if(xj)return l2;xj=1;var r=Hy(),e=GJ(),t=gN(),n=VJ(),i=IFe(),s=UFe(),a=1,o=2,l="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Map]",d="[object Number]",p="[object RegExp]",v="[object Set]",m="[object String]",g="[object Symbol]",w="[object ArrayBuffer]",b="[object DataView]",E=r?r.prototype:void 0,B=E?E.valueOf:void 0;function S(M,I,k,O,C,P,D){switch(k){case b:if(M.byteLength!=I.byteLength||M.byteOffset!=I.byteOffset)return!1;M=M.buffer,I=I.buffer;case w:return!(M.byteLength!=I.byteLength||!P(new e(M),new e(I)));case l:case c:case d:return t(+M,+I);case u:return M.name==I.name&&M.message==I.message;case p:case m:return M==I+"";case f:var F=i;case v:var _=O&a;if(F||(F=s),M.size!=I.size&&!_)return!1;var R=D.get(M);if(R)return R==I;O|=o,D.set(M,I);var L=n(F(M),F(I),O,C,P,D);return D.delete(M),L;case g:if(B)return B.call(M)==B.call(I)}return!1}return l2=S,l2}var c2,bj;function jJ(){if(bj)return c2;bj=1;function r(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}return c2=r,c2}var u2,Ej;function WJ(){if(Ej)return u2;Ej=1;var r=jJ(),e=El();function t(n,i,s){var a=i(n);return e(n)?a:r(a,s(n))}return u2=t,u2}var A2,Sj;function LFe(){if(Sj)return A2;Sj=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,s=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[s++]=o)}return a}return A2=r,A2}var f2,Bj;function KJ(){if(Bj)return f2;Bj=1;function r(){return[]}return f2=r,f2}var h2,Mj;function _N(){if(Mj)return h2;Mj=1;var r=LFe(),e=KJ(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(o){return n.call(a,o)}))}:e;return h2=s,h2}var d2,Cj;function qJ(){if(Cj)return d2;Cj=1;var r=WJ(),e=_N(),t=Qy();function n(i){return r(i,t,e)}return d2=n,d2}var p2,Tj;function DFe(){if(Tj)return p2;Tj=1;var r=qJ(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(s,a,o,l,c,u){var f=o&e,d=r(s),p=d.length,v=r(a),m=v.length;if(p!=m&&!f)return!1;for(var g=p;g--;){var w=d[g];if(!(f?w in a:n.call(a,w)))return!1}var b=u.get(s),E=u.get(a);if(b&&E)return b==a&&E==s;var B=!0;u.set(s,a),u.set(a,s);for(var S=f;++g<p;){w=d[g];var M=s[w],I=a[w];if(l)var k=f?l(I,M,w,a,s,u):l(M,I,w,s,a,u);if(!(k===void 0?M===I||c(M,I,o,l,u):k)){B=!1;break}S||(S=w=="constructor")}if(B&&!S){var O=s.constructor,C=a.constructor;O!=C&&"constructor"in s&&"constructor"in a&&!(typeof O=="function"&&O instanceof O&&typeof C=="function"&&C instanceof C)&&(B=!1)}return u.delete(s),u.delete(a),B}return p2=i,p2}var m2,Rj;function OFe(){if(Rj)return m2;Rj=1;var r=Ih(),e=wc(),t=r(e,"DataView");return m2=t,m2}var g2,Ij;function NFe(){if(Ij)return g2;Ij=1;var r=Ih(),e=wc(),t=r(e,"Promise");return g2=t,g2}var v2,Uj;function PFe(){if(Uj)return v2;Uj=1;var r=Ih(),e=wc(),t=r(e,"Set");return v2=t,v2}var y2,Fj;function kFe(){if(Fj)return y2;Fj=1;var r=Ih(),e=wc(),t=r(e,"WeakMap");return y2=t,y2}var w2,Lj;function AS(){if(Lj)return w2;Lj=1;var r=OFe(),e=vN(),t=NFe(),n=PFe(),i=kFe(),s=Rh(),a=zJ(),o="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",f="[object WeakMap]",d="[object DataView]",p=a(r),v=a(e),m=a(t),g=a(n),w=a(i),b=s;return(r&&b(new r(new ArrayBuffer(1)))!=d||e&&b(new e)!=o||t&&b(t.resolve())!=c||n&&b(new n)!=u||i&&b(new i)!=f)&&(b=function(E){var B=s(E),S=B==l?E.constructor:void 0,M=S?a(S):"";if(M)switch(M){case p:return d;case v:return o;case m:return c;case g:return u;case w:return f}return B}),w2=b,w2}var _2,Dj;function HFe(){if(Dj)return _2;Dj=1;var r=wN(),e=VJ(),t=FFe(),n=DFe(),i=AS(),s=El(),a=uN(),o=DJ(),l=1,c="[object Arguments]",u="[object Array]",f="[object Object]",d=Object.prototype,p=d.hasOwnProperty;function v(m,g,w,b,E,B){var S=s(m),M=s(g),I=S?u:i(m),k=M?u:i(g);I=I==c?f:I,k=k==c?f:k;var O=I==f,C=k==f,P=I==k;if(P&&a(m)){if(!a(g))return!1;S=!0,O=!1}if(P&&!O)return B||(B=new r),S||o(m)?e(m,g,w,b,E,B):t(m,g,I,w,b,E,B);if(!(w&l)){var D=O&&p.call(m,"__wrapped__"),F=C&&p.call(g,"__wrapped__");if(D||F){var _=D?m.value():m,R=F?g.value():g;return B||(B=new r),E(_,R,w,b,B)}}return P?(B||(B=new r),n(m,g,w,b,E,B)):!1}return _2=v,_2}var x2,Oj;function YJ(){if(Oj)return x2;Oj=1;var r=HFe(),e=Lu();function t(n,i,s,a,o){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,s,a,t,o)}return x2=t,x2}var b2,Nj;function QFe(){if(Nj)return b2;Nj=1;var r=wN(),e=YJ(),t=1,n=2;function i(s,a,o,l){var c=o.length,u=c,f=!l;if(s==null)return!u;for(s=Object(s);c--;){var d=o[c];if(f&&d[2]?d[1]!==s[d[0]]:!(d[0]in s))return!1}for(;++c<u;){d=o[c];var p=d[0],v=s[p],m=d[1];if(f&&d[2]){if(v===void 0&&!(p in s))return!1}else{var g=new r;if(l)var w=l(v,m,p,s,a,g);if(!(w===void 0?e(m,v,t|n,l,g):w))return!1}}return!0}return b2=i,b2}var E2,Pj;function XJ(){if(Pj)return E2;Pj=1;var r=eg();function e(t){return t===t&&!r(t)}return E2=e,E2}var S2,kj;function zFe(){if(kj)return S2;kj=1;var r=XJ(),e=Qy();function t(n){for(var i=e(n),s=i.length;s--;){var a=i[s],o=n[a];i[s]=[a,o,r(o)]}return i}return S2=t,S2}var B2,Hj;function ZJ(){if(Hj)return B2;Hj=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return B2=r,B2}var M2,Qj;function VFe(){if(Qj)return M2;Qj=1;var r=QFe(),e=zFe(),t=ZJ();function n(i){var s=e(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(a){return a===i||r(a,i,s)}}return M2=n,M2}var C2,zj;function xN(){if(zj)return C2;zj=1;var r=Rh(),e=Lu(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return C2=n,C2}var T2,Vj;function bN(){if(Vj)return T2;Vj=1;var r=El(),e=xN(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,a){if(r(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||e(s)?!0:n.test(s)||!t.test(s)||a!=null&&s in Object(a)}return T2=i,T2}var R2,Gj;function GFe(){if(Gj)return R2;Gj=1;var r=yN(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var c=n.apply(this,a);return s.cache=l.set(o,c)||l,c};return s.cache=new(t.Cache||r),s}return t.Cache=r,R2=t,R2}var I2,jj;function jFe(){if(jj)return I2;jj=1;var r=GFe(),e=500;function t(n){var i=r(n,function(a){return s.size===e&&s.clear(),a}),s=i.cache;return i}return I2=t,I2}var U2,Wj;function WFe(){if(Wj)return U2;Wj=1;var r=jFe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(a,o,l,c){s.push(l?c.replace(t,"$1"):o||a)}),s});return U2=n,U2}var F2,Kj;function KFe(){if(Kj)return F2;Kj=1;var r=Hy(),e=QJ(),t=El(),n=xN(),i=r?r.prototype:void 0,s=i?i.toString:void 0;function a(o){if(typeof o=="string")return o;if(t(o))return e(o,a)+"";if(n(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return F2=a,F2}var L2,qj;function qFe(){if(qj)return L2;qj=1;var r=KFe();function e(t){return t==null?"":r(t)}return L2=e,L2}var D2,Yj;function JJ(){if(Yj)return D2;Yj=1;var r=El(),e=bN(),t=WFe(),n=qFe();function i(s,a){return r(s)?s:e(s,a)?[s]:t(n(s))}return D2=i,D2}var O2,Xj;function fS(){if(Xj)return O2;Xj=1;var r=xN();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return O2=e,O2}var N2,Zj;function $J(){if(Zj)return N2;Zj=1;var r=JJ(),e=fS();function t(n,i){i=r(i,n);for(var s=0,a=i.length;n!=null&&s<a;)n=n[e(i[s++])];return s&&s==a?n:void 0}return N2=t,N2}var P2,Jj;function YFe(){if(Jj)return P2;Jj=1;var r=$J();function e(t,n,i){var s=t==null?void 0:r(t,n);return s===void 0?i:s}return P2=e,P2}var k2,$j;function XFe(){if($j)return k2;$j=1;function r(e,t){return e!=null&&t in Object(e)}return k2=r,k2}var H2,e9;function ZFe(){if(e9)return H2;e9=1;var r=JJ(),e=FJ(),t=El(),n=LJ(),i=AN(),s=fS();function a(o,l,c){l=r(l,o);for(var u=-1,f=l.length,d=!1;++u<f;){var p=s(l[u]);if(!(d=o!=null&&c(o,p)))break;o=o[p]}return d||++u!=f?d:(f=o==null?0:o.length,!!f&&i(f)&&n(p,f)&&(t(o)||e(o)))}return H2=a,H2}var Q2,t9;function JFe(){if(t9)return Q2;t9=1;var r=XFe(),e=ZFe();function t(n,i){return n!=null&&e(n,i,r)}return Q2=t,Q2}var z2,n9;function $Fe(){if(n9)return z2;n9=1;var r=YJ(),e=YFe(),t=JFe(),n=bN(),i=XJ(),s=ZJ(),a=fS(),o=1,l=2;function c(u,f){return n(u)&&i(f)?s(a(u),f):function(d){var p=e(d,u);return p===void 0&&p===f?t(d,u):r(f,p,o|l)}}return z2=c,z2}var V2,r9;function eLe(){if(r9)return V2;r9=1;function r(e){return function(t){return t?.[e]}}return V2=r,V2}var G2,i9;function tLe(){if(i9)return G2;i9=1;var r=$J();function e(t){return function(n){return r(n,t)}}return G2=e,G2}var j2,s9;function nLe(){if(s9)return j2;s9=1;var r=eLe(),e=tLe(),t=bN(),n=fS();function i(s){return t(s)?r(n(s)):e(s)}return j2=i,j2}var W2,a9;function rLe(){if(a9)return W2;a9=1;var r=VFe(),e=$Fe(),t=HJ(),n=El(),i=nLe();function s(a){return typeof a=="function"?a:a==null?t:typeof a=="object"?n(a)?e(a[0],a[1]):r(a):i(a)}return W2=s,W2}var K2,o9;function iLe(){if(o9)return K2;o9=1;var r=aS();function e(t,n){return function(i,s){if(i==null)return i;if(!r(i))return t(i,s);for(var a=i.length,o=n?a:-1,l=Object(i);(n?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return K2=e,K2}var q2,l9;function sLe(){if(l9)return q2;l9=1;var r=kJ(),e=iLe(),t=e(r);return q2=t,q2}var Y2,c9;function aLe(){if(c9)return Y2;c9=1;var r=sLe(),e=aS();function t(n,i){var s=-1,a=e(n)?Array(n.length):[];return r(n,function(o,l,c){a[++s]=i(o,l,c)}),a}return Y2=t,Y2}var X2,u9;function oLe(){if(u9)return X2;u9=1;var r=QJ(),e=rLe(),t=aLe(),n=El();function i(s,a){var o=n(s)?r:t;return o(s,e(a,3))}return X2=i,X2}var A9;function lLe(){if(A9)return ip;A9=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.flattenNames=void 0;var r=VUe(),e=l(r),t=pN(),n=l(t),i=$Ue(),s=l(i),a=oLe(),o=l(a);function l(u){return u&&u.__esModule?u:{default:u}}var c=ip.flattenNames=function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=[];return(0,o.default)(f,function(p){Array.isArray(p)?u(p).map(function(v){return d.push(v)}):(0,s.default)(p)?(0,n.default)(p,function(v,m){v===!0&&d.push(m),d.push(m+"-"+v)}):(0,e.default)(p)&&d.push(p)}),d};return ip.default=c,ip}var sp={},Z2,f9;function cLe(){if(f9)return Z2;f9=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Z2=r,Z2}var J2,h9;function uLe(){if(h9)return J2;h9=1;var r=Ih(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return J2=e,J2}var $2,d9;function e$(){if(d9)return $2;d9=1;var r=uLe();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return $2=e,$2}var eU,p9;function t$(){if(p9)return eU;p9=1;var r=e$(),e=gN(),t=Object.prototype,n=t.hasOwnProperty;function i(s,a,o){var l=s[a];(!(n.call(s,a)&&e(l,o))||o===void 0&&!(a in s))&&r(s,a,o)}return eU=i,eU}var tU,m9;function hS(){if(m9)return tU;m9=1;var r=t$(),e=e$();function t(n,i,s,a){var o=!s;s||(s={});for(var l=-1,c=i.length;++l<c;){var u=i[l],f=a?a(s[u],n[u],u,s,n):void 0;f===void 0&&(f=n[u]),o?e(s,u,f):r(s,u,f)}return s}return tU=t,tU}var nU,g9;function ALe(){if(g9)return nU;g9=1;var r=hS(),e=Qy();function t(n,i){return n&&r(i,e(i),n)}return nU=t,nU}var rU,v9;function fLe(){if(v9)return rU;v9=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return rU=r,rU}var iU,y9;function hLe(){if(y9)return iU;y9=1;var r=eg(),e=dN(),t=fLe(),n=Object.prototype,i=n.hasOwnProperty;function s(a){if(!r(a))return t(a);var o=e(a),l=[];for(var c in a)c=="constructor"&&(o||!i.call(a,c))||l.push(c);return l}return iU=s,iU}var sU,w9;function EN(){if(w9)return sU;w9=1;var r=OJ(),e=hLe(),t=aS();function n(i){return t(i)?r(i,!0):e(i)}return sU=n,sU}var aU,_9;function dLe(){if(_9)return aU;_9=1;var r=hS(),e=EN();function t(n,i){return n&&r(i,e(i),n)}return aU=t,aU}var dv={exports:{}};dv.exports;var x9;function pLe(){return x9||(x9=1,function(r,e){var t=wc(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,d=o?o(f):new c.constructor(f);return c.copy(d),d}r.exports=l}(dv,dv.exports)),dv.exports}var oU,b9;function mLe(){if(b9)return oU;b9=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return oU=r,oU}var lU,E9;function gLe(){if(E9)return lU;E9=1;var r=hS(),e=_N();function t(n,i){return r(n,e(n),i)}return lU=t,lU}var cU,S9;function n$(){if(S9)return cU;S9=1;var r=jJ(),e=mN(),t=_N(),n=KJ(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)r(o,t(a)),a=e(a);return o}:n;return cU=s,cU}var uU,B9;function vLe(){if(B9)return uU;B9=1;var r=hS(),e=n$();function t(n,i){return r(n,e(n),i)}return uU=t,uU}var AU,M9;function yLe(){if(M9)return AU;M9=1;var r=WJ(),e=n$(),t=EN();function n(i){return r(i,t,e)}return AU=n,AU}var fU,C9;function wLe(){if(C9)return fU;C9=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return fU=t,fU}var hU,T9;function SN(){if(T9)return hU;T9=1;var r=GJ();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return hU=e,hU}var dU,R9;function _Le(){if(R9)return dU;R9=1;var r=SN();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return dU=e,dU}var pU,I9;function xLe(){if(I9)return pU;I9=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return pU=e,pU}var mU,U9;function bLe(){if(U9)return mU;U9=1;var r=Hy(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return mU=n,mU}var gU,F9;function ELe(){if(F9)return gU;F9=1;var r=SN();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return gU=e,gU}var vU,L9;function SLe(){if(L9)return vU;L9=1;var r=SN(),e=_Le(),t=xLe(),n=bLe(),i=ELe(),s="[object Boolean]",a="[object Date]",o="[object Map]",l="[object Number]",c="[object RegExp]",u="[object Set]",f="[object String]",d="[object Symbol]",p="[object ArrayBuffer]",v="[object DataView]",m="[object Float32Array]",g="[object Float64Array]",w="[object Int8Array]",b="[object Int16Array]",E="[object Int32Array]",B="[object Uint8Array]",S="[object Uint8ClampedArray]",M="[object Uint16Array]",I="[object Uint32Array]";function k(O,C,P){var D=O.constructor;switch(C){case p:return r(O);case s:case a:return new D(+O);case v:return e(O,P);case m:case g:case w:case b:case E:case B:case S:case M:case I:return i(O,P);case o:return new D;case l:case f:return new D(O);case c:return t(O);case u:return new D;case d:return n(O)}}return vU=k,vU}var yU,D9;function BLe(){if(D9)return yU;D9=1;var r=eg(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return yU=t,yU}var wU,O9;function MLe(){if(O9)return wU;O9=1;var r=BLe(),e=mN(),t=dN();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return wU=n,wU}var _U,N9;function CLe(){if(N9)return _U;N9=1;var r=AS(),e=Lu(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return _U=n,_U}var xU,P9;function TLe(){if(P9)return xU;P9=1;var r=CLe(),e=fN(),t=hN(),n=t&&t.isMap,i=n?e(n):r;return xU=i,xU}var bU,k9;function RLe(){if(k9)return bU;k9=1;var r=AS(),e=Lu(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return bU=n,bU}var EU,H9;function ILe(){if(H9)return EU;H9=1;var r=RLe(),e=fN(),t=hN(),n=t&&t.isSet,i=n?e(n):r;return EU=i,EU}var SU,Q9;function ULe(){if(Q9)return SU;Q9=1;var r=wN(),e=cLe(),t=t$(),n=ALe(),i=dLe(),s=pLe(),a=mLe(),o=gLe(),l=vLe(),c=qJ(),u=yLe(),f=AS(),d=wLe(),p=SLe(),v=MLe(),m=El(),g=uN(),w=TLe(),b=eg(),E=ILe(),B=Qy(),S=EN(),M=1,I=2,k=4,O="[object Arguments]",C="[object Array]",P="[object Boolean]",D="[object Date]",F="[object Error]",_="[object Function]",R="[object GeneratorFunction]",L="[object Map]",Q="[object Number]",G="[object Object]",Y="[object RegExp]",W="[object Set]",V="[object String]",T="[object Symbol]",H="[object WeakMap]",K="[object ArrayBuffer]",N="[object DataView]",te="[object Float32Array]",oe="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",me="[object Int32Array]",Te="[object Uint8Array]",Re="[object Uint8ClampedArray]",de="[object Uint16Array]",Z="[object Uint32Array]",ve={};ve[O]=ve[C]=ve[K]=ve[N]=ve[P]=ve[D]=ve[te]=ve[oe]=ve[fe]=ve[he]=ve[me]=ve[L]=ve[Q]=ve[G]=ve[Y]=ve[W]=ve[V]=ve[T]=ve[Te]=ve[Re]=ve[de]=ve[Z]=!0,ve[F]=ve[_]=ve[H]=!1;function ye(se,ce,_e,ie,$,ee){var pe,xe=ce&M,be=ce&I,De=ce&k;if(_e&&(pe=$?_e(se,ie,$,ee):_e(se)),pe!==void 0)return pe;if(!b(se))return se;var J=m(se);if(J){if(pe=d(se),!xe)return a(se,pe)}else{var j=f(se),X=j==_||j==R;if(g(se))return s(se,xe);if(j==G||j==O||X&&!$){if(pe=be||X?{}:v(se),!xe)return be?l(se,i(pe,se)):o(se,n(pe,se))}else{if(!ve[j])return $?se:{};pe=p(se,j,xe)}}ee||(ee=new r);var re=ee.get(se);if(re)return re;ee.set(se,pe),E(se)?se.forEach(function(Ee){pe.add(ye(Ee,ce,_e,Ee,se,ee))}):w(se)&&se.forEach(function(Ee,We){pe.set(We,ye(Ee,ce,_e,We,se,ee))});var ge=De?be?u:c:be?S:B,Me=J?void 0:ge(se);return e(Me||se,function(Ee,We){Me&&(We=Ee,Ee=se[We]),t(pe,We,ye(Ee,ce,_e,We,se,ee))}),pe}return SU=ye,SU}var BU,z9;function FLe(){if(z9)return BU;z9=1;var r=ULe(),e=1,t=4;function n(i){return r(i,e|t)}return BU=n,BU}var V9;function LLe(){if(V9)return sp;V9=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.mergeClasses=void 0;var r=pN(),e=s(r),t=FLe(),n=s(t),i=Object.assign||function(o){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])}return o};function s(o){return o&&o.__esModule?o:{default:o}}var a=sp.mergeClasses=function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=l.default&&(0,n.default)(l.default)||{};return c.map(function(f){var d=l[f];return d&&(0,e.default)(d,function(p,v){u[v]||(u[v]={}),u[v]=i({},u[v],d[v])}),f}),u};return sp.default=a,sp}var ap={},G9;function DLe(){if(G9)return ap;G9=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.autoprefix=void 0;var r=pN(),e=n(r),t=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a};function n(a){return a&&a.__esModule?a:{default:a}}var i={borderRadius:function(o){return{msBorderRadius:o,MozBorderRadius:o,OBorderRadius:o,WebkitBorderRadius:o,borderRadius:o}},boxShadow:function(o){return{msBoxShadow:o,MozBoxShadow:o,OBoxShadow:o,WebkitBoxShadow:o,boxShadow:o}},userSelect:function(o){return{WebkitTouchCallout:o,KhtmlUserSelect:o,MozUserSelect:o,msUserSelect:o,WebkitUserSelect:o,userSelect:o}},flex:function(o){return{WebkitBoxFlex:o,MozBoxFlex:o,WebkitFlex:o,msFlex:o,flex:o}},flexBasis:function(o){return{WebkitFlexBasis:o,flexBasis:o}},justifyContent:function(o){return{WebkitJustifyContent:o,justifyContent:o}},transition:function(o){return{msTransition:o,MozTransition:o,OTransition:o,WebkitTransition:o,transition:o}},transform:function(o){return{msTransform:o,MozTransform:o,OTransform:o,WebkitTransform:o,transform:o}},absolute:function(o){var l=o&&o.split(" ");return{position:"absolute",top:l&&l[0],right:l&&l[1],bottom:l&&l[2],left:l&&l[3]}},extend:function(o,l){var c=l[o];return c||{extend:o}}},s=ap.autoprefix=function(o){var l={};return(0,e.default)(o,function(c,u){var f={};(0,e.default)(c,function(d,p){var v=i[p];v?f=t({},f,v(d)):f[p]=d}),l[u]=f}),l};return ap.default=s,ap}var op={},j9;function OLe(){if(j9)return op;j9=1,Object.defineProperty(op,"__esModule",{value:!0}),op.hover=void 0;var r=Object.assign||function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])}return l},e=bh(),t=n(e);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function s(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:l}function a(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var o=op.hover=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(f){a(d,f);function d(){var p,v,m,g;i(this,d);for(var w=arguments.length,b=Array(w),E=0;E<w;E++)b[E]=arguments[E];return g=(v=(m=s(this,(p=d.__proto__||Object.getPrototypeOf(d)).call.apply(p,[this].concat(b))),m),m.state={hover:!1},m.handleMouseOver=function(){return m.setState({hover:!0})},m.handleMouseOut=function(){return m.setState({hover:!1})},m.render=function(){return t.default.createElement(u,{onMouseOver:m.handleMouseOver,onMouseOut:m.handleMouseOut},t.default.createElement(c,r({},m.props,m.state)))},v),s(m,g)}return d}(t.default.Component)};return op.default=o,op}var lp={},W9;function NLe(){if(W9)return lp;W9=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.active=void 0;var r=Object.assign||function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])}return l},e=bh(),t=n(e);function n(l){return l&&l.__esModule?l:{default:l}}function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}function s(l,c){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:l}function a(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);l.prototype=Object.create(c&&c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(l,c):l.__proto__=c)}var o=lp.active=function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(f){a(d,f);function d(){var p,v,m,g;i(this,d);for(var w=arguments.length,b=Array(w),E=0;E<w;E++)b[E]=arguments[E];return g=(v=(m=s(this,(p=d.__proto__||Object.getPrototypeOf(d)).call.apply(p,[this].concat(b))),m),m.state={active:!1},m.handleMouseDown=function(){return m.setState({active:!0})},m.handleMouseUp=function(){return m.setState({active:!1})},m.render=function(){return t.default.createElement(u,{onMouseDown:m.handleMouseDown,onMouseUp:m.handleMouseUp},t.default.createElement(c,r({},m.props,m.state)))},v),s(m,g)}return d}(t.default.Component)};return lp.default=o,lp}var Vx={},K9;function PLe(){if(K9)return Vx;K9=1,Object.defineProperty(Vx,"__esModule",{value:!0});var r=function(t,n){var i={},s=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=l};return t===0&&s("first-child"),t===n-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),i};return Vx.default=r,Vx}var q9;function kLe(){if(q9)return fa;q9=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.ReactCSS=fa.loop=fa.handleActive=fa.handleHover=fa.hover=void 0;var r=lLe(),e=d(r),t=LLe(),n=d(t),i=DLe(),s=d(i),a=OLe(),o=d(a),l=NLe(),c=d(l),u=PLe(),f=d(u);function d(v){return v&&v.__esModule?v:{default:v}}fa.hover=o.default,fa.handleHover=o.default,fa.handleActive=c.default,fa.loop=f.default;var p=fa.ReactCSS=function(m){for(var g=arguments.length,w=Array(g>1?g-1:0),b=1;b<g;b++)w[b-1]=arguments[b];var E=(0,e.default)(w),B=(0,n.default)(m,E);return(0,s.default)(B)};return fa.default=p,fa}var BN=kLe();const $t=na(BN);var HLe=function(e,t,n,i,s){var a=s.clientWidth,o=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,c=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,u=l-(s.getBoundingClientRect().left+window.pageXOffset),f=c-(s.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var d=void 0;if(f<0?d=0:f>o?d=1:d=Math.round(f*100/o)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var p=void 0;if(u<0?p=0:u>a?p=1:p=Math.round(u*100/a)/100,i!==p)return{h:t.h,s:t.s,l:t.l,a:p,source:"rgb"}}return null},MU={},QLe=function(e,t,n,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=n*2,s.height=n*2;var a=s.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,s.width,s.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),s.toDataURL()):null},zLe=function(e,t,n,i){var s=e+"-"+t+"-"+n+(i?"-server":"");if(MU[s])return MU[s];var a=QLe(e,t,n,i);return MU[s]=a,a},Y9=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tg=function(e){var t=e.white,n=e.grey,i=e.size,s=e.renderers,a=e.borderRadius,o=e.boxShadow,l=e.children,c=$t({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+zLe(t,n,i,s.canvas)+") center left"}}});return we.isValidElement(l)?le.cloneElement(l,Y9({},l.props,{style:Y9({},l.props.style,c.grid)})):le.createElement("div",{style:c.grid})};tg.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var VLe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},GLe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function jLe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function X9(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function WLe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var MN=function(r){WLe(e,r);function e(){var t,n,i,s;jLe(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(n=(i=X9(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),i),i.handleChange=function(c){var u=HLe(c,i.props.hsl,i.props.direction,i.props.a,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),X9(i,s)}return GLe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,s=$t({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:VLe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return le.createElement("div",{style:s.alpha},le.createElement("div",{style:s.checkboard},le.createElement(tg,{renderers:this.props.renderers})),le.createElement("div",{style:s.gradient}),le.createElement("div",{style:s.container,ref:function(o){return n.container=o},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},le.createElement("div",{style:s.pointer},this.props.pointer?le.createElement(this.props.pointer,this.props):le.createElement("div",{style:s.slider}))))}}]),e}(we.PureComponent||we.Component),KLe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function qLe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function YLe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function XLe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function ZLe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var JLe=1,r$=38,$Le=40,eDe=[r$,$Le],tDe=function(e){return eDe.indexOf(e)>-1},nDe=function(e){return Number(String(e).replace(/%/g,""))},rDe=1,Dn=function(r){ZLe(e,r);function e(t){YLe(this,e);var n=XLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var s=nDe(i.target.value);if(!isNaN(s)&&tDe(i.keyCode)){var a=n.getArrowOffset(),o=i.keyCode===r$?s+a:s-a;n.setUpdatedValue(o,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var s=Math.round(n.props.value+i.movementX);s>=0&&s<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(s),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n.inputId="rc-editable-input-"+rDe++,n}return KLe(e,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return qLe({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||JLe}},{key:"setUpdatedValue",value:function(n,i){var s=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(s,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=$t({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return le.createElement("div",{style:i.wrap},le.createElement("input",{id:this.inputId,style:i.input,ref:function(a){return n.input=a},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?le.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(we.PureComponent||we.Component),iDe=function(e,t,n,i){var s=i.clientWidth,a=i.clientHeight,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var f=void 0;if(u<0)f=359;else if(u>a)f=0;else{var d=-(u*100/a)+100;f=360*d/100}if(n.h!==f)return{h:f,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var p=void 0;if(c<0)p=0;else if(c>s)p=359;else{var v=c*100/s;p=360*v/100}if(n.h!==p)return{h:p,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},sDe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function aDe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Z9(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function oDe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var ng=function(r){oDe(e,r);function e(){var t,n,i,s;aDe(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(n=(i=Z9(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),i),i.handleChange=function(c){var u=iDe(c,i.props.direction,i.props.hsl,i.container);u&&typeof i.props.onChange=="function"&&i.props.onChange(u,c)},i.handleMouseDown=function(c){i.handleChange(c),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),Z9(i,s)}return sDe(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,s=i===void 0?"horizontal":i,a=$t({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return le.createElement("div",{style:a.hue},le.createElement("div",{className:"hue-"+s,style:a.container,ref:function(l){return n.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},le.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),le.createElement("div",{style:a.pointer},this.props.pointer?le.createElement(this.props.pointer,this.props):le.createElement("div",{style:a.slider}))))}}]),e}(we.PureComponent||we.Component),CU={exports:{}},TU,J9;function lDe(){if(J9)return TU;J9=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return TU=r,TU}var RU,$9;function cDe(){if($9)return RU;$9=1;var r=lDe();function e(){}function t(){}return t.resetWarningCache=e,RU=function(){function n(a,o,l,c,u,f){if(f!==r){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},RU}var eW;function uDe(){return eW||(eW=1,CU.exports=cDe()()),CU.exports}var ADe=uDe();const At=na(ADe);function fDe(){this.__data__=[],this.size=0}function zy(r,e){return r===e||r!==r&&e!==e}function dS(r,e){for(var t=r.length;t--;)if(zy(r[t][0],e))return t;return-1}var hDe=Array.prototype,dDe=hDe.splice;function pDe(r){var e=this.__data__,t=dS(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():dDe.call(e,t,1),--this.size,!0}function mDe(r){var e=this.__data__,t=dS(e,r);return t<0?void 0:e[t][1]}function gDe(r){return dS(this.__data__,r)>-1}function vDe(r,e){var t=this.__data__,n=dS(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}function Du(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Du.prototype.clear=fDe;Du.prototype.delete=pDe;Du.prototype.get=mDe;Du.prototype.has=gDe;Du.prototype.set=vDe;function yDe(){this.__data__=new Du,this.size=0}function wDe(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function _De(r){return this.__data__.get(r)}function xDe(r){return this.__data__.has(r)}var i$=typeof global=="object"&&global&&global.Object===Object&&global,bDe=typeof self=="object"&&self&&self.Object===Object&&self,Sl=i$||bDe||Function("return this")(),rf=Sl.Symbol,s$=Object.prototype,EDe=s$.hasOwnProperty,SDe=s$.toString,z0=rf?rf.toStringTag:void 0;function BDe(r){var e=EDe.call(r,z0),t=r[z0];try{r[z0]=void 0;var n=!0}catch{}var i=SDe.call(r);return n&&(e?r[z0]=t:delete r[z0]),i}var MDe=Object.prototype,CDe=MDe.toString;function TDe(r){return CDe.call(r)}var RDe="[object Null]",IDe="[object Undefined]",tW=rf?rf.toStringTag:void 0;function Uh(r){return r==null?r===void 0?IDe:RDe:tW&&tW in Object(r)?BDe(r):TDe(r)}function jo(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var UDe="[object AsyncFunction]",FDe="[object Function]",LDe="[object GeneratorFunction]",DDe="[object Proxy]";function CN(r){if(!jo(r))return!1;var e=Uh(r);return e==FDe||e==LDe||e==UDe||e==DDe}var IU=Sl["__core-js_shared__"],nW=function(){var r=/[^.]+$/.exec(IU&&IU.keys&&IU.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function ODe(r){return!!nW&&nW in r}var NDe=Function.prototype,PDe=NDe.toString;function Fh(r){if(r!=null){try{return PDe.call(r)}catch{}try{return r+""}catch{}}return""}var kDe=/[\\^$.*+?()[\]{}|]/g,HDe=/^\[object .+?Constructor\]$/,QDe=Function.prototype,zDe=Object.prototype,VDe=QDe.toString,GDe=zDe.hasOwnProperty,jDe=RegExp("^"+VDe.call(GDe).replace(kDe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function WDe(r){if(!jo(r)||ODe(r))return!1;var e=CN(r)?jDe:HDe;return e.test(Fh(r))}function KDe(r,e){return r?.[e]}function Lh(r,e){var t=KDe(r,e);return WDe(t)?t:void 0}var hy=Lh(Sl,"Map"),dy=Lh(Object,"create");function qDe(){this.__data__=dy?dy(null):{},this.size=0}function YDe(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var XDe="__lodash_hash_undefined__",ZDe=Object.prototype,JDe=ZDe.hasOwnProperty;function $De(r){var e=this.__data__;if(dy){var t=e[r];return t===XDe?void 0:t}return JDe.call(e,r)?e[r]:void 0}var eOe=Object.prototype,tOe=eOe.hasOwnProperty;function nOe(r){var e=this.__data__;return dy?e[r]!==void 0:tOe.call(e,r)}var rOe="__lodash_hash_undefined__";function iOe(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=dy&&e===void 0?rOe:e,this}function _h(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}_h.prototype.clear=qDe;_h.prototype.delete=YDe;_h.prototype.get=$De;_h.prototype.has=nOe;_h.prototype.set=iOe;function sOe(){this.size=0,this.__data__={hash:new _h,map:new(hy||Du),string:new _h}}function aOe(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function pS(r,e){var t=r.__data__;return aOe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function oOe(r){var e=pS(this,r).delete(r);return this.size-=e?1:0,e}function lOe(r){return pS(this,r).get(r)}function cOe(r){return pS(this,r).has(r)}function uOe(r,e){var t=pS(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}function Ou(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ou.prototype.clear=sOe;Ou.prototype.delete=oOe;Ou.prototype.get=lOe;Ou.prototype.has=cOe;Ou.prototype.set=uOe;var AOe=200;function fOe(r,e){var t=this.__data__;if(t instanceof Du){var n=t.__data__;if(!hy||n.length<AOe-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Ou(n)}return t.set(r,e),this.size=t.size,this}function sc(r){var e=this.__data__=new Du(r);this.size=e.size}sc.prototype.clear=yDe;sc.prototype.delete=wDe;sc.prototype.get=_De;sc.prototype.has=xDe;sc.prototype.set=fOe;var W1=function(){try{var r=Lh(Object,"defineProperty");return r({},"",{}),r}catch{}}();function TN(r,e,t){e=="__proto__"&&W1?W1(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function hD(r,e,t){(t!==void 0&&!zy(r[e],t)||t===void 0&&!(e in r))&&TN(r,e,t)}function hOe(r){return function(e,t,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[++i];if(t(s[l],l,s)===!1)break}return e}}var a$=hOe(),o$=typeof exports=="object"&&exports&&!exports.nodeType&&exports,rW=o$&&typeof module=="object"&&module&&!module.nodeType&&module,dOe=rW&&rW.exports===o$,iW=dOe?Sl.Buffer:void 0;iW&&iW.allocUnsafe;function pOe(r,e){return r.slice()}var K1=Sl.Uint8Array;function mOe(r){var e=new r.constructor(r.byteLength);return new K1(e).set(new K1(r)),e}function gOe(r,e){var t=mOe(r.buffer);return new r.constructor(t,r.byteOffset,r.length)}function vOe(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var sW=Object.create,yOe=function(){function r(){}return function(e){if(!jo(e))return{};if(sW)return sW(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();function l$(r,e){return function(t){return r(e(t))}}var c$=l$(Object.getPrototypeOf,Object),wOe=Object.prototype;function RN(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||wOe;return r===t}function _Oe(r){return typeof r.constructor=="function"&&!RN(r)?yOe(c$(r)):{}}function sf(r){return r!=null&&typeof r=="object"}var xOe="[object Arguments]";function aW(r){return sf(r)&&Uh(r)==xOe}var u$=Object.prototype,bOe=u$.hasOwnProperty,EOe=u$.propertyIsEnumerable,q1=aW(function(){return arguments}())?aW:function(r){return sf(r)&&bOe.call(r,"callee")&&!EOe.call(r,"callee")},lo=Array.isArray,SOe=9007199254740991;function IN(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=SOe}function rg(r){return r!=null&&IN(r.length)&&!CN(r)}function BOe(r){return sf(r)&&rg(r)}function MOe(){return!1}var A$=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oW=A$&&typeof module=="object"&&module&&!module.nodeType&&module,COe=oW&&oW.exports===A$,lW=COe?Sl.Buffer:void 0,TOe=lW?lW.isBuffer:void 0,Y1=TOe||MOe,ROe="[object Object]",IOe=Function.prototype,UOe=Object.prototype,f$=IOe.toString,FOe=UOe.hasOwnProperty,LOe=f$.call(Object);function DOe(r){if(!sf(r)||Uh(r)!=ROe)return!1;var e=c$(r);if(e===null)return!0;var t=FOe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&f$.call(t)==LOe}var OOe="[object Arguments]",NOe="[object Array]",POe="[object Boolean]",kOe="[object Date]",HOe="[object Error]",QOe="[object Function]",zOe="[object Map]",VOe="[object Number]",GOe="[object Object]",jOe="[object RegExp]",WOe="[object Set]",KOe="[object String]",qOe="[object WeakMap]",YOe="[object ArrayBuffer]",XOe="[object DataView]",ZOe="[object Float32Array]",JOe="[object Float64Array]",$Oe="[object Int8Array]",eNe="[object Int16Array]",tNe="[object Int32Array]",nNe="[object Uint8Array]",rNe="[object Uint8ClampedArray]",iNe="[object Uint16Array]",sNe="[object Uint32Array]",Br={};Br[ZOe]=Br[JOe]=Br[$Oe]=Br[eNe]=Br[tNe]=Br[nNe]=Br[rNe]=Br[iNe]=Br[sNe]=!0;Br[OOe]=Br[NOe]=Br[YOe]=Br[POe]=Br[XOe]=Br[kOe]=Br[HOe]=Br[QOe]=Br[zOe]=Br[VOe]=Br[GOe]=Br[jOe]=Br[WOe]=Br[KOe]=Br[qOe]=!1;function aNe(r){return sf(r)&&IN(r.length)&&!!Br[Uh(r)]}function oNe(r){return function(e){return r(e)}}var h$=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lv=h$&&typeof module=="object"&&module&&!module.nodeType&&module,lNe=Lv&&Lv.exports===h$,UU=lNe&&i$.process,cW=function(){try{var r=Lv&&Lv.require&&Lv.require("util").types;return r||UU&&UU.binding&&UU.binding("util")}catch{}}(),uW=cW&&cW.isTypedArray,UN=uW?oNe(uW):aNe;function dD(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var cNe=Object.prototype,uNe=cNe.hasOwnProperty;function ANe(r,e,t){var n=r[e];(!(uNe.call(r,e)&&zy(n,t))||t===void 0&&!(e in r))&&TN(r,e,t)}function fNe(r,e,t,n){var i=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=void 0;l===void 0&&(l=r[o]),i?TN(t,o,l):ANe(t,o,l)}return t}function hNe(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var dNe=9007199254740991,pNe=/^(?:0|[1-9]\d*)$/;function FN(r,e){var t=typeof r;return e=e??dNe,!!e&&(t=="number"||t!="symbol"&&pNe.test(r))&&r>-1&&r%1==0&&r<e}var mNe=Object.prototype,gNe=mNe.hasOwnProperty;function d$(r,e){var t=lo(r),n=!t&&q1(r),i=!t&&!n&&Y1(r),s=!t&&!n&&!i&&UN(r),a=t||n||i||s,o=a?hNe(r.length,String):[],l=o.length;for(var c in r)(e||gNe.call(r,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||FN(c,l)))&&o.push(c);return o}function vNe(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var yNe=Object.prototype,wNe=yNe.hasOwnProperty;function _Ne(r){if(!jo(r))return vNe(r);var e=RN(r),t=[];for(var n in r)n=="constructor"&&(e||!wNe.call(r,n))||t.push(n);return t}function p$(r){return rg(r)?d$(r,!0):_Ne(r)}function xNe(r){return fNe(r,p$(r))}function bNe(r,e,t,n,i,s,a){var o=dD(r,t),l=dD(e,t),c=a.get(l);if(c){hD(r,t,c);return}var u=s?s(o,l,t+"",r,e,a):void 0,f=u===void 0;if(f){var d=lo(l),p=!d&&Y1(l),v=!d&&!p&&UN(l);u=l,d||p||v?lo(o)?u=o:BOe(o)?u=vOe(o):p?(f=!1,u=pOe(l)):v?(f=!1,u=gOe(l)):u=[]:DOe(l)||q1(l)?(u=o,q1(o)?u=xNe(o):(!jo(o)||CN(o))&&(u=_Oe(l))):f=!1}f&&(a.set(l,u),i(u,l,n,s,a),a.delete(l)),hD(r,t,u)}function m$(r,e,t,n,i){r!==e&&a$(e,function(s,a){if(i||(i=new sc),jo(s))bNe(r,e,a,t,m$,n,i);else{var o=n?n(dD(r,a),s,a+"",r,e,i):void 0;o===void 0&&(o=s),hD(r,a,o)}},p$)}function mS(r){return r}function ENe(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var AW=Math.max;function SNe(r,e,t){return e=AW(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=AW(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=t(a),ENe(r,this,o)}}function BNe(r){return function(){return r}}var MNe=W1?function(r,e){return W1(r,"toString",{configurable:!0,enumerable:!1,value:BNe(e),writable:!0})}:mS,CNe=800,TNe=16,RNe=Date.now;function INe(r){var e=0,t=0;return function(){var n=RNe(),i=TNe-(n-t);if(t=n,i>0){if(++e>=CNe)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var UNe=INe(MNe);function FNe(r,e){return UNe(SNe(r,e,mS),r+"")}function LNe(r,e,t){if(!jo(t))return!1;var n=typeof e;return(n=="number"?rg(t)&&FN(e,t.length):n=="string"&&e in t)?zy(t[e],r):!1}function DNe(r){return FNe(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,a&&LNe(t[0],t[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var o=t[n];o&&r(e,o,n,s)}return e})}var Ra=DNe(function(r,e,t){m$(r,e,t)}),Vy=function(e){var t=e.zDepth,n=e.radius,i=e.background,s=e.children,a=e.styles,o=a===void 0?{}:a,l=$t(Ra({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":t===1});return le.createElement("div",{style:l.wrap},le.createElement("div",{style:l.bg}),le.createElement("div",{style:l.content},s))};Vy.propTypes={background:At.string,zDepth:At.oneOf([0,1,2,3,4,5]),radius:At.number,styles:At.object};Vy.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var FU=function(){return Sl.Date.now()},ONe=/\s/;function NNe(r){for(var e=r.length;e--&&ONe.test(r.charAt(e)););return e}var PNe=/^\s+/;function kNe(r){return r&&r.slice(0,NNe(r)+1).replace(PNe,"")}var HNe="[object Symbol]";function gS(r){return typeof r=="symbol"||sf(r)&&Uh(r)==HNe}var fW=NaN,QNe=/^[-+]0x[0-9a-f]+$/i,zNe=/^0b[01]+$/i,VNe=/^0o[0-7]+$/i,GNe=parseInt;function hW(r){if(typeof r=="number")return r;if(gS(r))return fW;if(jo(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=jo(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=kNe(r);var t=zNe.test(r);return t||VNe.test(r)?GNe(r.slice(2),t?2:8):QNe.test(r)?fW:+r}var jNe="Expected a function",WNe=Math.max,KNe=Math.min;function g$(r,e,t){var n,i,s,a,o,l,c=0,u=!1,f=!1,d=!0;if(typeof r!="function")throw new TypeError(jNe);e=hW(e)||0,jo(t)&&(u=!!t.leading,f="maxWait"in t,s=f?WNe(hW(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function p(M){var I=n,k=i;return n=i=void 0,c=M,a=r.apply(k,I),a}function v(M){return c=M,o=setTimeout(w,e),u?p(M):a}function m(M){var I=M-l,k=M-c,O=e-I;return f?KNe(O,s-k):O}function g(M){var I=M-l,k=M-c;return l===void 0||I>=e||I<0||f&&k>=s}function w(){var M=FU();if(g(M))return b(M);o=setTimeout(w,m(M))}function b(M){return o=void 0,d&&n?p(M):(n=i=void 0,a)}function E(){o!==void 0&&clearTimeout(o),c=0,n=l=i=o=void 0}function B(){return o===void 0?a:b(FU())}function S(){var M=FU(),I=g(M);if(n=arguments,i=this,l=M,I){if(o===void 0)return v(l);if(f)return clearTimeout(o),o=setTimeout(w,e),p(l)}return o===void 0&&(o=setTimeout(w,e)),a}return S.cancel=E,S.flush=B,S}var qNe="Expected a function";function YNe(r,e,t){var n=!0,i=!0;if(typeof r!="function")throw new TypeError(qNe);return jo(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),g$(r,e,{leading:n,maxWait:e,trailing:i})}var XNe=function(e,t,n){var i=n.getBoundingClientRect(),s=i.width,a=i.height,o=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=o-(n.getBoundingClientRect().left+window.pageXOffset),u=l-(n.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>s&&(c=s),u<0?u=0:u>a&&(u=a);var f=c/s,d=1-u/a;return{h:t.h,s:f,v:d,a:t.a,source:"hsv"}},ZNe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function JNe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ne(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function ePe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var vS=function(r){ePe(e,r);function e(t){JNe(this,e);var n=$Ne(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,XNe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var s=n.getContainerRenderWindow();s.addEventListener("mousemove",n.handleChange),s.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=YNe(function(i,s,a){i(s,a)},50),n}return ZNe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},s=i.color,a=i.white,o=i.black,l=i.pointer,c=i.circle,u=$t({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:a,black:o,pointer:l,circle:c}},{custom:!!this.props.style});return le.createElement("div",{style:u.color,ref:function(d){return n.container=d},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},le.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),le.createElement("div",{style:u.white,className:"saturation-white"},le.createElement("div",{style:u.black,className:"saturation-black"}),le.createElement("div",{style:u.pointer},this.props.pointer?le.createElement(this.props.pointer,this.props):le.createElement("div",{style:u.circle}))))}}]),e}(we.PureComponent||we.Component);function tPe(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var nPe=l$(Object.keys,Object),rPe=Object.prototype,iPe=rPe.hasOwnProperty;function sPe(r){if(!RN(r))return nPe(r);var e=[];for(var t in Object(r))iPe.call(r,t)&&t!="constructor"&&e.push(t);return e}function LN(r){return rg(r)?d$(r):sPe(r)}function aPe(r,e){return r&&a$(r,e,LN)}function oPe(r,e){return function(t,n){if(t==null)return t;if(!rg(t))return r(t,n);for(var i=t.length,s=-1,a=Object(t);++s<i&&n(a[s],s,a)!==!1;);return t}}var v$=oPe(aPe);function lPe(r){return typeof r=="function"?r:mS}function cPe(r,e){var t=lo(r)?tPe:v$;return t(r,lPe(e))}function X1(r){"@babel/helpers - typeof";return X1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X1(r)}var uPe=/^\s+/,APe=/\s+$/;function It(r,e){if(r=r||"",e=e||{},r instanceof It)return r;if(!(this instanceof It))return new It(r,e);var t=fPe(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}It.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,i,s,a,o;return t=e.r/255,n=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=y$(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=pW(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=pW(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=dW(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=dW(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return mW(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return mPe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fr(this._r,255)*100)+"%",g:Math.round(Fr(this._g,255)*100)+"%",b:Math.round(Fr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fr(this._r,255)*100)+"%, "+Math.round(Fr(this._g,255)*100)+"%, "+Math.round(Fr(this._b,255)*100)+"%)":"rgba("+Math.round(Fr(this._r,255)*100)+"%, "+Math.round(Fr(this._g,255)*100)+"%, "+Math.round(Fr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:CPe[mW(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+gW(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=It(e);n="#"+gW(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return It(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(wPe,arguments)},brighten:function(){return this._applyModification(_Pe,arguments)},darken:function(){return this._applyModification(xPe,arguments)},desaturate:function(){return this._applyModification(gPe,arguments)},saturate:function(){return this._applyModification(vPe,arguments)},greyscale:function(){return this._applyModification(yPe,arguments)},spin:function(){return this._applyModification(bPe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(BPe,arguments)},complement:function(){return this._applyCombination(EPe,arguments)},monochromatic:function(){return this._applyCombination(MPe,arguments)},splitcomplement:function(){return this._applyCombination(SPe,arguments)},triad:function(){return this._applyCombination(vW,[3])},tetrad:function(){return this._applyCombination(vW,[4])}};It.fromRatio=function(r,e){if(X1(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?t[n]=r[n]:t[n]=pv(r[n]));r=t}return It(r,e)};function fPe(r){var e={r:0,g:0,b:0},t=1,n=null,i=null,s=null,a=!1,o=!1;return typeof r=="string"&&(r=UPe(r)),X1(r)=="object"&&(Xc(r.r)&&Xc(r.g)&&Xc(r.b)?(e=hPe(r.r,r.g,r.b),a=!0,o=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Xc(r.h)&&Xc(r.s)&&Xc(r.v)?(n=pv(r.s),i=pv(r.v),e=pPe(r.h,n,i),a=!0,o="hsv"):Xc(r.h)&&Xc(r.s)&&Xc(r.l)&&(n=pv(r.s),s=pv(r.l),e=dPe(r.h,n,s),a=!0,o="hsl"),r.hasOwnProperty("a")&&(t=r.a)),t=y$(t),{ok:a,format:r.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function hPe(r,e,t){return{r:Fr(r,255)*255,g:Fr(e,255)*255,b:Fr(t,255)*255}}function dW(r,e,t){r=Fr(r,255),e=Fr(e,255),t=Fr(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),s,a,o=(n+i)/2;if(n==i)s=a=0;else{var l=n-i;switch(a=o>.5?l/(2-n-i):l/(n+i),n){case r:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-r)/l+2;break;case t:s=(r-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function dPe(r,e,t){var n,i,s;r=Fr(r,360),e=Fr(e,100),t=Fr(t,100);function a(c,u,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(u-c)*6*f:f<1/2?u:f<2/3?c+(u-c)*(2/3-f)*6:c}if(e===0)n=i=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;n=a(l,o,r+1/3),i=a(l,o,r),s=a(l,o,r-1/3)}return{r:n*255,g:i*255,b:s*255}}function pW(r,e,t){r=Fr(r,255),e=Fr(e,255),t=Fr(t,255);var n=Math.max(r,e,t),i=Math.min(r,e,t),s,a,o=n,l=n-i;if(a=n===0?0:l/n,n==i)s=0;else{switch(n){case r:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-r)/l+2;break;case t:s=(r-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function pPe(r,e,t){r=Fr(r,360)*6,e=Fr(e,100),t=Fr(t,100);var n=Math.floor(r),i=r-n,s=t*(1-e),a=t*(1-i*e),o=t*(1-(1-i)*e),l=n%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],f=[s,s,o,t,t,a][l];return{r:c*255,g:u*255,b:f*255}}function mW(r,e,t,n){var i=[gl(Math.round(r).toString(16)),gl(Math.round(e).toString(16)),gl(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function mPe(r,e,t,n,i){var s=[gl(Math.round(r).toString(16)),gl(Math.round(e).toString(16)),gl(Math.round(t).toString(16)),gl(w$(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function gW(r,e,t,n){var i=[gl(w$(n)),gl(Math.round(r).toString(16)),gl(Math.round(e).toString(16)),gl(Math.round(t).toString(16))];return i.join("")}It.equals=function(r,e){return!r||!e?!1:It(r).toRgbString()==It(e).toRgbString()};It.random=function(){return It.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function gPe(r,e){e=e===0?0:e||10;var t=It(r).toHsl();return t.s-=e/100,t.s=yS(t.s),It(t)}function vPe(r,e){e=e===0?0:e||10;var t=It(r).toHsl();return t.s+=e/100,t.s=yS(t.s),It(t)}function yPe(r){return It(r).desaturate(100)}function wPe(r,e){e=e===0?0:e||10;var t=It(r).toHsl();return t.l+=e/100,t.l=yS(t.l),It(t)}function _Pe(r,e){e=e===0?0:e||10;var t=It(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),It(t)}function xPe(r,e){e=e===0?0:e||10;var t=It(r).toHsl();return t.l-=e/100,t.l=yS(t.l),It(t)}function bPe(r,e){var t=It(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,It(t)}function EPe(r){var e=It(r).toHsl();return e.h=(e.h+180)%360,It(e)}function vW(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=It(r).toHsl(),n=[It(r)],i=360/e,s=1;s<e;s++)n.push(It({h:(t.h+s*i)%360,s:t.s,l:t.l}));return n}function SPe(r){var e=It(r).toHsl(),t=e.h;return[It(r),It({h:(t+72)%360,s:e.s,l:e.l}),It({h:(t+216)%360,s:e.s,l:e.l})]}function BPe(r,e,t){e=e||6,t=t||30;var n=It(r).toHsl(),i=360/t,s=[It(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(It(n));return s}function MPe(r,e){e=e||6;for(var t=It(r).toHsv(),n=t.h,i=t.s,s=t.v,a=[],o=1/e;e--;)a.push(It({h:n,s:i,v:s})),s=(s+o)%1;return a}It.mix=function(r,e,t){t=t===0?0:t||50;var n=It(r).toRgb(),i=It(e).toRgb(),s=t/100,a={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return It(a)};It.readability=function(r,e){var t=It(r),n=It(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};It.isReadable=function(r,e,t){var n=It.readability(r,e),i,s;switch(s=!1,i=FPe(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};It.mostReadable=function(r,e,t){var n=null,i=0,s,a,o,l;t=t||{},a=t.includeFallbackColors,o=t.level,l=t.size;for(var c=0;c<e.length;c++)s=It.readability(r,e[c]),s>i&&(i=s,n=It(e[c]));return It.isReadable(r,n,{level:o,size:l})||!a?n:(t.includeFallbackColors=!1,It.mostReadable(r,["#fff","#000"],t))};var pD=It.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},CPe=It.hexNames=TPe(pD);function TPe(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function y$(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Fr(r,e){RPe(r)&&(r="100%");var t=IPe(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function yS(r){return Math.min(1,Math.max(0,r))}function Va(r){return parseInt(r,16)}function RPe(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function IPe(r){return typeof r=="string"&&r.indexOf("%")!=-1}function gl(r){return r.length==1?"0"+r:""+r}function pv(r){return r<=1&&(r=r*100+"%"),r}function w$(r){return Math.round(parseFloat(r)*255).toString(16)}function yW(r){return Va(r)/255}var ll=function(){var r="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+r+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Xc(r){return!!ll.CSS_UNIT.exec(r)}function UPe(r){r=r.replace(uPe,"").replace(APe,"").toLowerCase();var e=!1;if(pD[r])r=pD[r],e=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=ll.rgb.exec(r))?{r:t[1],g:t[2],b:t[3]}:(t=ll.rgba.exec(r))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=ll.hsl.exec(r))?{h:t[1],s:t[2],l:t[3]}:(t=ll.hsla.exec(r))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=ll.hsv.exec(r))?{h:t[1],s:t[2],v:t[3]}:(t=ll.hsva.exec(r))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=ll.hex8.exec(r))?{r:Va(t[1]),g:Va(t[2]),b:Va(t[3]),a:yW(t[4]),format:e?"name":"hex8"}:(t=ll.hex6.exec(r))?{r:Va(t[1]),g:Va(t[2]),b:Va(t[3]),format:e?"name":"hex"}:(t=ll.hex4.exec(r))?{r:Va(t[1]+""+t[1]),g:Va(t[2]+""+t[2]),b:Va(t[3]+""+t[3]),a:yW(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=ll.hex3.exec(r))?{r:Va(t[1]+""+t[1]),g:Va(t[2]+""+t[2]),b:Va(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function FPe(r){var e,t;return r=r||{level:"AA",size:"small"},e=(r.level||"AA").toUpperCase(),t=(r.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var wW=function(e){var t=["r","g","b","a","h","s","l","v"],n=0,i=0;return cPe(t,function(s){if(e[s]&&(n+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var a=/^\d+%$/;a.test(e[s])&&(i+=1)}}),n===i?e:!1},mv=function(e,t){var n=e.hex?It(e.hex):It(e),i=n.toHsl(),s=n.toHsv(),a=n.toRgb(),o=n.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var l=o==="000000"&&a.a===0;return{hsl:i,hex:l?"transparent":"#"+o,rgb:a,hsv:s,oldHue:e.h||t||i.h,source:e.source}},uf=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&It(e).isValid()},DN=function(e){if(!e)return"#fff";var t=mv(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},LU=function(e,t){var n=e.replace("°","");return It(t+" ("+n+")")._ok},V0=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},LPe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function DPe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function OPe(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function NPe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var Ia=function(e){var t=function(n){NPe(i,n);function i(s){DPe(this,i);var a=OPe(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return a.handleChange=function(o,l){var c=wW(o);if(c){var u=mv(o,o.h||a.state.oldHue);a.setState(u),a.props.onChangeComplete&&a.debounce(a.props.onChangeComplete,u,l),a.props.onChange&&a.props.onChange(u,l)}},a.handleSwatchHover=function(o,l){var c=wW(o);if(c){var u=mv(o,o.h||a.state.oldHue);a.props.onSwatchHover&&a.props.onSwatchHover(u,l)}},a.state=V0({},mv(s.color,0)),a.debounce=g$(function(o,l,c){o(l,c)},100),a}return LPe(i,[{key:"render",value:function(){var a={};return this.props.onSwatchHover&&(a.onSwatchHover=this.handleSwatchHover),le.createElement(e,V0({},this.props,this.state,{onChange:this.handleChange},a))}}],[{key:"getDerivedStateFromProps",value:function(a,o){return V0({},mv(a.color,o.oldHue))}}]),i}(we.PureComponent||we.Component);return t.propTypes=V0({},e.propTypes),t.defaultProps=V0({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},PPe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},kPe=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function HPe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _W(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function QPe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var zPe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){QPe(i,n);function i(){var s,a,o,l;HPe(this,i);for(var c=arguments.length,u=Array(c),f=0;f<c;f++)u[f]=arguments[f];return l=(a=(o=_W(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(u))),o),o.state={focus:!1},o.handleFocus=function(){return o.setState({focus:!0})},o.handleBlur=function(){return o.setState({focus:!1})},a),_W(o,l)}return kPe(i,[{key:"render",value:function(){return le.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},le.createElement(e,PPe({},this.props,this.state)))}}]),i}(le.Component)},xW=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},VPe=13,GPe=function(e){var t=e.color,n=e.style,i=e.onClick,s=i===void 0?function(){}:i,a=e.onHover,o=e.title,l=o===void 0?t:o,c=e.children,u=e.focus,f=e.focusStyle,d=f===void 0?{}:f,p=t==="transparent",v=$t({default:{swatch:xW({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,u?d:{})}}),m=function(B){return s(t,B)},g=function(B){return B.keyCode===VPe&&s(t,B)},w=function(B){return a(t,B)},b={};return a&&(b.onMouseOver=w),le.createElement("div",xW({style:v.swatch,onClick:m,title:l,tabIndex:0,onKeyDown:g},b),c,p&&le.createElement(tg,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Dh=zPe(GPe);var jPe=function(e){var t=e.direction,n=$t({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return le.createElement("div",{style:n.picker})},WPe=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_$=function(e){var t=e.rgb,n=e.hsl,i=e.width,s=e.height,a=e.onChange,o=e.direction,l=e.style,c=e.renderers,u=e.pointer,f=e.className,d=f===void 0?"":f,p=$t({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return le.createElement("div",{style:p.picker,className:"alpha-picker "+d},le.createElement(MN,WPe({},p.alpha,{rgb:t,hsl:n,pointer:u,renderers:c,onChange:a,direction:o})))};_$.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:jPe};Ia(_$);function x$(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var KPe="__lodash_hash_undefined__";function qPe(r){return this.__data__.set(r,KPe),this}function YPe(r){return this.__data__.has(r)}function Z1(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Ou;++e<t;)this.add(r[e])}Z1.prototype.add=Z1.prototype.push=qPe;Z1.prototype.has=YPe;function XPe(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function ZPe(r,e){return r.has(e)}var JPe=1,$Pe=2;function b$(r,e,t,n,i,s){var a=t&JPe,o=r.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(r),u=s.get(e);if(c&&u)return c==e&&u==r;var f=-1,d=!0,p=t&$Pe?new Z1:void 0;for(s.set(r,e),s.set(e,r);++f<o;){var v=r[f],m=e[f];if(n)var g=a?n(m,v,f,e,r,s):n(v,m,f,r,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(p){if(!XPe(e,function(w,b){if(!ZPe(p,b)&&(v===w||i(v,w,t,n,s)))return p.push(b)})){d=!1;break}}else if(!(v===m||i(v,m,t,n,s))){d=!1;break}}return s.delete(r),s.delete(e),d}function e3e(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function t3e(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var n3e=1,r3e=2,i3e="[object Boolean]",s3e="[object Date]",a3e="[object Error]",o3e="[object Map]",l3e="[object Number]",c3e="[object RegExp]",u3e="[object Set]",A3e="[object String]",f3e="[object Symbol]",h3e="[object ArrayBuffer]",d3e="[object DataView]",bW=rf?rf.prototype:void 0,DU=bW?bW.valueOf:void 0;function p3e(r,e,t,n,i,s,a){switch(t){case d3e:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case h3e:return!(r.byteLength!=e.byteLength||!s(new K1(r),new K1(e)));case i3e:case s3e:case l3e:return zy(+r,+e);case a3e:return r.name==e.name&&r.message==e.message;case c3e:case A3e:return r==e+"";case o3e:var o=e3e;case u3e:var l=n&n3e;if(o||(o=t3e),r.size!=e.size&&!l)return!1;var c=a.get(r);if(c)return c==e;n|=r3e,a.set(r,e);var u=b$(o(r),o(e),n,i,s,a);return a.delete(r),u;case f3e:if(DU)return DU.call(r)==DU.call(e)}return!1}function m3e(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function g3e(r,e,t){var n=e(r);return lo(r)?n:m3e(n,t(r))}function v3e(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var a=r[t];e(a,t,r)&&(s[i++]=a)}return s}function y3e(){return[]}var w3e=Object.prototype,_3e=w3e.propertyIsEnumerable,EW=Object.getOwnPropertySymbols,x3e=EW?function(r){return r==null?[]:(r=Object(r),v3e(EW(r),function(e){return _3e.call(r,e)}))}:y3e;function SW(r){return g3e(r,LN,x3e)}var b3e=1,E3e=Object.prototype,S3e=E3e.hasOwnProperty;function B3e(r,e,t,n,i,s){var a=t&b3e,o=SW(r),l=o.length,c=SW(e),u=c.length;if(l!=u&&!a)return!1;for(var f=l;f--;){var d=o[f];if(!(a?d in e:S3e.call(e,d)))return!1}var p=s.get(r),v=s.get(e);if(p&&v)return p==e&&v==r;var m=!0;s.set(r,e),s.set(e,r);for(var g=a;++f<l;){d=o[f];var w=r[d],b=e[d];if(n)var E=a?n(b,w,d,e,r,s):n(w,b,d,r,e,s);if(!(E===void 0?w===b||i(w,b,t,n,s):E)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var B=r.constructor,S=e.constructor;B!=S&&"constructor"in r&&"constructor"in e&&!(typeof B=="function"&&B instanceof B&&typeof S=="function"&&S instanceof S)&&(m=!1)}return s.delete(r),s.delete(e),m}var mD=Lh(Sl,"DataView"),gD=Lh(Sl,"Promise"),vD=Lh(Sl,"Set"),yD=Lh(Sl,"WeakMap"),BW="[object Map]",M3e="[object Object]",MW="[object Promise]",CW="[object Set]",TW="[object WeakMap]",RW="[object DataView]",C3e=Fh(mD),T3e=Fh(hy),R3e=Fh(gD),I3e=Fh(vD),U3e=Fh(yD),RA=Uh;(mD&&RA(new mD(new ArrayBuffer(1)))!=RW||hy&&RA(new hy)!=BW||gD&&RA(gD.resolve())!=MW||vD&&RA(new vD)!=CW||yD&&RA(new yD)!=TW)&&(RA=function(r){var e=Uh(r),t=e==M3e?r.constructor:void 0,n=t?Fh(t):"";if(n)switch(n){case C3e:return RW;case T3e:return BW;case R3e:return MW;case I3e:return CW;case U3e:return TW}return e});var F3e=1,IW="[object Arguments]",UW="[object Array]",Gx="[object Object]",L3e=Object.prototype,FW=L3e.hasOwnProperty;function D3e(r,e,t,n,i,s){var a=lo(r),o=lo(e),l=a?UW:RA(r),c=o?UW:RA(e);l=l==IW?Gx:l,c=c==IW?Gx:c;var u=l==Gx,f=c==Gx,d=l==c;if(d&&Y1(r)){if(!Y1(e))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new sc),a||UN(r)?b$(r,e,t,n,i,s):p3e(r,e,l,t,n,i,s);if(!(t&F3e)){var p=u&&FW.call(r,"__wrapped__"),v=f&&FW.call(e,"__wrapped__");if(p||v){var m=p?r.value():r,g=v?e.value():e;return s||(s=new sc),i(m,g,t,n,s)}}return d?(s||(s=new sc),B3e(r,e,t,n,i,s)):!1}function ON(r,e,t,n,i){return r===e?!0:r==null||e==null||!sf(r)&&!sf(e)?r!==r&&e!==e:D3e(r,e,t,n,ON,i)}var O3e=1,N3e=2;function P3e(r,e,t,n){var i=t.length,s=i;if(r==null)return!s;for(r=Object(r);i--;){var a=t[i];if(a[2]?a[1]!==r[a[0]]:!(a[0]in r))return!1}for(;++i<s;){a=t[i];var o=a[0],l=r[o],c=a[1];if(a[2]){if(l===void 0&&!(o in r))return!1}else{var u=new sc,f;if(!(f===void 0?ON(c,l,O3e|N3e,n,u):f))return!1}}return!0}function E$(r){return r===r&&!jo(r)}function k3e(r){for(var e=LN(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,E$(i)]}return e}function S$(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function H3e(r){var e=k3e(r);return e.length==1&&e[0][2]?S$(e[0][0],e[0][1]):function(t){return t===r||P3e(t,r,e)}}var Q3e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z3e=/^\w*$/;function NN(r,e){if(lo(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||gS(r)?!0:z3e.test(r)||!Q3e.test(r)||e!=null&&r in Object(e)}var V3e="Expected a function";function PN(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(V3e);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=r.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new(PN.Cache||Ou),t}PN.Cache=Ou;var G3e=500;function j3e(r){var e=PN(r,function(n){return t.size===G3e&&t.clear(),n}),t=e.cache;return e}var W3e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K3e=/\\(\\)?/g,q3e=j3e(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(W3e,function(t,n,i,s){e.push(i?s.replace(K3e,"$1"):n||t)}),e}),LW=rf?rf.prototype:void 0,DW=LW?LW.toString:void 0;function B$(r){if(typeof r=="string")return r;if(lo(r))return x$(r,B$)+"";if(gS(r))return DW?DW.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Y3e(r){return r==null?"":B$(r)}function M$(r,e){return lo(r)?r:NN(r,e)?[r]:q3e(Y3e(r))}function wS(r){if(typeof r=="string"||gS(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function C$(r,e){e=M$(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[wS(e[t++])];return t&&t==n?r:void 0}function X3e(r,e,t){var n=r==null?void 0:C$(r,e);return n===void 0?t:n}function Z3e(r,e){return r!=null&&e in Object(r)}function J3e(r,e,t){e=M$(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var a=wS(e[n]);if(!(s=r!=null&&t(r,a)))break;r=r[a]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&IN(i)&&FN(a,i)&&(lo(r)||q1(r)))}function $3e(r,e){return r!=null&&J3e(r,e,Z3e)}var eke=1,tke=2;function nke(r,e){return NN(r)&&E$(e)?S$(wS(r),e):function(t){var n=X3e(t,r);return n===void 0&&n===e?$3e(t,r):ON(e,n,eke|tke)}}function rke(r){return function(e){return e?.[r]}}function ike(r){return function(e){return C$(e,r)}}function ske(r){return NN(r)?rke(wS(r)):ike(r)}function ake(r){return typeof r=="function"?r:r==null?mS:typeof r=="object"?lo(r)?nke(r[0],r[1]):H3e(r):ske(r)}function oke(r,e){var t=-1,n=rg(r)?Array(r.length):[];return v$(r,function(i,s,a){n[++t]=e(i,s,a)}),n}function Oh(r,e){var t=lo(r)?x$:oke;return t(r,ake(e))}var lke=function(e){var t=e.colors,n=e.onClick,i=e.onSwatchHover,s=$t({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return le.createElement("div",{style:s.swatches},Oh(t,function(a){return le.createElement(Dh,{key:a,color:a,style:s.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+a}})}),le.createElement("div",{style:s.clear}))},kN=function(e){var t=e.onChange,n=e.onSwatchHover,i=e.hex,s=e.colors,a=e.width,o=e.triangle,l=e.styles,c=l===void 0?{}:l,u=e.className,f=u===void 0?"":u,d=i==="transparent",p=function(g,w){uf(g)&&t({hex:g,source:"hex"},w)},v=$t(Ra({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:DN(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":o==="hide"});return le.createElement("div",{style:v.card,className:"block-picker "+f},le.createElement("div",{style:v.triangle}),le.createElement("div",{style:v.head},d&&le.createElement(tg,{borderRadius:"6px 6px 0 0"}),le.createElement("div",{style:v.label},i)),le.createElement("div",{style:v.body},le.createElement(lke,{colors:s,onClick:p,onSwatchHover:n}),le.createElement(Dn,{style:{input:v.input},value:i,onChange:p})))};kN.propTypes={width:At.oneOfType([At.string,At.number]),colors:At.arrayOf(At.string),triangle:At.oneOf(["top","hide"]),styles:At.object};kN.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Ia(kN);var gp={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},vp={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},yp={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},wp={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},_p={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},xp={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},bp={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Ep={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Sp={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},gv={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Bp={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Mp={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Cp={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Tp={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Rp={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},Ip={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Up={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Fp={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},T$=function(e){var t=e.color,n=e.onClick,i=e.onSwatchHover,s=e.hover,a=e.active,o=e.circleSize,l=e.circleSpacing,c=$t({default:{swatch:{width:o,height:o,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:a});return le.createElement("div",{style:c.swatch},le.createElement(Dh,{style:c.Swatch,color:t,onClick:n,onHover:i,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};T$.defaultProps={circleSize:28,circleSpacing:14};const cke=BN.handleHover(T$);var HN=function(e){var t=e.width,n=e.onChange,i=e.onSwatchHover,s=e.colors,a=e.hex,o=e.circleSize,l=e.styles,c=l===void 0?{}:l,u=e.circleSpacing,f=e.className,d=f===void 0?"":f,p=$t(Ra({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},c)),v=function(g,w){return n({hex:g,source:"hex"},w)};return le.createElement("div",{style:p.card,className:"circle-picker "+d},Oh(s,function(m){return le.createElement(cke,{key:m,color:m,onClick:v,onSwatchHover:i,active:a===m.toLowerCase(),circleSize:o,circleSpacing:u})}))};HN.propTypes={width:At.oneOfType([At.string,At.number]),circleSize:At.number,circleSpacing:At.number,styles:At.object};HN.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[gp[500],vp[500],yp[500],wp[500],_p[500],xp[500],bp[500],Ep[500],Sp[500],gv[500],Bp[500],Mp[500],Cp[500],Tp[500],Rp[500],Ip[500],Up[500],Fp[500]],styles:{}};Ia(HN);function OW(r){return r===void 0}var jx={},NW;function uke(){if(NW)return jx;NW=1,Object.defineProperty(jx,"__esModule",{value:!0});var r=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a},e=bh(),t=n(e);function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var l={};for(var c in a)o.indexOf(c)>=0||Object.prototype.hasOwnProperty.call(a,c)&&(l[c]=a[c]);return l}var s=24;return jx.default=function(a){var o=a.fill,l=o===void 0?"currentColor":o,c=a.width,u=c===void 0?s:c,f=a.height,d=f===void 0?s:f,p=a.style,v=p===void 0?{}:p,m=i(a,["fill","width","height","style"]);return t.default.createElement("svg",r({viewBox:"0 0 "+s+" "+s,style:r({fill:l,width:u,height:d},v)},m),t.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},jx}var Ake=uke();const fke=na(Ake);var hke=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function dke(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function pke(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function mke(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var R$=function(r){mke(e,r);function e(t){dke(this,e);var n=pke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,s){i.hex?uf(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(OW(i.s)?n.props.hsl.s:i.s),l:Number(OW(i.l)?n.props.hsl.l:i.l),source:"hsl"},s))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?n.state={view:"rgb"}:n.state={view:t.view},n}return hke(e,[{key:"render",value:function(){var n=this,i=$t({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=le.createElement("div",{style:i.fields,className:"flexbox-fix"},le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=le.createElement("div",{style:i.fields,className:"flexbox-fix"},le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),le.createElement("div",{style:i.alpha},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=le.createElement("div",{style:i.fields,className:"flexbox-fix"},le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),le.createElement("div",{style:i.field},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),le.createElement("div",{style:i.alpha},le.createElement(Dn,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),le.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,le.createElement("div",{style:i.toggle},le.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(o){return n.icon=o}},le.createElement(fke,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(le.Component);R$.defaultProps={view:"hex"};var PW=function(){var e=$t({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return le.createElement("div",{style:e.picker})},gke=function(){var e=$t({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return le.createElement("div",{style:e.picker})},QN=function(e){var t=e.width,n=e.onChange,i=e.disableAlpha,s=e.rgb,a=e.hsl,o=e.hsv,l=e.hex,c=e.renderers,u=e.styles,f=u===void 0?{}:u,d=e.className,p=d===void 0?"":d,v=e.defaultView,m=$t(Ra({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},f),{disableAlpha:i});return le.createElement("div",{style:m.picker,className:"chrome-picker "+p},le.createElement("div",{style:m.saturation},le.createElement(vS,{style:m.Saturation,hsl:a,hsv:o,pointer:gke,onChange:n})),le.createElement("div",{style:m.body},le.createElement("div",{style:m.controls,className:"flexbox-fix"},le.createElement("div",{style:m.color},le.createElement("div",{style:m.swatch},le.createElement("div",{style:m.active}),le.createElement(tg,{renderers:c}))),le.createElement("div",{style:m.toggles},le.createElement("div",{style:m.hue},le.createElement(ng,{style:m.Hue,hsl:a,pointer:PW,onChange:n})),le.createElement("div",{style:m.alpha},le.createElement(MN,{style:m.Alpha,rgb:s,hsl:a,pointer:PW,renderers:c,onChange:n})))),le.createElement(R$,{rgb:s,hsl:a,hex:l,view:v,onChange:n,disableAlpha:i})))};QN.propTypes={width:At.oneOfType([At.string,At.number]),disableAlpha:At.bool,styles:At.object,defaultView:At.oneOf(["hex","rgb","hsl"])};QN.defaultProps={width:225,disableAlpha:!1,styles:{}};const vke=Ia(QN);var yke=function(e){var t=e.color,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,a=e.active,o=$t({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:DN(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return le.createElement(Dh,{style:o.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},le.createElement("div",{style:o.dot}))},wke=function(e){var t=e.hex,n=e.rgb,i=e.onChange,s=$t({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(l,c){l.r||l.g||l.b?i({r:l.r||n.r,g:l.g||n.g,b:l.b||n.b,source:"rgb"},c):i({hex:l.hex,source:"hex"},c)};return le.createElement("div",{style:s.fields,className:"flexbox-fix"},le.createElement("div",{style:s.active}),le.createElement(Dn,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:a}),le.createElement(Dn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:a}),le.createElement(Dn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:a}),le.createElement(Dn,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:a}))},zN=function(e){var t=e.onChange,n=e.onSwatchHover,i=e.colors,s=e.hex,a=e.rgb,o=e.styles,l=o===void 0?{}:o,c=e.className,u=c===void 0?"":c,f=$t(Ra({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(v,m){v.hex?uf(v.hex)&&t({hex:v.hex,source:"hex"},m):t(v,m)};return le.createElement(Vy,{style:f.Compact,styles:l},le.createElement("div",{style:f.compact,className:"compact-picker "+u},le.createElement("div",null,Oh(i,function(p){return le.createElement(yke,{key:p,color:p,active:p.toLowerCase()===s,onClick:d,onSwatchHover:n})}),le.createElement("div",{style:f.clear})),le.createElement(wke,{hex:s,rgb:a,onChange:d})))};zN.propTypes={colors:At.arrayOf(At.string),styles:At.object};zN.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Ia(zN);var _ke=function(e){var t=e.hover,n=e.color,i=e.onClick,s=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=$t({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return le.createElement("div",{style:o.swatch},le.createElement(Dh,{color:n,onClick:i,onHover:s,focusStyle:a}))};const xke=BN.handleHover(_ke);var VN=function(e){var t=e.width,n=e.colors,i=e.onChange,s=e.onSwatchHover,a=e.triangle,o=e.styles,l=o===void 0?{}:o,c=e.className,u=c===void 0?"":c,f=$t(Ra({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right","bottom-left-triangle":a==="bottom-left","bottom-right-triangle":a==="bottom-right"}),d=function(v,m){return i({hex:v,source:"hex"},m)};return le.createElement("div",{style:f.card,className:"github-picker "+u},le.createElement("div",{style:f.triangleShadow}),le.createElement("div",{style:f.triangle}),Oh(n,function(p){return le.createElement(xke,{color:p,key:p,onClick:d,onSwatchHover:s})}))};VN.propTypes={width:At.oneOfType([At.string,At.number]),colors:At.arrayOf(At.string),triangle:At.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:At.object};VN.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Ia(VN);var bke=function(e){var t=e.direction,n=$t({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return le.createElement("div",{style:n.picker})},Eke=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},GN=function(e){var t=e.width,n=e.height,i=e.onChange,s=e.hsl,a=e.direction,o=e.pointer,l=e.styles,c=l===void 0?{}:l,u=e.className,f=u===void 0?"":u,d=$t(Ra({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},c)),p=function(m){return i({a:1,h:m.h,l:.5,s:1})};return le.createElement("div",{style:d.picker,className:"hue-picker "+f},le.createElement(ng,Eke({},d.hue,{hsl:s,pointer:o,onChange:p,direction:a})))};GN.propTypes={styles:At.object};GN.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:bke,styles:{}};Ia(GN);var Ske=function(e){var t=e.onChange,n=e.hex,i=e.rgb,s=e.styles,a=s===void 0?{}:s,o=e.className,l=o===void 0?"":o,c=$t(Ra({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),u=function(d,p){d.hex?uf(d.hex)&&t({hex:d.hex,source:"hex"},p):(d.r||d.g||d.b)&&t({r:d.r||i.r,g:d.g||i.g,b:d.b||i.b,source:"rgb"},p)};return le.createElement(Vy,{styles:a},le.createElement("div",{style:c.material,className:"material-picker "+l},le.createElement(Dn,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:n,onChange:u}),le.createElement("div",{style:c.split,className:"flexbox-fix"},le.createElement("div",{style:c.third},le.createElement(Dn,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:i.r,onChange:u})),le.createElement("div",{style:c.third},le.createElement(Dn,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:i.g,onChange:u})),le.createElement("div",{style:c.third},le.createElement(Dn,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:i.b,onChange:u})))))};Ia(Ske);var Bke=function(e){var t=e.onChange,n=e.rgb,i=e.hsv,s=e.hex,a=$t({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(c,u){c["#"]?uf(c["#"])&&t({hex:c["#"],source:"hex"},u):c.r||c.g||c.b?t({r:c.r||n.r,g:c.g||n.g,b:c.b||n.b,source:"rgb"},u):(c.h||c.s||c.v)&&t({h:c.h||i.h,s:c.s||i.s,v:c.v||i.v,source:"hsv"},u)};return le.createElement("div",{style:a.fields},le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(i.h),onChange:o}),le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:o}),le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:o}),le.createElement("div",{style:a.divider}),le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:o}),le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:o}),le.createElement(Dn,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:o}),le.createElement("div",{style:a.divider}),le.createElement(Dn,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:s.replace("#",""),onChange:o}),le.createElement("div",{style:a.fieldSymbols},le.createElement("div",{style:a.symbol},"°"),le.createElement("div",{style:a.symbol},"%"),le.createElement("div",{style:a.symbol},"%")))},Mke=function(e){var t=e.hsl,n=$t({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return le.createElement("div",{style:n.picker})},Cke=function(){var e=$t({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return le.createElement("div",{style:e.pointer},le.createElement("div",{style:e.left},le.createElement("div",{style:e.leftInside})),le.createElement("div",{style:e.right},le.createElement("div",{style:e.rightInside})))},kW=function(e){var t=e.onClick,n=e.label,i=e.children,s=e.active,a=$t({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return le.createElement("div",{style:a.button,onClick:t},n||i)},Tke=function(e){var t=e.rgb,n=e.currentColor,i=$t({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return le.createElement("div",null,le.createElement("div",{style:i.label},"new"),le.createElement("div",{style:i.swatches},le.createElement("div",{style:i.new}),le.createElement("div",{style:i.current})),le.createElement("div",{style:i.label},"current"))},Rke=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();function Ike(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Uke(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function Fke(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var jN=function(r){Fke(e,r);function e(t){Ike(this,e);var n=Uke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return Rke(e,[{key:"render",value:function(){var n=this.props,i=n.styles,s=i===void 0?{}:i,a=n.className,o=a===void 0?"":a,l=$t(Ra({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return le.createElement("div",{style:l.picker,className:"photoshop-picker "+o},le.createElement("div",{style:l.head},this.props.header),le.createElement("div",{style:l.body,className:"flexbox-fix"},le.createElement("div",{style:l.saturation},le.createElement(vS,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Mke,onChange:this.props.onChange})),le.createElement("div",{style:l.hue},le.createElement(ng,{direction:"vertical",hsl:this.props.hsl,pointer:Cke,onChange:this.props.onChange})),le.createElement("div",{style:l.controls},le.createElement("div",{style:l.top,className:"flexbox-fix"},le.createElement("div",{style:l.previews},le.createElement(Tke,{rgb:this.props.rgb,currentColor:this.state.currentColor})),le.createElement("div",{style:l.actions},le.createElement(kW,{label:"OK",onClick:this.props.onAccept,active:!0}),le.createElement(kW,{label:"Cancel",onClick:this.props.onCancel}),le.createElement(Bke,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(le.Component);jN.propTypes={header:At.string,styles:At.object};jN.defaultProps={header:"Color Picker",styles:{}};Ia(jN);var Lke=function(e){var t=e.onChange,n=e.rgb,i=e.hsl,s=e.hex,a=e.disableAlpha,o=$t({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),l=function(u,f){u.hex?uf(u.hex)&&t({hex:u.hex,source:"hex"},f):u.r||u.g||u.b?t({r:u.r||n.r,g:u.g||n.g,b:u.b||n.b,a:n.a,source:"rgb"},f):u.a&&(u.a<0?u.a=0:u.a>100&&(u.a=100),u.a/=100,t({h:i.h,s:i.s,l:i.l,a:u.a,source:"rgb"},f))};return le.createElement("div",{style:o.fields,className:"flexbox-fix"},le.createElement("div",{style:o.double},le.createElement(Dn,{style:{input:o.input,label:o.label},label:"hex",value:s.replace("#",""),onChange:l})),le.createElement("div",{style:o.single},le.createElement(Dn,{style:{input:o.input,label:o.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),le.createElement("div",{style:o.single},le.createElement(Dn,{style:{input:o.input,label:o.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),le.createElement("div",{style:o.single},le.createElement(Dn,{style:{input:o.input,label:o.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),le.createElement("div",{style:o.alpha},le.createElement(Dn,{style:{input:o.input,label:o.label},label:"a",value:Math.round(n.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},Dke=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},I$=function(e){var t=e.colors,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,a=$t({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(c,u){i({hex:c,source:"hex"},u)};return le.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map(function(l){var c=typeof l=="string"?{color:l}:l,u=""+c.color+(c.title||"");return le.createElement("div",{key:u,style:a.swatchWrap},le.createElement(Dh,Dke({},c,{style:a.swatch,onClick:o,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+c.color}})))}))};I$.propTypes={colors:At.arrayOf(At.oneOfType([At.string,At.shape({color:At.string,title:At.string})])).isRequired};var Oke=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},WN=function(e){var t=e.width,n=e.rgb,i=e.hex,s=e.hsv,a=e.hsl,o=e.onChange,l=e.onSwatchHover,c=e.disableAlpha,u=e.presetColors,f=e.renderers,d=e.styles,p=d===void 0?{}:d,v=e.className,m=v===void 0?"":v,g=$t(Ra({default:Oke({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:c});return le.createElement("div",{style:g.picker,className:"sketch-picker "+m},le.createElement("div",{style:g.saturation},le.createElement(vS,{style:g.Saturation,hsl:a,hsv:s,onChange:o})),le.createElement("div",{style:g.controls,className:"flexbox-fix"},le.createElement("div",{style:g.sliders},le.createElement("div",{style:g.hue},le.createElement(ng,{style:g.Hue,hsl:a,onChange:o})),le.createElement("div",{style:g.alpha},le.createElement(MN,{style:g.Alpha,rgb:n,hsl:a,renderers:f,onChange:o}))),le.createElement("div",{style:g.color},le.createElement(tg,null),le.createElement("div",{style:g.activeColor}))),le.createElement(Lke,{rgb:n,hsl:a,hex:i,onChange:o,disableAlpha:c}),le.createElement(I$,{colors:u,onClick:o,onSwatchHover:l}))};WN.propTypes={disableAlpha:At.bool,width:At.oneOfType([At.string,At.number]),styles:At.object};WN.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Ia(WN);var G0=function(e){var t=e.hsl,n=e.offset,i=e.onClick,s=i===void 0?function(){}:i,a=e.active,o=e.first,l=e.last,c=$t({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:l}),u=function(d){return s({h:t.h,s:.5,l:n,source:"hsl"},d)};return le.createElement("div",{style:c.swatch,onClick:u})},Nke=function(e){var t=e.onClick,n=e.hsl,i=$t({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return le.createElement("div",{style:i.swatches},le.createElement("div",{style:i.swatch},le.createElement(G0,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<s&&Math.abs(n.s-.5)<s,onClick:t,first:!0})),le.createElement("div",{style:i.swatch},le.createElement(G0,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<s&&Math.abs(n.s-.5)<s,onClick:t})),le.createElement("div",{style:i.swatch},le.createElement(G0,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<s&&Math.abs(n.s-.5)<s,onClick:t})),le.createElement("div",{style:i.swatch},le.createElement(G0,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<s&&Math.abs(n.s-.5)<s,onClick:t})),le.createElement("div",{style:i.swatch},le.createElement(G0,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<s&&Math.abs(n.s-.5)<s,onClick:t,last:!0})),le.createElement("div",{style:i.clear}))},Pke=function(){var e=$t({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return le.createElement("div",{style:e.picker})},KN=function(e){var t=e.hsl,n=e.onChange,i=e.pointer,s=e.styles,a=s===void 0?{}:s,o=e.className,l=o===void 0?"":o,c=$t(Ra({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return le.createElement("div",{style:c.wrap||{},className:"slider-picker "+l},le.createElement("div",{style:c.hue},le.createElement(ng,{style:c.Hue,hsl:t,pointer:i,onChange:n})),le.createElement("div",{style:c.swatches},le.createElement(Nke,{hsl:t,onClick:n})))};KN.propTypes={styles:At.object};KN.defaultProps={pointer:Pke,styles:{}};Ia(KN);var Wx={},HW;function kke(){if(HW)return Wx;HW=1,Object.defineProperty(Wx,"__esModule",{value:!0});var r=Object.assign||function(a){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a},e=bh(),t=n(e);function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){var l={};for(var c in a)o.indexOf(c)>=0||Object.prototype.hasOwnProperty.call(a,c)&&(l[c]=a[c]);return l}var s=24;return Wx.default=function(a){var o=a.fill,l=o===void 0?"currentColor":o,c=a.width,u=c===void 0?s:c,f=a.height,d=f===void 0?s:f,p=a.style,v=p===void 0?{}:p,m=i(a,["fill","width","height","style"]);return t.default.createElement("svg",r({viewBox:"0 0 "+s+" "+s,style:r({fill:l,width:u,height:d},v)},m),t.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Wx}var Hke=kke();const Qke=na(Hke);var zke=function(e){var t=e.color,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,a=e.first,o=e.last,l=e.active,c=$t({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:DN(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:l,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return le.createElement(Dh,{color:t,style:c.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},le.createElement("div",{style:c.check},le.createElement(Qke,null)))},Vke=function(e){var t=e.onClick,n=e.onSwatchHover,i=e.group,s=e.active,a=$t({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return le.createElement("div",{style:a.group},Oh(i,function(o,l){return le.createElement(zke,{key:o,color:o,active:o.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:t,onSwatchHover:n})}))},qN=function(e){var t=e.width,n=e.height,i=e.onChange,s=e.onSwatchHover,a=e.colors,o=e.hex,l=e.styles,c=l===void 0?{}:l,u=e.className,f=u===void 0?"":u,d=$t(Ra({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),p=function(m,g){return i({hex:m,source:"hex"},g)};return le.createElement("div",{style:d.picker,className:"swatches-picker "+f},le.createElement(Vy,null,le.createElement("div",{style:d.overflow},le.createElement("div",{style:d.body},Oh(a,function(v){return le.createElement(Vke,{key:v.toString(),group:v,active:o,onClick:p,onSwatchHover:s})}),le.createElement("div",{style:d.clear})))))};qN.propTypes={width:At.oneOfType([At.string,At.number]),height:At.oneOfType([At.string,At.number]),colors:At.arrayOf(At.arrayOf(At.string)),styles:At.object};qN.defaultProps={width:320,height:240,colors:[[gp[900],gp[700],gp[500],gp[300],gp[100]],[vp[900],vp[700],vp[500],vp[300],vp[100]],[yp[900],yp[700],yp[500],yp[300],yp[100]],[wp[900],wp[700],wp[500],wp[300],wp[100]],[_p[900],_p[700],_p[500],_p[300],_p[100]],[xp[900],xp[700],xp[500],xp[300],xp[100]],[bp[900],bp[700],bp[500],bp[300],bp[100]],[Ep[900],Ep[700],Ep[500],Ep[300],Ep[100]],[Sp[900],Sp[700],Sp[500],Sp[300],Sp[100]],["#194D33",gv[700],gv[500],gv[300],gv[100]],[Bp[900],Bp[700],Bp[500],Bp[300],Bp[100]],[Mp[900],Mp[700],Mp[500],Mp[300],Mp[100]],[Cp[900],Cp[700],Cp[500],Cp[300],Cp[100]],[Tp[900],Tp[700],Tp[500],Tp[300],Tp[100]],[Rp[900],Rp[700],Rp[500],Rp[300],Rp[100]],[Ip[900],Ip[700],Ip[500],Ip[300],Ip[100]],[Up[900],Up[700],Up[500],Up[300],Up[100]],[Fp[900],Fp[700],Fp[500],Fp[300],Fp[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Ia(qN);var YN=function(e){var t=e.onChange,n=e.onSwatchHover,i=e.hex,s=e.colors,a=e.width,o=e.triangle,l=e.styles,c=l===void 0?{}:l,u=e.className,f=u===void 0?"":u,d=$t(Ra({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right"}),p=function(m,g){uf(m)&&t({hex:m,source:"hex"},g)};return le.createElement("div",{style:d.card,className:"twitter-picker "+f},le.createElement("div",{style:d.triangleShadow}),le.createElement("div",{style:d.triangle}),le.createElement("div",{style:d.body},Oh(s,function(v,m){return le.createElement(Dh,{key:m,color:v,hex:v,style:d.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+v}})}),le.createElement("div",{style:d.hash},"#"),le.createElement(Dn,{label:null,style:{input:d.input},value:i.replace("#",""),onChange:p}),le.createElement("div",{style:d.clear})))};YN.propTypes={width:At.oneOfType([At.string,At.number]),triangle:At.oneOf(["hide","top-left","top-right"]),colors:At.arrayOf(At.string),styles:At.object};YN.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Ia(YN);var XN=function(e){var t=$t({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return le.createElement("div",{style:t.picker})};XN.propTypes={hsl:At.shape({h:At.number,s:At.number,l:At.number,a:At.number})};XN.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var ZN=function(e){var t=$t({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return le.createElement("div",{style:t.picker})};ZN.propTypes={hsl:At.shape({h:At.number,s:At.number,l:At.number,a:At.number})};ZN.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Gke=function(e){var t=e.onChange,n=e.rgb,i=e.hsl,s=e.hex,a=e.hsv,o=function(p,v){if(p.hex)uf(p.hex)&&t({hex:p.hex,source:"hex"},v);else if(p.rgb){var m=p.rgb.split(",");LU(p.rgb,"rgb")&&t({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},v)}else if(p.hsv){var g=p.hsv.split(",");LU(p.hsv,"hsv")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("°",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsv"},v))}else if(p.hsl){var w=p.hsl.split(",");LU(p.hsl,"hsl")&&(w[2]=w[2].replace("%",""),w[1]=w[1].replace("%",""),w[0]=w[0].replace("°",""),f[1]==1?f[1]=.01:f[2]==1&&(f[2]=.01),t({h:Number(w[0]),s:Number(w[1]),v:Number(w[2]),source:"hsl"},v))}},l=$t({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=n.r+", "+n.g+", "+n.b,u=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",f=Math.round(a.h)+"°, "+Math.round(a.s*100)+"%, "+Math.round(a.v*100)+"%";return le.createElement("div",{style:l.wrap,className:"flexbox-fix"},le.createElement("div",{style:l.fields},le.createElement("div",{style:l.double},le.createElement(Dn,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:o})),le.createElement("div",{style:l.column},le.createElement("div",{style:l.single},le.createElement(Dn,{style:{input:l.input2,label:l.label2},label:"rgb",value:c,onChange:o})),le.createElement("div",{style:l.single},le.createElement(Dn,{style:{input:l.input2,label:l.label2},label:"hsv",value:f,onChange:o})),le.createElement("div",{style:l.single},le.createElement(Dn,{style:{input:l.input2,label:l.label2},label:"hsl",value:u,onChange:o})))))},JN=function(e){var t=e.width,n=e.onChange,i=e.rgb,s=e.hsl,a=e.hsv,o=e.hex,l=e.header,c=e.styles,u=c===void 0?{}:c,f=e.className,d=f===void 0?"":f,p=$t(Ra({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return le.createElement("div",{style:p.picker,className:"google-picker "+d},le.createElement("div",{style:p.head},l),le.createElement("div",{style:p.swatch}),le.createElement("div",{style:p.saturation},le.createElement(vS,{hsl:s,hsv:a,pointer:XN,onChange:n})),le.createElement("div",{style:p.body},le.createElement("div",{style:p.controls,className:"flexbox-fix"},le.createElement("div",{style:p.hue},le.createElement(ng,{style:p.Hue,hsl:s,radius:"4px",pointer:ZN,onChange:n}))),le.createElement(Gke,{rgb:i,hsl:s,hex:o,hsv:a,onChange:n})))};JN.propTypes={width:At.oneOfType([At.string,At.number]),styles:At.object,header:At.string};JN.defaultProps={width:652,styles:{},header:"Color picker"};Ia(JN);const jke="_InformationContainerPos_zt5uf_2",Wke="_scrollContainer_zt5uf_15",OU={InformationContainerPos:jke,scrollContainer:Wke},Kke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABE5AAAROQEb2ZNGAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU1ZTg4ZDczLWQ3YmItNjg0NS1iNDkxLWYxZTU0YmRhZDE1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFhMDRkN2Y4LWVjNjQtZTg0ZC1iMjQzLWQ4ZjRhMjVlN2YzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzgwNzA3Yy0zNDg5LTAzNDctYmEwNy1kOTFhY2ZkYmUwODYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MjQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTVlODhkNzMtZDdiYi02ODQ1LWI0OTEtZjFlNTRiZGFkMTUyIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjQ3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+okruHwAAA6NJREFUeNrt279LG2EYwHG1CCqKPwKOJQU3cXYqXZ0KofgPuBWcUmsgoouCFArS0UXaWUpTFxHcUnE4cO6fULoUbWnTFk2ftz4p19BoLve+d33vvsN3KWre97lPUvPm7Gs2m32U3xgCABgCAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABABnlV5VR6QH0mOpIq229VSacPj4E/oY7Y9b0TWZtY0AwO7Qp6WH0q70XrqSmh1qSLMO1zKrj9Hp8a90jbu65mkAxBv4svRR+nHD0MOZr5t3uJ75iGsxa18GQPRBl6Sgy0GHu5QWHa5rUR8j6rrMXkoAuH3Ag9KLHgYcbsfh+nZirs3sbRAA/x5uQXrb4zMs3AdpyMH6hvRnx1nbpe6xAIC/hzssHcUcbrjnUr/F9fXrz7S1PrPXYQBcD3dKemdxuKZP0pzFNc7pz7S5RrPnqVwDkAGMSTXLg211auNtmL4NPXW0RrP3sVwC0EOVwNFgW9XjPMv01anueI2By8Or/xKAbHhSeuN4sK3OpPvSQIT1Dej3nCW0RjOLyVwA0Jf9IKHBhk8IX0vFLtZX1K9tJLzGII3/DtJ4q1dLeLDhvkjH0jNpSXqkLem/HevXpLW+WtJvEZP+IKee4nB9qZ7kB0pJPvOPuLiRzgkKmQCgz/xDLmrkDpN4JUjikOeEi9lzJ64Pi1wDOOAixu7AZwBVLmDsqr7/DrAhfeVCRs7MbCMr7wLWuKCRW8vaOYC5cfIbF/bWzIwqWT0J3LRww0eWM7PZzPpnAeUUztl9yMyknJdPA7el71z0P5lZbOftfgDzSvCTi/97BuW83hG0lfNfDM3et/J+T+BKjgGscFfwNYL1DodF+yl/Pm/j/oP9Doc869wVfPNh0Z50Vzr3GMC57mEvjUMeH/8yqKJvh15Ko9I96cJjABe6h1HdUyPJQx4fAdyRFtruz/MdQDG0nwWzRwB0DyJTAPjjUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAhgDMSJ89BmDWPgOA3gGMS0+kVU8zax8HAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIACQlX4BjeT0VuSSEBUAAAAASUVORK5CYII=",qke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MDc2OWJhLTIwNzQtMjU0Zi1iNjM5LWJiZjEyMTFlMjljNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxMzRkOGNhLTVlMWUtYzM0Yy05ZmM0LTNlZTgyNGQ1YTVhYyIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzUzMzYxZC05NmIzLTgwNDctYTA0ZC0wODcxYmNiNzY4MDAiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6Mjk6NTctMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgwNzY5YmEtMjA3NC0yNTRmLWI2MzktYmJmMTIxMWUyOWM1IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjE4LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Yrc/VQAAAzxJREFUeNrt3b9LFnEcwHE3IW1oiUCF/gCXcgibmhyaDEqnWhoCaRXqUQhByKVVXAqsMbQyGgIHA6GhSdpNc7E/IBehp8/h94ErRLzoOc671/Ce7/O572t4/PHc9bTb7R41NzcBADcBAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAinVrudUfPY92o+0ut5uu1Q9AtQCsRe2SWgMAAAAAAAAAAEo/7KHoWnQl12i0USKAjXTN/AzZTEMAdB/AQvQjfRrvtBMdlAjgIF0zP0M20wIA3QewVOJBF20JAAAAAACAbgJYrDCARQD+30EPRjei66nsU/fVaLXCAFbTjKO5ubMdBgEoDuBR9Cv6+VeHFQZweMy82Q6PACgOYLbCB120WQCKA5ipEYAZAAAAoCCAxzUC8BiAk3+3fzeajCZSN6OXNQLwMu3U2W8y7TwEwNENaTe0CQCWW7cbDOA2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcWQB3GgzgDgDLrbHoa/Ql1+foe40O+nvaKb9jtvMYAMutc9Hl9C3hTgPR0xoBeJp2yu+Y7XzO8wE8IAIAAAAAAABPCQPgTwD3ok/Req6P0V6FD3ovzZifOdvhHgD/9hKI7JPzpVwXoxcVBvAizZifeaDKL5fwsGgPiwYAAAAAAACAswJgKnqf3tzV6W20X+JB76dr5mfIZpoCoPsAeqPz6aeETheiDyUC+JCumZ8hm6kXAO8NBAAAAAAAoFQAfdG7EgFk1+oDoLuHOhI9jB6covvRVokAttI1TzNbtsMIAMUBPKnRXwOfAOD/AQAAAAAAACj04si6APDiyBMOejh6Fs3naqX/pqkLgPW0U37HbOdhAI7eoNXUbwZNAuC7gQAAAAAADQYw3mAA440BkD7svYlWotepV9FmgwFspnvQuR8r6R5N1hHAfIMPumjzdQQw52BP3RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA2QQwHe1E36JtHdu3dI+mfTVMAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAAV7DcOsgfgT8DmTAAAAABJRU5ErkJggg==",Yke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAOxAAADsQH1g+1JAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0xMS0yN1QxNToyNToyMC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMTEtMjdUMTU6MzM6MjgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMTEtMjdUMTU6MzM6MjgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdlZDg3MTgxLTIyMTUtOGY0Ni1iYWM3LTZlNjE0ZmM3ZTljNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZWQ4NzE4MS0yMjE1LThmNDYtYmFjNy02ZTYxNGZjN2U5YzYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZWQ4NzE4MS0yMjE1LThmNDYtYmFjNy02ZTYxNGZjN2U5YzYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdlZDg3MTgxLTIyMTUtOGY0Ni1iYWM3LTZlNjE0ZmM3ZTljNiIgc3RFdnQ6d2hlbj0iMjAyNC0xMS0yN1QxNToyNToyMC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgVVvLIAAAprSURBVHja7Z1rTFvXHcBdRZpAVatVWV5SpX2Z1g9LlCaCD2FLk4YlJOmgiVKyAkmhTSAPViAuYCgLwcBiygIYQ2KwsXHwdTDGBgyBBFhIAgbaoLXLa1IXVaqUSHzZ162VmsQ7x7meHOPHfZzre6/9//BTFAP/e+79/+65556XFV6vVwEkLnARQAC4CCAAAAIAIAAAAgAgAAACACAAAAIAIAAAAgAgAAACACBACA5e/pwzH1rPKUyTgwrzlEvxR2vt/z8fvz39CvrXSPME4Q1mX89n3nf1n0bDGIBCTrC9lvEiQBpiOZeqWw6VdA4CBLKM0IEA0hNgdeu4NfWw9ex/oiWdpwDBpCDWgQAiCpDdd7ZO5eoYYpN4ggJgJhGrQYDYC1CAWOKSeMICYO4jXCBAbARYg9jJJ/ECCOCnC7EeBBBOgG2If5NIvkAC+CkAAcgLsBXxHankCyzAU0Q5CEBWgKckky+wAJjniKMgAH8BtgiR/BgI4CcbBOAuQBrpal8EATBKEIC9AGtINvhEFuBHRDEIwE6AnUImP8YCYNoRSUInfXd3GedONSkJkC908kUQAKMFAZgJsBSnAniFSjw6F0Vmr0qR1VslawFWIZpikXwRBXiMSCYtwHumCl5jKqIKcNJY7+NYT11KrJIvogCYiySTn2FUKjLNKvkKoNVqfTR0XEhNEAEeIbaQSP4ufQnvxIsuwAeWGh+HLDX/JZBYSwBSFQCzX6jpWXJtA6TxTXzNdUO+eenqb3DMds/gdtW4vjCSCEwFyDLVtP5pSHvijFuXjzloqf4CfW7mKwEIQKOboPB0rmU+yW+bc7wbKrZmxprJUwBz89+cO4LjotetLr4SgAA0i4uLrxyxqXkJEC722D/nk/kI8FF/Q3W42ARqgYcgwIsCG/lW/0IJcMyhOSOgAM9AAIkL8LH9fHmouMP3Z18DAcgJ8ISvAKXudmWo2MXDrVV8BNhn/Kxj9MH8q8FxMwzKS4TmDNSDAGTe6y3BNUG010EWr4H4TjfjmF23Jzf5/0/oddANApDr3LGEgFQ/gJlw4kEAAQSQS08gCAACgAAgwAtmEWtBgMQVAFMEAoAAIAAIAAIwQXekv76x0+NMvbQwvPX8dcs+/JlIAtgx9VPmrJZb/e8UD7V8Sn/GJsb3u7vLth+wVOehMhUhUkCACMnHBP+9eWn8LS4S8BXgmENTFVwW/BlLCZbfM1W4UXl+oMv1LcIdgnoQIETy/TTftKXHWAC7crSjMMwgEataAAnApLzPEc9oHoIAQbju3XrjUN+f22IpQIRRQiEECMd+xNsJLwAmx1anYfMo4CGA3Xnv5i8kIgDmEeIiIjmhBaBj6ZhKwFEA+8iDudcjlYGNALsNZ7wHLleTerN5HO/zAXQsJBBCAHuWWaWPdGzcLmAjwB4kgACvuFpEUrxOCIkqgGpcf4SJBCwFsGcYlJZox86zqRvZSCWQAJh2xGlZCOCcmfhVLnWO6UpgXam7/WS0mEWu5spoErAQwB6p0efHcXdmLdvn//u9VUJ2dv2IUEpegJueWXznsJkUqjPdufpWtLhXF+4kfWg790U4ERgKYM8wRr/zuTT+dnWVxKrXM1sO6wLYduTomMZvmu7bE6pxGEUA312vuWHdwyL5rASIcdf3ETksDmUlwOfjXblsjmNYcG8KEEGHBDAFJxyT09eoGfpm4Q2mcTs8rlQOXcCxFgB3JJXHkwA+CT5xaGq4HrdswHAyMPFcYhgW3ZtQVc46+X8wV4oxAPaU3mBTsgJwWR2sq5syHxRji3THP26s5XLnp6Nnf2avyivWKChivVQFWIeY5CKBesqcFcvkd6M7n0vyMXuNSjGTj+mS8g4hqxH3uUhQcEVTq51z/Fbo5OdY1Zpd+hJOyU/vKvUesFSLLQDGJeUtYlw8TkzXfM2WLkTiA9sLXAeRJJB4P/fpm02yu4R18ZEA0780uWH0oedVXs/5uzNrMTnUOQ2fxGMyxK/6g5mkH7uSFGA9oZPUKcc6Cmsnez6w/X3yTaZlwn36bPv1oyVfIlV/MClS3im0gPA2sbpgft9daguq2nlX8ytG/LrLpJj4QCS9V3A53Ykh20mhEk++5AVQ0N2YshRgP//JHrFAJ4ft4rNlJIBtr6G856DlLJ6iFgjfMl8MA9+4y3L5xhAlPcQpZQFspSPaFZNFjw82VfKV4PjAym5v1bg+n5AERskLQP/uaXqygyQFKHOZC8Od58cOTTWfu3/w6xsh5yG23LbvICCBPASgfz+JnvYkKQEyDEqv/cs7G8IOPo3qCrmWtdTZdjrKNUwcAYL+9rHYAqQHTOyoGO09KoQAZS7BBfDKVYBk+uQfxVoAnPi9Kzt42sKd57EX7QDij4D2ucFtCStAQIy36UUSqlgIgMfzs0IP6bY1TPWu2Ab21NCFEr6NwJODzRXBcdXTvQcINQLlLUCImA8DllI9JyEAizl8bWGQ6mtg/AkQFL8+1ILLXErzbYahHCf3h/SuUjeq0pdfXrRR5pu2jcmyVMmhQwcEYIN6Yizl8OXGInRn52X2qrZnmiu/x8u0/BBcsQMCSFGAoDIUJVKyQQAQAAQIxPbNVGrxcOu/QIAEFQBzfsbqBgESWAD67UCsBFB5NnXnYWutCQSIbwEoTKW7s1g769il8zh3+MFluH7vq1WBnxU5mxv9fwMCyFsAXxId81MbuJTNODeyWWgRQADhBKA6pwd+R6KMxx1NGqEkAAFe9BiSnH9IlTq15T1fjW0mWc5Ls1e3FTqaGgmL8CThBaDL8oxU8hsmTNlClvXUUEstQQmMIAA5AajqUX1hjMpLql0AAgSMIvJK/omBC+pYLlTN729s5VnmnxANIACZzasppscZeTD3876F8V+XOH1fbOW/kyndLccO/DOmcSbuen7GsxaQx6xgGQhAOb6+weg1r8LdWRwlaVSB/S+tNdcMnzCJVzdtzuMhQRoI8HJ59nO5kIWOlsZosUc986+xfG5TTGuVHKpOH68rg2ItwBYOcwwp89L4xkhx+z233uR4l1KnnH+tjVZuzXXL+xziT4IABGbZFgycb40U79o9z6pc7neoT4KyYW05w7eCuFkdLKYAyWymnBcPt0bcrOqw9SyJQR4q94paT1CAJsQqEIBAg/CU60LYKvrK4sQvCXbYUIQEWJLyFjFSEoDRCqRcW/g7k3CXLXV6qCWkbKZ590YWx8oHAZiVLYnhWkTqaH9D+0tfZfPl2MYTjmY16cGbbPQ4Md0eeanB2bM4uvlQX81lhjF2SnmXMEkJQJevmOGqZCoEgg4vczgW3pR7jSwFEBllHEz7+s7f6QMCcCNbxsl/SvdvKEAAfhwVas8igZMv+e3i5UQ54d3LhK72t4IA5CmQQfJxg2+bHL4zSK6s57mjqZDsDNfaBwHI4+K4wbUQLEX6TgAQQDhWc9zqniRNfM4BBODPOo5fekFi0+eUwIEdEEAa6OjpVqQT/hMdN41keUEA4TAGwHnefkCMBiHKKZoAgPyBiwACwEUAAQAQAAABABAAAAEAEAAAAQAQAAABABAAAAEAEACIV/4HmscvZd8W84IAAAAASUVORK5CYII=",Xke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJkMTY5MDdlLWQyY2EtZDA0Mi05MWRjLTliZTMyYzYyYjlmOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNmQ1YTFjLWM5NjAtMDE0OS04OWQwLTQ3NDQ0MzAzZDI1ZCIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2N2JiZmQ0OC0yMGMzLTI0NDktODQyNS1kNWJmOTBlNzMwYjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MTQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmQxNjkwN2UtZDJjYS1kMDQyLTkxZGMtOWJlMzJjNjJiOWY5IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMzOjExLTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q6I0lAAAAs1JREFUeNrt3TtrFFEYgOFE2HjFXgv9AyIYsbATMaAWQtqAYBPQ0ibCgoSA/yGbwsJ/o6Ag3gMWEkurTeGlcfwGzoIs7LKT3TXOOU/xFlnYkNnvIRNOZs4sVFW1oHLzIQDgQwBAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAiVt91l2OXkRVi3oTXQVg+uHfjX60bPiDfkUPADj48C+2ePh/dx2AgwF4ncHw695HHQCaA6gy6hYAZQPYAqBsANsAlA1gBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAogDE14tRt359RL3ocbQSLQGQH4Aj0bsJ31tfF3EDgPwAvGzw/t/ROgDlAhhcY7gMQLkABpeXnQSgXAB1mwCUDeAjAGUD6ANQNoB9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCQ6wFQNoAnQ8fWiXYBKAfAnaFjOxXtATAewIdMhv85Ojp0bGfqq3sBGA/gcrodKrt9guO11Sm+XxkA0gd1P90Y2dbhb4w4rm8ATI5gpYVbx+8On/eHHoJRAdAMwVJ9j3zaNKE3ZmOFw6z+uTaj29HxEcdxLvoKQIHVd/XW9/XN4LcLAC0c/vno04xOLwC0bPj3oi8z/PsCgIYDWExLr/+iTlrkORutTbHYA8AMAXTTuvu8e5XO8XtTLPIAMAcATzNbVgagIYAdAAAAAAAAAAAAAADKA7CdGYA+AM0AbGUG4C0AzQDczAzABgDNAHTSHrs5DL9ebTwGQHME1zIY/vfoQjG7hc8BwXr0s8XDXyvqeQFzQnClhZeXPY8uFffEkDkiOB09ShDq/9rt/4f10/n+YXSiyGcGqfCnhgkAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAAaBp+gMB5Yr6zMTlPAAAAABJRU5ErkJggg==",Zke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFmYmE3YzFhLWI0MTMtMGQ0MS05YmRkLTE2ZGY2MTllOTgyMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMWMyNDQ0LTUzYzgtYjU0OC1iZjBmLTczZWE4ZmU5NWYzZSIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNjZhMzQ1Ni02ODczLWQ5NDYtOTRkMy1mZTYwZjQ5NzliNjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6NDQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWZiYTdjMWEtYjQxMy0wZDQxLTliZGQtMTZkZjYxOWU5ODIxIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjI2LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+F7DBkwAABCVJREFUeNrt3TtMFEEYwHHuAiYkNjRg74mJpSYUkCiGAhKxsLKXggQ6yi2wQUh8RMCGRJulEgotjgLwVaCVDYYeHzQaKU5FCRo4vwnfRdQgHvu4mZ1/8W/Iec7c/u7gdmd368rlch35Gy8CAHgRAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAJLpUhjkpW5pQfoolaRPjlXSsZs59Jg5AeDgDZ+T2qRFaUcqZyQzl0c6txwA9n/X9+m7ppzR1nWOeQD8DaBD+pzhjV/JzLEDAL9v/JPSmgcbv5KZaysAfv3ev+PRxq80acPfAzYAKEgrHgIwcy4AIAwGpS8eAjBzHgBAGEx7uPErhQAIg6LHAIoACIM5jwHMAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIuA3pjbYBgOwDMOvyNqUZ6azUuGcMjfqz+/qYHQBkC8BXaUI6/p/rE8b13wAgAwB+SOel+irGVC91St8B4DYAs8K4J8LYehJepQyAhAEMVfPO3+eTYAgAbgJYinGMSwBwC8A36VyMY+zU5wSAIwCWpeYYx9gsvQKAOwAe7P2eH8MYzX6ChwBwB8DtOE+60PMWxwHgDoCRBMY5AgB3AIzHeQaufgJMAIC/AQDg8beAZQC4A2Argf0AWwBwa0/gc+lIDONr0OdiT6CjxwJyEcaW41iA2wDeS70RxnZBnwMADq8HMOfhXzzEuHpTuG4BAFJaEWQO5IxKp/61f0C/75vHXEvo4A8Aarwm8J00K13WpV9HtYL+bFYfw5pAT5aFb2osC+e8AABkFcBOxADgGIBt6YU0pUfwhqWrh2xYn2NKn3MbAHYDeCId0713ed2RE0d5fc4W6TEA7APwVuqPsgK4ypXC/XpKGQAsAPBB6qrBuLti2EsIgIgAzFk/fTUce5+OAQA1AjCTxsf+Ab8OZgBQGwDmtiynLRj/mQj3OQBABAAv41z1E2H8LToWAKQMwOy3b7Bg/A06FgCkDOCmRbe7uQWA9AGMWgRgFADpAxizCMAYAAAAAAAAgL8BAJAagOsWAbgBgPQBPJWaLBh/k/QMAOkDMIsz7lkw/rsRFooAIIbDweY27avS65Rb1f+bw8EsCgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCCAoscAigAIg2mPAYQACIPBFC7GZGNmzgMA2L0+z4qHAMycCwDYPf9+0kMAk3He08BZAIqgVVrzaOObuZ6w4bW3AoAiaI9wkqVLmTm22/K62wTA/Cq4kvCNGmvdul5TIA+A/RG0SQspXqwxrYtULurccja95lYB+OOSrd3SvH4ilPR6AC5V0rHP6y1o8za+1lYCIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAFXRT5xealqlzx1wAAAAAElFTkSuQmCC",Jke="_InformationContainerPos_1m76y_2",$ke="_scrollContainer_1m76y_15",e4e="_centerAlign_1m76y_25",t4e="_traitInfoTitle_1m76y_28",n4e="_dropdownFlex_1m76y_38",r4e="_checkboxFlex_1m76y_44",i4e="_simpleFlex_1m76y_49",s4e="_traitInfoText_1m76y_55",a4e="_dropdownControl_1m76y_74",o4e="_dropdownControlSmall_1m76y_80",l4e="_actionButton_1m76y_189",c4e="_tabHolder_1m76y_209",u4e="_tabButton_1m76y_215",A4e="_tabButtonSelected_1m76y_235",ut={InformationContainerPos:Jke,scrollContainer:$ke,centerAlign:e4e,traitInfoTitle:t4e,dropdownFlex:n4e,checkboxFlex:r4e,simpleFlex:i4e,traitInfoText:s4e,dropdownControl:a4e,dropdownControlSmall:o4e,"input-box":"_input-box_1m76y_87",actionButton:l4e,tabHolder:c4e,tabButton:u4e,tabButtonSelected:A4e};function f4e({lockedManifests:r}){const{characterManager:e}=we.useContext(Er),[t,n]=le.useState(null);le.useEffect(()=>{t&&(console.log("welcome: ",t.name),console.log("avatar: ",t.avatar_url),console.log("public repos: ",t.public_repos))},[t]);const i=a=>{e.unlockManifestByIndex(a,a===1?"0x2333FCc3833D2E951Ce8e821235Ed3B729141996":null)},s=()=>{window.location.href="http://localhost:5000/auth/github"};return q.jsx("div",{children:q.jsxs("div",{className:ut.InformationContainerPos,children:[q.jsx(oo,{title:"Unlock With Wallet",width:180,right:20}),q.jsxs("div",{className:ut.scrollContainer,children:[q.jsx("div",{className:ut.actionButton,onClick:()=>{s()},children:q.jsx("div",{children:" Github Coonnect "})}),r&&r.length>0&&r.map((a,o)=>q.jsx("div",{className:ut.actionButton,onClick:()=>{i(o)},children:q.jsxs("div",{children:["  ",a.collectionLockID," "]})},o))]})]})})}const h4e="_slider_1y6nx_1",d4e="_infoContainer_1y6nx_13",Kx={"slider-container":"_slider-container_1y6nx_1",slider:h4e,infoContainer:d4e,"input-box":"_input-box_1y6nx_18"};function rh({title:r,value:e,min:t,max:n,onChange:i,step:s,stepBox:a}){return q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:Kx.infoContainer,children:[r,a&&q.jsx("input",{type:"number",min:"0",max:"100",value:e,onChange:i,className:Kx["input-box"],step:a})]}),q.jsx("div",{className:Kx["slider-container"],children:q.jsx("input",{type:"range",min:t,max:n,value:e,onChange:i,className:Kx.slider,step:s})})]})}function p4e({selectedTrait:r,selectedVRM:e}){const{animationManager:t,characterManager:n}=we.useContext(Er),[i,s]=we.useState(0),[a,o]=we.useState(0),[l,c]=we.useState(0);we.useEffect(()=>{e!=null&&(c(e.data?.cullingLayer),s(e.data?.cullingDistance[0]||0),o(e.data?.cullingDistance[1]||0))},[e]);const u=v=>{s(v.target.value),e?.data&&(e.data.cullingDistance[0]=v.target.value)},f=v=>{o(v.target.value),e?.data&&(e.data.cullingDistance[1]=v.target.value)},d=v=>{e?.data&&(c(v.target.value),e.data.cullingLayer=v.target.value)},p=()=>{n.updateCullHiddenMeshes()};return q.jsx("div",{children:q.jsxs("div",{className:ut.InformationContainerPos,children:[q.jsx(oo,{title:"Trait Information",width:180,right:20}),q.jsx("div",{className:ut.scrollContainer,children:r!=null?q.jsxs(q.Fragment,{children:[q.jsx("div",{className:ut.traitInfoTitle,children:"Trait ID"}),q.jsx("div",{className:ut.traitInfoText,children:r?.id}),q.jsx("div",{className:ut.traitInfoTitle,children:"Trait Name"}),q.jsx("div",{className:ut.traitInfoText,children:r?.name}),q.jsx("div",{className:ut.traitInfoTitle,children:"Description"}),q.jsx("div",{className:ut.traitInfoText,children:r?.description||"A nice "+r?.name}),q.jsx("div",{className:ut.traitInfoTitle,children:"Culling Options"}),q.jsx("br",{}),q.jsxs("div",{className:ut.traitInfoText,children:["Culling Layer",q.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:d,className:ut["input-box"],step:1}),q.jsx("br",{}),q.jsx("br",{}),q.jsx(rh,{title:"Out Distance",value:i,onChange:u,min:0,max:1,step:.001,stepBox:.01}),q.jsx("br",{}),q.jsx(rh,{title:"In Distance",value:a,onChange:f,min:0,max:1,step:.001,stepBox:.01}),q.jsx("div",{className:ut.actionButton,onClick:p,children:q.jsx("div",{children:"Update Culling "})})]})]}):q.jsx(q.Fragment,{children:q.jsx("div",{className:ut.traitInfoTitle,children:"No Trait Selected"})})})]})})}function QW(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ht(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QW(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QW(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var m4e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function g4e(r){var e=r.defaultInputValue,t=e===void 0?"":e,n=r.defaultMenuIsOpen,i=n===void 0?!1:n,s=r.defaultValue,a=s===void 0?null:s,o=r.inputValue,l=r.menuIsOpen,c=r.onChange,u=r.onInputChange,f=r.onMenuClose,d=r.onMenuOpen,p=r.value,v=Fu(r,m4e),m=we.useState(o!==void 0?o:t),g=ic(m,2),w=g[0],b=g[1],E=we.useState(l!==void 0?l:i),B=ic(E,2),S=B[0],M=B[1],I=we.useState(p!==void 0?p:a),k=ic(I,2),O=k[0],C=k[1],P=we.useCallback(function(G,Y){typeof c=="function"&&c(G,Y),C(G)},[c]),D=we.useCallback(function(G,Y){var W;typeof u=="function"&&(W=u(G,Y)),b(W!==void 0?W:G)},[u]),F=we.useCallback(function(){typeof d=="function"&&d(),M(!0)},[d]),_=we.useCallback(function(){typeof f=="function"&&f(),M(!1)},[f]),R=o!==void 0?o:w,L=l!==void 0?l:S,Q=p!==void 0?p:O;return Ht(Ht({},v),{},{inputValue:R,menuIsOpen:L,onChange:P,onInputChange:D,onMenuClose:_,onMenuOpen:F,value:Q})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Wt.apply(null,arguments)}function U$(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U$=function(){return!!r})()}function v4e(r){var e=U$();return function(){var t,n=Go(r);if(e){var i=Go(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return $m(this,t)}}function y4e(r){if(Array.isArray(r))return oD(r)}function w4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $N(r){return y4e(r)||yJ(r)||aN(r)||w4e()}function _4e(r){if(r.sheet)return r.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===r)return document.styleSheets[e]}function x4e(r){var e=document.createElement("style");return e.setAttribute("data-emotion",r.key),r.nonce!==void 0&&e.setAttribute("nonce",r.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var b4e=function(){function r(t){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=r.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(x4e(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=_4e(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},r}(),Fs="-ms-",J1="-moz-",Zn="-webkit-",F$="comm",eP="rule",tP="decl",E4e="@import",L$="@keyframes",S4e="@layer",B4e=Math.abs,_S=String.fromCharCode,M4e=Object.assign;function C4e(r,e){return As(r,0)^45?(((e<<2^As(r,0))<<2^As(r,1))<<2^As(r,2))<<2^As(r,3):0}function D$(r){return r.trim()}function T4e(r,e){return(r=e.exec(r))?r[0]:r}function Jn(r,e,t){return r.replace(e,t)}function wD(r,e){return r.indexOf(e)}function As(r,e){return r.charCodeAt(e)|0}function py(r,e,t){return r.slice(e,t)}function ql(r){return r.length}function nP(r){return r.length}function qx(r,e){return e.push(r),r}function R4e(r,e){return r.map(e).join("")}var xS=1,km=1,O$=0,Ca=0,Ri=0,ig="";function bS(r,e,t,n,i,s,a){return{value:r,root:e,parent:t,type:n,props:i,children:s,line:xS,column:km,length:a,return:""}}function j0(r,e){return M4e(bS("",null,null,"",null,null,0),r,{length:-r.length},e)}function I4e(){return Ri}function U4e(){return Ri=Ca>0?As(ig,--Ca):0,km--,Ri===10&&(km=1,xS--),Ri}function no(){return Ri=Ca<O$?As(ig,Ca++):0,km++,Ri===10&&(km=1,xS++),Ri}function ac(){return As(ig,Ca)}function Lb(){return Ca}function Gy(r,e){return py(ig,r,e)}function my(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N$(r){return xS=km=1,O$=ql(ig=r),Ca=0,[]}function P$(r){return ig="",r}function Db(r){return D$(Gy(Ca-1,_D(r===91?r+2:r===40?r+1:r)))}function F4e(r){for(;(Ri=ac())&&Ri<33;)no();return my(r)>2||my(Ri)>3?"":" "}function L4e(r,e){for(;--e&&no()&&!(Ri<48||Ri>102||Ri>57&&Ri<65||Ri>70&&Ri<97););return Gy(r,Lb()+(e<6&&ac()==32&&no()==32))}function _D(r){for(;no();)switch(Ri){case r:return Ca;case 34:case 39:r!==34&&r!==39&&_D(Ri);break;case 40:r===41&&_D(r);break;case 92:no();break}return Ca}function D4e(r,e){for(;no()&&r+Ri!==57;)if(r+Ri===84&&ac()===47)break;return"/*"+Gy(e,Ca-1)+"*"+_S(r===47?r:no())}function O4e(r){for(;!my(ac());)no();return Gy(r,Ca)}function N4e(r){return P$(Ob("",null,null,null,[""],r=N$(r),0,[0],r))}function Ob(r,e,t,n,i,s,a,o,l){for(var c=0,u=0,f=a,d=0,p=0,v=0,m=1,g=1,w=1,b=0,E="",B=i,S=s,M=n,I=E;g;)switch(v=b,b=no()){case 40:if(v!=108&&As(I,f-1)==58){wD(I+=Jn(Db(b),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:I+=Db(b);break;case 9:case 10:case 13:case 32:I+=F4e(v);break;case 92:I+=L4e(Lb()-1,7);continue;case 47:switch(ac()){case 42:case 47:qx(P4e(D4e(no(),Lb()),e,t),l);break;default:I+="/"}break;case 123*m:o[c++]=ql(I)*w;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:w==-1&&(I=Jn(I,/\f/g,"")),p>0&&ql(I)-f&&qx(p>32?VW(I+";",n,t,f-1):VW(Jn(I," ","")+";",n,t,f-2),l);break;case 59:I+=";";default:if(qx(M=zW(I,e,t,c,u,i,o,E,B=[],S=[],f),s),b===123)if(u===0)Ob(I,e,M,M,B,s,f,o,S);else switch(d===99&&As(I,3)===110?100:d){case 100:case 108:case 109:case 115:Ob(r,M,M,n&&qx(zW(r,M,M,0,0,i,o,E,i,B=[],f),S),i,S,f,o,n?B:S);break;default:Ob(I,M,M,M,[""],S,0,o,S)}}c=u=p=0,m=w=1,E=I="",f=a;break;case 58:f=1+ql(I),p=v;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&U4e()==125)continue}switch(I+=_S(b),b*m){case 38:w=u>0?1:(I+="\f",-1);break;case 44:o[c++]=(ql(I)-1)*w,w=1;break;case 64:ac()===45&&(I+=Db(no())),d=ac(),u=f=ql(E=I+=O4e(Lb())),b++;break;case 45:v===45&&ql(I)==2&&(m=0)}}return s}function zW(r,e,t,n,i,s,a,o,l,c,u){for(var f=i-1,d=i===0?s:[""],p=nP(d),v=0,m=0,g=0;v<n;++v)for(var w=0,b=py(r,f+1,f=B4e(m=a[v])),E=r;w<p;++w)(E=D$(m>0?d[w]+" "+b:Jn(b,/&\f/g,d[w])))&&(l[g++]=E);return bS(r,e,t,i===0?eP:o,l,c,u)}function P4e(r,e,t){return bS(r,e,t,F$,_S(I4e()),py(r,2,-2),0)}function VW(r,e,t,n){return bS(r,e,t,tP,py(r,0,n),py(r,n+1,-1),n)}function hm(r,e){for(var t="",n=nP(r),i=0;i<n;i++)t+=e(r[i],i,r,e)||"";return t}function k4e(r,e,t,n){switch(r.type){case S4e:if(r.children.length)break;case E4e:case tP:return r.return=r.return||r.value;case F$:return"";case L$:return r.return=r.value+"{"+hm(r.children,n)+"}";case eP:r.value=r.props.join(",")}return ql(t=hm(r.children,n))?r.return=r.value+"{"+t+"}":""}function H4e(r){var e=nP(r);return function(t,n,i,s){for(var a="",o=0;o<e;o++)a+=r[o](t,n,i,s)||"";return a}}function Q4e(r){return function(e){e.root||(e=e.return)&&r(e)}}function z4e(r){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=r(t)),e[t]}}var V4e=function(e,t,n){for(var i=0,s=0;i=s,s=ac(),i===38&&s===12&&(t[n]=1),!my(s);)no();return Gy(e,Ca)},G4e=function(e,t){var n=-1,i=44;do switch(my(i)){case 0:i===38&&ac()===12&&(t[n]=1),e[n]+=V4e(Ca-1,t,n);break;case 2:e[n]+=Db(i);break;case 4:if(i===44){e[++n]=ac()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=_S(i)}while(i=no());return e},j4e=function(e,t){return P$(G4e(N$(e),t))},GW=new WeakMap,W4e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!GW.get(n))&&!i){GW.set(e,!0);for(var s=[],a=j4e(t,s),o=n.props,l=0,c=0;l<a.length;l++)for(var u=0;u<o.length;u++,c++)e.props[c]=s[l]?a[l].replace(/&\f/g,o[u]):o[u]+" "+a[l]}}},K4e=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function k$(r,e){switch(C4e(r,e)){case 5103:return Zn+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zn+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Zn+r+J1+r+Fs+r+r;case 6828:case 4268:return Zn+r+Fs+r+r;case 6165:return Zn+r+Fs+"flex-"+r+r;case 5187:return Zn+r+Jn(r,/(\w+).+(:[^]+)/,Zn+"box-$1$2"+Fs+"flex-$1$2")+r;case 5443:return Zn+r+Fs+"flex-item-"+Jn(r,/flex-|-self/,"")+r;case 4675:return Zn+r+Fs+"flex-line-pack"+Jn(r,/align-content|flex-|-self/,"")+r;case 5548:return Zn+r+Fs+Jn(r,"shrink","negative")+r;case 5292:return Zn+r+Fs+Jn(r,"basis","preferred-size")+r;case 6060:return Zn+"box-"+Jn(r,"-grow","")+Zn+r+Fs+Jn(r,"grow","positive")+r;case 4554:return Zn+Jn(r,/([^-])(transform)/g,"$1"+Zn+"$2")+r;case 6187:return Jn(Jn(Jn(r,/(zoom-|grab)/,Zn+"$1"),/(image-set)/,Zn+"$1"),r,"")+r;case 5495:case 3959:return Jn(r,/(image-set\([^]*)/,Zn+"$1$`$1");case 4968:return Jn(Jn(r,/(.+:)(flex-)?(.*)/,Zn+"box-pack:$3"+Fs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zn+r+r;case 4095:case 3583:case 4068:case 2532:return Jn(r,/(.+)-inline(.+)/,Zn+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ql(r)-1-e>6)switch(As(r,e+1)){case 109:if(As(r,e+4)!==45)break;case 102:return Jn(r,/(.+:)(.+)-([^]+)/,"$1"+Zn+"$2-$3$1"+J1+(As(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~wD(r,"stretch")?k$(Jn(r,"stretch","fill-available"),e)+r:r}break;case 4949:if(As(r,e+1)!==115)break;case 6444:switch(As(r,ql(r)-3-(~wD(r,"!important")&&10))){case 107:return Jn(r,":",":"+Zn)+r;case 101:return Jn(r,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Zn+(As(r,14)===45?"inline-":"")+"box$3$1"+Zn+"$2$3$1"+Fs+"$2box$3")+r}break;case 5936:switch(As(r,e+11)){case 114:return Zn+r+Fs+Jn(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Zn+r+Fs+Jn(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Zn+r+Fs+Jn(r,/[svh]\w+-[tblr]{2}/,"lr")+r}return Zn+r+Fs+r+r}return r}var q4e=function(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case tP:e.return=k$(e.value,e.length);break;case L$:return hm([j0(e,{value:Jn(e.value,"@","@"+Zn)})],i);case eP:if(e.length)return R4e(e.props,function(s){switch(T4e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return hm([j0(e,{props:[Jn(s,/:(read-\w+)/,":"+J1+"$1")]})],i);case"::placeholder":return hm([j0(e,{props:[Jn(s,/:(plac\w+)/,":"+Zn+"input-$1")]}),j0(e,{props:[Jn(s,/:(plac\w+)/,":"+J1+"$1")]}),j0(e,{props:[Jn(s,/:(plac\w+)/,Fs+"input-$1")]})],i)}return""})}},Y4e=[q4e],X4e=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||Y4e,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),w=1;w<g.length;w++)s[g[w]]=!0;o.push(m)});var l,c=[W4e,K4e];{var u,f=[k4e,Q4e(function(m){u.insert(m)})],d=H4e(c.concat(i,f)),p=function(g){return hm(N4e(g),d)};l=function(g,w,b,E){u=b,p(g?g+"{"+w.styles+"}":w.styles),E&&(v.inserted[w.name]=!0)}}var v={key:t,sheet:new b4e({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return v.sheet.hydrate(o),v},NU={exports:{}},er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jW;function Z4e(){if(jW)return er;jW=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,o=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,c=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,p=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function E(S){if(typeof S=="object"&&S!==null){var M=S.$$typeof;switch(M){case e:switch(S=S.type,S){case l:case c:case n:case s:case i:case f:return S;default:switch(S=S&&S.$$typeof,S){case o:case u:case v:case p:case a:return S;default:return M}}case t:return M}}}function B(S){return E(S)===c}return er.AsyncMode=l,er.ConcurrentMode=c,er.ContextConsumer=o,er.ContextProvider=a,er.Element=e,er.ForwardRef=u,er.Fragment=n,er.Lazy=v,er.Memo=p,er.Portal=t,er.Profiler=s,er.StrictMode=i,er.Suspense=f,er.isAsyncMode=function(S){return B(S)||E(S)===l},er.isConcurrentMode=B,er.isContextConsumer=function(S){return E(S)===o},er.isContextProvider=function(S){return E(S)===a},er.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},er.isForwardRef=function(S){return E(S)===u},er.isFragment=function(S){return E(S)===n},er.isLazy=function(S){return E(S)===v},er.isMemo=function(S){return E(S)===p},er.isPortal=function(S){return E(S)===t},er.isProfiler=function(S){return E(S)===s},er.isStrictMode=function(S){return E(S)===i},er.isSuspense=function(S){return E(S)===f},er.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===c||S===s||S===i||S===f||S===d||typeof S=="object"&&S!==null&&(S.$$typeof===v||S.$$typeof===p||S.$$typeof===a||S.$$typeof===o||S.$$typeof===u||S.$$typeof===g||S.$$typeof===w||S.$$typeof===b||S.$$typeof===m)},er.typeOf=E,er}var WW;function J4e(){return WW||(WW=1,NU.exports=Z4e()),NU.exports}var PU,KW;function $4e(){if(KW)return PU;KW=1;var r=J4e(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[r.ForwardRef]=n,s[r.Memo]=i;function a(v){return r.isMemo(v)?i:s[v.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;function p(v,m,g){if(typeof m!="string"){if(d){var w=f(m);w&&w!==d&&p(v,w,g)}var b=l(m);c&&(b=b.concat(c(m)));for(var E=a(v),B=a(m),S=0;S<b.length;++S){var M=b[S];if(!t[M]&&!(g&&g[M])&&!(B&&B[M])&&!(E&&E[M])){var I=u(m,M);try{o(v,M,I)}catch{}}}}return v}return PU=p,PU}$4e();var eHe=!0;function tHe(r,e,t){var n="";return t.split(" ").forEach(function(i){r[i]!==void 0?e.push(r[i]+";"):i&&(n+=i+" ")}),n}var H$=function(e,t,n){var i=e.key+"-"+t.name;(n===!1||eHe===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},nHe=function(e,t,n){H$(e,t,n);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function rHe(r){for(var e=0,t,n=0,i=r.length;i>=4;++n,i-=4)t=r.charCodeAt(n)&255|(r.charCodeAt(++n)&255)<<8|(r.charCodeAt(++n)&255)<<16|(r.charCodeAt(++n)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(r.charCodeAt(n+2)&255)<<16;case 2:e^=(r.charCodeAt(n+1)&255)<<8;case 1:e^=r.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var iHe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sHe=/[A-Z]|^ms/g,aHe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Q$=function(e){return e.charCodeAt(1)===45},qW=function(e){return e!=null&&typeof e!="boolean"},kU=z4e(function(r){return Q$(r)?r:r.replace(sHe,"-$&").toLowerCase()}),YW=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(aHe,function(n,i,s){return Yl={name:i,styles:s,next:Yl},i})}return iHe[e]!==1&&!Q$(e)&&typeof t=="number"&&t!==0?t+"px":t};function gy(r,e,t){if(t==null)return"";var n=t;if(n.__emotion_styles!==void 0)return n;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Yl={name:i.name,styles:i.styles,next:Yl},i.name;var s=t;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)Yl={name:a.name,styles:a.styles,next:Yl},a=a.next;var o=s.styles+";";return o}return oHe(r,e,t)}case"function":{if(r!==void 0){var l=Yl,c=t(r);return Yl=l,gy(r,e,c)}break}}var u=t;return u}function oHe(r,e,t){var n="";if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=gy(r,e,t[i])+";";else for(var s in t){var a=t[s];if(typeof a!="object"){var o=a;qW(o)&&(n+=kU(s)+":"+YW(s,o)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&e==null)for(var l=0;l<a.length;l++)qW(a[l])&&(n+=kU(s)+":"+YW(s,a[l])+";");else{var c=gy(r,e,a);switch(s){case"animation":case"animationName":{n+=kU(s)+":"+c+";";break}default:n+=s+"{"+c+"}"}}}return n}var XW=/label:\s*([^\s;{]+)\s*(;|$)/g,Yl;function z$(r,e,t){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var n=!0,i="";Yl=void 0;var s=r[0];if(s==null||s.raw===void 0)n=!1,i+=gy(t,e,s);else{var a=s;i+=a[0]}for(var o=1;o<r.length;o++)if(i+=gy(t,e,r[o]),n){var l=s;i+=l[o]}XW.lastIndex=0;for(var c="",u;(u=XW.exec(i))!==null;)c+="-"+u[1];var f=rHe(i)+c;return{name:f,styles:i,next:Yl}}var lHe=function(e){return e()},cHe=XH.useInsertionEffect?XH.useInsertionEffect:!1,uHe=cHe||lHe,V$=we.createContext(typeof HTMLElement<"u"?X4e({key:"css"}):null);V$.Provider;var AHe=function(e){return we.forwardRef(function(t,n){var i=we.useContext(V$);return e(t,i,n)})},fHe=we.createContext({}),rP={}.hasOwnProperty,xD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",hHe=function(e,t){var n={};for(var i in t)rP.call(t,i)&&(n[i]=t[i]);return n[xD]=e,n},dHe=function(e){var t=e.cache,n=e.serialized,i=e.isStringTag;return H$(t,n,i),uHe(function(){return nHe(t,n,i)}),null},pHe=AHe(function(r,e,t){var n=r.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=r[xD],s=[n],a="";typeof r.className=="string"?a=tHe(e.registered,s,r.className):r.className!=null&&(a=r.className+" ");var o=z$(s,void 0,we.useContext(fHe));a+=e.key+"-"+o.name;var l={};for(var c in r)rP.call(r,c)&&c!=="css"&&c!==xD&&(l[c]=r[c]);return l.className=a,t&&(l.ref=t),we.createElement(we.Fragment,null,we.createElement(dHe,{cache:e,serialized:o,isStringTag:typeof i=="string"}),we.createElement(i,l))}),mHe=pHe,Pt=function(e,t){var n=arguments;if(t==null||!rP.call(t,"css"))return we.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=mHe,s[1]=hHe(e,t);for(var a=2;a<i;a++)s[a]=n[a];return we.createElement.apply(null,s)};(function(r){var e;e||(e=r.JSX||(r.JSX={}))})(Pt||(Pt={}));function iP(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return z$(e)}function gHe(){var r=iP.apply(void 0,arguments),e="animation-"+r.name;return{name:e,styles:"@keyframes "+e+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function vHe(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}var yHe=lK();const wHe=Math.min,_He=Math.max,$1=Math.round,Yx=Math.floor,eE=r=>({x:r,y:r});function xHe(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function ES(){return typeof window<"u"}function G$(r){return W$(r)?(r.nodeName||"").toLowerCase():"#document"}function Mu(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function j$(r){var e;return(e=(W$(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function W$(r){return ES()?r instanceof Node||r instanceof Mu(r).Node:!1}function bHe(r){return ES()?r instanceof Element||r instanceof Mu(r).Element:!1}function sP(r){return ES()?r instanceof HTMLElement||r instanceof Mu(r).HTMLElement:!1}function ZW(r){return!ES()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Mu(r).ShadowRoot}const EHe=new Set(["inline","contents"]);function K$(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=aP(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!EHe.has(i)}function SHe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const BHe=new Set(["html","body","#document"]);function MHe(r){return BHe.has(G$(r))}function aP(r){return Mu(r).getComputedStyle(r)}function CHe(r){if(G$(r)==="html")return r;const e=r.assignedSlot||r.parentNode||ZW(r)&&r.host||j$(r);return ZW(e)?e.host:e}function q$(r){const e=CHe(r);return MHe(e)?r.ownerDocument?r.ownerDocument.body:r.body:sP(e)&&K$(e)?e:q$(e)}function tE(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=q$(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=Mu(i);if(s){const o=bD(a);return e.concat(a,a.visualViewport||[],K$(i)?i:[],o&&t?tE(o):[])}return e.concat(i,tE(i,[],t))}function bD(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function THe(r){const e=aP(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=sP(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=$1(t)!==s||$1(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function oP(r){return bHe(r)?r:r.contextElement}function JW(r){const e=oP(r);if(!sP(e))return eE(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=THe(e);let a=(s?$1(t.width):t.width)/n,o=(s?$1(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const RHe=eE(0);function IHe(r){const e=Mu(r);return!SHe()||!e.visualViewport?RHe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function UHe(r,e,t){return!1}function $W(r,e,t,n){e===void 0&&(e=!1);const i=r.getBoundingClientRect(),s=oP(r);let a=eE(1);e&&(a=JW(r));const o=UHe()?IHe(s):eE(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,f=i.height/a.y;if(s){const d=Mu(s),p=n;let v=d,m=bD(v);for(;m&&n&&p!==v;){const g=JW(m),w=m.getBoundingClientRect(),b=aP(m),E=w.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,B=w.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,f*=g.y,l+=E,c+=B,v=Mu(m),m=bD(v)}}return xHe({width:u,height:f,x:l,y:c})}function Y$(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function FHe(r,e){let t=null,n;const i=j$(r);function s(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=r.getBoundingClientRect(),{left:u,top:f,width:d,height:p}=c;if(o||e(),!d||!p)return;const v=Yx(f),m=Yx(i.clientWidth-(u+d)),g=Yx(i.clientHeight-(f+p)),w=Yx(u),E={rootMargin:-v+"px "+-m+"px "+-g+"px "+-w+"px",threshold:_He(0,wHe(1,l))||1};let B=!0;function S(M){const I=M[0].intersectionRatio;if(I!==l){if(!B)return a();I?a(!1,I):n=setTimeout(()=>{a(!1,1e-7)},1e3)}I===1&&!Y$(c,r.getBoundingClientRect())&&a(),B=!1}try{t=new IntersectionObserver(S,{...E,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,E)}t.observe(r)}return a(!0),s}function LHe(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=oP(r),u=i||s?[...c?tE(c):[],...tE(e)]:[];u.forEach(w=>{i&&w.addEventListener("scroll",t,{passive:!0}),s&&w.addEventListener("resize",t)});const f=c&&o?FHe(c,t):null;let d=-1,p=null;a&&(p=new ResizeObserver(w=>{let[b]=w;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),t()}),c&&!l&&p.observe(c),p.observe(e));let v,m=l?$W(r):null;l&&g();function g(){const w=$W(r);m&&!Y$(m,w)&&t(),m=w,v=requestAnimationFrame(g)}return t(),()=>{var w;u.forEach(b=>{i&&b.removeEventListener("scroll",t),s&&b.removeEventListener("resize",t)}),f?.(),(w=p)==null||w.disconnect(),p=null,l&&cancelAnimationFrame(v)}}var ED=we.useLayoutEffect,DHe=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],nE=function(){};function OHe(r,e){return e?e[0]==="-"?r+e:r+"__"+e:r}function NHe(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i];var s=[].concat(n);if(e&&r)for(var a in e)e.hasOwnProperty(a)&&e[a]&&s.push("".concat(OHe(r,a)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var e7=function(e){return WHe(e)?e.filter(Boolean):Ba(e)==="object"&&e!==null?[e]:[]},X$=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var t=Fu(e,DHe);return Ht({},t)},ti=function(e,t,n){var i=e.cx,s=e.getStyles,a=e.getClassNames,o=e.className;return{css:s(t,e),className:i(n??{},a(t,e),o)}};function SS(r){return[document.documentElement,document.body,window].indexOf(r)>-1}function PHe(r){return SS(r)?window.innerHeight:r.clientHeight}function Z$(r){return SS(r)?window.pageYOffset:r.scrollTop}function rE(r,e){if(SS(r)){window.scrollTo(0,e);return}r.scrollTop=e}function kHe(r){var e=getComputedStyle(r),t=e.position==="absolute",n=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=r;i=i.parentElement;)if(e=getComputedStyle(i),!(t&&e.position==="static")&&n.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function HHe(r,e,t,n){return t*((r=r/n-1)*r*r+1)+e}function Xx(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:nE,i=Z$(r),s=e-i,a=10,o=0;function l(){o+=a;var c=HHe(o,i,s,t);rE(r,c),o<t?window.requestAnimationFrame(l):n(r)}l()}function t7(r,e){var t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=e.offsetHeight/3;n.bottom+i>t.bottom?rE(r,Math.min(e.offsetTop+e.clientHeight-r.offsetHeight+i,r.scrollHeight)):n.top-i<t.top&&rE(r,Math.max(e.offsetTop-i,0))}function QHe(r){var e=r.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function n7(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function zHe(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var J$=!1,VHe={get passive(){return J$=!0}},Zx=typeof window<"u"?window:{};Zx.addEventListener&&Zx.removeEventListener&&(Zx.addEventListener("p",nE,VHe),Zx.removeEventListener("p",nE,!1));var GHe=J$;function jHe(r){return r!=null}function WHe(r){return Array.isArray(r)}function Jx(r,e,t){return r?e:t}var KHe=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var s=Object.entries(e).filter(function(a){var o=ic(a,1),l=o[0];return!n.includes(l)});return s.reduce(function(a,o){var l=ic(o,2),c=l[0],u=l[1];return a[c]=u,a},{})},qHe=["children","innerProps"],YHe=["children","innerProps"];function XHe(r){var e=r.maxHeight,t=r.menuEl,n=r.minHeight,i=r.placement,s=r.shouldScroll,a=r.isFixedPosition,o=r.controlHeight,l=kHe(t),c={placement:"bottom",maxHeight:e};if(!t||!t.offsetParent)return c;var u=l.getBoundingClientRect(),f=u.height,d=t.getBoundingClientRect(),p=d.bottom,v=d.height,m=d.top,g=t.offsetParent.getBoundingClientRect(),w=g.top,b=a?window.innerHeight:PHe(l),E=Z$(l),B=parseInt(getComputedStyle(t).marginBottom,10),S=parseInt(getComputedStyle(t).marginTop,10),M=w-S,I=b-m,k=M+E,O=f-E-m,C=p-b+E+B,P=E+m-S,D=160;switch(i){case"auto":case"bottom":if(I>=v)return{placement:"bottom",maxHeight:e};if(O>=v&&!a)return s&&Xx(l,C,D),{placement:"bottom",maxHeight:e};if(!a&&O>=n||a&&I>=n){s&&Xx(l,C,D);var F=a?I-B:O-B;return{placement:"bottom",maxHeight:F}}if(i==="auto"||a){var _=e,R=a?M:k;return R>=n&&(_=Math.min(R-B-o,e)),{placement:"top",maxHeight:_}}if(i==="bottom")return s&&rE(l,C),{placement:"bottom",maxHeight:e};break;case"top":if(M>=v)return{placement:"top",maxHeight:e};if(k>=v&&!a)return s&&Xx(l,P,D),{placement:"top",maxHeight:e};if(!a&&k>=n||a&&M>=n){var L=e;return(!a&&k>=n||a&&M>=n)&&(L=a?M-S:k-S),s&&Xx(l,P,D),{placement:"top",maxHeight:L}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}function ZHe(r){var e={bottom:"top",top:"bottom"};return r?e[r]:"bottom"}var $$=function(e){return e==="auto"?"bottom":e},JHe=function(e,t){var n,i=e.placement,s=e.theme,a=s.borderRadius,o=s.spacing,l=s.colors;return Ht((n={label:"menu"},ea(n,ZHe(i),"100%"),ea(n,"position","absolute"),ea(n,"width","100%"),ea(n,"zIndex",1),n),t?{}:{backgroundColor:l.neutral0,borderRadius:a,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},eee=we.createContext(null),$He=function(e){var t=e.children,n=e.minMenuHeight,i=e.maxMenuHeight,s=e.menuPlacement,a=e.menuPosition,o=e.menuShouldScrollIntoView,l=e.theme,c=we.useContext(eee)||{},u=c.setPortalPlacement,f=we.useRef(null),d=we.useState(i),p=ic(d,2),v=p[0],m=p[1],g=we.useState(null),w=ic(g,2),b=w[0],E=w[1],B=l.spacing.controlHeight;return ED(function(){var S=f.current;if(S){var M=a==="fixed",I=o&&!M,k=XHe({maxHeight:i,menuEl:S,minHeight:n,placement:s,shouldScroll:I,isFixedPosition:M,controlHeight:B});m(k.maxHeight),E(k.placement),u?.(k.placement)}},[i,s,a,o,n,u,B]),t({ref:f,placerProps:Ht(Ht({},e),{},{placement:b||$$(s),maxHeight:v})})},eQe=function(e){var t=e.children,n=e.innerRef,i=e.innerProps;return Pt("div",Wt({},ti(e,"menu",{menu:!0}),{ref:n},i),t)},tQe=eQe,nQe=function(e,t){var n=e.maxHeight,i=e.theme.spacing.baseUnit;return Ht({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:i,paddingTop:i})},rQe=function(e){var t=e.children,n=e.innerProps,i=e.innerRef,s=e.isMulti;return Pt("div",Wt({},ti(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:i},n),t)},tee=function(e,t){var n=e.theme,i=n.spacing.baseUnit,s=n.colors;return Ht({textAlign:"center"},t?{}:{color:s.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},iQe=tee,sQe=tee,aQe=function(e){var t=e.children,n=t===void 0?"No options":t,i=e.innerProps,s=Fu(e,qHe);return Pt("div",Wt({},ti(Ht(Ht({},s),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},oQe=function(e){var t=e.children,n=t===void 0?"Loading...":t,i=e.innerProps,s=Fu(e,YHe);return Pt("div",Wt({},ti(Ht(Ht({},s),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},lQe=function(e){var t=e.rect,n=e.offset,i=e.position;return{left:t.left,position:i,top:n,width:t.width,zIndex:1}},cQe=function(e){var t=e.appendTo,n=e.children,i=e.controlElement,s=e.innerProps,a=e.menuPlacement,o=e.menuPosition,l=we.useRef(null),c=we.useRef(null),u=we.useState($$(a)),f=ic(u,2),d=f[0],p=f[1],v=we.useMemo(function(){return{setPortalPlacement:p}},[]),m=we.useState(null),g=ic(m,2),w=g[0],b=g[1],E=we.useCallback(function(){if(i){var I=QHe(i),k=o==="fixed"?0:window.pageYOffset,O=I[d]+k;(O!==w?.offset||I.left!==w?.rect.left||I.width!==w?.rect.width)&&b({offset:O,rect:I})}},[i,o,d,w?.offset,w?.rect.left,w?.rect.width]);ED(function(){E()},[E]);var B=we.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),i&&l.current&&(c.current=LHe(i,l.current,E,{elementResize:"ResizeObserver"in window}))},[i,E]);ED(function(){B()},[B]);var S=we.useCallback(function(I){l.current=I,B()},[B]);if(!t&&o!=="fixed"||!w)return null;var M=Pt("div",Wt({ref:S},ti(Ht(Ht({},e),{},{offset:w.offset,position:o,rect:w.rect}),"menuPortal",{"menu-portal":!0}),s),n);return Pt(eee.Provider,{value:v},t?yHe.createPortal(M,t):M)},uQe=function(e){var t=e.isDisabled,n=e.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},AQe=function(e){var t=e.children,n=e.innerProps,i=e.isDisabled,s=e.isRtl;return Pt("div",Wt({},ti(e,"container",{"--is-disabled":i,"--is-rtl":s}),n),t)},fQe=function(e,t){var n=e.theme.spacing,i=e.isMulti,s=e.hasValue,a=e.selectProps.controlShouldRenderValue;return Ht({alignItems:"center",display:i&&s&&a?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},hQe=function(e){var t=e.children,n=e.innerProps,i=e.isMulti,s=e.hasValue;return Pt("div",Wt({},ti(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":s}),n),t)},dQe=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},pQe=function(e){var t=e.children,n=e.innerProps;return Pt("div",Wt({},ti(e,"indicatorsContainer",{indicators:!0}),n),t)},r7,mQe=["size"],gQe=["innerProps","isRtl","size"],vQe={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},nee=function(e){var t=e.size,n=Fu(e,mQe);return Pt("svg",Wt({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:vQe},n))},lP=function(e){return Pt(nee,Wt({size:20},e),Pt("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ree=function(e){return Pt(nee,Wt({size:20},e),Pt("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},iee=function(e,t){var n=e.isFocused,i=e.theme,s=i.spacing.baseUnit,a=i.colors;return Ht({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?a.neutral60:a.neutral20,padding:s*2,":hover":{color:n?a.neutral80:a.neutral40}})},yQe=iee,wQe=function(e){var t=e.children,n=e.innerProps;return Pt("div",Wt({},ti(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||Pt(ree,null))},_Qe=iee,xQe=function(e){var t=e.children,n=e.innerProps;return Pt("div",Wt({},ti(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||Pt(lP,null))},bQe=function(e,t){var n=e.isDisabled,i=e.theme,s=i.spacing.baseUnit,a=i.colors;return Ht({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?a.neutral10:a.neutral20,marginBottom:s*2,marginTop:s*2})},EQe=function(e){var t=e.innerProps;return Pt("span",Wt({},t,ti(e,"indicatorSeparator",{"indicator-separator":!0})))},SQe=gHe(r7||(r7=vHe([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),BQe=function(e,t){var n=e.isFocused,i=e.size,s=e.theme,a=s.colors,o=s.spacing.baseUnit;return Ht({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?a.neutral60:a.neutral20,padding:o*2})},HU=function(e){var t=e.delay,n=e.offset;return Pt("span",{css:iP({animation:"".concat(SQe," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},MQe=function(e){var t=e.innerProps,n=e.isRtl,i=e.size,s=i===void 0?4:i,a=Fu(e,gQe);return Pt("div",Wt({},ti(Ht(Ht({},a),{},{innerProps:t,isRtl:n,size:s}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Pt(HU,{delay:0,offset:n}),Pt(HU,{delay:160,offset:!0}),Pt(HU,{delay:320,offset:!n}))},CQe=function(e,t){var n=e.isDisabled,i=e.isFocused,s=e.theme,a=s.colors,o=s.borderRadius,l=s.spacing;return Ht({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?a.neutral5:a.neutral0,borderColor:n?a.neutral10:i?a.primary:a.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(a.primary):void 0,"&:hover":{borderColor:i?a.primary:a.neutral30}})},TQe=function(e){var t=e.children,n=e.isDisabled,i=e.isFocused,s=e.innerRef,a=e.innerProps,o=e.menuIsOpen;return Pt("div",Wt({ref:s},ti(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":o}),a,{"aria-disabled":n||void 0}),t)},RQe=TQe,IQe=["data"],UQe=function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},FQe=function(e){var t=e.children,n=e.cx,i=e.getStyles,s=e.getClassNames,a=e.Heading,o=e.headingProps,l=e.innerProps,c=e.label,u=e.theme,f=e.selectProps;return Pt("div",Wt({},ti(e,"group",{group:!0}),l),Pt(a,Wt({},o,{selectProps:f,theme:u,getStyles:i,getClassNames:s,cx:n}),c),Pt("div",null,t))},LQe=function(e,t){var n=e.theme,i=n.colors,s=n.spacing;return Ht({label:"group",cursor:"default",display:"block"},t?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},DQe=function(e){var t=X$(e);t.data;var n=Fu(t,IQe);return Pt("div",Wt({},ti(e,"groupHeading",{"group-heading":!0}),n))},OQe=FQe,NQe=["innerRef","isDisabled","isHidden","inputClassName"],PQe=function(e,t){var n=e.isDisabled,i=e.value,s=e.theme,a=s.spacing,o=s.colors;return Ht(Ht({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},kQe),t?{}:{margin:a.baseUnit/2,paddingBottom:a.baseUnit/2,paddingTop:a.baseUnit/2,color:o.neutral80})},see={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},kQe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ht({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},see)},HQe=function(e){return Ht({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},see)},QQe=function(e){var t=e.cx,n=e.value,i=X$(e),s=i.innerRef,a=i.isDisabled,o=i.isHidden,l=i.inputClassName,c=Fu(i,NQe);return Pt("div",Wt({},ti(e,"input",{"input-container":!0}),{"data-value":n||""}),Pt("input",Wt({className:t({input:!0},l),ref:s,style:HQe(o),disabled:a},c)))},zQe=QQe,VQe=function(e,t){var n=e.theme,i=n.spacing,s=n.borderRadius,a=n.colors;return Ht({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:a.neutral10,borderRadius:s/2,margin:i.baseUnit/2})},GQe=function(e,t){var n=e.theme,i=n.borderRadius,s=n.colors,a=e.cropWithEllipsis;return Ht({overflow:"hidden",textOverflow:a||a===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:i/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},jQe=function(e,t){var n=e.theme,i=n.spacing,s=n.borderRadius,a=n.colors,o=e.isFocused;return Ht({alignItems:"center",display:"flex"},t?{}:{borderRadius:s/2,backgroundColor:o?a.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:a.dangerLight,color:a.danger}})},aee=function(e){var t=e.children,n=e.innerProps;return Pt("div",n,t)},WQe=aee,KQe=aee;function qQe(r){var e=r.children,t=r.innerProps;return Pt("div",Wt({role:"button"},t),e||Pt(lP,{size:14}))}var YQe=function(e){var t=e.children,n=e.components,i=e.data,s=e.innerProps,a=e.isDisabled,o=e.removeProps,l=e.selectProps,c=n.Container,u=n.Label,f=n.Remove;return Pt(c,{data:i,innerProps:Ht(Ht({},ti(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":a})),s),selectProps:l},Pt(u,{data:i,innerProps:Ht({},ti(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},t),Pt(f,{data:i,innerProps:Ht(Ht({},ti(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:l}))},XQe=YQe,ZQe=function(e,t){var n=e.isDisabled,i=e.isFocused,s=e.isSelected,a=e.theme,o=a.spacing,l=a.colors;return Ht({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:s?l.primary:i?l.primary25:"transparent",color:n?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(o.baseUnit*2,"px ").concat(o.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:s?l.primary:l.primary50}})},JQe=function(e){var t=e.children,n=e.isDisabled,i=e.isFocused,s=e.isSelected,a=e.innerRef,o=e.innerProps;return Pt("div",Wt({},ti(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":s}),{ref:a,"aria-disabled":n},o),t)},$Qe=JQe,e6e=function(e,t){var n=e.theme,i=n.spacing,s=n.colors;return Ht({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:s.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},t6e=function(e){var t=e.children,n=e.innerProps;return Pt("div",Wt({},ti(e,"placeholder",{placeholder:!0}),n),t)},n6e=t6e,r6e=function(e,t){var n=e.isDisabled,i=e.theme,s=i.spacing,a=i.colors;return Ht({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?a.neutral40:a.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},i6e=function(e){var t=e.children,n=e.isDisabled,i=e.innerProps;return Pt("div",Wt({},ti(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),t)},s6e=i6e,a6e={ClearIndicator:xQe,Control:RQe,DropdownIndicator:wQe,DownChevron:ree,CrossIcon:lP,Group:OQe,GroupHeading:DQe,IndicatorsContainer:pQe,IndicatorSeparator:EQe,Input:zQe,LoadingIndicator:MQe,Menu:tQe,MenuList:rQe,MenuPortal:cQe,LoadingMessage:oQe,NoOptionsMessage:aQe,MultiValue:XQe,MultiValueContainer:WQe,MultiValueLabel:KQe,MultiValueRemove:qQe,Option:$Qe,Placeholder:n6e,SelectContainer:AQe,SingleValue:s6e,ValueContainer:hQe},o6e=function(e){return Ht(Ht({},a6e),e.components)},i7=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function l6e(r,e){return!!(r===e||i7(r)&&i7(e))}function c6e(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!l6e(r[t],e[t]))return!1;return!0}function u6e(r,e){e===void 0&&(e=c6e);var t=null;function n(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var a=r.apply(this,i);return t={lastResult:a,lastArgs:i,lastThis:this},a}return n.clear=function(){t=null},n}var A6e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},f6e=function(e){return Pt("span",Wt({css:A6e},e))},s7=f6e,h6e={guidance:function(e){var t=e.isSearchable,n=e.isMulti,i=e.tabSelectsValue,s=e.context,a=e.isInitialFocus;switch(s){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return a?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,i=n===void 0?"":n,s=e.labels,a=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return a?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,i=e.options,s=e.label,a=s===void 0?"":s,o=e.selectValue,l=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,f=function(m,g){return m&&m.length?"".concat(m.indexOf(g)+1," of ").concat(m.length):""};if(t==="value"&&o)return"value ".concat(a," focused, ").concat(f(o,n),".");if(t==="menu"&&u){var d=l?" disabled":"",p="".concat(c?" selected":"").concat(d);return"".concat(a).concat(p,", ").concat(f(i,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},d6e=function(e){var t=e.ariaSelection,n=e.focusedOption,i=e.focusedValue,s=e.focusableOptions,a=e.isFocused,o=e.selectValue,l=e.selectProps,c=e.id,u=e.isAppleDevice,f=l.ariaLiveMessages,d=l.getOptionLabel,p=l.inputValue,v=l.isMulti,m=l.isOptionDisabled,g=l.isSearchable,w=l.menuIsOpen,b=l.options,E=l.screenReaderStatus,B=l.tabSelectsValue,S=l.isLoading,M=l["aria-label"],I=l["aria-live"],k=we.useMemo(function(){return Ht(Ht({},h6e),f||{})},[f]),O=we.useMemo(function(){var R="";if(t&&k.onChange){var L=t.option,Q=t.options,G=t.removedValue,Y=t.removedValues,W=t.value,V=function(fe){return Array.isArray(fe)?null:fe},T=G||L||V(W),H=T?d(T):"",K=Q||Y||void 0,N=K?K.map(d):[],te=Ht({isDisabled:T&&m(T,o),label:H,labels:N},t);R=k.onChange(te)}return R},[t,k,m,o,d]),C=we.useMemo(function(){var R="",L=n||i,Q=!!(n&&o&&o.includes(n));if(L&&k.onFocus){var G={focused:L,label:d(L),isDisabled:m(L,o),isSelected:Q,options:s,context:L===n?"menu":"value",selectValue:o,isAppleDevice:u};R=k.onFocus(G)}return R},[n,i,d,m,k,s,o,u]),P=we.useMemo(function(){var R="";if(w&&b.length&&!S&&k.onFilter){var L=E({count:s.length});R=k.onFilter({inputValue:p,resultsMessage:L})}return R},[s,p,w,k,b,E,S]),D=t?.action==="initial-input-focus",F=we.useMemo(function(){var R="";if(k.guidance){var L=i?"value":w?"menu":"input";R=k.guidance({"aria-label":M,context:L,isDisabled:n&&m(n,o),isMulti:v,isSearchable:g,tabSelectsValue:B,isInitialFocus:D})}return R},[M,n,i,v,m,g,w,k,o,B,D]),_=Pt(we.Fragment,null,Pt("span",{id:"aria-selection"},O),Pt("span",{id:"aria-focused"},C),Pt("span",{id:"aria-results"},P),Pt("span",{id:"aria-guidance"},F));return Pt(we.Fragment,null,Pt(s7,{id:c},D&&_),Pt(s7,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},a&&!D&&_))},p6e=d6e,SD=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],m6e=new RegExp("["+SD.map(function(r){return r.letters}).join("")+"]","g"),oee={};for(var QU=0;QU<SD.length;QU++)for(var zU=SD[QU],VU=0;VU<zU.letters.length;VU++)oee[zU.letters[VU]]=zU.base;var lee=function(e){return e.replace(m6e,function(t){return oee[t]})},g6e=u6e(lee),a7=function(e){return e.replace(/^\s+|\s+$/g,"")},v6e=function(e){return"".concat(e.label," ").concat(e.value)},y6e=function(e){return function(t,n){if(t.data.__isNew__)return!0;var i=Ht({ignoreCase:!0,ignoreAccents:!0,stringify:v6e,trim:!0,matchFrom:"any"},e),s=i.ignoreCase,a=i.ignoreAccents,o=i.stringify,l=i.trim,c=i.matchFrom,u=l?a7(n):n,f=l?a7(o(t)):o(t);return s&&(u=u.toLowerCase(),f=f.toLowerCase()),a&&(u=g6e(u),f=lee(f)),c==="start"?f.substr(0,u.length)===u:f.indexOf(u)>-1}},w6e=["innerRef"];function _6e(r){var e=r.innerRef,t=Fu(r,w6e),n=KHe(t,"onExited","in","enter","exit","appear");return Pt("input",Wt({ref:e},n,{css:iP({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var x6e=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function b6e(r){var e=r.isEnabled,t=r.onBottomArrive,n=r.onBottomLeave,i=r.onTopArrive,s=r.onTopLeave,a=we.useRef(!1),o=we.useRef(!1),l=we.useRef(0),c=we.useRef(null),u=we.useCallback(function(g,w){if(c.current!==null){var b=c.current,E=b.scrollTop,B=b.scrollHeight,S=b.clientHeight,M=c.current,I=w>0,k=B-S-E,O=!1;k>w&&a.current&&(n&&n(g),a.current=!1),I&&o.current&&(s&&s(g),o.current=!1),I&&w>k?(t&&!a.current&&t(g),M.scrollTop=B,O=!0,a.current=!0):!I&&-w>E&&(i&&!o.current&&i(g),M.scrollTop=0,O=!0,o.current=!0),O&&x6e(g)}},[t,n,i,s]),f=we.useCallback(function(g){u(g,g.deltaY)},[u]),d=we.useCallback(function(g){l.current=g.changedTouches[0].clientY},[]),p=we.useCallback(function(g){var w=l.current-g.changedTouches[0].clientY;u(g,w)},[u]),v=we.useCallback(function(g){if(g){var w=GHe?{passive:!1}:!1;g.addEventListener("wheel",f,w),g.addEventListener("touchstart",d,w),g.addEventListener("touchmove",p,w)}},[p,d,f]),m=we.useCallback(function(g){g&&(g.removeEventListener("wheel",f,!1),g.removeEventListener("touchstart",d,!1),g.removeEventListener("touchmove",p,!1))},[p,d,f]);return we.useEffect(function(){if(e){var g=c.current;return v(g),function(){m(g)}}},[e,v,m]),function(g){c.current=g}}var o7=["boxSizing","height","overflow","paddingRight","position"],l7={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function c7(r){r.cancelable&&r.preventDefault()}function u7(r){r.stopPropagation()}function A7(){var r=this.scrollTop,e=this.scrollHeight,t=r+this.offsetHeight;r===0?this.scrollTop=1:t===e&&(this.scrollTop=r-1)}function f7(){return"ontouchstart"in window||navigator.maxTouchPoints}var h7=!!(typeof window<"u"&&window.document&&window.document.createElement),W0=0,cp={capture:!1,passive:!1};function E6e(r){var e=r.isEnabled,t=r.accountForScrollbars,n=t===void 0?!0:t,i=we.useRef({}),s=we.useRef(null),a=we.useCallback(function(l){if(h7){var c=document.body,u=c&&c.style;if(n&&o7.forEach(function(v){var m=u&&u[v];i.current[v]=m}),n&&W0<1){var f=parseInt(i.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,p=window.innerWidth-d+f||0;Object.keys(l7).forEach(function(v){var m=l7[v];u&&(u[v]=m)}),u&&(u.paddingRight="".concat(p,"px"))}c&&f7()&&(c.addEventListener("touchmove",c7,cp),l&&(l.addEventListener("touchstart",A7,cp),l.addEventListener("touchmove",u7,cp))),W0+=1}},[n]),o=we.useCallback(function(l){if(h7){var c=document.body,u=c&&c.style;W0=Math.max(W0-1,0),n&&W0<1&&o7.forEach(function(f){var d=i.current[f];u&&(u[f]=d)}),c&&f7()&&(c.removeEventListener("touchmove",c7,cp),l&&(l.removeEventListener("touchstart",A7,cp),l.removeEventListener("touchmove",u7,cp)))}},[n]);return we.useEffect(function(){if(e){var l=s.current;return a(l),function(){o(l)}}},[e,a,o]),function(l){s.current=l}}var S6e=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},B6e={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function M6e(r){var e=r.children,t=r.lockEnabled,n=r.captureEnabled,i=n===void 0?!0:n,s=r.onBottomArrive,a=r.onBottomLeave,o=r.onTopArrive,l=r.onTopLeave,c=b6e({isEnabled:i,onBottomArrive:s,onBottomLeave:a,onTopArrive:o,onTopLeave:l}),u=E6e({isEnabled:t}),f=function(p){c(p),u(p)};return Pt(we.Fragment,null,t&&Pt("div",{onClick:S6e,css:B6e}),e(f))}var C6e={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},T6e=function(e){var t=e.name,n=e.onFocus;return Pt("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:C6e,value:"",onChange:function(){}})},R6e=T6e;function cP(r){var e;return typeof window<"u"&&window.navigator!=null?r.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function I6e(){return cP(/^iPhone/i)}function cee(){return cP(/^Mac/i)}function U6e(){return cP(/^iPad/i)||cee()&&navigator.maxTouchPoints>1}function F6e(){return I6e()||U6e()}function L6e(){return cee()||F6e()}var D6e=function(e){return e.label},O6e=function(e){return e.label},N6e=function(e){return e.value},P6e=function(e){return!!e.isDisabled},k6e={clearIndicator:_Qe,container:uQe,control:CQe,dropdownIndicator:yQe,group:UQe,groupHeading:LQe,indicatorsContainer:dQe,indicatorSeparator:bQe,input:PQe,loadingIndicator:BQe,loadingMessage:sQe,menu:JHe,menuList:nQe,menuPortal:lQe,multiValue:VQe,multiValueLabel:GQe,multiValueRemove:jQe,noOptionsMessage:iQe,option:ZQe,placeholder:e6e,singleValue:r6e,valueContainer:fQe},H6e={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Q6e=4,uee=4,z6e=38,V6e=uee*2,G6e={baseUnit:uee,controlHeight:z6e,menuGutter:V6e},GU={borderRadius:Q6e,colors:H6e,spacing:G6e},j6e={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:n7(),captureMenuScroll:!n7(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:y6e(),formatGroupLabel:D6e,getOptionLabel:O6e,getOptionValue:N6e,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:P6e,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!zHe(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function d7(r,e,t,n){var i=hee(r,e,t),s=dee(r,e,t),a=fee(r,e),o=iE(r,e);return{type:"option",data:e,isDisabled:i,isSelected:s,label:a,value:o,index:n}}function Nb(r,e){return r.options.map(function(t,n){if("options"in t){var i=t.options.map(function(a,o){return d7(r,a,e,o)}).filter(function(a){return m7(r,a)});return i.length>0?{type:"group",data:t,options:i,index:n}:void 0}var s=d7(r,t,e,n);return m7(r,s)?s:void 0}).filter(jHe)}function Aee(r){return r.reduce(function(e,t){return t.type==="group"?e.push.apply(e,$N(t.options.map(function(n){return n.data}))):e.push(t.data),e},[])}function p7(r,e){return r.reduce(function(t,n){return n.type==="group"?t.push.apply(t,$N(n.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(n.index,"-").concat(i.index)}}))):t.push({data:n.data,id:"".concat(e,"-").concat(n.index)}),t},[])}function W6e(r,e){return Aee(Nb(r,e))}function m7(r,e){var t=r.inputValue,n=t===void 0?"":t,i=e.data,s=e.isSelected,a=e.label,o=e.value;return(!mee(r)||!s)&&pee(r,{label:a,value:o,data:i},n)}function K6e(r,e){var t=r.focusedValue,n=r.selectValue,i=n.indexOf(t);if(i>-1){var s=e.indexOf(t);if(s>-1)return t;if(i<e.length)return e[i]}return null}function q6e(r,e){var t=r.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}var jU=function(e,t){var n,i=(n=e.find(function(s){return s.data===t}))===null||n===void 0?void 0:n.id;return i||null},fee=function(e,t){return e.getOptionLabel(t)},iE=function(e,t){return e.getOptionValue(t)};function hee(r,e,t){return typeof r.isOptionDisabled=="function"?r.isOptionDisabled(e,t):!1}function dee(r,e,t){if(t.indexOf(e)>-1)return!0;if(typeof r.isOptionSelected=="function")return r.isOptionSelected(e,t);var n=iE(r,e);return t.some(function(i){return iE(r,i)===n})}function pee(r,e,t){return r.filterOption?r.filterOption(e,t):!0}var mee=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return t===void 0?n:t},Y6e=1,gee=function(r){Py(t,r);var e=v4e(t);function t(n){var i;if(uo(this,t),i=e.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=L6e(),i.controlRef=null,i.getControlRef=function(l){i.controlRef=l},i.focusedOptionRef=null,i.getFocusedOptionRef=function(l){i.focusedOptionRef=l},i.menuListRef=null,i.getMenuListRef=function(l){i.menuListRef=l},i.inputRef=null,i.getInputRef=function(l){i.inputRef=l},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(l,c){var u=i.props,f=u.onChange,d=u.name;c.name=d,i.ariaOnChange(l,c),f(l,c)},i.setValue=function(l,c,u){var f=i.props,d=f.closeMenuOnSelect,p=f.isMulti,v=f.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:v}),d&&(i.setState({inputIsHiddenAfterUpdate:!p}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(l,{action:c,option:u})},i.selectOption=function(l){var c=i.props,u=c.blurInputOnSelect,f=c.isMulti,d=c.name,p=i.state.selectValue,v=f&&i.isOptionSelected(l,p),m=i.isOptionDisabled(l,p);if(v){var g=i.getOptionValue(l);i.setValue(p.filter(function(w){return i.getOptionValue(w)!==g}),"deselect-option",l)}else if(!m)f?i.setValue([].concat($N(p),[l]),"select-option",l):i.setValue(l,"select-option");else{i.ariaOnChange(l,{action:"select-option",option:l,name:d});return}u&&i.blurInput()},i.removeValue=function(l){var c=i.props.isMulti,u=i.state.selectValue,f=i.getOptionValue(l),d=u.filter(function(v){return i.getOptionValue(v)!==f}),p=Jx(c,d,d[0]||null);i.onChange(p,{action:"remove-value",removedValue:l}),i.focusInput()},i.clearValue=function(){var l=i.state.selectValue;i.onChange(Jx(i.props.isMulti,[],null),{action:"clear",removedValues:l})},i.popValue=function(){var l=i.props.isMulti,c=i.state.selectValue,u=c[c.length-1],f=c.slice(0,c.length-1),d=Jx(l,f,f[0]||null);u&&i.onChange(d,{action:"pop-value",removedValue:u})},i.getFocusedOptionId=function(l){return jU(i.state.focusableOptionsWithIds,l)},i.getFocusableOptionsWithIds=function(){return p7(Nb(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return NHe.apply(void 0,[i.props.classNamePrefix].concat(c))},i.getOptionLabel=function(l){return fee(i.props,l)},i.getOptionValue=function(l){return iE(i.props,l)},i.getStyles=function(l,c){var u=i.props.unstyled,f=k6e[l](c,u);f.boxSizing="border-box";var d=i.props.styles[l];return d?d(f,c):f},i.getClassNames=function(l,c){var u,f;return(u=(f=i.props.classNames)[l])===null||u===void 0?void 0:u.call(f,c)},i.getElementId=function(l){return"".concat(i.state.instancePrefix,"-").concat(l)},i.getComponents=function(){return o6e(i.props)},i.buildCategorizedOptions=function(){return Nb(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return Aee(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(l,c){i.setState({ariaSelection:Ht({value:l},c)})},i.onMenuMouseDown=function(l){l.button===0&&(l.stopPropagation(),l.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(l){i.blockOptionHover=!1},i.onControlMouseDown=function(l){if(!l.defaultPrevented){var c=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&i.onMenuClose():c&&i.openMenu("first"):(c&&(i.openAfterFocus=!0),i.focusInput()),l.target.tagName!=="INPUT"&&l.target.tagName!=="TEXTAREA"&&l.preventDefault()}},i.onDropdownIndicatorMouseDown=function(l){if(!(l&&l.type==="mousedown"&&l.button!==0)&&!i.props.isDisabled){var c=i.props,u=c.isMulti,f=c.menuIsOpen;i.focusInput(),f?(i.setState({inputIsHiddenAfterUpdate:!u}),i.onMenuClose()):i.openMenu("first"),l.preventDefault()}},i.onClearIndicatorMouseDown=function(l){l&&l.type==="mousedown"&&l.button!==0||(i.clearValue(),l.preventDefault(),i.openAfterFocus=!1,l.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(l){typeof i.props.closeMenuOnScroll=="boolean"?l.target instanceof HTMLElement&&SS(l.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(l)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(l){var c=l.touches,u=c&&c.item(0);u&&(i.initialTouchX=u.clientX,i.initialTouchY=u.clientY,i.userIsDragging=!1)},i.onTouchMove=function(l){var c=l.touches,u=c&&c.item(0);if(u){var f=Math.abs(u.clientX-i.initialTouchX),d=Math.abs(u.clientY-i.initialTouchY),p=5;i.userIsDragging=f>p||d>p}},i.onTouchEnd=function(l){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(l.target)&&i.menuListRef&&!i.menuListRef.contains(l.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(l){i.userIsDragging||i.onControlMouseDown(l)},i.onClearIndicatorTouchEnd=function(l){i.userIsDragging||i.onClearIndicatorMouseDown(l)},i.onDropdownIndicatorTouchEnd=function(l){i.userIsDragging||i.onDropdownIndicatorMouseDown(l)},i.handleInputChange=function(l){var c=i.props.inputValue,u=l.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(u,{action:"input-change",prevInputValue:c}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(l){i.props.onFocus&&i.props.onFocus(l),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(l){var c=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(l),i.onInputChange("",{action:"input-blur",prevInputValue:c}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(l){if(!(i.blockOptionHover||i.state.focusedOption===l)){var c=i.getFocusableOptions(),u=c.indexOf(l);i.setState({focusedOption:l,focusedOptionId:u>-1?i.getFocusedOptionId(l):null})}},i.shouldHideSelectedOptions=function(){return mee(i.props)},i.onValueInputFocus=function(l){l.preventDefault(),l.stopPropagation(),i.focus()},i.onKeyDown=function(l){var c=i.props,u=c.isMulti,f=c.backspaceRemovesValue,d=c.escapeClearsValue,p=c.inputValue,v=c.isClearable,m=c.isDisabled,g=c.menuIsOpen,w=c.onKeyDown,b=c.tabSelectsValue,E=c.openMenuOnFocus,B=i.state,S=B.focusedOption,M=B.focusedValue,I=B.selectValue;if(!m&&!(typeof w=="function"&&(w(l),l.defaultPrevented))){switch(i.blockOptionHover=!0,l.key){case"ArrowLeft":if(!u||p)return;i.focusValue("previous");break;case"ArrowRight":if(!u||p)return;i.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(M)i.removeValue(M);else{if(!f)return;u?i.popValue():v&&i.clearValue()}break;case"Tab":if(i.isComposing||l.shiftKey||!g||!b||!S||E&&i.isOptionSelected(S,I))return;i.selectOption(S);break;case"Enter":if(l.keyCode===229)break;if(g){if(!S||i.isComposing)return;i.selectOption(S);break}return;case"Escape":g?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:p}),i.onMenuClose()):v&&d&&i.clearValue();break;case" ":if(p)return;if(!g){i.openMenu("first");break}if(!S)return;i.selectOption(S);break;case"ArrowUp":g?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":g?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!g)return;i.focusOption("pageup");break;case"PageDown":if(!g)return;i.focusOption("pagedown");break;case"Home":if(!g)return;i.focusOption("first");break;case"End":if(!g)return;i.focusOption("last");break;default:return}l.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Y6e),i.state.selectValue=e7(n.value),n.menuIsOpen&&i.state.selectValue.length){var s=i.getFocusableOptionsWithIds(),a=i.buildFocusableOptions(),o=a.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=s,i.state.focusedOption=a[o],i.state.focusedOptionId=jU(s,a[o])}return i}return Ao(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&t7(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isDisabled,o=s.menuIsOpen,l=this.state.isFocused;(l&&!a&&i.isDisabled||l&&o&&!i.menuIsOpen)&&this.focusInput(),l&&a&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!a&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t7(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,s){this.props.onInputChange(i,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var s=this,a=this.state,o=a.selectValue,l=a.isFocused,c=this.buildFocusableOptions(),u=i==="first"?0:c.length-1;if(!this.props.isMulti){var f=c.indexOf(o[0]);f>-1&&(u=f)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:c[u],focusedOptionId:this.getFocusedOptionId(c[u])},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(i){var s=this.state,a=s.selectValue,o=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=a.indexOf(o);o||(l=-1);var c=a.length-1,u=-1;if(a.length){switch(i){case"previous":l===0?u=0:l===-1?u=c:u=l-1;break;case"next":l>-1&&l<c&&(u=l+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:a[u]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,a=this.state.focusedOption,o=this.getFocusableOptions();if(o.length){var l=0,c=o.indexOf(a);a||(c=-1),i==="up"?l=c>0?c-1:o.length-1:i==="down"?l=(c+1)%o.length:i==="pageup"?(l=c-s,l<0&&(l=0)):i==="pagedown"?(l=c+s,l>o.length-1&&(l=o.length-1)):i==="last"&&(l=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[l],focusedValue:null,focusedOptionId:this.getFocusedOptionId(o[l])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(GU):Ht(Ht({},GU),this.props.theme):GU}},{key:"getCommonProps",value:function(){var i=this.clearValue,s=this.cx,a=this.getStyles,o=this.getClassNames,l=this.getValue,c=this.selectOption,u=this.setValue,f=this.props,d=f.isMulti,p=f.isRtl,v=f.options,m=this.hasValue();return{clearValue:i,cx:s,getStyles:a,getClassNames:o,getValue:l,hasValue:m,isMulti:d,isRtl:p,options:v,selectOption:c,selectProps:f,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,s=i.isClearable,a=i.isMulti;return s===void 0?a:s}},{key:"isOptionDisabled",value:function(i,s){return hee(this.props,i,s)}},{key:"isOptionSelected",value:function(i,s){return dee(this.props,i,s)}},{key:"filterOption",value:function(i,s){return pee(this.props,i,s)}},{key:"formatOptionLabel",value:function(i,s){if(typeof this.props.formatOptionLabel=="function"){var a=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(i,{context:s,inputValue:a,selectValue:o})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,s=i.isDisabled,a=i.isSearchable,o=i.inputId,l=i.inputValue,c=i.tabIndex,u=i.form,f=i.menuIsOpen,d=i.required,p=this.getComponents(),v=p.Input,m=this.state,g=m.inputIsHidden,w=m.ariaSelection,b=this.commonProps,E=o||this.getElementId("input"),B=Ht(Ht(Ht({"aria-autocomplete":"list","aria-expanded":f,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},f&&{"aria-controls":this.getElementId("listbox")}),!a&&{"aria-readonly":!0}),this.hasValue()?w?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return a?we.createElement(v,Wt({},b,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:E,innerRef:this.getInputRef,isDisabled:s,isHidden:g,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:c,form:u,type:"text",value:l},B)):we.createElement(_6e,Wt({id:E,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:nE,onFocus:this.onInputFocus,disabled:s,tabIndex:c,inputMode:"none",form:u,value:""},B))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,s=this.getComponents(),a=s.MultiValue,o=s.MultiValueContainer,l=s.MultiValueLabel,c=s.MultiValueRemove,u=s.SingleValue,f=s.Placeholder,d=this.commonProps,p=this.props,v=p.controlShouldRenderValue,m=p.isDisabled,g=p.isMulti,w=p.inputValue,b=p.placeholder,E=this.state,B=E.selectValue,S=E.focusedValue,M=E.isFocused;if(!this.hasValue()||!v)return w?null:we.createElement(f,Wt({},d,{key:"placeholder",isDisabled:m,isFocused:M,innerProps:{id:this.getElementId("placeholder")}}),b);if(g)return B.map(function(k,O){var C=k===S,P="".concat(i.getOptionLabel(k),"-").concat(i.getOptionValue(k));return we.createElement(a,Wt({},d,{components:{Container:o,Label:l,Remove:c},isFocused:C,isDisabled:m,key:P,index:O,removeProps:{onClick:function(){return i.removeValue(k)},onTouchEnd:function(){return i.removeValue(k)},onMouseDown:function(F){F.preventDefault()}},data:k}),i.formatOptionLabel(k,"value"))});if(w)return null;var I=B[0];return we.createElement(u,Wt({},d,{data:I,isDisabled:m}),this.formatOptionLabel(I,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),s=i.ClearIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,u=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||c)return null;var f={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return we.createElement(s,Wt({},a,{innerProps:f,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),s=i.LoadingIndicator,a=this.commonProps,o=this.props,l=o.isDisabled,c=o.isLoading,u=this.state.isFocused;if(!s||!c)return null;var f={"aria-hidden":"true"};return we.createElement(s,Wt({},a,{innerProps:f,isDisabled:l,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator,a=i.IndicatorSeparator;if(!s||!a)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused;return we.createElement(a,Wt({},o,{isDisabled:l,isFocused:c}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),s=i.DropdownIndicator;if(!s)return null;var a=this.commonProps,o=this.props.isDisabled,l=this.state.isFocused,c={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return we.createElement(s,Wt({},a,{innerProps:c,isDisabled:o,isFocused:l}))}},{key:"renderMenu",value:function(){var i=this,s=this.getComponents(),a=s.Group,o=s.GroupHeading,l=s.Menu,c=s.MenuList,u=s.MenuPortal,f=s.LoadingMessage,d=s.NoOptionsMessage,p=s.Option,v=this.commonProps,m=this.state.focusedOption,g=this.props,w=g.captureMenuScroll,b=g.inputValue,E=g.isLoading,B=g.loadingMessage,S=g.minMenuHeight,M=g.maxMenuHeight,I=g.menuIsOpen,k=g.menuPlacement,O=g.menuPosition,C=g.menuPortalTarget,P=g.menuShouldBlockScroll,D=g.menuShouldScrollIntoView,F=g.noOptionsMessage,_=g.onMenuScrollToTop,R=g.onMenuScrollToBottom;if(!I)return null;var L=function(H,K){var N=H.type,te=H.data,oe=H.isDisabled,fe=H.isSelected,he=H.label,me=H.value,Te=m===te,Re=oe?void 0:function(){return i.onOptionHover(te)},de=oe?void 0:function(){return i.selectOption(te)},Z="".concat(i.getElementId("option"),"-").concat(K),ve={id:Z,onClick:de,onMouseMove:Re,onMouseOver:Re,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:fe};return we.createElement(p,Wt({},v,{innerProps:ve,data:te,isDisabled:oe,isSelected:fe,key:Z,label:he,type:N,value:me,isFocused:Te,innerRef:Te?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(H.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(T){if(T.type==="group"){var H=T.data,K=T.options,N=T.index,te="".concat(i.getElementId("group"),"-").concat(N),oe="".concat(te,"-heading");return we.createElement(a,Wt({},v,{key:te,data:H,options:K,Heading:o,headingProps:{id:oe,data:T.data},label:i.formatGroupLabel(T.data)}),T.options.map(function(fe){return L(fe,"".concat(N,"-").concat(fe.index))}))}else if(T.type==="option")return L(T,"".concat(T.index))});else if(E){var G=B({inputValue:b});if(G===null)return null;Q=we.createElement(f,v,G)}else{var Y=F({inputValue:b});if(Y===null)return null;Q=we.createElement(d,v,Y)}var W={minMenuHeight:S,maxMenuHeight:M,menuPlacement:k,menuPosition:O,menuShouldScrollIntoView:D},V=we.createElement($He,Wt({},v,W),function(T){var H=T.ref,K=T.placerProps,N=K.placement,te=K.maxHeight;return we.createElement(l,Wt({},v,W,{innerRef:H,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:E,placement:N}),we.createElement(M6e,{captureEnabled:w,onTopArrive:_,onBottomArrive:R,lockEnabled:P},function(oe){return we.createElement(c,Wt({},v,{innerRef:function(he){i.getMenuListRef(he),oe(he)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:i.getElementId("listbox")},isLoading:E,maxHeight:te,focusedOption:m}),Q)}))});return C||O==="fixed"?we.createElement(u,Wt({},v,{appendTo:C,controlElement:this.controlRef,menuPlacement:k,menuPosition:O}),V):V}},{key:"renderFormField",value:function(){var i=this,s=this.props,a=s.delimiter,o=s.isDisabled,l=s.isMulti,c=s.name,u=s.required,f=this.state.selectValue;if(u&&!this.hasValue()&&!o)return we.createElement(R6e,{name:c,onFocus:this.onValueInputFocus});if(!(!c||o))if(l)if(a){var d=f.map(function(m){return i.getOptionValue(m)}).join(a);return we.createElement("input",{name:c,type:"hidden",value:d})}else{var p=f.length>0?f.map(function(m,g){return we.createElement("input",{key:"i-".concat(g),name:c,type:"hidden",value:i.getOptionValue(m)})}):we.createElement("input",{name:c,type:"hidden",value:""});return we.createElement("div",null,p)}else{var v=f[0]?this.getOptionValue(f[0]):"";return we.createElement("input",{name:c,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,s=this.state,a=s.ariaSelection,o=s.focusedOption,l=s.focusedValue,c=s.isFocused,u=s.selectValue,f=this.getFocusableOptions();return we.createElement(p6e,Wt({},i,{id:this.getElementId("live-region"),ariaSelection:a,focusedOption:o,focusedValue:l,isFocused:c,selectValue:u,focusableOptions:f,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),s=i.Control,a=i.IndicatorsContainer,o=i.SelectContainer,l=i.ValueContainer,c=this.props,u=c.className,f=c.id,d=c.isDisabled,p=c.menuIsOpen,v=this.state.isFocused,m=this.commonProps=this.getCommonProps();return we.createElement(o,Wt({},m,{className:u,innerProps:{id:f,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:v}),this.renderLiveRegion(),we.createElement(s,Wt({},m,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:v,menuIsOpen:p}),we.createElement(l,Wt({},m,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),we.createElement(a,Wt({},m,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,s){var a=s.prevProps,o=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,c=s.ariaSelection,u=s.isFocused,f=s.prevWasFocused,d=s.instancePrefix,p=i.options,v=i.value,m=i.menuIsOpen,g=i.inputValue,w=i.isMulti,b=e7(v),E={};if(a&&(v!==a.value||p!==a.options||m!==a.menuIsOpen||g!==a.inputValue)){var B=m?W6e(i,b):[],S=m?p7(Nb(i,b),"".concat(d,"-option")):[],M=o?K6e(s,b):null,I=q6e(s,B),k=jU(S,I);E={selectValue:b,focusedOption:I,focusedOptionId:k,focusableOptionsWithIds:S,focusedValue:M,clearFocusValueOnUpdate:!1}}var O=l!=null&&i!==a?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},C=c,P=u&&f;return u&&!P&&(C={value:Jx(w,b,b[0]||null),options:b,action:"initial-input-focus"},P=!f),c?.action==="initial-input-focus"&&(C=null),Ht(Ht(Ht({},E),O),{},{prevProps:i,ariaSelection:C,prevWasFocused:P})}}]),t}(we.Component);gee.defaultProps=j6e;var X6e=we.forwardRef(function(r,e){var t=g4e(r);return we.createElement(gee,Wt({ref:e},t))}),IA=X6e;function Z6e({selectedTrait:r,selectedVRM:e}){const{manifest:t,loraDataGenerator:n,sceneElements:i}=le.useContext(Er),[s,a]=we.useState([]),[o,l]=we.useState(null),c=f=>{t?.loras!=null&&(l(t.loras[f.value]),console.log(t.loras[f.value]))},u=async()=>{const f=i.parent;f.remove(i),await n.createLoraData(o),f.add(i)};return we.useEffect(()=>{if(t?.loras!=null){const f=t.loras.map((d,p)=>({value:p,label:d.name,description:d.description,manifest:d.manifest}));a(f)}},[t]),q.jsx("div",{children:q.jsxs("div",{className:ut.InformationContainerPos,children:[q.jsx(oo,{title:"Lora Creation",width:180,right:20}),q.jsxs("div",{className:ut.scrollContainer,children:[q.jsx("div",{className:ut.traitInfoTitle,children:"Lora Manifests"}),q.jsx(IA,{className:ut.dropdownControl,options:s,onChange:c,placeholder:"Select an option"}),";",q.jsx("div",{className:ut.traitInfoText,children:o?.description||""}),o!=null&&q.jsx("div",{className:ut.actionButton,onClick:u,children:q.jsx("div",{children:"  Create Lora Data "})})]})]})})}function J6e({selectedTrait:r,selectedVRM:e}){const{manifest:t,spriteAtlasGenerator:n,sceneElements:i}=le.useContext(Er),[s,a]=we.useState([]),[o,l]=we.useState(""),[c,u]=we.useState(null),f=p=>{t?.sprites!=null&&(l(t.sprites[p.value].description),u(t.sprites[p.value]))},d=async()=>{const p=i.parent;p.remove(i),await n.createSpriteAtlas(c),p.add(i)};return we.useEffect(()=>{if(t?.sprites!=null){const p=t.sprites.map((v,m)=>({value:m,label:v.name,description:v.description,manifest:v.manifest}));a(p)}},[t]),q.jsx("div",{children:q.jsxs("div",{className:ut.InformationContainerPos,children:[q.jsx(oo,{title:"Sprite Creation",width:180,right:20}),q.jsxs("div",{className:ut.scrollContainer,children:[q.jsx("div",{className:ut.traitInfoTitle,children:"Sprite Manifests"}),q.jsx(IA,{className:ut.dropdownControl,options:s,onChange:f,placeholder:"Select an option"}),q.jsx("div",{className:ut.traitInfoText,children:o||""}),c!=null&&q.jsx("div",{className:ut.actionButton,onClick:d,children:q.jsx("div",{children:"  Create Sprite Data "})})]})]})})}const g7=4096;function $6e({selectedTrait:r,traitGroupName:e}){const{manifest:t,thumbnailsGenerator:n,sceneElements:i,characterManager:s}=le.useContext(Er),[a,o]=we.useState([]),[l,c]=we.useState(""),[u,f]=we.useState(""),[d,p]=we.useState(""),[v,m]=we.useState(!1),[g,w]=we.useState(512),[b,E]=we.useState(512),[B,S]=we.useState(.1),[M,I]=we.useState(.1),[k,O]=we.useState("center"),[C,P]=we.useState("center"),[D,F]=we.useState("center"),[_,R]=we.useState("head"),[L,Q]=we.useState("chest"),[G,Y]=we.useState(!0),[W,V]=we.useState(!1),T=[{label:"center"},{label:"left"},{label:"right"}],H=[{label:"center"},{label:"top"},{label:"bottom"}],K=[{label:"center"},{label:"front"},{label:"back"}],N=[{label:"head"},{label:"neck"},{label:"chest"},{label:"spine"},{label:"hips"},{label:"upperLeg"},{label:"lowerLeg"},{label:"foot"}],te=ye=>{t?.thumbnails!=null&&(c(t.thumbnails[ye.value].description),p(t.thumbnails[ye.value].manifest),f(t.thumbnails[ye.value].name))},oe=(ye,se,ce,_e)=>isNaN(ye)?_e:ye>ce?ce:ye<se?se:ye,fe=ye=>{const se=parseInt(ye.target.value);w(oe(se,1,g7,512))},he=ye=>{const se=parseInt(ye.target.value);E(oe(se,1,g7,512))},me=ye=>{const se=parseFloat(ye.target.value);S(oe(se,0,1,.1))},Te=ye=>{const se=parseFloat(ye.target.value);I(oe(se,0,1,.1))},Re=ye=>{m(ye)},de=async()=>{const ye=i.parent;ye.remove(i),await n.createThumbnails(t.thumbnails[0]),ye.add(i)},Z=(ye=!0)=>({topFrameOffset:M,bottomFrameOffset:B,thumbnailsWidth:g,thumbnailsHeight:b,backgroundColor:[0,0,0,0],thumbnailsCollection:[{traitGroup:e,cameraPosition:C+"-"+D+"-"+k,topBoneName:_==="upperLeg"||_==="lowerLeg"||_==="foot"?"left"+_[0].toUpperCase()+_.slice(1):_,topBoneMaxVertex:G,bottomBoneName:L==="upperLeg"||L==="lowerLeg"||_==="foot"?"left"+L[0].toUpperCase()+L.slice(1):L,bottomBoneMaxVertex:W,saveOnlyIDs:ye?null:r.id}]}),ve=async(ye=!1)=>{s.storeCurrentAvatar();const se=i.parent;se.remove(i),ye?await n.createThumbnailsWithObjectData(Z(),!1,null,e+"_thumbnails"):await n.createThumbnailsWithObjectData(Z(!1),!1),se.add(i),s.loadStoredAvatar()};return we.useEffect(()=>{if(t?.thumbnails!=null){const ye=t.thumbnails.map((se,ce)=>({value:ce,label:se.name,description:se.description,manifest:se.manifest}));o(ye)}},[t]),q.jsx("div",{children:q.jsxs("div",{className:ut.InformationContainerPos,children:[q.jsx(oo,{title:"Thumbnail Creation",width:180,right:20}),q.jsxs("div",{className:ut.scrollContainer,children:[q.jsxs("div",{className:ut.tabHolder,children:[q.jsx("div",{className:ut.tabButton+(v?"":" "+ut.tabButtonSelected),onClick:()=>{Re(!1)},children:q.jsxs("div",{children:["  ","Custom"," "]})}),q.jsx("div",{className:ut.tabButton+(v?" "+ut.tabButtonSelected:""),onClick:()=>{Re(!0)},children:q.jsxs("div",{children:["  ","Manifest"," "]})})]}),q.jsx("br",{}),v?q.jsxs(q.Fragment,{children:[q.jsx("div",{className:ut.traitInfoTitle+" "+ut.centerAlign,children:"Thumbnail Manifests"}),q.jsx(IA,{className:ut.dropdownControl,options:a,value:u,onChange:te,placeholder:"Select an option"}),";",q.jsx("div",{className:ut.traitInfoText,children:l||""}),d!=""&&q.jsx("div",{className:ut.actionButton,onClick:de,children:q.jsx("div",{children:"  Create Thumbnails "})})]}):q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:ut.traitInfoText,children:[q.jsx("div",{className:ut.traitInfoTitle+" "+ut.centerAlign,style:{margin:"10px 0px 10px"},children:"Resolution"}),"Width ",q.jsx("input",{value:g,className:ut["input-box"],step:1,onChange:ye=>{w(ye.target.value)},onBlur:fe}),q.jsx("br",{}),"Height ",q.jsx("input",{value:b,className:ut["input-box"],step:1,onChange:ye=>{E(ye.target.value)},onBlur:he}),q.jsx("br",{}),"Top Spacing ",q.jsx("input",{value:B,className:ut["input-box"],step:.1,onChange:ye=>{S(ye.target.value)},onBlur:me}),q.jsx("br",{}),"Bottom Spacing ",q.jsx("input",{value:M,className:ut["input-box"],step:.1,onChange:ye=>{I(ye.target.value)},onBlur:Te}),q.jsx("br",{}),q.jsx("div",{className:ut.traitInfoTitle+" "+ut.centerAlign,style:{margin:"20px"},children:"Camera Position"})]}),q.jsxs("div",{className:ut.dropdownFlex,children:[q.jsx("div",{className:ut.traitInfoTitle,style:{margin:"0px"},children:"X"}),q.jsx(IA,{className:ut.dropdownControlSmall,options:T,onChange:ye=>{P(ye.label)},value:C})]}),q.jsxs("div",{className:ut.dropdownFlex,children:[q.jsx("div",{className:ut.traitInfoTitle,style:{margin:"0px"},children:"Y"}),q.jsx(IA,{className:ut.dropdownControlSmall,options:H,onChange:ye=>{F(ye.label)},value:D})]}),q.jsxs("div",{className:ut.dropdownFlex,children:[q.jsx("div",{className:ut.traitInfoTitle,style:{margin:"0px"},children:"Z"}),q.jsx(IA,{className:ut.dropdownControlSmall,options:K,onChange:ye=>{O(ye.label)},value:k})]}),q.jsx("div",{className:ut.traitInfoTitle+" "+ut.centerAlign,style:{margin:"30px 0px 30px"},children:"Target Bones"}),q.jsxs("div",{className:ut.dropdownFlex,style:{justifyContent:"space-between"},children:[q.jsx("div",{className:ut.traitInfoTitle,style:{margin:"0px"},children:"Top"}),q.jsx(IA,{className:ut.dropdownControlSmall,options:N,onChange:ye=>{R(ye.label)},value:_})]}),q.jsxs("div",{className:ut.dropdownFlex,style:{justifyContent:"space-between"},children:[q.jsx("div",{className:ut.traitInfoTitle,style:{margin:"0px"},children:"Bottom"}),q.jsx(IA,{className:ut.dropdownControlSmall,options:N,onChange:ye=>{Q(ye.label)},value:L})]}),q.jsxs("div",{style:{textAlign:"left"},children:[q.jsxs("div",{className:ut.checkboxFlex,style:{marginTop:"20px"},children:[q.jsx("input",{type:"checkbox",checked:G,onChange:ye=>{Y(ye.target.checked)}}),q.jsx("div",{className:ut.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Top bone ${G?"uses Top":"uses Low"} Vertex`})]}),q.jsxs("div",{className:ut.checkboxFlex,style:{marginTop:"10px"},children:[q.jsx("input",{type:"checkbox",checked:W,onChange:ye=>{V(ye.target.checked)}}),q.jsx("div",{className:ut.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Bottom bone ${W?"uses Top":"uses Low"} Vertex`})]})]}),e==""?q.jsx("div",{className:ut.traitInfoText+" "+ut.centerAlign,style:{marginTop:"40px"},children:"Please choose a trait category in the left side menu."}):q.jsxs(q.Fragment,{children:[q.jsx("div",{className:ut.traitInfoTitle+" "+ut.centerAlign,style:{marginTop:"20px"},children:"Generate"}),q.jsx("div",{className:ut.traitInfoText+" "+ut.centerAlign,style:{margin:"0px auto 20px"},children:"( "+e+" )"}),q.jsxs("div",{className:ut.simpleFlex,style:{marginTop:"0px"},children:[q.jsx("div",{className:ut.actionButton,style:{margin:"0px"},onClick:()=>{ve(!1)},children:q.jsx("div",{children:"  Current "})}),q.jsx("div",{className:ut.actionButton,style:{margin:"0px"},onClick:()=>{ve(!0)},children:q.jsx("div",{children:"  All "})})]})]})]})]})]})})}const e5e="_InformationContainerPos_10g06_2",t5e="_scrollContainer_10g06_15",n5e="_traitInfoText_10g06_39",r5e="_checkboxHolder_10g06_82",i5e="_actionButton_10g06_92",EA={InformationContainerPos:e5e,scrollContainer:t5e,traitInfoText:n5e,"custom-checkbox":"_custom-checkbox_10g06_51","checkbox-container":"_checkbox-container_10g06_56",checkboxHolder:r5e,actionButton:i5e};function s5e(){const{characterManager:r,moveCamera:e}=le.useContext(Er),[t,n]=le.useState(!1),[i,s]=le.useState(1),a=r.emotionManager.availableEmotions;we.useEffect(()=>{e({targetY:1.8,distance:2})},[]);const o=l=>{r.emotionManager.playEmotion(l,void 0,t,i)};return q.jsx("div",{children:q.jsxs("div",{className:EA.InformationContainerPos,children:[q.jsx(oo,{title:"Emotions",width:180,right:20}),q.jsxs("div",{className:EA.scrollContainer,children:[q.jsx("div",{className:EA.traitInfoText,children:"View different emotions"}),q.jsxs("div",{className:EA.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:EA["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:t,onChange:()=>n(!t)}),q.jsx("div",{className:EA["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),q.jsx("div",{style:{color:"white"},children:"Constant Emotion"})]}),q.jsx("br",{}),q.jsxs("div",{className:EA.traitInfoText,children:["Intensity: ",parseFloat(i.toFixed(2))]}),q.jsx(rh,{title:"",value:parseFloat(i.toFixed(2)),onChange:l=>s(parseFloat(l.currentTarget.value.toString())),min:0,max:1,step:.01}),q.jsx("br",{}),a.map((l,c)=>q.jsx("div",{className:EA.actionButton,onClick:()=>{o(l)},children:q.jsxs("div",{children:["  ",l," "]})},c))]})]})})}function a5e({selectedTrait:r,selectedVRM:e,traitGroupName:t}){const{characterManager:n}=le.useContext(Er),[i,s]=le.useState(""),[a,o]=le.useState(""),l=c=>{c!=i?s(c):s("")};return q.jsxs("div",{children:[i=="wallet"&&q.jsx(f4e,{lockedManifests:a}),i=="Information"&&q.jsx(p4e,{selectedTrait:r,selectedVRM:e}),i=="LoraCreation"&&q.jsx(Z6e,{selectedTrait:r,selectedVRM:e}),i=="SpriteCreation"&&q.jsx(J6e,{selectedTrait:r,selectedVRM:e}),i=="ThumbnailCreation"&&q.jsx($6e,{selectedTrait:r,traitGroupName:t}),i=="EmotionManager"&&q.jsx(s5e,{}),q.jsxs("div",{className:OU.InformationContainerPos,children:[q.jsx(oo,{title:"Tools",width:90,right:0}),q.jsx("div",{className:OU.scrollContainer,children:q.jsxs("div",{className:OU.optionsContainer,children:[q.jsx("div",{onClick:()=>{l("Information")},children:q.jsx(Fo,{size:56,icon:Kke,rarity:i=="Information"?"mythic":"none"})},"Information"),q.jsx("div",{onClick:()=>{l("LoraCreation")},children:q.jsx(Fo,{size:56,icon:Xke,rarity:i=="LoraCreation"?"mythic":"none"})},"LoraCreation"),q.jsx("div",{onClick:()=>{l("SpriteCreation")},children:q.jsx(Fo,{size:56,icon:qke,rarity:i=="SpriteCreation"?"mythic":"none"})},"SpriteCreation"),q.jsx("div",{onClick:()=>{l("ThumbnailCreation")},children:q.jsx(Fo,{size:56,icon:Zke,rarity:i=="ThumbnailCreation"?"mythic":"none"})},"ThumbnailCreation"),q.jsx("div",{onClick:()=>{l("EmotionManager")},children:q.jsx(Fo,{size:56,icon:Yke,rarity:i=="EmotionManager"?"mythic":"none"})},"Emotions")]})})]})]})}const o5e="/assets/sale-icon-C9pCuhha.png",ha={TRAIT:0,BLEND_SHAPE:1,DECAL:2};function l5e(){const{isLoading:r,setViewMode:e,setIsLoading:t}=le.useContext(Ta),{toggleDebugMode:n,characterManager:i,animationManager:s,moveCamera:a}=le.useContext(Er),[o,l]=le.useState(ha.TRAIT),{playSound:c}=le.useContext(Yo),{isMute:u}=le.useContext(qo),{t:f}=we.useContext(bl),d=()=>{!u&&c("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),e(rn.CREATE),n(!1)},[p,v]=le.useState(null),[m,g]=le.useState(null),[w,b]=le.useState(null),[E,B]=le.useState(null),[S,M]=le.useState({}),[I,k]=le.useState(null),[O,C]=le.useState(""),[P,D]=le.useState(!1),[F,_]=le.useState({background:"#ffffff"}),R=()=>{!u&&c("backNextButton"),e(rn.SAVE),n(!1)},L=()=>{t(!0),v(null),i.loadRandomTraits().then(()=>{w&&w.trait!=""&&B(i.getCurrentTraitData(w.trait)),t(!1)}).catch(he=>{t(!1),console.error("Error loading random traits:",he.message)})},Q=he=>{_({background:he.hex})},G=he=>{_({background:he.hex}),i.setTraitColor(w?.trait,he.hex)},Y=async he=>{const me=yu(he.name),Te=URL.createObjectURL(he);await s.loadAnimation(Te,!1,0,!0,"",me),C(s.getCurrentAnimationName())},W=he=>{if(D(!1),w&&w.trait!=""){t(!0);const me=URL.createObjectURL(he);i.loadCustomTexture(w.trait,me).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},V=he=>{if(D(!1),w&&w.trait!=""){t(!0);const me=URL.createObjectURL(he);i.loadCustomTrait(w.trait,me).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},T=he=>{if(console.log(he),he.id===E?.id&&he.collectionID===E?.collectionID){he.blendshapeTraits?.length>0&&l(ha.BLEND_SHAPE);return}D(!1),t(!0),i.loadTrait(he.traitGroup.trait,he.id,he.collectionID).then(()=>{if(t(!1),console.log(i.getCurrentTotalPrice()),he.blendshapeTraits?.length>0){const me=i.getCurrentBlendShapeTraitData(he.traitGroup.trait);M(Object.entries(me).reduce((Te,[Re,de])=>(Te[Re]=de.id,Te),{})),l(ha.BLEND_SHAPE)}B(he)})},H=he=>{D(!1),i.removeTrait(he),B(null)},K=he=>{D(!1),t(!0),i.loadRandomTrait(he).then(()=>{t(!1),B(i.getCurrentTraitData(he))})},N=he=>{D(!1);const me=Array.from(he),Te=[],Re=de=>new Promise((Z,ve)=>{if(de&&de.name.toLowerCase().endsWith(".json")){const ye=new FileReader,se=`${i.manifestData?.getAssetsDirectory()}/anata/_thumbnails/t_${de.name.split("_")[0]}.jpg`;console.log(se),ye.onload=function(ce){try{const _e=JSON.parse(ce.target.result);_e.thumb=se,Te.push(_e),Z()}catch(_e){console.error("Error parsing the JSON file:",_e),ve(_e)}},ye.readAsText(de)}});Promise.all(me.map(Re)).then(()=>{Te.length>0&&(v(Te),t(!0),i.loadTraitsFromNFTObject(Te[0]).then(()=>{t(!1)}))}).catch(de=>{console.error("Error processing files:",de)})},te=async he=>{const me=he[0];me&&me.name.toLowerCase().endsWith(".fbx")&&Y(me),me&&(me.name.toLowerCase().endsWith(".png")||me.name.toLowerCase().endsWith(".jpg"))&&W(me),me&&me.name.toLowerCase().endsWith(".vrm")&&V(me),me&&me.name.toLowerCase().endsWith(".json")&&N(he)},oe=he=>{if(!u&&c("optionClick"),D(!1),w?.trait!==he.trait){l(ha.TRAIT),g(i.getTraits(he.trait)),b(he);const me=i.getCurrentTraitData(he.trait),Te=i.getCurrentBlendShapeTraitData(he.trait);B(me),M(Object.entries(Te).reduce((Re,[de,Z])=>(Re[de]=Z.id,Re),{})),k(i.getCurrentTraitVRM(he.trait)),a({targetY:he.cameraTarget.height,distance:he.cameraTarget.distance})}else g(null),b(null),B(null),M({}),a({targetY:.8,distance:3.2})},fe=()=>{D(!1);var he=document.createElement("input");if(he.type="file",he.accept=".vrm",!w)return console.error("Please select a trait group first");he.onchange=me=>{var Te=me.target.files[0];if(Te.name.endsWith(".vrm")){const Re=URL.createObjectURL(Te);t(!0),i.loadCustomTrait(w.trait,Re).then(()=>{t(!1)})}},he.click()};return q.jsxs("div",{className:zn.container,children:[q.jsx("div",{className:`loadingIndicator ${r?"active":""}`,children:q.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),q.jsx("div",{className:"sectionTitle",children:f("pageTitles.chooseAppearance")}),q.jsx(ky,{onFilesDrop:te}),q.jsxs("div",{className:zn.sideMenu,children:[q.jsx(oo,{title:"Appearance",left:20}),q.jsx("div",{className:zn.bottomLine}),q.jsx("div",{className:zn.scrollContainer,children:q.jsx("div",{className:zn["editor-container"],children:i.getGroupTraits().map((he,me)=>q.jsxs("div",{className:zn.editorButton,onClick:()=>{oe(he)},children:[q.jsx(Fo,{size:56,icon:he.fullIconSvg,rarity:w?.trait!==he.trait?"none":"mythic"}),q.jsx("div",{className:zn.editorText,children:he.name})]},"options_"+me))})})]}),!!m&&w&&q.jsxs("div",{className:zn.selectorContainerPos,children:[q.jsx(oo,{title:w.trait,width:130,left:20}),q.jsxs("div",{className:zn.selectorPickerTabs,children:[E&&o==ha.TRAIT&&q.jsx("div",{className:zn.selectorColorPickerButton,onClick:()=>{D(!P)},children:q.jsx("img",{className:zn.selectorColorPickerImg,src:HUe})}),w&&w.getAllDecals()?.length&&q.jsx("div",{className:zn.selectorColorPickerButton,onClick:()=>o==ha.DECAL?l(ha.TRAIT):l(ha.DECAL),children:q.jsx("img",{className:zn.selectorColorPickerImg,src:mUe})})]}),o==ha.TRAIT&&!!P&&q.jsx("div",{draggable:!1,className:zn.selectorColorPickerUI,children:q.jsx(vke,{styles:{default:{picker:{width:"200px"}}},color:F.background,onChange:Q,onChangeComplete:G})}),q.jsx("div",{className:zn.bottomLine}),q.jsxs("div",{className:zn.scrollContainerOptions,children:[o==ha.TRAIT&&q.jsxs("div",{className:zn["selector-container"],children:[q.jsx("div",{className:`${zn.selectorButton}`,onClick:()=>{K(w.trait)},children:q.jsx(Fo,{size:56,icon:kUe,rarity:"none"})},"randomize-trait"),i.isTraitGroupRequired(w.trait)?q.jsx(q.Fragment,{}):q.jsx("div",{className:`${zn.selectorButton}`,icon:j1,onClick:()=>{H(w.trait)},children:q.jsx(Fo,{size:56,icon:j1,rarity:E==null?"mythic":"none"})},"no-trait"),m.map((he,me)=>{let Te=he.id===E?.id&&he.collectionID===E?.collectionID;return q.jsx("div",{className:`${zn.selectorButton}`,onClick:()=>{T(he),console.log(he)},children:q.jsx(Fo,{size:56,iconOverlay:he.purchasable&&he.locked?o5e:null,icon:he.fullThumbnail,rarity:Te?"mythic":"none"})},me)})]}),o==ha.BLEND_SHAPE&&q.jsx(c5e,{selectedTrait:E,onBack:()=>{l(ha.TRAIT)},selectedBlendShapeTrait:S,setSelectedBlendshapeTrait:M}),o==ha.DECAL&&q.jsx(PUe,{selectedTraitGroup:w,onBack:()=>{l(ha.TRAIT)}})]}),q.jsx("div",{className:zn.uploadContainer,children:q.jsx("div",{className:zn.uploadButton,onClick:fe,children:q.jsx("div",{children:"Upload "})})})]}),q.jsx(cN,{jsonSelectionArray:p}),q.jsx(a5e,{selectedTrait:E,selectedVRM:I,traitGroupName:w?.trait||""}),q.jsx(sS,{loadedAnimationName:O,randomize:L}),q.jsxs("div",{className:zn.buttonContainer,children:[q.jsx(cr,{theme:"light",text:f("callToAction.back"),size:14,className:zn.buttonLeft,onClick:d}),i.canDownload()&&q.jsx(cr,{theme:"light",text:f("callToAction.next"),size:14,className:zn.buttonRight,onClick:R})]})]})}const c5e=({selectedTrait:r,onBack:e,selectedBlendShapeTrait:t,setSelectedBlendshapeTrait:n})=>{const{characterManager:i,moveCamera:s}=le.useContext(Er),a=i.getBlendShapeGroupTraits(r?.traitGroup.trait||"",r?.id||""),o=(c,u)=>{i.removeBlendShapeTrait(c,u.trait);const f={...t};delete f[u.trait],n(f)},l=c=>{const u=c.parentGroup;i.loadBlendShapeTrait(r?.traitGroup.trait||"",u.trait||"",c?.id||""),s({targetY:u.cameraTarget.height,distance:u.cameraTarget.distance});const f={...t};f[u.trait||""]=c.id,n(f)};return q.jsxs("div",{className:zn["selector-container-column"],children:[q.jsx(cr,{theme:"dark",text:"Back",size:14,className:zn.buttonLeft,onClick:e}),a&&a.length>0&&a.map(c=>q.jsxs("div",{className:zn.blendshapeGroup,children:[q.jsx("div",{children:c.name}),q.jsxs("div",{className:zn["selector-container"],children:[q.jsx(v7,{src:j1,active:!t[c.trait],blendshapeID:"cancel",select:()=>o(r.traitGroup.trait,c)},"empty"),c.collection.map(u=>{let f=u.id===t[c.trait];return q.jsx(v7,{src:u.fullThumbnail||"",active:f,blendshapeID:u.id,select:()=>l(u)},u.id)})]})]},c.trait))]})},v7=({active:r,blendshapeID:e,src:t,select:n})=>q.jsx("div",{className:`${zn.selectorButton}`,onClick:n,children:q.jsx(Fo,{size:56,icon:t||"",rarity:r?"mythic":"none"})},e),u5e="_buttonContainer_rgqwy_114",A5e="_buttonLeft_rgqwy_123",f5e="_buttonRight_rgqwy_127",$s={buttonContainer:u5e,buttonLeft:A5e,buttonRight:f5e},h5e="_InformationContainerPos_11mqa_2",d5e="_scrollContainer_11mqa_16",p5e="_traitInfoTitle_11mqa_28",m5e="_traitInfoText_11mqa_38",g5e="_flexSelect_11mqa_66",ci={InformationContainerPos:h5e,scrollContainer:d5e,traitInfoTitle:p5e,traitInfoText:m5e,flexSelect:g5e,"arrow-button":"_arrow-button_11mqa_76","left-button":"_left-button_11mqa_91","right-button":"_right-button_11mqa_98"};function uP({model:r,name:e,files:t,index:n,nextVrm:i,previousVrm:s}){const{characterManager:a}=le.useContext(Er),[o,l]=we.useState(0),[c,u]=we.useState(0),[f,d]=we.useState(0),[p,v]=we.useState(0),[m,g]=we.useState(0),[w,b]=we.useState(0),[E,B]=we.useState(0),[S,M]=we.useState(0),[I,k]=we.useState(0),[O,C]=we.useState(0);return we.useEffect(()=>{if(r!=null){const P=Um(r,"Mesh"),D=Um(r,"SkinnedMesh");l(P.length),u(D.length);const F=P.concat(D),{stdMats:_,stdCutoutpMats:R,stdTranspMats:L,mToonMats:Q,mToonCutoutMats:G,mToonTranspMats:Y}=t1e(F);d(_.length),v(L.length),g(R.length),b(Q.length),B(Y.length),M(G.length);const{triangles:W,bones:V}=a.getBoneTriangleCount();k(W),C(V)}},[r]),r!=null?q.jsx("div",{children:q.jsxs("div",{className:ci.InformationContainerPos,children:[q.jsx(oo,{title:"Model Information",width:180,right:20}),q.jsxs("div",{className:ci.scrollContainer,children:[q.jsxs("div",{className:ci.flexSelect,children:[t?.length>1?q.jsx("div",{className:`${ci["arrow-button"]} ${ci["left-button"]}`,onClick:s}):q.jsx(q.Fragment,{}),e&&q.jsx("div",{style:{textAlign:"center"},children:q.jsx("div",{className:ci.traitInfoTitle,style:{margin:"auto",fontSize:"14px",width:"200px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:e})}),t?.length>1?q.jsx("div",{className:`${ci["arrow-button"]} ${ci["right-button"]}`,onClick:i}):q.jsx(q.Fragment,{})]}),q.jsx("div",{className:ci.traitInfoTitle,children:"Geometry info:"}),q.jsxs("div",{className:ci.traitInfoText,children:["Meshes: ",o]}),q.jsxs("div",{className:ci.traitInfoText,children:["SkinnedMeshes: ",c]}),q.jsxs("div",{className:ci.traitInfoText,children:["Triangles: ",I]}),q.jsxs("div",{className:ci.traitInfoText,children:["Bones: ",O]}),q.jsx("div",{className:ci.traitInfoTitle,children:"Standard Material Count:"}),q.jsxs("div",{className:ci.traitInfoText,children:["opaque: ",f]}),q.jsxs("div",{className:ci.traitInfoText,children:["cutout: ",m]}),q.jsxs("div",{className:ci.traitInfoText,children:["transparent: ",p]}),q.jsx("div",{className:ci.traitInfoTitle,children:"MToon Material Count:"}),q.jsxs("div",{className:ci.traitInfoText,children:["opaque: ",w]}),q.jsxs("div",{className:ci.traitInfoText,children:["cutout: ",S]}),q.jsxs("div",{className:ci.traitInfoText,children:["transparent: ",E]})]})]})}):q.jsx(q.Fragment,{})}const v5e="_InformationContainerPos_b0msk_1",y5e="_traitInfoTitle_b0msk_13",w5e="_traitInfoText_b0msk_22",_5e="_flexSelect_b0msk_33",x5e="_scrollContainer_b0msk_68",b5e="_checkboxHolder_b0msk_110",Kt={InformationContainerPos:v5e,traitInfoTitle:y5e,traitInfoText:w5e,flexSelect:_5e,"arrow-button":"_arrow-button_b0msk_40","left-button":"_left-button_b0msk_54","right-button":"_right-button_b0msk_61",scrollContainer:x5e,"custom-checkbox":"_custom-checkbox_b0msk_79","checkbox-container":"_checkbox-container_b0msk_84",checkboxHolder:b5e};function sg(){localStorage&&Object.keys(localStorage).map(r=>{this.setItem(r,localStorage[r],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}sg.prototype.key=function(r){return Object.keys(this)[r]};sg.prototype.getItem=function(r){try{return JSON.parse(this[r])}catch{}return this[r]};sg.prototype.setItem=function(r,e,t=!0){const n=typeof e=="string"?e:JSON.stringify(e);return t&&localStorage.setItem(r,n),this[r]=n};sg.prototype.removeItem=function(r){delete this[r]};sg.prototype.clear=function(){Object.keys(this).forEach(r=>delete this[r])};let E5e=new sg;const S5e=r=>({get(e,t){return r.getItem(String(t))},set(e,t,n){return r.setItem(String(t),n),!0}}),B5e=(r=E5e)=>new Proxy({},S5e(r)),lt=B5e();function BS({showDropToDownload:r,showCreateAtlas:e,mergeMenuTitle:t}){const[n,i]=we.useState(lt.mergeOptions_atlas_std_size||6),[s,a]=we.useState(lt.mergeOptions_atlas_std_transp_size||6),[o,l]=we.useState(lt.mergeOptions_atlas_mtoon_size||6),[c,u]=we.useState(lt.mergeOptions_atlas_mtoon_transp_size||6),[f,d]=we.useState(lt.mergeOptions_sel_option||0),[p,v]=we.useState(lt.mergeOptions_two_sided_mat||!1),[m]=we.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[g,w]=we.useState(lt.mergeOptions_download_vrm==null?!0:lt.mergeOptions_download_vrm),[b,E]=we.useState(lt.mergeOptions_download_vrm_preview==null?!0:lt.mergeOptions_download_vrm_preview),[B,S]=we.useState(lt.mergeOptions_drop_download||!1),[M,I]=we.useState(lt.merge_options_ktx_compression||!1),[k,O]=we.useState(lt.mergeOptions_create_atlas==null?!0:lt.mergeOptions_create_atlas),[C,P]=we.useState(lt.mergeOptions_download_lora==null?!0:lt.mergeOptions_download_lora),[D,F]=we.useState(lt.mergeOptions_download_sprites==null?!0:lt.mergeOptions_download_sprites),_=N=>{S(N.target.checked),lt.mergeOptions_drop_download=N.target.checked},R=N=>{v(N.target.checked),lt.mergeOptions_two_sided_mat=N.target.checked},L=N=>{I(N.target.checked),lt.merge_options_ktx_compression=N.target.checked},Q=N=>{O(N.target.checked),lt.mergeOptions_create_atlas=N.target.checked},G=N=>{w(N.target.checked),lt.mergeOptions_download_vrm=N.target.checked},Y=N=>{E(N.target.checked),lt.mergeOptions_download_vrm_preview=N.target.checked},W=N=>{P(N.target.checked),lt.mergeOptions_download_lora=N.target.checked},V=N=>{F(N.target.checked),lt.mergeOptions_download_sprites=N.target.checked},T=()=>{let N=f;f<=0?N=m.length-1:N-=1,d(N),lt.mergeOptions_sel_option=N},H=()=>{let N=f;f>=m.length-1?N=0:N+=1,d(N),lt.mergeOptions_sel_option=N},K=async(N,te)=>{let oe=parseInt(N.target.value);oe>8?oe=8:oe<0&&(oe=0),(he=>{switch(te){case"standard opaque":i(he),lt.mergeOptions_atlas_std_size=he;break;case"standard transparent":a(he),lt.mergeOptions_atlas_std_transp_size=he;break;case"mtoon opaque":l(he),lt.mergeOptions_atlas_mtoon_size=he;break;case"mtoon transparent":u(he),lt.mergeOptions_atlas_mtoon_transp_size=he;break}})(oe)};return q.jsxs("div",{className:Kt.InformationContainerPos,children:[q.jsx(oo,{title:t,width:180,left:20}),q.jsxs("div",{className:Kt.scrollContainer,children:[q.jsx("div",{className:Kt.traitInfoTitle,children:"Download Options"}),q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:g,onChange:G}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Download VRM"]})})}),q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:b,onChange:Y}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Download VRM Preview"]})})}),q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:C,onChange:W}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Download Lora Data"]})})}),q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:D,onChange:V}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Download Sprites Data"]})})}),g&&q.jsxs(q.Fragment,{children:[e&&q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:k,onChange:Q}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Create Atlas"]})})}),(e==!1||k)&&q.jsxs(q.Fragment,{children:[q.jsx("br",{}),q.jsx("div",{className:Kt.traitInfoTitle,children:"Merge Atlas Type"}),q.jsx("br",{}),q.jsxs("div",{className:Kt.flexSelect,children:[q.jsx("div",{className:`${Kt["arrow-button"]} ${Kt["left-button"]}`,onClick:T}),q.jsx("div",{className:Kt.traitInfoText,style:{marginBottom:"0"},children:m[f]}),q.jsx("div",{className:`${Kt["arrow-button"]} ${Kt["right-button"]}`,onClick:H})]}),q.jsx("br",{}),q.jsx("br",{}),(f===0||f==2)&&q.jsxs(q.Fragment,{children:[q.jsx("div",{className:Kt.traitInfoTitle,children:"Standard Atlas Size"}),q.jsx("br",{}),q.jsxs("div",{className:Kt.traitInfoText,children:["Opaque: ",Lr(n)+" x "+Lr(n)]}),q.jsx(rh,{value:n,onChange:N=>K(N,"standard opaque"),min:1,max:8,step:1}),q.jsx("br",{}),q.jsxs("div",{className:Kt.traitInfoText,children:["Transparent: ",Lr(s)+" x "+Lr(s)]}),q.jsx(rh,{value:s,onChange:N=>K(N,"standard transparent"),min:1,max:8,step:1}),q.jsx("br",{})," ",q.jsx("br",{})]}),(f===1||f==2)&&q.jsxs(q.Fragment,{children:[q.jsx("div",{className:Kt.traitInfoTitle,children:"MToon Atlas Size"}),q.jsx("br",{}),q.jsxs("div",{className:Kt.traitInfoText,children:["Opaque: ",Lr(o)+" x "+Lr(o)]}),q.jsx(rh,{value:o,onChange:N=>K(N,"mtoon opaque"),min:1,max:8,step:1}),q.jsx("br",{}),q.jsxs("div",{className:Kt.traitInfoText,children:["Transparent: ",Lr(c)+" x "+Lr(c)]}),q.jsx(rh,{value:c,onChange:N=>K(N,"mtoon transparent"),min:1,max:8,step:1}),q.jsx("br",{})," ",q.jsx("br",{})]}),q.jsx("div",{className:Kt.traitInfoTitle,children:"Options"}),q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:p,onChange:R}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Two Sided Material"]})}),r&&q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:B,onChange:_}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"Drag Drop - Download"]})})}),q.jsx(q.Fragment,{children:q.jsx("div",{className:Kt.traitInfoText,children:q.jsxs("div",{className:Kt.checkboxHolder,children:[q.jsx("div",{}),q.jsxs("label",{className:Kt["custom-checkbox"],children:[q.jsx("input",{type:"checkbox",checked:M,onChange:L}),q.jsx("div",{className:Kt["checkbox-container"]})]}),q.jsx("div",{}),q.jsx("div",{}),"KTX Compression"]})})})]})]})]})]})}function M5e(){const{isLoading:r,setViewMode:e,setIsLoading:t}=le.useContext(Ta),{manifest:n,toggleDebugMode:i,characterManager:s,animationManager:a,loraDataGenerator:o,spriteAtlasGenerator:l,sceneElements:c}=le.useContext(Er),[u,f]=we.useState(null),[d,p]=we.useState(""),[v,m]=le.useState(""),{playSound:g}=le.useContext(Yo),{isMute:w}=le.useContext(qo),[b,E]=le.useState(null),B=()=>{!w&&g("backNextButton"),s.removeCurrentCharacter(),s.removeCurrentManifest(),i(!1),e(rn.LANDING)},S=()=>{const F=lt.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Lr(lt.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(lt.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(lt.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(lt.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:F===0||F==2,exportMtoonAtlas:F===1||F==2,ktxCompression:lt.merge_options_ktx_compression||!1,twoSidedMaterial:lt.mergeOptions_two_sided_mat||!1}},M=(F,_=!1)=>{console.log(_),(async()=>{await s.loadTraitsFromNFTObject(b[F]),(lt.mergeOptions_download_vrm==null?!0:lt.mergeOptions_download_vrm)&&await s.downloadVRM(b[F].name,S());const Q=new Jm,G=c.parent;G.remove(c);const Y=lt.mergeOptions_download_lora==null?!0:lt.mergeOptions_download_lora;if(Y===!0){const V=n.loras.map(async T=>o.createLoraData(T,Q));await Promise.all(V)}const W=lt.mergeOptions_download_sprites==null?!0:lt.mergeOptions_download_sprites;if(W===!0){const V=n.sprites.map(async T=>l.createSpriteAtlas(T,Q));await Promise.all(V)}(Y===!0||W===!0)&&Q.saveZip(b[F].name),G.add(c),F<b.length-1?M(F+1):t(!1)})()},I=()=>{t(!0),M(0,!0)},{t:k}=we.useContext(bl),O=async F=>{if(s.getCurrentCharacterModel()){const R=yu(F.name),L=URL.createObjectURL(F);await a.loadAnimation(L,!1,0,!0,"",R),m(a.getCurrentAnimationName()),URL.revokeObjectURL(L)}else console.warn("Please load a vrm model to test animations.")},C=async F=>{const _=URL.createObjectURL(F);await s.loadOptimizerCharacter(_),URL.revokeObjectURL(_);const R=yu(F.name);p(R),f(s.getCurrentCharacterModel())},P=F=>{const _=Array.from(F),R=[],L=Q=>new Promise((G,Y)=>{if(Q&&Q.name.toLowerCase().endsWith(".json")){const W=new FileReader,V=`${s.manifestData?.getAssetsDirectory()}/anata/_thumbnails/t_${Q.name.split("_")[0]}.jpg`;W.onload=function(T){try{const H=JSON.parse(T.target.result);H.thumb=V,R.push(H),G()}catch(H){console.error("Error parsing the JSON file:",H),Y(H)}},W.readAsText(Q)}});Promise.all(_.map(L)).then(()=>{R.length>0&&(E(R),t(!0),s.loadTraitsFromNFTObject(R[0]).then(()=>{t(!1)}))}).catch(Q=>{console.error("Error processing files:",Q)})},D=async F=>{const _=F[0];console.log("anim"),_&&_.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),O(_)),_&&_.name.toLowerCase().endsWith(".vrm")&&C(_),_&&_.name.toLowerCase().endsWith(".json")&&P(F)};return q.jsxs("div",{className:$s.container,children:[q.jsx("div",{className:`loadingIndicator ${r?"active":""}`,children:q.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),q.jsx("div",{className:"sectionTitle",children:"Batch Download"}),q.jsx(ky,{onFilesDrop:D}),q.jsx(BS,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),q.jsx(uP,{model:u}),q.jsx(cN,{jsonSelectionArray:b}),q.jsx(sS,{loadedAnimationName:v}),q.jsxs("div",{className:$s.buttonContainer,children:[q.jsx(cr,{theme:"light",text:k("callToAction.back"),size:14,className:$s.buttonLeft,onClick:B}),b?.length==1&&q.jsx(cr,{theme:"light",text:"Download",size:14,className:$s.buttonRight,onClick:I}),b?.length>1&&q.jsx(cr,{theme:"light",text:"Download All",size:14,className:$s.buttonRight,onClick:I})]})]})}function C5e(){const{isLoading:r,setViewMode:e,setIsLoading:t}=le.useContext(Ta),{manifest:n,characterManager:i,animationManager:s,toggleDebugMode:a,loraDataGenerator:o,spriteAtlasGenerator:l,sceneElements:c}=le.useContext(Er),[u,f]=we.useState(null),[d,p]=we.useState(""),{playSound:v}=le.useContext(Yo),{isMute:m}=le.useContext(qo),[g,w]=le.useState(null),[b,E]=le.useState(null),[B,S]=le.useState(""),M=()=>{!m&&v("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),a(!1),e(rn.LANDING)},I=()=>{const L=lt.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Lr(lt.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(lt.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(lt.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(lt.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:L===0||L==2,exportMtoonAtlas:L===1||L==2,ktxCompression:lt.merge_options_ktx_compression||!1,twoSidedMaterial:lt.mergeOptions_two_sided_mat||!1}},k=L=>{const Q=b[L].manifestName;(async()=>{(lt.mergeOptions_download_vrm_preview==null?!0:lt.mergeOptions_download_vrm_preview)&&i.savePortraitScreenshot(Q,512,1024,1.5,-.1),(lt.mergeOptions_download_vrm==null?!0:lt.mergeOptions_download_vrm)&&await i.downloadVRM(Q,I());const V=new Jm,T=c.parent;T.remove(c);const H=lt.mergeOptions_download_lora==null?!0:lt.mergeOptions_download_lora;if(H===!0){const N=n.loras.map(async te=>o.createLoraData(te,V));await Promise.all(N)}const K=lt.mergeOptions_download_sprites==null?!0:lt.mergeOptions_download_sprites;if(K===!0){const N=n.sprites.map(async te=>l.createSpriteAtlas(te,V));await Promise.all(N)}(H===!0||K===!0)&&V.saveZip(b[L].manifestName),T.add(c),L<b.length-1?(console.log("downloaded "+Q),O(L+1)):t(!1)})()},O=async L=>{L==0?(console.log(n.loras[0]),k(L)):(i.removeCurrentManifest(),await i.setManifest(b[L]),t(!0),i.loadInitialTraits().then(async()=>{await(G=>new Promise(Y=>setTimeout(Y,G)))(1),k(L)}))},C=()=>{t(!0),O(0)},{t:P}=we.useContext(bl),D=async L=>{if(i.getCurrentCharacterModel()){const G=yu(L.name),Y=URL.createObjectURL(L);await s.loadAnimation(Y,!1,0,!0,"",G),S(s.getCurrentAnimationName()),URL.revokeObjectURL(Y)}else console.warn("Please load a vrm model to test animations.")},F=async L=>{const Q=URL.createObjectURL(L);await i.loadOptimizerCharacter(Q),URL.revokeObjectURL(Q);const G=yu(L.name);p(G),f(i.getCurrentCharacterModel())},_=L=>{const Q=Array.from(L),G=[],Y=W=>new Promise((V,T)=>{if(W&&W.name.toLowerCase().endsWith(".json")){const H=new FileReader,K=W.name.replace(/\.[^/.]+$/,"");H.onload=function(N){try{const te=JSON.parse(N.target.result),oe=te.thumbnail;te.manifestName=K,G.push(te),V()}catch(te){console.error("Error parsing the JSON file:",te),T(te)}},H.readAsText(W)}});Promise.all(Q.map(Y)).then(()=>{G.length>0&&(E(G),i.setManifest(G[0]),t(!0),i.loadInitialTraits().then(()=>{t(!1)}))}).catch(W=>{console.error("Error processing files:",W)})},R=async L=>{const Q=L[0];Q&&Q.name.toLowerCase().endsWith(".fbx")&&D(Q),Q&&Q.name.toLowerCase().endsWith(".vrm")&&F(Q),Q&&Q.name.toLowerCase().endsWith(".json")&&_(L)};return q.jsxs("div",{className:$s.container,children:[q.jsx("div",{className:`loadingIndicator ${r?"active":""}`,children:q.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),q.jsx("div",{className:"sectionTitle",children:"NFT Characters"}),q.jsx(ky,{onFilesDrop:R}),q.jsx(BS,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),q.jsx(uP,{model:u}),q.jsx(cN,{jsonSelectionArray:b,byManifest:!0}),b?.length>0&&q.jsx(sS,{loadedAnimationName:B}),q.jsxs("div",{className:$s.buttonContainer,children:[q.jsx(cr,{theme:"light",text:P("callToAction.back"),size:14,className:$s.buttonLeft,onClick:M}),b?.length==1&&q.jsx(cr,{theme:"light",text:"Download",size:14,className:$s.buttonRight,onClick:C}),b?.length>1&&q.jsx(cr,{theme:"light",text:"Download All",size:14,className:$s.buttonRight,onClick:C})]})]})}const T5e="_container_uirqh_3",R5e="_classContainer_uirqh_34",I5e="_classdisabled_uirqh_48",U5e="_name_uirqh_102",F5e="_description_uirqh_111",L5e="_classFrame_uirqh_116",D5e="_frameContainer_uirqh_136",O5e="_frame_uirqh_136",N5e="_lockedContainer_uirqh_152",P5e="_locked_uirqh_152",k5e="_buttonContainer_uirqh_167",H5e="_buttonLeft_uirqh_176",Q5e="_topLine_uirqh_198",z5e="_bottomLine_uirqh_224",qt={container:T5e,classContainer:R5e,class:"_class_uirqh_34",classdisabled:I5e,name:U5e,description:F5e,classFrame:L5e,frameContainer:D5e,frame:O5e,lockedContainer:N5e,locked:P5e,buttonContainer:k5e,buttonLeft:H5e,topLine:Q5e,bottomLine:z5e};function V5e(){const{t:r}=we.useContext(bl),{setViewMode:e,setIsLoading:t,isLoading:n}=le.useContext(Ta),{playSound:i}=le.useContext(Yo),{isMute:s}=le.useContext(qo),{manifest:a,characterManager:o}=le.useContext(Er),[l,c]=we.useState([]);we.useEffect(()=>{if(a?.characters!=null){const v=a.characters.map(m=>({name:m.name,image:m.portrait,description:m.description,manifest:m.manifest,icon:m.icon,format:m.format,disabled:!1}));c(v)}},[a]);const u=()=>{e(rn.LANDING),!s&&i("backNextButton")},f=async v=>{t(!0),o.loadManifest(a.characters[v].manifest,a.characters[v].name).then(()=>{e(rn.BATCHDOWNLOAD),o.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},d=()=>{e(rn.BATCHMANIFEST)},p=()=>{!s&&i("classMouseOver")};return q.jsxs("div",{className:`${qt.container} horizontalScroll`,children:[q.jsx("div",{className:"sectionTitle",children:r("pageTitles.chooseClass")}),q.jsx("div",{className:qt.vrmOptimizerButton}),q.jsx("div",{className:qt.topLine}),q.jsxs("div",{className:qt.classContainer,children:[l.map((v,m)=>q.jsxs("div",{className:v.disabled?qt.classdisabled:qt.class,onClick:v.disabled?null:()=>f(m),onMouseOver:v.disabled?null:()=>p(),children:[q.jsxs("div",{className:qt.classFrame,style:{backgroundImage:`url(${v.image})`},children:[q.jsx("div",{className:qt.frameContainer,children:q.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:qt.frame})}),q.jsx("div",{className:qt.lockedContainer,children:v.disabled&&q.jsx("img",{src:"./assets/icons/locked.svg",className:qt.locked})})]}),q.jsx("div",{className:qt.name,children:v.name}),q.jsx("div",{className:qt.description,children:v.description})]},m)),q.jsxs("div",{className:qt.class,onClick:()=>d(),onMouseOver:()=>p(),children:[q.jsx("div",{className:qt.classFrame,style:{backgroundImage:"url(./assets/media/disabled.png)"},children:q.jsx("div",{className:qt.frameContainer,children:q.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:qt.frame})})}),q.jsx("div",{className:qt.name,children:"Manifest"}),q.jsx("div",{className:qt.description,children:"Load by manifest"})]},"manifest-load")]}),q.jsx("div",{className:qt.bottomLine}),q.jsx("div",{className:qt.buttonContainer,children:q.jsx(cr,{theme:"light",text:r("callToAction.back"),size:14,className:qt.buttonLeft,onClick:u})})]})}function G5e(){const{t:r}=we.useContext(bl),{setViewMode:e,setIsLoading:t,isLoading:n}=le.useContext(Ta),{playSound:i}=le.useContext(Yo),{isMute:s}=le.useContext(qo),{manifest:a,characterManager:o}=le.useContext(Er),[l,c]=we.useState([]);we.useEffect(()=>{if(a?.characters!=null){const v=f(Mt(a.characters));c(v)}},[a]);const u=()=>{e(rn.LANDING),!s&&i("backNextButton")},f=v=>v.map(m=>({name:m.name,portrait:m.portrait,description:m.description,manifest:m.manifest,icon:m.icon,format:m.format,manifestAppend:f(Mt(m.manifestAppend))})),d=async v=>{t(!0);const m=l[v];await o.loadManifest(m.manifest,m.name),e(rn.APPEARANCE);const g=m.manifestAppend.map(w=>new Promise(b=>{o.loadManifest(w.manifest,w.name).then(()=>{b()})}));await Promise.all(g),o.loadInitialTraits().then(()=>{t(!1)}),!s&&i("classSelect")},p=()=>{!s&&i("classMouseOver")};return q.jsxs("div",{className:`${qt.container} horizontalScroll`,children:[q.jsx("div",{className:"sectionTitle",children:r("pageTitles.chooseClass")}),q.jsx("div",{className:qt.vrmOptimizerButton}),q.jsx("div",{className:qt.topLine}),q.jsx("div",{className:qt.classContainer,children:l.map((v,m)=>q.jsxs("div",{className:v.disabled?qt.classdisabled:qt.class,onClick:()=>d(m),onMouseOver:()=>p(),children:[q.jsx("div",{className:qt.classFrame,style:{backgroundImage:`url(${v.portrait})`},children:q.jsx("div",{className:qt.frameContainer,children:q.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:qt.frame})})}),q.jsx("div",{className:qt.name,children:v.name}),q.jsx("div",{className:qt.description,children:v.description})]},m))}),q.jsx("div",{className:qt.bottomLine}),q.jsx("div",{className:qt.buttonContainer,children:q.jsx(cr,{theme:"light",text:r("callToAction.back"),size:14,className:qt.buttonLeft,onClick:u})})]})}const j5e="_buttonContainer_1ueuk_1",W5e="_button_1ueuk_1",K0={buttonContainer:j5e,button:W5e};function K5e(){const{setViewMode:r}=le.useContext(Ta),{playSound:e}=le.useContext(Yo),{isMute:t}=le.useContext(qo),{characterManager:n}=le.useContext(Er),i=()=>{r(rn.CREATE),!t&&e("backNextButton")},s=()=>{r(rn.CLAIM),!t&&e("backNextButton")},a=()=>{r(rn.OPTIMIZER),n.loadOptimizerManifest(),!t&&e("backNextButton")};return q.jsx("div",{className:K0.container,children:q.jsxs("div",{className:K0.buttonContainer,children:[q.jsx("button",{className:K0.button,onClick:i,children:q.jsx("img",{src:"./assets/media/btn_create_character.png"})}),q.jsx("button",{className:K0.button,onClick:s,children:q.jsx("img",{src:"./assets/media/btn_batch_download_character.png"})}),q.jsx("button",{className:K0.button,onClick:a,children:q.jsx("img",{src:"./assets/media/btn_optimize_character.png"})})]})})}const jf={};var $x={exports:{}},y7;function q5e(){if(y7)return $x.exports;y7=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(S,M,I){return Function.prototype.apply.call(S,M,I)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:t=function(S){return Object.getOwnPropertyNames(S)};function n(B){console&&console.warn&&console.warn(B)}var i=Number.isNaN||function(S){return S!==S};function s(){s.init.call(this)}$x.exports=s,$x.exports.once=w,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(B){if(typeof B!="number"||B<0||i(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");a=B}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(B){return B._maxListeners===void 0?s.defaultMaxListeners:B._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(S){for(var M=[],I=1;I<arguments.length;I++)M.push(arguments[I]);var k=S==="error",O=this._events;if(O!==void 0)k=k&&O.error===void 0;else if(!k)return!1;if(k){var C;if(M.length>0&&(C=M[0]),C instanceof Error)throw C;var P=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw P.context=C,P}var D=O[S];if(D===void 0)return!1;if(typeof D=="function")e(D,this,M);else for(var F=D.length,_=v(D,F),I=0;I<F;++I)e(_[I],this,M);return!0};function c(B,S,M,I){var k,O,C;if(o(M),O=B._events,O===void 0?(O=B._events=Object.create(null),B._eventsCount=0):(O.newListener!==void 0&&(B.emit("newListener",S,M.listener?M.listener:M),O=B._events),C=O[S]),C===void 0)C=O[S]=M,++B._eventsCount;else if(typeof C=="function"?C=O[S]=I?[M,C]:[C,M]:I?C.unshift(M):C.push(M),k=l(B),k>0&&C.length>k&&!C.warned){C.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=B,P.type=S,P.count=C.length,n(P)}return B}s.prototype.addListener=function(S,M){return c(this,S,M,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(S,M){return c(this,S,M,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(B,S,M){var I={fired:!1,wrapFn:void 0,target:B,type:S,listener:M},k=u.bind(I);return k.listener=M,I.wrapFn=k,k}s.prototype.once=function(S,M){return o(M),this.on(S,f(this,S,M)),this},s.prototype.prependOnceListener=function(S,M){return o(M),this.prependListener(S,f(this,S,M)),this},s.prototype.removeListener=function(S,M){var I,k,O,C,P;if(o(M),k=this._events,k===void 0)return this;if(I=k[S],I===void 0)return this;if(I===M||I.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete k[S],k.removeListener&&this.emit("removeListener",S,I.listener||M));else if(typeof I!="function"){for(O=-1,C=I.length-1;C>=0;C--)if(I[C]===M||I[C].listener===M){P=I[C].listener,O=C;break}if(O<0)return this;O===0?I.shift():m(I,O),I.length===1&&(k[S]=I[0]),k.removeListener!==void 0&&this.emit("removeListener",S,P||M)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(S){var M,I,k;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[S]),this;if(arguments.length===0){var O=Object.keys(I),C;for(k=0;k<O.length;++k)C=O[k],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=I[S],typeof M=="function")this.removeListener(S,M);else if(M!==void 0)for(k=M.length-1;k>=0;k--)this.removeListener(S,M[k]);return this};function d(B,S,M){var I=B._events;if(I===void 0)return[];var k=I[S];return k===void 0?[]:typeof k=="function"?M?[k.listener||k]:[k]:M?g(k):v(k,k.length)}s.prototype.listeners=function(S){return d(this,S,!0)},s.prototype.rawListeners=function(S){return d(this,S,!1)},s.listenerCount=function(B,S){return typeof B.listenerCount=="function"?B.listenerCount(S):p.call(B,S)},s.prototype.listenerCount=p;function p(B){var S=this._events;if(S!==void 0){var M=S[B];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function v(B,S){for(var M=new Array(S),I=0;I<S;++I)M[I]=B[I];return M}function m(B,S){for(;S+1<B.length;S++)B[S]=B[S+1];B.pop()}function g(B){for(var S=new Array(B.length),M=0;M<S.length;++M)S[M]=B[M].listener||B[M];return S}function w(B,S){return new Promise(function(M,I){function k(C){B.removeListener(S,O),I(C)}function O(){typeof B.removeListener=="function"&&B.removeListener("error",k),M([].slice.call(arguments))}E(B,S,O,{once:!0}),S!=="error"&&b(B,k,{once:!0})})}function b(B,S,M){typeof B.on=="function"&&E(B,"error",S,M)}function E(B,S,M,I){if(typeof B.on=="function")I.once?B.once(S,M):B.on(S,M);else if(typeof B.addEventListener=="function")B.addEventListener(S,function k(O){I.once&&B.removeEventListener(S,k),M(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return $x.exports}var Y5e=q5e();function X5e(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}var Z5e=function(r){X5e(e,r);function e(n){var i,s=n===void 0?{}:n,a=s.supportedChainIds;return i=r.call(this)||this,i.supportedChainIds=a,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(hl.Update,i)},t.emitError=function(i){this.emit(hl.Error,i)},t.emitDeactivate=function(){this.emit(hl.Deactivate)},e}(Y5e.EventEmitter);function BD(){return BD=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},BD.apply(this,arguments)}function AP(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function MD(r){return MD=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},MD(r)}function sE(r,e){return sE=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},sE(r,e)}function J5e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Pb(r,e,t){return J5e()?Pb=Reflect.construct:Pb=function(i,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(i,o),c=new l;return a&&sE(c,a.prototype),c},Pb.apply(null,arguments)}function $5e(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function aE(r){var e=typeof Map=="function"?new Map:void 0;return aE=function(n){if(n===null||!$5e(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return Pb(n,arguments,MD(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),sE(i,n)},aE(r)}function eb(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function up(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function Hl(r){return r.hasOwnProperty("result")?r.result:r}var WU=function(r){AP(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(aE(Error)),e8e=function(r){AP(e,r);function e(){var t;return t=r.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(aE(Error)),t8e=function(r){AP(e,r);function e(n){var i;return i=r.call(this,n)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(eb(i)),i.handleChainChanged=i.handleChainChanged.bind(eb(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(eb(i)),i.handleClose=i.handleClose.bind(eb(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(u){if(s)return u;function f(){return BD({provider:window.ethereum},o?{account:o}:{})}var d=function(){if(!o)return Promise.resolve(window.ethereum.enable().then(function(p){return p&&Hl(p)[0]})).then(function(p){o=p})}();return d&&d.then?d.then(f):f(d)},s=!1,a=this;if(!window.ethereum)throw new WU;window.ethereum.on&&(window.ethereum.on("chainChanged",a.handleChainChanged),window.ethereum.on("accountsChanged",a.handleAccountsChanged),window.ethereum.on("close",a.handleClose),window.ethereum.on("networkChanged",a.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var o,l=up(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(c){return Hl(c)[0]})).then(function(c){o=c})},function(c){if(c.code===4001)throw new e8e});return Promise.resolve(l&&l.then?l.then(i):i(l))}catch(c){return Promise.reject(c)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function l(){if(!s)try{s=Hl(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=Hl(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var c=function(){if(!s){var u=up(function(){return Promise.resolve(window.ethereum.send("net_version").then(Hl)).then(function(f){s=f})},function(){});if(u&&u.then)return u.then(function(){})}}();return c&&c.then?c.then(l):l(c)};if(!window.ethereum)throw new WU;var s,a=up(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(Hl)).then(function(o){s=o})},function(){});return Promise.resolve(a&&a.then?a.then(i):i(a))}catch(o){return Promise.reject(o)}},t.getAccount=function(){try{var i=function(){function l(){return s||(s=Hl(window.ethereum.send({method:"eth_accounts"}))[0]),s}var c=function(){if(!s){var u=up(function(){return Promise.resolve(window.ethereum.enable().then(function(f){return Hl(f)[0]})).then(function(f){s=f})},function(){});if(u&&u.then)return u.then(function(){})}}();return c&&c.then?c.then(l):l(c)};if(!window.ethereum)throw new WU;var s,a=up(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(o){return Hl(o)[0]})).then(function(o){s=o})},function(){});return Promise.resolve(a&&a.then?a.then(i):i(a))}catch(o){return Promise.reject(o)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(up(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return Hl(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(Z5e);function n8e(){const{account:r,library:e,activate:t}=tse(),[n,i]=we.useState([]),{setViewMode:s}=le.useContext(Ta),{playSound:a}=le.useContext(Yo),{isMute:o}=le.useContext(qo),l=new t8e({supportedChainIds:[137,1,3,4,5,42,97]});we.useEffect(()=>{if(r&&e){const d="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",p=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],v=new uSe(d,p,e);v.balanceOf(r).then(m=>{const g=[];for(let w=0;w<m;w++)g.push(v.tokenOfOwnerByIndex(r,w));Promise.all(g).then(w=>{const b=w.map(E=>v.tokenURI(E));Promise.all(b).then(E=>{i(E)})})})}},[r,e]);const c=()=>{t(l)},u=d=>{!o&&a("backNextButton"),s(rn.APPEARANCE)},f=()=>{s(rn.LANDING),!o&&a("backNextButton")};return q.jsxs("div",{className:jf.container,children:[!r&&q.jsxs("div",{className:jf.message,children:["Please connect your wallet to load your characters",q.jsx("button",{className:jf.button,onClick:()=>c(),children:"Connect"})]}),q.jsxs("div",{className:jf.characterContainer,children:[q.jsx("div",{className:jf.title,children:"Load Character"}),n.map((d,p)=>q.jsx("div",{className:jf.character,onClick:()=>{u()},children:JSON.stringify(d)},p))]}),q.jsx("button",{className:jf.button,onClick:()=>f(),children:"Back"})]})}const r8e="_container_q73cc_1",i8e="_mintContainer_q73cc_6",s8e="_mainTitleWrap_q73cc_33",a8e="_mainTitle_q73cc_33",o8e="_mintButtonContainer_q73cc_49",l8e="_mintButton_q73cc_49",c8e="_genesisText_q73cc_60",u8e="_required_q73cc_64",A8e="_divider_q73cc_68",f8e="_bottomContainer_q73cc_75",h8e="_mintInfo_q73cc_85",d8e="_topLine_q73cc_91",da={container:r8e,mintContainer:i8e,mainTitleWrap:s8e,mainTitle:a8e,mintButtonContainer:o8e,mintButton:l8e,genesisText:c8e,required:u8e,divider:A8e,bottomContainer:f8e,mintInfo:h8e,topLine:d8e};function p8e(){const{model:r,avatar:e}=le.useContext(Er),{setViewMode:t}=le.useContext(Ta),{playSound:n}=le.useContext(Yo),{isMute:i}=le.useContext(qo),[s,a]=le.useState(""),[o,l]=le.useState(!1),c=()=>{t(rn.SAVE),!i&&n("backNextButton")};function u(){return q.jsxs("div",{className:da.mainTitleWrap,children:[q.jsx("div",{className:da.topLine}),q.jsx("div",{className:da.mainTitle,children:"Mint"})]})}async function f(){!i&&n("backNextButton"),l(!0),a("Please check your wallet");const d=await zTe(e);a(d),l(!1),console.log(d)}return q.jsxs("div",{className:da.container,children:[q.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),q.jsxs("div",{className:da.mintContainer,children:[q.jsx(u,{}),q.jsxs("div",{className:da.mintButtonContainer,children:[q.jsx(cr,{size:16,theme:"light",icon:"polygon",text:o?"Minting...":"Open Edition",className:da.mintButton,disabled:o,onClick:f,minWidth:220}),q.jsx("div",{className:da.divider}),q.jsx(cr,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:da.mintButton,disabled:!0,minWidth:220}),q.jsxs("span",{className:da.genesisText,children:["(",q.jsx("span",{className:da.required,children:"Coming Soon!"}),")"]})]}),q.jsxs("span",{className:da.mintInfo,children:[s," "]})]}),q.jsx("div",{className:da.bottomContainer,children:q.jsx(cr,{theme:"light",text:"Back",size:14,className:da.buttonLeft,onClick:c})})]})}function m8e(){const{isLoading:r,setViewMode:e}=le.useContext(Ta),{manifest:t,characterManager:n,animationManager:i,sceneElements:s,loraDataGenerator:a,spriteAtlasGenerator:o}=le.useContext(Er),{playSound:l}=le.useContext(Yo),{isMute:c}=le.useContext(qo),[u,f]=we.useState(null),[d,p]=we.useState(""),[v,m]=we.useState([]),[g,w]=we.useState(0),[b,E]=le.useState("T-Pose"),B=()=>{!c&&l("backNextButton"),n.removeCurrentCharacter(),n.removeCurrentManifest(),e(rn.LANDING)},S=()=>{const R=lt.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:Lr(lt.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(lt.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(lt.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(lt.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:R===0||R==2,exportMtoonAtlas:R===1||R==2,ktxCompression:lt.merge_options_ktx_compression||!1,twoSidedMaterial:lt.mergeOptions_two_sided_mat||!1}},M=async()=>{for(let R=0;R<v.length;R++)try{await D(v[R]);const L=yu(v[R].name);await I(L)}catch(L){console.error(`Error processing ${v[R].name}:`,L)}},I=async R=>{typeof R!="string"&&(R=d),await(async()=>{(lt.mergeOptions_download_vrm_preview==null?!0:lt.mergeOptions_download_vrm_preview)&&n.savePortraitScreenshot(R+"_portrait",512,1024,1.5,-.1),(lt.mergeOptions_download_vrm==null?!0:lt.mergeOptions_download_vrm)&&await n.downloadVRM(R+"_merged",S());const Y=new Jm,W=s.parent;W.remove(s),n.getCurrentOptimizerCharacterModel().data?.isVRM0;const V=lt.mergeOptions_download_lora==null?!0:lt.mergeOptions_download_lora;if(V===!0){const H=t.loras.map(async K=>a.createLoraData(K,Y));await Promise.all(H)}const T=lt.mergeOptions_download_sprites==null?!0:lt.mergeOptions_download_sprites;if(T===!0){const H=t.sprites.map(async K=>o.createSpriteAtlas(K,Y));await Promise.all(H)}(V===!0||T===!0)&&Y.saveZip(R),W.add(s)})()},{t:k}=we.useContext(bl),O=async R=>{if(n.getCurrentOptimizerCharacterModel()){const Q=yu(R.name),G=URL.createObjectURL(R);await i.loadAnimation(G,!1,0,!0,"",Q),E(i.getCurrentAnimationName()),URL.revokeObjectURL(G)}else console.warn("Please load a vrm model to test animations.")},C=()=>{if(g===0)D(v[v.length-1]),w(v.length-1);else{const R=g-1;D(v[R]),w(R)}},P=()=>{if(g>=v.length-1)D(v[0]),w(0);else{const R=g+1;D(v[R]),w(R)}},D=async R=>{const L=URL.createObjectURL(R);await n.loadOptimizerCharacter(L),URL.revokeObjectURL(L);const Q=yu(R.name);p(Q),f({...n.getCurrentCharacterModel()})},F=async R=>{D(R[0]);const L=[];for(let Q=0;Q<R.length;Q++){const G=R[Q];G&&G.name.toLowerCase().endsWith(".vrm")&&L.push(R[Q])}m(L),w(0)},_=async R=>{console.log("dropped file");const L=R[0];L&&L.name.toLowerCase().endsWith(".fbx")&&O(L),L&&L.name.toLowerCase().endsWith(".vrm")&&F(R)};return q.jsxs("div",{className:$s.container,children:[q.jsx("div",{className:`loadingIndicator ${r?"active":""}`,children:q.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),q.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),q.jsx(ky,{onFilesDrop:_}),q.jsx(BS,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Optimizer Options"}),q.jsx(uP,{model:u,name:d,files:v,index:g,nextVrm:P,previousVrm:C}),q.jsx(sS,{loadedAnimationName:b}),q.jsxs("div",{className:$s.buttonContainer,children:[q.jsx(cr,{theme:"light",text:k("callToAction.back"),size:14,className:$s.buttonLeft,onClick:B}),v?.length>1!=""&&q.jsx(cr,{theme:"light",text:"Download All",size:14,className:$s.buttonRight,onClick:M}),u!=""&&q.jsx(cr,{theme:"light",text:"Download",size:14,className:$s.buttonRight,onClick:I})]})]})}const g8e="_buttonContainer_1fd4o_1",v8e="_buttonLeft_1fd4o_10",y8e="_buttonRight_1fd4o_14",tb={buttonContainer:g8e,buttonLeft:v8e,buttonRight:y8e},w8e="_button_13dfi_1",KU={button:w8e},_8e="Anon",x8e=({currentPrice:r,onPurchaseClick:e})=>{const{t}=we.useContext(bl),[n]=le.useState(localStorage.getItem("name")||_8e),{model:i,characterManager:s}=we.useContext(Er),a=()=>{const u=lt.mergeOptions_sel_option||0;return{createTextureAtlas:lt.mergeOptions_create_atlas==null?!0:lt.mergeOptions_create_atlas,mToonAtlasSize:Lr(lt.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:Lr(lt.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:Lr(lt.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:Lr(lt.mergeOptions_atlas_std_transp_size||6),ktxCompression:lt.merge_options_ktx_compression,exportStdAtlas:u===0||u==2,exportMtoonAtlas:u===1||u==2,twoSidedMaterial:lt.mergeOptions_two_sided_mat||!1}},o=u=>{const f=a();f.isVrm0=Object.values(s.avatar)[0].vrm.meta.metaVersion=="0",f.outputVRM0=!0,s.downloadVRM(n,f)},l=()=>{const u=a();s.downloadGLB(n,u)},c=()=>{e()};return q.jsx(le.Fragment,{children:r===0?q.jsxs(q.Fragment,{children:[q.jsx(cr,{theme:"light",text:"GLB",icon:"download",size:14,className:KU.button,onClick:()=>{l()}}),q.jsx(cr,{theme:"light",text:"VRM 0",icon:"download",size:14,className:KU.button,onClick:()=>o()})]}):q.jsx(cr,{theme:"light",text:"Purchase Assets",icon:"purchase",size:14,className:KU.button,onClick:()=>c()})})},b8e="_InformationContainerPos_1bqht_2",E8e="_traitText_1bqht_16",S8e="_traitTextSmall_1bqht_25",B8e="_traitTextLarge_1bqht_34",M8e="_traitDisplay_1bqht_43",C8e="_traitsTitle_1bqht_52",T8e="_buttonAlign_1bqht_65",R8e="_optionsContainer_1bqht_70",I8e="_scrollContainer_1bqht_76",Ks={InformationContainerPos:b8e,traitText:E8e,traitTextSmall:S8e,traitTextLarge:B8e,traitDisplay:M8e,traitsTitle:C8e,buttonAlign:T8e,optionsContainer:R8e,scrollContainer:I8e};function U8e({purchaseTraits:r,currentPrice:e,onConfirmPurchase:t,cancelPurchase:n,currency:i}){return q.jsx("div",{children:q.jsxs("div",{className:Ks.InformationContainerPos,children:[q.jsx(oo,{title:"Purchase",width:600,left:0}),q.jsxs("div",{className:Ks.traitsTitle,children:[q.jsx("div",{className:Ks.traitTextSmall,children:"Icon"}),q.jsx("div",{className:Ks.traitText,children:"Asset Name"}),q.jsx("div",{className:Ks.traitText,children:"Price"}),q.jsx("div",{className:Ks.traitText,children:"Group"})]}),q.jsx("div",{className:Ks.scrollContainer,children:q.jsxs("div",{className:Ks.optionsContainer,children:[r.map((s,a)=>q.jsxs("div",{className:Ks.traitDisplay,children:[q.jsx(Fo,{size:56,icon:s.fullThumbnail,rarity:"mythic"}),q.jsx("div",{className:Ks.traitText,children:s.name}),q.jsx("div",{className:Ks.traitText,children:s.price+" "+i}),q.jsx("div",{className:Ks.traitText,children:s.traitGroup.trait})]},a)),q.jsx("div",{className:Ks.traitsTitle,children:q.jsx("div",{className:Ks.traitTextLarge,children:"Total: "+e+" "+i})}),q.jsxs("div",{className:Ks.buttonAlign,children:[q.jsx(cr,{theme:"light",text:"Buy Assets",size:14,minWidth:60,onClick:t}),q.jsx(cr,{theme:"light",text:"Cancel",size:14,minWidth:60,onClick:n})]})]})})]})})}function F8e(){const{t:r}=we.useContext(bl),{playSound:e}=le.useContext(Yo),{isMute:t}=le.useContext(qo),{setViewMode:n}=le.useContext(Ta),{characterManager:i}=le.useContext(Er),[s,a]=we.useState(!1),[o,l]=we.useState(""),[c,u]=le.useState(0),[f,d]=le.useState([]),[p,v]=le.useState("");le.useEffect(()=>{u(i.getCurrentTotalPrice()),v(i.getMainPriceCurrency())},[]);const m=()=>{n(rn.APPEARANCE),!t&&e("backNextButton")},g=()=>{n(rn.MINT),!t&&e("backNextButton")},w=async()=>{console.log("click purch"),d(i.getPurchaseTraitsArray())},b=async S=>{const M=S[0];M&&M.name.toLowerCase().endsWith(".json")},E=()=>{console.log("confirm purchase!!"),i.purchaseAssetsFromAvatar().then(()=>{u(i.getCurrentTotalPrice()),d([]),a(!0),l("Purchase successful")}).catch(S=>{a(!0),l("An error occurred when trying to purchase assets. Please try again.")})},B=()=>{d([])};return q.jsxs("div",{className:tb.container,children:[q.jsx("div",{className:"sectionTitle",children:r("pageTitles.saveCharacter")}),q.jsxs("div",{className:tb.buttonContainer,children:[q.jsx(ky,{onFilesDrop:b}),q.jsx(cr,{theme:"light",text:r("callToAction.back"),size:14,className:tb.buttonLeft,onClick:m}),f.length>0&&q.jsx(U8e,{currentPrice:c,purchaseTraits:f,onConfirmPurchase:E,cancelPurchase:B,currency:p}),q.jsx(BS,{showCreateAtlas:!0,mergeMenuTitle:"Download Options"}),q.jsx(x8e,{currentPrice:c,onPurchaseClick:w}),q.jsx(cr,{theme:"light",text:"mint",size:14,className:tb.buttonRight,onClick:g})]}),q.jsx(IJ,{cancelOption:!1,confirmDialogText:o,confirmDialogCallback:[],confirmDialogWindow:s,setConfirmDialogWindow:a})]})}function L8e(){const{t:r}=we.useContext(bl),{setViewMode:e,setIsLoading:t,isLoading:n}=le.useContext(Ta),{playSound:i}=le.useContext(Yo),{isMute:s}=le.useContext(qo),{manifest:a,characterManager:o}=le.useContext(Er),[l,c]=we.useState([]),[u,f]=we.useState([]);we.useEffect(()=>{d()},[]);const d=async()=>{},p=()=>{e(rn.LANDING),!s&&i("backNextButton")},v=async w=>{t(!0),o.loadManifest(a.characters[w].manifest,anifest.characters[w].name).then(()=>{e(rn.APPEARANCE),o.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},m=()=>{console.log("ttt"),o.loadManifest(a.characters[0].manifest,anifest.characters[index].name).then(()=>{o.loadAppendManifest(a.characters[1].manifest,!0).then(()=>{console.log(o.manifestData)})})},g=()=>{!s&&i("classMouseOver")};return q.jsxs("div",{className:`${qt.container} horizontalScroll`,children:[q.jsx("div",{className:"sectionTitle",children:r("pageTitles.chooseClass")}),q.jsx("div",{className:qt.vrmOptimizerButton}),q.jsx("div",{className:qt.topLine}),q.jsx("div",{className:qt.classContainer,children:u.map((w,b)=>q.jsxs("div",{className:qt.class,onClick:()=>v(b),onMouseOver:()=>g(),children:[q.jsx("div",{className:qt.classFrame,style:{backgroundImage:`url(${w.image_url})`},children:q.jsx("div",{className:qt.frameContainer,children:q.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:qt.frame})})}),q.jsx("div",{className:qt.name,children:w.name})]},b))}),q.jsx("div",{className:qt.bottomLine}),q.jsxs("div",{className:qt.buttonContainer,children:[q.jsx(cr,{theme:"light",text:r("callToAction.back"),size:14,className:qt.buttonLeft,onClick:p}),q.jsx(cr,{theme:"light",text:"test",size:14,className:qt.buttonLeft,onClick:m})]})]})}const D8e=".//manifest.json",O8e=6,N8e=new ae(0,.8,0);new ae(-2.2367993753934425,1.1512971720174363,2.2612065299409223);async function P8e(r){try{const e=await fetch(r);if(!e.ok)throw new Error(`Failed to fetch manifest. Status: ${e.status}`);return await e.json()}catch(e){return console.error(`Error fetching manifest: ${e.message}`),[]}}async function k8e(){const r=await P8e(D8e),e=new i2e;return{initialManifest:r,effectManager:e}}const H8e=()=>{let r,e;const n=k8e().then(i=>{r="success",e=i},i=>{r="error",e=i});return{read(){if(r==="error")throw e;if(r==="success")return e;throw n}}},Q8e=H8e();function z8e(){const{initialManifest:r,effectManager:e}=Q8e.read(),[t,n]=we.useState(!1),{camera:i,controls:s,scene:a,moveCamera:o,setManifest:l,lookAtManager:c,showEnvironmentModels:u}=we.useContext(Er),{viewMode:f}=we.useContext(Ta);e.camera=i,e.scene=a;const d=()=>{e.camera&&(o({targetX:0,targetY:N8e.y,targetZ:0,distance:O8e}),s&&([rn.APPEARANCE,rn.SAVE,rn.OPTIMIZER,rn.BATCHDOWNLOAD,rn.BATCHMANIFEST].includes(f)?s.enabled=!0:s.enabled=!1))},[p,v]=we.useState(!1),[m,g]=we.useState(""),[w,b]=we.useState([]),E=(I,k)=>{g(I),v(!0),b([k])},B={[rn.LANDING]:q.jsx(K5e,{}),[rn.APPEARANCE]:q.jsx(l5e,{confirmDialog:E}),[rn.OPTIMIZER]:q.jsx(m8e,{}),[rn.CREATE]:q.jsx(G5e,{}),[rn.WALLET]:q.jsx(L8e,{}),[rn.CLAIM]:q.jsx(V5e,{}),[rn.BATCHMANIFEST]:q.jsx(C5e,{}),[rn.BATCHDOWNLOAD]:q.jsx(M5e,{}),[rn.LOAD]:q.jsx(n8e,{}),[rn.MINT]:q.jsx(p8e,{}),[rn.SAVE]:q.jsx(F8e,{})};let S=0;we.useEffect(()=>{const I=k=>{const O=new Date().getTime(),C=O-S;C<300&&C>10&&k.target.id=="editor-scene"&&n(!t),S=O};return window.addEventListener("touchend",I),window.addEventListener("click",I),()=>{window.removeEventListener("touchend",I),window.removeEventListener("click",I)}},[t]),we.useEffect(()=>{if(c!=null)return d(),c.enabled=!0,[rn.LANDING,rn.CREATE,rn.CLAIM,rn.LOAD,rn.CLAIM,rn.CLAIM].includes(f)?u(!1):u(!0),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[f,c]),we.useEffect(()=>{l(r)},[r]);const{t:M}=we.useContext(bl);return q.jsxs(we.Fragment,{children:[q.jsx("div",{className:"generalTitle",children:"Character Studio"}),q.jsx(IJ,{confirmDialogText:m,confirmDialogCallback:w,confirmDialogWindow:p,setConfirmDialogWindow:v}),q.jsx(B2e,{}),B[f]]})}const V8e=r=>{const e=new jie(r);return e.pollingInterval=12e3,e};lse.createRoot(document.getElementById("root")).render(q.jsx(le.StrictMode,{children:q.jsx($ie,{getLibrary:V8e,children:q.jsx(fse,{children:q.jsx(OIe,{children:q.jsx(use,{children:q.jsx(hRe,{children:q.jsx(ARe,{children:q.jsx(bRe,{children:q.jsx(we.Suspense,{children:q.jsx(z8e,{})})})})})})})})})}));export{fu as c,na as g};
