var oz=Object.defineProperty;var az=(n,e,t)=>e in n?oz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tt=(n,e,t)=>(az(n,typeof e!="symbol"?e+"":e,t),t),Vb=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Cs=(n,e,t)=>(Vb(n,e,"read from private field"),t?t.call(n):e.get(n)),Pu=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Lb=(n,e,t,r)=>(Vb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var tR=(n,e,t)=>(Vb(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function lz(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var v3={exports:{}},fC={},y3={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xm=Symbol.for("react.element"),Az=Symbol.for("react.portal"),cz=Symbol.for("react.fragment"),uz=Symbol.for("react.strict_mode"),fz=Symbol.for("react.profiler"),dz=Symbol.for("react.provider"),hz=Symbol.for("react.context"),pz=Symbol.for("react.forward_ref"),gz=Symbol.for("react.suspense"),mz=Symbol.for("react.memo"),vz=Symbol.for("react.lazy"),nR=Symbol.iterator;function yz(n){return n===null||typeof n!="object"?null:(n=nR&&n[nR]||n["@@iterator"],typeof n=="function"?n:null)}var B3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w3=Object.assign,C3={};function xh(n,e,t){this.props=n,this.context=e,this.refs=C3,this.updater=t||B3}xh.prototype.isReactComponent={};xh.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};xh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function b3(){}b3.prototype=xh.prototype;function VU(n,e,t){this.props=n,this.context=e,this.refs=C3,this.updater=t||B3}var LU=VU.prototype=new b3;LU.constructor=VU;w3(LU,xh.prototype);LU.isPureReactComponent=!0;var rR=Array.isArray,x3=Object.prototype.hasOwnProperty,PU={current:null},I3={key:!0,ref:!0,__self:!0,__source:!0};function F3(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)x3.call(e,r)&&!I3.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),A=0;A<a;A++)l[A]=arguments[A+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xm,type:n,key:s,ref:o,props:i,_owner:PU.current}}function Bz(n,e){return{$$typeof:Xm,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function WU(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xm}function wz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var iR=/\/+/g;function Pb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?wz(""+n.key):e.toString(36)}function Qy(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Xm:case Az:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Pb(o,0):r,rR(i)?(t="",n!=null&&(t=n.replace(iR,"$&/")+"/"),Qy(i,e,t,"",function(A){return A})):i!=null&&(WU(i)&&(i=Bz(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iR,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",rR(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Pb(s,a);o+=Qy(s,e,t,l,i)}else if(l=yz(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Pb(s,a++),o+=Qy(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Q0(n,e,t){if(n==null)return n;var r=[],i=0;return Qy(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Cz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var hi={current:null},Ry={transition:null},bz={ReactCurrentDispatcher:hi,ReactCurrentBatchConfig:Ry,ReactCurrentOwner:PU};St.Children={map:Q0,forEach:function(n,e,t){Q0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Q0(n,function(){e++}),e},toArray:function(n){return Q0(n,function(e){return e})||[]},only:function(n){if(!WU(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};St.Component=xh;St.Fragment=cz;St.Profiler=fz;St.PureComponent=VU;St.StrictMode=uz;St.Suspense=gz;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bz;St.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=w3({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=PU.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)x3.call(e,l)&&!I3.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var A=0;A<l;A++)a[A]=arguments[A+2];r.children=a}return{$$typeof:Xm,type:n.type,key:i,ref:s,props:r,_owner:o}};St.createContext=function(n){return n={$$typeof:hz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:dz,_context:n},n.Consumer=n};St.createElement=F3;St.createFactory=function(n){var e=F3.bind(null,n);return e.type=n,e};St.createRef=function(){return{current:null}};St.forwardRef=function(n){return{$$typeof:pz,render:n}};St.isValidElement=WU;St.lazy=function(n){return{$$typeof:vz,_payload:{_status:-1,_result:n},_init:Cz}};St.memo=function(n,e){return{$$typeof:mz,type:n,compare:e===void 0?null:e}};St.startTransition=function(n){var e=Ry.transition;Ry.transition={};try{n()}finally{Ry.transition=e}};St.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};St.useCallback=function(n,e){return hi.current.useCallback(n,e)};St.useContext=function(n){return hi.current.useContext(n)};St.useDebugValue=function(){};St.useDeferredValue=function(n){return hi.current.useDeferredValue(n)};St.useEffect=function(n,e){return hi.current.useEffect(n,e)};St.useId=function(){return hi.current.useId()};St.useImperativeHandle=function(n,e,t){return hi.current.useImperativeHandle(n,e,t)};St.useInsertionEffect=function(n,e){return hi.current.useInsertionEffect(n,e)};St.useLayoutEffect=function(n,e){return hi.current.useLayoutEffect(n,e)};St.useMemo=function(n,e){return hi.current.useMemo(n,e)};St.useReducer=function(n,e,t){return hi.current.useReducer(n,e,t)};St.useRef=function(n){return hi.current.useRef(n)};St.useState=function(n){return hi.current.useState(n)};St.useSyncExternalStore=function(n,e,t){return hi.current.useSyncExternalStore(n,e,t)};St.useTransition=function(){return hi.current.useTransition()};St.version="18.2.0";y3.exports=St;var me=y3.exports;const z=Cu(me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xz=me,Iz=Symbol.for("react.element"),Fz=Symbol.for("react.fragment"),Ez=Object.prototype.hasOwnProperty,Uz=xz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sz={key:!0,ref:!0,__self:!0,__source:!0};function E3(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ez.call(e,r)&&!Sz.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Iz,type:n,key:s,ref:o,props:i,_owner:Uz.current}}fC.Fragment=Fz;fC.jsx=E3;fC.jsxs=E3;v3.exports=fC;var W=v3.exports,OU={exports:{}};const _z={},Qz=Object.freeze(Object.defineProperty({__proto__:null,default:_z},Symbol.toStringTag,{value:"Module"})),Rz=lz(Qz);OU.exports;(function(n){(function(e,t){function r(Q,B){if(!Q)throw new Error(B||"Assertion failed")}function i(Q,B){Q.super_=B;var E=function(){};E.prototype=B.prototype,Q.prototype=new E,Q.prototype.constructor=Q}function s(Q,B,E){if(s.isBN(Q))return Q;this.negative=0,this.words=null,this.length=0,this.red=null,Q!==null&&((B==="le"||B==="be")&&(E=B,B=10),this._init(Q||0,B||10,E||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Rz.Buffer}catch{}s.isBN=function(B){return B instanceof s?!0:B!==null&&typeof B=="object"&&B.constructor.wordSize===s.wordSize&&Array.isArray(B.words)},s.max=function(B,E){return B.cmp(E)>0?B:E},s.min=function(B,E){return B.cmp(E)<0?B:E},s.prototype._init=function(B,E,M){if(typeof B=="number")return this._initNumber(B,E,M);if(typeof B=="object")return this._initArray(B,E,M);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),B=B.toString().replace(/\s+/g,"");var D=0;B[0]==="-"&&(D++,this.negative=1),D<B.length&&(E===16?this._parseHex(B,D,M):(this._parseBase(B,E,D),M==="le"&&this._initArray(this.toArray(),E,M)))},s.prototype._initNumber=function(B,E,M){B<0&&(this.negative=1,B=-B),B<67108864?(this.words=[B&67108863],this.length=1):B<4503599627370496?(this.words=[B&67108863,B/67108864&67108863],this.length=2):(r(B<9007199254740992),this.words=[B&67108863,B/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),E,M)},s.prototype._initArray=function(B,E,M){if(r(typeof B.length=="number"),B.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(B.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var T,V,G=0;if(M==="be")for(D=B.length-1,T=0;D>=0;D-=3)V=B[D]|B[D-1]<<8|B[D-2]<<16,this.words[T]|=V<<G&67108863,this.words[T+1]=V>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);else if(M==="le")for(D=0,T=0;D<B.length;D+=3)V=B[D]|B[D+1]<<8|B[D+2]<<16,this.words[T]|=V<<G&67108863,this.words[T+1]=V>>>26-G&67108863,G+=24,G>=26&&(G-=26,T++);return this._strip()};function a(Q,B){var E=Q.charCodeAt(B);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;r(!1,"Invalid character in "+Q)}function l(Q,B,E){var M=a(Q,E);return E-1>=B&&(M|=a(Q,E-1)<<4),M}s.prototype._parseHex=function(B,E,M){this.length=Math.ceil((B.length-E)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var T=0,V=0,G;if(M==="be")for(D=B.length-1;D>=E;D-=2)G=l(B,E,D)<<T,this.words[V]|=G&67108863,T>=18?(T-=18,V+=1,this.words[V]|=G>>>26):T+=8;else{var P=B.length-E;for(D=P%2===0?E+1:E;D<B.length;D+=2)G=l(B,E,D)<<T,this.words[V]|=G&67108863,T>=18?(T-=18,V+=1,this.words[V]|=G>>>26):T+=8}this._strip()};function A(Q,B,E,M){for(var D=0,T=0,V=Math.min(Q.length,E),G=B;G<V;G++){var P=Q.charCodeAt(G)-48;D*=M,P>=49?T=P-49+10:P>=17?T=P-17+10:T=P,r(P>=0&&T<M,"Invalid character"),D+=T}return D}s.prototype._parseBase=function(B,E,M){this.words=[0],this.length=1;for(var D=0,T=1;T<=67108863;T*=E)D++;D--,T=T/E|0;for(var V=B.length-M,G=V%D,P=Math.min(V,V-G)+M,U=0,H=M;H<P;H+=D)U=A(B,H,H+D,E),this.imuln(T),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U);if(G!==0){var oe=1;for(U=A(B,H,B.length,E),H=0;H<G;H++)oe*=E;this.imuln(oe),this.words[0]+U<67108864?this.words[0]+=U:this._iaddn(U)}this._strip()},s.prototype.copy=function(B){B.words=new Array(this.length);for(var E=0;E<this.length;E++)B.words[E]=this.words[E];B.length=this.length,B.negative=this.negative,B.red=this.red};function c(Q,B){Q.words=B.words,Q.length=B.length,Q.negative=B.negative,Q.red=B.red}if(s.prototype._move=function(B){c(B,this)},s.prototype.clone=function(){var B=new s(null);return this.copy(B),B},s.prototype._expand=function(B){for(;this.length<B;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(B,E){B=B||10,E=E|0||1;var M;if(B===16||B==="hex"){M="";for(var D=0,T=0,V=0;V<this.length;V++){var G=this.words[V],P=((G<<D|T)&16777215).toString(16);T=G>>>24-D&16777215,D+=2,D>=26&&(D-=26,V--),T!==0||V!==this.length-1?M=f[6-P.length]+P+M:M=P+M}for(T!==0&&(M=T.toString(16)+M);M.length%E!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(B===(B|0)&&B>=2&&B<=36){var U=d[B],H=h[B];M="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var k=oe.modrn(H).toString(B);oe=oe.idivn(H),oe.isZero()?M=k+M:M=f[U-k.length]+k+M}for(this.isZero()&&(M="0"+M);M.length%E!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var B=this.words[0];return this.length===2?B+=this.words[1]*67108864:this.length===3&&this.words[2]===1?B+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-B:B},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(B,E){return this.toArrayLike(o,B,E)}),s.prototype.toArray=function(B,E){return this.toArrayLike(Array,B,E)};var p=function(B,E){return B.allocUnsafe?B.allocUnsafe(E):new B(E)};s.prototype.toArrayLike=function(B,E,M){this._strip();var D=this.byteLength(),T=M||Math.max(1,D);r(D<=T,"byte array longer than desired length"),r(T>0,"Requested array length <= 0");var V=p(B,T),G=E==="le"?"LE":"BE";return this["_toArrayLike"+G](V,D),V},s.prototype._toArrayLikeLE=function(B,E){for(var M=0,D=0,T=0,V=0;T<this.length;T++){var G=this.words[T]<<V|D;B[M++]=G&255,M<B.length&&(B[M++]=G>>8&255),M<B.length&&(B[M++]=G>>16&255),V===6?(M<B.length&&(B[M++]=G>>24&255),D=0,V=0):(D=G>>>24,V+=2)}if(M<B.length)for(B[M++]=D;M<B.length;)B[M++]=0},s.prototype._toArrayLikeBE=function(B,E){for(var M=B.length-1,D=0,T=0,V=0;T<this.length;T++){var G=this.words[T]<<V|D;B[M--]=G&255,M>=0&&(B[M--]=G>>8&255),M>=0&&(B[M--]=G>>16&255),V===6?(M>=0&&(B[M--]=G>>24&255),D=0,V=0):(D=G>>>24,V+=2)}if(M>=0)for(B[M--]=D;M>=0;)B[M--]=0},Math.clz32?s.prototype._countBits=function(B){return 32-Math.clz32(B)}:s.prototype._countBits=function(B){var E=B,M=0;return E>=4096&&(M+=13,E>>>=13),E>=64&&(M+=7,E>>>=7),E>=8&&(M+=4,E>>>=4),E>=2&&(M+=2,E>>>=2),M+E},s.prototype._zeroBits=function(B){if(B===0)return 26;var E=B,M=0;return E&8191||(M+=13,E>>>=13),E&127||(M+=7,E>>>=7),E&15||(M+=4,E>>>=4),E&3||(M+=2,E>>>=2),E&1||M++,M},s.prototype.bitLength=function(){var B=this.words[this.length-1],E=this._countBits(B);return(this.length-1)*26+E};function m(Q){for(var B=new Array(Q.bitLength()),E=0;E<B.length;E++){var M=E/26|0,D=E%26;B[E]=Q.words[M]>>>D&1}return B}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var B=0,E=0;E<this.length;E++){var M=this._zeroBits(this.words[E]);if(B+=M,M!==26)break}return B},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(B){return this.negative!==0?this.abs().inotn(B).iaddn(1):this.clone()},s.prototype.fromTwos=function(B){return this.testn(B-1)?this.notn(B).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(B){for(;this.length<B.length;)this.words[this.length++]=0;for(var E=0;E<B.length;E++)this.words[E]=this.words[E]|B.words[E];return this._strip()},s.prototype.ior=function(B){return r((this.negative|B.negative)===0),this.iuor(B)},s.prototype.or=function(B){return this.length>B.length?this.clone().ior(B):B.clone().ior(this)},s.prototype.uor=function(B){return this.length>B.length?this.clone().iuor(B):B.clone().iuor(this)},s.prototype.iuand=function(B){var E;this.length>B.length?E=B:E=this;for(var M=0;M<E.length;M++)this.words[M]=this.words[M]&B.words[M];return this.length=E.length,this._strip()},s.prototype.iand=function(B){return r((this.negative|B.negative)===0),this.iuand(B)},s.prototype.and=function(B){return this.length>B.length?this.clone().iand(B):B.clone().iand(this)},s.prototype.uand=function(B){return this.length>B.length?this.clone().iuand(B):B.clone().iuand(this)},s.prototype.iuxor=function(B){var E,M;this.length>B.length?(E=this,M=B):(E=B,M=this);for(var D=0;D<M.length;D++)this.words[D]=E.words[D]^M.words[D];if(this!==E)for(;D<E.length;D++)this.words[D]=E.words[D];return this.length=E.length,this._strip()},s.prototype.ixor=function(B){return r((this.negative|B.negative)===0),this.iuxor(B)},s.prototype.xor=function(B){return this.length>B.length?this.clone().ixor(B):B.clone().ixor(this)},s.prototype.uxor=function(B){return this.length>B.length?this.clone().iuxor(B):B.clone().iuxor(this)},s.prototype.inotn=function(B){r(typeof B=="number"&&B>=0);var E=Math.ceil(B/26)|0,M=B%26;this._expand(E),M>0&&E--;for(var D=0;D<E;D++)this.words[D]=~this.words[D]&67108863;return M>0&&(this.words[D]=~this.words[D]&67108863>>26-M),this._strip()},s.prototype.notn=function(B){return this.clone().inotn(B)},s.prototype.setn=function(B,E){r(typeof B=="number"&&B>=0);var M=B/26|0,D=B%26;return this._expand(M+1),E?this.words[M]=this.words[M]|1<<D:this.words[M]=this.words[M]&~(1<<D),this._strip()},s.prototype.iadd=function(B){var E;if(this.negative!==0&&B.negative===0)return this.negative=0,E=this.isub(B),this.negative^=1,this._normSign();if(this.negative===0&&B.negative!==0)return B.negative=0,E=this.isub(B),B.negative=1,E._normSign();var M,D;this.length>B.length?(M=this,D=B):(M=B,D=this);for(var T=0,V=0;V<D.length;V++)E=(M.words[V]|0)+(D.words[V]|0)+T,this.words[V]=E&67108863,T=E>>>26;for(;T!==0&&V<M.length;V++)E=(M.words[V]|0)+T,this.words[V]=E&67108863,T=E>>>26;if(this.length=M.length,T!==0)this.words[this.length]=T,this.length++;else if(M!==this)for(;V<M.length;V++)this.words[V]=M.words[V];return this},s.prototype.add=function(B){var E;return B.negative!==0&&this.negative===0?(B.negative=0,E=this.sub(B),B.negative^=1,E):B.negative===0&&this.negative!==0?(this.negative=0,E=B.sub(this),this.negative=1,E):this.length>B.length?this.clone().iadd(B):B.clone().iadd(this)},s.prototype.isub=function(B){if(B.negative!==0){B.negative=0;var E=this.iadd(B);return B.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(B),this.negative=1,this._normSign();var M=this.cmp(B);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,T;M>0?(D=this,T=B):(D=B,T=this);for(var V=0,G=0;G<T.length;G++)E=(D.words[G]|0)-(T.words[G]|0)+V,V=E>>26,this.words[G]=E&67108863;for(;V!==0&&G<D.length;G++)E=(D.words[G]|0)+V,V=E>>26,this.words[G]=E&67108863;if(V===0&&G<D.length&&D!==this)for(;G<D.length;G++)this.words[G]=D.words[G];return this.length=Math.max(this.length,G),D!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(B){return this.clone().isub(B)};function g(Q,B,E){E.negative=B.negative^Q.negative;var M=Q.length+B.length|0;E.length=M,M=M-1|0;var D=Q.words[0]|0,T=B.words[0]|0,V=D*T,G=V&67108863,P=V/67108864|0;E.words[0]=G;for(var U=1;U<M;U++){for(var H=P>>>26,oe=P&67108863,k=Math.min(U,B.length-1),K=Math.max(0,U-Q.length+1);K<=k;K++){var ne=U-K|0;D=Q.words[ne]|0,T=B.words[K]|0,V=D*T+oe,H+=V/67108864|0,oe=V&67108863}E.words[U]=oe|0,P=H|0}return P!==0?E.words[U]=P|0:E.length--,E._strip()}var v=function(B,E,M){var D=B.words,T=E.words,V=M.words,G=0,P,U,H,oe=D[0]|0,k=oe&8191,K=oe>>>13,ne=D[1]|0,ie=ne&8191,ue=ne>>>13,j=D[2]|0,se=j&8191,ce=j>>>13,Be=D[3]|0,ge=Be&8191,Fe=Be>>>13,nt=D[4]|0,We=nt&8191,Te=nt>>>13,Qe=D[5]|0,Ge=Qe&8191,qe=Qe>>>13,O=D[6]|0,J=O&8191,ae=O>>>13,de=D[7]|0,ve=de&8191,L=de>>>13,_=D[8]|0,I=_&8191,N=_>>>13,$=D[9]|0,ee=$&8191,te=$>>>13,we=T[0]|0,Ce=we&8191,Ee=we>>>13,Ve=T[1]|0,_e=Ve&8191,re=Ve>>>13,ye=T[2]|0,be=ye&8191,Ue=ye>>>13,Je=T[3]|0,$e=Je&8191,ct=Je>>>13,ln=T[4]|0,xt=ln&8191,it=ln>>>13,ir=T[5]|0,mt=ir&8191,qt=ir>>>13,co=T[6]|0,zt=co&8191,en=co>>>13,q=T[7]|0,le=q&8191,he=q>>>13,fe=T[8]|0,pe=fe&8191,De=fe>>>13,ot=T[9]|0,Ye=ot&8191,He=ot>>>13;M.negative=B.negative^E.negative,M.length=19,P=Math.imul(k,Ce),U=Math.imul(k,Ee),U=U+Math.imul(K,Ce)|0,H=Math.imul(K,Ee);var vt=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(vt>>>26)|0,vt&=67108863,P=Math.imul(ie,Ce),U=Math.imul(ie,Ee),U=U+Math.imul(ue,Ce)|0,H=Math.imul(ue,Ee),P=P+Math.imul(k,_e)|0,U=U+Math.imul(k,re)|0,U=U+Math.imul(K,_e)|0,H=H+Math.imul(K,re)|0;var ft=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(ft>>>26)|0,ft&=67108863,P=Math.imul(se,Ce),U=Math.imul(se,Ee),U=U+Math.imul(ce,Ce)|0,H=Math.imul(ce,Ee),P=P+Math.imul(ie,_e)|0,U=U+Math.imul(ie,re)|0,U=U+Math.imul(ue,_e)|0,H=H+Math.imul(ue,re)|0,P=P+Math.imul(k,be)|0,U=U+Math.imul(k,Ue)|0,U=U+Math.imul(K,be)|0,H=H+Math.imul(K,Ue)|0;var gt=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(gt>>>26)|0,gt&=67108863,P=Math.imul(ge,Ce),U=Math.imul(ge,Ee),U=U+Math.imul(Fe,Ce)|0,H=Math.imul(Fe,Ee),P=P+Math.imul(se,_e)|0,U=U+Math.imul(se,re)|0,U=U+Math.imul(ce,_e)|0,H=H+Math.imul(ce,re)|0,P=P+Math.imul(ie,be)|0,U=U+Math.imul(ie,Ue)|0,U=U+Math.imul(ue,be)|0,H=H+Math.imul(ue,Ue)|0,P=P+Math.imul(k,$e)|0,U=U+Math.imul(k,ct)|0,U=U+Math.imul(K,$e)|0,H=H+Math.imul(K,ct)|0;var Jt=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,P=Math.imul(We,Ce),U=Math.imul(We,Ee),U=U+Math.imul(Te,Ce)|0,H=Math.imul(Te,Ee),P=P+Math.imul(ge,_e)|0,U=U+Math.imul(ge,re)|0,U=U+Math.imul(Fe,_e)|0,H=H+Math.imul(Fe,re)|0,P=P+Math.imul(se,be)|0,U=U+Math.imul(se,Ue)|0,U=U+Math.imul(ce,be)|0,H=H+Math.imul(ce,Ue)|0,P=P+Math.imul(ie,$e)|0,U=U+Math.imul(ie,ct)|0,U=U+Math.imul(ue,$e)|0,H=H+Math.imul(ue,ct)|0,P=P+Math.imul(k,xt)|0,U=U+Math.imul(k,it)|0,U=U+Math.imul(K,xt)|0,H=H+Math.imul(K,it)|0;var kr=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(kr>>>26)|0,kr&=67108863,P=Math.imul(Ge,Ce),U=Math.imul(Ge,Ee),U=U+Math.imul(qe,Ce)|0,H=Math.imul(qe,Ee),P=P+Math.imul(We,_e)|0,U=U+Math.imul(We,re)|0,U=U+Math.imul(Te,_e)|0,H=H+Math.imul(Te,re)|0,P=P+Math.imul(ge,be)|0,U=U+Math.imul(ge,Ue)|0,U=U+Math.imul(Fe,be)|0,H=H+Math.imul(Fe,Ue)|0,P=P+Math.imul(se,$e)|0,U=U+Math.imul(se,ct)|0,U=U+Math.imul(ce,$e)|0,H=H+Math.imul(ce,ct)|0,P=P+Math.imul(ie,xt)|0,U=U+Math.imul(ie,it)|0,U=U+Math.imul(ue,xt)|0,H=H+Math.imul(ue,it)|0,P=P+Math.imul(k,mt)|0,U=U+Math.imul(k,qt)|0,U=U+Math.imul(K,mt)|0,H=H+Math.imul(K,qt)|0;var Wo=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,P=Math.imul(J,Ce),U=Math.imul(J,Ee),U=U+Math.imul(ae,Ce)|0,H=Math.imul(ae,Ee),P=P+Math.imul(Ge,_e)|0,U=U+Math.imul(Ge,re)|0,U=U+Math.imul(qe,_e)|0,H=H+Math.imul(qe,re)|0,P=P+Math.imul(We,be)|0,U=U+Math.imul(We,Ue)|0,U=U+Math.imul(Te,be)|0,H=H+Math.imul(Te,Ue)|0,P=P+Math.imul(ge,$e)|0,U=U+Math.imul(ge,ct)|0,U=U+Math.imul(Fe,$e)|0,H=H+Math.imul(Fe,ct)|0,P=P+Math.imul(se,xt)|0,U=U+Math.imul(se,it)|0,U=U+Math.imul(ce,xt)|0,H=H+Math.imul(ce,it)|0,P=P+Math.imul(ie,mt)|0,U=U+Math.imul(ie,qt)|0,U=U+Math.imul(ue,mt)|0,H=H+Math.imul(ue,qt)|0,P=P+Math.imul(k,zt)|0,U=U+Math.imul(k,en)|0,U=U+Math.imul(K,zt)|0,H=H+Math.imul(K,en)|0;var Oo=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,P=Math.imul(ve,Ce),U=Math.imul(ve,Ee),U=U+Math.imul(L,Ce)|0,H=Math.imul(L,Ee),P=P+Math.imul(J,_e)|0,U=U+Math.imul(J,re)|0,U=U+Math.imul(ae,_e)|0,H=H+Math.imul(ae,re)|0,P=P+Math.imul(Ge,be)|0,U=U+Math.imul(Ge,Ue)|0,U=U+Math.imul(qe,be)|0,H=H+Math.imul(qe,Ue)|0,P=P+Math.imul(We,$e)|0,U=U+Math.imul(We,ct)|0,U=U+Math.imul(Te,$e)|0,H=H+Math.imul(Te,ct)|0,P=P+Math.imul(ge,xt)|0,U=U+Math.imul(ge,it)|0,U=U+Math.imul(Fe,xt)|0,H=H+Math.imul(Fe,it)|0,P=P+Math.imul(se,mt)|0,U=U+Math.imul(se,qt)|0,U=U+Math.imul(ce,mt)|0,H=H+Math.imul(ce,qt)|0,P=P+Math.imul(ie,zt)|0,U=U+Math.imul(ie,en)|0,U=U+Math.imul(ue,zt)|0,H=H+Math.imul(ue,en)|0,P=P+Math.imul(k,le)|0,U=U+Math.imul(k,he)|0,U=U+Math.imul(K,le)|0,H=H+Math.imul(K,he)|0;var mi=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(mi>>>26)|0,mi&=67108863,P=Math.imul(I,Ce),U=Math.imul(I,Ee),U=U+Math.imul(N,Ce)|0,H=Math.imul(N,Ee),P=P+Math.imul(ve,_e)|0,U=U+Math.imul(ve,re)|0,U=U+Math.imul(L,_e)|0,H=H+Math.imul(L,re)|0,P=P+Math.imul(J,be)|0,U=U+Math.imul(J,Ue)|0,U=U+Math.imul(ae,be)|0,H=H+Math.imul(ae,Ue)|0,P=P+Math.imul(Ge,$e)|0,U=U+Math.imul(Ge,ct)|0,U=U+Math.imul(qe,$e)|0,H=H+Math.imul(qe,ct)|0,P=P+Math.imul(We,xt)|0,U=U+Math.imul(We,it)|0,U=U+Math.imul(Te,xt)|0,H=H+Math.imul(Te,it)|0,P=P+Math.imul(ge,mt)|0,U=U+Math.imul(ge,qt)|0,U=U+Math.imul(Fe,mt)|0,H=H+Math.imul(Fe,qt)|0,P=P+Math.imul(se,zt)|0,U=U+Math.imul(se,en)|0,U=U+Math.imul(ce,zt)|0,H=H+Math.imul(ce,en)|0,P=P+Math.imul(ie,le)|0,U=U+Math.imul(ie,he)|0,U=U+Math.imul(ue,le)|0,H=H+Math.imul(ue,he)|0,P=P+Math.imul(k,pe)|0,U=U+Math.imul(k,De)|0,U=U+Math.imul(K,pe)|0,H=H+Math.imul(K,De)|0;var Dt=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,P=Math.imul(ee,Ce),U=Math.imul(ee,Ee),U=U+Math.imul(te,Ce)|0,H=Math.imul(te,Ee),P=P+Math.imul(I,_e)|0,U=U+Math.imul(I,re)|0,U=U+Math.imul(N,_e)|0,H=H+Math.imul(N,re)|0,P=P+Math.imul(ve,be)|0,U=U+Math.imul(ve,Ue)|0,U=U+Math.imul(L,be)|0,H=H+Math.imul(L,Ue)|0,P=P+Math.imul(J,$e)|0,U=U+Math.imul(J,ct)|0,U=U+Math.imul(ae,$e)|0,H=H+Math.imul(ae,ct)|0,P=P+Math.imul(Ge,xt)|0,U=U+Math.imul(Ge,it)|0,U=U+Math.imul(qe,xt)|0,H=H+Math.imul(qe,it)|0,P=P+Math.imul(We,mt)|0,U=U+Math.imul(We,qt)|0,U=U+Math.imul(Te,mt)|0,H=H+Math.imul(Te,qt)|0,P=P+Math.imul(ge,zt)|0,U=U+Math.imul(ge,en)|0,U=U+Math.imul(Fe,zt)|0,H=H+Math.imul(Fe,en)|0,P=P+Math.imul(se,le)|0,U=U+Math.imul(se,he)|0,U=U+Math.imul(ce,le)|0,H=H+Math.imul(ce,he)|0,P=P+Math.imul(ie,pe)|0,U=U+Math.imul(ie,De)|0,U=U+Math.imul(ue,pe)|0,H=H+Math.imul(ue,De)|0,P=P+Math.imul(k,Ye)|0,U=U+Math.imul(k,He)|0,U=U+Math.imul(K,Ye)|0,H=H+Math.imul(K,He)|0;var Go=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Go>>>26)|0,Go&=67108863,P=Math.imul(ee,_e),U=Math.imul(ee,re),U=U+Math.imul(te,_e)|0,H=Math.imul(te,re),P=P+Math.imul(I,be)|0,U=U+Math.imul(I,Ue)|0,U=U+Math.imul(N,be)|0,H=H+Math.imul(N,Ue)|0,P=P+Math.imul(ve,$e)|0,U=U+Math.imul(ve,ct)|0,U=U+Math.imul(L,$e)|0,H=H+Math.imul(L,ct)|0,P=P+Math.imul(J,xt)|0,U=U+Math.imul(J,it)|0,U=U+Math.imul(ae,xt)|0,H=H+Math.imul(ae,it)|0,P=P+Math.imul(Ge,mt)|0,U=U+Math.imul(Ge,qt)|0,U=U+Math.imul(qe,mt)|0,H=H+Math.imul(qe,qt)|0,P=P+Math.imul(We,zt)|0,U=U+Math.imul(We,en)|0,U=U+Math.imul(Te,zt)|0,H=H+Math.imul(Te,en)|0,P=P+Math.imul(ge,le)|0,U=U+Math.imul(ge,he)|0,U=U+Math.imul(Fe,le)|0,H=H+Math.imul(Fe,he)|0,P=P+Math.imul(se,pe)|0,U=U+Math.imul(se,De)|0,U=U+Math.imul(ce,pe)|0,H=H+Math.imul(ce,De)|0,P=P+Math.imul(ie,Ye)|0,U=U+Math.imul(ie,He)|0,U=U+Math.imul(ue,Ye)|0,H=H+Math.imul(ue,He)|0;var mn=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(mn>>>26)|0,mn&=67108863,P=Math.imul(ee,be),U=Math.imul(ee,Ue),U=U+Math.imul(te,be)|0,H=Math.imul(te,Ue),P=P+Math.imul(I,$e)|0,U=U+Math.imul(I,ct)|0,U=U+Math.imul(N,$e)|0,H=H+Math.imul(N,ct)|0,P=P+Math.imul(ve,xt)|0,U=U+Math.imul(ve,it)|0,U=U+Math.imul(L,xt)|0,H=H+Math.imul(L,it)|0,P=P+Math.imul(J,mt)|0,U=U+Math.imul(J,qt)|0,U=U+Math.imul(ae,mt)|0,H=H+Math.imul(ae,qt)|0,P=P+Math.imul(Ge,zt)|0,U=U+Math.imul(Ge,en)|0,U=U+Math.imul(qe,zt)|0,H=H+Math.imul(qe,en)|0,P=P+Math.imul(We,le)|0,U=U+Math.imul(We,he)|0,U=U+Math.imul(Te,le)|0,H=H+Math.imul(Te,he)|0,P=P+Math.imul(ge,pe)|0,U=U+Math.imul(ge,De)|0,U=U+Math.imul(Fe,pe)|0,H=H+Math.imul(Fe,De)|0,P=P+Math.imul(se,Ye)|0,U=U+Math.imul(se,He)|0,U=U+Math.imul(ce,Ye)|0,H=H+Math.imul(ce,He)|0;var Vr=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,P=Math.imul(ee,$e),U=Math.imul(ee,ct),U=U+Math.imul(te,$e)|0,H=Math.imul(te,ct),P=P+Math.imul(I,xt)|0,U=U+Math.imul(I,it)|0,U=U+Math.imul(N,xt)|0,H=H+Math.imul(N,it)|0,P=P+Math.imul(ve,mt)|0,U=U+Math.imul(ve,qt)|0,U=U+Math.imul(L,mt)|0,H=H+Math.imul(L,qt)|0,P=P+Math.imul(J,zt)|0,U=U+Math.imul(J,en)|0,U=U+Math.imul(ae,zt)|0,H=H+Math.imul(ae,en)|0,P=P+Math.imul(Ge,le)|0,U=U+Math.imul(Ge,he)|0,U=U+Math.imul(qe,le)|0,H=H+Math.imul(qe,he)|0,P=P+Math.imul(We,pe)|0,U=U+Math.imul(We,De)|0,U=U+Math.imul(Te,pe)|0,H=H+Math.imul(Te,De)|0,P=P+Math.imul(ge,Ye)|0,U=U+Math.imul(ge,He)|0,U=U+Math.imul(Fe,Ye)|0,H=H+Math.imul(Fe,He)|0;var ws=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(ws>>>26)|0,ws&=67108863,P=Math.imul(ee,xt),U=Math.imul(ee,it),U=U+Math.imul(te,xt)|0,H=Math.imul(te,it),P=P+Math.imul(I,mt)|0,U=U+Math.imul(I,qt)|0,U=U+Math.imul(N,mt)|0,H=H+Math.imul(N,qt)|0,P=P+Math.imul(ve,zt)|0,U=U+Math.imul(ve,en)|0,U=U+Math.imul(L,zt)|0,H=H+Math.imul(L,en)|0,P=P+Math.imul(J,le)|0,U=U+Math.imul(J,he)|0,U=U+Math.imul(ae,le)|0,H=H+Math.imul(ae,he)|0,P=P+Math.imul(Ge,pe)|0,U=U+Math.imul(Ge,De)|0,U=U+Math.imul(qe,pe)|0,H=H+Math.imul(qe,De)|0,P=P+Math.imul(We,Ye)|0,U=U+Math.imul(We,He)|0,U=U+Math.imul(Te,Ye)|0,H=H+Math.imul(Te,He)|0;var Wa=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(Wa>>>26)|0,Wa&=67108863,P=Math.imul(ee,mt),U=Math.imul(ee,qt),U=U+Math.imul(te,mt)|0,H=Math.imul(te,qt),P=P+Math.imul(I,zt)|0,U=U+Math.imul(I,en)|0,U=U+Math.imul(N,zt)|0,H=H+Math.imul(N,en)|0,P=P+Math.imul(ve,le)|0,U=U+Math.imul(ve,he)|0,U=U+Math.imul(L,le)|0,H=H+Math.imul(L,he)|0,P=P+Math.imul(J,pe)|0,U=U+Math.imul(J,De)|0,U=U+Math.imul(ae,pe)|0,H=H+Math.imul(ae,De)|0,P=P+Math.imul(Ge,Ye)|0,U=U+Math.imul(Ge,He)|0,U=U+Math.imul(qe,Ye)|0,H=H+Math.imul(qe,He)|0;var gc=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(gc>>>26)|0,gc&=67108863,P=Math.imul(ee,zt),U=Math.imul(ee,en),U=U+Math.imul(te,zt)|0,H=Math.imul(te,en),P=P+Math.imul(I,le)|0,U=U+Math.imul(I,he)|0,U=U+Math.imul(N,le)|0,H=H+Math.imul(N,he)|0,P=P+Math.imul(ve,pe)|0,U=U+Math.imul(ve,De)|0,U=U+Math.imul(L,pe)|0,H=H+Math.imul(L,De)|0,P=P+Math.imul(J,Ye)|0,U=U+Math.imul(J,He)|0,U=U+Math.imul(ae,Ye)|0,H=H+Math.imul(ae,He)|0;var sr=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(sr>>>26)|0,sr&=67108863,P=Math.imul(ee,le),U=Math.imul(ee,he),U=U+Math.imul(te,le)|0,H=Math.imul(te,he),P=P+Math.imul(I,pe)|0,U=U+Math.imul(I,De)|0,U=U+Math.imul(N,pe)|0,H=H+Math.imul(N,De)|0,P=P+Math.imul(ve,Ye)|0,U=U+Math.imul(ve,He)|0,U=U+Math.imul(L,Ye)|0,H=H+Math.imul(L,He)|0;var uo=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(uo>>>26)|0,uo&=67108863,P=Math.imul(ee,pe),U=Math.imul(ee,De),U=U+Math.imul(te,pe)|0,H=Math.imul(te,De),P=P+Math.imul(I,Ye)|0,U=U+Math.imul(I,He)|0,U=U+Math.imul(N,Ye)|0,H=H+Math.imul(N,He)|0;var mc=(G+P|0)+((U&8191)<<13)|0;G=(H+(U>>>13)|0)+(mc>>>26)|0,mc&=67108863,P=Math.imul(ee,Ye),U=Math.imul(ee,He),U=U+Math.imul(te,Ye)|0,H=Math.imul(te,He);var Ir=(G+P|0)+((U&8191)<<13)|0;return G=(H+(U>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,V[0]=vt,V[1]=ft,V[2]=gt,V[3]=Jt,V[4]=kr,V[5]=Wo,V[6]=Oo,V[7]=mi,V[8]=Dt,V[9]=Go,V[10]=mn,V[11]=Vr,V[12]=ws,V[13]=Wa,V[14]=gc,V[15]=sr,V[16]=uo,V[17]=mc,V[18]=Ir,G!==0&&(V[19]=G,M.length++),M};Math.imul||(v=g);function y(Q,B,E){E.negative=B.negative^Q.negative,E.length=Q.length+B.length;for(var M=0,D=0,T=0;T<E.length-1;T++){var V=D;D=0;for(var G=M&67108863,P=Math.min(T,B.length-1),U=Math.max(0,T-Q.length+1);U<=P;U++){var H=T-U,oe=Q.words[H]|0,k=B.words[U]|0,K=oe*k,ne=K&67108863;V=V+(K/67108864|0)|0,ne=ne+G|0,G=ne&67108863,V=V+(ne>>>26)|0,D+=V>>>26,V&=67108863}E.words[T]=G,M=V,V=D}return M!==0?E.words[T]=M:E.length--,E._strip()}function w(Q,B,E){return y(Q,B,E)}s.prototype.mulTo=function(B,E){var M,D=this.length+B.length;return this.length===10&&B.length===10?M=v(this,B,E):D<63?M=g(this,B,E):D<1024?M=y(this,B,E):M=w(this,B,E),M},s.prototype.mul=function(B){var E=new s(null);return E.words=new Array(this.length+B.length),this.mulTo(B,E)},s.prototype.mulf=function(B){var E=new s(null);return E.words=new Array(this.length+B.length),w(this,B,E)},s.prototype.imul=function(B){return this.clone().mulTo(B,this)},s.prototype.imuln=function(B){var E=B<0;E&&(B=-B),r(typeof B=="number"),r(B<67108864);for(var M=0,D=0;D<this.length;D++){var T=(this.words[D]|0)*B,V=(T&67108863)+(M&67108863);M>>=26,M+=T/67108864|0,M+=V>>>26,this.words[D]=V&67108863}return M!==0&&(this.words[D]=M,this.length++),E?this.ineg():this},s.prototype.muln=function(B){return this.clone().imuln(B)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(B){var E=m(B);if(E.length===0)return new s(1);for(var M=this,D=0;D<E.length&&E[D]===0;D++,M=M.sqr());if(++D<E.length)for(var T=M.sqr();D<E.length;D++,T=T.sqr())E[D]!==0&&(M=M.mul(T));return M},s.prototype.iushln=function(B){r(typeof B=="number"&&B>=0);var E=B%26,M=(B-E)/26,D=67108863>>>26-E<<26-E,T;if(E!==0){var V=0;for(T=0;T<this.length;T++){var G=this.words[T]&D,P=(this.words[T]|0)-G<<E;this.words[T]=P|V,V=G>>>26-E}V&&(this.words[T]=V,this.length++)}if(M!==0){for(T=this.length-1;T>=0;T--)this.words[T+M]=this.words[T];for(T=0;T<M;T++)this.words[T]=0;this.length+=M}return this._strip()},s.prototype.ishln=function(B){return r(this.negative===0),this.iushln(B)},s.prototype.iushrn=function(B,E,M){r(typeof B=="number"&&B>=0);var D;E?D=(E-E%26)/26:D=0;var T=B%26,V=Math.min((B-T)/26,this.length),G=67108863^67108863>>>T<<T,P=M;if(D-=V,D=Math.max(0,D),P){for(var U=0;U<V;U++)P.words[U]=this.words[U];P.length=V}if(V!==0)if(this.length>V)for(this.length-=V,U=0;U<this.length;U++)this.words[U]=this.words[U+V];else this.words[0]=0,this.length=1;var H=0;for(U=this.length-1;U>=0&&(H!==0||U>=D);U--){var oe=this.words[U]|0;this.words[U]=H<<26-T|oe>>>T,H=oe&G}return P&&H!==0&&(P.words[P.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(B,E,M){return r(this.negative===0),this.iushrn(B,E,M)},s.prototype.shln=function(B){return this.clone().ishln(B)},s.prototype.ushln=function(B){return this.clone().iushln(B)},s.prototype.shrn=function(B){return this.clone().ishrn(B)},s.prototype.ushrn=function(B){return this.clone().iushrn(B)},s.prototype.testn=function(B){r(typeof B=="number"&&B>=0);var E=B%26,M=(B-E)/26,D=1<<E;if(this.length<=M)return!1;var T=this.words[M];return!!(T&D)},s.prototype.imaskn=function(B){r(typeof B=="number"&&B>=0);var E=B%26,M=(B-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(E!==0&&M++,this.length=Math.min(M,this.length),E!==0){var D=67108863^67108863>>>E<<E;this.words[this.length-1]&=D}return this._strip()},s.prototype.maskn=function(B){return this.clone().imaskn(B)},s.prototype.iaddn=function(B){return r(typeof B=="number"),r(B<67108864),B<0?this.isubn(-B):this.negative!==0?this.length===1&&(this.words[0]|0)<=B?(this.words[0]=B-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(B),this.negative=1,this):this._iaddn(B)},s.prototype._iaddn=function(B){this.words[0]+=B;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},s.prototype.isubn=function(B){if(r(typeof B=="number"),r(B<67108864),B<0)return this.iaddn(-B);if(this.negative!==0)return this.negative=0,this.iaddn(B),this.negative=1,this;if(this.words[0]-=B,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},s.prototype.addn=function(B){return this.clone().iaddn(B)},s.prototype.subn=function(B){return this.clone().isubn(B)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(B,E,M){var D=B.length+M,T;this._expand(D);var V,G=0;for(T=0;T<B.length;T++){V=(this.words[T+M]|0)+G;var P=(B.words[T]|0)*E;V-=P&67108863,G=(V>>26)-(P/67108864|0),this.words[T+M]=V&67108863}for(;T<this.length-M;T++)V=(this.words[T+M]|0)+G,G=V>>26,this.words[T+M]=V&67108863;if(G===0)return this._strip();for(r(G===-1),G=0,T=0;T<this.length;T++)V=-(this.words[T]|0)+G,G=V>>26,this.words[T]=V&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(B,E){var M=this.length-B.length,D=this.clone(),T=B,V=T.words[T.length-1]|0,G=this._countBits(V);M=26-G,M!==0&&(T=T.ushln(M),D.iushln(M),V=T.words[T.length-1]|0);var P=D.length-T.length,U;if(E!=="mod"){U=new s(null),U.length=P+1,U.words=new Array(U.length);for(var H=0;H<U.length;H++)U.words[H]=0}var oe=D.clone()._ishlnsubmul(T,1,P);oe.negative===0&&(D=oe,U&&(U.words[P]=1));for(var k=P-1;k>=0;k--){var K=(D.words[T.length+k]|0)*67108864+(D.words[T.length+k-1]|0);for(K=Math.min(K/V|0,67108863),D._ishlnsubmul(T,K,k);D.negative!==0;)K--,D.negative=0,D._ishlnsubmul(T,1,k),D.isZero()||(D.negative^=1);U&&(U.words[k]=K)}return U&&U._strip(),D._strip(),E!=="div"&&M!==0&&D.iushrn(M),{div:U||null,mod:D}},s.prototype.divmod=function(B,E,M){if(r(!B.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var D,T,V;return this.negative!==0&&B.negative===0?(V=this.neg().divmod(B,E),E!=="mod"&&(D=V.div.neg()),E!=="div"&&(T=V.mod.neg(),M&&T.negative!==0&&T.iadd(B)),{div:D,mod:T}):this.negative===0&&B.negative!==0?(V=this.divmod(B.neg(),E),E!=="mod"&&(D=V.div.neg()),{div:D,mod:V.mod}):this.negative&B.negative?(V=this.neg().divmod(B.neg(),E),E!=="div"&&(T=V.mod.neg(),M&&T.negative!==0&&T.isub(B)),{div:V.div,mod:T}):B.length>this.length||this.cmp(B)<0?{div:new s(0),mod:this}:B.length===1?E==="div"?{div:this.divn(B.words[0]),mod:null}:E==="mod"?{div:null,mod:new s(this.modrn(B.words[0]))}:{div:this.divn(B.words[0]),mod:new s(this.modrn(B.words[0]))}:this._wordDiv(B,E)},s.prototype.div=function(B){return this.divmod(B,"div",!1).div},s.prototype.mod=function(B){return this.divmod(B,"mod",!1).mod},s.prototype.umod=function(B){return this.divmod(B,"mod",!0).mod},s.prototype.divRound=function(B){var E=this.divmod(B);if(E.mod.isZero())return E.div;var M=E.div.negative!==0?E.mod.isub(B):E.mod,D=B.ushrn(1),T=B.andln(1),V=M.cmp(D);return V<0||T===1&&V===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},s.prototype.modrn=function(B){var E=B<0;E&&(B=-B),r(B<=67108863);for(var M=(1<<26)%B,D=0,T=this.length-1;T>=0;T--)D=(M*D+(this.words[T]|0))%B;return E?-D:D},s.prototype.modn=function(B){return this.modrn(B)},s.prototype.idivn=function(B){var E=B<0;E&&(B=-B),r(B<=67108863);for(var M=0,D=this.length-1;D>=0;D--){var T=(this.words[D]|0)+M*67108864;this.words[D]=T/B|0,M=T%B}return this._strip(),E?this.ineg():this},s.prototype.divn=function(B){return this.clone().idivn(B)},s.prototype.egcd=function(B){r(B.negative===0),r(!B.isZero());var E=this,M=B.clone();E.negative!==0?E=E.umod(B):E=E.clone();for(var D=new s(1),T=new s(0),V=new s(0),G=new s(1),P=0;E.isEven()&&M.isEven();)E.iushrn(1),M.iushrn(1),++P;for(var U=M.clone(),H=E.clone();!E.isZero();){for(var oe=0,k=1;!(E.words[0]&k)&&oe<26;++oe,k<<=1);if(oe>0)for(E.iushrn(oe);oe-- >0;)(D.isOdd()||T.isOdd())&&(D.iadd(U),T.isub(H)),D.iushrn(1),T.iushrn(1);for(var K=0,ne=1;!(M.words[0]&ne)&&K<26;++K,ne<<=1);if(K>0)for(M.iushrn(K);K-- >0;)(V.isOdd()||G.isOdd())&&(V.iadd(U),G.isub(H)),V.iushrn(1),G.iushrn(1);E.cmp(M)>=0?(E.isub(M),D.isub(V),T.isub(G)):(M.isub(E),V.isub(D),G.isub(T))}return{a:V,b:G,gcd:M.iushln(P)}},s.prototype._invmp=function(B){r(B.negative===0),r(!B.isZero());var E=this,M=B.clone();E.negative!==0?E=E.umod(B):E=E.clone();for(var D=new s(1),T=new s(0),V=M.clone();E.cmpn(1)>0&&M.cmpn(1)>0;){for(var G=0,P=1;!(E.words[0]&P)&&G<26;++G,P<<=1);if(G>0)for(E.iushrn(G);G-- >0;)D.isOdd()&&D.iadd(V),D.iushrn(1);for(var U=0,H=1;!(M.words[0]&H)&&U<26;++U,H<<=1);if(U>0)for(M.iushrn(U);U-- >0;)T.isOdd()&&T.iadd(V),T.iushrn(1);E.cmp(M)>=0?(E.isub(M),D.isub(T)):(M.isub(E),T.isub(D))}var oe;return E.cmpn(1)===0?oe=D:oe=T,oe.cmpn(0)<0&&oe.iadd(B),oe},s.prototype.gcd=function(B){if(this.isZero())return B.abs();if(B.isZero())return this.abs();var E=this.clone(),M=B.clone();E.negative=0,M.negative=0;for(var D=0;E.isEven()&&M.isEven();D++)E.iushrn(1),M.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;M.isEven();)M.iushrn(1);var T=E.cmp(M);if(T<0){var V=E;E=M,M=V}else if(T===0||M.cmpn(1)===0)break;E.isub(M)}while(!0);return M.iushln(D)},s.prototype.invm=function(B){return this.egcd(B).a.umod(B)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(B){return this.words[0]&B},s.prototype.bincn=function(B){r(typeof B=="number");var E=B%26,M=(B-E)/26,D=1<<E;if(this.length<=M)return this._expand(M+1),this.words[M]|=D,this;for(var T=D,V=M;T!==0&&V<this.length;V++){var G=this.words[V]|0;G+=T,T=G>>>26,G&=67108863,this.words[V]=G}return T!==0&&(this.words[V]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(B){var E=B<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var M;if(this.length>1)M=1;else{E&&(B=-B),r(B<=67108863,"Number is too big");var D=this.words[0]|0;M=D===B?0:D<B?-1:1}return this.negative!==0?-M|0:M},s.prototype.cmp=function(B){if(this.negative!==0&&B.negative===0)return-1;if(this.negative===0&&B.negative!==0)return 1;var E=this.ucmp(B);return this.negative!==0?-E|0:E},s.prototype.ucmp=function(B){if(this.length>B.length)return 1;if(this.length<B.length)return-1;for(var E=0,M=this.length-1;M>=0;M--){var D=this.words[M]|0,T=B.words[M]|0;if(D!==T){D<T?E=-1:D>T&&(E=1);break}}return E},s.prototype.gtn=function(B){return this.cmpn(B)===1},s.prototype.gt=function(B){return this.cmp(B)===1},s.prototype.gten=function(B){return this.cmpn(B)>=0},s.prototype.gte=function(B){return this.cmp(B)>=0},s.prototype.ltn=function(B){return this.cmpn(B)===-1},s.prototype.lt=function(B){return this.cmp(B)===-1},s.prototype.lten=function(B){return this.cmpn(B)<=0},s.prototype.lte=function(B){return this.cmp(B)<=0},s.prototype.eqn=function(B){return this.cmpn(B)===0},s.prototype.eq=function(B){return this.cmp(B)===0},s.red=function(B){return new Z(B)},s.prototype.toRed=function(B){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),B.convertTo(this)._forceRed(B)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(B){return this.red=B,this},s.prototype.forceRed=function(B){return r(!this.red,"Already a number in reduction context"),this._forceRed(B)},s.prototype.redAdd=function(B){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,B)},s.prototype.redIAdd=function(B){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,B)},s.prototype.redSub=function(B){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,B)},s.prototype.redISub=function(B){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,B)},s.prototype.redShl=function(B){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,B)},s.prototype.redMul=function(B){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.mul(this,B)},s.prototype.redIMul=function(B){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,B),this.red.imul(this,B)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(B){return r(this.red&&!B.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,B)};var C={k256:null,p224:null,p192:null,p25519:null};function b(Q,B){this.name=Q,this.p=new s(B,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}b.prototype._tmp=function(){var B=new s(null);return B.words=new Array(Math.ceil(this.n/13)),B},b.prototype.ireduce=function(B){var E=B,M;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),M=E.bitLength();while(M>this.n);var D=M<this.n?-1:E.ucmp(this.p);return D===0?(E.words[0]=0,E.length=1):D>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},b.prototype.split=function(B,E){B.iushrn(this.n,0,E)},b.prototype.imulK=function(B){return B.imul(this.k)};function F(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(F,b),F.prototype.split=function(B,E){for(var M=4194303,D=Math.min(B.length,9),T=0;T<D;T++)E.words[T]=B.words[T];if(E.length=D,B.length<=9){B.words[0]=0,B.length=1;return}var V=B.words[9];for(E.words[E.length++]=V&M,T=10;T<B.length;T++){var G=B.words[T]|0;B.words[T-10]=(G&M)<<4|V>>>22,V=G}V>>>=22,B.words[T-10]=V,V===0&&B.length>10?B.length-=10:B.length-=9},F.prototype.imulK=function(B){B.words[B.length]=0,B.words[B.length+1]=0,B.length+=2;for(var E=0,M=0;M<B.length;M++){var D=B.words[M]|0;E+=D*977,B.words[M]=E&67108863,E=D*64+(E/67108864|0)}return B.words[B.length-1]===0&&(B.length--,B.words[B.length-1]===0&&B.length--),B};function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(x,b);function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(S,b);function R(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(R,b),R.prototype.imulK=function(B){for(var E=0,M=0;M<B.length;M++){var D=(B.words[M]|0)*19+E,T=D&67108863;D>>>=26,B.words[M]=T,E=D}return E!==0&&(B.words[B.length++]=E),B},s._prime=function(B){if(C[B])return C[B];var E;if(B==="k256")E=new F;else if(B==="p224")E=new x;else if(B==="p192")E=new S;else if(B==="p25519")E=new R;else throw new Error("Unknown prime "+B);return C[B]=E,E};function Z(Q){if(typeof Q=="string"){var B=s._prime(Q);this.m=B.p,this.prime=B}else r(Q.gtn(1),"modulus must be greater than 1"),this.m=Q,this.prime=null}Z.prototype._verify1=function(B){r(B.negative===0,"red works only with positives"),r(B.red,"red works only with red numbers")},Z.prototype._verify2=function(B,E){r((B.negative|E.negative)===0,"red works only with positives"),r(B.red&&B.red===E.red,"red works only with red numbers")},Z.prototype.imod=function(B){return this.prime?this.prime.ireduce(B)._forceRed(this):(c(B,B.umod(this.m)._forceRed(this)),B)},Z.prototype.neg=function(B){return B.isZero()?B.clone():this.m.sub(B)._forceRed(this)},Z.prototype.add=function(B,E){this._verify2(B,E);var M=B.add(E);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},Z.prototype.iadd=function(B,E){this._verify2(B,E);var M=B.iadd(E);return M.cmp(this.m)>=0&&M.isub(this.m),M},Z.prototype.sub=function(B,E){this._verify2(B,E);var M=B.sub(E);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},Z.prototype.isub=function(B,E){this._verify2(B,E);var M=B.isub(E);return M.cmpn(0)<0&&M.iadd(this.m),M},Z.prototype.shl=function(B,E){return this._verify1(B),this.imod(B.ushln(E))},Z.prototype.imul=function(B,E){return this._verify2(B,E),this.imod(B.imul(E))},Z.prototype.mul=function(B,E){return this._verify2(B,E),this.imod(B.mul(E))},Z.prototype.isqr=function(B){return this.imul(B,B.clone())},Z.prototype.sqr=function(B){return this.mul(B,B)},Z.prototype.sqrt=function(B){if(B.isZero())return B.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var M=this.m.add(new s(1)).iushrn(2);return this.pow(B,M)}for(var D=this.m.subn(1),T=0;!D.isZero()&&D.andln(1)===0;)T++,D.iushrn(1);r(!D.isZero());var V=new s(1).toRed(this),G=V.redNeg(),P=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new s(2*U*U).toRed(this);this.pow(U,P).cmp(G)!==0;)U.redIAdd(G);for(var H=this.pow(U,D),oe=this.pow(B,D.addn(1).iushrn(1)),k=this.pow(B,D),K=T;k.cmp(V)!==0;){for(var ne=k,ie=0;ne.cmp(V)!==0;ie++)ne=ne.redSqr();r(ie<K);var ue=this.pow(H,new s(1).iushln(K-ie-1));oe=oe.redMul(ue),H=ue.redSqr(),k=k.redMul(H),K=ie}return oe},Z.prototype.invm=function(B){var E=B._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},Z.prototype.pow=function(B,E){if(E.isZero())return new s(1).toRed(this);if(E.cmpn(1)===0)return B.clone();var M=4,D=new Array(1<<M);D[0]=new s(1).toRed(this),D[1]=B;for(var T=2;T<D.length;T++)D[T]=this.mul(D[T-1],B);var V=D[0],G=0,P=0,U=E.bitLength()%26;for(U===0&&(U=26),T=E.length-1;T>=0;T--){for(var H=E.words[T],oe=U-1;oe>=0;oe--){var k=H>>oe&1;if(V!==D[0]&&(V=this.sqr(V)),k===0&&G===0){P=0;continue}G<<=1,G|=k,P++,!(P!==M&&(T!==0||oe!==0))&&(V=this.mul(V,D[G]),P=0,G=0)}U=26}return V},Z.prototype.convertTo=function(B){var E=B.umod(this.m);return E===B?E.clone():E},Z.prototype.convertFrom=function(B){var E=B.clone();return E.red=null,E},s.mont=function(B){return new Y(B)};function Y(Q){Z.call(this,Q),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Y,Z),Y.prototype.convertTo=function(B){return this.imod(B.ushln(this.shift))},Y.prototype.convertFrom=function(B){var E=this.imod(B.mul(this.rinv));return E.red=null,E},Y.prototype.imul=function(B,E){if(B.isZero()||E.isZero())return B.words[0]=0,B.length=1,B;var M=B.imul(E),D=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(D).iushrn(this.shift),V=T;return T.cmp(this.m)>=0?V=T.isub(this.m):T.cmpn(0)<0&&(V=T.iadd(this.m)),V._forceRed(this)},Y.prototype.mul=function(B,E){if(B.isZero()||E.isZero())return new s(0)._forceRed(this);var M=B.mul(E),D=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=M.isub(D).iushrn(this.shift),V=T;return T.cmp(this.m)>=0?V=T.isub(this.m):T.cmpn(0)<0&&(V=T.iadd(this.m)),V._forceRed(this)},Y.prototype.invm=function(B){var E=this.imod(B._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(n,jf)})(OU);var Mz=OU.exports;const pt=Cu(Mz),Tz="logger/5.7.0";let sR=!1,oR=!1;const My={debug:1,default:2,info:2,warning:3,error:4,off:5};let aR=My.default,Wb=null;function Nz(){try{const n=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{n.push(e)}}),n.length)throw new Error("missing "+n.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(n){return n.message}return null}const lR=Nz();var Z1;(function(n){n.DEBUG="DEBUG",n.INFO="INFO",n.WARNING="WARNING",n.ERROR="ERROR",n.OFF="OFF"})(Z1||(Z1={}));var Io;(function(n){n.UNKNOWN_ERROR="UNKNOWN_ERROR",n.NOT_IMPLEMENTED="NOT_IMPLEMENTED",n.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",n.NETWORK_ERROR="NETWORK_ERROR",n.SERVER_ERROR="SERVER_ERROR",n.TIMEOUT="TIMEOUT",n.BUFFER_OVERRUN="BUFFER_OVERRUN",n.NUMERIC_FAULT="NUMERIC_FAULT",n.MISSING_NEW="MISSING_NEW",n.INVALID_ARGUMENT="INVALID_ARGUMENT",n.MISSING_ARGUMENT="MISSING_ARGUMENT",n.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",n.CALL_EXCEPTION="CALL_EXCEPTION",n.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",n.NONCE_EXPIRED="NONCE_EXPIRED",n.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",n.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",n.TRANSACTION_REPLACED="TRANSACTION_REPLACED",n.ACTION_REJECTED="ACTION_REJECTED"})(Io||(Io={}));const AR="0123456789abcdef";let Ae=class ar{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();My[r]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(aR>My[r])&&console.log.apply(console,t)}debug(...e){this._log(ar.levels.DEBUG,e)}info(...e){this._log(ar.levels.INFO,e)}warn(...e){this._log(ar.levels.WARNING,e)}makeError(e,t,r){if(oR)return this.makeError("censored error",t,{});t||(t=ar.errors.UNKNOWN_ERROR),r||(r={});const i=[];Object.keys(r).forEach(l=>{const A=r[l];try{if(A instanceof Uint8Array){let c="";for(let u=0;u<A.length;u++)c+=AR[A[u]>>4],c+=AR[A[u]&15];i.push(l+"=Uint8Array(0x"+c+")")}else i.push(l+"="+JSON.stringify(A))}catch{i.push(l+"="+JSON.stringify(r[l].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);const s=e;let o="";switch(t){case Io.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Io.CALL_EXCEPTION:case Io.INSUFFICIENT_FUNDS:case Io.MISSING_NEW:case Io.NONCE_EXPIRED:case Io.REPLACEMENT_UNDERPRICED:case Io.TRANSACTION_REPLACED:case Io.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=t,Object.keys(r).forEach(function(l){a[l]=r[l]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,ar.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){lR&&this.throwError("platform missing String.prototype.normalize",ar.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:lR})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ar.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ar.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r?r=": "+r:r="",e<t&&this.throwError("missing argument"+r,ar.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,ar.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ar.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ar.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ar.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Wb||(Wb=new ar(Tz)),Wb}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ar.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),sR){if(!e)return;this.globalLogger().throwError("error censorship permanent",ar.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}oR=!!e,sR=!!t}static setLogLevel(e){const t=My[e.toLowerCase()];if(t==null){ar.globalLogger().warn("invalid log level - "+e);return}aR=t}static from(e){return new ar(e)}};Ae.errors=Io;Ae.levels=Z1;const Dz="bytes/5.7.0",Mn=new Ae(Dz);function U3(n){return!!n.toHexString}function Fd(n){return n.slice||(n.slice=function(){const e=Array.prototype.slice.call(arguments);return Fd(new Uint8Array(Array.prototype.slice.apply(n,e)))}),n}function GU(n){return bt(n)&&!(n.length%2)||dC(n)}function cR(n){return typeof n=="number"&&n==n&&n%1===0}function dC(n){if(n==null)return!1;if(n.constructor===Uint8Array)return!0;if(typeof n=="string"||!cR(n.length)||n.length<0)return!1;for(let e=0;e<n.length;e++){const t=n[e];if(!cR(t)||t<0||t>=256)return!1}return!0}function lt(n,e){if(e||(e={}),typeof n=="number"){Mn.checkSafeUint53(n,"invalid arrayify value");const t=[];for(;n;)t.unshift(n&255),n=parseInt(String(n/256));return t.length===0&&t.push(0),Fd(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),U3(n)&&(n=n.toHexString()),bt(n)){let t=n.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":Mn.throwArgumentError("hex data is odd-length","value",n));const r=[];for(let i=0;i<t.length;i+=2)r.push(parseInt(t.substring(i,i+2),16));return Fd(new Uint8Array(r))}return dC(n)?Fd(new Uint8Array(n)):Mn.throwArgumentError("invalid arrayify value","value",n)}function ns(n){const e=n.map(i=>lt(i)),t=e.reduce((i,s)=>i+s.length,0),r=new Uint8Array(t);return e.reduce((i,s)=>(r.set(s,i),i+s.length),0),Fd(r)}function Yd(n){let e=lt(n);if(e.length===0)return e;let t=0;for(;t<e.length&&e[t]===0;)t++;return t&&(e=e.slice(t)),e}function kz(n,e){n=lt(n),n.length>e&&Mn.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(n,e-n.length),Fd(t)}function bt(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}const Ob="0123456789abcdef";function je(n,e){if(e||(e={}),typeof n=="number"){Mn.checkSafeUint53(n,"invalid hexlify value");let t="";for(;n;)t=Ob[n&15]+t,n=Math.floor(n/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof n=="bigint")return n=n.toString(16),n.length%2?"0x0"+n:"0x"+n;if(e.allowMissingPrefix&&typeof n=="string"&&n.substring(0,2)!=="0x"&&(n="0x"+n),U3(n))return n.toHexString();if(bt(n))return n.length%2&&(e.hexPad==="left"?n="0x0"+n.substring(2):e.hexPad==="right"?n+="0":Mn.throwArgumentError("hex data is odd-length","value",n)),n.toLowerCase();if(dC(n)){let t="0x";for(let r=0;r<n.length;r++){let i=n[r];t+=Ob[(i&240)>>4]+Ob[i&15]}return t}return Mn.throwArgumentError("invalid hexlify value","value",n)}function ou(n){if(typeof n!="string")n=je(n);else if(!bt(n)||n.length%2)return null;return(n.length-2)/2}function Or(n,e,t){return typeof n!="string"?n=je(n):(!bt(n)||n.length%2)&&Mn.throwArgumentError("invalid hexData","value",n),e=2+2*e,t!=null?"0x"+n.substring(e,2+2*t):"0x"+n.substring(e)}function xi(n){let e="0x";return n.forEach(t=>{e+=je(t).substring(2)}),e}function hC(n){const e=Vz(je(n,{hexPad:"left"}));return e==="0x"?"0x0":e}function Vz(n){typeof n!="string"&&(n=je(n)),bt(n)||Mn.throwArgumentError("invalid hex string","value",n),n=n.substring(2);let e=0;for(;e<n.length&&n[e]==="0";)e++;return"0x"+n.substring(e)}function Ln(n,e){for(typeof n!="string"?n=je(n):bt(n)||Mn.throwArgumentError("invalid hex string","value",n),n.length>2*e+2&&Mn.throwArgumentError("value out of range","value",arguments[1]);n.length<2*e+2;)n="0x0"+n.substring(2);return n}function pC(n){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(GU(n)){let t=lt(n);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=je(t.slice(0,32)),e.s=je(t.slice(32,64))):t.length===65?(e.r=je(t.slice(0,32)),e.s=je(t.slice(32,64)),e.v=t[64]):Mn.throwArgumentError("invalid signature string","signature",n),e.v<27&&(e.v===0||e.v===1?e.v+=27:Mn.throwArgumentError("signature invalid v byte","signature",n)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=je(t.slice(32,64))}else{if(e.r=n.r,e.s=n.s,e.v=n.v,e.recoveryParam=n.recoveryParam,e._vs=n._vs,e._vs!=null){const i=kz(lt(e._vs),32);e._vs=je(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Mn.throwArgumentError("signature recoveryParam mismatch _vs","signature",n),i[0]&=127;const o=je(i);e.s==null?e.s=o:e.s!==o&&Mn.throwArgumentError("signature v mismatch _vs","signature",n)}if(e.recoveryParam==null)e.v==null?Mn.throwArgumentError("signature missing v and recoveryParam","signature",n):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Mn.throwArgumentError("signature recoveryParam mismatch v","signature",n)}e.r==null||!bt(e.r)?Mn.throwArgumentError("signature missing or invalid r","signature",n):e.r=Ln(e.r,32),e.s==null||!bt(e.s)?Mn.throwArgumentError("signature missing or invalid s","signature",n):e.s=Ln(e.s,32);const t=lt(e.s);t[0]>=128&&Mn.throwArgumentError("signature s out of range","signature",n),e.recoveryParam&&(t[0]|=128);const r=je(t);e._vs&&(bt(e._vs)||Mn.throwArgumentError("signature invalid _vs","signature",n),e._vs=Ln(e._vs,32)),e._vs==null?e._vs=r:e._vs!==r&&Mn.throwArgumentError("signature _vs mismatch v and s","signature",n)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const Lz="bignumber/5.7.0";var xB=pt.BN;const il=new Ae(Lz),Gb={},uR=9007199254740991;let fR=!1;class ke{constructor(e,t){e!==Gb&&il.throwError("cannot call constructor directly; use BigNumber.from",Ae.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return vi(Ft(this).fromTwos(e))}toTwos(e){return vi(Ft(this).toTwos(e))}abs(){return this._hex[0]==="-"?ke.from(this._hex.substring(1)):this}add(e){return vi(Ft(this).add(Ft(e)))}sub(e){return vi(Ft(this).sub(Ft(e)))}div(e){return ke.from(e).isZero()&&bs("division-by-zero","div"),vi(Ft(this).div(Ft(e)))}mul(e){return vi(Ft(this).mul(Ft(e)))}mod(e){const t=Ft(e);return t.isNeg()&&bs("division-by-zero","mod"),vi(Ft(this).umod(t))}pow(e){const t=Ft(e);return t.isNeg()&&bs("negative-power","pow"),vi(Ft(this).pow(t))}and(e){const t=Ft(e);return(this.isNegative()||t.isNeg())&&bs("unbound-bitwise-result","and"),vi(Ft(this).and(t))}or(e){const t=Ft(e);return(this.isNegative()||t.isNeg())&&bs("unbound-bitwise-result","or"),vi(Ft(this).or(t))}xor(e){const t=Ft(e);return(this.isNegative()||t.isNeg())&&bs("unbound-bitwise-result","xor"),vi(Ft(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&bs("negative-width","mask"),vi(Ft(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&bs("negative-width","shl"),vi(Ft(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&bs("negative-width","shr"),vi(Ft(this).shrn(e))}eq(e){return Ft(this).eq(Ft(e))}lt(e){return Ft(this).lt(Ft(e))}lte(e){return Ft(this).lte(Ft(e))}gt(e){return Ft(this).gt(Ft(e))}gte(e){return Ft(this).gte(Ft(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ft(this).isZero()}toNumber(){try{return Ft(this).toNumber()}catch{bs("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return il.throwError("this platform does not support BigInt",Ae.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?fR||(fR=!0,il.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?il.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ae.errors.UNEXPECTED_ARGUMENT,{}):il.throwError("BigNumber.toString does not accept parameters",Ae.errors.UNEXPECTED_ARGUMENT,{})),Ft(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ke)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new ke(Gb,zg(e)):e.match(/^-?[0-9]+$/)?new ke(Gb,zg(new xB(e))):il.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&bs("underflow","BigNumber.from",e),(e>=uR||e<=-uR)&&bs("overflow","BigNumber.from",e),ke.from(String(e));const t=e;if(typeof t=="bigint")return ke.from(t.toString());if(dC(t))return ke.from(je(t));if(t)if(t.toHexString){const r=t.toHexString();if(typeof r=="string")return ke.from(r)}else{let r=t._hex;if(r==null&&t.type==="BigNumber"&&(r=t.hex),typeof r=="string"&&(bt(r)||r[0]==="-"&&bt(r.substring(1))))return ke.from(r)}return il.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function zg(n){if(typeof n!="string")return zg(n.toString(16));if(n[0]==="-")return n=n.substring(1),n[0]==="-"&&il.throwArgumentError("invalid hex","value",n),n=zg(n),n==="0x00"?n:"-"+n;if(n.substring(0,2)!=="0x"&&(n="0x"+n),n==="0x")return"0x00";for(n.length%2&&(n="0x0"+n.substring(2));n.length>4&&n.substring(0,4)==="0x00";)n="0x"+n.substring(4);return n}function vi(n){return ke.from(zg(n))}function Ft(n){const e=ke.from(n).toHexString();return e[0]==="-"?new xB("-"+e.substring(3),16):new xB(e.substring(2),16)}function bs(n,e,t){const r={fault:n,operation:e};return t!=null&&(r.value=t),il.throwError(n,Ae.errors.NUMERIC_FAULT,r)}function Pz(n){return new xB(n,36).toString(16)}const Wz="properties/5.7.0";var Oz=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const IB=new Ae(Wz);function Ie(n,e,t){Object.defineProperty(n,e,{enumerable:!0,value:t,writable:!1})}function rs(n,e){for(let t=0;t<32;t++){if(n[e])return n[e];if(!n.prototype||typeof n.prototype!="object")break;n=Object.getPrototypeOf(n.prototype).constructor}return null}function Kn(n){return Oz(this,void 0,void 0,function*(){const e=Object.keys(n).map(r=>{const i=n[r];return Promise.resolve(i).then(s=>({key:r,value:s}))});return(yield Promise.all(e)).reduce((r,i)=>(r[i.key]=i.value,r),{})})}function Gz(n,e){(!n||typeof n!="object")&&IB.throwArgumentError("invalid object","object",n),Object.keys(n).forEach(t=>{e[t]||IB.throwArgumentError("invalid object key - "+t,"transaction:"+t,n)})}function xn(n){const e={};for(const t in n)e[t]=n[t];return e}const Zz={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function S3(n){if(n==null||Zz[typeof n])return!0;if(Array.isArray(n)||typeof n=="object"){if(!Object.isFrozen(n))return!1;const e=Object.keys(n);for(let t=0;t<e.length;t++){let r=null;try{r=n[e[t]]}catch{continue}if(!S3(r))return!1}return!0}return IB.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function Jz(n){if(S3(n))return n;if(Array.isArray(n))return Object.freeze(n.map(e=>as(e)));if(typeof n=="object"){const e={};for(const t in n){const r=n[t];r!==void 0&&Ie(e,t,as(r))}return e}return IB.throwArgumentError(`Cannot deepCopy ${typeof n}`,"object",n)}function as(n){return Jz(n)}class Km{constructor(e){for(const t in e)this[t]=as(e[t])}}const Hz="abstract-provider/5.7.0";var zz=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Yz=new Ae(Hz);class Xz extends Km{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class jm{constructor(){Yz.checkAbstract(new.target,jm),Ie(this,"_isProvider",!0)}getFeeData(){return zz(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Kn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let r=null,i=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=ke.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const Kz="networks/5.7.1",dR=new Ae(Kz);function jz(n){return n&&typeof n.renetwork=="function"}function cl(n){const e=function(t,r){r==null&&(r={});const i=[];if(t.InfuraProvider&&r.infura!=="-")try{i.push(new t.InfuraProvider(n,r.infura))}catch{}if(t.EtherscanProvider&&r.etherscan!=="-")try{i.push(new t.EtherscanProvider(n,r.etherscan))}catch{}if(t.AlchemyProvider&&r.alchemy!=="-")try{i.push(new t.AlchemyProvider(n,r.alchemy))}catch{}if(t.PocketProvider&&r.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new t.PocketProvider(n,r.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(t.CloudflareProvider&&r.cloudflare!=="-")try{i.push(new t.CloudflareProvider(n))}catch{}if(t.AnkrProvider&&r.ankr!=="-")try{const s=["ropsten"],o=new t.AnkrProvider(n,r.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(t.FallbackProvider){let s=1;return r.quorum!=null?s=r.quorum:n==="homestead"&&(s=2),new t.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(t){return cl(t)},e}function FB(n,e){const t=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(n,e):null};return t.renetwork=function(r){return FB(n,r)},t}const hR={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:cl("homestead")},pR={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:cl("ropsten")},gR={chainId:63,name:"classicMordor",_defaultProvider:FB("https://www.ethercluster.com/mordor","classicMordor")},R0={unspecified:{chainId:0,name:"unspecified"},homestead:hR,mainnet:hR,morden:{chainId:2,name:"morden"},ropsten:pR,testnet:pR,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:cl("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:cl("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:cl("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:cl("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:FB("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:gR,classicTestnet:gR,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:FB("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:cl("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:cl("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function _3(n){if(n==null)return null;if(typeof n=="number"){for(const r in R0){const i=R0[r];if(i.chainId===n)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:n,name:"unknown"}}if(typeof n=="string"){const r=R0[n];return r==null?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}const e=R0[n.name];if(!e)return typeof n.chainId!="number"&&dR.throwArgumentError("invalid network chainId","network",n),n;n.chainId!==0&&n.chainId!==e.chainId&&dR.throwArgumentError("network chainId mismatch","network",n);let t=n._defaultProvider||null;return t==null&&e._defaultProvider&&(jz(e._defaultProvider)?t=e._defaultProvider.renetwork(n):t=e._defaultProvider),{name:n.name,chainId:e.chainId,ensAddress:n.ensAddress||e.ensAddress||null,_defaultProvider:t}}function Q3(n){n=atob(n);const e=[];for(let t=0;t<n.length;t++)e.push(n.charCodeAt(t));return lt(e)}function R3(n){n=lt(n);let e="";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return btoa(e)}class M3{constructor(e){Ie(this,"alphabet",e),Ie(this,"base",e.length),Ie(this,"_alphabetMap",{}),Ie(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=lt(e);if(t.length===0)return"";let r=[0];for(let s=0;s<t.length;++s){let o=t[s];for(let a=0;a<r.length;++a)o+=r[a]<<8,r[a]=o%this.base,o=o/this.base|0;for(;o>0;)r.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;t[s]===0&&s<t.length-1;++s)i+=this._leader;for(let s=r.length-1;s>=0;--s)i+=this.alphabet[r[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let t=[];if(e.length===0)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<t.length;++o)s+=t[o]*this.base,t[o]=s&255,s>>=8;for(;s>0;)t.push(s&255),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return lt(new Uint8Array(t.reverse()))}}new M3("abcdefghijklmnopqrstuvwxyz234567");const J1=new M3("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),$z="0x0000000000000000000000000000000000000000",qz=ke.from(-1),T3=ke.from(0),e9=ke.from(1),t9=ke.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n9="0x0000000000000000000000000000000000000000000000000000000000000000";var N3={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(n){(function(){var e="input is invalid type",t="finalize already called",r=typeof window=="object",i=r?window:{};i.JS_SHA3_NO_WINDOW&&(r=!1);var s=!r&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=jf:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&n.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],f=[1,256,65536,16777216],d=[6,1536,393216,100663296],h=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(k){return typeof k=="object"&&k.buffer&&k.buffer.constructor===ArrayBuffer});for(var w=function(k,K,ne){return function(ie){return new U(k,K,k).update(ie)[ne]()}},C=function(k,K,ne){return function(ie,ue){return new U(k,K,ue).update(ie)[ne]()}},b=function(k,K,ne){return function(ie,ue,j,se){return B["cshake"+k].update(ie,ue,j,se)[ne]()}},F=function(k,K,ne){return function(ie,ue,j,se){return B["kmac"+k].update(ie,ue,j,se)[ne]()}},x=function(k,K,ne,ie){for(var ue=0;ue<v.length;++ue){var j=v[ue];k[j]=K(ne,ie,j)}return k},S=function(k,K){var ne=w(k,K,"hex");return ne.create=function(){return new U(k,K,k)},ne.update=function(ie){return ne.create().update(ie)},x(ne,w,k,K)},R=function(k,K){var ne=C(k,K,"hex");return ne.create=function(ie){return new U(k,K,ie)},ne.update=function(ie,ue){return ne.create(ue).update(ie)},x(ne,C,k,K)},Z=function(k,K){var ne=y[k],ie=b(k,K,"hex");return ie.create=function(ue,j,se){return!j&&!se?B["shake"+k].create(ue):new U(k,K,ue).bytepad([j,se],ne)},ie.update=function(ue,j,se,ce){return ie.create(j,se,ce).update(ue)},x(ie,b,k,K)},Y=function(k,K){var ne=y[k],ie=F(k,K,"hex");return ie.create=function(ue,j,se){return new H(k,K,j).bytepad(["KMAC",se],ne).bytepad([ue],ne)},ie.update=function(ue,j,se,ce){return ie.create(ue,se,ce).update(j)},x(ie,F,k,K)},Q=[{name:"keccak",padding:f,bits:m,createMethod:S},{name:"sha3",padding:d,bits:m,createMethod:S},{name:"shake",padding:c,bits:g,createMethod:R},{name:"cshake",padding:u,bits:g,createMethod:Z},{name:"kmac",padding:u,bits:g,createMethod:Y}],B={},E=[],M=0;M<Q.length;++M)for(var D=Q[M],T=D.bits,V=0;V<T.length;++V){var G=D.name+"_"+T[V];if(E.push(G),B[G]=D.createMethod(T[V],D.padding),D.name!=="sha3"){var P=D.name+T[V];E.push(P),B[P]=B[G]}}function U(k,K,ne){this.blocks=[],this.s=[],this.padding=K,this.outputBits=ne,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(k<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ne>>5,this.extraBytes=(ne&31)>>3;for(var ie=0;ie<50;++ie)this.s[ie]=0}U.prototype.update=function(k){if(this.finalized)throw new Error(t);var K,ne=typeof k;if(ne!=="string"){if(ne==="object"){if(k===null)throw new Error(e);if(l&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!l||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);K=!0}for(var ie=this.blocks,ue=this.byteCount,j=k.length,se=this.blockCount,ce=0,Be=this.s,ge,Fe;ce<j;){if(this.reset)for(this.reset=!1,ie[0]=this.block,ge=1;ge<se+1;++ge)ie[ge]=0;if(K)for(ge=this.start;ce<j&&ge<ue;++ce)ie[ge>>2]|=k[ce]<<h[ge++&3];else for(ge=this.start;ce<j&&ge<ue;++ce)Fe=k.charCodeAt(ce),Fe<128?ie[ge>>2]|=Fe<<h[ge++&3]:Fe<2048?(ie[ge>>2]|=(192|Fe>>6)<<h[ge++&3],ie[ge>>2]|=(128|Fe&63)<<h[ge++&3]):Fe<55296||Fe>=57344?(ie[ge>>2]|=(224|Fe>>12)<<h[ge++&3],ie[ge>>2]|=(128|Fe>>6&63)<<h[ge++&3],ie[ge>>2]|=(128|Fe&63)<<h[ge++&3]):(Fe=65536+((Fe&1023)<<10|k.charCodeAt(++ce)&1023),ie[ge>>2]|=(240|Fe>>18)<<h[ge++&3],ie[ge>>2]|=(128|Fe>>12&63)<<h[ge++&3],ie[ge>>2]|=(128|Fe>>6&63)<<h[ge++&3],ie[ge>>2]|=(128|Fe&63)<<h[ge++&3]);if(this.lastByteIndex=ge,ge>=ue){for(this.start=ge-ue,this.block=ie[se],ge=0;ge<se;++ge)Be[ge]^=ie[ge];oe(Be),this.reset=!0}else this.start=ge}return this},U.prototype.encode=function(k,K){var ne=k&255,ie=1,ue=[ne];for(k=k>>8,ne=k&255;ne>0;)ue.unshift(ne),k=k>>8,ne=k&255,++ie;return K?ue.push(ie):ue.unshift(ie),this.update(ue),ue.length},U.prototype.encodeString=function(k){var K,ne=typeof k;if(ne!=="string"){if(ne==="object"){if(k===null)throw new Error(e);if(l&&k.constructor===ArrayBuffer)k=new Uint8Array(k);else if(!Array.isArray(k)&&(!l||!ArrayBuffer.isView(k)))throw new Error(e)}else throw new Error(e);K=!0}var ie=0,ue=k.length;if(K)ie=ue;else for(var j=0;j<k.length;++j){var se=k.charCodeAt(j);se<128?ie+=1:se<2048?ie+=2:se<55296||se>=57344?ie+=3:(se=65536+((se&1023)<<10|k.charCodeAt(++j)&1023),ie+=4)}return ie+=this.encode(ie*8),this.update(k),ie},U.prototype.bytepad=function(k,K){for(var ne=this.encode(K),ie=0;ie<k.length;++ie)ne+=this.encodeString(k[ie]);var ue=K-ne%K,j=[];return j.length=ue,this.update(j),this},U.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var k=this.blocks,K=this.lastByteIndex,ne=this.blockCount,ie=this.s;if(k[K>>2]|=this.padding[K&3],this.lastByteIndex===this.byteCount)for(k[0]=k[ne],K=1;K<ne+1;++K)k[K]=0;for(k[ne-1]|=2147483648,K=0;K<ne;++K)ie[K]^=k[K];oe(ie)}},U.prototype.toString=U.prototype.hex=function(){this.finalize();for(var k=this.blockCount,K=this.s,ne=this.outputBlocks,ie=this.extraBytes,ue=0,j=0,se="",ce;j<ne;){for(ue=0;ue<k&&j<ne;++ue,++j)ce=K[ue],se+=A[ce>>4&15]+A[ce&15]+A[ce>>12&15]+A[ce>>8&15]+A[ce>>20&15]+A[ce>>16&15]+A[ce>>28&15]+A[ce>>24&15];j%k===0&&(oe(K),ue=0)}return ie&&(ce=K[ue],se+=A[ce>>4&15]+A[ce&15],ie>1&&(se+=A[ce>>12&15]+A[ce>>8&15]),ie>2&&(se+=A[ce>>20&15]+A[ce>>16&15])),se},U.prototype.arrayBuffer=function(){this.finalize();var k=this.blockCount,K=this.s,ne=this.outputBlocks,ie=this.extraBytes,ue=0,j=0,se=this.outputBits>>3,ce;ie?ce=new ArrayBuffer(ne+1<<2):ce=new ArrayBuffer(se);for(var Be=new Uint32Array(ce);j<ne;){for(ue=0;ue<k&&j<ne;++ue,++j)Be[j]=K[ue];j%k===0&&oe(K)}return ie&&(Be[ue]=K[ue],ce=ce.slice(0,se)),ce},U.prototype.buffer=U.prototype.arrayBuffer,U.prototype.digest=U.prototype.array=function(){this.finalize();for(var k=this.blockCount,K=this.s,ne=this.outputBlocks,ie=this.extraBytes,ue=0,j=0,se=[],ce,Be;j<ne;){for(ue=0;ue<k&&j<ne;++ue,++j)ce=j<<2,Be=K[ue],se[ce]=Be&255,se[ce+1]=Be>>8&255,se[ce+2]=Be>>16&255,se[ce+3]=Be>>24&255;j%k===0&&oe(K)}return ie&&(ce=j<<2,Be=K[ue],se[ce]=Be&255,ie>1&&(se[ce+1]=Be>>8&255),ie>2&&(se[ce+2]=Be>>16&255)),se};function H(k,K,ne){U.call(this,k,K,ne)}H.prototype=new U,H.prototype.finalize=function(){return this.encode(this.outputBits,!0),U.prototype.finalize.call(this)};var oe=function(k){var K,ne,ie,ue,j,se,ce,Be,ge,Fe,nt,We,Te,Qe,Ge,qe,O,J,ae,de,ve,L,_,I,N,$,ee,te,we,Ce,Ee,Ve,_e,re,ye,be,Ue,Je,$e,ct,ln,xt,it,ir,mt,qt,co,zt,en,q,le,he,fe,pe,De,ot,Ye,He,vt,ft,gt,Jt,kr;for(ie=0;ie<48;ie+=2)ue=k[0]^k[10]^k[20]^k[30]^k[40],j=k[1]^k[11]^k[21]^k[31]^k[41],se=k[2]^k[12]^k[22]^k[32]^k[42],ce=k[3]^k[13]^k[23]^k[33]^k[43],Be=k[4]^k[14]^k[24]^k[34]^k[44],ge=k[5]^k[15]^k[25]^k[35]^k[45],Fe=k[6]^k[16]^k[26]^k[36]^k[46],nt=k[7]^k[17]^k[27]^k[37]^k[47],We=k[8]^k[18]^k[28]^k[38]^k[48],Te=k[9]^k[19]^k[29]^k[39]^k[49],K=We^(se<<1|ce>>>31),ne=Te^(ce<<1|se>>>31),k[0]^=K,k[1]^=ne,k[10]^=K,k[11]^=ne,k[20]^=K,k[21]^=ne,k[30]^=K,k[31]^=ne,k[40]^=K,k[41]^=ne,K=ue^(Be<<1|ge>>>31),ne=j^(ge<<1|Be>>>31),k[2]^=K,k[3]^=ne,k[12]^=K,k[13]^=ne,k[22]^=K,k[23]^=ne,k[32]^=K,k[33]^=ne,k[42]^=K,k[43]^=ne,K=se^(Fe<<1|nt>>>31),ne=ce^(nt<<1|Fe>>>31),k[4]^=K,k[5]^=ne,k[14]^=K,k[15]^=ne,k[24]^=K,k[25]^=ne,k[34]^=K,k[35]^=ne,k[44]^=K,k[45]^=ne,K=Be^(We<<1|Te>>>31),ne=ge^(Te<<1|We>>>31),k[6]^=K,k[7]^=ne,k[16]^=K,k[17]^=ne,k[26]^=K,k[27]^=ne,k[36]^=K,k[37]^=ne,k[46]^=K,k[47]^=ne,K=Fe^(ue<<1|j>>>31),ne=nt^(j<<1|ue>>>31),k[8]^=K,k[9]^=ne,k[18]^=K,k[19]^=ne,k[28]^=K,k[29]^=ne,k[38]^=K,k[39]^=ne,k[48]^=K,k[49]^=ne,Qe=k[0],Ge=k[1],qt=k[11]<<4|k[10]>>>28,co=k[10]<<4|k[11]>>>28,te=k[20]<<3|k[21]>>>29,we=k[21]<<3|k[20]>>>29,ft=k[31]<<9|k[30]>>>23,gt=k[30]<<9|k[31]>>>23,xt=k[40]<<18|k[41]>>>14,it=k[41]<<18|k[40]>>>14,re=k[2]<<1|k[3]>>>31,ye=k[3]<<1|k[2]>>>31,qe=k[13]<<12|k[12]>>>20,O=k[12]<<12|k[13]>>>20,zt=k[22]<<10|k[23]>>>22,en=k[23]<<10|k[22]>>>22,Ce=k[33]<<13|k[32]>>>19,Ee=k[32]<<13|k[33]>>>19,Jt=k[42]<<2|k[43]>>>30,kr=k[43]<<2|k[42]>>>30,pe=k[5]<<30|k[4]>>>2,De=k[4]<<30|k[5]>>>2,be=k[14]<<6|k[15]>>>26,Ue=k[15]<<6|k[14]>>>26,J=k[25]<<11|k[24]>>>21,ae=k[24]<<11|k[25]>>>21,q=k[34]<<15|k[35]>>>17,le=k[35]<<15|k[34]>>>17,Ve=k[45]<<29|k[44]>>>3,_e=k[44]<<29|k[45]>>>3,I=k[6]<<28|k[7]>>>4,N=k[7]<<28|k[6]>>>4,ot=k[17]<<23|k[16]>>>9,Ye=k[16]<<23|k[17]>>>9,Je=k[26]<<25|k[27]>>>7,$e=k[27]<<25|k[26]>>>7,de=k[36]<<21|k[37]>>>11,ve=k[37]<<21|k[36]>>>11,he=k[47]<<24|k[46]>>>8,fe=k[46]<<24|k[47]>>>8,ir=k[8]<<27|k[9]>>>5,mt=k[9]<<27|k[8]>>>5,$=k[18]<<20|k[19]>>>12,ee=k[19]<<20|k[18]>>>12,He=k[29]<<7|k[28]>>>25,vt=k[28]<<7|k[29]>>>25,ct=k[38]<<8|k[39]>>>24,ln=k[39]<<8|k[38]>>>24,L=k[48]<<14|k[49]>>>18,_=k[49]<<14|k[48]>>>18,k[0]=Qe^~qe&J,k[1]=Ge^~O&ae,k[10]=I^~$&te,k[11]=N^~ee&we,k[20]=re^~be&Je,k[21]=ye^~Ue&$e,k[30]=ir^~qt&zt,k[31]=mt^~co&en,k[40]=pe^~ot&He,k[41]=De^~Ye&vt,k[2]=qe^~J&de,k[3]=O^~ae&ve,k[12]=$^~te&Ce,k[13]=ee^~we&Ee,k[22]=be^~Je&ct,k[23]=Ue^~$e&ln,k[32]=qt^~zt&q,k[33]=co^~en&le,k[42]=ot^~He&ft,k[43]=Ye^~vt&gt,k[4]=J^~de&L,k[5]=ae^~ve&_,k[14]=te^~Ce&Ve,k[15]=we^~Ee&_e,k[24]=Je^~ct&xt,k[25]=$e^~ln&it,k[34]=zt^~q&he,k[35]=en^~le&fe,k[44]=He^~ft&Jt,k[45]=vt^~gt&kr,k[6]=de^~L&Qe,k[7]=ve^~_&Ge,k[16]=Ce^~Ve&I,k[17]=Ee^~_e&N,k[26]=ct^~xt&re,k[27]=ln^~it&ye,k[36]=q^~he&ir,k[37]=le^~fe&mt,k[46]=ft^~Jt&pe,k[47]=gt^~kr&De,k[8]=L^~Qe&qe,k[9]=_^~Ge&O,k[18]=Ve^~I&$,k[19]=_e^~N&ee,k[28]=xt^~re&be,k[29]=it^~ye&Ue,k[38]=he^~ir&qt,k[39]=fe^~mt&co,k[48]=Jt^~pe&ot,k[49]=kr^~De&Ye,k[0]^=p[ie],k[1]^=p[ie+1]};if(a)n.exports=B;else for(M=0;M<E.length;++M)i[E[M]]=B[E[M]]})()})(N3);var r9=N3.exports;const i9=Cu(r9);function er(n){return"0x"+i9.keccak_256(lt(n))}const s9="strings/5.7.0",D3=new Ae(s9);var Yg;(function(n){n.current="",n.NFC="NFC",n.NFD="NFD",n.NFKC="NFKC",n.NFKD="NFKD"})(Yg||(Yg={}));var ji;(function(n){n.UNEXPECTED_CONTINUE="unexpected continuation byte",n.BAD_PREFIX="bad codepoint prefix",n.OVERRUN="string overrun",n.MISSING_CONTINUE="missing continuation byte",n.OUT_OF_RANGE="out of UTF-8 range",n.UTF16_SURROGATE="UTF-16 surrogate",n.OVERLONG="overlong representation"})(ji||(ji={}));function o9(n,e,t,r,i){return D3.throwArgumentError(`invalid codepoint at offset ${e}; ${n}`,"bytes",t)}function k3(n,e,t,r,i){if(n===ji.BAD_PREFIX||n===ji.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)s++;return s}return n===ji.OVERRUN?t.length-e-1:0}function a9(n,e,t,r,i){return n===ji.OVERLONG?(r.push(i),0):(r.push(65533),k3(n,e,t))}const l9=Object.freeze({error:o9,ignore:k3,replace:a9});function V3(n,e){e==null&&(e=l9.error),n=lt(n);const t=[];let r=0;for(;r<n.length;){const i=n[r++];if(!(i>>7)){t.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?r+=e(ji.UNEXPECTED_CONTINUE,r-1,n,t):r+=e(ji.BAD_PREFIX,r-1,n,t);continue}if(r-1+s>=n.length){r+=e(ji.OVERRUN,r-1,n,t);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let A=n[r];if((A&192)!=128){r+=e(ji.MISSING_CONTINUE,r,n,t),a=null;break}a=a<<6|A&63,r++}if(a!==null){if(a>1114111){r+=e(ji.OUT_OF_RANGE,r-1-s,n,t,a);continue}if(a>=55296&&a<=57343){r+=e(ji.UTF16_SURROGATE,r-1-s,n,t,a);continue}if(a<=o){r+=e(ji.OVERLONG,r-1-s,n,t,a);continue}t.push(a)}}return t}function xa(n,e=Yg.current){e!=Yg.current&&(D3.checkNormalize(),n=n.normalize(e));let t=[];for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){r++;const s=n.charCodeAt(r);if(r>=n.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return lt(t)}function A9(n){return n.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function $m(n,e){return A9(V3(n,e))}function c9(n,e=Yg.current){return V3(xa(n,e))}function $f(n){return er(xa(n))}const L3="hash/5.7.0";function P3(n,e){e==null&&(e=1);const t=[],r=t.forEach,i=function(s,o){r.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):t.push(a)})};return i(n,e),t}function u9(n){const e={};for(let t=0;t<n.length;t++){const r=n[t];e[r[0]]=r[1]}return e}function f9(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let C=1;C<r;C++)s.push(i+=t());let o=t(),a=e;e+=o;let l=0,A=0;function c(){return l==0&&(A=A<<8|n[e++],l=8),A>>--l&1}const u=31,f=Math.pow(2,u),d=f>>>1,h=d>>1,p=f-1;let m=0;for(let C=0;C<u;C++)m=m<<1|c();let g=[],v=0,y=f;for(;;){let C=Math.floor(((m-v+1)*i-1)/y),b=0,F=r;for(;F-b>1;){let R=b+F>>>1;C<s[R]?F=R:b=R}if(b==0)break;g.push(b);let x=v+Math.floor(y*s[b]/i),S=v+Math.floor(y*s[b+1]/i)-1;for(;!((x^S)&d);)m=m<<1&p|c(),x=x<<1&p,S=S<<1&p|1;for(;x&~S&h;)m=m&d|m<<1&p>>>1|c(),x=x<<1^d,S=(S^d)<<1|d|1;v=x,y=1+S-x}let w=r-4;return g.map(C=>{switch(C-w){case 3:return w+65792+(n[a++]<<16|n[a++]<<8|n[a++]);case 2:return w+256+(n[a++]<<8|n[a++]);case 1:return w+n[a++];default:return C-1}})}function d9(n){let e=0;return()=>n[e++]}function h9(n){return d9(f9(n))}function p9(n){return n&1?~n>>1:n>>1}function g9(n,e){let t=Array(n);for(let r=0;r<n;r++)t[r]=1+e();return t}function mR(n,e){let t=Array(n);for(let r=0,i=-1;r<n;r++)t[r]=i+=1+e();return t}function m9(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=p9(e());return t}function EB(n,e){let t=mR(n(),n),r=n(),i=mR(r,n),s=g9(r,n);for(let o=0;o<r;o++)for(let a=0;a<s[o];a++)t.push(i[o]+a);return e?t.map(o=>e[o]):t}function v9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(B9(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(w9(t,n))}return u9(P3(e))}function y9(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(t)}return e}function W3(n,e,t){let r=Array(n).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)m9(n,t).forEach((s,o)=>r[o].push(s));return r}function B9(n,e){let t=1+e(),r=e(),i=y9(e),s=W3(i.length,1+n,e);return P3(s.map((o,a)=>{const l=o[0],A=o.slice(1);return Array(i[a]).fill(void 0).map((c,u)=>{let f=u*r;return[l+u*t,A.map(d=>d+f)]})}))}function w9(n,e){let t=1+e();return W3(t,1+n,e).map(i=>[i[0],i.slice(1)])}function C9(n){let e=EB(n).sort((r,i)=>r-i);return t();function t(){let r=[];for(;;){let A=EB(n,e);if(A.length==0)break;r.push({set:new Set(A),node:t()})}r.sort((A,c)=>c.set.size-A.set.size);let i=n(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:r,valid:s,fe0f:o,save:a,check:l}}}function b9(){return h9(Q3("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const gC=b9(),x9=new Set(EB(gC)),I9=new Set(EB(gC)),F9=v9(gC),E9=C9(gC),vR=45,yR=95;function O3(n){return c9(n)}function U9(n){return n.filter(e=>e!=65039)}function G3(n){for(let e of n.split(".")){let t=O3(e);try{for(let r=t.lastIndexOf(yR)-1;r>=0;r--)if(t[r]!==yR)throw new Error("underscore only allowed at start");if(t.length>=4&&t.every(r=>r<128)&&t[2]===vR&&t[3]===vR)throw new Error("invalid label extension")}catch(r){throw new Error(`Invalid label "${e}": ${r.message}`)}}return n}function S9(n){return G3(_9(n,U9))}function _9(n,e){let t=O3(n).reverse(),r=[];for(;t.length;){let i=R9(t);if(i){r.push(...e(i));continue}let s=t.pop();if(x9.has(s)){r.push(s);continue}if(I9.has(s))continue;let o=F9[s];if(o){r.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return G3(Q9(String.fromCodePoint(...r)))}function Q9(n){return n.normalize("NFC")}function R9(n,e){var t;let r=E9,i,s,o=[],a=n.length;for(e&&(e.length=0);a;){let l=n[--a];if(r=(t=r.branches.find(A=>A.set.has(l)))===null||t===void 0?void 0:t.node,!r)break;if(r.save)s=l;else if(r.check&&l===s)break;o.push(l),r.fe0f&&(o.push(65039),a>0&&n[a-1]==65039&&a--),r.valid&&(i=o.slice(),r.valid==2&&i.splice(1,1),e&&e.push(...n.slice(a).reverse()),n.length=a)}return i}const M9=new Ae(L3),Z3=new Uint8Array(32);Z3.fill(0);function BR(n){if(n.length===0)throw new Error("invalid ENS name; empty component");return n}function J3(n){const e=xa(S9(n)),t=[];if(n.length===0)return t;let r=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(BR(e.slice(r,i))),r=i+1);if(r>=e.length)throw new Error("invalid ENS name; empty component");return t.push(BR(e.slice(r))),t}function Ty(n){typeof n!="string"&&M9.throwArgumentError("invalid ENS name; not a string","name",n);let e=Z3;const t=J3(n);for(;t.length;)e=er(ns([e,er(t.pop())]));return je(e)}function T9(n){return je(ns(J3(n).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}const N9="rlp/5.7.0",ra=new Ae(N9);function wR(n){const e=[];for(;n;)e.unshift(n&255),n>>=8;return e}function CR(n,e,t){let r=0;for(let i=0;i<t;i++)r=r*256+n[e+i];return r}function H3(n){if(Array.isArray(n)){let r=[];if(n.forEach(function(s){r=r.concat(H3(s))}),r.length<=55)return r.unshift(192+r.length),r;const i=wR(r.length);return i.unshift(247+i.length),i.concat(r)}GU(n)||ra.throwArgumentError("RLP object must be BytesLike","object",n);const e=Array.prototype.slice.call(lt(n));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=wR(e.length);return t.unshift(183+t.length),t.concat(e)}function mC(n){return je(H3(n))}function bR(n,e,t,r){const i=[];for(;t<e+1+r;){const s=z3(n,t);i.push(s.result),t+=s.consumed,t>e+1+r&&ra.throwError("child data too short",Ae.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function z3(n,e){if(n.length===0&&ra.throwError("data too short",Ae.errors.BUFFER_OVERRUN,{}),n[e]>=248){const t=n[e]-247;e+1+t>n.length&&ra.throwError("data short segment too short",Ae.errors.BUFFER_OVERRUN,{});const r=CR(n,e+1,t);return e+1+t+r>n.length&&ra.throwError("data long segment too short",Ae.errors.BUFFER_OVERRUN,{}),bR(n,e,e+1+t,t+r)}else if(n[e]>=192){const t=n[e]-192;return e+1+t>n.length&&ra.throwError("data array too short",Ae.errors.BUFFER_OVERRUN,{}),bR(n,e,e+1,t)}else if(n[e]>=184){const t=n[e]-183;e+1+t>n.length&&ra.throwError("data array too short",Ae.errors.BUFFER_OVERRUN,{});const r=CR(n,e+1,t);e+1+t+r>n.length&&ra.throwError("data array too short",Ae.errors.BUFFER_OVERRUN,{});const i=je(n.slice(e+1+t,e+1+t+r));return{consumed:1+t+r,result:i}}else if(n[e]>=128){const t=n[e]-128;e+1+t>n.length&&ra.throwError("data too short",Ae.errors.BUFFER_OVERRUN,{});const r=je(n.slice(e+1,e+1+t));return{consumed:1+t,result:r}}return{consumed:1,result:je(n[e])}}function ZU(n){const e=lt(n),t=z3(e,0);return t.consumed!==e.length&&ra.throwArgumentError("invalid rlp data","data",n),t.result}const D9="address/5.7.0",qf=new Ae(D9);function xR(n){bt(n,20)||qf.throwArgumentError("invalid address","address",n),n=n.toLowerCase();const e=n.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const r=lt(er(t));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const k9=9007199254740991;function V9(n){return Math.log10?Math.log10(n):Math.log(n)/Math.LN10}const JU={};for(let n=0;n<10;n++)JU[String(n)]=String(n);for(let n=0;n<26;n++)JU[String.fromCharCode(65+n)]=String(10+n);const IR=Math.floor(V9(k9));function L9(n){n=n.toUpperCase(),n=n.substring(4)+n.substring(0,2)+"00";let e=n.split("").map(r=>JU[r]).join("");for(;e.length>=IR;){let r=e.substring(0,IR);e=parseInt(r,10)%97+e.substring(r.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function Tr(n){let e=null;if(typeof n!="string"&&qf.throwArgumentError("invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/))n.substring(0,2)!=="0x"&&(n="0x"+n),e=xR(n),n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==n&&qf.throwArgumentError("bad address checksum","address",n);else if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(n.substring(2,4)!==L9(n)&&qf.throwArgumentError("bad icap checksum","address",n),e=Pz(n.substring(4));e.length<40;)e="0"+e;e=xR("0x"+e)}else qf.throwArgumentError("invalid address","address",n);return e}function Y3(n){let e=null;try{e=Tr(n.from)}catch{qf.throwArgumentError("missing from address","transaction",n)}const t=Yd(lt(ke.from(n.nonce).toHexString()));return Tr(Or(er(mC([e,t])),12))}var P9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Fn=new Ae(L3),X3=new Uint8Array(32);X3.fill(0);const W9=ke.from(-1),K3=ke.from(0),j3=ke.from(1),O9=ke.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function G9(n){const e=lt(n),t=e.length%32;return t?xi([e,X3.slice(t)]):je(e)}const Z9=Ln(j3.toHexString(),32),J9=Ln(K3.toHexString(),32),FR={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Zb=["name","version","chainId","verifyingContract","salt"];function ER(n){return function(e){return typeof e!="string"&&Fn.throwArgumentError(`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const H9={name:ER("name"),version:ER("version"),chainId:function(n){try{return ke.from(n).toString()}catch{}return Fn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",n)},verifyingContract:function(n){try{return Tr(n).toLowerCase()}catch{}return Fn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){try{const e=lt(n);if(e.length!==32)throw new Error("bad length");return je(e)}catch{}return Fn.throwArgumentError('invalid domain value "salt"',"domain.salt",n)}};function Jb(n){{const e=n.match(/^(u?)int(\d*)$/);if(e){const t=e[1]==="",r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&Fn.throwArgumentError("invalid numeric width","type",n);const i=O9.mask(t?r-1:r),s=t?i.add(j3).mul(W9):K3;return function(o){const a=ke.from(o);return(a.lt(s)||a.gt(i))&&Fn.throwArgumentError(`value out-of-bounds for ${n}`,"value",o),Ln(a.toTwos(256).toHexString(),32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return(t===0||t>32||e[1]!==String(t))&&Fn.throwArgumentError("invalid bytes width","type",n),function(r){return lt(r).length!==t&&Fn.throwArgumentError(`invalid length for ${n}`,"value",r),G9(r)}}}switch(n){case"address":return function(e){return Ln(Tr(e),32)};case"bool":return function(e){return e?Z9:J9};case"bytes":return function(e){return er(e)};case"string":return function(e){return $f(e)}}return null}function UR(n,e){return`${n}(${e.map(({name:t,type:r})=>r+" "+t).join(",")})`}class Yi{constructor(e){Ie(this,"types",Object.freeze(as(e))),Ie(this,"_encoderCache",{}),Ie(this,"_types",{});const t={},r={},i={};Object.keys(e).forEach(a=>{t[a]={},r[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(A=>{l[A.name]&&Fn.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(a)}`,"types",e),l[A.name]=!0;const c=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===a&&Fn.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!Jb(c)&&(r[c]||Fn.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),r[c].push(a),t[a][c]=!0)})}const s=Object.keys(r).filter(a=>r[a].length===0);s.length===0?Fn.throwArgumentError("missing primary type","types",e):s.length>1&&Fn.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),Ie(this,"primaryType",s[0]);function o(a,l){l[a]&&Fn.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(t[a]).forEach(A=>{r[A]&&(o(A,l),Object.keys(l).forEach(c=>{i[c][A]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=UR(a,e[a])+l.map(A=>UR(A,e[A])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const i=Jb(e);if(i)return i}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const i=t[1],s=this.getEncoder(i),o=parseInt(t[3]);return a=>{o>=0&&a.length!==o&&Fn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(er)),er(xi(l))}}const r=this.types[e];if(r){const i=$f(this._types[e]);return s=>{const o=r.map(({name:a,type:l})=>{const A=this.getEncoder(l)(s[a]);return this._types[l]?er(A):A});return o.unshift(i),xi(o)}}return Fn.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Fn.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return er(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Jb(e))return r(e,t);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Fn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(l=>this._visit(o,l,r))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,t[a],r),o),{}):Fn.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Yi(e)}static getPrimaryType(e){return Yi.from(e).primaryType}static hashStruct(e,t,r){return Yi.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const i=FR[r];i||Fn.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((r,i)=>Zb.indexOf(r.name)-Zb.indexOf(i.name)),Yi.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return xi(["0x1901",Yi.hashDomain(e),Yi.from(t).hash(r)])}static hash(e,t,r){return er(Yi.encode(e,t,r))}static resolveNames(e,t,r,i){return P9(this,void 0,void 0,function*(){e=xn(e);const s={};e.verifyingContract&&!bt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Yi.from(t);o.visit(r,(a,l)=>(a==="address"&&!bt(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=o.visit(r,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:r}})}static getPayload(e,t,r){Yi.hashDomain(e);const i={},s=[];Zb.forEach(l=>{const A=e[l];A!=null&&(i[l]=H9[l](A),s.push({name:l,type:FR[l]}))});const o=Yi.from(t),a=xn(t);return a.EIP712Domain?Fn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=s,o.encode(r),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(r,(l,A)=>{if(l.match(/^bytes(\d*)/))return je(lt(A));if(l.match(/^u?int/))return ke.from(A).toString();switch(l){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&Fn.throwArgumentError("invalid string","value",A),A}return Fn.throwArgumentError("unsupported type","type",l)})}}}var $3={},_t={},qm=q3;function q3(n,e){if(!n)throw new Error(e||"Assertion failed")}q3.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var H1={exports:{}};typeof Object.create=="function"?H1.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:H1.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var z9=H1.exports,Y9=qm,X9=z9;_t.inherits=X9;function K9(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function j9(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),i=0;i<n.length;i+=2)t.push(parseInt(n[i]+n[i+1],16))}else for(var r=0,i=0;i<n.length;i++){var s=n.charCodeAt(i);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):K9(n,i)?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}else for(i=0;i<n.length;i++)t[i]=n[i]|0;return t}_t.toArray=j9;function $9(n){for(var e="",t=0;t<n.length;t++)e+=tP(n[t].toString(16));return e}_t.toHex=$9;function eP(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}_t.htonl=eP;function q9(n,e){for(var t="",r=0;r<n.length;r++){var i=n[r];e==="little"&&(i=eP(i)),t+=nP(i.toString(16))}return t}_t.toHex32=q9;function tP(n){return n.length===1?"0"+n:n}_t.zero2=tP;function nP(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}_t.zero8=nP;function eY(n,e,t,r){var i=t-e;Y9(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;r==="big"?l=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:l=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],s[o]=l>>>0}return s}_t.join32=eY;function tY(n,e){for(var t=new Array(n.length*4),r=0,i=0;r<n.length;r++,i+=4){var s=n[r];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}_t.split32=tY;function nY(n,e){return n>>>e|n<<32-e}_t.rotr32=nY;function rY(n,e){return n<<e|n>>>32-e}_t.rotl32=rY;function iY(n,e){return n+e>>>0}_t.sum32=iY;function sY(n,e,t){return n+e+t>>>0}_t.sum32_3=sY;function oY(n,e,t,r){return n+e+t+r>>>0}_t.sum32_4=oY;function aY(n,e,t,r,i){return n+e+t+r+i>>>0}_t.sum32_5=aY;function lY(n,e,t,r){var i=n[e],s=n[e+1],o=r+s>>>0,a=(o<r?1:0)+t+i;n[e]=a>>>0,n[e+1]=o}_t.sum64=lY;function AY(n,e,t,r){var i=e+r>>>0,s=(i<e?1:0)+n+t;return s>>>0}_t.sum64_hi=AY;function cY(n,e,t,r){var i=e+r;return i>>>0}_t.sum64_lo=cY;function uY(n,e,t,r,i,s,o,a){var l=0,A=e;A=A+r>>>0,l+=A<e?1:0,A=A+s>>>0,l+=A<s?1:0,A=A+a>>>0,l+=A<a?1:0;var c=n+t+i+o+l;return c>>>0}_t.sum64_4_hi=uY;function fY(n,e,t,r,i,s,o,a){var l=e+r+s+a;return l>>>0}_t.sum64_4_lo=fY;function dY(n,e,t,r,i,s,o,a,l,A){var c=0,u=e;u=u+r>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0,u=u+A>>>0,c+=u<A?1:0;var f=n+t+i+o+l+c;return f>>>0}_t.sum64_5_hi=dY;function hY(n,e,t,r,i,s,o,a,l,A){var c=e+r+s+a+A;return c>>>0}_t.sum64_5_lo=hY;function pY(n,e,t){var r=e<<32-t|n>>>t;return r>>>0}_t.rotr64_hi=pY;function gY(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}_t.rotr64_lo=gY;function mY(n,e,t){return n>>>t}_t.shr64_hi=mY;function vY(n,e,t){var r=n<<32-t|e>>>t;return r>>>0}_t.shr64_lo=vY;var Ih={},SR=_t,yY=qm;function vC(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ih.BlockHash=vC;vC.prototype.update=function(e,t){if(e=SR.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=SR.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};vC.prototype.digest=function(e){return this.update(this._pad()),yY(this.pending===null),this._digest(e)};vC.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var Fh={},Ta={},BY=_t,ga=BY.rotr32;function wY(n,e,t,r){if(n===0)return rP(e,t,r);if(n===1||n===3)return sP(e,t,r);if(n===2)return iP(e,t,r)}Ta.ft_1=wY;function rP(n,e,t){return n&e^~n&t}Ta.ch32=rP;function iP(n,e,t){return n&e^n&t^e&t}Ta.maj32=iP;function sP(n,e,t){return n^e^t}Ta.p32=sP;function CY(n){return ga(n,2)^ga(n,13)^ga(n,22)}Ta.s0_256=CY;function bY(n){return ga(n,6)^ga(n,11)^ga(n,25)}Ta.s1_256=bY;function xY(n){return ga(n,7)^ga(n,18)^n>>>3}Ta.g0_256=xY;function IY(n){return ga(n,17)^ga(n,19)^n>>>10}Ta.g1_256=IY;var Xd=_t,FY=Ih,EY=Ta,Hb=Xd.rotl32,ap=Xd.sum32,UY=Xd.sum32_5,SY=EY.ft_1,oP=FY.BlockHash,_Y=[1518500249,1859775393,2400959708,3395469782];function Ia(){if(!(this instanceof Ia))return new Ia;oP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Xd.inherits(Ia,oP);var QY=Ia;Ia.blockSize=512;Ia.outSize=160;Ia.hmacStrength=80;Ia.padLength=64;Ia.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=Hb(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4];for(i=0;i<r.length;i++){var c=~~(i/20),u=UY(Hb(s,5),SY(c,o,a,l),A,r[i],_Y[c]);A=l,l=a,a=Hb(o,30),o=s,s=u}this.h[0]=ap(this.h[0],s),this.h[1]=ap(this.h[1],o),this.h[2]=ap(this.h[2],a),this.h[3]=ap(this.h[3],l),this.h[4]=ap(this.h[4],A)};Ia.prototype._digest=function(e){return e==="hex"?Xd.toHex32(this.h,"big"):Xd.split32(this.h,"big")};var Kd=_t,RY=Ih,Eh=Ta,MY=qm,fo=Kd.sum32,TY=Kd.sum32_4,NY=Kd.sum32_5,DY=Eh.ch32,kY=Eh.maj32,VY=Eh.s0_256,LY=Eh.s1_256,PY=Eh.g0_256,WY=Eh.g1_256,aP=RY.BlockHash,OY=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Fa(){if(!(this instanceof Fa))return new Fa;aP.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=OY,this.W=new Array(64)}Kd.inherits(Fa,aP);var lP=Fa;Fa.blockSize=512;Fa.outSize=256;Fa.hmacStrength=192;Fa.padLength=64;Fa.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=TY(WY(r[i-2]),r[i-7],PY(r[i-15]),r[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],A=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7];for(MY(this.k.length===r.length),i=0;i<r.length;i++){var d=NY(f,LY(A),DY(A,c,u),this.k[i],r[i]),h=fo(VY(s),kY(s,o,a));f=u,u=c,c=A,A=fo(l,d),l=a,a=o,o=s,s=fo(d,h)}this.h[0]=fo(this.h[0],s),this.h[1]=fo(this.h[1],o),this.h[2]=fo(this.h[2],a),this.h[3]=fo(this.h[3],l),this.h[4]=fo(this.h[4],A),this.h[5]=fo(this.h[5],c),this.h[6]=fo(this.h[6],u),this.h[7]=fo(this.h[7],f)};Fa.prototype._digest=function(e){return e==="hex"?Kd.toHex32(this.h,"big"):Kd.split32(this.h,"big")};var z1=_t,AP=lP;function Fl(){if(!(this instanceof Fl))return new Fl;AP.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}z1.inherits(Fl,AP);var GY=Fl;Fl.blockSize=512;Fl.outSize=224;Fl.hmacStrength=192;Fl.padLength=64;Fl.prototype._digest=function(e){return e==="hex"?z1.toHex32(this.h.slice(0,7),"big"):z1.split32(this.h.slice(0,7),"big")};var Di=_t,ZY=Ih,JY=qm,ma=Di.rotr64_hi,va=Di.rotr64_lo,cP=Di.shr64_hi,uP=Di.shr64_lo,Jl=Di.sum64,zb=Di.sum64_hi,Yb=Di.sum64_lo,HY=Di.sum64_4_hi,zY=Di.sum64_4_lo,YY=Di.sum64_5_hi,XY=Di.sum64_5_lo,fP=ZY.BlockHash,KY=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Do(){if(!(this instanceof Do))return new Do;fP.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=KY,this.W=new Array(160)}Di.inherits(Do,fP);var dP=Do;Do.blockSize=1024;Do.outSize=512;Do.hmacStrength=192;Do.padLength=128;Do.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=aX(r[i-4],r[i-3]),o=lX(r[i-4],r[i-3]),a=r[i-14],l=r[i-13],A=sX(r[i-30],r[i-29]),c=oX(r[i-30],r[i-29]),u=r[i-32],f=r[i-31];r[i]=HY(s,o,a,l,A,c,u,f),r[i+1]=zY(s,o,a,l,A,c,u,f)}};Do.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],A=this.h[5],c=this.h[6],u=this.h[7],f=this.h[8],d=this.h[9],h=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],v=this.h[14],y=this.h[15];JY(this.k.length===r.length);for(var w=0;w<r.length;w+=2){var C=v,b=y,F=rX(f,d),x=iX(f,d),S=jY(f,d,h,p,m),R=$Y(f,d,h,p,m,g),Z=this.k[w],Y=this.k[w+1],Q=r[w],B=r[w+1],E=YY(C,b,F,x,S,R,Z,Y,Q,B),M=XY(C,b,F,x,S,R,Z,Y,Q,B);C=tX(i,s),b=nX(i,s),F=qY(i,s,o,a,l),x=eX(i,s,o,a,l,A);var D=zb(C,b,F,x),T=Yb(C,b,F,x);v=m,y=g,m=h,g=p,h=f,p=d,f=zb(c,u,E,M),d=Yb(u,u,E,M),c=l,u=A,l=o,A=a,o=i,a=s,i=zb(E,M,D,T),s=Yb(E,M,D,T)}Jl(this.h,0,i,s),Jl(this.h,2,o,a),Jl(this.h,4,l,A),Jl(this.h,6,c,u),Jl(this.h,8,f,d),Jl(this.h,10,h,p),Jl(this.h,12,m,g),Jl(this.h,14,v,y)};Do.prototype._digest=function(e){return e==="hex"?Di.toHex32(this.h,"big"):Di.split32(this.h,"big")};function jY(n,e,t,r,i){var s=n&t^~n&i;return s<0&&(s+=4294967296),s}function $Y(n,e,t,r,i,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function qY(n,e,t,r,i){var s=n&t^n&i^t&i;return s<0&&(s+=4294967296),s}function eX(n,e,t,r,i,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function tX(n,e){var t=ma(n,e,28),r=ma(e,n,2),i=ma(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function nX(n,e){var t=va(n,e,28),r=va(e,n,2),i=va(e,n,7),s=t^r^i;return s<0&&(s+=4294967296),s}function rX(n,e){var t=ma(n,e,14),r=ma(n,e,18),i=ma(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function iX(n,e){var t=va(n,e,14),r=va(n,e,18),i=va(e,n,9),s=t^r^i;return s<0&&(s+=4294967296),s}function sX(n,e){var t=ma(n,e,1),r=ma(n,e,8),i=cP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function oX(n,e){var t=va(n,e,1),r=va(n,e,8),i=uP(n,e,7),s=t^r^i;return s<0&&(s+=4294967296),s}function aX(n,e){var t=ma(n,e,19),r=ma(e,n,29),i=cP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}function lX(n,e){var t=va(n,e,19),r=va(e,n,29),i=uP(n,e,6),s=t^r^i;return s<0&&(s+=4294967296),s}var Y1=_t,hP=dP;function El(){if(!(this instanceof El))return new El;hP.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Y1.inherits(El,hP);var AX=El;El.blockSize=1024;El.outSize=384;El.hmacStrength=192;El.padLength=128;El.prototype._digest=function(e){return e==="hex"?Y1.toHex32(this.h.slice(0,12),"big"):Y1.split32(this.h.slice(0,12),"big")};Fh.sha1=QY;Fh.sha224=GY;Fh.sha256=lP;Fh.sha384=AX;Fh.sha512=dP;var pP={},au=_t,cX=Ih,M0=au.rotl32,_R=au.sum32,lp=au.sum32_3,QR=au.sum32_4,gP=cX.BlockHash;function Ea(){if(!(this instanceof Ea))return new Ea;gP.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}au.inherits(Ea,gP);pP.ripemd160=Ea;Ea.blockSize=512;Ea.outSize=160;Ea.hmacStrength=192;Ea.padLength=64;Ea.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=r,A=i,c=s,u=o,f=a,d=0;d<80;d++){var h=_R(M0(QR(r,RR(d,i,s,o),e[dX[d]+t],uX(d)),pX[d]),a);r=a,a=o,o=M0(s,10),s=i,i=h,h=_R(M0(QR(l,RR(79-d,A,c,u),e[hX[d]+t],fX(d)),gX[d]),f),l=f,f=u,u=M0(c,10),c=A,A=h}h=lp(this.h[1],s,u),this.h[1]=lp(this.h[2],o,f),this.h[2]=lp(this.h[3],a,l),this.h[3]=lp(this.h[4],r,A),this.h[4]=lp(this.h[0],i,c),this.h[0]=h};Ea.prototype._digest=function(e){return e==="hex"?au.toHex32(this.h,"little"):au.split32(this.h,"little")};function RR(n,e,t,r){return n<=15?e^t^r:n<=31?e&t|~e&r:n<=47?(e|~t)^r:n<=63?e&r|t&~r:e^(t|~r)}function uX(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function fX(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var dX=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],hX=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],pX=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],gX=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],mX=_t,vX=qm;function jd(n,e,t){if(!(this instanceof jd))return new jd(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(mX.toArray(e,t))}var yX=jd;jd.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),vX(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};jd.prototype.update=function(e,t){return this.inner.update(e,t),this};jd.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=_t,e.common=Ih,e.sha=Fh,e.ripemd=pP,e.hmac=yX,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})($3);const ea=Cu($3);function MR(n){return"0x"+ea.sha256().update(lt(n)).digest("hex")}const BX="web/5.7.1";var wX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};function CX(n,e){return wX(this,void 0,void 0,function*(){e==null&&(e={});const t={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(t.mode="cors",t.cache="no-cache",t.credentials="same-origin",t.redirect="follow",t.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(t.mode=o.mode),o.cache&&(t.cache=o.cache),o.credentials&&(t.credentials=o.credentials),o.redirect&&(t.redirect=o.redirect),o.referrer&&(t.referrer=o.referrer)}const r=yield fetch(n,t),i=yield r.arrayBuffer(),s={};return r.headers.forEach?r.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):r.headers.keys().forEach(o=>{s[o.toLowerCase()]=r.headers.get(o)}),{headers:s,statusCode:r.status,statusMessage:r.statusText,body:lt(new Uint8Array(i))}})}var bX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const wo=new Ae(BX);function TR(n){return new Promise(e=>{setTimeout(e,n)})}function Hl(n,e){if(n==null)return null;if(typeof n=="string")return n;if(GU(n)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return $m(n)}catch{}return je(n)}return n}function xX(n){return xa(n.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function IX(n,e,t){const r=typeof n=="object"&&n.throttleLimit!=null?n.throttleLimit:12;wo.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);const i=typeof n=="object"?n.throttleCallback:null,s=typeof n=="object"&&typeof n.throttleSlotInterval=="number"?n.throttleSlotInterval:100;wo.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof n=="object"?!!n.errorPassThrough:!1,a={};let l=null;const A={method:"GET"};let c=!1,u=2*60*1e3;if(typeof n=="string")l=n;else if(typeof n=="object"){if((n==null||n.url==null)&&wo.throwArgumentError("missing URL","connection.url",n),l=n.url,typeof n.timeout=="number"&&n.timeout>0&&(u=n.timeout),n.headers)for(const g in n.headers)a[g.toLowerCase()]={key:g,value:String(n.headers[g])},["if-none-match","if-modified-since"].indexOf(g.toLowerCase())>=0&&(c=!0);if(A.allowGzip=!!n.allowGzip,n.user!=null&&n.password!=null){l.substring(0,6)!=="https:"&&n.allowInsecureAuthentication!==!0&&wo.throwError("basic authentication requires a secure https url",Ae.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:n.user,password:"[REDACTED]"});const g=n.user+":"+n.password;a.authorization={key:"Authorization",value:"Basic "+R3(xa(g))}}n.skipFetchSetup!=null&&(A.skipFetchSetup=!!n.skipFetchSetup),n.fetchOptions!=null&&(A.fetchOptions=xn(n.fetchOptions))}const f=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=l?l.match(f):null;if(d)try{const g={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?Q3(d[3]):xX(d[3])};let v=g.body;return t&&(v=t(g.body,g)),Promise.resolve(v)}catch(g){wo.throwError("processing response error",Ae.errors.SERVER_ERROR,{body:Hl(d[1],d[2]),error:g,requestBody:null,requestMethod:"GET",url:l})}e&&(A.method="POST",A.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const h={};Object.keys(a).forEach(g=>{const v=a[g];h[v.key]=v.value}),A.headers=h;const p=function(){let g=null;return{promise:new Promise(function(w,C){u&&(g=setTimeout(()=>{g!=null&&(g=null,C(wo.makeError("timeout",Ae.errors.TIMEOUT,{requestBody:Hl(A.body,h["content-type"]),requestMethod:A.method,timeout:u,url:l})))},u))}),cancel:function(){g!=null&&(clearTimeout(g),g=null)}}}(),m=function(){return bX(this,void 0,void 0,function*(){for(let g=0;g<r;g++){let v=null;try{if(v=yield CX(l,A),g<r){if(v.statusCode===301||v.statusCode===302){const w=v.headers.location||"";if(A.method==="GET"&&w.match(/^https:/)){l=v.headers.location;continue}}else if(v.statusCode===429){let w=!0;if(i&&(w=yield i(g,l)),w){let C=0;const b=v.headers["retry-after"];typeof b=="string"&&b.match(/^[1-9][0-9]*$/)?C=parseInt(b)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,g))),yield TR(C);continue}}}}catch(w){v=w.response,v==null&&(p.cancel(),wo.throwError("missing response",Ae.errors.SERVER_ERROR,{requestBody:Hl(A.body,h["content-type"]),requestMethod:A.method,serverError:w,url:l}))}let y=v.body;if(c&&v.statusCode===304?y=null:!o&&(v.statusCode<200||v.statusCode>=300)&&(p.cancel(),wo.throwError("bad response",Ae.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:Hl(y,v.headers?v.headers["content-type"]:null),requestBody:Hl(A.body,h["content-type"]),requestMethod:A.method,url:l})),t)try{const w=yield t(y,v);return p.cancel(),w}catch(w){if(w.throttleRetry&&g<r){let C=!0;if(i&&(C=yield i(g,l)),C){const b=s*parseInt(String(Math.random()*Math.pow(2,g)));yield TR(b);continue}}p.cancel(),wo.throwError("processing response error",Ae.errors.SERVER_ERROR,{body:Hl(y,v.headers?v.headers["content-type"]:null),error:w,requestBody:Hl(A.body,h["content-type"]),requestMethod:A.method,url:l})}return p.cancel(),y}return wo.throwError("failed response",Ae.errors.SERVER_ERROR,{requestBody:Hl(A.body,h["content-type"]),requestMethod:A.method,url:l})})}();return Promise.race([p.promise,m])}function yC(n,e,t){let r=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse($m(s))}catch(l){wo.throwError("invalid JSON",Ae.errors.SERVER_ERROR,{body:s,error:l})}return t&&(a=t(a,o)),a},i=null;if(e!=null){i=xa(e);const s=typeof n=="string"?{url:n}:xn(n);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=xn(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},n=s}return IX(n,i,r)}function ed(n,e){return e||(e={}),e=xn(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(t,r){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&r(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function A(){return n().then(function(c){if(c!==void 0)o()&&t(c);else if(e.oncePoll)e.oncePoll.once("poll",A);else if(e.onceBlock)e.onceBlock.once("block",A);else if(!s){if(l++,l>a){o()&&r(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(A,u)}return null},function(c){o()&&r(c)})}A()})}var UB="qpzry9x8gf2tvdw0s3jn54khce6mua7l",X1={};for(var T0=0;T0<UB.length;T0++){var Xb=UB.charAt(T0);if(X1[Xb]!==void 0)throw new TypeError(Xb+" is ambiguous");X1[Xb]=T0}function Ed(n){var e=n>>25;return(n&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function mP(n){for(var e=1,t=0;t<n.length;++t){var r=n.charCodeAt(t);if(r<33||r>126)return"Invalid prefix ("+n+")";e=Ed(e)^r>>5}for(e=Ed(e),t=0;t<n.length;++t){var i=n.charCodeAt(t);e=Ed(e)^i&31}return e}function FX(n,e,t){if(t=t||90,n.length+7+e.length>t)throw new TypeError("Exceeds length limit");n=n.toLowerCase();var r=mP(n);if(typeof r=="string")throw new Error(r);for(var i=n+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");r=Ed(r)^o,i+=UB.charAt(o)}for(s=0;s<6;++s)r=Ed(r);for(r^=1,s=0;s<6;++s){var a=r>>(5-s)*5&31;i+=UB.charAt(a)}return i}function vP(n,e){if(e=e||90,n.length<8)return n+" too short";if(n.length>e)return"Exceeds length limit";var t=n.toLowerCase(),r=n.toUpperCase();if(n!==t&&n!==r)return"Mixed-case string "+n;n=t;var i=n.lastIndexOf("1");if(i===-1)return"No separator character for "+n;if(i===0)return"Missing prefix for "+n;var s=n.slice(0,i),o=n.slice(i+1);if(o.length<6)return"Data too short";var a=mP(s);if(typeof a=="string")return a;for(var l=[],A=0;A<o.length;++A){var c=o.charAt(A),u=X1[c];if(u===void 0)return"Unknown character "+c;a=Ed(a)^u,!(A+6>=o.length)&&l.push(u)}return a!==1?"Invalid checksum for "+n:{prefix:s,words:l}}function EX(){var n=vP.apply(null,arguments);if(typeof n=="object")return n}function UX(n){var e=vP.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function BC(n,e,t,r){for(var i=0,s=0,o=(1<<t)-1,a=[],l=0;l<n.length;++l)for(i=i<<e|n[l],s+=e;s>=t;)s-=t,a.push(i>>s&o);if(r)s>0&&a.push(i<<t-s&o);else{if(s>=e)return"Excess padding";if(i<<t-s&o)return"Non-zero padding"}return a}function SX(n){var e=BC(n,8,5,!0);if(Array.isArray(e))return e}function _X(n){var e=BC(n,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function QX(n){var e=BC(n,5,8,!1);if(Array.isArray(e))return e}function RX(n){var e=BC(n,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var MX={decodeUnsafe:EX,decode:UX,encode:FX,toWordsUnsafe:SX,toWords:_X,fromWordsUnsafe:QX,fromWords:RX};const NR=Cu(MX),$r="providers/5.7.2";function Uh(n,e,t){return t={path:e,exports:{},require:function(r,i){return TX(r,i??t.path)}},n(t,t.exports),t.exports}function TX(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var HU=yP;function yP(n,e){if(!n)throw new Error(e||"Assertion failed")}yP.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var _o=Uh(function(n,e){var t=e;function r(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var A=0;A<o.length;A++)l[A]=o[A]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var A=0;A<o.length;A+=2)l.push(parseInt(o[A]+o[A+1],16))}else for(var A=0;A<o.length;A++){var c=o.charCodeAt(A),u=c>>8,f=c&255;u?l.push(u,f):l.push(f)}return l}t.toArray=r;function i(o){return o.length===1?"0"+o:o}t.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}t.toHex=s,t.encode=function(a,l){return l==="hex"?s(a):a}}),ps=Uh(function(n,e){var t=e;t.assert=HU,t.toArray=_o.toArray,t.zero2=_o.zero2,t.toHex=_o.toHex,t.encode=_o.encode;function r(l,A,c){var u=new Array(Math.max(l.bitLength(),c)+1);u.fill(0);for(var f=1<<A+1,d=l.clone(),h=0;h<u.length;h++){var p,m=d.andln(f-1);d.isOdd()?(m>(f>>1)-1?p=(f>>1)-m:p=m,d.isubn(p)):p=0,u[h]=p,d.iushrn(1)}return u}t.getNAF=r;function i(l,A){var c=[[],[]];l=l.clone(),A=A.clone();for(var u=0,f=0,d;l.cmpn(-u)>0||A.cmpn(-f)>0;){var h=l.andln(3)+u&3,p=A.andln(3)+f&3;h===3&&(h=-1),p===3&&(p=-1);var m;h&1?(d=l.andln(7)+u&7,(d===3||d===5)&&p===2?m=-h:m=h):m=0,c[0].push(m);var g;p&1?(d=A.andln(7)+f&7,(d===3||d===5)&&h===2?g=-p:g=p):g=0,c[1].push(g),2*u===m+1&&(u=1-u),2*f===g+1&&(f=1-f),l.iushrn(1),A.iushrn(1)}return c}t.getJSF=i;function s(l,A,c){var u="_"+A;l.prototype[A]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}t.cachedProperty=s;function o(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=o;function a(l){return new pt(l,"hex","le")}t.intFromLE=a}),SB=ps.getNAF,NX=ps.getJSF,_B=ps.assert;function oc(n,e){this.type=n,this.p=new pt(e.p,16),this.red=e.prime?pt.red(e.prime):pt.mont(this.p),this.zero=new pt(0).toRed(this.red),this.one=new pt(1).toRed(this.red),this.two=new pt(2).toRed(this.red),this.n=e.n&&new pt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var bu=oc;oc.prototype.point=function(){throw new Error("Not implemented")};oc.prototype.validate=function(){throw new Error("Not implemented")};oc.prototype._fixedNafMul=function(e,t){_B(e.precomputed);var r=e._getDoubles(),i=SB(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=r.step){l=0;for(var A=a+r.step-1;A>=a;A--)l=(l<<1)+i[A];o.push(l)}for(var c=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<o.length;a++)l=o[a],l===f?u=u.mixedAdd(r.points[a]):l===-f&&(u=u.mixedAdd(r.points[a].neg()));c=c.add(u)}return c.toP()};oc.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,o=SB(t,r,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var A=0;l>=0&&o[l]===0;l--)A++;if(l>=0&&A++,a=a.dblp(A),l<0)break;var c=o[l];_B(c!==0),e.type==="affine"?c>0?a=a.mixedAdd(s[c-1>>1]):a=a.mixedAdd(s[-c-1>>1].neg()):c>0?a=a.add(s[c-1>>1]):a=a.add(s[-c-1>>1].neg())}return e.type==="affine"?a.toP():a};oc.prototype._wnafMulAdd=function(e,t,r,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,A=0,c,u,f;for(c=0;c<i;c++){f=t[c];var d=f._getNAFPoints(e);o[c]=d.wnd,a[c]=d.points}for(c=i-1;c>=1;c-=2){var h=c-1,p=c;if(o[h]!==1||o[p]!==1){l[h]=SB(r[h],o[h],this._bitLength),l[p]=SB(r[p],o[p],this._bitLength),A=Math.max(l[h].length,A),A=Math.max(l[p].length,A);continue}var m=[t[h],null,null,t[p]];t[h].y.cmp(t[p].y)===0?(m[1]=t[h].add(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg())):t[h].y.cmp(t[p].y.redNeg())===0?(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].add(t[p].neg())):(m[1]=t[h].toJ().mixedAdd(t[p]),m[2]=t[h].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=NX(r[h],r[p]);for(A=Math.max(v[0].length,A),l[h]=new Array(A),l[p]=new Array(A),u=0;u<A;u++){var y=v[0][u]|0,w=v[1][u]|0;l[h][u]=g[(y+1)*3+(w+1)],l[p][u]=0,a[h]=m}}var C=this.jpoint(null,null,null),b=this._wnafT4;for(c=A;c>=0;c--){for(var F=0;c>=0;){var x=!0;for(u=0;u<i;u++)b[u]=l[u][c]|0,b[u]!==0&&(x=!1);if(!x)break;F++,c--}if(c>=0&&F++,C=C.dblp(F),c<0)break;for(u=0;u<i;u++){var S=b[u];S!==0&&(S>0?f=a[u][S-1>>1]:S<0&&(f=a[u][-S-1>>1].neg()),f.type==="affine"?C=C.mixedAdd(f):C=C.add(f))}}for(c=0;c<i;c++)a[c]=null;return s?C:C.toP()};function so(n,e){this.curve=n,this.type=e,this.precomputed=null}oc.BasePoint=so;so.prototype.eq=function(){throw new Error("Not implemented")};so.prototype.validate=function(){return this.curve.validate(this)};oc.prototype.decodePoint=function(e,t){e=ps.toArray(e,t);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?_B(e[e.length-1]%2===0):e[0]===7&&_B(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return i}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};so.prototype.encodeCompressed=function(e){return this.encode(e,!0)};so.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))};so.prototype.encode=function(e,t){return ps.encode(this._encode(t),e)};so.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};so.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};so.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}};so.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=r===1?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};so.prototype._getBeta=function(){return null};so.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var zU=Uh(function(n){typeof Object.create=="function"?n.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}}),DX=ps.assert;function oo(n){bu.call(this,"short",n),this.a=new pt(n.a,16).toRed(this.red),this.b=new pt(n.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(n),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}zU(oo,bu);var kX=oo;oo.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,r;if(e.beta)t=new pt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new pt(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?r=s[0]:(r=s[1],DX(this.g.mul(r).x.cmp(this.g.x.redMul(t))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new pt(a.a,16),b:new pt(a.b,16)}}):o=this._getEndoBasis(r),{beta:t,lambda:r,basis:o}}};oo.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:pt.mont(e),r=new pt(2).toRed(t).redInvm(),i=r.redNeg(),s=new pt(3).toRed(t).redNeg().redSqrt().redMul(r),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};oo.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,i=this.n.clone(),s=new pt(1),o=new pt(0),a=new pt(0),l=new pt(1),A,c,u,f,d,h,p,m=0,g,v;r.cmpn(0)!==0;){var y=i.div(r);g=i.sub(y.mul(r)),v=a.sub(y.mul(s));var w=l.sub(y.mul(o));if(!u&&g.cmp(t)<0)A=p.neg(),c=s,u=g.neg(),f=v;else if(u&&++m===2)break;p=g,i=r,r=g,a=s,s=v,l=o,o=w}d=g.neg(),h=v;var C=u.sqr().add(f.sqr()),b=d.sqr().add(h.sqr());return b.cmp(C)>=0&&(d=A,h=c),u.negative&&(u=u.neg(),f=f.neg()),d.negative&&(d=d.neg(),h=h.neg()),[{a:u,b:f},{a:d,b:h}]};oo.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=s.mul(r.a),l=o.mul(i.a),A=s.mul(r.b),c=o.mul(i.b),u=e.sub(a).sub(l),f=A.add(c).neg();return{k1:u,k2:f}};oo.prototype.pointFromX=function(e,t){e=new pt(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(i.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};oo.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return r.redSqr().redISub(s).cmpn(0)===0};oo.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),l=e[o],A=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),A=A.neg(!0)),i[o*2]=l,i[o*2+1]=A,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var c=this._wnafMulAdd(1,i,s,o*2,r),u=0;u<o*2;u++)i[u]=null,s[u]=null;return c};function xr(n,e,t,r){bu.BasePoint.call(this,n,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new pt(e,16),this.y=new pt(t,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}zU(xr,bu.BasePoint);oo.prototype.point=function(e,t,r){return new xr(this,e,t,r)};oo.prototype.pointFromJSON=function(e,t){return xr.fromJSON(this,e,t)};xr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(s){return r.point(s.x.redMul(r.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};xr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};xr.fromJSON=function(e,t,r){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(a){return e.point(a[0],a[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};xr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};xr.prototype.isInfinity=function(){return this.inf};xr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)};xr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};xr.prototype.getX=function(){return this.x.fromRed()};xr.prototype.getY=function(){return this.y.fromRed()};xr.prototype.mul=function(e){return e=new pt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};xr.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};xr.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};xr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};xr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t};xr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Dr(n,e,t,r){bu.BasePoint.call(this,n,"jacobian"),e===null&&t===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new pt(0)):(this.x=new pt(e,16),this.y=new pt(t,16),this.z=new pt(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}zU(Dr,bu.BasePoint);oo.prototype.jpoint=function(e,t,r){return new Dr(this,e,t,r)};Dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)};Dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Dr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),l=i.redSub(s),A=o.redSub(a);if(l.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=l.redSqr(),u=c.redMul(l),f=i.redMul(c),d=A.redSqr().redIAdd(u).redISub(f).redISub(f),h=A.redMul(f.redISub(d)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(d,h,p)};Dr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=a.redSqr(),c=A.redMul(a),u=r.redMul(A),f=l.redSqr().redIAdd(c).redISub(u).redISub(u),d=l.redMul(u.redISub(f)).redISub(s.redMul(c)),h=this.z.redMul(a);return this.curve.jpoint(f,d,h)};Dr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,A=l.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=o.redSqr(),f=c.redSqr(),d=f.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(A)),p=o.redMul(f),m=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=h.redMul(g);v=v.redIAdd(v).redISub(d);var y=c.redMul(l);t+1<e&&(A=A.redMul(d)),o=m,l=y,c=v}return this.curve.jpoint(o,c.redMul(s),l)};Dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Dr.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),A=l.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=A,t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),d=f.redSqr(),h=this.x.redAdd(f).redSqr().redISub(u).redISub(d);h=h.redIAdd(h);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),e=m.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)};Dr.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),A=l.redSqr().redISub(a).redISub(a);e=A;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=l.redMul(a.redISub(A)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),d=this.x.redMul(f),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var p=d.redIAdd(d);p=p.redIAdd(p);var m=p.redAdd(p);e=h.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)};Dr.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),A=t.redAdd(t);A=A.redIAdd(A);var c=A.redMul(a),u=l.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),d=a.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=l.redMul(f).redISub(d),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,h,p)};Dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),A=i.redIAdd(i);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var c=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(A),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(l).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var d=this.y.redMul(c.redMul(A.redISub(c)).redISub(a.redMul(l)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var h=this.z.redAdd(a).redSqr().redISub(r).redISub(l);return this.curve.jpoint(f,d,h)};Dr.prototype.mul=function(e,t){return e=new pt(e,t),this.curve._wnafMul(this,e)};Dr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};Dr.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}};Dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ny=Uh(function(n,e){var t=e;t.base=bu,t.short=kX,t.mont=null,t.edwards=null}),Dy=Uh(function(n,e){var t=e,r=ps.assert;function i(a){a.type==="short"?this.curve=new Ny.short(a):a.type==="edwards"?this.curve=new Ny.edwards(a):this.curve=new Ny.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,r(this.g.validate(),"Invalid curve"),r(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=i;function s(a,l){Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){var A=new i(l);return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,value:A}),A}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ea.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ea.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ea.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ea.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ea.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ea.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ea.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ea.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function HA(n){if(!(this instanceof HA))return new HA(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=_o.toArray(n.entropy,n.entropyEnc||"hex"),t=_o.toArray(n.nonce,n.nonceEnc||"hex"),r=_o.toArray(n.pers,n.persEnc||"hex");HU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,r)}var BP=HA;HA.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};HA.prototype._hmac=function(){return new ea.hmac(this.hash,this.K)};HA.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HA.prototype.reseed=function(e,t,r,i){typeof t!="string"&&(i=r,r=t,t=null),e=_o.toArray(e,t),r=_o.toArray(r,i),HU(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};HA.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=r,r=t,t=null),r&&(r=_o.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,_o.encode(o,t)};var K1=ps.assert;function Yr(n,e){this.ec=n,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var YU=Yr;Yr.fromPublic=function(e,t,r){return t instanceof Yr?t:new Yr(e,{pub:t,pubEnc:r})};Yr.fromPrivate=function(e,t,r){return t instanceof Yr?t:new Yr(e,{priv:t,privEnc:r})};Yr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Yr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Yr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Yr.prototype._importPrivate=function(e,t){this.priv=new pt(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Yr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?K1(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&K1(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Yr.prototype.derive=function(e){return e.validate()||K1(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Yr.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)};Yr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Yr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var VX=ps.assert;function wC(n,e){if(n instanceof wC)return n;this._importDER(n,e)||(VX(n.r&&n.s,"Signature without r or s"),this.r=new pt(n.r,16),this.s=new pt(n.s,16),n.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=n.recoveryParam)}var CC=wC;function LX(){this.place=0}function Kb(n,e){var t=n[e.place++];if(!(t&128))return t;var r=t&15;if(r===0||r>4)return!1;for(var i=0,s=0,o=e.place;s<r;s++,o++)i<<=8,i|=n[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function DR(n){for(var e=0,t=n.length-1;!n[e]&&!(n[e+1]&128)&&e<t;)e++;return e===0?n:n.slice(e)}wC.prototype._importDER=function(e,t){e=ps.toArray(e,t);var r=new LX;if(e[r.place++]!==48)return!1;var i=Kb(e,r);if(i===!1||i+r.place!==e.length||e[r.place++]!==2)return!1;var s=Kb(e,r);if(s===!1)return!1;var o=e.slice(r.place,s+r.place);if(r.place+=s,e[r.place++]!==2)return!1;var a=Kb(e,r);if(a===!1||e.length!==a+r.place)return!1;var l=e.slice(r.place,a+r.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new pt(o),this.s=new pt(l),this.recoveryParam=null,!0};function jb(n,e){if(e<128){n.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(n.push(t|128);--t;)n.push(e>>>(t<<3)&255);n.push(e)}wC.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),r[0]&128&&(r=[0].concat(r)),t=DR(t),r=DR(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var i=[2];jb(i,t.length),i=i.concat(t),i.push(2),jb(i,r.length);var s=i.concat(r),o=[48];return jb(o,s.length),o=o.concat(s),ps.encode(o,e)};var PX=function(){throw new Error("unsupported")},wP=ps.assert;function $s(n){if(!(this instanceof $s))return new $s(n);typeof n=="string"&&(wP(Object.prototype.hasOwnProperty.call(Dy,n),"Unknown curve "+n),n=Dy[n]),n instanceof Dy.PresetCurve&&(n={curve:n}),this.curve=n.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=n.curve.g,this.g.precompute(n.curve.n.bitLength()+1),this.hash=n.hash||n.curve.hash}var WX=$s;$s.prototype.keyPair=function(e){return new YU(this,e)};$s.prototype.keyFromPrivate=function(e,t){return YU.fromPrivate(this,e,t)};$s.prototype.keyFromPublic=function(e,t){return YU.fromPublic(this,e,t)};$s.prototype.genKeyPair=function(e){e||(e={});for(var t=new BP({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||PX(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new pt(2));;){var s=new pt(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};$s.prototype._truncateToN=function(e,t){var r=e.byteLength()*8-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};$s.prototype.sign=function(e,t,r,i){typeof r=="object"&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new pt(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s),l=new BP({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),A=this.n.sub(new pt(1)),c=0;;c++){var u=i.k?i.k(c):new pt(l.generate(this.n.byteLength()));if(u=this._truncateToN(u,!0),!(u.cmpn(1)<=0||u.cmp(A)>=0)){var f=this.g.mul(u);if(!f.isInfinity()){var d=f.getX(),h=d.umod(this.n);if(h.cmpn(0)!==0){var p=u.invm(this.n).mul(h.mul(t.getPrivate()).iadd(e));if(p=p.umod(this.n),p.cmpn(0)!==0){var m=(f.getY().isOdd()?1:0)|(d.cmp(h)!==0?2:0);return i.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new CC({r:h,s:p,recoveryParam:m})}}}}}};$s.prototype.verify=function(e,t,r,i){e=this._truncateToN(new pt(e,16)),r=this.keyFromPublic(r,i),t=new CC(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),l=a.mul(e).umod(this.n),A=a.mul(s).umod(this.n),c;return this.curve._maxwellTrick?(c=this.g.jmulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.eqXToP(s)):(c=this.g.mulAdd(l,r.getPublic(),A),c.isInfinity()?!1:c.getX().umod(this.n).cmp(s)===0)};$s.prototype.recoverPubKey=function(n,e,t,r){wP((3&t)===t,"The recovery param is more than two bits"),e=new CC(e,r);var i=this.n,s=new pt(n),o=e.r,a=e.s,l=t&1,A=t>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),f=a.mul(c).umod(i);return this.g.mulAdd(u,o,f)};$s.prototype.getKeyRecoveryParam=function(n,e,t,r){if(e=new CC(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(n,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var OX=Uh(function(n,e){var t=e;t.version="6.5.4",t.utils=ps,t.rand=function(){throw new Error("unsupported")},t.curve=Ny,t.curves=Dy,t.ec=WX,t.eddsa=null}),GX=OX.ec;const ZX="signing-key/5.7.0",j1=new Ae(ZX);let $b=null;function ia(){return $b||($b=new GX("secp256k1")),$b}class JX{constructor(e){Ie(this,"curve","secp256k1"),Ie(this,"privateKey",je(e)),ou(this.privateKey)!==32&&j1.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=ia().keyFromPrivate(lt(this.privateKey));Ie(this,"publicKey","0x"+t.getPublic(!1,"hex")),Ie(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Ie(this,"_isSigningKey",!0)}_addPoint(e){const t=ia().keyFromPublic(lt(this.publicKey)),r=ia().keyFromPublic(lt(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=ia().keyFromPrivate(lt(this.privateKey)),r=lt(e);r.length!==32&&j1.throwArgumentError("bad digest length","digest",e);const i=t.sign(r,{canonical:!0});return pC({recoveryParam:i.recoveryParam,r:Ln("0x"+i.r.toString(16),32),s:Ln("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=ia().keyFromPrivate(lt(this.privateKey)),r=ia().keyFromPublic(lt(CP(e)));return Ln("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function HX(n,e){const t=pC(e),r={r:lt(t.r),s:lt(t.s)};return"0x"+ia().recoverPubKey(lt(n),r,t.recoveryParam).encode("hex",!1)}function CP(n,e){const t=lt(n);if(t.length===32){const r=new JX(t);return e?"0x"+ia().keyFromPrivate(t).getPublic(!0,"hex"):r.publicKey}else{if(t.length===33)return e?je(t):"0x"+ia().keyFromPublic(t).getPublic(!1,"hex");if(t.length===65)return e?"0x"+ia().keyFromPublic(t).getPublic(!0,"hex"):je(t)}return j1.throwArgumentError("invalid public or private key","key","[REDACTED]")}const zX="transactions/5.7.0",Vl=new Ae(zX);var kR;(function(n){n[n.legacy=0]="legacy",n[n.eip2930=1]="eip2930",n[n.eip1559=2]="eip1559"})(kR||(kR={}));function XU(n){return n==="0x"?null:Tr(n)}function Zr(n){return n==="0x"?T3:ke.from(n)}function YX(n){const e=CP(n);return Tr(Or(er(Or(e,1)),12))}function bP(n,e){return YX(HX(lt(n),e))}function $i(n,e){const t=Yd(ke.from(n).toHexString());return t.length>32&&Vl.throwArgumentError("invalid length for "+e,"transaction:"+e,n),t}function qb(n,e){return{address:Tr(n),storageKeys:(e||[]).map((t,r)=>(ou(t)!==32&&Vl.throwArgumentError("invalid access list storageKey",`accessList[${n}:${r}]`,t),t.toLowerCase()))}}function xu(n){if(Array.isArray(n))return n.map((t,r)=>Array.isArray(t)?(t.length>2&&Vl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${r}]`,t),qb(t[0],t[1])):qb(t.address,t.storageKeys));const e=Object.keys(n).map(t=>{const r=n[t].reduce((i,s)=>(i[s]=!0,i),{});return qb(t,Object.keys(r).sort())});return e.sort((t,r)=>t.address.localeCompare(r.address)),e}function xP(n){return xu(n).map(e=>[e.address,e.storageKeys])}function XX(n,e){if(n.gasPrice!=null){const r=ke.from(n.gasPrice),i=ke.from(n.maxFeePerGas||0);r.eq(i)||Vl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}const t=[$i(n.chainId||0,"chainId"),$i(n.nonce||0,"nonce"),$i(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),$i(n.maxFeePerGas||0,"maxFeePerGas"),$i(n.gasLimit||0,"gasLimit"),n.to!=null?Tr(n.to):"0x",$i(n.value||0,"value"),n.data||"0x",xP(n.accessList||[])];if(e){const r=pC(e);t.push($i(r.recoveryParam,"recoveryParam")),t.push(Yd(r.r)),t.push(Yd(r.s))}return xi(["0x02",mC(t)])}function KX(n,e){const t=[$i(n.chainId||0,"chainId"),$i(n.nonce||0,"nonce"),$i(n.gasPrice||0,"gasPrice"),$i(n.gasLimit||0,"gasLimit"),n.to!=null?Tr(n.to):"0x",$i(n.value||0,"value"),n.data||"0x",xP(n.accessList||[])];if(e){const r=pC(e);t.push($i(r.recoveryParam,"recoveryParam")),t.push(Yd(r.r)),t.push(Yd(r.s))}return xi(["0x01",mC(t)])}function IP(n,e,t){try{const r=Zr(e[0]).toNumber();if(r!==0&&r!==1)throw new Error("bad recid");n.v=r}catch{Vl.throwArgumentError("invalid v for transaction type: 1","v",e[0])}n.r=Ln(e[1],32),n.s=Ln(e[2],32);try{const r=er(t(n));n.from=bP(r,{r:n.r,s:n.s,recoveryParam:n.v})}catch{}}function jX(n){const e=ZU(n.slice(1));e.length!==9&&e.length!==12&&Vl.throwArgumentError("invalid component count for transaction type: 2","payload",je(n));const t=Zr(e[2]),r=Zr(e[3]),i={type:2,chainId:Zr(e[0]).toNumber(),nonce:Zr(e[1]).toNumber(),maxPriorityFeePerGas:t,maxFeePerGas:r,gasPrice:null,gasLimit:Zr(e[4]),to:XU(e[5]),value:Zr(e[6]),data:e[7],accessList:xu(e[8])};return e.length===9||(i.hash=er(n),IP(i,e.slice(9),XX)),i}function $X(n){const e=ZU(n.slice(1));e.length!==8&&e.length!==11&&Vl.throwArgumentError("invalid component count for transaction type: 1","payload",je(n));const t={type:1,chainId:Zr(e[0]).toNumber(),nonce:Zr(e[1]).toNumber(),gasPrice:Zr(e[2]),gasLimit:Zr(e[3]),to:XU(e[4]),value:Zr(e[5]),data:e[6],accessList:xu(e[7])};return e.length===8||(t.hash=er(n),IP(t,e.slice(8),KX)),t}function qX(n){const e=ZU(n);e.length!==9&&e.length!==6&&Vl.throwArgumentError("invalid raw transaction","rawTransaction",n);const t={nonce:Zr(e[0]).toNumber(),gasPrice:Zr(e[1]),gasLimit:Zr(e[2]),to:XU(e[3]),value:Zr(e[4]),data:e[5],chainId:0};if(e.length===6)return t;try{t.v=ke.from(e[6]).toNumber()}catch{return t}if(t.r=Ln(e[7],32),t.s=Ln(e[8],32),ke.from(t.r).isZero()&&ke.from(t.s).isZero())t.chainId=t.v,t.v=0;else{t.chainId=Math.floor((t.v-35)/2),t.chainId<0&&(t.chainId=0);let r=t.v-27;const i=e.slice(0,6);t.chainId!==0&&(i.push(je(t.chainId)),i.push("0x"),i.push("0x"),r-=t.chainId*2+8);const s=er(mC(i));try{t.from=bP(s,{r:je(t.r),s:je(t.s),recoveryParam:r})}catch{}t.hash=er(n)}return t.type=null,t}function e6(n){const e=lt(n);if(e[0]>127)return qX(e);switch(e[0]){case 1:return $X(e);case 2:return jX(e)}return Vl.throwError(`unsupported transaction type: ${e[0]}`,Ae.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Ap=new Ae($r);let VR=class Xe{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),A=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:o,type:A,accessList:Xe.allowNull(this.accessList.bind(this),null),blockHash:Xe.allowNull(o,null),blockNumber:Xe.allowNull(l,null),transactionIndex:Xe.allowNull(l,null),confirmations:Xe.allowNull(l,null),from:t,gasPrice:Xe.allowNull(r),maxPriorityFeePerGas:Xe.allowNull(r),maxFeePerGas:Xe.allowNull(r),gasLimit:r,to:Xe.allowNull(t,null),value:r,nonce:l,data:s,r:Xe.allowNull(this.uint256),s:Xe.allowNull(this.uint256),v:Xe.allowNull(l),creates:Xe.allowNull(t,null),raw:Xe.allowNull(s)},e.transactionRequest={from:Xe.allowNull(t),nonce:Xe.allowNull(l),gasLimit:Xe.allowNull(r),gasPrice:Xe.allowNull(r),maxPriorityFeePerGas:Xe.allowNull(r),maxFeePerGas:Xe.allowNull(r),to:Xe.allowNull(t),value:Xe.allowNull(r),data:Xe.allowNull(c),type:Xe.allowNull(l),accessList:Xe.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:t,topics:Xe.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:Xe.allowNull(this.address,null),from:Xe.allowNull(this.address,null),contractAddress:Xe.allowNull(t,null),transactionIndex:l,root:Xe.allowNull(a),gasUsed:r,logsBloom:Xe.allowNull(s),blockHash:o,transactionHash:o,logs:Xe.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:Xe.allowNull(l,null),cumulativeGasUsed:r,effectiveGasPrice:Xe.allowNull(r),status:Xe.allowNull(l),type:A},e.block={hash:Xe.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:Xe.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Xe.allowNull(t),extraData:s,transactions:Xe.allowNull(Xe.arrayOf(o)),baseFeePerGas:Xe.allowNull(r)},e.blockWithTransactions=xn(e.block),e.blockWithTransactions.transactions=Xe.allowNull(Xe.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Xe.allowNull(i,void 0),toBlock:Xe.allowNull(i,void 0),blockHash:Xe.allowNull(o,void 0),address:Xe.allowNull(t,void 0),topics:Xe.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Xe.allowNull(l),blockHash:Xe.allowNull(o),transactionIndex:l,removed:Xe.allowNull(this.boolean.bind(this)),address:t,data:Xe.allowFalsish(s,"0x"),topics:Xe.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return xu(e||[])}number(e){return e==="0x"?0:ke.from(e).toNumber()}type(e){return e==="0x"||e==null?0:ke.from(e).toNumber()}bigNumber(e){return ke.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return typeof e=="string"&&(!t&&e.substring(0,2)!=="0x"&&(e="0x"+e),bt(e))?e.toLowerCase():Ap.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Tr(e)}callAddress(e){if(!bt(e,32))return null;const t=Tr(Or(e,12));return t===$z?null:t}contractAddress(e){return Y3(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||bt(e))return hC(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return ou(r)!==32?Ap.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(e==null)return null;const t=ke.from(e);try{return t.toNumber()}catch{}return null}uint256(e){if(!bt(e))throw new Error("invalid uint256");return Ln(e,32)}_block(e,t){e.author!=null&&e.miner==null&&(e.miner=e.author);const r=e._difficulty!=null?e._difficulty:e.difficulty,i=Xe.check(t,e);return i._difficulty=r==null?null:ke.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Xe.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&ke.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const t=Xe.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;bt(r)&&(r=ke.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;r==null&&t.v==null&&(r=e.chainId),bt(r)&&(r=ke.from(r).toNumber()),typeof r!="number"&&t.v!=null&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),typeof r!="number"&&(r=0),t.chainId=r}return t.blockHash&&t.blockHash.replace(/0/g,"")==="x"&&(t.blockHash=null),t}transaction(e){return e6(e)}receiptLog(e){return Xe.check(this.formats.receiptLog,e)}receipt(e){const t=Xe.check(this.formats.receipt,e);if(t.root!=null)if(t.root.length<=4){const r=ke.from(t.root).toNumber();r===0||r===1?(t.status!=null&&t.status!==r&&Ap.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):Ap.throwArgumentError("invalid alt-root-status","value.root",t.root)}else t.root.length!==66&&Ap.throwArgumentError("invalid root hash","value.root",t.root);return t.status!=null&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(t=>this.topics(t)):e!=null?this.hash(e,!0):null}filter(e){return Xe.check(this.formats.filter,e)}filterLog(e){return Xe.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const s=e[i](t[i]);s!==void 0&&(r[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=t[i],s}return r}static allowNull(e,t){return function(r){return r==null?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(i){r.push(e(i))}),r}}};function t6(n){return n&&typeof n.isCommunityResource=="function"}function LR(n){return t6(n)&&n.isCommunityResource()}let PR=!1;function bC(){PR||(PR=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var dt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const wt=new Ae($r),n6=10;function WR(n){return n==null?"null":(ou(n)!==32&&wt.throwArgumentError("invalid topic","topic",n),n.toLowerCase())}function OR(n){for(n=n.slice();n.length>0&&n[n.length-1]==null;)n.pop();return n.map(e=>{if(Array.isArray(e)){const t={};e.forEach(i=>{t[WR(i)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}else return WR(e)}).join("&")}function r6(n){return n===""?[]:n.split(/&/g).map(e=>{if(e==="")return[];const t=e.split("|").map(r=>r==="null"?null:r);return t.length===1?t[0]:t})}function Wu(n){if(typeof n=="string"){if(n=n.toLowerCase(),ou(n)===32)return"tx:"+n;if(n.indexOf(":")===-1)return n}else{if(Array.isArray(n))return"filter:*:"+OR(n);if(Xz.isForkEvent(n))throw wt.warn("not implemented"),new Error("not implemented");if(n&&typeof n=="object")return"filter:"+(n.address||"*")+":"+OR(n.topics||[])}throw new Error("invalid event - "+n)}function cp(){return new Date().getTime()}function GR(n){return new Promise(e=>{setTimeout(e,n)})}const i6=["block","network","pending","poll"];let s6=class{constructor(e,t,r){Ie(this,"tag",e),Ie(this,"listener",t),Ie(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const t=e[1],r=r6(e[2]),i={};return r.length>0&&(i.topics=r),t&&t!=="*"&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||i6.indexOf(this.tag)>=0}};const o6={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ex(n){return Ln(ke.from(n).toHexString(),32)}function ZR(n){return J1.encode(ns([n,Or(MR(MR(n)),0,4)]))}const FP=new RegExp("^(ipfs)://(.*)$","i"),JR=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),FP,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ky(n,e){try{return $m(Xg(n,e))}catch{}return null}function Xg(n,e){if(n==="0x")return null;const t=ke.from(Or(n,e,e+32)).toNumber(),r=ke.from(Or(n,t,t+32)).toNumber();return Or(n,t+32,t+32+r)}function tx(n){return n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):wt.throwArgumentError("unsupported IPFS format","link",n),`https://gateway.ipfs.io/ipfs/${n}`}function HR(n){const e=lt(n);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function a6(n){if(n.length%32===0)return n;const e=new Uint8Array(Math.ceil(n.length/32)*32);return e.set(n),e}function EP(n){const e=[];let t=0;for(let r=0;r<n.length;r++)e.push(null),t+=32;for(let r=0;r<n.length;r++){const i=lt(n[r]);e[r]=HR(t),e.push(HR(i.length)),e.push(a6(i)),t+=32+Math.ceil(i.length/32)*32}return xi(e)}class zR{constructor(e,t,r,i){Ie(this,"provider",e),Ie(this,"name",r),Ie(this,"address",e.formatter.address(t)),Ie(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>ke.from(e).eq(1)).catch(e=>{if(e.code===Ae.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return dt(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:xi([e,Ty(this.name),t||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,r.data=xi(["0x9061b923",EP([T9(this.name),r.data])]));try{let s=yield this.provider.call(r);return lt(s).length%32===4&&wt.throwError("resolver threw error",Ae.errors.CALL_EXCEPTION,{transaction:r,data:s}),i&&(s=Xg(s,0)),s}catch(s){if(s.code===Ae.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,t){return dt(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return r!=null?Xg(r,0):null})}_getAddress(e,t){const r=o6[String(e)];if(r==null&&wt.throwError(`unsupported coin type: ${e}`,Ae.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),r.ilk==="eth")return this.provider.formatter.address(t);const i=lt(t);if(r.p2pkh!=null){const s=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return ZR(ns([[r.p2pkh],"0x"+s[2]]))}}if(r.p2sh!=null){const s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return ZR(ns([[r.p2sh],"0x"+s[2]]))}}if(r.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=NR.toWords(i.slice(2));return a.unshift(o),NR.encode(r.prefix,a)}}return null}getAddress(e){return dt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===n9?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===Ae.errors.CALL_EXCEPTION)return null;throw i}const t=yield this._fetchBytes("0xf1cb7e06",ex(e));if(t==null||t==="0x")return null;const r=this._getAddress(e,t);return r==null&&wt.throwError("invalid or unsupported coin data",Ae.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return dt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null)return null;for(let r=0;r<JR.length;r++){const i=t.match(JR[r]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:tx(t)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const A=yield this.provider.formatter.address(l[0]),c=Ln(ke.from(l[1]).toHexString(),32);if(s==="erc721"){const p=this.provider.formatter.callAddress(yield this.provider.call({to:A,data:xi(["0x6352211e",c])}));if(a!==p)return null;e.push({type:"owner",content:p})}else if(s==="erc1155"){const p=ke.from(yield this.provider.call({to:A,data:xi(["0x00fdd58e",Ln(a,32),c])}));if(p.isZero())return null;e.push({type:"balance",content:p.toString()})}const u={to:this.provider.formatter.address(l[0]),data:xi([o,c])};let f=ky(yield this.provider.call(u),0);if(f==null)return null;e.push({type:"metadata-url-base",content:f}),s==="erc1155"&&(f=f.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:f})),f.match(/^ipfs:/i)&&(f=tx(f)),e.push({type:"metadata-url",content:f});const d=yield yC(f);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let h=d.image;if(typeof h!="string")return null;if(!h.match(/^(https:\/\/|data:)/i)){if(h.match(FP)==null)return null;e.push({type:"url-ipfs",content:h}),h=tx(h)}return e.push({type:"url",content:h}),{linkage:e,url:h}}}}}catch{}return null})}getContentHash(){return dt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const o=parseInt(t[3],16);if(t[4].length===o*2)return"ipfs://"+J1.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipns://"+J1.encode("0x"+r[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+R3("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return wt.throwError("invalid or unsupported content hash data",Ae.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return dt(this,void 0,void 0,function*(){let t=xa(e);t=ns([ex(64),ex(t.length),t]),t.length%32!==0&&(t=ns([t,Ln("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",je(t));return r==null||r==="0x"?null:$m(r)})}}let nx=null,l6=1;class KU extends jm{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ie(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(t=>{}),this._ready().catch(t=>{});else{const t=rs(new.target,"getNetwork")(e);t?(Ie(this,"_network",t),this.emit("network",t,null)):wt.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return dt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||wt.throwError("no network detected",Ae.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ie(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ed(()=>this._ready().then(e=>e,e=>{if(!(e.code===Ae.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return nx==null&&(nx=new VR),nx}static getNetwork(e){return _3(e??"homestead")}ccipReadFetch(e,t,r){return dt(this,void 0,void 0,function*(){if(this.disableCcipRead||r.length===0)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const l=r[a],A=l.replace("{sender}",i).replace("{data}",s),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield yC({url:A,errorPassThrough:!0},c,(d,h)=>(d.status=h.statusCode,d));if(u.data)return u.data;const f=u.message||"unknown error";if(u.status>=400&&u.status<500)return wt.throwError(`response not found during CCIP fetch: ${f}`,Ae.errors.SERVER_ERROR,{url:l,errorMessage:f});o.push(f)}return wt.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,Ae.errors.SERVER_ERROR,{urls:r,errorMessages:o})})}_getInternalBlockNumber(e){return dt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(cp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const t=cp(),r=Kn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),s;const o=cp();return i=ke.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:t,respTime:o}});return this._internalBlockNumber=r,r.catch(i=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return dt(this,void 0,void 0,function*(){const e=l6++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)wt.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",wt.makeError("network block skew detected",Ae.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let i=this._emitted.block+1;i<=r;i++)this.emit("block",i);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&r-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=r-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});t.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=r-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=r;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(A=>{A.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=A.blockNumber),this._emitted["b:"+A.blockHash]=A.blockNumber,this._emitted["t:"+A.transactionHash]=A.blockNumber,this.emit(s,A)})}).catch(l=>{this.emit("error",l),i._inflight=!1});t.push(a)}break}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return dt(this,void 0,void 0,function*(){return wt.throwError("provider does not support network detection",Ae.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return dt(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield GR(0),this._network;const r=wt.makeError("underlying network changed",Ae.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=cp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(t=>((this._fastBlockNumber==null||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=cp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return dt(this,void 0,void 0,function*(){return this._waitForTransaction(e,t??1,r||0,null)})}_waitForTransaction(e,t,r,i){return dt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((o,a)=>{const l=[];let A=!1;const c=function(){return A?!0:(A=!0,l.forEach(f=>{f()}),!1)},u=f=>{f.confirmations<t||c()||o(f)};if(this.on(e,u),l.push(()=>{this.removeListener(e,u)}),i){let f=i.startBlock,d=null;const h=p=>dt(this,void 0,void 0,function*(){A||(yield GR(1e3),this.getTransactionCount(i.from).then(m=>dt(this,void 0,void 0,function*(){if(!A){if(m<=i.nonce)f=p;else{{const g=yield this.getTransaction(e);if(g&&g.blockNumber!=null)return}for(d==null&&(d=f-3,d<i.startBlock&&(d=i.startBlock));d<=p;){if(A)return;const g=yield this.getBlockWithTransactions(d);for(let v=0;v<g.transactions.length;v++){const y=g.transactions[v];if(y.hash===e)return;if(y.from===i.from&&y.nonce===i.nonce){if(A)return;const w=yield this.waitForTransaction(y.hash,t);if(c())return;let C="replaced";y.data===i.data&&y.to===i.to&&y.value.eq(i.value)?C="repriced":y.data==="0x"&&y.from===y.to&&y.value.isZero()&&(C="cancelled"),a(wt.makeError("transaction was replaced",Ae.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(y),hash:e,receipt:w}));return}}d++}}A||this.once("block",h)}}),m=>{A||this.once("block",h)}))});if(A)return;this.once("block",h),l.push(()=>{this.removeListener("block",h)})}if(typeof r=="number"&&r>0){const f=setTimeout(()=>{c()||a(wt.makeError("timeout exceeded",Ae.errors.TIMEOUT,{timeout:r}))},r);f.unref&&f.unref(),l.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return dt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return ke.from(e)}catch(t){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Kn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return ke.from(i)}catch(s){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:s})}})}getTransactionCount(e,t){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Kn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return ke.from(i).toNumber()}catch(s){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:s})}})}getCode(e,t){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Kn({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return je(i)}catch(s){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:s})}})}getStorageAt(e,t,r){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Kn({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(o=>hC(o))}),s=yield this.perform("getStorageAt",i);try{return je(s)}catch(o){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,t,r){if(t!=null&&ou(t)!==32)throw new Error("invalid response - sendTransaction");const i=e;return t!=null&&e.hash!==t&&wt.throwError("Transaction hash mismatch from Provider.sendTransaction.",Ae.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(s,o)=>dt(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&r!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&wt.throwError("transaction failed",Ae.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(s=>je(s)),r=this.formatter.transaction(e);r.confirmations==null&&(r.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,s,i)}catch(s){throw s.transaction=r,s.transactionHash=r.hash,s}})}_getTransactionRequest(e){return dt(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?ke.from(s):null))}),["type"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s??null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(i=>{t[i]!=null&&(r[i]=Promise.resolve(t[i]).then(s=>s?je(s):null))}),this.formatter.transactionRequest(yield Kn(r))})}_getFilter(e){return dt(this,void 0,void 0,function*(){e=yield e;const t={};return e.address!=null&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{e[r]!=null&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{e[r]!=null&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Kn(t))})}_call(e,t,r){return dt(this,void 0,void 0,function*(){r>=n6&&wt.throwError("CCIP read exceeded maximum redirections",Ae.errors.SERVER_ERROR,{redirects:r,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&ou(s)%32===4)try{const o=Or(s,4),a=Or(o,0,32);ke.from(a).eq(i)||wt.throwError("CCIP Read sender did not match",Ae.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],A=ke.from(Or(o,32,64)).toNumber(),c=ke.from(Or(o,A,A+32)).toNumber(),u=Or(o,A+32);for(let g=0;g<c;g++){const v=ky(u,g*32);v==null&&wt.throwError("CCIP Read contained corrupt URL string",Ae.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(v)}const f=Xg(o,64);ke.from(Or(o,100,128)).isZero()||wt.throwError("CCIP Read callback selector included junk",Ae.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=Or(o,96,100),h=Xg(o,128),p=yield this.ccipReadFetch(e,f,l);p==null&&wt.throwError("CCIP Read disabled or provided no URLs",Ae.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:i,data:xi([d,EP([p,h])])};return this._call(m,t,r+1)}catch(o){if(o.code===Ae.errors.SERVER_ERROR)throw o}try{return je(s)}catch(o){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:o})}})}call(e,t){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Kn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Kn({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return ke.from(r)}catch(i){return wt.throwError("bad result from backend",Ae.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return dt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&wt.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return t==null&&wt.throwError("ENS name not configured",Ae.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return dt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const i={includeTransactions:!!t};if(bt(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),bt(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch{wt.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ed(()=>dt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&r>this._emitted.block?null:void 0;if(t){let o=null;for(let l=0;l<s.transactions.length;l++){const A=s.transactions[l];if(A.blockNumber==null)A.confirmations=0;else if(A.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=o-A.blockNumber+1;c<=0&&(c=1),A.confirmations=c}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return dt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ed(()=>dt(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return dt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return ed(()=>dt(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null)return this._emitted["t:"+e]==null?null:void 0;if(r.blockHash==null)return;const i=this.formatter.receipt(r);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return dt(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Kn({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(i=>{i.removed==null&&(i.removed=!1)}),VR.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return dt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return dt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&wt.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return dt(this,void 0,void 0,function*(){let t=e;for(;;){if(t===""||t==="."||e!=="eth"&&t==="eth")return null;const r=yield this._getResolver(t,"getResolver");if(r!=null){const i=new zR(this,r,e);return t!==e&&!(yield i.supportsWildcard())?null:i}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return dt(this,void 0,void 0,function*(){t==null&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||wt.throwError("network does not support ENS",Ae.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const i=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Ty(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return dt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(bt(e))throw r}typeof e!="string"&&wt.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return dt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(r==null)return null;const i=ky(yield this.call({to:r,data:"0x691f3431"+Ty(t).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return dt(this,void 0,void 0,function*(){let t=null;if(bt(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;t=new zR(this,o,s);try{const a=yield t.getAvatar();if(a)return a.url}catch(a){if(a.code!==Ae.errors.CALL_EXCEPTION)throw a}try{const a=ky(yield this.call({to:o,data:"0x691f3431"+Ty(s).substring(2)}),0);t=yield this.getResolver(a)}catch(a){if(a.code!==Ae.errors.CALL_EXCEPTION)throw a;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return r==null?null:r.url})}perform(e,t){return wt.throwError(e+" not implemented",Ae.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(t=>t.pollable()).length>0}_addEventListener(e,t,r){const i=new s6(Wu(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],s=Wu(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,t)},0),r=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),r}listenerCount(e){if(!e)return this._events.length;let t=Wu(e);return this._events.filter(r=>r.tag===t).length}listeners(e){if(e==null)return this._events.map(r=>r.listener);let t=Wu(e);return this._events.filter(r=>r.tag===t).map(r=>r.listener)}off(e,t){if(t==null)return this.removeAllListeners(e);const r=[];let i=!1,s=Wu(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=t||i?!0:(i=!0,r.push(o),!1)),r.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let t=[];if(e==null)t=this._events,this._events=[];else{const r=Wu(e);this._events=this._events.filter(i=>i.tag!==r?!0:(t.push(i),!1))}return t.forEach(r=>{this._stopEvent(r)}),this}}const A6="abstract-signer/5.7.0";var ho=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Es=new Ae(A6),c6=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],u6=[Ae.errors.INSUFFICIENT_FUNDS,Ae.errors.NONCE_EXPIRED,Ae.errors.REPLACEMENT_UNDERPRICED];class e0{constructor(){Es.checkAbstract(new.target,e0),Ie(this,"_isSigner",!0)}getBalance(e){return ho(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return ho(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return ho(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Kn(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return ho(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Kn(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return ho(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return ho(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return ho(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return ho(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return ho(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const r in e)c6.indexOf(r)===-1&&Es.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=xn(e);return t.from==null?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(r=>(r[0].toLowerCase()!==r[1].toLowerCase()&&Es.throwArgumentError("from address mismatch","transaction",e),r[0])),t}populateTransaction(e){return ho(this,void 0,void 0,function*(){const t=yield Kn(this.checkTransaction(e));t.to!=null&&(t.to=Promise.resolve(t.to).then(i=>ho(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Es.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),t.to.catch(i=>{}));const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)?Es.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(t.type===0||t.type===1)&&r&&Es.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(t.type===2||t.type==null)&&t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)t.type=2;else if(t.type===0||t.type===1)t.gasPrice==null&&(t.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(t.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(t.type=2,t.gasPrice!=null){const s=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=s,t.maxPriorityFeePerGas=s}else t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(r&&Es.throwError("network does not support EIP-1559",Ae.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),t.gasPrice==null&&(t.gasPrice=i.gasPrice),t.type=0):Es.throwError("failed to get consistent fee data",Ae.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else t.type===2&&(t.maxFeePerGas==null&&(t.maxFeePerGas=i.maxFeePerGas),t.maxPriorityFeePerGas==null&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return t.nonce==null&&(t.nonce=this.getTransactionCount("pending")),t.gasLimit==null&&(t.gasLimit=this.estimateGas(t).catch(i=>{if(u6.indexOf(i.code)>=0)throw i;return Es.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ae.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:t})})),t.chainId==null?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Es.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Kn(t)})}_checkProvider(e){this.provider||Es.throwError("missing provider",Ae.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class jU extends e0{constructor(e,t){super(),Ie(this,"address",e),Ie(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{Es.throwError(e,Ae.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new jU(this.address,e)}}var sl=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const jn=new Ae($r),f6=["call","estimateGas"];function Ig(n,e){if(n==null)return null;if(typeof n.message=="string"&&n.message.match("reverted")){const t=bt(n.data)?n.data:null;if(!e||t)return{message:n.message,data:t}}if(typeof n=="object"){for(const t in n){const r=Ig(n[t],e);if(r)return r}return null}if(typeof n=="string")try{return Ig(JSON.parse(n),e)}catch{}return null}function UP(n,e,t){const r=t.transaction||t.signedTransaction;if(n==="call"){const s=Ig(e,!0);if(s)return s.data;jn.throwError("missing revert data in call exception; Transaction reverted without a reason string",Ae.errors.CALL_EXCEPTION,{data:"0x",transaction:r,error:e})}if(n==="estimateGas"){let s=Ig(e.body,!1);s==null&&(s=Ig(e,!1)),s&&jn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ae.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:n,transaction:r,error:e})}let i=e.message;throw e.code===Ae.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&jn.throwError("insufficient funds for intrinsic transaction cost",Ae.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:r}),i.match(/nonce (is )?too low/i)&&jn.throwError("nonce has already been used",Ae.errors.NONCE_EXPIRED,{error:e,method:n,transaction:r}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&jn.throwError("replacement fee too low",Ae.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:r}),i.match(/only replay-protected/i)&&jn.throwError("legacy pre-eip-155 transactions not supported",Ae.errors.UNSUPPORTED_OPERATION,{error:e,method:n,transaction:r}),f6.indexOf(n)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&jn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ae.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:r}),e}function YR(n){return new Promise(function(e){setTimeout(e,n)})}function d6(n){if(n.error){const e=new Error(n.error.message);throw e.code=n.error.code,e.data=n.error.data,e}return n.result}function up(n){return n&&n.toLowerCase()}const $1={};class SP extends e0{constructor(e,t,r){if(super(),e!==$1)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ie(this,"provider",t),r==null&&(r=0),typeof r=="string"?(Ie(this,"_address",this.provider.formatter.address(r)),Ie(this,"_index",null)):typeof r=="number"?(Ie(this,"_index",r),Ie(this,"_address",null)):jn.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return jn.throwError("cannot alter JSON-RPC Signer connection",Ae.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new h6($1,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&jn.throwError("unknown account #"+this._index,Ae.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=xn(e);const t=this.getAddress().then(r=>(r&&(r=r.toLowerCase()),r));if(e.gasLimit==null){const r=xn(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(r=>sl(this,void 0,void 0,function*(){if(r==null)return null;const i=yield this.provider.resolveName(r);return i==null&&jn.throwArgumentError("provided ENS name resolves to null","tx.to",r),i}))),Kn({tx:Kn(e),sender:t}).then(({tx:r,sender:i})=>{r.from!=null?r.from.toLowerCase()!==i&&jn.throwArgumentError("from address mismatch","transaction",e):r.from=i;const s=this.provider.constructor.hexlifyTransaction(r,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&jn.throwError("user rejected transaction",Ae.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:r}),UP("sendTransaction",o,s)))})}signTransaction(e){return jn.throwError("signing transactions is unsupported",Ae.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return sl(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ed(()=>sl(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(r);if(i!==null)return this.provider._wrapTransaction(i,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return sl(this,void 0,void 0,function*(){const t=typeof e=="string"?xa(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[je(t),r.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jn.throwError("user rejected signing",Ae.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),i}})}_legacySignMessage(e){return sl(this,void 0,void 0,function*(){const t=typeof e=="string"?xa(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),je(t)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&jn.throwError("user rejected signing",Ae.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),i}})}_signTypedData(e,t,r){return sl(this,void 0,void 0,function*(){const i=yield Yi.resolveNames(e,t,r,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Yi.getPayload(i.domain,t,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&jn.throwError("user rejected signing",Ae.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:t,value:i.value}}),o}})}unlock(e){return sl(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class h6 extends SP{sendTransaction(e){return this.sendUncheckedTransaction(e).then(t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:r=>this.provider.waitForTransaction(t,r)}))}}const p6={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Kg extends KU{constructor(e,t){let r=t;r==null&&(r=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(r),e||(e=rs(this.constructor,"defaultUrl")()),typeof e=="string"?Ie(this,"connection",Object.freeze({url:e})):Ie(this,"connection",Object.freeze(xn(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return sl(this,void 0,void 0,function*(){yield YR(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const t=rs(this.constructor,"getNetwork");try{return t(ke.from(e).toNumber())}catch(r){return jn.throwError("could not detect network",Ae.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:r})}}return jn.throwError("could not detect network",Ae.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new SP($1,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(t=>this.formatter.address(t)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:as(r),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=yC(this.connection,JSON.stringify(r),d6).then(o=>(this.emit("debug",{action:"response",request:r,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:r,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[up(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[up(t.address),t.blockTag]];case"getCode":return["eth_getCode",[up(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[up(t.address),Ln(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[rs(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[rs(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&t.filter.address!=null&&(t.filter.address=up(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return sl(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=t.transaction;if(i&&i.type!=null&&ke.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=xn(t),t.transaction=xn(i),delete t.transaction.type)}}const r=this.prepareRequest(e,t);r==null&&jn.throwError(e+" not implemented",Ae.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(i){return UP(e,i,t)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){function i(){e.send("eth_getFilterChanges",[r]).then(function(s){if(e._pendingFilter!=t)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return YR(1e3)})}).then(function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),r}).catch(r=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=xn(p6);if(t)for(const s in t)t[s]&&(r[s]=!0);Gz(e,r);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=hC(ke.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=je(e[s]))}),e.accessList&&(i.accessList=xu(e.accessList)),i}}let Fg=null;try{if(Fg=WebSocket,Fg==null)throw new Error("inject please")}catch{const e=new Ae($r);Fg=function(){e.throwError("WebSockets not supported in this environment",Ae.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var rx=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const N0=new Ae($r);let g6=1;class $U extends Kg{constructor(e,t){t==="any"&&N0.throwError("WebSocketProvider does not support 'any' network yet",Ae.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,t):super("_websocket",t),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Ie(this,"_websocket",new Fg(this.connection.url)):Ie(this,"_websocket",e),Ie(this,"_requests",{}),Ie(this,"_subs",{}),Ie(this,"_subIds",{}),Ie(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),l=this._requests[a];if(delete this._requests[a],o.result!==void 0)l.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:o.result,provider:this});else{let A=null;o.error?(A=new Error(o.error.message||"unknown error"),Ie(A,"code",o.error.code||null),Ie(A,"response",s)):A=new Error("unknown error"),l.callback(A,void 0),this.emit("debug",{action:"response",error:A,request:JSON.parse(l.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){N0.throwError("cannot reset events block on WebSocketProvider",Ae.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){N0.throwError("cannot set polling interval on WebSocketProvider",Ae.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return rx(this,void 0,void 0,function*(){return null})}set polling(e){e&&N0.throwError("cannot set polling on WebSocketProvider",Ae.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=g6++;return new Promise((i,s)=>{function o(l,A){return l?s(l):i(A)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(r)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return rx(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(t).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],t=>{const r=ke.from(t.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],t=>{this.emit("pending",t)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{t.removed==null&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=r=>{const i=r.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};t(e),this._subscribe("tx",["newHeads"],r=>{this._events.filter(i=>i.type==="tx").forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return rx(this,void 0,void 0,function*(){this.websocket.readyState===Fg.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var m6=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const eg=new Ae($r);class _P extends Kg{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return m6(this,void 0,void 0,function*(){let t=this.network;return t==null&&(t=yield e.detectNetwork.call(this),t||eg.throwError("no network detected",Ae.errors.UNKNOWN_ERROR,{}),this._network==null&&(Ie(this,"_network",t),this.emit("network",t,null))),t})}}class ac extends _P{constructor(e,t){eg.checkAbstract(new.target,ac),e=rs(new.target,"getNetwork")(e),t=rs(new.target,"getApiKey")(t);const r=rs(new.target,"getUrl")(e,t);super(r,e),typeof t=="string"?Ie(this,"apiKey",t):t!=null&&Object.keys(t).forEach(i=>{Ie(this,i,t[i])})}_startPending(){eg.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return eg.throwError("API provider does not support signing",Ae.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return eg.throwError("not implemented; sub-classes must override getUrl",Ae.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const XR=new Ae($r),Vy="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class v6 extends $U{constructor(e,t){const r=new QP(e,t),i=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,r.network),Ie(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Vy}}class QP extends ac{static getWebSocketProvider(e,t){return new v6(e,t)}static getApiKey(e){return e==null?Vy:(e&&typeof e!="string"&&XR.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:XR.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(i,s)=>(t===Vy&&bC(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Vy}}const y6=new Ae($r),D0="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function B6(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return y6.throwArgumentError("unsupported network","name",n)}class w6 extends ac{isCommunityResource(){return this.apiKey===D0}static getApiKey(e){return e??D0}static getUrl(e,t){t==null&&(t=D0);const r={allowGzip:!0,url:"https://"+B6(e.name)+t,throttleCallback:(i,s)=>(t.apiKey===D0&&bC(),Promise.resolve(!0))};return t.projectSecret!=null&&(r.user="",r.password=t.projectSecret),r}}var C6=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const KR=new Ae($r);class b6 extends ac{static getApiKey(e){return e!=null&&KR.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:KR.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return C6(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)})}}var k0=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const pA=new Ae($r);function jR(n){const e={};for(let t in n){if(n[t]==null)continue;let r=n[t];t==="type"&&r===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[t]?r=hC(je(r)):t==="accessList"?r="["+xu(r).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":r=je(r),e[t]=r)}return e}function x6(n){if(n.status==0&&(n.message==="No records found"||n.message==="No transactions found"))return n.result;if(n.status!=1||typeof n.message!="string"||!n.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return n.result}function $R(n){if(n&&n.status==0&&n.message=="NOTOK"&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(n),e.throttleRetry=!0,e}if(n.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(n),e}if(n.error){const e=new Error(n.error.message||"unknown error");throw n.error.code&&(e.code=n.error.code),n.error.data&&(e.data=n.error.data),e}return n.result}function qR(n){if(n==="pending")throw new Error("pending not supported");return n==="latest"?n:parseInt(n.substring(2),16)}function ix(n,e,t){if(n==="call"&&e.code===Ae.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),bt(s))return s;pA.throwError("missing revert data in call exception",Ae.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let r=e.message;throw e.code===Ae.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?r=e.error.message:typeof e.body=="string"?r=e.body:typeof e.responseText=="string"&&(r=e.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&pA.throwError("insufficient funds for intrinsic transaction cost",Ae.errors.INSUFFICIENT_FUNDS,{error:e,method:n,transaction:t}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&pA.throwError("nonce has already been used",Ae.errors.NONCE_EXPIRED,{error:e,method:n,transaction:t}),r.match(/another transaction with same nonce/)&&pA.throwError("replacement fee too low",Ae.errors.REPLACEMENT_UNDERPRICED,{error:e,method:n,transaction:t}),r.match(/execution failed due to an exception|execution reverted/)&&pA.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ae.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:n,transaction:t}),e}class I6 extends KU{constructor(e,t){super(e),Ie(this,"baseUrl",this.getBaseUrl()),Ie(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return pA.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((s,o)=>{const a=t[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return k0(this,void 0,void 0,function*(){const i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null,o=e==="proxy"?$R:x6;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&bC(),Promise.resolve(!0))};let l=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(s).map(c=>`${c}=${s[c]}`).join("&"));const A=yield yC(a,l,o||$R);return this.emit("debug",{action:"response",request:i,response:as(A),provider:this}),A})}detectNetwork(){return k0(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return k0(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(i=>ix("sendTransaction",i,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=jR(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return ix("call",s,t.transaction)}}case"estimateGas":{const i=jR(t.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return ix("estimateGas",s,t.transaction)}}case"getLogs":{const i={action:"getLogs"};if(t.filter.fromBlock&&(i.fromBlock=qR(t.filter.fromBlock)),t.filter.toBlock&&(i.toBlock=qR(t.filter.toBlock)),t.filter.address&&(i.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&pA.throwError("unsupported topic count",Ae.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),t.filter.topics.length===1)){const a=t.filter.topics[0];(typeof a!="string"||a.length!==66)&&pA.throwError("unsupported topic format",Ae.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const l=s[a];if(l.blockHash==null){if(o[l.blockNumber]==null){const A=yield this.getBlock(l.blockNumber);A&&(o[l.blockNumber]=A.hash)}l.blockHash=o[l.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return k0(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:t??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(l){o[l]==""&&delete o[l]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}function F6(n){n=n.slice();for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),r=n[e];n[e]=n[t],n[t]=r}return n}var QB=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const kc=new Ae($r);function V0(){return new Date().getTime()}function eM(n){let e=null;for(let t=0;t<n.length;t++){const r=n[t];if(r==null)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||e.ensAddress==null&&r.ensAddress==null)||kc.throwArgumentError("provider mismatch","networks",n):e=r}return e}function tM(n,e){n=n.slice().sort();const t=Math.floor(n.length/2);if(n.length%2)return n[t];const r=n[t-1],i=n[t];return e!=null&&Math.abs(r-i)>e?null:(r+i)/2}function td(n){if(n===null)return"null";if(typeof n=="number"||typeof n=="boolean")return JSON.stringify(n);if(typeof n=="string")return n;if(ke.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(e=>td(e)));if(typeof n=="object"){const e=Object.keys(n);return e.sort(),"{"+e.map(t=>{let r=n[t];return typeof r=="function"?r="[function]":r=td(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let E6=1;function nM(n){let e=null,t=null,r=new Promise(o=>{e=function(){t&&(clearTimeout(t),t=null),o()},t=setTimeout(e,n)});const i=o=>(r=r.then(o),r);function s(){return r}return{cancel:e,getPromise:s,wait:i}}const U6=[Ae.errors.CALL_EXCEPTION,Ae.errors.INSUFFICIENT_FUNDS,Ae.errors.NONCE_EXPIRED,Ae.errors.REPLACEMENT_UNDERPRICED,Ae.errors.UNPREDICTABLE_GAS_LIMIT],S6=["address","args","errorArgs","errorSignature","method","transaction"];function L0(n,e){const t={weight:n.weight};return Object.defineProperty(t,"provider",{get:()=>n.provider}),n.start&&(t.start=n.start),e&&(t.duration=e-n.start),n.done&&(n.error?t.error=n.error:t.result=n.result||null),t}function _6(n,e){return function(t){const r={};t.forEach(s=>{const o=n(s.result);r[o]||(r[o]={count:0,result:s.result}),r[o].count++});const i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];if(o.count>=e)return o.result}}}function Q6(n,e,t){let r=td;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=tM(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=n._highestBlockNumber&&(n._highestBlockNumber=o),n._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return tM(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(i){return i==null?null:(i=xn(i),i.confirmations=-1,td(i))};break;case"getBlock":t.includeTransactions?r=function(i){return i==null?null:(i=xn(i),i.transactions=i.transactions.map(s=>(s=xn(s),s.confirmations=-1,s)),td(i))}:r=function(i){return i==null?null:td(i)};break;default:throw new Error("unknown method: "+e)}return _6(r,n.quorum)}function fp(n,e){return QB(this,void 0,void 0,function*(){const t=n.provider;return t.blockNumber!=null&&t.blockNumber>=e||e===-1?t:ed(()=>new Promise((r,i)=>{setTimeout(function(){return t.blockNumber>=e?r(t):n.cancelled?r(null):r(void 0)},0)}),{oncePoll:t})})}function R6(n,e,t,r){return QB(this,void 0,void 0,function*(){let i=n.provider;switch(t){case"getBlockNumber":case"getGasPrice":return i[t]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&bt(r.blockTag)&&(i=yield fp(n,e)),i[t](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&bt(r.blockTag)&&(i=yield fp(n,e)),i.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&bt(r.blockTag)&&(i=yield fp(n,e)),i[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&bt(r.blockTag)&&(i=yield fp(n,e)),t==="call"&&r.blockTag?i[t](r.transaction,r.blockTag):i[t](r.transaction);case"getTransaction":case"getTransactionReceipt":return i[t](r.transactionHash);case"getLogs":{let s=r.filter;return(s.fromBlock&&bt(s.fromBlock)||s.toBlock&&bt(s.toBlock))&&(i=yield fp(n,e)),i.getLogs(s)}}return kc.throwError("unknown method error",Ae.errors.UNKNOWN_ERROR,{method:t,params:r})})}class M6 extends KU{constructor(e,t){e.length===0&&kc.throwArgumentError("missing providers","providers",e);const r=e.map((o,a)=>{if(jm.isProvider(o)){const c=LR(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:c,priority:1})}const l=xn(o);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=LR(o)?2e3:750),l.weight==null&&(l.weight=1);const A=l.weight;return(A%1||A>512||A<1)&&kc.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,A),Object.freeze(l)}),i=r.reduce((o,a)=>o+a.weight,0);t==null?t=i/2:t>i&&kc.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let s=eM(r.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),Ie(this,"providerConfigs",Object.freeze(r)),Ie(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return QB(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(t=>t.provider.getNetwork()));return eM(e)})}perform(e,t){return QB(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(A=>A.provider.sendTransaction(t.signedTransaction).then(c=>c.hash,c=>c)));for(let A=0;A<l.length;A++){const c=l[A];if(typeof c=="string")return c}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const r=Q6(this,e,t),i=F6(this.providerConfigs.map(xn));i.sort((l,A)=>l.priority-A.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const l=V0();let A=i.filter(d=>d.runner&&l-d.start<d.stallTimeout).reduce((d,h)=>d+h.weight,0);for(;A<this.quorum&&o<i.length;){const d=i[o++],h=E6++;d.start=V0(),d.staller=nM(d.stallTimeout),d.staller.wait(()=>{d.staller=null}),d.runner=R6(d,s,e,t).then(p=>{d.done=!0,d.result=p,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:L0(d,V0()),request:{method:e,params:as(t)},provider:this})},p=>{d.done=!0,d.error=p,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:L0(d,V0()),request:{method:e,params:as(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:h,backend:L0(d,null),request:{method:e,params:as(t)},provider:this}),A+=d.weight}const c=[];i.forEach(d=>{d.done||!d.runner||(c.push(d.runner),d.staller&&c.push(d.staller.getPromise()))}),c.length&&(yield Promise.race(c));const u=i.filter(d=>d.done&&d.error==null);if(u.length>=this.quorum){const d=r(u);if(d!==void 0)return i.forEach(h=>{h.staller&&h.staller.cancel(),h.cancelled=!0}),d;a||(yield nM(100).getPromise()),a=!1}const f=i.reduce((d,h)=>{if(!h.done||h.error==null)return d;const p=h.error.code;return U6.indexOf(p)>=0&&(d[p]||(d[p]={error:h.error,weight:0}),d[p].weight+=h.weight),d},{});if(Object.keys(f).forEach(d=>{const h=f[d];if(h.weight<this.quorum)return;i.forEach(g=>{g.staller&&g.staller.cancel(),g.cancelled=!0});const p=h.error,m={};S6.forEach(g=>{p[g]!=null&&(m[g]=p[g])}),kc.throwError(p.reason||p.message,d,m)}),i.filter(d=>!d.done).length===0)break}return i.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),kc.throwError("failed to meet quorum",Ae.errors.SERVER_ERROR,{method:e,params:t,results:i.map(l=>L0(l)),provider:this})})}}const T6=null,Ly=new Ae($r),tg="84842078b09946638c03157f83405213";class N6 extends $U{constructor(e,t){const r=new RP(e,t),i=r.connection;i.password&&Ly.throwError("INFURA WebSocket project secrets unsupported",Ae.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Ie(this,"apiKey",r.projectId),Ie(this,"projectId",r.projectId),Ie(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===tg}}class RP extends ac{static getWebSocketProvider(e,t){return new N6(e,t)}static getApiKey(e){const t={apiKey:tg,projectId:tg,projectSecret:null};return e==null||(typeof e=="string"?t.projectId=e:e.projectSecret!=null?(Ly.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),Ly.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:Ly.throwError("unsupported network",Ae.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(s,o)=>(t.projectId===tg&&bC(),Promise.resolve(!0))};return t.projectSecret!=null&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===tg}}const sx=new Ae($r),D6="ETHERS_JS_SHARED";class k6 extends ac{static getApiKey(e){return e&&typeof e!="string"&&sx.throwArgumentError("invalid apiKey","apiKey",e),e||D6}static getUrl(e,t){sx.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:sx.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const rM=new Ae($r),iM="62e1ad51b37b8e00394bda3b";class V6 extends ac{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?t.applicationId=iM:typeof e=="string"?t.applicationId=e:e.applicationSecretKey!=null?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:rM.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:rM.throwError("unsupported network",Ae.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${r}/v1/lb/${t.applicationId}`,s={headers:{},url:i};return t.applicationSecretKey!=null&&(s.user="",s.password=t.applicationSecretKey),s}isCommunityResource(){return this.applicationId===iM}}const sM=new Ae($r);let L6=1;function oM(n,e){const t="Web3LegacyFetcher";return function(r,i){const s={method:r,params:i,id:L6++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:t,request:as(s),provider:this}),e(s,(l,A)=>{if(l)return this.emit("debug",{action:"response",fetcher:t,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:t,request:s,response:A,provider:this}),A.error){const c=new Error(A.error.message);return c.code=A.error.code,c.data=A.error.data,a(c)}o(A.result)})})}}function P6(n){return function(e,t){t==null&&(t=[]);const r={method:e,params:t};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:as(r),provider:this}),n.request(r).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:r,error:i,provider:this}),i})}}class qU extends Kg{constructor(e,t){e==null&&sM.throwArgumentError("missing provider","provider",e);let r=null,i=null,s=null;typeof e=="function"?(r="unknown:",i=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),s=e,e.request?(r===""&&(r="eip-1193:"),i=P6(e)):e.sendAsync?i=oM(e,e.sendAsync.bind(e)):e.send?i=oM(e,e.send.bind(e)):sM.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Ie(this,"jsonRpcFetchFunc",i),Ie(this,"provider",s)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const aM=new Ae($r);function W6(n,e){if(n==null&&(n="homestead"),typeof n=="string"){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new Kg(n);case"ws":case"wss":return new $U(n);default:aM.throwArgumentError("unsupported URL scheme","network",n)}}const t=_3(n);return(!t||!t._defaultProvider)&&aM.throwError("unsupported getDefaultProvider network",Ae.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),t._defaultProvider({FallbackProvider:M6,AlchemyProvider:QP,AnkrProvider:w6,CloudflareProvider:b6,EtherscanProvider:I6,InfuraProvider:RP,JsonRpcProvider:Kg,NodesmithProvider:k6,PocketProvider:V6,Web3Provider:qU,IpcProvider:T6},e)}var O6=!0,ox="Invariant failed";function pl(n,e){if(!n){if(O6)throw new Error(ox);var t=typeof e=="function"?e():e,r=t?"".concat(ox,": ").concat(t):ox;throw new Error(r)}}var Uo;(function(n){n.Update="Web3ReactUpdate",n.Error="Web3ReactError",n.Deactivate="Web3ReactDeactivate"})(Uo||(Uo={}));function jg(){return jg=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jg.apply(this,arguments)}function MP(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,$g(n,e)}function q1(n){return q1=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q1(n)}function $g(n,e){return $g=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$g(n,e)}function G6(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Py(n,e,t){return G6()?Py=Reflect.construct:Py=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&$g(A,o.prototype),A},Py.apply(null,arguments)}function Z6(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function RB(n){var e=typeof Map=="function"?new Map:void 0;return RB=function(r){if(r===null||!Z6(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Py(r,arguments,q1(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$g(i,r)},RB(n)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function lM(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function TP(n){if(typeof n=="string"){n=n.replace(/^Ox/,"0x");var e=Number.parseInt(n,n.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&pl(!1),e}else return Number.isInteger(n)||pl(!1),n}function NP(n){typeof n=="string"&&n.match(/^(0x)?[0-9a-fA-F]{40}$/)||pl(!1);for(var e=n.substring(0,2)==="0x"?n:"0x"+n,t=e.toLowerCase().substring(2).split(""),r=new Uint8Array(40),i=0;i<40;i++)r[i]=t[i].charCodeAt(0);for(var s=lt(er(r)),o=0;o<40;o+=2)s[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(s[o>>1]&15)>=8&&(t[o+1]=t[o+1].toUpperCase());var a="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==a&&pl(!1),a}var AM=function(e,t){try{var r=function(o){return Promise.resolve(Promise.all([t.chainId===void 0?e.getChainId():t.chainId,t.account===void 0?e.getAccount():t.account])).then(function(a){var l=a[0],A=a[1],c=TP(l);if(e.supportedChainIds&&!e.supportedChainIds.includes(c))throw new DP(c,e.supportedChainIds);var u=A===null?A:NP(A);return{provider:o,chainId:c,account:u}})},i=t.provider===void 0;return Promise.resolve(i?Promise.resolve(e.getProvider()).then(r):r(t.provider))}catch(s){return Promise.reject(s)}},P0=function(n){MP(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t}return e}(RB(Error)),DP=function(n){MP(e,n);function e(t,r){var i;return i=n.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+t+". Supported chain ids are: "+r+".",i}return e}(RB(Error)),mr;(function(n){n[n.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",n[n.UPDATE=1]="UPDATE",n[n.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",n[n.ERROR=3]="ERROR",n[n.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",n[n.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(mr||(mr={}));function J6(n,e){var t=e.type,r=e.payload;switch(t){case mr.ACTIVATE_CONNECTOR:{var i=r.connector,s=r.provider,o=r.chainId,a=r.account,l=r.onError;return{connector:i,provider:s,chainId:o,account:a,onError:l}}case mr.UPDATE:{var A=r.provider,c=r.chainId,u=r.account;return jg({},n,A===void 0?{}:{provider:A},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case mr.UPDATE_FROM_ERROR:{var f=r.provider,d=r.chainId,h=r.account;return jg({},n,f===void 0?{}:{provider:f},d===void 0?{}:{chainId:d},h===void 0?{}:{account:h},{error:void 0})}case mr.ERROR:{var p=r.error,m=n.connector,g=n.onError;return{connector:m,error:p,onError:g}}case mr.ERROR_FROM_ACTIVATION:{var v=r.connector,y=r.error;return{connector:v,error:y}}case mr.DEACTIVATE_CONNECTOR:return{}}}function H6(){var n=me.useReducer(J6,{}),e=n[0],t=n[1],r=e.connector,i=e.provider,s=e.chainId,o=e.account,a=e.onError,l=e.error,A=me.useRef(-1);A.current+=1;var c=me.useCallback(function(m,g,v){v===void 0&&(v=!1);try{var y=A.current,w=!1;return Promise.resolve(lM(function(){return Promise.resolve(m.activate().then(function(C){return w=!0,C})).then(function(C){return Promise.resolve(AM(m,C)).then(function(b){if(A.current>y)throw new P0;t({type:mr.ACTIVATE_CONNECTOR,payload:jg({connector:m},b,{onError:g})})})})},function(C){if(C instanceof P0)w&&m.deactivate();else{if(v)throw w&&m.deactivate(),C;g?(w&&m.deactivate(),g(C)):t({type:mr.ERROR_FROM_ACTIVATION,payload:{connector:m,error:C}})}}))}catch(C){return Promise.reject(C)}},[]),u=me.useCallback(function(m){t({type:mr.ERROR,payload:{error:m}})},[]),f=me.useCallback(function(){t({type:mr.DEACTIVATE_CONNECTOR})},[]),d=me.useCallback(function(m){try{if(!r)throw Error("This should never happen, it's just so Typescript stops complaining");var g=A.current;return Promise.resolve(function(){if(l)return lM(function(){return Promise.resolve(AM(r,m)).then(function(C){if(A.current>g)throw new P0;t({type:mr.UPDATE_FROM_ERROR,payload:C})})},function(C){C instanceof P0||(a?a(C):t({type:mr.ERROR,payload:{error:C}}))});var v=m.chainId===void 0?void 0:TP(m.chainId);if(v!==void 0&&r.supportedChainIds&&!r.supportedChainIds.includes(v)){var y=new DP(v,r.supportedChainIds);a?a(y):t({type:mr.ERROR,payload:{error:y}})}else{var w=typeof m.account=="string"?NP(m.account):m.account;t({type:mr.UPDATE,payload:{provider:m.provider,chainId:v,account:w}})}}())}catch(v){return Promise.reject(v)}},[r,l,a]),h=me.useCallback(function(m){a?a(m):t({type:mr.ERROR,payload:{error:m}})},[a]),p=me.useCallback(function(){t({type:mr.DEACTIVATE_CONNECTOR})},[]);return me.useEffect(function(){return function(){r&&r.deactivate()}},[r]),me.useEffect(function(){return r&&r.on(Uo.Update,d).on(Uo.Error,h).on(Uo.Deactivate,p),function(){r&&r.off(Uo.Update,d).off(Uo.Error,h).off(Uo.Deactivate,p)}},[r,d,h,p]),{connector:r,provider:i,chainId:s,account:o,activate:c,setError:u,deactivate:f,error:l}}var kP="primary",nd={};function z6(n){nd[n]&&pl(!1),nd[n]=me.createContext({activate:function(){try{return pl(!1),Promise.resolve()}catch(t){return Promise.reject(t)}},setError:function(){pl(!1)},deactivate:function(){pl(!1)},active:!1}),nd[n].displayName="Web3ReactContext - "+n;var e=nd[n].Provider;return function(r){var i=r.getLibrary,s=r.children,o=H6(),a=o.connector,l=o.provider,A=o.chainId,c=o.account,u=o.activate,f=o.setError,d=o.deactivate,h=o.error,p=a!==void 0&&A!==void 0&&c!==void 0&&!h,m=me.useMemo(function(){return p&&A!==void 0&&Number.isInteger(A)&&a?i(l,a):void 0},[p,i,l,a,A]),g={connector:a,library:m,chainId:A,account:c,activate:u,setError:f,deactivate:d,active:p,error:h};return z.createElement(e,{value:g},s)}}var Y6=z6(kP);function X6(n){return n===void 0&&(n=kP),Object.keys(nd).includes(n)||pl(!1),nd[n]}function K6(n){return me.useContext(X6(n))}var eF={},VP={exports:{}},gs={},LP={exports:{}},PP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(T,V){var G=T.length;T.push(V);e:for(;0<G;){var P=G-1>>>1,U=T[P];if(0<i(U,V))T[P]=V,T[G]=U,G=P;else break e}}function t(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var V=T[0],G=T.pop();if(G!==V){T[0]=G;e:for(var P=0,U=T.length,H=U>>>1;P<H;){var oe=2*(P+1)-1,k=T[oe],K=oe+1,ne=T[K];if(0>i(k,G))K<U&&0>i(ne,k)?(T[P]=ne,T[K]=G,P=K):(T[P]=k,T[oe]=G,P=oe);else if(K<U&&0>i(ne,G))T[P]=ne,T[K]=G,P=K;else break e}}return V}function i(T,V){var G=T.sortIndex-V.sortIndex;return G!==0?G:T.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],A=[],c=1,u=null,f=3,d=!1,h=!1,p=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var V=t(A);V!==null;){if(V.callback===null)r(A);else if(V.startTime<=T)r(A),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(A)}}function w(T){if(p=!1,y(T),!h)if(t(l)!==null)h=!0,M(C);else{var V=t(A);V!==null&&D(w,V.startTime-T)}}function C(T,V){h=!1,p&&(p=!1,g(x),x=-1),d=!0;var G=f;try{for(y(V),u=t(l);u!==null&&(!(u.expirationTime>V)||T&&!Z());){var P=u.callback;if(typeof P=="function"){u.callback=null,f=u.priorityLevel;var U=P(u.expirationTime<=V);V=n.unstable_now(),typeof U=="function"?u.callback=U:u===t(l)&&r(l),y(V)}else r(l);u=t(l)}if(u!==null)var H=!0;else{var oe=t(A);oe!==null&&D(w,oe.startTime-V),H=!1}return H}finally{u=null,f=G,d=!1}}var b=!1,F=null,x=-1,S=5,R=-1;function Z(){return!(n.unstable_now()-R<S)}function Y(){if(F!==null){var T=n.unstable_now();R=T;var V=!0;try{V=F(!0,T)}finally{V?Q():(b=!1,F=null)}}else b=!1}var Q;if(typeof v=="function")Q=function(){v(Y)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,E=B.port2;B.port1.onmessage=Y,Q=function(){E.postMessage(null)}}else Q=function(){m(Y,0)};function M(T){F=T,b||(b=!0,Q())}function D(T,V){x=m(function(){T(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(T){T.callback=null},n.unstable_continueExecution=function(){h||d||(h=!0,M(C))},n.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<T?Math.floor(1e3/T):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(T){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var G=f;f=V;try{return T()}finally{f=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(T,V){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var G=f;f=T;try{return V()}finally{f=G}},n.unstable_scheduleCallback=function(T,V,G){var P=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?P+G:P):G=P,T){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=G+U,T={id:c++,callback:V,priorityLevel:T,startTime:G,expirationTime:U,sortIndex:-1},G>P?(T.sortIndex=G,e(A,T),t(l)===null&&T===t(A)&&(p?(g(x),x=-1):p=!0,D(w,G-P))):(T.sortIndex=U,e(l,T),h||d||(h=!0,M(C))),T},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(T){var V=f;return function(){var G=f;f=V;try{return T.apply(this,arguments)}finally{f=G}}}})(PP);LP.exports=PP;var j6=LP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WP=me,cs=j6;function Se(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OP=new Set,qg={};function Iu(n,e){$d(n,e),$d(n+"Capture",e)}function $d(n,e){for(qg[n]=e,n=0;n<e.length;n++)OP.add(e[n])}var Ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tF=Object.prototype.hasOwnProperty,$6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cM={},uM={};function q6(n){return tF.call(uM,n)?!0:tF.call(cM,n)?!1:$6.test(n)?uM[n]=!0:(cM[n]=!0,!1)}function eK(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function tK(n,e,t,r){if(e===null||typeof e>"u"||eK(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Nr[n]=new pi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Nr[e]=new pi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Nr[n]=new pi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Nr[n]=new pi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Nr[n]=new pi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Nr[n]=new pi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Nr[n]=new pi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Nr[n]=new pi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Nr[n]=new pi(n,5,!1,n.toLowerCase(),null,!1,!1)});var eS=/[\-:]([a-z])/g;function tS(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(eS,tS);Nr[e]=new pi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(eS,tS);Nr[e]=new pi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(eS,tS);Nr[e]=new pi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Nr[n]=new pi(n,1,!1,n.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new pi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Nr[n]=new pi(n,1,!1,n.toLowerCase(),null,!0,!0)});function nS(n,e,t,r){var i=Nr.hasOwnProperty(e)?Nr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tK(e,t,i,r)&&(t=null),r||i===null?q6(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ll=WP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W0=Symbol.for("react.element"),rd=Symbol.for("react.portal"),id=Symbol.for("react.fragment"),rS=Symbol.for("react.strict_mode"),nF=Symbol.for("react.profiler"),GP=Symbol.for("react.provider"),ZP=Symbol.for("react.context"),iS=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),iF=Symbol.for("react.suspense_list"),sS=Symbol.for("react.memo"),uA=Symbol.for("react.lazy"),JP=Symbol.for("react.offscreen"),fM=Symbol.iterator;function dp(n){return n===null||typeof n!="object"?null:(n=fM&&n[fM]||n["@@iterator"],typeof n=="function"?n:null)}var Qn=Object.assign,ax;function ng(n){if(ax===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ax=e&&e[1]||""}return`
`+ax+n}var lx=!1;function Ax(n,e){if(!n||lx)return"";lx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var r=A}Reflect.construct(n,[],e)}else{try{e.call()}catch(A){r=A}n.call(e.prototype)}else{try{throw Error()}catch(A){r=A}n()}}catch(A){if(A&&r&&typeof A.stack=="string"){for(var i=A.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{lx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ng(n):""}function nK(n){switch(n.tag){case 5:return ng(n.type);case 16:return ng("Lazy");case 13:return ng("Suspense");case 19:return ng("SuspenseList");case 0:case 2:case 15:return n=Ax(n.type,!1),n;case 11:return n=Ax(n.type.render,!1),n;case 1:return n=Ax(n.type,!0),n;default:return""}}function sF(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case id:return"Fragment";case rd:return"Portal";case nF:return"Profiler";case rS:return"StrictMode";case rF:return"Suspense";case iF:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ZP:return(n.displayName||"Context")+".Consumer";case GP:return(n._context.displayName||"Context")+".Provider";case iS:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case sS:return e=n.displayName||null,e!==null?e:sF(n.type)||"Memo";case uA:e=n._payload,n=n._init;try{return sF(n(e))}catch{}}return null}function rK(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sF(e);case 8:return e===rS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zA(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function HP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iK(n){var e=HP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function O0(n){n._valueTracker||(n._valueTracker=iK(n))}function zP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=HP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function MB(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function oF(n,e){var t=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function dM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=zA(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YP(n,e){e=e.checked,e!=null&&nS(n,"checked",e,!1)}function aF(n,e){YP(n,e);var t=zA(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?lF(n,e.type,t):e.hasOwnProperty("defaultValue")&&lF(n,e.type,zA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function hM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function lF(n,e,t){(e!=="number"||MB(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var rg=Array.isArray;function Ud(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+zA(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function AF(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function pM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Se(92));if(rg(t)){if(1<t.length)throw Error(Se(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:zA(t)}}function XP(n,e){var t=zA(e.value),r=zA(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function gM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function KP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cF(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?KP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var G0,jP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(G0=G0||document.createElement("div"),G0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=G0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function em(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Eg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sK=["Webkit","ms","Moz","O"];Object.keys(Eg).forEach(function(n){sK.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Eg[e]=Eg[n]})});function $P(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Eg.hasOwnProperty(n)&&Eg[n]?(""+e).trim():e+"px"}function qP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=$P(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var oK=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uF(n,e){if(e){if(oK[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function fF(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dF=null;function oS(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var hF=null,Sd=null,_d=null;function mM(n){if(n=r0(n)){if(typeof hF!="function")throw Error(Se(280));var e=n.stateNode;e&&(e=UC(e),hF(n.stateNode,n.type,e))}}function eW(n){Sd?_d?_d.push(n):_d=[n]:Sd=n}function tW(){if(Sd){var n=Sd,e=_d;if(_d=Sd=null,mM(n),e)for(n=0;n<e.length;n++)mM(e[n])}}function nW(n,e){return n(e)}function rW(){}var cx=!1;function iW(n,e,t){if(cx)return n(e,t);cx=!0;try{return nW(n,e,t)}finally{cx=!1,(Sd!==null||_d!==null)&&(rW(),tW())}}function tm(n,e){var t=n.stateNode;if(t===null)return null;var r=UC(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Se(231,e,typeof t));return t}var pF=!1;if(Ul)try{var hp={};Object.defineProperty(hp,"passive",{get:function(){pF=!0}}),window.addEventListener("test",hp,hp),window.removeEventListener("test",hp,hp)}catch{pF=!1}function aK(n,e,t,r,i,s,o,a,l){var A=Array.prototype.slice.call(arguments,3);try{e.apply(t,A)}catch(c){this.onError(c)}}var Ug=!1,TB=null,NB=!1,gF=null,lK={onError:function(n){Ug=!0,TB=n}};function AK(n,e,t,r,i,s,o,a,l){Ug=!1,TB=null,aK.apply(lK,arguments)}function cK(n,e,t,r,i,s,o,a,l){if(AK.apply(this,arguments),Ug){if(Ug){var A=TB;Ug=!1,TB=null}else throw Error(Se(198));NB||(NB=!0,gF=A)}}function Fu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function sW(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function vM(n){if(Fu(n)!==n)throw Error(Se(188))}function uK(n){var e=n.alternate;if(!e){if(e=Fu(n),e===null)throw Error(Se(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return vM(i),n;if(s===r)return vM(i),e;s=s.sibling}throw Error(Se(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(t.alternate!==r)throw Error(Se(190))}if(t.tag!==3)throw Error(Se(188));return t.stateNode.current===t?n:e}function oW(n){return n=uK(n),n!==null?aW(n):null}function aW(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=aW(n);if(e!==null)return e;n=n.sibling}return null}var lW=cs.unstable_scheduleCallback,yM=cs.unstable_cancelCallback,fK=cs.unstable_shouldYield,dK=cs.unstable_requestPaint,Hn=cs.unstable_now,hK=cs.unstable_getCurrentPriorityLevel,aS=cs.unstable_ImmediatePriority,AW=cs.unstable_UserBlockingPriority,DB=cs.unstable_NormalPriority,pK=cs.unstable_LowPriority,cW=cs.unstable_IdlePriority,xC=null,ya=null;function gK(n){if(ya&&typeof ya.onCommitFiberRoot=="function")try{ya.onCommitFiberRoot(xC,n,void 0,(n.current.flags&128)===128)}catch{}}var Ro=Math.clz32?Math.clz32:yK,mK=Math.log,vK=Math.LN2;function yK(n){return n>>>=0,n===0?32:31-(mK(n)/vK|0)|0}var Z0=64,J0=4194304;function ig(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function kB(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=ig(a):(s&=o,s!==0&&(r=ig(s)))}else o=t&~i,o!==0?r=ig(o):s!==0&&(r=ig(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ro(e),i=1<<t,r|=n[t],e&=~i;return r}function BK(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wK(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ro(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=BK(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function mF(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function uW(){var n=Z0;return Z0<<=1,!(Z0&4194240)&&(Z0=64),n}function ux(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function t0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ro(e),n[e]=t}function CK(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ro(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function lS(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ro(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var tn=0;function fW(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var dW,AS,hW,pW,gW,vF=!1,H0=[],_A=null,QA=null,RA=null,nm=new Map,rm=new Map,gA=[],bK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BM(n,e){switch(n){case"focusin":case"focusout":_A=null;break;case"dragenter":case"dragleave":QA=null;break;case"mouseover":case"mouseout":RA=null;break;case"pointerover":case"pointerout":nm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rm.delete(e.pointerId)}}function pp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=r0(e),e!==null&&AS(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function xK(n,e,t,r,i){switch(e){case"focusin":return _A=pp(_A,n,e,t,r,i),!0;case"dragenter":return QA=pp(QA,n,e,t,r,i),!0;case"mouseover":return RA=pp(RA,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return nm.set(s,pp(nm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rm.set(s,pp(rm.get(s)||null,n,e,t,r,i)),!0}return!1}function mW(n){var e=Pc(n.target);if(e!==null){var t=Fu(e);if(t!==null){if(e=t.tag,e===13){if(e=sW(t),e!==null){n.blockedOn=e,gW(n.priority,function(){hW(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=yF(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);dF=r,t.target.dispatchEvent(r),dF=null}else return e=r0(t),e!==null&&AS(e),n.blockedOn=t,!1;e.shift()}return!0}function wM(n,e,t){Wy(n)&&t.delete(e)}function IK(){vF=!1,_A!==null&&Wy(_A)&&(_A=null),QA!==null&&Wy(QA)&&(QA=null),RA!==null&&Wy(RA)&&(RA=null),nm.forEach(wM),rm.forEach(wM)}function gp(n,e){n.blockedOn===e&&(n.blockedOn=null,vF||(vF=!0,cs.unstable_scheduleCallback(cs.unstable_NormalPriority,IK)))}function im(n){function e(i){return gp(i,n)}if(0<H0.length){gp(H0[0],n);for(var t=1;t<H0.length;t++){var r=H0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(_A!==null&&gp(_A,n),QA!==null&&gp(QA,n),RA!==null&&gp(RA,n),nm.forEach(e),rm.forEach(e),t=0;t<gA.length;t++)r=gA[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<gA.length&&(t=gA[0],t.blockedOn===null);)mW(t),t.blockedOn===null&&gA.shift()}var Qd=Ll.ReactCurrentBatchConfig,VB=!0;function FK(n,e,t,r){var i=tn,s=Qd.transition;Qd.transition=null;try{tn=1,cS(n,e,t,r)}finally{tn=i,Qd.transition=s}}function EK(n,e,t,r){var i=tn,s=Qd.transition;Qd.transition=null;try{tn=4,cS(n,e,t,r)}finally{tn=i,Qd.transition=s}}function cS(n,e,t,r){if(VB){var i=yF(n,e,t,r);if(i===null)wx(n,e,r,LB,t),BM(n,r);else if(xK(i,n,e,t,r))r.stopPropagation();else if(BM(n,r),e&4&&-1<bK.indexOf(n)){for(;i!==null;){var s=r0(i);if(s!==null&&dW(s),s=yF(n,e,t,r),s===null&&wx(n,e,r,LB,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else wx(n,e,r,null,t)}}var LB=null;function yF(n,e,t,r){if(LB=null,n=oS(r),n=Pc(n),n!==null)if(e=Fu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=sW(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return LB=n,null}function vW(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hK()){case aS:return 1;case AW:return 4;case DB:case pK:return 16;case cW:return 536870912;default:return 16}default:return 16}}var BA=null,uS=null,Oy=null;function yW(){if(Oy)return Oy;var n,e=uS,t=e.length,r,i="value"in BA?BA.value:BA.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Oy=i.slice(n,1<r?1-r:void 0)}function Gy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function z0(){return!0}function CM(){return!1}function ms(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?z0:CM,this.isPropagationStopped=CM,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=z0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=z0)},persist:function(){},isPersistent:z0}),e}var Sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fS=ms(Sh),n0=Qn({},Sh,{view:0,detail:0}),UK=ms(n0),fx,dx,mp,IC=Qn({},n0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==mp&&(mp&&n.type==="mousemove"?(fx=n.screenX-mp.screenX,dx=n.screenY-mp.screenY):dx=fx=0,mp=n),fx)},movementY:function(n){return"movementY"in n?n.movementY:dx}}),bM=ms(IC),SK=Qn({},IC,{dataTransfer:0}),_K=ms(SK),QK=Qn({},n0,{relatedTarget:0}),hx=ms(QK),RK=Qn({},Sh,{animationName:0,elapsedTime:0,pseudoElement:0}),MK=ms(RK),TK=Qn({},Sh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),NK=ms(TK),DK=Qn({},Sh,{data:0}),xM=ms(DK),kK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PK(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=LK[n])?!!e[n]:!1}function dS(){return PK}var WK=Qn({},n0,{key:function(n){if(n.key){var e=kK[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Gy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VK[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dS,charCode:function(n){return n.type==="keypress"?Gy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Gy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),OK=ms(WK),GK=Qn({},IC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IM=ms(GK),ZK=Qn({},n0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dS}),JK=ms(ZK),HK=Qn({},Sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),zK=ms(HK),YK=Qn({},IC,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),XK=ms(YK),KK=[9,13,27,32],hS=Ul&&"CompositionEvent"in window,Sg=null;Ul&&"documentMode"in document&&(Sg=document.documentMode);var jK=Ul&&"TextEvent"in window&&!Sg,BW=Ul&&(!hS||Sg&&8<Sg&&11>=Sg),FM=String.fromCharCode(32),EM=!1;function wW(n,e){switch(n){case"keyup":return KK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CW(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var sd=!1;function $K(n,e){switch(n){case"compositionend":return CW(e);case"keypress":return e.which!==32?null:(EM=!0,FM);case"textInput":return n=e.data,n===FM&&EM?null:n;default:return null}}function qK(n,e){if(sd)return n==="compositionend"||!hS&&wW(n,e)?(n=yW(),Oy=uS=BA=null,sd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BW&&e.locale!=="ko"?null:e.data;default:return null}}var e8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!e8[n.type]:e==="textarea"}function bW(n,e,t,r){eW(r),e=PB(e,"onChange"),0<e.length&&(t=new fS("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var _g=null,sm=null;function t8(n){TW(n,0)}function FC(n){var e=ld(n);if(zP(e))return n}function n8(n,e){if(n==="change")return e}var xW=!1;if(Ul){var px;if(Ul){var gx="oninput"in document;if(!gx){var SM=document.createElement("div");SM.setAttribute("oninput","return;"),gx=typeof SM.oninput=="function"}px=gx}else px=!1;xW=px&&(!document.documentMode||9<document.documentMode)}function _M(){_g&&(_g.detachEvent("onpropertychange",IW),sm=_g=null)}function IW(n){if(n.propertyName==="value"&&FC(sm)){var e=[];bW(e,sm,n,oS(n)),iW(t8,e)}}function r8(n,e,t){n==="focusin"?(_M(),_g=e,sm=t,_g.attachEvent("onpropertychange",IW)):n==="focusout"&&_M()}function i8(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return FC(sm)}function s8(n,e){if(n==="click")return FC(e)}function o8(n,e){if(n==="input"||n==="change")return FC(e)}function a8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ko=typeof Object.is=="function"?Object.is:a8;function om(n,e){if(ko(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!tF.call(e,i)||!ko(n[i],e[i]))return!1}return!0}function QM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function RM(n,e){var t=QM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=QM(t)}}function FW(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?FW(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function EW(){for(var n=window,e=MB();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=MB(n.document)}return e}function pS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function l8(n){var e=EW(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&FW(t.ownerDocument.documentElement,t)){if(r!==null&&pS(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=RM(t,s);var o=RM(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var A8=Ul&&"documentMode"in document&&11>=document.documentMode,od=null,BF=null,Qg=null,wF=!1;function MM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;wF||od==null||od!==MB(r)||(r=od,"selectionStart"in r&&pS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qg&&om(Qg,r)||(Qg=r,r=PB(BF,"onSelect"),0<r.length&&(e=new fS("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=od)))}function Y0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ad={animationend:Y0("Animation","AnimationEnd"),animationiteration:Y0("Animation","AnimationIteration"),animationstart:Y0("Animation","AnimationStart"),transitionend:Y0("Transition","TransitionEnd")},mx={},UW={};Ul&&(UW=document.createElement("div").style,"AnimationEvent"in window||(delete ad.animationend.animation,delete ad.animationiteration.animation,delete ad.animationstart.animation),"TransitionEvent"in window||delete ad.transitionend.transition);function EC(n){if(mx[n])return mx[n];if(!ad[n])return n;var e=ad[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in UW)return mx[n]=e[t];return n}var SW=EC("animationend"),_W=EC("animationiteration"),QW=EC("animationstart"),RW=EC("transitionend"),MW=new Map,TM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lc(n,e){MW.set(n,e),Iu(e,[n])}for(var vx=0;vx<TM.length;vx++){var yx=TM[vx],c8=yx.toLowerCase(),u8=yx[0].toUpperCase()+yx.slice(1);lc(c8,"on"+u8)}lc(SW,"onAnimationEnd");lc(_W,"onAnimationIteration");lc(QW,"onAnimationStart");lc("dblclick","onDoubleClick");lc("focusin","onFocus");lc("focusout","onBlur");lc(RW,"onTransitionEnd");$d("onMouseEnter",["mouseout","mouseover"]);$d("onMouseLeave",["mouseout","mouseover"]);$d("onPointerEnter",["pointerout","pointerover"]);$d("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f8=new Set("cancel close invalid load scroll toggle".split(" ").concat(sg));function NM(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,cK(r,e,void 0,n),n.currentTarget=null}function TW(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,A=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;NM(i,a,A),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,A=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;NM(i,a,A),s=l}}}if(NB)throw n=gF,NB=!1,gF=null,n}function fn(n,e){var t=e[FF];t===void 0&&(t=e[FF]=new Set);var r=n+"__bubble";t.has(r)||(NW(e,n,2,!1),t.add(r))}function Bx(n,e,t){var r=0;e&&(r|=4),NW(t,n,r,e)}var X0="_reactListening"+Math.random().toString(36).slice(2);function am(n){if(!n[X0]){n[X0]=!0,OP.forEach(function(t){t!=="selectionchange"&&(f8.has(t)||Bx(t,!1,n),Bx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[X0]||(e[X0]=!0,Bx("selectionchange",!1,e))}}function NW(n,e,t,r){switch(vW(e)){case 1:var i=FK;break;case 4:i=EK;break;default:i=cS}t=i.bind(null,e,t,n),i=void 0,!pF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function wx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Pc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}iW(function(){var A=s,c=oS(t),u=[];e:{var f=MW.get(n);if(f!==void 0){var d=fS,h=n;switch(n){case"keypress":if(Gy(t)===0)break e;case"keydown":case"keyup":d=OK;break;case"focusin":h="focus",d=hx;break;case"focusout":h="blur",d=hx;break;case"beforeblur":case"afterblur":d=hx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=bM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=_K;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=JK;break;case SW:case _W:case QW:d=MK;break;case RW:d=zK;break;case"scroll":d=UK;break;case"wheel":d=XK;break;case"copy":case"cut":case"paste":d=NK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=IM}var p=(e&4)!==0,m=!p&&n==="scroll",g=p?f!==null?f+"Capture":null:f;p=[];for(var v=A,y;v!==null;){y=v;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=tm(v,g),w!=null&&p.push(lm(v,w,y)))),m)break;v=v.return}0<p.length&&(f=new d(f,h,null,t,c),u.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==dF&&(h=t.relatedTarget||t.fromElement)&&(Pc(h)||h[Sl]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(h=t.relatedTarget||t.toElement,d=A,h=h?Pc(h):null,h!==null&&(m=Fu(h),h!==m||h.tag!==5&&h.tag!==6)&&(h=null)):(d=null,h=A),d!==h)){if(p=bM,w="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(p=IM,w="onPointerLeave",g="onPointerEnter",v="pointer"),m=d==null?f:ld(d),y=h==null?f:ld(h),f=new p(w,v+"leave",d,t,c),f.target=m,f.relatedTarget=y,w=null,Pc(c)===A&&(p=new p(g,v+"enter",h,t,c),p.target=y,p.relatedTarget=m,w=p),m=w,d&&h)t:{for(p=d,g=h,v=0,y=p;y;y=Ou(y))v++;for(y=0,w=g;w;w=Ou(w))y++;for(;0<v-y;)p=Ou(p),v--;for(;0<y-v;)g=Ou(g),y--;for(;v--;){if(p===g||g!==null&&p===g.alternate)break t;p=Ou(p),g=Ou(g)}p=null}else p=null;d!==null&&DM(u,f,d,p,!1),h!==null&&m!==null&&DM(u,m,h,p,!0)}}e:{if(f=A?ld(A):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=n8;else if(UM(f))if(xW)C=o8;else{C=i8;var b=r8}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=s8);if(C&&(C=C(n,A))){bW(u,C,t,c);break e}b&&b(n,f,A),n==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&lF(f,"number",f.value)}switch(b=A?ld(A):window,n){case"focusin":(UM(b)||b.contentEditable==="true")&&(od=b,BF=A,Qg=null);break;case"focusout":Qg=BF=od=null;break;case"mousedown":wF=!0;break;case"contextmenu":case"mouseup":case"dragend":wF=!1,MM(u,t,c);break;case"selectionchange":if(A8)break;case"keydown":case"keyup":MM(u,t,c)}var F;if(hS)e:{switch(n){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else sd?wW(n,t)&&(x="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(x="onCompositionStart");x&&(BW&&t.locale!=="ko"&&(sd||x!=="onCompositionStart"?x==="onCompositionEnd"&&sd&&(F=yW()):(BA=c,uS="value"in BA?BA.value:BA.textContent,sd=!0)),b=PB(A,x),0<b.length&&(x=new xM(x,n,null,t,c),u.push({event:x,listeners:b}),F?x.data=F:(F=CW(t),F!==null&&(x.data=F)))),(F=jK?$K(n,t):qK(n,t))&&(A=PB(A,"onBeforeInput"),0<A.length&&(c=new xM("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:A}),c.data=F))}TW(u,e)})}function lm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function PB(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=tm(n,t),s!=null&&r.unshift(lm(n,s,i)),s=tm(n,e),s!=null&&r.push(lm(n,s,i))),n=n.return}return r}function Ou(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function DM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,A=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&A!==null&&(a=A,i?(l=tm(t,s),l!=null&&o.unshift(lm(t,l,a))):i||(l=tm(t,s),l!=null&&o.push(lm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var d8=/\r\n?/g,h8=/\u0000|\uFFFD/g;function kM(n){return(typeof n=="string"?n:""+n).replace(d8,`
`).replace(h8,"")}function K0(n,e,t){if(e=kM(e),kM(n)!==e&&t)throw Error(Se(425))}function WB(){}var CF=null,bF=null;function xF(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var IF=typeof setTimeout=="function"?setTimeout:void 0,p8=typeof clearTimeout=="function"?clearTimeout:void 0,VM=typeof Promise=="function"?Promise:void 0,g8=typeof queueMicrotask=="function"?queueMicrotask:typeof VM<"u"?function(n){return VM.resolve(null).then(n).catch(m8)}:IF;function m8(n){setTimeout(function(){throw n})}function Cx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),im(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);im(e)}function MA(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function LM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var _h=Math.random().toString(36).slice(2),aa="__reactFiber$"+_h,Am="__reactProps$"+_h,Sl="__reactContainer$"+_h,FF="__reactEvents$"+_h,v8="__reactListeners$"+_h,y8="__reactHandles$"+_h;function Pc(n){var e=n[aa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Sl]||t[aa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=LM(n);n!==null;){if(t=n[aa])return t;n=LM(n)}return e}n=t,t=n.parentNode}return null}function r0(n){return n=n[aa]||n[Sl],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ld(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Se(33))}function UC(n){return n[Am]||null}var EF=[],Ad=-1;function Ac(n){return{current:n}}function gn(n){0>Ad||(n.current=EF[Ad],EF[Ad]=null,Ad--)}function un(n,e){Ad++,EF[Ad]=n.current,n.current=e}var YA={},jr=Ac(YA),Si=Ac(!1),lu=YA;function qd(n,e){var t=n.type.contextTypes;if(!t)return YA;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function _i(n){return n=n.childContextTypes,n!=null}function OB(){gn(Si),gn(jr)}function PM(n,e,t){if(jr.current!==YA)throw Error(Se(168));un(jr,e),un(Si,t)}function DW(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Se(108,rK(n)||"Unknown",i));return Qn({},t,r)}function GB(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||YA,lu=jr.current,un(jr,n),un(Si,Si.current),!0}function WM(n,e,t){var r=n.stateNode;if(!r)throw Error(Se(169));t?(n=DW(n,e,lu),r.__reactInternalMemoizedMergedChildContext=n,gn(Si),gn(jr),un(jr,n)):gn(Si),un(Si,t)}var ul=null,SC=!1,bx=!1;function kW(n){ul===null?ul=[n]:ul.push(n)}function B8(n){SC=!0,kW(n)}function cc(){if(!bx&&ul!==null){bx=!0;var n=0,e=tn;try{var t=ul;for(tn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ul=null,SC=!1}catch(i){throw ul!==null&&(ul=ul.slice(n+1)),lW(aS,cc),i}finally{tn=e,bx=!1}}return null}var cd=[],ud=0,ZB=null,JB=0,Ns=[],Ds=0,Au=null,gl=1,ml="";function _c(n,e){cd[ud++]=JB,cd[ud++]=ZB,ZB=n,JB=e}function VW(n,e,t){Ns[Ds++]=gl,Ns[Ds++]=ml,Ns[Ds++]=Au,Au=n;var r=gl;n=ml;var i=32-Ro(r)-1;r&=~(1<<i),t+=1;var s=32-Ro(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gl=1<<32-Ro(e)+i|t<<i|r,ml=s+n}else gl=1<<s|t<<i|r,ml=n}function gS(n){n.return!==null&&(_c(n,1),VW(n,1,0))}function mS(n){for(;n===ZB;)ZB=cd[--ud],cd[ud]=null,JB=cd[--ud],cd[ud]=null;for(;n===Au;)Au=Ns[--Ds],Ns[Ds]=null,ml=Ns[--Ds],Ns[Ds]=null,gl=Ns[--Ds],Ns[Ds]=null}var ls=null,is=null,Cn=!1,So=null;function LW(n,e){var t=Ps(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function OM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ls=n,is=MA(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ls=n,is=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Au!==null?{id:gl,overflow:ml}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ps(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ls=n,is=null,!0):!1;default:return!1}}function UF(n){return(n.mode&1)!==0&&(n.flags&128)===0}function SF(n){if(Cn){var e=is;if(e){var t=e;if(!OM(n,e)){if(UF(n))throw Error(Se(418));e=MA(t.nextSibling);var r=ls;e&&OM(n,e)?LW(r,t):(n.flags=n.flags&-4097|2,Cn=!1,ls=n)}}else{if(UF(n))throw Error(Se(418));n.flags=n.flags&-4097|2,Cn=!1,ls=n}}}function GM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ls=n}function j0(n){if(n!==ls)return!1;if(!Cn)return GM(n),Cn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!xF(n.type,n.memoizedProps)),e&&(e=is)){if(UF(n))throw PW(),Error(Se(418));for(;e;)LW(n,e),e=MA(e.nextSibling)}if(GM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Se(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){is=MA(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}is=null}}else is=ls?MA(n.stateNode.nextSibling):null;return!0}function PW(){for(var n=is;n;)n=MA(n.nextSibling)}function eh(){is=ls=null,Cn=!1}function vS(n){So===null?So=[n]:So.push(n)}var w8=Ll.ReactCurrentBatchConfig;function Fo(n,e){if(n&&n.defaultProps){e=Qn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var HB=Ac(null),zB=null,fd=null,yS=null;function BS(){yS=fd=zB=null}function wS(n){var e=HB.current;gn(HB),n._currentValue=e}function _F(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Rd(n,e){zB=n,yS=fd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ei=!0),n.firstContext=null)}function qs(n){var e=n._currentValue;if(yS!==n)if(n={context:n,memoizedValue:e,next:null},fd===null){if(zB===null)throw Error(Se(308));fd=n,zB.dependencies={lanes:0,firstContext:n}}else fd=fd.next=n;return e}var Wc=null;function CS(n){Wc===null?Wc=[n]:Wc.push(n)}function WW(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,CS(e)):(t.next=i.next,i.next=t),e.interleaved=t,_l(n,r)}function _l(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fA=!1;function bS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OW(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Cl(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function TA(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_l(n,t)}return i=r.interleaved,i===null?(e.next=e,CS(r)):(e.next=i.next,i.next=e),r.interleaved=e,_l(n,t)}function Zy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,lS(n,t)}}function ZM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function YB(n,e,t,r){var i=n.updateQueue;fA=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,A=l.next;l.next=null,o===null?s=A:o.next=A,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=A:a.next=A,c.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,c=A=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=n,p=a;switch(f=e,d=t,p.tag){case 1:if(h=p.payload,typeof h=="function"){u=h.call(d,u,f);break e}u=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=p.payload,f=typeof h=="function"?h.call(d,u,f):h,f==null)break e;u=Qn({},u,f);break e;case 2:fA=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(A=c=d,l=u):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=u),i.baseState=l,i.firstBaseUpdate=A,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);uu|=o,n.lanes=o,n.memoizedState=u}}function JM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Se(191,i));i.call(r)}}}var GW=new WP.Component().refs;function QF(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Qn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var _C={isMounted:function(n){return(n=n._reactInternals)?Fu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=fi(),i=DA(n),s=Cl(r,i);s.payload=e,t!=null&&(s.callback=t),e=TA(n,s,i),e!==null&&(Mo(e,n,i,r),Zy(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=fi(),i=DA(n),s=Cl(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=TA(n,s,i),e!==null&&(Mo(e,n,i,r),Zy(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fi(),r=DA(n),i=Cl(t,r);i.tag=2,e!=null&&(i.callback=e),e=TA(n,i,r),e!==null&&(Mo(e,n,r,t),Zy(e,n,r))}};function HM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!om(t,r)||!om(i,s):!0}function ZW(n,e,t){var r=!1,i=YA,s=e.contextType;return typeof s=="object"&&s!==null?s=qs(s):(i=_i(e)?lu:jr.current,r=e.contextTypes,s=(r=r!=null)?qd(n,i):YA),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_C,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function zM(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&_C.enqueueReplaceState(e,e.state,null)}function RF(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=GW,bS(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qs(s):(s=_i(e)?lu:jr.current,i.context=qd(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(QF(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_C.enqueueReplaceState(i,i.state,null),YB(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function vp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Se(309));var r=t.stateNode}if(!r)throw Error(Se(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===GW&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Se(284));if(!t._owner)throw Error(Se(290,n))}return n}function $0(n,e){throw n=Object.prototype.toString.call(e),Error(Se(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function YM(n){var e=n._init;return e(n._payload)}function JW(n){function e(g,v){if(n){var y=g.deletions;y===null?(g.deletions=[v],g.flags|=16):y.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=kA(g,v),g.index=0,g.sibling=null,g}function s(g,v,y){return g.index=y,n?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags|=2,v):y):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,v,y,w){return v===null||v.tag!==6?(v=_x(y,g.mode,w),v.return=g,v):(v=i(v,y),v.return=g,v)}function l(g,v,y,w){var C=y.type;return C===id?c(g,v,y.props.children,w,y.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===uA&&YM(C)===v.type)?(w=i(v,y.props),w.ref=vp(g,v,y),w.return=g,w):(w=Ky(y.type,y.key,y.props,null,g.mode,w),w.ref=vp(g,v,y),w.return=g,w)}function A(g,v,y,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Qx(y,g.mode,w),v.return=g,v):(v=i(v,y.children||[]),v.return=g,v)}function c(g,v,y,w,C){return v===null||v.tag!==7?(v=$c(y,g.mode,w,C),v.return=g,v):(v=i(v,y),v.return=g,v)}function u(g,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=_x(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case W0:return y=Ky(v.type,v.key,v.props,null,g.mode,y),y.ref=vp(g,null,v),y.return=g,y;case rd:return v=Qx(v,g.mode,y),v.return=g,v;case uA:var w=v._init;return u(g,w(v._payload),y)}if(rg(v)||dp(v))return v=$c(v,g.mode,y,null),v.return=g,v;$0(g,v)}return null}function f(g,v,y,w){var C=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:a(g,v,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case W0:return y.key===C?l(g,v,y,w):null;case rd:return y.key===C?A(g,v,y,w):null;case uA:return C=y._init,f(g,v,C(y._payload),w)}if(rg(y)||dp(y))return C!==null?null:c(g,v,y,w,null);$0(g,y)}return null}function d(g,v,y,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,a(v,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case W0:return g=g.get(w.key===null?y:w.key)||null,l(v,g,w,C);case rd:return g=g.get(w.key===null?y:w.key)||null,A(v,g,w,C);case uA:var b=w._init;return d(g,v,y,b(w._payload),C)}if(rg(w)||dp(w))return g=g.get(y)||null,c(v,g,w,C,null);$0(v,w)}return null}function h(g,v,y,w){for(var C=null,b=null,F=v,x=v=0,S=null;F!==null&&x<y.length;x++){F.index>x?(S=F,F=null):S=F.sibling;var R=f(g,F,y[x],w);if(R===null){F===null&&(F=S);break}n&&F&&R.alternate===null&&e(g,F),v=s(R,v,x),b===null?C=R:b.sibling=R,b=R,F=S}if(x===y.length)return t(g,F),Cn&&_c(g,x),C;if(F===null){for(;x<y.length;x++)F=u(g,y[x],w),F!==null&&(v=s(F,v,x),b===null?C=F:b.sibling=F,b=F);return Cn&&_c(g,x),C}for(F=r(g,F);x<y.length;x++)S=d(F,g,x,y[x],w),S!==null&&(n&&S.alternate!==null&&F.delete(S.key===null?x:S.key),v=s(S,v,x),b===null?C=S:b.sibling=S,b=S);return n&&F.forEach(function(Z){return e(g,Z)}),Cn&&_c(g,x),C}function p(g,v,y,w){var C=dp(y);if(typeof C!="function")throw Error(Se(150));if(y=C.call(y),y==null)throw Error(Se(151));for(var b=C=null,F=v,x=v=0,S=null,R=y.next();F!==null&&!R.done;x++,R=y.next()){F.index>x?(S=F,F=null):S=F.sibling;var Z=f(g,F,R.value,w);if(Z===null){F===null&&(F=S);break}n&&F&&Z.alternate===null&&e(g,F),v=s(Z,v,x),b===null?C=Z:b.sibling=Z,b=Z,F=S}if(R.done)return t(g,F),Cn&&_c(g,x),C;if(F===null){for(;!R.done;x++,R=y.next())R=u(g,R.value,w),R!==null&&(v=s(R,v,x),b===null?C=R:b.sibling=R,b=R);return Cn&&_c(g,x),C}for(F=r(g,F);!R.done;x++,R=y.next())R=d(F,g,x,R.value,w),R!==null&&(n&&R.alternate!==null&&F.delete(R.key===null?x:R.key),v=s(R,v,x),b===null?C=R:b.sibling=R,b=R);return n&&F.forEach(function(Y){return e(g,Y)}),Cn&&_c(g,x),C}function m(g,v,y,w){if(typeof y=="object"&&y!==null&&y.type===id&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case W0:e:{for(var C=y.key,b=v;b!==null;){if(b.key===C){if(C=y.type,C===id){if(b.tag===7){t(g,b.sibling),v=i(b,y.props.children),v.return=g,g=v;break e}}else if(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===uA&&YM(C)===b.type){t(g,b.sibling),v=i(b,y.props),v.ref=vp(g,b,y),v.return=g,g=v;break e}t(g,b);break}else e(g,b);b=b.sibling}y.type===id?(v=$c(y.props.children,g.mode,w,y.key),v.return=g,g=v):(w=Ky(y.type,y.key,y.props,null,g.mode,w),w.ref=vp(g,v,y),w.return=g,g=w)}return o(g);case rd:e:{for(b=y.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){t(g,v.sibling),v=i(v,y.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Qx(y,g.mode,w),v.return=g,g=v}return o(g);case uA:return b=y._init,m(g,v,b(y._payload),w)}if(rg(y))return h(g,v,y,w);if(dp(y))return p(g,v,y,w);$0(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(t(g,v.sibling),v=i(v,y),v.return=g,g=v):(t(g,v),v=_x(y,g.mode,w),v.return=g,g=v),o(g)):t(g,v)}return m}var th=JW(!0),HW=JW(!1),i0={},Ba=Ac(i0),cm=Ac(i0),um=Ac(i0);function Oc(n){if(n===i0)throw Error(Se(174));return n}function xS(n,e){switch(un(um,e),un(cm,n),un(Ba,i0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cF(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=cF(e,n)}gn(Ba),un(Ba,e)}function nh(){gn(Ba),gn(cm),gn(um)}function zW(n){Oc(um.current);var e=Oc(Ba.current),t=cF(e,n.type);e!==t&&(un(cm,n),un(Ba,t))}function IS(n){cm.current===n&&(gn(Ba),gn(cm))}var En=Ac(0);function XB(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xx=[];function FS(){for(var n=0;n<xx.length;n++)xx[n]._workInProgressVersionPrimary=null;xx.length=0}var Jy=Ll.ReactCurrentDispatcher,Ix=Ll.ReactCurrentBatchConfig,cu=0,_n=null,lr=null,vr=null,KB=!1,Rg=!1,fm=0,C8=0;function Lr(){throw Error(Se(321))}function ES(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ko(n[t],e[t]))return!1;return!0}function US(n,e,t,r,i,s){if(cu=s,_n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jy.current=n===null||n.memoizedState===null?F8:E8,n=t(r,i),Rg){s=0;do{if(Rg=!1,fm=0,25<=s)throw Error(Se(301));s+=1,vr=lr=null,e.updateQueue=null,Jy.current=U8,n=t(r,i)}while(Rg)}if(Jy.current=jB,e=lr!==null&&lr.next!==null,cu=0,vr=lr=_n=null,KB=!1,e)throw Error(Se(300));return n}function SS(){var n=fm!==0;return fm=0,n}function ta(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?_n.memoizedState=vr=n:vr=vr.next=n,vr}function eo(){if(lr===null){var n=_n.alternate;n=n!==null?n.memoizedState:null}else n=lr.next;var e=vr===null?_n.memoizedState:vr.next;if(e!==null)vr=e,lr=n;else{if(n===null)throw Error(Se(310));lr=n,n={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},vr===null?_n.memoizedState=vr=n:vr=vr.next=n}return vr}function dm(n,e){return typeof e=="function"?e(n):e}function Fx(n){var e=eo(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var r=lr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,A=s;do{var c=A.lane;if((cu&c)===c)l!==null&&(l=l.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),r=A.hasEagerState?A.eagerState:n(r,A.action);else{var u={lane:c,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,_n.lanes|=c,uu|=c}A=A.next}while(A!==null&&A!==s);l===null?o=r:l.next=a,ko(r,e.memoizedState)||(Ei=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,_n.lanes|=s,uu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ex(n){var e=eo(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);ko(s,e.memoizedState)||(Ei=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function YW(){}function XW(n,e){var t=_n,r=eo(),i=e(),s=!ko(r.memoizedState,i);if(s&&(r.memoizedState=i,Ei=!0),r=r.queue,_S($W.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||vr!==null&&vr.memoizedState.tag&1){if(t.flags|=2048,hm(9,jW.bind(null,t,r,i,e),void 0,null),Cr===null)throw Error(Se(349));cu&30||KW(t,e,i)}return i}function KW(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function jW(n,e,t,r){e.value=t,e.getSnapshot=r,qW(e)&&eO(n)}function $W(n,e,t){return t(function(){qW(e)&&eO(n)})}function qW(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ko(n,t)}catch{return!0}}function eO(n){var e=_l(n,1);e!==null&&Mo(e,n,1,-1)}function XM(n){var e=ta();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dm,lastRenderedState:n},e.queue=n,n=n.dispatch=I8.bind(null,_n,n),[e.memoizedState,n]}function hm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=_n.updateQueue,e===null?(e={lastEffect:null,stores:null},_n.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function tO(){return eo().memoizedState}function Hy(n,e,t,r){var i=ta();_n.flags|=n,i.memoizedState=hm(1|e,t,void 0,r===void 0?null:r)}function QC(n,e,t,r){var i=eo();r=r===void 0?null:r;var s=void 0;if(lr!==null){var o=lr.memoizedState;if(s=o.destroy,r!==null&&ES(r,o.deps)){i.memoizedState=hm(e,t,s,r);return}}_n.flags|=n,i.memoizedState=hm(1|e,t,s,r)}function KM(n,e){return Hy(8390656,8,n,e)}function _S(n,e){return QC(2048,8,n,e)}function nO(n,e){return QC(4,2,n,e)}function rO(n,e){return QC(4,4,n,e)}function iO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function sO(n,e,t){return t=t!=null?t.concat([n]):null,QC(4,4,iO.bind(null,e,n),t)}function QS(){}function oO(n,e){var t=eo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ES(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function aO(n,e){var t=eo();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ES(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function lO(n,e,t){return cu&21?(ko(t,e)||(t=uW(),_n.lanes|=t,uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ei=!0),n.memoizedState=t)}function b8(n,e){var t=tn;tn=t!==0&&4>t?t:4,n(!0);var r=Ix.transition;Ix.transition={};try{n(!1),e()}finally{tn=t,Ix.transition=r}}function AO(){return eo().memoizedState}function x8(n,e,t){var r=DA(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},cO(n))uO(e,t);else if(t=WW(n,e,t,r),t!==null){var i=fi();Mo(t,n,r,i),fO(t,e,r)}}function I8(n,e,t){var r=DA(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(cO(n))uO(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,ko(a,o)){var l=e.interleaved;l===null?(i.next=i,CS(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=WW(n,e,i,r),t!==null&&(i=fi(),Mo(t,n,r,i),fO(t,e,r))}}function cO(n){var e=n.alternate;return n===_n||e!==null&&e===_n}function uO(n,e){Rg=KB=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function fO(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,lS(n,t)}}var jB={readContext:qs,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},F8={readContext:qs,useCallback:function(n,e){return ta().memoizedState=[n,e===void 0?null:e],n},useContext:qs,useEffect:KM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Hy(4194308,4,iO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Hy(4194308,4,n,e)},useInsertionEffect:function(n,e){return Hy(4,2,n,e)},useMemo:function(n,e){var t=ta();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ta();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=x8.bind(null,_n,n),[r.memoizedState,n]},useRef:function(n){var e=ta();return n={current:n},e.memoizedState=n},useState:XM,useDebugValue:QS,useDeferredValue:function(n){return ta().memoizedState=n},useTransition:function(){var n=XM(!1),e=n[0];return n=b8.bind(null,n[1]),ta().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=_n,i=ta();if(Cn){if(t===void 0)throw Error(Se(407));t=t()}else{if(t=e(),Cr===null)throw Error(Se(349));cu&30||KW(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,KM($W.bind(null,r,s,n),[n]),r.flags|=2048,hm(9,jW.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=ta(),e=Cr.identifierPrefix;if(Cn){var t=ml,r=gl;t=(r&~(1<<32-Ro(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=fm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=C8++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},E8={readContext:qs,useCallback:oO,useContext:qs,useEffect:_S,useImperativeHandle:sO,useInsertionEffect:nO,useLayoutEffect:rO,useMemo:aO,useReducer:Fx,useRef:tO,useState:function(){return Fx(dm)},useDebugValue:QS,useDeferredValue:function(n){var e=eo();return lO(e,lr.memoizedState,n)},useTransition:function(){var n=Fx(dm)[0],e=eo().memoizedState;return[n,e]},useMutableSource:YW,useSyncExternalStore:XW,useId:AO,unstable_isNewReconciler:!1},U8={readContext:qs,useCallback:oO,useContext:qs,useEffect:_S,useImperativeHandle:sO,useInsertionEffect:nO,useLayoutEffect:rO,useMemo:aO,useReducer:Ex,useRef:tO,useState:function(){return Ex(dm)},useDebugValue:QS,useDeferredValue:function(n){var e=eo();return lr===null?e.memoizedState=n:lO(e,lr.memoizedState,n)},useTransition:function(){var n=Ex(dm)[0],e=eo().memoizedState;return[n,e]},useMutableSource:YW,useSyncExternalStore:XW,useId:AO,unstable_isNewReconciler:!1};function rh(n,e){try{var t="",r=e;do t+=nK(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Ux(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function MF(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var S8=typeof WeakMap=="function"?WeakMap:Map;function dO(n,e,t){t=Cl(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){qB||(qB=!0,GF=r),MF(n,e)},t}function hO(n,e,t){t=Cl(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){MF(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){MF(n,e),typeof r!="function"&&(NA===null?NA=new Set([this]):NA.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function jM(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new S8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=G8.bind(null,n,e,t),e.then(n,n))}function $M(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function qM(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Cl(-1,1),e.tag=2,TA(t,e,1))),t.lanes|=1),n)}var _8=Ll.ReactCurrentOwner,Ei=!1;function si(n,e,t,r){e.child=n===null?HW(e,null,t,r):th(e,n.child,t,r)}function e2(n,e,t,r,i){t=t.render;var s=e.ref;return Rd(e,i),r=US(n,e,t,r,s,i),t=SS(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ql(n,e,i)):(Cn&&t&&gS(e),e.flags|=1,si(n,e,r,i),e.child)}function t2(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!LS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,pO(n,e,s,r,i)):(n=Ky(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:om,t(o,r)&&n.ref===e.ref)return Ql(n,e,i)}return e.flags|=1,n=kA(s,r),n.ref=e.ref,n.return=e,e.child=n}function pO(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(om(s,r)&&n.ref===e.ref)if(Ei=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ei=!0);else return e.lanes=n.lanes,Ql(n,e,i)}return TF(n,e,t,r,i)}function gO(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(hd,Ki),Ki|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,un(hd,Ki),Ki|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,un(hd,Ki),Ki|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,un(hd,Ki),Ki|=r;return si(n,e,i,t),e.child}function mO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function TF(n,e,t,r,i){var s=_i(t)?lu:jr.current;return s=qd(e,s),Rd(e,i),t=US(n,e,t,r,s,i),r=SS(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ql(n,e,i)):(Cn&&r&&gS(e),e.flags|=1,si(n,e,t,i),e.child)}function n2(n,e,t,r,i){if(_i(t)){var s=!0;GB(e)}else s=!1;if(Rd(e,i),e.stateNode===null)zy(n,e),ZW(e,t,r),RF(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,A=t.contextType;typeof A=="object"&&A!==null?A=qs(A):(A=_i(t)?lu:jr.current,A=qd(e,A));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==A)&&zM(e,o,r,A),fA=!1;var f=e.memoizedState;o.state=f,YB(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Si.current||fA?(typeof c=="function"&&(QF(e,t,c,r),l=e.memoizedState),(a=fA||HM(e,t,a,r,f,l,A))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=A,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OW(n,e),a=e.memoizedProps,A=e.type===e.elementType?a:Fo(e.type,a),o.props=A,u=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=qs(l):(l=_i(t)?lu:jr.current,l=qd(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||f!==l)&&zM(e,o,r,l),fA=!1,f=e.memoizedState,o.state=f,YB(e,r,o,i);var h=e.memoizedState;a!==u||f!==h||Si.current||fA?(typeof d=="function"&&(QF(e,t,d,r),h=e.memoizedState),(A=fA||HM(e,t,A,r,f,h,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=l,r=A):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return NF(n,e,t,r,s,i)}function NF(n,e,t,r,i,s){mO(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&WM(e,t,!1),Ql(n,e,s);r=e.stateNode,_8.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=th(e,n.child,null,s),e.child=th(e,null,a,s)):si(n,e,a,s),e.memoizedState=r.state,i&&WM(e,t,!0),e.child}function vO(n){var e=n.stateNode;e.pendingContext?PM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&PM(n,e.context,!1),xS(n,e.containerInfo)}function r2(n,e,t,r,i){return eh(),vS(i),e.flags|=256,si(n,e,t,r),e.child}var DF={dehydrated:null,treeContext:null,retryLane:0};function kF(n){return{baseLanes:n,cachePool:null,transitions:null}}function yO(n,e,t){var r=e.pendingProps,i=En.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),un(En,i&1),n===null)return SF(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=TC(o,r,0,null),n=$c(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=kF(t),e.memoizedState=DF,n):RS(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Q8(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=kA(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=kA(a,s):(s=$c(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?kF(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=DF,r}return s=n.child,n=s.sibling,r=kA(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function RS(n,e){return e=TC({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function q0(n,e,t,r){return r!==null&&vS(r),th(e,n.child,null,t),n=RS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Q8(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Ux(Error(Se(422))),q0(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=TC({mode:"visible",children:r.children},i,0,null),s=$c(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&th(e,n.child,null,o),e.child.memoizedState=kF(o),e.memoizedState=DF,s);if(!(e.mode&1))return q0(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Se(419)),r=Ux(s,r,void 0),q0(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ei||a){if(r=Cr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_l(n,i),Mo(r,n,i,-1))}return VS(),r=Ux(Error(Se(421))),q0(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Z8.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,is=MA(i.nextSibling),ls=e,Cn=!0,So=null,n!==null&&(Ns[Ds++]=gl,Ns[Ds++]=ml,Ns[Ds++]=Au,gl=n.id,ml=n.overflow,Au=e),e=RS(e,r.children),e.flags|=4096,e)}function i2(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),_F(n.return,e,t)}function Sx(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function BO(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(si(n,e,r.children,t),r=En.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&i2(n,t,e);else if(n.tag===19)i2(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(un(En,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&XB(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Sx(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&XB(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}Sx(e,!0,t,null,s);break;case"together":Sx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ql(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Se(153));if(e.child!==null){for(n=e.child,t=kA(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=kA(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function R8(n,e,t){switch(e.tag){case 3:vO(e),eh();break;case 5:zW(e);break;case 1:_i(e.type)&&GB(e);break;case 4:xS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;un(HB,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(un(En,En.current&1),e.flags|=128,null):t&e.child.childLanes?yO(n,e,t):(un(En,En.current&1),n=Ql(n,e,t),n!==null?n.sibling:null);un(En,En.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BO(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),un(En,En.current),r)break;return null;case 22:case 23:return e.lanes=0,gO(n,e,t)}return Ql(n,e,t)}var wO,VF,CO,bO;wO=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};VF=function(){};CO=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Oc(Ba.current);var s=null;switch(t){case"input":i=oF(n,i),r=oF(n,r),s=[];break;case"select":i=Qn({},i,{value:void 0}),r=Qn({},r,{value:void 0}),s=[];break;case"textarea":i=AF(n,i),r=AF(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=WB)}uF(t,r);var o;t=null;for(A in i)if(!r.hasOwnProperty(A)&&i.hasOwnProperty(A)&&i[A]!=null)if(A==="style"){var a=i[A];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(qg.hasOwnProperty(A)?s||(s=[]):(s=s||[]).push(A,null));for(A in r){var l=r[A];if(a=i!=null?i[A]:void 0,r.hasOwnProperty(A)&&l!==a&&(l!=null||a!=null))if(A==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(A,t)),t=l;else A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(A,l)):A==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(A,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(qg.hasOwnProperty(A)?(l!=null&&A==="onScroll"&&fn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(A,l))}t&&(s=s||[]).push("style",t);var A=s;(e.updateQueue=A)&&(e.flags|=4)}};bO=function(n,e,t,r){t!==r&&(e.flags|=4)};function yp(n,e){if(!Cn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Pr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function M8(n,e,t){var r=e.pendingProps;switch(mS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pr(e),null;case 1:return _i(e.type)&&OB(),Pr(e),null;case 3:return r=e.stateNode,nh(),gn(Si),gn(jr),FS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(j0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,So!==null&&(HF(So),So=null))),VF(n,e),Pr(e),null;case 5:IS(e);var i=Oc(um.current);if(t=e.type,n!==null&&e.stateNode!=null)CO(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Se(166));return Pr(e),null}if(n=Oc(Ba.current),j0(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[aa]=e,r[Am]=s,n=(e.mode&1)!==0,t){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(i=0;i<sg.length;i++)fn(sg[i],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":dM(r,s),fn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fn("invalid",r);break;case"textarea":pM(r,s),fn("invalid",r)}uF(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&K0(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&K0(r.textContent,a,n),i=["children",""+a]):qg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fn("scroll",r)}switch(t){case"input":O0(r),hM(r,s,!0);break;case"textarea":O0(r),gM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=WB)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=KP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[aa]=e,n[Am]=r,wO(n,e,!1,!1),e.stateNode=n;e:{switch(o=fF(t,r),t){case"dialog":fn("cancel",n),fn("close",n),i=r;break;case"iframe":case"object":case"embed":fn("load",n),i=r;break;case"video":case"audio":for(i=0;i<sg.length;i++)fn(sg[i],n);i=r;break;case"source":fn("error",n),i=r;break;case"img":case"image":case"link":fn("error",n),fn("load",n),i=r;break;case"details":fn("toggle",n),i=r;break;case"input":dM(n,r),i=oF(n,r),fn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Qn({},r,{value:void 0}),fn("invalid",n);break;case"textarea":pM(n,r),i=AF(n,r),fn("invalid",n);break;default:i=r}uF(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?qP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&em(n,l):typeof l=="number"&&em(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&fn("scroll",n):l!=null&&nS(n,s,l,o))}switch(t){case"input":O0(n),hM(n,r,!1);break;case"textarea":O0(n),gM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+zA(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ud(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ud(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=WB)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Pr(e),null;case 6:if(n&&e.stateNode!=null)bO(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Se(166));if(t=Oc(um.current),Oc(Ba.current),j0(e)){if(r=e.stateNode,t=e.memoizedProps,r[aa]=e,(s=r.nodeValue!==t)&&(n=ls,n!==null))switch(n.tag){case 3:K0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&K0(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[aa]=e,e.stateNode=r}return Pr(e),null;case 13:if(gn(En),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Cn&&is!==null&&e.mode&1&&!(e.flags&128))PW(),eh(),e.flags|=98560,s=!1;else if(s=j0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Se(317));s[aa]=e}else eh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pr(e),s=!1}else So!==null&&(HF(So),So=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||En.current&1?fr===0&&(fr=3):VS())),e.updateQueue!==null&&(e.flags|=4),Pr(e),null);case 4:return nh(),VF(n,e),n===null&&am(e.stateNode.containerInfo),Pr(e),null;case 10:return wS(e.type._context),Pr(e),null;case 17:return _i(e.type)&&OB(),Pr(e),null;case 19:if(gn(En),s=e.memoizedState,s===null)return Pr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yp(s,!1);else{if(fr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=XB(n),o!==null){for(e.flags|=128,yp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return un(En,En.current&1|2),e.child}n=n.sibling}s.tail!==null&&Hn()>ih&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304)}else{if(!r)if(n=XB(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Cn)return Pr(e),null}else 2*Hn()-s.renderingStartTime>ih&&t!==1073741824&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Hn(),e.sibling=null,t=En.current,un(En,r?t&1|2:t&1),e):(Pr(e),null);case 22:case 23:return kS(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ki&1073741824&&(Pr(e),e.subtreeFlags&6&&(e.flags|=8192)):Pr(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function T8(n,e){switch(mS(e),e.tag){case 1:return _i(e.type)&&OB(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return nh(),gn(Si),gn(jr),FS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return IS(e),null;case 13:if(gn(En),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));eh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return gn(En),null;case 4:return nh(),null;case 10:return wS(e.type._context),null;case 22:case 23:return kS(),null;case 24:return null;default:return null}}var ev=!1,Jr=!1,N8=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function dd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Nn(n,e,r)}else t.current=null}function LF(n,e,t){try{t()}catch(r){Nn(n,e,r)}}var s2=!1;function D8(n,e){if(CF=VB,n=EW(),pS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,A=0,c=0,u=n,f=null;t:for(;;){for(var d;u!==t||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(d=u.firstChild)!==null;)f=u,u=d;for(;;){if(u===n)break t;if(f===t&&++A===i&&(a=o),f===s&&++c===r&&(l=o),(d=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(bF={focusedElem:n,selectionRange:t},VB=!1,Ze=e;Ze!==null;)if(e=Ze,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ze=n;else for(;Ze!==null;){e=Ze;try{var h=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var p=h.memoizedProps,m=h.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?p:Fo(e.type,p),m);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(w){Nn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}return h=s2,s2=!1,h}function Mg(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&LF(e,t,s)}i=i.next}while(i!==r)}}function RC(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function PF(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function xO(n){var e=n.alternate;e!==null&&(n.alternate=null,xO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[aa],delete e[Am],delete e[FF],delete e[v8],delete e[y8])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function IO(n){return n.tag===5||n.tag===3||n.tag===4}function o2(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||IO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function WF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=WB));else if(r!==4&&(n=n.child,n!==null))for(WF(n,e,t),n=n.sibling;n!==null;)WF(n,e,t),n=n.sibling}function OF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(OF(n,e,t),n=n.sibling;n!==null;)OF(n,e,t),n=n.sibling}var Er=null,Eo=!1;function zl(n,e,t){for(t=t.child;t!==null;)FO(n,e,t),t=t.sibling}function FO(n,e,t){if(ya&&typeof ya.onCommitFiberUnmount=="function")try{ya.onCommitFiberUnmount(xC,t)}catch{}switch(t.tag){case 5:Jr||dd(t,e);case 6:var r=Er,i=Eo;Er=null,zl(n,e,t),Er=r,Eo=i,Er!==null&&(Eo?(n=Er,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Er.removeChild(t.stateNode));break;case 18:Er!==null&&(Eo?(n=Er,t=t.stateNode,n.nodeType===8?Cx(n.parentNode,t):n.nodeType===1&&Cx(n,t),im(n)):Cx(Er,t.stateNode));break;case 4:r=Er,i=Eo,Er=t.stateNode.containerInfo,Eo=!0,zl(n,e,t),Er=r,Eo=i;break;case 0:case 11:case 14:case 15:if(!Jr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&LF(t,e,o),i=i.next}while(i!==r)}zl(n,e,t);break;case 1:if(!Jr&&(dd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Nn(t,e,a)}zl(n,e,t);break;case 21:zl(n,e,t);break;case 22:t.mode&1?(Jr=(r=Jr)||t.memoizedState!==null,zl(n,e,t),Jr=r):zl(n,e,t);break;default:zl(n,e,t)}}function a2(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new N8),e.forEach(function(r){var i=J8.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function po(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Er=a.stateNode,Eo=!1;break e;case 3:Er=a.stateNode.containerInfo,Eo=!0;break e;case 4:Er=a.stateNode.containerInfo,Eo=!0;break e}a=a.return}if(Er===null)throw Error(Se(160));FO(s,o,i),Er=null,Eo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(A){Nn(i,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EO(e,n),e=e.sibling}function EO(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(po(e,n),Zo(n),r&4){try{Mg(3,n,n.return),RC(3,n)}catch(p){Nn(n,n.return,p)}try{Mg(5,n,n.return)}catch(p){Nn(n,n.return,p)}}break;case 1:po(e,n),Zo(n),r&512&&t!==null&&dd(t,t.return);break;case 5:if(po(e,n),Zo(n),r&512&&t!==null&&dd(t,t.return),n.flags&32){var i=n.stateNode;try{em(i,"")}catch(p){Nn(n,n.return,p)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&YP(i,s),fF(a,o);var A=fF(a,s);for(o=0;o<l.length;o+=2){var c=l[o],u=l[o+1];c==="style"?qP(i,u):c==="dangerouslySetInnerHTML"?jP(i,u):c==="children"?em(i,u):nS(i,c,u,A)}switch(a){case"input":aF(i,s);break;case"textarea":XP(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Ud(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ud(i,!!s.multiple,s.defaultValue,!0):Ud(i,!!s.multiple,s.multiple?[]:"",!1))}i[Am]=s}catch(p){Nn(n,n.return,p)}}break;case 6:if(po(e,n),Zo(n),r&4){if(n.stateNode===null)throw Error(Se(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(p){Nn(n,n.return,p)}}break;case 3:if(po(e,n),Zo(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{im(e.containerInfo)}catch(p){Nn(n,n.return,p)}break;case 4:po(e,n),Zo(n);break;case 13:po(e,n),Zo(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(NS=Hn())),r&4&&a2(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Jr=(A=Jr)||c,po(e,n),Jr=A):po(e,n),Zo(n),r&8192){if(A=n.memoizedState!==null,(n.stateNode.isHidden=A)&&!c&&n.mode&1)for(Ze=n,c=n.child;c!==null;){for(u=Ze=c;Ze!==null;){switch(f=Ze,d=f.child,f.tag){case 0:case 11:case 14:case 15:Mg(4,f,f.return);break;case 1:dd(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(p){Nn(r,t,p)}}break;case 5:dd(f,f.return);break;case 22:if(f.memoizedState!==null){A2(u);continue}}d!==null?(d.return=f,Ze=d):A2(u)}c=c.sibling}e:for(c=null,u=n;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,A?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=$P("display",o))}catch(p){Nn(n,n.return,p)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=A?"":u.memoizedProps}catch(p){Nn(n,n.return,p)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:po(e,n),Zo(n),r&4&&a2(n);break;case 21:break;default:po(e,n),Zo(n)}}function Zo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(IO(t)){var r=t;break e}t=t.return}throw Error(Se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(em(i,""),r.flags&=-33);var s=o2(n);OF(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=o2(n);WF(n,a,o);break;default:throw Error(Se(161))}}catch(l){Nn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function k8(n,e,t){Ze=n,UO(n)}function UO(n,e,t){for(var r=(n.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ev;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jr;a=ev;var A=Jr;if(ev=o,(Jr=l)&&!A)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?c2(i):l!==null?(l.return=o,Ze=l):c2(i);for(;s!==null;)Ze=s,UO(s),s=s.sibling;Ze=i,ev=a,Jr=A}l2(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):l2(n)}}function l2(n){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jr||RC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Fo(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&JM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}JM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var c=A.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&im(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Jr||e.flags&512&&PF(e)}catch(f){Nn(e,e.return,f)}}if(e===n){Ze=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function A2(n){for(;Ze!==null;){var e=Ze;if(e===n){Ze=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function c2(n){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{RC(4,e)}catch(l){Nn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Nn(e,i,l)}}var s=e.return;try{PF(e)}catch(l){Nn(e,s,l)}break;case 5:var o=e.return;try{PF(e)}catch(l){Nn(e,o,l)}}}catch(l){Nn(e,e.return,l)}if(e===n){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var V8=Math.ceil,$B=Ll.ReactCurrentDispatcher,MS=Ll.ReactCurrentOwner,Hs=Ll.ReactCurrentBatchConfig,Wt=0,Cr=null,tr=null,Mr=0,Ki=0,hd=Ac(0),fr=0,pm=null,uu=0,MC=0,TS=0,Tg=null,bi=null,NS=0,ih=1/0,ol=null,qB=!1,GF=null,NA=null,tv=!1,wA=null,ew=0,Ng=0,ZF=null,Yy=-1,Xy=0;function fi(){return Wt&6?Hn():Yy!==-1?Yy:Yy=Hn()}function DA(n){return n.mode&1?Wt&2&&Mr!==0?Mr&-Mr:w8.transition!==null?(Xy===0&&(Xy=uW()),Xy):(n=tn,n!==0||(n=window.event,n=n===void 0?16:vW(n.type)),n):1}function Mo(n,e,t,r){if(50<Ng)throw Ng=0,ZF=null,Error(Se(185));t0(n,t,r),(!(Wt&2)||n!==Cr)&&(n===Cr&&(!(Wt&2)&&(MC|=t),fr===4&&mA(n,Mr)),Qi(n,r),t===1&&Wt===0&&!(e.mode&1)&&(ih=Hn()+500,SC&&cc()))}function Qi(n,e){var t=n.callbackNode;wK(n,e);var r=kB(n,n===Cr?Mr:0);if(r===0)t!==null&&yM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&yM(t),e===1)n.tag===0?B8(u2.bind(null,n)):kW(u2.bind(null,n)),g8(function(){!(Wt&6)&&cc()}),t=null;else{switch(fW(r)){case 1:t=aS;break;case 4:t=AW;break;case 16:t=DB;break;case 536870912:t=cW;break;default:t=DB}t=DO(t,SO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function SO(n,e){if(Yy=-1,Xy=0,Wt&6)throw Error(Se(327));var t=n.callbackNode;if(Md()&&n.callbackNode!==t)return null;var r=kB(n,n===Cr?Mr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=tw(n,r);else{e=r;var i=Wt;Wt|=2;var s=QO();(Cr!==n||Mr!==e)&&(ol=null,ih=Hn()+500,jc(n,e));do try{W8();break}catch(a){_O(n,a)}while(1);BS(),$B.current=s,Wt=i,tr!==null?e=0:(Cr=null,Mr=0,e=fr)}if(e!==0){if(e===2&&(i=mF(n),i!==0&&(r=i,e=JF(n,i))),e===1)throw t=pm,jc(n,0),mA(n,r),Qi(n,Hn()),t;if(e===6)mA(n,r);else{if(i=n.current.alternate,!(r&30)&&!L8(i)&&(e=tw(n,r),e===2&&(s=mF(n),s!==0&&(r=s,e=JF(n,s))),e===1))throw t=pm,jc(n,0),mA(n,r),Qi(n,Hn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Se(345));case 2:Qc(n,bi,ol);break;case 3:if(mA(n,r),(r&130023424)===r&&(e=NS+500-Hn(),10<e)){if(kB(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){fi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=IF(Qc.bind(null,n,bi,ol),e);break}Qc(n,bi,ol);break;case 4:if(mA(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ro(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V8(r/1960))-r,10<r){n.timeoutHandle=IF(Qc.bind(null,n,bi,ol),r);break}Qc(n,bi,ol);break;case 5:Qc(n,bi,ol);break;default:throw Error(Se(329))}}}return Qi(n,Hn()),n.callbackNode===t?SO.bind(null,n):null}function JF(n,e){var t=Tg;return n.current.memoizedState.isDehydrated&&(jc(n,e).flags|=256),n=tw(n,e),n!==2&&(e=bi,bi=t,e!==null&&HF(e)),n}function HF(n){bi===null?bi=n:bi.push.apply(bi,n)}function L8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ko(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mA(n,e){for(e&=~TS,e&=~MC,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ro(e),r=1<<t;n[t]=-1,e&=~r}}function u2(n){if(Wt&6)throw Error(Se(327));Md();var e=kB(n,0);if(!(e&1))return Qi(n,Hn()),null;var t=tw(n,e);if(n.tag!==0&&t===2){var r=mF(n);r!==0&&(e=r,t=JF(n,r))}if(t===1)throw t=pm,jc(n,0),mA(n,e),Qi(n,Hn()),t;if(t===6)throw Error(Se(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qc(n,bi,ol),Qi(n,Hn()),null}function DS(n,e){var t=Wt;Wt|=1;try{return n(e)}finally{Wt=t,Wt===0&&(ih=Hn()+500,SC&&cc())}}function fu(n){wA!==null&&wA.tag===0&&!(Wt&6)&&Md();var e=Wt;Wt|=1;var t=Hs.transition,r=tn;try{if(Hs.transition=null,tn=1,n)return n()}finally{tn=r,Hs.transition=t,Wt=e,!(Wt&6)&&cc()}}function kS(){Ki=hd.current,gn(hd)}function jc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,p8(t)),tr!==null)for(t=tr.return;t!==null;){var r=t;switch(mS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&OB();break;case 3:nh(),gn(Si),gn(jr),FS();break;case 5:IS(r);break;case 4:nh();break;case 13:gn(En);break;case 19:gn(En);break;case 10:wS(r.type._context);break;case 22:case 23:kS()}t=t.return}if(Cr=n,tr=n=kA(n.current,null),Mr=Ki=e,fr=0,pm=null,TS=MC=uu=0,bi=Tg=null,Wc!==null){for(e=0;e<Wc.length;e++)if(t=Wc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}Wc=null}return n}function _O(n,e){do{var t=tr;try{if(BS(),Jy.current=jB,KB){for(var r=_n.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}KB=!1}if(cu=0,vr=lr=_n=null,Rg=!1,fm=0,MS.current=null,t===null||t.return===null){fr=1,pm=e,tr=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Mr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var A=l,c=a,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=$M(o);if(d!==null){d.flags&=-257,qM(d,o,a,s,e),d.mode&1&&jM(s,A,e),e=d,l=A;var h=e.updateQueue;if(h===null){var p=new Set;p.add(l),e.updateQueue=p}else h.add(l);break e}else{if(!(e&1)){jM(s,A,e),VS();break e}l=Error(Se(426))}}else if(Cn&&a.mode&1){var m=$M(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),qM(m,o,a,s,e),vS(rh(l,a));break e}}s=l=rh(l,a),fr!==4&&(fr=2),Tg===null?Tg=[s]:Tg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=dO(s,l,e);ZM(s,g);break e;case 1:a=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(NA===null||!NA.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=hO(s,a,e);ZM(s,w);break e}}s=s.return}while(s!==null)}MO(t)}catch(C){e=C,tr===t&&t!==null&&(tr=t=t.return);continue}break}while(1)}function QO(){var n=$B.current;return $B.current=jB,n===null?jB:n}function VS(){(fr===0||fr===3||fr===2)&&(fr=4),Cr===null||!(uu&268435455)&&!(MC&268435455)||mA(Cr,Mr)}function tw(n,e){var t=Wt;Wt|=2;var r=QO();(Cr!==n||Mr!==e)&&(ol=null,jc(n,e));do try{P8();break}catch(i){_O(n,i)}while(1);if(BS(),Wt=t,$B.current=r,tr!==null)throw Error(Se(261));return Cr=null,Mr=0,fr}function P8(){for(;tr!==null;)RO(tr)}function W8(){for(;tr!==null&&!fK();)RO(tr)}function RO(n){var e=NO(n.alternate,n,Ki);n.memoizedProps=n.pendingProps,e===null?MO(n):tr=e,MS.current=null}function MO(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=T8(t,e),t!==null){t.flags&=32767,tr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{fr=6,tr=null;return}}else if(t=M8(t,e,Ki),t!==null){tr=t;return}if(e=e.sibling,e!==null){tr=e;return}tr=e=n}while(e!==null);fr===0&&(fr=5)}function Qc(n,e,t){var r=tn,i=Hs.transition;try{Hs.transition=null,tn=1,O8(n,e,t,r)}finally{Hs.transition=i,tn=r}return null}function O8(n,e,t,r){do Md();while(wA!==null);if(Wt&6)throw Error(Se(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Se(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(CK(n,s),n===Cr&&(tr=Cr=null,Mr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tv||(tv=!0,DO(DB,function(){return Md(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Hs.transition,Hs.transition=null;var o=tn;tn=1;var a=Wt;Wt|=4,MS.current=null,D8(n,t),EO(t,n),l8(bF),VB=!!CF,bF=CF=null,n.current=t,k8(t),dK(),Wt=a,tn=o,Hs.transition=s}else n.current=t;if(tv&&(tv=!1,wA=n,ew=i),s=n.pendingLanes,s===0&&(NA=null),gK(t.stateNode),Qi(n,Hn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(qB)throw qB=!1,n=GF,GF=null,n;return ew&1&&n.tag!==0&&Md(),s=n.pendingLanes,s&1?n===ZF?Ng++:(Ng=0,ZF=n):Ng=0,cc(),null}function Md(){if(wA!==null){var n=fW(ew),e=Hs.transition,t=tn;try{if(Hs.transition=null,tn=16>n?16:n,wA===null)var r=!1;else{if(n=wA,wA=null,ew=0,Wt&6)throw Error(Se(331));var i=Wt;for(Wt|=4,Ze=n.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var A=a[l];for(Ze=A;Ze!==null;){var c=Ze;switch(c.tag){case 0:case 11:case 15:Mg(8,c,s)}var u=c.child;if(u!==null)u.return=c,Ze=u;else for(;Ze!==null;){c=Ze;var f=c.sibling,d=c.return;if(xO(c),c===A){Ze=null;break}if(f!==null){f.return=d,Ze=f;break}Ze=d}}}var h=s.alternate;if(h!==null){var p=h.child;if(p!==null){h.child=null;do{var m=p.sibling;p.sibling=null,p=m}while(p!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ze=g;break e}Ze=s.return}}var v=n.current;for(Ze=v;Ze!==null;){o=Ze;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Ze=y;else e:for(o=v;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:RC(9,a)}}catch(C){Nn(a,a.return,C)}if(a===o){Ze=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ze=w;break e}Ze=a.return}}if(Wt=i,cc(),ya&&typeof ya.onPostCommitFiberRoot=="function")try{ya.onPostCommitFiberRoot(xC,n)}catch{}r=!0}return r}finally{tn=t,Hs.transition=e}}return!1}function f2(n,e,t){e=rh(t,e),e=dO(n,e,1),n=TA(n,e,1),e=fi(),n!==null&&(t0(n,1,e),Qi(n,e))}function Nn(n,e,t){if(n.tag===3)f2(n,n,t);else for(;e!==null;){if(e.tag===3){f2(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(NA===null||!NA.has(r))){n=rh(t,n),n=hO(e,n,1),e=TA(e,n,1),n=fi(),e!==null&&(t0(e,1,n),Qi(e,n));break}}e=e.return}}function G8(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=fi(),n.pingedLanes|=n.suspendedLanes&t,Cr===n&&(Mr&t)===t&&(fr===4||fr===3&&(Mr&130023424)===Mr&&500>Hn()-NS?jc(n,0):TS|=t),Qi(n,e)}function TO(n,e){e===0&&(n.mode&1?(e=J0,J0<<=1,!(J0&130023424)&&(J0=4194304)):e=1);var t=fi();n=_l(n,e),n!==null&&(t0(n,e,t),Qi(n,t))}function Z8(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),TO(n,t)}function J8(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(e),TO(n,t)}var NO;NO=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Si.current)Ei=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ei=!1,R8(n,e,t);Ei=!!(n.flags&131072)}else Ei=!1,Cn&&e.flags&1048576&&VW(e,JB,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;zy(n,e),n=e.pendingProps;var i=qd(e,jr.current);Rd(e,t),i=US(null,e,r,n,i,t);var s=SS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(r)?(s=!0,GB(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bS(e),i.updater=_C,e.stateNode=i,i._reactInternals=e,RF(e,r,n,t),e=NF(null,e,r,!0,s,t)):(e.tag=0,Cn&&s&&gS(e),si(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(zy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=z8(r),n=Fo(r,n),i){case 0:e=TF(null,e,r,n,t);break e;case 1:e=n2(null,e,r,n,t);break e;case 11:e=e2(null,e,r,n,t);break e;case 14:e=t2(null,e,r,Fo(r.type,n),t);break e}throw Error(Se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),TF(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),n2(n,e,r,i,t);case 3:e:{if(vO(e),n===null)throw Error(Se(387));r=e.pendingProps,s=e.memoizedState,i=s.element,OW(n,e),YB(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=rh(Error(Se(423)),e),e=r2(n,e,r,t,i);break e}else if(r!==i){i=rh(Error(Se(424)),e),e=r2(n,e,r,t,i);break e}else for(is=MA(e.stateNode.containerInfo.firstChild),ls=e,Cn=!0,So=null,t=HW(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(eh(),r===i){e=Ql(n,e,t);break e}si(n,e,r,t)}e=e.child}return e;case 5:return zW(e),n===null&&SF(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,xF(r,i)?o=null:s!==null&&xF(r,s)&&(e.flags|=32),mO(n,e),si(n,e,o,t),e.child;case 6:return n===null&&SF(e),null;case 13:return yO(n,e,t);case 4:return xS(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=th(e,null,r,t):si(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),e2(n,e,r,i,t);case 7:return si(n,e,e.pendingProps,t),e.child;case 8:return si(n,e,e.pendingProps.children,t),e.child;case 12:return si(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,un(HB,r._currentValue),r._currentValue=o,s!==null)if(ko(s.value,o)){if(s.children===i.children&&!Si.current){e=Ql(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Cl(-1,t&-t),l.tag=2;var A=s.updateQueue;if(A!==null){A=A.shared;var c=A.pending;c===null?l.next=l:(l.next=c.next,c.next=l),A.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),_F(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Se(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),_F(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}si(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rd(e,t),i=qs(i),r=r(i),e.flags|=1,si(n,e,r,t),e.child;case 14:return r=e.type,i=Fo(r,e.pendingProps),i=Fo(r.type,i),t2(n,e,r,i,t);case 15:return pO(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fo(r,i),zy(n,e),e.tag=1,_i(r)?(n=!0,GB(e)):n=!1,Rd(e,t),ZW(e,r,i),RF(e,r,i,t),NF(null,e,r,!0,n,t);case 19:return BO(n,e,t);case 22:return gO(n,e,t)}throw Error(Se(156,e.tag))};function DO(n,e){return lW(n,e)}function H8(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(n,e,t,r){return new H8(n,e,t,r)}function LS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function z8(n){if(typeof n=="function")return LS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===iS)return 11;if(n===sS)return 14}return 2}function kA(n,e){var t=n.alternate;return t===null?(t=Ps(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ky(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")LS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case id:return $c(t.children,i,s,e);case rS:o=8,i|=8;break;case nF:return n=Ps(12,t,e,i|2),n.elementType=nF,n.lanes=s,n;case rF:return n=Ps(13,t,e,i),n.elementType=rF,n.lanes=s,n;case iF:return n=Ps(19,t,e,i),n.elementType=iF,n.lanes=s,n;case JP:return TC(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case GP:o=10;break e;case ZP:o=9;break e;case iS:o=11;break e;case sS:o=14;break e;case uA:o=16,r=null;break e}throw Error(Se(130,n==null?n:typeof n,""))}return e=Ps(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function $c(n,e,t,r){return n=Ps(7,n,r,e),n.lanes=t,n}function TC(n,e,t,r){return n=Ps(22,n,r,e),n.elementType=JP,n.lanes=t,n.stateNode={isHidden:!1},n}function _x(n,e,t){return n=Ps(6,n,null,e),n.lanes=t,n}function Qx(n,e,t){return e=Ps(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Y8(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function PS(n,e,t,r,i,s,o,a,l){return n=new Y8(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},bS(s),n}function X8(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function kO(n){if(!n)return YA;n=n._reactInternals;e:{if(Fu(n)!==n||n.tag!==1)throw Error(Se(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(n.tag===1){var t=n.type;if(_i(t))return DW(n,t,e)}return e}function VO(n,e,t,r,i,s,o,a,l){return n=PS(t,r,!0,n,i,s,o,a,l),n.context=kO(null),t=n.current,r=fi(),i=DA(t),s=Cl(r,i),s.callback=e??null,TA(t,s,i),n.current.lanes=i,t0(n,i,r),Qi(n,r),n}function NC(n,e,t,r){var i=e.current,s=fi(),o=DA(i);return t=kO(t),e.context===null?e.context=t:e.pendingContext=t,e=Cl(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=TA(i,e,o),n!==null&&(Mo(n,i,o,s),Zy(n,i,o)),o}function nw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function d2(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function WS(n,e){d2(n,e),(n=n.alternate)&&d2(n,e)}function K8(){return null}var LO=typeof reportError=="function"?reportError:function(n){console.error(n)};function OS(n){this._internalRoot=n}DC.prototype.render=OS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Se(409));NC(n,e,null,null)};DC.prototype.unmount=OS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;fu(function(){NC(null,n,null,null)}),e[Sl]=null}};function DC(n){this._internalRoot=n}DC.prototype.unstable_scheduleHydration=function(n){if(n){var e=pW();n={blockedOn:null,target:n,priority:e};for(var t=0;t<gA.length&&e!==0&&e<gA[t].priority;t++);gA.splice(t,0,n),t===0&&mW(n)}};function GS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function kC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function h2(){}function j8(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var A=nw(o);s.call(A)}}var o=VO(e,r,n,0,null,!1,!1,"",h2);return n._reactRootContainer=o,n[Sl]=o.current,am(n.nodeType===8?n.parentNode:n),fu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var A=nw(l);a.call(A)}}var l=PS(n,0,!1,null,null,!1,!1,"",h2);return n._reactRootContainer=l,n[Sl]=l.current,am(n.nodeType===8?n.parentNode:n),fu(function(){NC(e,l,t,r)}),l}function VC(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=nw(o);a.call(l)}}NC(e,o,n,i)}else o=j8(t,e,n,i,r);return nw(o)}dW=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ig(e.pendingLanes);t!==0&&(lS(e,t|1),Qi(e,Hn()),!(Wt&6)&&(ih=Hn()+500,cc()))}break;case 13:fu(function(){var r=_l(n,1);if(r!==null){var i=fi();Mo(r,n,1,i)}}),WS(n,1)}};AS=function(n){if(n.tag===13){var e=_l(n,134217728);if(e!==null){var t=fi();Mo(e,n,134217728,t)}WS(n,134217728)}};hW=function(n){if(n.tag===13){var e=DA(n),t=_l(n,e);if(t!==null){var r=fi();Mo(t,n,e,r)}WS(n,e)}};pW=function(){return tn};gW=function(n,e){var t=tn;try{return tn=n,e()}finally{tn=t}};hF=function(n,e,t){switch(e){case"input":if(aF(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=UC(r);if(!i)throw Error(Se(90));zP(r),aF(r,i)}}}break;case"textarea":XP(n,t);break;case"select":e=t.value,e!=null&&Ud(n,!!t.multiple,e,!1)}};nW=DS;rW=fu;var $8={usingClientEntryPoint:!1,Events:[r0,ld,UC,eW,tW,DS]},Bp={findFiberByHostInstance:Pc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},q8={bundleType:Bp.bundleType,version:Bp.version,rendererPackageName:Bp.rendererPackageName,rendererConfig:Bp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=oW(n),n===null?null:n.stateNode},findFiberByHostInstance:Bp.findFiberByHostInstance||K8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{xC=nv.inject(q8),ya=nv}catch{}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$8;gs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GS(e))throw Error(Se(200));return X8(n,e,null,t)};gs.createRoot=function(n,e){if(!GS(n))throw Error(Se(299));var t=!1,r="",i=LO;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=PS(n,1,!1,null,null,t,!1,r,i),n[Sl]=e.current,am(n.nodeType===8?n.parentNode:n),new OS(e)};gs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Se(188)):(n=Object.keys(n).join(","),Error(Se(268,n)));return n=oW(e),n=n===null?null:n.stateNode,n};gs.flushSync=function(n){return fu(n)};gs.hydrate=function(n,e,t){if(!kC(e))throw Error(Se(200));return VC(null,n,e,!0,t)};gs.hydrateRoot=function(n,e,t){if(!GS(n))throw Error(Se(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=LO;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=VO(e,null,n,1,t??null,i,!1,s,o),n[Sl]=e.current,am(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new DC(e)};gs.render=function(n,e,t){if(!kC(e))throw Error(Se(200));return VC(null,n,e,!1,t)};gs.unmountComponentAtNode=function(n){if(!kC(n))throw Error(Se(40));return n._reactRootContainer?(fu(function(){VC(null,null,n,!1,function(){n._reactRootContainer=null,n[Sl]=null})}),!0):!1};gs.unstable_batchedUpdates=DS;gs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!kC(t))throw Error(Se(200));if(n==null||n._reactInternals===void 0)throw Error(Se(38));return VC(n,e,t,!1,r)};gs.version="18.2.0-next-9e3b772b8-20220608";function PO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PO)}catch(n){console.error(n)}}PO(),VP.exports=gs;var ej=VP.exports,p2=ej;eF.createRoot=p2.createRoot,eF.hydrateRoot=p2.hydrateRoot;const tj="/CharacterStudio/assets/cc_bgm_balanced-f542698c.wav",vs=me.createContext(),nj=({children:n})=>{const[e,t]=me.useState(!1),r=z.useRef(null),i=()=>{t(!1);const o=r.current;o.src=tj,o.loop=!0,o.volume=0,o.play();let a=0;const l=5,A=setInterval(()=>{a=Math.max(a+1/(10*l*60),1),a>=1&&clearInterval(A),o.volume=a},1e3/60)},s=()=>{t(!0),r.current.pause()};return W.jsxs(vs.Provider,{value:{isMute:e,setMute:t,enableAudio:i,disableAudio:s},children:[W.jsx("audio",{ref:r}),n]})},rj=me.createContext(),ij=n=>{const[e,t]=me.useState(null),[r,i]=me.useState(null),[s,o]=me.useState(!1),[a,l]=me.useState([]);return W.jsx(rj.Provider,{value:{walletAddress:e,setWalletAddress:t,ensName:r,setEnsName:i,connected:s,setConnected:o,OTTokens:a,setOTTokens:l},children:n.children})};function al(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function WO(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var As={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},sh={duration:.5,overwrite:!1,delay:0},ZS,Xr,$n,Ws=1e8,an=1/Ws,zF=Math.PI*2,sj=zF/4,oj=0,OO=Math.sqrt,aj=Math.cos,lj=Math.sin,br=function(e){return typeof e=="string"},kn=function(e){return typeof e=="function"},Rl=function(e){return typeof e=="number"},JS=function(e){return typeof e>"u"},Ua=function(e){return typeof e=="object"},Ri=function(e){return e!==!1},GO=function(){return typeof window<"u"},rv=function(e){return kn(e)||br(e)},ZO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Kr=Array.isArray,YF=/(?:-?\.?\d|\.)+/gi,JO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,pd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Rx=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,HO=/[+-]=-?[.\d]+/,zO=/[^,'"\[\]\s]+/gi,Aj=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Un,Qs,XF,HS,us={},rw={},YO,XO=function(e){return(rw=du(e,us))&&fs},zS=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},iw=function(e,t){return!t&&console.warn(e)},KO=function(e,t){return e&&(us[e]=t)&&rw&&(rw[e]=t)||us},gm=function(){return 0},cj={suppressEvents:!0,isStart:!0,kill:!1},jy={suppressEvents:!0,kill:!1},uj={suppressEvents:!0},YS={},VA=[],KF={},jO,qi={},Mx={},g2=30,$y=[],XS="",KS=function(e){var t=e[0],r,i;if(Ua(t)||kn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=$y.length;i--&&!$y[i].targetTest(t););r=$y[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new yG(e[i],r)))||e.splice(i,1);return e},qc=function(e){return e._gsap||KS(Os(e))[0]._gsap},$O=function(e,t,r){return(r=e[t])&&kn(r)?e[t]():JS(r)&&e.getAttribute&&e.getAttribute(t)||r},Mi=function(e,t){return(e=e.split(",")).forEach(t)||e},Jn=function(e){return Math.round(e*1e5)/1e5||0},Sr=function(e){return Math.round(e*1e7)/1e7||0},Td=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},fj=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},sw=function(){var e=VA.length,t=VA.slice(0),r,i;for(KF={},VA.length=0,r=0;r<e;r++)i=t[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},qO=function(e,t,r,i){VA.length&&!Xr&&sw(),e.render(t,r,i||Xr&&t<0&&(e._initted||e._startAt)),VA.length&&!Xr&&sw()},eG=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(zO).length<2?t:br(e)?e.trim():e},tG=function(e){return e},to=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},dj=function(e){return function(t,r){for(var i in r)i in t||i==="duration"&&e||i==="ease"||(t[i]=r[i])}},du=function(e,t){for(var r in t)e[r]=t[r];return e},m2=function n(e,t){for(var r in t)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=Ua(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},ow=function(e,t){var r={},i;for(i in e)i in t||(r[i]=e[i]);return r},Dg=function(e){var t=e.parent||Un,r=e.keyframes?dj(Kr(e.keyframes)):to;if(Ri(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},hj=function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0},nG=function(e,t,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},LC=function(e,t,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},XA=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},eu=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},pj=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},jF=function(e,t,r,i){return e._startAt&&(Xr?e._startAt.revert(jy):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},gj=function n(e){return!e||e._ts&&n(e.parent)},v2=function(e){return e._repeat?oh(e._tTime,e=e.duration()+e._rDelay)*e:0},oh=function(e,t){var r=Math.floor(e/=t);return e&&r===e?r-1:r},aw=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},PC=function(e){return e._end=Sr(e._start+(e._tDur/Math.abs(e._ts||e._rts||an)||0))},WC=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=Sr(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),PC(e),r._dirty||eu(r,e)),e},rG=function(e,t){var r;if((t._time||t._initted&&!t._dur)&&(r=aw(e.rawTime(),t),(!t._dur||s0(0,t.totalDuration(),r)-t._tTime>an)&&t.render(r,!0)),eu(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-an}},la=function(e,t,r,i){return t.parent&&XA(t),t._start=Sr((Rl(r)?r:r||e!==Un?_s(e,r,t):e._time)+t._delay),t._end=Sr(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),nG(e,t,"_first","_last",e._sort?"_start":0),$F(t)||(e._recent=t),i||rG(e,t),e._ts<0&&WC(e,e._tTime),e},iG=function(e,t){return(us.ScrollTrigger||zS("scrollTrigger",t))&&us.ScrollTrigger.create(t,e)},sG=function(e,t,r,i,s){if($S(e,t,s),!e._initted)return 1;if(!r&&e._pt&&!Xr&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&jO!==es.frame)return VA.push(e),e._lazy=[s,i],1},mj=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},$F=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},vj=function(e,t,r,i){var s=e.ratio,o=t<0||!t&&(!e._start&&mj(e)&&!(!e._initted&&$F(e))||(e._ts<0||e._dp._ts<0)&&!$F(e))?0:1,a=e._rDelay,l=0,A,c,u;if(a&&e._repeat&&(l=s0(0,e._tDur,t),c=oh(l,a),e._yoyo&&c&1&&(o=1-o),c!==oh(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Xr||i||e._zTime===an||!t&&e._zTime){if(!e._initted&&sG(e,t,i,r,l))return;for(u=e._zTime,e._zTime=t||(r?an:0),r||(r=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,A=e._pt;A;)A.r(o,A.d),A=A._next;t<0&&jF(e,t,r,!0),e._onUpdate&&!r&&Gs(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Gs(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&XA(e,1),!r&&!Xr&&(Gs(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},yj=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},ah=function(e,t,r,i){var s=e._repeat,o=Sr(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Sr(o*(s+1)+e._rDelay*s):o,a>0&&!i&&WC(e,e._tTime=e._tDur*a),e.parent&&PC(e),r||eu(e.parent,e),e},y2=function(e){return e instanceof Ii?eu(e):ah(e,e._dur)},Bj={_start:0,endTime:gm,totalDuration:gm},_s=function n(e,t,r){var i=e.labels,s=e._recent||Bj,o=e.duration()>=Ws?s.endTime(!1):e._dur,a,l,A;return br(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),A=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(A?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),A&&r&&(l=l/100*(Kr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):t==null?o:+t},kg=function(e,t,r){var i=Rl(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s],a,l;if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ri(l.vars.inherit)&&l.parent;o.immediateRender=Ri(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Ar(t[0],o,t[s+1])},uc=function(e,t){return e||e===0?t(e):t},s0=function(e,t,r){return r<e?e:r>t?t:r},Hr=function(e,t){return!br(e)||!(t=Aj.exec(e))?"":t[1]},wj=function(e,t,r){return uc(r,function(i){return s0(e,t,i)})},qF=[].slice,oG=function(e,t){return e&&Ua(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ua(e[0]))&&!e.nodeType&&e!==Qs},Cj=function(e,t,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return br(i)&&!t||oG(i,1)?(s=r).push.apply(s,Os(i)):r.push(i)})||r},Os=function(e,t,r){return $n&&!t&&$n.selector?$n.selector(e):br(e)&&!r&&(XF||!lh())?qF.call((t||HS).querySelectorAll(e),0):Kr(e)?Cj(e,r):oG(e)?qF.call(e,0):e?[e]:[]},eE=function(e){return e=Os(e)[0]||iw("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Os(t,r.querySelectorAll?r:r===e?iw("Invalid scope")||HS.createElement("div"):e)}},aG=function(e){return e.sort(function(){return .5-Math.random()})},lG=function(e){if(kn(e))return e;var t=Ua(e)?e:{each:e},r=tu(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,A=t.axis,c=i,u=i;return br(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],u=i[1]),function(f,d,h){var p=(h||t).length,m=o[p],g,v,y,w,C,b,F,x,S;if(!m){if(S=t.grid==="auto"?0:(t.grid||[1,Ws])[1],!S){for(F=-Ws;F<(F=h[S++].getBoundingClientRect().left)&&S<p;);S--}for(m=o[p]=[],g=l?Math.min(S,p)*c-.5:i%S,v=S===Ws?0:l?p*u/S-.5:i/S|0,F=0,x=Ws,b=0;b<p;b++)y=b%S-g,w=v-(b/S|0),m[b]=C=A?Math.abs(A==="y"?w:y):OO(y*y+w*w),C>F&&(F=C),C<x&&(x=C);i==="random"&&aG(m),m.max=F-x,m.min=x,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(S>p?p-1:A?A==="y"?p/S:S:Math.max(S,p/S))||0)*(i==="edges"?-1:1),m.b=p<0?s-p:s,m.u=Hr(t.amount||t.each)||0,r=r&&p<0?gG(r):r}return p=(m[f]-m.min)/m.max||0,Sr(m.b+(r?r(p):p)*m.v)+m.u}},tE=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=Sr(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(Rl(r)?0:Hr(r))}},AG=function(e,t){var r=Kr(e),i,s;return!r&&Ua(e)&&(i=r=e.radius||Ws,e.values?(e=Os(e.values),(s=!Rl(e[0]))&&(i*=i)):e=tE(e.increment)),uc(t,r?kn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),A=Ws,c=0,u=e.length,f,d;u--;)s?(f=e[u].x-a,d=e[u].y-l,f=f*f+d*d):f=Math.abs(e[u]-a),f<A&&(A=f,c=u);return c=!i||A<=i?e[c]:o,s||c===o||Rl(o)?c:c+Hr(o)}:tE(e))},cG=function(e,t,r,i){return uc(Kr(e)?!t:r===!0?!!(r=0):!i,function(){return Kr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+r*.99))/r)*r*i)/i})},bj=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},xj=function(e,t){return function(r){return e(parseFloat(r))+(t||Hr(r))}},Ij=function(e,t,r){return fG(e,t,0,1,r)},uG=function(e,t,r){return uc(r,function(i){return e[~~t(i)]})},Fj=function n(e,t,r){var i=t-e;return Kr(e)?uG(e,n(0,e.length),t):uc(r,function(s){return(i+(s-e)%i)%i+e})},Ej=function n(e,t,r){var i=t-e,s=i*2;return Kr(e)?uG(e,n(0,e.length-1),t):uc(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},mm=function(e){for(var t=0,r="",i,s,o,a;~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?zO:YF),r+=e.substr(t,i-t)+cG(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},fG=function(e,t,r,i,s){var o=t-e,a=i-r;return uc(s,function(l){return r+((l-e)/o*a||0)})},Uj=function n(e,t,r,i){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var o=br(e),a={},l,A,c,u,f;if(r===!0&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(Kr(e)&&!Kr(t)){for(c=[],u=e.length,f=u-2,A=1;A<u;A++)c.push(n(e[A-1],e[A]));u--,s=function(h){h*=u;var p=Math.min(f,~~h);return c[p](h-p)},r=t}else i||(e=du(Kr(e)?[]:{},e));if(!c){for(l in t)jS.call(a,e,l,"get",t[l]);s=function(h){return t_(h,a)||(o?e.p:e)}}}return uc(r,s)},B2=function(e,t,r){var i=e.labels,s=Ws,o,a,l;for(o in i)a=i[o]-t,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Gs=function(e,t,r){var i=e.vars,s=i[t],o=$n,a=e._ctx,l,A,c;if(s)return l=i[t+"Params"],A=i.callbackScope||e,r&&VA.length&&sw(),a&&($n=a),c=l?s.apply(A,l):s.call(A),$n=o,c},og=function(e){return XA(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Xr),e.progress()<1&&Gs(e,"onInterrupt"),e},gd,Sj=function(e){e=!e.name&&e.default||e;var t=e.name,r=kn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:gm,render:t_,add:jS,kill:Jj,modifier:Zj,rawVars:0},o={targetTest:0,get:0,getSetter:e_,aliases:{},register:0};if(lh(),e!==i){if(qi[t])return;to(i,to(ow(e,s),o)),du(i.prototype,du(s,ow(e,o))),qi[i.prop=t]=i,e.targetTest&&($y.push(i),YS[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}KO(t,i),e.register&&e.register(fs,i,Ti)},sn=255,ag={aqua:[0,sn,sn],lime:[0,sn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,sn],navy:[0,0,128],white:[sn,sn,sn],olive:[128,128,0],yellow:[sn,sn,0],orange:[sn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[sn,0,0],pink:[sn,192,203],cyan:[0,sn,sn],transparent:[sn,sn,sn,0]},Tx=function(e,t,r){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(r-t)*e*6:e<.5?r:e*3<2?t+(r-t)*(2/3-e)*6:t)*sn+.5|0},dG=function(e,t,r){var i=e?Rl(e)?[e>>16,e>>8&sn,e&sn]:0:ag.black,s,o,a,l,A,c,u,f,d,h;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ag[e])i=ag[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&sn,i&sn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&sn,e&sn]}else if(e.substr(0,3)==="hsl"){if(i=h=e.match(YF),!t)l=+i[0]%360/360,A=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(A+1):c+A-c*A,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=Tx(l+1/3,s,o),i[1]=Tx(l,s,o),i[2]=Tx(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(JO),r&&i.length<4&&(i[3]=1),i}else i=e.match(YF)||ag.transparent;i=i.map(Number)}return t&&!h&&(s=i[0]/sn,o=i[1]/sn,a=i[2]/sn,u=Math.max(s,o,a),f=Math.min(s,o,a),c=(u+f)/2,u===f?l=A=0:(d=u-f,A=c>.5?d/(2-u-f):d/(u+f),l=u===s?(o-a)/d+(o<a?6:0):u===o?(a-s)/d+2:(s-o)/d+4,l*=60),i[0]=~~(l+.5),i[1]=~~(A*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},hG=function(e){var t=[],r=[],i=-1;return e.split(LA).forEach(function(s){var o=s.match(pd)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},w2=function(e,t,r){var i="",s=(e+i).match(LA),o=t?"hsla(":"rgba(",a=0,l,A,c,u;if(!s)return e;if(s=s.map(function(f){return(f=dG(f,t,1))&&o+(t?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),r&&(c=hG(e),l=r.c,l.join(i)!==c.c.join(i)))for(A=e.replace(LA,"1").split(pd),u=A.length-1;a<u;a++)i+=A[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!A)for(A=e.split(LA),u=A.length-1;a<u;a++)i+=A[a]+s[a];return i+A[u]},LA=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ag)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),_j=/hsl[a]?\(/,pG=function(e){var t=e.join(" "),r;if(LA.lastIndex=0,LA.test(t))return r=_j.test(t),e[1]=w2(e[1],r),e[0]=w2(e[0],r,hG(e[1])),!0},vm,es=function(){var n=Date.now,e=500,t=33,r=n(),i=r,s=1e3/240,o=s,a=[],l,A,c,u,f,d,h=function p(m){var g=n()-i,v=m===!0,y,w,C,b;if(g>e&&(r+=g-t),i+=g,C=i-r,y=C-o,(y>0||v)&&(b=++u.frame,f=C-u.time*1e3,u.time=C=C/1e3,o+=y+(y>=s?4:s-y),w=1),v||(l=A(p)),w)for(d=0;d<a.length;d++)a[d](C,f,b,m)};return u={time:0,frame:0,tick:function(){h(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){YO&&(!XF&&GO()&&(Qs=XF=window,HS=Qs.document||{},us.gsap=fs,(Qs.gsapVersions||(Qs.gsapVersions=[])).push(fs.version),XO(rw||Qs.GreenSockGlobals||!Qs.gsap&&Qs||{}),c=Qs.requestAnimationFrame),l&&u.sleep(),A=c||function(m){return setTimeout(m,o-u.time*1e3+1|0)},vm=1,h(2))},sleep:function(){(c?Qs.cancelAnimationFrame:clearTimeout)(l),vm=0,A=gm},lagSmoothing:function(m,g){e=m||1/0,t=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),o=u.time*1e3+s},add:function(m,g,v){var y=g?function(w,C,b,F){m(w,C,b,F),u.remove(y)}:m;return u.remove(m),a[v?"unshift":"push"](y),lh(),y},remove:function(m,g){~(g=a.indexOf(m))&&a.splice(g,1)&&d>=g&&d--},_listeners:a},u}(),lh=function(){return!vm&&es.wake()},Tt={},Qj=/^[\d.\-M][\d.\-,\s]/,Rj=/["']/g,Mj=function(e){for(var t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,A;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,A=l.substr(0,a),t[i]=isNaN(A)?A.replace(Rj,"").trim():+A,i=l.substr(a+1).trim();return t},Tj=function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)},Nj=function(e){var t=(e+"").split("("),r=Tt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Mj(t[1])]:Tj(e).split(",").map(eG)):Tt._CE&&Qj.test(e)?Tt._CE("",e):r},gG=function(e){return function(t){return 1-e(1-t)}},mG=function n(e,t){for(var r=e._first,i;r;)r instanceof Ii?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},tu=function(e,t){return e&&(kn(e)?e:Tt[e]||Nj(e))||t},Eu=function(e,t,r,i){r===void 0&&(r=function(l){return 1-t(1-l)}),i===void 0&&(i=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:r,easeInOut:i},o;return Mi(e,function(a){Tt[a]=us[a]=s,Tt[o=a.toLowerCase()]=r;for(var l in s)Tt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Tt[a+"."+l]=s[l]}),s},vG=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Nx=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/zF*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*lj((c-o)*s)+1},l=e==="out"?a:e==="in"?function(A){return 1-a(1-A)}:vG(a);return s=zF/s,l.config=function(A,c){return n(e,A,c)},l},Dx=function n(e,t){t===void 0&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:vG(r);return i.config=function(s){return n(e,s)},i};Mi("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Eu(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(r*2,t)/2:1-Math.pow((1-r)*2,t)/2})});Tt.Linear.easeNone=Tt.none=Tt.Linear.easeIn;Eu("Elastic",Nx("in"),Nx("out"),Nx());(function(n,e){var t=1/e,r=2*t,i=2.5*t,s=function(a){return a<t?n*a*a:a<r?n*Math.pow(a-1.5/e,2)+.75:a<i?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Eu("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Eu("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Eu("Circ",function(n){return-(OO(1-n*n)-1)});Eu("Sine",function(n){return n===1?1:-aj(n*sj)+1});Eu("Back",Dx("in"),Dx("out"),Dx());Tt.SteppedEase=Tt.steps=us.SteppedEase={config:function(e,t){e===void 0&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0,o=1-an;return function(a){return((i*s0(0,o,a)|0)+s)*r}}};sh.ease=Tt["quad.out"];Mi("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return XS+=n+","+n+"Params,"});var yG=function(e,t){this.id=oj++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:$O,this.set=t?t.getSetter:e_},Ah=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ah(this,+t.duration,1,1),this.data=t.data,$n&&(this._ctx=$n,$n.data.push(this)),vm||es.wake()}var e=n.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,ah(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(lh(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(WC(this,r),!s._dp||s.parent||rG(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&la(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===an||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),qO(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+v2(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+v2(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?oh(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-an?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?aw(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-an?0:this._rts,this.totalTime(s0(-this._delay,this._tDur,i),!0),PC(this),pj(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(lh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==an&&(this._tTime-=an)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&la(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Ri(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?aw(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=uj);var i=Xr;return Xr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Xr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,y2(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,y2(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(_s(this,r),Ri(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Ri(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-an:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-an,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-an)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=kn(r)?r:tG,a=function(){var A=i.then;i.then=null,kn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=A),s(o),i.then=A};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){og(this)},n}();to(Ah.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-an,_prom:0,_ps:!1,_rts:1});var Ii=function(n){WO(e,n);function e(r,i){var s;return r===void 0&&(r={}),s=n.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Ri(r.sortChildren),Un&&la(r.parent||Un,al(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&iG(al(s),r.scrollTrigger),s}var t=e.prototype;return t.to=function(i,s,o){return kg(0,arguments,this),this},t.from=function(i,s,o){return kg(1,arguments,this),this},t.fromTo=function(i,s,o,a){return kg(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,Dg(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Ar(i,s,_s(this,o),1),this},t.call=function(i,s,o){return la(this,Ar.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,A,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=A,o.onCompleteParams=c,o.parent=this,new Ar(i,o,_s(this,l)),this},t.staggerFrom=function(i,s,o,a,l,A,c){return o.runBackwards=1,Dg(o).immediateRender=Ri(o.immediateRender),this.staggerTo(i,s,o,a,l,A,c)},t.staggerFromTo=function(i,s,o,a,l,A,c,u){return a.startAt=o,Dg(a).immediateRender=Ri(a.immediateRender),this.staggerTo(i,s,a,l,A,c,u)},t.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,A=this._dur,c=i<=0?0:Sr(i),u=this._zTime<0!=i<0&&(this._initted||!A),f,d,h,p,m,g,v,y,w,C,b,F;if(this!==Un&&c>l&&i>=0&&(c=l),c!==this._tTime||o||u){if(a!==this._time&&A&&(c+=this._time-a,i+=this._time-a),f=c,w=this._start,y=this._ts,g=!y,u&&(A||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,m=A+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(m*100+i,s,o);if(f=Sr(c%m),c===l?(p=this._repeat,f=A):(p=~~(c/m),p&&p===c/m&&(f=A,p--),f>A&&(f=A)),C=oh(this._tTime,m),!a&&this._tTime&&C!==p&&(C=p),b&&p&1&&(f=A-f,F=1),p!==C&&!this._lock){var x=b&&C&1,S=x===(b&&p&1);if(p<C&&(x=!x),a=x?0:A,this._lock=1,this.render(a||(F?0:Sr(p*m)),s,!A)._lock=0,this._tTime=c,!s&&this.parent&&Gs(this,"onRepeat"),this.vars.repeatRefresh&&!F&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(A=this._dur,l=this._tDur,S&&(this._lock=2,a=x?A:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!F&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;mG(this,F)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=yj(this,Sr(a),Sr(f)),v&&(c-=f-(f=v._start))),this._tTime=c,this._time=f,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&f&&!s&&(Gs(this,"onStart"),this._tTime!==c))return this;if(f>=a&&i>=0)for(d=this._first;d;){if(h=d._next,(d._act||f>=d._start)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!g){v=0,h&&(c+=this._zTime=-an);break}}d=h}else{d=this._last;for(var R=i<0?i:f;d;){if(h=d._prev,(d._act||R<=d._end)&&d._ts&&v!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(R-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(R-d._start)*d._ts,s,o||Xr&&(d._initted||d._startAt)),f!==this._time||!this._ts&&!g){v=0,h&&(c+=this._zTime=R?-an:an);break}}d=h}}if(v&&!s&&(this.pause(),v.render(f>=a?0:-an)._zTime=f>=a?1:-1,this._ts))return this._start=w,PC(this),this.render(i,s,o);this._onUpdate&&!s&&Gs(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(w===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((i||!A)&&(c===l&&this._ts>0||!c&&this._ts<0)&&XA(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Gs(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(Rl(s)||(s=_s(this,s,i)),!(i instanceof Ah)){if(Kr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(br(i))return this.addLabel(i,s);if(kn(i))i=Ar.delayedCall(0,i);else return this}return this!==i?la(this,i,s):this},t.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Ws);for(var l=[],A=this._first;A;)A._start>=a&&(A instanceof Ar?s&&l.push(A):(o&&l.push(A),i&&l.push.apply(l,A.getChildren(!0,s,o)))),A=A._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return br(i)?this.removeLabel(i):kn(i)?this.killTweensOf(i):(LC(this,i),i===this._recent&&(this._recent=this._last),eu(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Sr(es.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=_s(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Ar.delayedCall(0,s||gm,o);return a.data="isPause",this._hasPause=1,la(this,a,_s(this,i))},t.removePause=function(i){var s=this._first;for(i=_s(this,i);s;)s._start===i&&s.data==="isPause"&&XA(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)CA!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var o=[],a=Os(i),l=this._first,A=Rl(s),c;l;)l instanceof Ar?fj(l._targets,a)&&(A?(!CA||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var o=this,a=_s(o,i),l=s,A=l.startAt,c=l.onStart,u=l.onStartParams,f=l.immediateRender,d,h=Ar.to(o,to({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale())||an,onStart:function(){if(o.pause(),!d){var m=s.duration||Math.abs((a-(A&&"time"in A?A.time:o._time))/o.timeScale());h._dur!==m&&ah(h,m,0,1).render(h._time,!0,!0),d=1}c&&c.apply(h,u||[])}},s));return f?h.render(0):h},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,to({startAt:{time:_s(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),B2(this,_s(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),B2(this,_s(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+an)},t.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,A;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(A in l)l[A]>=o&&(l[A]+=i);return eu(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),eu(this)},t.totalDuration=function(i){var s=0,o=this,a=o._last,l=Ws,A,c,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(u=o.parent;a;)A=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,la(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=A;ah(o,o===Un&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Un._ts&&(qO(Un,aw(i,Un)),jO=es.frame),es.frame>=g2){g2+=As.autoSleep||120;var s=Un._first;if((!s||!s._ts)&&As.autoSleep&&es._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||es.sleep()}}},e}(Ah);to(Ii.prototype,{_lock:0,_hasPause:0,_forcing:0});var Dj=function(e,t,r,i,s,o,a){var l=new Ti(this._pt,e,t,0,1,IG,null,s),A=0,c=0,u,f,d,h,p,m,g,v;for(l.b=r,l.e=i,r+="",i+="",(g=~i.indexOf("random("))&&(i=mm(i)),o&&(v=[r,i],o(v,e,t),r=v[0],i=v[1]),f=r.match(Rx)||[];u=Rx.exec(i);)h=u[0],p=i.substring(A,u.index),d?d=(d+1)%5:p.substr(-5)==="rgba("&&(d=1),h!==f[c++]&&(m=parseFloat(f[c-1])||0,l._pt={_next:l._pt,p:p||c===1?p:",",s:m,c:h.charAt(1)==="="?Td(m,h)-m:parseFloat(h)-m,m:d&&d<4?Math.round:0},A=Rx.lastIndex);return l.c=A<i.length?i.substring(A,i.length):"",l.fp=a,(HO.test(i)||g)&&(l.e=0),this._pt=l,l},jS=function(e,t,r,i,s,o,a,l,A,c){kn(i)&&(i=i(s||0,e,o));var u=e[t],f=r!=="get"?r:kn(u)?A?e[t.indexOf("set")||!kn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](A):e[t]():u,d=kn(u)?A?Wj:bG:qS,h;if(br(i)&&(~i.indexOf("random(")&&(i=mm(i)),i.charAt(1)==="="&&(h=Td(f,i)+(Hr(f)||0),(h||h===0)&&(i=h))),!c||f!==i||nE)return!isNaN(f*i)&&i!==""?(h=new Ti(this._pt,e,t,+f||0,i-(f||0),typeof u=="boolean"?Gj:xG,0,d),A&&(h.fp=A),a&&h.modifier(a,this,e),this._pt=h):(!u&&!(t in e)&&zS(t,i),Dj.call(this,e,t,f,i,d,l||As.stringFilter,A))},kj=function(e,t,r,i,s){if(kn(e)&&(e=Vg(e,s,t,r,i)),!Ua(e)||e.style&&e.nodeType||Kr(e)||ZO(e))return br(e)?Vg(e,s,t,r,i):e;var o={},a;for(a in e)o[a]=Vg(e[a],s,t,r,i);return o},BG=function(e,t,r,i,s,o){var a,l,A,c;if(qi[e]&&(a=new qi[e]).init(s,a.rawVars?t[e]:kj(t[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new Ti(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==gd))for(A=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)A[a._props[c]]=l;return a},CA,nE,$S=function n(e,t,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,A=i.onUpdate,c=i.onUpdateParams,u=i.callbackScope,f=i.runBackwards,d=i.yoyoEase,h=i.keyframes,p=i.autoRevert,m=e._dur,g=e._startAt,v=e._targets,y=e.parent,w=y&&y.data==="nested"?y.vars.targets:v,C=e._overwrite==="auto"&&!ZS,b=e.timeline,F,x,S,R,Z,Y,Q,B,E,M,D,T,V;if(b&&(!h||!s)&&(s="none"),e._ease=tu(s,sh.ease),e._yEase=d?gG(tu(d===!0?s:d,sh.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!b&&!!i.runBackwards,!b||h&&!i.stagger){if(B=v[0]?qc(v[0]).harness:0,T=B&&i[B.prop],F=ow(i,YS),g&&(g._zTime<0&&g.progress(1),t<0&&f&&a&&!p?g.render(-1,!0):g.revert(f&&m?jy:cj),g._lazy=0),o){if(XA(e._startAt=Ar.set(v,to({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!g&&Ri(l),startAt:null,delay:0,onUpdate:A,onUpdateParams:c,callbackScope:u,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Xr||!a&&!p)&&e._startAt.revert(jy),a&&m&&t<=0&&r<=0){t&&(e._zTime=t);return}}else if(f&&m&&!g){if(t&&(a=!1),S=to({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Ri(l),immediateRender:a,stagger:0,parent:y},F),T&&(S[B.prop]=T),XA(e._startAt=Ar.set(v,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Xr?e._startAt.revert(jy):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,an,an);else if(!t)return}for(e._pt=e._ptCache=0,l=m&&Ri(l)||l&&!m,x=0;x<v.length;x++){if(Z=v[x],Q=Z._gsap||KS(v)[x]._gsap,e._ptLookup[x]=M={},KF[Q.id]&&VA.length&&sw(),D=w===v?x:w.indexOf(Z),B&&(E=new B).init(Z,T||F,e,D,w)!==!1&&(e._pt=R=new Ti(e._pt,Z,E.name,0,1,E.render,E,0,E.priority),E._props.forEach(function(G){M[G]=R}),E.priority&&(Y=1)),!B||T)for(S in F)qi[S]&&(E=BG(S,F,e,D,Z,w))?E.priority&&(Y=1):M[S]=R=jS.call(e,Z,S,"get",F[S],D,w,0,i.stringFilter);e._op&&e._op[x]&&e.kill(Z,e._op[x]),C&&e._pt&&(CA=e,Un.killTweensOf(Z,M,e.globalTime(t)),V=!e.parent,CA=0),e._pt&&l&&(KF[Q.id]=1)}Y&&FG(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!V,h&&t<=0&&b.render(Ws,!0,!0)},Vj=function(e,t,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[t],A,c,u,f;if(!l)for(l=e._ptCache[t]=[],u=e._ptLookup,f=e._targets.length;f--;){if(A=u[f][t],A&&A.d&&A.d._pt)for(A=A.d._pt;A&&A.p!==t&&A.fp!==t;)A=A._next;if(!A)return nE=1,e.vars[t]="+=0",$S(e,a),nE=0,1;l.push(A)}for(f=l.length;f--;)c=l[f],A=c._pt||c,A.s=(i||i===0)&&!s?i:A.s+(i||0)+o*A.c,A.c=r-A.s,c.e&&(c.e=Jn(r)+Hr(c.e)),c.b&&(c.b=A.s+Hr(c.b))},Lj=function(e,t){var r=e[0]?qc(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return t;s=du({},t);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Pj=function(e,t,r,i){var s=t.ease||i||"power1.inOut",o,a;if(Kr(t))a=r[e]||(r[e]=[]),t.forEach(function(l,A){return a.push({t:A/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Vg=function(e,t,r,i,s){return kn(e)?e.call(t,r,i,s):br(e)&&~e.indexOf("random(")?mm(e):e},wG=XS+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",CG={};Mi(wG+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return CG[n]=1});var Ar=function(n){WO(e,n);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=n.call(this,o?i:Dg(i))||this;var l=a.vars,A=l.duration,c=l.delay,u=l.immediateRender,f=l.stagger,d=l.overwrite,h=l.keyframes,p=l.defaults,m=l.scrollTrigger,g=l.yoyoEase,v=i.parent||Un,y=(Kr(r)||ZO(r)?Rl(r[0]):"length"in i)?[r]:Os(r),w,C,b,F,x,S,R,Z;if(a._targets=y.length?KS(y):iw("GSAP target "+r+" not found. https://greensock.com",!As.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,h||f||rv(A)||rv(c)){if(i=a.vars,w=a.timeline=new Ii({data:"nested",defaults:p||{},targets:v&&v.data==="nested"?v.vars.targets:y}),w.kill(),w.parent=w._dp=al(a),w._start=0,f||rv(A)||rv(c)){if(F=y.length,R=f&&lG(f),Ua(f))for(x in f)~wG.indexOf(x)&&(Z||(Z={}),Z[x]=f[x]);for(C=0;C<F;C++)b=ow(i,CG),b.stagger=0,g&&(b.yoyoEase=g),Z&&du(b,Z),S=y[C],b.duration=+Vg(A,al(a),C,S,y),b.delay=(+Vg(c,al(a),C,S,y)||0)-a._delay,!f&&F===1&&b.delay&&(a._delay=c=b.delay,a._start+=c,b.delay=0),w.to(S,b,R?R(C,S,y):0),w._ease=Tt.none;w.duration()?A=c=0:a.timeline=0}else if(h){Dg(to(w.vars.defaults,{ease:"none"})),w._ease=tu(h.ease||i.ease||"none");var Y=0,Q,B,E;if(Kr(h))h.forEach(function(M){return w.to(y,M,">")}),w.duration();else{b={};for(x in h)x==="ease"||x==="easeEach"||Pj(x,h[x],b,h.easeEach);for(x in b)for(Q=b[x].sort(function(M,D){return M.t-D.t}),Y=0,C=0;C<Q.length;C++)B=Q[C],E={ease:B.e,duration:(B.t-(C?Q[C-1].t:0))/100*A},E[x]=B.v,w.to(y,E,Y),Y+=E.duration;w.duration()<A&&w.to({},{duration:A-w.duration()})}}A||a.duration(A=w.duration())}else a.timeline=0;return d===!0&&!ZS&&(CA=al(a),Un.killTweensOf(y),CA=0),la(v,al(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(u||!A&&!h&&a._start===Sr(v._time)&&Ri(u)&&gj(al(a))&&v.data!=="nested")&&(a._tTime=-an,a.render(Math.max(0,-c)||0)),m&&iG(al(a),m),a}var t=e.prototype;return t.render=function(i,s,o){var a=this._time,l=this._tDur,A=this._dur,c=i<0,u=i>l-an&&!c?l:i<an?0:i,f,d,h,p,m,g,v,y,w;if(!A)vj(this,i,s,o);else if(u!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(f=u,y=this.timeline,this._repeat){if(p=A+this._rDelay,this._repeat<-1&&c)return this.totalTime(p*100+i,s,o);if(f=Sr(u%p),u===l?(h=this._repeat,f=A):(h=~~(u/p),h&&h===u/p&&(f=A,h--),f>A&&(f=A)),g=this._yoyo&&h&1,g&&(w=this._yEase,f=A-f),m=oh(this._tTime,p),f===a&&!o&&this._initted)return this._tTime=u,this;h!==m&&(y&&this._yEase&&mG(y,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=o=1,this.render(Sr(p*h),!0).invalidate()._lock=0))}if(!this._initted){if(sG(this,c?i:f,o,s,u))return this._tTime=0,this;if(a!==this._time)return this;if(A!==this._dur)return this.render(i,s,o)}if(this._tTime=u,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(w||this._ease)(f/A),this._from&&(this.ratio=v=1-v),f&&!a&&!s&&(Gs(this,"onStart"),this._tTime!==u))return this;for(d=this._pt;d;)d.r(v,d.d),d=d._next;y&&y.render(i<0?i:!f&&g?-an:y._dur*y._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&jF(this,i,s,o),Gs(this,"onUpdate")),this._repeat&&h!==m&&this.vars.onRepeat&&!s&&this.parent&&Gs(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&jF(this,i,!0,!0),(i||!A)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&XA(this,1),!s&&!(c&&!a)&&(u||a||g)&&(Gs(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a){vm||es.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),A;return this._initted||$S(this,l),A=this._ease(l/this._dur),Vj(this,i,s,o,a,A,l)?this.resetTo(i,s,o,a):(WC(this,0),this.parent||nG(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?og(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,CA&&CA.vars.overwrite!==!0)._first||og(this),this.parent&&o!==this.timeline.totalDuration()&&ah(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?Os(i):a,A=this._ptLookup,c=this._pt,u,f,d,h,p,m,g;if((!s||s==="all")&&hj(a,l))return s==="all"&&(this._pt=0),og(this);for(u=this._op=this._op||[],s!=="all"&&(br(s)&&(p={},Mi(s,function(v){return p[v]=1}),s=p),s=Lj(a,s)),g=a.length;g--;)if(~l.indexOf(a[g])){f=A[g],s==="all"?(u[g]=s,h=f,d={}):(d=u[g]=u[g]||{},h=s);for(p in h)m=f&&f[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&LC(this,m,"_pt"),delete f[p]),d!=="all"&&(d[p]=1)}return this._initted&&!this._pt&&c&&og(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return kg(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return kg(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Un.killTweensOf(i,s,o)},e}(Ah);to(Ar.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Mi("staggerTo,staggerFrom,staggerFromTo",function(n){Ar[n]=function(){var e=new Ii,t=qF.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var qS=function(e,t,r){return e[t]=r},bG=function(e,t,r){return e[t](r)},Wj=function(e,t,r,i){return e[t](i.fp,r)},Oj=function(e,t,r){return e.setAttribute(t,r)},e_=function(e,t){return kn(e[t])?bG:JS(e[t])&&e.setAttribute?Oj:qS},xG=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Gj=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},IG=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},t_=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},Zj=function(e,t,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},Jj=function(e){for(var t=this._pt,r,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?LC(this,t,"_pt"):t.dep||(r=1),t=i;return!r},Hj=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},FG=function(e){for(var t=e._pt,r,i,s,o;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Ti=function(){function n(t,r,i,s,o,a,l,A,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||xG,this.d=l||this,this.set=A||qS,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Hj,this.m=r,this.mt=s,this.tween=i},n}();Mi(XS+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return YS[n]=1});us.TweenMax=us.TweenLite=Ar;us.TimelineLite=us.TimelineMax=Ii;Un=new Ii({sortChildren:!1,defaults:sh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});As.stringFilter=pG;var ch=[],qy={},zj=[],C2=0,kx=function(e){return(qy[e]||zj).map(function(t){return t()})},rE=function(){var e=Date.now(),t=[];e-C2>2&&(kx("matchMediaInit"),ch.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,A;for(a in i)o=Qs.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,A=1);A&&(r.revert(),l&&t.push(r))}),kx("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r)}),C2=e,kx("matchMedia"))},EG=function(){function n(t,r){this.selector=r&&eE(r),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){kn(r)&&(s=i,i=r,r=kn);var o=this,a=function(){var A=$n,c=o.selector,u;return A&&A!==o&&A.data.push(o),s&&(o.selector=eE(s)),$n=o,u=i.apply(o,arguments),kn(u)&&o._r.push(u),$n=A,o.selector=c,o.isReverted=!1,u};return o.last=a,r===kn?a(o):r?o[r]=a:a},e.ignore=function(r){var i=$n;$n=null,r(this),$n=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Ar&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(A){return o.splice(o.indexOf(A),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,A){return A.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof Ah)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=ch.indexOf(this);~a&&ch.splice(a,1)}},e.revert=function(r){this.kill(r||{})},n}(),Yj=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(r,i,s){Ua(r)||(r={matches:r});var o=new EG(0,s||this.scope),a=o.conditions={},l,A,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(A in r)A==="all"?c=1:(l=Qs.matchMedia(r[A]),l&&(ch.indexOf(o)<0&&ch.push(o),(a[A]=l.matches)&&(c=1),l.addListener?l.addListener(rE):l.addEventListener("change",rE)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),lw={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return Sj(i)})},timeline:function(e){return new Ii(e)},getTweensOf:function(e,t){return Un.getTweensOf(e,t)},getProperty:function(e,t,r,i){br(e)&&(e=Os(e)[0]);var s=qc(e||{}).get,o=r?tG:eG;return r==="native"&&(r=""),e&&(t?o((qi[t]&&qi[t].get||s)(e,t,r,i)):function(a,l,A){return o((qi[a]&&qi[a].get||s)(e,a,l,A))})},quickSetter:function(e,t,r){if(e=Os(e),e.length>1){var i=e.map(function(c){return fs.quickSetter(c,t,r)}),s=i.length;return function(c){for(var u=s;u--;)i[u](c)}}e=e[0]||{};var o=qi[t],a=qc(e),l=a.harness&&(a.harness.aliases||{})[t]||t,A=o?function(c){var u=new o;gd._pt=0,u.init(e,r?c+r:c,gd,0,[e]),u.render(1,u),gd._pt&&t_(1,gd)}:a.set(e,l);return o?A:function(c){return A(e,l,r?c+r:c,a,1)}},quickTo:function(e,t,r){var i,s=fs.to(e,du((i={},i[t]="+=0.1",i.paused=!0,i),r||{})),o=function(l,A,c){return s.resetTo(t,l,A,c)};return o.tween=s,o},isTweening:function(e){return Un.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=tu(e.ease,sh.ease)),m2(sh,e||{})},config:function(e){return m2(As,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!qi[a]&&!us[a]&&iw(t+" effect requires "+a+" plugin.")}),Mx[t]=function(a,l,A){return r(Os(a),to(l||{},s),A)},o&&(Ii.prototype[t]=function(a,l,A){return this.add(Mx[t](a,Ua(l)?l:(A=l)&&{},this),A)})},registerEase:function(e,t){Tt[e]=tu(t)},parseEase:function(e,t){return arguments.length?tu(e,t):Tt},getById:function(e){return Un.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var r=new Ii(e),i,s;for(r.smoothChildTiming=Ri(e.smoothChildTiming),Un.remove(r),r._dp=0,r._time=r._tTime=Un._time,i=Un._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Ar&&i.vars.onComplete===i._targets[0]))&&la(r,i,i._start-i._delay),i=s;return la(Un,r,0),r},context:function(e,t){return e?new EG(e,t):$n},matchMedia:function(e){return new Yj(e)},matchMediaRefresh:function(){return ch.forEach(function(e){var t=e.conditions,r,i;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||rE()},addEventListener:function(e,t){var r=qy[e]||(qy[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=qy[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:Fj,wrapYoyo:Ej,distribute:lG,random:cG,snap:AG,normalize:Ij,getUnit:Hr,clamp:wj,splitColor:dG,toArray:Os,selector:eE,mapRange:fG,pipe:bj,unitize:xj,interpolate:Uj,shuffle:aG},install:XO,effects:Mx,ticker:es,updateRoot:Ii.updateRoot,plugins:qi,globalTimeline:Un,core:{PropTween:Ti,globals:KO,Tween:Ar,Timeline:Ii,Animation:Ah,getCache:qc,_removeLinkedListItem:LC,reverting:function(){return Xr},context:function(e){return e&&$n&&($n.data.push(e),e._ctx=$n),$n},suppressOverwrites:function(e){return ZS=e}}};Mi("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return lw[n]=Ar[n]});es.add(Ii.updateRoot);gd=lw.to({},{duration:0});var Xj=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Kj=function(e,t){var r=e._targets,i,s,o;for(i in t)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=Xj(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))},Vx=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,A;if(br(s)&&(l={},Mi(s,function(c){return l[c]=1}),s=l),t){l={};for(A in s)l[A]=t(s[A]);s=l}Kj(a,s)}}}},fs=lw.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;this.tween=r;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)Xr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Vx("roundProps",tE),Vx("modifiers"),Vx("snap",AG))||lw;Ar.version=Ii.version=fs.version="3.11.4";YO=1;GO()&&lh();Tt.Power0;Tt.Power1;Tt.Power2;Tt.Power3;Tt.Power4;Tt.Linear;Tt.Quad;Tt.Cubic;Tt.Quart;Tt.Quint;Tt.Strong;Tt.Elastic;Tt.Back;Tt.SteppedEase;Tt.Bounce;Tt.Sine;Tt.Expo;Tt.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var b2,bA,Nd,n_,Gc,x2,r_,jj=function(){return typeof window<"u"},Ml={},Rc=180/Math.PI,Dd=Math.PI/180,Gu=Math.atan2,I2=1e8,i_=/([A-Z])/g,$j=/(left|right|width|margin|padding|x)/i,qj=/[\s,\(]\S/,vl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},iE=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},e7=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},t7=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},n7=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},UG=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},SG=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},r7=function(e,t,r){return e.style[t]=r},i7=function(e,t,r){return e.style.setProperty(t,r)},s7=function(e,t,r){return e._gsap[t]=r},o7=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},a7=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},l7=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},Sn="transform",To=Sn+"Origin",A7=function(e,t){var r=this,i=this.target,s=i.style;if(e in Ml){if(this.tfm=this.tfm||{},e!=="transform"&&(e=vl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=fl(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:fl(i,e)),this.props.indexOf(Sn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(To,t,"")),e=Sn}(s||t)&&this.props.push(e,t,s[e])},_G=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},c7=function(){var e=this.props,t=this.target,r=t.style,i=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].replace(i_,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=r_(),s&&!s.isStart&&!r[Sn]&&(_G(r),i.uncache=1)}},QG=function(e,t){var r={target:e,props:[],revert:c7,save:A7};return t&&t.split(",").forEach(function(i){return r.save(i)}),r},RG,sE=function(e,t){var r=bA.createElementNS?bA.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):bA.createElement(e);return r.style?r:bA.createElement(e)},wa=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(i_,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,uh(t)||t,1)||""},F2="O,Moz,ms,Ms,Webkit".split(","),uh=function(e,t,r){var i=t||Gc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(F2[o]+e in s););return o<0?null:(o===3?"ms":o>=0?F2[o]:"")+e},oE=function(){jj()&&window.document&&(b2=window,bA=b2.document,Nd=bA.documentElement,Gc=sE("div")||{style:{}},sE("div"),Sn=uh(Sn),To=Sn+"Origin",Gc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",RG=!!uh("perspective"),r_=fs.core.reverting,n_=1)},Lx=function n(e){var t=sE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(Nd.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),Nd.removeChild(t),this.style.cssText=s,o},E2=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},MG=function(e){var t;try{t=e.getBBox()}catch{t=Lx.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Lx||(t=Lx.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+E2(e,["x","cx","x1"])||0,y:+E2(e,["y","cy","y1"])||0,width:0,height:0}:t},TG=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&MG(e))},ym=function(e,t){if(t){var r=e.style;t in Ml&&t!==To&&(t=Sn),r.removeProperty?((t.substr(0,2)==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),r.removeProperty(t.replace(i_,"-$1").toLowerCase())):r.removeAttribute(t)}},xA=function(e,t,r,i,s,o){var a=new Ti(e._pt,t,r,0,1,o?SG:UG);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},U2={deg:1,rad:1,turn:1},u7={grid:1,flex:1},KA=function n(e,t,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Gc.style,l=$j.test(t),A=e.tagName.toLowerCase()==="svg",c=(A?"client":"offset")+(l?"Width":"Height"),u=100,f=i==="px",d=i==="%",h,p,m,g;return i===o||!s||U2[i]||U2[o]?s:(o!=="px"&&!f&&(s=n(e,t,r,"px")),g=e.getCTM&&TG(e),(d||o==="%")&&(Ml[t]||~t.indexOf("adius"))?(h=g?e.getBBox()[l?"width":"height"]:e[c],Jn(d?s/h*u:s/100*h)):(a[l?"width":"height"]=u+(f?o:i),p=~t.indexOf("adius")||i==="em"&&e.appendChild&&!A?e:e.parentNode,g&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===bA||!p.appendChild)&&(p=bA.body),m=p._gsap,m&&d&&m.width&&l&&m.time===es.time&&!m.uncache?Jn(s/m.width*u):((d||o==="%")&&!u7[wa(p,"display")]&&(a.position=wa(e,"position")),p===e&&(a.position="static"),p.appendChild(Gc),h=Gc[c],p.removeChild(Gc),a.position="absolute",l&&d&&(m=qc(p),m.time=es.time,m.width=p[c]),Jn(f?h*s/u:h&&s?u/h*s:0))))},fl=function(e,t,r,i){var s;return n_||oE(),t in vl&&t!=="transform"&&(t=vl[t],~t.indexOf(",")&&(t=t.split(",")[0])),Ml[t]&&t!=="transform"?(s=wm(e,i),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:cw(wa(e,To))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Aw[t]&&Aw[t](e,t,r)||wa(e,t)||$O(e,t)||(t==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?KA(e,t,s,r)+r:s},f7=function(e,t,r,i){if(!r||r==="none"){var s=uh(t,e,1),o=s&&wa(e,s,1);o&&o!==r?(t=s,r=o):t==="borderColor"&&(r=wa(e,"borderTopColor"))}var a=new Ti(this._pt,e.style,t,0,1,IG),l=0,A=0,c,u,f,d,h,p,m,g,v,y,w,C;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[t]=i,i=wa(e,t)||i,e.style[t]=r),c=[r,i],pG(c),r=c[0],i=c[1],f=r.match(pd)||[],C=i.match(pd)||[],C.length){for(;u=pd.exec(i);)m=u[0],v=i.substring(l,u.index),h?h=(h+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(h=1),m!==(p=f[A++]||"")&&(d=parseFloat(p)||0,w=p.substr((d+"").length),m.charAt(1)==="="&&(m=Td(d,m)+w),g=parseFloat(m),y=m.substr((g+"").length),l=pd.lastIndex-y.length,y||(y=y||As.units[t]||w,l===i.length&&(i+=y,a.e+=y)),w!==y&&(d=KA(e,t,p,y)||0),a._pt={_next:a._pt,p:v||A===1?v:",",s:d,c:g-d,m:h&&h<4||t==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=t==="display"&&i==="none"?SG:UG;return HO.test(i)&&(a.e=0),this._pt=a,a},S2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},d7=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),t[0]=S2[r]||r,t[1]=S2[i]||i,t.join(" ")},h7=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r=t.t,i=r.style,s=t.u,o=r._gsap,a,l,A;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),A=s.length;--A>-1;)a=s[A],Ml[a]&&(l=1,a=a==="transformOrigin"?To:Sn),ym(r,a);l&&(ym(r,Sn),o&&(o.svg&&r.removeAttribute("transform"),wm(r,1),o.uncache=1,_G(i)))}},Aw={clearProps:function(e,t,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Ti(e._pt,t,r,0,0,h7);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},Bm=[1,0,0,1,0,0],NG={},DG=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},_2=function(e){var t=wa(e,Sn);return DG(t)?Bm:t.substr(7).match(JO).map(Jn)},s_=function(e,t){var r=e._gsap||qc(e),i=e.style,s=_2(e),o,a,l,A;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Bm:s):(s===Bm&&!e.offsetParent&&e!==Nd&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(A=1,a=e.nextElementSibling,Nd.appendChild(e)),s=_2(e),l?i.display=l:ym(e,"display"),A&&(a?o.insertBefore(e,a):o?o.appendChild(e):Nd.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},aE=function(e,t,r,i,s,o){var a=e._gsap,l=s||s_(e,!0),A=a.xOrigin||0,c=a.yOrigin||0,u=a.xOffset||0,f=a.yOffset||0,d=l[0],h=l[1],p=l[2],m=l[3],g=l[4],v=l[5],y=t.split(" "),w=parseFloat(y[0])||0,C=parseFloat(y[1])||0,b,F,x,S;r?l!==Bm&&(F=d*m-h*p)&&(x=w*(m/F)+C*(-p/F)+(p*v-m*g)/F,S=w*(-h/F)+C*(d/F)-(d*v-h*g)/F,w=x,C=S):(b=MG(e),w=b.x+(~y[0].indexOf("%")?w/100*b.width:w),C=b.y+(~(y[1]||y[0]).indexOf("%")?C/100*b.height:C)),i||i!==!1&&a.smooth?(g=w-A,v=C-c,a.xOffset=u+(g*d+v*p)-g,a.yOffset=f+(g*h+v*m)-v):a.xOffset=a.yOffset=0,a.xOrigin=w,a.yOrigin=C,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[To]="0px 0px",o&&(xA(o,a,"xOrigin",A,w),xA(o,a,"yOrigin",c,C),xA(o,a,"xOffset",u,a.xOffset),xA(o,a,"yOffset",f,a.yOffset)),e.setAttribute("data-svg-origin",w+" "+C)},wm=function(e,t){var r=e._gsap||new yG(e);if("x"in r&&!t&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),A=wa(e,To)||"0",c,u,f,d,h,p,m,g,v,y,w,C,b,F,x,S,R,Z,Y,Q,B,E,M,D,T,V,G,P,U,H,oe,k;return c=u=f=p=m=g=v=y=w=0,d=h=1,r.svg=!!(e.getCTM&&TG(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Sn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Sn]!=="none"?l[Sn]:"")),i.scale=i.rotate=i.translate="none"),F=s_(e,r.svg),r.svg&&(r.uncache?(T=e.getBBox(),A=r.xOrigin-T.x+"px "+(r.yOrigin-T.y)+"px",D=""):D=!t&&e.getAttribute("data-svg-origin"),aE(e,D||A,!!D||r.originIsAbsolute,r.smooth!==!1,F)),C=r.xOrigin||0,b=r.yOrigin||0,F!==Bm&&(Z=F[0],Y=F[1],Q=F[2],B=F[3],c=E=F[4],u=M=F[5],F.length===6?(d=Math.sqrt(Z*Z+Y*Y),h=Math.sqrt(B*B+Q*Q),p=Z||Y?Gu(Y,Z)*Rc:0,v=Q||B?Gu(Q,B)*Rc+p:0,v&&(h*=Math.abs(Math.cos(v*Dd))),r.svg&&(c-=C-(C*Z+b*Q),u-=b-(C*Y+b*B))):(k=F[6],H=F[7],G=F[8],P=F[9],U=F[10],oe=F[11],c=F[12],u=F[13],f=F[14],x=Gu(k,U),m=x*Rc,x&&(S=Math.cos(-x),R=Math.sin(-x),D=E*S+G*R,T=M*S+P*R,V=k*S+U*R,G=E*-R+G*S,P=M*-R+P*S,U=k*-R+U*S,oe=H*-R+oe*S,E=D,M=T,k=V),x=Gu(-Q,U),g=x*Rc,x&&(S=Math.cos(-x),R=Math.sin(-x),D=Z*S-G*R,T=Y*S-P*R,V=Q*S-U*R,oe=B*R+oe*S,Z=D,Y=T,Q=V),x=Gu(Y,Z),p=x*Rc,x&&(S=Math.cos(x),R=Math.sin(x),D=Z*S+Y*R,T=E*S+M*R,Y=Y*S-Z*R,M=M*S-E*R,Z=D,E=T),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,g=180-g),d=Jn(Math.sqrt(Z*Z+Y*Y+Q*Q)),h=Jn(Math.sqrt(M*M+k*k)),x=Gu(E,M),v=Math.abs(x)>2e-4?x*Rc:0,w=oe?1/(oe<0?-oe:oe):0),r.svg&&(D=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!DG(wa(e,Sn)),D&&e.setAttribute("transform",D))),Math.abs(v)>90&&Math.abs(v)<270&&(s?(d*=-1,v+=p<=0?180:-180,p+=p<=0?180:-180):(h*=-1,v+=v<=0?180:-180)),t=t||r.uncache,r.x=c-((r.xPercent=c&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=u-((r.yPercent=u&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=f+o,r.scaleX=Jn(d),r.scaleY=Jn(h),r.rotation=Jn(p)+a,r.rotationX=Jn(m)+a,r.rotationY=Jn(g)+a,r.skewX=v+a,r.skewY=y+a,r.transformPerspective=w+o,(r.zOrigin=parseFloat(A.split(" ")[2])||0)&&(i[To]=cw(A)),r.xOffset=r.yOffset=0,r.force3D=As.force3D,r.renderTransform=r.svg?g7:RG?kG:p7,r.uncache=0,r},cw=function(e){return(e=e.split(" "))[0]+" "+e[1]},Px=function(e,t,r){var i=Hr(t);return Jn(parseFloat(t)+parseFloat(KA(e,"x",r+"px",i)))+i},p7=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,kG(e,t)},vc="0deg",wp="0px",yc=") ",kG=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,A=r.rotation,c=r.rotationY,u=r.rotationX,f=r.skewX,d=r.skewY,h=r.scaleX,p=r.scaleY,m=r.transformPerspective,g=r.force3D,v=r.target,y=r.zOrigin,w="",C=g==="auto"&&e&&e!==1||g===!0;if(y&&(u!==vc||c!==vc)){var b=parseFloat(c)*Dd,F=Math.sin(b),x=Math.cos(b),S;b=parseFloat(u)*Dd,S=Math.cos(b),o=Px(v,o,F*S*-y),a=Px(v,a,-Math.sin(b)*-y),l=Px(v,l,x*S*-y+y)}m!==wp&&(w+="perspective("+m+yc),(i||s)&&(w+="translate("+i+"%, "+s+"%) "),(C||o!==wp||a!==wp||l!==wp)&&(w+=l!==wp||C?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+yc),A!==vc&&(w+="rotate("+A+yc),c!==vc&&(w+="rotateY("+c+yc),u!==vc&&(w+="rotateX("+u+yc),(f!==vc||d!==vc)&&(w+="skew("+f+", "+d+yc),(h!==1||p!==1)&&(w+="scale("+h+", "+p+yc),v.style[Sn]=w||"translate(0, 0)"},g7=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,A=r.skewX,c=r.skewY,u=r.scaleX,f=r.scaleY,d=r.target,h=r.xOrigin,p=r.yOrigin,m=r.xOffset,g=r.yOffset,v=r.forceCSS,y=parseFloat(o),w=parseFloat(a),C,b,F,x,S;l=parseFloat(l),A=parseFloat(A),c=parseFloat(c),c&&(c=parseFloat(c),A+=c,l+=c),l||A?(l*=Dd,A*=Dd,C=Math.cos(l)*u,b=Math.sin(l)*u,F=Math.sin(l-A)*-f,x=Math.cos(l-A)*f,A&&(c*=Dd,S=Math.tan(A-c),S=Math.sqrt(1+S*S),F*=S,x*=S,c&&(S=Math.tan(c),S=Math.sqrt(1+S*S),C*=S,b*=S)),C=Jn(C),b=Jn(b),F=Jn(F),x=Jn(x)):(C=u,x=f,b=F=0),(y&&!~(o+"").indexOf("px")||w&&!~(a+"").indexOf("px"))&&(y=KA(d,"x",o,"px"),w=KA(d,"y",a,"px")),(h||p||m||g)&&(y=Jn(y+h-(h*C+p*F)+m),w=Jn(w+p-(h*b+p*x)+g)),(i||s)&&(S=d.getBBox(),y=Jn(y+i/100*S.width),w=Jn(w+s/100*S.height)),S="matrix("+C+","+b+","+F+","+x+","+y+","+w+")",d.setAttribute("transform",S),v&&(d.style[Sn]=S)},m7=function(e,t,r,i,s){var o=360,a=br(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Rc:1),A=l-i,c=i+A+"deg",u,f;return a&&(u=s.split("_")[1],u==="short"&&(A%=o,A!==A%(o/2)&&(A+=A<0?o:-o)),u==="cw"&&A<0?A=(A+o*I2)%o-~~(A/o)*o:u==="ccw"&&A>0&&(A=(A-o*I2)%o-~~(A/o)*o)),e._pt=f=new Ti(e._pt,t,r,i,A,e7),f.e=c,f.u="deg",e._props.push(r),f},Q2=function(e,t){for(var r in t)e[r]=t[r];return e},v7=function(e,t,r){var i=Q2({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,A,c,u,f,d,h;i.svg?(A=r.getAttribute("transform"),r.setAttribute("transform",""),o[Sn]=t,a=wm(r,1),ym(r,Sn),r.setAttribute("transform",A)):(A=getComputedStyle(r)[Sn],o[Sn]=t,a=wm(r,1),o[Sn]=A);for(l in Ml)A=i[l],c=a[l],A!==c&&s.indexOf(l)<0&&(d=Hr(A),h=Hr(c),u=d!==h?KA(r,l,A,h):parseFloat(A),f=parseFloat(c),e._pt=new Ti(e._pt,a,l,u,f-u,iE),e._pt.u=h||0,e._props.push(l));Q2(a,i)};Mi("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});Aw[e>1?"border"+n:n]=function(a,l,A,c,u){var f,d;if(arguments.length<4)return f=o.map(function(h){return fl(a,h,A)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(c+"").split(" "),d={},o.forEach(function(h,p){return d[h]=f[p]=f[p]||f[(p-1)/2|0]}),a.init(l,d,u)}});var VG={name:"css",register:oE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,A,c,u,f,d,h,p,m,g,v,y,w,C,b,F,x;n_||oE(),this.styles=this.styles||QG(e),x=this.styles.props,this.tween=r;for(p in t)if(p!=="autoRound"&&(c=t[p],!(qi[p]&&BG(p,t,r,i,e,s)))){if(d=typeof c,h=Aw[p],d==="function"&&(c=c.call(r,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=mm(c)),h)h(this,e,p,c,r)&&(F=1);else if(p.substr(0,2)==="--")A=(getComputedStyle(e).getPropertyValue(p)+"").trim(),c+="",LA.lastIndex=0,LA.test(A)||(m=Hr(A),g=Hr(c)),g?m!==g&&(A=KA(e,p,A,g)+g):m&&(c+=m),this.add(a,"setProperty",A,c,i,s,0,0,p),o.push(p),x.push(p,0,a[p]);else if(d!=="undefined"){if(l&&p in l?(A=typeof l[p]=="function"?l[p].call(r,i,e,s):l[p],br(A)&&~A.indexOf("random(")&&(A=mm(A)),Hr(A+"")||(A+=As.units[p]||Hr(fl(e,p))||""),(A+"").charAt(1)==="="&&(A=fl(e,p))):A=fl(e,p),f=parseFloat(A),v=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),v&&(c=c.substr(2)),u=parseFloat(c),p in vl&&(p==="autoAlpha"&&(f===1&&fl(e,"visibility")==="hidden"&&u&&(f=0),x.push("visibility",0,a.visibility),xA(this,a,"visibility",f?"inherit":"hidden",u?"inherit":"hidden",!u)),p!=="scale"&&p!=="transform"&&(p=vl[p],~p.indexOf(",")&&(p=p.split(",")[0]))),y=p in Ml,y){if(this.styles.save(p),w||(C=e._gsap,C.renderTransform&&!t.parseTransform||wm(e,t.parseTransform),b=t.smoothOrigin!==!1&&C.smooth,w=this._pt=new Ti(this._pt,a,Sn,0,1,C.renderTransform,C,0,-1),w.dep=1),p==="scale")this._pt=new Ti(this._pt,C,"scaleY",C.scaleY,(v?Td(C.scaleY,v+u):u)-C.scaleY||0,iE),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){x.push(To,0,a[To]),c=d7(c),C.svg?aE(e,c,0,b,0,this):(g=parseFloat(c.split(" ")[2])||0,g!==C.zOrigin&&xA(this,C,"zOrigin",C.zOrigin,g),xA(this,a,p,cw(A),cw(c)));continue}else if(p==="svgOrigin"){aE(e,c,1,b,0,this);continue}else if(p in NG){m7(this,C,p,f,v?Td(f,v+c):c);continue}else if(p==="smoothOrigin"){xA(this,C,"smooth",C.smooth,c);continue}else if(p==="force3D"){C[p]=c;continue}else if(p==="transform"){v7(this,c,e);continue}}else p in a||(p=uh(p)||p);if(y||(u||u===0)&&(f||f===0)&&!qj.test(c)&&p in a)m=(A+"").substr((f+"").length),u||(u=0),g=Hr(c)||(p in As.units?As.units[p]:m),m!==g&&(f=KA(e,p,A,g)),this._pt=new Ti(this._pt,y?C:a,p,f,(v?Td(f,v+u):u)-f,!y&&(g==="px"||p==="zIndex")&&t.autoRound!==!1?n7:iE),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=A,this._pt.r=t7);else if(p in a)f7.call(this,e,p,A,v?v+c:c);else if(p in e)this.add(e,p,A||e[p],v?v+c:c,i,s);else if(p!=="parseTransform"){zS(p,c);continue}y||(p in a?x.push(p,0,a[p]):x.push(p,1,A||e[p])),o.push(p)}}F&&FG(this)},render:function(e,t){if(t.tween._time||!r_())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:fl,aliases:vl,getSetter:function(e,t,r){var i=vl[t];return i&&i.indexOf(",")<0&&(t=i),t in Ml&&t!==To&&(e._gsap.x||fl(e,"x"))?r&&x2===r?t==="scale"?o7:s7:(x2=r||{})&&(t==="scale"?a7:l7):e.style&&!JS(e.style[t])?r7:~t.indexOf("-")?i7:e_(e,t)},core:{_removeProperty:ym,_getMatrix:s_}};fs.utils.checkPrefix=uh;fs.core.getStyleSaver=QG;(function(n,e,t,r){var i=Mi(n+","+e+","+t,function(s){Ml[s]=1});Mi(e,function(s){As.units[s]="deg",NG[s]=1}),vl[i[13]]=n+","+e,Mi(r,function(s){var o=s.split(":");vl[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Mi("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){As.units[n]="px"});fs.registerPlugin(VG);var lE=fs.registerPlugin(VG)||fs;lE.core.Tween;function Qh(){localStorage&&Object.keys(localStorage).map(n=>{this.setItem(n,localStorage[n],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}Qh.prototype.key=function(n){return Object.keys(this)[n]};Qh.prototype.getItem=function(n){try{return JSON.parse(this[n])}catch{}return this[n]};Qh.prototype.setItem=function(n,e,t=!0){const r=typeof e=="string"?e:JSON.stringify(e);return t&&localStorage.setItem(n,r),this[n]=r};Qh.prototype.removeItem=function(n){delete this[n]};Qh.prototype.clear=function(){Object.keys(this).forEach(n=>delete this[n])};let y7=new Qh;const B7=n=>({get(e,t){return n.getItem(String(t))},set(e,t,r){return n.setItem(String(t),r),!0}}),w7=(n=y7)=>new Proxy({},B7(n)),at=w7();/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ks="146",Zu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ju={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},C7=0,R2=1,b7=2,LG=1,x7=2,lg=3,Sa=0,di=1,Ui=2,PA=0,kd=1,hu=2,M2=3,T2=4,I7=5,Uf=100,F7=101,E7=102,N2=103,D2=104,U7=200,S7=201,_7=202,Q7=203,PG=204,WG=205,R7=206,M7=207,T7=208,N7=209,D7=210,k7=0,V7=1,L7=2,AE=3,P7=4,W7=5,O7=6,G7=7,OC=0,Z7=1,J7=2,bl=0,H7=1,z7=2,Y7=3,X7=4,K7=5,OG=300,fh=301,dh=302,uw=303,cE=304,GC=306,ds=1e3,ci=1001,Cm=1002,Br=1003,fw=1004,dw=1005,oi=1006,o_=1007,Uu=1008,jA=1009,j7=1010,$7=1011,GG=1012,q7=1013,Zc=1014,IA=1015,bm=1016,e$=1017,t$=1018,Vd=1020,n$=1021,ZG=1022,Fi=1023,r$=1024,i$=1025,nu=1026,hh=1027,s$=1028,o$=1029,a$=1030,l$=1031,A$=1033,Wx=33776,Ox=33777,Gx=33778,Zx=33779,k2=35840,V2=35841,L2=35842,P2=35843,c$=36196,W2=37492,O2=37496,G2=37808,Z2=37809,J2=37810,H2=37811,z2=37812,Y2=37813,X2=37814,K2=37815,j2=37816,$2=37817,q2=37818,eT=37819,tT=37820,nT=37821,rT=36492,u$=2200,f$=2201,d$=2202,ph=2300,pu=2301,Jx=2302,md=2400,vd=2401,hw=2402,a_=2500,h$=2501,p$=1,JG=2,no=3e3,ht=3001,g$=3200,m$=3201,Rh=0,v$=1,ll="srgb",Jc="srgb-linear",Hx=7680,y$=519,uE=35044,B$=35048,iT="300 es",fE=1035;class fc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Wr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let sT=1234567;const Lg=Math.PI/180,xm=180/Math.PI;function No(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Wr[n&255]+Wr[n>>8&255]+Wr[n>>16&255]+Wr[n>>24&255]+"-"+Wr[e&255]+Wr[e>>8&255]+"-"+Wr[e>>16&15|64]+Wr[e>>24&255]+"-"+Wr[t&63|128]+Wr[t>>8&255]+"-"+Wr[t>>16&255]+Wr[t>>24&255]+Wr[r&255]+Wr[r>>8&255]+Wr[r>>16&255]+Wr[r>>24&255]).toLowerCase()}function cr(n,e,t){return Math.max(e,Math.min(t,n))}function l_(n,e){return(n%e+e)%e}function w$(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function C$(n,e,t){return n!==e?(t-n)/(e-n):0}function Pg(n,e,t){return(1-t)*n+t*e}function b$(n,e,t,r){return Pg(n,e,1-Math.exp(-t*r))}function x$(n,e=1){return e-Math.abs(l_(n,e*2)-e)}function I$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function F$(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function E$(n,e){return n+Math.floor(Math.random()*(e-n+1))}function U$(n,e){return n+Math.random()*(e-n)}function S$(n){return n*(.5-Math.random())}function _$(n){n!==void 0&&(sT=n);let e=sT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Q$(n){return n*Lg}function R$(n){return n*xm}function dE(n){return(n&n-1)===0&&n!==0}function HG(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function pw(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function M$(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),A=s((e+r)/2),c=o((e+r)/2),u=s((e-r)/2),f=o((e-r)/2),d=s((r-e)/2),h=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*u,l*f,a*A);break;case"YZY":n.set(l*f,a*c,l*u,a*A);break;case"ZXZ":n.set(l*u,l*f,a*c,a*A);break;case"XZX":n.set(a*c,l*h,l*d,a*A);break;case"YXY":n.set(l*d,a*c,l*h,a*A);break;case"ZYZ":n.set(l*h,l*d,a*c,a*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function yl(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function on(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Lt=Object.freeze({__proto__:null,DEG2RAD:Lg,RAD2DEG:xm,generateUUID:No,clamp:cr,euclideanModulo:l_,mapLinear:w$,inverseLerp:C$,lerp:Pg,damp:b$,pingpong:x$,smoothstep:I$,smootherstep:F$,randInt:E$,randFloat:U$,randFloatSpread:S$,seededRandom:_$,degToRad:Q$,radToDeg:R$,isPowerOfTwo:dE,ceilPowerOfTwo:HG,floorPowerOfTwo:pw,setQuaternionFromProperEuler:M$,normalize:on,denormalize:yl});class Oe{constructor(e=0,t=0){Oe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,A){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],A=r[1],c=r[4],u=r[7],f=r[2],d=r[5],h=r[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],w=i[7],C=i[2],b=i[5],F=i[8];return s[0]=o*p+a*v+l*C,s[3]=o*m+a*y+l*b,s[6]=o*g+a*w+l*F,s[1]=A*p+c*v+u*C,s[4]=A*m+c*y+u*b,s[7]=A*g+c*w+u*F,s[2]=f*p+d*v+h*C,s[5]=f*m+d*y+h*b,s[8]=f*g+d*w+h*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8];return t*o*c-t*a*A-r*s*c+r*a*l+i*s*A-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=c*o-a*A,f=a*l-c*s,d=A*s-o*l,h=t*u+r*f+i*d;if(h===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/h;return e[0]=u*p,e[1]=(i*A-c*r)*p,e[2]=(a*r-i*o)*p,e[3]=f*p,e[4]=(c*t-i*l)*p,e[5]=(i*s-a*t)*p,e[6]=d*p,e[7]=(r*l-A*t)*p,e[8]=(o*t-r*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),A=Math.sin(s);return this.set(r*l,r*A,-r*(l*o+A*a)+o+e,-i*A,i*l,-i*(-A*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],A=i[4],c=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*A,i[6]=t*a+r*c,i[1]=-r*s+t*l,i[4]=-r*o+t*A,i[7]=-r*a+t*c,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function zG(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Im(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function ru(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function eB(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const zx={[ll]:{[Jc]:ru},[Jc]:{[ll]:eB}},go={legacyMode:!0,get workingColorSpace(){return Jc},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(zx[e]&&zx[e][t]!==void 0){const r=zx[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},YG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},or={r:0,g:0,b:0},mo={h:0,s:0,l:0},iv={h:0,s:0,l:0};function Yx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function sv(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Re{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ll){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,go.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Jc){return this.r=e,this.g=t,this.b=r,go.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Jc){if(e=l_(e,1),t=cr(t,0,1),r=cr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=Yx(o,s,e+1/3),this.g=Yx(o,s,e),this.b=Yx(o,s,e-1/3)}return go.toWorkingColorSpace(this,i),this}setStyle(e,t=ll){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,go.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,go.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,A=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,A,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,go.toWorkingColorSpace(this,t),this;if(o===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,go.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=ll){const r=YG[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ru(e.r),this.g=ru(e.g),this.b=ru(e.b),this}copyLinearToSRGB(e){return this.r=eB(e.r),this.g=eB(e.g),this.b=eB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ll){return go.fromWorkingColorSpace(sv(this,or),e),cr(or.r*255,0,255)<<16^cr(or.g*255,0,255)<<8^cr(or.b*255,0,255)<<0}getHexString(e=ll){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jc){go.fromWorkingColorSpace(sv(this,or),t);const r=or.r,i=or.g,s=or.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,A;const c=(a+o)/2;if(a===o)l=0,A=0;else{const u=o-a;switch(A=c<=.5?u/(o+a):u/(2-o-a),o){case r:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-r)/u+2;break;case s:l=(r-i)/u+4;break}l/=6}return e.h=l,e.s=A,e.l=c,e}getRGB(e,t=Jc){return go.fromWorkingColorSpace(sv(this,or),t),e.r=or.r,e.g=or.g,e.b=or.b,e}getStyle(e=ll){return go.fromWorkingColorSpace(sv(this,or),e),e!==ll?`color(${e} ${or.r} ${or.g} ${or.b})`:`rgb(${or.r*255|0},${or.g*255|0},${or.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(mo),mo.h+=e,mo.s+=t,mo.l+=r,this.setHSL(mo.h,mo.s,mo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(mo),e.getHSL(iv);const r=Pg(mo.h,iv.h,t),i=Pg(mo.s,iv.s,t),s=Pg(mo.l,iv.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Re.NAMES=YG;let Hu;class XG{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Hu===void 0&&(Hu=Im("canvas")),Hu.width=e.width,Hu.height=e.height;const r=Hu.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Hu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Im("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ru(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(ru(t[r]/255)*255):t[r]=ru(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class A_{constructor(e=null){this.isSource=!0,this.uuid=No(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Xx(i[o].image)):s.push(Xx(i[o]))}else s=Xx(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function Xx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?XG.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let T$=0;class nr extends fc{constructor(e=nr.DEFAULT_IMAGE,t=nr.DEFAULT_MAPPING,r=ci,i=ci,s=oi,o=Uu,a=Fi,l=jA,A=1,c=no){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:T$++}),this.uuid=No(),this.name="",this.source=new A_(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=A,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Oe(0,0),this.repeat=new Oe(1,1),this.center=new Oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==OG)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ds:e.x=e.x-Math.floor(e.x);break;case ci:e.x=e.x<0?0:1;break;case Cm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ds:e.y=e.y-Math.floor(e.y);break;case ci:e.y=e.y<0?0:1;break;case Cm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}nr.DEFAULT_IMAGE=null;nr.DEFAULT_MAPPING=OG;class Pt{constructor(e=0,t=0,r=0,i=1){Pt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,A=l[0],c=l[4],u=l[8],f=l[1],d=l[5],h=l[9],p=l[2],m=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(u-p)<.01&&Math.abs(h-m)<.01){if(Math.abs(c+f)<.1&&Math.abs(u+p)<.1&&Math.abs(h+m)<.1&&Math.abs(A+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(A+1)/2,w=(d+1)/2,C=(g+1)/2,b=(c+f)/4,F=(u+p)/4,x=(h+m)/4;return y>w&&y>C?y<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(y),i=b/r,s=F/r):w>C?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=b/i,s=x/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=F/s,i=x/s),this.set(r,i,s,t),this}let v=Math.sqrt((m-h)*(m-h)+(u-p)*(u-p)+(f-c)*(f-c));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(u-p)/v,this.z=(f-c)/v,this.w=Math.acos((A+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $A extends fc{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Pt(0,0,e,t),this.scissorTest=!1,this.viewport=new Pt(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new nr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:oi,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new A_(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class KG extends nr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Br,this.minFilter=Br,this.wrapR=ci,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class N$ extends nr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Br,this.minFilter=Br,this.wrapR=ci,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class et{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],A=r[i+1],c=r[i+2],u=r[i+3];const f=s[o+0],d=s[o+1],h=s[o+2],p=s[o+3];if(a===0){e[t+0]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=h,e[t+3]=p;return}if(u!==p||l!==f||A!==d||c!==h){let m=1-a;const g=l*f+A*d+c*h+u*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const C=Math.sqrt(y),b=Math.atan2(C,g*v);m=Math.sin(m*b)/C,a=Math.sin(a*b)/C}const w=a*v;if(l=l*m+f*w,A=A*m+d*w,c=c*m+h*w,u=u*m+p*w,m===1-a){const C=1/Math.sqrt(l*l+A*A+c*c+u*u);l*=C,A*=C,c*=C,u*=C}}e[t]=l,e[t+1]=A,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],A=r[i+2],c=r[i+3],u=s[o],f=s[o+1],d=s[o+2],h=s[o+3];return e[t]=a*h+c*u+l*d-A*f,e[t+1]=l*h+c*f+A*u-a*d,e[t+2]=A*h+c*d+a*f-l*u,e[t+3]=c*h-a*u-l*f-A*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,A=a(r/2),c=a(i/2),u=a(s/2),f=l(r/2),d=l(i/2),h=l(s/2);switch(o){case"XYZ":this._x=f*c*u+A*d*h,this._y=A*d*u-f*c*h,this._z=A*c*h+f*d*u,this._w=A*c*u-f*d*h;break;case"YXZ":this._x=f*c*u+A*d*h,this._y=A*d*u-f*c*h,this._z=A*c*h-f*d*u,this._w=A*c*u+f*d*h;break;case"ZXY":this._x=f*c*u-A*d*h,this._y=A*d*u+f*c*h,this._z=A*c*h+f*d*u,this._w=A*c*u-f*d*h;break;case"ZYX":this._x=f*c*u-A*d*h,this._y=A*d*u+f*c*h,this._z=A*c*h-f*d*u,this._w=A*c*u+f*d*h;break;case"YZX":this._x=f*c*u+A*d*h,this._y=A*d*u+f*c*h,this._z=A*c*h-f*d*u,this._w=A*c*u-f*d*h;break;case"XZY":this._x=f*c*u-A*d*h,this._y=A*d*u-f*c*h,this._z=A*c*h+f*d*u,this._w=A*c*u+f*d*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],A=t[2],c=t[6],u=t[10],f=r+a+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-A)*d,this._z=(o-i)*d}else if(r>a&&r>u){const d=2*Math.sqrt(1+r-a-u);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+A)/d}else if(a>u){const d=2*Math.sqrt(1+a-r-u);this._w=(s-A)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+u-r-a);this._w=(o-i)/d,this._x=(s+A)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(cr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,A=t._z,c=t._w;return this._x=r*c+o*a+i*A-s*l,this._y=i*c+o*l+s*a-r*A,this._z=s*c+o*A+r*l-i*a,this._w=o*c-r*a-i*l-s*A,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const A=Math.sqrt(l),c=Math.atan2(A,a),u=Math.sin((1-t)*c)/A,f=Math.sin(t*c)/A;return this._w=o*u+this._w*f,this._x=r*u+this._x*f,this._y=i*u+this._y*f,this._z=s*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,r=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(oT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,A=l*t+o*i-a*r,c=l*r+a*t-s*i,u=l*i+s*r-o*t,f=-s*t-o*r-a*i;return this.x=A*l+f*-s+c*-a-u*-o,this.y=c*l+f*-o+u*-s-A*-a,this.z=u*l+f*-a+A*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Kx.copy(this).projectOnVector(e),this.sub(Kx)}reflect(e){return this.sub(Kx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(cr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Kx=new X,oT=new et;class ao{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.length;l<A;l+=3){const c=e[l],u=e[l+1],f=e[l+2];c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,A=e.count;l<A;l++){const c=e.getX(l),u=e.getY(l),f=e.getZ(l);c<t&&(t=c),u<r&&(r=u),f<i&&(i=f),c>s&&(s=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Bc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Bc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Bc)}else r.boundingBox===null&&r.computeBoundingBox(),jx.copy(r.boundingBox),jx.applyMatrix4(e.matrixWorld),this.union(jx);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Bc),Bc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cp),ov.subVectors(this.max,Cp),zu.subVectors(e.a,Cp),Yu.subVectors(e.b,Cp),Xu.subVectors(e.c,Cp),Yl.subVectors(Yu,zu),Xl.subVectors(Xu,Yu),wc.subVectors(zu,Xu);let t=[0,-Yl.z,Yl.y,0,-Xl.z,Xl.y,0,-wc.z,wc.y,Yl.z,0,-Yl.x,Xl.z,0,-Xl.x,wc.z,0,-wc.x,-Yl.y,Yl.x,0,-Xl.y,Xl.x,0,-wc.y,wc.x,0];return!$x(t,zu,Yu,Xu,ov)||(t=[1,0,0,0,1,0,0,0,1],!$x(t,zu,Yu,Xu,ov))?!1:(av.crossVectors(Yl,Xl),t=[av.x,av.y,av.z],$x(t,zu,Yu,Xu,ov))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Bc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Bc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Oa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Oa=[new X,new X,new X,new X,new X,new X,new X,new X],Bc=new X,jx=new ao,zu=new X,Yu=new X,Xu=new X,Yl=new X,Xl=new X,wc=new X,Cp=new X,ov=new X,av=new X,Cc=new X;function $x(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Cc.fromArray(n,s);const a=i.x*Math.abs(Cc.x)+i.y*Math.abs(Cc.y)+i.z*Math.abs(Cc.z),l=e.dot(Cc),A=t.dot(Cc),c=r.dot(Cc);if(Math.max(-Math.max(l,A,c),Math.min(l,A,c))>a)return!1}return!0}const D$=new ao,bp=new X,qx=new X;class Su{constructor(e=new X,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):D$.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;bp.subVectors(e,this.center);const t=bp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(bp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(qx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(bp.copy(e.center).add(qx)),this.expandByPoint(bp.copy(e.center).sub(qx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ga=new X,eI=new X,lv=new X,Kl=new X,tI=new X,Av=new X,nI=new X;class o0{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ga)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ga.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ga.copy(this.direction).multiplyScalar(t).add(this.origin),Ga.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){eI.copy(e).add(t).multiplyScalar(.5),lv.copy(t).sub(e).normalize(),Kl.copy(this.origin).sub(eI);const s=e.distanceTo(t)*.5,o=-this.direction.dot(lv),a=Kl.dot(this.direction),l=-Kl.dot(lv),A=Kl.lengthSq(),c=Math.abs(1-o*o);let u,f,d,h;if(c>0)if(u=o*l-a,f=o*a-l,h=s*c,u>=0)if(f>=-h)if(f<=h){const p=1/c;u*=p,f*=p,d=u*(u+o*f+2*a)+f*(o*u+f+2*l)+A}else f=s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+A;else f=-s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+A;else f<=-h?(u=Math.max(0,-(-o*s+a)),f=u>0?-s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+A):f<=h?(u=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+A):(u=Math.max(0,-(o*s+a)),f=u>0?s:Math.min(Math.max(-s,-l),s),d=-u*u+f*(f+2*l)+A);else f=o>0?-s:s,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*l)+A;return r&&r.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(lv).multiplyScalar(f).add(eI),d}intersectSphere(e,t){Ga.subVectors(e.center,this.origin);const r=Ga.dot(this.direction),i=Ga.dot(Ga)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const A=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return A>=0?(r=(e.min.x-f.x)*A,i=(e.max.x-f.x)*A):(r=(e.max.x-f.x)*A,i=(e.min.x-f.x)*A),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),u>=0?(a=(e.min.z-f.z)*u,l=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,l=(e.min.z-f.z)*u),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ga)!==null}intersectTriangle(e,t,r,i,s){tI.subVectors(t,e),Av.subVectors(r,e),nI.crossVectors(tI,Av);let o=this.direction.dot(nI),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Kl.subVectors(this.origin,e);const l=a*this.direction.dot(Av.crossVectors(Kl,Av));if(l<0)return null;const A=a*this.direction.dot(tI.cross(Kl));if(A<0||l+A>o)return null;const c=-a*Kl.dot(nI);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Le{constructor(){Le.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,A,c,u,f,d,h,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=A,g[6]=c,g[10]=u,g[14]=f,g[3]=d,g[7]=h,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Le().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Ku.setFromMatrixColumn(e,0).length(),s=1/Ku.setFromMatrixColumn(e,1).length(),o=1/Ku.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),A=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*u,h=a*c,p=a*u;t[0]=l*c,t[4]=-l*u,t[8]=A,t[1]=d+h*A,t[5]=f-p*A,t[9]=-a*l,t[2]=p-f*A,t[6]=h+d*A,t[10]=o*l}else if(e.order==="YXZ"){const f=l*c,d=l*u,h=A*c,p=A*u;t[0]=f+p*a,t[4]=h*a-d,t[8]=o*A,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=d*a-h,t[6]=p+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*c,d=l*u,h=A*c,p=A*u;t[0]=f-p*a,t[4]=-o*u,t[8]=h+d*a,t[1]=d+h*a,t[5]=o*c,t[9]=p-f*a,t[2]=-o*A,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*c,d=o*u,h=a*c,p=a*u;t[0]=l*c,t[4]=h*A-d,t[8]=f*A+p,t[1]=l*u,t[5]=p*A+f,t[9]=d*A-h,t[2]=-A,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*A,h=a*l,p=a*A;t[0]=l*c,t[4]=p-f*u,t[8]=h*u+d,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-A*c,t[6]=d*u+h,t[10]=f-p*u}else if(e.order==="XZY"){const f=o*l,d=o*A,h=a*l,p=a*A;t[0]=l*c,t[4]=-u,t[8]=A*c,t[1]=f*u+p,t[5]=o*c,t[9]=d*u-h,t[2]=h*u-d,t[6]=a*c,t[10]=p*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(k$,e,V$)}lookAt(e,t,r){const i=this.elements;return Pi.subVectors(e,t),Pi.lengthSq()===0&&(Pi.z=1),Pi.normalize(),jl.crossVectors(r,Pi),jl.lengthSq()===0&&(Math.abs(r.z)===1?Pi.x+=1e-4:Pi.z+=1e-4,Pi.normalize(),jl.crossVectors(r,Pi)),jl.normalize(),cv.crossVectors(Pi,jl),i[0]=jl.x,i[4]=cv.x,i[8]=Pi.x,i[1]=jl.y,i[5]=cv.y,i[9]=Pi.y,i[2]=jl.z,i[6]=cv.z,i[10]=Pi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],A=r[12],c=r[1],u=r[5],f=r[9],d=r[13],h=r[2],p=r[6],m=r[10],g=r[14],v=r[3],y=r[7],w=r[11],C=r[15],b=i[0],F=i[4],x=i[8],S=i[12],R=i[1],Z=i[5],Y=i[9],Q=i[13],B=i[2],E=i[6],M=i[10],D=i[14],T=i[3],V=i[7],G=i[11],P=i[15];return s[0]=o*b+a*R+l*B+A*T,s[4]=o*F+a*Z+l*E+A*V,s[8]=o*x+a*Y+l*M+A*G,s[12]=o*S+a*Q+l*D+A*P,s[1]=c*b+u*R+f*B+d*T,s[5]=c*F+u*Z+f*E+d*V,s[9]=c*x+u*Y+f*M+d*G,s[13]=c*S+u*Q+f*D+d*P,s[2]=h*b+p*R+m*B+g*T,s[6]=h*F+p*Z+m*E+g*V,s[10]=h*x+p*Y+m*M+g*G,s[14]=h*S+p*Q+m*D+g*P,s[3]=v*b+y*R+w*B+C*T,s[7]=v*F+y*Z+w*E+C*V,s[11]=v*x+y*Y+w*M+C*G,s[15]=v*S+y*Q+w*D+C*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],A=e[13],c=e[2],u=e[6],f=e[10],d=e[14],h=e[3],p=e[7],m=e[11],g=e[15];return h*(+s*l*u-i*A*u-s*a*f+r*A*f+i*a*d-r*l*d)+p*(+t*l*d-t*A*f+s*o*f-i*o*d+i*A*c-s*l*c)+m*(+t*A*u-t*a*d-s*o*u+r*o*d+s*a*c-r*A*c)+g*(-i*a*c-t*l*u+t*a*f+i*o*u-r*o*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],A=e[7],c=e[8],u=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],g=e[15],v=u*m*A-p*f*A+p*l*d-a*m*d-u*l*g+a*f*g,y=h*f*A-c*m*A-h*l*d+o*m*d+c*l*g-o*f*g,w=c*p*A-h*u*A+h*a*d-o*p*d-c*a*g+o*u*g,C=h*u*l-c*p*l-h*a*f+o*p*f+c*a*m-o*u*m,b=t*v+r*y+i*w+s*C;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/b;return e[0]=v*F,e[1]=(p*f*s-u*m*s-p*i*d+r*m*d+u*i*g-r*f*g)*F,e[2]=(a*m*s-p*l*s+p*i*A-r*m*A-a*i*g+r*l*g)*F,e[3]=(u*l*s-a*f*s-u*i*A+r*f*A+a*i*d-r*l*d)*F,e[4]=y*F,e[5]=(c*m*s-h*f*s+h*i*d-t*m*d-c*i*g+t*f*g)*F,e[6]=(h*l*s-o*m*s-h*i*A+t*m*A+o*i*g-t*l*g)*F,e[7]=(o*f*s-c*l*s+c*i*A-t*f*A-o*i*d+t*l*d)*F,e[8]=w*F,e[9]=(h*u*s-c*p*s-h*r*d+t*p*d+c*r*g-t*u*g)*F,e[10]=(o*p*s-h*a*s+h*r*A-t*p*A-o*r*g+t*a*g)*F,e[11]=(c*a*s-o*u*s-c*r*A+t*u*A+o*r*d-t*a*d)*F,e[12]=C*F,e[13]=(c*p*i-h*u*i+h*r*f-t*p*f-c*r*m+t*u*m)*F,e[14]=(h*a*i-o*p*i-h*r*l+t*p*l+o*r*m-t*a*m)*F,e[15]=(o*u*i-c*a*i+c*r*l-t*u*l-o*r*f+t*a*f)*F,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,A=s*o,c=s*a;return this.set(A*o+r,A*a-i*l,A*l+i*a,0,A*a+i*l,c*a+r,c*l-i*o,0,A*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,A=s+s,c=o+o,u=a+a,f=s*A,d=s*c,h=s*u,p=o*c,m=o*u,g=a*u,v=l*A,y=l*c,w=l*u,C=r.x,b=r.y,F=r.z;return i[0]=(1-(p+g))*C,i[1]=(d+w)*C,i[2]=(h-y)*C,i[3]=0,i[4]=(d-w)*b,i[5]=(1-(f+g))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(h+y)*F,i[9]=(m-v)*F,i[10]=(1-(f+p))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Ku.set(i[0],i[1],i[2]).length();const o=Ku.set(i[4],i[5],i[6]).length(),a=Ku.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],vo.copy(this);const A=1/s,c=1/o,u=1/a;return vo.elements[0]*=A,vo.elements[1]*=A,vo.elements[2]*=A,vo.elements[4]*=c,vo.elements[5]*=c,vo.elements[6]*=c,vo.elements[8]*=u,vo.elements[9]*=u,vo.elements[10]*=u,t.setFromRotationMatrix(vo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),A=2*s/(r-i),c=(t+e)/(t-e),u=(r+i)/(r-i),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=A,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),A=1/(r-i),c=1/(o-s),u=(t+e)*l,f=(r+i)*A,d=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*A,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Ku=new X,vo=new Le,k$=new X(0,0,0),V$=new X(1,1,1),jl=new X,cv=new X,Pi=new X,aT=new Le,lT=new et;class zr{constructor(e=0,t=0,r=0,i=zr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],A=i[5],c=i[9],u=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(cr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,A),this._z=0);break;case"YXZ":this._x=Math.asin(-cr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,A)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(cr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,A)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-cr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,A));break;case"YZX":this._z=Math.asin(cr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,A),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-cr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,A),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return aT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aT,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lT.setFromEuler(this),this.setFromQuaternion(lT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}zr.DefaultOrder="XYZ";zr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class c_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let L$=0;const AT=new X,ju=new et,Za=new Le,uv=new X,xp=new X,P$=new X,W$=new et,cT=new X(1,0,0),uT=new X(0,1,0),fT=new X(0,0,1),O$={type:"added"},dT={type:"removed"};class Nt extends fc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:L$++}),this.uuid=No(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nt.DefaultUp.clone();const e=new X,t=new zr,r=new et,i=new X(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Le},normalMatrix:{value:new Dn}}),this.matrix=new Le,this.matrixWorld=new Le,this.matrixAutoUpdate=Nt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Nt.DefaultMatrixWorldAutoUpdate,this.layers=new c_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ju.setFromAxisAngle(e,t),this.quaternion.multiply(ju),this}rotateOnWorldAxis(e,t){return ju.setFromAxisAngle(e,t),this.quaternion.premultiply(ju),this}rotateX(e){return this.rotateOnAxis(cT,e)}rotateY(e){return this.rotateOnAxis(uT,e)}rotateZ(e){return this.rotateOnAxis(fT,e)}translateOnAxis(e,t){return AT.copy(e).applyQuaternion(this.quaternion),this.position.add(AT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cT,e)}translateY(e){return this.translateOnAxis(uT,e)}translateZ(e){return this.translateOnAxis(fT,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Za.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?uv.copy(e):uv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),xp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Za.lookAt(xp,uv,this.up):Za.lookAt(uv,xp,this.up),this.quaternion.setFromRotationMatrix(Za),i&&(Za.extractRotation(i.matrixWorld),ju.setFromRotationMatrix(Za),this.quaternion.premultiply(ju.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(O$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dT)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(dT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Za.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Za.multiply(e.parent.matrixWorld)),e.applyMatrix4(Za),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xp,e,P$),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xp,W$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let A=0,c=l.length;A<c;A++){const u=l[A];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,A=this.material.length;l<A;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),A=o(e.textures),c=o(e.images),u=o(e.shapes),f=o(e.skeletons),d=o(e.animations),h=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),A.length>0&&(r.textures=A),c.length>0&&(r.images=c),u.length>0&&(r.shapes=u),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),h.length>0&&(r.nodes=h)}return r.object=i,r;function o(a){const l=[];for(const A in a){const c=a[A];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Nt.DefaultUp=new X(0,1,0);Nt.DefaultMatrixAutoUpdate=!0;Nt.DefaultMatrixWorldAutoUpdate=!0;const yo=new X,Ja=new X,rI=new X,Ha=new X,$u=new X,qu=new X,hT=new X,iI=new X,sI=new X,oI=new X;class ts{constructor(e=new X,t=new X,r=new X){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),yo.subVectors(e,t),i.cross(yo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){yo.subVectors(i,t),Ja.subVectors(r,t),rI.subVectors(e,t);const o=yo.dot(yo),a=yo.dot(Ja),l=yo.dot(rI),A=Ja.dot(Ja),c=Ja.dot(rI),u=o*A-a*a;if(u===0)return s.set(-2,-1,-1);const f=1/u,d=(A*l-a*c)*f,h=(o*c-a*l)*f;return s.set(1-d-h,h,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ha),Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ha),l.set(0,0),l.addScaledVector(s,Ha.x),l.addScaledVector(o,Ha.y),l.addScaledVector(a,Ha.z),l}static isFrontFacing(e,t,r,i){return yo.subVectors(r,t),Ja.subVectors(e,t),yo.cross(Ja).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yo.subVectors(this.c,this.b),Ja.subVectors(this.a,this.b),yo.cross(Ja).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ts.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ts.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return ts.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ts.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ts.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;$u.subVectors(i,r),qu.subVectors(s,r),iI.subVectors(e,r);const l=$u.dot(iI),A=qu.dot(iI);if(l<=0&&A<=0)return t.copy(r);sI.subVectors(e,i);const c=$u.dot(sI),u=qu.dot(sI);if(c>=0&&u<=c)return t.copy(i);const f=l*u-c*A;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector($u,o);oI.subVectors(e,s);const d=$u.dot(oI),h=qu.dot(oI);if(h>=0&&d<=h)return t.copy(s);const p=d*A-l*h;if(p<=0&&A>=0&&h<=0)return a=A/(A-h),t.copy(r).addScaledVector(qu,a);const m=c*h-d*u;if(m<=0&&u-c>=0&&d-h>=0)return hT.subVectors(s,i),a=(u-c)/(u-c+(d-h)),t.copy(i).addScaledVector(hT,a);const g=1/(m+p+f);return o=p*g,a=f*g,t.copy(r).addScaledVector($u,o).addScaledVector(qu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let G$=0,zs=class extends fc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:G$++}),this.uuid=No(),this.name="",this.type="Material",this.blending=kd,this.side=Sa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=PG,this.blendDst=WG,this.blendEquation=Uf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=AE,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=y$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hx,this.stencilZFail=Hx,this.stencilZPass=Hx,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==kd&&(r.blending=this.blending),this.side!==Sa&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};class ss extends zs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Re(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=OC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Yn=new X,fv=new Oe;class At{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=uE,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)fv.fromBufferAttribute(this,t),fv.applyMatrix3(e),this.setXY(t,fv.x,fv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyMatrix3(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyMatrix4(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.applyNormalMatrix(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yn.fromBufferAttribute(this,t),Yn.transformDirection(e),this.setXYZ(t,Yn.x,Yn.y,Yn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=yl(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=yl(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=yl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=yl(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array),s=on(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==uE&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ZC extends At{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class jG extends At{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class bn extends At{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Z$=0;const xs=new Le,aI=new Nt,ef=new X,Wi=new ao,Ip=new ao,pr=new X;class $t extends fc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Z$++}),this.uuid=No(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zG(e)?jG:ZC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Dn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return xs.makeRotationFromQuaternion(e),this.applyMatrix4(xs),this}rotateX(e){return xs.makeRotationX(e),this.applyMatrix4(xs),this}rotateY(e){return xs.makeRotationY(e),this.applyMatrix4(xs),this}rotateZ(e){return xs.makeRotationZ(e),this.applyMatrix4(xs),this}translate(e,t,r){return xs.makeTranslation(e,t,r),this.applyMatrix4(xs),this}scale(e,t,r){return xs.makeScale(e,t,r),this.applyMatrix4(xs),this}lookAt(e){return aI.lookAt(e),aI.updateMatrix(),this.applyMatrix4(aI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ef).negate(),this.translate(ef.x,ef.y,ef.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new bn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ao);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Wi.setFromBufferAttribute(s),this.morphTargetsRelative?(pr.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint(pr),pr.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint(pr)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Su);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const r=this.boundingSphere.center;if(Wi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Ip.setFromBufferAttribute(a),this.morphTargetsRelative?(pr.addVectors(Wi.min,Ip.min),Wi.expandByPoint(pr),pr.addVectors(Wi.max,Ip.max),Wi.expandByPoint(pr)):(Wi.expandByPoint(Ip.min),Wi.expandByPoint(Ip.max))}Wi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)pr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(pr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let A=0,c=a.count;A<c;A++)pr.fromBufferAttribute(a,A),l&&(ef.fromBufferAttribute(e,A),pr.add(ef)),i=Math.max(i,r.distanceToSquared(pr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new At(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,A=[],c=[];for(let R=0;R<a;R++)A[R]=new X,c[R]=new X;const u=new X,f=new X,d=new X,h=new Oe,p=new Oe,m=new Oe,g=new X,v=new X;function y(R,Z,Y){u.fromArray(i,R*3),f.fromArray(i,Z*3),d.fromArray(i,Y*3),h.fromArray(o,R*2),p.fromArray(o,Z*2),m.fromArray(o,Y*2),f.sub(u),d.sub(u),p.sub(h),m.sub(h);const Q=1/(p.x*m.y-m.x*p.y);isFinite(Q)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(Q),v.copy(d).multiplyScalar(p.x).addScaledVector(f,-m.x).multiplyScalar(Q),A[R].add(g),A[Z].add(g),A[Y].add(g),c[R].add(v),c[Z].add(v),c[Y].add(v))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let R=0,Z=w.length;R<Z;++R){const Y=w[R],Q=Y.start,B=Y.count;for(let E=Q,M=Q+B;E<M;E+=3)y(r[E+0],r[E+1],r[E+2])}const C=new X,b=new X,F=new X,x=new X;function S(R){F.fromArray(s,R*3),x.copy(F);const Z=A[R];C.copy(Z),C.sub(F.multiplyScalar(F.dot(Z))).normalize(),b.crossVectors(x,Z);const Q=b.dot(c[R])<0?-1:1;l[R*4]=C.x,l[R*4+1]=C.y,l[R*4+2]=C.z,l[R*4+3]=Q}for(let R=0,Z=w.length;R<Z;++R){const Y=w[R],Q=Y.start,B=Y.count;for(let E=Q,M=Q+B;E<M;E+=3)S(r[E+0]),S(r[E+1]),S(r[E+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new At(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new X,s=new X,o=new X,a=new X,l=new X,A=new X,c=new X,u=new X;if(e)for(let f=0,d=e.count;f<d;f+=3){const h=e.getX(f+0),p=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(t,h),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),a.fromBufferAttribute(r,h),l.fromBufferAttribute(r,p),A.fromBufferAttribute(r,m),a.add(c),l.add(c),A.add(c),r.setXYZ(h,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z),r.setXYZ(m,A.x,A.y,A.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),u.subVectors(i,s),c.cross(u),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)pr.fromBufferAttribute(e,t),pr.normalize(),e.setXYZ(t,pr.x,pr.y,pr.z)}toNonIndexed(){function e(a,l){const A=a.array,c=a.itemSize,u=a.normalized,f=new A.constructor(l.length*c);let d=0,h=0;for(let p=0,m=l.length;p<m;p++){a.isInterleavedBufferAttribute?d=l[p]*a.data.stride+a.offset:d=l[p]*c;for(let g=0;g<c;g++)f[h++]=A[d++]}return new At(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $t,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],A=e(l,r);t.setAttribute(a,A)}const s=this.morphAttributes;for(const a in s){const l=[],A=s[a];for(let c=0,u=A.length;c<u;c++){const f=A[c],d=e(f,r);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const A=o[a];t.addGroup(A.start,A.count,A.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const A in l)l[A]!==void 0&&(e[A]=l[A]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const A=r[l];e.data.attributes[l]=A.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const A=this.morphAttributes[l],c=[];for(let u=0,f=A.length;u<f;u++){const d=A[u];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const A in i){const c=i[A];this.setAttribute(A,c.clone(t))}const s=e.morphAttributes;for(const A in s){const c=[],u=s[A];for(let f=0,d=u.length;f<d;f++)c.push(u[f].clone(t));this.morphAttributes[A]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let A=0,c=o.length;A<c;A++){const u=o[A];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const pT=new Le,tf=new o0,lI=new Su,$l=new X,ql=new X,eA=new X,AI=new X,cI=new X,uI=new X,dv=new X,hv=new X,pv=new X,gv=new Oe,mv=new Oe,vv=new Oe,fI=new X,yv=new X;class Vn extends Nt{constructor(e=new $t,t=new ss){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),lI.copy(r.boundingSphere),lI.applyMatrix4(s),e.ray.intersectsSphere(lI)===!1)||(pT.copy(s).invert(),tf.copy(e.ray).applyMatrix4(pT),r.boundingBox!==null&&tf.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,A=r.morphAttributes.position,c=r.morphTargetsRelative,u=r.attributes.uv,f=r.attributes.uv2,d=r.groups,h=r.drawRange;if(a!==null)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=i[g.materialIndex],y=Math.max(g.start,h.start),w=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let C=y,b=w;C<b;C+=3){const F=a.getX(C),x=a.getX(C+1),S=a.getX(C+2);o=Bv(this,v,e,tf,l,A,c,u,f,F,x,S),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),m=Math.min(a.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const y=a.getX(g),w=a.getX(g+1),C=a.getX(g+2);o=Bv(this,i,e,tf,l,A,c,u,f,y,w,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=i[g.materialIndex],y=Math.max(g.start,h.start),w=Math.min(l.count,Math.min(g.start+g.count,h.start+h.count));for(let C=y,b=w;C<b;C+=3){const F=C,x=C+1,S=C+2;o=Bv(this,v,e,tf,l,A,c,u,f,F,x,S),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),m=Math.min(l.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const y=g,w=g+1,C=g+2;o=Bv(this,i,e,tf,l,A,c,u,f,y,w,C),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}}function J$(n,e,t,r,i,s,o,a){let l;if(e.side===di?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==Ui,a),l===null)return null;yv.copy(a),yv.applyMatrix4(n.matrixWorld);const A=t.ray.origin.distanceTo(yv);return A<t.near||A>t.far?null:{distance:A,point:yv.clone(),object:n}}function Bv(n,e,t,r,i,s,o,a,l,A,c,u){$l.fromBufferAttribute(i,A),ql.fromBufferAttribute(i,c),eA.fromBufferAttribute(i,u);const f=n.morphTargetInfluences;if(s&&f){dv.set(0,0,0),hv.set(0,0,0),pv.set(0,0,0);for(let h=0,p=s.length;h<p;h++){const m=f[h],g=s[h];m!==0&&(AI.fromBufferAttribute(g,A),cI.fromBufferAttribute(g,c),uI.fromBufferAttribute(g,u),o?(dv.addScaledVector(AI,m),hv.addScaledVector(cI,m),pv.addScaledVector(uI,m)):(dv.addScaledVector(AI.sub($l),m),hv.addScaledVector(cI.sub(ql),m),pv.addScaledVector(uI.sub(eA),m)))}$l.add(dv),ql.add(hv),eA.add(pv)}n.isSkinnedMesh&&(n.boneTransform(A,$l),n.boneTransform(c,ql),n.boneTransform(u,eA));const d=J$(n,e,t,r,$l,ql,eA,fI);if(d){a&&(gv.fromBufferAttribute(a,A),mv.fromBufferAttribute(a,c),vv.fromBufferAttribute(a,u),d.uv=ts.getUV(fI,$l,ql,eA,gv,mv,vv,new Oe)),l&&(gv.fromBufferAttribute(l,A),mv.fromBufferAttribute(l,c),vv.fromBufferAttribute(l,u),d.uv2=ts.getUV(fI,$l,ql,eA,gv,mv,vv,new Oe));const h={a:A,b:c,c:u,normal:new X,materialIndex:0};ts.getNormal($l,ql,eA,h.normal),d.face=h}return d}class a0 extends $t{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],A=[],c=[],u=[];let f=0,d=0;h("z","y","x",-1,-1,r,t,e,o,s,0),h("z","y","x",1,-1,r,t,-e,o,s,1),h("x","z","y",1,1,e,r,t,i,o,2),h("x","z","y",1,-1,e,r,-t,i,o,3),h("x","y","z",1,-1,e,t,r,i,s,4),h("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new bn(A,3)),this.setAttribute("normal",new bn(c,3)),this.setAttribute("uv",new bn(u,2));function h(p,m,g,v,y,w,C,b,F,x,S){const R=w/F,Z=C/x,Y=w/2,Q=C/2,B=b/2,E=F+1,M=x+1;let D=0,T=0;const V=new X;for(let G=0;G<M;G++){const P=G*Z-Q;for(let U=0;U<E;U++){const H=U*R-Y;V[p]=H*v,V[m]=P*y,V[g]=B,A.push(V.x,V.y,V.z),V[p]=0,V[m]=0,V[g]=b>0?1:-1,c.push(V.x,V.y,V.z),u.push(U/F),u.push(1-G/x),D+=1}}for(let G=0;G<x;G++)for(let P=0;P<F;P++){const U=f+P+E*G,H=f+P+E*(G+1),oe=f+(P+1)+E*(G+1),k=f+(P+1)+E*G;l.push(U,H,k),l.push(H,oe,k),T+=6}a.addGroup(d,T,S),d+=T,f+=D}}static fromJSON(e){return new a0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gh(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ii(n){const e={};for(let t=0;t<n.length;t++){const r=gh(n[t]);for(const i in r)e[i]=r[i]}return e}function H$(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const $G={clone:gh,merge:ii};var z$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ki extends zs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=z$,this.fragmentShader=Y$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gh(e.uniforms),this.uniformsGroups=H$(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class qG extends Nt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Le,this.projectionMatrix=new Le,this.projectionMatrixInverse=new Le}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class _r extends qG{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Lg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xm*2*Math.atan(Math.tan(Lg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Lg*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,A=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/A,i*=o.width/l,r*=o.height/A}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const nf=90,rf=1;class X$ extends Nt{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new _r(nf,rf,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new X(1,0,0)),this.add(i);const s=new _r(nf,rf,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new X(-1,0,0)),this.add(s);const o=new _r(nf,rf,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new X(0,1,0)),this.add(o);const a=new _r(nf,rf,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new X(0,-1,0)),this.add(a);const l=new _r(nf,rf,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new X(0,0,1)),this.add(l);const A=new _r(nf,rf,e,t);A.layers=this.layers,A.up.set(0,-1,0),A.lookAt(new X(0,0,-1)),this.add(A)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,A]=this.children,c=e.getRenderTarget(),u=e.toneMapping,f=e.xr.enabled;e.toneMapping=bl,e.xr.enabled=!1;const d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,A),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}}class eZ extends nr{constructor(e,t,r,i,s,o,a,l,A,c){e=e!==void 0?e:[],t=t!==void 0?t:fh,super(e,t,r,i,s,o,a,l,A,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class K$ extends $A{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new eZ(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new a0(5,5,5),s=new ki({name:"CubemapFromEquirect",uniforms:gh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:di,blending:PA});s.uniforms.tEquirect.value=t;const o=new Vn(i,s),a=t.minFilter;return t.minFilter===Uu&&(t.minFilter=oi),new X$(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const dI=new X,j$=new X,$$=new Dn;class dl{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=dI.subVectors(r,t).cross(j$.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(dI),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||$$.getNormalMatrix(e),i=this.coplanarPoint(dI).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sf=new Su,wv=new X;class u_{constructor(e=new dl,t=new dl,r=new dl,i=new dl,s=new dl,o=new dl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],A=r[5],c=r[6],u=r[7],f=r[8],d=r[9],h=r[10],p=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-i,u-l,p-f,y-m).normalize(),t[1].setComponents(a+i,u+l,p+f,y+m).normalize(),t[2].setComponents(a+s,u+A,p+d,y+g).normalize(),t[3].setComponents(a-s,u-A,p-d,y-g).normalize(),t[4].setComponents(a-o,u-c,p-h,y-v).normalize(),t[5].setComponents(a+o,u+c,p+h,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),sf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(sf)}intersectsSprite(e){return sf.center.set(0,0,0),sf.radius=.7071067811865476,sf.applyMatrix4(e.matrixWorld),this.intersectsSphere(sf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(wv.x=i.normal.x>0?e.max.x:e.min.x,wv.y=i.normal.y>0?e.max.y:e.min.y,wv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(wv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function tZ(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function q$(n,e){const t=e.isWebGL2,r=new WeakMap;function i(A,c){const u=A.array,f=A.usage,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,u,f),A.onUploadCallback();let h;if(u instanceof Float32Array)h=5126;else if(u instanceof Uint16Array)if(A.isFloat16BufferAttribute)if(t)h=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else h=5123;else if(u instanceof Int16Array)h=5122;else if(u instanceof Uint32Array)h=5125;else if(u instanceof Int32Array)h=5124;else if(u instanceof Int8Array)h=5120;else if(u instanceof Uint8Array)h=5121;else if(u instanceof Uint8ClampedArray)h=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:A.version}}function s(A,c,u){const f=c.array,d=c.updateRange;n.bindBuffer(u,A),d.count===-1?n.bufferSubData(u,0,f):(t?n.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(u,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(A){return A.isInterleavedBufferAttribute&&(A=A.data),r.get(A)}function a(A){A.isInterleavedBufferAttribute&&(A=A.data);const c=r.get(A);c&&(n.deleteBuffer(c.buffer),r.delete(A))}function l(A,c){if(A.isGLBufferAttribute){const f=r.get(A);(!f||f.version<A.version)&&r.set(A,{buffer:A.buffer,type:A.type,bytesPerElement:A.elementSize,version:A.version});return}A.isInterleavedBufferAttribute&&(A=A.data);const u=r.get(A);u===void 0?r.set(A,i(A,c)):u.version<A.version&&(s(u.buffer,A,c),u.version=A.version)}return{get:o,remove:a,update:l}}class Mh extends $t{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),A=a+1,c=l+1,u=e/a,f=t/l,d=[],h=[],p=[],m=[];for(let g=0;g<c;g++){const v=g*f-o;for(let y=0;y<A;y++){const w=y*u-s;h.push(w,-v,0),p.push(0,0,1),m.push(y/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let v=0;v<a;v++){const y=v+A*g,w=v+A*(g+1),C=v+1+A*(g+1),b=v+1+A*g;d.push(y,w,b),d.push(w,C,b)}this.setIndex(d),this.setAttribute("position",new bn(h,3)),this.setAttribute("normal",new bn(p,3)),this.setAttribute("uv",new bn(m,2))}static fromJSON(e){return new Mh(e.width,e.height,e.widthSegments,e.heightSegments)}}var eq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,tq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nq=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,rq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oq="vec3 transformed = vec3( position );",aq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lq=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Aq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,fq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,vq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,yq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Bq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wq=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Cq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,xq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Iq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Fq="gl_FragColor = linearToOutputTexel( gl_FragColor );",Eq=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Uq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Sq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_q=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Qq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Rq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Mq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Tq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Nq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Dq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Vq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Lq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Pq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Wq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert
#define Material_LightProbeLOD( material )	(0)`,Oq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Gq=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Zq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Jq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Hq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,zq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Yq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Xq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Kq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,$q=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,qq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eee=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,nee=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ree=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,iee=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,see=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oee=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aee=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lee=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Aee=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cee=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,uee=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,fee=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,dee=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,hee=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gee=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mee=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vee=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,yee=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Bee=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,wee=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Cee=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bee=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,xee=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Iee=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Fee=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Eee=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Uee=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,See=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_ee=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qee=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Ree=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Mee=`#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Tee=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Nee=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Dee=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,kee=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vee=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Lee=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Pee=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Wee=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Oee=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Gee=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Zee=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Jee=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Hee=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,zee=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Yee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Xee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Kee=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,jee=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const $ee=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qee=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ete=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tte=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rte=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ite=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ste=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,ote=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ate=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lte=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ate=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cte=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ute=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fte=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dte=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hte=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pte=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gte=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mte=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vte=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yte=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Bte=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wte=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cte=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bte=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xte=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ite=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fte=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ete=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ute=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ste=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,_te=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qte=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,yt={alphamap_fragment:eq,alphamap_pars_fragment:tq,alphatest_fragment:nq,alphatest_pars_fragment:rq,aomap_fragment:iq,aomap_pars_fragment:sq,begin_vertex:oq,beginnormal_vertex:aq,bsdfs:lq,iridescence_fragment:Aq,bumpmap_pars_fragment:cq,clipping_planes_fragment:uq,clipping_planes_pars_fragment:fq,clipping_planes_pars_vertex:dq,clipping_planes_vertex:hq,color_fragment:pq,color_pars_fragment:gq,color_pars_vertex:mq,color_vertex:vq,common:yq,cube_uv_reflection_fragment:Bq,defaultnormal_vertex:wq,displacementmap_pars_vertex:Cq,displacementmap_vertex:bq,emissivemap_fragment:xq,emissivemap_pars_fragment:Iq,encodings_fragment:Fq,encodings_pars_fragment:Eq,envmap_fragment:Uq,envmap_common_pars_fragment:Sq,envmap_pars_fragment:_q,envmap_pars_vertex:Qq,envmap_physical_pars_fragment:Gq,envmap_vertex:Rq,fog_vertex:Mq,fog_pars_vertex:Tq,fog_fragment:Nq,fog_pars_fragment:Dq,gradientmap_pars_fragment:kq,lightmap_fragment:Vq,lightmap_pars_fragment:Lq,lights_lambert_fragment:Pq,lights_lambert_pars_fragment:Wq,lights_pars_begin:Oq,lights_toon_fragment:Zq,lights_toon_pars_fragment:Jq,lights_phong_fragment:Hq,lights_phong_pars_fragment:zq,lights_physical_fragment:Yq,lights_physical_pars_fragment:Xq,lights_fragment_begin:Kq,lights_fragment_maps:jq,lights_fragment_end:$q,logdepthbuf_fragment:qq,logdepthbuf_pars_fragment:eee,logdepthbuf_pars_vertex:tee,logdepthbuf_vertex:nee,map_fragment:ree,map_pars_fragment:iee,map_particle_fragment:see,map_particle_pars_fragment:oee,metalnessmap_fragment:aee,metalnessmap_pars_fragment:lee,morphcolor_vertex:Aee,morphnormal_vertex:cee,morphtarget_pars_vertex:uee,morphtarget_vertex:fee,normal_fragment_begin:dee,normal_fragment_maps:hee,normal_pars_fragment:pee,normal_pars_vertex:gee,normal_vertex:mee,normalmap_pars_fragment:vee,clearcoat_normal_fragment_begin:yee,clearcoat_normal_fragment_maps:Bee,clearcoat_pars_fragment:wee,iridescence_pars_fragment:Cee,output_fragment:bee,packing:xee,premultiplied_alpha_fragment:Iee,project_vertex:Fee,dithering_fragment:Eee,dithering_pars_fragment:Uee,roughnessmap_fragment:See,roughnessmap_pars_fragment:_ee,shadowmap_pars_fragment:Qee,shadowmap_pars_vertex:Ree,shadowmap_vertex:Mee,shadowmask_pars_fragment:Tee,skinbase_vertex:Nee,skinning_pars_vertex:Dee,skinning_vertex:kee,skinnormal_vertex:Vee,specularmap_fragment:Lee,specularmap_pars_fragment:Pee,tonemapping_fragment:Wee,tonemapping_pars_fragment:Oee,transmission_fragment:Gee,transmission_pars_fragment:Zee,uv_pars_fragment:Jee,uv_pars_vertex:Hee,uv_vertex:zee,uv2_pars_fragment:Yee,uv2_pars_vertex:Xee,uv2_vertex:Kee,worldpos_vertex:jee,background_vert:$ee,background_frag:qee,backgroundCube_vert:ete,backgroundCube_frag:tte,cube_vert:nte,cube_frag:rte,depth_vert:ite,depth_frag:ste,distanceRGBA_vert:ote,distanceRGBA_frag:ate,equirect_vert:lte,equirect_frag:Ate,linedashed_vert:cte,linedashed_frag:ute,meshbasic_vert:fte,meshbasic_frag:dte,meshlambert_vert:hte,meshlambert_frag:pte,meshmatcap_vert:gte,meshmatcap_frag:mte,meshnormal_vert:vte,meshnormal_frag:yte,meshphong_vert:Bte,meshphong_frag:wte,meshphysical_vert:Cte,meshphysical_frag:bte,meshtoon_vert:xte,meshtoon_frag:Ite,points_vert:Fte,points_frag:Ete,shadow_vert:Ute,shadow_frag:Ste,sprite_vert:_te,sprite_frag:Qte},Me={common:{diffuse:{value:new Re(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Dn},uv2Transform:{value:new Dn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Re(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Re(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dn}},sprite:{diffuse:{value:new Re(16777215)},opacity:{value:1},center:{value:new Oe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Dn}}},sa={basic:{uniforms:ii([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.fog]),vertexShader:yt.meshbasic_vert,fragmentShader:yt.meshbasic_frag},lambert:{uniforms:ii([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new Re(0)}}]),vertexShader:yt.meshlambert_vert,fragmentShader:yt.meshlambert_frag},phong:{uniforms:ii([Me.common,Me.specularmap,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,Me.lights,{emissive:{value:new Re(0)},specular:{value:new Re(1118481)},shininess:{value:30}}]),vertexShader:yt.meshphong_vert,fragmentShader:yt.meshphong_frag},standard:{uniforms:ii([Me.common,Me.envmap,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.roughnessmap,Me.metalnessmap,Me.fog,Me.lights,{emissive:{value:new Re(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yt.meshphysical_vert,fragmentShader:yt.meshphysical_frag},toon:{uniforms:ii([Me.common,Me.aomap,Me.lightmap,Me.emissivemap,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.gradientmap,Me.fog,Me.lights,{emissive:{value:new Re(0)}}]),vertexShader:yt.meshtoon_vert,fragmentShader:yt.meshtoon_frag},matcap:{uniforms:ii([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,Me.fog,{matcap:{value:null}}]),vertexShader:yt.meshmatcap_vert,fragmentShader:yt.meshmatcap_frag},points:{uniforms:ii([Me.points,Me.fog]),vertexShader:yt.points_vert,fragmentShader:yt.points_frag},dashed:{uniforms:ii([Me.common,Me.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yt.linedashed_vert,fragmentShader:yt.linedashed_frag},depth:{uniforms:ii([Me.common,Me.displacementmap]),vertexShader:yt.depth_vert,fragmentShader:yt.depth_frag},normal:{uniforms:ii([Me.common,Me.bumpmap,Me.normalmap,Me.displacementmap,{opacity:{value:1}}]),vertexShader:yt.meshnormal_vert,fragmentShader:yt.meshnormal_frag},sprite:{uniforms:ii([Me.sprite,Me.fog]),vertexShader:yt.sprite_vert,fragmentShader:yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Dn},t2D:{value:null}},vertexShader:yt.background_vert,fragmentShader:yt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:yt.backgroundCube_vert,fragmentShader:yt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yt.cube_vert,fragmentShader:yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yt.equirect_vert,fragmentShader:yt.equirect_frag},distanceRGBA:{uniforms:ii([Me.common,Me.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yt.distanceRGBA_vert,fragmentShader:yt.distanceRGBA_frag},shadow:{uniforms:ii([Me.lights,Me.fog,{color:{value:new Re(0)},opacity:{value:1}}]),vertexShader:yt.shadow_vert,fragmentShader:yt.shadow_frag}};sa.physical={uniforms:ii([sa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Oe(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Re(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Re(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Re(1,1,1)},specularColorMap:{value:null}}]),vertexShader:yt.meshphysical_vert,fragmentShader:yt.meshphysical_frag};function Rte(n,e,t,r,i,s,o){const a=new Re(0);let l=s===!0?0:1,A,c,u=null,f=0,d=null;function h(m,g){let v=!1,y=g.isScene===!0?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y));const w=n.xr,C=w.getSession&&w.getSession();C&&C.environmentBlendMode==="additive"&&(y=null),y===null?p(a,l):y&&y.isColor&&(p(y,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===GC)?(c===void 0&&(c=new Vn(new a0(1,1,1),new ki({name:"BackgroundCubeMaterial",uniforms:gh(sa.backgroundCube.uniforms),vertexShader:sa.backgroundCube.vertexShader,fragmentShader:sa.backgroundCube.fragmentShader,side:di,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,F,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,(u!==y||f!==y.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,u=y,f=y.version,d=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(A===void 0&&(A=new Vn(new Mh(2,2),new ki({name:"BackgroundMaterial",uniforms:gh(sa.background.uniforms),vertexShader:sa.background.vertexShader,fragmentShader:sa.background.fragmentShader,side:Sa,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),Object.defineProperty(A.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(A)),A.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),A.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||f!==y.version||d!==n.toneMapping)&&(A.material.needsUpdate=!0,u=y,f=y.version,d=n.toneMapping),A.layers.enableAll(),m.unshift(A,A.geometry,A.material,0,0,null))}function p(m,g){r.buffers.color.setClear(m.r,m.g,m.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),l=g,p(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,p(a,l)},render:h}}function Mte(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let A=l,c=!1;function u(B,E,M,D,T){let V=!1;if(o){const G=p(D,M,E);A!==G&&(A=G,d(A.object)),V=g(B,D,M,T),V&&v(B,D,M,T)}else{const G=E.wireframe===!0;(A.geometry!==D.id||A.program!==M.id||A.wireframe!==G)&&(A.geometry=D.id,A.program=M.id,A.wireframe=G,V=!0)}T!==null&&t.update(T,34963),(V||c)&&(c=!1,x(B,E,M,D),T!==null&&n.bindBuffer(34963,t.get(T).buffer))}function f(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(B){return r.isWebGL2?n.bindVertexArray(B):s.bindVertexArrayOES(B)}function h(B){return r.isWebGL2?n.deleteVertexArray(B):s.deleteVertexArrayOES(B)}function p(B,E,M){const D=M.wireframe===!0;let T=a[B.id];T===void 0&&(T={},a[B.id]=T);let V=T[E.id];V===void 0&&(V={},T[E.id]=V);let G=V[D];return G===void 0&&(G=m(f()),V[D]=G),G}function m(B){const E=[],M=[],D=[];for(let T=0;T<i;T++)E[T]=0,M[T]=0,D[T]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:M,attributeDivisors:D,object:B,attributes:{},index:null}}function g(B,E,M,D){const T=A.attributes,V=E.attributes;let G=0;const P=M.getAttributes();for(const U in P)if(P[U].location>=0){const oe=T[U];let k=V[U];if(k===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(k=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(k=B.instanceColor)),oe===void 0||oe.attribute!==k||k&&oe.data!==k.data)return!0;G++}return A.attributesNum!==G||A.index!==D}function v(B,E,M,D){const T={},V=E.attributes;let G=0;const P=M.getAttributes();for(const U in P)if(P[U].location>=0){let oe=V[U];oe===void 0&&(U==="instanceMatrix"&&B.instanceMatrix&&(oe=B.instanceMatrix),U==="instanceColor"&&B.instanceColor&&(oe=B.instanceColor));const k={};k.attribute=oe,oe&&oe.data&&(k.data=oe.data),T[U]=k,G++}A.attributes=T,A.attributesNum=G,A.index=D}function y(){const B=A.newAttributes;for(let E=0,M=B.length;E<M;E++)B[E]=0}function w(B){C(B,0)}function C(B,E){const M=A.newAttributes,D=A.enabledAttributes,T=A.attributeDivisors;M[B]=1,D[B]===0&&(n.enableVertexAttribArray(B),D[B]=1),T[B]!==E&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,E),T[B]=E)}function b(){const B=A.newAttributes,E=A.enabledAttributes;for(let M=0,D=E.length;M<D;M++)E[M]!==B[M]&&(n.disableVertexAttribArray(M),E[M]=0)}function F(B,E,M,D,T,V){r.isWebGL2===!0&&(M===5124||M===5125)?n.vertexAttribIPointer(B,E,M,T,V):n.vertexAttribPointer(B,E,M,D,T,V)}function x(B,E,M,D){if(r.isWebGL2===!1&&(B.isInstancedMesh||D.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const T=D.attributes,V=M.getAttributes(),G=E.defaultAttributeValues;for(const P in V){const U=V[P];if(U.location>=0){let H=T[P];if(H===void 0&&(P==="instanceMatrix"&&B.instanceMatrix&&(H=B.instanceMatrix),P==="instanceColor"&&B.instanceColor&&(H=B.instanceColor)),H!==void 0){const oe=H.normalized,k=H.itemSize,K=t.get(H);if(K===void 0)continue;const ne=K.buffer,ie=K.type,ue=K.bytesPerElement;if(H.isInterleavedBufferAttribute){const j=H.data,se=j.stride,ce=H.offset;if(j.isInstancedInterleavedBuffer){for(let Be=0;Be<U.locationSize;Be++)C(U.location+Be,j.meshPerAttribute);B.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let Be=0;Be<U.locationSize;Be++)w(U.location+Be);n.bindBuffer(34962,ne);for(let Be=0;Be<U.locationSize;Be++)F(U.location+Be,k/U.locationSize,ie,oe,se*ue,(ce+k/U.locationSize*Be)*ue)}else{if(H.isInstancedBufferAttribute){for(let j=0;j<U.locationSize;j++)C(U.location+j,H.meshPerAttribute);B.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=H.meshPerAttribute*H.count)}else for(let j=0;j<U.locationSize;j++)w(U.location+j);n.bindBuffer(34962,ne);for(let j=0;j<U.locationSize;j++)F(U.location+j,k/U.locationSize,ie,oe,k*ue,k/U.locationSize*j*ue)}}else if(G!==void 0){const oe=G[P];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(U.location,oe);break;case 3:n.vertexAttrib3fv(U.location,oe);break;case 4:n.vertexAttrib4fv(U.location,oe);break;default:n.vertexAttrib1fv(U.location,oe)}}}}b()}function S(){Y();for(const B in a){const E=a[B];for(const M in E){const D=E[M];for(const T in D)h(D[T].object),delete D[T];delete E[M]}delete a[B]}}function R(B){if(a[B.id]===void 0)return;const E=a[B.id];for(const M in E){const D=E[M];for(const T in D)h(D[T].object),delete D[T];delete E[M]}delete a[B.id]}function Z(B){for(const E in a){const M=a[E];if(M[B.id]===void 0)continue;const D=M[B.id];for(const T in D)h(D[T].object),delete D[T];delete M[B.id]}}function Y(){Q(),c=!0,A!==l&&(A=l,d(A.object))}function Q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:Y,resetDefaultState:Q,dispose:S,releaseStatesOfGeometry:R,releaseStatesOfProgram:Z,initAttributes:y,enableAttribute:w,disableUnusedAttributes:b}}function Tte(n,e,t,r){const i=r.isWebGL2;let s;function o(A){s=A}function a(A,c){n.drawArrays(s,A,c),t.update(c,s,1)}function l(A,c,u){if(u===0)return;let f,d;if(i)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,A,c,u),t.update(c,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function Nte(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(F){if(F==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const A=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,u=n.getParameter(34930),f=n.getParameter(35660),d=n.getParameter(3379),h=n.getParameter(34076),p=n.getParameter(34921),m=n.getParameter(36347),g=n.getParameter(36348),v=n.getParameter(36349),y=f>0,w=o||e.has("OES_texture_float"),C=y&&w,b=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:A,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:b}}function Dte(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new dl,a=new Dn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f,d){const h=u.length!==0||f||r!==0||i;return i=f,t=c(u,d,0),r=u.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,A()},this.setState=function(u,f,d){const h=u.clippingPlanes,p=u.clipIntersection,m=u.clipShadows,g=n.get(u);if(!i||h===null||h.length===0||s&&!m)s?c(null):A();else{const v=s?0:r,y=v*4;let w=g.clippingState||null;l.value=w,w=c(h,f,y,d);for(let C=0;C!==y;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=v}};function A(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(u,f,d,h){const p=u!==null?u.length:0;let m=null;if(p!==0){if(m=l.value,h!==!0||m===null){const g=d+p*4,v=f.matrixWorldInverse;a.getNormalMatrix(v),(m===null||m.length<g)&&(m=new Float32Array(g));for(let y=0,w=d;y!==p;++y,w+=4)o.copy(u[y]).applyMatrix4(v,a),o.normal.toArray(m,w),m[w+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,m}}function kte(n){let e=new WeakMap;function t(o,a){return a===uw?o.mapping=fh:a===cE&&(o.mapping=dh),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===uw||a===cE)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const A=new K$(l.height/2);return A.fromEquirectangularTexture(n,o),e.set(o,A),o.addEventListener("dispose",i),t(A.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class l0 extends qG{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=A*this.view.offsetX,o=s+A*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const yd=4,gT=[.125,.215,.35,.446,.526,.582],Vc=20,hI=new l0,mT=new Re;let pI=null;const Mc=(1+Math.sqrt(5))/2,of=1/Mc,vT=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,Mc,of),new X(0,Mc,-of),new X(of,0,Mc),new X(-of,0,Mc),new X(Mc,of,0),new X(-Mc,of,0)];class yT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){pI=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(pI),e.scissorTest=!1,Cv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fh||e.mapping===dh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),pI=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:bm,format:Fi,encoding:no,depthBuffer:!1},i=BT(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=BT(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Vte(s)),this._blurMaterial=Lte(s,e,t)}return i}_compileMaterial(e){const t=new Vn(this._lodPlanes[0],e);this._renderer.compile(t,hI)}_sceneToCubeUV(e,t,r,i){const a=new _r(90,1,t,r),l=[1,-1,1,1,1,1],A=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,f=c.toneMapping;c.getClearColor(mT),c.toneMapping=bl,c.autoClear=!1;const d=new ss({name:"PMREM.Background",side:di,depthWrite:!1,depthTest:!1}),h=new Vn(new a0,d);let p=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,p=!0):(d.color.copy(mT),p=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(a.up.set(0,l[g],0),a.lookAt(A[g],0,0)):v===1?(a.up.set(0,0,l[g]),a.lookAt(0,A[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,A[g]));const y=this._cubeSize;Cv(i,v*y,g>2?y:0,y,y),c.setRenderTarget(i),p&&c.render(h,a),c.render(e,a)}h.geometry.dispose(),h.material.dispose(),c.toneMapping=f,c.autoClear=u,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===fh||e.mapping===dh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=CT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=wT());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Vn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Cv(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,hI)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=vT[(i-1)%vT.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,A=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new Vn(this._lodPlanes[i],A),f=A.uniforms,d=this._sizeLods[r]-1,h=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Vc-1),p=s/h,m=isFinite(s)?1+Math.floor(c*p):Vc;m>Vc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Vc}`);const g=[];let v=0;for(let F=0;F<Vc;++F){const x=F/p,S=Math.exp(-x*x/2);g.push(S),F===0?v+=S:F<m&&(v+=2*S)}for(let F=0;F<g.length;F++)g[F]=g[F]/v;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=h,f.mipInt.value=y-r;const w=this._sizeLods[i],C=3*w*(i>y-yd?i-y+yd:0),b=4*(this._cubeSize-w);Cv(t,C,b,3*w,2*w),l.setRenderTarget(t),l.render(u,hI)}}function Vte(n){const e=[],t=[],r=[];let i=n;const s=n-yd+1+gT.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-yd?l=gT[o-n+yd-1]:o===0&&(l=0),r.push(l);const A=1/(a-2),c=-A,u=1+A,f=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,h=6,p=3,m=2,g=1,v=new Float32Array(p*h*d),y=new Float32Array(m*h*d),w=new Float32Array(g*h*d);for(let b=0;b<d;b++){const F=b%3*2/3-1,x=b>2?0:-1,S=[F,x,0,F+2/3,x,0,F+2/3,x+1,0,F,x,0,F+2/3,x+1,0,F,x+1,0];v.set(S,p*h*b),y.set(f,m*h*b);const R=[b,b,b,b,b,b];w.set(R,g*h*b)}const C=new $t;C.setAttribute("position",new At(v,p)),C.setAttribute("uv",new At(y,m)),C.setAttribute("faceIndex",new At(w,g)),e.push(C),i>yd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function BT(n,e,t){const r=new $A(n,e,t);return r.texture.mapping=GC,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Cv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Lte(n,e,t){const r=new Float32Array(Vc),i=new X(0,1,0);return new ki({name:"SphericalGaussianBlur",defines:{n:Vc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:f_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:PA,depthTest:!1,depthWrite:!1})}function wT(){return new ki({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:f_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:PA,depthTest:!1,depthWrite:!1})}function CT(){return new ki({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:f_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:PA,depthTest:!1,depthWrite:!1})}function f_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Pte(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,A=l===uw||l===cE,c=l===fh||l===dh;if(A||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let u=e.get(a);return t===null&&(t=new yT(n)),u=A?t.fromEquirectangular(a,u):t.fromCubemap(a,u),e.set(a,u),u.texture}else{if(e.has(a))return e.get(a).texture;{const u=a.image;if(A&&u&&u.height>0||c&&u&&i(u)){t===null&&(t=new yT(n));const f=A?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const A=6;for(let c=0;c<A;c++)a[c]!==void 0&&l++;return l===A}function s(a){const l=a.target;l.removeEventListener("dispose",s);const A=e.get(l);A!==void 0&&(e.delete(l),A.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Wte(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Ote(n,e,t,r){const i={},s=new WeakMap;function o(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const h in f.attributes)e.remove(f.attributes[h]);f.removeEventListener("dispose",o),delete i[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(u,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(u){const f=u.attributes;for(const h in f)e.update(f[h],34962);const d=u.morphAttributes;for(const h in d){const p=d[h];for(let m=0,g=p.length;m<g;m++)e.update(p[m],34962)}}function A(u){const f=[],d=u.index,h=u.attributes.position;let p=0;if(d!==null){const v=d.array;p=d.version;for(let y=0,w=v.length;y<w;y+=3){const C=v[y+0],b=v[y+1],F=v[y+2];f.push(C,b,b,F,F,C)}}else{const v=h.array;p=h.version;for(let y=0,w=v.length/3-1;y<w;y+=3){const C=y+0,b=y+1,F=y+2;f.push(C,b,b,F,F,C)}}const m=new(zG(f)?jG:ZC)(f,1);m.version=p;const g=s.get(u);g&&e.remove(g),s.set(u,m)}function c(u){const f=s.get(u);if(f){const d=u.index;d!==null&&f.version<d.version&&A(u)}else A(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:c}}function Gte(n,e,t,r){const i=r.isWebGL2;let s;function o(f){s=f}let a,l;function A(f){a=f.type,l=f.bytesPerElement}function c(f,d){n.drawElements(s,d,a,f*l),t.update(d,s,1)}function u(f,d,h){if(h===0)return;let p,m;if(i)p=n,m="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",p===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,d,a,f*l,h),t.update(d,s,h)}this.setMode=o,this.setIndex=A,this.render=c,this.renderInstances=u}function Zte(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Jte(n,e){return n[0]-e[0]}function Hte(n,e){return Math.abs(e[1])-Math.abs(n[1])}function zte(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Pt,a=[];for(let A=0;A<8;A++)a[A]=[A,0];function l(A,c,u,f){const d=A.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=h!==void 0?h.length:0;let m=s.get(c);if(m===void 0||m.count!==p){let E=function(){Q.dispose(),s.delete(c),c.removeEventListener("dispose",E)};m!==void 0&&m.texture.dispose();const y=c.morphAttributes.position!==void 0,w=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,b=c.morphAttributes.position||[],F=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let S=0;y===!0&&(S=1),w===!0&&(S=2),C===!0&&(S=3);let R=c.attributes.position.count*S,Z=1;R>e.maxTextureSize&&(Z=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const Y=new Float32Array(R*Z*4*p),Q=new KG(Y,R,Z,p);Q.type=IA,Q.needsUpdate=!0;const B=S*4;for(let M=0;M<p;M++){const D=b[M],T=F[M],V=x[M],G=R*Z*4*M;for(let P=0;P<D.count;P++){const U=P*B;y===!0&&(o.fromBufferAttribute(D,P),Y[G+U+0]=o.x,Y[G+U+1]=o.y,Y[G+U+2]=o.z,Y[G+U+3]=0),w===!0&&(o.fromBufferAttribute(T,P),Y[G+U+4]=o.x,Y[G+U+5]=o.y,Y[G+U+6]=o.z,Y[G+U+7]=0),C===!0&&(o.fromBufferAttribute(V,P),Y[G+U+8]=o.x,Y[G+U+9]=o.y,Y[G+U+10]=o.z,Y[G+U+11]=V.itemSize===4?o.w:1)}}m={count:p,texture:Q,size:new Oe(R,Z)},s.set(c,m),c.addEventListener("dispose",E)}let g=0;for(let y=0;y<d.length;y++)g+=d[y];const v=c.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",v),f.getUniforms().setValue(n,"morphTargetInfluences",d),f.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const h=d===void 0?0:d.length;let p=r[c.id];if(p===void 0||p.length!==h){p=[];for(let w=0;w<h;w++)p[w]=[w,0];r[c.id]=p}for(let w=0;w<h;w++){const C=p[w];C[0]=w,C[1]=d[w]}p.sort(Hte);for(let w=0;w<8;w++)w<h&&p[w][1]?(a[w][0]=p[w][0],a[w][1]=p[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(Jte);const m=c.morphAttributes.position,g=c.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const C=a[w],b=C[0],F=C[1];b!==Number.MAX_SAFE_INTEGER&&F?(m&&c.getAttribute("morphTarget"+w)!==m[b]&&c.setAttribute("morphTarget"+w,m[b]),g&&c.getAttribute("morphNormal"+w)!==g[b]&&c.setAttribute("morphNormal"+w,g[b]),i[w]=F,v+=F):(m&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),g&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),i[w]=0)}const y=c.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Yte(n,e,t,r){let i=new WeakMap;function s(l){const A=r.render.frame,c=l.geometry,u=e.get(l,c);return i.get(u)!==A&&(e.update(u),i.set(u,A)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),u}function o(){i=new WeakMap}function a(l){const A=l.target;A.removeEventListener("dispose",a),t.remove(A.instanceMatrix),A.instanceColor!==null&&t.remove(A.instanceColor)}return{update:s,dispose:o}}const nZ=new nr,rZ=new KG,iZ=new N$,sZ=new eZ,bT=[],xT=[],IT=new Float32Array(16),FT=new Float32Array(9),ET=new Float32Array(4);function Th(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=bT[i];if(s===void 0&&(s=new Float32Array(i),bT[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function dr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function hr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function JC(n,e){let t=xT[e];t===void 0&&(t=new Int32Array(e),xT[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Xte(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Kte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2fv(this.addr,e),hr(t,e)}}function jte(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(dr(t,e))return;n.uniform3fv(this.addr,e),hr(t,e)}}function $te(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4fv(this.addr,e),hr(t,e)}}function qte(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hr(t,e)}else{if(dr(t,r))return;ET.set(r),n.uniformMatrix2fv(this.addr,!1,ET),hr(t,r)}}function ene(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hr(t,e)}else{if(dr(t,r))return;FT.set(r),n.uniformMatrix3fv(this.addr,!1,FT),hr(t,r)}}function tne(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(dr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hr(t,e)}else{if(dr(t,r))return;IT.set(r),n.uniformMatrix4fv(this.addr,!1,IT),hr(t,r)}}function nne(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function rne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2iv(this.addr,e),hr(t,e)}}function ine(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dr(t,e))return;n.uniform3iv(this.addr,e),hr(t,e)}}function sne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4iv(this.addr,e),hr(t,e)}}function one(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function ane(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dr(t,e))return;n.uniform2uiv(this.addr,e),hr(t,e)}}function lne(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dr(t,e))return;n.uniform3uiv(this.addr,e),hr(t,e)}}function Ane(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dr(t,e))return;n.uniform4uiv(this.addr,e),hr(t,e)}}function cne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||nZ,i)}function une(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||iZ,i)}function fne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||sZ,i)}function dne(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||rZ,i)}function hne(n){switch(n){case 5126:return Xte;case 35664:return Kte;case 35665:return jte;case 35666:return $te;case 35674:return qte;case 35675:return ene;case 35676:return tne;case 5124:case 35670:return nne;case 35667:case 35671:return rne;case 35668:case 35672:return ine;case 35669:case 35673:return sne;case 5125:return one;case 36294:return ane;case 36295:return lne;case 36296:return Ane;case 35678:case 36198:case 36298:case 36306:case 35682:return cne;case 35679:case 36299:case 36307:return une;case 35680:case 36300:case 36308:case 36293:return fne;case 36289:case 36303:case 36311:case 36292:return dne}}function pne(n,e){n.uniform1fv(this.addr,e)}function gne(n,e){const t=Th(e,this.size,2);n.uniform2fv(this.addr,t)}function mne(n,e){const t=Th(e,this.size,3);n.uniform3fv(this.addr,t)}function vne(n,e){const t=Th(e,this.size,4);n.uniform4fv(this.addr,t)}function yne(n,e){const t=Th(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Bne(n,e){const t=Th(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wne(n,e){const t=Th(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Cne(n,e){n.uniform1iv(this.addr,e)}function bne(n,e){n.uniform2iv(this.addr,e)}function xne(n,e){n.uniform3iv(this.addr,e)}function Ine(n,e){n.uniform4iv(this.addr,e)}function Fne(n,e){n.uniform1uiv(this.addr,e)}function Ene(n,e){n.uniform2uiv(this.addr,e)}function Une(n,e){n.uniform3uiv(this.addr,e)}function Sne(n,e){n.uniform4uiv(this.addr,e)}function _ne(n,e,t){const r=this.cache,i=e.length,s=JC(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||nZ,s[o])}function Qne(n,e,t){const r=this.cache,i=e.length,s=JC(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||iZ,s[o])}function Rne(n,e,t){const r=this.cache,i=e.length,s=JC(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||sZ,s[o])}function Mne(n,e,t){const r=this.cache,i=e.length,s=JC(t,i);dr(r,s)||(n.uniform1iv(this.addr,s),hr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||rZ,s[o])}function Tne(n){switch(n){case 5126:return pne;case 35664:return gne;case 35665:return mne;case 35666:return vne;case 35674:return yne;case 35675:return Bne;case 35676:return wne;case 5124:case 35670:return Cne;case 35667:case 35671:return bne;case 35668:case 35672:return xne;case 35669:case 35673:return Ine;case 5125:return Fne;case 36294:return Ene;case 36295:return Une;case 36296:return Sne;case 35678:case 36198:case 36298:case 36306:case 35682:return _ne;case 35679:case 36299:case 36307:return Qne;case 35680:case 36300:case 36308:case 36293:return Rne;case 36289:case 36303:case 36311:case 36292:return Mne}}class Nne{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=hne(t.type)}}class Dne{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Tne(t.type)}}class kne{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const gI=/(\w+)(\])?(\[|\.)?/g;function UT(n,e){n.seq.push(e),n.map[e.id]=e}function Vne(n,e,t){const r=n.name,i=r.length;for(gI.lastIndex=0;;){const s=gI.exec(r),o=gI.lastIndex;let a=s[1];const l=s[2]==="]",A=s[3];if(l&&(a=a|0),A===void 0||A==="["&&o+2===i){UT(t,A===void 0?new Nne(a,n,e):new Dne(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new kne(a),UT(t,u)),t=u}}}class tB{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);Vne(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function ST(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let Lne=0;function Pne(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Wne(n){switch(n){case no:return["Linear","( value )"];case ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function _T(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Pne(n.getShaderSource(e),o)}else return i}function One(n,e){const t=Wne(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Gne(n,e){let t;switch(e){case H7:t="Linear";break;case z7:t="Reinhard";break;case Y7:t="OptimizedCineon";break;case X7:t="ACESFilmic";break;case K7:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Zne(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ag).join(`
`)}function Jne(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Hne(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Ag(n){return n!==""}function QT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function RT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zne=/^[ \t]*#include +<([\w\d./]+)>/gm;function hE(n){return n.replace(zne,Yne)}function Yne(n,e){const t=yt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return hE(t)}const Xne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MT(n){return n.replace(Xne,Kne)}function Kne(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function TT(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function jne(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===LG?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===x7?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===lg&&(e="SHADOWMAP_TYPE_VSM"),e}function $ne(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case fh:case dh:e="ENVMAP_TYPE_CUBE";break;case GC:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qne(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case dh:e="ENVMAP_MODE_REFRACTION";break}return e}function ere(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case OC:e="ENVMAP_BLENDING_MULTIPLY";break;case Z7:e="ENVMAP_BLENDING_MIX";break;case J7:e="ENVMAP_BLENDING_ADD";break}return e}function tre(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function nre(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=jne(t),A=$ne(t),c=qne(t),u=ere(t),f=tre(t),d=t.isWebGL2?"":Zne(t),h=Jne(s),p=i.createProgram();let m,g,v=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[h].filter(Ag).join(`
`),m.length>0&&(m+=`
`),g=[d,h].filter(Ag).join(`
`),g.length>0&&(g+=`
`)):(m=[TT(t),"#define SHADER_NAME "+t.shaderName,h,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ag).join(`
`),g=[d,TT(t),"#define SHADER_NAME "+t.shaderName,h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==bl?"#define TONE_MAPPING":"",t.toneMapping!==bl?yt.tonemapping_pars_fragment:"",t.toneMapping!==bl?Gne("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",yt.encodings_pars_fragment,One("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ag).join(`
`)),o=hE(o),o=QT(o,t),o=RT(o,t),a=hE(a),a=QT(a,t),a=RT(a,t),o=MT(o),a=MT(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",t.glslVersion===iT?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===iT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const y=v+m+o,w=v+g+a,C=ST(i,35633,y),b=ST(i,35632,w);if(i.attachShader(p,C),i.attachShader(p,b),t.index0AttributeName!==void 0?i.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),n.debug.checkShaderErrors){const S=i.getProgramInfoLog(p).trim(),R=i.getShaderInfoLog(C).trim(),Z=i.getShaderInfoLog(b).trim();let Y=!0,Q=!0;if(i.getProgramParameter(p,35714)===!1){Y=!1;const B=_T(i,C,"vertex"),E=_T(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+`

Program Info Log: `+S+`
`+B+`
`+E)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(R===""||Z==="")&&(Q=!1);Q&&(this.diagnostics={runnable:Y,programLog:S,vertexShader:{log:R,prefix:m},fragmentShader:{log:Z,prefix:g}})}i.deleteShader(C),i.deleteShader(b);let F;this.getUniforms=function(){return F===void 0&&(F=new tB(i,p)),F};let x;return this.getAttributes=function(){return x===void 0&&(x=Hne(i,p)),x},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=Lne++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=C,this.fragmentShader=b,this}let rre=0;class ire{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new sre(e),t.set(e,r)),r}}class sre{constructor(e){this.id=rre++,this.code=e,this.usedTimes=0}}function ore(n,e,t,r,i,s,o){const a=new c_,l=new ire,A=[],c=i.isWebGL2,u=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const h={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(x,S,R,Z,Y){const Q=Z.fog,B=Y.geometry,E=x.isMeshStandardMaterial?Z.environment:null,M=(x.isMeshStandardMaterial?t:e).get(x.envMap||E),D=M&&M.mapping===GC?M.image.height:null,T=h[x.type];x.precision!==null&&(d=i.getMaxPrecision(x.precision),d!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",d,"instead."));const V=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,G=V!==void 0?V.length:0;let P=0;B.morphAttributes.position!==void 0&&(P=1),B.morphAttributes.normal!==void 0&&(P=2),B.morphAttributes.color!==void 0&&(P=3);let U,H,oe,k;if(T){const se=sa[T];U=se.vertexShader,H=se.fragmentShader}else U=x.vertexShader,H=x.fragmentShader,l.update(x),oe=l.getVertexShaderID(x),k=l.getFragmentShaderID(x);const K=n.getRenderTarget(),ne=x.alphaTest>0,ie=x.clearcoat>0,ue=x.iridescence>0;return{isWebGL2:c,shaderID:T,shaderName:x.type,vertexShader:U,fragmentShader:H,defines:x.defines,customVertexShaderID:oe,customFragmentShaderID:k,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:d,instancing:Y.isInstancedMesh===!0,instancingColor:Y.isInstancedMesh===!0&&Y.instanceColor!==null,supportsVertexTextures:f,outputEncoding:K===null?n.outputEncoding:K.isXRRenderTarget===!0?K.texture.encoding:no,map:!!x.map,matcap:!!x.matcap,envMap:!!M,envMapMode:M&&M.mapping,envMapCubeUVHeight:D,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:x.normalMapType===v$,tangentSpaceNormalMap:x.normalMapType===Rh,decodeVideoTexture:!!x.map&&x.map.isVideoTexture===!0&&x.map.encoding===ht,clearcoat:ie,clearcoatMap:ie&&!!x.clearcoatMap,clearcoatRoughnessMap:ie&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!x.clearcoatNormalMap,iridescence:ue,iridescenceMap:ue&&!!x.iridescenceMap,iridescenceThicknessMap:ue&&!!x.iridescenceThicknessMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:x.transparent===!1&&x.blending===kd,alphaMap:!!x.alphaMap,alphaTest:ne,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!B.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!B.attributes.color&&B.attributes.color.itemSize===4,vertexUvs:!!x.map||!!x.bumpMap||!!x.normalMap||!!x.specularMap||!!x.alphaMap||!!x.emissiveMap||!!x.roughnessMap||!!x.metalnessMap||!!x.clearcoatMap||!!x.clearcoatRoughnessMap||!!x.clearcoatNormalMap||!!x.iridescenceMap||!!x.iridescenceThicknessMap||!!x.displacementMap||!!x.transmissionMap||!!x.thicknessMap||!!x.specularIntensityMap||!!x.specularColorMap||!!x.sheenColorMap||!!x.sheenRoughnessMap,uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.iridescenceMap||x.iridescenceThicknessMap||x.transmission>0||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheen>0||x.sheenColorMap||x.sheenRoughnessMap)&&!!x.displacementMap,fog:!!Q,useFog:x.fog===!0,fogExp2:Q&&Q.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:u,skinning:Y.isSkinnedMesh===!0,morphTargets:B.morphAttributes.position!==void 0,morphNormals:B.morphAttributes.normal!==void 0,morphColors:B.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:P,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numSpotLightMaps:S.spotLightMap.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numSpotLightShadowsWithMaps:S.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:x.toneMapped?n.toneMapping:bl,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===Ui,flipSided:x.side===di,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function m(x){const S=[];if(x.shaderID?S.push(x.shaderID):(S.push(x.customVertexShaderID),S.push(x.customFragmentShaderID)),x.defines!==void 0)for(const R in x.defines)S.push(R),S.push(x.defines[R]);return x.isRawShaderMaterial===!1&&(g(S,x),v(S,x),S.push(n.outputEncoding)),S.push(x.customProgramCacheKey),S.join()}function g(x,S){x.push(S.precision),x.push(S.outputEncoding),x.push(S.envMapMode),x.push(S.envMapCubeUVHeight),x.push(S.combine),x.push(S.vertexUvs),x.push(S.fogExp2),x.push(S.sizeAttenuation),x.push(S.morphTargetsCount),x.push(S.morphAttributeCount),x.push(S.numDirLights),x.push(S.numPointLights),x.push(S.numSpotLights),x.push(S.numSpotLightMaps),x.push(S.numHemiLights),x.push(S.numRectAreaLights),x.push(S.numDirLightShadows),x.push(S.numPointLightShadows),x.push(S.numSpotLightShadows),x.push(S.numSpotLightShadowsWithMaps),x.push(S.shadowMapType),x.push(S.toneMapping),x.push(S.numClippingPlanes),x.push(S.numClipIntersection),x.push(S.depthPacking)}function v(x,S){a.disableAll(),S.isWebGL2&&a.enable(0),S.supportsVertexTextures&&a.enable(1),S.instancing&&a.enable(2),S.instancingColor&&a.enable(3),S.map&&a.enable(4),S.matcap&&a.enable(5),S.envMap&&a.enable(6),S.lightMap&&a.enable(7),S.aoMap&&a.enable(8),S.emissiveMap&&a.enable(9),S.bumpMap&&a.enable(10),S.normalMap&&a.enable(11),S.objectSpaceNormalMap&&a.enable(12),S.tangentSpaceNormalMap&&a.enable(13),S.clearcoat&&a.enable(14),S.clearcoatMap&&a.enable(15),S.clearcoatRoughnessMap&&a.enable(16),S.clearcoatNormalMap&&a.enable(17),S.iridescence&&a.enable(18),S.iridescenceMap&&a.enable(19),S.iridescenceThicknessMap&&a.enable(20),S.displacementMap&&a.enable(21),S.specularMap&&a.enable(22),S.roughnessMap&&a.enable(23),S.metalnessMap&&a.enable(24),S.gradientMap&&a.enable(25),S.alphaMap&&a.enable(26),S.alphaTest&&a.enable(27),S.vertexColors&&a.enable(28),S.vertexAlphas&&a.enable(29),S.vertexUvs&&a.enable(30),S.vertexTangents&&a.enable(31),S.uvsVertexOnly&&a.enable(32),x.push(a.mask),a.disableAll(),S.fog&&a.enable(0),S.useFog&&a.enable(1),S.flatShading&&a.enable(2),S.logarithmicDepthBuffer&&a.enable(3),S.skinning&&a.enable(4),S.morphTargets&&a.enable(5),S.morphNormals&&a.enable(6),S.morphColors&&a.enable(7),S.premultipliedAlpha&&a.enable(8),S.shadowMapEnabled&&a.enable(9),S.physicallyCorrectLights&&a.enable(10),S.doubleSided&&a.enable(11),S.flipSided&&a.enable(12),S.useDepthPacking&&a.enable(13),S.dithering&&a.enable(14),S.specularIntensityMap&&a.enable(15),S.specularColorMap&&a.enable(16),S.transmission&&a.enable(17),S.transmissionMap&&a.enable(18),S.thicknessMap&&a.enable(19),S.sheen&&a.enable(20),S.sheenColorMap&&a.enable(21),S.sheenRoughnessMap&&a.enable(22),S.decodeVideoTexture&&a.enable(23),S.opaque&&a.enable(24),x.push(a.mask)}function y(x){const S=h[x.type];let R;if(S){const Z=sa[S];R=$G.clone(Z.uniforms)}else R=x.uniforms;return R}function w(x,S){let R;for(let Z=0,Y=A.length;Z<Y;Z++){const Q=A[Z];if(Q.cacheKey===S){R=Q,++R.usedTimes;break}}return R===void 0&&(R=new nre(n,S,x,s),A.push(R)),R}function C(x){if(--x.usedTimes===0){const S=A.indexOf(x);A[S]=A[A.length-1],A.pop(),x.destroy()}}function b(x){l.remove(x)}function F(){l.dispose()}return{getParameters:p,getProgramCacheKey:m,getUniforms:y,acquireProgram:w,releaseProgram:C,releaseShaderCache:b,programs:A,dispose:F}}function are(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function lre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function DT(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(u,f,d,h,p,m){let g=n[e];return g===void 0?(g={id:u.id,object:u,geometry:f,material:d,groupOrder:h,renderOrder:u.renderOrder,z:p,group:m},n[e]=g):(g.id=u.id,g.object=u,g.geometry=f,g.material=d,g.groupOrder=h,g.renderOrder=u.renderOrder,g.z=p,g.group=m),e++,g}function a(u,f,d,h,p,m){const g=o(u,f,d,h,p,m);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function l(u,f,d,h,p,m){const g=o(u,f,d,h,p,m);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function A(u,f){t.length>1&&t.sort(u||lre),r.length>1&&r.sort(f||NT),i.length>1&&i.sort(f||NT)}function c(){for(let u=e,f=n.length;u<f;u++){const d=n[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:A}}function Are(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new DT,n.set(r,[o])):i>=s.length?(o=new DT,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function cre(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new Re};break;case"SpotLight":t={position:new X,direction:new X,color:new Re,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new Re,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new Re,groundColor:new Re};break;case"RectAreaLight":t={color:new Re,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function ure(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fre=0;function dre(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function hre(n,e){const t=new cre,r=ure(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new X);const s=new X,o=new Le,a=new Le;function l(c,u){let f=0,d=0,h=0;for(let Z=0;Z<9;Z++)i.probe[Z].set(0,0,0);let p=0,m=0,g=0,v=0,y=0,w=0,C=0,b=0,F=0,x=0;c.sort(dre);const S=u!==!0?Math.PI:1;for(let Z=0,Y=c.length;Z<Y;Z++){const Q=c[Z],B=Q.color,E=Q.intensity,M=Q.distance,D=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)f+=B.r*E*S,d+=B.g*E*S,h+=B.b*E*S;else if(Q.isLightProbe)for(let T=0;T<9;T++)i.probe[T].addScaledVector(Q.sh.coefficients[T],E);else if(Q.isDirectionalLight){const T=t.get(Q);if(T.color.copy(Q.color).multiplyScalar(Q.intensity*S),Q.castShadow){const V=Q.shadow,G=r.get(Q);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.directionalShadow[p]=G,i.directionalShadowMap[p]=D,i.directionalShadowMatrix[p]=Q.shadow.matrix,w++}i.directional[p]=T,p++}else if(Q.isSpotLight){const T=t.get(Q);T.position.setFromMatrixPosition(Q.matrixWorld),T.color.copy(B).multiplyScalar(E*S),T.distance=M,T.coneCos=Math.cos(Q.angle),T.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),T.decay=Q.decay,i.spot[g]=T;const V=Q.shadow;if(Q.map&&(i.spotLightMap[F]=Q.map,F++,V.updateMatrices(Q),Q.castShadow&&x++),i.spotLightMatrix[g]=V.matrix,Q.castShadow){const G=r.get(Q);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=D,b++}g++}else if(Q.isRectAreaLight){const T=t.get(Q);T.color.copy(B).multiplyScalar(E),T.halfWidth.set(Q.width*.5,0,0),T.halfHeight.set(0,Q.height*.5,0),i.rectArea[v]=T,v++}else if(Q.isPointLight){const T=t.get(Q);if(T.color.copy(Q.color).multiplyScalar(Q.intensity*S),T.distance=Q.distance,T.decay=Q.decay,Q.castShadow){const V=Q.shadow,G=r.get(Q);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,G.shadowCameraNear=V.camera.near,G.shadowCameraFar=V.camera.far,i.pointShadow[m]=G,i.pointShadowMap[m]=D,i.pointShadowMatrix[m]=Q.shadow.matrix,C++}i.point[m]=T,m++}else if(Q.isHemisphereLight){const T=t.get(Q);T.skyColor.copy(Q.color).multiplyScalar(E*S),T.groundColor.copy(Q.groundColor).multiplyScalar(E*S),i.hemi[y]=T,y++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Me.LTC_FLOAT_1,i.rectAreaLTC2=Me.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Me.LTC_HALF_1,i.rectAreaLTC2=Me.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=h;const R=i.hash;(R.directionalLength!==p||R.pointLength!==m||R.spotLength!==g||R.rectAreaLength!==v||R.hemiLength!==y||R.numDirectionalShadows!==w||R.numPointShadows!==C||R.numSpotShadows!==b||R.numSpotMaps!==F)&&(i.directional.length=p,i.spot.length=g,i.rectArea.length=v,i.point.length=m,i.hemi.length=y,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=b+F-x,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=x,R.directionalLength=p,R.pointLength=m,R.spotLength=g,R.rectAreaLength=v,R.hemiLength=y,R.numDirectionalShadows=w,R.numPointShadows=C,R.numSpotShadows=b,R.numSpotMaps=F,i.version=fre++)}function A(c,u){let f=0,d=0,h=0,p=0,m=0;const g=u.matrixWorldInverse;for(let v=0,y=c.length;v<y;v++){const w=c[v];if(w.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),f++}else if(w.isSpotLight){const C=i.spot[h];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),h++}else if(w.isRectAreaLight){const C=i.rectArea[p];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),p++}else if(w.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),d++}else if(w.isHemisphereLight){const C=i.hemi[m];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),m++}}}return{setup:l,setupView:A,state:i}}function kT(n,e){const t=new hre(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(u){r.push(u)}function a(u){i.push(u)}function l(u){t.setup(r,u)}function A(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:A,pushLight:o,pushShadow:a}}function pre(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new kT(n,e),t.set(s,[l])):o>=a.length?(l=new kT(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class gre extends zs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=g$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class mre extends zs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new X,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const vre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Bre(n,e,t){let r=new u_;const i=new Oe,s=new Oe,o=new Pt,a=new gre({depthPacking:m$}),l=new mre,A={},c=t.maxTextureSize,u={0:di,1:Sa,2:Ui},f=new ki({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Oe},radius:{value:4}},vertexShader:vre,fragmentShader:yre}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const h=new $t;h.setAttribute("position",new At(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Vn(h,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=LG,this.render=function(w,C,b){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||w.length===0)return;const F=n.getRenderTarget(),x=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),R=n.state;R.setBlending(PA),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);for(let Z=0,Y=w.length;Z<Y;Z++){const Q=w[Z],B=Q.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;i.copy(B.mapSize);const E=B.getFrameExtents();if(i.multiply(E),s.copy(B.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/E.x),i.x=s.x*E.x,B.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/E.y),i.y=s.y*E.y,B.mapSize.y=s.y)),B.map===null){const D=this.type!==lg?{minFilter:Br,magFilter:Br}:{};B.map=new $A(i.x,i.y,D),B.map.texture.name=Q.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const M=B.getViewportCount();for(let D=0;D<M;D++){const T=B.getViewport(D);o.set(s.x*T.x,s.y*T.y,s.x*T.z,s.y*T.w),R.viewport(o),B.updateMatrices(Q,D),r=B.getFrustum(),y(C,b,B.camera,Q,this.type)}B.isPointLightShadow!==!0&&this.type===lg&&g(B,b),B.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(F,x,S)};function g(w,C){const b=e.update(p);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new $A(i.x,i.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(C,null,b,f,p,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(C,null,b,d,p,null)}function v(w,C,b,F,x,S){let R=null;const Z=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(Z!==void 0?R=Z:R=b.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0){const Y=R.uuid,Q=C.uuid;let B=A[Y];B===void 0&&(B={},A[Y]=B);let E=B[Q];E===void 0&&(E=R.clone(),B[Q]=E),R=E}return R.visible=C.visible,R.wireframe=C.wireframe,S===lg?R.side=C.shadowSide!==null?C.shadowSide:C.side:R.side=C.shadowSide!==null?C.shadowSide:u[C.side],R.alphaMap=C.alphaMap,R.alphaTest=C.alphaTest,R.clipShadows=C.clipShadows,R.clippingPlanes=C.clippingPlanes,R.clipIntersection=C.clipIntersection,R.displacementMap=C.displacementMap,R.displacementScale=C.displacementScale,R.displacementBias=C.displacementBias,R.wireframeLinewidth=C.wireframeLinewidth,R.linewidth=C.linewidth,b.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(b.matrixWorld),R.nearDistance=F,R.farDistance=x),R}function y(w,C,b,F,x){if(w.visible===!1)return;if(w.layers.test(C.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&x===lg)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);const Z=e.update(w),Y=w.material;if(Array.isArray(Y)){const Q=Z.groups;for(let B=0,E=Q.length;B<E;B++){const M=Q[B],D=Y[M.materialIndex];if(D&&D.visible){const T=v(w,D,F,b.near,b.far,x);n.renderBufferDirect(b,null,Z,T,w,M)}}}else if(Y.visible){const Q=v(w,Y,F,b.near,b.far,x);n.renderBufferDirect(b,null,Z,Q,w,null)}}const R=w.children;for(let Z=0,Y=R.length;Z<Y;Z++)y(R[Z],C,b,F,x)}}function wre(n,e,t){const r=t.isWebGL2;function i(){let re=!1;const ye=new Pt;let be=null;const Ue=new Pt(0,0,0,0);return{setMask:function(Je){be!==Je&&!re&&(n.colorMask(Je,Je,Je,Je),be=Je)},setLocked:function(Je){re=Je},setClear:function(Je,$e,ct,ln,xt){xt===!0&&(Je*=ln,$e*=ln,ct*=ln),ye.set(Je,$e,ct,ln),Ue.equals(ye)===!1&&(n.clearColor(Je,$e,ct,ln),Ue.copy(ye))},reset:function(){re=!1,be=null,Ue.set(-1,0,0,0)}}}function s(){let re=!1,ye=null,be=null,Ue=null;return{setTest:function(Je){Je?ne(2929):ie(2929)},setMask:function(Je){ye!==Je&&!re&&(n.depthMask(Je),ye=Je)},setFunc:function(Je){if(be!==Je){switch(Je){case k7:n.depthFunc(512);break;case V7:n.depthFunc(519);break;case L7:n.depthFunc(513);break;case AE:n.depthFunc(515);break;case P7:n.depthFunc(514);break;case W7:n.depthFunc(518);break;case O7:n.depthFunc(516);break;case G7:n.depthFunc(517);break;default:n.depthFunc(515)}be=Je}},setLocked:function(Je){re=Je},setClear:function(Je){Ue!==Je&&(n.clearDepth(Je),Ue=Je)},reset:function(){re=!1,ye=null,be=null,Ue=null}}}function o(){let re=!1,ye=null,be=null,Ue=null,Je=null,$e=null,ct=null,ln=null,xt=null;return{setTest:function(it){re||(it?ne(2960):ie(2960))},setMask:function(it){ye!==it&&!re&&(n.stencilMask(it),ye=it)},setFunc:function(it,ir,mt){(be!==it||Ue!==ir||Je!==mt)&&(n.stencilFunc(it,ir,mt),be=it,Ue=ir,Je=mt)},setOp:function(it,ir,mt){($e!==it||ct!==ir||ln!==mt)&&(n.stencilOp(it,ir,mt),$e=it,ct=ir,ln=mt)},setLocked:function(it){re=it},setClear:function(it){xt!==it&&(n.clearStencil(it),xt=it)},reset:function(){re=!1,ye=null,be=null,Ue=null,Je=null,$e=null,ct=null,ln=null,xt=null}}}const a=new i,l=new s,A=new o,c=new WeakMap,u=new WeakMap;let f={},d={},h=new WeakMap,p=[],m=null,g=!1,v=null,y=null,w=null,C=null,b=null,F=null,x=null,S=!1,R=null,Z=null,Y=null,Q=null,B=null;const E=n.getParameter(35661);let M=!1,D=0;const T=n.getParameter(7938);T.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(T)[1]),M=D>=1):T.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(T)[1]),M=D>=2);let V=null,G={};const P=n.getParameter(3088),U=n.getParameter(2978),H=new Pt().fromArray(P),oe=new Pt().fromArray(U);function k(re,ye,be){const Ue=new Uint8Array(4),Je=n.createTexture();n.bindTexture(re,Je),n.texParameteri(re,10241,9728),n.texParameteri(re,10240,9728);for(let $e=0;$e<be;$e++)n.texImage2D(ye+$e,0,6408,1,1,0,6408,5121,Ue);return Je}const K={};K[3553]=k(3553,3553,1),K[34067]=k(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),A.setClear(0),ne(2929),l.setFunc(AE),nt(!1),We(R2),ne(2884),ge(PA);function ne(re){f[re]!==!0&&(n.enable(re),f[re]=!0)}function ie(re){f[re]!==!1&&(n.disable(re),f[re]=!1)}function ue(re,ye){return d[re]!==ye?(n.bindFramebuffer(re,ye),d[re]=ye,r&&(re===36009&&(d[36160]=ye),re===36160&&(d[36009]=ye)),!0):!1}function j(re,ye){let be=p,Ue=!1;if(re)if(be=h.get(ye),be===void 0&&(be=[],h.set(ye,be)),re.isWebGLMultipleRenderTargets){const Je=re.texture;if(be.length!==Je.length||be[0]!==36064){for(let $e=0,ct=Je.length;$e<ct;$e++)be[$e]=36064+$e;be.length=Je.length,Ue=!0}}else be[0]!==36064&&(be[0]=36064,Ue=!0);else be[0]!==1029&&(be[0]=1029,Ue=!0);Ue&&(t.isWebGL2?n.drawBuffers(be):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(be))}function se(re){return m!==re?(n.useProgram(re),m=re,!0):!1}const ce={[Uf]:32774,[F7]:32778,[E7]:32779};if(r)ce[N2]=32775,ce[D2]=32776;else{const re=e.get("EXT_blend_minmax");re!==null&&(ce[N2]=re.MIN_EXT,ce[D2]=re.MAX_EXT)}const Be={[U7]:0,[S7]:1,[_7]:768,[PG]:770,[D7]:776,[T7]:774,[R7]:772,[Q7]:769,[WG]:771,[N7]:775,[M7]:773};function ge(re,ye,be,Ue,Je,$e,ct,ln){if(re===PA){g===!0&&(ie(3042),g=!1);return}if(g===!1&&(ne(3042),g=!0),re!==I7){if(re!==v||ln!==S){if((y!==Uf||b!==Uf)&&(n.blendEquation(32774),y=Uf,b=Uf),ln)switch(re){case kd:n.blendFuncSeparate(1,771,1,771);break;case hu:n.blendFunc(1,1);break;case M2:n.blendFuncSeparate(0,769,0,1);break;case T2:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case kd:n.blendFuncSeparate(770,771,1,771);break;case hu:n.blendFunc(770,1);break;case M2:n.blendFuncSeparate(0,769,0,1);break;case T2:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}w=null,C=null,F=null,x=null,v=re,S=ln}return}Je=Je||ye,$e=$e||be,ct=ct||Ue,(ye!==y||Je!==b)&&(n.blendEquationSeparate(ce[ye],ce[Je]),y=ye,b=Je),(be!==w||Ue!==C||$e!==F||ct!==x)&&(n.blendFuncSeparate(Be[be],Be[Ue],Be[$e],Be[ct]),w=be,C=Ue,F=$e,x=ct),v=re,S=null}function Fe(re,ye){re.side===Ui?ie(2884):ne(2884);let be=re.side===di;ye&&(be=!be),nt(be),re.blending===kd&&re.transparent===!1?ge(PA):ge(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.premultipliedAlpha),l.setFunc(re.depthFunc),l.setTest(re.depthTest),l.setMask(re.depthWrite),a.setMask(re.colorWrite);const Ue=re.stencilWrite;A.setTest(Ue),Ue&&(A.setMask(re.stencilWriteMask),A.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),A.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Qe(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?ne(32926):ie(32926)}function nt(re){R!==re&&(re?n.frontFace(2304):n.frontFace(2305),R=re)}function We(re){re!==C7?(ne(2884),re!==Z&&(re===R2?n.cullFace(1029):re===b7?n.cullFace(1028):n.cullFace(1032))):ie(2884),Z=re}function Te(re){re!==Y&&(M&&n.lineWidth(re),Y=re)}function Qe(re,ye,be){re?(ne(32823),(Q!==ye||B!==be)&&(n.polygonOffset(ye,be),Q=ye,B=be)):ie(32823)}function Ge(re){re?ne(3089):ie(3089)}function qe(re){re===void 0&&(re=33984+E-1),V!==re&&(n.activeTexture(re),V=re)}function O(re,ye,be){be===void 0&&(V===null?be=33984+E-1:be=V);let Ue=G[be];Ue===void 0&&(Ue={type:void 0,texture:void 0},G[be]=Ue),(Ue.type!==re||Ue.texture!==ye)&&(V!==be&&(n.activeTexture(be),V=be),n.bindTexture(re,ye||K[re]),Ue.type=re,Ue.texture=ye)}function J(){const re=G[V];re!==void 0&&re.type!==void 0&&(n.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function ae(){try{n.compressedTexImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function de(){try{n.compressedTexImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ve(){try{n.texSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function L(){try{n.texSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function _(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function I(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function N(){try{n.texStorage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function $(){try{n.texStorage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ee(){try{n.texImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function te(){try{n.texImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function we(re){H.equals(re)===!1&&(n.scissor(re.x,re.y,re.z,re.w),H.copy(re))}function Ce(re){oe.equals(re)===!1&&(n.viewport(re.x,re.y,re.z,re.w),oe.copy(re))}function Ee(re,ye){let be=u.get(ye);be===void 0&&(be=new WeakMap,u.set(ye,be));let Ue=be.get(re);Ue===void 0&&(Ue=n.getUniformBlockIndex(ye,re.name),be.set(re,Ue))}function Ve(re,ye){const Ue=u.get(ye).get(re);c.get(re)!==Ue&&(n.uniformBlockBinding(ye,Ue,re.__bindingPointIndex),c.set(re,Ue))}function _e(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},V=null,G={},d={},h=new WeakMap,p=[],m=null,g=!1,v=null,y=null,w=null,C=null,b=null,F=null,x=null,S=!1,R=null,Z=null,Y=null,Q=null,B=null,H.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),A.reset()}return{buffers:{color:a,depth:l,stencil:A},enable:ne,disable:ie,bindFramebuffer:ue,drawBuffers:j,useProgram:se,setBlending:ge,setMaterial:Fe,setFlipSided:nt,setCullFace:We,setLineWidth:Te,setPolygonOffset:Qe,setScissorTest:Ge,activeTexture:qe,bindTexture:O,unbindTexture:J,compressedTexImage2D:ae,compressedTexImage3D:de,texImage2D:ee,texImage3D:te,updateUBOMapping:Ee,uniformBlockBinding:Ve,texStorage2D:N,texStorage3D:$,texSubImage2D:ve,texSubImage3D:L,compressedTexSubImage2D:_,compressedTexSubImage3D:I,scissor:we,viewport:Ce,reset:_e}}function Cre(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,A=i.maxCubemapSize,c=i.maxTextureSize,u=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),h=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(O,J){return g?new OffscreenCanvas(O,J):Im("canvas")}function y(O,J,ae,de){let ve=1;if((O.width>de||O.height>de)&&(ve=de/Math.max(O.width,O.height)),ve<1||J===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const L=J?pw:Math.floor,_=L(ve*O.width),I=L(ve*O.height);p===void 0&&(p=v(_,I));const N=ae?v(_,I):p;return N.width=_,N.height=I,N.getContext("2d").drawImage(O,0,0,_,I),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+_+"x"+I+")."),N}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function w(O){return dE(O.width)&&dE(O.height)}function C(O){return a?!1:O.wrapS!==ci||O.wrapT!==ci||O.minFilter!==Br&&O.minFilter!==oi}function b(O,J){return O.generateMipmaps&&J&&O.minFilter!==Br&&O.minFilter!==oi}function F(O){n.generateMipmap(O)}function x(O,J,ae,de,ve=!1){if(a===!1)return J;if(O!==null){if(n[O]!==void 0)return n[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let L=J;return J===6403&&(ae===5126&&(L=33326),ae===5131&&(L=33325),ae===5121&&(L=33321)),J===33319&&(ae===5126&&(L=33328),ae===5131&&(L=33327),ae===5121&&(L=33323)),J===6408&&(ae===5126&&(L=34836),ae===5131&&(L=34842),ae===5121&&(L=de===ht&&ve===!1?35907:32856),ae===32819&&(L=32854),ae===32820&&(L=32855)),(L===33325||L===33326||L===33327||L===33328||L===34842||L===34836)&&e.get("EXT_color_buffer_float"),L}function S(O,J,ae){return b(O,ae)===!0||O.isFramebufferTexture&&O.minFilter!==Br&&O.minFilter!==oi?Math.log2(Math.max(J.width,J.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?J.mipmaps.length:1}function R(O){return O===Br||O===fw||O===dw?9728:9729}function Z(O){const J=O.target;J.removeEventListener("dispose",Z),Q(J),J.isVideoTexture&&h.delete(J)}function Y(O){const J=O.target;J.removeEventListener("dispose",Y),E(J)}function Q(O){const J=r.get(O);if(J.__webglInit===void 0)return;const ae=O.source,de=m.get(ae);if(de){const ve=de[J.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&B(O),Object.keys(de).length===0&&m.delete(ae)}r.remove(O)}function B(O){const J=r.get(O);n.deleteTexture(J.__webglTexture);const ae=O.source,de=m.get(ae);delete de[J.__cacheKey],o.memory.textures--}function E(O){const J=O.texture,ae=r.get(O),de=r.get(J);if(de.__webglTexture!==void 0&&(n.deleteTexture(de.__webglTexture),o.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++)n.deleteFramebuffer(ae.__webglFramebuffer[ve]),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[ve]);else{if(n.deleteFramebuffer(ae.__webglFramebuffer),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let ve=0;ve<ae.__webglColorRenderbuffer.length;ve++)ae.__webglColorRenderbuffer[ve]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[ve]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let ve=0,L=J.length;ve<L;ve++){const _=r.get(J[ve]);_.__webglTexture&&(n.deleteTexture(_.__webglTexture),o.memory.textures--),r.remove(J[ve])}r.remove(J),r.remove(O)}let M=0;function D(){M=0}function T(){const O=M;return O>=l&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+l),M+=1,O}function V(O){const J=[];return J.push(O.wrapS),J.push(O.wrapT),J.push(O.wrapR||0),J.push(O.magFilter),J.push(O.minFilter),J.push(O.anisotropy),J.push(O.internalFormat),J.push(O.format),J.push(O.type),J.push(O.generateMipmaps),J.push(O.premultiplyAlpha),J.push(O.flipY),J.push(O.unpackAlignment),J.push(O.encoding),J.join()}function G(O,J){const ae=r.get(O);if(O.isVideoTexture&&Ge(O),O.isRenderTargetTexture===!1&&O.version>0&&ae.__version!==O.version){const de=O.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ie(ae,O,J);return}}t.bindTexture(3553,ae.__webglTexture,33984+J)}function P(O,J){const ae=r.get(O);if(O.version>0&&ae.__version!==O.version){ie(ae,O,J);return}t.bindTexture(35866,ae.__webglTexture,33984+J)}function U(O,J){const ae=r.get(O);if(O.version>0&&ae.__version!==O.version){ie(ae,O,J);return}t.bindTexture(32879,ae.__webglTexture,33984+J)}function H(O,J){const ae=r.get(O);if(O.version>0&&ae.__version!==O.version){ue(ae,O,J);return}t.bindTexture(34067,ae.__webglTexture,33984+J)}const oe={[ds]:10497,[ci]:33071,[Cm]:33648},k={[Br]:9728,[fw]:9984,[dw]:9986,[oi]:9729,[o_]:9985,[Uu]:9987};function K(O,J,ae){if(ae?(n.texParameteri(O,10242,oe[J.wrapS]),n.texParameteri(O,10243,oe[J.wrapT]),(O===32879||O===35866)&&n.texParameteri(O,32882,oe[J.wrapR]),n.texParameteri(O,10240,k[J.magFilter]),n.texParameteri(O,10241,k[J.minFilter])):(n.texParameteri(O,10242,33071),n.texParameteri(O,10243,33071),(O===32879||O===35866)&&n.texParameteri(O,32882,33071),(J.wrapS!==ci||J.wrapT!==ci)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(O,10240,R(J.magFilter)),n.texParameteri(O,10241,R(J.minFilter)),J.minFilter!==Br&&J.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const de=e.get("EXT_texture_filter_anisotropic");if(J.type===IA&&e.has("OES_texture_float_linear")===!1||a===!1&&J.type===bm&&e.has("OES_texture_half_float_linear")===!1)return;(J.anisotropy>1||r.get(J).__currentAnisotropy)&&(n.texParameterf(O,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,i.getMaxAnisotropy())),r.get(J).__currentAnisotropy=J.anisotropy)}}function ne(O,J){let ae=!1;O.__webglInit===void 0&&(O.__webglInit=!0,J.addEventListener("dispose",Z));const de=J.source;let ve=m.get(de);ve===void 0&&(ve={},m.set(de,ve));const L=V(J);if(L!==O.__cacheKey){ve[L]===void 0&&(ve[L]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),ve[L].usedTimes++;const _=ve[O.__cacheKey];_!==void 0&&(ve[O.__cacheKey].usedTimes--,_.usedTimes===0&&B(J)),O.__cacheKey=L,O.__webglTexture=ve[L].texture}return ae}function ie(O,J,ae){let de=3553;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(de=35866),J.isData3DTexture&&(de=32879);const ve=ne(O,J),L=J.source;t.bindTexture(de,O.__webglTexture,33984+ae);const _=r.get(L);if(L.version!==_.__version||ve===!0){t.activeTexture(33984+ae),n.pixelStorei(37440,J.flipY),n.pixelStorei(37441,J.premultiplyAlpha),n.pixelStorei(3317,J.unpackAlignment),n.pixelStorei(37443,0);const I=C(J)&&w(J.image)===!1;let N=y(J.image,I,!1,c);N=qe(J,N);const $=w(N)||a,ee=s.convert(J.format,J.encoding);let te=s.convert(J.type),we=x(J.internalFormat,ee,te,J.encoding,J.isVideoTexture);K(de,J,$);let Ce;const Ee=J.mipmaps,Ve=a&&J.isVideoTexture!==!0,_e=_.__version===void 0||ve===!0,re=S(J,N,$);if(J.isDepthTexture)we=6402,a?J.type===IA?we=36012:J.type===Zc?we=33190:J.type===Vd?we=35056:we=33189:J.type===IA&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),J.format===nu&&we===6402&&J.type!==GG&&J.type!==Zc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),J.type=Zc,te=s.convert(J.type)),J.format===hh&&we===6402&&(we=34041,J.type!==Vd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),J.type=Vd,te=s.convert(J.type))),_e&&(Ve?t.texStorage2D(3553,1,we,N.width,N.height):t.texImage2D(3553,0,we,N.width,N.height,0,ee,te,null));else if(J.isDataTexture)if(Ee.length>0&&$){Ve&&_e&&t.texStorage2D(3553,re,we,Ee[0].width,Ee[0].height);for(let ye=0,be=Ee.length;ye<be;ye++)Ce=Ee[ye],Ve?t.texSubImage2D(3553,ye,0,0,Ce.width,Ce.height,ee,te,Ce.data):t.texImage2D(3553,ye,we,Ce.width,Ce.height,0,ee,te,Ce.data);J.generateMipmaps=!1}else Ve?(_e&&t.texStorage2D(3553,re,we,N.width,N.height),t.texSubImage2D(3553,0,0,0,N.width,N.height,ee,te,N.data)):t.texImage2D(3553,0,we,N.width,N.height,0,ee,te,N.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){Ve&&_e&&t.texStorage3D(35866,re,we,Ee[0].width,Ee[0].height,N.depth);for(let ye=0,be=Ee.length;ye<be;ye++)Ce=Ee[ye],J.format!==Fi?ee!==null?Ve?t.compressedTexSubImage3D(35866,ye,0,0,0,Ce.width,Ce.height,N.depth,ee,Ce.data,0,0):t.compressedTexImage3D(35866,ye,we,Ce.width,Ce.height,N.depth,0,Ce.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ve?t.texSubImage3D(35866,ye,0,0,0,Ce.width,Ce.height,N.depth,ee,te,Ce.data):t.texImage3D(35866,ye,we,Ce.width,Ce.height,N.depth,0,ee,te,Ce.data)}else{Ve&&_e&&t.texStorage2D(3553,re,we,Ee[0].width,Ee[0].height);for(let ye=0,be=Ee.length;ye<be;ye++)Ce=Ee[ye],J.format!==Fi?ee!==null?Ve?t.compressedTexSubImage2D(3553,ye,0,0,Ce.width,Ce.height,ee,Ce.data):t.compressedTexImage2D(3553,ye,we,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ve?t.texSubImage2D(3553,ye,0,0,Ce.width,Ce.height,ee,te,Ce.data):t.texImage2D(3553,ye,we,Ce.width,Ce.height,0,ee,te,Ce.data)}else if(J.isDataArrayTexture)Ve?(_e&&t.texStorage3D(35866,re,we,N.width,N.height,N.depth),t.texSubImage3D(35866,0,0,0,0,N.width,N.height,N.depth,ee,te,N.data)):t.texImage3D(35866,0,we,N.width,N.height,N.depth,0,ee,te,N.data);else if(J.isData3DTexture)Ve?(_e&&t.texStorage3D(32879,re,we,N.width,N.height,N.depth),t.texSubImage3D(32879,0,0,0,0,N.width,N.height,N.depth,ee,te,N.data)):t.texImage3D(32879,0,we,N.width,N.height,N.depth,0,ee,te,N.data);else if(J.isFramebufferTexture){if(_e)if(Ve)t.texStorage2D(3553,re,we,N.width,N.height);else{let ye=N.width,be=N.height;for(let Ue=0;Ue<re;Ue++)t.texImage2D(3553,Ue,we,ye,be,0,ee,te,null),ye>>=1,be>>=1}}else if(Ee.length>0&&$){Ve&&_e&&t.texStorage2D(3553,re,we,Ee[0].width,Ee[0].height);for(let ye=0,be=Ee.length;ye<be;ye++)Ce=Ee[ye],Ve?t.texSubImage2D(3553,ye,0,0,ee,te,Ce):t.texImage2D(3553,ye,we,ee,te,Ce);J.generateMipmaps=!1}else Ve?(_e&&t.texStorage2D(3553,re,we,N.width,N.height),t.texSubImage2D(3553,0,0,0,ee,te,N)):t.texImage2D(3553,0,we,ee,te,N);b(J,$)&&F(de),_.__version=L.version,J.onUpdate&&J.onUpdate(J)}O.__version=J.version}function ue(O,J,ae){if(J.image.length!==6)return;const de=ne(O,J),ve=J.source;t.bindTexture(34067,O.__webglTexture,33984+ae);const L=r.get(ve);if(ve.version!==L.__version||de===!0){t.activeTexture(33984+ae),n.pixelStorei(37440,J.flipY),n.pixelStorei(37441,J.premultiplyAlpha),n.pixelStorei(3317,J.unpackAlignment),n.pixelStorei(37443,0);const _=J.isCompressedTexture||J.image[0].isCompressedTexture,I=J.image[0]&&J.image[0].isDataTexture,N=[];for(let ye=0;ye<6;ye++)!_&&!I?N[ye]=y(J.image[ye],!1,!0,A):N[ye]=I?J.image[ye].image:J.image[ye],N[ye]=qe(J,N[ye]);const $=N[0],ee=w($)||a,te=s.convert(J.format,J.encoding),we=s.convert(J.type),Ce=x(J.internalFormat,te,we,J.encoding),Ee=a&&J.isVideoTexture!==!0,Ve=L.__version===void 0||de===!0;let _e=S(J,$,ee);K(34067,J,ee);let re;if(_){Ee&&Ve&&t.texStorage2D(34067,_e,Ce,$.width,$.height);for(let ye=0;ye<6;ye++){re=N[ye].mipmaps;for(let be=0;be<re.length;be++){const Ue=re[be];J.format!==Fi?te!==null?Ee?t.compressedTexSubImage2D(34069+ye,be,0,0,Ue.width,Ue.height,te,Ue.data):t.compressedTexImage2D(34069+ye,be,Ce,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ee?t.texSubImage2D(34069+ye,be,0,0,Ue.width,Ue.height,te,we,Ue.data):t.texImage2D(34069+ye,be,Ce,Ue.width,Ue.height,0,te,we,Ue.data)}}}else{re=J.mipmaps,Ee&&Ve&&(re.length>0&&_e++,t.texStorage2D(34067,_e,Ce,N[0].width,N[0].height));for(let ye=0;ye<6;ye++)if(I){Ee?t.texSubImage2D(34069+ye,0,0,0,N[ye].width,N[ye].height,te,we,N[ye].data):t.texImage2D(34069+ye,0,Ce,N[ye].width,N[ye].height,0,te,we,N[ye].data);for(let be=0;be<re.length;be++){const Je=re[be].image[ye].image;Ee?t.texSubImage2D(34069+ye,be+1,0,0,Je.width,Je.height,te,we,Je.data):t.texImage2D(34069+ye,be+1,Ce,Je.width,Je.height,0,te,we,Je.data)}}else{Ee?t.texSubImage2D(34069+ye,0,0,0,te,we,N[ye]):t.texImage2D(34069+ye,0,Ce,te,we,N[ye]);for(let be=0;be<re.length;be++){const Ue=re[be];Ee?t.texSubImage2D(34069+ye,be+1,0,0,te,we,Ue.image[ye]):t.texImage2D(34069+ye,be+1,Ce,te,we,Ue.image[ye])}}}b(J,ee)&&F(34067),L.__version=ve.version,J.onUpdate&&J.onUpdate(J)}O.__version=J.version}function j(O,J,ae,de,ve){const L=s.convert(ae.format,ae.encoding),_=s.convert(ae.type),I=x(ae.internalFormat,L,_,ae.encoding);r.get(J).__hasExternalTextures||(ve===32879||ve===35866?t.texImage3D(ve,0,I,J.width,J.height,J.depth,0,L,_,null):t.texImage2D(ve,0,I,J.width,J.height,0,L,_,null)),t.bindFramebuffer(36160,O),Qe(J)?f.framebufferTexture2DMultisampleEXT(36160,de,ve,r.get(ae).__webglTexture,0,Te(J)):(ve===3553||ve>=34069&&ve<=34074)&&n.framebufferTexture2D(36160,de,ve,r.get(ae).__webglTexture,0),t.bindFramebuffer(36160,null)}function se(O,J,ae){if(n.bindRenderbuffer(36161,O),J.depthBuffer&&!J.stencilBuffer){let de=33189;if(ae||Qe(J)){const ve=J.depthTexture;ve&&ve.isDepthTexture&&(ve.type===IA?de=36012:ve.type===Zc&&(de=33190));const L=Te(J);Qe(J)?f.renderbufferStorageMultisampleEXT(36161,L,de,J.width,J.height):n.renderbufferStorageMultisample(36161,L,de,J.width,J.height)}else n.renderbufferStorage(36161,de,J.width,J.height);n.framebufferRenderbuffer(36160,36096,36161,O)}else if(J.depthBuffer&&J.stencilBuffer){const de=Te(J);ae&&Qe(J)===!1?n.renderbufferStorageMultisample(36161,de,35056,J.width,J.height):Qe(J)?f.renderbufferStorageMultisampleEXT(36161,de,35056,J.width,J.height):n.renderbufferStorage(36161,34041,J.width,J.height),n.framebufferRenderbuffer(36160,33306,36161,O)}else{const de=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let ve=0;ve<de.length;ve++){const L=de[ve],_=s.convert(L.format,L.encoding),I=s.convert(L.type),N=x(L.internalFormat,_,I,L.encoding),$=Te(J);ae&&Qe(J)===!1?n.renderbufferStorageMultisample(36161,$,N,J.width,J.height):Qe(J)?f.renderbufferStorageMultisampleEXT(36161,$,N,J.width,J.height):n.renderbufferStorage(36161,N,J.width,J.height)}}n.bindRenderbuffer(36161,null)}function ce(O,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,O),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(J.depthTexture).__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),G(J.depthTexture,0);const de=r.get(J.depthTexture).__webglTexture,ve=Te(J);if(J.depthTexture.format===nu)Qe(J)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,de,0,ve):n.framebufferTexture2D(36160,36096,3553,de,0);else if(J.depthTexture.format===hh)Qe(J)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,de,0,ve):n.framebufferTexture2D(36160,33306,3553,de,0);else throw new Error("Unknown depthTexture format")}function Be(O){const J=r.get(O),ae=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!J.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");ce(J.__webglFramebuffer,O)}else if(ae){J.__webglDepthbuffer=[];for(let de=0;de<6;de++)t.bindFramebuffer(36160,J.__webglFramebuffer[de]),J.__webglDepthbuffer[de]=n.createRenderbuffer(),se(J.__webglDepthbuffer[de],O,!1)}else t.bindFramebuffer(36160,J.__webglFramebuffer),J.__webglDepthbuffer=n.createRenderbuffer(),se(J.__webglDepthbuffer,O,!1);t.bindFramebuffer(36160,null)}function ge(O,J,ae){const de=r.get(O);J!==void 0&&j(de.__webglFramebuffer,O,O.texture,36064,3553),ae!==void 0&&Be(O)}function Fe(O){const J=O.texture,ae=r.get(O),de=r.get(J);O.addEventListener("dispose",Y),O.isWebGLMultipleRenderTargets!==!0&&(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=J.version,o.memory.textures++);const ve=O.isWebGLCubeRenderTarget===!0,L=O.isWebGLMultipleRenderTargets===!0,_=w(O)||a;if(ve){ae.__webglFramebuffer=[];for(let I=0;I<6;I++)ae.__webglFramebuffer[I]=n.createFramebuffer()}else{if(ae.__webglFramebuffer=n.createFramebuffer(),L)if(i.drawBuffers){const I=O.texture;for(let N=0,$=I.length;N<$;N++){const ee=r.get(I[N]);ee.__webglTexture===void 0&&(ee.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&Qe(O)===!1){const I=L?J:[J];ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ae.__webglMultisampledFramebuffer);for(let N=0;N<I.length;N++){const $=I[N];ae.__webglColorRenderbuffer[N]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ae.__webglColorRenderbuffer[N]);const ee=s.convert($.format,$.encoding),te=s.convert($.type),we=x($.internalFormat,ee,te,$.encoding,O.isXRRenderTarget===!0),Ce=Te(O);n.renderbufferStorageMultisample(36161,Ce,we,O.width,O.height),n.framebufferRenderbuffer(36160,36064+N,36161,ae.__webglColorRenderbuffer[N])}n.bindRenderbuffer(36161,null),O.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),se(ae.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(36160,null)}}if(ve){t.bindTexture(34067,de.__webglTexture),K(34067,J,_);for(let I=0;I<6;I++)j(ae.__webglFramebuffer[I],O,J,36064,34069+I);b(J,_)&&F(34067),t.unbindTexture()}else if(L){const I=O.texture;for(let N=0,$=I.length;N<$;N++){const ee=I[N],te=r.get(ee);t.bindTexture(3553,te.__webglTexture),K(3553,ee,_),j(ae.__webglFramebuffer,O,ee,36064+N,3553),b(ee,_)&&F(3553)}t.unbindTexture()}else{let I=3553;(O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?I=O.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(I,de.__webglTexture),K(I,J,_),j(ae.__webglFramebuffer,O,J,36064,I),b(J,_)&&F(I),t.unbindTexture()}O.depthBuffer&&Be(O)}function nt(O){const J=w(O)||a,ae=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let de=0,ve=ae.length;de<ve;de++){const L=ae[de];if(b(L,J)){const _=O.isWebGLCubeRenderTarget?34067:3553,I=r.get(L).__webglTexture;t.bindTexture(_,I),F(_),t.unbindTexture()}}}function We(O){if(a&&O.samples>0&&Qe(O)===!1){const J=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],ae=O.width,de=O.height;let ve=16384;const L=[],_=O.stencilBuffer?33306:36096,I=r.get(O),N=O.isWebGLMultipleRenderTargets===!0;if(N)for(let $=0;$<J.length;$++)t.bindFramebuffer(36160,I.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$,36161,null),t.bindFramebuffer(36160,I.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$,3553,null,0);t.bindFramebuffer(36008,I.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,I.__webglFramebuffer);for(let $=0;$<J.length;$++){L.push(36064+$),O.depthBuffer&&L.push(_);const ee=I.__ignoreDepthValues!==void 0?I.__ignoreDepthValues:!1;if(ee===!1&&(O.depthBuffer&&(ve|=256),O.stencilBuffer&&(ve|=1024)),N&&n.framebufferRenderbuffer(36008,36064,36161,I.__webglColorRenderbuffer[$]),ee===!0&&(n.invalidateFramebuffer(36008,[_]),n.invalidateFramebuffer(36009,[_])),N){const te=r.get(J[$]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,te,0)}n.blitFramebuffer(0,0,ae,de,0,0,ae,de,ve,9728),d&&n.invalidateFramebuffer(36008,L)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),N)for(let $=0;$<J.length;$++){t.bindFramebuffer(36160,I.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+$,36161,I.__webglColorRenderbuffer[$]);const ee=r.get(J[$]).__webglTexture;t.bindFramebuffer(36160,I.__webglFramebuffer),n.framebufferTexture2D(36009,36064+$,3553,ee,0)}t.bindFramebuffer(36009,I.__webglMultisampledFramebuffer)}}function Te(O){return Math.min(u,O.samples)}function Qe(O){const J=r.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function Ge(O){const J=o.render.frame;h.get(O)!==J&&(h.set(O,J),O.update())}function qe(O,J){const ae=O.encoding,de=O.format,ve=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===fE||ae!==no&&(ae===ht?a===!1?e.has("EXT_sRGB")===!0&&de===Fi?(O.format=fE,O.minFilter=oi,O.generateMipmaps=!1):J=XG.sRGBToLinear(J):(de!==Fi||ve!==jA)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ae)),J}this.allocateTextureUnit=T,this.resetTextureUnits=D,this.setTexture2D=G,this.setTexture2DArray=P,this.setTexture3D=U,this.setTextureCube=H,this.rebindTextures=ge,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=nt,this.updateMultisampleRenderTarget=We,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=j,this.useMultisampledRTT=Qe}function bre(n,e,t){const r=t.isWebGL2;function i(s,o=null){let a;if(s===jA)return 5121;if(s===e$)return 32819;if(s===t$)return 32820;if(s===j7)return 5120;if(s===$7)return 5122;if(s===GG)return 5123;if(s===q7)return 5124;if(s===Zc)return 5125;if(s===IA)return 5126;if(s===bm)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===n$)return 6406;if(s===Fi)return 6408;if(s===r$)return 6409;if(s===i$)return 6410;if(s===nu)return 6402;if(s===hh)return 34041;if(s===s$)return 6403;if(s===ZG)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===fE)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===o$)return 36244;if(s===a$)return 33319;if(s===l$)return 33320;if(s===A$)return 36249;if(s===Wx||s===Ox||s===Gx||s===Zx)if(o===ht)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Wx)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ox)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Gx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Zx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Wx)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ox)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Gx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Zx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===k2||s===V2||s===L2||s===P2)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===k2)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===V2)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===L2)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===P2)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===c$)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===W2||s===O2)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===W2)return o===ht?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===O2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===G2||s===Z2||s===J2||s===H2||s===z2||s===Y2||s===X2||s===K2||s===j2||s===$2||s===q2||s===eT||s===tT||s===nT)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===G2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Z2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===J2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===H2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===z2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Y2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===X2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===K2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===j2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===$2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===q2)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===eT)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===tT)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===nT)return o===ht?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===rT)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===rT)return o===ht?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===Vd?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class xre extends _r{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qr extends Nt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ire={type:"move"};class mI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,A=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(A&&e.hand){o=!0;for(const p of e.hand.values()){const m=t.getJointPose(p,r);if(A.joints[p.jointName]===void 0){const v=new Qr;v.matrixAutoUpdate=!1,v.visible=!1,A.joints[p.jointName]=v,A.add(v)}const g=A.joints[p.jointName];m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}const c=A.joints["index-finger-tip"],u=A.joints["thumb-tip"],f=c.position.distanceTo(u.position),d=.02,h=.005;A.inputState.pinching&&f>d+h?(A.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!A.inputState.pinching&&f<=d-h&&(A.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Ire)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),A!==null&&(A.visible=o!==null),this}}class Fre extends nr{constructor(e,t,r,i,s,o,a,l,A,c){if(c=c!==void 0?c:nu,c!==nu&&c!==hh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===nu&&(r=Zc),r===void 0&&c===hh&&(r=Vd),super(null,i,s,o,a,l,c,r,A),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Br,this.minFilter=l!==void 0?l:Br,this.flipY=!1,this.generateMipmaps=!1}}class Ere extends fc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,A=null,c=null,u=null,f=null,d=null;const h=t.getContextAttributes();let p=null,m=null;const g=[],v=[],y=new _r;y.layers.enable(1),y.viewport=new Pt;const w=new _r;w.layers.enable(2),w.viewport=new Pt;const C=[y,w],b=new xre;b.layers.enable(1),b.layers.enable(2);let F=null,x=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let G=g[V];return G===void 0&&(G=new mI,g[V]=G),G.getTargetRaySpace()},this.getControllerGrip=function(V){let G=g[V];return G===void 0&&(G=new mI,g[V]=G),G.getGripSpace()},this.getHand=function(V){let G=g[V];return G===void 0&&(G=new mI,g[V]=G),G.getHandSpace()};function S(V){const G=v.indexOf(V.inputSource);if(G===-1)return;const P=g[G];P!==void 0&&P.dispatchEvent({type:V.type,data:V.inputSource})}function R(){i.removeEventListener("select",S),i.removeEventListener("selectstart",S),i.removeEventListener("selectend",S),i.removeEventListener("squeeze",S),i.removeEventListener("squeezestart",S),i.removeEventListener("squeezeend",S),i.removeEventListener("end",R),i.removeEventListener("inputsourceschange",Z);for(let V=0;V<g.length;V++){const G=v[V];G!==null&&(v[V]=null,g[V].disconnect(G))}F=null,x=null,e.setRenderTarget(p),f=null,u=null,c=null,i=null,m=null,T.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return u!==null?u:f},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(V){if(i=V,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",S),i.addEventListener("selectstart",S),i.addEventListener("selectend",S),i.addEventListener("squeeze",S),i.addEventListener("squeezestart",S),i.addEventListener("squeezeend",S),i.addEventListener("end",R),i.addEventListener("inputsourceschange",Z),h.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const G={antialias:i.renderState.layers===void 0?h.antialias:!0,alpha:h.alpha,depth:h.depth,stencil:h.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,G),i.updateRenderState({baseLayer:f}),m=new $A(f.framebufferWidth,f.framebufferHeight,{format:Fi,type:jA,encoding:e.outputEncoding,stencilBuffer:h.stencil})}else{let G=null,P=null,U=null;h.depth&&(U=h.stencil?35056:33190,G=h.stencil?hh:nu,P=h.stencil?Vd:Zc);const H={colorFormat:32856,depthFormat:U,scaleFactor:s};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(H),i.updateRenderState({layers:[u]}),m=new $A(u.textureWidth,u.textureHeight,{format:Fi,type:jA,depthTexture:new Fre(u.textureWidth,u.textureHeight,P,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:h.stencil,encoding:e.outputEncoding,samples:h.antialias?4:0});const oe=e.properties.get(m);oe.__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),l=null,o=await i.requestReferenceSpace(a),T.setContext(i),T.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function Z(V){for(let G=0;G<V.removed.length;G++){const P=V.removed[G],U=v.indexOf(P);U>=0&&(v[U]=null,g[U].dispatchEvent({type:"disconnected",data:P}))}for(let G=0;G<V.added.length;G++){const P=V.added[G];let U=v.indexOf(P);if(U===-1){for(let oe=0;oe<g.length;oe++)if(oe>=v.length){v.push(P),U=oe;break}else if(v[oe]===null){v[oe]=P,U=oe;break}if(U===-1)break}const H=g[U];H&&H.dispatchEvent({type:"connected",data:P})}}const Y=new X,Q=new X;function B(V,G,P){Y.setFromMatrixPosition(G.matrixWorld),Q.setFromMatrixPosition(P.matrixWorld);const U=Y.distanceTo(Q),H=G.projectionMatrix.elements,oe=P.projectionMatrix.elements,k=H[14]/(H[10]-1),K=H[14]/(H[10]+1),ne=(H[9]+1)/H[5],ie=(H[9]-1)/H[5],ue=(H[8]-1)/H[0],j=(oe[8]+1)/oe[0],se=k*ue,ce=k*j,Be=U/(-ue+j),ge=Be*-ue;G.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(ge),V.translateZ(Be),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const Fe=k+Be,nt=K+Be,We=se-ge,Te=ce+(U-ge),Qe=ne*K/nt*Fe,Ge=ie*K/nt*Fe;V.projectionMatrix.makePerspective(We,Te,Qe,Ge,Fe,nt)}function E(V,G){G===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(G.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(i===null)return;b.near=w.near=y.near=V.near,b.far=w.far=y.far=V.far,(F!==b.near||x!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),F=b.near,x=b.far);const G=V.parent,P=b.cameras;E(b,G);for(let H=0;H<P.length;H++)E(P[H],G);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),V.matrix.copy(b.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);const U=V.children;for(let H=0,oe=U.length;H<oe;H++)U[H].updateMatrixWorld(!0);P.length===2?B(b,y,w):b.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){if(u!==null)return u.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(V){u!==null&&(u.fixedFoveation=V),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=V)};let M=null;function D(V,G){if(A=G.getViewerPose(l||o),d=G,A!==null){const P=A.views;f!==null&&(e.setRenderTargetFramebuffer(m,f.framebuffer),e.setRenderTarget(m));let U=!1;P.length!==b.cameras.length&&(b.cameras.length=0,U=!0);for(let H=0;H<P.length;H++){const oe=P[H];let k=null;if(f!==null)k=f.getViewport(oe);else{const ne=c.getViewSubImage(u,oe);k=ne.viewport,H===0&&(e.setRenderTargetTextures(m,ne.colorTexture,u.ignoreDepthValues?void 0:ne.depthStencilTexture),e.setRenderTarget(m))}let K=C[H];K===void 0&&(K=new _r,K.layers.enable(H),K.viewport=new Pt,C[H]=K),K.matrix.fromArray(oe.transform.matrix),K.projectionMatrix.fromArray(oe.projectionMatrix),K.viewport.set(k.x,k.y,k.width,k.height),H===0&&b.matrix.copy(K.matrix),U===!0&&b.cameras.push(K)}}for(let P=0;P<g.length;P++){const U=v[P],H=g[P];U!==null&&H!==void 0&&H.update(U,G,l||o)}M&&M(V,G),d=null}const T=new tZ;T.setAnimationLoop(D),this.setAnimationLoop=function(V){M=V},this.dispose=function(){}}}function Ure(n,e){function t(p,m){p.fogColor.value.copy(m.color),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)}function r(p,m,g,v,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(p,m):m.isMeshToonMaterial?(i(p,m),c(p,m)):m.isMeshPhongMaterial?(i(p,m),A(p,m)):m.isMeshStandardMaterial?(i(p,m),u(p,m),m.isMeshPhysicalMaterial&&f(p,m,y)):m.isMeshMatcapMaterial?(i(p,m),d(p,m)):m.isMeshDepthMaterial?i(p,m):m.isMeshDistanceMaterial?(i(p,m),h(p,m)):m.isMeshNormalMaterial?i(p,m):m.isLineBasicMaterial?(s(p,m),m.isLineDashedMaterial&&o(p,m)):m.isPointsMaterial?a(p,m,g,v):m.isSpriteMaterial?l(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===di&&(p.bumpScale.value*=-1)),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===di&&p.normalScale.value.negate()),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);const g=e.get(m).envMap;if(g&&(p.envMap.value=g,p.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio),m.lightMap){p.lightMap.value=m.lightMap;const w=n.physicallyCorrectLights!==!0?Math.PI:1;p.lightMapIntensity.value=m.lightMapIntensity*w}m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity);let v;m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.iridescenceMap?v=m.iridescenceMap:m.iridescenceThicknessMap?v=m.iridescenceThicknessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix));let y;m.aoMap?y=m.aoMap:m.lightMap&&(y=m.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uv2Transform.value.copy(y.matrix))}function s(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}function o(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}function a(p,m,g,v){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*g,p.scale.value=v*.5,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let y;m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix))}function l(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),p.uvTransform.value.copy(g.matrix))}function A(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4)}function c(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap)}function u(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}function f(p,m,g){p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===di&&p.clearcoatNormalScale.value.negate())),m.iridescence>0&&(p.iridescence.value=m.iridescence,p.iridescenceIOR.value=m.iridescenceIOR,p.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(p.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=g.texture,p.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}function d(p,m){m.matcap&&(p.matcap.value=m.matcap)}function h(p,m){p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function Sre(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(35375):0;function l(v,y){const w=y.program;r.uniformBlockBinding(v,w)}function A(v,y){let w=i[v.id];w===void 0&&(h(v),w=c(v),i[v.id]=w,v.addEventListener("dispose",m));const C=y.program;r.updateUBOMapping(v,C);const b=e.render.frame;s[v.id]!==b&&(f(v),s[v.id]=b)}function c(v){const y=u();v.__bindingPointIndex=y;const w=n.createBuffer(),C=v.__size,b=v.usage;return n.bindBuffer(35345,w),n.bufferData(35345,C,b),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,w),w}function u(){for(let v=0;v<a;v++)if(o.indexOf(v)===-1)return o.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(v){const y=i[v.id],w=v.uniforms,C=v.__cache;n.bindBuffer(35345,y);for(let b=0,F=w.length;b<F;b++){const x=w[b];if(d(x,b,C)===!0){const S=x.value,R=x.__offset;typeof S=="number"?(x.__data[0]=S,n.bufferSubData(35345,R,x.__data)):(x.value.isMatrix3?(x.__data[0]=x.value.elements[0],x.__data[1]=x.value.elements[1],x.__data[2]=x.value.elements[2],x.__data[3]=x.value.elements[0],x.__data[4]=x.value.elements[3],x.__data[5]=x.value.elements[4],x.__data[6]=x.value.elements[5],x.__data[7]=x.value.elements[0],x.__data[8]=x.value.elements[6],x.__data[9]=x.value.elements[7],x.__data[10]=x.value.elements[8],x.__data[11]=x.value.elements[0]):S.toArray(x.__data),n.bufferSubData(35345,R,x.__data))}}n.bindBuffer(35345,null)}function d(v,y,w){const C=v.value;if(w[y]===void 0)return typeof C=="number"?w[y]=C:w[y]=C.clone(),!0;if(typeof C=="number"){if(w[y]!==C)return w[y]=C,!0}else{const b=w[y];if(b.equals(C)===!1)return b.copy(C),!0}return!1}function h(v){const y=v.uniforms;let w=0;const C=16;let b=0;for(let F=0,x=y.length;F<x;F++){const S=y[F],R=p(S);if(S.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=w,F>0){b=w%C;const Z=C-b;b!==0&&Z-R.boundary<0&&(w+=C-b,S.__offset=w)}w+=R.storage}return b=w%C,b>0&&(w+=C-b),v.__size=w,v.__cache={},this}function p(v){const y=v.value,w={boundary:0,storage:0};return typeof y=="number"?(w.boundary=4,w.storage=4):y.isVector2?(w.boundary=8,w.storage=8):y.isVector3||y.isColor?(w.boundary=16,w.storage=12):y.isVector4?(w.boundary=16,w.storage=16):y.isMatrix3?(w.boundary=48,w.storage=48):y.isMatrix4?(w.boundary=64,w.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),w}function m(v){const y=v.target;y.removeEventListener("dispose",m);const w=o.indexOf(y.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[y.id]),delete i[y.id],delete s[y.id]}function g(){for(const v in i)n.deleteBuffer(i[v]);o=[],i={},s={}}return{bind:l,update:A,dispose:g}}function _re(){const n=Im("canvas");return n.style.display="block",n}function HC(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:_re(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,a=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",A=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let u=null,f=null;const d=[],h=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=no,this.physicallyCorrectLights=!1,this.toneMapping=bl,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const p=this;let m=!1,g=0,v=0,y=null,w=-1,C=null;const b=new Pt,F=new Pt;let x=null,S=e.width,R=e.height,Z=1,Y=null,Q=null;const B=new Pt(0,0,S,R),E=new Pt(0,0,S,R);let M=!1;const D=new u_;let T=!1,V=!1,G=null;const P=new Le,U=new Oe,H=new X,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function k(){return y===null?Z:1}let K=t;function ne(q,le){for(let he=0;he<q.length;he++){const fe=q[he],pe=e.getContext(fe,le);if(pe!==null)return pe}return null}try{const q={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:A};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${ks}`),e.addEventListener("webglcontextlost",we,!1),e.addEventListener("webglcontextrestored",Ce,!1),e.addEventListener("webglcontextcreationerror",Ee,!1),K===null){const le=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&le.shift(),K=ne(le,q),K===null)throw ne(le)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}K.getShaderPrecisionFormat===void 0&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let ie,ue,j,se,ce,Be,ge,Fe,nt,We,Te,Qe,Ge,qe,O,J,ae,de,ve,L,_,I,N,$;function ee(){ie=new Wte(K),ue=new Nte(K,ie,n),ie.init(ue),I=new bre(K,ie,ue),j=new wre(K,ie,ue),se=new Zte,ce=new are,Be=new Cre(K,ie,j,ce,ue,I,se),ge=new kte(p),Fe=new Pte(p),nt=new q$(K,ue),N=new Mte(K,ie,nt,ue),We=new Ote(K,nt,se,N),Te=new Yte(K,We,nt,se),ve=new zte(K,ue,Be),J=new Dte(ce),Qe=new ore(p,ge,Fe,ie,ue,N,J),Ge=new Ure(p,ce),qe=new Are,O=new pre(ie,ue),de=new Rte(p,ge,Fe,j,Te,c,o),ae=new Bre(p,Te,ue),$=new Sre(K,se,ue,j),L=new Tte(K,ie,se,ue),_=new Gte(K,ie,se,ue),se.programs=Qe.programs,p.capabilities=ue,p.extensions=ie,p.properties=ce,p.renderLists=qe,p.shadowMap=ae,p.state=j,p.info=se}ee();const te=new Ere(p,K);this.xr=te,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const q=ie.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=ie.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(q){q!==void 0&&(Z=q,this.setSize(S,R,!1))},this.getSize=function(q){return q.set(S,R)},this.setSize=function(q,le,he){if(te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}S=q,R=le,e.width=Math.floor(q*Z),e.height=Math.floor(le*Z),he!==!1&&(e.style.width=q+"px",e.style.height=le+"px"),this.setViewport(0,0,q,le)},this.getDrawingBufferSize=function(q){return q.set(S*Z,R*Z).floor()},this.setDrawingBufferSize=function(q,le,he){S=q,R=le,Z=he,e.width=Math.floor(q*he),e.height=Math.floor(le*he),this.setViewport(0,0,q,le)},this.getCurrentViewport=function(q){return q.copy(b)},this.getViewport=function(q){return q.copy(B)},this.setViewport=function(q,le,he,fe){q.isVector4?B.set(q.x,q.y,q.z,q.w):B.set(q,le,he,fe),j.viewport(b.copy(B).multiplyScalar(Z).floor())},this.getScissor=function(q){return q.copy(E)},this.setScissor=function(q,le,he,fe){q.isVector4?E.set(q.x,q.y,q.z,q.w):E.set(q,le,he,fe),j.scissor(F.copy(E).multiplyScalar(Z).floor())},this.getScissorTest=function(){return M},this.setScissorTest=function(q){j.setScissorTest(M=q)},this.setOpaqueSort=function(q){Y=q},this.setTransparentSort=function(q){Q=q},this.getClearColor=function(q){return q.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(q=!0,le=!0,he=!0){let fe=0;q&&(fe|=16384),le&&(fe|=256),he&&(fe|=1024),K.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",we,!1),e.removeEventListener("webglcontextrestored",Ce,!1),e.removeEventListener("webglcontextcreationerror",Ee,!1),qe.dispose(),O.dispose(),ce.dispose(),ge.dispose(),Fe.dispose(),Te.dispose(),N.dispose(),$.dispose(),Qe.dispose(),te.dispose(),te.removeEventListener("sessionstart",Ue),te.removeEventListener("sessionend",Je),G&&(G.dispose(),G=null),$e.stop()};function we(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const q=se.autoReset,le=ae.enabled,he=ae.autoUpdate,fe=ae.needsUpdate,pe=ae.type;ee(),se.autoReset=q,ae.enabled=le,ae.autoUpdate=he,ae.needsUpdate=fe,ae.type=pe}function Ee(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function Ve(q){const le=q.target;le.removeEventListener("dispose",Ve),_e(le)}function _e(q){re(q),ce.remove(q)}function re(q){const le=ce.get(q).programs;le!==void 0&&(le.forEach(function(he){Qe.releaseProgram(he)}),q.isShaderMaterial&&Qe.releaseShaderCache(q))}this.renderBufferDirect=function(q,le,he,fe,pe,De){le===null&&(le=oe);const ot=pe.isMesh&&pe.matrixWorld.determinant()<0,Ye=co(q,le,he,fe,pe);j.setMaterial(fe,ot);let He=he.index;const vt=he.attributes.position;if(He===null){if(vt===void 0||vt.count===0)return}else if(He.count===0)return;let ft=1;fe.wireframe===!0&&(He=We.getWireframeAttribute(he),ft=2),N.setup(pe,fe,Ye,he,He);let gt,Jt=L;He!==null&&(gt=nt.get(He),Jt=_,Jt.setIndex(gt));const kr=He!==null?He.count:vt.count,Wo=he.drawRange.start*ft,Oo=he.drawRange.count*ft,mi=De!==null?De.start*ft:0,Dt=De!==null?De.count*ft:1/0,Go=Math.max(Wo,mi),mn=Math.min(kr,Wo+Oo,mi+Dt)-1,Vr=Math.max(0,mn-Go+1);if(Vr!==0){if(pe.isMesh)fe.wireframe===!0?(j.setLineWidth(fe.wireframeLinewidth*k()),Jt.setMode(1)):Jt.setMode(4);else if(pe.isLine){let ws=fe.linewidth;ws===void 0&&(ws=1),j.setLineWidth(ws*k()),pe.isLineSegments?Jt.setMode(1):pe.isLineLoop?Jt.setMode(2):Jt.setMode(3)}else pe.isPoints?Jt.setMode(0):pe.isSprite&&Jt.setMode(4);if(pe.isInstancedMesh)Jt.renderInstances(Go,Vr,pe.count);else if(he.isInstancedBufferGeometry){const ws=Math.min(he.instanceCount,he._maxInstanceCount);Jt.renderInstances(Go,Vr,ws)}else Jt.render(Go,Vr)}},this.compile=function(q,le){function he(fe,pe,De){fe.transparent===!0&&fe.side===Ui?(fe.side=di,fe.needsUpdate=!0,mt(fe,pe,De),fe.side=Sa,fe.needsUpdate=!0,mt(fe,pe,De),fe.side=Ui):mt(fe,pe,De)}f=O.get(q),f.init(),h.push(f),q.traverseVisible(function(fe){fe.isLight&&fe.layers.test(le.layers)&&(f.pushLight(fe),fe.castShadow&&f.pushShadow(fe))}),f.setupLights(p.physicallyCorrectLights),q.traverse(function(fe){const pe=fe.material;if(pe)if(Array.isArray(pe))for(let De=0;De<pe.length;De++){const ot=pe[De];he(ot,q,fe)}else he(pe,q,fe)}),h.pop(),f=null};let ye=null;function be(q){ye&&ye(q)}function Ue(){$e.stop()}function Je(){$e.start()}const $e=new tZ;$e.setAnimationLoop(be),typeof self<"u"&&$e.setContext(self),this.setAnimationLoop=function(q){ye=q,te.setAnimationLoop(q),q===null?$e.stop():$e.start()},te.addEventListener("sessionstart",Ue),te.addEventListener("sessionend",Je),this.render=function(q,le){if(le!==void 0&&le.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),le.parent===null&&le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),te.enabled===!0&&te.isPresenting===!0&&(te.cameraAutoUpdate===!0&&te.updateCamera(le),le=te.getCamera()),q.isScene===!0&&q.onBeforeRender(p,q,le,y),f=O.get(q,h.length),f.init(),h.push(f),P.multiplyMatrices(le.projectionMatrix,le.matrixWorldInverse),D.setFromProjectionMatrix(P),V=this.localClippingEnabled,T=J.init(this.clippingPlanes,V,le),u=qe.get(q,d.length),u.init(),d.push(u),ct(q,le,0,p.sortObjects),u.finish(),p.sortObjects===!0&&u.sort(Y,Q),T===!0&&J.beginShadows();const he=f.state.shadowsArray;if(ae.render(he,q,le),T===!0&&J.endShadows(),this.info.autoReset===!0&&this.info.reset(),de.render(u,q),f.setupLights(p.physicallyCorrectLights),le.isArrayCamera){const fe=le.cameras;for(let pe=0,De=fe.length;pe<De;pe++){const ot=fe[pe];ln(u,q,ot,ot.viewport)}}else ln(u,q,le);y!==null&&(Be.updateMultisampleRenderTarget(y),Be.updateRenderTargetMipmap(y)),q.isScene===!0&&q.onAfterRender(p,q,le),N.resetDefaultState(),w=-1,C=null,h.pop(),h.length>0?f=h[h.length-1]:f=null,d.pop(),d.length>0?u=d[d.length-1]:u=null};function ct(q,le,he,fe){if(q.visible===!1)return;if(q.layers.test(le.layers)){if(q.isGroup)he=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(le);else if(q.isLight)f.pushLight(q),q.castShadow&&f.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||D.intersectsSprite(q)){fe&&H.setFromMatrixPosition(q.matrixWorld).applyMatrix4(P);const ot=Te.update(q),Ye=q.material;Ye.visible&&u.push(q,ot,Ye,he,H.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(q.isSkinnedMesh&&q.skeleton.frame!==se.render.frame&&(q.skeleton.update(),q.skeleton.frame=se.render.frame),!q.frustumCulled||D.intersectsObject(q))){fe&&H.setFromMatrixPosition(q.matrixWorld).applyMatrix4(P);const ot=Te.update(q),Ye=q.material;if(Array.isArray(Ye)){const He=ot.groups;for(let vt=0,ft=He.length;vt<ft;vt++){const gt=He[vt],Jt=Ye[gt.materialIndex];Jt&&Jt.visible&&u.push(q,ot,Jt,he,H.z,gt)}}else Ye.visible&&u.push(q,ot,Ye,he,H.z,null)}}const De=q.children;for(let ot=0,Ye=De.length;ot<Ye;ot++)ct(De[ot],le,he,fe)}function ln(q,le,he,fe){const pe=q.opaque,De=q.transmissive,ot=q.transparent;f.setupLightsView(he),De.length>0&&xt(pe,le,he),fe&&j.viewport(b.copy(fe)),pe.length>0&&it(pe,le,he),De.length>0&&it(De,le,he),ot.length>0&&it(ot,le,he),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1)}function xt(q,le,he){const fe=ue.isWebGL2;G===null&&(G=new $A(1,1,{generateMipmaps:!0,type:ie.has("EXT_color_buffer_half_float")?bm:jA,minFilter:Uu,samples:fe&&s===!0?4:0})),p.getDrawingBufferSize(U),fe?G.setSize(U.x,U.y):G.setSize(pw(U.x),pw(U.y));const pe=p.getRenderTarget();p.setRenderTarget(G),p.clear();const De=p.toneMapping;p.toneMapping=bl,it(q,le,he),p.toneMapping=De,Be.updateMultisampleRenderTarget(G),Be.updateRenderTargetMipmap(G),p.setRenderTarget(pe)}function it(q,le,he){const fe=le.isScene===!0?le.overrideMaterial:null;for(let pe=0,De=q.length;pe<De;pe++){const ot=q[pe],Ye=ot.object,He=ot.geometry,vt=fe===null?ot.material:fe,ft=ot.group;Ye.layers.test(he.layers)&&ir(Ye,le,he,He,vt,ft)}}function ir(q,le,he,fe,pe,De){q.onBeforeRender(p,le,he,fe,pe,De),q.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),pe.onBeforeRender(p,le,he,fe,q,De),pe.transparent===!0&&pe.side===Ui?(pe.side=di,pe.needsUpdate=!0,p.renderBufferDirect(he,le,fe,pe,q,De),pe.side=Sa,pe.needsUpdate=!0,p.renderBufferDirect(he,le,fe,pe,q,De),pe.side=Ui):p.renderBufferDirect(he,le,fe,pe,q,De),q.onAfterRender(p,le,he,fe,pe,De)}function mt(q,le,he){le.isScene!==!0&&(le=oe);const fe=ce.get(q),pe=f.state.lights,De=f.state.shadowsArray,ot=pe.state.version,Ye=Qe.getParameters(q,pe.state,De,le,he),He=Qe.getProgramCacheKey(Ye);let vt=fe.programs;fe.environment=q.isMeshStandardMaterial?le.environment:null,fe.fog=le.fog,fe.envMap=(q.isMeshStandardMaterial?Fe:ge).get(q.envMap||fe.environment),vt===void 0&&(q.addEventListener("dispose",Ve),vt=new Map,fe.programs=vt);let ft=vt.get(He);if(ft!==void 0){if(fe.currentProgram===ft&&fe.lightsStateVersion===ot)return qt(q,Ye),ft}else Ye.uniforms=Qe.getUniforms(q),q.onBuild(he,Ye,p),q.onBeforeCompile(Ye,p),ft=Qe.acquireProgram(Ye,He),vt.set(He,ft),fe.uniforms=Ye.uniforms;const gt=fe.uniforms;(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(gt.clippingPlanes=J.uniform),qt(q,Ye),fe.needsLights=en(q),fe.lightsStateVersion=ot,fe.needsLights&&(gt.ambientLightColor.value=pe.state.ambient,gt.lightProbe.value=pe.state.probe,gt.directionalLights.value=pe.state.directional,gt.directionalLightShadows.value=pe.state.directionalShadow,gt.spotLights.value=pe.state.spot,gt.spotLightShadows.value=pe.state.spotShadow,gt.rectAreaLights.value=pe.state.rectArea,gt.ltc_1.value=pe.state.rectAreaLTC1,gt.ltc_2.value=pe.state.rectAreaLTC2,gt.pointLights.value=pe.state.point,gt.pointLightShadows.value=pe.state.pointShadow,gt.hemisphereLights.value=pe.state.hemi,gt.directionalShadowMap.value=pe.state.directionalShadowMap,gt.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,gt.spotShadowMap.value=pe.state.spotShadowMap,gt.spotLightMatrix.value=pe.state.spotLightMatrix,gt.spotLightMap.value=pe.state.spotLightMap,gt.pointShadowMap.value=pe.state.pointShadowMap,gt.pointShadowMatrix.value=pe.state.pointShadowMatrix);const Jt=ft.getUniforms(),kr=tB.seqWithValue(Jt.seq,gt);return fe.currentProgram=ft,fe.uniformsList=kr,ft}function qt(q,le){const he=ce.get(q);he.outputEncoding=le.outputEncoding,he.instancing=le.instancing,he.skinning=le.skinning,he.morphTargets=le.morphTargets,he.morphNormals=le.morphNormals,he.morphColors=le.morphColors,he.morphTargetsCount=le.morphTargetsCount,he.numClippingPlanes=le.numClippingPlanes,he.numIntersection=le.numClipIntersection,he.vertexAlphas=le.vertexAlphas,he.vertexTangents=le.vertexTangents,he.toneMapping=le.toneMapping}function co(q,le,he,fe,pe){le.isScene!==!0&&(le=oe),Be.resetTextureUnits();const De=le.fog,ot=fe.isMeshStandardMaterial?le.environment:null,Ye=y===null?p.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:no,He=(fe.isMeshStandardMaterial?Fe:ge).get(fe.envMap||ot),vt=fe.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,ft=!!fe.normalMap&&!!he.attributes.tangent,gt=!!he.morphAttributes.position,Jt=!!he.morphAttributes.normal,kr=!!he.morphAttributes.color,Wo=fe.toneMapped?p.toneMapping:bl,Oo=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,mi=Oo!==void 0?Oo.length:0,Dt=ce.get(fe),Go=f.state.lights;if(T===!0&&(V===!0||q!==C)){const Ir=q===C&&fe.id===w;J.setState(fe,q,Ir)}let mn=!1;fe.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==Go.state.version||Dt.outputEncoding!==Ye||pe.isInstancedMesh&&Dt.instancing===!1||!pe.isInstancedMesh&&Dt.instancing===!0||pe.isSkinnedMesh&&Dt.skinning===!1||!pe.isSkinnedMesh&&Dt.skinning===!0||Dt.envMap!==He||fe.fog===!0&&Dt.fog!==De||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==J.numPlanes||Dt.numIntersection!==J.numIntersection)||Dt.vertexAlphas!==vt||Dt.vertexTangents!==ft||Dt.morphTargets!==gt||Dt.morphNormals!==Jt||Dt.morphColors!==kr||Dt.toneMapping!==Wo||ue.isWebGL2===!0&&Dt.morphTargetsCount!==mi)&&(mn=!0):(mn=!0,Dt.__version=fe.version);let Vr=Dt.currentProgram;mn===!0&&(Vr=mt(fe,le,pe));let ws=!1,Wa=!1,gc=!1;const sr=Vr.getUniforms(),uo=Dt.uniforms;if(j.useProgram(Vr.program)&&(ws=!0,Wa=!0,gc=!0),fe.id!==w&&(w=fe.id,Wa=!0),ws||C!==q){if(sr.setValue(K,"projectionMatrix",q.projectionMatrix),ue.logarithmicDepthBuffer&&sr.setValue(K,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),C!==q&&(C=q,Wa=!0,gc=!0),fe.isShaderMaterial||fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshStandardMaterial||fe.envMap){const Ir=sr.map.cameraPosition;Ir!==void 0&&Ir.setValue(K,H.setFromMatrixPosition(q.matrixWorld))}(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&sr.setValue(K,"isOrthographic",q.isOrthographicCamera===!0),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial||fe.isShadowMaterial||pe.isSkinnedMesh)&&sr.setValue(K,"viewMatrix",q.matrixWorldInverse)}if(pe.isSkinnedMesh){sr.setOptional(K,pe,"bindMatrix"),sr.setOptional(K,pe,"bindMatrixInverse");const Ir=pe.skeleton;Ir&&(ue.floatVertexTextures?(Ir.boneTexture===null&&Ir.computeBoneTexture(),sr.setValue(K,"boneTexture",Ir.boneTexture,Be),sr.setValue(K,"boneTextureSize",Ir.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const mc=he.morphAttributes;if((mc.position!==void 0||mc.normal!==void 0||mc.color!==void 0&&ue.isWebGL2===!0)&&ve.update(pe,he,fe,Vr),(Wa||Dt.receiveShadow!==pe.receiveShadow)&&(Dt.receiveShadow=pe.receiveShadow,sr.setValue(K,"receiveShadow",pe.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(uo.envMap.value=He,uo.flipEnvMap.value=He.isCubeTexture&&He.isRenderTargetTexture===!1?-1:1),Wa&&(sr.setValue(K,"toneMappingExposure",p.toneMappingExposure),Dt.needsLights&&zt(uo,gc),De&&fe.fog===!0&&Ge.refreshFogUniforms(uo,De),Ge.refreshMaterialUniforms(uo,fe,Z,R,G),tB.upload(K,Dt.uniformsList,uo,Be)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(tB.upload(K,Dt.uniformsList,uo,Be),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&sr.setValue(K,"center",pe.center),sr.setValue(K,"modelViewMatrix",pe.modelViewMatrix),sr.setValue(K,"normalMatrix",pe.normalMatrix),sr.setValue(K,"modelMatrix",pe.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const Ir=fe.uniformsGroups;for(let kb=0,sz=Ir.length;kb<sz;kb++)if(ue.isWebGL2){const eR=Ir[kb];$.update(eR,Vr),$.bind(eR,Vr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Vr}function zt(q,le){q.ambientLightColor.needsUpdate=le,q.lightProbe.needsUpdate=le,q.directionalLights.needsUpdate=le,q.directionalLightShadows.needsUpdate=le,q.pointLights.needsUpdate=le,q.pointLightShadows.needsUpdate=le,q.spotLights.needsUpdate=le,q.spotLightShadows.needsUpdate=le,q.rectAreaLights.needsUpdate=le,q.hemisphereLights.needsUpdate=le}function en(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(q,le,he){ce.get(q.texture).__webglTexture=le,ce.get(q.depthTexture).__webglTexture=he;const fe=ce.get(q);fe.__hasExternalTextures=!0,fe.__hasExternalTextures&&(fe.__autoAllocateDepthBuffer=he===void 0,fe.__autoAllocateDepthBuffer||ie.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(q,le){const he=ce.get(q);he.__webglFramebuffer=le,he.__useDefaultFramebuffer=le===void 0},this.setRenderTarget=function(q,le=0,he=0){y=q,g=le,v=he;let fe=!0,pe=null,De=!1,ot=!1;if(q){const He=ce.get(q);He.__useDefaultFramebuffer!==void 0?(j.bindFramebuffer(36160,null),fe=!1):He.__webglFramebuffer===void 0?Be.setupRenderTarget(q):He.__hasExternalTextures&&Be.rebindTextures(q,ce.get(q.texture).__webglTexture,ce.get(q.depthTexture).__webglTexture);const vt=q.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(ot=!0);const ft=ce.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(pe=ft[le],De=!0):ue.isWebGL2&&q.samples>0&&Be.useMultisampledRTT(q)===!1?pe=ce.get(q).__webglMultisampledFramebuffer:pe=ft,b.copy(q.viewport),F.copy(q.scissor),x=q.scissorTest}else b.copy(B).multiplyScalar(Z).floor(),F.copy(E).multiplyScalar(Z).floor(),x=M;if(j.bindFramebuffer(36160,pe)&&ue.drawBuffers&&fe&&j.drawBuffers(q,pe),j.viewport(b),j.scissor(F),j.setScissorTest(x),De){const He=ce.get(q.texture);K.framebufferTexture2D(36160,36064,34069+le,He.__webglTexture,he)}else if(ot){const He=ce.get(q.texture),vt=le||0;K.framebufferTextureLayer(36160,36064,He.__webglTexture,he||0,vt)}w=-1},this.readRenderTargetPixels=function(q,le,he,fe,pe,De,ot){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=ce.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ot!==void 0&&(Ye=Ye[ot]),Ye){j.bindFramebuffer(36160,Ye);try{const He=q.texture,vt=He.format,ft=He.type;if(vt!==Fi&&I.convert(vt)!==K.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=ft===bm&&(ie.has("EXT_color_buffer_half_float")||ue.isWebGL2&&ie.has("EXT_color_buffer_float"));if(ft!==jA&&I.convert(ft)!==K.getParameter(35738)&&!(ft===IA&&(ue.isWebGL2||ie.has("OES_texture_float")||ie.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}le>=0&&le<=q.width-fe&&he>=0&&he<=q.height-pe&&K.readPixels(le,he,fe,pe,I.convert(vt),I.convert(ft),De)}finally{const He=y!==null?ce.get(y).__webglFramebuffer:null;j.bindFramebuffer(36160,He)}}},this.copyFramebufferToTexture=function(q,le,he=0){const fe=Math.pow(2,-he),pe=Math.floor(le.image.width*fe),De=Math.floor(le.image.height*fe);Be.setTexture2D(le,0),K.copyTexSubImage2D(3553,he,0,0,q.x,q.y,pe,De),j.unbindTexture()},this.copyTextureToTexture=function(q,le,he,fe=0){const pe=le.image.width,De=le.image.height,ot=I.convert(he.format),Ye=I.convert(he.type);Be.setTexture2D(he,0),K.pixelStorei(37440,he.flipY),K.pixelStorei(37441,he.premultiplyAlpha),K.pixelStorei(3317,he.unpackAlignment),le.isDataTexture?K.texSubImage2D(3553,fe,q.x,q.y,pe,De,ot,Ye,le.image.data):le.isCompressedTexture?K.compressedTexSubImage2D(3553,fe,q.x,q.y,le.mipmaps[0].width,le.mipmaps[0].height,ot,le.mipmaps[0].data):K.texSubImage2D(3553,fe,q.x,q.y,ot,Ye,le.image),fe===0&&he.generateMipmaps&&K.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(q,le,he,fe,pe=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const De=q.max.x-q.min.x+1,ot=q.max.y-q.min.y+1,Ye=q.max.z-q.min.z+1,He=I.convert(fe.format),vt=I.convert(fe.type);let ft;if(fe.isData3DTexture)Be.setTexture3D(fe,0),ft=32879;else if(fe.isDataArrayTexture)Be.setTexture2DArray(fe,0),ft=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}K.pixelStorei(37440,fe.flipY),K.pixelStorei(37441,fe.premultiplyAlpha),K.pixelStorei(3317,fe.unpackAlignment);const gt=K.getParameter(3314),Jt=K.getParameter(32878),kr=K.getParameter(3316),Wo=K.getParameter(3315),Oo=K.getParameter(32877),mi=he.isCompressedTexture?he.mipmaps[0]:he.image;K.pixelStorei(3314,mi.width),K.pixelStorei(32878,mi.height),K.pixelStorei(3316,q.min.x),K.pixelStorei(3315,q.min.y),K.pixelStorei(32877,q.min.z),he.isDataTexture||he.isData3DTexture?K.texSubImage3D(ft,pe,le.x,le.y,le.z,De,ot,Ye,He,vt,mi.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),K.compressedTexSubImage3D(ft,pe,le.x,le.y,le.z,De,ot,Ye,He,mi.data)):K.texSubImage3D(ft,pe,le.x,le.y,le.z,De,ot,Ye,He,vt,mi),K.pixelStorei(3314,gt),K.pixelStorei(32878,Jt),K.pixelStorei(3316,kr),K.pixelStorei(3315,Wo),K.pixelStorei(32877,Oo),pe===0&&fe.generateMipmaps&&K.generateMipmap(ft),j.unbindTexture()},this.initTexture=function(q){q.isCubeTexture?Be.setTextureCube(q,0):q.isData3DTexture?Be.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?Be.setTexture2DArray(q,0):Be.setTexture2D(q,0),j.unbindTexture()},this.resetState=function(){g=0,v=0,y=null,j.reset(),N.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Qre extends HC{}Qre.prototype.isWebGL1Renderer=!0;class gw extends Nt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Rre{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=uE,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=No()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ti=new X;class d_{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ti.fromBufferAttribute(this,t),ti.applyMatrix4(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ti.fromBufferAttribute(this,t),ti.applyNormalMatrix(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ti.fromBufferAttribute(this,t),ti.transformDirection(e),this.setXYZ(t,ti.x,ti.y,ti.z);return this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=yl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=yl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=yl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=yl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),r=on(r,this.array),i=on(i,this.array),s=on(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new At(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new d_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const VT=new X,LT=new Pt,PT=new Pt,Mre=new X,WT=new Le;class Nh extends Vn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Le,this.bindMatrixInverse=new Le}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Pt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;LT.fromBufferAttribute(i.attributes.skinIndex,e),PT.fromBufferAttribute(i.attributes.skinWeight,e),VT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=PT.getComponent(s);if(o!==0){const a=LT.getComponent(s);WT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Mre.copy(VT).applyMatrix4(WT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fm extends Nt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class oZ extends nr{constructor(e=null,t=1,r=1,i,s,o,a,l,A=Br,c=Br,u,f){super(null,o,a,l,A,c,i,s,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OT=new Le,Tre=new Le;class dc{constructor(e=[],t=[]){this.uuid=No(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Le)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Le;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Tre;OT.multiplyMatrices(a,t[s]),OT.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=HG(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new oZ(t,e,e,Fi,IA);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Fm),this.bones.push(o),this.boneInverses.push(new Le().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class mw extends At{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const GT=new Le,ZT=new Le,bv=[],Nre=new Le,Fp=new Vn;class zC extends Vn{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new mw(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1;for(let i=0;i<r;i++)this.setMatrixAt(i,Nre)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Fp.geometry=this.geometry,Fp.material=this.material,Fp.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,GT),ZT.multiplyMatrices(r,GT),Fp.matrixWorld=ZT,Fp.raycast(e,bv);for(let o=0,a=bv.length;o<a;o++){const l=bv[o];l.instanceId=s,l.object=this,t.push(l)}bv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new mw(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Pl extends zs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Re(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const JT=new X,HT=new X,zT=new Le,vI=new o0,xv=new Su;class Dh extends Nt{constructor(e=new $t,t=new Pl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)JT.fromBufferAttribute(t,i-1),HT.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=JT.distanceTo(HT);e.setAttribute("lineDistance",new bn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xv.copy(r.boundingSphere),xv.applyMatrix4(i),xv.radius+=s,e.ray.intersectsSphere(xv)===!1)return;zT.copy(i).invert(),vI.copy(e.ray).applyMatrix4(zT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=new X,c=new X,u=new X,f=new X,d=this.isLineSegments?2:1,h=r.index,m=r.attributes.position;if(h!==null){const g=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let y=g,w=v-1;y<w;y+=d){const C=h.getX(y),b=h.getX(y+1);if(A.fromBufferAttribute(m,C),c.fromBufferAttribute(m,b),vI.distanceSqToSegment(A,c,f,u)>l)continue;f.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(f);x<e.near||x>e.far||t.push({distance:x,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let y=g,w=v-1;y<w;y+=d){if(A.fromBufferAttribute(m,y),c.fromBufferAttribute(m,y+1),vI.distanceSqToSegment(A,c,f,u)>l)continue;f.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const YT=new X,XT=new X;class A0 extends Dh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)YT.fromBufferAttribute(t,i),XT.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+YT.distanceTo(XT);e.setAttribute("lineDistance",new bn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Dre extends Dh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class aZ extends zs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Re(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const KT=new Le,pE=new o0,Iv=new Su,Fv=new X;class kre extends Nt{constructor(e=new $t,t=new aZ){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Iv.copy(r.boundingSphere),Iv.applyMatrix4(i),Iv.radius+=s,e.ray.intersectsSphere(Iv)===!1)return;KT.copy(i).invert(),pE.copy(e.ray).applyMatrix4(KT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,A=r.index,u=r.attributes.position;if(A!==null){const f=Math.max(0,o.start),d=Math.min(A.count,o.start+o.count);for(let h=f,p=d;h<p;h++){const m=A.getX(h);Fv.fromBufferAttribute(u,m),jT(Fv,m,l,i,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let h=f,p=d;h<p;h++)Fv.fromBufferAttribute(u,h),jT(Fv,h,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function jT(n,e,t,r,i,s,o){const a=pE.distanceSqToPoint(n);if(a<t){const l=new X;pE.closestPointToPoint(n,l),l.applyMatrix4(r);const A=i.ray.origin.distanceTo(l);if(A<i.near||A>i.far)return;s.push({distance:A,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Vre{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,A;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),A=r[i]-o,A<0)a=i+1;else if(A>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],f=r[i+1]-c,d=(o-c)/f;return(i+d)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Oe:new X);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new X,i=[],s=[],o=[],a=new X,l=new Le;for(let d=0;d<=e;d++){const h=d/e;i[d]=this.getTangentAt(h,new X)}s[0]=new X,o[0]=new X;let A=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=A&&(A=c,r.set(1,0,0)),u<=A&&(A=u,r.set(0,1,0)),f<=A&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const h=Math.acos(cr(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,h))}o[d].crossVectors(i[d],s[d])}if(t===!0){let d=Math.acos(cr(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let h=1;h<=e;h++)s[h].applyMatrix4(l.makeRotationAxis(i[h],d*h)),o[h].crossVectors(i[h],s[h])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class YC extends $t{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const A=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],f=[],d=[];let h=0;const p=[],m=r/2;let g=0;v(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new bn(u,3)),this.setAttribute("normal",new bn(f,3)),this.setAttribute("uv",new bn(d,2));function v(){const w=new X,C=new X;let b=0;const F=(t-e)/r;for(let x=0;x<=s;x++){const S=[],R=x/s,Z=R*(t-e)+e;for(let Y=0;Y<=i;Y++){const Q=Y/i,B=Q*l+a,E=Math.sin(B),M=Math.cos(B);C.x=Z*E,C.y=-R*r+m,C.z=Z*M,u.push(C.x,C.y,C.z),w.set(E,F,M).normalize(),f.push(w.x,w.y,w.z),d.push(Q,1-R),S.push(h++)}p.push(S)}for(let x=0;x<i;x++)for(let S=0;S<s;S++){const R=p[S][x],Z=p[S+1][x],Y=p[S+1][x+1],Q=p[S][x+1];c.push(R,Z,Q),c.push(Z,Y,Q),b+=6}A.addGroup(g,b,0),g+=b}function y(w){const C=h,b=new Oe,F=new X;let x=0;const S=w===!0?e:t,R=w===!0?1:-1;for(let Y=1;Y<=i;Y++)u.push(0,m*R,0),f.push(0,R,0),d.push(.5,.5),h++;const Z=h;for(let Y=0;Y<=i;Y++){const B=Y/i*l+a,E=Math.cos(B),M=Math.sin(B);F.x=S*M,F.y=m*R,F.z=S*E,u.push(F.x,F.y,F.z),f.push(0,R,0),b.x=E*.5+.5,b.y=M*.5*R+.5,d.push(b.x,b.y),h++}for(let Y=0;Y<i;Y++){const Q=C+Y,B=Z+Y;w===!0?c.push(B,B+1,Q):c.push(B+1,B,Q),x+=3}A.addGroup(g,x,w===!0?1:2),g+=x}}static fromJSON(e){return new YC(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class h_ extends $t{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let A=0;const c=[],u=new X,f=new X,d=[],h=[],p=[],m=[];for(let g=0;g<=r;g++){const v=[],y=g/r;let w=0;g==0&&o==0?w=.5/t:g==r&&l==Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const b=C/t;u.x=-e*Math.cos(i+b*s)*Math.sin(o+y*a),u.y=e*Math.cos(o+y*a),u.z=e*Math.sin(i+b*s)*Math.sin(o+y*a),h.push(u.x,u.y,u.z),f.copy(u).normalize(),p.push(f.x,f.y,f.z),m.push(b+w,1-y),v.push(A++)}c.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){const y=c[g][v+1],w=c[g][v],C=c[g+1][v],b=c[g+1][v+1];(g!==0||o>0)&&d.push(y,w,b),(g!==r-1||l<Math.PI)&&d.push(w,C,b)}this.setIndex(d),this.setAttribute("position",new bn(h,3)),this.setAttribute("normal",new bn(p,3)),this.setAttribute("uv",new bn(m,2))}static fromJSON(e){return new h_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class gu extends zs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Re(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _u extends gu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return cr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Re(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Re(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Re(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class yI extends zs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Re(16777215),this.specular=new Re(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=OC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lre extends zs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Re(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=OC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function tA(n,e,t){return lZ(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Ev(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function lZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Pre(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function $T(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function AZ(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}class c0{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Wre extends c0{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:md,endingEnd:md}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case vd:s=e,a=2*t-r;break;case hw:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case vd:o=e,l=2*r-t;break;case hw:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const A=(r-t)*.5,c=this.valueSize;this._weightPrev=A/(t-a),this._weightNext=A/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(r-t)/(i-t),p=h*h,m=p*h,g=-f*m+2*f*p-f*h,v=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*h+1,y=(-1-d)*m+(1.5+d)*p+.5*h,w=d*m-d*p;for(let C=0;C!==a;++C)s[C]=g*o[c+C]+v*o[A+C]+y*o[l+C]+w*o[u+C];return s}}class cZ extends c0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,A=l-a,c=(r-t)/(i-t),u=1-c;for(let f=0;f!==a;++f)s[f]=o[A+f]*u+o[l+f]*c;return s}}class Ore extends c0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Na{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ev(t,this.TimeBufferType),this.values=Ev(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Ev(e.times,Array),values:Ev(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Ore(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Wre(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ph:t=this.InterpolantFactoryMethodDiscrete;break;case pu:t=this.InterpolantFactoryMethodLinear;break;case Jx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ph;case this.InterpolantFactoryMethodLinear:return pu;case this.InterpolantFactoryMethodSmooth:return Jx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=tA(r,s,o),this.values=tA(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&lZ(i))for(let a=0,l=i.length;a!==l;++a){const A=i[a];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,A),e=!1;break}}return e}optimize(){const e=tA(this.times),t=tA(this.values),r=this.getValueSize(),i=this.getInterpolation()===Jx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const A=e[a],c=e[a+1];if(A!==c&&(a!==1||A!==e[0]))if(i)l=!0;else{const u=a*r,f=u-r,d=u+r;for(let h=0;h!==r;++h){const p=t[u+h];if(p!==t[f+h]||p!==t[d+h]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*r,f=o*r;for(let d=0;d!==r;++d)t[f+d]=t[u+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,A=0;A!==r;++A)t[l+A]=t[a+A];++o}return o!==e.length?(this.times=tA(e,0,o),this.values=tA(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=tA(this.times,0),t=tA(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Na.prototype.TimeBufferType=Float32Array;Na.prototype.ValueBufferType=Float32Array;Na.prototype.DefaultInterpolation=pu;class kh extends Na{}kh.prototype.ValueTypeName="bool";kh.prototype.ValueBufferType=Array;kh.prototype.DefaultInterpolation=ph;kh.prototype.InterpolantFactoryMethodLinear=void 0;kh.prototype.InterpolantFactoryMethodSmooth=void 0;class uZ extends Na{}uZ.prototype.ValueTypeName="color";class mh extends Na{}mh.prototype.ValueTypeName="number";class Gre extends c0{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let A=e*a;for(let c=A+a;A!==c;A+=4)et.slerpFlat(s,0,o,A-a,o,A,l);return s}}class _a extends Na{InterpolantFactoryMethodLinear(e){return new Gre(this.times,this.values,this.getValueSize(),e)}}_a.prototype.ValueTypeName="quaternion";_a.prototype.DefaultInterpolation=pu;_a.prototype.InterpolantFactoryMethodSmooth=void 0;class Vh extends Na{}Vh.prototype.ValueTypeName="string";Vh.prototype.ValueBufferType=Array;Vh.prototype.DefaultInterpolation=ph;Vh.prototype.InterpolantFactoryMethodLinear=void 0;Vh.prototype.InterpolantFactoryMethodSmooth=void 0;class qA extends Na{}qA.prototype.ValueTypeName="vector";class mu{constructor(e,t=-1,r,i=a_){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=No(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Jre(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Na.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],A=[];l.push((a+s-1)%s,a,(a+1)%s),A.push(0,1,0);const c=Pre(l);l=$T(l,1,c),A=$T(A,1,c),!i&&l[0]===0&&(l.push(s),A.push(A[0])),o.push(new mh(".morphTargetInfluences["+t[a].name+"]",l,A).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const A=e[a],c=A.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(A)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,f,d,h,p){if(d.length!==0){const m=[],g=[];AZ(d,m,g,h),m.length!==0&&p.push(new u(f,m,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const A=e.hierarchy||[];for(let u=0;u<A.length;u++){const f=A[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let h;for(h=0;h<f.length;h++)if(f[h].morphTargets)for(let p=0;p<f[h].morphTargets.length;p++)d[f[h].morphTargets[p]]=-1;for(const p in d){const m=[],g=[];for(let v=0;v!==f[h].morphTargets.length;++v){const y=f[h];m.push(y.time),g.push(y.morphTarget===p?1:0)}i.push(new mh(".morphTargetInfluence["+p+"]",m,g))}l=d.length*o}else{const d=".bones["+t[u].name+"]";r(qA,d+".position",f,"pos",i),r(_a,d+".quaternion",f,"rot",i),r(qA,d+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Zre(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mh;case"vector":case"vector2":case"vector3":case"vector4":return qA;case"color":return uZ;case"quaternion":return _a;case"bool":case"boolean":return kh;case"string":return Vh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Jre(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Zre(n.type);if(n.times===void 0){const t=[],r=[];AZ(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const vh={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class fZ{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const A=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,u){return A.push(c,u),this},this.removeHandler=function(c){const u=A.indexOf(c);return u!==-1&&A.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=A.length;u<f;u+=2){const d=A[u],h=A[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return h}return null}}}const Hre=new fZ;class Lh{constructor(e){this.manager=e!==void 0?e:Hre,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const za={};class zre extends Error{constructor(e,t){super(e),this.response=t}}class p_ extends Lh{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=vh.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(za[e]!==void 0){za[e].push({onLoad:t,onProgress:r,onError:i});return}za[e]=[],za[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(A=>{if(A.status===200||A.status===0){if(A.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||A.body===void 0||A.body.getReader===void 0)return A;const c=za[e],u=A.body.getReader(),f=A.headers.get("Content-Length"),d=f?parseInt(f):0,h=d!==0;let p=0;const m=new ReadableStream({start(g){v();function v(){u.read().then(({done:y,value:w})=>{if(y)g.close();else{p+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:h,loaded:p,total:d});for(let b=0,F=c.length;b<F;b++){const x=c[b];x.onProgress&&x.onProgress(C)}g.enqueue(w),v()}})}}});return new Response(m)}else throw new zre(`fetch for "${A.url}" responded with ${A.status}: ${A.statusText}`,A)}).then(A=>{switch(l){case"arraybuffer":return A.arrayBuffer();case"blob":return A.blob();case"document":return A.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return A.json();default:if(a===void 0)return A.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),f=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(f);return A.arrayBuffer().then(h=>d.decode(h))}}}).then(A=>{vh.add(e,A);const c=za[e];delete za[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onLoad&&d.onLoad(A)}}).catch(A=>{const c=za[e];if(c===void 0)throw this.manager.itemError(e),A;delete za[e];for(let u=0,f=c.length;u<f;u++){const d=c[u];d.onError&&d.onError(A)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class dZ extends Lh{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Im("img");function l(){c(),vh.add(e,this),t&&t(this),s.manager.itemEnd(e)}function A(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",A,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",A,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Qu extends Lh{constructor(e){super(e)}load(e,t,r,i){const s=new nr,o=new dZ(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class XC extends Nt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Re(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const BI=new Le,qT=new X,eN=new X;class g_{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Oe(512,512),this.map=null,this.mapPass=null,this.matrix=new Le,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new u_,this._frameExtents=new Oe(1,1),this._viewportCount=1,this._viewports=[new Pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;qT.setFromMatrixPosition(e.matrixWorld),t.position.copy(qT),eN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eN),t.updateMatrixWorld(),BI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BI),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(BI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Yre extends g_{constructor(){super(new _r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=xm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hZ extends XC{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nt.DefaultUp),this.updateMatrix(),this.target=new Nt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Yre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tN=new Le,Ep=new X,wI=new X;class Xre extends g_{constructor(){super(new _r(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Oe(4,2),this._viewportCount=6,this._viewports=[new Pt(2,1,1,1),new Pt(0,1,1,1),new Pt(3,1,1,1),new Pt(1,1,1,1),new Pt(3,0,1,1),new Pt(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Ep.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ep),wI.copy(r.position),wI.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(wI),r.updateMatrixWorld(),i.makeTranslation(-Ep.x,-Ep.y,-Ep.z),tN.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tN)}}class gE extends XC{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Xre}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Kre extends g_{constructor(){super(new l0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class m_ extends XC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nt.DefaultUp),this.updateMatrix(),this.target=new Nt,this.shadow=new Kre}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pZ extends XC{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ca{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jre extends Lh{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=vh.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){vh.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class $re{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nN(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=nN();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function nN(){return(typeof performance>"u"?Date:performance).now()}class qre{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,A=t+t;l!==A;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){et.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;et.multiplyQuaternionsFlat(e,o,e,t,e,r),et.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const v_="\\[\\]\\.:\\/",eie=new RegExp("["+v_+"]","g"),y_="[^"+v_+"]",tie="[^"+v_.replace("\\.","")+"]",nie=/((?:WC+[\/:])*)/.source.replace("WC",y_),rie=/(WCOD+)?/.source.replace("WCOD",tie),iie=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",y_),sie=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",y_),oie=new RegExp("^"+nie+rie+iie+sie+"$"),aie=["material","materials","bones","map"];class lie{constructor(e,t,r){const i=r||Bt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Bt{constructor(e,t,r){this.path=t,this.parsedPath=r||Bt.parseTrackName(t),this.node=Bt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Bt.Composite(e,t,r):new Bt(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(eie,"")}static parseTrackName(e){const t=oie.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);aie.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Bt.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let A=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===A){A=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(A!==void 0){if(e[A]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[A]}}const o=e[i];if(o===void 0){const A=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+A+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bt.Composite=lie;Bt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bt.prototype.GetterByBindingType=[Bt.prototype._getValue_direct,Bt.prototype._getValue_array,Bt.prototype._getValue_arrayElement,Bt.prototype._getValue_toArray];Bt.prototype.SetterByBindingTypeAndVersioning=[[Bt.prototype._setValue_direct,Bt.prototype._setValue_direct_setNeedsUpdate,Bt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_array,Bt.prototype._setValue_array_setNeedsUpdate,Bt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_arrayElement,Bt.prototype._setValue_arrayElement_setNeedsUpdate,Bt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bt.prototype._setValue_fromArray,Bt.prototype._setValue_fromArray_setNeedsUpdate,Bt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Aie{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:md,endingEnd:md};for(let A=0;A!==o;++A){const c=s[A].createInterpolant(null);a[A]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=f$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,A=a.sampleValues;return l[0]=s,l[1]=s+r,A[0]=e/o,A[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,A=this._propertyBindings;switch(this.blendMode){case h$:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulateAdditive(a);break;case a_:default:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(o),A[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===d$;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===u$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const A=e<0;this._setEndings(A,!A,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=vd,i.endingEnd=vd):(e?i.endingStart=this.zeroSlopeAtStart?vd:md:i.endingStart=hw,t?i.endingEnd=this.zeroSlopeAtEnd?vd:md:i.endingEnd=hw)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const cie=new Float32Array(1);class uie extends fc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,A=this._bindingsByRootAndName;let c=A[l];c===void 0&&(c={},A[l]=c);for(let u=0;u!==s;++u){const f=i[u],d=f.name;let h=c[d];if(h!==void 0)++h.referenceCount,o[u]=h;else{if(h=o[u],h!==void 0){h._cacheIndex===null&&(++h.referenceCount,this._addInactiveBinding(h,l,d));continue}const p=t&&t._propertyBindings[u].binding.parsedPath;h=new qre(Bt.create(r,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,l,d),o[u]=h}a[u].resultBuffer=h.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,A=l[l.length-1],c=e._byClipCacheIndex;A._byClipCacheIndex=c,l[c]=A,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],A=e._cacheIndex;l._cacheIndex=A,t[A]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new cZ(new Float32Array(2),new Float32Array(2),1,cie),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?mu.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let A=null;if(r===void 0&&(o!==null?r=o.blendMode:r=a_),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===r)return u;A=l.knownActions[0],o===null&&(o=A._clip)}if(o===null)return null;const c=new Aie(this,o,t,r);return this._bindAction(c,A),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?mu.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let A=0;A!==r;++A)t[A]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let A=0;A!==l;++A)a[A].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const A=o[a];this._deactivateAction(A);const c=A._cacheIndex,u=t[t.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(A)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class rN{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class gZ{constructor(e,t,r=0,i=1/0){this.ray=new o0(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new c_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return mE(e,this,r,t),r.sort(iN),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)mE(e[i],this,r,t);return r.sort(iN),r}}function iN(n,e){return n.distance-e.distance}function mE(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)mE(i[s],e,t,!0)}}class sN{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(cr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const oN=new X,Uv=new X;class xl{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){oN.subVectors(e,this.start),Uv.subVectors(this.end,this.start);const r=Uv.dot(Uv);let s=Uv.dot(oN)/r;return t&&(s=cr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class fie extends A0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $t;i.setAttribute("position",new bn(t,3)),i.setAttribute("color",new bn(r,3));const s=new Pl({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new Re,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ks}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ks);const aN={type:"change"},CI={type:"start"},lN={type:"end"};class die extends fc{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new X,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Zu.ROTATE,MIDDLE:Zu.DOLLY,RIGHT:Zu.PAN},this.touches={ONE:Ju.ROTATE,TWO:Ju.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(I){I.addEventListener("keydown",qe),this._domElementKeyEvents=I},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(aN),r.update(),s=i.NONE},this.update=function(){const I=new X,N=new et().setFromUnitVectors(e.up,new X(0,1,0)),$=N.clone().invert(),ee=new X,te=new et,we=2*Math.PI;return function(){const Ee=r.object.position;I.copy(Ee).sub(r.target),I.applyQuaternion(N),a.setFromVector3(I),r.autoRotate&&s===i.NONE&&S(F()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Ve=r.minAzimuthAngle,_e=r.maxAzimuthAngle;return isFinite(Ve)&&isFinite(_e)&&(Ve<-Math.PI?Ve+=we:Ve>Math.PI&&(Ve-=we),_e<-Math.PI?_e+=we:_e>Math.PI&&(_e-=we),Ve<=_e?a.theta=Math.max(Ve,Math.min(_e,a.theta)):a.theta=a.theta>(Ve+_e)/2?Math.max(Ve,a.theta):Math.min(_e,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=A,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),I.setFromSpherical(a),I.applyQuaternion($),Ee.copy(r.target).add(I),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),A=1,u||ee.distanceToSquared(r.object.position)>o||8*(1-te.dot(r.object.quaternion))>o?(r.dispatchEvent(aN),ee.copy(r.object.position),te.copy(r.object.quaternion),u=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",ae),r.domElement.removeEventListener("pointerdown",ge),r.domElement.removeEventListener("pointercancel",We),r.domElement.removeEventListener("wheel",Ge),r.domElement.removeEventListener("pointermove",Fe),r.domElement.removeEventListener("pointerup",nt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",qe)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new sN,l=new sN;let A=1;const c=new X;let u=!1;const f=new Oe,d=new Oe,h=new Oe,p=new Oe,m=new Oe,g=new Oe,v=new Oe,y=new Oe,w=new Oe,C=[],b={};function F(){return 2*Math.PI/60/60*r.autoRotateSpeed}function x(){return Math.pow(.95,r.zoomSpeed)}function S(I){l.theta-=I}function R(I){l.phi-=I}const Z=function(){const I=new X;return function($,ee){I.setFromMatrixColumn(ee,0),I.multiplyScalar(-$),c.add(I)}}(),Y=function(){const I=new X;return function($,ee){r.screenSpacePanning===!0?I.setFromMatrixColumn(ee,1):(I.setFromMatrixColumn(ee,0),I.crossVectors(r.object.up,I)),I.multiplyScalar($),c.add(I)}}(),Q=function(){const I=new X;return function($,ee){const te=r.domElement;if(r.object.isPerspectiveCamera){const we=r.object.position;I.copy(we).sub(r.target);let Ce=I.length();Ce*=Math.tan(r.object.fov/2*Math.PI/180),Z(2*$*Ce/te.clientHeight,r.object.matrix),Y(2*ee*Ce/te.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(Z($*(r.object.right-r.object.left)/r.object.zoom/te.clientWidth,r.object.matrix),Y(ee*(r.object.top-r.object.bottom)/r.object.zoom/te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function B(I){r.object.isPerspectiveCamera?A/=I:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*I)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function E(I){r.object.isPerspectiveCamera?A*=I:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/I)),r.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function M(I){f.set(I.clientX,I.clientY)}function D(I){v.set(I.clientX,I.clientY)}function T(I){p.set(I.clientX,I.clientY)}function V(I){d.set(I.clientX,I.clientY),h.subVectors(d,f).multiplyScalar(r.rotateSpeed);const N=r.domElement;S(2*Math.PI*h.x/N.clientHeight),R(2*Math.PI*h.y/N.clientHeight),f.copy(d),r.update()}function G(I){y.set(I.clientX,I.clientY),w.subVectors(y,v),w.y>0?B(x()):w.y<0&&E(x()),v.copy(y),r.update()}function P(I){m.set(I.clientX,I.clientY),g.subVectors(m,p).multiplyScalar(r.panSpeed),Q(g.x,g.y),p.copy(m),r.update()}function U(I){I.deltaY<0?E(x()):I.deltaY>0&&B(x()),r.update()}function H(I){let N=!1;switch(I.code){case r.keys.UP:Q(0,r.keyPanSpeed),N=!0;break;case r.keys.BOTTOM:Q(0,-r.keyPanSpeed),N=!0;break;case r.keys.LEFT:Q(r.keyPanSpeed,0),N=!0;break;case r.keys.RIGHT:Q(-r.keyPanSpeed,0),N=!0;break}N&&(I.preventDefault(),r.update())}function oe(){if(C.length===1)f.set(C[0].pageX,C[0].pageY);else{const I=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);f.set(I,N)}}function k(){if(C.length===1)p.set(C[0].pageX,C[0].pageY);else{const I=.5*(C[0].pageX+C[1].pageX),N=.5*(C[0].pageY+C[1].pageY);p.set(I,N)}}function K(){const I=C[0].pageX-C[1].pageX,N=C[0].pageY-C[1].pageY,$=Math.sqrt(I*I+N*N);v.set(0,$)}function ne(){r.enableZoom&&K(),r.enablePan&&k()}function ie(){r.enableZoom&&K(),r.enableRotate&&oe()}function ue(I){if(C.length==1)d.set(I.pageX,I.pageY);else{const $=_(I),ee=.5*(I.pageX+$.x),te=.5*(I.pageY+$.y);d.set(ee,te)}h.subVectors(d,f).multiplyScalar(r.rotateSpeed);const N=r.domElement;S(2*Math.PI*h.x/N.clientHeight),R(2*Math.PI*h.y/N.clientHeight),f.copy(d)}function j(I){if(C.length===1)m.set(I.pageX,I.pageY);else{const N=_(I),$=.5*(I.pageX+N.x),ee=.5*(I.pageY+N.y);m.set($,ee)}g.subVectors(m,p).multiplyScalar(r.panSpeed),Q(g.x,g.y),p.copy(m)}function se(I){const N=_(I),$=I.pageX-N.x,ee=I.pageY-N.y,te=Math.sqrt($*$+ee*ee);y.set(0,te),w.set(0,Math.pow(y.y/v.y,r.zoomSpeed)),B(w.y),v.copy(y)}function ce(I){r.enableZoom&&se(I),r.enablePan&&j(I)}function Be(I){r.enableZoom&&se(I),r.enableRotate&&ue(I)}function ge(I){r.enabled!==!1&&(C.length===0&&(r.domElement.setPointerCapture(I.pointerId),r.domElement.addEventListener("pointermove",Fe),r.domElement.addEventListener("pointerup",nt)),de(I),I.pointerType==="touch"?O(I):Te(I))}function Fe(I){r.enabled!==!1&&(I.pointerType==="touch"?J(I):Qe(I))}function nt(I){ve(I),C.length===0&&(r.domElement.releasePointerCapture(I.pointerId),r.domElement.removeEventListener("pointermove",Fe),r.domElement.removeEventListener("pointerup",nt)),r.dispatchEvent(lN),s=i.NONE}function We(I){ve(I)}function Te(I){let N;switch(I.button){case 0:N=r.mouseButtons.LEFT;break;case 1:N=r.mouseButtons.MIDDLE;break;case 2:N=r.mouseButtons.RIGHT;break;default:N=-1}switch(N){case Zu.DOLLY:if(r.enableZoom===!1)return;D(I),s=i.DOLLY;break;case Zu.ROTATE:if(I.ctrlKey||I.metaKey||I.shiftKey){if(r.enablePan===!1)return;T(I),s=i.PAN}else{if(r.enableRotate===!1)return;M(I),s=i.ROTATE}break;case Zu.PAN:if(I.ctrlKey||I.metaKey||I.shiftKey){if(r.enableRotate===!1)return;M(I),s=i.ROTATE}else{if(r.enablePan===!1)return;T(I),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(CI)}function Qe(I){switch(s){case i.ROTATE:if(r.enableRotate===!1)return;V(I);break;case i.DOLLY:if(r.enableZoom===!1)return;G(I);break;case i.PAN:if(r.enablePan===!1)return;P(I);break}}function Ge(I){r.enabled===!1||r.enableZoom===!1||s!==i.NONE||(I.preventDefault(),r.dispatchEvent(CI),U(I),r.dispatchEvent(lN))}function qe(I){r.enabled===!1||r.enablePan===!1||H(I)}function O(I){switch(L(I),C.length){case 1:switch(r.touches.ONE){case Ju.ROTATE:if(r.enableRotate===!1)return;oe(),s=i.TOUCH_ROTATE;break;case Ju.PAN:if(r.enablePan===!1)return;k(),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case Ju.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ne(),s=i.TOUCH_DOLLY_PAN;break;case Ju.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ie(),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(CI)}function J(I){switch(L(I),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;ue(I),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;j(I),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ce(I),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Be(I),r.update();break;default:s=i.NONE}}function ae(I){r.enabled!==!1&&I.preventDefault()}function de(I){C.push(I)}function ve(I){delete b[I.pointerId];for(let N=0;N<C.length;N++)if(C[N].pointerId==I.pointerId){C.splice(N,1);return}}function L(I){let N=b[I.pointerId];N===void 0&&(N=new Oe,b[I.pointerId]=N),N.set(I.pageX,I.pageY)}function _(I){const N=I.pointerId===C[0].pointerId?C[1]:C[0];return b[N.pointerId]}r.domElement.addEventListener("contextmenu",ae),r.domElement.addEventListener("pointerdown",ge),r.domElement.addEventListener("pointercancel",We),r.domElement.addEventListener("wheel",Ge,{passive:!1}),this.update()}}class B_ extends Lh{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new vie(t)}),this.register(function(t){return new Iie(t)}),this.register(function(t){return new Fie(t)}),this.register(function(t){return new Bie(t)}),this.register(function(t){return new wie(t)}),this.register(function(t){return new Cie(t)}),this.register(function(t){return new bie(t)}),this.register(function(t){return new mie(t)}),this.register(function(t){return new xie(t)}),this.register(function(t){return new yie(t)}),this.register(function(t){return new pie(t)}),this.register(function(t){return new Eie(t)}),this.register(function(t){return new Uie(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Ca.extractUrlBase(e),this.manager.itemStart(e);const a=function(A){i?i(A):console.error(A),s.manager.itemError(e),s.manager.itemEnd(e)},l=new p_(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(A){try{s.parse(A,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ca.decodeText(new Uint8Array(e,0,4))===mZ){try{o[Ct.KHR_BINARY_GLTF]=new Sie(e)}catch(c){i&&i(c);return}s=JSON.parse(o[Ct.KHR_BINARY_GLTF].content)}else s=JSON.parse(Ca.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Oie(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const c=this.pluginCallbacks[A](l);a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let A=0;A<s.extensionsUsed.length;++A){const c=s.extensionsUsed[A],u=s.extensionsRequired||[];switch(c){case Ct.KHR_MATERIALS_UNLIT:o[c]=new gie;break;case Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[c]=new Rie;break;case Ct.KHR_DRACO_MESH_COMPRESSION:o[c]=new _ie(s,this.dracoLoader);break;case Ct.KHR_TEXTURE_TRANSFORM:o[c]=new Qie;break;case Ct.KHR_MESH_QUANTIZATION:o[c]=new Mie;break;default:u.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function hie(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ct={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class pie{constructor(e){this.parser=e,this.name=Ct.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let A;const c=new Re(16777215);l.color!==void 0&&c.fromArray(l.color);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":A=new m_(c),A.target.position.set(0,0,-1),A.add(A.target);break;case"point":A=new gE(c),A.distance=u;break;case"spot":A=new hZ(c),A.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,A.angle=l.spot.outerConeAngle,A.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,A.target.position.set(0,0,-1),A.add(A.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return A.position.set(0,0,0),A.decay=2,l.intensity!==void 0&&(A.intensity=l.intensity),A.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(A),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}let gie=class{constructor(){this.name=Ct.KHR_MATERIALS_UNLIT}getMaterialType(){return ss}extendParams(e,t,r){const i=[];e.color=new Re(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,ht))}return Promise.all(i)}};class mie{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}let vie=class{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Oe(a,a)}return Promise.all(s)}},yie=class{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}};class Bie{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Re(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ht)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}let wie=class{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},Cie=class{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Re(a[0],a[1],a[2]),Promise.all(s)}};class bie{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class xie{constructor(e){this.parser=e,this.name=Ct.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:_u}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Re(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,ht)),Promise.all(s)}}class Iie{constructor(e){this.parser=e,this.name=Ct.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Fie{constructor(e){this.parser=e,this.name=Ct.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const A=r.options.manager.getHandler(a.uri);A!==null&&(l=A)}return this.detectSupport().then(function(A){if(A)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Eie{constructor(e){this.name=Ct.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,A=i.byteLength||0,c=i.count,u=i.byteStride,f=new Uint8Array(a,l,A);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,u,f,i.mode,i.filter).then(function(d){return d.buffer}):o.ready.then(function(){const d=new ArrayBuffer(c*u);return o.decodeGltfBuffer(new Uint8Array(d),c,u,f,i.mode,i.filter),d})})}else return null}}class Uie{constructor(e){this.name=Ct.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const A of i.primitives)if(A.mode!==Rs.TRIANGLES&&A.mode!==Rs.TRIANGLE_STRIP&&A.mode!==Rs.TRIANGLE_FAN&&A.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const A in o)a.push(this.parser.getDependency("accessor",o[A]).then(c=>(l[A]=c,l[A])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(A=>{const c=A.pop(),u=c.isGroup?c.children:[c],f=A[0].count,d=[];for(const h of u){const p=new Le,m=new X,g=new et,v=new X(1,1,1),y=new zC(h.geometry,h.material,f);for(let w=0;w<f;w++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&v.fromBufferAttribute(l.SCALE,w),y.setMatrixAt(w,p.compose(m,g,v));for(const w in l)w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&h.geometry.setAttribute(w,l[w]);Nt.prototype.copy.call(y,h),y.frustumCulled=!1,this.parser.assignFinalMaterial(y),d.push(y)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const mZ="glTF",Up=12,AN={JSON:1313821514,BIN:5130562};class Sie{constructor(e){this.name=Ct.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Up);if(this.header={magic:Ca.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==mZ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Up,i=new DataView(e,Up);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===AN.JSON){const l=new Uint8Array(e,Up+s,o);this.content=Ca.decodeText(l)}else if(a===AN.BIN){const l=Up+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class _ie{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ct.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},A={};for(const c in o){const u=yE[c]||c.toLowerCase();a[u]=o[c]}for(const c in e.attributes){const u=yE[c]||c.toLowerCase();if(o[c]!==void 0){const f=r.accessors[e.attributes[c]],d=Em[f.componentType];A[u]=d.name,l[u]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(u){i.decodeDracoFile(c,function(f){for(const d in f.attributes){const h=f.attributes[d],p=l[d];p!==void 0&&(h.normalized=p)}u(f)},a,A)})})}}class Qie{constructor(){this.name=Ct.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class vE extends gu{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),a={specular:{value:new Re().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(l){for(const A in a)l.uniforms[A]=a[A];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(l){a.specular.value=l}},specularMap:{get:function(){return a.specularMap.value},set:function(l){a.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(l){a.glossiness.value=l}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(l){a.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Rie{constructor(){this.name=Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return vE}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Re(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture,ht)),e.emissive=new Re(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Re(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o,ht))}return Promise.all(s)}createMaterial(e){const t=new vE(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Rh,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class Mie{constructor(){this.name=Ct.KHR_MESH_QUANTIZATION}}class vZ extends c0{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,A=a*3,c=i-t,u=(r-t)/c,f=u*u,d=f*u,h=e*A,p=h-A,m=-2*d+3*f,g=d-f,v=1-m,y=g-f+u;for(let w=0;w!==a;w++){const C=o[p+w+a],b=o[p+w+l]*c,F=o[h+w+a],x=o[h+w]*c;s[w]=v*C+y*b+m*F+g*x}return s}}const Tie=new et;class Nie extends vZ{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return Tie.fromArray(s).normalize().toArray(s),s}}const Rs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Em={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},cN={9728:Br,9729:oi,9984:fw,9985:o_,9986:dw,9987:Uu},uN={33071:ci,33648:Cm,10497:ds},fN={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Die={CUBICSPLINE:void 0,LINEAR:pu,STEP:ph},bI={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function kie(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new gu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Sa})),n.DefaultMaterial}function Sp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Tc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Vie(n,e,t){let r=!1,i=!1,s=!1;for(let A=0,c=e.length;A<c;A++){const u=e[A];if(u.POSITION!==void 0&&(r=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let A=0,c=e.length;A<c;A++){const u=e[A];if(r){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;o.push(f)}if(i){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],f=A[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=u),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function Lie(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Pie(n){const e=n.extensions&&n.extensions[Ct.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+dN(e.attributes):t=n.indices+":"+dN(n.attributes)+":"+n.mode,t}function dN(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function BE(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Wie(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class Oie{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new hie,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new Qu(this.options.manager):this.textureLoader=new jre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new p_(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};Sp(s,a,i),Tc(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[A,c]of o.children.entries())s(c,a.children[A])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ct.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Ca.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=fN[i.type],A=Em[i.componentType],c=A.BYTES_PER_ELEMENT,u=c*l,f=i.byteOffset||0,d=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,h=i.normalized===!0;let p,m;if(d&&d!==u){const g=Math.floor(f/d),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let y=t.cache.get(v);y||(p=new A(a,g*d,i.count*d/c),y=new Rre(p,d/c),t.cache.add(v,y)),m=new d_(y,l,f%d/c,h)}else a===null?p=new A(i.count*l):p=new A(a,f,i.count*l),m=new At(p,l,h);if(i.sparse!==void 0){const g=fN.SCALAR,v=Em[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,C=new v(o[1],y,i.sparse.count*g),b=new A(o[2],w,i.sparse.count*l);a!==null&&(m=new At(m.array.slice(),m.itemSize,m.normalized));for(let F=0,x=C.length;F<x;F++){const S=C[F];if(m.setX(S,b[F*l]),l>=2&&m.setY(S,b[F*l+1]),l>=3&&m.setZ(S,b[F*l+2]),l>=4&&m.setW(S,b[F*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const A=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"";const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=cN[f.magFilter]||oi,c.minFilter=cN[f.minFilter]||Uu,c.wrapS=uN[f.wrapS]||ds,c.wrapT=uN[f.wrapT]||ds,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=A,A}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",A=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(u){A=!0;const f=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(u){return new Promise(function(f,d){let h=f;t.isImageBitmapLoader===!0&&(h=function(p){const m=new nr(p);m.needsUpdate=!0,f(m)}),t.load(Ca.resolveURL(u,s.path),h,void 0,d)})}).then(function(u){return A===!0&&a.revokeObjectURL(l),u.userData.mimeType=o.mimeType||Wie(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[Ct.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Ct.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ct.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(o.encoding=i),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new aZ,zs.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Pl,zs.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(a+="specular-glossiness:"),i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return gu}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},A=[];if(l[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const u=i[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=u.getMaterialType(),A.push(u.extendParams(a,s,t))}else if(l[Ct.KHR_MATERIALS_UNLIT]){const u=i[Ct.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),A.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Re(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;a.color.fromArray(f),a.opacity=f[3]}u.baseColorTexture!==void 0&&A.push(t.assignTexture(a,"map",u.baseColorTexture,ht)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(A.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),A.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),A.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ui);const c=s.alphaMode||bI.OPAQUE;if(c===bI.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===bI.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ss&&(A.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Oe(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}return s.occlusionTexture!==void 0&&o!==ss&&(A.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ss&&(a.emissive=new Re().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==ss&&A.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,ht)),Promise.all(A).then(function(){let u;return o===vE?u=i[Ct.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):u=new o(a),s.name&&(u.name=s.name),Tc(u,s),t.associations.set(u,{materials:e}),s.extensions&&Sp(i,u,s),u})}createUniqueName(e){const t=Bt.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Ct.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return hN(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const A=e[a],c=Pie(A),u=i[c];if(u)o.push(u.promise);else{let f;A.extensions&&A.extensions[Ct.KHR_DRACO_MESH_COMPRESSION]?f=s(A):f=hN(new $t,A,t),i[c]={primitive:A,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,A=o.length;l<A;l++){const c=o[l].material===void 0?kie(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const A=l.slice(0,l.length-1),c=l[l.length-1],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],m=o[d];let g;const v=A[d];if(m.mode===Rs.TRIANGLES||m.mode===Rs.TRIANGLE_STRIP||m.mode===Rs.TRIANGLE_FAN||m.mode===void 0)g=s.isSkinnedMesh===!0?new Nh(p,v):new Vn(p,v),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),m.mode===Rs.TRIANGLE_STRIP?g.geometry=pN(g.geometry,p$):m.mode===Rs.TRIANGLE_FAN&&(g.geometry=pN(g.geometry,JG));else if(m.mode===Rs.LINES)g=new A0(p,v);else if(m.mode===Rs.LINE_STRIP)g=new Dh(p,v);else if(m.mode===Rs.LINE_LOOP)g=new Dre(p,v);else if(m.mode===Rs.POINTS)g=new kre(p,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(g.geometry.morphAttributes).length>0&&Lie(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Tc(g,s),m.extensions&&Sp(i,g,m),t.assignFinalMaterial(g),u.push(g)}for(let d=0,h=u.length;d<h;d++)t.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return u[0];const f=new Qr;t.associations.set(f,{meshes:e});for(let d=0,h=u.length;d<h;d++)f.add(u[d]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new _r(Lt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new l0(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Tc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],a=[],l=[];for(let A=0,c=r.channels.length;A<c;A++){const u=r.channels[A],f=r.samplers[u.sampler],d=u.target,h=d.node,p=r.parameters!==void 0?r.parameters[f.input]:f.input,m=r.parameters!==void 0?r.parameters[f.output]:f.output;i.push(this.getDependency("node",h)),s.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",m)),a.push(f),l.push(d)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],f=A[2],d=A[3],h=A[4],p=[];for(let g=0,v=c.length;g<v;g++){const y=c[g],w=u[g],C=f[g],b=d[g],F=h[g];if(y===void 0)continue;y.updateMatrix();let x;switch(nA[F.path]){case nA.weights:x=mh;break;case nA.rotation:x=_a;break;case nA.position:case nA.scale:default:x=qA;break}const S=y.name?y.name:y.uuid,R=b.interpolation!==void 0?Die[b.interpolation]:pu,Z=[];nA[F.path]===nA.weights?y.traverse(function(Q){Q.morphTargetInfluences&&Z.push(Q.name?Q.name:Q.uuid)}):Z.push(S);let Y=C.array;if(C.normalized){const Q=BE(Y.constructor),B=new Float32Array(Y.length);for(let E=0,M=Y.length;E<M;E++)B[E]=Y[E]*Q;Y=B}for(let Q=0,B=Z.length;Q<B;Q++){const E=new x(Z[Q]+"."+nA[F.path],w.array,Y,R);b.interpolation==="CUBICSPLINE"&&(E.createInterpolant=function(D){const T=this instanceof _a?Nie:vZ;return new T(this.times,this.values,this.getValueSize()/3,D)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(E)}}const m=r.name?r.name:"animation_"+e;return new mu(m,void 0,p)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,A=i.weights.length;l<A;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const a=[],l=i._invokeOne(function(A){return A.createNodeMesh&&A.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(A){return i._getNodeRef(i.cameraCache,s.camera,A)})),i._invokeAll(function(A){return A.createNodeAttachment&&A.createNodeAttachment(e)}).forEach(function(A){a.push(A)}),Promise.all(a)}().then(function(a){let l;if(s.isBone===!0?l=new Fm:a.length>1?l=new Qr:a.length===1?l=a[0]:l=new Nt,l!==a[0])for(let A=0,c=a.length;A<c;A++)l.add(a[A]);if(s.name&&(l.userData.name=s.name,l.name=o),Tc(l,s),s.extensions&&Sp(r,l,s),s.matrix!==void 0){const A=new Le;A.fromArray(s.matrix),l.applyMatrix4(A)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new Qr;i.name&&(o.name=s.createUniqueName(i.name)),Tc(o,i),i.extensions&&Sp(r,o,i);const a=i.nodes||[],l=[];for(let A=0,c=a.length;A<c;A++)l.push(yZ(a[A],o,t,s));return Promise.all(l).then(function(){const A=c=>{const u=new Map;for(const[f,d]of s.associations)(f instanceof zs||f instanceof nr)&&u.set(f,d);return c.traverse(f=>{const d=s.associations.get(f);d!=null&&u.set(f,d)}),u};return s.associations=A(o),o})}}function yZ(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(a){o=a;const l=[];for(let A=0,c=o.joints.length;A<c;A++)l.push(r.getDependency("node",o.joints[A]));return Promise.all(l)}).then(function(a){return s.traverse(function(l){if(!l.isMesh)return;const A=[],c=[];for(let u=0,f=a.length;u<f;u++){const d=a[u];if(d){A.push(d);const h=new Le;o.inverseBindMatrices!==void 0&&h.fromArray(o.inverseBindMatrices.array,u*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[u])}l.bind(new dc(A,c),l.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const a=i.children;for(let l=0,A=a.length;l<A;l++){const c=a[l];o.push(yZ(c,s,t,r))}}return Promise.all(o)})}function Gie(n,e,t){const r=e.attributes,i=new ao;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,A=a.max;if(l!==void 0&&A!==void 0){if(i.set(new X(l[0],l[1],l[2]),new X(A[0],A[1],A[2])),a.normalized){const c=BE(Em[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new X,l=new X;for(let A=0,c=s.length;A<c;A++){const u=s[A];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],d=f.min,h=f.max;if(d!==void 0&&h!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(h[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(h[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(h[2]))),f.normalized){const p=BE(Em[f.componentType]);l.multiplyScalar(p)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Su;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function hN(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=yE[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Tc(n,e),Gie(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Vie(n,e.targets,t):n})}function pN(n,e){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===JG)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var gN={},wE=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},BZ=function(n){return new Worker(n)};try{URL.revokeObjectURL(wE(""))}catch{wE=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},BZ=function(e){return new Worker(e,{type:"module"})}}var Zie=function(n,e,t,r,i){var s=BZ(gN[e]||(gN[e]=wE(n)));return s.onerror=function(o){return i(o.error,null)},s.onmessage=function(o){return i(null,o.data)},s.postMessage(t,r),s},Ut=Uint8Array,wr=Uint16Array,Tl=Uint32Array,Ph=new Ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wh=new Ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Um=new Ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wZ=function(n,e){for(var t=new wr(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Tl(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},CZ=wZ(Ph,2),w_=CZ[0],vw=CZ[1];w_[28]=258,vw[258]=28;var bZ=wZ(Wh,0),xZ=bZ[0],CE=bZ[1],Sm=new wr(32768);for(var pn=0;pn<32768;++pn){var rA=(pn&43690)>>>1|(pn&21845)<<1;rA=(rA&52428)>>>2|(rA&13107)<<2,rA=(rA&61680)>>>4|(rA&3855)<<4,Sm[pn]=((rA&65280)>>>8|(rA&255)<<8)>>>1}var Ys=function(n,e,t){for(var r=n.length,i=0,s=new wr(e);i<r;++i)++s[n[i]-1];var o=new wr(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new wr(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var A=i<<4|n[i],c=e-n[i],u=o[n[i]-1]++<<c,f=u|(1<<c)-1;u<=f;++u)a[Sm[u]>>>l]=A}else for(a=new wr(r),i=0;i<r;++i)n[i]&&(a[i]=Sm[o[n[i]-1]++]>>>15-n[i]);return a},Nl=new Ut(288);for(var pn=0;pn<144;++pn)Nl[pn]=8;for(var pn=144;pn<256;++pn)Nl[pn]=9;for(var pn=256;pn<280;++pn)Nl[pn]=7;for(var pn=280;pn<288;++pn)Nl[pn]=8;var yh=new Ut(32);for(var pn=0;pn<32;++pn)yh[pn]=5;var IZ=Ys(Nl,9,0),FZ=Ys(Nl,9,1),EZ=Ys(yh,5,0),UZ=Ys(yh,5,1),nB=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Us=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},rB=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},u0=function(n){return(n/8|0)+(n&7&&1)},Xs=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof wr?wr:n instanceof Tl?Tl:Ut)(t-e);return r.set(n.subarray(e,t)),r},f0=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Ut(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ut(r*3));var o=function(K){var ne=e.length;if(K>ne){var ie=new Ut(Math.max(ne*2,K));ie.set(e),e=ie}},a=t.f||0,l=t.p||0,A=t.b||0,c=t.l,u=t.d,f=t.m,d=t.n,h=r*8;do{if(!c){t.f=a=Us(n,l,1);var p=Us(n,l+1,3);if(l+=3,p)if(p==1)c=FZ,u=UZ,f=9,d=5;else if(p==2){var y=Us(n,l,31)+257,w=Us(n,l+10,15)+4,C=y+Us(n,l+5,31)+1;l+=14;for(var b=new Ut(C),F=new Ut(19),x=0;x<w;++x)F[Um[x]]=Us(n,l+x*3,7);l+=w*3;for(var S=nB(F),R=(1<<S)-1,Z=Ys(F,S,1),x=0;x<C;){var Y=Z[Us(n,l,R)];l+=Y&15;var m=Y>>>4;if(m<16)b[x++]=m;else{var Q=0,B=0;for(m==16?(B=3+Us(n,l,3),l+=2,Q=b[x-1]):m==17?(B=3+Us(n,l,7),l+=3):m==18&&(B=11+Us(n,l,127),l+=7);B--;)b[x++]=Q}}var E=b.subarray(0,y),M=b.subarray(y);f=nB(E),d=nB(M),c=Ys(E,f,1),u=Ys(M,d,1)}else throw"invalid block type";else{var m=u0(l)+4,g=n[m-4]|n[m-3]<<8,v=m+g;if(v>r){if(s)throw"unexpected EOF";break}i&&o(A+g),e.set(n.subarray(m,v),A),t.b=A+=g,t.p=l=v*8;continue}if(l>h){if(s)throw"unexpected EOF";break}}i&&o(A+131072);for(var D=(1<<f)-1,T=(1<<d)-1,V=l;;V=l){var Q=c[rB(n,l)&D],G=Q>>>4;if(l+=Q&15,l>h){if(s)throw"unexpected EOF";break}if(!Q)throw"invalid length/literal";if(G<256)e[A++]=G;else if(G==256){V=l,c=null;break}else{var P=G-254;if(G>264){var x=G-257,U=Ph[x];P=Us(n,l,(1<<U)-1)+w_[x],l+=U}var H=u[rB(n,l)&T],oe=H>>>4;if(!H)throw"invalid distance";l+=H&15;var M=xZ[oe];if(oe>3){var U=Wh[oe];M+=rB(n,l)&(1<<U)-1,l+=U}if(l>h){if(s)throw"unexpected EOF";break}i&&o(A+131072);for(var k=A+P;A<k;A+=4)e[A]=e[A-M],e[A+1]=e[A+1-M],e[A+2]=e[A+2-M],e[A+3]=e[A+3-M];A=k}}t.l=c,t.p=V,t.b=A,c&&(a=1,t.m=f,t.d=u,t.n=d)}while(!a);return A==e.length?e:Xs(e,0,A)},qo=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8},Sf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},iB=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[Bl,0];if(i==1){var o=new Ut(t[0].s+1);return o[t[0].s]=1,[o,1]}t.sort(function(C,b){return C.f-b.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],A=0,c=1,u=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=t[t[A].f<t[u].f?A++:u++],l=t[A!=c&&t[A].f<t[u].f?A++:u++],t[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=s[0].s,r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var d=new wr(f+1),h=yw(t[c-1],d,0);if(h>e){var r=0,p=0,m=h-e,g=1<<m;for(s.sort(function(b,F){return d[F.s]-d[b.s]||b.f-F.f});r<i;++r){var v=s[r].s;if(d[v]>e)p+=g-(1<<h-d[v]),d[v]=e;else break}for(p>>>=m;p>0;){var y=s[r].s;d[y]<e?p-=1<<e-d[y]++-1:++r}for(;r>=0&&p;--r){var w=s[r].s;d[w]==e&&(--d[w],++p)}h=e}return[new Ut(d),h]},yw=function(n,e,t){return n.s==-1?Math.max(yw(n.l,e,t+1),yw(n.r,e,t+1)):e[n.s]=t},bE=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new wr(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return[t.subarray(0,r),e]},_f=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Wg=function(n,e,t){var r=t.length,i=u0(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},xE=function(n,e,t,r,i,s,o,a,l,A,c){qo(e,c++,t),++i[256];for(var u=iB(i,15),f=u[0],d=u[1],h=iB(s,15),p=h[0],m=h[1],g=bE(f),v=g[0],y=g[1],w=bE(p),C=w[0],b=w[1],F=new wr(19),x=0;x<v.length;++x)F[v[x]&31]++;for(var x=0;x<C.length;++x)F[C[x]&31]++;for(var S=iB(F,7),R=S[0],Z=S[1],Y=19;Y>4&&!R[Um[Y-1]];--Y);var Q=A+5<<3,B=_f(i,Nl)+_f(s,yh)+o,E=_f(i,f)+_f(s,p)+o+14+3*Y+_f(F,R)+(2*F[16]+3*F[17]+7*F[18]);if(Q<=B&&Q<=E)return Wg(e,c,n.subarray(l,l+A));var M,D,T,V;if(qo(e,c,1+(E<B)),c+=2,E<B){M=Ys(f,d,0),D=f,T=Ys(p,m,0),V=p;var G=Ys(R,Z,0);qo(e,c,y-257),qo(e,c+5,b-1),qo(e,c+10,Y-4),c+=14;for(var x=0;x<Y;++x)qo(e,c+3*x,R[Um[x]]);c+=3*Y;for(var P=[v,C],U=0;U<2;++U)for(var H=P[U],x=0;x<H.length;++x){var oe=H[x]&31;qo(e,c,G[oe]),c+=R[oe],oe>15&&(qo(e,c,H[x]>>>5&127),c+=H[x]>>>12)}}else M=IZ,D=Nl,T=EZ,V=yh;for(var x=0;x<a;++x)if(r[x]>255){var oe=r[x]>>>18&31;Sf(e,c,M[oe+257]),c+=D[oe+257],oe>7&&(qo(e,c,r[x]>>>23&31),c+=Ph[oe]);var k=r[x]&31;Sf(e,c,T[k]),c+=V[k],k>3&&(Sf(e,c,r[x]>>>5&8191),c+=Wh[k])}else Sf(e,c,M[r[x]]),c+=D[r[x]];return Sf(e,c,M[256]),c+D[256]},SZ=new Tl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bl=new Ut(0),_Z=function(n,e,t,r,i,s){var o=n.length,a=new Ut(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),A=0;if(!e||o<8)for(var c=0;c<=o;c+=65535){var u=c+65535;u<o?A=Wg(l,A,n.subarray(c,u)):(l[c]=s,A=Wg(l,A,n.subarray(c,o)))}else{for(var f=SZ[e-1],d=f>>>13,h=f&8191,p=(1<<t)-1,m=new wr(32768),g=new wr(p+1),v=Math.ceil(t/3),y=2*v,w=function(ge){return(n[ge]^n[ge+1]<<v^n[ge+2]<<y)&p},C=new Tl(25e3),b=new wr(288),F=new wr(32),x=0,S=0,c=0,R=0,Z=0,Y=0;c<o;++c){var Q=w(c),B=c&32767,E=g[Q];if(m[B]=E,g[Q]=B,Z<=c){var M=o-c;if((x>7e3||R>24576)&&M>423){A=xE(n,l,0,C,b,F,S,R,Y,c-Y,A),R=x=S=0,Y=c;for(var D=0;D<286;++D)b[D]=0;for(var D=0;D<30;++D)F[D]=0}var T=2,V=0,G=h,P=B-E&32767;if(M>2&&Q==w(c-P))for(var U=Math.min(d,M)-1,H=Math.min(32767,c),oe=Math.min(258,M);P<=H&&--G&&B!=E;){if(n[c+T]==n[c+T-P]){for(var k=0;k<oe&&n[c+k]==n[c+k-P];++k);if(k>T){if(T=k,V=P,k>U)break;for(var K=Math.min(P,k-2),ne=0,D=0;D<K;++D){var ie=c-P+D+32768&32767,ue=m[ie],j=ie-ue+32768&32767;j>ne&&(ne=j,E=ie)}}}B=E,E=m[B],P+=B-E+32768&32767}if(V){C[R++]=268435456|vw[T]<<18|CE[V];var se=vw[T]&31,ce=CE[V]&31;S+=Ph[se]+Wh[ce],++b[257+se],++F[ce],Z=c+T,++x}else C[R++]=n[c],++b[n[c]]}}A=xE(n,l,s,C,b,F,S,R,Y,c-Y,A),!s&&A&7&&(A=Wg(l,A+1,Bl))}return Xs(a,0,r+u0(A)+i)},QZ=function(){for(var n=new Tl(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Oh=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=QZ[t&255^e[r]]^t>>>8;n=t},d:function(){return~n}}},C_=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},Ru=function(n,e,t,r,i){return _Z(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},d0=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},mN=function(n,e,t){for(var r=n(),i=n.toString(),s=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),o=0;o<r.length;++o){var a=r[o],l=s[o];if(typeof a=="function"){e+=";"+l+"=";var A=a.toString();if(a.prototype)if(A.indexOf("[native code]")!=-1){var c=A.indexOf(" ",8)+1;e+=A.slice(c,A.indexOf("(",c))}else{e+=A;for(var u in a.prototype)e+=";"+l+".prototype."+u+"="+a.prototype[u].toString()}else e+=A}else t[l]=a}return[e,t]},Sv=[],Jie=function(n){var e=[];for(var t in n)(n[t]instanceof Ut||n[t]instanceof wr||n[t]instanceof Tl)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},RZ=function(n,e,t,r){var i;if(!Sv[t]){for(var s="",o={},a=n.length-1,l=0;l<a;++l)i=mN(n[l],s,o),s=i[0],o=i[1];Sv[t]=mN(n[a],s,o)}var A=d0({},Sv[t][1]);return Zie(Sv[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,A,Jie(A),r)},Gh=function(){return[Ut,wr,Tl,Ph,Wh,Um,w_,xZ,FZ,UZ,Sm,Ys,nB,Us,rB,u0,Xs,f0,zh,hc,b_]},Zh=function(){return[Ut,wr,Tl,Ph,Wh,Um,vw,CE,IZ,Nl,EZ,yh,Sm,SZ,Bl,Ys,qo,Sf,iB,yw,bE,_f,Wg,xE,u0,Xs,_Z,Ru,h0,hc]},MZ=function(){return[x_,F_,jt,Oh,QZ]},TZ=function(){return[I_,kZ]},NZ=function(){return[E_,jt,C_]},DZ=function(){return[VZ]},hc=function(n){return postMessage(n,[n.buffer])},b_=function(n){return n&&n.size&&new Ut(n.size)},Jh=function(n,e,t,r,i,s){var o=RZ(t,r,i,function(a,l){o.terminate(),s(a,l)});return o.postMessage([n,e],e.consume?[n.buffer]:[]),function(){o.terminate()}},ro=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},Hh=function(n,e,t,r,i){var s,o=RZ(n,r,i,function(a,l){a?(o.terminate(),e.ondata.call(e,a)):(l[1]&&o.terminate(),e.ondata.call(e,a,l[0],l[1]))});o.postMessage(t),e.push=function(a,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";o.postMessage([a,s=l],[a.buffer])},e.terminate=function(){o.terminate()}},ui=function(n,e){return n[e]|n[e+1]<<8},zn=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},xI=function(n,e){return zn(n,e)+zn(n,e+4)*4294967296},jt=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},x_=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&jt(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var r=0;r<=t.length;++r)n[r+10]=t.charCodeAt(r)}},I_=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},kZ=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},F_=function(n){return 10+(n.filename&&n.filename.length+1||0)},E_=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},VZ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function U_(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Qa=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(Ru(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),LZ=function(){function n(e,t){Hh([Zh,function(){return[ro,Qa]}],this,U_.call(this,e,t),function(r){var i=new Qa(r.data);onmessage=ro(i)},6)}return n}();function PZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Zh],function(r){return hc(h0(r.data[0],r.data[1]))},0,t)}function h0(n,e){return Ru(n,e||{},0,0)}var Ni=function(){function n(e){this.s={},this.p=new Ut(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new Ut(t+e.length);r.set(this.p),r.set(e,t),this.p=r},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=f0(this.p,this.o,this.s);this.ondata(Xs(r,t,this.s.b),this.d),this.o=Xs(r,this.s.b-32768),this.s.b=this.o.length,this.p=Xs(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),S_=function(){function n(e){this.ondata=e,Hh([Gh,function(){return[ro,Ni]}],this,0,function(){var t=new Ni;onmessage=ro(t)},7)}return n}();function __(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Gh],function(r){return hc(zh(r.data[0],b_(r.data[1])))},1,t)}function zh(n,e){return f0(n,e)}var Bw=function(){function n(e,t){this.c=Oh(),this.l=0,this.v=1,Qa.call(this,e,t)}return n.prototype.push=function(e,t){Qa.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Ru(e,this.o,this.v&&F_(this.o),t&&8,!t);this.v&&(x_(r,this.o),this.v=0),t&&(jt(r,r.length-8,this.c.d()),jt(r,r.length-4,this.l)),this.ondata(r,t)},n}(),vN=function(){function n(e,t){Hh([Zh,MZ,function(){return[ro,Qa,Bw]}],this,U_.call(this,e,t),function(r){var i=new Bw(r.data);onmessage=ro(i)},8)}return n}();function yN(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Zh,MZ,function(){return[ww]}],function(r){return hc(ww(r.data[0],r.data[1]))},2,t)}function ww(n,e){e||(e={});var t=Oh(),r=n.length;t.p(n);var i=Ru(n,e,F_(e),8),s=i.length;return x_(i,e),jt(i,s-8,t.d()),jt(i,s-4,r),i}var Cw=function(){function n(e){this.v=1,Ni.call(this,e)}return n.prototype.push=function(e,t){if(Ni.prototype.e.call(this,e),this.v){var r=this.p.length>3?I_(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ni.prototype.c.call(this,t)},n}(),WZ=function(){function n(e){this.ondata=e,Hh([Gh,TZ,function(){return[ro,Ni,Cw]}],this,0,function(){var t=new Cw;onmessage=ro(t)},9)}return n}();function OZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Gh,TZ,function(){return[bw]}],function(r){return hc(bw(r.data[0]))},3,t)}function bw(n,e){return f0(n.subarray(I_(n),-8),e||new Ut(kZ(n)))}var IE=function(){function n(e,t){this.c=C_(),this.v=1,Qa.call(this,e,t)}return n.prototype.push=function(e,t){Qa.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var r=Ru(e,this.o,this.v&&2,t&&4,!t);this.v&&(E_(r,this.o),this.v=0),t&&jt(r,r.length-4,this.c.d()),this.ondata(r,t)},n}(),Hie=function(){function n(e,t){Hh([Zh,NZ,function(){return[ro,Qa,IE]}],this,U_.call(this,e,t),function(r){var i=new IE(r.data);onmessage=ro(i)},10)}return n}();function zie(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Zh,NZ,function(){return[FE]}],function(r){return hc(FE(r.data[0],r.data[1]))},4,t)}function FE(n,e){e||(e={});var t=C_();t.p(n);var r=Ru(n,e,2,4);return E_(r,e),jt(r,r.length-4,t.d()),r}var xw=function(){function n(e){this.v=1,Ni.call(this,e)}return n.prototype.push=function(e,t){if(Ni.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ni.prototype.c.call(this,t)},n}(),GZ=function(){function n(e){this.ondata=e,Hh([Gh,DZ,function(){return[ro,Ni,xw]}],this,0,function(){var t=new xw;onmessage=ro(t)},11)}return n}();function ZZ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Jh(n,e,[Gh,DZ,function(){return[_m]}],function(r){return hc(_m(r.data[0],b_(r.data[1])))},5,t)}function _m(n,e){return f0((VZ(n),n.subarray(2,-4)),e)}var JZ=function(){function n(e){this.G=Cw,this.I=Ni,this.Z=xw,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new Ut(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var i=this,s=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),Yie=function(){function n(e){this.G=WZ,this.I=S_,this.Z=GZ,this.ondata=e}return n.prototype.push=function(e,t){JZ.prototype.push.call(this,e,t)},n}();function Xie(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?OZ(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?__(n,e,t):ZZ(n,e,t)}function Kie(n,e){return n[0]==31&&n[1]==139&&n[2]==8?bw(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?zh(n,e):_m(n,e)}var Q_=function(n,e,t,r){for(var i in n){var s=n[i],o=e+i;s instanceof Ut?t[o]=[s,r]:Array.isArray(s)?t[o]=[s[0],d0(r,s[1])]:Q_(s,o+"/",t,r)}},BN=typeof TextEncoder<"u"&&new TextEncoder,EE=typeof TextDecoder<"u"&&new TextDecoder,HZ=0;try{EE.decode(Bl,{stream:!0}),HZ=1}catch{}var zZ=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return[e,Xs(n,t-1)];i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}},jie=function(){function n(e){this.ondata=e,HZ?this.t=new TextDecoder:this.p=Bl}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new Ut(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var i=zZ(r),s=i[0],o=i[1];if(t){if(o.length)throw"invalid utf-8 data";this.p=null}else this.p=o;this.ondata(s,t)},n}(),$ie=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(ec(e),this.d=t||!1)},n}();function ec(n,e){if(e){for(var t=new Ut(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);return t}if(BN)return BN.encode(n);for(var i=n.length,s=new Ut(n.length+(n.length>>1)),o=0,a=function(c){s[o++]=c},r=0;r<i;++r){if(o+5>s.length){var l=new Ut(o+8+(i-r<<1));l.set(s),s=l}var A=n.charCodeAt(r);A<128||e?a(A):A<2048?(a(192|A>>6),a(128|A&63)):A>55295&&A<57344?(A=65536+(A&1047552)|n.charCodeAt(++r)&1023,a(240|A>>18),a(128|A>>12&63),a(128|A>>6&63),a(128|A&63)):(a(224|A>>12),a(128|A>>6&63),a(128|A&63))}return Xs(s,0,o)}function R_(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(EE)return EE.decode(n);var i=zZ(n),s=i[0],o=i[1];if(o.length)throw"invalid utf-8 data";return s}}var YZ=function(n){return n==1?3:n<6?2:n==9?1:0},XZ=function(n,e){return e+30+ui(n,e+26)+ui(n,e+28)},KZ=function(n,e,t){var r=ui(n,e+28),i=R_(n.subarray(e+46,e+46+r),!(ui(n,e+8)&2048)),s=e+46+r,o=zn(n,e+20),a=t&&o==4294967295?jZ(n,s):[o,zn(n,e+24),zn(n,e+42)],l=a[0],A=a[1],c=a[2];return[ui(n,e+10),l,A,i,s+ui(n,e+30)+ui(n,e+32),c]},jZ=function(n,e){for(;ui(n,e)!=1;e+=4+ui(n,e+2));return[xI(n,e+12),xI(n,e+4),xI(n,e+20)]},WA=function(n){var e=0;if(n)for(var t in n){var r=n[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},Bh=function(n,e,t,r,i,s,o,a){var l=r.length,A=t.extra,c=a&&a.length,u=WA(A);jt(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=i&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),d=f.getFullYear()-1980;if(d<0||d>119)throw"date not in range 1980-2099";if(jt(n,e,d<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,s!=null&&(jt(n,e,t.crc),jt(n,e+4,s),jt(n,e+8,t.size)),jt(n,e+12,l),jt(n,e+14,u),e+=16,o!=null&&(jt(n,e,c),jt(n,e+6,t.attrs),jt(n,e+10,o),e+=14),n.set(r,e),e+=l,u)for(var h in A){var p=A[h],m=p.length;jt(n,e,+h),jt(n,e+2,m),n.set(p,e+4),e+=4+m}return c&&(n.set(a,e),e+=c),e},M_=function(n,e,t,r,i){jt(n,e,101010256),jt(n,e+8,t),jt(n,e+10,t),jt(n,e+12,r),jt(n,e+16,i)},Qm=function(){function n(e){this.filename=e,this.c=Oh(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),qie=function(){function n(e,t){var r=this;t||(t={}),Qm.call(this,e),this.d=new Qa(t,function(i,s){r.ondata(null,i,s)}),this.compression=8,this.flag=YZ(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},n.prototype.push=function(e,t){Qm.prototype.push.call(this,e,t)},n}(),ese=function(){function n(e,t){var r=this;t||(t={}),Qm.call(this,e),this.d=new LZ(t,function(i,s,o){r.ondata(i,s,o)}),this.compression=8,this.flag=YZ(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){Qm.prototype.push.call(this,e,t)},n}(),tse=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=ec(e.filename),i=r.length,s=e.comment,o=s&&ec(s),a=i!=e.filename.length||o&&s.length!=o.length,l=i+WA(e.extra)+30;if(i>65535)throw"filename too long";var A=new Ut(l);Bh(A,0,e,r,a);var c=[A],u=function(){for(var m=0,g=c;m<g.length;m++){var v=g[m];t.ondata(null,v,!1)}c=[]},f=this.d;this.d=0;var d=this.u.length,h=d0(e,{f:r,u:a,o,t:function(){e.terminate&&e.terminate()},r:function(){if(u(),f){var m=t.u[d+1];m?m.r():t.d=1}f=1}}),p=0;e.ondata=function(m,g,v){if(m)t.ondata(m,g,v),t.terminate();else if(p+=g.length,c.push(g),v){var y=new Ut(16);jt(y,0,134695760),jt(y,4,e.crc),jt(y,8,p),jt(y,12,e.size),c.push(y),h.c=p,h.b=l+p+16,h.crc=e.crc,h.size=e.size,f&&h.r(),f=1}else f&&u()},this.u.push(h)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,r=0,i=0,s=this.u;i<s.length;i++){var o=s[i];r+=46+o.f.length+WA(o.extra)+(o.o?o.o.length:0)}for(var a=new Ut(r+22),l=0,A=this.u;l<A.length;l++){var o=A[l];Bh(a,e,o,o.f,o.u,o.c,t,o.o),e+=46+o.f.length+WA(o.extra)+(o.o?o.o.length:0),t+=o.b}M_(a,e,this.u.length,r,t),this.ondata(null,a,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},n}();function nse(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};Q_(n,"",r,e);var i=Object.keys(r),s=i.length,o=0,a=0,l=s,A=new Array(s),c=[],u=function(){for(var p=0;p<c.length;++p)c[p]()},f=function(){var p=new Ut(a+22),m=o,g=a-o;a=0;for(var v=0;v<l;++v){var y=A[v];try{var w=y.c.length;Bh(p,a,y,y.f,y.u,w);var C=30+y.f.length+WA(y.extra),b=a+C;p.set(y.c,b),Bh(p,o,y,y.f,y.u,w,a,y.m),o+=16+C+(y.m?y.m.length:0),a=b+w}catch(F){return t(F,null)}}M_(p,o,A.length,g,m),t(null,p)};s||f();for(var d=function(p){var m=i[p],g=r[m],v=g[0],y=g[1],w=Oh(),C=v.length;w.p(v);var b=ec(m),F=b.length,x=y.comment,S=x&&ec(x),R=S&&S.length,Z=WA(y.extra),Y=y.level==0?0:8,Q=function(B,E){if(B)u(),t(B,null);else{var M=E.length;A[p]=d0(y,{size:C,crc:w.d(),c:E,f:b,m:S,u:F!=m.length||S&&x.length!=R,compression:Y}),o+=30+F+Z+M,a+=76+2*(F+Z)+(R||0)+M,--s||f()}};if(F>65535&&Q("filename too long",null),!Y)Q(null,v);else if(C<16e4)try{Q(null,h0(v,y))}catch(B){Q(B,null)}else c.push(PZ(v,y,Q))},h=0;h<l;++h)d(h);return u}function rse(n,e){e||(e={});var t={},r=[];Q_(n,"",t,e);var i=0,s=0;for(var o in t){var a=t[o],l=a[0],A=a[1],c=A.level==0?0:8,u=ec(o),f=u.length,d=A.comment,h=d&&ec(d),p=h&&h.length,m=WA(A.extra);if(f>65535)throw"filename too long";var g=c?h0(l,A):l,v=g.length,y=Oh();y.p(l),r.push(d0(A,{size:l.length,crc:y.d(),c:g,f:u,m:h,u:f!=o.length||h&&d.length!=p,o:i,compression:c})),i+=30+f+m+v,s+=76+2*(f+m)+(p||0)+v}for(var w=new Ut(s+22),C=i,b=s-i,F=0;F<r.length;++F){var u=r[F];Bh(w,u.o,u,u.f,u.u,u.c.length);var x=30+u.f.length+WA(u.extra);w.set(u.c,u.o+x),Bh(w,i,u,u.f,u.u,u.c.length,u.o,u.m),i+=16+x+(u.m?u.m.length:0)}return M_(w,i,r.length,b,C),w}var $Z=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),ise=function(){function n(){var e=this;this.i=new Ni(function(t,r){e.ondata(null,t,r)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},n.compression=8,n}(),sse=function(){function n(e,t){var r=this;t<32e4?this.i=new Ni(function(i,s){r.ondata(null,i,s)}):(this.i=new S_(function(i,s,o){r.ondata(i,s,o)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Xs(e,0)),this.i.push(e,t)},n.compression=8,n}(),ose=function(){function n(e){this.onfile=e,this.k=[],this.o={0:$Z},this.p=Bl}return n.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var i=Math.min(this.c,e.length),s=e.subarray(0,i);if(this.c-=i,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(i),e.length)return this.push(e,t)}else{var o=0,a=0,l=void 0,A=void 0;this.p.length?e.length?(A=new Ut(this.p.length+e.length),A.set(this.p),A.set(e,this.p.length)):A=this.p:A=e;for(var c=A.length,u=this.c,f=u&&this.d,d=function(){var g,v=zn(A,a);if(v==67324752){o=1,l=a,h.d=null,h.c=0;var y=ui(A,a+6),w=ui(A,a+8),C=y&2048,b=y&8,F=ui(A,a+26),x=ui(A,a+28);if(c>a+30+F+x){var S=[];h.k.unshift(S),o=2;var R=zn(A,a+18),Z=zn(A,a+22),Y=R_(A.subarray(a+30,a+=30+F),!C);R==4294967295?(g=b?[-2]:jZ(A,a),R=g[0],Z=g[1]):b&&(R=-1),a+=x,h.c=R;var Q,B={name:Y,compression:w,start:function(){if(!B.ondata)throw"no callback";if(!R)B.ondata(null,Bl,!0);else{var E=r.o[w];if(!E)throw"unknown compression type "+w;Q=R<0?new E(Y):new E(Y,R,Z),Q.ondata=function(V,G,P){B.ondata(V,G,P)};for(var M=0,D=S;M<D.length;M++){var T=D[M];Q.push(T,!1)}r.k[0]==S&&r.c?r.d=Q:Q.push(Bl,!0)}},terminate:function(){Q&&Q.terminate&&Q.terminate()}};R>=0&&(B.size=R,B.originalSize=Z),h.onfile(B)}return"break"}else if(u){if(v==134695760)return l=a+=12+(u==-2&&8),o=3,h.c=0,"break";if(v==33639248)return l=a-=4,o=3,h.c=0,"break"}},h=this;a<c-4;++a){var p=d();if(p==="break")break}if(this.p=Bl,u<0){var m=o?A.subarray(0,l-12-(u==-2&&8)-(zn(A,l-16)==134695760&&4)):A.subarray(0,a);f?f.push(m,!!o):this.k[+(o==2)].push(m)}if(o&2)return this.push(A.subarray(a),t);this.p=A.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function ase(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var f=0;f<t.length;++f)t[f]()},i={},s=n.length-22;zn(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var o=ui(n,s+8);o||e(null,{});var a=o,l=zn(n,s+16),A=l==4294967295;if(A){if(s=zn(n,s-12),zn(n,s)!=101075792){e("invalid zip file",null);return}a=o=zn(n,s+32),l=zn(n,s+48)}for(var c=function(f){var d=KZ(n,l,A),h=d[0],p=d[1],m=d[2],g=d[3],v=d[4],y=d[5],w=XZ(n,y);l=v;var C=function(F,x){F?(r(),e(F,null)):(i[g]=x,--o||e(null,i))};if(!h)C(null,Xs(n,w,w+p));else if(h==8){var b=n.subarray(w,w+p);if(p<32e4)try{C(null,zh(b,new Ut(m)))}catch(F){C(F,null)}else t.push(__(b,{size:m},C))}else C("unknown compression type "+h,null)},u=0;u<a;++u)c();return r}function lse(n){for(var e={},t=n.length-22;zn(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var r=ui(n,t+8);if(!r)return{};var i=zn(n,t+16),s=i==4294967295;if(s){if(t=zn(n,t-12),zn(n,t)!=101075792)throw"invalid zip file";r=zn(n,t+32),i=zn(n,t+48)}for(var o=0;o<r;++o){var a=KZ(n,i,s),l=a[0],A=a[1],c=a[2],u=a[3],f=a[4],d=a[5],h=XZ(n,d);if(i=f,!l)e[u]=Xs(n,h,h+A);else if(l==8)e[u]=zh(n.subarray(h,h+A),new Ut(c));else throw"unknown compression type "+l}return e}const Ase=Object.freeze(Object.defineProperty({__proto__:null,AsyncCompress:vN,AsyncDecompress:Yie,AsyncDeflate:LZ,AsyncGunzip:WZ,AsyncGzip:vN,AsyncInflate:S_,AsyncUnzipInflate:sse,AsyncUnzlib:GZ,AsyncZipDeflate:ese,AsyncZlib:Hie,Compress:Bw,DecodeUTF8:jie,Decompress:JZ,Deflate:Qa,EncodeUTF8:$ie,Gunzip:Cw,Gzip:Bw,Inflate:Ni,Unzip:ose,UnzipInflate:ise,UnzipPassThrough:$Z,Unzlib:xw,Zip:tse,ZipDeflate:qie,ZipPassThrough:Qm,Zlib:IE,compress:yN,compressSync:ww,decompress:Xie,decompressSync:Kie,deflate:PZ,deflateSync:h0,gunzip:OZ,gunzipSync:bw,gzip:yN,gzipSync:ww,inflate:__,inflateSync:zh,strFromU8:R_,strToU8:ec,unzip:ase,unzipSync:lse,unzlib:ZZ,unzlibSync:_m,zip:nse,zipSync:rse,zlib:zie,zlibSync:FE},Symbol.toStringTag,{value:"Module"}));function qZ(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,s=r,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function cse(n,e,t,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-r[n+1-a],o[a]=r[n+a]-e;let l=0;for(let A=0;A<a;++A){const c=o[A+1],u=s[a-A],f=i[A]/(c+u);i[A]=l+c*f,l=u*f}i[a]=l}return i}function use(n,e,t,r){const i=qZ(n,r,e),s=cse(i,r,n,e),o=new Pt(0,0,0,0);for(let a=0;a<=n;++a){const l=t[i-n+a],A=s[a],c=l.w*A;o.x+=l.x*c,o.y+=l.y*c,o.z+=l.z*c,o.w+=l.w*A}return o}function fse(n,e,t,r,i){const s=[];for(let u=0;u<=t;++u)s[u]=0;const o=[];for(let u=0;u<=r;++u)o[u]=s.slice(0);const a=[];for(let u=0;u<=t;++u)a[u]=s.slice(0);a[0][0]=1;const l=s.slice(0),A=s.slice(0);for(let u=1;u<=t;++u){l[u]=e-i[n+1-u],A[u]=i[n+u]-e;let f=0;for(let d=0;d<u;++d){const h=A[d+1],p=l[u-d];a[u][d]=h+p;const m=a[d][u-1]/a[u][d];a[d][u]=f+h*m,f=p*m}a[u][u]=f}for(let u=0;u<=t;++u)o[0][u]=a[u][t];for(let u=0;u<=t;++u){let f=0,d=1;const h=[];for(let p=0;p<=t;++p)h[p]=s.slice(0);h[0][0]=1;for(let p=1;p<=r;++p){let m=0;const g=u-p,v=t-p;u>=p&&(h[d][0]=h[f][0]/a[v+1][g],m=h[d][0]*a[g][v]);const y=g>=-1?1:-g,w=u-1<=v?p-1:t-u;for(let b=y;b<=w;++b)h[d][b]=(h[f][b]-h[f][b-1])/a[v+1][g+b],m+=h[d][b]*a[g+b][v];u<=v&&(h[d][p]=-h[f][p-1]/a[v+1][u],m+=h[d][p]*a[u][v]),o[p][u]=m;const C=f;f=d,d=C}}let c=t;for(let u=1;u<=r;++u){for(let f=0;f<=t;++f)o[u][f]*=c;c*=t-u}return o}function dse(n,e,t,r,i){const s=i<n?i:n,o=[],a=qZ(n,r,e),l=fse(a,r,n,s,e),A=[];for(let c=0;c<t.length;++c){const u=t[c].clone(),f=u.w;u.x*=f,u.y*=f,u.z*=f,A[c]=u}for(let c=0;c<=s;++c){const u=A[a-n].clone().multiplyScalar(l[c][0]);for(let f=1;f<=n;++f)u.add(A[a-n+f].clone().multiplyScalar(l[c][f]));o[c]=u}for(let c=s+1;c<=i+1;++c)o[c]=new Pt(0,0,0);return o}function hse(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function pse(n){const e=n.length,t=[],r=[];for(let s=0;s<e;++s){const o=n[s];t[s]=new X(o.x,o.y,o.z),r[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(hse(s,a)*r[a]));i[s]=o.divideScalar(r[0])}return i}function gse(n,e,t,r,i){const s=dse(n,e,t,r,i);return pse(s)}class wN extends Vre{constructor(e,t,r,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<r.length;++o){const a=r[o];this.controlPoints[o]=new Pt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new X){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=use(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),r.set(s.x,s.y,s.z)}getTangent(e,t=new X){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=gse(this.degree,this.knots,this.controlPoints,i,1);return r.copy(s[1]).normalize(),r}}let It,Gn,Bi;class mse extends Lh{constructor(e){super(e)}load(e,t,r,i){const s=this,o=s.path===""?Ca.extractUrlBase(e):s.path,a=new p_(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(A){i?i(A):console.error(A),s.manager.itemError(e)}},r,i)}parse(e,t){if(bse(e))It=new Cse().parse(e);else{const i=rJ(e);if(!xse(i))throw new Error("THREE.FBXLoader: Unknown format.");if(bN(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+bN(i));It=new wse().parse(i)}const r=new Qu(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new vse(r,this.manager).parse(It)}}class vse{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Gn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),s=new yse().parse(i);return this.parseScene(i,s,r),Bi}parseConnections(){const e=new Map;return"Connections"in It&&It.Connections.connections.forEach(function(r){const i=r[0],s=r[1],o=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:i,relationship:o};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in It.Objects){const r=It.Objects.Video;for(const i in r){const s=r[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const A=this.parseImage(r[i]);t[s.RelativeFilename||s.Filename]=A}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in It.Objects){const r=It.Objects.Texture;for(const i in r){const s=this.parseTexture(r[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(r.wrapS=o===0?ds:ci,r.wrapT=a===0?ds:ci,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,s=Gn.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(r=t[s[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new nr):(l.setPath(this.textureLoader.path),o=l.load(r))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new nr):o=this.textureLoader.load(r);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in It.Objects){const r=It.Objects.Material;for(const i in r){const s=this.parseMaterial(r[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Gn.has(r))return null;const o=this.parseParameters(e,t,r);let a;switch(s.toLowerCase()){case"phong":a=new yI;break;case"lambert":a=new Lre;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new yI;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Re().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Re().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Re().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Re().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Re().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Re().fromArray(e.SpecularColor.value));const s=this;return Gn.get(r).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&(i.map.encoding=ht);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=ht);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=uw,i.envMap.encoding=ht);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&(i.specularMap.encoding=ht);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in It.Objects&&t in It.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Gn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in It.Objects){const r=It.Objects.Deformer;for(const i in r){const s=r[i],o=Gn.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,r);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,r),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new Le().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Gn.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(a)}return r}parseScene(e,t,r){Bi=new Qr;const i=this.parseModels(e.skeletons,t,r),s=It.Objects.Model,o=this;i.forEach(function(l){const A=s[l.ID];o.setLookAtProperties(l,A),Gn.get(l.ID).parents.forEach(function(u){const f=i.get(u.ID);f!==void 0&&f.add(l)}),l.parent===null&&Bi.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),Bi.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const A=tJ(l.userData.transformData);l.applyMatrix4(A),l.updateWorldMatrix()}});const a=new Bse().parse();Bi.children.length===1&&Bi.children[0].isGroup&&(Bi.children[0].animations=a,Bi=Bi.children[0]),Bi.animations=a}parseModels(e,t,r){const i=new Map,s=It.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],A=Gn.get(a);let c=this.buildSkeleton(A,e,a,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(A);break;case"Light":c=this.createLight(A);break;case"Mesh":c=this.createMesh(A,t,r);break;case"NurbsCurve":c=this.createCurve(A,t);break;case"LimbNode":case"Root":c=new Fm;break;case"Null":default:c=new Qr;break}c.name=l.attrName?Bt.sanitizeNodeName(l.attrName):"",c.ID=a}this.getTransformData(c,l),i.set(a,c)}return i}buildSkeleton(e,t,r,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(A,c){if(A.ID===o.ID){const u=s;s=new Fm,s.matrixWorld.copy(A.transformLink),s.name=i?Bt.sanitizeNodeName(i):"",s.ID=r,l.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let t,r;if(e.children.forEach(function(i){const s=It.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Nt;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let s=1;r.NearPlane!==void 0&&(s=r.NearPlane.value/1e3);let o=1e3;r.FarPlane!==void 0&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(a=r.AspectWidth.value,l=r.AspectHeight.value);const A=a/l;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const u=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new _r(c,A,s,o),u!==null&&t.setFocalLength(u);break;case 1:t=new l0(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Nt;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const s=It.Objects.NodeAttribute[i.ID];s!==void 0&&(r=s)}),r===void 0)t=new Nt;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let s=16777215;r.Color!==void 0&&(s=new Re().fromArray(r.Color.value));let o=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(o=0);let a=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?a=0:a=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new gE(s,o,a,l);break;case 1:t=new m_(s,o);break;case 2:let A=Math.PI/3;r.InnerAngle!==void 0&&(A=Lt.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=Lt.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new hZ(s,o,a,A,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new gE(s,o);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),r.has(l.ID)&&a.push(r.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new yI({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new Nh(s,o),i.normalizeSkinWeights()):i=new Vn(s,o),i}createCurve(e,t){const r=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new Pl({color:3342591,linewidth:1});return new Dh(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=nJ(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Gn.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=It.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),Bi.add(e.target)):e.lookAt(new X().fromArray(o))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Gn.get(parseInt(o.ID)).parents.forEach(function(l){if(t.has(l.ID)){const A=l.ID;Gn.get(A).parents.forEach(function(u){r.has(u.ID)&&r.get(u.ID).bind(new dc(o.bones),i[u.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in It.Objects){const t=It.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new Le().fromArray(s.Matrix.a)}):e[i.Node]=new Le().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in It&&"AmbientColor"in It.GlobalSettings){const e=It.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const s=new Re(t,r,i);Bi.add(new pZ(s,1))}}}}class yse{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in It.Objects){const r=It.Objects.Geometry;for(const i in r){const s=Gn.get(parseInt(i)),o=this.parseGeometry(s,r[i],e);t.set(parseInt(i),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,s=[],o=e.parents.map(function(u){return It.Objects.Model[u.ID]});if(o.length===0)return;const a=e.children.reduce(function(u,f){return i[f.ID]!==void 0&&(u=i[f.ID]),u},null);e.children.forEach(function(u){r.morphTargets[u.ID]!==void 0&&s.push(r.morphTargets[u.ID])});const l=o[0],A={};"RotationOrder"in l&&(A.eulerOrder=nJ(l.RotationOrder.value)),"InheritType"in l&&(A.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(A.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(A.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(A.scale=l.GeometricScaling.value);const c=tJ(A);return this.genGeometry(t,a,s,c)}genGeometry(e,t,r,i){const s=new $t;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new bn(a.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new bn(a.colors,3)),t&&(s.setAttribute("skinIndex",new ZC(a.weightsIndices,4)),s.setAttribute("skinWeight",new bn(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const A=new Dn().getNormalMatrix(i),c=new bn(a.normal,3);c.applyNormalMatrix(A),s.setAttribute("normal",c)}if(a.uvs.forEach(function(A,c){let u="uv"+(c+1).toString();c===0&&(u="uv"),s.setAttribute(u,new bn(a.uvs[c],2))}),o.material&&o.material.mappingType!=="AllSame"){let A=a.materialIndex[0],c=0;if(a.materialIndex.forEach(function(u,f){u!==A&&(s.addGroup(c,f-c,A),A=u,c=f)}),s.groups.length>0){const u=s.groups[s.groups.length-1],f=u.start+u.count;f!==a.materialIndex.length&&s.addGroup(f,a.materialIndex.length-f,A)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,r,i),s}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){r.weightTable[o]===void 0&&(r.weightTable[o]=[]),r.weightTable[o].push({id:s,weight:i.weights[a]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,s=!1,o=[],a=[],l=[],A=[],c=[],u=[];const f=this;return e.vertexIndices.forEach(function(d,h){let p,m=!1;d<0&&(d=d^-1,m=!0);let g=[],v=[];if(o.push(d*3,d*3+1,d*3+2),e.color){const y=_v(h,r,d,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){v.push(y.weight),g.push(y.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],w=[0,0,0,0];v.forEach(function(C,b){let F=C,x=g[b];w.forEach(function(S,R,Z){if(F>S){Z[R]=F,F=S;const Y=y[R];y[R]=x,x=Y}})}),g=y,v=w}for(;v.length<4;)v.push(0),g.push(0);for(let y=0;y<4;++y)c.push(v[y]),u.push(g[y])}if(e.normal){const y=_v(h,r,d,e.normal);a.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(p=_v(h,r,d,e.material)[0],p<0&&(f.negativeMaterialIndices=!0,p=0)),e.uv&&e.uv.forEach(function(y,w){const C=_v(h,r,d,y);A[w]===void 0&&(A[w]=[]),A[w].push(C[0]),A[w].push(C[1])}),i++,m&&(f.genFace(t,e,o,p,a,l,A,c,u,i),r++,i=0,o=[],a=[],l=[],A=[],c=[],u=[])}),t}genFace(e,t,r,i,s,o,a,l,A,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(u-1)*3]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(u-1)*3+2]]),e.vertex.push(t.vertexPositions[r[u*3]]),e.vertex.push(t.vertexPositions[r[u*3+1]]),e.vertex.push(t.vertexPositions[r[u*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(u-1)*4]),e.vertexWeights.push(l[(u-1)*4+1]),e.vertexWeights.push(l[(u-1)*4+2]),e.vertexWeights.push(l[(u-1)*4+3]),e.vertexWeights.push(l[u*4]),e.vertexWeights.push(l[u*4+1]),e.vertexWeights.push(l[u*4+2]),e.vertexWeights.push(l[u*4+3]),e.weightsIndices.push(A[0]),e.weightsIndices.push(A[1]),e.weightsIndices.push(A[2]),e.weightsIndices.push(A[3]),e.weightsIndices.push(A[(u-1)*4]),e.weightsIndices.push(A[(u-1)*4+1]),e.weightsIndices.push(A[(u-1)*4+2]),e.weightsIndices.push(A[(u-1)*4+3]),e.weightsIndices.push(A[u*4]),e.weightsIndices.push(A[u*4+1]),e.weightsIndices.push(A[u*4+2]),e.weightsIndices.push(A[u*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(u-1)*3]),e.colors.push(o[(u-1)*3+1]),e.colors.push(o[(u-1)*3+2]),e.colors.push(o[u*3]),e.colors.push(o[u*3+1]),e.colors.push(o[u*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(u-1)*3]),e.normal.push(s[(u-1)*3+1]),e.normal.push(s[(u-1)*3+2]),e.normal.push(s[u*3]),e.normal.push(s[u*3+1]),e.normal.push(s[u*3+2])),t.uv&&t.uv.forEach(function(f,d){e.uvs[d]===void 0&&(e.uvs[d]=[]),e.uvs[d].push(a[d][0]),e.uvs[d].push(a[d][1]),e.uvs[d].push(a[d][(u-1)*2]),e.uvs[d].push(a[d][(u-1)*2+1]),e.uvs[d].push(a[d][u*2]),e.uvs[d].push(a[d][u*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;r.forEach(function(o){o.rawTargets.forEach(function(a){const l=It.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,i,a.name)})})}genMorphGeometry(e,t,r,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],A=e.attributes.position.count*3,c=new Float32Array(A);for(let h=0;h<l.length;h++){const p=l[h]*3;c[p]=a[h*3],c[p+1]=a[h*3+1],c[p+2]=a[h*3+2]}const u={vertexIndices:o,vertexPositions:c},f=this.genBuffers(u),d=new bn(f.vertex,3);d.name=s||r.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let s=[];return r==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let s=[];return r==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let s=[];return r==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(wN===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new $t;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new $t;const r=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,f=o.length;u<f;u+=4)s.push(new Pt().fromArray(o,u));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=r,l=i.length-1-a;for(let u=0;u<r;++u)s.push(s[u])}const c=new wN(r,i,s,a,l).getPoints(s.length*12);return new $t().setFromPoints(c)}}class Bse{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],s=this.addClip(i);e.push(s)}return e}parseClips(){if(It.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=It.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=It.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Ise),values:t[r].KeyValueFloat.a},s=Gn.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=It.Objects.AnimationLayer,r=new Map;for(const i in t){const s=[],o=Gn.get(parseInt(i));o!==void 0&&(o.children.forEach(function(l,A){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[A]===void 0){const u=Gn.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(u!==void 0){const f=It.Objects.Model[u.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const d={modelName:f.attrName?Bt.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Bi.traverse(function(h){h.ID===f.id&&(d.transform=h.matrix,h.userData.transformData&&(d.eulerOrder=h.userData.transformData.eulerOrder))}),d.transform||(d.transform=new Le),"PreRotation"in f&&(d.preRotation=f.PreRotation.value),"PostRotation"in f&&(d.postRotation=f.PostRotation.value),s[A]=d}}s[A]&&(s[A][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[A]===void 0){const u=Gn.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=Gn.get(u).parents[0].ID,d=Gn.get(f).parents[0].ID,h=Gn.get(d).parents[0].ID,p=It.Objects.Model[h],m={modelName:p.attrName?Bt.sanitizeNodeName(p.attrName):"",morphName:It.Objects.Deformer[u].attrName};s[A]=m}s[A][c.attr]=c}}}),r.set(parseInt(i),s))}return r}parseAnimStacks(e){const t=It.Objects.AnimationStack,r={};for(const i in t){const s=Gn.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);r[i]={name:t[i].attrName,layer:o}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new mu(e.name,-1,t)}generateTracks(e){const t=[];let r=new X,i=new et,s=new X;if(e.transform&&e.transform.decompose(r,i,s),r=r.toArray(),i=new zr().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,r,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,r);return new qA(e+"."+i,s,o)}generateRotationTrack(e,t,r,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Lt.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Lt.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Lt.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,r);i!==void 0&&(i=i.map(Lt.degToRad),i.push(o),i=new zr().fromArray(i),i=new et().setFromEuler(i)),s!==void 0&&(s=s.map(Lt.degToRad),s.push(o),s=new zr().fromArray(s),s=new et().setFromEuler(s).invert());const A=new et,c=new zr,u=[];for(let f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],o),A.setFromEuler(c),i!==void 0&&A.premultiply(i),s!==void 0&&A.multiply(s),A.toArray(u,f/3*4);return new _a(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(s){return s/100}),i=Bi.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new mh(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[r]=o,i=o,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(A){if(t.x&&(o=t.x.times.indexOf(A)),t.y&&(a=t.y.times.indexOf(A)),t.z&&(l=t.z.times.indexOf(A)),o!==-1){const c=t.x.values[o];s.push(c),i[0]=c}else s.push(i[0]);if(a!==-1){const c=t.y.values[a];s.push(c),i[1]=c}else s.push(i[1]);if(l!==-1){const c=t.z.values[l];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let l=r+a;const A=e.times[t-1],u=(e.times[t]-A)/o;let f=A+u;const d=[],h=[];for(;f<e.times[t];)d.push(f),f+=u,h.push(l),l+=a;e.times=xN(e.times,t,d),e.values=xN(e.values,t,h)}}}}class wse{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new eJ,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),A=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):A?t.parseNodeProperty(i,A,r[++s]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:r},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,s):r in a?(r==="PoseNode"?a.PoseNode.push(s):a[r].id!==void 0&&(a[r]={},a[r][a[r].id]=a[r]),o.id!==""&&(a[r][o.id]=s)):typeof o.id=="number"?(a[r]={},a[r][o.id]=s):r!=="Properties70"&&(r==="PoseNode"?a[r]=[s]:a[r]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=r.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const l=s.split(",").slice(1),A=parseInt(l[0]),c=parseInt(l[1]);let u=s.split(",").slice(3);u=u.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",s=[A,c],Ese(s,u),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=FI(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=FI(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],l=i[3];let A=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":A=parseFloat(A);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":A=FI(A);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:A},this.setCurrentProp(this.getPrevNode(),s)}}class Cse{parse(e){const t=new CN(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new eJ;for(;!this.endOfContent(t);){const s=this.parseNode(t,r);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const A=l.length>0?l[0]:"",c=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(r.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(a,r,f)}return r.propertyList=l,typeof A=="number"&&(r.id=A),c!==""&&(r.attrName=c),u!==""&&(r.attrType=u),a!==""&&(r.name=a),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(s){t[s]=r[s]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],s=r.propertyList[1];const o=r.propertyList[2],a=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:s,type2:o,flag:a,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}typeof Ase>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const a=_m(new Uint8Array(e.getArrayBuffer(o))),l=new CN(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class CN{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),Ca.decodeText(new Uint8Array(t))}}class eJ{add(e,t){this[e]=t}}function bse(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===rJ(n,0,e.length)}function xse(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const s=n[i-1];return n=n.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function bN(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ise(n){return n/46186158e3}const Fse=[];function _v(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return Use(Fse,r.buffer,s,o)}const II=new zr,af=new X;function tJ(n){const e=new Le,t=new Le,r=new Le,i=new Le,s=new Le,o=new Le,a=new Le,l=new Le,A=new Le,c=new Le,u=new Le,f=new Le,d=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(af.fromArray(n.translation)),n.preRotation){const R=n.preRotation.map(Lt.degToRad);R.push(n.eulerOrder||zr.DefaultOrder),t.makeRotationFromEuler(II.fromArray(R))}if(n.rotation){const R=n.rotation.map(Lt.degToRad);R.push(n.eulerOrder||zr.DefaultOrder),r.makeRotationFromEuler(II.fromArray(R))}if(n.postRotation){const R=n.postRotation.map(Lt.degToRad);R.push(n.eulerOrder||zr.DefaultOrder),i.makeRotationFromEuler(II.fromArray(R)),i.invert()}n.scale&&s.scale(af.fromArray(n.scale)),n.scalingOffset&&a.setPosition(af.fromArray(n.scalingOffset)),n.scalingPivot&&o.setPosition(af.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(af.fromArray(n.rotationOffset)),n.rotationPivot&&A.setPosition(af.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(u.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const h=t.clone().multiply(r).multiply(i),p=new Le;p.extractRotation(c);const m=new Le;m.copyPosition(c);const g=m.clone().invert().multiply(c),v=p.clone().invert().multiply(g),y=s,w=new Le;if(d===0)w.copy(p).multiply(h).multiply(v).multiply(y);else if(d===1)w.copy(p).multiply(v).multiply(h).multiply(y);else{const Z=new Le().scale(new X().setFromMatrixScale(u)).clone().invert(),Y=v.clone().multiply(Z);w.copy(p).multiply(h).multiply(Y).multiply(y)}const C=A.clone().invert(),b=o.clone().invert();let F=e.clone().multiply(l).multiply(A).multiply(t).multiply(r).multiply(i).multiply(C).multiply(a).multiply(o).multiply(s).multiply(b);const x=new Le().copyPosition(F),S=c.clone().multiply(x);return f.copyPosition(S),F=f.clone().multiply(w),F.premultiply(c.invert()),F}function nJ(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function FI(n){return n.split(",").map(function(t){return parseFloat(t)})}function rJ(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Ca.decodeText(new Uint8Array(n,e,t))}function Ese(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Use(n,e,t,r){for(let i=t,s=0;i<r;i++,s++)n[s]=e[i];return n}function xN(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class T_{constructor(){this.pluginCallbacks=[],this.register(function(e){return new kse(e)}),this.register(function(e){return new Vse(e)}),this.register(function(e){return new Lse(e)}),this.register(function(e){return new Ose(e)}),this.register(function(e){return new Gse(e)}),this.register(function(e){return new Pse(e)}),this.register(function(e){return new Wse(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){const s=new Dse,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](s));s.setPlugins(o),s.write(e,t,i).catch(r)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,i,s,t)})}}const nn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},os={};os[Br]=nn.NEAREST;os[fw]=nn.NEAREST_MIPMAP_NEAREST;os[dw]=nn.NEAREST_MIPMAP_LINEAR;os[oi]=nn.LINEAR;os[o_]=nn.LINEAR_MIPMAP_NEAREST;os[Uu]=nn.LINEAR_MIPMAP_LINEAR;os[ci]=nn.CLAMP_TO_EDGE;os[ds]=nn.REPEAT;os[Cm]=nn.MIRRORED_REPEAT;const IN={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},FN=12,Sse=1179937895,_se=2,EN=8,Qse=1313821514,Rse=5130562;function cg(n,e){return n.length===e.length&&n.every(function(t,r){return t===e[r]})}function Mse(n){return new TextEncoder().encode(n).buffer}function Tse(n){return cg(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Nse(n,e,t){const r={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+t;i++)for(let s=0;s<n.itemSize;s++){let o;n.itemSize>4?o=n.array[i*n.itemSize+s]:s===0?o=n.getX(i):s===1?o=n.getY(i):s===2?o=n.getZ(i):s===3&&(o=n.getW(i)),r.min[s]=Math.min(r.min[s],o),r.max[s]=Math.max(r.max[s],o)}return r}function iJ(n){return Math.ceil(n/4)*4}function EI(n,e=0){const t=iJ(n.byteLength);if(t!==n.byteLength){const r=new Uint8Array(t);if(r.set(new Uint8Array(n)),e!==0)for(let i=n.byteLength;i<t;i++)r[i]=e;return r.buffer}return n}function UN(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function SN(n,e){if(n.toBlob!==void 0)return new Promise(r=>n.toBlob(r,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class Dse{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,r){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},r),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,o=i.json;r=i.options;const a=i.extensionsUsed,l=new Blob(s,{type:"application/octet-stream"}),A=Object.keys(a);if(A.length>0&&(o.extensionsUsed=A),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),r.binary===!0){const c=new FileReader;c.readAsArrayBuffer(l),c.onloadend=function(){const u=EI(c.result),f=new DataView(new ArrayBuffer(EN));f.setUint32(0,u.byteLength,!0),f.setUint32(4,Rse,!0);const d=EI(Mse(JSON.stringify(o)),32),h=new DataView(new ArrayBuffer(EN));h.setUint32(0,d.byteLength,!0),h.setUint32(4,Qse,!0);const p=new ArrayBuffer(FN),m=new DataView(p);m.setUint32(0,Sse,!0),m.setUint32(4,_se,!0);const g=FN+h.byteLength+d.byteLength+f.byteLength+u.byteLength;m.setUint32(8,g,!0);const v=new Blob([p,h,d,f,u],{type:"application/octet-stream"}),y=new FileReader;y.readAsArrayBuffer(v),y.onloadend=function(){t(y.result)}}}else if(o.buffers&&o.buffers.length>0){const c=new FileReader;c.readAsDataURL(l),c.onloadend=function(){const u=c.result;o.buffers[0].uri=u,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const r=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in s.gltfExtensions)t.extensions[o]=s.gltfExtensions[o],i[o]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const i=new Map;i.set(!0,this.uid++),i.set(!1,this.uid++),this.uids.set(e,i)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new X;for(let i=0,s=e.count;i<s;i++)if(Math.abs(r.fromBufferAttribute(e,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const r=e.clone(),i=new X;for(let s=0,o=r.count;s<o;s++)i.fromBufferAttribute(r,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),r.setXYZ(s,i.x,i.y,i.z);return t.attributesNormalized.set(e,r),r}applyTextureTransform(e,t){let r=!1;const i={};(t.offset.x!==0||t.offset.y!==0)&&(i.offset=t.offset.toArray(),r=!0),t.rotation!==0&&(i.rotation=t.rotation,r=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(i.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function r(d){return d.encoding===ht?function(p){return p<.04045?p*.0773993808:Math.pow(p*.9478672986+.0521327014,2.4)}:function(p){return p}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const i=e==null?void 0:e.image,s=t==null?void 0:t.image,o=Math.max((i==null?void 0:i.width)||0,(s==null?void 0:s.width)||0),a=Math.max((i==null?void 0:i.height)||0,(s==null?void 0:s.height)||0),l=UN();l.width=o,l.height=a;const A=l.getContext("2d");A.fillStyle="#00ffff",A.fillRect(0,0,o,a);const c=A.getImageData(0,0,o,a);if(i){A.drawImage(i,0,0,o,a);const d=r(e),h=A.getImageData(0,0,o,a).data;for(let p=2;p<h.length;p+=4)c.data[p]=d(h[p]/256)*256}if(s){A.drawImage(s,0,0,o,a);const d=r(t),h=A.getImageData(0,0,o,a).data;for(let p=1;p<h.length;p+=4)c.data[p]=d(h[p]/256)*256}A.putImageData(c,0,0);const f=(e||t).clone();return f.source=new A_(l),f.encoding=no,f}processBuffer(e){const t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}processBufferView(e,t,r,i,s){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;t===nn.UNSIGNED_BYTE?a=1:t===nn.UNSIGNED_SHORT?a=2:a=4;const l=iJ(i*e.itemSize*a),A=new DataView(new ArrayBuffer(l));let c=0;for(let d=r;d<r+i;d++)for(let h=0;h<e.itemSize;h++){let p;e.itemSize>4?p=e.array[d*e.itemSize+h]:h===0?p=e.getX(d):h===1?p=e.getY(d):h===2?p=e.getZ(d):h===3&&(p=e.getW(d)),t===nn.FLOAT?A.setFloat32(c,p,!0):t===nn.UNSIGNED_INT?A.setUint32(c,p,!0):t===nn.UNSIGNED_SHORT?A.setUint16(c,p,!0):t===nn.UNSIGNED_BYTE&&A.setUint8(c,p),c+=a}const u={buffer:this.processBuffer(A.buffer),byteOffset:this.byteOffset,byteLength:l};return s!==void 0&&(u.target=s),s===nn.ARRAY_BUFFER&&(u.byteStride=e.itemSize*a),this.byteOffset+=l,o.bufferViews.push(u),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const o=EI(s.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,i(r.bufferViews.push(a)-1)}})}processAccessor(e,t,r,i){const s=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=nn.FLOAT;else if(e.array.constructor===Uint32Array)a=nn.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)a=nn.UNSIGNED_SHORT;else if(e.array.constructor===Uint8Array)a=nn.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(r===void 0&&(r=0),i===void 0&&(i=e.count),i===0)return null;const l=Nse(e,r,i);let A;t!==void 0&&(A=e===t.index?nn.ELEMENT_ARRAY_BUFFER:nn.ARRAY_BUFFER);const c=this.processBufferView(e,a,r,i,A),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:a,count:i,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,r,i="image/png"){const s=this,o=s.cache,a=s.json,l=s.options,A=s.pending;o.images.has(e)||o.images.set(e,{});const c=o.images.get(e),u=i+":flipY/"+r.toString();if(c[u]!==void 0)return c[u];a.images||(a.images=[]);const f={mimeType:i},d=UN();d.width=Math.min(e.width,l.maxTextureSize),d.height=Math.min(e.height,l.maxTextureSize);const h=d.getContext("2d");if(r===!0&&(h.translate(0,d.height),h.scale(1,-1)),e.data!==void 0){t!==Fi&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const m=new Uint8ClampedArray(e.height*e.width*4);for(let g=0;g<m.length;g+=4)m[g+0]=e.data[g+0],m[g+1]=e.data[g+1],m[g+2]=e.data[g+2],m[g+3]=e.data[g+3];h.putImageData(new ImageData(m,e.width,e.height),0,0)}else h.drawImage(e,0,0,d.width,d.height);l.binary===!0?A.push(SN(d,i).then(m=>s.processBufferViewImage(m)).then(m=>{f.bufferView=m})):d.toDataURL!==void 0?f.uri=d.toDataURL(i):A.push(SN(d,i).then(m=>new FileReader().readAsDataURL(m)).then(m=>{f.uri=m}));const p=a.images.push(f)-1;return c[u]=p,p}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const r={magFilter:os[e.magFilter],minFilter:os[e.minFilter],wrapS:os[e.wrapS],wrapT:os[e.wrapT]};return t.samplers.push(r)-1}processTexture(e){const t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);let i=e.userData.mimeType;i==="image/webp"&&(i="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,i)};e.name&&(s.name=e.name),this._invokeAll(function(a){a.writeTexture&&a.writeTexture(e,s)});const o=r.textures.push(s)-1;return t.textures.set(e,o),o}processMaterial(e){const t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(cg(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const a=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(a)};this.applyTextureTransform(l,a),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),i.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive.clone().multiplyScalar(e.emissiveIntensity),l=Math.max(a.r,a.g,a.b);if(l>1&&(a.multiplyScalar(1/l),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),l>0&&(i.emissiveFactor=a.toArray()),e.emissiveMap){const A={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(A,e.emissiveMap),i.emissiveTexture=A}}if(e.normalMap){const a={index:this.processTexture(e.normalMap)};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),i.normalTexture=a}if(e.aoMap){const a={index:this.processTexture(e.aoMap),texCoord:1};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),i.occlusionTexture=a}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===Ui&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(a){a.writeMaterial&&a.writeMaterial(e,i)});const o=r.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,r=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,w=e.material.length;y<w;y++)i.push(e.material[y].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;e.isLineSegments?a=nn.LINES:e.isLineLoop?a=nn.LINE_LOOP:e.isLine?a=nn.LINE_STRIP:e.isPoints?a=nn.POINTS:a=e.material.wireframe?nn.LINES:nn.TRIANGLES;const l={},A={},c=[],u=[],f={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=o.getAttribute("normal");d!==void 0&&!this.isNormalizedNormalAttribute(d)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let h=null;for(let y in o.attributes){if(y.slice(0,5)==="morph")continue;const w=o.attributes[y];if(y=f[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),t.attributes.has(this.getUID(w))){A[y]=t.attributes.get(this.getUID(w));continue}h=null;const b=w.array;y==="JOINTS_0"&&!(b instanceof Uint16Array)&&!(b instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),h=new At(new Uint16Array(b),w.itemSize,w.normalized));const F=this.processAccessor(h||w,o);F!==null&&(A[y]=F,t.attributes.set(this.getUID(w),F))}if(d!==void 0&&o.setAttribute("normal",d),Object.keys(A).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const y=[],w=[],C={};if(e.morphTargetDictionary!==void 0)for(const b in e.morphTargetDictionary)C[e.morphTargetDictionary[b]]=b;for(let b=0;b<e.morphTargetInfluences.length;++b){const F={};let x=!1;for(const S in o.morphAttributes){if(S!=="position"&&S!=="normal"){x||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),x=!0);continue}const R=o.morphAttributes[S][b],Z=S.toUpperCase(),Y=o.attributes[S];if(t.attributes.has(this.getUID(R,!0))){F[Z]=t.attributes.get(this.getUID(R,!0));continue}const Q=R.clone();if(!o.morphTargetsRelative)for(let B=0,E=R.count;B<E;B++)Q.setXYZ(B,R.getX(B)-Y.getX(B),R.getY(B)-Y.getY(B),R.getZ(B)-Y.getZ(B));F[Z]=this.processAccessor(Q,o),t.attributes.set(this.getUID(Y,!0),F[Z])}u.push(F),y.push(e.morphTargetInfluences[b]),e.morphTargetDictionary!==void 0&&w.push(C[b])}l.weights=y,w.length>0&&(l.extras={},l.extras.targetNames=w)}const p=Array.isArray(e.material);if(p&&o.groups.length===0)return null;const m=p?e.material:[e.material],g=p?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,w=g.length;y<w;y++){const C={mode:a,attributes:A};if(this.serializeUserData(o,C),u.length>0&&(C.targets=u),o.index!==null){let F=this.getUID(o.index);(g[y].start!==void 0||g[y].count!==void 0)&&(F+=":"+g[y].start+":"+g[y].count),t.attributes.has(F)?C.indices=t.attributes.get(F):(C.indices=this.processAccessor(o.index,o,g[y].start,g[y].count),t.attributes.set(F,C.indices)),C.indices===null&&delete C.indices}const b=this.processMaterial(m[g[y].materialIndex]);b!==null&&(C.material=b),c.push(C)}l.primitives=c,r.meshes||(r.meshes=[]),this._invokeAll(function(y){y.writeMesh&&y.writeMesh(e,l)});const v=r.meshes.push(l)-1;return t.meshes.set(s,v),v}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const r=e.isOrthographicCamera,i={type:r?"orthographic":"perspective"};return r?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Lt.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const r=this.json,i=this.nodeMap;r.animations||(r.animations=[]),e=T_.Utils.mergeMorphTargetTracks(e.clone(),t);const s=e.tracks,o=[],a=[];for(let l=0;l<s.length;++l){const A=s[l],c=Bt.parseTrackName(A.name);let u=Bt.findNode(t,c.nodeName);const f=IN[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!f)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',A.name),null;const d=1;let h=A.values.length/A.times.length;f===IN.morphTargetInfluences&&(h/=u.morphTargetInfluences.length);let p;A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(p="CUBICSPLINE",h/=3):A.getInterpolation()===ph?p="STEP":p="LINEAR",a.push({input:this.processAccessor(new At(A.times,d)),output:this.processAccessor(new At(A.values,h)),interpolation:p}),o.push({sampler:a.length-1,target:{node:i.get(u),path:f}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:o}),r.animations.length-1}processSkin(e){const t=this.json,r=this.nodeMap,i=t.nodes[r.get(e)],s=e.skeleton;if(s===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(s.bones.length*16),A=new Le;for(let u=0;u<s.bones.length;++u)a.push(r.get(s.bones[u])),A.copy(s.boneInverses[u]),A.multiply(e.bindMatrix).toArray(l,u*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new At(l,16)),joints:a,skeleton:r.get(o)}),i.skin=t.skins.length-1}processNode(e){const t=this.json,r=this.options,i=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(r.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),A=e.scale.toArray();cg(a,[0,0,0,1])||(s.rotation=a),cg(l,[0,0,0])||(s.translation=l),cg(A,[1,1,1])||(s.scale=A)}else e.matrixAutoUpdate&&e.updateMatrix(),Tse(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const a=this.processMesh(e);a!==null&&(s.mesh=a)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,A=e.children.length;l<A;l++){const c=e.children[l];if(c.visible||r.onlyVisible===!1){const u=this.processNode(c);u!==null&&a.push(u)}}a.length>0&&(s.children=a)}this._invokeAll(function(a){a.writeNode&&a.writeNode(e,s)});const o=t.nodes.push(s)-1;return i.set(e,o),o}processScene(e){const t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);const i={};e.name!==""&&(i.name=e.name),t.scenes.push(i);const s=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||r.onlyVisible===!1){const A=this.processNode(l);A!==null&&s.push(A)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const t=new gw;t.name="AuxScene";for(let r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const r=[];for(let i=0;i<e.length;i++)e[i]instanceof gw?this.processScene(e[i]):r.push(e[i]);r.length>0&&this.processObjects(r);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}class kse{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const r=this.writer,i=r.json,s=r.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const a=i.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class Vse{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const i=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},i[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Lse{constructor(e){this.writer=e,this.name="KHR_materials_pbrSpecularGlossiness"}writeMaterial(e,t){if(!e.isGLTFSpecularGlossinessMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};t.pbrMetallicRoughness.baseColorFactor&&(s.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);const o=[1,1,1];if(e.specular.toArray(o,0),s.specularFactor=o,s.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(s.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){const a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),s.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Pse{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(o,e.clearcoatMap),s.clearcoatTexture=o}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(o,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Wse{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:r.processTexture(e.iridescenceMap)};r.applyTextureTransform(o,e.iridescenceMap),s.iridescenceTexture=o}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:r.processTexture(e.iridescenceThicknessMap)};r.applyTextureTransform(o,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Ose{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const o={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(o,e.transmissionMap),s.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}class Gse{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const r=this.writer,i=r.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const o={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(o,e.thicknessMap),s.thicknessTexture=o}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,i[this.name]=!0}}T_.Utils={insertKeyframe:function(n,e){const r=n.getValueSize(),i=new n.TimeBufferType(n.times.length+1),s=new n.ValueBufferType(n.values.length+r),o=n.createInterpolant(new n.ValueBufferType(r));let a;if(n.times.length===0){i[0]=e;for(let l=0;l<r;l++)s[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;i[0]=e,i.set(n.times,1),s.set(o.evaluate(e),0),s.set(n.values,r),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;i[i.length-1]=e,i.set(n.times,0),s.set(n.values,0),s.set(o.evaluate(e),n.values.length),a=i.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){i.set(n.times.slice(0,l+1),0),i[l+1]=e,i.set(n.times.slice(l+1),l+2),s.set(n.values.slice(0,(l+1)*r),0),s.set(o.evaluate(e),(l+1)*r),s.set(n.values.slice((l+1)*r),(l+2)*r),a=l+1;break}}return n.times=i,n.values=s,a},mergeMorphTargetTracks:function(n,e){const t=[],r={},i=n.tracks;for(let s=0;s<i.length;++s){let o=i[s];const a=Bt.parseTrackName(o.name),l=Bt.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(pu)}const A=l.morphTargetInfluences.length,c=l.morphTargetDictionary[a.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let u;if(r[l.uuid]===void 0){u=o.clone();const d=new u.ValueBufferType(A*u.times.length);for(let h=0;h<u.times.length;h++)d[h*A+c]=u.values[h];u.name=(a.nodeName||"")+".morphTargetInfluences",u.values=d,r[l.uuid]=u,t.push(u);continue}const f=o.createInterpolant(new o.ValueBufferType(1));u=r[l.uuid];for(let d=0;d<u.times.length;d++)u.values[d*A+c]=f.evaluate(u.times[d]);for(let d=0;d<o.times.length;d++){const h=this.insertKeyframe(u,o.times[d]);u.values[h*A+c]=o.values[d]}}return n.tracks=t,n}};var UE={},KC={};KC.byteLength=Hse;KC.toByteArray=Yse;KC.fromByteArray=jse;var Aa=[],Ms=[],Zse=typeof Uint8Array<"u"?Uint8Array:Array,UI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var lf=0,Jse=UI.length;lf<Jse;++lf)Aa[lf]=UI[lf],Ms[UI.charCodeAt(lf)]=lf;Ms["-".charCodeAt(0)]=62;Ms["_".charCodeAt(0)]=63;function sJ(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Hse(n){var e=sJ(n),t=e[0],r=e[1];return(t+r)*3/4-r}function zse(n,e,t){return(e+t)*3/4-t}function Yse(n){var e,t=sJ(n),r=t[0],i=t[1],s=new Zse(zse(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Ms[n.charCodeAt(l)]<<18|Ms[n.charCodeAt(l+1)]<<12|Ms[n.charCodeAt(l+2)]<<6|Ms[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ms[n.charCodeAt(l)]<<2|Ms[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Ms[n.charCodeAt(l)]<<10|Ms[n.charCodeAt(l+1)]<<4|Ms[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Xse(n){return Aa[n>>18&63]+Aa[n>>12&63]+Aa[n>>6&63]+Aa[n&63]}function Kse(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(Xse(r));return i.join("")}function jse(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(Kse(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Aa[e>>2]+Aa[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Aa[e>>10]+Aa[e>>4&63]+Aa[e<<2&63]+"=")),i.join("")}var N_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */N_.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,A=l>>1,c=-7,u=t?i-1:0,f=t?-1:1,d=n[e+u];for(u+=f,s=d&(1<<-c)-1,d>>=-c,c+=a;c>0;s=s*256+n[e+u],u+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=o*256+n[e+u],u+=f,c-=8);if(s===0)s=1-A;else{if(s===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-A}return(d?-1:1)*o*Math.pow(2,s-r)};N_.write=function(n,e,t,r,i,s){var o,a,l,A=s*8-i-1,c=(1<<A)-1,u=c>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,h=r?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+u>=1?e+=f/l:e+=f*Math.pow(2,1-u),e*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,i),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;n[t+d]=a&255,d+=h,a/=256,i-=8);for(o=o<<i|a,A+=i;A>0;n[t+d]=o&255,d+=h,o/=256,A-=8);n[t+d-h]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=KC,t=N_,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const L=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(L,_),L.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(L){if(L>i)throw new RangeError('The value "'+L+'" is invalid for option "size"');const _=new Uint8Array(L);return Object.setPrototypeOf(_,a.prototype),_}function a(L,_,I){if(typeof L=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(L)}return l(L,_,I)}a.poolSize=8192;function l(L,_,I){if(typeof L=="string")return f(L,_);if(ArrayBuffer.isView(L))return h(L);if(L==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(O(L,ArrayBuffer)||L&&O(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(O(L,SharedArrayBuffer)||L&&O(L.buffer,SharedArrayBuffer)))return p(L,_,I);if(typeof L=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=L.valueOf&&L.valueOf();if(N!=null&&N!==L)return a.from(N,_,I);const $=m(L);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof L[Symbol.toPrimitive]=="function")return a.from(L[Symbol.toPrimitive]("string"),_,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}a.from=function(L,_,I){return l(L,_,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function A(L){if(typeof L!="number")throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function c(L,_,I){return A(L),L<=0?o(L):_!==void 0?typeof I=="string"?o(L).fill(_,I):o(L).fill(_):o(L)}a.alloc=function(L,_,I){return c(L,_,I)};function u(L){return A(L),o(L<0?0:g(L)|0)}a.allocUnsafe=function(L){return u(L)},a.allocUnsafeSlow=function(L){return u(L)};function f(L,_){if((typeof _!="string"||_==="")&&(_="utf8"),!a.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const I=y(L,_)|0;let N=o(I);const $=N.write(L,_);return $!==I&&(N=N.slice(0,$)),N}function d(L){const _=L.length<0?0:g(L.length)|0,I=o(_);for(let N=0;N<_;N+=1)I[N]=L[N]&255;return I}function h(L){if(O(L,Uint8Array)){const _=new Uint8Array(L);return p(_.buffer,_.byteOffset,_.byteLength)}return d(L)}function p(L,_,I){if(_<0||L.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<_+(I||0))throw new RangeError('"length" is outside of buffer bounds');let N;return _===void 0&&I===void 0?N=new Uint8Array(L):I===void 0?N=new Uint8Array(L,_):N=new Uint8Array(L,_,I),Object.setPrototypeOf(N,a.prototype),N}function m(L){if(a.isBuffer(L)){const _=g(L.length)|0,I=o(_);return I.length===0||L.copy(I,0,0,_),I}if(L.length!==void 0)return typeof L.length!="number"||J(L.length)?o(0):d(L);if(L.type==="Buffer"&&Array.isArray(L.data))return d(L.data)}function g(L){if(L>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return L|0}function v(L){return+L!=L&&(L=0),a.alloc(+L)}a.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==a.prototype},a.compare=function(_,I){if(O(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),O(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(_)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===I)return 0;let N=_.length,$=I.length;for(let ee=0,te=Math.min(N,$);ee<te;++ee)if(_[ee]!==I[ee]){N=_[ee],$=I[ee];break}return N<$?-1:$<N?1:0},a.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(_,I){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return a.alloc(0);let N;if(I===void 0)for(I=0,N=0;N<_.length;++N)I+=_[N].length;const $=a.allocUnsafe(I);let ee=0;for(N=0;N<_.length;++N){let te=_[N];if(O(te,Uint8Array))ee+te.length>$.length?(a.isBuffer(te)||(te=a.from(te)),te.copy($,ee)):Uint8Array.prototype.set.call($,te,ee);else if(a.isBuffer(te))te.copy($,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=te.length}return $};function y(L,_){if(a.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||O(L,ArrayBuffer))return L.byteLength;if(typeof L!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const I=L.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&I===0)return 0;let $=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return We(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Ge(L).length;default:if($)return N?-1:We(L).length;_=(""+_).toLowerCase(),$=!0}}a.byteLength=y;function w(L,_,I){let N=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,_>>>=0,I<=_))return"";for(L||(L="utf8");;)switch(L){case"hex":return V(this,_,I);case"utf8":case"utf-8":return B(this,_,I);case"ascii":return D(this,_,I);case"latin1":case"binary":return T(this,_,I);case"base64":return Q(this,_,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,_,I);default:if(N)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),N=!0}}a.prototype._isBuffer=!0;function C(L,_,I){const N=L[_];L[_]=L[I],L[I]=N}a.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<_;I+=2)C(this,I,I+1);return this},a.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<_;I+=4)C(this,I,I+3),C(this,I+1,I+2);return this},a.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<_;I+=8)C(this,I,I+7),C(this,I+1,I+6),C(this,I+2,I+5),C(this,I+3,I+4);return this},a.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?B(this,0,_):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(_){if(!a.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:a.compare(this,_)===0},a.prototype.inspect=function(){let _="";const I=n.INSPECT_MAX_BYTES;return _=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(_+=" ... "),"<Buffer "+_+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(_,I,N,$,ee){if(O(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),!a.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(I===void 0&&(I=0),N===void 0&&(N=_?_.length:0),$===void 0&&($=0),ee===void 0&&(ee=this.length),I<0||N>_.length||$<0||ee>this.length)throw new RangeError("out of range index");if($>=ee&&I>=N)return 0;if($>=ee)return-1;if(I>=N)return 1;if(I>>>=0,N>>>=0,$>>>=0,ee>>>=0,this===_)return 0;let te=ee-$,we=N-I;const Ce=Math.min(te,we),Ee=this.slice($,ee),Ve=_.slice(I,N);for(let _e=0;_e<Ce;++_e)if(Ee[_e]!==Ve[_e]){te=Ee[_e],we=Ve[_e];break}return te<we?-1:we<te?1:0};function b(L,_,I,N,$){if(L.length===0)return-1;if(typeof I=="string"?(N=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,J(I)&&(I=$?0:L.length-1),I<0&&(I=L.length+I),I>=L.length){if($)return-1;I=L.length-1}else if(I<0)if($)I=0;else return-1;if(typeof _=="string"&&(_=a.from(_,N)),a.isBuffer(_))return _.length===0?-1:F(L,_,I,N,$);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(L,_,I):Uint8Array.prototype.lastIndexOf.call(L,_,I):F(L,[_],I,N,$);throw new TypeError("val must be string, number or Buffer")}function F(L,_,I,N,$){let ee=1,te=L.length,we=_.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(L.length<2||_.length<2)return-1;ee=2,te/=2,we/=2,I/=2}function Ce(Ve,_e){return ee===1?Ve[_e]:Ve.readUInt16BE(_e*ee)}let Ee;if($){let Ve=-1;for(Ee=I;Ee<te;Ee++)if(Ce(L,Ee)===Ce(_,Ve===-1?0:Ee-Ve)){if(Ve===-1&&(Ve=Ee),Ee-Ve+1===we)return Ve*ee}else Ve!==-1&&(Ee-=Ee-Ve),Ve=-1}else for(I+we>te&&(I=te-we),Ee=I;Ee>=0;Ee--){let Ve=!0;for(let _e=0;_e<we;_e++)if(Ce(L,Ee+_e)!==Ce(_,_e)){Ve=!1;break}if(Ve)return Ee}return-1}a.prototype.includes=function(_,I,N){return this.indexOf(_,I,N)!==-1},a.prototype.indexOf=function(_,I,N){return b(this,_,I,N,!0)},a.prototype.lastIndexOf=function(_,I,N){return b(this,_,I,N,!1)};function x(L,_,I,N){I=Number(I)||0;const $=L.length-I;N?(N=Number(N),N>$&&(N=$)):N=$;const ee=_.length;N>ee/2&&(N=ee/2);let te;for(te=0;te<N;++te){const we=parseInt(_.substr(te*2,2),16);if(J(we))return te;L[I+te]=we}return te}function S(L,_,I,N){return qe(We(_,L.length-I),L,I,N)}function R(L,_,I,N){return qe(Te(_),L,I,N)}function Z(L,_,I,N){return qe(Ge(_),L,I,N)}function Y(L,_,I,N){return qe(Qe(_,L.length-I),L,I,N)}a.prototype.write=function(_,I,N,$){if(I===void 0)$="utf8",N=this.length,I=0;else if(N===void 0&&typeof I=="string")$=I,N=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(N)?(N=N>>>0,$===void 0&&($="utf8")):($=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-I;if((N===void 0||N>ee)&&(N=ee),_.length>0&&(N<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let te=!1;for(;;)switch($){case"hex":return x(this,_,I,N);case"utf8":case"utf-8":return S(this,_,I,N);case"ascii":case"latin1":case"binary":return R(this,_,I,N);case"base64":return Z(this,_,I,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,_,I,N);default:if(te)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),te=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(L,_,I){return _===0&&I===L.length?e.fromByteArray(L):e.fromByteArray(L.slice(_,I))}function B(L,_,I){I=Math.min(L.length,I);const N=[];let $=_;for(;$<I;){const ee=L[$];let te=null,we=ee>239?4:ee>223?3:ee>191?2:1;if($+we<=I){let Ce,Ee,Ve,_e;switch(we){case 1:ee<128&&(te=ee);break;case 2:Ce=L[$+1],(Ce&192)===128&&(_e=(ee&31)<<6|Ce&63,_e>127&&(te=_e));break;case 3:Ce=L[$+1],Ee=L[$+2],(Ce&192)===128&&(Ee&192)===128&&(_e=(ee&15)<<12|(Ce&63)<<6|Ee&63,_e>2047&&(_e<55296||_e>57343)&&(te=_e));break;case 4:Ce=L[$+1],Ee=L[$+2],Ve=L[$+3],(Ce&192)===128&&(Ee&192)===128&&(Ve&192)===128&&(_e=(ee&15)<<18|(Ce&63)<<12|(Ee&63)<<6|Ve&63,_e>65535&&_e<1114112&&(te=_e))}}te===null?(te=65533,we=1):te>65535&&(te-=65536,N.push(te>>>10&1023|55296),te=56320|te&1023),N.push(te),$+=we}return M(N)}const E=4096;function M(L){const _=L.length;if(_<=E)return String.fromCharCode.apply(String,L);let I="",N=0;for(;N<_;)I+=String.fromCharCode.apply(String,L.slice(N,N+=E));return I}function D(L,_,I){let N="";I=Math.min(L.length,I);for(let $=_;$<I;++$)N+=String.fromCharCode(L[$]&127);return N}function T(L,_,I){let N="";I=Math.min(L.length,I);for(let $=_;$<I;++$)N+=String.fromCharCode(L[$]);return N}function V(L,_,I){const N=L.length;(!_||_<0)&&(_=0),(!I||I<0||I>N)&&(I=N);let $="";for(let ee=_;ee<I;++ee)$+=ae[L[ee]];return $}function G(L,_,I){const N=L.slice(_,I);let $="";for(let ee=0;ee<N.length-1;ee+=2)$+=String.fromCharCode(N[ee]+N[ee+1]*256);return $}a.prototype.slice=function(_,I){const N=this.length;_=~~_,I=I===void 0?N:~~I,_<0?(_+=N,_<0&&(_=0)):_>N&&(_=N),I<0?(I+=N,I<0&&(I=0)):I>N&&(I=N),I<_&&(I=_);const $=this.subarray(_,I);return Object.setPrototypeOf($,a.prototype),$};function P(L,_,I){if(L%1!==0||L<0)throw new RangeError("offset is not uint");if(L+_>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(_,I,N){_=_>>>0,I=I>>>0,N||P(_,I,this.length);let $=this[_],ee=1,te=0;for(;++te<I&&(ee*=256);)$+=this[_+te]*ee;return $},a.prototype.readUintBE=a.prototype.readUIntBE=function(_,I,N){_=_>>>0,I=I>>>0,N||P(_,I,this.length);let $=this[_+--I],ee=1;for(;I>0&&(ee*=256);)$+=this[_+--I]*ee;return $},a.prototype.readUint8=a.prototype.readUInt8=function(_,I){return _=_>>>0,I||P(_,1,this.length),this[_]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(_,I){return _=_>>>0,I||P(_,2,this.length),this[_]|this[_+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(_,I){return _=_>>>0,I||P(_,2,this.length),this[_]<<8|this[_+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(_,I){return _=_>>>0,I||P(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(_,I){return _=_>>>0,I||P(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},a.prototype.readBigUInt64LE=de(function(_){_=_>>>0,Be(_,"offset");const I=this[_],N=this[_+7];(I===void 0||N===void 0)&&ge(_,this.length-8);const $=I+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,ee=this[++_]+this[++_]*2**8+this[++_]*2**16+N*2**24;return BigInt($)+(BigInt(ee)<<BigInt(32))}),a.prototype.readBigUInt64BE=de(function(_){_=_>>>0,Be(_,"offset");const I=this[_],N=this[_+7];(I===void 0||N===void 0)&&ge(_,this.length-8);const $=I*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],ee=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+N;return(BigInt($)<<BigInt(32))+BigInt(ee)}),a.prototype.readIntLE=function(_,I,N){_=_>>>0,I=I>>>0,N||P(_,I,this.length);let $=this[_],ee=1,te=0;for(;++te<I&&(ee*=256);)$+=this[_+te]*ee;return ee*=128,$>=ee&&($-=Math.pow(2,8*I)),$},a.prototype.readIntBE=function(_,I,N){_=_>>>0,I=I>>>0,N||P(_,I,this.length);let $=I,ee=1,te=this[_+--$];for(;$>0&&(ee*=256);)te+=this[_+--$]*ee;return ee*=128,te>=ee&&(te-=Math.pow(2,8*I)),te},a.prototype.readInt8=function(_,I){return _=_>>>0,I||P(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},a.prototype.readInt16LE=function(_,I){_=_>>>0,I||P(_,2,this.length);const N=this[_]|this[_+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(_,I){_=_>>>0,I||P(_,2,this.length);const N=this[_+1]|this[_]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(_,I){return _=_>>>0,I||P(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},a.prototype.readInt32BE=function(_,I){return _=_>>>0,I||P(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},a.prototype.readBigInt64LE=de(function(_){_=_>>>0,Be(_,"offset");const I=this[_],N=this[_+7];(I===void 0||N===void 0)&&ge(_,this.length-8);const $=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(N<<24);return(BigInt($)<<BigInt(32))+BigInt(I+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),a.prototype.readBigInt64BE=de(function(_){_=_>>>0,Be(_,"offset");const I=this[_],N=this[_+7];(I===void 0||N===void 0)&&ge(_,this.length-8);const $=(I<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt($)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+N)}),a.prototype.readFloatLE=function(_,I){return _=_>>>0,I||P(_,4,this.length),t.read(this,_,!0,23,4)},a.prototype.readFloatBE=function(_,I){return _=_>>>0,I||P(_,4,this.length),t.read(this,_,!1,23,4)},a.prototype.readDoubleLE=function(_,I){return _=_>>>0,I||P(_,8,this.length),t.read(this,_,!0,52,8)},a.prototype.readDoubleBE=function(_,I){return _=_>>>0,I||P(_,8,this.length),t.read(this,_,!1,52,8)};function U(L,_,I,N,$,ee){if(!a.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>$||_<ee)throw new RangeError('"value" argument is out of bounds');if(I+N>L.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(_,I,N,$){if(_=+_,I=I>>>0,N=N>>>0,!$){const we=Math.pow(2,8*N)-1;U(this,_,I,N,we,0)}let ee=1,te=0;for(this[I]=_&255;++te<N&&(ee*=256);)this[I+te]=_/ee&255;return I+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(_,I,N,$){if(_=+_,I=I>>>0,N=N>>>0,!$){const we=Math.pow(2,8*N)-1;U(this,_,I,N,we,0)}let ee=N-1,te=1;for(this[I+ee]=_&255;--ee>=0&&(te*=256);)this[I+ee]=_/te&255;return I+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,1,255,0),this[I]=_&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,2,65535,0),this[I]=_&255,this[I+1]=_>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,2,65535,0),this[I]=_>>>8,this[I+1]=_&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,4,4294967295,0),this[I+3]=_>>>24,this[I+2]=_>>>16,this[I+1]=_>>>8,this[I]=_&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,4,4294967295,0),this[I]=_>>>24,this[I+1]=_>>>16,this[I+2]=_>>>8,this[I+3]=_&255,I+4};function H(L,_,I,N,$){ce(_,N,$,L,I,7);let ee=Number(_&BigInt(4294967295));L[I++]=ee,ee=ee>>8,L[I++]=ee,ee=ee>>8,L[I++]=ee,ee=ee>>8,L[I++]=ee;let te=Number(_>>BigInt(32)&BigInt(4294967295));return L[I++]=te,te=te>>8,L[I++]=te,te=te>>8,L[I++]=te,te=te>>8,L[I++]=te,I}function oe(L,_,I,N,$){ce(_,N,$,L,I,7);let ee=Number(_&BigInt(4294967295));L[I+7]=ee,ee=ee>>8,L[I+6]=ee,ee=ee>>8,L[I+5]=ee,ee=ee>>8,L[I+4]=ee;let te=Number(_>>BigInt(32)&BigInt(4294967295));return L[I+3]=te,te=te>>8,L[I+2]=te,te=te>>8,L[I+1]=te,te=te>>8,L[I]=te,I+8}a.prototype.writeBigUInt64LE=de(function(_,I=0){return H(this,_,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=de(function(_,I=0){return oe(this,_,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(_,I,N,$){if(_=+_,I=I>>>0,!$){const Ce=Math.pow(2,8*N-1);U(this,_,I,N,Ce-1,-Ce)}let ee=0,te=1,we=0;for(this[I]=_&255;++ee<N&&(te*=256);)_<0&&we===0&&this[I+ee-1]!==0&&(we=1),this[I+ee]=(_/te>>0)-we&255;return I+N},a.prototype.writeIntBE=function(_,I,N,$){if(_=+_,I=I>>>0,!$){const Ce=Math.pow(2,8*N-1);U(this,_,I,N,Ce-1,-Ce)}let ee=N-1,te=1,we=0;for(this[I+ee]=_&255;--ee>=0&&(te*=256);)_<0&&we===0&&this[I+ee+1]!==0&&(we=1),this[I+ee]=(_/te>>0)-we&255;return I+N},a.prototype.writeInt8=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,1,127,-128),_<0&&(_=255+_+1),this[I]=_&255,I+1},a.prototype.writeInt16LE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,2,32767,-32768),this[I]=_&255,this[I+1]=_>>>8,I+2},a.prototype.writeInt16BE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,2,32767,-32768),this[I]=_>>>8,this[I+1]=_&255,I+2},a.prototype.writeInt32LE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,4,2147483647,-2147483648),this[I]=_&255,this[I+1]=_>>>8,this[I+2]=_>>>16,this[I+3]=_>>>24,I+4},a.prototype.writeInt32BE=function(_,I,N){return _=+_,I=I>>>0,N||U(this,_,I,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[I]=_>>>24,this[I+1]=_>>>16,this[I+2]=_>>>8,this[I+3]=_&255,I+4},a.prototype.writeBigInt64LE=de(function(_,I=0){return H(this,_,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=de(function(_,I=0){return oe(this,_,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function k(L,_,I,N,$,ee){if(I+N>L.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function K(L,_,I,N,$){return _=+_,I=I>>>0,$||k(L,_,I,4),t.write(L,_,I,N,23,4),I+4}a.prototype.writeFloatLE=function(_,I,N){return K(this,_,I,!0,N)},a.prototype.writeFloatBE=function(_,I,N){return K(this,_,I,!1,N)};function ne(L,_,I,N,$){return _=+_,I=I>>>0,$||k(L,_,I,8),t.write(L,_,I,N,52,8),I+8}a.prototype.writeDoubleLE=function(_,I,N){return ne(this,_,I,!0,N)},a.prototype.writeDoubleBE=function(_,I,N){return ne(this,_,I,!1,N)},a.prototype.copy=function(_,I,N,$){if(!a.isBuffer(_))throw new TypeError("argument should be a Buffer");if(N||(N=0),!$&&$!==0&&($=this.length),I>=_.length&&(I=_.length),I||(I=0),$>0&&$<N&&($=N),$===N||_.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),_.length-I<$-N&&($=_.length-I+N);const ee=$-N;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,N,$):Uint8Array.prototype.set.call(_,this.subarray(N,$),I),ee},a.prototype.fill=function(_,I,N,$){if(typeof _=="string"){if(typeof I=="string"?($=I,I=0,N=this.length):typeof N=="string"&&($=N,N=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!a.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(_.length===1){const te=_.charCodeAt(0);($==="utf8"&&te<128||$==="latin1")&&(_=te)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(I<0||this.length<I||this.length<N)throw new RangeError("Out of range index");if(N<=I)return this;I=I>>>0,N=N===void 0?this.length:N>>>0,_||(_=0);let ee;if(typeof _=="number")for(ee=I;ee<N;++ee)this[ee]=_;else{const te=a.isBuffer(_)?_:a.from(_,$),we=te.length;if(we===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(ee=0;ee<N-I;++ee)this[ee+I]=te[ee%we]}return this};const ie={};function ue(L,_,I){ie[L]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:_.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,this.stack,delete this.name}get code(){return L}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}ue("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ue("ERR_INVALID_ARG_TYPE",function(L,_){return`The "${L}" argument must be of type number. Received type ${typeof _}`},TypeError),ue("ERR_OUT_OF_RANGE",function(L,_,I){let N=`The value of "${L}" is out of range.`,$=I;return Number.isInteger(I)&&Math.abs(I)>2**32?$=j(String(I)):typeof I=="bigint"&&($=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&($=j($)),$+="n"),N+=` It must be ${_}. Received ${$}`,N},RangeError);function j(L){let _="",I=L.length;const N=L[0]==="-"?1:0;for(;I>=N+4;I-=3)_=`_${L.slice(I-3,I)}${_}`;return`${L.slice(0,I)}${_}`}function se(L,_,I){Be(_,"offset"),(L[_]===void 0||L[_+I]===void 0)&&ge(_,L.length-(I+1))}function ce(L,_,I,N,$,ee){if(L>I||L<_){const te=typeof _=="bigint"?"n":"";let we;throw ee>3?_===0||_===BigInt(0)?we=`>= 0${te} and < 2${te} ** ${(ee+1)*8}${te}`:we=`>= -(2${te} ** ${(ee+1)*8-1}${te}) and < 2 ** ${(ee+1)*8-1}${te}`:we=`>= ${_}${te} and <= ${I}${te}`,new ie.ERR_OUT_OF_RANGE("value",we,L)}se(N,$,ee)}function Be(L,_){if(typeof L!="number")throw new ie.ERR_INVALID_ARG_TYPE(_,"number",L)}function ge(L,_,I){throw Math.floor(L)!==L?(Be(L,I),new ie.ERR_OUT_OF_RANGE(I||"offset","an integer",L)):_<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${_}`,L)}const Fe=/[^+/0-9A-Za-z-_]/g;function nt(L){if(L=L.split("=")[0],L=L.trim().replace(Fe,""),L.length<2)return"";for(;L.length%4!==0;)L=L+"=";return L}function We(L,_){_=_||1/0;let I;const N=L.length;let $=null;const ee=[];for(let te=0;te<N;++te){if(I=L.charCodeAt(te),I>55295&&I<57344){if(!$){if(I>56319){(_-=3)>-1&&ee.push(239,191,189);continue}else if(te+1===N){(_-=3)>-1&&ee.push(239,191,189);continue}$=I;continue}if(I<56320){(_-=3)>-1&&ee.push(239,191,189),$=I;continue}I=($-55296<<10|I-56320)+65536}else $&&(_-=3)>-1&&ee.push(239,191,189);if($=null,I<128){if((_-=1)<0)break;ee.push(I)}else if(I<2048){if((_-=2)<0)break;ee.push(I>>6|192,I&63|128)}else if(I<65536){if((_-=3)<0)break;ee.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((_-=4)<0)break;ee.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ee}function Te(L){const _=[];for(let I=0;I<L.length;++I)_.push(L.charCodeAt(I)&255);return _}function Qe(L,_){let I,N,$;const ee=[];for(let te=0;te<L.length&&!((_-=2)<0);++te)I=L.charCodeAt(te),N=I>>8,$=I%256,ee.push($),ee.push(N);return ee}function Ge(L){return e.toByteArray(nt(L))}function qe(L,_,I,N){let $;for($=0;$<N&&!($+I>=_.length||$>=L.length);++$)_[$+I]=L[$];return $}function O(L,_){return L instanceof _||L!=null&&L.constructor!=null&&L.constructor.name!=null&&L.constructor.name===_.name}function J(L){return L!==L}const ae=function(){const L="0123456789abcdef",_=new Array(256);for(let I=0;I<16;++I){const N=I*16;for(let $=0;$<16;++$)_[N+$]=L[I]+L[$]}return _}();function de(L){return typeof BigInt>"u"?ve:L}function ve(){throw new Error("BigInt not supported")}})(UE);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SE=function(n,e){return SE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},SE(n,e)};function Vo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");SE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ss(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function Zi(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(A){return function(c){return l([A,c])}}function l(A){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=A[0]&2?i.return:A[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,A[1])).done)return s;switch(i=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,i=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){t.label=A[1];break}if(A[0]===6&&t.label<s[1]){t.label=s[1],s=A;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(A);break}s[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(n,t)}catch(c){A=[6,c],i=0}finally{r=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}var vu=function(){function n(e,t,r,i){this.left=e,this.top=t,this.width=r,this.height=i}return n.prototype.add=function(e,t,r,i){return new n(this.left+e,this.top+t,this.width+r,this.height+i)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(i){return i.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),D_=function(n,e){return vu.fromClientRect(n,e.getBoundingClientRect())},jC=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},On=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},_N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$se=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qv=0;Qv<_N.length;Qv++)$se[_N.charCodeAt(Qv)]=Qv;var QN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ug=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Rv=0;Rv<QN.length;Rv++)ug[QN.charCodeAt(Rv)]=Rv;var qse=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=ug[n.charCodeAt(r)],o=ug[n.charCodeAt(r+1)],a=ug[n.charCodeAt(r+2)],l=ug[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},eoe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},toe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},iu=5,k_=6+5,SI=2,noe=k_-iu,oJ=65536>>iu,roe=1<<iu,_I=roe-1,ioe=1024>>iu,soe=oJ+ioe,ooe=soe,aoe=32,loe=ooe+aoe,Aoe=65536>>k_,coe=1<<noe,uoe=coe-1,RN=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},foe=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},doe=function(n,e){var t=qse(n),r=Array.isArray(t)?toe(t):new Uint32Array(t),i=Array.isArray(t)?eoe(t):new Uint16Array(t),s=24,o=RN(i,s/2,r[4]/2),a=r[5]===2?RN(i,(s+r[4])/2):foe(r,Math.ceil((s+r[4])/4));return new hoe(r[0],r[1],r[2],r[3],o,a)},hoe=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>iu],t=(t<<SI)+(e&_I),this.data[t];if(e<=65535)return t=this.index[oJ+(e-55296>>iu)],t=(t<<SI)+(e&_I),this.data[t];if(e<this.highStart)return t=loe-Aoe+(e>>k_),t=this.index[t],t+=e>>iu&uoe,t=this.index[t],t=(t<<SI)+(e&_I),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),MN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",poe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Mv=0;Mv<MN.length;Mv++)poe[MN.charCodeAt(Mv)]=Mv;var goe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",TN=50,moe=1,aJ=2,lJ=3,voe=4,yoe=5,NN=7,AJ=8,DN=9,FA=10,_E=11,kN=12,QE=13,Boe=14,fg=15,RE=16,Tv=17,_p=18,woe=19,VN=20,ME=21,Qp=22,QI=23,Af=24,Ji=25,dg=26,hg=27,cf=28,Coe=29,Lc=30,boe=31,Nv=32,Dv=33,TE=34,NE=35,DE=36,Rm=37,kE=38,sB=39,oB=40,RI=41,cJ=42,xoe=43,Ioe=[9001,65288],uJ="!",Et="",kv="",VE=doe(goe),Ya=[Lc,DE],LE=[moe,aJ,lJ,yoe],fJ=[FA,AJ],LN=[hg,dg],Foe=LE.concat(fJ),PN=[kE,sB,oB,TE,NE],Eoe=[fg,QE],Uoe=function(n,e){e===void 0&&(e="strict");var t=[],r=[],i=[];return n.forEach(function(s,o){var a=VE.get(s);if(a>TN?(i.push(!0),a-=TN):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(o),t.push(RE);if(a===voe||a===_E){if(o===0)return r.push(o),t.push(Lc);var l=t[o-1];return Foe.indexOf(l)===-1?(r.push(r[o-1]),t.push(l)):(r.push(o),t.push(Lc))}if(r.push(o),a===boe)return t.push(e==="strict"?ME:Rm);if(a===cJ||a===Coe)return t.push(Lc);if(a===xoe)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Rm):t.push(Lc);t.push(a)}),[r,t,i]},MI=function(n,e,t,r){var i=r[t];if(Array.isArray(n)?n.indexOf(i)!==-1:n===i)for(var s=t;s<=r.length;){s++;var o=r[s];if(o===e)return!0;if(o!==FA)break}if(i===FA)for(var s=t;s>0;){s--;var a=r[s];if(Array.isArray(n)?n.indexOf(a)!==-1:n===a)for(var l=t;l<=r.length;){l++;var o=r[l];if(o===e)return!0;if(o!==FA)break}if(a!==FA)break}return!1},WN=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===FA)t--;else return r}return 0},Soe=function(n,e,t,r,i){if(t[r]===0)return Et;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return Et;var o=s-1,a=s+1,l=e[s],A=o>=0?e[o]:0,c=e[a];if(l===aJ&&c===lJ)return Et;if(LE.indexOf(l)!==-1)return uJ;if(LE.indexOf(c)!==-1||fJ.indexOf(c)!==-1)return Et;if(WN(s,e)===AJ)return kv;if(VE.get(n[s])===_E||(l===Nv||l===Dv)&&VE.get(n[a])===_E||l===NN||c===NN||l===DN||[FA,QE,fg].indexOf(l)===-1&&c===DN||[Tv,_p,woe,Af,cf].indexOf(c)!==-1||WN(s,e)===Qp||MI(QI,Qp,s,e)||MI([Tv,_p],ME,s,e)||MI(kN,kN,s,e))return Et;if(l===FA)return kv;if(l===QI||c===QI)return Et;if(c===RE||l===RE)return kv;if([QE,fg,ME].indexOf(c)!==-1||l===Boe||A===DE&&Eoe.indexOf(l)!==-1||l===cf&&c===DE||c===VN||Ya.indexOf(c)!==-1&&l===Ji||Ya.indexOf(l)!==-1&&c===Ji||l===hg&&[Rm,Nv,Dv].indexOf(c)!==-1||[Rm,Nv,Dv].indexOf(l)!==-1&&c===dg||Ya.indexOf(l)!==-1&&LN.indexOf(c)!==-1||LN.indexOf(l)!==-1&&Ya.indexOf(c)!==-1||[hg,dg].indexOf(l)!==-1&&(c===Ji||[Qp,fg].indexOf(c)!==-1&&e[a+1]===Ji)||[Qp,fg].indexOf(l)!==-1&&c===Ji||l===Ji&&[Ji,cf,Af].indexOf(c)!==-1)return Et;if([Ji,cf,Af,Tv,_p].indexOf(c)!==-1)for(var u=s;u>=0;){var f=e[u];if(f===Ji)return Et;if([cf,Af].indexOf(f)!==-1)u--;else break}if([hg,dg].indexOf(c)!==-1)for(var u=[Tv,_p].indexOf(l)!==-1?o:s;u>=0;){var f=e[u];if(f===Ji)return Et;if([cf,Af].indexOf(f)!==-1)u--;else break}if(kE===l&&[kE,sB,TE,NE].indexOf(c)!==-1||[sB,TE].indexOf(l)!==-1&&[sB,oB].indexOf(c)!==-1||[oB,NE].indexOf(l)!==-1&&c===oB||PN.indexOf(l)!==-1&&[VN,dg].indexOf(c)!==-1||PN.indexOf(c)!==-1&&l===hg||Ya.indexOf(l)!==-1&&Ya.indexOf(c)!==-1||l===Af&&Ya.indexOf(c)!==-1||Ya.concat(Ji).indexOf(l)!==-1&&c===Qp&&Ioe.indexOf(n[a])===-1||Ya.concat(Ji).indexOf(c)!==-1&&l===_p)return Et;if(l===RI&&c===RI){for(var d=t[s],h=1;d>0&&(d--,e[d]===RI);)h++;if(h%2!==0)return Et}return l===Nv&&c===Dv?Et:kv},_oe=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Uoe(n,e.lineBreak),r=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(a){return[Ji,Lc,cJ].indexOf(a)!==-1?Rm:a}));var o=e.wordBreak==="keep-all"?s.map(function(a,l){return a&&n[l]>=19968&&n[l]<=40959}):void 0;return[r,i,o]},Qoe=function(){function n(e,t,r,i){this.codePoints=e,this.required=t===uJ,this.start=r,this.end=i}return n.prototype.slice=function(){return On.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),Roe=function(n,e){var t=jC(n),r=_oe(t,e),i=r[0],s=r[1],o=r[2],a=t.length,l=0,A=0;return{next:function(){if(A>=a)return{done:!0,value:null};for(var c=Et;A<a&&(c=Soe(t,s,i,++A,o))===Et;);if(c!==Et||A===a){var u=new Qoe(t,c,l,A);return l=A,{value:u,done:!1}}return{done:!0,value:null}}}},Moe=1,Toe=2,p0=4,ON=8,Iw=10,GN=47,Og=92,Noe=9,Doe=32,Vv=34,Rp=61,koe=35,Voe=36,Loe=37,Lv=39,Pv=40,Mp=41,Poe=95,Ci=45,Woe=33,Ooe=60,Goe=62,Zoe=64,Joe=91,Hoe=93,zoe=61,Yoe=123,Wv=63,Xoe=125,ZN=124,Koe=126,joe=128,JN=65533,TI=42,Hc=43,$oe=44,qoe=58,eae=59,Mm=46,tae=0,nae=8,rae=11,iae=14,sae=31,oae=127,Jo=-1,dJ=48,hJ=97,pJ=101,aae=102,lae=117,Aae=122,gJ=65,mJ=69,vJ=70,cae=85,uae=90,Gr=function(n){return n>=dJ&&n<=57},fae=function(n){return n>=55296&&n<=57343},uf=function(n){return Gr(n)||n>=gJ&&n<=vJ||n>=hJ&&n<=aae},dae=function(n){return n>=hJ&&n<=Aae},hae=function(n){return n>=gJ&&n<=uae},pae=function(n){return dae(n)||hae(n)},gae=function(n){return n>=joe},Ov=function(n){return n===Iw||n===Noe||n===Doe},Fw=function(n){return pae(n)||gae(n)||n===Poe},HN=function(n){return Fw(n)||Gr(n)||n===Ci},mae=function(n){return n>=tae&&n<=nae||n===rae||n>=iae&&n<=sae||n===oae},dA=function(n,e){return n!==Og?!1:e!==Iw},Gv=function(n,e,t){return n===Ci?Fw(e)||dA(e,t):Fw(n)?!0:!!(n===Og&&dA(n,e))},NI=function(n,e,t){return n===Hc||n===Ci?Gr(e)?!0:e===Mm&&Gr(t):Gr(n===Mm?e:n)},vae=function(n){var e=0,t=1;(n[e]===Hc||n[e]===Ci)&&(n[e]===Ci&&(t=-1),e++);for(var r=[];Gr(n[e]);)r.push(n[e++]);var i=r.length?parseInt(On.apply(void 0,r),10):0;n[e]===Mm&&e++;for(var s=[];Gr(n[e]);)s.push(n[e++]);var o=s.length,a=o?parseInt(On.apply(void 0,s),10):0;(n[e]===mJ||n[e]===pJ)&&e++;var l=1;(n[e]===Hc||n[e]===Ci)&&(n[e]===Ci&&(l=-1),e++);for(var A=[];Gr(n[e]);)A.push(n[e++]);var c=A.length?parseInt(On.apply(void 0,A),10):0;return t*(i+a*Math.pow(10,-o))*Math.pow(10,l*c)},yae={type:2},Bae={type:3},wae={type:4},Cae={type:13},bae={type:8},xae={type:21},Iae={type:9},Fae={type:10},Eae={type:11},Uae={type:12},Sae={type:14},Zv={type:23},_ae={type:1},Qae={type:25},Rae={type:24},Mae={type:26},Tae={type:27},Nae={type:28},Dae={type:29},kae={type:31},PE={type:32},yJ=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(jC(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==PE;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Vv:return this.consumeStringToken(Vv);case koe:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(HN(t)||dA(r,i)){var s=Gv(t,r,i)?Toe:Moe,o=this.consumeName();return{type:5,value:o,flags:s}}break;case Voe:if(this.peekCodePoint(0)===Rp)return this.consumeCodePoint(),Cae;break;case Lv:return this.consumeStringToken(Lv);case Pv:return yae;case Mp:return Bae;case TI:if(this.peekCodePoint(0)===Rp)return this.consumeCodePoint(),Sae;break;case Hc:if(NI(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case $oe:return wae;case Ci:var a=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(NI(a,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Gv(a,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Ci&&A===Goe)return this.consumeCodePoint(),this.consumeCodePoint(),Rae;break;case Mm:if(NI(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case GN:if(this.peekCodePoint(0)===TI)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===TI&&(c=this.consumeCodePoint(),c===GN))return this.consumeToken();if(c===Jo)return this.consumeToken()}break;case qoe:return Mae;case eae:return Tae;case Ooe:if(this.peekCodePoint(0)===Woe&&this.peekCodePoint(1)===Ci&&this.peekCodePoint(2)===Ci)return this.consumeCodePoint(),this.consumeCodePoint(),Qae;break;case Zoe:var u=this.peekCodePoint(0),f=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Gv(u,f,d)){var o=this.consumeName();return{type:7,value:o}}break;case Joe:return Nae;case Og:if(dA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Hoe:return Dae;case zoe:if(this.peekCodePoint(0)===Rp)return this.consumeCodePoint(),bae;break;case Yoe:return Eae;case Xoe:return Uae;case lae:case cae:var h=this.peekCodePoint(0),p=this.peekCodePoint(1);return h===Hc&&(uf(p)||p===Wv)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ZN:if(this.peekCodePoint(0)===Rp)return this.consumeCodePoint(),Iae;if(this.peekCodePoint(0)===ZN)return this.consumeCodePoint(),xae;break;case Koe:if(this.peekCodePoint(0)===Rp)return this.consumeCodePoint(),Fae;break;case Jo:return PE}return Ov(e)?(this.consumeWhiteSpace(),kae):Gr(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Fw(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:On(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();uf(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===Wv&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(On.apply(void 0,e.map(function(l){return l===Wv?dJ:l})),16),s=parseInt(On.apply(void 0,e.map(function(l){return l===Wv?vJ:l})),16);return{type:30,start:i,end:s}}var o=parseInt(On.apply(void 0,e),16);if(this.peekCodePoint(0)===Ci&&uf(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];uf(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();var s=parseInt(On.apply(void 0,a),16);return{type:30,start:o,end:s}}else return{type:30,start:o,end:o}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Pv?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Pv?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Lv||t===Vv){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo||this.peekCodePoint(0)===Mp)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),Zv)}for(;;){var i=this.consumeCodePoint();if(i===Jo||i===Mp)return{type:22,value:On.apply(void 0,e)};if(Ov(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Jo||this.peekCodePoint(0)===Mp?(this.consumeCodePoint(),{type:22,value:On.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Zv);if(i===Vv||i===Lv||i===Pv||mae(i))return this.consumeBadUrlRemnants(),Zv;if(i===Og)if(dA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Zv;else e.push(i)}},n.prototype.consumeWhiteSpace=function(){for(;Ov(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Mp||e===Jo)return;dA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var i=Math.min(t,e);r+=On.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var i=this._value[r];if(i===Jo||i===void 0||i===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(i===Iw)return this._value.splice(0,r),_ae;if(i===Og){var s=this._value[r+1];s!==Jo&&s!==void 0&&(s===Iw?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):dA(i,s)&&(t+=this.consumeStringSlice(r),t+=On(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=p0,r=this.peekCodePoint(0);for((r===Hc||r===Ci)&&e.push(this.consumeCodePoint());Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===Mm&&Gr(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ON;Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===mJ||r===pJ)&&((i===Hc||i===Ci)&&Gr(s)||Gr(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=ON;Gr(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[vae(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Gv(i,s,o)){var a=this.consumeName();return{type:15,number:t,flags:r,unit:a}}return i===Loe?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(uf(e)){for(var t=On(e);uf(this.peekCodePoint(0))&&t.length<6;)t+=On(this.consumeCodePoint());Ov(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||fae(r)||r>1114111?JN:r}return e===Jo?JN:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(HN(t))e+=On(t);else if(dA(t,this.peekCodePoint(0)))e+=On(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),BJ=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new yJ;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||Vae(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?PE:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),g0=function(n){return n.type===15},$C=function(n){return n.type===17},Pn=function(n){return n.type===20},WE=function(n,e){return Pn(n)&&n.value===e},qC=function(n){return n.type!==31&&n.type!==4},Da=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},Vae=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},tc=function(n){return n.type===17||n.type===15},qn=function(n){return n.type===16||tc(n)},wJ=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},Rr={type:17,number:0,flags:p0},V_={type:16,number:50,flags:p0},EA={type:16,number:100,flags:p0},pg=function(n,e,t){var r=n[0],i=n[1];return[cn(r,e),cn(typeof i<"u"?i:r,t)]},cn=function(n,e){if(n.type===16)return n.number/100*e;if(g0(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},CJ="deg",bJ="grad",xJ="rad",IJ="turn",eb={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case CJ:return Math.PI*e.number/180;case bJ:return Math.PI/200*e.number;case xJ:return e.number;case IJ:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},FJ=function(n){return n.type===15&&(n.unit===CJ||n.unit===bJ||n.unit===xJ||n.unit===IJ)},EJ=function(n){var e=n.filter(Pn).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Rr,Rr];case"to top":case"bottom":return Zs(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Rr,EA];case"to right":case"left":return Zs(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[EA,EA];case"to bottom":case"top":return Zs(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[EA,Rr];case"to left":case"right":return Zs(270)}return 0},Zs=function(n){return Math.PI*n/180},OA={name:"color",parse:function(n,e){if(e.type===18){var t=Lae[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return UA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),o=e.value.substring(3,4);return UA(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return UA(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return UA(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(o,16)/255)}}if(e.type===20){var a=Tm[e.value.toUpperCase()];if(typeof a<"u")return a}return Tm.TRANSPARENT}},Ld=function(n){return(255&n)===0},gr=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,i=255&n>>24;return e<255?"rgba("+i+","+r+","+t+","+e/255+")":"rgb("+i+","+r+","+t+")"},UA=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},zN=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},YN=function(n,e){var t=e.filter(qC);if(t.length===3){var r=t.map(zN),i=r[0],s=r[1],o=r[2];return UA(i,s,o,1)}if(t.length===4){var a=t.map(zN),i=a[0],s=a[1],o=a[2],l=a[3];return UA(i,s,o,l)}return 0};function DI(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var XN=function(n,e){var t=e.filter(qC),r=t[0],i=t[1],s=t[2],o=t[3],a=(r.type===17?Zs(r.number):eb.parse(n,r))/(Math.PI*2),l=qn(i)?i.number/100:0,A=qn(s)?s.number/100:0,c=typeof o<"u"&&qn(o)?cn(o,1):1;if(l===0)return UA(A*255,A*255,A*255,1);var u=A<=.5?A*(l+1):A+l-A*l,f=A*2-u,d=DI(f,u,a+1/3),h=DI(f,u,a),p=DI(f,u,a-1/3);return UA(d*255,h*255,p*255,c)},Lae={hsl:XN,hsla:XN,rgb:YN,rgba:YN},KN=function(n,e){return OA.parse(n,BJ.create(e).parseComponentValue())},Tm={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Pae={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Pn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Wae={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tb=function(n,e){var t=OA.parse(n,e[0]),r=e[1];return r&&qn(r)?{color:t,stop:r}:{color:t,stop:null}},jN=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=Rr),r.stop===null&&(r.stop=EA);for(var i=[],s=0,o=0;o<n.length;o++){var a=n[o].stop;if(a!==null){var l=cn(a,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var A=null,o=0;o<i.length;o++){var c=i[o];if(c===null)A===null&&(A=o);else if(A!==null){for(var u=o-A,f=i[A-1],d=(c-f)/(u+1),h=1;h<=u;h++)i[A+h-1]=d*h;A=null}}return n.map(function(p,m){var g=p.color;return{color:g,stop:Math.max(Math.min(1,i[m]/e),0)}})},Oae=function(n,e,t){var r=e/2,i=t/2,s=cn(n[0],e)-r,o=i-cn(n[1],t);return(Math.atan2(o,s)+Math.PI*2)%(Math.PI*2)},Gae=function(n,e,t){var r=typeof n=="number"?n:Oae(n,e,t),i=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,o=t/2,a=i/2,l=Math.sin(r-Math.PI/2)*a,A=Math.cos(r-Math.PI/2)*a;return[i,s-A,s+A,o-l,o+l]},Co=function(n,e){return Math.sqrt(n*n+e*e)},$N=function(n,e,t,r,i){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(o,a){var l=a[0],A=a[1],c=Co(t-l,r-A);return(i?c<o.optimumDistance:c>o.optimumDistance)?{optimumCorner:a,optimumDistance:c}:o},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Zae=function(n,e,t,r,i){var s=0,o=0;switch(n.size){case 0:n.shape===0?s=o=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),o=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(n.shape===0)s=o=Math.min(Co(e,t),Co(e,t-i),Co(e-r,t),Co(e-r,t-i));else if(n.shape===1){var a=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-r)),l=$N(r,i,e,t,!0),A=l[0],c=l[1];s=Co(A-e,(c-t)/a),o=a*s}break;case 1:n.shape===0?s=o=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),o=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(n.shape===0)s=o=Math.max(Co(e,t),Co(e,t-i),Co(e-r,t),Co(e-r,t-i));else if(n.shape===1){var a=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-r)),u=$N(r,i,e,t,!1),A=u[0],c=u[1];s=Co(A-e,(c-t)/a),o=a*s}break}return Array.isArray(n.size)&&(s=cn(n.size[0],r),o=n.size.length===2?cn(n.size[1],i):s),[s,o]},Jae=function(n,e){var t=Zs(180),r=[];return Da(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&o.value==="to"){t=EJ(i);return}else if(FJ(o)){t=eb.parse(n,o);return}}var a=tb(n,i);r.push(a)}),{angle:t,stops:r,type:1}},Jv=function(n,e){var t=Zs(180),r=[];return Da(e).forEach(function(i,s){if(s===0){var o=i[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){t=EJ(i);return}else if(FJ(o)){t=(eb.parse(n,o)+Zs(270))%Zs(360);return}}var a=tb(n,i);r.push(a)}),{angle:t,stops:r,type:1}},Hae=function(n,e){var t=Zs(180),r=[],i=1,s=0,o=3,a=[];return Da(e).forEach(function(l,A){var c=l[0];if(A===0){if(Pn(c)&&c.value==="linear"){i=1;return}else if(Pn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=OA.parse(n,c.values[0]);r.push({stop:Rr,color:u})}else if(c.name==="to"){var u=OA.parse(n,c.values[0]);r.push({stop:EA,color:u})}else if(c.name==="color-stop"){var f=c.values.filter(qC);if(f.length===2){var u=OA.parse(n,f[1]),d=f[0];$C(d)&&r.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(t+Zs(180))%Zs(360),stops:r,type:i}:{size:o,shape:s,stops:r,position:a,type:i}},UJ="closest-side",SJ="farthest-side",_J="closest-corner",QJ="farthest-corner",RJ="circle",MJ="ellipse",TJ="cover",NJ="contain",zae=function(n,e){var t=0,r=3,i=[],s=[];return Da(e).forEach(function(o,a){var l=!0;if(a===0){var A=!1;l=o.reduce(function(u,f){if(A)if(Pn(f))switch(f.value){case"center":return s.push(V_),u;case"top":case"left":return s.push(Rr),u;case"right":case"bottom":return s.push(EA),u}else(qn(f)||tc(f))&&s.push(f);else if(Pn(f))switch(f.value){case RJ:return t=0,!1;case MJ:return t=1,!1;case"at":return A=!0,!1;case UJ:return r=0,!1;case TJ:case SJ:return r=1,!1;case NJ:case _J:return r=2,!1;case QJ:return r=3,!1}else if(tc(f)||qn(f))return Array.isArray(r)||(r=[]),r.push(f),!1;return u},l)}if(l){var c=tb(n,o);i.push(c)}}),{size:r,shape:t,stops:i,position:s,type:2}},Hv=function(n,e){var t=0,r=3,i=[],s=[];return Da(e).forEach(function(o,a){var l=!0;if(a===0?l=o.reduce(function(c,u){if(Pn(u))switch(u.value){case"center":return s.push(V_),!1;case"top":case"left":return s.push(Rr),!1;case"right":case"bottom":return s.push(EA),!1}else if(qn(u)||tc(u))return s.push(u),!1;return c},l):a===1&&(l=o.reduce(function(c,u){if(Pn(u))switch(u.value){case RJ:return t=0,!1;case MJ:return t=1,!1;case NJ:case UJ:return r=0,!1;case SJ:return r=1,!1;case _J:return r=2,!1;case TJ:case QJ:return r=3,!1}else if(tc(u)||qn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},l)),l){var A=tb(n,o);i.push(A)}}),{size:r,shape:t,stops:i,position:s,type:2}},Yae=function(n){return n.type===1},Xae=function(n){return n.type===2},L_={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=DJ[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function Kae(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!DJ[n.name])}var DJ={"linear-gradient":Jae,"-moz-linear-gradient":Jv,"-ms-linear-gradient":Jv,"-o-linear-gradient":Jv,"-webkit-linear-gradient":Jv,"radial-gradient":zae,"-moz-radial-gradient":Hv,"-ms-radial-gradient":Hv,"-o-radial-gradient":Hv,"-webkit-radial-gradient":Hv,"-webkit-gradient":Hae},jae={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return qC(r)&&Kae(r)}).map(function(r){return L_.parse(n,r)})}},$ae={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Pn(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qae={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return Da(e).map(function(t){return t.filter(qn)}).map(wJ)}},ele={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return Da(e).map(function(t){return t.filter(Pn).map(function(r){return r.value}).join(" ")}).map(tle)}},tle=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Pd;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Pd||(Pd={}));var nle={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return Da(e).map(function(t){return t.filter(rle)})}},rle=function(n){return Pn(n)||qn(n)},nb=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ile=nb("top"),sle=nb("right"),ole=nb("bottom"),ale=nb("left"),rb=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return wJ(t.filter(qn))}}},lle=rb("top-left"),Ale=rb("top-right"),cle=rb("bottom-right"),ule=rb("bottom-left"),ib=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},fle=ib("top"),dle=ib("right"),hle=ib("bottom"),ple=ib("left"),sb=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return g0(t)?t.number:0}}},gle=sb("top"),mle=sb("right"),vle=sb("bottom"),yle=sb("left"),Ble={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wle={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Cle={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Pn).reduce(function(t,r){return t|ble(r.value)},0)}},ble=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},xle={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ile={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Ew;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Ew||(Ew={}));var Fle={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Ew.STRICT;case"normal":default:return Ew.NORMAL}}},Ele={name:"line-height",initialValue:"normal",prefix:!1,type:4},qN=function(n,e){return Pn(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:qn(n)?cn(n,e):e},Ule={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:L_.parse(n,e)}},Sle={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},_le={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ob=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},Qle=ob("top"),Rle=ob("right"),Mle=ob("bottom"),Tle=ob("left"),Nle={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Pn).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Dle={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},ab=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},kle=ab("top"),Vle=ab("right"),Lle=ab("bottom"),Ple=ab("left"),Wle={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Ole={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Gle={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&WE(e[0],"none")?[]:Da(e).map(function(t){for(var r={color:Tm.TRANSPARENT,offsetX:Rr,offsetY:Rr,blur:Rr},i=0,s=0;s<t.length;s++){var o=t[s];tc(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:r.blur=o,i++):r.color=OA.parse(n,o)}return r})}},Zle={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Jle={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=Yle[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Hle=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},zle=function(n){var e=n.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],e.length===16?[t,r,i,s,o,a]:null},Yle={matrix:Hle,matrix3d:zle},eD={type:16,number:50,flags:p0},Xle=[eD,eD],Kle={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(qn);return t.length!==2?Xle:[t[0],t[1]]}},jle={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Gg;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Gg||(Gg={}));var $le={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Gg.BREAK_ALL;case"keep-all":return Gg.KEEP_ALL;case"normal":default:return Gg.NORMAL}}},qle={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if($C(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},kJ={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},eAe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return $C(e)?e.number:1}},tAe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nAe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Pn).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},rAe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},iAe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sAe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if($C(e))return e.number;if(Pn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},oAe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Pn).map(function(t){return t.value})}},aAe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ur=function(n,e){return(n&e)!==0},lAe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(g0).map(function(t){return kJ.parse(n,t)})}},AAe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&WE(e[0],"none")?[]:Da(e).map(function(t){for(var r={color:255,offsetX:Rr,offsetY:Rr,blur:Rr,spread:Rr,inset:!1},i=0,s=0;s<t.length;s++){var o=t[s];WE(o,"inset")?r.inset=!0:tc(o)?(i===0?r.offsetX=o:i===1?r.offsetY=o:i===2?r.blur=o:r.spread=o,i++):r.color=OA.parse(n,o)}return r})}},cAe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Pn).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},uAe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fAe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return g0(e)?e.number:0}},dAe=function(){function n(e,t){var r,i;this.animationDuration=ze(e,lAe,t.animationDuration),this.backgroundClip=ze(e,Pae,t.backgroundClip),this.backgroundColor=ze(e,Wae,t.backgroundColor),this.backgroundImage=ze(e,jae,t.backgroundImage),this.backgroundOrigin=ze(e,$ae,t.backgroundOrigin),this.backgroundPosition=ze(e,qae,t.backgroundPosition),this.backgroundRepeat=ze(e,ele,t.backgroundRepeat),this.backgroundSize=ze(e,nle,t.backgroundSize),this.borderTopColor=ze(e,ile,t.borderTopColor),this.borderRightColor=ze(e,sle,t.borderRightColor),this.borderBottomColor=ze(e,ole,t.borderBottomColor),this.borderLeftColor=ze(e,ale,t.borderLeftColor),this.borderTopLeftRadius=ze(e,lle,t.borderTopLeftRadius),this.borderTopRightRadius=ze(e,Ale,t.borderTopRightRadius),this.borderBottomRightRadius=ze(e,cle,t.borderBottomRightRadius),this.borderBottomLeftRadius=ze(e,ule,t.borderBottomLeftRadius),this.borderTopStyle=ze(e,fle,t.borderTopStyle),this.borderRightStyle=ze(e,dle,t.borderRightStyle),this.borderBottomStyle=ze(e,hle,t.borderBottomStyle),this.borderLeftStyle=ze(e,ple,t.borderLeftStyle),this.borderTopWidth=ze(e,gle,t.borderTopWidth),this.borderRightWidth=ze(e,mle,t.borderRightWidth),this.borderBottomWidth=ze(e,vle,t.borderBottomWidth),this.borderLeftWidth=ze(e,yle,t.borderLeftWidth),this.boxShadow=ze(e,AAe,t.boxShadow),this.color=ze(e,Ble,t.color),this.direction=ze(e,wle,t.direction),this.display=ze(e,Cle,t.display),this.float=ze(e,xle,t.cssFloat),this.fontFamily=ze(e,rAe,t.fontFamily),this.fontSize=ze(e,iAe,t.fontSize),this.fontStyle=ze(e,aAe,t.fontStyle),this.fontVariant=ze(e,oAe,t.fontVariant),this.fontWeight=ze(e,sAe,t.fontWeight),this.letterSpacing=ze(e,Ile,t.letterSpacing),this.lineBreak=ze(e,Fle,t.lineBreak),this.lineHeight=ze(e,Ele,t.lineHeight),this.listStyleImage=ze(e,Ule,t.listStyleImage),this.listStylePosition=ze(e,Sle,t.listStylePosition),this.listStyleType=ze(e,_le,t.listStyleType),this.marginTop=ze(e,Qle,t.marginTop),this.marginRight=ze(e,Rle,t.marginRight),this.marginBottom=ze(e,Mle,t.marginBottom),this.marginLeft=ze(e,Tle,t.marginLeft),this.opacity=ze(e,eAe,t.opacity);var s=ze(e,Nle,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=ze(e,Dle,t.overflowWrap),this.paddingTop=ze(e,kle,t.paddingTop),this.paddingRight=ze(e,Vle,t.paddingRight),this.paddingBottom=ze(e,Lle,t.paddingBottom),this.paddingLeft=ze(e,Ple,t.paddingLeft),this.paintOrder=ze(e,cAe,t.paintOrder),this.position=ze(e,Ole,t.position),this.textAlign=ze(e,Wle,t.textAlign),this.textDecorationColor=ze(e,tAe,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=ze(e,nAe,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=ze(e,Gle,t.textShadow),this.textTransform=ze(e,Zle,t.textTransform),this.transform=ze(e,Jle,t.transform),this.transformOrigin=ze(e,Kle,t.transformOrigin),this.visibility=ze(e,jle,t.visibility),this.webkitTextStrokeColor=ze(e,uAe,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=ze(e,fAe,t.webkitTextStrokeWidth),this.wordBreak=ze(e,$le,t.wordBreak),this.zIndex=ze(e,qle,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Ld(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return ur(this.display,4)||ur(this.display,33554432)||ur(this.display,268435456)||ur(this.display,536870912)||ur(this.display,67108864)||ur(this.display,134217728)},n}(),ze=function(n,e,t){var r=new yJ,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(i);var s=new BJ(r.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(n,Pn(o)?o.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return eb.parse(n,s.parseComponentValue());case"color":return OA.parse(n,s.parseComponentValue());case"image":return L_.parse(n,s.parseComponentValue());case"length":var a=s.parseComponentValue();return tc(a)?a:Rr;case"length-percentage":var l=s.parseComponentValue();return qn(l)?l:Rr;case"time":return kJ.parse(n,s.parseComponentValue())}break}},hAe="data-html2canvas-debug",pAe=function(n){var e=n.getAttribute(hAe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},tD=function(n,e){var t=pAe(n);return t===1||e===t},ka=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,tD(t,3))debugger;this.styles=new dAe(e,window.getComputedStyle(t,null)),pce(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=D_(this.context,t),tD(t,4)&&(this.flags|=16)}return n}(),gAe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",nD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zv=0;zv<nD.length;zv++)gg[nD.charCodeAt(zv)]=zv;var mAe=function(n){var e=n.length*.75,t=n.length,r,i=0,s,o,a,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=gg[n.charCodeAt(r)],o=gg[n.charCodeAt(r+1)],a=gg[n.charCodeAt(r+2)],l=gg[n.charCodeAt(r+3)],c[i++]=s<<2|o>>4,c[i++]=(o&15)<<4|a>>2,c[i++]=(a&3)<<6|l&63;return A},vAe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},yAe=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},su=5,P_=6+5,kI=2,BAe=P_-su,VJ=65536>>su,wAe=1<<su,VI=wAe-1,CAe=1024>>su,bAe=VJ+CAe,xAe=bAe,IAe=32,FAe=xAe+IAe,EAe=65536>>P_,UAe=1<<BAe,SAe=UAe-1,rD=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},_Ae=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},QAe=function(n,e){var t=mAe(n),r=Array.isArray(t)?yAe(t):new Uint32Array(t),i=Array.isArray(t)?vAe(t):new Uint16Array(t),s=24,o=rD(i,s/2,r[4]/2),a=r[5]===2?rD(i,(s+r[4])/2):_Ae(r,Math.ceil((s+r[4])/4));return new RAe(r[0],r[1],r[2],r[3],o,a)},RAe=function(){function n(e,t,r,i,s,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=o}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>su],t=(t<<kI)+(e&VI),this.data[t];if(e<=65535)return t=this.index[VJ+(e-55296>>su)],t=(t<<kI)+(e&VI),this.data[t];if(e<this.highStart)return t=FAe-EAe+(e>>P_),t=this.index[t],t+=e>>su&SAe,t=this.index[t],t=(t<<kI)+(e&VI),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),iD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MAe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yv=0;Yv<iD.length;Yv++)MAe[iD.charCodeAt(Yv)]=Yv;var TAe=1,LI=2,PI=3,sD=4,oD=5,NAe=7,aD=8,WI=9,OI=10,lD=11,AD=12,cD=13,uD=14,GI=15,DAe=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},kAe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var o=n[i];o<=65535?r.push(o):(o-=65536,r.push((o>>10)+55296,o%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},VAe=QAe(gAe),Ts="",ZI="",LAe=function(n){return VAe.get(n)},PAe=function(n,e,t){var r=t-2,i=e[r],s=e[t-1],o=e[t];if(s===LI&&o===PI)return Ts;if(s===LI||s===PI||s===sD||o===LI||o===PI||o===sD)return ZI;if(s===aD&&[aD,WI,lD,AD].indexOf(o)!==-1||(s===lD||s===WI)&&(o===WI||o===OI)||(s===AD||s===OI)&&o===OI||o===cD||o===oD||o===NAe||s===TAe)return Ts;if(s===cD&&o===uD){for(;i===oD;)i=e[--r];if(i===uD)return Ts}if(s===GI&&o===GI){for(var a=0;i===GI;)a++,i=e[--r];if(a%2===0)return Ts}return ZI},WAe=function(n){var e=DAe(n),t=e.length,r=0,i=0,s=e.map(LAe);return{next:function(){if(r>=t)return{done:!0,value:null};for(var o=Ts;r<t&&(o=PAe(e,s,++r))===Ts;);if(o!==Ts||r===t){var a=kAe.apply(null,e.slice(i,r));return i=r,{value:a,done:!1}}return{done:!0,value:null}}}},OAe=function(n){for(var e=WAe(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},GAe=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height=e+"px",r.style.display="block",n.body.appendChild(r),t.selectNode(r);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(n.body.removeChild(r),s===e)return!0}}return!1},ZAe=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=jC(r.data).map(function(l){return On(l)}),s=0,o={},a=i.every(function(l,A){t.setStart(r,s),t.setEnd(r,s+l.length);var c=t.getBoundingClientRect();s+=l.length;var u=c.x>o.x||c.y>o.y;return o=c,A===0?!0:u});return n.body.removeChild(e),a},JAe=function(){return typeof new Image().crossOrigin<"u"},HAe=function(){return typeof new XMLHttpRequest().responseType=="string"},zAe=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},fD=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},YAe=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var o=OE(t,t,0,0,i);return r.fillStyle="red",r.fillRect(0,0,t,t),dD(o).then(function(a){r.drawImage(a,0,0);var l=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var A=n.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=t+"px",fD(l)?dD(OE(t,t,0,0,A)):Promise.reject(!1)}).then(function(a){return r.drawImage(a,0,0),fD(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},OE=function(n,e,t,r,i){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",n.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(i),o},dD=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Xi={get SUPPORT_RANGE_BOUNDS(){var n=GAe(document);return Object.defineProperty(Xi,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Xi.SUPPORT_RANGE_BOUNDS&&ZAe(document);return Object.defineProperty(Xi,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=zAe(document);return Object.defineProperty(Xi,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?YAe(document):Promise.resolve(!1);return Object.defineProperty(Xi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=JAe();return Object.defineProperty(Xi,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=HAe();return Object.defineProperty(Xi,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xi,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Xi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Zg=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),XAe=function(n,e,t,r){var i=$Ae(e,t),s=[],o=0;return i.forEach(function(a){if(t.textDecorationLine.length||a.trim().length>0)if(Xi.SUPPORT_RANGE_BOUNDS){var l=hD(r,o,a.length).getClientRects();if(l.length>1){var A=W_(a),c=0;A.forEach(function(f){s.push(new Zg(f,vu.fromDOMRectList(n,hD(r,c+o,f.length).getClientRects()))),c+=f.length})}else s.push(new Zg(a,vu.fromDOMRectList(n,l)))}else{var u=r.splitText(a.length);s.push(new Zg(a,KAe(n,r))),r=u}else Xi.SUPPORT_RANGE_BOUNDS||(r=r.splitText(a.length));o+=a.length}),s},KAe=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=D_(n,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return vu.EMPTY},hD=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(n,e),i.setEnd(n,e+t),i},W_=function(n){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return OAe(n)},jAe=function(n,e){if(Xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return ece(n,e)},$Ae=function(n,e){return e.letterSpacing!==0?W_(n):jAe(n,e)},qAe=[32,160,4961,65792,65793,4153,4241],ece=function(n,e){for(var t=Roe(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var o=i.value.slice(),a=jC(o),l="";a.forEach(function(A){qAe.indexOf(A)===-1?l+=On(A):(l.length&&r.push(l),r.push(On(A)),l="")}),l.length&&r.push(l)}};!(i=t.next()).done;)s();return r},tce=function(){function n(e,t,r){this.text=nce(t.data,r.textTransform),this.textBounds=XAe(e,this.text,r,t)}return n}(),nce=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(rce,ice);case 2:return n.toUpperCase();default:return n}},rce=/(^|\s|:|-|\(|\))([a-z])/g,ice=function(n,e,t){return n.length>0?e+t.toUpperCase():n},LJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(ka),PJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(ka),WJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=new XMLSerializer,o=D_(t,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(ka),OJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(ka),GE=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(ka),sce=[{type:15,flags:0,unit:"px",number:3}],oce=[{type:16,flags:0,number:50}],ace=function(n){return n.width>n.height?new vu(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new vu(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},lce=function(n){var e=n.type===Ace?new Array(n.value.length+1).join(""):n.value;return e.length===0?n.placeholder||"":e},Uw="checkbox",Sw="radio",Ace="password",pD=707406591,O_=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=lce(r),(i.type===Uw||i.type===Sw)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=ace(i.bounds)),i.type){case Uw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=sce;break;case Sw:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=oce;break}return i}return e}(ka),GJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(ka),ZJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(ka),JJ=function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=uce(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?KN(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Tm.TRANSPARENT,o=r.contentWindow.document.body?KN(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):Tm.TRANSPARENT;i.backgroundColor=Ld(s)?Ld(o)?i.styles.backgroundColor:o:s}}catch{}return i}return e}(ka),cce=["OL","UL","MENU"],aB=function(n,e,t,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,hce(i)&&i.data.trim().length>0)t.textNodes.push(new tce(n,i,t.styles));else if(zJ(i))if(xce(i)&&i.assignedNodes)i.assignedNodes().forEach(function(a){return aB(n,a,t,r)});else{var o=HJ(n,i);o.styles.isVisible()&&(fce(i,o,r)?o.flags|=4:dce(o.styles)&&(o.flags|=2),cce.indexOf(i.tagName)!==-1&&(o.flags|=8),t.elements.push(o),i.slot,i.shadowRoot?aB(n,i.shadowRoot,o,r):!XJ(i)&&!YJ(i)&&!KJ(i)&&aB(n,i,o,r))}},HJ=function(n,e){return Cce(e)?new LJ(n,e):wce(e)?new PJ(n,e):YJ(e)?new WJ(n,e):mce(e)?new OJ(n,e):vce(e)?new GE(n,e):yce(e)?new O_(n,e):KJ(e)?new GJ(n,e):XJ(e)?new ZJ(n,e):bce(e)?new JJ(n,e):new ka(n,e)},uce=function(n,e){var t=HJ(n,e);return t.flags|=4,aB(n,e,t,t),t},fce=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Bce(n)&&t.styles.isTransparent()},dce=function(n){return n.isPositioned()||n.isFloating()},hce=function(n){return n.nodeType===Node.TEXT_NODE},zJ=function(n){return n.nodeType===Node.ELEMENT_NODE},pce=function(n){return zJ(n)&&typeof n.style<"u"&&!gce(n)},gce=function(n){return typeof n.className=="object"},mce=function(n){return n.tagName==="LI"},vce=function(n){return n.tagName==="OL"},yce=function(n){return n.tagName==="INPUT"},YJ=function(n){return n.tagName==="svg"},Bce=function(n){return n.tagName==="BODY"},wce=function(n){return n.tagName==="CANVAS"},Cce=function(n){return n.tagName==="IMG"},bce=function(n){return n.tagName==="IFRAME"},XJ=function(n){return n.tagName==="TEXTAREA"},KJ=function(n){return n.tagName==="SELECT"},xce=function(n){return n.tagName==="SLOT"},gD={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},mD={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ice={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Fce={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ff=function(n,e,t,r,i,s){return n<e||n>t?G_(n,i,s.length>0):r.integers.reduce(function(o,a,l){for(;n>=a;)n-=a,o+=r.values[l];return o},"")+s},jJ=function(n,e,t,r){var i="";do t||n--,i=r(n)+i,n/=e;while(n*e>=e);return i},Wn=function(n,e,t,r,i){var s=t-e+1;return(n<0?"-":"")+(jJ(Math.abs(n),s,r,function(o){return On(Math.floor(o%s)+e)})+i)},bc=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return jJ(Math.abs(n),r,!1,function(i){return e[Math.floor(i%r)]})+t},Qf=1,AA=2,cA=4,mg=8,Xa=function(n,e,t,r,i,s){if(n<-9999||n>9999)return G_(n,4,i.length>0);var o=Math.abs(n),a=i;if(o===0)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;A===0&&ur(s,Qf)&&a!==""?a=e[A]+a:A>1||A===1&&l===0||A===1&&l===1&&ur(s,AA)||A===1&&l===1&&ur(s,cA)&&n>100||A===1&&l>1&&ur(s,mg)?a=e[A]+(l>0?t[l-1]:"")+a:A===1&&l>0&&(a=t[l-1]+a),o=Math.floor(o/10)}return(n<0?r:"")+a},vD="",yD="",BD="",JI="",G_=function(n,e,t){var r=t?". ":"",i=t?"":"",s=t?", ":"",o=t?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=Wn(n,48,57,!0,r);return a.length<4?"0"+a:a;case 4:return bc(n,"",i);case 6:return ff(n,1,3999,gD,3,r).toLowerCase();case 7:return ff(n,1,3999,gD,3,r);case 8:return Wn(n,945,969,!1,r);case 9:return Wn(n,97,122,!1,r);case 10:return Wn(n,65,90,!1,r);case 11:return Wn(n,1632,1641,!0,r);case 12:case 49:return ff(n,1,9999,mD,3,r);case 35:return ff(n,1,9999,mD,3,r).toLowerCase();case 13:return Wn(n,2534,2543,!0,r);case 14:case 30:return Wn(n,6112,6121,!0,r);case 15:return bc(n,"",i);case 16:return bc(n,"",i);case 17:case 48:return Xa(n,"",vD,"",i,AA|cA|mg);case 47:return Xa(n,"",yD,"",i,Qf|AA|cA|mg);case 42:return Xa(n,"",vD,"",i,AA|cA|mg);case 41:return Xa(n,"",yD,"",i,Qf|AA|cA|mg);case 26:return Xa(n,"","",BD,i,0);case 25:return Xa(n,"","",BD,i,Qf|AA|cA);case 31:return Xa(n,"","",JI,s,Qf|AA|cA);case 33:return Xa(n,"","",JI,s,0);case 32:return Xa(n,"","",JI,s,Qf|AA|cA);case 18:return Wn(n,2406,2415,!0,r);case 20:return ff(n,1,19999,Fce,3,r);case 21:return Wn(n,2790,2799,!0,r);case 22:return Wn(n,2662,2671,!0,r);case 22:return ff(n,1,10999,Ice,3,r);case 23:return bc(n,"");case 24:return bc(n,"");case 27:return Wn(n,3302,3311,!0,r);case 28:return bc(n,"",i);case 29:return bc(n,"",i);case 34:return Wn(n,3792,3801,!0,r);case 37:return Wn(n,6160,6169,!0,r);case 38:return Wn(n,4160,4169,!0,r);case 39:return Wn(n,2918,2927,!0,r);case 40:return Wn(n,1776,1785,!0,r);case 43:return Wn(n,3046,3055,!0,r);case 44:return Wn(n,3174,3183,!0,r);case 45:return Wn(n,3664,3673,!0,r);case 46:return Wn(n,3872,3881,!0,r);case 3:default:return Wn(n,48,57,!0,r)}},wD;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(wD||(wD={}));var Ece=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),Pe=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),df=function(n,e,t){return new Pe(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},Xv=function(){function n(e,t,r,i){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=i}return n.prototype.subdivide=function(e,t){var r=df(this.start,this.startControl,e),i=df(this.startControl,this.endControl,e),s=df(this.endControl,this.end,e),o=df(r,i,e),a=df(i,s,e),l=df(o,a,e);return t?new n(this.start,r,o,l):new n(l,a,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),Vs=function(n){return n.type===1},Uce=function(){function n(e){var t=e.styles,r=e.bounds,i=pg(t.borderTopLeftRadius,r.width,r.height),s=i[0],o=i[1],a=pg(t.borderTopRightRadius,r.width,r.height),l=a[0],A=a[1],c=pg(t.borderBottomRightRadius,r.width,r.height),u=c[0],f=c[1],d=pg(t.borderBottomLeftRadius,r.width,r.height),h=d[0],p=d[1],m=[];m.push((s+l)/r.width),m.push((h+u)/r.width),m.push((o+p)/r.height),m.push((A+f)/r.height);var g=Math.max.apply(Math,m);g>1&&(s/=g,o/=g,l/=g,A/=g,u/=g,f/=g,h/=g,p/=g);var v=r.width-l,y=r.height-f,w=r.width-u,C=r.height-p,b=t.borderTopWidth,F=t.borderRightWidth,x=t.borderBottomWidth,S=t.borderLeftWidth,R=cn(t.paddingTop,e.bounds.width),Z=cn(t.paddingRight,e.bounds.width),Y=cn(t.paddingBottom,e.bounds.width),Q=cn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?vn(r.left+S/3,r.top+b/3,s-S/3,o-b/3,Xt.TOP_LEFT):new Pe(r.left+S/3,r.top+b/3),this.topRightBorderDoubleOuterBox=s>0||o>0?vn(r.left+v,r.top+b/3,l-F/3,A-b/3,Xt.TOP_RIGHT):new Pe(r.left+r.width-F/3,r.top+b/3),this.bottomRightBorderDoubleOuterBox=u>0||f>0?vn(r.left+w,r.top+y,u-F/3,f-x/3,Xt.BOTTOM_RIGHT):new Pe(r.left+r.width-F/3,r.top+r.height-x/3),this.bottomLeftBorderDoubleOuterBox=h>0||p>0?vn(r.left+S/3,r.top+C,h-S/3,p-x/3,Xt.BOTTOM_LEFT):new Pe(r.left+S/3,r.top+r.height-x/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?vn(r.left+S*2/3,r.top+b*2/3,s-S*2/3,o-b*2/3,Xt.TOP_LEFT):new Pe(r.left+S*2/3,r.top+b*2/3),this.topRightBorderDoubleInnerBox=s>0||o>0?vn(r.left+v,r.top+b*2/3,l-F*2/3,A-b*2/3,Xt.TOP_RIGHT):new Pe(r.left+r.width-F*2/3,r.top+b*2/3),this.bottomRightBorderDoubleInnerBox=u>0||f>0?vn(r.left+w,r.top+y,u-F*2/3,f-x*2/3,Xt.BOTTOM_RIGHT):new Pe(r.left+r.width-F*2/3,r.top+r.height-x*2/3),this.bottomLeftBorderDoubleInnerBox=h>0||p>0?vn(r.left+S*2/3,r.top+C,h-S*2/3,p-x*2/3,Xt.BOTTOM_LEFT):new Pe(r.left+S*2/3,r.top+r.height-x*2/3),this.topLeftBorderStroke=s>0||o>0?vn(r.left+S/2,r.top+b/2,s-S/2,o-b/2,Xt.TOP_LEFT):new Pe(r.left+S/2,r.top+b/2),this.topRightBorderStroke=s>0||o>0?vn(r.left+v,r.top+b/2,l-F/2,A-b/2,Xt.TOP_RIGHT):new Pe(r.left+r.width-F/2,r.top+b/2),this.bottomRightBorderStroke=u>0||f>0?vn(r.left+w,r.top+y,u-F/2,f-x/2,Xt.BOTTOM_RIGHT):new Pe(r.left+r.width-F/2,r.top+r.height-x/2),this.bottomLeftBorderStroke=h>0||p>0?vn(r.left+S/2,r.top+C,h-S/2,p-x/2,Xt.BOTTOM_LEFT):new Pe(r.left+S/2,r.top+r.height-x/2),this.topLeftBorderBox=s>0||o>0?vn(r.left,r.top,s,o,Xt.TOP_LEFT):new Pe(r.left,r.top),this.topRightBorderBox=l>0||A>0?vn(r.left+v,r.top,l,A,Xt.TOP_RIGHT):new Pe(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||f>0?vn(r.left+w,r.top+y,u,f,Xt.BOTTOM_RIGHT):new Pe(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=h>0||p>0?vn(r.left,r.top+C,h,p,Xt.BOTTOM_LEFT):new Pe(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||o>0?vn(r.left+S,r.top+b,Math.max(0,s-S),Math.max(0,o-b),Xt.TOP_LEFT):new Pe(r.left+S,r.top+b),this.topRightPaddingBox=l>0||A>0?vn(r.left+Math.min(v,r.width-F),r.top+b,v>r.width+F?0:Math.max(0,l-F),Math.max(0,A-b),Xt.TOP_RIGHT):new Pe(r.left+r.width-F,r.top+b),this.bottomRightPaddingBox=u>0||f>0?vn(r.left+Math.min(w,r.width-S),r.top+Math.min(y,r.height-x),Math.max(0,u-F),Math.max(0,f-x),Xt.BOTTOM_RIGHT):new Pe(r.left+r.width-F,r.top+r.height-x),this.bottomLeftPaddingBox=h>0||p>0?vn(r.left+S,r.top+Math.min(C,r.height-x),Math.max(0,h-S),Math.max(0,p-x),Xt.BOTTOM_LEFT):new Pe(r.left+S,r.top+r.height-x),this.topLeftContentBox=s>0||o>0?vn(r.left+S+Q,r.top+b+R,Math.max(0,s-(S+Q)),Math.max(0,o-(b+R)),Xt.TOP_LEFT):new Pe(r.left+S+Q,r.top+b+R),this.topRightContentBox=l>0||A>0?vn(r.left+Math.min(v,r.width+S+Q),r.top+b+R,v>r.width+S+Q?0:l-S+Q,A-(b+R),Xt.TOP_RIGHT):new Pe(r.left+r.width-(F+Z),r.top+b+R),this.bottomRightContentBox=u>0||f>0?vn(r.left+Math.min(w,r.width-(S+Q)),r.top+Math.min(y,r.height+b+R),Math.max(0,u-(F+Z)),f-(x+Y),Xt.BOTTOM_RIGHT):new Pe(r.left+r.width-(F+Z),r.top+r.height-(x+Y)),this.bottomLeftContentBox=h>0||p>0?vn(r.left+S+Q,r.top+C,Math.max(0,h-(S+Q)),p-(x+Y),Xt.BOTTOM_LEFT):new Pe(r.left+S+Q,r.top+r.height-(x+Y))}return n}(),Xt;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Xt||(Xt={}));var vn=function(n,e,t,r,i){var s=4*((Math.sqrt(2)-1)/3),o=t*s,a=r*s,l=n+t,A=e+r;switch(i){case Xt.TOP_LEFT:return new Xv(new Pe(n,A),new Pe(n,A-a),new Pe(l-o,e),new Pe(l,e));case Xt.TOP_RIGHT:return new Xv(new Pe(n,e),new Pe(n+o,e),new Pe(l,A-a),new Pe(l,A));case Xt.BOTTOM_RIGHT:return new Xv(new Pe(l,e),new Pe(l,e+a),new Pe(n+o,A),new Pe(n,A));case Xt.BOTTOM_LEFT:default:return new Xv(new Pe(l,A),new Pe(l-o,A),new Pe(n,e+a),new Pe(n,e))}},_w=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},Sce=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Qw=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},_ce=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),Kv=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),Qce=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),Rce=function(n){return n.type===0},$J=function(n){return n.type===1},Mce=function(n){return n.type===2},CD=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},Tce=function(n,e,t,r,i){return n.map(function(s,o){switch(o){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+i);case 3:return s.add(e,t+i)}return s})},qJ=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),eH=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Uce(this.container),this.container.styles.opacity<1&&this.effects.push(new Qce(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new _ce(r,i,s))}if(this.container.styles.overflowX!==0){var o=_w(this.curves),a=Qw(this.curves);CD(o,a)?this.effects.push(new Kv(o,6)):(this.effects.push(new Kv(o,2)),this.effects.push(new Kv(a,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(l){return!$J(l)});if(t||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var o=_w(r.curves),a=Qw(r.curves);CD(o,a)||i.unshift(new Kv(a,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(l){return ur(l.target,e)})},n}(),ZE=function(n,e,t,r){n.container.elements.forEach(function(i){var s=ur(i.flags,4),o=ur(i.flags,2),a=new eH(i,n);ur(i.styles.display,2048)&&r.push(a);var l=ur(i.flags,8)?[]:r;if(s||o){var A=s||i.styles.isPositioned()?t:e,c=new qJ(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var f=0;A.negativeZIndex.some(function(h,p){return u>h.element.container.styles.zIndex.order?(f=p,!1):f>0}),A.negativeZIndex.splice(f,0,c)}else if(u>0){var d=0;A.positiveZIndex.some(function(h,p){return u>=h.element.container.styles.zIndex.order?(d=p+1,!1):d>0}),A.positiveZIndex.splice(d,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);ZE(a,c,s?c:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),ZE(a,e,t,l);ur(i.flags,8)&&tH(i,l)})},tH=function(n,e){for(var t=n instanceof GE?n.start:1,r=n instanceof GE?n.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof OJ&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=G_(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},Nce=function(n){var e=new eH(n,null),t=new qJ(e),r=[];return ZE(e,t,t,r),tH(e.container,r),t},bD=function(n,e){switch(e){case 0:return Js(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Js(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Js(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Js(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},Dce=function(n,e){switch(e){case 0:return Js(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Js(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Js(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Js(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},kce=function(n,e){switch(e){case 0:return Js(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Js(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Js(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Js(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},Vce=function(n,e){switch(e){case 0:return jv(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return jv(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return jv(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return jv(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},jv=function(n,e){var t=[];return Vs(n)?t.push(n.subdivide(.5,!1)):t.push(n),Vs(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Js=function(n,e,t,r){var i=[];return Vs(n)?i.push(n.subdivide(.5,!1)):i.push(n),Vs(t)?i.push(t.subdivide(.5,!0)):i.push(t),Vs(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),Vs(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},nH=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Rw=function(n){var e=n.styles,t=n.bounds,r=cn(e.paddingLeft,t.width),i=cn(e.paddingRight,t.width),s=cn(e.paddingTop,t.width),o=cn(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+o))},Lce=function(n,e){return n===0?e.bounds:n===2?Rw(e):nH(e)},Pce=function(n,e){return n===0?e.bounds:n===2?Rw(e):nH(e)},HI=function(n,e,t){var r=Lce(Rf(n.styles.backgroundOrigin,e),n),i=Pce(Rf(n.styles.backgroundClip,e),n),s=Wce(Rf(n.styles.backgroundSize,e),t,r),o=s[0],a=s[1],l=pg(Rf(n.styles.backgroundPosition,e),r.width-o,r.height-a),A=Oce(Rf(n.styles.backgroundRepeat,e),l,s,r,i),c=Math.round(r.left+l[0]),u=Math.round(r.top+l[1]);return[A,c,u,o,a]},hf=function(n){return Pn(n)&&n.value===Pd.AUTO},$v=function(n){return typeof n=="number"},Wce=function(n,e,t){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1];if(!o)return[0,0];if(qn(o)&&a&&qn(a))return[cn(o,t.width),cn(a,t.height)];var l=$v(s);if(Pn(o)&&(o.value===Pd.CONTAIN||o.value===Pd.COVER)){if($v(s)){var A=t.width/t.height;return A<s!=(o.value===Pd.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=$v(r),u=$v(i),f=c||u;if(hf(o)&&(!a||hf(a))){if(c&&u)return[r,i];if(!l&&!f)return[t.width,t.height];if(f&&l){var d=c?r:i*s,h=u?i:r/s;return[d,h]}var p=c?r:t.width,m=u?i:t.height;return[p,m]}if(l){var g=0,v=0;return qn(o)?g=cn(o,t.width):qn(a)&&(v=cn(a,t.height)),hf(o)?g=v*s:(!a||hf(a))&&(v=g/s),[g,v]}var y=null,w=null;if(qn(o)?y=cn(o,t.width):a&&qn(a)&&(w=cn(a,t.height)),y!==null&&(!a||hf(a))&&(w=c&&u?y/r*i:t.height),w!==null&&hf(o)&&(y=c&&u?w/i*r:t.width),y!==null&&w!==null)return[y,w];throw new Error("Unable to calculate background-size for element")},Rf=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},Oce=function(n,e,t,r,i){var s=e[0],o=e[1],a=t[0],l=t[1];switch(n){case 2:return[new Pe(Math.round(r.left),Math.round(r.top+o)),new Pe(Math.round(r.left+r.width),Math.round(r.top+o)),new Pe(Math.round(r.left+r.width),Math.round(l+r.top+o)),new Pe(Math.round(r.left),Math.round(l+r.top+o))];case 3:return[new Pe(Math.round(r.left+s),Math.round(r.top)),new Pe(Math.round(r.left+s+a),Math.round(r.top)),new Pe(Math.round(r.left+s+a),Math.round(r.height+r.top)),new Pe(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new Pe(Math.round(r.left+s),Math.round(r.top+o)),new Pe(Math.round(r.left+s+a),Math.round(r.top+o)),new Pe(Math.round(r.left+s+a),Math.round(r.top+o+l)),new Pe(Math.round(r.left+s),Math.round(r.top+o+l))];default:return[new Pe(Math.round(i.left),Math.round(i.top)),new Pe(Math.round(i.left+i.width),Math.round(i.top)),new Pe(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Pe(Math.round(i.left),Math.round(i.height+i.top))]}},Gce="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",xD="Hidden Text",Zce=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),i.src=Gce,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(xD)),r.appendChild(s),r.appendChild(i);var a=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(xD)),r.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:a,middle:l}},n.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),rH=function(){function n(e,t){this.context=e,this.options=t}return n}(),Jce=1e4;(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new Zce(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),Mce(t)&&(this.ctx.globalAlpha=t.opacity),Rce(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),$J(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Ss(this,void 0,void 0,function(){var r;return Zi(this,function(i){switch(i.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Ss(this,void 0,void 0,function(){return Zi(this,function(r){switch(r.label){case 0:if(ur(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,i){var s=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var o=W_(t.text);o.reduce(function(a,l){return s.ctx.fillText(l,a,t.bounds.top+i),a+s.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),i=Kce(t.fontFamily).join(", "),s=g0(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,r){return Ss(this,void 0,void 0,function(){var i,s,o,a,l,A,c,u,f=this;return Zi(this,function(d){return i=this.createFontStyle(r),s=i[0],o=i[1],a=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(o,a),A=l.baseline,c=l.middle,u=r.paintOrder,t.textBounds.forEach(function(h){u.forEach(function(p){switch(p){case 0:f.ctx.fillStyle=gr(r.color),f.renderTextWithLetterSpacing(h,r.letterSpacing,A);var m=r.textShadow;m.length&&h.text.trim().length&&(m.slice(0).reverse().forEach(function(g){f.ctx.shadowColor=gr(g.color),f.ctx.shadowOffsetX=g.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=g.offsetY.number*f.options.scale,f.ctx.shadowBlur=g.blur.number,f.renderTextWithLetterSpacing(h,r.letterSpacing,A)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),r.textDecorationLine.length&&(f.ctx.fillStyle=gr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(g){switch(g){case 1:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top+A),h.bounds.width,1);break;case 2:f.ctx.fillRect(h.bounds.left,Math.round(h.bounds.top),h.bounds.width,1);break;case 3:f.ctx.fillRect(h.bounds.left,Math.ceil(h.bounds.top+c),h.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&h.text.trim().length&&(f.ctx.strokeStyle=gr(r.webkitTextStrokeColor),f.ctx.lineWidth=r.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(h.text,h.bounds.left,h.bounds.top+A)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=Rw(t),o=Qw(r);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Ss(this,void 0,void 0,function(){var r,i,s,o,a,l,v,v,A,c,u,f,w,d,h,C,p,m,g,v,y,w,C;return Zi(this,function(b){switch(b.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,i=t.curves,s=r.styles,o=0,a=r.textNodes,b.label=1;case 1:return o<a.length?(l=a[o],[4,this.renderTextNode(l,s)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof LJ))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof PJ&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof WJ))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return v=b.sent(),this.renderReplacedElement(r,i,v),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof JJ&&r.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,A.render(r.tree)]):[3,14];case 13:c=b.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),b.label=14;case 14:if(r instanceof O_&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===Uw?r.checked&&(this.ctx.save(),this.path([new Pe(r.bounds.left+u*.39363,r.bounds.top+u*.79),new Pe(r.bounds.left+u*.16,r.bounds.top+u*.5549),new Pe(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new Pe(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new Pe(r.bounds.left+u*.72983,r.bounds.top+u*.23),new Pe(r.bounds.left+u*.84,r.bounds.top+u*.34085),new Pe(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=gr(pD),this.ctx.fill(),this.ctx.restore()):r.type===Sw&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=gr(pD),this.ctx.fill(),this.ctx.restore())),Hce(r)&&r.value.length){switch(f=this.createFontStyle(s),w=f[0],d=f[1],h=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=gr(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Yce(r.styles.textAlign),C=Rw(r),p=0,r.styles.textAlign){case 1:p+=C.width/2;break;case 2:p+=C.width;break}m=C.add(p,0,0,-C.height/2+1),this.ctx.save(),this.path([new Pe(C.left,C.top),new Pe(C.left+C.width,C.top),new Pe(C.left+C.width,C.top+C.height),new Pe(C.left,C.top+C.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zg(r.value,m),s.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ur(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(g=r.styles.listStyleImage,g.type!==0)return[3,18];v=void 0,y=g.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=b.sent(),this.ctx.drawImage(v,r.bounds.left-(v.width+10),r.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(w=this.createFontStyle(s)[0],this.ctx.font=w,this.ctx.fillStyle=gr(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",C=new vu(r.bounds.left,r.bounds.top+cn(r.styles.paddingTop,r.bounds.width),r.bounds.width,qN(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zg(t.listValue,C),s.letterSpacing,qN(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Ss(this,void 0,void 0,function(){var r,i,g,s,o,g,a,l,g,A,c,g,u,f,g,d,h,g,p,m,g;return Zi(this,function(v){switch(v.label){case 0:if(ur(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:v.sent(),r=0,i=t.negativeZIndex,v.label=2;case 2:return r<i.length?(g=i[r],[4,this.renderStack(g)]):[3,5];case 3:v.sent(),v.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:v.sent(),s=0,o=t.nonInlineLevel,v.label=7;case 7:return s<o.length?(g=o[s],[4,this.renderNode(g)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:a=0,l=t.nonPositionedFloats,v.label=11;case 11:return a<l.length?(g=l[a],[4,this.renderStack(g)]):[3,14];case 12:v.sent(),v.label=13;case 13:return a++,[3,11];case 14:A=0,c=t.nonPositionedInlineLevel,v.label=15;case 15:return A<c.length?(g=c[A],[4,this.renderStack(g)]):[3,18];case 16:v.sent(),v.label=17;case 17:return A++,[3,15];case 18:u=0,f=t.inlineLevel,v.label=19;case 19:return u<f.length?(g=f[u],[4,this.renderNode(g)]):[3,22];case 20:v.sent(),v.label=21;case 21:return u++,[3,19];case 22:d=0,h=t.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return d<h.length?(g=h[d],[4,this.renderStack(g)]):[3,26];case 24:v.sent(),v.label=25;case 25:return d++,[3,23];case 26:p=0,m=t.positiveZIndex,v.label=27;case 27:return p<m.length?(g=m[p],[4,this.renderStack(g)]):[3,30];case 28:v.sent(),v.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(i,s){var o=Vs(i)?i.start:i;s===0?r.ctx.moveTo(o.x,o.y):r.ctx.lineTo(o.x,o.y),Vs(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,r,i,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,r,i){var s;if(t.width===r&&t.height===i)return t;var o=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,a=o.createElement("canvas");a.width=Math.max(1,r),a.height=Math.max(1,i);var l=a.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,r,i),a},e.prototype.renderBackgroundImage=function(t){return Ss(this,void 0,void 0,function(){var r,i,s,o,a,l;return Zi(this,function(A){switch(A.label){case 0:r=t.styles.backgroundImage.length-1,i=function(c){var u,f,d,R,M,D,Q,B,x,h,R,M,D,Q,B,p,m,g,v,y,w,C,b,F,x,S,R,Z,Y,Q,B,E,M,D,T,V,G,P,U,H,oe,k;return Zi(this,function(K){switch(K.label){case 0:if(c.type!==0)return[3,5];u=void 0,f=c.url,K.label=1;case 1:return K.trys.push([1,3,,4]),[4,s.context.cache.match(f)];case 2:return u=K.sent(),[3,4];case 3:return K.sent(),s.context.logger.error("Error loading background-image "+f),[3,4];case 4:return u&&(d=HI(t,r,[u.width,u.height,u.width/u.height]),R=d[0],M=d[1],D=d[2],Q=d[3],B=d[4],x=s.ctx.createPattern(s.resizeImage(u,Q,B),"repeat"),s.renderRepeat(R,x,M,D)),[3,6];case 5:Yae(c)?(h=HI(t,r,[null,null,null]),R=h[0],M=h[1],D=h[2],Q=h[3],B=h[4],p=Gae(c.angle,Q,B),m=p[0],g=p[1],v=p[2],y=p[3],w=p[4],C=document.createElement("canvas"),C.width=Q,C.height=B,b=C.getContext("2d"),F=b.createLinearGradient(g,y,v,w),jN(c.stops,m).forEach(function(ne){return F.addColorStop(ne.stop,gr(ne.color))}),b.fillStyle=F,b.fillRect(0,0,Q,B),Q>0&&B>0&&(x=s.ctx.createPattern(C,"repeat"),s.renderRepeat(R,x,M,D))):Xae(c)&&(S=HI(t,r,[null,null,null]),R=S[0],Z=S[1],Y=S[2],Q=S[3],B=S[4],E=c.position.length===0?[V_]:c.position,M=cn(E[0],Q),D=cn(E[E.length-1],B),T=Zae(c,M,D,Q,B),V=T[0],G=T[1],V>0&&G>0&&(P=s.ctx.createRadialGradient(Z+M,Y+D,0,Z+M,Y+D,V),jN(c.stops,V*2).forEach(function(ne){return P.addColorStop(ne.stop,gr(ne.color))}),s.path(R),s.ctx.fillStyle=P,V!==G?(U=t.bounds.left+.5*t.bounds.width,H=t.bounds.top+.5*t.bounds.height,oe=G/V,k=1/oe,s.ctx.save(),s.ctx.translate(U,H),s.ctx.transform(1,0,0,oe,0,0),s.ctx.translate(-U,-H),s.ctx.fillRect(Z,k*(Y-H)+H,Q,B*k),s.ctx.restore()):s.ctx.fill())),K.label=6;case 6:return r--,[2]}})},s=this,o=0,a=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return o<a.length?(l=a[o],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,i){return Ss(this,void 0,void 0,function(){return Zi(this,function(s){return this.path(bD(i,r)),this.ctx.fillStyle=gr(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,i,s){return Ss(this,void 0,void 0,function(){var o,a;return Zi(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return o=Dce(s,i),this.path(o),this.ctx.fillStyle=gr(t),this.ctx.fill(),a=kce(s,i),this.path(a),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Ss(this,void 0,void 0,function(){var r,i,s,o,a,l,A,c,u=this;return Zi(this,function(f){switch(f.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,i=!Ld(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],o=zce(Rf(r.backgroundClip,0),t.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),Ld(r.backgroundColor)||(this.ctx.fillStyle=gr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var h=_w(t.curves),p=d.inset?0:Jce,m=Tce(h,-p+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(h),u.ctx.clip(),u.mask(m)):(u.mask(h),u.ctx.clip(),u.path(m)),u.ctx.shadowOffsetX=d.offsetX.number+p,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=gr(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?gr(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),f.label=2;case 2:a=0,l=0,A=s,f.label=3;case 3:return l<A.length?(c=A[l],c.style!==0&&!Ld(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,a,t.curves,3)];case 6:return f.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,a,t.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,a,t.curves)];case 10:f.sent(),f.label=11;case 11:a++,f.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,i,s,o){return Ss(this,void 0,void 0,function(){var a,l,A,c,u,f,d,h,p,m,g,v,y,w,C,b,C,b;return Zi(this,function(F){return this.ctx.save(),a=Vce(s,i),l=bD(s,i),o===2&&(this.path(l),this.ctx.clip()),Vs(l[0])?(A=l[0].start.x,c=l[0].start.y):(A=l[0].x,c=l[0].y),Vs(l[1])?(u=l[1].end.x,f=l[1].end.y):(u=l[1].x,f=l[1].y),i===0||i===2?d=Math.abs(A-u):d=Math.abs(c-f),this.ctx.beginPath(),o===3?this.formatPath(a):this.formatPath(l.slice(0,2)),h=r<3?r*3:r*2,p=r<3?r*2:r,o===3&&(h=r,p=r),m=!0,d<=h*2?m=!1:d<=h*2+p?(g=d/(2*h+p),h*=g,p*=g):(v=Math.floor((d+p)/(h+p)),y=(d-v*h)/(v-1),w=(d-(v+1)*h)/v,p=w<=0||Math.abs(p-y)<Math.abs(p-w)?y:w),m&&(o===3?this.ctx.setLineDash([0,h+p]):this.ctx.setLineDash([h,p])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=gr(t),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Vs(l[0])&&(C=l[3],b=l[0],this.ctx.beginPath(),this.formatPath([new Pe(C.end.x,C.end.y),new Pe(b.start.x,b.start.y)]),this.ctx.stroke()),Vs(l[1])&&(C=l[1],b=l[2],this.ctx.beginPath(),this.formatPath([new Pe(C.end.x,C.end.y),new Pe(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Ss(this,void 0,void 0,function(){var r;return Zi(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=gr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Nce(t),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(rH);var Hce=function(n){return n instanceof ZJ||n instanceof GJ?!0:n instanceof O_&&n.type!==Sw&&n.type!==Uw},zce=function(n,e){switch(n){case 0:return _w(e);case 2:return Sce(e);case 1:default:return Qw(e)}},Yce=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Xce=["-apple-system","system-ui"],Kce=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return Xce.indexOf(e)===-1}):n};(function(n){Vo(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(t){return Ss(this,void 0,void 0,function(){var r,i;return Zi(this,function(s){switch(s.label){case 0:return r=OE(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,jce(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=gr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(rH);var jce=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})};typeof window<"u"&&Ece.setContext(window);/*!
 * @pixiv/three-vrm v1.0.9
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2023 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-core v1.0.9
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class ID extends Nt{constructor(e){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${e}`,this.expressionName=e,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.weight?1:0:this.overrideBlink==="blend"?this.weight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.weight?1:0:this.overrideLookAt==="blend"?this.weight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.weight?1:0:this.overrideMouth==="blend"?this.weight:0}addBind(e){this._binds.push(e)}applyWeight(e){var t;let r=this.isBinary?this.weight<=.5?0:1:this.weight;r*=(t=e==null?void 0:e.multiplier)!==null&&t!==void 0?t:1,this._binds.forEach(i=>i.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(e=>e.clearAppliedWeight())}}function Ot(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function iH(n,e,t){var r,i;const s=n.parser.json,o=(r=s.nodes)===null||r===void 0?void 0:r[e];if(o==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const a=o.mesh;if(a==null)return null;const l=(i=s.meshes)===null||i===void 0?void 0:i[a];if(l==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${a}] of glTF but the mesh doesn't exist`),null;const A=l.primitives.length,c=[];return t.traverse(u=>{c.length<A&&u.isMesh&&c.push(u)}),c}function FD(n,e){return Ot(this,void 0,void 0,function*(){const t=yield n.parser.getDependency("node",e);return iH(n,e,t)})}function ED(n){return Ot(this,void 0,void 0,function*(){const e=yield n.parser.getDependencies("node"),t=new Map;return e.forEach((r,i)=>{const s=iH(n,i,r);s!=null&&t.set(i,s)}),t})}function UD(n,e){var t,r;const i=parseInt(ks,10);let s=null;if(i>=133)s=(r=(t=n.associations.get(e))===null||t===void 0?void 0:t.materials)!==null&&r!==void 0?r:null;else{const a=n.associations.get(e);(a==null?void 0:a.type)==="materials"&&(s=a.index)}return s}const ai={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function sH(n){return Math.max(Math.min(n,1),0)}class Mw{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},t=new Set(Object.values(ai));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)&&(e[r]=i)}),e}get customExpressionMap(){const e={},t=new Set(Object.values(ai));return Object.entries(this._expressionMap).forEach(([r,i])=>{t.has(r)||(e[r]=i)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new Mw().copy(this)}getExpression(e){var t;return(t=this._expressionMap[e])!==null&&t!==void 0?t:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const t=this._expressions.indexOf(e);t===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(t,1),delete this._expressionMap[e.expressionName]}getValue(e){var t;const r=this.getExpression(e);return(t=r==null?void 0:r.weight)!==null&&t!==void 0?t:null}setValue(e,t){const r=this.getExpression(e);r&&(r.weight=sH(t))}getExpressionTrackName(e){const t=this.getExpression(e);return t?`${t.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(t=>{t.clearAppliedWeight()}),this._expressions.forEach(t=>{let r=1;const i=t.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(r*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(r*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(r*=e.mouth),t.applyWeight({multiplier:r})})}_calculateWeightMultipliers(){let e=1,t=1,r=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,t-=i.overrideLookAtAmount,r-=i.overrideMouthAmount}),e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{blink:e,lookAt:t,mouth:r}}}const Tp={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},$ce={_Color:Tp.Color,_EmissionColor:Tp.EmissionColor,_ShadeColor:Tp.ShadeColor,_RimColor:Tp.RimColor,_OutlineColor:Tp.OutlineColor},qce=new Re;class Nm{constructor({material:e,type:t,targetValue:r}){var i,s,o;this.material=e,this.type=t,this.targetValue=r;const a=(i=Object.entries(Nm._propertyNameMapMap).find(([A])=>e[A]===!0))===null||i===void 0?void 0:i[1],l=(s=a==null?void 0:a[t])!==null&&s!==void 0?s:null;if(l==null)console.warn(`Tried to add a material color bind to the material ${(o=e.name)!==null&&o!==void 0?o:"(no name)"}, the type ${t} but the material or the type is not supported.`),this._state=null;else{const c=e[l].clone(),u=new Re(r.r-c.r,r.g-c.g,r.b-c.b);this._state={propertyName:l,initialValue:c,deltaValue:u}}}applyWeight(e){if(this._state==null)return;const{propertyName:t,deltaValue:r}=this._state,i=this.material[t];i!==void 0&&(i.add(qce.copy(r).multiplyScalar(e)),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}clearAppliedWeight(){if(this._state==null)return;const{propertyName:e,initialValue:t}=this._state,r=this.material[e];r!==void 0&&(r.copy(t),typeof this.material.shouldApplyUniforms=="boolean"&&(this.material.shouldApplyUniforms=!0))}}Nm._propertyNameMapMap={isMeshStandardMaterial:{color:"color",emissionColor:"emissive"},isMeshBasicMaterial:{color:"color"},isMToonMaterial:{color:"color",emissionColor:"emissive",outlineColor:"outlineColorFactor",matcapColor:"matcapFactor",rimColor:"parametricRimColorFactor",shadeColor:"shadeColorFactor"}};class SD{constructor({primitives:e,index:t,weight:r}){this.primitives=e,this.index=t,this.weight=r}applyWeight(e){this.primitives.forEach(t=>{var r;((r=t.morphTargetInfluences)===null||r===void 0?void 0:r[this.index])!=null&&(t.morphTargetInfluences[this.index]+=this.weight*e)})}clearAppliedWeight(){this.primitives.forEach(e=>{var t;((t=e.morphTargetInfluences)===null||t===void 0?void 0:t[this.index])!=null&&(e.morphTargetInfluences[this.index]=0)})}}const _D=new Oe;class Dm{constructor({material:e,scale:t,offset:r}){var i,s;this.material=e,this.scale=t,this.offset=r;const o=(i=Object.entries(Dm._propertyNamesMap).find(([a])=>e[a]===!0))===null||i===void 0?void 0:i[1];o==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!==null&&s!==void 0?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],o.forEach(a=>{var l;const A=(l=e[a])===null||l===void 0?void 0:l.clone();if(!A)return null;e[a]=A;const c=A.offset.clone(),u=A.repeat.clone(),f=r.clone().sub(c),d=t.clone().sub(u);this._properties.push({name:a,initialOffset:c,deltaOffset:f,initialScale:u,deltaScale:d})}))}applyWeight(e){this._properties.forEach(t=>{const r=this.material[t.name];r!==void 0&&(r.offset.add(_D.copy(t.deltaOffset).multiplyScalar(e)),r.repeat.add(_D.copy(t.deltaScale).multiplyScalar(e)),r.needsUpdate=!0)})}clearAppliedWeight(){this._properties.forEach(e=>{const t=this.material[e.name];t!==void 0&&(t.offset.copy(e.initialOffset),t.repeat.copy(e.initialScale),t.needsUpdate=!0)})}}Dm._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};const eue=new Set(["1.0","1.0-beta"]);class lb{constructor(e){this.parser=e}get name(){return"VRMExpressionLoaderPlugin"}afterRoot(e){return Ot(this,void 0,void 0,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return Ot(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Ot(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!eue.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.expressions;if(!l)return null;const A=new Set(Object.values(ai)),c=new Map;l.preset!=null&&Object.entries(l.preset).forEach(([f,d])=>{if(d!=null){if(!A.has(f)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${f}" detected. Ignoring the expression`);return}c.set(f,d)}}),l.custom!=null&&Object.entries(l.custom).forEach(([f,d])=>{if(A.has(f)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${f}". Ignoring the expression`);return}c.set(f,d)});const u=new Mw;return yield Promise.all(Array.from(c.entries()).map(([f,d])=>Ot(this,void 0,void 0,function*(){var h,p,m,g,v,y,w;const C=new ID(f);if(e.scene.add(C),C.isBinary=(h=d.isBinary)!==null&&h!==void 0?h:!1,C.overrideBlink=(p=d.overrideBlink)!==null&&p!==void 0?p:"none",C.overrideLookAt=(m=d.overrideLookAt)!==null&&m!==void 0?m:"none",C.overrideMouth=(g=d.overrideMouth)!==null&&g!==void 0?g:"none",(v=d.morphTargetBinds)===null||v===void 0||v.forEach(b=>Ot(this,void 0,void 0,function*(){var F;if(b.node===void 0||b.index===void 0)return;const x=yield FD(e,b.node),S=b.index;if(!x.every(R=>Array.isArray(R.morphTargetInfluences)&&S<R.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${d.name} attempts to index morph #${S} but not found.`);return}C.addBind(new SD({primitives:x,index:S,weight:(F=b.weight)!==null&&F!==void 0?F:1}))})),d.materialColorBinds||d.textureTransformBinds){const b=[];e.scene.traverse(F=>{const x=F.material;x&&b.push(x)}),(y=d.materialColorBinds)===null||y===void 0||y.forEach(F=>Ot(this,void 0,void 0,function*(){b.filter(S=>{const R=UD(this.parser,S);return F.material===R}).forEach(S=>{C.addBind(new Nm({material:S,type:F.type,targetValue:new Re().fromArray(F.targetValue)}))})})),(w=d.textureTransformBinds)===null||w===void 0||w.forEach(F=>Ot(this,void 0,void 0,function*(){b.filter(S=>{const R=UD(this.parser,S);return F.material===R}).forEach(S=>{var R,Z;C.addBind(new Dm({material:S,offset:new Oe().fromArray((R=F.offset)!==null&&R!==void 0?R:[0,0]),scale:new Oe().fromArray((Z=F.scale)!==null&&Z!==void 0?Z:[1,1])}))})}))}u.registerExpression(C)}))),u})}_v0Import(e){var t;return Ot(this,void 0,void 0,function*(){const r=this.parser.json,i=(t=r.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const o=new Mw,a=s.blendShapeGroups;if(!a)return o;const l=new Set;return yield Promise.all(a.map(A=>Ot(this,void 0,void 0,function*(){var c;const u=A.presetName,f=u!=null&&lb.v0v1PresetNameMap[u]||null,d=f??A.name;if(d==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(l.has(d)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}l.add(d);const h=new ID(d);e.scene.add(h),h.isBinary=(c=A.isBinary)!==null&&c!==void 0?c:!1,A.binds&&A.binds.forEach(m=>Ot(this,void 0,void 0,function*(){var g;if(m.mesh===void 0||m.index===void 0)return;const v=[];(g=r.nodes)===null||g===void 0||g.forEach((w,C)=>{w.mesh===m.mesh&&v.push(C)});const y=m.index;yield Promise.all(v.map(w=>Ot(this,void 0,void 0,function*(){var C;const b=yield FD(e,w);if(!b.every(F=>Array.isArray(F.morphTargetInfluences)&&y<F.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${A.name} attempts to index ${y}th morph but not found.`);return}h.addBind(new SD({primitives:b,index:y,weight:.01*((C=m.weight)!==null&&C!==void 0?C:100)}))})))}));const p=A.materialValues;p&&p.length!==0&&p.forEach(m=>{if(m.materialName===void 0||m.propertyName===void 0||m.targetValue===void 0)return;const g=[];e.scene.traverse(y=>{if(y.material){const w=y.material;Array.isArray(w)?g.push(...w.filter(C=>(C.name===m.materialName||C.name===m.materialName+" (Outline)")&&g.indexOf(C)===-1)):w.name===m.materialName&&g.indexOf(w)===-1&&g.push(w)}});const v=m.propertyName;g.forEach(y=>{if(v==="_MainTex_ST"){const C=new Oe(m.targetValue[0],m.targetValue[1]),b=new Oe(m.targetValue[2],m.targetValue[3]);h.addBind(new Dm({material:y,scale:C,offset:b}));return}const w=$ce[v];if(w){h.addBind(new Nm({material:y,type:w,targetValue:new Re(...m.targetValue.slice(0,3))}));return}console.warn(v+" is not supported")})}),o.registerExpression(h)}))),o})}}lb.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};class ca{constructor(e,t){this._firstPersonOnlyLayer=ca.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=ca.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=t}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(t=>({meshes:t.meshes.concat(),type:t.type})),this}clone(){return new ca(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=ca.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:t=ca.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=t,this.meshAnnotations.forEach(r=>{r.meshes.forEach(i=>{r.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):r.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):r.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,t,r,i){let s=0;if(t!=null&&t.length>0)for(let o=0;o<e.length;o+=3){const a=e[o],l=e[o+1],A=e[o+2],c=t[a],u=r[a];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const f=t[l],d=r[l];if(f[0]>0&&i.includes(d[0])||f[1]>0&&i.includes(d[1])||f[2]>0&&i.includes(d[2])||f[3]>0&&i.includes(d[3]))continue;const h=t[A],p=r[A];h[0]>0&&i.includes(p[0])||h[1]>0&&i.includes(p[1])||h[2]>0&&i.includes(p[2])||h[3]>0&&i.includes(p[3])||(e[s++]=a,e[s++]=l,e[s++]=A)}return s}_createErasedMesh(e,t){const r=new Nh(e.geometry.clone(),e.material);r.name=`${e.name}(erase)`,r.frustumCulled=e.frustumCulled,r.layers.set(this._firstPersonOnlyLayer);const i=r.geometry,s=i.getAttribute("skinIndex"),o=s instanceof rN?[]:s.array,a=[];for(let p=0;p<o.length;p+=4)a.push([o[p],o[p+1],o[p+2],o[p+3]]);const l=i.getAttribute("skinWeight"),A=l instanceof rN?[]:l.array,c=[];for(let p=0;p<A.length;p+=4)c.push([A[p],A[p+1],A[p+2],A[p+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const f=Array.from(u.array),d=this._excludeTriangles(f,c,a,t),h=[];for(let p=0;p<d;p++)h[p]=f[p];return i.setIndex(h),e.onBeforeRender&&(r.onBeforeRender=e.onBeforeRender),r.bind(new dc(e.skeleton.bones,e.skeleton.boneInverses),new Le),r}_createHeadlessModelForSkinnedMesh(e,t){const r=[];if(t.skeleton.bones.forEach((s,o)=>{this._isEraseTarget(s)&&r.push(o)}),!r.length){t.layers.enable(this._thirdPersonOnlyLayer),t.layers.enable(this._firstPersonOnlyLayer);return}t.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(t,r);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer));else{const t=new Qr;t.name=`_headless_${e.name}`,t.layers.set(this._firstPersonOnlyLayer),e.parent.add(t),e.children.filter(r=>r.type==="SkinnedMesh").forEach(r=>{const i=r;this._createHeadlessModelForSkinnedMesh(t,i)})}else if(e.type==="SkinnedMesh"){const t=e;this._createHeadlessModelForSkinnedMesh(e.parent,t)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(t=>t.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}}ca.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;ca.DEFAULT_THIRDPERSON_ONLY_LAYER=10;const tue=new Set(["1.0","1.0-beta"]);class nue{constructor(e){this.parser=e}get name(){return"VRMFirstPersonLoaderPlugin"}afterRoot(e){return Ot(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t!==null){if(t===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");e.userData.vrmFirstPerson=yield this._import(e,t)}})}_import(e,t){return Ot(this,void 0,void 0,function*(){if(t==null)return null;const r=yield this._v1Import(e,t);if(r)return r;const i=yield this._v0Import(e,t);return i||null})}_v1Import(e,t){var r,i;return Ot(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((r=s.extensionsUsed)===null||r===void 0?void 0:r.indexOf("VRMC_vrm"))!==-1))return null;const a=(i=s.extensions)===null||i===void 0?void 0:i.VRMC_vrm;if(!a)return null;const l=a.specVersion;if(!tue.has(l))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const A=a.firstPerson;if(!A)return null;const c=[],u=yield ED(e);return Array.from(u.entries()).forEach(([f,d])=>{var h;const p=A.meshAnnotations?A.meshAnnotations.find(m=>m.node===f):void 0;c.push({meshes:d,type:(h=p==null?void 0:p.type)!==null&&h!==void 0?h:"both"})}),new ca(t,c)})}_v0Import(e,t){var r;return Ot(this,void 0,void 0,function*(){const i=this.parser.json,s=(r=i.extensions)===null||r===void 0?void 0:r.VRM;if(!s)return null;const o=s.firstPerson;if(!o)return null;const a=[],l=yield ED(e);return Array.from(l.entries()).forEach(([A,c])=>{const u=i.nodes[A],f=o.meshAnnotations?o.meshAnnotations.find(d=>d.mesh===u.mesh):void 0;a.push({meshes:c,type:this._convertV0FlagToV1Type(f==null?void 0:f.firstPersonFlag)})}),new ca(t,a)})}_convertV0FlagToV1Type(e){return e==="FirstPersonOnly"?"firstPersonOnly":e==="ThirdPersonOnly"?"thirdPersonOnly":e==="Auto"?"auto":"both"}}const QD=new X,RD=new X,rue=new et;class MD extends Qr{constructor(e){super(),this.vrmHumanoid=e,this._boneAxesMap=new Map,Object.values(e.humanBones).forEach(t=>{const r=new fie(1);r.matrixAutoUpdate=!1,r.material.depthTest=!1,r.material.depthWrite=!1,this.add(r),this._boneAxesMap.set(t,r)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(e=>{e.geometry.dispose(),e.material.dispose()})}updateMatrixWorld(e){Array.from(this._boneAxesMap.entries()).forEach(([t,r])=>{t.node.updateWorldMatrix(!0,!1),t.node.matrixWorld.decompose(QD,rue,RD);const i=QD.set(.1,.1,.1).divide(RD);r.matrix.copy(t.node.matrixWorld).scale(i)}),super.updateMatrixWorld(e)}}const zI=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],km={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},oH={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function aH(n){return n.invert?n.invert():n.inverse(),n}const xc=new X,Ic=new et;class JE{constructor(e){this.humanBones=e,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);i&&(xc.copy(i.position),Ic.copy(i.quaternion),e[r]={position:xc.toArray(),rotation:Ic.toArray()})}),e}getPose(){const e={};return Object.keys(this.humanBones).forEach(t=>{const r=t,i=this.getBoneNode(r);if(!i)return;xc.set(0,0,0),Ic.identity();const s=this.restPose[r];s!=null&&s.position&&xc.fromArray(s.position).negate(),s!=null&&s.rotation&&aH(Ic.fromArray(s.rotation)),xc.add(i.position),Ic.premultiply(i.quaternion),e[r]={position:xc.toArray(),rotation:Ic.toArray()}}),e}setPose(e){Object.entries(e).forEach(([t,r])=>{const i=t,s=this.getBoneNode(i);if(!s)return;const o=this.restPose[i];o&&(r!=null&&r.position&&(s.position.fromArray(r.position),o.position&&s.position.add(xc.fromArray(o.position))),r!=null&&r.rotation&&(s.quaternion.fromArray(r.rotation),o.rotation&&s.quaternion.multiply(Ic.fromArray(o.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([e,t])=>{const r=this.getBoneNode(e);r&&(t!=null&&t.position&&r.position.fromArray(t.position),t!=null&&t.rotation&&r.quaternion.fromArray(t.rotation))})}getBone(e){var t;return(t=this.humanBones[e])!==null&&t!==void 0?t:void 0}getBoneNode(e){var t,r;return(r=(t=this.humanBones[e])===null||t===void 0?void 0:t.node)!==null&&r!==void 0?r:null}}const iue=new X,sue=new et,oue=new X;class Tw extends JE{constructor(e){const{rigBones:t,root:r,parentWorldRotations:i,boneRotations:s}=Tw._setupTransforms(e);super(t),this.original=e,this.root=r,this._parentWorldRotations=i,this._boneRotations=s}static _setupTransforms(e){const t=new Nt;t.name="VRMHumanoidRig";const r={},i={},s={};zI.forEach(l=>{const A=e.getBoneNode(l);if(A){const c=new X,u=new et;A.updateWorldMatrix(!0,!1),A.matrixWorld.decompose(c,u,iue),r[l]=c,i[l]=u,s[l]=A.quaternion.clone()}});const o={},a={};return zI.forEach(l=>{var A;const c=e.getBoneNode(l);if(c){const u=r[l];let f=l,d,h;for(;d==null&&(f=oH[f],f!=null);)d=r[f],h=i[f];const p=new Nt;p.name="Normalized_"+c.name,(f?(A=a[f])===null||A===void 0?void 0:A.node:t).add(p),p.position.copy(u),d&&p.position.sub(d),a[l]={node:p},o[l]=h??new et}}),{rigBones:a,root:t,parentWorldRotations:o,boneRotations:s}}update(){zI.forEach(e=>{const t=this.original.getBoneNode(e);if(t!=null){const r=this.getBoneNode(e),i=this._parentWorldRotations[e],s=sue.copy(i).invert(),o=this._boneRotations[e];if(t.quaternion.copy(r.quaternion).multiply(i).premultiply(s).multiply(o),e==="hips"){const a=r.getWorldPosition(oue);t.parent.updateWorldMatrix(!0,!1);const l=t.parent.matrixWorld,A=a.applyMatrix4(l.invert());t.position.copy(A)}}})}}class Nw{constructor(e,t){var r;this.autoUpdateHumanBones=(r=t==null?void 0:t.autoUpdateHumanBones)!==null&&r!==void 0?r:!0,this._rawHumanBones=new JE(e),this._normalizedHumanBones=new Tw(this._rawHumanBones)}get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new JE(e.humanBones),this._normalizedHumanBones=new Tw(this._rawHumanBones),this}clone(){return new Nw(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}}const aue={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},lue=new Set(["1.0","1.0-beta"]),TD={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"};class Aue{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot,this.autoUpdateHumanBones=t==null?void 0:t.autoUpdateHumanBones}get name(){return"VRMHumanoidLoaderPlugin"}afterRoot(e){return Ot(this,void 0,void 0,function*(){e.userData.vrmHumanoid=yield this._import(e)})}_import(e){return Ot(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t)return t;const r=yield this._v0Import(e);return r||null})}_v1Import(e){var t,r;return Ot(this,void 0,void 0,function*(){const i=this.parser.json;if(!(((t=i.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const o=(r=i.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(!o)return null;const a=o.specVersion;if(!lue.has(a))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const l=o.humanoid;if(!l)return null;const A=l.humanBones.leftThumbIntermediate!=null||l.humanBones.rightThumbIntermediate!=null,c={};l.humanBones!=null&&(yield Promise.all(Object.entries(l.humanBones).map(([f,d])=>Ot(this,void 0,void 0,function*(){let h=f;const p=d.node;if(A){const g=TD[h];g!=null&&(h=g)}const m=yield this.parser.getDependency("node",p);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${h} (index = ${p}) does not exist`);return}c[h]={node:m}}))));const u=new Nw(this._ensureRequiredBonesExist(c),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(u.normalizedHumanBonesRoot),this.helperRoot){const f=new MD(u);this.helperRoot.add(f),f.renderOrder=this.helperRoot.renderOrder}return u})}_v0Import(e){var t;return Ot(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.humanoid;if(!s)return null;const o={};s.humanBones!=null&&(yield Promise.all(s.humanBones.map(l=>Ot(this,void 0,void 0,function*(){const A=l.bone,c=l.node;if(A==null||c==null)return;const u=yield this.parser.getDependency("node",c);if(u==null){console.warn(`A glTF node bound to the humanoid bone ${A} (index = ${c}) does not exist`);return}const f=TD[A],d=f??A;if(o[d]!=null){console.warn(`Multiple bone entries for ${d} detected (index = ${c}), ignoring duplicated entries.`);return}o[d]={node:u}}))));const a=new Nw(this._ensureRequiredBonesExist(o),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(e.scene.add(a.normalizedHumanBonesRoot),this.helperRoot){const l=new MD(a);this.helperRoot.add(l),l.renderOrder=this.helperRoot.renderOrder}return a})}_ensureRequiredBonesExist(e){const t=Object.values(aue).filter(r=>e[r]==null);if(t.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${t.join(", ")}`);return e}}class ND extends $t{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new At(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new At(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,e=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),e&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let e=0;e<64;e++){const t=e/63*this._currentTheta;this._attrPos.setXYZ(e+1,this._currentRadius*Math.sin(t),0,this._currentRadius*Math.cos(t))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<63;e++)this._attrIndex.setXYZ(e*3,0,e+1,e+2);this._attrIndex.needsUpdate=!0}}class cue extends $t{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new X,this._currentTail=new X,this._attrPos=new At(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new At(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,e=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const qv=new et,DD=new et,Np=new X,kD=new X,VD=Math.sqrt(2)/2,uue=new et(0,0,-VD,VD),fue=new X(0,1,0);class due extends Qr{constructor(e){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=e;{const t=new ND;t.radius=.5;const r=new ss({color:65280,transparent:!0,opacity:.5,side:Ui,depthTest:!1,depthWrite:!1});this._meshPitch=new Vn(t,r),this.add(this._meshPitch)}{const t=new ND;t.radius=.5;const r=new ss({color:16711680,transparent:!0,opacity:.5,side:Ui,depthTest:!1,depthWrite:!1});this._meshYaw=new Vn(t,r),this.add(this._meshYaw)}{const t=new cue;t.radius=.1;const r=new Pl({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new A0(t,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(e){const t=Lt.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=t,this._meshYaw.geometry.update();const r=Lt.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Np),this.vrmLookAt.getLookAtWorldQuaternion(qv),qv.multiply(this.vrmLookAt.getFaceFrontQuaternion(DD)),this._meshYaw.position.copy(Np),this._meshYaw.quaternion.copy(qv),this._meshPitch.position.copy(Np),this._meshPitch.quaternion.copy(qv),this._meshPitch.quaternion.multiply(DD.setFromAxisAngle(fue,t)),this._meshPitch.quaternion.multiply(uue);const{target:i,autoUpdate:s}=this.vrmLookAt;i!=null&&s&&(i.getWorldPosition(kD).sub(Np),this._lineTarget.geometry.tail.copy(kD),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Np)),super.updateMatrixWorld(e)}}const hue=new X,pue=new X;function HE(n,e){return n.matrixWorld.decompose(hue,e,pue),e}function lB(n){return[Math.atan2(-n.z,n.x),Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z))]}function LD(n){const e=Math.round(n/2/Math.PI);return n-2*Math.PI*e}const PD=new X(0,0,1),gue=new X,mue=new X,vue=new X,yue=new et,YI=new et,WD=new et,Bue=new et,XI=new zr;class Ab{constructor(e,t){this.offsetFromHeadBone=new X,this.autoUpdate=!0,this.faceFront=new X(0,0,1),this.humanoid=e,this.applier=t,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new et)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new zr)}getEuler(e){return e.set(Lt.DEG2RAD*this._pitch,Lt.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new Ab(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const t=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(t.matrixWorld)}getLookAtWorldQuaternion(e){const t=this.humanoid.getRawBoneNode("head");return HE(t,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(PD)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[t,r]=lB(this.faceFront);return XI.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(XI).premultiply(Bue.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(YI),this.getFaceFrontQuaternion(WD),e.copy(PD).applyQuaternion(YI).applyQuaternion(WD).applyEuler(this.getEuler(XI))}lookAt(e){const t=yue.copy(this._restHeadWorldQuaternion).multiply(aH(this.getLookAtWorldQuaternion(YI))),r=this.getLookAtWorldPosition(mue),i=vue.copy(e).sub(r).applyQuaternion(t).normalize(),[s,o]=lB(this.faceFront),[a,l]=lB(i),A=LD(a-s),c=LD(o-l);this._yaw=Lt.RAD2DEG*A,this._pitch=Lt.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(gue)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}}Ab.EULER_ORDER="YXZ";const wue=new X(0,0,1),Ho=new et,pf=new et,Is=new zr(0,0,0,"YXZ");class AB{constructor(e,t,r,i,s){this.humanoid=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s,this.faceFront=new X(0,0,1),this._restQuatLeftEye=new et,this._restQuatRightEye=new et,this._restLeftEyeParentWorldQuat=new et,this._restRightEyeParentWorldQuat=new et;const o=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");o&&(this._restQuatLeftEye.copy(o.quaternion),HE(o.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),HE(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(e,t){const r=this.humanoid.getRawBoneNode("leftEye"),i=this.humanoid.getRawBoneNode("rightEye"),s=this.humanoid.getNormalizedBoneNode("leftEye"),o=this.humanoid.getNormalizedBoneNode("rightEye");r&&(t<0?Is.x=-Lt.DEG2RAD*this.rangeMapVerticalDown.map(-t):Is.x=Lt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Is.y=-Lt.DEG2RAD*this.rangeMapHorizontalInner.map(-e):Is.y=Lt.DEG2RAD*this.rangeMapHorizontalOuter.map(e),Ho.setFromEuler(Is),this._getWorldFaceFrontQuat(pf),s.quaternion.copy(pf).multiply(Ho).multiply(pf.invert()),Ho.copy(this._restLeftEyeParentWorldQuat),r.quaternion.copy(s.quaternion).multiply(Ho).premultiply(Ho.invert()).multiply(this._restQuatLeftEye)),i&&(t<0?Is.x=-Lt.DEG2RAD*this.rangeMapVerticalDown.map(-t):Is.x=Lt.DEG2RAD*this.rangeMapVerticalUp.map(t),e<0?Is.y=-Lt.DEG2RAD*this.rangeMapHorizontalOuter.map(-e):Is.y=Lt.DEG2RAD*this.rangeMapHorizontalInner.map(e),Ho.setFromEuler(Is),this._getWorldFaceFrontQuat(pf),o.quaternion.copy(pf).multiply(Ho).multiply(pf.invert()),Ho.copy(this._restRightEyeParentWorldQuat),i.quaternion.copy(o.quaternion).multiply(Ho).premultiply(Ho.invert()).multiply(this._restQuatRightEye))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Lt.RAD2DEG*e.y,r=Lt.RAD2DEG*e.x;this.applyYawPitch(t,r)}_getWorldFaceFrontQuat(e){if(this.faceFront.distanceToSquared(wue)<.01)return e.identity();const[t,r]=lB(this.faceFront);return Is.set(0,.5*Math.PI+t,r,"YZX"),e.setFromEuler(Is)}}AB.type="bone";class zE{constructor(e,t,r,i,s){this.expressions=e,this.rangeMapHorizontalInner=t,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=i,this.rangeMapVerticalUp=s}applyYawPitch(e,t){t<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-t))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(t))),e<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-e))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(e)))}lookAt(e){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const t=Lt.RAD2DEG*e.y,r=Lt.RAD2DEG*e.x;this.applyYawPitch(t,r)}}zE.type="expression";class OD{constructor(e,t){this.inputMaxValue=e,this.outputScale=t}map(e){return this.outputScale*sH(e/this.inputMaxValue)}}const Cue=new Set(["1.0","1.0-beta"]);class bue{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return"VRMLookAtLoaderPlugin"}afterRoot(e){return Ot(this,void 0,void 0,function*(){const t=e.userData.vrmHumanoid;if(t===null)return;if(t===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=e.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");e.userData.vrmLookAt=yield this._import(e,t,r)}})}_import(e,t,r){return Ot(this,void 0,void 0,function*(){if(t==null||r==null)return null;const i=yield this._v1Import(e,t,r);if(i)return i;const s=yield this._v0Import(e,t,r);return s||null})}_v1Import(e,t,r){var i,s,o;return Ot(this,void 0,void 0,function*(){const a=this.parser.json;if(!(((i=a.extensionsUsed)===null||i===void 0?void 0:i.indexOf("VRMC_vrm"))!==-1))return null;const A=(s=a.extensions)===null||s===void 0?void 0:s.VRMC_vrm;if(!A)return null;const c=A.specVersion;if(!Cue.has(c))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${c}"`),null;const u=A.lookAt;if(!u)return null;const f=u.type==="expression"?1:10,d=this._v1ImportRangeMap(u.rangeMapHorizontalInner,f),h=this._v1ImportRangeMap(u.rangeMapHorizontalOuter,f),p=this._v1ImportRangeMap(u.rangeMapVerticalDown,f),m=this._v1ImportRangeMap(u.rangeMapVerticalUp,f);let g;u.type==="expression"?g=new zE(r,d,h,p,m):g=new AB(t,d,h,p,m);const v=this._importLookAt(t,g);return v.offsetFromHeadBone.fromArray((o=u.offsetFromHeadBone)!==null&&o!==void 0?o:[0,.06,0]),v})}_v1ImportRangeMap(e,t){var r,i;return new OD((r=e==null?void 0:e.inputMaxValue)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.outputScale)!==null&&i!==void 0?i:t)}_v0Import(e,t,r){var i,s,o,a;return Ot(this,void 0,void 0,function*(){const A=(i=this.parser.json.extensions)===null||i===void 0?void 0:i.VRM;if(!A)return null;const c=A.firstPerson;if(!c)return null;const u=c.lookAtTypeName==="BlendShape"?1:10,f=this._v0ImportDegreeMap(c.lookAtHorizontalInner,u),d=this._v0ImportDegreeMap(c.lookAtHorizontalOuter,u),h=this._v0ImportDegreeMap(c.lookAtVerticalDown,u),p=this._v0ImportDegreeMap(c.lookAtVerticalUp,u);let m;c.lookAtTypeName==="BlendShape"?m=new zE(r,f,d,h,p):m=new AB(t,f,d,h,p);const g=this._importLookAt(t,m);return c.firstPersonBoneOffset?g.offsetFromHeadBone.set((s=c.firstPersonBoneOffset.x)!==null&&s!==void 0?s:0,(o=c.firstPersonBoneOffset.y)!==null&&o!==void 0?o:.06,-((a=c.firstPersonBoneOffset.z)!==null&&a!==void 0?a:0)):g.offsetFromHeadBone.set(0,.06,0),g.faceFront.set(0,0,-1),m instanceof AB&&m.faceFront.set(0,0,-1),g})}_v0ImportDegreeMap(e,t){var r,i;const s=e==null?void 0:e.curve;return JSON.stringify(s)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported"),new OD((r=e==null?void 0:e.xRange)!==null&&r!==void 0?r:90,(i=e==null?void 0:e.yRange)!==null&&i!==void 0?i:t)}_importLookAt(e,t){const r=new Ab(e,t);if(this.helperRoot){const i=new due(r);this.helperRoot.add(i),i.renderOrder=this.helperRoot.renderOrder}return r}}function xue(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}const Iue=new Set(["1.0","1.0-beta"]);class Fue{constructor(e,t){var r,i,s;this.parser=e,this.needThumbnailImage=(r=t==null?void 0:t.needThumbnailImage)!==null&&r!==void 0?r:!0,this.acceptLicenseUrls=(i=t==null?void 0:t.acceptLicenseUrls)!==null&&i!==void 0?i:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(s=t==null?void 0:t.acceptV0Meta)!==null&&s!==void 0?s:!0}get name(){return"VRMMetaLoaderPlugin"}afterRoot(e){return Ot(this,void 0,void 0,function*(){e.userData.vrmMeta=yield this._import(e)})}_import(e){return Ot(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i;return Ot(this,void 0,void 0,function*(){const s=this.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRMC_vrm"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRMC_vrm;if(a==null)return null;const l=a.specVersion;if(!Iue.has(l))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const A=a.meta;if(!A)return null;const c=A.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(c))throw new Error(`VRMMetaLoaderPlugin: The license url "${c}" is not accepted`);let f;return this.needThumbnailImage&&A.thumbnailImage!=null&&(f=(i=yield this._extractGLTFImage(A.thumbnailImage))!==null&&i!==void 0?i:void 0),{metaVersion:"1",name:A.name,version:A.version,authors:A.authors,copyrightInformation:A.copyrightInformation,contactInformation:A.contactInformation,references:A.references,thirdPartyLicenses:A.thirdPartyLicenses,thumbnailImage:f,licenseUrl:A.licenseUrl,avatarPermission:A.avatarPermission,allowExcessivelyViolentUsage:A.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:A.allowExcessivelySexualUsage,commercialUsage:A.commercialUsage,allowPoliticalOrReligiousUsage:A.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:A.allowAntisocialOrHateUsage,creditNotation:A.creditNotation,allowRedistribution:A.allowRedistribution,modification:A.modification,otherLicenseUrl:A.otherLicenseUrl}})}_v0Import(e){var t;return Ot(this,void 0,void 0,function*(){const i=(t=this.parser.json.extensions)===null||t===void 0?void 0:t.VRM;if(!i)return null;const s=i.meta;if(!s)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let o;return this.needThumbnailImage&&s.texture!=null&&s.texture!==-1&&(o=yield this.parser.getDependency("texture",s.texture)),{metaVersion:"0",allowedUserName:s.allowedUserName,author:s.author,commercialUssageName:s.commercialUssageName,contactInformation:s.contactInformation,licenseName:s.licenseName,otherLicenseUrl:s.otherLicenseUrl,otherPermissionUrl:s.otherPermissionUrl,reference:s.reference,sexualUssageName:s.sexualUssageName,texture:o??void 0,title:s.title,version:s.version,violentUssageName:s.violentUssageName}})}_extractGLTFImage(e){var t;return Ot(this,void 0,void 0,function*(){const i=(t=this.parser.json.images)===null||t===void 0?void 0:t[e];if(i==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image doesn't exist`),null;let s=i.uri;if(i.bufferView!=null){const a=yield this.parser.getDependency("bufferView",i.bufferView),l=new Blob([a],{type:i.mimeType});s=URL.createObjectURL(l)}return s==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${e}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new dZ().loadAsync(xue(s,this.parser.options.path)).catch(a=>(console.error(a),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}}class Eue{constructor(e){this.scene=e.scene,this.meta=e.meta,this.humanoid=e.humanoid,this.expressionManager=e.expressionManager,this.firstPerson=e.firstPerson,this.lookAt=e.lookAt}update(e){this.humanoid.update(),this.lookAt&&this.lookAt.update(e),this.expressionManager&&this.expressionManager.update()}}class Uue extends Eue{constructor(e){super(e),this.materials=e.materials,this.springBoneManager=e.springBoneManager,this.nodeConstraintManager=e.nodeConstraintManager}update(e){super.update(e),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(e),this.materials&&this.materials.forEach(t=>{t.update&&t.update(e)})}}function ey(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}/*!
 * @pixiv/three-vrm-materials-mtoon v1.0.9
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function zc(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}var Sue=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;
  uniform mat3 uvTransform;
#endif

#include <uv2_pars_vertex>
// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
  #endif

  #include <uv2_vertex>
  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  float outlineTex = 1.0;

  #ifdef OUTLINE
    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
    #endif

    #ifdef OUTLINE_WIDTH_WORLD
      float worldNormalLength = length( transformedNormal );
      vec3 outlineOffset = outlineWidthFactor * outlineTex * worldNormalLength * objectNormal;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      vec3 clipNormal = ( projectionMatrix * modelViewMatrix * vec4( objectNormal, 0.0 ) ).xyz;
      vec2 projectedNormal = normalize( clipNormal.xy );
      projectedNormal.x *= projectionMatrix[ 0 ].x / projectionMatrix[ 1 ].y;
      gl_Position.xy += 2.0 * outlineWidthFactor * outlineTex * projectedNormal.xy;
    #endif

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,_ue=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

#include <uv2_pars_fragment>
#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#if THREE_VRM_THREE_REVISION >= 132
  #include <alphatest_pars_fragment>
#endif

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
  return RECIPROCAL_PI * diffuseColor;
}

#include <lights_pars_begin>

#if THREE_VRM_THREE_REVISION >= 132
  #include <normal_pars_fragment>
#endif

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

#if THREE_VRM_THREE_REVISION < 132
  #ifndef FLAT_SHADED
    varying vec3 vNormal;
  #endif
#endif

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      lightColor *= PI;
    #endif
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
  float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
  vec3 irradiance = directLight.color;

  #if THREE_VRM_THREE_REVISION < 132
    #ifndef PHYSICALLY_CORRECT_LIGHTS
      irradiance *= PI;
    #endif
  #endif

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;

  irradiance *= dotNL;

  float shading = getShading( dotNL, shadow, material.shadingShift );

  // toon shaded diffuse
  reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
}

void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
  // indirect diffuse will use diffuseColor, no shadeColor involved
  reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

  // directSpecular will be used for rim lighting, not an actual specular
  reflectedLight.directSpecular += irradiance;
}

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

#ifdef OBJECTSPACE_NORMALMAP

  uniform mat3 normalMatrix;

#endif

#if ! defined ( USE_TANGENT ) && defined ( TANGENTSPACE_NORMALMAP )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126
  // See: #21205, #21307, #21299
  #if THREE_VRM_THREE_REVISION >= 126

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {

      // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude

      vec3 S = ( q0 * st1.t - q1 * st0.t ) * scale;
      vec3 T = ( - q0 * st1.s + q1 * st0.s ) * scale;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?

      if ( length( S ) == 0.0 || length( T ) == 0.0 ) {
        return surf_norm;
      }

      S = normalize( S );
      T = normalize( T );
      vec3 N = normalize( surf_norm );

      #ifdef DOUBLE_SIDED

        // Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331

        bool frontFacing = dot( cross( S, T ), N ) > 0.0;

        mapN.xy *= ( float( frontFacing ) * 2.0 - 1.0 );

      #else

        mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

      mat3 tsn = mat3( S, T, N );
      return normalize( tsn * mapN );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <encodings_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      vec4 sampledDiffuseColor = texture2D( map, mapUv );
      #ifdef DECODE_VIDEO_TEXTURE
        sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
      #endif
      diffuseColor *= sampledDiffuseColor;
    #else
      // COMPAT: pre-r137
      vec4 texelColor = texture2D( map, mapUv );
      texelColor = mapTexelToLinear( texelColor );
      diffuseColor *= texelColor;
    #endif
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>
  #include <normal_fragment_begin>

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  #ifdef OBJECTSPACE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = normal * faceDirection;

      #else

        normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );

      #endif

    #endif

    normal = normalize( normalMatrix * normal );

  #elif defined( TANGENTSPACE_NORMALMAP )

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;
    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    #ifdef USE_TANGENT

      normal = normalize( vTBN * mapN );

    #else

      // Temporary compat against shader change @ Three.js r126
      // See: #21205, #21307, #21299
      #if THREE_VRM_THREE_REVISION >= 126

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

      #else

        normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN );

      #endif

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
    #else
      // COMPAT: pre-r137
      totalEmissiveRadiance *= emissiveMapTexelToLinear( texture2D( emissiveMap, emissiveMapUv ) ).rgb;
    #endif
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      material.shadeColor *= shadeMultiplyTextureTexelToLinear( texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv) ).rgb;
    #endif
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  GeometricContext geometry;

  geometry.position = - vViewPosition;
  geometry.normal = normal;
  geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

  #ifdef CLEARCOAT

    geometry.clearcoatNormal = clearcoatNormal;

  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getPointLightInfo( pointLight, geometry, directLight );
      #else
        getPointDirectLightIrradiance( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getSpotLightInfo( spotLight, geometry, directLight );
      #else
        getSpotDirectLightIrradiance( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      #if THREE_VRM_THREE_REVISION >= 132
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #else
        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif

      RE_Direct( directLight, geometry, material, shadow, reflectedLight );

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    #if THREE_VRM_THREE_REVISION >= 133
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        #if THREE_VRM_THREE_REVISION >= 133
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      #if THREE_VRM_THREE_REVISION >= 137
        vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      #else
        // COMPAT: pre-r137
        vec3 matcap = matcapTextureTexelToLinear( texture2D( matcapTexture, sphereUv ) ).rgb;
      #endif
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    #if THREE_VRM_THREE_REVISION >= 137
      rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
    #else
      // COMPAT: pre-r137
      rim *= rimMultiplyTextureTexelToLinear( texture2D( rimMultiplyTexture, rimMultiplyTextureUv ) ).rgb;
    #endif
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`;const Que={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},KI={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},Rue=3002,Mue=3004,Tue=3005,Nue=3006,Due=3007,kue=n=>{if(parseInt(ks,10)>=136)switch(n){case no:return["Linear","( value )"];case ht:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}else switch(n){case no:return["Linear","( value )"];case ht:return["sRGB","( value )"];case Rue:return["RGBE","( value )"];case Mue:return["RGBM","( value, 7.0 )"];case Tue:return["RGBM","( value, 16.0 )"];case Nue:return["RGBD","( value, 256.0 )"];case Due:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+n)}},jI=(n,e)=>{const t=kue(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"};function $I(n,e){let t;return n&&n.isTexture?t=n.encoding:t=no,parseInt(ks,10)>=133&&e&&n&&n.isTexture&&n.format===Fi&&n.type===jA&&n.encoding===ht&&(t=no),t}class cB extends ki{constructor(e={}){super({vertexShader:Sue,fragmentShader:_ue}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=Rh,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=Que.None,this._outlineWidthMode=KI.None,this._isOutline=!1,e.transparentWithZWrite&&(e.depthWrite=!0),delete e.transparentWithZWrite,e.fog=!0,e.lights=!0,e.clipping=!0,parseInt(ks,10)<129&&(e.skinning=e.skinning||!1),parseInt(ks,10)<131&&(e.morphTargets=e.morphTargets||!1,e.morphNormals=e.morphNormals||!1),this.uniforms=$G.merge([Me.common,Me.normalmap,Me.emissivemap,Me.fog,Me.lights,{litFactor:{value:new Re(1,1,1)},mapUvTransform:{value:new Dn},colorAlpha:{value:1},normalMapUvTransform:{value:new Dn},shadeColorFactor:{value:new Re(.97,.81,.86)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new Dn},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new Dn},shadingShiftTextureScale:{value:null},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new Re(0,0,0)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new Dn},parametricRimColorFactor:{value:new Re(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new Dn},rimLightingMixFactor:{value:0},parametricRimFresnelPowerFactor:{value:1},parametricRimLiftFactor:{value:0},emissive:{value:new Re(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new Dn},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new Dn},outlineWidthFactor:{value:.5},outlineColorFactor:{value:new Re(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new Dn},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},e.uniforms]),this.setValues(e),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([t,r])=>`${t}:${r}`),this.matcapTexture?`matcapTextureEncoding:${this.matcapTexture.encoding}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureEncoding:${this.shadeMultiplyTexture.encoding}`:"",this.rimMultiplyTexture?`rimMultiplyTextureEncoding:${this.rimMultiplyTexture.encoding}`:""].join(","),this.onBeforeCompile=(t,r)=>{const i=r.capabilities.isWebGL2,s=parseInt(ks,10),o=Object.entries(Object.assign(Object.assign({},this._generateDefines()),this.defines)).filter(([l,A])=>!!A).map(([l,A])=>`#define ${l} ${A}`).join(`
`)+`
`;let a="";parseInt(ks,10)<137&&(a=(this.matcapTexture!==null?jI("matcapTextureTexelToLinear",$I(this.matcapTexture,i))+`
`:"")+(this.shadeMultiplyTexture!==null?jI("shadeMultiplyTextureTexelToLinear",$I(this.shadeMultiplyTexture,i))+`
`:"")+(this.rimMultiplyTexture!==null?jI("rimMultiplyTextureTexelToLinear",$I(this.rimMultiplyTexture,i))+`
`:"")),t.vertexShader=o+t.vertexShader,t.fragmentShader=o+a+t.fragmentShader,s<132&&(t.fragmentShader=t.fragmentShader.replace("#include <normal_pars_fragment>",""),t.fragmentShader=t.fragmentShader.replace("#include <alphatest_pars_fragment>",""))}}get color(){return this.uniforms.litFactor.value}set color(e){this.uniforms.litFactor.value=e}get map(){return this.uniforms.map.value}set map(e){this.uniforms.map.value=e}get normalMap(){return this.uniforms.normalMap.value}set normalMap(e){this.uniforms.normalMap.value=e}get normalScale(){return this.uniforms.normalScale.value}set normalScale(e){this.uniforms.normalScale.value=e}get emissive(){return this.uniforms.emissive.value}set emissive(e){this.uniforms.emissive.value=e}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(e){this.uniforms.emissiveIntensity.value=e}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(e){this.uniforms.emissiveMap.value=e}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(e){this.uniforms.shadeColorFactor.value=e}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(e){this.uniforms.shadeMultiplyTexture.value=e}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(e){this.uniforms.shadingShiftFactor.value=e}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(e){this.uniforms.shadingShiftTexture.value=e}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(e){this.uniforms.shadingShiftTextureScale.value=e}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(e){this.uniforms.shadingToonyFactor.value=e}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(e){this.uniforms.giEqualizationFactor.value=e}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(e){this.uniforms.matcapFactor.value=e}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(e){this.uniforms.matcapTexture.value=e}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(e){this.uniforms.parametricRimColorFactor.value=e}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(e){this.uniforms.rimMultiplyTexture.value=e}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(e){this.uniforms.rimLightingMixFactor.value=e}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(e){this.uniforms.parametricRimFresnelPowerFactor.value=e}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(e){this.uniforms.parametricRimLiftFactor.value=e}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(e){this.uniforms.outlineWidthMultiplyTexture.value=e}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(e){this.uniforms.outlineWidthFactor.value=e}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(e){this.uniforms.outlineColorFactor.value=e}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(e){this.uniforms.outlineLightingMixFactor.value=e}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(e){this.uniforms.uvAnimationMaskTexture.value=e}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(e){this.uniforms.uvAnimationScrollXOffset.value=e}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(e){this.uniforms.uvAnimationScrollYOffset.value=e}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(e){this.uniforms.uvAnimationRotationPhase.value=e}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(e){this._ignoreVertexColor=e,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(e){this._v0CompatShade=e,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(e){this._debugMode=e,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(e){this._outlineWidthMode=e,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(e){this._isOutline=e,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(e){this._uploadUniformsWorkaround(),this._updateUVAnimation(e)}copy(e){return super.copy(e),this.map=e.map,this.normalMap=e.normalMap,this.emissiveMap=e.emissiveMap,this.shadeMultiplyTexture=e.shadeMultiplyTexture,this.shadingShiftTexture=e.shadingShiftTexture,this.matcapTexture=e.matcapTexture,this.rimMultiplyTexture=e.rimMultiplyTexture,this.outlineWidthMultiplyTexture=e.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=e.uvAnimationMaskTexture,this.normalMapType=e.normalMapType,this.uvAnimationScrollXSpeedFactor=e.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=e.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=e.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=e.ignoreVertexColor,this.v0CompatShade=e.v0CompatShade,this.debugMode=e.debugMode,this.outlineWidthMode=e.outlineWidthMode,this.isOutline=e.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(e){this.uniforms.uvAnimationScrollXOffset.value+=e*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=e*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=e*this.uvAnimationRotationSpeedFactor,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),parseInt(ks,10)>=132&&(this.uniforms.alphaTest.value=this.alphaTest),this.uniformsNeedUpdate=!0}_generateDefines(){const e=parseInt(ks,10),t=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:e,OUTLINE:this._isOutline,MTOON_USE_UV:t||r,MTOON_UVS_VERTEX_ONLY:t&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_WORLD:this._isOutline&&this._outlineWidthMode===KI.WorldCoordinates,OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===KI.ScreenCoordinates}}_updateTextureMatrix(e,t){e.value&&(e.value.matrixAutoUpdate&&e.value.updateMatrix(),t.value.copy(e.value.matrix))}}class Vue{constructor(e,t){this._parser=e,this._materialParams=t,this._pendings=[]}get pending(){return Promise.all(this._pendings)}assignPrimitive(e,t){t!=null&&(this._materialParams[e]=t)}assignColor(e,t,r){t!=null&&(this._materialParams[e]=new Re().fromArray(t),r&&this._materialParams[e].convertSRGBToLinear())}assignTexture(e,t,r){return zc(this,void 0,void 0,function*(){const i=(()=>zc(this,void 0,void 0,function*(){t!=null&&(yield this._parser.assignTexture(this._materialParams,e,t),r&&(this._materialParams[e].encoding=ht))}))();return this._pendings.push(i),i})}assignTextureByIndex(e,t,r){return zc(this,void 0,void 0,function*(){return this.assignTexture(e,t!=null?{index:t}:void 0,r)})}}const Lue=new Set(["1.0","1.0-beta"]);class Wd{constructor(e,t={}){var r,i,s;this.parser=e,this.renderOrderOffset=(r=t.renderOrderOffset)!==null&&r!==void 0?r:0,this.v0CompatShade=(i=t.v0CompatShade)!==null&&i!==void 0?i:!1,this.debugMode=(s=t.debugMode)!==null&&s!==void 0?s:"none",this._mToonMaterialSet=new Set}get name(){return Wd.EXTENSION_NAME}beforeRoot(){return zc(this,void 0,void 0,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return zc(this,void 0,void 0,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?cB:null}extendMaterialParams(e,t){const r=this._getMToonExtension(e);return r?this._extendMaterialParams(r,t):null}loadMesh(e){var t;return zc(this,void 0,void 0,function*(){const r=this.parser,s=(t=r.json.meshes)===null||t===void 0?void 0:t[e];if(s==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const o=s.primitives,a=yield r.loadMesh(e);if(o.length===1){const l=a,A=o[0].material;A!=null&&this._setupPrimitive(l,A)}else{const l=a;for(let A=0;A<o.length;A++){const c=l.children[A],u=o[A].material;u!=null&&this._setupPrimitive(c,u)}}return a})}_removeUnlitExtensionIfMToonExists(){const r=this.parser.json.materials;r==null||r.map((i,s)=>{var o;this._getMToonExtension(s)&&(!((o=i.extensions)===null||o===void 0)&&o.KHR_materials_unlit)&&delete i.extensions.KHR_materials_unlit})}_getMToonExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[Wd.EXTENSION_NAME];if(a==null)return;const l=a.specVersion;if(!Lue.has(l)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${Wd.EXTENSION_NAME} specVersion "${l}"`);return}return a}_extendMaterialParams(e,t){var r;return zc(this,void 0,void 0,function*(){delete t.metalness,delete t.roughness;const i=new Vue(this.parser,t);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(r=e.shadingShiftTexture)===null||r===void 0?void 0:r.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,t){const r=this._getMToonExtension(t);if(r){const i=this._parseRenderOrder(r);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_generateOutline(e){const t=e.material;if(!(t instanceof cB)||t.outlineWidthMode==="none"||t.outlineWidthFactor<=0)return;e.material=[t];const r=t.clone();r.name+=" (Outline)",r.isOutline=!0,r.side=di,e.material.push(r);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const t=e.material,r=new Set;Array.isArray(t)?t.forEach(i=>r.add(i)):r.add(t);for(const i of r)i instanceof cB&&this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var t;return(e.transparentWithZWrite?0:19)+((t=e.renderQueueOffsetNumber)!==null&&t!==void 0?t:0)}}Wd.EXTENSION_NAME="VRMC_materials_mtoon";/*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v1.0.9
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function Pue(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}class Vm{constructor(e){this.parser=e}get name(){return Vm.EXTENSION_NAME}extendMaterialParams(e,t){return Pue(this,void 0,void 0,function*(){const r=this._getHDREmissiveMultiplierExtension(e);if(r==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=r.emissiveMultiplier;t.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var t,r;const o=(t=this.parser.json.materials)===null||t===void 0?void 0:t[e];if(o==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const a=(r=o.extensions)===null||r===void 0?void 0:r[Vm.EXTENSION_NAME];if(a!=null)return a}}Vm.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";/*!
 * @pixiv/three-vrm-materials-v0compat v1.0.9
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */function Wue(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function gf(n){return Math.pow(n,2.2)}class Oue{constructor(e){var t;this.parser=e,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const r=this.parser.json;r.extensionsUsed=(t=r.extensionsUsed)!==null&&t!==void 0?t:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}get name(){return"VRMMaterialsV0CompatPlugin"}beforeRoot(){var e;return Wue(this,void 0,void 0,function*(){const t=this.parser.json,r=(e=t.extensions)===null||e===void 0?void 0:e.VRM,i=r==null?void 0:r.materialProperties;i&&(this._populateRenderQueueMap(i),i.forEach((s,o)=>{var a,l;const A=(a=t.materials)===null||a===void 0?void 0:a[o];if(A==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${o}] of glTF but the material doesn't exist`);return}if(s.shader==="VRM/MToon"){const c=this._parseV0MToonProperties(s,A);t.materials[o]=c}else if(!((l=s.shader)===null||l===void 0)&&l.startsWith("VRM/Unlit")){const c=this._parseV0UnlitProperties(s,A);t.materials[o]=c}else s.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${s.shader}`)}))})}_parseV0MToonProperties(e,t){var r,i,s,o,a,l,A,c,u,f,d,h,p,m,g,v,y,w,C,b,F,x,S,R,Z,Y,Q,B,E,M,D,T,V,G,P,U,H,oe,k,K,ne,ie,ue,j;const se=(i=(r=e.keywordMap)===null||r===void 0?void 0:r._ALPHABLEND_ON)!==null&&i!==void 0?i:!1,Be=((s=e.floatProperties)===null||s===void 0?void 0:s._ZWrite)===1&&se,ge=this._v0ParseRenderQueue(e),Fe=(a=(o=e.keywordMap)===null||o===void 0?void 0:o._ALPHATEST_ON)!==null&&a!==void 0?a:!1,nt=se?"BLEND":Fe?"MASK":"OPAQUE",We=Fe?(l=e.floatProperties)===null||l===void 0?void 0:l._Cutoff:void 0,Qe=((c=(A=e.floatProperties)===null||A===void 0?void 0:A._CullMode)!==null&&c!==void 0?c:2)===0,Ge=this._portTextureTransform(e),qe=(f=(u=e.vectorProperties)===null||u===void 0?void 0:u._Color)===null||f===void 0?void 0:f.map((pe,De)=>De===3?pe:gf(pe)),O=(d=e.textureProperties)===null||d===void 0?void 0:d._MainTex,J=O!=null?{index:O,extensions:Object.assign({},Ge)}:void 0,ae=(h=e.floatProperties)===null||h===void 0?void 0:h._BumpScale,de=(p=e.textureProperties)===null||p===void 0?void 0:p._BumpMap,ve=de!=null?{index:de,scale:ae,extensions:Object.assign({},Ge)}:void 0,L=(g=(m=e.vectorProperties)===null||m===void 0?void 0:m._EmissionColor)===null||g===void 0?void 0:g.map(gf),_=(v=e.textureProperties)===null||v===void 0?void 0:v._EmissionMap,I=_!=null?{index:_,extensions:Object.assign({},Ge)}:void 0,N=(w=(y=e.vectorProperties)===null||y===void 0?void 0:y._ShadeColor)===null||w===void 0?void 0:w.map(gf),$=(C=e.textureProperties)===null||C===void 0?void 0:C._ShadeTexture,ee=$!=null?{index:$,extensions:Object.assign({},Ge)}:void 0;let te=(F=(b=e.floatProperties)===null||b===void 0?void 0:b._ShadeShift)!==null&&F!==void 0?F:0,we=(S=(x=e.floatProperties)===null||x===void 0?void 0:x._ShadeToony)!==null&&S!==void 0?S:.9;we=Lt.lerp(we,1,.5+.5*te),te=-te-(1-we);const Ce=(R=e.floatProperties)===null||R===void 0?void 0:R._IndirectLightIntensity,Ee=Ce?1-Ce:void 0,Ve=(Z=e.textureProperties)===null||Z===void 0?void 0:Z._SphereAdd,_e=Ve!=null?[1,1,1]:void 0,re=Ve!=null?{index:Ve}:void 0,ye=(Y=e.floatProperties)===null||Y===void 0?void 0:Y._RimLightingMix,be=(Q=e.textureProperties)===null||Q===void 0?void 0:Q._RimTexture,Ue=be!=null?{index:be,extensions:Object.assign({},Ge)}:void 0,Je=(E=(B=e.vectorProperties)===null||B===void 0?void 0:B._RimColor)===null||E===void 0?void 0:E.map(gf),$e=(M=e.floatProperties)===null||M===void 0?void 0:M._RimFresnelPower,ct=(D=e.floatProperties)===null||D===void 0?void 0:D._RimLift,ln=["none","worldCoordinates","screenCoordinates"][(V=(T=e.floatProperties)===null||T===void 0?void 0:T._OutlineWidthMode)!==null&&V!==void 0?V:0];let xt=(P=(G=e.floatProperties)===null||G===void 0?void 0:G._OutlineWidth)!==null&&P!==void 0?P:0;xt=.01*xt;const it=(U=e.textureProperties)===null||U===void 0?void 0:U._OutlineWidthTexture,ir=it!=null?{index:it,extensions:Object.assign({},Ge)}:void 0,mt=(oe=(H=e.vectorProperties)===null||H===void 0?void 0:H._OutlineColor)===null||oe===void 0?void 0:oe.map(gf),co=((k=e.floatProperties)===null||k===void 0?void 0:k._OutlineColorMode)===1?(K=e.floatProperties)===null||K===void 0?void 0:K._OutlineLightingMix:0,zt=(ne=e.textureProperties)===null||ne===void 0?void 0:ne._UvAnimMaskTexture,en=zt!=null?{index:zt,extensions:Object.assign({},Ge)}:void 0,q=(ie=e.floatProperties)===null||ie===void 0?void 0:ie._UvAnimScrollX;let le=(ue=e.floatProperties)===null||ue===void 0?void 0:ue._UvAnimScrollY;le!=null&&(le=-le);const he=(j=e.floatProperties)===null||j===void 0?void 0:j._UvAnimRotation,fe={specVersion:"1.0",transparentWithZWrite:Be,renderQueueOffsetNumber:ge,shadeColorFactor:N,shadeMultiplyTexture:ee,shadingShiftFactor:te,shadingToonyFactor:we,giEqualizationFactor:Ee,matcapFactor:_e,matcapTexture:re,rimLightingMixFactor:ye,rimMultiplyTexture:Ue,parametricRimColorFactor:Je,parametricRimFresnelPowerFactor:$e,parametricRimLiftFactor:ct,outlineWidthMode:ln,outlineWidthFactor:xt,outlineWidthMultiplyTexture:ir,outlineColorFactor:mt,outlineLightingMixFactor:co,uvAnimationMaskTexture:en,uvAnimationScrollXSpeedFactor:q,uvAnimationScrollYSpeedFactor:le,uvAnimationRotationSpeedFactor:he};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:qe,baseColorTexture:J},normalTexture:ve,emissiveTexture:I,emissiveFactor:L,alphaMode:nt,alphaCutoff:We,doubleSided:Qe,extensions:{VRMC_materials_mtoon:fe}})}_parseV0UnlitProperties(e,t){var r,i,s,o;const a=e.shader==="VRM/UnlitTransparentZWrite",l=e.shader==="VRM/UnlitTransparent"||a,A=this._v0ParseRenderQueue(e),c=e.shader==="VRM/UnlitCutout",u=l?"BLEND":c?"MASK":"OPAQUE",f=c?(r=e.floatProperties)===null||r===void 0?void 0:r._Cutoff:void 0,d=this._portTextureTransform(e),h=(s=(i=e.vectorProperties)===null||i===void 0?void 0:i._Color)===null||s===void 0?void 0:s.map(gf),p=(o=e.textureProperties)===null||o===void 0?void 0:o._MainTex,m=p!=null?{index:p,extensions:Object.assign({},d)}:void 0,g={specVersion:"1.0",transparentWithZWrite:a,renderQueueOffsetNumber:A,shadeColorFactor:h,shadeMultiplyTexture:m};return Object.assign(Object.assign({},t),{pbrMetallicRoughness:{baseColorFactor:h,baseColorTexture:m},alphaMode:u,alphaCutoff:f,extensions:{VRMC_materials_mtoon:g}})}_portTextureTransform(e){var t,r,i,s,o;const a=(t=e.vectorProperties)===null||t===void 0?void 0:t._MainTex;if(a==null)return{};const l=[(r=a==null?void 0:a[0])!==null&&r!==void 0?r:0,(i=a==null?void 0:a[1])!==null&&i!==void 0?i:0],A=[(s=a==null?void 0:a[2])!==null&&s!==void 0?s:1,(o=a==null?void 0:a[3])!==null&&o!==void 0?o:1];return l[1]=A[1]*(1-l[1])%1,{KHR_texture_transform:{offset:l,scale:A}}}_v0ParseRenderQueue(e){var t,r,i;const s=(r=(t=e.keywordMap)===null||t===void 0?void 0:t._ALPHABLEND_ON)!==null&&r!==void 0?r:!1,o=((i=e.floatProperties)===null||i===void 0?void 0:i._ZWrite)===1;let a=0;if(s){const l=e.renderQueue;l!=null&&(o?a=this._renderQueueMapTransparentZWrite.get(l):a=this._renderQueueMapTransparent.get(l))}return a}_populateRenderQueueMap(e){const t=new Set,r=new Set;e.forEach(i=>{var s,o,a;const l=(o=(s=i.keywordMap)===null||s===void 0?void 0:s._ALPHABLEND_ON)!==null&&o!==void 0?o:!1,A=((a=i.floatProperties)===null||a===void 0?void 0:a._ZWrite)===1;if(l){const c=i.renderQueue;c!=null&&(A?r.add(c):t.add(c))}}),t.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${t.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),r.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${r.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(t).sort().forEach((i,s)=>{const o=Math.min(Math.max(s-t.size+1,-9),0);this._renderQueueMapTransparent.set(i,o)}),Array.from(r).sort().forEach((i,s)=>{const o=Math.min(Math.max(s,0),9);this._renderQueueMapTransparentZWrite.set(i,o)})}}/*!
 * @pixiv/three-vrm-node-constraint v1.0.9
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */const iA=new X;class qI extends Qr{constructor(e){super(),this._attrPosition=new At(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(B$);const t=new $t;t.setAttribute("position",this._attrPosition);const r=new Pl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Dh(t,r),this.add(this._line),this.constraint=e}updateMatrixWorld(e){iA.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,iA.x,iA.y,iA.z),this.constraint.source&&iA.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,iA.x,iA.y,iA.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(e)}}function GD(n,e){return e.set(n.elements[12],n.elements[13],n.elements[14])}const Gue=new X,Zue=new X;function Jue(n,e){return n.decompose(Gue,e,Zue),e}function Dw(n){return n.invert?n.invert():n.inverse(),n}class Z_{constructor(e,t){this.destination=e,this.source=t,this.weight=1}}const Hue=new X,zue=new X,Yue=new X,Xue=new et,Kue=new et,jue=new et;class $ue extends Z_{constructor(e,t){super(e,t),this._aimAxis="PositiveX",this._v3AimAxis=new X(1,0,0),this._dstRestQuat=new et}get aimAxis(){return this._aimAxis}set aimAxis(e){this._aimAxis=e,this._v3AimAxis.set(e==="PositiveX"?1:e==="NegativeX"?-1:0,e==="PositiveY"?1:e==="NegativeY"?-1:0,e==="PositiveZ"?1:e==="NegativeZ"?-1:0)}get dependencies(){const e=new Set([this.source]);return this.destination.parent&&e.add(this.destination.parent),e}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const e=Xue.identity(),t=Kue.identity();this.destination.parent&&(Jue(this.destination.parent.matrixWorld,e),Dw(t.copy(e)));const r=Hue.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(e),i=GD(this.source.matrixWorld,zue).sub(GD(this.destination.matrixWorld,Yue)).normalize(),s=jue.setFromUnitVectors(r,i).premultiply(t).multiply(e).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(s,this.weight)}}function ZD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function que(n,e){const t=[n];let r=n.parent;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}class efe{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(e){this._constraints.add(e);let t=this._objectConstraintsMap.get(e.destination);t==null&&(t=new Set,this._objectConstraintsMap.set(e.destination,t)),t.add(e)}deleteConstraint(e){this._constraints.delete(e),this._objectConstraintsMap.get(e.destination).delete(e)}setInitState(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.setInitState())}update(){const e=new Set,t=new Set;for(const r of this._constraints)this._processConstraint(r,e,t,i=>i.update())}_processConstraint(e,t,r,i){if(r.has(e))return;if(t.has(e))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");t.add(e);const s=e.dependencies;for(const o of s)que(o,a=>{const l=this._objectConstraintsMap.get(a);if(l)for(const A of l)this._processConstraint(A,t,r,i)});i(e),r.add(e)}}const tfe=new et,nfe=new et;class rfe extends Z_{constructor(e,t){super(e,t),this._dstRestQuat=new et,this._invSrcRestQuat=new et}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),Dw(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const e=tfe.copy(this._invSrcRestQuat).multiply(this.source.quaternion),t=nfe.copy(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(t,this.weight)}}const ife=new X,sfe=new et,ofe=new et;class afe extends Z_{constructor(e,t){super(e,t),this._rollAxis="X",this._v3RollAxis=new X(1,0,0),this._dstRestQuat=new et,this._invDstRestQuat=new et,this._invSrcRestQuatMulDstRestQuat=new et}get rollAxis(){return this._rollAxis}set rollAxis(e){this._rollAxis=e,this._v3RollAxis.set(e==="X"?1:0,e==="Y"?1:0,e==="Z"?1:0)}get dependencies(){return new Set([this.source])}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),Dw(this._invDstRestQuat.copy(this._dstRestQuat)),Dw(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const e=sfe.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),t=ife.copy(this._v3RollAxis).applyQuaternion(e),i=ofe.setFromUnitVectors(t,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(e);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}}const lfe=new Set(["1.0","1.0-beta"]);class Yc{constructor(e,t){this.parser=e,this.helperRoot=t==null?void 0:t.helperRoot}get name(){return Yc.EXTENSION_NAME}afterRoot(e){return ZD(this,void 0,void 0,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){var t;return ZD(this,void 0,void 0,function*(){const r=this.parser.json;if(!(((t=r.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Yc.EXTENSION_NAME))!==-1))return null;const s=new efe,o=yield this.parser.getDependencies("node");return o.forEach((a,l)=>{var A;const c=r.nodes[l],u=(A=c==null?void 0:c.extensions)===null||A===void 0?void 0:A[Yc.EXTENSION_NAME];if(u==null)return;const f=u.specVersion;if(!lfe.has(f)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${Yc.EXTENSION_NAME} specVersion "${f}"`);return}const d=u.constraint;if(d.roll!=null){const h=this._importRollConstraint(a,o,d.roll);s.addConstraint(h)}else if(d.aim!=null){const h=this._importAimConstraint(a,o,d.aim);s.addConstraint(h)}else if(d.rotation!=null){const h=this._importRotationConstraint(a,o,d.rotation);s.addConstraint(h)}}),e.scene.updateMatrixWorld(),s.setInitState(),s})}_importRollConstraint(e,t,r){const{source:i,rollAxis:s,weight:o}=r,a=t[i],l=new afe(e,a);if(s!=null&&(l.rollAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new qI(l);this.helperRoot.add(A)}return l}_importAimConstraint(e,t,r){const{source:i,aimAxis:s,weight:o}=r,a=t[i],l=new $ue(e,a);if(s!=null&&(l.aimAxis=s),o!=null&&(l.weight=o),this.helperRoot){const A=new qI(l);this.helperRoot.add(A)}return l}_importRotationConstraint(e,t,r){const{source:i,weight:s}=r,o=t[i],a=new rfe(e,o);if(s!=null&&(a.weight=s),this.helperRoot){const l=new qI(a);this.helperRoot.add(l)}return a}}Yc.EXTENSION_NAME="VRMC_node_constraint";/*!
 * @pixiv/three-vrm-springbone v1.0.9
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2020-2023 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */class lH{}const e1=new X,Fc=new X;class AH extends lH{constructor(e){var t,r,i;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new X(0,0,0),this.tail=(r=e==null?void 0:e.tail)!==null&&r!==void 0?r:new X(0,0,0),this.radius=(i=e==null?void 0:e.radius)!==null&&i!==void 0?i:0}get type(){return"capsule"}calculateCollision(e,t,r,i){e1.copy(this.offset).applyMatrix4(e),Fc.copy(this.tail).applyMatrix4(e),Fc.sub(e1);const s=Fc.lengthSq();i.copy(t).sub(e1);const o=Fc.dot(i);o<=0||(s<=o||Fc.multiplyScalar(o/s),i.sub(Fc));const a=r+this.radius,l=i.length()-a;return i.normalize(),l}}class cH extends lH{constructor(e){var t,r;super(),this.offset=(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:new X(0,0,0),this.radius=(r=e==null?void 0:e.radius)!==null&&r!==void 0?r:0}get type(){return"sphere"}calculateCollision(e,t,r,i){i.copy(this.offset).applyMatrix4(e),i.negate().add(t);const s=r+this.radius,o=i.length()-s;return i.normalize(),o}}const zo=new X;class Afe extends $t{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new X,this._currentTail=new X,this._shape=e,this._attrPos=new At(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new At(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0);const r=zo.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(r)>1e-10&&(this._currentTail.copy(r),e=!0),e&&this._buildPosition()}_buildPosition(){zo.copy(this._currentTail).sub(this._currentOffset);const e=zo.length()/this._currentRadius;for(let i=0;i<=16;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(i,-Math.sin(s),-Math.cos(s),0),this._attrPos.setXYZ(17+i,e+Math.sin(s),Math.cos(s),0),this._attrPos.setXYZ(34+i,-Math.sin(s),0,-Math.cos(s)),this._attrPos.setXYZ(51+i,e+Math.sin(s),0,Math.cos(s))}for(let i=0;i<32;i++){const s=i/16*Math.PI;this._attrPos.setXYZ(68+i,0,Math.sin(s),Math.cos(s)),this._attrPos.setXYZ(100+i,e,Math.sin(s),Math.cos(s))}const t=Math.atan2(zo.y,Math.sqrt(zo.x*zo.x+zo.z*zo.z)),r=-Math.atan2(zo.z,zo.x);this.rotateZ(t),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<34;e++){const t=(e+1)%34;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(68+e*2,34+e,34+t)}for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(136+e*2,68+e,68+t),this._attrIndex.setXY(200+e*2,100+e,100+t)}this._attrIndex.needsUpdate=!0}}class cfe extends $t{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new X,this._shape=e,this._attrPos=new At(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new At(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._shape.radius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.needsUpdate=!0}}const ufe=new X;class JD extends Qr{constructor(e){if(super(),this.matrixAutoUpdate=!1,this.collider=e,this.collider.shape instanceof cH)this._geometry=new cfe(this.collider.shape);else if(this.collider.shape instanceof AH)this._geometry=new Afe(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const t=new Pl({color:16711935,depthTest:!1,depthWrite:!1});this._line=new A0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=ufe.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class ffe extends $t{constructor(e){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new X,this._springBone=e,this._attrPos=new At(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new At(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let e=!1;const t=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==t&&(this._currentRadius=t,e=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),e=!0),e&&this._buildPosition()}_buildPosition(){for(let e=0;e<32;e++){const t=e/16*Math.PI;this._attrPos.setXYZ(e,Math.cos(t),Math.sin(t),0),this._attrPos.setXYZ(32+e,0,Math.cos(t),Math.sin(t)),this._attrPos.setXYZ(64+e,Math.sin(t),0,Math.cos(t))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let e=0;e<32;e++){const t=(e+1)%32;this._attrIndex.setXY(e*2,e,t),this._attrIndex.setXY(64+e*2,32+e,32+t),this._attrIndex.setXY(128+e*2,64+e,64+t)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}}const dfe=new X;class hfe extends Qr{constructor(e){super(),this.matrixAutoUpdate=!1,this.springBone=e,this._geometry=new ffe(this.springBone);const t=new Pl({color:16776960,depthTest:!1,depthWrite:!1});this._line=new A0(this._geometry,t),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(e){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const t=this.matrix.elements;this._geometry.worldScale=dfe.set(t[0],t[1],t[2]).length(),this._geometry.update(),super.updateMatrixWorld(e)}}class HD extends Nt{constructor(e){super(),this.shape=e}}const pfe=new Le;function uH(n){return n.invert?n.invert():n.getInverse(pfe.copy(n)),n}class gfe{constructor(e){this._inverseCache=new Le,this._shouldUpdateInverse=!0,this.matrix=e;const t={set:(r,i,s)=>(this._shouldUpdateInverse=!0,r[i]=s,!0)};this._originalElements=e.elements,e.elements=new Proxy(e.elements,t)}get inverse(){return this._shouldUpdateInverse&&(this._inverseCache.copy(this.matrix),uH(this._inverseCache),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}}const mfe=new Le,Ka=new X,Dp=new X,vfe=new X,mf=new X,zD=new X,kp=new X,YD=new et,vf=new Le,yfe=new Le;class Bfe{constructor(e,t,r={},i=[]){var s,o,a,l,A,c;this._currentTail=new X,this._prevTail=new X,this._boneAxis=new X,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new Le,this._initialLocalRotation=new et,this._initialLocalChildPosition=new X,this.bone=e,this.bone.matrixAutoUpdate=!1,this.child=t,this.settings={hitRadius:(s=r.hitRadius)!==null&&s!==void 0?s:0,stiffness:(o=r.stiffness)!==null&&o!==void 0?o:1,gravityPower:(a=r.gravityPower)!==null&&a!==void 0?a:0,gravityDir:(A=(l=r.gravityDir)===null||l===void 0?void 0:l.clone())!==null&&A!==void 0?A:new X(0,-1,0),dragForce:(c=r.dragForce)!==null&&c!==void 0?c:.4},this.colliderGroups=i}get center(){return this._center}set center(e){var t;!((t=this._center)===null||t===void 0)&&t.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=e,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new gfe(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:mfe}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const e=this._getMatrixWorldToCenter(vf);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const e=this._getMatrixWorldToCenter(vf);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(e),this._prevTail.copy(this._currentTail)}update(e){if(e<=0)return;this._calcWorldSpaceBoneLength(),mf.setFromMatrixPosition(this.bone.matrixWorld);let t=this._getMatrixWorldToCenter(vf);zD.copy(mf).applyMatrix4(t);const r=YD.setFromRotationMatrix(t),i=yfe.copy(t).multiply(this._parentMatrixWorld),s=Dp.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(i).sub(zD).normalize(),o=vfe.copy(this.settings.gravityDir).applyQuaternion(r).normalize(),a=this._getMatrixCenterToWorld(vf);kp.copy(this._currentTail).add(Ka.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(Ka.copy(s).multiplyScalar(this.settings.stiffness*e)).add(Ka.copy(o).multiplyScalar(this.settings.gravityPower*e)).applyMatrix4(a),kp.sub(mf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(mf),this._collision(kp),t=this._getMatrixWorldToCenter(vf),this._prevTail.copy(this._currentTail),this._currentTail.copy(Ka.copy(kp).applyMatrix4(t));const l=uH(vf.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),A=YD.setFromUnitVectors(this._boneAxis,Ka.copy(kp).applyMatrix4(l).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(A),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(e){this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{const i=r.shape.calculateCollision(r.matrixWorld,e,this.settings.hitRadius,Ka);i<0&&(e.add(Ka.multiplyScalar(-i)),e.sub(mf).normalize().multiplyScalar(this._worldSpaceBoneLength).add(mf))})})}_calcWorldSpaceBoneLength(){Ka.setFromMatrixPosition(this.bone.matrixWorld),this.child?Dp.setFromMatrixPosition(this.child.matrixWorld):(Dp.copy(this._initialLocalChildPosition),Dp.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=Ka.sub(Dp).length()}_getMatrixCenterToWorld(e){return this._center?e.copy(this._center.matrixWorld):e.identity(),e}_getMatrixWorldToCenter(e){return this._center?e.copy(this._center.userData.inverseCacheProxy.inverse):e.identity(),e}}function ty(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})}function wfe(n,e){const t=[];let r=n;for(;r!==null;)t.unshift(r),r=r.parent;t.forEach(i=>{e(i)})}function fH(n,e){n.children.forEach(t=>{e(t)||fH(t,e)})}class XD{constructor(){this._joints=new Set,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const e=new Set;return this._joints.forEach(t=>{t.colliderGroups.forEach(r=>{e.add(r)})}),Array.from(e)}get colliders(){const e=new Set;return this.colliderGroups.forEach(t=>{t.colliders.forEach(r=>{e.add(r)})}),Array.from(e)}addJoint(e){this._joints.add(e);let t=this._objectSpringBonesMap.get(e.bone);t==null&&(t=new Set,this._objectSpringBonesMap.set(e.bone,t)),t.add(e)}addSpringBone(e){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(e)}deleteJoint(e){this._joints.delete(e),this._objectSpringBonesMap.get(e.bone).delete(e)}deleteSpringBone(e){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(e)}setInitState(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.setInitState())}reset(){const e=new Set,t=new Set,r=new Set;for(const i of this._joints)this._processSpringBone(i,e,t,r,s=>s.reset())}update(e){const t=new Set,r=new Set,i=new Set;for(const s of this._joints)this._processSpringBone(s,t,r,i,o=>o.update(e)),fH(s.bone,o=>{var a,l;return((l=(a=this._objectSpringBonesMap.get(o))===null||a===void 0?void 0:a.size)!==null&&l!==void 0?l:0)>0?!0:(o.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(e,t,r,i,s){if(r.has(e))return;if(t.has(e))throw new Error("VRMSpringBoneManager: Circular dependency detected while updating springbones");t.add(e);const o=this._getDependencies(e);for(const a of o)wfe(a,l=>{const A=this._objectSpringBonesMap.get(l);if(A)for(const c of A)this._processSpringBone(c,t,r,i,s);else i.has(l)||(l.updateWorldMatrix(!1,!1),i.add(l))});e.bone.updateMatrix(),e.bone.updateWorldMatrix(!1,!1),s(e),i.add(e.bone),r.add(e)}_getDependencies(e){const t=new Set,r=e.bone.parent;return r&&t.add(r),e.colliderGroups.forEach(i=>{i.colliders.forEach(s=>{t.add(s)})}),t}}const Cfe=new Set(["1.0","1.0-beta"]);class Xc{constructor(e,t){this.parser=e,this.jointHelperRoot=t==null?void 0:t.jointHelperRoot,this.colliderHelperRoot=t==null?void 0:t.colliderHelperRoot}get name(){return Xc.EXTENSION_NAME}afterRoot(e){return ty(this,void 0,void 0,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return ty(this,void 0,void 0,function*(){const t=yield this._v1Import(e);if(t!=null)return t;const r=yield this._v0Import(e);return r??null})}_v1Import(e){var t,r,i,s,o;return ty(this,void 0,void 0,function*(){const a=e.parser.json;if(!(((t=a.extensionsUsed)===null||t===void 0?void 0:t.indexOf(Xc.EXTENSION_NAME))!==-1))return null;const A=new XD,c=yield e.parser.getDependencies("node"),u=(r=a.extensions)===null||r===void 0?void 0:r[Xc.EXTENSION_NAME];if(!u)return null;const f=u.specVersion;if(!Cfe.has(f))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${Xc.EXTENSION_NAME} specVersion "${f}"`),null;const d=(i=u.colliders)===null||i===void 0?void 0:i.map((p,m)=>{var g,v,y,w,C;const b=c[p.node],F=p.shape;if(F.sphere)return this._importSphereCollider(b,{offset:new X().fromArray((g=F.sphere.offset)!==null&&g!==void 0?g:[0,0,0]),radius:(v=F.sphere.radius)!==null&&v!==void 0?v:0});if(F.capsule)return this._importCapsuleCollider(b,{offset:new X().fromArray((y=F.capsule.offset)!==null&&y!==void 0?y:[0,0,0]),radius:(w=F.capsule.radius)!==null&&w!==void 0?w:0,tail:new X().fromArray((C=F.capsule.tail)!==null&&C!==void 0?C:[0,0,0])});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${m} has no valid shape`)}),h=(s=u.colliderGroups)===null||s===void 0?void 0:s.map((p,m)=>{var g;return{colliders:((g=p.colliders)!==null&&g!==void 0?g:[]).map(y=>{const w=d==null?void 0:d[y];if(w==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${m} attempted to use a collider #${y} but not found`);return w}),name:p.name}});return(o=u.springs)===null||o===void 0||o.forEach((p,m)=>{var g;const v=p.joints,y=(g=p.colliderGroups)===null||g===void 0?void 0:g.map(b=>{const F=h==null?void 0:h[b];if(F==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${m} attempted to use a colliderGroup ${b} but not found`);return F}),w=p.center!=null?c[p.center]:void 0;let C;v.forEach(b=>{if(C){const F=C.node,x=c[F],S=b.node,R=c[S],Z={hitRadius:C.hitRadius,dragForce:C.dragForce,gravityPower:C.gravityPower,stiffness:C.stiffness,gravityDir:C.gravityDir!=null?new X().fromArray(C.gravityDir):void 0},Y=this._importJoint(x,R,Z,y);w&&(Y.center=w),A.addJoint(Y)}C=b})}),A.setInitState(),A})}_v0Import(e){var t,r,i;return ty(this,void 0,void 0,function*(){const s=e.parser.json;if(!(((t=s.extensionsUsed)===null||t===void 0?void 0:t.indexOf("VRM"))!==-1))return null;const a=(r=s.extensions)===null||r===void 0?void 0:r.VRM,l=a==null?void 0:a.secondaryAnimation;if(!l)return null;const A=l==null?void 0:l.boneGroups;if(!A)return null;const c=new XD,u=yield e.parser.getDependencies("node"),f=(i=l.colliderGroups)===null||i===void 0?void 0:i.map(d=>{var h;const p=u[d.node];return{colliders:((h=d.colliders)!==null&&h!==void 0?h:[]).map((g,v)=>{var y,w,C;const b=new X(0,0,0);return g.offset&&b.set((y=g.offset.x)!==null&&y!==void 0?y:0,(w=g.offset.y)!==null&&w!==void 0?w:0,g.offset.z?-g.offset.z:0),this._importSphereCollider(p,{offset:b,radius:(C=g.radius)!==null&&C!==void 0?C:0})})}});return A==null||A.forEach((d,h)=>{const p=d.bones;p&&p.forEach(m=>{var g,v,y,w;const C=u[m],b=new X;d.gravityDir?b.set((g=d.gravityDir.x)!==null&&g!==void 0?g:0,(v=d.gravityDir.y)!==null&&v!==void 0?v:0,(y=d.gravityDir.z)!==null&&y!==void 0?y:0):b.set(0,-1,0);const F=d.center!=null?u[d.center]:void 0,x={hitRadius:d.hitRadius,dragForce:d.dragForce,gravityPower:d.gravityPower,stiffness:d.stiffiness,gravityDir:b},S=(w=d.colliderGroups)===null||w===void 0?void 0:w.map(R=>{const Z=f==null?void 0:f[R];if(Z==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${h} attempted to use a colliderGroup ${R} but not found`);return Z});C.traverse(R=>{var Z;const Y=(Z=R.children[0])!==null&&Z!==void 0?Z:null,Q=this._importJoint(R,Y,x,S);F&&(Q.center=F),c.addJoint(Q)})})}),e.scene.updateMatrixWorld(),c.setInitState(),c})}_importJoint(e,t,r,i){const s=new Bfe(e,t,r,i);if(this.jointHelperRoot){const o=new hfe(s);this.jointHelperRoot.add(o),o.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,t){const{offset:r,radius:i}=t,s=new cH({offset:r,radius:i}),o=new HD(s);if(e.add(o),this.colliderHelperRoot){const a=new JD(o);this.colliderHelperRoot.add(a),a.renderOrder=this.colliderHelperRoot.renderOrder}return o}_importCapsuleCollider(e,t){const{offset:r,radius:i,tail:s}=t,o=new AH({offset:r,radius:i,tail:s}),a=new HD(o);if(e.add(a),this.colliderHelperRoot){const l=new JD(a);this.colliderHelperRoot.add(l),l.renderOrder=this.colliderHelperRoot.renderOrder}return a}}Xc.EXTENSION_NAME="VRMC_springBone";class bfe{constructor(e,t){var r,i,s,o,a,l,A,c,u,f;this.parser=e;const d=t==null?void 0:t.helperRoot,h=t==null?void 0:t.autoUpdateHumanBones;this.expressionPlugin=(r=t==null?void 0:t.expressionPlugin)!==null&&r!==void 0?r:new lb(e),this.firstPersonPlugin=(i=t==null?void 0:t.firstPersonPlugin)!==null&&i!==void 0?i:new nue(e),this.humanoidPlugin=(s=t==null?void 0:t.humanoidPlugin)!==null&&s!==void 0?s:new Aue(e,{helperRoot:d,autoUpdateHumanBones:h}),this.lookAtPlugin=(o=t==null?void 0:t.lookAtPlugin)!==null&&o!==void 0?o:new bue(e,{helperRoot:d}),this.metaPlugin=(a=t==null?void 0:t.metaPlugin)!==null&&a!==void 0?a:new Fue(e),this.mtoonMaterialPlugin=(l=t==null?void 0:t.mtoonMaterialPlugin)!==null&&l!==void 0?l:new Wd(e),this.materialsHDREmissiveMultiplierPlugin=(A=t==null?void 0:t.materialsHDREmissiveMultiplierPlugin)!==null&&A!==void 0?A:new Vm(e),this.materialsV0CompatPlugin=(c=t==null?void 0:t.materialsV0CompatPlugin)!==null&&c!==void 0?c:new Oue(e),this.springBonePlugin=(u=t==null?void 0:t.springBonePlugin)!==null&&u!==void 0?u:new Xc(e,{colliderHelperRoot:d,jointHelperRoot:d}),this.nodeConstraintPlugin=(f=t==null?void 0:t.nodeConstraintPlugin)!==null&&f!==void 0?f:new Yc(e,{helperRoot:d})}get name(){return"VRMLoaderPlugin"}beforeRoot(){return ey(this,void 0,void 0,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(e){return ey(this,void 0,void 0,function*(){return yield this.mtoonMaterialPlugin.loadMesh(e)})}getMaterialType(e){const t=this.mtoonMaterialPlugin.getMaterialType(e);return t??null}extendMaterialParams(e,t){return ey(this,void 0,void 0,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(e,t),yield this.mtoonMaterialPlugin.extendMaterialParams(e,t)})}afterRoot(e){return ey(this,void 0,void 0,function*(){yield this.metaPlugin.afterRoot(e),yield this.humanoidPlugin.afterRoot(e),yield this.expressionPlugin.afterRoot(e),yield this.lookAtPlugin.afterRoot(e),yield this.firstPersonPlugin.afterRoot(e),yield this.springBonePlugin.afterRoot(e),yield this.nodeConstraintPlugin.afterRoot(e),yield this.mtoonMaterialPlugin.afterRoot(e);const t=e.userData.vrmMeta,r=e.userData.vrmHumanoid;if(t&&r){const i=new Uue({scene:e.scene,expressionManager:e.userData.vrmExpressionManager,firstPerson:e.userData.vrmFirstPerson,humanoid:r,lookAt:e.userData.vrmLookAt,meta:t,materials:e.userData.vrmMToonMaterials,springBoneManager:e.userData.vrmSpringBoneManager,nodeConstraintManager:e.userData.vrmNodeConstraintManager});e.userData.vrm=i}})}}function KD(n){if(Object.values(n).forEach(e=>{e!=null&&e.isTexture&&e.dispose()}),n.isShaderMaterial){const e=n.uniforms;e&&Object.values(e).forEach(t=>{const r=t.value;r!=null&&r.isTexture&&r.dispose()})}n.dispose()}function xfe(n){const e=n.geometry;e&&e.dispose();const t=n.skeleton;t&&t.dispose();const r=n.material;r&&(Array.isArray(r)?r.forEach(i=>KD(i)):r&&KD(r))}function Ife(n){n.traverse(xfe)}function Ffe(n){const e=new Map;n.traverse(t=>{if(t.type!=="SkinnedMesh")return;const r=t,s=r.geometry.getAttribute("skinIndex");let o=e.get(s);if(!o){const a=[],l=[],A={},c=s.array;for(let u=0;u<c.length;u++){const f=c[u];A[f]===void 0&&(A[f]=a.length,a.push(r.skeleton.bones[f]),l.push(r.skeleton.boneInverses[f])),c[u]=A[f]}s.copyArray(c),s.needsUpdate=!0,o=new dc(a,l),e.set(s,o)}r.bind(o,new Le)})}function Efe(n){const e=new Map;n.traverse(t=>{var r,i,s,o;if(!t.isMesh)return;const a=t,l=a.geometry,A=l.index;if(A==null)return;const c=e.get(l);if(c!=null){a.geometry=c;return}const u=new $t;u.name=l.name,u.morphTargetsRelative=l.morphTargetsRelative,l.groups.forEach(p=>{u.addGroup(p.start,p.count,p.materialIndex)}),u.boundingBox=(i=(r=l.boundingBox)===null||r===void 0?void 0:r.clone())!==null&&i!==void 0?i:null,u.boundingSphere=(o=(s=l.boundingSphere)===null||s===void 0?void 0:s.clone())!==null&&o!==void 0?o:null,u.setDrawRange(l.drawRange.start,l.drawRange.count),u.userData=l.userData,e.set(l,u);const f=[],d=[];{const p=A.array,m=new p.constructor(p.length);let g=0;for(let v=0;v<p.length;v++){const y=p[v];let w=f[y];w==null&&(f[y]=g,d[g]=y,w=g,g++),m[v]=w}u.setIndex(new At(m,1,!1))}Object.keys(l.attributes).forEach(p=>{const m=l.attributes[p];if(m.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const g=m.array,{itemSize:v,normalized:y}=m,w=new g.constructor(d.length*v);d.forEach((C,b)=>{for(let F=0;F<v;F++)w[b*v+F]=g[C*v+F]}),u.setAttribute(p,new At(w,v,y))});let h=!0;Object.keys(l.morphAttributes).forEach(p=>{u.morphAttributes[p]=[];const m=l.morphAttributes[p];for(let g=0;g<m.length;g++){const v=m[g];if(v.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const y=v.array,{itemSize:w,normalized:C}=v,b=new y.constructor(d.length*w);d.forEach((F,x)=>{for(let S=0;S<w;S++)b[x*w+S]=y[F*w+S]}),h=h&&b.every(F=>F===0),u.morphAttributes[p][g]=new At(b,w,C)}}),h&&(u.morphAttributes={}),a.geometry=u}),Array.from(e.keys()).forEach(t=>{t.dispose()})}function Ufe(n){var e;((e=n.meta)===null||e===void 0?void 0:e.metaVersion)==="0"&&(n.scene.rotation.y=Math.PI)}class Yh{constructor(){}}Yh.deepDispose=Ife;Yh.removeUnnecessaryJoints=Ffe;Yh.removeUnnecessaryVertices=Efe;Yh.rotateVRM0=Ufe;var Xn;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(Xn||(Xn={}));const kw="blend_",jD="vrmColliderSphere";class Sfe{parse(e,t,r,i){const s=e.humanoid,o=e.meta,a=e.materials,l={},A={},c={},u=e.lookAt,f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(s)if(o)if(a){if(!u)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=a.filter((j,se,ce)=>ce.findIndex(Be=>Be.name===j.name.replace(" (Outline)",""))===se).map(j=>j),h=d.map(j=>j.name),p=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter(j=>j.map).map(j=>{if(!j.map)throw new Error(j.name+" map is null");return{name:j.name,imageBitmap:j.map.image}}),g=d.filter(j=>j.userData.shadeTexture).map(j=>{if(!j.userData.shadeTexture)throw new Error(j.userData.shadeTexture+" map is null");return{name:j.name+"_shade",imageBitmap:j.userData.shadeTexture.image}}),v=m.concat(g),y=Tfe(v,p),w=Nfe(y),C=Dfe(y),b=Mfe(d,v),F=t.children.filter(j=>j.children.length>0&&j.children[0].type===li.Bone)[0],x=dH(F).filter(j=>j.name!==jD),S=x.map(j=>j.name),R=x.map(j=>({children:j.children.filter(se=>se.name!==jD).map(se=>S.indexOf(se.name)),name:j.name,rotation:[j.quaternion.x,j.quaternion.y,j.quaternion.z,j.quaternion.w],scale:[j.scale.x,j.scale.y,j.scale.z],translation:[j.position.x,j.position.y,j.position.z]})),Z=[],Y=t.children.filter(j=>j.type===li.Group||j.type===li.SkinnedMesh),Q=[];Y.forEach(j=>{const se=j.type===li.Group?j.children[0]:j,ce=se.geometry.attributes;Q.push(new ja(ce.position,Xn.FLOAT,Kt.POSITION,xo.VEC3,se.name,void 0)),Q.push(new ja(ce.normal,Xn.FLOAT,Kt.NORMAL,xo.VEC3,se.name,void 0)),Q.push(new ja(ce.uv,Xn.FLOAT,Kt.UV,xo.VEC2,se.name,void 0)),Q.push(new ja(ce.skinWeight,Xn.FLOAT,Kt.SKIN_WEIGHT,xo.VEC4,se.name,void 0)),Q.push(new ja(ce.skinIndex,Xn.UNSIGNED_SHORT,Kt.SKIN_INDEX,xo.VEC4,se.name,void 0)),(j.type===li.Group?j.children.map(ge=>ge):[j]).forEach(ge=>{if(!ge.geometry.index)throw new Error(ge.name+" geometry.index is null");Q.push(new ja(ge.geometry.index,Xn.UNSIGNED_INT,Kt.INDEX,xo.SCALAR,se.name,ge.name))}),se.morphTargetDictionary||(se.morphTargetDictionary={},se.morphTargetInfluences=[],se.geometry.morphAttributes={},se.updateMorphTargets()),se.geometry.userData.targetNames=[];for(const ge in e.expressionManager.expressionMap){const Fe=e.expressionManager.expressionMap[ge],nt=Fe._binds.map(Te=>({node:x.length,index:Te.index,weight:Te.weight}));let We=!1;for(const Te in ai)if(ge.toLowerCase()===ai[Te].toLowerCase()){l[ai[Te]]={morphTargetBinds:nt,isBinary:Fe.isBinary,overrideBlink:Fe.overrideBlink,overrideLookAt:Fe.overrideLookAt,overrideMouth:Fe.overrideMouth},We=!0;break}!We&&ge.toLowerCase()==="surprise"&&(l.surprised={morphTargetBinds:nt,isBinary:Fe.isBinary,overrideBlink:Fe.overrideBlink,overrideLookAt:Fe.overrideLookAt,overrideMouth:Fe.overrideMouth},We=!0),We===!1&&(A[ge]={morphTargetBinds:nt,isBinary:Fe.isBinary,overrideBlink:Fe.overrideBlink,overrideLookAt:Fe.overrideLookAt,overrideMouth:Fe.overrideMouth})}for(const ge in se.morphTargetDictionary){se.geometry.userData.targetNames.push(ge);const Fe=se.morphTargetDictionary[ge],nt=se.geometry.morphAttributes;Q.push(new ja(nt.position[Fe],Xn.FLOAT,Kt.BLEND_POSITION,xo.VEC3,se.name,kw+ge)),Q.push(new ja(nt.normal[Fe],Xn.FLOAT,Kt.BLEND_NORMAL,xo.VEC3,se.name,kw+ge))}}),Object.keys(l).length>0&&(c.preset=l),Object.keys(A).length>0&&(c.custom=A),Y.forEach(j=>{const se=j.type===li.Group?j.children[0]:j,ce=new Float32Array(se.skeleton.boneInverses.map(Be=>Be.elements).flat());Q.push(new ja(new At(ce,16),Xn.FLOAT,Kt.BIND_MATRIX,xo.MAT4,se.name,se.name))}),Z.push(...Q.map(j=>({bufferView:-1,byteOffset:0,componentType:j.valueType,count:j.attribute.count,max:j.max,min:j.min,normalized:!1,type:j.accessorsType})));const B=Qfe(Y,Q,h);Y.forEach((j,se)=>{R.push({mesh:se,name:j.name,rotation:[j.quaternion.x,j.quaternion.y,j.quaternion.z,j.quaternion.w],scale:[j.scale.x,j.scale.y,j.scale.z],skin:se,translation:[j.position.x,j.position.y,j.position.z]})});const E=Rfe(Y,Q,S),M={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:u.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:u.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:u.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:u.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:u.applier.rangeMapVerticalDown.inputMaxValue,outputScale:u.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:u.applier.rangeMapVerticalUp.inputMaxValue,outputScale:u.applier.rangeMapVerticalUp.outputScale},type:"bone"},D={humanBones:{}};for(const j in s.humanBones)D.humanBones[j]={node:S.indexOf(s.humanBones[j].node.name)};const T=o,V=[];V.push(...v.map(j=>({buffer:$D(j.imageBitmap),type:Kt.IMAGE}))),V.push(...Q.map(j=>({buffer:j.buffer,type:j.type}))),p&&V.push({buffer:$D(p.imageBitmap),type:Kt.IMAGE});let G=0,P=0,U=0;const H=V.map((j,se)=>{const ce={buffer:0,byteLength:j.buffer.byteLength,byteOffset:G,target:j.type===Kt.IMAGE||j.type===Kt.BIND_MATRIX?void 0:j.type===Kt.INDEX?Xn.ELEMENT_ARRAY_BUFFER:Xn.ARRAY_BUFFER};return G+=j.buffer.byteLength,j.type===Kt.IMAGE?y[P++].bufferView=se:Z[U++].bufferView=se,ce}),oe=kfe(t,R),k={accessors:Z,asset:f,buffers:[{byteLength:G}],bufferViews:H,extensions:{VRMC_vrm:{expressions:c,humanoid:D,lookAt:M,meta:T,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:y,materials:b,meshes:B,nodes:R,samplers:w,avatar:0,scenes:oe,skins:E,textures:C},K=new qD(XE(JSON.stringify(k,void 0,2)),"JSON"),ne=new qD(vg(V.map(j=>j.buffer)),"BIN\0"),ie=vg([K.buffer,ne.buffer]),ue=vg([XE("glTF"),YE(2,4),YE(ie.byteLength+12,4)]);i(vg([ue,ie]))}}function dH(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>dH(e)).flat())}function $D(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=new ArrayBuffer(r.length),s=new DataView(i);for(let o=0;o<r.length;o++)s.setUint8(o,r.charCodeAt(o));return i}function YE(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function XE(n){return new TextEncoder().encode(n).buffer}function vg(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function _fe(n,e){const t=e===Xn.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===Xn.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===Xn.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}let qD=class{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=vg([YE(r.byteLength,4),XE(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}},ja=class{constructor(e,t,r,i,s,o){this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,this.buffer=_fe(this.attribute,this.valueType),this.max=r===Kt.POSITION||r===Kt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0,this.min=r===Kt.POSITION||r===Kt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,l)=>l%3===2))]:void 0}};var Bd;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(Bd||(Bd={}));var xo;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(xo||(xo={}));var Kt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(Kt||(Kt={}));var li;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(li||(li={}));const Qfe=(n,e,t)=>n.map(r=>{const i=r.type===li.Group?r.children[0]:r,s=r.type===li.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(Kt.SKIN_INDEX),NORMAL:a.indexOf(Kt.NORMAL),POSITION:a.indexOf(Kt.POSITION),TEXCOORD_0:a.indexOf(Kt.UV),WEIGHTS_0:a.indexOf(Kt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===Kt.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>({NORMAL:e.map(c=>c.type===Kt.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(kw+A),POSITION:e.map(c=>c.type===Kt.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(kw+A)})):void 0}})}}),Rfe=(n,e,t)=>n.map(r=>{const i=r.type===li.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===Kt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),Mfe=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i=t.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(c=>c.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const A=t;r=A.color?[A.color.r,A.color.g,A.color.b,1]:void 0}let s=-1;t.map?s=e.map(A=>A.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(A=>A.name).indexOf(t.uniforms.map.name));const o=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,a=(()=>{switch(t.type){case Bd.MeshStandardMaterial:return t.metalness;case Bd.MeshBasicMaterial:return 0;default:return 0}})(),l=(()=>{switch(t.type){case Bd.MeshStandardMaterial:return t.roughness;case Bd.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:{baseColorFactor:r,baseColorTexture:o,metallicFactor:a,roughnessFactor:l}}}),Tfe=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),Nfe=n=>n.map(()=>({magFilter:Xn.LINEAR,minFilter:Xn.LINEAR,wrapS:Xn.REPEAT,wrapT:Xn.REPEAT})),Dfe=n=>n.map((e,t)=>({sampler:0,source:t})),kfe=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===li.Object3D||r.type===li.SkinnedMesh||r.type===li.Group||r.type===li.Bone).map(r=>t.indexOf(r.name))}]},hH=0,Vfe=1,pH=2,ek=2,t1=1.25,tk=1,uB=6*4+4+4,KE=65535,Lfe=Math.pow(2,-24);class ny{constructor(){}}function ua(n,e,t){return t.min.x=e[n],t.min.y=e[n+1],t.min.z=e[n+2],t.max.x=e[n+3],t.max.y=e[n+4],t.max.z=e[n+5],t}function nk(n){let e=-1,t=-1/0;for(let r=0;r<3;r++){const i=n[r+3]-n[r];i>t&&(t=i,e=r)}return e}function rk(n,e){e.set(n)}function ik(n,e,t){let r,i;for(let s=0;s<3;s++){const o=s+3;r=n[s],i=e[s],t[s]=r<i?r:i,r=n[o],i=e[o],t[o]=r>i?r:i}}function ry(n,e,t){for(let r=0;r<3;r++){const i=e[n+2*r],s=e[n+2*r+1],o=i-s,a=i+s;o<t[r]&&(t[r]=o),a>t[r+3]&&(t[r+3]=a)}}function Vp(n){const e=n[3]-n[0],t=n[4]-n[1],r=n[5]-n[2];return 2*(e*t+t*r+r*e)}function Pfe(n,e){if(!n.index){const t=n.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;t>65535?i=new Uint32Array(new r(4*t)):i=new Uint16Array(new r(2*t)),n.setIndex(new At(i,1));for(let s=0;s<t;s++)i[s]=s}}function Wfe(n){if(!n.groups||!n.groups.length)return[{offset:0,count:n.index.count/3}];const e=[],t=new Set;for(const i of n.groups)t.add(i.start),t.add(i.start+i.count);const r=Array.from(t.values()).sort((i,s)=>i-s);for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function n1(n,e,t,r,i=null){let s=1/0,o=1/0,a=1/0,l=-1/0,A=-1/0,c=-1/0,u=1/0,f=1/0,d=1/0,h=-1/0,p=-1/0,m=-1/0;const g=i!==null;for(let v=e*6,y=(e+t)*6;v<y;v+=6){const w=n[v+0],C=n[v+1],b=w-C,F=w+C;b<s&&(s=b),F>l&&(l=F),g&&w<u&&(u=w),g&&w>h&&(h=w);const x=n[v+2],S=n[v+3],R=x-S,Z=x+S;R<o&&(o=R),Z>A&&(A=Z),g&&x<f&&(f=x),g&&x>p&&(p=x);const Y=n[v+4],Q=n[v+5],B=Y-Q,E=Y+Q;B<a&&(a=B),E>c&&(c=E),g&&Y<d&&(d=Y),g&&Y>m&&(m=Y)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=A,r[5]=c,g&&(i[0]=u,i[1]=f,i[2]=d,i[3]=h,i[4]=p,i[5]=m)}function Ofe(n,e,t,r){let i=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,A=-1/0;for(let c=e*6,u=(e+t)*6;c<u;c+=6){const f=n[c+0];f<i&&(i=f),f>a&&(a=f);const d=n[c+2];d<s&&(s=d),d>l&&(l=d);const h=n[c+4];h<o&&(o=h),h>A&&(A=h)}r[0]=i,r[1]=s,r[2]=o,r[3]=a,r[4]=l,r[5]=A}function Gfe(n,e,t,r,i){let s=t,o=t+r-1;const a=i.pos,l=i.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let A=0;A<3;A++){let c=n[s*3+A];n[s*3+A]=n[o*3+A],n[o*3+A]=c;let u=e[s*6+A*2+0];e[s*6+A*2+0]=e[o*6+A*2+0],e[o*6+A*2+0]=u;let f=e[s*6+A*2+1];e[s*6+A*2+1]=e[o*6+A*2+1],e[o*6+A*2+1]=f}s++,o--}else return s}}const nl=32,Zfe=(n,e)=>n.candidate-e.candidate,sA=new Array(nl).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),iy=new Float32Array(6);function Jfe(n,e,t,r,i,s){let o=-1,a=0;if(s===hH)o=nk(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===Vfe)o=nk(n),o!==-1&&(a=Hfe(t,r,i,o));else if(s===pH){const l=Vp(n);let A=t1*i;const c=r*6,u=(r+i)*6;for(let f=0;f<3;f++){const d=e[f],m=(e[f+3]-d)/nl;if(i<nl/4){const g=[...sA];g.length=i;let v=0;for(let w=c;w<u;w+=6,v++){const C=g[v];C.candidate=t[w+2*f],C.count=0;const{bounds:b,leftCacheBounds:F,rightCacheBounds:x}=C;for(let S=0;S<3;S++)x[S]=1/0,x[S+3]=-1/0,F[S]=1/0,F[S+3]=-1/0,b[S]=1/0,b[S+3]=-1/0;ry(w,t,b)}g.sort(Zfe);let y=i;for(let w=0;w<y;w++){const C=g[w];for(;w+1<y&&g[w+1].candidate===C.candidate;)g.splice(w+1,1),y--}for(let w=c;w<u;w+=6){const C=t[w+2*f];for(let b=0;b<y;b++){const F=g[b];C>=F.candidate?ry(w,t,F.rightCacheBounds):(ry(w,t,F.leftCacheBounds),F.count++)}}for(let w=0;w<y;w++){const C=g[w],b=C.count,F=i-C.count,x=C.leftCacheBounds,S=C.rightCacheBounds;let R=0;b!==0&&(R=Vp(x)/l);let Z=0;F!==0&&(Z=Vp(S)/l);const Y=tk+t1*(R*b+Z*F);Y<A&&(o=f,A=Y,a=C.candidate)}}else{for(let y=0;y<nl;y++){const w=sA[y];w.count=0,w.candidate=d+m+y*m;const C=w.bounds;for(let b=0;b<3;b++)C[b]=1/0,C[b+3]=-1/0}for(let y=c;y<u;y+=6){let b=~~((t[y+2*f]-d)/m);b>=nl&&(b=nl-1);const F=sA[b];F.count++,ry(y,t,F.bounds)}const g=sA[nl-1];rk(g.bounds,g.rightCacheBounds);for(let y=nl-2;y>=0;y--){const w=sA[y],C=sA[y+1];ik(w.bounds,C.rightCacheBounds,w.rightCacheBounds)}let v=0;for(let y=0;y<nl-1;y++){const w=sA[y],C=w.count,b=w.bounds,x=sA[y+1].rightCacheBounds;C!==0&&(v===0?rk(b,iy):ik(b,iy,iy)),v+=C;let S=0,R=0;v!==0&&(S=Vp(iy)/l);const Z=i-v;Z!==0&&(R=Vp(x)/l);const Y=tk+t1*(S*v+R*Z);Y<A&&(o=f,A=Y,a=w.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function Hfe(n,e,t,r){let i=0;for(let s=e,o=e+t;s<o;s++)i+=n[s*6+r*2];return i/t}function zfe(n,e){const t=n.attributes.position,r=n.index.array,i=r.length/3,s=new Float32Array(i*6),o=t.normalized,a=t.array,l=t.offset||0;let A=3;t.isInterleavedBufferAttribute&&(A=t.data.stride);const c=["getX","getY","getZ"];for(let u=0;u<i;u++){const f=u*3,d=u*6;let h,p,m;o?(h=r[f+0],p=r[f+1],m=r[f+2]):(h=r[f+0]*A+l,p=r[f+1]*A+l,m=r[f+2]*A+l);for(let g=0;g<3;g++){let v,y,w;o?(v=t[c[g]](h),y=t[c[g]](p),w=t[c[g]](m)):(v=a[h+g],y=a[p+g],w=a[m+g]);let C=v;y<C&&(C=y),w<C&&(C=w);let b=v;y>b&&(b=y),w>b&&(b=w);const F=(b-C)/2,x=g*2;s[d+x+0]=C+F,s[d+x+1]=F+(Math.abs(C)+F)*Lfe,C<e[g]&&(e[g]=C),b>e[g+3]&&(e[g+3]=b)}}return s}function Yfe(n,e){function t(g){f&&f(g/d)}function r(g,v,y,w=null,C=0){if(!h&&C>=l&&(h=!0,A&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(n))),y<=c||C>=l)return t(v+y),g.offset=v,g.count=y,g;const b=Jfe(g.boundingData,w,o,v,y,u);if(b.axis===-1)return t(v+y),g.offset=v,g.count=y,g;const F=Gfe(a,o,v,y,b);if(F===v||F===v+y)t(v+y),g.offset=v,g.count=y;else{g.splitAxis=b.axis;const x=new ny,S=v,R=F-v;g.left=x,x.boundingData=new Float32Array(6),n1(o,S,R,x.boundingData,s),r(x,S,R,s,C+1);const Z=new ny,Y=F,Q=y-R;g.right=Z,Z.boundingData=new Float32Array(6),n1(o,Y,Q,Z.boundingData,s),r(Z,Y,Q,s,C+1)}return g}Pfe(n,e);const i=new Float32Array(6),s=new Float32Array(6),o=zfe(n,i),a=n.index.array,l=e.maxDepth,A=e.verbose,c=e.maxLeafTris,u=e.strategy,f=e.onProgress,d=n.index.count/3;let h=!1;const p=[],m=Wfe(n);if(m.length===1){const g=m[0],v=new ny;v.boundingData=i,Ofe(o,g.offset,g.count,s),r(v,g.offset,g.count,s),p.push(v)}else for(let g of m){const v=new ny;v.boundingData=new Float32Array(6),n1(o,g.offset,g.count,v.boundingData,s),r(v,g.offset,g.count,s),p.push(v)}return p}function Xfe(n,e){const t=Yfe(n,e);let r,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<t.length;c++){const u=t[c];let f=l(u);const d=new a(uB*f);r=new Float32Array(d),i=new Uint32Array(d),s=new Uint16Array(d),A(0,u),o.push(d)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function A(c,u){const f=c/4,d=c/2,h=!!u.count,p=u.boundingData;for(let m=0;m<6;m++)r[f+m]=p[m];if(h){const m=u.offset,g=u.count;return i[f+6]=m,s[d+14]=g,s[d+15]=KE,c+uB}else{const m=u.left,g=u.right,v=u.splitAxis;let y;if(y=A(c+uB,m),y/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[f+6]=y/4,y=A(y,g),i[f+7]=v,y}}}class Dl{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][t];r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}setFromPoints(e,t){let r=1/0,i=-1/0;for(let s=0,o=t.length;s<o;s++){const a=t[s],l=e.dot(a);r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Dl.prototype.setFromBox=function(){const n=new X;return function(t,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let A=0;A<=1;A++)for(let c=0;c<=1;c++){n.x=i.x*l+s.x*(1-l),n.y=i.y*A+s.y*(1-A),n.z=i.z*c+s.z*(1-c);const u=t.dot(n);o=Math.min(u,o),a=Math.max(u,a)}this.min=o,this.max=a}}();const Kfe=function(){const n=new X,e=new X,t=new X;return function(i,s,o){const a=i.start,l=n,A=s.start,c=e;t.subVectors(a,A),n.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const u=t.dot(c),f=c.dot(l),d=c.dot(c),h=t.dot(l),m=l.dot(l)*d-f*f;let g,v;m!==0?g=(u*f-h*d)/m:g=0,v=(u+g*f)/d,o.x=g,o.y=v}}(),J_=function(){const n=new Oe,e=new X,t=new X;return function(i,s,o,a){Kfe(i,s,n);let l=n.x,A=n.y;if(l>=0&&l<=1&&A>=0&&A<=1){i.at(l,o),s.at(A,a);return}else if(l>=0&&l<=1){A<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(A>=0&&A<=1){l<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;l<0?c=i.start:c=i.end;let u;A<0?u=s.start:u=s.end;const f=e,d=t;if(i.closestPointToPoint(u,!0,e),s.closestPointToPoint(c,!0,t),f.distanceToSquared(u)<=d.distanceToSquared(c)){o.copy(f),a.copy(u);return}else{o.copy(c),a.copy(d);return}}}}(),jfe=function(){const n=new X,e=new X,t=new dl,r=new xl;return function(s,o){const{radius:a,center:l}=s,{a:A,b:c,c:u}=o;if(r.start=A,r.end=c,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a||(r.start=A,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a)||(r.start=c,r.end=u,r.closestPointToPoint(l,!0,n).distanceTo(l)<=a))return!0;const p=o.getPlane(t);if(Math.abs(p.distanceToPoint(l))<=a){const g=p.projectPoint(l,e);if(o.containsPoint(g))return!0}return!1}}(),$fe=1e-15;function yf(n){return Math.abs(n)<$fe}class kl extends ts{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new X),this.satBounds=new Array(4).fill().map(()=>new Dl),this.points=[this.a,this.b,this.c],this.sphere=new Su,this.plane=new dl,this.needsUpdate=!0}intersectsSphere(e){return jfe(e,this)}update(){const e=this.a,t=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,i);const A=s[1],c=o[1];A.subVectors(e,t),c.setFromPoints(A,i);const u=s[2],f=o[2];u.subVectors(t,r),f.setFromPoints(u,i);const d=s[3],h=o[3];d.subVectors(r,e),h.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}kl.prototype.closestPointToSegment=function(){const n=new X,e=new X,t=new xl;return function(i,s=null,o=null){const{start:a,end:l}=i,A=this.points;let c,u=1/0;for(let f=0;f<3;f++){const d=(f+1)%3;t.start.copy(A[f]),t.end.copy(A[d]),J_(t,i,n,e),c=n.distanceToSquared(e),c<u&&(u=c,s&&s.copy(n),o&&o.copy(e))}return this.closestPointToPoint(a,n),c=a.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(a)),this.closestPointToPoint(l,n),c=l.distanceToSquared(n),c<u&&(u=c,s&&s.copy(n),o&&o.copy(l)),Math.sqrt(u)}}();kl.prototype.intersectsTriangle=function(){const n=new kl,e=new Array(3),t=new Array(3),r=new Dl,i=new Dl,s=new X,o=new X,a=new X,l=new X,A=new xl,c=new xl,u=new xl;return function(d,h=null,p=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(n.copy(d),n.update(),d=n);const m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const v=this.satBounds,y=this.satAxes;t[0]=d.a,t[1]=d.b,t[2]=d.c;for(let b=0;b<4;b++){const F=v[b],x=y[b];if(r.setFromPoints(x,t),F.isSeparated(r))return!1}const w=d.satBounds,C=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let b=0;b<4;b++){const F=w[b],x=C[b];if(r.setFromPoints(x,e),F.isSeparated(r))return!1}for(let b=0;b<4;b++){const F=y[b];for(let x=0;x<4;x++){const S=C[x];if(s.crossVectors(F,S),r.setFromPoints(s,e),i.setFromPoints(s,t),r.isSeparated(i))return!1}}return h&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),h.start.set(0,0,0),h.end.set(0,0,0)),!0}else{const v=this.points;let y=!1,w=0;for(let B=0;B<3;B++){const E=v[B],M=v[(B+1)%3];A.start.copy(E),A.end.copy(M),A.delta(o);const D=y?c.start:c.end,T=yf(g.distanceToPoint(E));if(yf(g.normal.dot(o))&&T){c.copy(A),w=2;break}if((g.intersectLine(A,D)||T)&&!yf(D.distanceTo(M))){if(w++,y)break;y=!0}}if(w===1&&d.containsPoint(c.end))return h&&(h.start.copy(c.end),h.end.copy(c.end)),!0;if(w!==2)return!1;const C=d.points;let b=!1,F=0;for(let B=0;B<3;B++){const E=C[B],M=C[(B+1)%3];A.start.copy(E),A.end.copy(M),A.delta(a);const D=b?u.start:u.end,T=yf(m.distanceToPoint(E));if(yf(m.normal.dot(a))&&T){u.copy(A),F=2;break}if((m.intersectLine(A,D)||T)&&!yf(D.distanceTo(M))){if(F++,b)break;b=!0}}if(F===1&&this.containsPoint(u.end))return h&&(h.start.copy(u.end),h.end.copy(u.end)),!0;if(F!==2)return!1;if(c.delta(o),u.delta(a),o.dot(a)<0){let B=u.start;u.start=u.end,u.end=B}const x=c.start.dot(o),S=c.end.dot(o),R=u.start.dot(o),Z=u.end.dot(o),Y=S<R,Q=x<Z;return x!==Z&&R!==S&&Y===Q?!1:(h&&(l.subVectors(c.start,u.start),l.dot(o)>0?h.start.copy(c.start):h.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(o)<0?h.end.copy(c.end):h.end.copy(u.end)),!0)}}}();kl.prototype.distanceToPoint=function(){const n=new X;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();kl.prototype.distanceToTriangle=function(){const n=new X,e=new X,t=["a","b","c"],r=new xl,i=new xl;return function(o,a=null,l=null){const A=a||l?r:null;if(this.intersectsTriangle(o,A))return(a||l)&&(a&&A.getCenter(a),l&&A.getCenter(l)),0;let c=1/0;for(let u=0;u<3;u++){let f;const d=t[u],h=o[d];this.closestPointToPoint(h,n),f=h.distanceToSquared(n),f<c&&(c=f,a&&a.copy(n),l&&l.copy(h));const p=this[d];o.closestPointToPoint(p,n),f=p.distanceToSquared(n),f<c&&(c=f,a&&a.copy(p),l&&l.copy(n))}for(let u=0;u<3;u++){const f=t[u],d=t[(u+1)%3];r.set(this[f],this[d]);for(let h=0;h<3;h++){const p=t[h],m=t[(h+1)%3];i.set(o[p],o[m]),J_(r,i,n,e);const g=n.distanceToSquared(e);g<c&&(c=g,a&&a.copy(n),l&&l.copy(e))}}return Math.sqrt(c)}}();class Ra{constructor(e,t,r){this.isOrientedBox=!0,this.min=new X,this.max=new X,this.matrix=new Le,this.invMatrix=new Le,this.points=new Array(8).fill().map(()=>new X),this.satAxes=new Array(3).fill().map(()=>new X),this.satBounds=new Array(3).fill().map(()=>new Dl),this.alignedSatBounds=new Array(3).fill().map(()=>new Dl),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Ra.prototype.update=function(){return function(){const e=this.matrix,t=this.min,r=this.max,i=this.points;for(let A=0;A<=1;A++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){const f=1*A|2*c|4*u,d=i[f];d.x=A?r.x:t.x,d.y=c?r.y:t.y,d.z=u?r.z:t.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let A=0;A<3;A++){const c=o[A],u=s[A],f=1<<A,d=i[f];c.subVectors(a,d),u.setFromPoints(c,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ra.prototype.intersectsBox=function(){const n=new Dl;return function(t){this.needsUpdate&&this.update();const r=t.min,i=t.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(n.min=r.x,n.max=i.x,a[0].isSeparated(n)||(n.min=r.y,n.max=i.y,a[1].isSeparated(n))||(n.min=r.z,n.max=i.z,a[2].isSeparated(n)))return!1;for(let l=0;l<3;l++){const A=o[l],c=s[l];if(n.setFromBox(A,t),c.isSeparated(n))return!1}return!0}}();Ra.prototype.intersectsTriangle=function(){const n=new kl,e=new Array(3),t=new Dl,r=new Dl,i=new X;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(n.copy(o),n.update(),o=n);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let f=0;f<3;f++){const d=a[f],h=l[f];if(t.setFromPoints(h,e),d.isSeparated(t))return!1}const A=o.satBounds,c=o.satAxes,u=this.points;for(let f=0;f<3;f++){const d=A[f],h=c[f];if(t.setFromPoints(h,u),d.isSeparated(t))return!1}for(let f=0;f<3;f++){const d=l[f];for(let h=0;h<4;h++){const p=c[h];if(i.crossVectors(d,p),t.setFromPoints(i,e),r.setFromPoints(i,u),t.isSeparated(r))return!1}}return!0}}();Ra.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();Ra.prototype.distanceToPoint=function(){const n=new X;return function(t){return this.closestPointToPoint(t,n),t.distanceTo(n)}}();Ra.prototype.distanceToBox=function(){const n=["x","y","z"],e=new Array(12).fill().map(()=>new xl),t=new Array(12).fill().map(()=>new xl),r=new X,i=new X;return function(o,a=0,l=null,A=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||A)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),A&&A.copy(i)),0;const c=a*a,u=o.min,f=o.max,d=this.points;let h=1/0;for(let m=0;m<8;m++){const g=d[m];i.copy(g).clamp(u,f);const v=g.distanceToSquared(i);if(v<h&&(h=v,l&&l.copy(g),A&&A.copy(i),v<c))return Math.sqrt(v)}let p=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){const y=(m+1)%3,w=(m+2)%3,C=g<<y|v<<w,b=1<<m|g<<y|v<<w,F=d[C],x=d[b];e[p].set(F,x);const R=n[m],Z=n[y],Y=n[w],Q=t[p],B=Q.start,E=Q.end;B[R]=u[R],B[Z]=g?u[Z]:f[Z],B[Y]=v?u[Y]:f[Z],E[R]=f[R],E[Z]=g?u[Z]:f[Z],E[Y]=v?u[Y]:f[Z],p++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){i.x=m?f.x:u.x,i.y=g?f.y:u.y,i.z=v?f.z:u.z,this.closestPointToPoint(i,r);const y=i.distanceToSquared(r);if(y<h&&(h=y,l&&l.copy(r),A&&A.copy(i),y<c))return Math.sqrt(y)}for(let m=0;m<12;m++){const g=e[m];for(let v=0;v<12;v++){const y=t[v];J_(g,y,r,i);const w=r.distanceToSquared(i);if(w<h&&(h=w,l&&l.copy(r),A&&A.copy(i),w<c))return Math.sqrt(w)}}return Math.sqrt(h)}}();const sy=new X,oy=new X,ay=new X,sk=new Oe,ok=new Oe,ak=new Oe,lk=new X;function qfe(n,e,t,r,i,s){let o;return s===di?o=n.intersectTriangle(r,t,e,!0,i):o=n.intersectTriangle(e,t,r,s!==Ui,i),o===null?null:{distance:n.origin.distanceTo(i),point:i.clone()}}function ede(n,e,t,r,i,s,o){sy.fromBufferAttribute(e,r),oy.fromBufferAttribute(e,i),ay.fromBufferAttribute(e,s);const a=qfe(n,sy,oy,ay,lk,o);if(a){t&&(sk.fromBufferAttribute(t,r),ok.fromBufferAttribute(t,i),ak.fromBufferAttribute(t,s),a.uv=ts.getUV(lk,sy,oy,ay,sk,ok,ak,new Oe));const l={a:r,b:i,c:s,normal:new X,materialIndex:0};ts.getNormal(sy,oy,ay,l.normal),a.face=l,a.faceIndex=r}return a}function gH(n,e,t,r,i){const s=r*3,o=n.index.getX(s),a=n.index.getX(s+1),l=n.index.getX(s+2),A=ede(t,n.attributes.position,n.attributes.uv,o,a,l,e);return A?(A.faceIndex=r,i&&i.push(A),A):null}function tde(n,e,t,r,i,s){for(let o=r,a=r+i;o<a;o++)gH(n,e,t,o,s)}function nde(n,e,t,r,i){let s=1/0,o=null;for(let a=r,l=r+i;a<l;a++){const A=gH(n,e,t,a);A&&A.distance<s&&(o=A,s=A.distance)}return o}function Ak(n,e,t){return n===null||(n.point.applyMatrix4(e.matrixWorld),n.distance=n.point.distanceTo(t.ray.origin),n.object=e,n.distance<t.near||n.distance>t.far)?null:n}function oa(n,e,t,r){const i=n.a,s=n.b,o=n.c;let a=e,l=e+1,A=e+2;t&&(a=t.getX(e),l=t.getX(e+1),A=t.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(A),o.y=r.getY(A),o.z=r.getZ(A)}function ck(n,e,t,r,i,s,o){const a=t.index,l=t.attributes.position;for(let A=n,c=e+n;A<c;A++)if(oa(o,A*3,a,l),o.needsUpdate=!0,r(o,A,i,s))return!0;return!1}class mH{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function vA(n,e){return e[n+15]===65535}function Od(n,e){return e[n+6]}function Lm(n,e){return e[n+14]}function Pm(n){return n+8}function Wm(n,e){return e[n+6]}function rde(n,e){return e[n+7]}const wd=new ao,Vw=new X,ide=["x","y","z"];function jE(n,e,t,r,i){let s=n*2,o=Xh,a=GA,l=ZA;if(vA(s,a)){const c=Od(n,l),u=Lm(s,a);tde(e,t,r,c,u,i)}else{const c=Pm(n);Lw(c,o,r,Vw)&&jE(c,e,t,r,i);const u=Wm(n,l);Lw(u,o,r,Vw)&&jE(u,e,t,r,i)}}function $E(n,e,t,r){let i=n*2,s=Xh,o=GA,a=ZA;if(vA(i,o)){const A=Od(n,a),c=Lm(i,o);return nde(e,t,r,A,c)}else{const A=rde(n,a),c=ide[A],f=r.direction[c]>=0;let d,h;f?(d=Pm(n),h=Wm(n,a)):(d=Wm(n,a),h=Pm(n));const m=Lw(d,s,r,Vw)?$E(d,e,t,r):null;if(m){const y=m.point[c];if(f?y<=s[h+A]:y>=s[h+A+3])return m}const v=Lw(h,s,r,Vw)?$E(h,e,t,r):null;return m&&v?m.distance<=v.distance?m:v:m||v||null}}const sde=function(){let n,e;const t=[],r=new mH(()=>new ao);return function(...o){n=r.getPrimitive(),e=r.getPrimitive(),t.push(n,e);const a=i(...o);r.releasePrimitive(n),r.releasePrimitive(e),t.pop(),t.pop();const l=t.length;return l>0&&(e=t[l-1],n=t[l-2]),a};function i(s,o,a,l,A=null,c=0,u=0){function f(y){let w=y*2,C=GA,b=ZA;for(;!vA(w,C);)y=Pm(y),w=y*2;return Od(y,b)}function d(y){let w=y*2,C=GA,b=ZA;for(;!vA(w,C);)y=Wm(y,b),w=y*2;return Od(y,b)+Lm(w,C)}let h=s*2,p=Xh,m=GA,g=ZA;if(vA(h,m)){const y=Od(s,g),w=Lm(h,m);return ua(s,p,n),l(y,w,!1,u,c+s,n)}else{const y=Pm(s),w=Wm(s,g);let C=y,b=w,F,x,S,R;if(A&&(S=n,R=e,ua(C,p,S),ua(b,p,R),F=A(S),x=A(R),x<F)){C=w,b=y;const D=F;F=x,x=D,S=R}S||(S=n,ua(C,p,S));const Z=vA(C*2,m),Y=a(S,Z,F,u+1,c+C);let Q;if(Y===ek){const D=f(C),V=d(C)-D;Q=l(D,V,!0,u+1,c+C,S)}else Q=Y&&i(C,o,a,l,A,c,u+1);if(Q)return!0;R=e,ua(b,p,R);const B=vA(b*2,m),E=a(R,B,x,u+1,c+b);let M;if(E===ek){const D=f(b),V=d(b)-D;M=l(D,V,!0,u+1,c+b,R)}else M=E&&i(b,o,a,l,A,c,u+1);return!!M}}}(),ode=function(){const n=new kl,e=new kl,t=new Le,r=new Ra,i=new Ra;return function s(o,a,l,A,c=null){let u=o*2,f=Xh,d=GA,h=ZA;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,A),c=r),vA(u,d)){const m=a,g=m.index,v=m.attributes.position,y=l.index,w=l.attributes.position,C=Od(o,h),b=Lm(u,d);if(t.copy(A).invert(),l.boundsTree)return ua(o,f,i),i.matrix.copy(t),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:x=>i.intersectsBox(x),intersectsTriangle:x=>{x.a.applyMatrix4(A),x.b.applyMatrix4(A),x.c.applyMatrix4(A),x.needsUpdate=!0;for(let S=C*3,R=(b+C)*3;S<R;S+=3)if(oa(e,S,g,v),e.needsUpdate=!0,x.intersectsTriangle(e))return!0;return!1}});for(let F=C*3,x=b+C*3;F<x;F+=3){oa(n,F,g,v),n.a.applyMatrix4(t),n.b.applyMatrix4(t),n.c.applyMatrix4(t),n.needsUpdate=!0;for(let S=0,R=y.count;S<R;S+=3)if(oa(e,S,y,w),e.needsUpdate=!0,n.intersectsTriangle(e))return!0}}else{const m=o+8,g=h[o+6];return ua(m,f,wd),!!(c.intersectsBox(wd)&&s(m,a,l,A,c)||(ua(g,f,wd),c.intersectsBox(wd)&&s(g,a,l,A,c)))}}}();function Lw(n,e,t,r){return ua(n,e,wd),t.intersectBox(wd,r)}const qE=[];let fB,Xh,GA,ZA;function yg(n){fB&&qE.push(fB),fB=n,Xh=new Float32Array(n),GA=new Uint16Array(n),ZA=new Uint32Array(n)}function ly(){fB=null,Xh=null,GA=null,ZA=null,qE.length&&yg(qE.pop())}const r1=Symbol("skip tree generation"),i1=new ao,s1=new ao,Bf=new Le,Ec=new Ra,Lp=new Ra,Pp=new X,Ay=new X,ade=new X,lde=new X,Ade=new X,uk=new ao,Yo=new mH(()=>new kl);class Jg{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Jg.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};const r=e.geometry,i=e._roots,s=r.getIndex();let o;return t.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Jg.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};const{index:i,roots:s}=e,o=new Jg(t,{...r,[r1]:!0});if(o._roots=s,r.setIndex){const a=t.getIndex();if(a===null){const l=new At(e.index,1,!1);t.setIndex(l)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:hH,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[r1]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[r1]||(this._roots=Xfe(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ao))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const t=this.geometry,r=t.index.array,i=t.attributes.position;let s,o,a,l,A=0;const c=this._roots;for(let f=0,d=c.length;f<d;f++)s=c[f],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),u(0,A),A+=s.byteLength;function u(f,d,h=!1){const p=f*2;if(a[p+15]===KE){const g=o[f+6],v=a[p+14];let y=1/0,w=1/0,C=1/0,b=-1/0,F=-1/0,x=-1/0;for(let S=3*g,R=3*(g+v);S<R;S++){const Z=r[S],Y=i.getX(Z),Q=i.getY(Z),B=i.getZ(Z);Y<y&&(y=Y),Y>b&&(b=Y),Q<w&&(w=Q),Q>F&&(F=Q),B<C&&(C=B),B>x&&(x=B)}return l[f+0]!==y||l[f+1]!==w||l[f+2]!==C||l[f+3]!==b||l[f+4]!==F||l[f+5]!==x?(l[f+0]=y,l[f+1]=w,l[f+2]=C,l[f+3]=b,l[f+4]=F,l[f+5]=x,!0):!1}else{const g=f+8,v=o[f+6],y=g+d,w=v+d;let C=h,b=!1,F=!1;e?C||(b=e.has(y),F=e.has(w),C=!b&&!F):(b=!0,F=!0);const x=C||b,S=C||F;let R=!1;x&&(R=u(g,d,C));let Z=!1;S&&(Z=u(v,d,C));const Y=R||Z;if(Y)for(let Q=0;Q<3;Q++){const B=g+Q,E=v+Q,M=l[B],D=l[B+3],T=l[E],V=l[E+3];l[f+Q]=M<T?M:T,l[f+Q+3]=D>V?D:V}return Y}}}traverse(e,t=0){const r=this._roots[t],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,l=0){const A=a*2,c=s[A+15]===KE;if(c){const u=i[a+6],f=s[A+14];e(l,c,new Float32Array(r,a*4,6),u,f)}else{const u=a+uB/4,f=i[a+6],d=i[a+7];e(l,c,new Float32Array(r,a*4,6),d)||(o(u,l+1),o(f,l+1))}}}raycast(e,t=Sa){const r=this._roots,i=this.geometry,s=[],o=t.isMaterial,a=Array.isArray(t),l=i.groups,A=o?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=a?t[l[c].materialIndex].side:A,d=s.length;if(yg(r[c]),jE(0,i,f,e,s),ly(),a){const h=l[c].materialIndex;for(let p=d,m=s.length;p<m;p++)s[p].face.materialIndex=h}}return s}raycastFirst(e,t=Sa){const r=this._roots,i=this.geometry,s=t.isMaterial,o=Array.isArray(t);let a=null;const l=i.groups,A=s?t.side:t;for(let c=0,u=r.length;c<u;c++){const f=o?t[l[c].materialIndex].side:A;yg(r[c]);const d=$E(0,i,f,e);ly(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=l[c].materialIndex))}return a}intersectsGeometry(e,t){const r=this.geometry;let i=!1;for(const s of this._roots)if(yg(s),i=ode(0,r,e,t),ly(),i)break;return i}shapecast(e,t,r){const i=this.geometry;if(e instanceof Function){if(t){const f=t;t=(d,h,p,m)=>{const g=h*3;return f(d,g,g+1,g+2,p,m)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=Yo.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:A}=e;if(l&&A){const f=l;l=(d,h,p,m,g)=>f(d,h,p,m,g)?!0:ck(d,h,i,A,p,m,s)}else l||(A?l=(f,d,h,p)=>ck(f,d,i,A,h,p,s):l=(f,d,h)=>h);let c=!1,u=0;for(const f of this._roots){if(yg(f),c=sde(0,i,a,l,o,u),ly(),c)break;u+=f.byteLength}return Yo.releasePrimitive(s),c}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,A=e.geometry.attributes.position;Bf.copy(t).invert();const c=Yo.getPrimitive(),u=Yo.getPrimitive();if(s){let d=function(h,p,m,g,v,y,w,C){for(let b=m,F=m+g;b<F;b++){oa(u,b*3,l,A),u.a.applyMatrix4(t),u.b.applyMatrix4(t),u.c.applyMatrix4(t),u.needsUpdate=!0;for(let x=h,S=h+p;x<S;x++)if(oa(c,x*3,o,a),c.needsUpdate=!0,s(c,u,x,b,v,y,w,C))return!0}return!1};if(i){const h=i;i=function(p,m,g,v,y,w,C,b){return h(p,m,g,v,y,w,C,b)?!0:d(p,m,g,v,y,w,C,b)}}else i=d}e.getBoundingBox(s1),s1.applyMatrix4(t);const f=this.shapecast({intersectsBounds:d=>s1.intersectsBox(d),intersectsRange:(d,h,p,m,g,v)=>(i1.copy(v),i1.applyMatrix4(Bf),e.shapecast({intersectsBounds:y=>i1.intersectsBox(y),intersectsRange:(y,w,C,b,F)=>i(d,h,y,w,m,g,b,F)}))});return Yo.releasePrimitive(c),Yo.releasePrimitive(u),f}intersectsBox(e,t){return Ec.set(e.min,e.max,t),Ec.needsUpdate=!0,this.shapecast({intersectsBounds:r=>Ec.intersectsBox(r),intersectsTriangle:r=>Ec.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),Ec.set(e.boundingBox.min,e.boundingBox.max,t),Ec.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,A=a.index,c=e.attributes.position,u=e.index,f=Yo.getPrimitive(),d=Yo.getPrimitive();let h=Ay,p=ade,m=null,g=null;i&&(m=lde,g=Ade);let v=1/0,y=null,w=null;return Bf.copy(t).invert(),Lp.matrix.copy(Bf),this.shapecast({boundsTraverseOrder:C=>Ec.distanceToBox(C),intersectsBounds:(C,b,F)=>F<v&&F<o?(b&&(Lp.min.copy(C.min),Lp.max.copy(C.max),Lp.needsUpdate=!0),!0):!1,intersectsRange:(C,b)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:F=>Lp.distanceToBox(F),intersectsBounds:(F,x,S)=>S<v&&S<o,intersectsRange:(F,x)=>{for(let S=F*3,R=(F+x)*3;S<R;S+=3){oa(d,S,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let Z=C*3,Y=(C+b)*3;Z<Y;Z+=3){oa(f,Z,A,l),f.needsUpdate=!0;const Q=f.distanceToTriangle(d,h,m);if(Q<v&&(p.copy(h),g&&g.copy(m),v=Q,y=Z/3,w=S/3),Q<s)return!0}}}});{const F=u?u.count:c.count;for(let x=0,S=F;x<S;x+=3){oa(d,x,u,c),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let R=C*3,Z=(C+b)*3;R<Z;R+=3){oa(f,R,A,l),f.needsUpdate=!0;const Y=f.distanceToTriangle(d,h,m);if(Y<v&&(p.copy(h),g&&g.copy(m),v=Y,y=R/3,w=x/3),Y<s)return!0}}}}}),Yo.releasePrimitive(f),Yo.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(p):r.point=p.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(Bf),p.applyMatrix4(Bf),i.distance=p.sub(i.point).length(),i.faceIndex=w),r)}closestPointToPoint(e,t={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:c=>(Pp.copy(e).clamp(c.min,c.max),Pp.distanceToSquared(e)),intersectsBounds:(c,u,f)=>f<a&&f<o,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,Pp);const f=e.distanceToSquared(Pp);return f<a&&(Ay.copy(Pp),a=f,l=u),f<s}}),a===1/0)return null;const A=Math.sqrt(a);return t.point?t.point.copy(Ay):t.point=Ay.clone(),t.distance=A,t.faceIndex=l,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{ua(0,new Float32Array(r),uk),e.union(uk)}),e}}const o1=new o0,fk=new Le,cde=Vn.prototype.raycast;function ude(n,e){if(this.geometry.boundsTree){if(this.material===void 0)return;fk.copy(this.matrixWorld).invert(),o1.copy(n.ray).applyMatrix4(fk);const t=this.geometry.boundsTree;if(n.firstHitOnly===!0){const r=Ak(t.raycastFirst(o1,this.material),this,n);r&&e.push(r)}else{const r=t.raycast(o1,this.material);for(let i=0,s=r.length;i<s;i++){const o=Ak(r[i],this,n);o&&e.push(o)}}}else cde.call(this,n,e)}function fde(n){return this.boundsTree=new Jg(this,n),this.boundsTree}function dde(){this.boundsTree=null}let a1=new X,Wp=new X;const dk=[],cy=new gZ,hde=.03,pde=.03,gde=new ss({side:Sa}),mde=new ss({side:di});let Bg;$t.prototype.computeBoundsTree=fde;$t.prototype.disposeBoundsTree=dde;Vn.prototype.raycast=ude;const vde=n=>{const e=n.attributes.position,t=n.index,r=new ts,i=new X,s=new X,o=new X,a=[];for(let l=0;l<t.array.length/3;l++){const A=l*3;i.fromBufferAttribute(e,t.getX(A+0)),s.fromBufferAttribute(e,t.getX(A+1)),o.fromBufferAttribute(e,t.getX(A+2)),r.set(i,s,o),a.push(r.getNormal(new X))}n.userData.faceNormals=a},yde=n=>{const e=n.geometry.clone();let t=[];if(Array.isArray(n.material))for(let i=0;i<n.material.length;i++)t.push(n.material[i].clone());else t=n.material.clone();if(!n.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const r=new Vn(e,t);return vde(r.geometry),r.geometry.computeBoundsTree({strategy:pH}),r},dB=n=>{n.isMesh&&(n.geometry.userData.faceNormals=null,n.geometry.dispose(),n.geometry.disposeBoundsTree(),n.parent&&n.parent.remove(n),n.userData.cancelMesh&&dB(n.userData.cancelMesh))},vH=n=>{var e,t;n.userData.cullingClone&&(dB(n.userData.cullingClone),n.userData.cullingClone=null,dB(n.userData.cullingCloneP),n.userData.cullingCloneP=null,dB(n.userData.cullingCloneN),n.userData.cullingCloneN=null,((e=n.userData)==null?void 0:e.clippedIndexGeometry)!=null&&(n.userData.clippedIndexGeometry=null),((t=n.userData)==null?void 0:t.origIndexBuffer)!=null&&(n.userData.origIndexBuffer=null))},Bde=async n=>{if(n==null){console.warn("Null parameter for meshes was provided. Skipping mesh culling.");return}if(!Array.isArray(n)){console.warn("No valid mesh array was provided. Skipping mesh culling.");return}if(n.length==0){console.warn("No mesh array with elements was provided. Skipping mesh culling.");return}const e=[];Bg=n[0].parent,Bg.lines!=null&&(Bg.lines.forEach(i=>{i.visible=!1}),Bg.lines.length=0),n.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=yde(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,o=i.userData.cullingCloneP,a=i.userData.cullingCloneN;o.material=gde,a.userData.cancelMesh=o,a.material=mde,o.userData.maxCullDistance=a.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(o),e[i.userData.cullLayer].negMeshes.push(a),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let t=[];const r=[];for(let i=e.length-1;i>=0;i--){if(t.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const o=e[i].origMeshes[s],a=e[i].cloneMeshes[s],l=o.userData.origIndexBuffer.array,A=a.geometry.attributes.position.array,c=a.geometry.attributes.normal.array,u=a.geometry.userData.faceNormals;r.push({geom:o.geometry,index:Cde(l,A,c,u,t,o.userData.cullDistance)})}t=[...t,...e[i].posMeshes,...e[i].negMeshes]}r.forEach(i=>{i.geom.setIndex(i.index)})},wde=n=>{let e=hde,t=pde;return n&&(isNaN(n)?Array.isArray(n)&&(isNaN(n[0])||(e=n[0]),isNaN(n[1])||(t=n[1])):e=n),[e,t]},Cde=(n,e,t,r,i,s,o=!1)=>{const a=[],l=wde(s);let A=l[0],c=l[1];cy.far=A+c;for(let f=0;f<n.length/3;f++){r&&Wp.set(r[f].x,r[f].y,r[f].z).normalize();const d=f*3;let h=[];for(let p=0;p<3;p++){dk.length=0;const m=n[d+p]*3;r==null&&Wp.set(t[m],t[m+1],t[m+2]).normalize(),a1.set(e[m],e[m+1],e[m+2]).add(Wp.clone().multiplyScalar(A)),cy.set(a1,Wp.clone().multiplyScalar(-1));const g=cy.intersectObjects(i,!1,dk);for(let v=g.length-1;v>=0;v--)A-g[v].distance>=g[v].object.userData.maxCullDistance&&g.splice(v,1);if(g.length===0){for(let v=0;v<3;v++)a.push(n[d+v]);break}else{const v=g.map(y=>y.object);for(let y=0;y<v.length;y++){const w=v[y];if(w!=null&&w.userData.cancelMesh){const C=v.indexOf(w.userData.cancelMesh);v[y]=null,C!=-1&&C<y&&(v[C]=null)}}if(v.filter(y=>y).length===0){for(let y=0;y<3;y++)a.push(n[d+y]);break}if(p===0)h=g.map(y=>y.object);else if(h=g.map(y=>{if(h.indexOf(y.object)!==-1)return y.object}),h=h.filter(y=>y),p===2&&h.filter(y=>y).length===0)for(let y=0;y<3;y++)a.push(n[d+y]);o&&bde(a1,Wp.clone().multiplyScalar(-1),cy.far,16711680,Bg)}}}const u=new Uint32Array(a);return new At(u,1,!1)};function bde(n,e,t,r,i){i.lines==null&&(i.lines=[]);let s=new X;s.addVectors(n,e.clone().multiplyScalar(t));const o=[];o.push(n),o.push(s);const a=new $t().setFromPoints(o),l=[];l.push(new Re(0)),l.push(new Re(16777215));let A=new Pl({color:r});var c=new Dh(a,A);c.renderOrder=100,i.add(c),i.lines.push(c)}function yH(n){let e,t,r,i=0;for(let a=0;a<n.length;++a){const l=n[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(e===void 0&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=l.array.length}const s=new e(i);let o=0;for(let a=0;a<n.length;++a)s.set(n[a].array,o),o+=n[a].array.length;return new At(s,t,r)}let l1,$a,uy,fy,dy,zi,wf;function xde(){zi!=null&&zi.clear(!0,!0)}function Ide(n,e,t,r,i,s){if(n==null){const l=new Uint8Array([t.r*255,t.g*255,t.b*255]);n=new oZ(l,r,i,ZG),n.needsUpdate=!0}if(l1==null){l1=document.createElement("div"),uy=new gw,$a=new l0(-r/2,r/2,i/2,-i/2,-1e4,1e4),$a.position.z=100,uy.add($a),fy=new ss({side:Ui,transparent:!0,opacity:1,color:new Re(1,1,1)});const l=new Mh(1,1);dy=new Vn(l,fy),dy.scale.set(r,i,1),uy.add(dy),zi=new HC,zi.setPixelRatio(1),zi.setSize(r,i),zi.autoClear=!1,l1.appendChild(zi.domElement)}else $a.left=-r/2,$a.right=r/2,$a.top=i/2,$a.bottom=-i/2,$a.updateProjectionMatrix(),dy.scale.set(r,i,1),zi.setSize(r,i);wf=new $A(r,i),wf.texture.encoding=ht,fy.map=n,fy.color=e.clone(),zi.setClearColor(t.clone(),s?0:1),zi.setRenderTarget(wf),zi.clear(),zi.render(uy,$a);let o=new Uint8ClampedArray(wf.width*wf.height*4);return zi.readRenderTargetPixels(wf,0,0,r,i,o),new ImageData(o,r,i)}function BH({width:n,height:e,transparent:t}){const r=document.createElement("canvas");r.width=n,r.height=e;const i=r.getContext("2d");return i.fillStyle="white",t&&(i.globalAlpha=0),i.fillRect(0,0,r.width,r.height),i.globalAlpha=1,i}function eU(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].image}function Fde(n,e){return n=n.length==null?n:n[0],n[e]&&n[e].clone()}function SA(n,e,t,r,i){const s=(n-e)/(t-e);return r+s*(i-r)}const Ede=async({transparentColor:n,meshes:e,atlasSize:t=4096,mtoon:r=!0,transparentMaterial:i=!1,transparentTexture:s=!1})=>typeof window>"u"?await Ude({meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}):await Sde({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s}),Ude=async({meshes:n,atlasSize:e,mtoon:t,transparentMaterial:r,transparentTexture:i})=>{const s=e,o=["diffuse"],a=[];n.forEach(F=>{const x=F.material;let S=a.find(R=>R.material===x);if(!S)a.push({material:x,mesh:F});else{const{dest:R}=H_({meshes:[S.mesh,F]});S.mesh.geometry=R}});const l=Object.fromEntries(o.map(F=>[F,BH({width:s,height:s,transparent:i})])),A=Math.floor(Math.sqrt(n.length)+1),c=s/A,u=new Map(a.map((F,x)=>{const S=new Oe(x%A,Math.floor(x/A)).multiplyScalar(1/A),R=new Oe(S.x+1/A,S.y+1/A);return[F.mesh,{min:S,max:R}]})),f={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},d=[],h=[];a.forEach(F=>{const{min:x,max:S}=u.get(F.mesh);h.push(S),d.push(x)});const p=new Oe(Math.max(...h.map(F=>F.x)),Math.max(...h.map(F=>F.y))),m=new Oe(Math.min(...d.map(F=>F.x)),Math.min(...d.map(F=>F.y))),g=1/(p.x-m.x),v=1/(p.y-m.y),y=c*g,w=c*v,C=new Map(a.map(F=>{let{min:x,max:S}=u.get(F.mesh);return x.x=x.x*g,x.y=x.y*v,S.x=S.x*g,S.y=S.y*v,[F.mesh,{min:x,max:S}]}));a.forEach(F=>{const{material:x,mesh:S}=F,{min:R,max:Z}=C.get(S);o.forEach(E=>{const M=l[E];M.globalCompositeOperation="source-over";let D=eU(x,f[E].find(T=>eU(x,T)));if(D!==""&&D!==void 0)try{const T=new Uint8ClampedArray(D.data),V=new ImageData(T,y,w),G=document.createElement("canvas");G.width=y,G.height=w;const P=G.getContext("2d");P.putImageData(V,0,0),P.save(),M.drawImage(G,R.x*s,R.y*s,y,w)}catch(T){console.error("error",T)}else M.fillStyle=E==="diffuse"?`#${x.color.clone().getHexString()}`:E==="normal"?"#8080ff":E==="orm"?`#${new Re(x.aoMapIntensity,x.roughness,x.metalness).getHexString()}`:"#7F7F7F",M.fillRect(R.x*s,R.y*s,y,w)});const Y=S.geometry,Q=Y.attributes.uv;if(Q)for(let E=0;E<Q.array.length;E+=2)Q.array[E]=SA(Q.array[E],0,1,R.x,Z.x),Q.array[E+1]=SA(Q.array[E+1],0,1,R.y,Z.y);const B=Y.attributes.uv2;if(B)for(let E=0;E<B.array.length;E+=2)B.array[E]=SA(B.array[E],0,1,R.x,Z.x),B.array[E+1]=SA(B.array[E+1],0,1,R.y,Z.y);else Y.attributes.uv2=Y.attributes.uv});const b=Object.fromEntries(await Promise.all(o.map(async F=>{const x=new nr(l[F].canvas);return x.flipY=!1,[F,x]})));return{bakeObjects:a,textures:b,uvs:C}},Sde=async({backColor:n,meshes:e,atlasSize:t,mtoon:r,transparentMaterial:i,transparentTexture:s})=>{xde();const o=t,a=r?["diffuse"]:["diffuse","orm"],l=[];let A=null;e.forEach(Z=>{Z=Z.clone();const Y=Z.material.length==null?Z.material:Z.material[0];r&&A==null&&Y.type=="ShaderMaterial"&&(A=Y.clone());let Q=l.find(B=>{B.material});if(!Q)l.push({material:Y,mesh:Z});else{const{dest:B}=H_({meshes:[Q.mesh,Z]});Q.mesh.geometry=B}});const c=Object.fromEntries(a.map(Z=>[Z,BH({width:o,height:o,transparent:s})])),u=Math.floor(Math.sqrt(e.length)+1),f=o/u,d=new Map(l.map((Z,Y)=>{const Q=new Oe(Y%u,Math.floor(Y/u)).multiplyScalar(1/u),B=new Oe(Q.x+1/u,Q.y+1/u);return[Z.mesh,{min:Q,max:B}]})),h={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},p=[],m=[];l.forEach(Z=>{const{min:Y,max:Q}=d.get(Z.mesh);m.push(Q),p.push(Y)});const g=new Oe(Math.max(...m.map(Z=>Z.x)),Math.max(...m.map(Z=>Z.y))),v=new Oe(Math.min(...p.map(Z=>Z.x)),Math.min(...p.map(Z=>Z.y))),y=1/(g.x-v.x),w=1/(g.y-v.y),C=f*y,b=f*w,F=new Map(l.map(Z=>{let{min:Y,max:Q}=d.get(Z.mesh);return Y.x=Y.x*y,Y.y=Y.y*w,Q.x=Q.x*y,Q.y=Q.y*w,[Z.mesh,{min:Y,max:Q}]}));l.forEach(Z=>{const{material:Y,mesh:Q}=Z,{min:B,max:E}=F.get(Q);a.forEach(V=>{var k;const G=c[V];G.globalCompositeOperation="source-over";let P,U=new Re(1,1,1);switch(V){case"diffuse":P=Y.color||n,(k=Y.uniforms)!=null&&k.litFactor&&(U=Y.uniforms.litFactor.value);break;case"normal":P=new Re(8421631);break;case"orm":P=new Re(Y.aoMapIntensity,Y.roughness,Y.metalness);break;default:P=new Re(1,1,1);break}let H=Fde(Y,h[V].find(K=>eU(Y,K)));const oe=Ide(H,U,P,o,o,s);createImageBitmap(oe).then(K=>G.drawImage(K,B.x*o,B.y*o,C,b))});const M=Q.geometry.clone();Q.geometry=M;const D=M.attributes.uv.clone();if(M.attributes.uv=D,D)for(let V=0;V<M.attributes.uv.array.length;V+=2)D.array[V]=SA(D.array[V],0,1,B.x,E.x),D.array[V+1]=SA(D.array[V+1],0,1,B.y,E.y);const T=M.attributes.uv2;if(T)for(let V=0;V<T.array.length;V+=2)T.array[V]=SA(T.array[V],0,1,B.x,E.x),T.array[V+1]=SA(T.array[V+1],0,1,B.y,E.y);else M.attributes.uv2=M.attributes.uv});const x=Object.fromEntries(await Promise.all(a.map(async Z=>{const Y=new nr(c[Z].canvas);return Y.flipY=!1,[Z,Y]})));let S;const R=i?"transparent":"opaque";return r?(S=new gu({map:x.diffuse,transparent:i}),A==null&&(A=new cB),A.uniforms.map=x.diffuse,A.uniforms.shadeMultiplyTexture=x.diffuse,A.transparent=i,s&&!i&&(S.alphaTest=.5,A.alphaTest=.5),S.userData.vrmMaterial=A,S.userData.shadeTexture=x.uniformColor,S.name="mToon_"+R,S.map.name=S.name):(S=new gu({map:x.diffuse,roughnessMap:x.orm,metalnessMap:x.orm,normalMap:x.normal,transparent:i}),s&&!i&&(S.alphaTest=.5),S.name="standard_"+R,S.roughnessMap!=null&&(S.roughnessMap.name=S.name+"_orm"),S.normalMap!=null&&(S.normalMap.name=S.name+"_normal")),{bakeObjects:l,material:S}};function wH(n){const e=new Map;for(const r of n.skeleton.bones){const i=r.clone(!1);e.set(r,i)}n.skeleton.bones[0].traverse(r=>{if(r.type!=="Bone")return;const i=e.get(r);for(const s of r.children){const o=e.get(s);o&&i.add(o)}});const t=new dc(n.skeleton.bones.map(r=>e.get(r)));return t.boneInverses=n.skeleton.boneInverses,t.pose(),t}function CH(n,e){const t=new Map;new X(-1,1,-1),new Le,new X;let r=0;n.forEach(l=>{if(l.skeleton){var A=wH(l);const c=A.bones;A.bones.forEach((u,f)=>{var d;if(c.indexOf(u)!==-1){const h=t.get(u.name);if(h==null){const p={index:r,boneInverses:A.boneInverses[f],bone:u.clone(!1),parentName:((d=u.parent)==null?void 0:d.type)=="Bone"?u.parent.name:null};r++,t.set(u.name,p)}else u.userData.VRMcolliders!=null&&(h.bone.userData.VRMcolliders==null?h.bone.userData.VRMcolliders=u.userData.VRMcolliders:h.bone.userData.VRMcolliders=[...h.bone.userData.VRMcolliders,...u.userData.VRMcolliders])}})}});const i=[],s=[];[...t.values()].forEach(l=>{var A;if(i.push(l.bone),s.push(l.boneInverses),l.parentName!=null){const c=(A=t.get(l.parentName))==null?void 0:A.bone;c&&c.add(l.bone)}});const a=new dc(i,s);return a.bones.forEach(l=>{var c;const A=(c=l.userData)==null?void 0:c.vrm0RestPosition;A&&l.position.set(-A.x,A.y,-A.z),l.position.set(l.position.x*e,l.position.y*e,l.position.z*e)}),a}function _de(n,e){if(!e.skeleton)return;const t=new Map;if(e.skeleton){e.skeleton.bones.forEach((o,a)=>{const l=n.bones.filter(c=>c.name===o.name),A=l.length>0?n.bones.indexOf(l[0]):-1;t.set(a,A)});const r=[],i=e.geometry.attributes.skinIndex.array;for(let o=0;o<i.length;o++)r[o]=t.get(i[o]);const s=new Uint16Array(r);return new At(s,4,!1)}}function bH(n){const e=[...n];return e.sort(),e.filter((t,r)=>e.indexOf(t)===r)}function Qde(n){const t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(r=>n.constructor===r);return t.length&&t[0]||null}function Pw(n,e){const t=[];for(let s=0;s<e.length;s++){const o=s*n.itemSize;for(let a=0;a<n.itemSize;a++)t[o+a]=n.array[e[s]*n.itemSize+a]}const r=Qde(n.array),i=new r(t);return new At(i,n.itemSize,n.normalized)}function Rde(n,e,t){for(let r=0;r<n.attributes.skinIndex.array.length;r+=4){const i=[n.attributes.skinIndex.array[r],n.attributes.skinIndex.array[r+1],n.attributes.skinIndex.array[r+2],n.attributes.skinIndex.array[r+3]];for(let s=0;s<4;s++){const o=i[s],a=Mde(o,e,t);i[s]=a}n.attributes.skinIndex.array[r]=i[0],n.attributes.skinIndex.array[r+1]=i[1],n.attributes.skinIndex.array[r+2]=i[2],n.attributes.skinIndex.array[r+3]=i[3]}n.attributes.skinIndex.needsUpdate=!0}function Mde(n,e,t){const r=e.bones[n],i=t.bones.find(s=>s.name===r.name);return i?t.bones.indexOf(i):-1}async function Tde(n,e){const{scale:t,isVrm0:r}=e,i=[],s=[];wh(n,"SkinnedMesh").forEach(A=>{const c=A.clone();i.push(c),Array.isArray(A.material)?s.push(...A.material):s.push(A.material)});const a=CH(i,t),l=new Nt;return l.name="AvatarRoot",i.forEach(A=>{var b;const c=new $t,u={};for(const F in A.geometry.attributes){const x=A.geometry.attributes[F];u[F]=x.clone()}if((b=A.userData)!=null&&b.isVRM0)for(let F=0;F<u.position.array.length;F+=3)u.position.array[F]*=-1,u.position.array[F+2]*=-1;const f={attributes:u,morphTargetDictionary:{...A.morphTargetDictionary},morphTargetInfluences:A.morphTargetInfluences||[],index:null,animations:{}},d=new Map([A].map(F=>[F,F.geometry.morphAttributes])),h=new Map([A].map(F=>[F,F.morphTargetDictionary||{}]));if(f.morphAttributes=xH({meshes:[A],sourceMorphAttributes:d,sourceMorphTargetDictionaries:h,destMorphTargetDictionary:f.morphTargetDictionary,scale:t},r),r)for(let F=0;F<f.attributes.position.array.length;F+=3)f.attributes.position.array[F]*=-1,f.attributes.position.array[F+2]*=-1;c.attributes=f.attributes,c.morphAttributes=f.morphAttributes,c.morphTargetsRelative=!0;const p=A.geometry.index.array,m=bH(A.geometry.index.array),g=[];for(let F=0;F<p.length;F++)g[F]=m.indexOf(p[F]);Rde(c,A.skeleton,a);const v=new Uint32Array(g),y=new At(v,1,!1);c.setIndex(y);for(const F in c.attributes)c.setAttribute(F,Pw(c.getAttribute(F),m));for(const F in c.morphAttributes){const x=c.morphAttributes[F];for(let S=0;S<x.length;S++)x[S]=Pw(x[S],m)}const w=c.attributes.position.array;for(let F=0;F<w.length;F+=3)w[F]*=t,w[F+1]*=t,w[F+2]*=t;const C=new Nh(c,A.material);C.name=A.name,C.morphTargetInfluences=f.morphTargetInfluences,C.morphTargetDictionary=f.morphTargetDictionary,C.bind(a),l.add(C),l.add(a.bones[0])}),l.userData.atlasMaterial=s,l}function Nde(n){const e=n.parent.name,t=new X,r=new X;n.getWorldPosition(t),n.getWorldScale(r),n=n.clone();const i=new Le,s=new et;return n.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),n.userData.boneName=e,n.userData.globalPosition=t,n.userData.globalScale=r,n.userData.globalRotationMatrix=i,n}function Dde(n,e){const t=new Nh(e.geometry,e.material),r=n.clone(),i=r.bones.findIndex(d=>d.name===e.userData.boneName),s=e.userData.globalPosition,o=e.userData.globalScale||new X(1,1,1),a=e.userData.globalRotationMatrix;t.add(r.bones[0]);const l=[],A=[],c=t.geometry.attributes.position.array,u=new X,f=e.userData.isVRM0?-1:1;for(let d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2]),u.applyMatrix4(a),c[d]=f*o.x*u.x+s.x,c[d+1]=o.y*u.y+s.y,c[d+2]=f*o.z*u.z+s.z,l.push(i,0,0,0),A.push(1,0,0,0);return t.geometry.setAttribute("skinIndex",new ZC(l,4)),t.geometry.setAttribute("skinWeight",new bn(A,4)),t.bind(r),t}async function kde(n,e){let{transparentColor:t=new Re(1,1,1),mToonAtlasSize:r=4096,mToonAtlasSizeTransp:i=4096,stdAtlasSize:s=4096,stdAtlasSizeTransp:o=4096,exportMtoonAtlas:a=!1,exportStdAtlas:l=!0,isVrm0:A=!1,scale:c=1}=e;const u=wh(n,["Mesh"]);for(let b=0;b<u.length;b++)u[b]=Nde(u[b]);const f=wh(n,["SkinnedMesh"]),d=[...u,...f];a==!1&&l==!1&&(a=!0);let{stdMesh:h,stdTranspMesh:p,mToonMesh:m,mToonTranspMesh:g,requiresTransparency:v}=Jde(d);a==!1&&(h=[...h,...m],p=[...p,...g],g=[],m=[]),l==!1&&(m=[...m,...h],g=[...g,...p],h=[],p=[]);const y=new Nt;y.name="AvatarRoot",y.userData.atlasMaterial=[];const w=CH(d,c),C={standard:{meshArray:h,size:s,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:p,size:o,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:m,size:r,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:g,size:i,isMtoon:!0,transparentMaterial:!0}};for(const b in C){const F=C[b],x=F.meshArray;if(x.length>0){const{bakeObjects:S,material:R}=await Ede({transparentColor:t,atlasSize:F.size,meshes:x,mtoon:F.isMtoon,transparentMaterial:F.transparentMaterial,transparentTexture:v}),Z=S.map(D=>D.mesh),Y=[];Z.forEach(D=>{D.type=="Mesh"&&(D=Dde(w,D)),Y.push(D);const T=D.geometry,V=T.index.array,G=bH(D.geometry.index.array),P=[];for(let oe=0;oe<V.length;oe++)P[oe]=G.indexOf(V[oe]);const U=new Uint32Array(P),H=new At(U,1,!1);T.setIndex(H);for(const oe in T.attributes)T.setAttribute(oe,Pw(T.getAttribute(oe),G));for(const oe in T.morphAttributes){const k=T.morphAttributes[oe];for(let K=0;K<k.length;K++)k[K]=Pw(k[K],G)}T.attributes.uv2||(T.attributes.uv2=T.attributes.uv),D.skeleton!=null&&D.geometry.setAttribute("skinIndex",_de(w,D));for(let oe=0;oe<8;oe++)delete T.attributes[`morphTarget${oe}`],delete T.attributes[`morphNormal${oe}`]});const{dest:Q}=H_({meshes:Y,scale:c},A),B=new $t;if(A)for(let D=0;D<Q.attributes.position.array.length;D+=3)Q.attributes.position.array[D]*=-1,Q.attributes.position.array[D+2]*=-1;B.attributes=Q.attributes,B.morphAttributes=Q.morphAttributes,B.morphTargetsRelative=!0,B.setIndex(Q.index);const E=B.attributes.position.array;for(let D=0;D<E.length;D+=3)E[D]*=c,E[D+1]*=c,E[D+2]*=c;const M=new Nh(B,R);M.name="CombinedMesh_"+b,M.morphTargetInfluences=Q.morphTargetInfluences,M.morphTargetDictionary=Q.morphTargetDictionary,M.bind(w),y.add(M),y.userData.atlasMaterial.push(R)}}return y.add(w.bones[0]),y}function Vde({meshes:n,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:t}){const r=[];return Object.entries(t).map(([i,s])=>{const o=n.find(l=>e.get(l).hasOwnProperty(i)),a=o.morphTargetDictionary[i];r[s]=o.morphTargetInfluences[a]}),r}function Lde({sourceAttributes:n}){const e=new Set,t=Array.from(n.values());t.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map(i=>{r[i]=yH(t.map(s=>s[i]).flat().filter(s=>s!==void 0))}),r}function Pde({sourceMorphTargetDictionaries:n}){const e=new Set;Array.from(n.values()).forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const r={};return Array.from(e.keys()).map((i,s)=>{r[i]=s}),r}function xH({meshes:n,sourceMorphTargetDictionaries:e,sourceMorphAttributes:t,destMorphTargetDictionary:r,scale:i},s=!1){const o=new Set;Array.from(t.values()).forEach(u=>{Object.keys(u).forEach(f=>o.add(f))});const l=Array.from(o),A={};l.forEach(u=>{A[u]=[],Object.entries(r).forEach(([f,d])=>{A[u][d]=[],n.forEach(h=>{let p;const m=e.get(h);if(m.hasOwnProperty(f)&&h.geometry.morphAttributes[u]){const g=m[f];p=h.geometry.morphAttributes[u][g]}else{const g=h.geometry.attributes[u],v=new g.array.constructor(new Array(g.array.length).fill(0));p=new At(v,g.itemSize,g.normalized)}A[u][d].push(p)})})});const c={};return l.forEach(u=>{c[u]=[];for(let f=0;f<Object.entries(r).length;f++){c[u][f]=yH(A[u][f]);const d=c[u][f].array;for(let h=0;h<d.length;h+=3)d[h]*=i,d[h+1]*=i,d[h+2]*=i}}),c}function Wde({meshes:n}){var e=0,t=[];return n.forEach(r=>{const i=r.geometry.index;for(var s=0;s<i.count;++s)t.push(i.getX(s)+e);e+=r.geometry.attributes.position.count}),t}function H_({meshes:n,scale:e},t=!1){let r=0;n.forEach(a=>{var l;if(r+=a.geometry.attributes.uv.count,(l=a.userData)!=null&&l.isVRM0)for(let A=0;A<a.geometry.attributes.position.array.length;A+=3)a.geometry.attributes.position.array[A]*=-1,a.geometry.attributes.position.array[A+2]*=-1});const i={meshes:n,attributes:new Map(n.map(a=>[a,a.geometry.attributes])),morphAttributes:new Map(n.map(a=>[a,a.geometry.morphAttributes])),morphTargetDictionaries:new Map(n.map(a=>[a,a.morphTargetDictionary||{}])),morphTargetInfluences:new Map(n.map(a=>[a,a.morphTargetInfluences||[]]))},s={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};s.attributes=Lde({sourceAttributes:i.attributes});const o=Pde({sourceMorphTargetDictionaries:i.morphTargetDictionaries});return s.morphTargetDictionary=o,s.morphAttributes=xH({meshes:n,sourceMorphAttributes:i.morphAttributes,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o,scale:e},t),s.morphTargetInfluences=Vde({meshes:n,sourceMorphTargetDictionaries:i.morphTargetDictionaries,destMorphTargetDictionary:o}),s.index=Wde({meshes:n}),s.animations={},{source:i,dest:s}}function Ht(n){return n==null?[]:Array.isArray(n)?n:[n]}async function Ode(n,e){const r=await new Qu().load(e);r.encoding=ht,r.flipY=!1,n.traverse(i=>{if(i instanceof Vn){const s=Array.isArray(i.material)?i.material:[i.material];for(let o=0;o<s.length;o++)s[o]instanceof ki?s[o].name.includes("(Outline)")||(console.log(s[o].name),s[o].uniforms.map.value=r,s[o].uniforms.shadeMultiplyTexture.value=r):(s[o].map=r,s[o].emissiveMap=r),s[o].needsUpdate=!0}})}function nc(n){return n.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}function Gde(n){const e=Object.keys(n);return n[e[Math.floor(Math.random()*e.length)]]}function Zde(n){return n[Math.floor(Math.random()*n.length)]}const A1=n=>{const e=[];for(const t in n){const r=n[t].vrm;if(r){const i=r.data.cullingLayer;i>=0&&r.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=r.data.cullingDistance,s.userData.maxCullDistance=r.data.maxCullingDistance,e.push(s)})}}Bde(e)};function Jde(n){const e=[],t=[],r=[],i=[];let s=!1;return n.forEach(o=>{var A;const l=Ht(o.material)[0];l.type=="ShaderMaterial"?l.transparent==!0?(i.push(o),s=!0):(r.push(o),((A=l.uniforms.alphaTest)==null?void 0:A.value)!=0&&(s=!0)):l.transparent==!0?(t.push(o),s=!0):(e.push(o),l.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:t,mToonMesh:r,mToonTranspMesh:i,requiresTransparency:s}}function Hde(n){const e=[],t=[],r=[],i=[],s=[],o=[];return n.forEach(a=>{Ht(a.material).forEach(A=>{A.type=="ShaderMaterial"?A.transparent==!0?o.push(A):A.uniforms.alphaTest.value!=0?s.push(A):i.push(A):A.transparent==!0?r.push(A):A.alphaTest!=0?t.push(A):e.push(A)})}),{stdMats:e,stdCutoutpMats:t,stdTranspMats:r,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:o}}function hk(n,e){n.data==null?n.data=e:n.data={...n.data,...e}}function zde(n,e){if(n.data!=null)return n.data[e]}function Yde(n){const e=zde(n,"cullingMeshes");e&&(e.forEach(t=>{vH(t)}),n.data.cullingMeshes=null)}function wn(n){switch(n){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function Xde(n){const e=n.scene;Yde(n),e.traverse(t=>{t.material&&tU(t.material),t.geometry&&(vH(t),t.geometry.dispose(),t.geometry.disposeBoundsTree())}),e.parent&&e.parent.remove(e),Yh.deepDispose(e),n.expressionManager&&n.expressionManager.expressions.forEach(t=>{t._binds&&t._binds.forEach(r=>{r.primitives&&r.primitives.forEach(i=>{i.geometry.dispose(),i.material&&tU(i.material)})})});for(const t in n)n[t]=null}const tU=n=>{var e,t,r,i,s,o;if(n.length)for(let a=0;a<n.length;++a)tU(n[a]);else(e=n.map)!=null&&e.dispose&&n.map.dispose(),(t=n.normalMap)!=null&&t.dispose&&n.normalMap.dispose(),(r=n.ormMap)!=null&&r.dispose&&n.ormMap.dispose(),(i=n.aoMap)!=null&&i.dispose&&n.aoMap.dispose(),(s=n.roughnessMap)!=null&&s.dispose&&n.roughnessMap.dispose(),(o=n.metalnessMap)!=null&&o.dispose&&n.metalnessMap.dispose(),n.dispose()},Kde=n=>{var t,r,i,s,o,a,l,A,c,u,f;const e=n.humanoid.humanBones;e.upperChest==null&&e.neck.node.parent!=e.chest&&(e.neck.node.parent!=e.chest.node?e.upperChest={node:e.neck.node.parent}:(e.upperChest={node:e.neck.node.parent},e.chest={node:e.neck.node.parent.parent})),e.leftShoulder==null&&(e.leftUpperArm.node.parent!=((t=e.chest)==null?void 0:t.node)&&e.leftUpperArm.node.parent!=((r=e.upperChest)==null?void 0:r.node)&&e.leftUpperArm.node.parent!=((i=e.spine)==null?void 0:i.node)&&e.leftUpperArm.node.parent!=((s=e.neck)==null?void 0:s.node)&&e.leftUpperArm.node.parent!=((o=e.head)==null?void 0:o.node),e.leftShoulder={node:e.leftUpperArm.node.parent}),e.rightShoulder==null&&(e.rightUpperArm.node.parent!=((a=e.chest)==null?void 0:a.node)&&e.rightUpperArm.node.parent!=((l=e.upperChest)==null?void 0:l.node)&&e.rightUpperArm.node.parent!=((A=e.spine)==null?void 0:A.node)&&e.rightUpperArm.node.parent!=((c=e.neck)==null?void 0:c.node)&&e.rightUpperArm.node.parent!=((u=e.head)==null?void 0:u.node),e.rightShoulder={node:e.rightUpperArm.node.parent});for(let d in km)d=d.charAt(0).toLowerCase()+d.slice(1),(f=e[d])!=null&&f.node||(e[d]={node:new Fm}),e[d].node.name=d;for(const d in e){const h=oH[d];h&&e[h].node.add(e[d].node)}};function IH({candidates:n,predicate:e}){if(!n.length)return null;const t=n.shift();return e(t)?t:(n=n.concat(t.children),IH({candidates:n,predicate:e}))}function FH(n,e){return IH({candidates:[n],predicate:t=>t.name===e})}function EH({candidates:n,predicate:e,results:t=[]}){if(!n.length)return t;const r=n.shift();return e(r)&&t.push(r),n=n.concat(r.children),EH({candidates:n,predicate:e,results:t})}function wh(n,e){return EH({candidates:[n],predicate:t=>Ht(e).includes(t.type)})}function jde(n,e,t){const r=wh(n,"SkinnedMesh");return{humanBones:qde(r[0]),materials:n.userData.atlasMaterial,meta:$de(e,t)}}function $de(n,e){return e=e||{},{...{authors:["CharacterStudio"],metaVersion:"1",version:"v1",name:n,licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://m3org.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited"},...e}}function qde(n){const e={};return n.skeleton.bones.map(t=>{for(const r in km)if(km[r]===t.name){e[t.name]={node:t};break}}),e}const ehe={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function UH(n,e,t){var p;const r=mu.findByName(n,"mixamo.com");if(r==null)return null;const i=[],s=new et,o=new et,a=new et,l=new X,A=e.getObjectByName("mixamorigHips").position.y,c=(p=t.humanoid)==null?void 0:p.getNormalizedBoneNode("hips").getWorldPosition(l).y,u=t.scene.getWorldPosition(l).y,d=Math.abs(c-u)/A;return r.tracks.forEach(m=>{const g=m.clone(),v=g.name.split("."),y=v[0],C=ehe[y],b=e.getObjectByName(y);if(C!=null){const F=v[1];if(b.getWorldQuaternion(s).invert(),b.parent.getWorldQuaternion(o),g instanceof _a){for(let x=0;x<g.values.length;x+=4){const S=g.values.slice(x,x+4);a.fromArray(S),a.premultiply(o).multiply(s),a.toArray(S),S.forEach((R,Z)=>{g.values[Z+x]=R})}i.push(new _a(`${C}.${F}`,g.times,g.values.map((x,S)=>{var R;return((R=t.meta)==null?void 0:R.metaVersion)==="0"&&S%2===0?-x:x})))}else if(g instanceof qA){const x=g.values.map((S,R)=>{var Z;return(((Z=t.meta)==null?void 0:Z.metaVersion)==="0"&&R%3!==1?-S:S)*d});i.push(new qA(`${C}.${F}`,g.times,x))}}}),new mu("vrmAnimation",r.duration,i)}const the=new mse,nhe=new B_,c1=.2,rhe=n=>Math.floor(Math.random()*n);class pk{constructor(e,t,r,i,s,o){var a,l,A,c;this.mixer=new uie(t),this.actions=[],this.to=null,this.from=null,this.vrm=r,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=(l=(a=r==null?void 0:r.humanoid)==null?void 0:a.humanBones)==null?void 0:l.neck,this.spineBone=(c=(A=r==null?void 0:r.humanoid)==null?void 0:A.humanBones)==null?void 0:c.spine,this.setAnimations(i),this.to=this.actions[s],o!=-1&&(this.from=this.actions[o],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play()}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,t,r=null){if(r=r??this.animationManager.mouseLookEnabled,this.animations=e,t!=null){if(this.vrm!=null){const i=UH(e,t,this.vrm);i&&(e=[i],this.mixamoModel=t)}}else{const i=[];e.forEach(s=>{i.push(s.clone())}),e=i}r&&e[0].tracks.map((i,s)=>{(i.name==="neck.quaternion"||i.name==="spine.quaternion")&&e[0].tracks.splice(s,1)}),this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let i=0;i<e.length;i++)this.actions.push(this.mixer.clipAction(e[i]));this.actions[0].weight=0,this.actions[0].play()}update(e,t){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(r=>{r.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(r=>{r.weight=0,r.stop()}),this.fadeOutActions=null),this.actions.forEach(r=>{r.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=t),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}dispose(){this.animationManager.disposeAnimation(this)}}class ihe{constructor(){this.animationPaths=null,this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.scale=1,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(t=>{t.setMouseLookEnabled(e)})}setScale(e){this.scale=e}async loadAnimation(e,t=!0,r="",i=""){const s=r+(r!=""?"/":"")+Ht(e)[0];i=i==""?nc(s):i,this.currentAnimationName=i;const a=await(t?the:nhe).loadAsync(s);a.scale.set(this.scale,this.scale,this.scale),this._scaleOffsetHips(a.animations),mu.findByName(a.animations,"mixamo.com")!=null?(this.mixamoModel=a.clone(),this.mixamoAnimations=a.animations):(this.mixamoModel=null,this.animations=a.animations),this.mainControl==null?(this.curAnimID=0,this.lastAnimID=-1,this.mainControl=new pk(this,a,null,a.animations,this.curAnimID,this.lastAnimID),this.animationControls.push(this.mainControl)):this.animationControls.forEach(A=>{A.setAnimations(a.animations,this.mixamoModel,this.mouseLookEnabled)})}getCurrentAnimationName(){return this.currentAnimationName}clearCurrentAnimations(){this.animationPaths=null,this.animationControls=[],this.mainControl=null}storeAnimationPaths(e,t){const r=Ht(e);this.animationPaths=r.map(i=>`${t}/${i}`)}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}_scaleOffsetHips(e){e.forEach(t=>{for(let r=0;r<t.tracks.length;r++){const i=t.tracks[r];if(i.name.includes(".position"))for(let s=0;s<i.values.length/3;s++){const o=s*3;i.values[o]/=this.scale,i.values[o+1]/=this.scale,i.values[o+2]/=this.scale}}})}addVRM(e){if(this.mainControl==null){console.log("No animations preloaded");return}let t=null;if(this.mixamoModel!=null?(t=[UH(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=t)):t=this.animations,!t){console.warn("no animations were preloaded, ignoring");return}const r=new pk(this,e.scene,e,t,this.curAnimID,this.lastAnimID);this.animationControls.push(r),this.started===!1&&(this.started=!0,this.animRandomizer(t[this.curAnimID].duration))}removeVRM(e){const t=this.animationControls.findIndex(r=>r.vrm===e);t!==-1&&this.animationControls.splice(t,1)[0].dispose()}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const t=this.animationControls.indexOf(e);t!=-1&&this.animationControls.splice(t,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=rhe(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(t=>{t.from=t.actions[this.lastAnimID],t.to=t.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,t.to.play(),t.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-c1)},e*1e3)}update(){this.mainControl&&(this.animationControls.forEach(e=>{e.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*c1):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*c1):this.weightOut=0)}}const gk=4096,mk=new X;class she{constructor(){this.renderer=new HC({preserveDrawingBuffer:!0,antialias:!0}),this.renderer.outputEncoding=ht,this.renderer.setSize(gk,gk),this.camera=new _r(30,1,.1,1e3),this.textureLoader=new Qu,this.sceneBackground=new Re(.1,.1,.1)}setCamera(e,t,r=30){this.camera.position.copy(e),this.camera.fov=r,mk.set(0,0,-1),this.cameraDir=mk.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*t,this.camera.position.z-=this.cameraDir.z*t}setBackground(e){Array.isArray(e)?this.setBackgroundColor(e[0],e[1],e[2]):this.setBackgroundImage(e)}setBackgroundColor(e,t,r){this.sceneBackground=new Re(e,t,r)}setBackgroundImage(e){return new Promise(async(t,r)=>{try{const i=await this.texureLoader.load(e);i&&(i.wrapS=i.wrapT=ds,this.sceneBackground=i,t())}catch(i){console.error("Error loading background image: ",i),r(i)}})}saveAsImage(e){let t;try{this.scene.background=this.sceneBackground,this.renderer.render(this.scene,this.camera);const r="image/octet-stream",i="image/png";t=this.renderer.domElement.toDataURL(i);const s=UE.Buffer.from(t.replace(/^data:image\/\w+;base64,/,""),"base64"),o=new Blob([s],{type:"image/jpeg"});return this.saveFile(t.replace(i,r),e),this.scene.background=null,o}catch(r){return console.log(r),!1}}_createImage(e,t){const r=e/t;this.renderer.setSize(e,t),this.camera.aspect=r,this.camera.updateProjectionMatrix();try{this.scene.background=this.sceneBackground,this.renderer.render(this.scene,this.camera);const i="image/png";let s=this.renderer.domElement.toDataURL(i);return this.scene.background=null,s}catch(i){return console.log(i),null}}saveScreenshot(e,t,r){const i=this._createImage(t,r),s="image/octet-stream",o="image/png";this.saveFile(i.replace(o,s),e+".png")}getScreenshotImage(e,t){const r=this._createImage(e,t),i=new Image;return i.src=r,i}getScreenshotTexture(e,t){const r=this.getScreenshotImage(e,t),i=new nr(r);return i.needsUpdate=!0,i}getScreenshotBlob(e,t){const r=this._createImage(e,t),i=UE.Buffer.from(r.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,t){const r=document.createElement("a");typeof r.download=="string"?(document.body.appendChild(r),r.download=t,r.href=e,r.click(),document.body.removeChild(r)):window.open(e,"_blank").document.write("<title>"+t+"</title><img src='"+e+"'/>")}}const ohe=2;class ahe{constructor(e=.5,t=.5,r=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new $re,this.closeTime=e,this.openTime=t,this.continuity=r,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addVRM(e){this.vrmBlinkers.push(e)}removeVRM(e){const t=this.vrmBlinkers.indexOf(e);t!==-1&&this.vrmBlinkers.splice(t,1)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=ohe,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(ai.Blink,1-this._eyeOpen),e.expressionManager.update()})}}var Tn;(function(n){n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.LINEAR=9729]="LINEAR",n[n.REPEAT=10497]="REPEAT"})(Tn||(Tn={}));const nU="blend_",vk="vrmColliderSphere";function lhe(n){return{title:n.name,version:"v0",author:n.authors[0]||"",contactInformation:n.contactInformation,allowedUserName:n.allowedUserName,violentUssageName:n.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:n.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:"Disallow"}}function Ahe(n){const e=[];for(const t in n.humanBones)e.push({bone:t,node:n.humanBones[t].node});return{humanBones:e}}function che(n){switch(n){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return n}}function uhe(n){if(n.includes("Thumb")){if(n.includes("Metacarpal"))return n.replace("Metacarpal","Proximal");if(n.includes("Proximal"))return n.replace("Proximal","Intermediate")}return n}class fhe{parse(e,t,r,i,s,o,a){var qe;const l=lhe(e.meta),A=Ahe(e.humanoid),c=e.materials,u=[],f={generator:"UniGLTF-2.0.0",version:"2.0"};if(t)if(A)if(l){if(!c)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=c.filter((O,J,ae)=>ae.findIndex(de=>de.name===O.name.replace(" (Outline)",""))===J).map(O=>O),h=d.map(O=>O.name),p=r?{name:"icon",imageBitmap:r.image}:null,m=d.filter(O=>O.map).map(O=>{if(!O.map)throw new Error(O.name+" map is null");return{name:O.name,imageBitmap:O.map.image}}),g=d.filter(O=>O.userData.shadeTexture).map(O=>{if(!O.userData.shadeTexture)throw new Error(O.userData.shadeTexture+" map is null");return{name:O.name+"_shade",imageBitmap:O.userData.shadeTexture.image}}),v=d.filter(O=>O.roughnessMap).map(O=>O.roughnessMap?{name:O.name+"_orm",imageBitmap:O.roughnessMap.image}:null),y=d.filter(O=>O.roughnessMap).map(O=>O.normalMap?{name:O.name+"_normal",imageBitmap:O.normalMap.image}:null),w=[...m,...g,...v,...y].filter(O=>O!==null),C=mhe(w,p),b=vhe(C),F=yhe(C),x=ghe(d,w),S=t.children.filter(O=>O.children.length>0&&O.children[0].type===Ai.Bone)[0],R=SH(S).filter(O=>O.name!==vk),Z=R.map(O=>O.name),Y=R.map(O=>({children:O.children.filter(J=>J.name!==vk).map(J=>Z.indexOf(J.name)),name:O.name,rotation:[O.quaternion.x,O.quaternion.y,O.quaternion.z,O.quaternion.w],scale:[O.scale.x,O.scale.y,O.scale.z],translation:[O.position.x,O.position.y,O.position.z]})),Q=[],B=t.children.filter(O=>O.type===Ai.Group||O.type===Ai.SkinnedMesh),E=[];B.forEach(O=>{const J=O.type===Ai.Group?O.children[0]:O,ae=J.geometry.attributes,de=new oA(ae.position,Tn.FLOAT,kt.POSITION,na.VEC3,J.name,void 0);E.push(de);const ve=E.length-1,L=new oA(ae.normal,Tn.FLOAT,kt.NORMAL,na.VEC3,J.name,void 0);E.push(L),E.push(new oA(ae.uv,Tn.FLOAT,kt.UV,na.VEC2,J.name,void 0)),E.push(new oA(ae.skinWeight,Tn.FLOAT,kt.SKIN_WEIGHT,na.VEC4,J.name,void 0)),E.push(new oA(ae.skinIndex,Tn.UNSIGNED_SHORT,kt.SKIN_INDEX,na.VEC4,J.name,void 0)),(O.type===Ai.Group?O.children.map(N=>N):[O]).forEach(N=>{if(!N.geometry.index)throw new Error(N.name+" geometry.index is null");E.push(new oA(N.geometry.index,Tn.UNSIGNED_INT,kt.INDEX,na.SCALAR,J.name,N.name))}),J.morphTargetDictionary||(J.morphTargetDictionary={},J.morphTargetInfluences=[],J.geometry.morphAttributes={},J.updateMorphTargets()),J.geometry.userData.targetNames=[],console.warn("taking only mesh 0 for morph targets now, take the correct mesh");for(const N in e.expressionManager.expressionMap){const $=e.expressionManager.expressionMap[N],ee=$._binds.map(te=>({mesh:0,index:te.index,weight:te.weight*100}));if(ee.length>0){let te=!1;for(const we in ai)if(N===ai[we]&&N!=="surprised"){u.push({name:N,presetName:che(N),binds:ee,isBinary:$.isBinary}),te=!0;break}te===!1&&u.push({name:N,presetName:"unknown",binds:ee,isBinary:$.isBinary})}}const I=(N,$,ee,te)=>{const we=[],Ce=[];for(let Ee=0;Ee<N.length;Ee+=3){const Ve=N[Ee],_e=N[Ee+1],re=N[Ee+2];(Ve!==0||_e!==0||re!==0)&&(we.push(Ee/3),Ce.push(Ve,_e,re))}if(we.length>0){const Ve=we.length%4,_e=Ve===0?0:4-Ve;if(_e>0)for(let ye=0;ye<_e;ye++)we.push(0),Ce.push(0,0,0);const re={targetMeshDataIndex:ve,count:we.length,indices:new Uint32Array(we),values:new Float32Array(Ce)};E.push(new oA(te,Tn.FLOAT,ee,na.VEC3,J.name,nU+$,re))}};for(const N in J.morphTargetDictionary){J.geometry.userData.targetNames.push(N);const $=J.morphTargetDictionary[N],ee=J.geometry.morphAttributes;I(ee.position[$].array,N,kt.BLEND_POSITION,ae.position),ee.normal&&I(ee.normal[$].array,N,kt.BLEND_NORMAL,ae.normal)}}),B.forEach(O=>{const J=O.type===Ai.Group?O.children[0]:O,ae=new Float32Array(J.skeleton.boneInverses.map(de=>de.elements).flat());E.push(new oA(new At(ae,16),Tn.FLOAT,kt.BIND_MATRIX,na.MAT4,J.name,J.name))}),Q.push(...E.map(O=>({byteOffset:0,componentType:O.valueType,count:O.attribute.count,max:O.max,min:O.min,normalized:!1,type:O.accessorsType})));const M=hhe(B,E,h);B.forEach((O,J)=>{Y.push({mesh:J,name:O.name,rotation:[O.quaternion.x,O.quaternion.y,O.quaternion.z,O.quaternion.w],scale:[O.scale.x,O.scale.y,O.scale.z],skin:J,translation:[O.position.x,O.position.y,O.position.z]})});const D=phe(B,E,Z),T={humanBones:[]};A.humanBones.forEach(O=>{Z.indexOf(O.node.name)!=-1&&T.humanBones.push({bone:uhe(O.bone),node:Z.indexOf(O.node.name),useDefaultValues:!0})});const V={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},G={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},P=[];d.forEach(O=>{O.type=="ShaderMaterial"?P.push(P.push(Object.assign({},V))):P.push(P.push(Object.assign({},G)))});const U=l;i.forEach(O=>{for(let J=0;J<R.length&&R[J].name!==O.name;J++);});const H=[],oe=((qe=B.find(O=>O.isSkinnedMesh))==null?void 0:qe.skeleton)||null;for(let O=0;O<oe.bones.length;O++){const J=oe.bones[O];if(J.userData.VRMcolliders){const ae={node:Z.indexOf(J.name),colliders:[],name:J.name};J.userData.VRMcolliders.forEach(de=>{const ve=de.sphere;ae.colliders.push({radius:ve.radius*o,offset:{x:ve.offset[0]*o,y:ve.offset[1]*o,z:ve.offset[2]*o}})}),H.push(ae)}}console.log("COLLIDER GROUPS",H);const k=O=>{for(let J=0;J<R.length;J++)if(R[J].name===O)return J;return-1},K=O=>{const J=k(O);if(J==-1)return[-1];{const ae=[];return R[J].traverse(ve=>{ve.isBone&&ae.push(k(ve.name))}),ae}},ne=[];i.forEach(O=>{var L;const J=K(O.name),ae=[];if(O.colliderGroups.forEach(_=>{const I=_.colliders[0];if(I!=null){const N=I.parent,$=H.findIndex(ee=>ee.name===N.name);$!=-1?ae.push($):console.warn("No collider group for bone name: ",N.name+" was found")}else console.log("No colliders definition were present in vrm file file for: ",O.name+" spring bones")}),J===[-1]){console.warn("No bone found for spring bone "+O.name);return}let de=k((L=O.center)==null?void 0:L.name);de==-1&&console.warn("no center bone for spring bone "+O.name);const ve=O.settings;ne.push({bones:J,center:de,colliderGroups:ae,dragForce:ve.dragForce,gravityDir:{x:ve.gravityDir.x,y:ve.gravityDir.y,z:ve.gravityDir.z},gravityPower:ve.gravityPower,hitRadius:ve.hitRadius,stiffiness:ve.stiffness})});const ie={boneGroups:ne,colliderGroups:H};console.log(ie),U.texture=p?C.length-1:void 0;const ue=[];ue.push(...w.map(O=>({buffer:yk(O.imageBitmap),type:kt.IMAGE}))),E.forEach((O,J)=>{O.buffer?ue.push({buffer:O.buffer,typeString:"",type:O.type}):O.sparse&&(ue.push({buffer:O.sparse.indices,typeString:"indices",type:O.type,count:O.sparse.count}),ue.push({buffer:O.sparse.values,typeString:"values",type:O.type}))}),p&&ue.push({buffer:yk(p.imageBitmap),type:kt.IMAGE});let j=0,se=0,ce=0,Be=0;const ge=ue.map(O=>{const J={buffer:0,byteLength:O.buffer.byteLength,byteOffset:j,target:O.type===kt.IMAGE||O.type===kt.BIND_MATRIX?void 0:O.type===kt.INDEX?Tn.ELEMENT_ARRAY_BUFFER:Tn.ARRAY_BUFFER};return j+=O.buffer.byteLength,O.type===kt.IMAGE?(C[se++].bufferView=Be,Be++):E[ce].sparse?(Q[ce].sparse==null&&(Q[ce].sparse={}),O.typeString==="indices"&&(Q[ce].sparse.count=O.count,Q[ce].sparse[O.typeString]={bufferView:Be,byteOffset:0,componentType:Tn.UNSIGNED_INT}),O.typeString==="values"&&(Q[ce].sparse[O.typeString]={bufferView:Be,byteOffset:0}),O.typeString==="values"&&ce++,Be++):(E[ce].bufferIndex=Be,Q[ce].bufferView=Be,ce++,Be++),J}),Fe=Bhe(t,Y);dhe(U);const nt={accessors:Q,asset:f,buffers:[{byteLength:j}],bufferViews:ge,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:u},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new X,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:P,humanoid:T,meta:U,secondaryAnimation:ie,specVersion:"0.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRM"],images:C,materials:x,meshes:M,nodes:Y,samplers:b,scenes:Fe,skins:D,textures:F};console.log(nt);const We=new Bk(iU(JSON.stringify(nt,void 0,2)),"JSON"),Te=new Bk(wg(ue.map(O=>O.buffer)),"BIN\0"),Qe=wg([We.buffer,Te.buffer]),Ge=wg([iU("glTF"),rU(2,4),rU(Qe.byteLength+12,4)]);a(wg([Ge,Qe]))}}function dhe(n){n.title=n.title||"Character",n.version=n.version||"1",n.author=n.author||"Anon",n.contactInformation=n.contactInformation||"",n.reference=n.reference||"",n.allowedUserName=n.allowedUserName||"Everyone",n.violentUssageName=n.violentUssageName||"Disallow",n.sexualUssageName=n.sexualUssageName||"Disallow",n.commercialUssageName=n.commercialUssageName||"Disallow",n.otherPermissionUrl=n.otherPermissionUrl||"",n.licenseName=n.licenseName||"Redistribution_Prohibited",n.otherLicenseUrl=n.otherLicenseUrl||""}function SH(n){return n.children.length<=0?[n]:[n].concat(n.children.map(e=>SH(e)).flat())}function yk(n){const e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.getContext("2d").drawImage(n,0,0);const t=e.toDataURL("image/png"),r=atob(t.split(",")[1]),i=(4-r.length%4)%4,s=new ArrayBuffer(r.length+i),o=new DataView(s);for(let a=0;a<r.length;a++)o.setUint8(a,r.charCodeAt(a));for(let a=r.length;a<r.length+i;a++)o.setUint8(a,0);return s}function rU(n,e){const t=new ArrayBuffer(e);return new DataView(t).setUint32(0,n,!0),t}function iU(n){return new TextEncoder().encode(n).buffer}function wg(n){let e=0;for(let i=0;i<n.length;i++)e+=n[i].byteLength;const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;++i)t.set(new Uint8Array(n[i]),r),r+=n[i].byteLength;return t.buffer}function u1(n,e){const t=e===Tn.UNSIGNED_SHORT?2:4,r=n.array;let i=0;const s=new ArrayBuffer(n.count*n.itemSize*t),o=new DataView(s);for(let a=0;a<n.count;a++)for(let l=0;l<n.itemSize;l++){let A;n.itemSize>4?A=r[a*n.itemSize+l]:l===0?A=n.getX(a):l===1?A=n.getY(a):l===2?A=n.getZ(a):A=n.getW(a),e===Tn.UNSIGNED_SHORT?o.setUint16(i,A,!0):e===Tn.UNSIGNED_INT?o.setUint32(i,A,!0):o.setFloat32(i,A,!0),i+=t}return s}class Bk{constructor(e,t){this.data=e,this.type=t;const r=this.data;this.buffer=wg([rU(r.byteLength,4),iU(this.type),r])}paddingBinary(e,t){const r=Math.ceil(e.byteLength/4)*4;if(e.byteLength===r)return e;const i=new Uint8Array(r);i.set(new Uint8Array(e),0);for(let s=e.byteLength;s<r;s++)i.set(new Uint8Array(t),s);return i.buffer}}class oA{constructor(e,t,r,i,s,o,a){if(this.attribute=e,this.type=r,this.valueType=t,this.accessorsType=i,this.meshName=s,this.name=o,a){const{indices:l,values:A,count:c,targetMeshDataIndex:u}=a,f=new At(l,1),d=new At(A,e.itemSize);this.targetMeshDataIndex=u,this.sparse={targetMeshDataIndex:u,count:c,indices:u1(f,Tn.UNSIGNED_INT),values:u1(d,Tn.FLOAT)},this.max=r===kt.POSITION||r===kt.BLEND_POSITION?[Math.max.apply(null,Array.from(A).filter((h,p)=>p%3===0)),Math.max.apply(null,Array.from(A).filter((h,p)=>p%3===1)),Math.max.apply(null,Array.from(A).filter((h,p)=>p%3===2))]:void 0,this.min=r===kt.POSITION||r===kt.BLEND_POSITION?[Math.min.apply(null,Array.from(A).filter((h,p)=>p%3===0)),Math.min.apply(null,Array.from(A).filter((h,p)=>p%3===1)),Math.min.apply(null,Array.from(A).filter((h,p)=>p%3===2))]:void 0}else this.buffer=u1(this.attribute,this.valueType),this.max=r===kt.POSITION||r===kt.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===2))]:void 0,this.min=r===kt.POSITION||r===kt.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((l,A)=>A%3===2))]:void 0}}var Cd;(function(n){n.MeshBasicMaterial="MeshBasicMaterial",n.MeshStandardMaterial="MeshStandardMaterial",n.MToonMaterial="MToonMaterial"})(Cd||(Cd={}));var na;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT4="MAT4"})(na||(na={}));var kt;(function(n){n.POSITION="POSITION",n.NORMAL="NORMAL",n.UV="UV",n.INDEX="INDEX",n.SKIN_WEIGHT="SKIN_WEIGHT",n.SKIN_INDEX="SKIN_INDEX",n.BLEND_POSITION="BLEND_POSITION",n.BLEND_NORMAL="BLEND_NORMAL",n.BIND_MATRIX="BIND_MATRIX",n.IMAGE="IMAGE"})(kt||(kt={}));var Ai;(function(n){n.Group="Group",n.SkinnedMesh="SkinnedMesh",n.Object3D="Object3D",n.Bone="Bone"})(Ai||(Ai={}));const hhe=(n,e,t)=>n.map(r=>{const i=r.type===Ai.Group?r.children[0]:r,s=r.type===Ai.Group?r.children.map(o=>o):[r];return{name:r.name,primitives:s.map(o=>{const a=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(o.material)?o.material[0].name:o.material.name;return{attributes:{JOINTS_0:a.indexOf(kt.SKIN_INDEX),NORMAL:a.indexOf(kt.NORMAL),POSITION:a.indexOf(kt.POSITION),TEXCOORD_0:a.indexOf(kt.UV),WEIGHTS_0:a.indexOf(kt.SKIN_WEIGHT)},extras:{targetNames:o.geometry.userData.targetNames},indices:e.map(A=>A.type===kt.INDEX&&A.meshName===i.name?A.name:null).indexOf(o.name),material:t.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>{const c=e.map(d=>d.type===kt.BLEND_NORMAL&&d.meshName===i.name?d.name:null).indexOf(nU+A),u=e.map(d=>d.type===kt.BLEND_POSITION&&d.meshName===i.name?d.name:null).indexOf(nU+A),f={};return u!==-1&&(f.POSITION=u),c!==-1&&(f.NORMAL=c),f}):void 0}})}}),phe=(n,e,t)=>n.map(r=>{const i=r.type===Ai.Group?r.children[0]:r;return{inverseBindMatrices:e.map(s=>s.type===kt.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>t.indexOf(s.name)).filter(s=>s!==-1),skeleton:t.indexOf(i.skeleton.bones[0].name)}}),ghe=(n,e)=>n.map(t=>{let r,i=null;if(t=t.userData.vrmMaterial?t.userData.vrmMaterial:t,t.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(h=>h.name).indexOf(t.uniforms.shadeMultiplyTexture.name)},r=t.color?[1,1,1,1]:void 0;else{const d=t;r=d.color?[d.color.r,d.color.g,d.color.b,1]:void 0}let s=-1;t.map?s=e.map(d=>d.name).indexOf(t.name):t.uniforms&&t.uniforms.map&&(s=e.map(d=>d.name).indexOf(t.uniforms.map.name));let o=-1;t.roughnessMap&&(o=e.map(d=>d.name).indexOf(t.name+"_orm"));let a=-1;t.normalMap&&(a=e.map(d=>d.name).indexOf(t.name+"_normal"));const l=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,A={baseColorFactor:r,baseColorTexture:l},c=o>=0?{index:o,texCoord:0}:void 0,u=a>=0?{index:a,texCoord:0}:void 0;if(c)A.metallicRoughnessTexture=c;else{const d=(()=>{switch(t.type){case Cd.MeshStandardMaterial:return t.metalness;case Cd.MeshBasicMaterial:return 0;default:return 0}})(),h=(()=>{switch(t.type){case Cd.MeshStandardMaterial:return t.roughness;case Cd.MeshBasicMaterial:return .9;default:return .9}})();A.metallicFactor=d,A.roughnessFactor=h}const f={alphaCutoff:t.alphaTest>0?t.alphaTest:void 0,alphaMode:t.transparent?"BLEND":t.alphaTest>0?"MASK":"OPAQUE",doubleSided:t.side===2,extensions:t.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:t.name,pbrMetallicRoughness:A};return u&&(f.normalTexture=u),f}),mhe=(n,e)=>(e?n.concat(e):n).filter(t=>t&&t.imageBitmap).map(t=>({bufferView:-1,mimeType:"image/png",name:t.name})),vhe=n=>n.map(()=>({magFilter:Tn.LINEAR,minFilter:Tn.LINEAR,wrapS:Tn.REPEAT,wrapT:Tn.REPEAT})),yhe=n=>n.map((e,t)=>({sampler:0,source:t})),Bhe=(n,e)=>{const t=e.map(r=>r.name);return[{nodes:n.children.filter(r=>r.type===Ai.Object3D||r.type===Ai.SkinnedMesh||r.type===Ai.Group||r.type===Ai.Bone).map(r=>t.indexOf(r.name))}]};function _H(){return(_H=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function whe(){return _H.apply(this,arguments)}function Che(n,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}(function(n){n[n.cBASISTexType2D=0]="cBASISTexType2D",n[n.cBASISTexType2DArray=1]="cBASISTexType2DArray",n[n.cBASISTexTypeCubemapArray=2]="cBASISTexTypeCubemapArray",n[n.cBASISTexTypeVideoFrames=3]="cBASISTexTypeVideoFrames",n[n.cBASISTexTypeVolume=4]="cBASISTexTypeVolume"})(oU||(oU={})),function(n){n[n.RAW=0]="RAW",n[n.PNG=1]="PNG",n[n.JPG=2]="JPG"}(aU||(aU={}));class bhe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Op{constructor(e,t,r,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),t=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e+4294967296*t}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let r=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,i)}}let wk=new Uint8Array([0]),Fr=[171,75,84,88,32,50,48,187,13,10,26,10];function Ck(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Buffer.from(n)}function bk(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function Gp(n){let e=0;for(let i of n)e+=i.byteLength;let t=new Uint8Array(e),r=0;for(let i of n)t.set(new Uint8Array(i),r),r+=i.byteLength;return t}function xhe(n){let e=new Uint8Array(n.buffer,n.byteOffset,Fr.length);if(e[0]!==Fr[0]||e[1]!==Fr[1]||e[2]!==Fr[2]||e[3]!==Fr[3]||e[4]!==Fr[4]||e[5]!==Fr[5]||e[6]!==Fr[6]||e[7]!==Fr[7]||e[8]!==Fr[8]||e[9]!==Fr[9]||e[10]!==Fr[10]||e[11]!==Fr[11])throw Error("Missing KTX 2.0 identifier.");let t=new bhe,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new Op(n,Fr.length,r,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32();let s=i._nextUint32();t.supercompressionScheme=i._nextUint32();let o=i._nextUint32(),a=i._nextUint32(),l=i._nextUint32(),A=i._nextUint32(),c=i._nextUint64(),u=i._nextUint64(),f=new Op(n,Fr.length+r,24*s,!0);for(let M=0;M<s;M++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});let d=new Op(n,o,a,!0),h={vendorId:d._skip(4)._nextUint16(),descriptorType:d._nextUint16(),versionNumber:d._nextUint16(),descriptorBlockSize:d._nextUint16(),colorModel:d._nextUint8(),colorPrimaries:d._nextUint8(),transferFunction:d._nextUint8(),flags:d._nextUint8(),texelBlockDimension:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],bytesPlane:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],samples:[]},p=(h.descriptorBlockSize/4-6)/4;for(let M=0;M<p;M++){let D={bitOffset:d._nextUint16(),bitLength:d._nextUint8(),channelType:d._nextUint8(),samplePosition:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&D.channelType?(D.sampleLower=d._nextInt32(),D.sampleUpper=d._nextInt32()):(D.sampleLower=d._nextUint32(),D.sampleUpper=d._nextUint32()),h.samples[M]=D}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(h);let m=new Op(n,l,A,!0);for(;m._offset<A;){let M=m._nextUint32(),D=m._scan(M),T=bk(D);if(t.keyValue[T]=m._nextUint8Array(M-D.byteLength-1),T.match(/^ktx/i)){let G=bk(t.keyValue[T]);t.keyValue[T]=G.substring(0,G.lastIndexOf("\0"))}let V=M%4?4-M%4:0;m._skip(V)}if(u<=0)return t;let g=new Op(n,c,u,!0),v=g._nextUint16(),y=g._nextUint16(),w=g._nextUint32(),C=g._nextUint32(),b=g._nextUint32(),F=g._nextUint32(),x=[];for(let M=0;M<s;M++)x.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});let S=c+g._offset,R=S+w,Z=R+C,Y=new Uint8Array(n.buffer,n.byteOffset+S,w),Q=new Uint8Array(n.buffer,n.byteOffset+R,C),B=new Uint8Array(n.buffer,n.byteOffset+Z,b),E=new Uint8Array(n.buffer,n.byteOffset+(Z+b),F);return t.globalData={endpointCount:v,selectorCount:y,imageDescs:x,endpointsData:Y,selectorsData:Q,tablesData:B,extendedData:E},t}function sU(){return(sU=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}let Ihe={keepWriter:!1};function Fhe(n,e={}){e=sU({},Ihe,e);let t=new ArrayBuffer(0);if(n.globalData){let v=new ArrayBuffer(20+20*n.globalData.imageDescs.length),y=new DataView(v);y.setUint16(0,n.globalData.endpointCount,!0),y.setUint16(2,n.globalData.selectorCount,!0),y.setUint32(4,n.globalData.endpointsData.byteLength,!0),y.setUint32(8,n.globalData.selectorsData.byteLength,!0),y.setUint32(12,n.globalData.tablesData.byteLength,!0),y.setUint32(16,n.globalData.extendedData.byteLength,!0);for(let w=0;w<n.globalData.imageDescs.length;w++){let C=n.globalData.imageDescs[w];y.setUint32(20+20*w+0,C.imageFlags,!0),y.setUint32(20+20*w+4,C.rgbSliceByteOffset,!0),y.setUint32(20+20*w+8,C.rgbSliceByteLength,!0),y.setUint32(20+20*w+12,C.alphaSliceByteOffset,!0),y.setUint32(20+20*w+16,C.alphaSliceByteLength,!0)}t=Gp([v,n.globalData.endpointsData,n.globalData.selectorsData,n.globalData.tablesData,n.globalData.extendedData])}let r=[],i=n.keyValue;for(let v in e.keepWriter||(i=sU({},n.keyValue,{KTXwriter:"KTX-Parse v0.6.0"})),i){let y=i[v],w=Ck(v),C=typeof y=="string"?Gp([Ck(y),wk]):y,b=w.byteLength+1+C.byteLength,F=b%4?4-b%4:0;r.push(Gp([new Uint32Array([b]),w,wk,C,new Uint8Array(F).fill(0)]))}let s=Gp(r);if(n.dataFormatDescriptor.length!==1||n.dataFormatDescriptor[0].descriptorType!==0)throw Error("Only BASICFORMAT Data Format Descriptor output supported.");let o=n.dataFormatDescriptor[0],a=new ArrayBuffer(28+16*o.samples.length),l=new DataView(a),A=24+16*o.samples.length;if(l.setUint32(0,a.byteLength,!0),l.setUint16(4,o.vendorId,!0),l.setUint16(6,o.descriptorType,!0),l.setUint16(8,o.versionNumber,!0),l.setUint16(10,A,!0),l.setUint8(12,o.colorModel),l.setUint8(13,o.colorPrimaries),l.setUint8(14,o.transferFunction),l.setUint8(15,o.flags),!Array.isArray(o.texelBlockDimension))throw Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,o.texelBlockDimension[0]),l.setUint8(17,o.texelBlockDimension[1]),l.setUint8(18,o.texelBlockDimension[2]),l.setUint8(19,o.texelBlockDimension[3]);for(let v=0;v<8;v++)l.setUint8(20+v,o.bytesPlane[v]);for(let v=0;v<o.samples.length;v++){let y=o.samples[v],w=28+16*v;if(y.channelID)throw Error("channelID has been renamed to channelType.");l.setUint16(w+0,y.bitOffset,!0),l.setUint8(w+2,y.bitLength),l.setUint8(w+3,y.channelType),l.setUint8(w+4,y.samplePosition[0]),l.setUint8(w+5,y.samplePosition[1]),l.setUint8(w+6,y.samplePosition[2]),l.setUint8(w+7,y.samplePosition[3]),64&y.channelType?(l.setInt32(w+8,y.sampleLower,!0),l.setInt32(w+12,y.sampleUpper,!0)):(l.setUint32(w+8,y.sampleLower,!0),l.setUint32(w+12,y.sampleUpper,!0))}let c=Fr.length+68+24*n.levels.length,u=c+a.byteLength,f=t.byteLength>0?u+s.byteLength:0;f%8&&(f+=8-f%8);let d=[],h=new DataView(new ArrayBuffer(24*n.levels.length)),p=(f||u+s.byteLength)+t.byteLength;for(let v=0;v<n.levels.length;v++){let y=n.levels[v];d.push(y.levelData),h.setBigUint64(24*v+0,BigInt(p),!0),h.setBigUint64(24*v+8,BigInt(y.levelData.byteLength),!0),h.setBigUint64(24*v+16,BigInt(y.uncompressedByteLength),!0),p+=y.levelData.byteLength}let m=new ArrayBuffer(68),g=new DataView(m);return g.setUint32(0,n.vkFormat,!0),g.setUint32(4,n.typeSize,!0),g.setUint32(8,n.pixelWidth,!0),g.setUint32(12,n.pixelHeight,!0),g.setUint32(16,n.pixelDepth,!0),g.setUint32(20,n.layerCount,!0),g.setUint32(24,n.faceCount,!0),g.setUint32(28,n.levels.length,!0),g.setUint32(32,n.supercompressionScheme,!0),g.setUint32(36,c,!0),g.setUint32(40,a.byteLength,!0),g.setUint32(44,u,!0),g.setUint32(48,s.byteLength,!0),g.setBigUint64(52,BigInt(t.byteLength>0?f:0),!0),g.setBigUint64(60,BigInt(t.byteLength),!0),new Uint8Array(Gp([new Uint8Array(Fr).buffer,m,h.buffer,a,s,new ArrayBuffer(f>0?f-(u+s.byteLength):0),t,...d]))}var oU,aU,Ehe={enableDebug:!1,isUASTC:!0,isKTX2File:!0,isInputSRGB:!0,generateMipmap:!0,needSupercompression:!0,isSetKTX2SRGBTransferFunc:!0},lU=new OffscreenCanvas(128,128),xk=lU.getContext("2d",{willReadFrequently:!0}),QH=typeof document>"u";function Uhe(n){return createImageBitmap(n).then(function(e){return lU.width=e.width,lU.height=e.height,xk.drawImage(e,0,0),xk.getImageData(0,0,e.width,e.height)})}function RH(n,e){return e===void 0&&(e={}),_he().then(function(t){var r=new t.BasisEncoder;return She(e,r),r.setTexType(oU.cBASISTexType2D),Che(n,ArrayBuffer)&&(n=new Blob([n])),Uhe(n).then(function(i){r.setSliceSourceImage(0,new Uint8Array(i.data),i.width,i.height,aU.RAW);var s=new Uint8Array(10485760),o=r.encode(s);if(o===0)throw"encode failed";var a=new Uint8Array(s.buffer,0,o),l=xhe(s);if(e.kvData){for(var A in e.kvData)l.keyValue[A]=e.kvData[A];a=Fhe(l,{keepWriter:!0})}return a})})}function She(n,e){n===void 0&&(n={}),(n=whe({},Ehe,n)).enableDebug!==void 0&&e.setDebug(n.enableDebug),n.isUASTC!==void 0&&e.setUASTC(n.isUASTC),n.isKTX2File!==void 0&&e.setCreateKTX2File(n.isKTX2File),n.isSetKTX2SRGBTransferFunc!==void 0&&e.setKTX2SRGBTransferFunc(n.isSetKTX2SRGBTransferFunc),n.generateMipmap!==void 0&&e.setMipGen(n.generateMipmap),n.isYFlip!==void 0&&e.setYFlip(n.isYFlip),n.qualityLevel!==void 0&&e.setQualityLevel(n.qualityLevel),n.compressionLevel!==void 0&&e.setCompressionLevel(n.compressionLevel),n.needSupercompression!==void 0&&e.setKTX2UASTCSupercompression(n.needSupercompression),n.isNormalMap!==void 0&&e.setNormalMap(n.isNormalMap)}var f1=null;function _he(){return f1||(f1=new Promise(function(n,e){QH?(importScripts("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js"),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()}).then(function(t){BASIS({wasmBinary:t}).then(function(r){r.initializeBasis(),n(r)}).catch(e)}).catch(e)):Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js").then(function(t){return t.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(t){return t.arrayBuffer()})]).then(function(t){var r=t[0],i=t[1],s=document.createElement("script");s.onload=function(){BASIS({wasmBinary:i}).then(function(o){o.initializeBasis(),n(o)}).catch(e)},s.src=URL.createObjectURL(new Blob([r])),s.onerror=e,document.body.appendChild(s)}).catch(e)})),f1}QH&&self.addEventListener("message",function(n){RH(n.data).then(function(e){self.postMessage(e)}).catch(function(e){self.postMessage({error:e})})});function MH(n){const e=n.clone(),t=[];return n.traverse(r=>{r.userData.origIndexBuffer&&t.push(r.userData.origIndexBuffer)}),e.traverse(r=>{r.userData.origIndexBuffer&&(r.userData.origIndexBuffer=t.shift())}),e}function Qhe(n){const e=MH(n);let t;const r=[];e.traverse(s=>{if(!t&&s.isSkinnedMesh&&(t=wH(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=t,r.push(s),Array.isArray(s.material)){const o=s.material;s.material=new gu,s.material.map=o[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new Qr;return r.forEach(s=>{i.add(s)}),i.add(t.bones[0]),i}async function Rhe(n,e,t){const r=await z_(n,t),i=await TH(r,e,t);return new Blob([i],{type:"model/gltf-binary"})}function Mhe(n,e,t,r){return new Promise(async(i,s)=>{const o=`${t&&t!==""?t:"AvatarCreatorModel"}`;The(n,e,r).then(a=>{DH(a,`${o}.vrm`),i()})})}async function The(n,e,t){const r=await z_(n,t);return TH(r,e,t)}function z_(n,e){const t=MH(n),{createTextureAtlas:r=!0}=e;return r?kde(t,e):(console.log("no atlas"),Tde(t,e))}async function Nhe(n,e="",t){const r=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=t,s=i?await z_(n,t):Qhe(n);Dhe(s).then(o=>{if(o instanceof ArrayBuffer)DH(o,`${r}.glb`);else{const a=JSON.stringify(o,null,2);Vhe(a,`${r}.gltf`)}})}function Dhe(n){return new Promise(e=>new T_().parse(n,r=>{e(r)},r=>{console.error("Error parsing",r)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function khe(n){var r,i;const e=[];for(const s in n)if(((i=(r=n[s])==null?void 0:r.vrm)==null?void 0:i.springBoneManager)!=null){const o=n[s].vrm.springBoneManager.joints;for(const a of o)e.some(A=>A.name===a.bone.name)||e.push({name:a.bone.name,settings:a.settings,bone:a.bone,colliderGroups:a.colliderGroups,center:a.center})}const t=[];return e.forEach(s=>{for(const o in km)if(s.bone.parent.name==km[o]){t.push(s);break}}),t}function TH(n,e,t){const{screenshot:r=null,isVrm0:i=!1,vrmMeta:s=null,scale:o=1}=t;return new Promise(async a=>{const l=i?new fhe:new Sfe,A={...Phe(e),...jde(n,"CharacterCreator",s)};if(t.ktxCompression){console.log("ktx compression");for(let h=0;h<A.materials.length;h++){const p=A.materials[h];if(p.map&&p.map.isTexture){const m=p.map;if(m.source&&m.source.isSource&&m.userData.mimeType==="image/png"){const v="image/ktx2";m.userData.mimeType=v,m.source.mimeType=v;const y=m.source,w=document.createElement("canvas");w.width=y.width,w.height=y.height,w.getContext("bitmaprenderer").transferFromImageBitmap(y);const b=await new Promise(R=>w.toBlob(R)),F=await RH(b),x=new Blob(F,{type:"image/ktx2"}),S=await createImageBitmap(x);A.materials[h].map.source=S}}}}let c;n.traverse(h=>{h.isSkinnedMesh&&(c=h)}),(()=>{for(let h=0;h<c.skeleton.bones.length;h++){const p=c.skeleton.bones[h];p.position.x*=-1,p.position.z*=-1}c.skeleton.bones.forEach(h=>{h.updateMatrix(),h.updateMatrixWorld()}),c.skeleton.calculateInverses(),c.skeleton.computeBoneTexture(),c.skeleton.update()})(),c.skeleton.bones.filter(h=>h.name==="head")[0];const f=khe(e),d=[];l.parse(A,n,r,f,d,o,h=>{a(h)})})}function NH(n,e){const t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(n),t.download=e,t.click()}function Vhe(n,e){NH(new Blob([n],{type:"text/plain"}),e)}function DH(n,e){NH(Lhe(n),e)}function Lhe(n){return new Blob([n],{type:"application/octet-stream"})}function Phe(n){for(const e in n)if(n[e].vrm)return n[e].vrm}const Whe=n=>{var e,t;(e=n.parser.json.extensions)!=null&&e.VRM?Ohe(n):(t=n.parser.json.extensions)!=null&&t.VRMC_vrm?Ghe(n):console.warn("No valid vrm file was provided")},Ohe=n=>{var a,l,A;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=(a=e.extensions)==null?void 0:a.VRM)==null?void 0:l.secondaryAnimation)==null?void 0:A.colliderGroups,s=[],o=r.map(c=>kH(c.name,s));i!=null&&i.forEach(c=>{const u=o[c.node],f=FH(t,u);if(f!=null){const d=c.colliders;f.userData.VRMcolliders=d.map(h=>({sphere:{radius:h.radius,offset:[h.offset.x,h.offset.y,h.offset.z]}}))}})},Ghe=n=>{var l,A,c,u;const e=n.parser.json,t=n.scene,r=e.nodes,i=(A=(l=e.extensions)==null?void 0:l.VRMC_springBone)==null?void 0:A.colliderGroups,s=(u=(c=e.extensions)==null?void 0:c.VRMC_springBone)==null?void 0:u.colliders,o=[],a=r.map(f=>kH(f.name,o));i!=null&&i.forEach(f=>{const d=Ht(f.colliders);let h=-1,p=null;d.forEach(m=>{if(h!=s[m].node){h=s[m].node;const g=a[h];p=FH(t,g),p.userData.VRMcolliders=[]}if(p!=null){const g=s[m].shape;for(const v in g){const y=g[v];y!=null&&y.offset&&(y.offset[0]=-y.offset[0])}p.userData.VRMcolliders.push(g)}else console.error("no node with name "+a[h]+" was found")})})},kH=(n,e)=>{const t=Bt.sanitizeNodeName(n||"");return t in e?t+"_"+ ++e[t]:(e[t]=0,t)},Ww=[0,400,560,2400,4800],Ow=[0,500,700,3e3,6e3],AU=[],rl=[],Y_=1024,VH=44100;for(let n=0;n<Ww.length;n++)rl[n]=Math.round(2*Y_/VH*Ww[n]);for(let n=0;n<Ow.length;n++)AU[n]=Math.round(2*Y_/VH*Ow[n]);class Gw{constructor(e){this.vrm=e;const t=(r,i)=>{requestAnimationFrame(t),this.update(r,i)};t()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=Gw.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=Y_,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(t=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=t,this.meter=Gw.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,t,r;return(e=this.meter)==null||e.shutdown(),this.meter=null,(t=this.mediaStreamSource)==null||t.disconnect(),((r=this.audioContext)==null?void 0:r.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:t}=this.meter;if(t<.01)this.vrm.expressionManager.setValue(ai.Oh,0),this.vrm.expressionManager.setValue(ai.Ah,0),this.vrm.expressionManager.setValue(ai.Ee,0);else{const{ah:r,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(ai.Oh,i),this.vrm.expressionManager.setValue(ai.Ah,r),this.vrm.expressionManager.setValue(ai.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(A){const u=new Float32Array(A.length);for(let f=0;f<A.length;f++)u[f]=.5+(A[f]+20)/140;return u}const t=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(t);const r=e(t),i=new Float32Array(Ww.length),s=new Float32Array(Ow.length);for(let A=0;A<Ww.length-1;A++){for(let c=rl[A];c<=rl[A+1];c++)r[c]>0&&(i[A]+=r[c]);i[A]/=rl[A+1]-rl[A]}for(let A=0;A<Ow.length-1;A++){for(let c=rl[A];c<=rl[A+1];c++)r[c]>0&&(s[A]+=r[c]);i[A]/=rl[A+1]-rl[A],s[A]=s[A]/(AU[A+1]-AU[A])}const o=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),a=3*Math.max(i[3],s[3]),l=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:o,ee:l,ah:a}}static createAudioMeter(e){const t=e.createScriptProcessor(512);return t.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0),s=i.length;let o=0,a;for(let A=0;A<s;A++)a=i[A],Math.abs(a)>=t.clipLevel&&(t.clipping=!0,t.lastClip=window.performance.now()),o+=a*a;const l=Math.sqrt(o/s);t.volume=Math.max(l,t.volume*t.averaging)},t.clipping=!1,t.lastClip=0,t.volume=0,t.clipLevel=.98,t.averaging=.95,t.clipLag=750,t.connect(e.destination),t.checkClipping=()=>t.clipping?(t.lastClip+t.clipLag<window.performance.now()&&(t.clipping=!1),t.clipping):!1,t.shutdown=()=>{t.disconnect(),t.onaudioprocess=null},t}}const d1=new X;class Zhe{constructor(e,t,r){this.bonesInfo=[],this.curMousePos=new Oe,this.hotzoneSection=s(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=r,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",o=>{this.curMousePos={x:o.clientX,y:o.clientY}});const i=document.getElementById(t);i&&(i.addEventListener("mouseleave",()=>{this.onCanvas=!1}),i.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=s()});function s(){const o=window.innerWidth*e/100,a=(window.innerWidth-o)/2;return{xStart:a,xEnd:window.innerWidth-a,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){console.log("is activating"),this.userActivated=e}setCamera(e){this.camera=e}addVRM(e){const t=e.data.isVRM0||!1,r=e.humanoid.humanBones;t||(r.neck.node.userData.inverseLookAt=!0,r.spine.node.userData.inverseLookAt=!0,r.leftEye&&(r.leftEye.node.userData.inverseLookAt=!0),r.rightEye&&(r.rightEye.node.userData.inverseLookAt=!0));const i={vrm:e,neckBone:r.neck.node,spineBone:r.spine.node,leftEyeBone:r.leftEye?r.leftEye.node:null,rightEyeBone:r.rightEye?r.rightEye.node:null};this.bonesInfo.push(i)}removeVRM(e){const t=this.bonesInfo.find(r=>r.vrm===e);if(t){const r=this.bonesInfo.indexOf(t);this.bonesInfo.splice(r,1)}}_getMouseDegrees(e,t,r){let i=0,s=0,o,a,l,A,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(o=c.x/2-e,a=o/(c.x/2)*100,i=r.maxx*a/100*-1),e>=c.x/2&&(o=e-c.x/2,a=o/(c.x/2)*100,i=r.minx*a/100),t<=c.y/2&&(l=c.y/2-t,A=l/(c.y/2)*100,s=r.maxy*.5*A/100*-1),t>=c.y/2&&(l=t-c.y/2,A=l/(c.y/2)*100,s=r.miny*A/100),{x:i,y:s}}lerp(e,t,r){return(1-r)*e+r*t}_moveJoint(e,t){const r=e.userData.inverseLookAt===!0?1:-1;if(Object.keys(e).length!==0){const i=(this.camera.position.y-1.8)*window.innerHeight/2;let s=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-i,t);const o=.8;e.rotation.y=this.lerp(Lt.degToRad(s.x),e.rotation.y,o),e.rotation.x=this.lerp(Lt.degToRad(s.y*r),e.rotation.x,o)}}update(){d1.set(0,0,1),d1.applyQuaternion(this.camera.quaternion);const e=d1.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&this.bonesInfo.forEach(t=>{this._moveJoint(t.neckBone,this.maxLookPercent.neck),this._moveJoint(t.spineBone,this.maxLookPercent.spine),this._moveJoint(t.leftEyeBone,this.maxLookPercent.left),this._moveJoint(t.rightEyeBone,this.maxLookPercent.right)})}}class h1{constructor(e){const{assetsLocation:t,traitsDirectory:r,thumbnailsDirectory:i,traitIconsDirectorySvg:s,animationPath:o,exportScale:a,displayScale:l,initialTraits:A,requiredTraits:c,randomTraits:u,colliderTraits:f,lipSyncTraits:d,blinkerTraits:h,typeRestrictions:p,defaultCullingLayer:m,defaultCullingDistance:g,offset:v,vrmMeta:y,traits:w,textureCollections:C,colorCollections:b,canDownload:F=!0,downloadOptions:x={}}=e;this.assetsLocation=t,this.traitsDirectory=r,this.thumbnailsDirectory=i,this.traitIconsDirectorySvg=s,this.displayScale=l||a||1,this.animationPath=Ht(o),this.requiredTraits=Ht(c),this.randomTraits=Ht(u),this.initialTraits=A||[...new Set(this.requiredTraits.concat(this.randomTraits))],this.colliderTraits=Ht(f),this.lipSyncTraits=Ht(d),this.blinkerTraits=Ht(h),this.typeRestrictions=p,this.defaultCullingLayer=m,this.defaultCullingDistance=g,this.offset=v,this.canDownload=F,this.downloadOptions=x;const S=()=>{const Y=[];for(const Q in w)Y.push(w[Q].trait);return Y};this.allTraits=S(),S(),(()=>{if(this.typeRestrictions)for(const Y in this.typeRestrictions)Ht(this.typeRestrictions[Y]).forEach(B=>{this.typeRestrictions[B]==null&&(this.typeRestrictions[B]=[]),this.typeRestrictions[B].indexOf(Y)==-1&&this.typeRestrictions[B].push(Y)})})(),(()=>{x.vrmMeta=x.vrmMeta||y,x.scale=x.scale||a||1,x.mToonAtlasSize=x.mToonAtlasSize||2048,x.mToonAtlasSizeTransp=x.mToonAtlasSizeTransp||1024,x.stdAtlasSize=x.stdAtlasSize||2048,x.stdAtlasSizeTransp=x.stdAtlasSizeTransp||1024,x.exportStdAtlas=x.exportStdAtlas||!1,x.exportMtoonAtlas=x.exportMtoonAtlas||!0,x.screenshotFaceDistance=x.screenshotFaceDistance||1,x.screenshotFaceOffset=x.screenshotFaceOffset||[0,0,0],x.screenshotResolution=x.screenshotResolution||[512,512],x.screenshotBackground=x.screenshotBackground||[.1,.1,.1],x.screenshotFOV=x.screenshotFOV||75,!x.exportStdAtlas&&!x.exportMtoonAtlas&&(x.exportMtoonAtlas=!0)})(),this.textureTraits=[],this.textureTraitsMap=null,this.createTextureTraits(C),this.colorTraits=[],this.colorTraitsMap=null,this.createColorTraits(b),this.modelTraits=[],this.modelTraitsMap=null,this.createModelTraits(w)}appendManifestData(e,t){e.textureTraits.forEach(r=>{const i=this.getTextureGroup(r.trait);i!=null?i.appendCollection(r,t):(this.textureTraits.push(r),this.textureTraitsMap.set(r.trait,r))}),e.colorTraits.forEach(r=>{const i=this.getColorGroup(r.trait);i!=null?i.appendCollection(r,t):(this.colorTraits.push(r),this.colorTraitsMap.set(r.trait,r))}),e.modelTraits.forEach(r=>{const i=this.getModelGroup(r.trait);i!=null?i.appendCollection(r,t):(this.modelTraits.push(r),this.modelTraitsMap.set(r.trait,r))}),console.log(e)}getExportOptions(){return this.downloadOptions}getGroupModelTraits(){return this.modelTraits}getInitialTraits(){return this.getRandomTraits(this.initialTraits)}getAllTraits(){return this.getRandomTraits(this.allTraits)}isColliderRequired(e){return this.colliderTraits.indexOf(e)!=-1}isLipsyncTrait(e){return this.lipSyncTraits.indexOf(e)!=-1}async getNFTraitOptionsFromURL(e,t){const r=await this._fetchJson(e);return this.getNFTraitOptionsFromObject(r,t)}getNFTraitOptionsFromObject(e,t){const r=e.attributes;if(r){t=Ht(t);const i=[];return r.forEach(s=>{if(t.indexOf(s.trait_type)==-1){const o=this.getTraitOption(s.trait_type,s.value);o&&i.push(o)}}),i}else return console.warn("No attiributes parameter was found in ",e),null}getRandomTraits(e){const t=[];return(e||this.randomTraits).forEach(i=>{const s=this.getRandomTrait(i);s&&t.push(s)}),this._filterTraitOptions(t)}getRandomTrait(e){var r,i;const t=this.getModelGroup(e);if(t){const s=t.getRandomTrait();if(s){const o=(r=s.targetTextureCollection)==null?void 0:r.getRandomTrait(),a=(i=s.targetColorCollection)==null?void 0:i.getRandomTrait();return new p1(s,o,a)}else return null}else return console.warn("No trait group with name "+e+" was found."),null}async _fetchJson(e){return await(await fetch(e)).json()}getTraitOption(e,t){var i,s;const r=this.getModelTrait(e,t);if(r){const o=(i=r.targetTextureCollection)==null?void 0:i.getRandomTrait(),a=(s=r.targetColorCollection)==null?void 0:s.getRandomTrait();return new p1(r,o,a)}return null}_filterTraitOptions(e){const t=[],r=[];for(let i=0;i<e.length;i++){const s=e[i].traitModel;let o=!1;for(let a=0;a<t.length;a++){const l=t[a].traitModel;if(o=s.isRestricted(l),o)break}o?r.push(e[i]):t.push(e[i])}return r.length>0&&console.log("options were filtered to fullfill restrictions: ",r),t}getCustomTraitOption(e,t){const r=this.getCustomModelTrait(e,t);return r?new p1(r,null,null):null}getCustomModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getCustomTrait(t)}getModelTrait(e,t){var r;return(r=this.getModelGroup(e))==null?void 0:r.getTrait(t)}getModelTraits(e){const t=this.getModelGroup(e);return t?t.getCollection():(console.warn("No model group with name "+e),null)}getModelGroup(e){return this.modelTraitsMap.get(e)}getTextureTrait(e,t){var r;return(r=this.getTextureGroup(e))==null?void 0:r.getTrait(t)}getTextureGroup(e){return this.textureTraitsMap.get(e)}getColorTrait(e,t){var r;return(r=this.getColorGroup(e))==null?void 0:r.getTrait(t)}getColorGroup(e){return this.colorTraitsMap.get(e)}getTraitsDirectory(){let e=(this.assetsLocation||"")+(this.traitsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getThumbnailsDirectory(){let e=(this.assetsLocation||"")+(this.thumbnailsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getTraitIconsDirectorySvg(){let e=(this.assetsLocation||"")+(this.traitIconsDirectorySvg||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getAssetsDirectory(){let e=this.assetsLocation||"";return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}createModelTraits(e,t=!1){t&&(this.modelTraits=[]),Ht(e).forEach(r=>{this.modelTraits.push(new Jhe(this,r))}),this.modelTraitsMap=new Map(this.modelTraits.map(r=>[r.trait,r])),this.modelTraits.forEach(r=>{r.restrictedTraits.forEach(i=>{const s=this.getModelGroup(i);console.log(s),s&&s.addTraitRestriction(r.trait)})})}createTextureTraits(e,t=!1){t&&(this.textureTraits=[]),Ht(e).forEach(r=>{this.textureTraits.push(new Hhe(this,r))}),this.textureTraitsMap=new Map(this.textureTraits.map(r=>[r.trait,r]))}createColorTraits(e,t=!1){t&&(this.colorTraits=[]),Ht(e).forEach(r=>{this.colorTraits.push(new zhe(this,r))}),this.colorTraitsMap=new Map(this.colorTraits.map(r=>[r.trait,r]))}}class Jhe{constructor(e,t){const{trait:r,name:i,iconSvg:s,cameraTarget:o={distance:3,height:1},cullingDistance:a,cullingLayer:l,collection:A,restrictedTraits:c=[],restrictedTypes:u=[]}=t;this.manifestData=e,this.isRequired=e.requiredTraits.indexOf(r)!==-1,this.trait=r,this.name=i,this.iconSvg=s,this.fullIconSvg=e.getTraitIconsDirectorySvg()+s,this.restrictedTraits=c,this.restrictedTypes=u,this.cameraTarget=o,this.cullingDistance=a,this.cullingLayer=l,this.collection=[],this.collectionMap=null,this.createCollection(A)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Model with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Model with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}addTraitRestriction(e){this.restrictedTraits.indexOf(e)==-1&&this.restrictedTraits.push(e)}createCollection(e,t=!1){t&&(this.collection=[]),Ht(e).forEach(r=>{this.collection.push(new Ik(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getCustomTrait(e){return new Ik(this,{directory:e,fullDirectory:e,id:"_custom",name:"Custom"})}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}getCollection(){return this.collection}}class Hhe{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Texture with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Texture with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),Ht(e).forEach(r=>{this.collection.push(new Yhe(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class zhe{constructor(e,t){const{trait:r,collection:i}=t;this.manifestData=e,this.trait=r,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,t){e.collection.forEach(r=>{const i=this.getTrait(r.id);if(i!=null)if(t){console.log(`Color with id ${r.id} exists and will be replaced with new one`),this.collectionMap.set(r.id,r);const s=this.collection.indexOf(i);this.collection[s]=r}else console.log(`Color with id ${r.id} exists, skipping`);else this.collection.push(r),this.collectionMap.set(r.id,r)})}createCollection(e,t=!1){t&&(this.collection=[]),Ht(e).forEach(r=>{this.collection.push(new Xhe(this,r))}),this.collectionMap=new Map(this.collection.map(r=>[r.id,r]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class Ik{constructor(e,t){const{id:r,directory:i,name:s,thumbnail:o,cullingDistance:a,cullingLayer:l,type:A=[],textureCollection:c,colorCollection:u,fullDirectory:f,fullThumbnail:d}=t;if(this.manifestData=e.manifestData,this.traitGroup=e,this.id=r,this.directory=i,f)this.fullDirectory=f;else if(Array.isArray(i)){this.fullDirectory=[];for(let h=0;h<i.length;h++)this.fullDirectory[h]=e.manifestData.getTraitsDirectory()+i[h]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+i;this.name=s,this.thumbnail=o,this.fullThumbnail=d||e.manifestData.getTraitsDirectory()+o,this.cullHiddenMeshes=a,this.cullingLayer=l,this.type=A,this.targetTextureCollection=c?e.manifestData.getTextureGroup(c):null,this.targetColorCollection=u?e.manifestData.getColorGroup(u):null,this.targetTextureCollection&&console.log(this.targetTextureCollection)}isRestricted(e){if(e==null)return!1;const t=e.traitGroup.trait;if(this.traitGroup.restrictedTraits.indexOf(t)!=-1)return!0;if(this.type.length>0&&this.manifestData.restrictedTypes>0){haveCommonValue=(i,s)=>{if(i==null||s==null)return!1;for(let o=0;o<i.length;o++)if(s.includes(i[o]))return!0;return!1};const r=this.manifestData.restrictedTypes;traitTypes=Ht(trait.type),this.type.forEach(i=>haveCommonValue(r[i],traitTypes))}return!1}}class Yhe{constructor(e,t){const{id:r,directory:i,fullDirectory:s,name:o,thumbnail:a}=t;if(this.traitGroup=e,this.id=r,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+a;this.name=o,this.thumbnail=a,this.fullThumbnail=e.manifestData.getTraitsDirectory()+a}}class Xhe{constructor(e,t){const{id:r,value:i,name:s}=t;this.traitGroup=e,this.id=r,this.name=s,this.value=i}}class p1{constructor(e,t,r){this.traitModel=e,this.traitTexture=t,this.traitColor=r}}const g1=new Oe,Fk=new gZ,qa=new X;class Khe{constructor(e){this._start(e)}async _start(e){const{parentModel:t=null,renderCamera:r=null,createAnimationManager:i=!0,manifestURL:s=null}=e;this.rootModel=new Nt,this.characterModel=new Nt,this.parentModel=t,t&&t.add(this.rootModel),this.lipSync=null,this.lookAtManager=null,this.animationManager=i?new ihe:null,this.screenshotManager=new she,this.blinkManager=new ahe(.1,.1,.5,5),this._setupScreenshotManager(),this.rootModel.add(this.characterModel),this.renderCamera=r,this.manifestData=null,this.manifest=null,s&&(this.loadManifest(s),this.animationManager.setScale(this.manifestData.displayScale)),this.avatar={},this.traitLoadManager=new jhe;const o=new Qr;o.renderOrder=1e4,this.rootModel.add(o),this.vrmHelperRoot=o}update(){this.lookAtManager!=null&&this.lookAtManager.update()}addLookAtMouse(e,t,r,i=!0){var s;this.lookAtManager=new Zhe(e,t,r),this.lookAtManager.enabled=!0;for(const o in this.avatar)((s=this.avatar[o])==null?void 0:s.vrm)!=null&&this.lookAtManager.addVRM(this.avatar[o].vrm)}toggleCharacterLookAtMouse(e){this.lookAtManager!=null?(this.lookAtManager.setActive(e),this.animationManager&&this.animationManager.enableMouseLook(e)):console.warn("toggleCharacterLookAtMouse() was called, but no lookAtManager exist. Make sure to set it up first with addLookArMous()")}savePortraitScreenshot(e,t,r,i=1,s=0){this.blinkManager.enableScreenshot(),this.characterModel.traverse(o=>{o.isSkinnedMesh&&o.skeleton.bones.filter(l=>l.name==="head")[0].getWorldPosition(qa)}),qa.z+=.3,qa.y+=s,this.screenshotManager.setCamera(qa,i),this.screenshotManager.saveScreenshot(e,t,r),this.blinkManager.disableScreenshot()}cameraRaycastCulling(e,t,r=!0){if(this.renderCamera==null){console.warn("No camera was set in character manager. Please call setRenderCamera(camera) before calling this function");return}const i=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&(A.userData.clippedIndexGeometry=A.geometry.index.clone(),A.geometry.setIndex(A.userData.origIndexBuffer))})},s=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&A.geometry.setIndex(A.userData.clippedIndexGeometry)})},o=(A,c)=>{for(let u=0;u<A.length;u+=3)if(c[0]==A[u]&&c[1]==A[u+1]&&c[2]==A[u+2])return u;return-1},a=(A,c)=>{var p,m;const u=A.object,f=A.face,d=[f.a,f.b,f.c],h=(m=(p=u.userData)==null?void 0:p.clippedIndexGeometry)==null?void 0:m.array;if(h!=null){const g=o(h,d),v=Array.from(h);if(g==-1&&!c){const y=[...v,...d];u.userData.clippedIndexGeometry=new At(new Uint32Array(y),1,!1)}g!=1&&c&&(v.splice(g,3),u.userData.clippedIndexGeometry=new At(new Uint32Array(v),1,!1))}};g1.x=e,g1.y=t,i(),Fk.setFromCamera(g1,this.renderCamera);const l=Fk.intersectObjects(this.characterModel.children);if(l.length>0){const A=l[0];a(A,r)}s()}removeCurrentCharacter(){const e=[];for(const t in this.avatar)e.push(new hB({traitGroupID:t,traitModel:null}));e.forEach(t=>{this._addLoadedData(t)}),this.avatar={}}removeCurrentManifest(){this.removeCurrentCharacter(),this.manifest=null,this.manifestData=null,this.animationManager&&this.animationManager.clearCurrentAnimations()}canDownload(){var e;return((e=this.manifestData)==null?void 0:e.canDownload)||!0}downloadVRM(e,t=null){return new Promise(async(r,i)=>{if(this.canDownload())try{t=t||{};const o={...this.manifestData.getExportOptions(),...t};o.isVrm0=!0,o.screenshot=this._getPortaitScreenshotTexture(!1,o),console.log(o),await Mhe(this.characterModel,this.avatar,e,o),r()}catch(s){console.error("Error downloading VRM:",s.message),i(new Error("Failed to download VRM."))}else{const s="Download not supported.";console.error(s),i(new Error(s))}})}downloadGLB(e,t=null){if(console.log("XXX fix glb downloader"),this.canDownload()){t=t||{};const r={...this.manifestData.getExportOptions(),...t};Nhe(this.characterModel,e,r)}else console.error("Download not supported")}getAvatarSelection(){var t;var e={};for(const r in this.avatar)e[r]={name:this.avatar[r].name,id:(t=this.avatar[r].traitInfo)==null?void 0:t.id};return e}getGroupTraits(){if(this.manifestData)return this.manifestData.getGroupModelTraits()}getCurrentCharacterModel(){return this.characterModel}isTraitGroupRequired(e){const t=this.manifestData.getModelGroup(e);return!!(t!=null&&t.isRequired)}getTraits(e){return this.manifestData?this.manifestData.getModelTraits(e):(console.warn("No manifest file has been loaded, please load it before trait models."),null)}getCurrentTraitID(e){var t,r;return(r=(t=this.avatar[e])==null?void 0:t.traitInfo)==null?void 0:r.id}getCurrentTraitData(e){var t;return(t=this.avatar[e])==null?void 0:t.traitInfo}getCurrentTraitVRM(e){var t;return(t=this.avatar[e])==null?void 0:t.vrm}setParentModel(e){e.add(this.rootModel),this.parentModel=e,this.screenshotManager&&(this.screenshotManager.scene=this.parentModel)}setRenderCamera(e){this.renderCamera=e}loadRandomTraits(){return new Promise(async(e,t)=>{if(this.manifestData){const r=this.manifestData.getRandomTraits();await this._loadTraits(r),e()}else{const r="No manifest was loaded, random traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadRandomTrait(e){return new Promise(async(t,r)=>{if(this.manifestData){const i=this.manifestData.getRandomTrait(e);await this._loadTraits(Ht(i)),t()}else{const i="No manifest was loaded, random traits cannot be loaded.";console.error(i),r(new Error(i))}})}loadTraitsFromNFT(e,t=!0,r=null){return new Promise(async(i,s)=>{try{if(this.manifestData){const o=this.manifestData.getNFTraitOptionsFromURL(e,r);await this._loadTraits(o,t),i()}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}}catch(o){s(o)}})}loadTraitsFromNFTObject(e,t=!0,r=null){return new Promise(async(i,s)=>{if(this.manifestData)try{const o=this.manifestData.getNFTraitOptionsFromObject(e,r);await this._loadTraits(o,t),i()}catch(o){console.error("Error loading traits from NFT object:",o.message),s(new Error("Failed to load traits from NFT object."))}else{const o="No manifest was loaded, NFT traits cannot be loaded.";console.error(o),s(new Error(o))}})}loadInitialTraits(){return new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getInitialTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadAllTraits(){return console.log("load all"),new Promise(async(e,t)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getAllTraits()),e();else{const r="No manifest was loaded, initial traits cannot be loaded.";console.error(r),t(new Error(r))}})}loadTrait(e,t){return new Promise(async(r,i)=>{if(this.manifestData)try{const s=this.manifestData.getTraitOption(e,t);s&&(await this._loadTraits(Ht(s)),r())}catch(s){console.error("Error loading specific trait:",s.message),i(new Error("Failed to load specific trait."))}else{const s="No manifest was loaded, specific trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTrait(e,t){return new Promise(async(r,i)=>{if(this.manifestData)try{const s=this.manifestData.getCustomTraitOption(e,t);s&&(await this._loadTraits(Ht(s)),r())}catch(s){console.error("Error loading custom trait:",s.message),i(new Error("Failed to load custom trait."))}else{const s="No manifest was loaded, custom trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTexture(e,t){return new Promise(async(r,i)=>{var o;const s=(o=this.avatar[e])==null?void 0:o.model;if(s)await Ode(s,t),r();else{const a="No Group Trait with name "+e+" was found.";console.warn(a),i(new Error(a))}})}setTraitColor(e,t){var i;const r=(i=this.avatar[e])==null?void 0:i.model;if(r)try{const s=new Re(t);r.traverse(o=>{o.isMesh&&(o.material.type==="MeshStandardMaterial"?Array.isArray(o.material)?o.material.forEach(a=>{a.color=s}):o.material.color=s:(o.material[0].uniforms.litFactor.value=s,o.material[0].uniforms.shadeColorFactor.value=new Re(s.r*.8,s.g*.8,s.b*.8)))})}catch(s){throw console.error("Error setting trait color:",s.message),new Error("Failed to set trait color.")}else{const s="No Group Trait with name "+e+" was found.";throw console.warn(s),new Error(s)}}removeTrait(e,t=!1){if(this.isTraitGroupRequired(e)&&!t){console.warn(`No trait with name: ${e} is not removable.`);return}if(this.manifestData.getModelGroup(e)){const i=new hB({traitGroupID:e,traitModel:null});this._addLoadedData(i),A1(this.avatar)}else console.warn(`No trait with name: ${e} was found.`)}updateCullHiddenMeshes(){A1(this.avatar)}loadOptimizerManifest(){this.manifest={colliderTraits:["CUSTOM"],traits:[{name:"Custom",trait:"CUSTOM",collection:[]}]},this.manifestData=new h1(this.manifest)}getCurrentOptimizerCharacterModel(){var e;return(e=this.avatar.CUSTOM)==null?void 0:e.vrm}loadOptimizerCharacter(e){return this.loadCustomTrait("CUSTOM",e)}setManifest(e){return this.removeCurrentCharacter(),new Promise(async(t,r)=>{try{if(this.manifest=e,this.manifest){if(this.manifestData=new h1(this.manifest),this.animationManager)try{await this._animationManagerSetup(this.manifest.animationPath,this.manifest.assetsLocation,this.manifestData.displayScale)}catch(i){console.error("Error loading animations: "+i)}t()}else{const i="Failed to fetch or parse the manifest.";console.error(i),r(new Error(i))}}catch(i){console.error("Error setting manifest:",i.message),r(new Error("Failed to set the manifest."))}})}appendManifest(e,t){return new Promise(async(r,i)=>{try{t?this.manifest={...this.manifest||{},manifest:e}:this.manifest={manifest:e,...this.manifest||{}};const s=new h1(e);this.manifestData.appendManifestData(s),r()}catch(s){console.error("Error setting manifest:",s.message),i(new Error("Failed to set the manifest."))}})}loadManifest(e){return new Promise(async(t,r)=>{try{const i=await this._fetchManifest(e);this.setManifest(i).then(()=>{t()})}catch(i){console.error("Error loading manifest:",i.message),r(new Error("Failed to load the manifest."))}})}loadAppendManifest(e,t){return new Promise(async(r,i)=>{try{const s=await this._fetchManifest(e);this.appendManifest(s,t).then(()=>{r()})}catch(s){console.error("Error loading manifest:",s.message),i(new Error("Failed to load the manifest."))}})}async _loadTraits(e,t=!1){await this.traitLoadManager.loadTraitOptions(Ht(e)).then(r=>{t&&this.getGroupTraits().forEach(s=>{r.some(a=>{var l;return((l=a.traitModel)==null?void 0:l.traitGroup.trait)===s.trait})||this.avatar[s.trait]!=null&&r.push(new hB({traitGroupID:s.trait,traitModel:null}))}),r.forEach(i=>{this._addLoadedData(i)}),A1(this.avatar)})}async _animationManagerSetup(e,t,r){const i=Ht(e);this.animationManager&&(this.animationManager.setScale(r),e.length>0&&(this.animationManager.storeAnimationPaths(i,t||""),await this.animationManager.loadAnimation(i,i[0].endsWith(".fbx"),t||"")))}async _fetchManifest(e){return await(await fetch(e)).json()}_getPortaitScreenshotTexture(e,t){this.blinkManager.enableScreenshot(),this.characterModel.traverse(u=>{u.isSkinnedMesh&&u.skeleton.bones.filter(d=>d.name==="head")[0].getWorldPosition(qa)});const{screenshotResolution:r,screenshotFaceDistance:i,screenshotFaceOffset:s,screenshotBackground:o,screenshotFOV:a}=t,l=r[0],A=r[1];qa.x+=s[0],qa.y+=s[1],qa.z+=s[2],this.screenshotManager.setBackground(o),this.screenshotManager.setCamera(qa,i,a);const c=e?this.screenshotManager.getScreenshotBlob(l,A):this.screenshotManager.getScreenshotTexture(l,A);return this.blinkManager.disableScreenshot(),c}_setupScreenshotManager(){this.parentModel?this.screenshotManager.scene=this.parentModel:this.screenshotManager.scene=this.rootModel}_setupWireframeMaterial(e){e.origMat=e.material;const t=()=>{const o=.1+Math.random()*.9,a=.1+Math.random()*(1-.1),l=.1+Math.random()*(1-.1);return new Re(o,a,l)},r=new ss({color:t(),wireframe:!0,wireframeLinewidth:.2}),i=e.material;e.setDebugMode=s=>{s?e.material.length?(e.material[0]=r,e.material[1]=r):e.material=r:e.material=i}}_VRMBaseSetup(e,t,r,i,s){var a,l;let o=e.userData.vrm;return e.userData.vrm==null?(console.error("No valid VRM was provided for "+r+" trait, skipping file."),null):(hk(o,{isVRM0:((a=o.meta)==null?void 0:a.metaVersion)==="0"}),this.manifestData.isColliderRequired(r)&&Whe(e),Kde(o),this.manifestData.isLipsyncTrait(r)&&(this.lipSync=new Gw(o)),this._modelBaseSetup(o,t,r,i,s),((l=o.meta)==null?void 0:l.metaVersion)==="0"&&o.scene.traverse(A=>{if(A.isSkinnedMesh){Yh.rotateVRM0(o),console.log("Loaded VRM0 file ",o);for(let c=0;c<A.skeleton.bones.length;c++)A.skeleton.bones[c].userData.vrm0RestPosition={...A.skeleton.bones[c].position};A.userData.isVRM0=!0}}),o)}_modelBaseSetup(e,t,r,i,s){const o=[],a=Ht(t.cullingIgnore),l=[];t.meshTargets&&Ht(t.meshTargets).map(u=>{const f=e.scene.getObjectByName(u);f!=null&&f.isMesh&&o.push(f)}),e.scene.traverse(u=>{!t.meshTargets&&u.isMesh&&o.push(u),u.frustumCulled=!1,u.isMesh&&(this._setupWireframeMaterial(u),a.indexOf(u.name)===-1&&l.push(u))});const A=this.manifest,c=this.manifestData.getModelGroup(r);hk(e,{cullingLayer:t.cullingLayer!=null?t.cullingLayer:c.cullingLayer!=null?c.cullingLayer:A.defaultCullingLayer!=null?A.defaultCullingLayer:-1,cullingDistance:t.cullingDistance!=null?t.cullingDistance:c.cullingDistance!=null?c.cullingDistance:A.defaultCullingDistance!=null?A.defaultCullingDistance:null,maxCullingDistance:t.maxCullingDistance!=null?t.maxCullingDistance:c.maxCullingDistance!=null?c.maxCullingDistance:A.maxCullingDistance!=null?A.maxCullingDistance:1/0,cullingMeshes:l}),o.map((u,f)=>{if(i){const d=i[f]||i[0];d!=null&&(u.material.type==="MeshStandardMaterial"?Array.isArray(u.material)?u.material.forEach(h=>{h.map=d}):u.material.map=d:console.warn("XXX set material texture to shader material",u.material))}if(s){const d=s[f]||s[0];d!=null&&(u.material[0].uniforms.litFactor.value=d,u.material[0].uniforms.shadeColorFactor.value=new Re(d.r*.8,d.g*.8,d.b*.8))}})}_applyManagers(e){this.blinkManager.addVRM(e),this.lookAtManager&&this.lookAtManager.addVRM(e),this.animationManager&&this.animationManager.addVRM(e)}_displayModel(e){if(e){const t=e.scene;this.characterModel.attach(t)}}_positionModel(e){const t=this.manifestData.displayScale;e.scene.scale.set(t,t,t)}_disposeTrait(e){this.blinkManager.removeVRM(e),this.lookAtManager&&this.lookAtManager.removeVRM(e),this.animationManager&&this.animationManager.removeVRM(e),Xde(e)}_addLoadedData(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;if(r==null){this.avatar[t]&&this.avatar[t].vrm&&(this._disposeTrait(this.avatar[t].vrm),this.avatar[t]={});return}let A=null;o.map(c=>{c!=null&&(A=this._VRMBaseSetup(c,r,t,a,l))}),A!=null&&(this.avatar[t]&&this.avatar[t].vrm&&this._disposeTrait(this.avatar[t].vrm),this._positionModel(A),this._displayModel(A),this._applyManagers(A),console.log(this.characterModel),this.avatar[t]={traitInfo:r,textureInfo:i,colorInfo:s,name:r.name,model:A&&A.scene,vrm:A})}}class jhe{constructor(){const e=new fZ;e.onProgress=(i,s,o)=>{this.setLoadPercentage(Math.round(s/o*100))};const t=new B_(e);t.crossOrigin="anonymous",t.register(i=>new bfe(i,{autoUpdateHumanBones:!0}));const r=new Qu(e);this.loadPercentager=0,this.loadingManager=e,this.gltfLoader=t,this.textureLoader=r,this.isLoading=!1}setLoadPercentage(e){this.loadPercentager=e}loadTraitOptions(e){return new Promise(t=>{this.isLoading=!0;const r=[],i=e.map(async(s,o)=>{var c,u,f;if(s==null){r[o]=null;return}const a=await Promise.all(Ht((c=s==null?void 0:s.traitModel)==null?void 0:c.fullDirectory).map(async d=>{try{return await this.gltfLoader.loadAsync(d)}catch(h){return console.error(`Error loading modelsss ${d}:`,h),null}})),l=await Promise.all(Ht((u=s==null?void 0:s.traitTexture)==null?void 0:u.fullDirectory).map(d=>new Promise(h=>{this.textureLoader.load(d,p=>{p.flipY=!1,p.encoding=ht,h(p)},null,p=>{console.error("error loading texture: ",p),h(null)})}))),A=Ht((f=s==null?void 0:s.traitColor)==null?void 0:f.value).map(d=>new Re(d));r[o]=new hB({traitGroupID:s==null?void 0:s.traitModel.traitGroup.trait,traitModel:s==null?void 0:s.traitModel,textureTrait:s==null?void 0:s.traitTexture,colorTrait:s==null?void 0:s.traitColor,models:a,textures:l,colors:A})});Promise.allSettled(i).then(()=>{this.setLoadPercentage(100),t(r),this.isLoading=!1}).catch(s=>{this.setLoadPercentage(100),console.error("An error occurred:",s),t(r),this.isLoading=!1})})}}class hB{constructor(e){const{traitGroupID:t,traitModel:r,textureTrait:i,colorTrait:s,models:o,textures:a,colors:l}=e;this.traitGroupID=t,this.traitModel=r,this.textureTrait=i,this.colorTrait=s,this.models=o,this.textures=a,this.colors=l}}function $he(n){const e=new gw,t=new pZ(16777215,.5);e.add(t);const r=new m_(16777215,.5);r.position.set(0,1,1),e.add(r);const i=new Nt;e.add(i);const s=new _r(30,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,1.3,2);const o=new Khe({parentModel:e,createAnimationManager:!0,renderCamera:s});o.addLookAtMouse(80,n,s,!0);const a=document.getElementById(n),l=new HC({canvas:a,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),A=new die(s,l.domElement);A.minDistance=1,A.maxDistance=4,A.maxPolarAngle=Math.PI/2,A.enablePan=!0,A.target=new X(0,1,0),A.enableDamping=!0,A.dampingFactor=.1;const c=new X(-.5,0,-.5),u=new X(.5,1.5,.5),f=()=>{l.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()};window.addEventListener("resize",f),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),l.outputEncoding=ht;const d=()=>{requestAnimationFrame(d),A.target.clamp(c,u),A==null||A.update(),o.update(),l.render(e,s)};d();const h=m=>{const g=m.ctrlKey,v=a.getBoundingClientRect(),y=(m.clientX-v.left)/v.width*2-1,w=-((m.clientY-v.top)/v.height)*2+1;o.cameraRaycastCulling(y,w,g)};async function p(){const m="./3d/Platform.glb",v=await new B_().loadAsync(m);i.add(v.scene)}return p(),a.addEventListener("click",h),{scene:e,camera:s,controls:A,characterManager:o,sceneElements:i}}const qr=me.createContext(),qhe=n=>{const[e,t]=me.useState(null),[r,i]=me.useState(null),[s,o]=me.useState(null),[a,l]=me.useState(null),[A,c]=me.useState(null),[u,f]=me.useState(null),[d,h]=me.useState(null),[p,m]=me.useState(null),[g,v]=me.useState(!1);let y=!1,[w,C]=me.useState(!1);me.useEffect(()=>{if(y||w)return;C(!0),y=!0;const{scene:S,camera:R,controls:Z,characterManager:Y,sceneElements:Q}=$he("editor-scene");f(R),c(S),t(Y),i(Q),o(Y.animationManager),l(Y.lookAtManager),h(Z)},[]);const b=S=>{S==null&&(S=!g),v(S),A.traverse(R=>{R.isMesh&&R.setDebugMode&&R.setDebugMode(S)})},F=S=>{S?A.add(r):A.remove(r)},x=S=>{d&&(lE.to(d.target,{x:S.targetX??0,y:S.targetY??0,z:S.targetZ??0,duration:1}),lE.fromTo(d,{maxDistance:d.getDistance(),minDistance:d.getDistance(),minPolarAngle:d.getPolarAngle(),maxPolarAngle:d.getPolarAngle(),minAzimuthAngle:d.getAzimuthalAngle(),maxAzimuthAngle:d.getAzimuthalAngle()},{maxDistance:S.distance,minDistance:S.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{d.minPolarAngle=0,d.maxPolarAngle=3.1415,d.minDistance=.5,d.maxDistance=10,d.minAzimuthAngle=1/0,d.maxAzimuthAngle=1/0}))};return W.jsx(qr.Provider,{value:{manifest:p,setManifest:m,scene:A,characterManager:e,showEnvironmentModels:F,debugMode:g,toggleDebugMode:b,animationManager:s,lookAtManager:a,camera:u,moveCamera:x,controls:d},children:n.children})},epe={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},st={LANDING:"LANDING",CREATE:"CREATE",CLAIM:"CLAIM",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BATCHDOWNLOAD:"BATCHDOWNLOAD",BIO:"BIO",SAVE:"SAVE",MINT:"MINT",CHAT:"CHAT",OPTIMIZER:"OPTIMIZER",BATCHMANIFEST:"BATCHMANIFEST",WALLET:"WALLET"},gi=z.createContext(),tpe=n=>{const[e,t]=z.useState(epe.NORMAL),[r,i]=z.useState(st.LANDING),[s,o]=z.useState(!1),[a,l]=z.useState(!1);return W.jsx(gi.Provider,{value:{viewMode:r,setViewMode:i,isLoading:s,setIsLoading:o,mouseIsOverUI:a,setMouseIsOverUI:l,currentCameraMode:e,setCurrentCameraMode:t},children:n.children})},npe="modulepreload",rpe=function(n){return"/CharacterStudio/"+n},Ek={},ipe=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=rpe(s),s in Ek)return;Ek[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const A=document.createElement("link");if(A.rel=o?"stylesheet":npe,o||(A.as="script",A.crossOrigin=""),A.href=s,document.head.appendChild(A),o)return new Promise((c,u)=>{A.addEventListener("load",c),A.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Zw(){return Zw=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zw.apply(this,arguments)}function spe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ope(n){me.useEffect(n,[])}function ape(n,e){e===void 0&&(e={});var t=e,r=t.volume,i=r===void 0?1:r,s=t.playbackRate,o=s===void 0?1:s,a=t.soundEnabled,l=a===void 0?!0:a,A=t.interrupt,c=A===void 0?!1:A,u=t.onload,f=spe(t,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),d=z.useRef(null),h=z.useRef(!1),p=z.useState(null),m=p[0],g=p[1],v=z.useState(null),y=v[0],w=v[1],C=function(){typeof u=="function"&&u.call(this),h.current&&g(this.duration()*1e3),w(this)};ope(function(){return ipe(()=>import("./howler-9ba4aca9.js").then(R=>R.h),[]).then(function(R){if(!h.current){var Z;d.current=(Z=R.Howl)!==null&&Z!==void 0?Z:R.default.Howl,h.current=!0,new d.current(Zw({src:Array.isArray(n)?n:[n],volume:i,rate:o,onload:C},f))}}),function(){h.current=!1}}),z.useEffect(function(){d.current&&y&&w(new d.current(Zw({src:Array.isArray(n)?n:[n],volume:i,onload:C},f)))},[JSON.stringify(n)]),z.useEffect(function(){y&&(y.volume(i),y.rate(o))},[i,o]);var b=z.useCallback(function(R){typeof R>"u"&&(R={}),!(!y||!l&&!R.forceSoundEnabled)&&(c&&y.stop(),R.playbackRate&&y.rate(R.playbackRate),y.play(R.id))},[y,l,c]),F=z.useCallback(function(R){y&&y.stop(R)},[y]),x=z.useCallback(function(R){y&&y.pause(R)},[y]),S=[b,{sound:y,stop:F,pause:x,duration:m}];return S}const lpe=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],Ape="/CharacterStudio/assets/sounds-3322d50e.mp3",ys=me.createContext(),cpe=n=>{const e=i=>lpe.find(s=>i.test(s.name)),[t]=ape(Ape,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),r=(i,s=0)=>{s===0?t({id:i}):setTimeout(()=>{t({id:i})},s)};return W.jsx(ys.Provider,{value:{playSound:r},children:n.children})};function Ks(n){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(n)}function lo(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function upe(n,e){if(Ks(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function LH(n){var e=upe(n,"string");return Ks(e)=="symbol"?e:String(e)}function Uk(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,LH(r.key),r)}}function Ao(n,e,t){return e&&Uk(n.prototype,e),t&&Uk(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function JA(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cU(n,e){return cU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cU(n,e)}function cb(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&cU(n,e)}function m0(n,e){if(e&&(Ks(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JA(n)}function Ma(n){return Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ma(n)}function Va(n,e,t){return e=LH(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PH(n){if(Array.isArray(n))return n}function fpe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Sk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function WH(n,e){if(n){if(typeof n=="string")return Sk(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sk(n,e)}}function OH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dpe(n){return PH(n)||fpe(n)||WH(n)||OH()}function _k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Qk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_k(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var hpe={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},ppe=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.init(e,t)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=t||hpe,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,r,i,s){return s&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(i).concat(this.prefix," ").concat(t[0])),this.logger[r](t))}},{key:"create",value:function(t){return new n(this.logger,Qk(Qk({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new n(this.logger,t)}}]),n}(),ha=new ppe,rc=function(){function n(){lo(this,n),this.observers={}}return Ao(n,[{key:"on",value:function(t,r){var i=this;return t.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(i){return i!==r})}}},{key:"emit",value:function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(l){l.apply(l,[t].concat(i))})}}}]),n}();function Zp(){var n,e,t=new Promise(function(r,i){n=r,e=i});return t.resolve=n,t.reject=e,t}function Rk(n){return n==null?"":""+n}function gpe(n,e,t){n.forEach(function(r){e[r]&&(t[r]=e[r])})}function X_(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!n||typeof n=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=r(s.shift());!n[o]&&t&&(n[o]=new t),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={}}return i()?{}:{obj:n,k:r(s.shift())}}function Mk(n,e,t){var r=X_(n,e,Object),i=r.obj,s=r.k;i[s]=t}function mpe(n,e,t,r){var i=X_(n,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],r&&(s[o]=s[o].concat(t)),r||s[o].push(t)}function Jw(n,e){var t=X_(n,e),r=t.obj,i=t.k;if(r)return r[i]}function Tk(n,e,t){var r=Jw(n,t);return r!==void 0?r:Jw(e,t)}function GH(n,e,t){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):GH(n[r],e[r],t):n[r]=e[r]);return n}function Cf(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var vpe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function ype(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,function(e){return vpe[e]}):n}var ub=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Bpe=[" ",",","?","!",";"];function wpe(n,e,t){e=e||"",t=t||"";var r=Bpe.filter(function(a){return e.indexOf(a)<0&&t.indexOf(a)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(n);if(!s){var o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(s=!0)}return s}function Nk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function hy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Cpe(n){var e=bpe();return function(){var r=Ma(n),i;if(e){var s=Ma(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return m0(this,i)}}function bpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ZH(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(n){if(n[e])return n[e];for(var r=e.split(t),i=n,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var o=2,a=r.slice(s,s+o).join(t),l=i[a];l===void 0&&r.length>s+o;)o++,a=r.slice(s,s+o).join(t),l=i[a];if(l===void 0)return;if(l===null)return null;if(e.endsWith(a)){if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a]}var A=r.slice(s+o).join(t);return A?ZH(l,A,t):void 0}i=i[r[s]]}return i}}var xpe=function(n){cb(t,n);var e=Cpe(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return lo(this,t),i=e.call(this),ub&&rc.call(JA(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ao(t,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,A=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."));var u=Jw(this.data,c);return u||!A||typeof o!="string"?u:ZH(this.data&&this.data[i]&&this.data[i][s],o,l)}},{key:"addResource",value:function(i,s,o,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},A=this.options.keySeparator;A===void 0&&(A=".");var c=[i,s];o&&(c=c.concat(A?o.split(A):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),Mk(this.data,c,a),l.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(i,s,l,o[l],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var u=Jw(this.data,c)||{};a?GH(u,o,l):u=hy(hy({},u),o),Mk(this.data,c,u),A.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?hy(hy({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(rc),JH={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,r,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(t=o.processors[a].process(t,r,i,s))}),t}};function Dk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ni(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Dk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Dk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ipe(n){var e=Fpe();return function(){var r=Ma(n),i;if(e){var s=Ma(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return m0(this,i)}}function Fpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kk={},Vk=function(n){cb(t,n);var e=Ipe(t);function t(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return lo(this,t),i=e.call(this),ub&&rc.call(JA(i)),gpe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,JA(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=ha.create("translator"),i}return Ao(t,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ns||this.options.defaultNS||[],A=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!wpe(i,o,a);if(A&&!c){var u=i.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:i,namespaces:l};var f=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(f[0])>-1)&&(l=f.shift()),i=f.join(a)}return typeof l=="string"&&(l=[l]),{key:i,namespaces:l}}},{key:"translate",value:function(i,s,o){var a=this;if(Ks(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var l=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,A=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),u=c.key,f=c.namespaces,d=f[f.length-1],h=s.lng||this.language,p=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&h.toLowerCase()==="cimode"){if(p){var m=s.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(d).concat(m).concat(u),usedKey:u,exactUsedKey:u,usedLng:h,usedNS:d}:"".concat(d).concat(m).concat(u)}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:h,usedNS:d}:u}var g=this.resolve(i,s),v=g&&g.res,y=g&&g.usedKey||u,w=g&&g.exactUsedKey||u,C=Object.prototype.toString.apply(v),b=["[object Number]","[object Function]","[object RegExp]"],F=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,S=typeof v!="string"&&typeof v!="boolean"&&typeof v!="number";if(x&&v&&S&&b.indexOf(C)<0&&!(typeof F=="string"&&C==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,v,ni(ni({},s),{},{ns:f})):"key '".concat(u," (").concat(this.language,")' returned an object instead of string.");return l?(g.res=R,g):R}if(A){var Z=C==="[object Array]",Y=Z?[]:{},Q=Z?w:y;for(var B in v)if(Object.prototype.hasOwnProperty.call(v,B)){var E="".concat(Q).concat(A).concat(B);Y[B]=this.translate(E,ni(ni({},s),{joinArrays:!1,ns:f})),Y[B]===E&&(Y[B]=v[B])}v=Y}}else if(x&&typeof F=="string"&&C==="[object Array]")v=v.join(F),v&&(v=this.extendTranslation(v,i,s,o));else{var M=!1,D=!1,T=s.count!==void 0&&typeof s.count!="string",V=t.hasDefaultValue(s),G=T?this.pluralResolver.getSuffix(h,s.count,s):"",P=s["defaultValue".concat(G)]||s.defaultValue;!this.isValidLookup(v)&&V&&(M=!0,v=P),this.isValidLookup(v)||(D=!0,v=u);var U=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,H=U&&D?void 0:v,oe=V&&P!==v&&this.options.updateMissing;if(D||M||oe){if(this.logger.log(oe?"updateKey":"missingKey",h,d,u,oe?P:v),A){var k=this.resolve(u,ni(ni({},s),{},{keySeparator:!1}));k&&k.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var K=[],ne=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ne&&ne[0])for(var ie=0;ie<ne.length;ie++)K.push(ne[ie]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(s.lng||this.language):K.push(s.lng||this.language);var ue=function(se,ce,Be){var ge=V&&Be!==v?Be:H;a.options.missingKeyHandler?a.options.missingKeyHandler(se,d,ce,ge,oe,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(se,d,ce,ge,oe,s),a.emit("missingKey",se,d,ce,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?K.forEach(function(j){a.pluralResolver.getSuffixes(j,s).forEach(function(se){ue([j],u+se,s["defaultValue".concat(se)]||P)})}):ue(K,u,P))}v=this.extendTranslation(v,i,s,g,o),D&&v===u&&this.options.appendNamespaceToMissingKey&&(v="".concat(d,":").concat(u)),(D||M)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(u):u,M?v:void 0):v=this.options.parseMissingKeyHandler(v))}return l?(g.res=v,g):v}},{key:"extendTranslation",value:function(i,s,o,a,l){var A=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,ni(ni({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(ni(ni({},o),{interpolation:ni(ni({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),u;if(c){var f=i.match(this.interpolator.nestingRegexp);u=f&&f.length}var d=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(d=ni(ni({},this.options.interpolation.defaultVariables),d)),i=this.interpolator.interpolate(i,d,o.lng||this.language,o),c){var h=i.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(o.nest=!1)}o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var v=arguments.length,y=new Array(v),w=0;w<v;w++)y[w]=arguments[w];return l&&l[0]===y[0]&&!o.context?(A.logger.warn("It seems you are nesting recursively key: ".concat(y[0]," in key: ").concat(s[0])),null):A.translate.apply(A,y.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var m=o.postProcess||this.options.postProcess,g=typeof m=="string"?[m]:m;return i!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(i=JH.handle(g,i,s,this.options&&this.options.postProcessPassResolved?ni({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,l,A,c,u;return typeof i=="string"&&(i=[i]),i.forEach(function(f){if(!s.isValidLookup(a)){var d=s.extractFromKey(f,o),h=d.key;l=h;var p=d.namespaces;s.options.fallbackNS&&(p=p.concat(s.options.fallbackNS));var m=o.count!==void 0&&typeof o.count!="string",g=m&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),v=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",y=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);p.forEach(function(w){s.isValidLookup(a)||(u=w,!kk["".concat(y[0],"-").concat(w)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(u)&&(kk["".concat(y[0],"-").concat(w)]=!0,s.logger.warn('key "'.concat(l,'" for languages "').concat(y.join(", "),`" won't get resolved as namespace "`).concat(u,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(function(C){if(!s.isValidLookup(a)){c=C;var b=[h];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(b,h,C,w,o);else{var F;m&&(F=s.pluralResolver.getSuffix(C,o.count,o));var x="".concat(s.options.pluralSeparator,"zero");if(m&&(b.push(h+F),g&&b.push(h+x)),v){var S="".concat(h).concat(s.options.contextSeparator).concat(o.context);b.push(S),m&&(b.push(S+F),g&&b.push(S+x))}}for(var R;R=b.pop();)s.isValidLookup(a)||(A=R,a=s.getResource(C,w,R,o))}}))})}}),{res:a,usedKey:l,exactUsedKey:A,usedLng:c,usedNS:u}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),t}(rc);function m1(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Lk=function(){function n(e){lo(this,n),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ha.create("languageUtils")}return Ao(n,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var r=t.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=t.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=m1(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=m1(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=m1(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var r=this;if(!t)return null;var i;return t.forEach(function(s){if(!i){var o=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&t.forEach(function(s){if(!i){var o=r.getLanguagePartFromCode(s);if(r.isSupportedCode(o))return i=o;i=r.options.supportedLngs.find(function(a){if(a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!r)return t.default||[];var i=t[r];return i||(i=t[this.getScriptPartFromCode(r)]),i||(i=t[this.formatLanguageCode(r)]),i||(i=t[this.getLanguagePartFromCode(r)]),i||(i=t.default),i||[]}},{key:"toResolveHierarchy",value:function(t,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],t),o=[],a=function(A){A&&(i.isSupportedCode(A)?o.push(A):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(A)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):typeof t=="string"&&a(this.formatLanguageCode(t)),s.forEach(function(l){o.indexOf(l)<0&&a(i.formatLanguageCode(l))}),o}}]),n}(),Epe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Upe={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},Spe=["v1","v2","v3"],Pk={zero:0,one:1,two:2,few:3,many:4,other:5};function _pe(){var n={};return Epe.forEach(function(e){e.lngs.forEach(function(t){n[t]={numbers:e.nr,plurals:Upe[e.fc]}})}),n}var Qpe=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.languageUtils=e,this.options=t,this.logger=ha.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=_pe()}return Ao(n,[{key:"addRule",value:function(t,r){this.rules[t]=r}},{key:"getRule",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(t,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(t){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return Pk[o]-Pk[a]}).map(function(o){return"".concat(r.options.prepend).concat(o)}):s.numbers.map(function(o){return r.getSuffix(t,o,i)}):[]}},{key:"getSuffix",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(t,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,r){var i=this,s=t.noAbs?t.plurals(r):t.plurals(Math.abs(r)),o=t.numbers[s];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!Spe.includes(this.options.compatibilityJSON)}}]),n}();function Wk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Bo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var Rpe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lo(this,n),this.logger=ha.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Ao(n,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var r=t.interpolation;this.escape=r.escape!==void 0?r.escape:ype,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?Cf(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?Cf(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?Cf(r.nestingPrefix):r.nestingPrefixEscaped||Cf("$t("),this.nestingSuffix=r.nestingSuffix?Cf(r.nestingSuffix):r.nestingSuffixEscaped||Cf(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(t,r,i,s){var o=this,a,l,A,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}var f=function(g){if(g.indexOf(o.formatSeparator)<0){var v=Tk(r,c,g);return o.alwaysFormat?o.format(v,void 0,i,Bo(Bo(Bo({},s),r),{},{interpolationkey:g})):v}var y=g.split(o.formatSeparator),w=y.shift().trim(),C=y.join(o.formatSeparator).trim();return o.format(Tk(r,c,w),C,i,Bo(Bo(Bo({},s),r),{},{interpolationkey:w}))};this.resetRegExp();var d=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,h=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,p=[{regex:this.regexpUnescape,safeValue:function(g){return u(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?u(o.escape(g)):u(g)}}];return p.forEach(function(m){for(A=0;a=m.regex.exec(t);){var g=a[1].trim();if(l=f(g),l===void 0)if(typeof d=="function"){var v=d(t,a,s);l=typeof v=="string"?v:""}else if(s&&Object.prototype.hasOwnProperty.call(s,g))l="";else if(h){l=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=Rk(l));var y=m.safeValue(l);if(t=t.replace(a[0],y),h?(m.regex.lastIndex+=l.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,A++,A>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,l;function A(d,h){var p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;var m=d.split(new RegExp("".concat(p,"[ ]*{"))),g="{".concat(m[1]);d=m[0],g=this.interpolate(g,l);var v=g.match(/'/g),y=g.match(/"/g);(v&&v.length%2===0&&!y||y.length%2!==0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),h&&(l=Bo(Bo({},h),l))}catch(w){return this.logger.warn("failed parsing options string in nesting for key ".concat(d),w),"".concat(d).concat(p).concat(g)}return delete l.defaultValue,d}for(;o=this.nestingRegexp.exec(t);){var c=[];l=Bo({},s),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var f=o[1].split(this.formatSeparator).map(function(d){return d.trim()});o[1]=f.shift(),c=f,u=!0}if(a=r(A.call(this,o[1].trim(),l),l),a&&o[0]===t&&typeof a!="string")return a;typeof a!="string"&&(a=Rk(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),a=""),u&&(a=c.reduce(function(d,h){return i.format(d,h,s.lng,Bo(Bo({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),t=t.replace(o[0],a),this.regexp.lastIndex=0}return t}}]),n}();function Ok(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function el(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ok(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Mpe(n){var e=n.toLowerCase().trim(),t={};if(n.indexOf("(")>-1){var r=n.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)t.currency||(t.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)t.range||(t.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),l=dpe(a),A=l[0],c=l.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");t[A.trim()]||(t[A.trim()]=u),u==="false"&&(t[A.trim()]=!1),u==="true"&&(t[A.trim()]=!0),isNaN(u)||(t[A.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:t}}function bf(n){var e={};return function(r,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=n(i,s),e[o]=a),a(r)}}var Tpe=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lo(this,n),this.logger=ha.create("formatter"),this.options=e,this.formats={number:bf(function(t,r){var i=new Intl.NumberFormat(t,el({},r));return function(s){return i.format(s)}}),currency:bf(function(t,r){var i=new Intl.NumberFormat(t,el(el({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:bf(function(t,r){var i=new Intl.DateTimeFormat(t,el({},r));return function(s){return i.format(s)}}),relativetime:bf(function(t,r){var i=new Intl.RelativeTimeFormat(t,el({},r));return function(s){return i.format(s,r.range||"day")}}),list:bf(function(t,r){var i=new Intl.ListFormat(t,el({},r));return function(s){return i.format(s)}})},this.init(e)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(t,r){this.formats[t.toLowerCase().trim()]=r}},{key:"addCached",value:function(t,r){this.formats[t.toLowerCase().trim()]=bf(r)}},{key:"format",value:function(t,r,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.split(this.formatSeparator),l=a.reduce(function(A,c){var u=Mpe(c),f=u.formatName,d=u.formatOptions;if(s.formats[f]){var h=A;try{var p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},m=p.locale||p.lng||o.locale||o.lng||i;h=s.formats[f](A,m,el(el(el({},d),o),p))}catch(g){s.logger.warn(g)}return h}else s.logger.warn("there was no format function for ".concat(f));return A},t);return l}}]),n}();function Gk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Gk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Npe(n){var e=Dpe();return function(){var r=Ma(n),i;if(e){var s=Ma(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return m0(this,i)}}function Dpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kpe(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}var Vpe=function(n){cb(t,n);var e=Npe(t);function t(r,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return lo(this,t),o=e.call(this),ub&&rc.call(JA(o)),o.backend=r,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=ha.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return Ao(t,[{key:"queueLoad",value:function(i,s,o,a){var l=this,A={},c={},u={},f={};return i.forEach(function(d){var h=!0;s.forEach(function(p){var m="".concat(d,"|").concat(p);!o.reload&&l.store.hasResourceBundle(d,p)?l.state[m]=2:l.state[m]<0||(l.state[m]===1?c[m]===void 0&&(c[m]=!0):(l.state[m]=1,h=!1,c[m]===void 0&&(c[m]=!0),A[m]===void 0&&(A[m]=!0),f[p]===void 0&&(f[p]=!0)))}),h||(u[d]=!0)}),(Object.keys(A).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(A),pending:Object.keys(c),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(f)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),l=a[0],A=a[1];s&&this.emit("failedLoading",l,A,s),o&&this.store.addResourceBundle(l,A,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(u){mpe(u.loaded,[l],A),kpe(u,i),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(function(f){c[f]||(c[f]={});var d=u.loaded[f];d.length&&d.forEach(function(h){c[f][h]===void 0&&(c[f][h]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(u){return!u.done})}},{key:"read",value:function(i,s,o){var a=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:l,wait:A,callback:c});return}this.readingCalls++;var u=function(p,m){if(a.readingCalls--,a.waitingReads.length>0){var g=a.waitingReads.shift();a.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(p&&m&&l<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,l+1,A*2,c)},A);return}c(p,m)},f=this.backend[o].bind(this.backend);if(f.length===2){try{var d=f(i,s);d&&typeof d.then=="function"?d.then(function(h){return u(null,h)}).catch(u):u(null,d)}catch(h){u(h)}return}return f(i,s,u)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var A=this.queueLoad(i,s,a,l);if(!A.toLoad.length)return A.pending.length||l(),null;A.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),l=a[0],A=a[1];this.read(l,A,"read",void 0,void 0,function(c,u){c&&s.logger.warn("".concat(o,"loading namespace ").concat(A," for language ").concat(l," failed"),c),!c&&u&&s.logger.log("".concat(o,"loaded namespace ").concat(A," for language ").concat(l),u),s.loaded(i,c,u)})}},{key:"saveMissing",value:function(i,s,o,a,l){var A=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var u=Zk(Zk({},A),{},{isUpdate:l}),f=this.backend.create.bind(this.backend);if(f.length<6)try{var d;f.length===5?d=f(i,s,o,a,u):d=f(i,s,o,a),d&&typeof d.then=="function"?d.then(function(h){return c(null,h)}).catch(c):c(null,d)}catch(h){c(h)}else f(i,s,o,a,c,u)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),t}(rc);function Jk(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(Ks(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),Ks(e[2])==="object"||Ks(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){t[i]=r[i]})}return t},interpolation:{escapeValue:!0,format:function(e,t,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Hk(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function zk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Xo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lpe(n){var e=Ppe();return function(){var r=Ma(n),i;if(e){var s=Ma(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return m0(this,i)}}function Ppe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function py(){}function Wpe(n){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(n));e.forEach(function(t){typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}var Hw=function(n){cb(t,n);var e=Lpe(t);function t(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(lo(this,t),r=e.call(this),ub&&rc.call(JA(r)),r.options=Hk(i),r.services={},r.logger=ha,r.modules={external:[]},Wpe(JA(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),m0(r,JA(r));setTimeout(function(){r.init(i,s)},0)}return r}return Ao(t,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=Jk();this.options=Xo(Xo(Xo({},a),this.options),Hk(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Xo(Xo({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function l(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?ha.init(l(this.modules.logger),this.options):ha.init(null,this.options);var A;this.modules.formatter?A=this.modules.formatter:typeof Intl<"u"&&(A=Tpe);var c=new Lk(this.options);this.store=new xpe(this.options.resources,this.options);var u=this.services;u.logger=ha,u.resourceStore=this.store,u.languageUtils=c,u.pluralResolver=new Qpe(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),A&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(u.formatter=l(A),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Rpe(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new Vpe(l(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];i.emit.apply(i,[g].concat(y))}),this.modules.languageDetector&&(u.languageDetector=l(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=l(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new Vk(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,y=new Array(v>1?v-1:0),w=1;w<v;w++)y[w-1]=arguments[w];i.emit.apply(i,[g].concat(y))}),this.modules.external.forEach(function(g){g.init&&g.init(i)})}if(this.format=this.options.interpolation.format,o||(o=py),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var d=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];d.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments)}});var h=["addResource","addResources","addResourceBundle","removeResourceBundle"];h.forEach(function(g){i[g]=function(){var v;return(v=i.store)[g].apply(v,arguments),i}});var p=Zp(),m=function(){var v=function(w,C){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),p.resolve(C),o(w,C)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return v(null,i.t.bind(i));i.changeLanguage(i.options.lng,v)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),p}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:py,a=o,l=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return a();var A=[],c=function(d){if(d){var h=s.services.languageUtils.toResolveHierarchy(d);h.forEach(function(p){A.indexOf(p)<0&&A.push(p)})}};if(l)c(l);else{var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(A,this.options.ns,function(f){!f&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(f)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=Zp();return i||(i=this.languages),s||(s=this.options.ns),o||(o=py),this.services.backendConnector.reload(i,s,function(l){a.resolve(),o(l)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&JH.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=Zp();this.emit("languageChanging",i);var l=function(f){o.language=f,o.languages=o.services.languageUtils.toResolveHierarchy(f),o.resolvedLanguage=void 0,o.setResolvedLanguage(f)},A=function(f,d){d?(l(d),o.translator.changeLanguage(d),o.isLanguageChangingTo=void 0,o.emit("languageChanged",d),o.logger.log("languageChanged",d)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(f,function(){return o.t.apply(o,arguments)})},c=function(f){!i&&!f&&o.services.languageDetector&&(f=[]);var d=typeof f=="string"?f:o.services.languageUtils.getBestMatchFromCodes(f);d&&(o.language||l(d),o.translator.language||o.translator.changeLanguage(d),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(d)),o.loadResources(d,function(h){A(h,d)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,l=function A(c,u){var f;if(Ks(u)!=="object"){for(var d=arguments.length,h=new Array(d>2?d-2:0),p=2;p<d;p++)h[p-2]=arguments[p];f=a.options.overloadTranslationOptionHandler([c,u].concat(h))}else f=Xo({},u);f.lng=f.lng||A.lng,f.lngs=f.lngs||A.lngs,f.ns=f.ns||A.ns,f.keyPrefix=f.keyPrefix||o||A.keyPrefix;var m=a.options.keySeparator||".",g;return f.keyPrefix&&Array.isArray(c)?g=c.map(function(v){return"".concat(f.keyPrefix).concat(m).concat(v)}):g=f.keyPrefix?"".concat(f.keyPrefix).concat(m).concat(c):c,a.t(g,f)};return typeof i=="string"?l.lng=i:l.lngs=i,l.ns=s,l.keyPrefix=o,l}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,A=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(d,h){var p=s.services.backendConnector.state["".concat(d,"|").concat(h)];return p===-1||p===2};if(o.precheck){var u=o.precheck(this,c);if(u!==void 0)return u}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!l||c(A,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=Zp();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){a.resolve(),s&&s(l)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=Zp();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],l=i.filter(function(A){return a.indexOf(A)<0});return l.length?(this.options.preload=a.concat(l),this.loadResources(function(A){o.resolve(),s&&s(A)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new Lk(Jk());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:py,a=Xo(Xo(Xo({},this.options),s),{isClone:!0}),l=new t(a);(s.debug!==void 0||s.prefix!==void 0)&&(l.logger=l.logger.clone(s));var A=["store","services","language"];return A.forEach(function(c){l[c]=i[c]}),l.services=Xo({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new Vk(l.services,l.options),l.translator.on("*",function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];l.emit.apply(l,[c].concat(f))}),l.init(a,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(rc);Va(Hw,"createInstance",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Hw(n,e)});var ei=Hw.createInstance();ei.createInstance=Hw.createInstance;ei.createInstance;ei.dir;ei.init;ei.loadResources;ei.reloadResources;ei.use;ei.changeLanguage;ei.getFixedT;ei.t;ei.exists;ei.setDefaultNamespace;ei.hasLoadedNamespace;ei.loadNamespaces;ei.loadLanguages;function Ope(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var Yk={};function uU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&Yk[e[0]]||(typeof e[0]=="string"&&(Yk[e[0]]=new Date),Ope.apply(void 0,e))}function Xk(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function i(){setTimeout(function(){n.off("initialized",i)},0),t()};n.on("initialized",r)}})}function Gpe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var o=function(l,A){var c=e.services.backendConnector.state["".concat(l,"|").concat(A)];return c===-1||c===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,n)&&(!i||o(s,n)))}function Zpe(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return uU("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(s,o){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,n))return!1}}):Gpe(n,e,t)}var Jpe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Hpe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},zpe=function(e){return Hpe[e]},Ype=function(e){return e.replace(Jpe,zpe)};function Kk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jk(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Kk(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var fU={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ype};function Xpe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fU=jk(jk({},fU),n)}function Kpe(){return fU}var HH;function jpe(n){HH=n}function $pe(){return HH}var qpe={type:"3rdParty",init:function(e){Xpe(e.options.react),jpe(e)}},ege=me.createContext(),tge=function(){function n(){lo(this,n),this.usedNamespaces={}}return Ao(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(i){r.usedNamespaces[i]||(r.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function nge(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,A=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){A=!0,i=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(A)throw i}}return a}}function rge(n,e){return PH(n)||nge(n,e)||WH(n,e)||OH()}function $k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function v1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(t),!0).forEach(function(r){Va(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$k(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ige=function(e,t){var r=me.useRef();return me.useEffect(function(){r.current=t?r.current:e},[e,t]),r.current};function zH(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=me.useContext(ege)||{},i=r.i18n,s=r.defaultNS,o=t||i||$pe();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new tge),!o){uU("You will need to pass in an i18next instance by using initReactI18next");var a=function(S,R){return typeof R=="string"?R:R&&Ks(R)==="object"&&typeof R.defaultValue=="string"?R.defaultValue:Array.isArray(S)?S[S.length-1]:S},l=[a,{},!1];return l.t=a,l.i18n={},l.ready=!1,l}o.options.react&&o.options.react.wait!==void 0&&uU("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var A=v1(v1(v1({},Kpe()),o.options.react),e),c=A.useSuspense,u=A.keyPrefix,f=n||s||o.options&&o.options.defaultNS;f=typeof f=="string"?[f]:f||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(f);var d=(o.isInitialized||o.initializedStoreOnce)&&f.every(function(x){return Zpe(x,o,A)});function h(){return o.getFixedT(null,A.nsMode==="fallback"?f:f[0],u)}var p=me.useState(h),m=rge(p,2),g=m[0],v=m[1],y=f.join(),w=ige(y),C=me.useRef(!0);me.useEffect(function(){var x=A.bindI18n,S=A.bindI18nStore;C.current=!0,!d&&!c&&Xk(o,f,function(){C.current&&v(h)}),d&&w&&w!==y&&C.current&&v(h);function R(){C.current&&v(h)}return x&&o&&o.on(x,R),S&&o&&o.store.on(S,R),function(){C.current=!1,x&&o&&x.split(" ").forEach(function(Z){return o.off(Z,R)}),S&&o&&S.split(" ").forEach(function(Z){return o.store.off(Z,R)})}},[o,y]);var b=me.useRef(!0);me.useEffect(function(){C.current&&!b.current&&v(h),b.current=!1},[o,u]);var F=[g,o,d];if(F.t=g,F.i18n=o,F.ready=d,d||!d&&!c)return F;throw new Promise(function(x){Xk(o,f,function(){x()})})}var YH=[],sge=YH.forEach,oge=YH.slice;function age(n){return sge.call(oge.call(arguments,1),function(e){if(e)for(var t in e)n[t]===void 0&&(n[t]=e[t])}),n}var qk=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,lge=function(e,t,r){var i=r||{};i.path=i.path||"/";var s=encodeURIComponent(t),o="".concat(e,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!qk.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!qk.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},eV={create:function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+r*60*1e3)),i&&(s.domain=i),document.cookie=lge(e,encodeURIComponent(t),s)},read:function(e){for(var t="".concat(e,"="),r=document.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove:function(e){this.create(e,"",-1)}},Age={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&typeof document<"u"){var r=eV.read(e.lookupCookie);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&typeof document<"u"&&eV.create(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},cge={name:"querystring",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=r.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===e.lookupQuerystring&&(t=s[o].substring(a+1))}}}return t}},Jp=null,tV=function(){if(Jp!==null)return Jp;try{Jp=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Jp=!1}return Jp},uge={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&tV()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&tV()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},Hp=null,nV=function(){if(Hp!==null)return Hp;try{Hp=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Hp=!1}return Hp},fge={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&nV()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(t=r)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&nV()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},dge={name:"navigator",lookup:function(e){var t=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)t.push(navigator.languages[r]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},hge={name:"htmlTag",lookup:function(e){var t,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(t=r.getAttribute("lang")),t}},pge={name:"path",lookup:function(e){var t;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;t=r[e.lookupFromPathIndex].replace("/","")}else t=r[0].replace("/","")}return t}},gge={name:"subdomain",lookup:function(e){var t=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[t]}};function mge(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var XH=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lo(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return Ao(n,[{key:"init",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=age(r,this.options||{},mge()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Age),this.addDetector(cge),this.addDetector(uge),this.addDetector(fge),this.addDetector(dge),this.addDetector(hge),this.addDetector(pge),this.addDetector(gge)}},{key:"addDetector",value:function(t){this.detectors[t.name]=t}},{key:"detect",value:function(t){var r=this;t||(t=this.options.order);var i=[];return t.forEach(function(s){if(r.detectors[s]){var o=r.detectors[s].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(t,r){var i=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(t,i.options)}))}}]),n}();XH.type="languageDetector";const vge={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",createBio:"Create Bio",saveCharacter:"Save Your Character",chat:"Chat With Your Character"},classes:{beastPainter:{name:"Beast Painter",description:"Paints beasts"},engineer:{name:"Engineer",description:"Builds things"},dropHunter:{name:"Drop Hunter",description:"Hunts drops"},theDegen:{name:"The Degen",description:"Degens"},neuralHacker:{name:"Neural Hacker",description:"Hacks neural networks"},liskWitch:{name:"Lisk Witch",description:"Witches lisk"},bruiser:{name:"Bruiser",description:"Bruises things"}},callToAction:{next:"Next",back:"Back",randomize:"Randomize",chat:"Chat",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",bio:"Bio",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},yge={translation:{pageTitles:{chooseClass:"  ",chooseAppearance:" ",createBio:" ",saveCharacter:" ",chat:"   "},classes:{beastPainter:{name:"",description:" "},engineer:{name:"",description:" "},dropHunter:{name:"  ",description:"  "},theDegen:{name:"",description:""},neuralHacker:{name:" ",description:" . "},liskWitch:{name:" ",description:" "},bruiser:{name:"",description:" "}},callToAction:{next:"",back:"",randomize:"",chat:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:" ",preferredGreeting:" ",bio:"",question:"",yourName:" ",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API       ."}}},Bge={translation:{pageTitles:{chooseClass:"",chooseAppearance:"",createBio:"",saveCharacter:"",chat:""},classes:{beastPainter:{name:"",description:""},engineer:{name:"",description:""},dropHunter:{name:"",description:""},theDegen:{name:"",description:""},neuralHacker:{name:"",description:""},liskWitch:{name:"Lisk ",description:" Lisk"},bruiser:{name:"",description:""}},callToAction:{next:"",back:"",randomize:"",chat:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:"",preferredGreeting:"",bio:"",question:"",yourName:"",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API!"}}},wge={en:vge,ru:yge,zh:Bge};ei.use(XH).use(qpe).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:wge});const Bs=me.createContext(),Cge=n=>{const{t:e}=zH();return W.jsx(Bs.Provider,{value:{t:e},children:n.children})},bge=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,xge=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,Ige=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Fge=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,Ege=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Uge=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,Sge=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,_ge=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Qge=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Rge=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,K_=(n,e,t)=>{const r=new $t;["position","normal","uv"].forEach(o=>{r.setAttribute(o,n.attributes[o])}),r.setIndex(n.index);const i=new Float32Array(t*3),s=new mw(i,3);r.setAttribute("positions",s);for(const o of e){const{name:a,itemSize:l}=o,A=new Float32Array(t*l);r.setAttribute(a,new mw(A,l))}return r},Mge=n=>{const r=new YC(.45,.45,5,50,50,!0),i=new ki({uniforms:{auraTexture:{value:null}},vertexShader:bge,fragmentShader:xge,transparent:!0,blending:hu});i.uniforms.cameraDir=n.cameraDir,i.uniforms.eye=n.eye,i.uniforms.switchItemTime=n.switchItemTime,i.uniforms.switchItemDuration=n.switchItemDuration;const s=new Vn(r,i);return s.frustumCulled=!1,s.position.y=5*.46,s},Tge=()=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const t=.3,r=new Mh(t,t),i=K_(r,e,20),s=new ki({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Ige,fragmentShader:Fge,depthWrite:!1,blending:hu}),o=new zC(i,s,20);return o.info={particleCount:20,velocity:[20]},o},Nge=n=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const r=.43,i=new h_(r,32,32),s=K_(i,t,10),o=new ki({uniforms:{radius:{value:r}},vertexShader:Ege,fragmentShader:Uge,depthWrite:!1,blending:hu});o.uniforms.cameraDir=n.cameraDir,o.uniforms.eye=n.eye,o.uniforms.fadeInAvatarTime=n.fadeInAvatarTime;const a=new zC(s,o,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},Dge=n=>{const t=new Mh(1,1),r=new ki({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Sge,fragmentShader:_ge,depthWrite:!1,blending:hu});return new Vn(t,r)},kge=n=>{const t=[],s=new YC(.645,.43,2.5,50,50,!0),o=K_(s,t,2),a=new ki({uniforms:{opacity:{value:0}},vertexShader:Qge,fragmentShader:Rge,transparent:!0,blending:hu});a.uniforms.cameraDir=n.cameraDir,a.uniforms.eye=n.eye;const l=new zC(o,a,2);return l.fadeIn=!1,l.frustumCulled=!1,l.position.y=2.5*.46,l},rV=100,Vge=0,zw=1.5,Lge=.1,pB=0,iV=1,sV=.05,dU=0,Pge=1,Wge=.015,wi={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},Oge=new Qu,KH=Oge.load("./textures/beam2.png");KH.wrapS=ds;class Gge{constructor(e,t,r){this.scene=e,this.camera=t,this.globalUniforms=r,this.eye=new X,this.cameraDir=new X,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,(Math.random()-.5)*2,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.02+Math.random()*.03}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let o=0;o<i;o++)if(r.getX(o)<.01){o%2===0?e.setXY(o,.2,.2):e.setXY(o,.1,3+Math.random());const a=o/i*Math.PI*2;t.setXYZ(o,Math.cos(a)*s,Math.random()*-1,Math.sin(a)*s),r.setX(o,1+Math.random()),this.pixelMesh.info.velocity[o]=.05+Math.random()*.05;break}e.needsUpdate=!0,t.needsUpdate=!0,r.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const t=this.ringMesh.geometry.getAttribute("scales"),r=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,o=this.ringMesh.info.currentIndex,a=o-1<0?s-1:o-1,l=.1;(r.getY(a)>l+e||i.getX(a)<=0)&&(r.setXYZ(o,0,l,0),t.setXY(o,1,.06),i.setX(o,1),this.ringMesh.info.velocity[o]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),t.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=Mge(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=KH,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=Tge(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=Nge(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=Dge(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=kge(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==wi.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const t=this.pixelMesh.geometry.getAttribute("positions"),r=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)r.getX(s)>.01?(t.setY(s,t.getY(s)+this.pixelMesh.info.velocity[s]),r.setX(s,r.getX(s)/1.3)):(r.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),t.needsUpdate=!0,r.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),t=this.ringMesh.geometry.getAttribute("opacity"),r=this.ringMesh.info.particleCount;for(let i=0;i<r;i++)t.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),t.setX(i,t.getX(i)/1.27)):t.setX(i,0);e.needsUpdate=!0,t.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==wi.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===wi.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,t=.2;if(e<t){const r=e*(1/t),i=.6,s=5;this.teleportMesh.scale.set(i,r*s,i),this.teleportMesh.position.y=r*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const jH=new Qu,hU=jH.load("./textures/pixel9.png");hU.wrapS=hU.wrapT=ds;const pU=jH.load("./textures/noise3.jpg");pU.wrapS=pU.wrapT=ds;const Qt={switchItemDuration:{value:zw},switchItemTime:{value:zw},eye:{value:new X},cameraDir:{value:new X},fadeOutAvatarTime:{value:pB},fadeInAvatarTime:{value:dU},transitionEffectType:{value:wi.normal}},oV={pixelTexture:{value:hU},noiseTexture:{value:pU}};class Zge extends EventTarget{constructor(){super();tt(this,"setTransitionEffect",t=>{this.transitionEffectType=t});tt(this,"getTransitionEffect",t=>this.transitionEffectType===t);this.cameraDir=new X,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=rV,this.update()}setCustomShader(t){t.vertexShader&&(t.vertexShader=t.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),t.vertexShader=t.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),t.vertexShader=t.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),t.fragmentShader=t.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),t.fragmentShader=t.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),t.uniforms.pixelTexture=oV.pixelTexture,t.uniforms.noiseTexture=oV.noiseTexture,t.uniforms.cameraDir=Qt.cameraDir,t.uniforms.eye=Qt.eye,t.uniforms.switchItemTime=Qt.switchItemTime,t.uniforms.switchItemDuration=Qt.switchItemDuration,t.uniforms.transitionEffectType=Qt.transitionEffectType,t.uniforms.fadeInAvatarTime=Qt.fadeInAvatarTime)}playFadeOutEffect(){Qt.transitionEffectType.value=wi.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((iV-pB)/sV),this.initialFadeOutTimer()}playFadeInEffect(){Qt.transitionEffectType.value=wi.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Qt.switchItemTime.value=Vge,Qt.transitionEffectType.value=wi.switchItem,this.transitionTime=rV}setParticle(t,r){this.particleEffect=new Gge(t,r,Qt)}initialFadeOutTimer(){Qt.fadeOutAvatarTime.value=pB}initialFadeInTimer(){Qt.fadeInAvatarTime.value=dU}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Qt.transitionEffectType.value===wi.switchItem?Qt.switchItemTime.value<zw?Qt.switchItemTime.value+=Lge:(Qt.switchItemTime.value=zw,Qt.transitionEffectType.value=wi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Qt.transitionEffectType.value===wi.fadeOutAvatar?(Qt.fadeOutAvatarTime.value+=sV,Qt.fadeOutAvatarTime.value>iV&&(Qt.fadeOutAvatarTime.value=pB,Qt.transitionEffectType.value=wi.loadingAvatar)):Qt.transitionEffectType.value===wi.loadingAvatar||Qt.transitionEffectType.value===wi.fadeInAvatar&&(Qt.fadeInAvatarTime.value>.1&&Qt.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Qt.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Qt.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Qt.fadeInAvatarTime.value+=Wge,Qt.fadeInAvatarTime.value>Pge&&(Qt.fadeInAvatarTime.value=dU,Qt.transitionEffectType.value=wi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Qt.cameraDir.value.copy(this.cameraDir),Qt.eye.value.copy(this.camera.position))},this.frameRate)}}const Jge="_container_1fjfz_1",Hge="_messageWindow_1fjfz_11",zge="_messageTitle_1fjfz_25",Yge="_buttonContainer_1fjfz_36",gy={container:Jge,messageWindow:Hge,messageTitle:zge,buttonContainer:Yge};var $H={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if(o==="string"||o==="number")r.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&r.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){r.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&r.push(l)}}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})($H);var Xge=$H.exports;const Gd=Cu(Xge),Kge="_iconButtonWrap_1fm7l_1",jge="_buttonBackground_1fm7l_8",$ge="_buttonBackgroundColor_1fm7l_13",qge="_innerBackgroundColor_1fm7l_16",eme="_dark_1fm7l_20",tme="_iconWrap_1fm7l_28",nme="_icon_1fm7l_1",rme="_active_1fm7l_83",ime="_buttonWrap_1fm7l_95",sme="_buttonIconWrap_1fm7l_108",ome="_innerWrap_1fm7l_127",Rn={iconButtonWrap:Kge,buttonBackground:jge,buttonBackgroundColor:$ge,innerBackgroundColor:qge,dark:eme,iconWrap:tme,icon:nme,active:rme,buttonWrap:ime,buttonIconWrap:sme,innerWrap:ome},ame=[{name:"backpack",file:"./assets/icons/backpack.svg"},{name:"microphone",file:"./assets/icons/microphone.svg"},{name:"speechToText",file:"./assets/icons/speechToText.svg"},{name:"arrowRight",file:"./assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"./assets/icons/arrowLeft.svg"},{name:"rooms",file:"./assets/icons/rooms.svg"},{name:"scenes",file:"./assets/icons/scenes.svg"},{name:"settings",file:"./assets/icons/settings.svg"},{name:"tokens",file:"./assets/icons/tokens.svg"},{name:"voice",file:"./assets/icons/voice.svg"},{name:"vr",file:"./assets/icons/vr.svg"},{name:"discord",file:"./assets/icons/discord.svg"},{name:"metamask",file:"./assets/icons/metamask.svg"},{name:"close",file:"./assets/icons/close.svg"},{name:"hide",file:"./assets/icons/hide.svg"},{name:"map",file:"./assets/icons/map.svg"},{name:"login",file:"./assets/icons/login.svg"},{name:"logout",file:"./assets/icons/logout.svg"},{name:"plus",file:"./assets/icons/plus.svg"},{name:"minus",file:"./assets/icons/minus.svg"},{name:"mint",file:"./assets/icons/mint.svg"},{name:"download",file:"./assets/icons/download.svg"},{name:"classDropHunter",file:"./assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"./assets/icons/class-engineer.svg"},{name:"classCustom",file:"./assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"./assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"./assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"./assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"./assets/icons/class-beast-painter.svg"},{name:"soundon",file:"./assets/icons/soundon.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"soundoff",file:"./assets/icons/soundoff.svg"},{name:"polygon",file:"./assets/icons/polygon.svg"}];async function lme(n){const e=ame.find(t=>t.name===n);return await fetch(e.file).then(t=>t.text()).then(t=>new DOMParser().parseFromString(t,"image/svg+xml").firstElementChild)}function Zt(n){const{size:e,icon:t,className:r,onClick:i,theme:s,type:o,text:a,onMouseEnter:l,active:A,onSubmit:c,minWidth:u,disabled:f}=n,d=me.useRef(null);return me.useEffect(()=>{t&&lme(t).then(h=>{d.current&&(d.current.innerHTML="",h&&(h.classList.add(Rn.icon),d.current.append(h)))})},[t]),o&&o==="login"?W.jsxs("div",{className:Gd(r,Rn.iconButtonWrap,s&&s==="dark"?Rn.dark:Rn.light,A&&Rn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[W.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Rn.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[W.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Rn.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),W.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Rn.innerBackgroundColor})]}),W.jsx("span",{ref:d,className:Rn.iconWrap})]}):o&&o==="icon"?W.jsxs("div",{className:Gd(r,Rn.iconButtonWrap,s&&s==="dark"?Rn.dark:Rn.light,A&&Rn.active),style:{height:e},onClick:i,onMouseEnter:l,children:[W.jsxs("svg",{className:Rn.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[W.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Rn.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),W.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Rn.innerBackgroundColor})]}),W.jsx("span",{ref:d,className:Rn.iconWrap})]}):W.jsx("button",{className:Gd(r,Rn.buttonWrap,s&&s==="dark"?Rn.dark:Rn.light),onClick:i,onMouseEnter:l,onSubmit:c,type:o,disabled:f,style:{minWidth:u?u+"px":""},children:W.jsxs("div",{className:Rn.innerWrap,style:{fontSize:e},children:[t&&W.jsx("span",{ref:d,className:Rn.buttonIconWrap,style:{height:e,width:e,opacity:f?"0.4":"1"}}),a&&a]})})}function Ame(n){const{cancelOption:e=!0,confirmDialogText:t,confirmDialogWindow:r,setConfirmDialogWindow:i,confirmDialogCallback:s}=n;return r?W.jsx("div",{className:gy.container,children:W.jsxs("div",{className:gy.messageWindow,children:[W.jsx("div",{className:gy.messageTitle,children:t}),W.jsxs("div",{className:gy.buttonContainer,children:[e&&W.jsx(Zt,{size:16,theme:"light",text:"Cancel",onClick:()=>{s[0](!1),i(!1)}}),W.jsx(Zt,{size:16,theme:"light",text:"Continue",onClick:()=>{s[0](!0),i(!1)}})]})]})}):W.jsx("div",{})}const cme="/CharacterStudio/assets/anata-a574c58f.png",ume="_backgroundImg_iv22q_1",fme="_darkBackground_iv22q_16",dme="_Background_iv22q_29",hme="_webamark_iv22q_37",pme="_logo_iv22q_45",xf={backgroundImg:ume,darkBackground:fme,Background:dme,webamark:hme,logo:pme};function gme(){const{debugMode:n}=z.useContext(qr);return W.jsxs("div",{className:n?xf.darkBackground:xf.backgroundImg,children:[W.jsx("div",{className:xf.backgroundBlur}),W.jsx("div",{className:xf.Background,children:W.jsx("div",{className:xf.webamark,children:W.jsx("img",{src:cme,className:xf.logo})})})]})}const mme="_chatContainer_1659d_1",vme="_scrollContainer_1659d_16",yme="_topLine_1659d_26",Bme="_bottomLine_1659d_54",wme="_buttonContainer_1659d_82",Cme="_buttonLeft_1659d_91",bme="_buttonRight_1659d_95",xme="_buttonCenter_1659d_99",Uc={chatContainer:mme,scrollContainer:vme,topLine:yme,bottomLine:Bme,buttonContainer:wme,buttonLeft:Cme,buttonRight:bme,buttonCenter:xme};function qH(n,e){return function(){return n.apply(e,arguments)}}const{toString:Ime}=Object.prototype,{getPrototypeOf:j_}=Object,fb=(n=>e=>{const t=Ime.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),La=n=>(n=n.toLowerCase(),e=>fb(e)===n),db=n=>e=>typeof e===n,{isArray:Kh}=Array,Om=db("undefined");function Fme(n){return n!==null&&!Om(n)&&n.constructor!==null&&!Om(n.constructor)&&js(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const e4=La("ArrayBuffer");function Eme(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&e4(n.buffer),e}const Ume=db("string"),js=db("function"),t4=db("number"),hb=n=>n!==null&&typeof n=="object",Sme=n=>n===!0||n===!1,gB=n=>{if(fb(n)!=="object")return!1;const e=j_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},_me=La("Date"),Qme=La("File"),Rme=La("Blob"),Mme=La("FileList"),Tme=n=>hb(n)&&js(n.pipe),Nme=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||js(n.append)&&((e=fb(n))==="formdata"||e==="object"&&js(n.toString)&&n.toString()==="[object FormData]"))},Dme=La("URLSearchParams"),kme=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function v0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Kh(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function n4(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const r4=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),i4=n=>!Om(n)&&n!==r4;function gU(){const{caseless:n}=i4(this)&&this||{},e={},t=(r,i)=>{const s=n&&n4(e,i)||i;gB(e[s])&&gB(r)?e[s]=gU(e[s],r):gB(r)?e[s]=gU({},r):Kh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&v0(arguments[r],t);return e}const Vme=(n,e,t,{allOwnKeys:r}={})=>(v0(e,(i,s)=>{t&&js(i)?n[s]=qH(i,t):n[s]=i},{allOwnKeys:r}),n),Lme=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Pme=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Wme=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&j_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Ome=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Gme=n=>{if(!n)return null;if(Kh(n))return n;let e=n.length;if(!t4(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Zme=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&j_(Uint8Array)),Jme=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},Hme=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},zme=La("HTMLFormElement"),Yme=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),aV=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Xme=La("RegExp"),s4=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};v0(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},Kme=n=>{s4(n,(e,t)=>{if(js(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(js(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},jme=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Kh(n)?r(n):r(String(n).split(e)),t},$me=()=>{},qme=(n,e)=>(n=+n,Number.isFinite(n)?n:e),y1="abcdefghijklmnopqrstuvwxyz",lV="0123456789",o4={DIGIT:lV,ALPHA:y1,ALPHA_DIGIT:y1+y1.toUpperCase()+lV},e0e=(n=16,e=o4.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function t0e(n){return!!(n&&js(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const n0e=n=>{const e=new Array(10),t=(r,i)=>{if(hb(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Kh(r)?[]:{};return v0(r,(o,a)=>{const l=t(o,i+1);!Om(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},r0e=La("AsyncFunction"),i0e=n=>n&&(hb(n)||js(n))&&js(n.then)&&js(n.catch),xe={isArray:Kh,isArrayBuffer:e4,isBuffer:Fme,isFormData:Nme,isArrayBufferView:Eme,isString:Ume,isNumber:t4,isBoolean:Sme,isObject:hb,isPlainObject:gB,isUndefined:Om,isDate:_me,isFile:Qme,isBlob:Rme,isRegExp:Xme,isFunction:js,isStream:Tme,isURLSearchParams:Dme,isTypedArray:Zme,isFileList:Mme,forEach:v0,merge:gU,extend:Vme,trim:kme,stripBOM:Lme,inherits:Pme,toFlatObject:Wme,kindOf:fb,kindOfTest:La,endsWith:Ome,toArray:Gme,forEachEntry:Jme,matchAll:Hme,isHTMLForm:zme,hasOwnProperty:aV,hasOwnProp:aV,reduceDescriptors:s4,freezeMethods:Kme,toObjectSet:jme,toCamelCase:Yme,noop:$me,toFiniteNumber:qme,findKey:n4,global:r4,isContextDefined:i4,ALPHABET:o4,generateString:e0e,isSpecCompliantForm:t0e,toJSONObject:n0e,isAsyncFn:r0e,isThenable:i0e};function Vt(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i)}xe.inherits(Vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const a4=Vt.prototype,l4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{l4[n]={value:n}});Object.defineProperties(Vt,l4);Object.defineProperty(a4,"isAxiosError",{value:!0});Vt.from=(n,e,t,r,i,s)=>{const o=Object.create(a4);return xe.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Vt.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const s0e=null;function mU(n){return xe.isPlainObject(n)||xe.isArray(n)}function A4(n){return xe.endsWith(n,"[]")?n.slice(0,-2):n}function AV(n,e,t){return n?n.concat(e).map(function(i,s){return i=A4(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function o0e(n){return xe.isArray(n)&&!n.some(mU)}const a0e=xe.toFlatObject(xe,{},null,function(e){return/^is[A-Z]/.test(e)});function pb(n,e,t){if(!xe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=xe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!xe.isUndefined(m[p])});const r=t.metaTokens,i=t.visitor||c,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(e);if(!xe.isFunction(i))throw new TypeError("visitor must be a function");function A(h){if(h===null)return"";if(xe.isDate(h))return h.toISOString();if(!l&&xe.isBlob(h))throw new Vt("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(h)||xe.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,p,m){let g=h;if(h&&!m&&typeof h=="object"){if(xe.endsWith(p,"{}"))p=r?p:p.slice(0,-2),h=JSON.stringify(h);else if(xe.isArray(h)&&o0e(h)||(xe.isFileList(h)||xe.endsWith(p,"[]"))&&(g=xe.toArray(h)))return p=A4(p),g.forEach(function(y,w){!(xe.isUndefined(y)||y===null)&&e.append(o===!0?AV([p],w,s):o===null?p:p+"[]",A(y))}),!1}return mU(h)?!0:(e.append(AV(m,p,s),A(h)),!1)}const u=[],f=Object.assign(a0e,{defaultVisitor:c,convertValue:A,isVisitable:mU});function d(h,p){if(!xe.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(h),xe.forEach(h,function(g,v){(!(xe.isUndefined(g)||g===null)&&i.call(e,g,xe.isString(v)?v.trim():v,p,f))===!0&&d(g,p?p.concat(v):[v])}),u.pop()}}if(!xe.isObject(n))throw new TypeError("data must be an object");return d(n),e}function cV(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function $_(n,e){this._pairs=[],n&&pb(n,this,e)}const c4=$_.prototype;c4.append=function(e,t){this._pairs.push([e,t])};c4.toString=function(e){const t=e?function(r){return e.call(this,r,cV)}:cV;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function l0e(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function u4(n,e,t){if(!e)return n;const r=t&&t.encode||l0e,i=t&&t.serialize;let s;if(i?s=i(e,t):s=xe.isURLSearchParams(e)?e.toString():new $_(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class A0e{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const uV=A0e,f4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},c0e=typeof URLSearchParams<"u"?URLSearchParams:$_,u0e=typeof FormData<"u"?FormData:null,f0e=typeof Blob<"u"?Blob:null,d0e={isBrowser:!0,classes:{URLSearchParams:c0e,FormData:u0e,Blob:f0e},protocols:["http","https","file","blob","url","data"]},d4=typeof window<"u"&&typeof document<"u",h0e=(n=>d4&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),p0e=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),g0e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:d4,hasStandardBrowserEnv:h0e,hasStandardBrowserWebWorkerEnv:p0e},Symbol.toStringTag,{value:"Module"})),pa={...g0e,...d0e};function m0e(n,e){return pb(n,new pa.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return pa.isNode&&xe.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function v0e(n){return xe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function y0e(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function h4(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&xe.isArray(i)?i.length:o,l?(xe.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!xe.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&xe.isArray(i[o])&&(i[o]=y0e(i[o])),!a)}if(xe.isFormData(n)&&xe.isFunction(n.entries)){const t={};return xe.forEachEntry(n,(r,i)=>{e(v0e(r),i,t,0)}),t}return null}function B0e(n,e,t){if(xe.isString(n))try{return(e||JSON.parse)(n),xe.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const q_={transitional:f4,adapter:["xhr","http"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=xe.isObject(e);if(s&&xe.isHTMLForm(e)&&(e=new FormData(e)),xe.isFormData(e))return i?JSON.stringify(h4(e)):e;if(xe.isArrayBuffer(e)||xe.isBuffer(e)||xe.isStream(e)||xe.isFile(e)||xe.isBlob(e))return e;if(xe.isArrayBufferView(e))return e.buffer;if(xe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return m0e(e,this.formSerializer).toString();if((a=xe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return pb(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),B0e(e)):e}],transformResponse:[function(e){const t=this.transitional||q_.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(e&&xe.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Vt.from(a,Vt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pa.classes.FormData,Blob:pa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],n=>{q_.headers[n]={}});const eQ=q_,w0e=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),C0e=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&w0e[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},fV=Symbol("internals");function zp(n){return n&&String(n).trim().toLowerCase()}function mB(n){return n===!1||n==null?n:xe.isArray(n)?n.map(mB):String(n)}function b0e(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const x0e=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function B1(n,e,t,r,i){if(xe.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!xe.isString(e)){if(xe.isString(r))return e.indexOf(r)!==-1;if(xe.isRegExp(r))return r.test(e)}}function I0e(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function F0e(n,e){const t=xe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class gb{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,A){const c=zp(l);if(!c)throw new Error("header name must be a non-empty string");const u=xe.findKey(i,c);(!u||i[u]===void 0||A===!0||A===void 0&&i[u]!==!1)&&(i[u||l]=mB(a))}const o=(a,l)=>xe.forEach(a,(A,c)=>s(A,c,l));return xe.isPlainObject(e)||e instanceof this.constructor?o(e,t):xe.isString(e)&&(e=e.trim())&&!x0e(e)?o(C0e(e),t):e!=null&&s(t,e,r),this}get(e,t){if(e=zp(e),e){const r=xe.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return b0e(i);if(xe.isFunction(t))return t.call(this,i,r);if(xe.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zp(e),e){const r=xe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||B1(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=zp(o),o){const a=xe.findKey(r,o);a&&(!t||B1(r,r[a],a,t))&&(delete r[a],i=!0)}}return xe.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||B1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return xe.forEach(this,(i,s)=>{const o=xe.findKey(r,s);if(o){t[o]=mB(i),delete t[s];return}const a=e?I0e(s):String(s).trim();a!==s&&delete t[s],t[a]=mB(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return xe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&xe.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[fV]=this[fV]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=zp(o);r[a]||(F0e(i,o),r[a]=!0)}return xe.isArray(e)?e.forEach(s):s(e),this}}gb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(gb.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});xe.freezeMethods(gb);const Il=gb;function w1(n,e){const t=this||eQ,r=e||t,i=Il.from(r.headers);let s=r.data;return xe.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function p4(n){return!!(n&&n.__CANCEL__)}function y0(n,e,t){Vt.call(this,n??"canceled",Vt.ERR_CANCELED,e,t),this.name="CanceledError"}xe.inherits(y0,Vt,{__CANCEL__:!0});function E0e(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Vt("Request failed with status code "+t.status,[Vt.ERR_BAD_REQUEST,Vt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const U0e=pa.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];xe.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),xe.isString(r)&&o.push("path="+r),xe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function S0e(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _0e(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function g4(n,e){return n&&!S0e(e)?_0e(n,e):e}const Q0e=pa.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=xe.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function R0e(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function M0e(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const A=Date.now(),c=r[s];o||(o=A),t[i]=l,r[i]=A;let u=s,f=0;for(;u!==i;)f+=t[u++],u=u%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),A-o<e)return;const d=c&&A-c;return d?Math.round(f*1e3/d):void 0}}function dV(n,e){let t=0;const r=M0e(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-t,l=r(a),A=s<=o;t=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&A?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,n(c)}}const T0e=typeof XMLHttpRequest<"u",N0e=T0e&&function(n){return new Promise(function(t,r){let i=n.data;const s=Il.from(n.headers).normalize();let{responseType:o,withXSRFToken:a}=n,l;function A(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let c;if(xe.isFormData(i)){if(pa.hasStandardBrowserEnv||pa.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[p,...m]=c?c.split(";").map(g=>g.trim()).filter(Boolean):[];s.setContentType([p||"multipart/form-data",...m].join("; "))}}let u=new XMLHttpRequest;if(n.auth){const p=n.auth.username||"",m=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+m))}const f=g4(n.baseURL,n.url);u.open(n.method.toUpperCase(),u4(f,n.params,n.paramsSerializer),!0),u.timeout=n.timeout;function d(){if(!u)return;const p=Il.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),g={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:n,request:u};E0e(function(y){t(y),A()},function(y){r(y),A()},g),u=null}if("onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(d)},u.onabort=function(){u&&(r(new Vt("Request aborted",Vt.ECONNABORTED,n,u)),u=null)},u.onerror=function(){r(new Vt("Network Error",Vt.ERR_NETWORK,n,u)),u=null},u.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const g=n.transitional||f4;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),r(new Vt(m,g.clarifyTimeoutError?Vt.ETIMEDOUT:Vt.ECONNABORTED,n,u)),u=null},pa.hasStandardBrowserEnv&&(a&&xe.isFunction(a)&&(a=a(n)),a||a!==!1&&Q0e(f))){const p=n.xsrfHeaderName&&n.xsrfCookieName&&U0e.read(n.xsrfCookieName);p&&s.set(n.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in u&&xe.forEach(s.toJSON(),function(m,g){u.setRequestHeader(g,m)}),xe.isUndefined(n.withCredentials)||(u.withCredentials=!!n.withCredentials),o&&o!=="json"&&(u.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&u.addEventListener("progress",dV(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",dV(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=p=>{u&&(r(!p||p.type?new y0(null,n,u):p),u.abort(),u=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const h=R0e(f);if(h&&pa.protocols.indexOf(h)===-1){r(new Vt("Unsupported protocol "+h+":",Vt.ERR_BAD_REQUEST,n));return}u.send(i||null)})},vU={http:s0e,xhr:N0e};xe.forEach(vU,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const hV=n=>`- ${n}`,D0e=n=>xe.isFunction(n)||n===null||n===!1,m4={getAdapter:n=>{n=xe.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!D0e(t)&&(r=vU[(o=String(t)).toLowerCase()],r===void 0))throw new Vt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(hV).join(`
`):" "+hV(s[0]):"as no adapter specified";throw new Vt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:vU};function C1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new y0(null,n)}function pV(n){return C1(n),n.headers=Il.from(n.headers),n.data=w1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),m4.getAdapter(n.adapter||eQ.adapter)(n).then(function(r){return C1(n),r.data=w1.call(n,n.transformResponse,r),r.headers=Il.from(r.headers),r},function(r){return p4(r)||(C1(n),r&&r.response&&(r.response.data=w1.call(n,n.transformResponse,r.response),r.response.headers=Il.from(r.response.headers))),Promise.reject(r)})}const gV=n=>n instanceof Il?n.toJSON():n;function Ch(n,e){e=e||{};const t={};function r(A,c,u){return xe.isPlainObject(A)&&xe.isPlainObject(c)?xe.merge.call({caseless:u},A,c):xe.isPlainObject(c)?xe.merge({},c):xe.isArray(c)?c.slice():c}function i(A,c,u){if(xe.isUndefined(c)){if(!xe.isUndefined(A))return r(void 0,A,u)}else return r(A,c,u)}function s(A,c){if(!xe.isUndefined(c))return r(void 0,c)}function o(A,c){if(xe.isUndefined(c)){if(!xe.isUndefined(A))return r(void 0,A)}else return r(void 0,c)}function a(A,c,u){if(u in e)return r(A,c);if(u in n)return r(void 0,A)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(A,c)=>i(gV(A),gV(c),!0)};return xe.forEach(Object.keys(Object.assign({},n,e)),function(c){const u=l[c]||i,f=u(n[c],e[c],c);xe.isUndefined(f)&&u!==a||(t[c]=f)}),t}const v4="1.6.7",tQ={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{tQ[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const mV={};tQ.transitional=function(e,t,r){function i(s,o){return"[Axios v"+v4+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Vt(i(o," has been removed"+(t?" in "+t:"")),Vt.ERR_DEPRECATED);return t&&!mV[o]&&(mV[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function k0e(n,e,t){if(typeof n!="object")throw new Vt("options must be an object",Vt.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Vt("option "+s+" must be "+l,Vt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Vt("Unknown option "+s,Vt.ERR_BAD_OPTION)}}const yU={assertOptions:k0e,validators:tQ},aA=yU.validators;class Yw{constructor(e){this.defaults=e,this.interceptors={request:new uV,response:new uV}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ch(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&yU.assertOptions(r,{silentJSONParsing:aA.transitional(aA.boolean),forcedJSONParsing:aA.transitional(aA.boolean),clarifyTimeoutError:aA.transitional(aA.boolean)},!1),i!=null&&(xe.isFunction(i)?t.paramsSerializer={serialize:i}:yU.assertOptions(i,{encode:aA.function,serialize:aA.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&xe.merge(s.common,s[t.method]);s&&xe.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),t.headers=Il.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const A=[];this.interceptors.response.forEach(function(p){A.push(p.fulfilled,p.rejected)});let c,u=0,f;if(!l){const h=[pV.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,A),f=h.length,c=Promise.resolve(t);u<f;)c=c.then(h[u++],h[u++]);return c}f=a.length;let d=t;for(u=0;u<f;){const h=a[u++],p=a[u++];try{d=h(d)}catch(m){p.call(this,m);break}}try{c=pV.call(this,d)}catch(h){return Promise.reject(h)}for(u=0,f=A.length;u<f;)c=c.then(A[u++],A[u++]);return c}getUri(e){e=Ch(this.defaults,e);const t=g4(e.baseURL,e.url);return u4(t,e.params,e.paramsSerializer)}}xe.forEach(["delete","get","head","options"],function(e){Yw.prototype[e]=function(t,r){return this.request(Ch(r||{},{method:e,url:t,data:(r||{}).data}))}});xe.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(Ch(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Yw.prototype[e]=t(),Yw.prototype[e+"Form"]=t(!0)});const vB=Yw;class nQ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new y0(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new nQ(function(i){e=i}),cancel:e}}}const V0e=nQ;function L0e(n){return function(t){return n.apply(null,t)}}function P0e(n){return xe.isObject(n)&&n.isAxiosError===!0}const BU={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(BU).forEach(([n,e])=>{BU[e]=n});const W0e=BU;function y4(n){const e=new vB(n),t=qH(vB.prototype.request,e);return xe.extend(t,vB.prototype,e,{allOwnKeys:!0}),xe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return y4(Ch(n,i))},t}const rr=y4(eQ);rr.Axios=vB;rr.CanceledError=y0;rr.CancelToken=V0e;rr.isCancel=p4;rr.VERSION=v4;rr.toFormData=pb;rr.AxiosError=Vt;rr.Cancel=rr.CanceledError;rr.all=function(e){return Promise.all(e)};rr.spread=L0e;rr.isAxiosError=P0e;rr.mergeConfig=Ch;rr.AxiosHeaders=Il;rr.formToJSON=n=>h4(xe.isHTMLForm(n)?new FormData(n):n);rr.getAdapter=m4.getAdapter;rr.HttpStatusCode=W0e;rr.default=rr;const B4=rr,b1={red:{color:"#FF0000",fontColor:"#FF9494"},orange:{color:"#FF7300",fontColor:"#FF9A47"},yellow:{color:"#FFC800",fontColor:"#FFC800"},green:{color:"#99FF00",fontColor:"#99FF00"},blue:{color:"#00AAFF",fontColor:"#38BDFF"},indigo:{color:"#0062FF",fontColor:"#80B0FF"},violet:{color:"#C800FF",fontColor:"#EDADFF"},purple:{color:"#6600FF",fontColor:"#C59EFF"},pink:{color:"#FF94D2",fontColor:"#FF94D2"},black:{color:"#000000",fontColor:"#BFBFBF"},white:{color:"#FFFFFF",fontColor:"#FFFFFF"}},O0e={confused:["Huh?","What?","Eh?","Nani?"],silent:["..."],thoughtful:["Hmmm"],neutral:["Can you say that again?","Can you repeat that?","Please say that again","Sorry I didnt understand, can you repeat that?"]},G0e="_chatBox_1fp89_1",Z0e="_messages_1fp89_50",J0e="_scrollBox_1fp89_67",H0e="_send_1fp89_78",z0e="_mic_1fp89_90",Y0e="_sendButton_1fp89_94",X0e="_speaker_1fp89_100",K0e="_warning_1fp89_121",j0e="_isTyping_1fp89_130",$0e="_show_1fp89_136",Ko={chatBox:G0e,messages:Z0e,scrollBox:J0e,send:H0e,mic:z0e,sendButton:Y0e,speaker:X0e,warning:K0e,isTyping:j0e,show:$0e};var q0e={serverUrl:"http://localhost:20741",clientId:"any",accessToken:"test1234"},hA={language:"en-US",task:"",model:"",continuous:!0,optimizeFinalResult:!0,messageFormat:"default",engineOptions:{}},x1="",vV={},my={},yV;function eve(n){if(console.log("INFO - Server version: "+n.version),console.log("INFO - Active engine: "+n.engine),x1=n.engine,console.log("INFO - Available ASR languages: "+JSON.stringify(n.languages,null,2)),hA.language=n.languages[0],n.languages,console.log("INFO - Available ASR models: "+JSON.stringify(n.models,null,2)),hA.model=n.models[0],console.log("INFO - ASR model properties: "+JSON.stringify(n.modelProperties,null,2)),n.models.forEach(function(e,t){my[e]=n.modelProperties[t],my[e].language=n.languages[t],my[e].engine||(my[e].engine=x1)}),console.log("INFO - Available ASR features: "+JSON.stringify(n.features,null,2)),Array.isArray(n.features)?vV[x1]=n.features:vV=n.features,!yV){yV={};let e=navigator.language,t;if(e&&n.languages&&n.models){let r=n.languages.indexOf(e);if(r>=0)t=r;else{let i=e.substring(0,2);for(let s=0;s<n.languages.length;s++)if(n.languages[s].indexOf(i)==0){t=s;break}}}t!=null&&(hA.language=n.languages[t],hA.model=n.models[t]),console.log("INFO - Default language/model: "+hA.language+"/"+hA.model+" - NOTE: If you set 'language' via settings make sure to remove 'model'!")}}function tve(){console.log("INFO - Loading server settings...");var n=new AbortController;setTimeout(function(){n.abort()},8e3),fetch(q0e.serverUrl+"/settings",{method:"GET",signal:n.signal}).then(function(e){if(e.ok)return e.json();throw{name:"FetchError",message:e.statusText,code:e.status}}).then(function(e){console.log("Server Info",e),e&&e.settings&&eve(e.settings)}).catch(function(e){console.error("Server Info Fetch ERROR",e)})}var Jd;class wU{constructor(e){Pu(this,Jd,[]);tt(this,"length",0);return Lb(this,Jd,e),new Proxy(this,{get:(t,r)=>{if(r==="length")return Cs(this,Jd).length;if(typeof+r=="number")return Cs(this,Jd)[r]}})}}Jd=new WeakMap;class Xw{constructor(e){tt(this,"resultIndex",0);tt(this,"results");this.results=new wU(e)}_dispatch(e,t){const r=Object.create(Xw);r.resultIndex=this.resultIndex,r.results=this.results,r.type=t,e._dispatchEvent(r)}}class nve{constructor(){tt(this,"transcript","");tt(this,"confidence",1)}}var Hd;class rve{constructor(e){Pu(this,Hd,[]);tt(this,"isFinal",!1);tt(this,"length",0);return Lb(this,Hd,e),new Proxy(this,{get:(t,r)=>{if(r==="isFinal")return this.isFinal;if(r==="length")return Cs(this,Hd).length;if(typeof r=="symbol")return"You tried to access the raw list I think?";if(typeof+r=="number")return Cs(this,Hd)[r]},[Symbol.toPrimitive]:(t,r)=>{console.log("Am I in here?")}})}}Hd=new WeakMap;const Yp=Object.freeze({NOSPEECH:"no-speech",ABORTED:"aborted",AUDIOCAPTURE:"audio-capture",NETWORK:"network",NOTALLOWED:"not-allowed",SERVICENOTALLOWED:"service-not-allowed",BADGRAMMAR:"bad-grammar",LANGUAGENOTSUPPORTED:"language-not-supported"});class bd{constructor(){tt(this,"error","");tt(this,"message","")}_dispatch(e){const t=Object.create(bd);t.error=this.error,t.message=this.message,t.type="error",e._dispatchEvent(t)}}function ive(n,e){var t=atob(n);if(e){for(var r=new Uint8Array(t.length),i=0,s=t.length;i<s;++i)r[i]=t.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return t}function sve(n,e,t){var r=e===void 0?null:e,i=t===void 0?!1:t,s=ive(n,i),o=s.indexOf(`
`,10)+1,a=s.substring(o)+(r?"//# sourceMappingURL="+r:""),l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function w4(n,e,t){var r;return function(s){return r=r||sve(n,e,t),new Worker(r,s)}}var ove=w4("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICBjb25zdCBXZWJSdGNWYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe2F8fEYoIkFzc2VydGlvbiBmYWlsZWQ6ICIrYik7fWZ1bmN0aW9uIGMoYSl7dmFyIGM9SVsiXyIrYV07cmV0dXJuIGIoYywiQ2Fubm90IGNhbGwgdW5rbm93biBmdW5jdGlvbiAiK2ErIiwgbWFrZSBzdXJlIGl0IGlzIGV4cG9ydGVkIiksY31mdW5jdGlvbiBkKGEsYixkLGUpe2Z1bmN0aW9uIGcoYSl7cmV0dXJuICJzdHJpbmciPT09Yj9mKGEpOiJib29sZWFuIj09PWI/ISFhOmF9dmFyIGo9e3N0cmluZzpmdW5jdGlvbihhKXt2YXIgYj0wO2lmKG51bGwhPT1hJiZ2b2lkIDAhPT1hJiYwIT09YSl7dmFyIGM9KGEubGVuZ3RoPDwyKSsxO2I9Y2IoYyksaChhLGIsYyk7fXJldHVybiBifSxhcnJheTpmdW5jdGlvbihhKXt2YXIgYj1jYihhLmxlbmd0aCk7cmV0dXJuIGsoYSxiKSxifX0sbD1jKGEpLG09W10sbj0wO2lmKGUpZm9yKHZhciBvLHA9MDtwPGUubGVuZ3RoO3ArKylvPWpbZFtwXV0sbz8oMD09PW4mJihuPWViKCkpLG1bcF09byhlW3BdKSk6bVtwXT1lW3BdO3ZhciBxPWwuYXBwbHkobnVsbCxtKTtyZXR1cm4gcT1nKHEpLDAhPT1uJiZkYihuKSxxfWZ1bmN0aW9uIGUoYSxiLGMpe2Zvcih2YXIgZD1iK2MsZT1iO2FbZV0mJiEoZT49ZCk7KSsrZTtpZigxNjxlLWImJmEuc3ViYXJyYXkmJmlhKXJldHVybiBpYS5kZWNvZGUoYS5zdWJhcnJheShiLGUpKTtmb3IodmFyIGYsZz0iIjtiPGU7KXtpZihmPWFbYisrXSwhKDEyOCZmKSl7Zys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtjb250aW51ZX12YXIgaD02MyZhW2IrK107aWYoMTkyPT0oMjI0JmYpKXtnKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzMSZmKTw8NnxoKTtjb250aW51ZX12YXIgaT02MyZhW2IrK107aWYoZj0yMjQ9PSgyNDAmZik/KDE1JmYpPDwxMnxoPDw2fGk6KDcmZik8PDE4fGg8PDEyfGk8PDZ8NjMmYVtiKytdLDY1NTM2PmYpZys9U3RyaW5nLmZyb21DaGFyQ29kZShmKTtlbHNlIHt2YXIgaj1mLTY1NTM2O2crPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8aj4+MTAsNTYzMjB8MTAyMyZqKTt9fXJldHVybiBnfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYT9lKF8sYSxiKToiIn1mdW5jdGlvbiBnKGEsYixjLGQpe2lmKCEoMDxkKSlyZXR1cm4gMDtmb3IodmFyIGUsZj1jLGc9YytkLTEsaD0wO2g8YS5sZW5ndGg7KytoKXtpZihlPWEuY2hhckNvZGVBdChoKSw1NTI5Njw9ZSYmNTczNDM+PWUpe3ZhciBqPWEuY2hhckNvZGVBdCgrK2gpO2U9NjU1MzYrKCgxMDIzJmUpPDwxMCl8MTAyMyZqO31pZigxMjc+PWUpe2lmKGM+PWcpYnJlYWs7YltjKytdPWU7fWVsc2UgaWYoMjA0Nz49ZSl7aWYoYysxPj1nKWJyZWFrO2JbYysrXT0xOTJ8ZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2UgaWYoNjU1MzU+PWUpe2lmKGMrMj49ZylicmVhaztiW2MrK109MjI0fGU+PjEyLGJbYysrXT0xMjh8NjMmZT4+NixiW2MrK109MTI4fDYzJmU7fWVsc2Uge2lmKGMrMz49ZylicmVhaztiW2MrK109MjQwfGU+PjE4LGJbYysrXT0xMjh8NjMmZT4+MTIsYltjKytdPTEyOHw2MyZlPj42LGJbYysrXT0xMjh8NjMmZTt9fXJldHVybiBiW2NdPTAsYy1mfWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBnKGEsXyxiLGMpfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiLGM9MCxkPTA7ZDxhLmxlbmd0aDsrK2QpYj1hLmNoYXJDb2RlQXQoZCksNTUyOTY8PWImJjU3MzQzPj1iJiYoYj02NTUzNisoKDEwMjMmYik8PDEwKXwxMDIzJmEuY2hhckNvZGVBdCgrK2QpKSwxMjc+PWI/KytjOjIwNDc+PWI/Yys9Mjo2NTUzNT49Yj9jKz0zOmMrPTQ7cmV0dXJuIGN9ZnVuY3Rpb24gaihhKXt2YXIgYj1pKGEpKzEsYz1jYihiKTtyZXR1cm4gZyhhLCQsYyxiKSxjfWZ1bmN0aW9uIGsoYSxiKXskLnNldChhLGIpO31mdW5jdGlvbiBsKCl7SS5IRUFQOD0kPW5ldyBJbnQ4QXJyYXkoWiksSS5IRUFQMTY9bmV3IEludDE2QXJyYXkoWiksSS5IRUFQMzI9Y2E9bmV3IEludDMyQXJyYXkoWiksSS5IRUFQVTg9Xz1uZXcgVWludDhBcnJheShaKSxJLkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KFopLEkuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkoWiksSS5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoWiksSS5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoWik7fWZ1bmN0aW9uIG0oYSl7Zm9yKDswPGEubGVuZ3RoOyl7dmFyIGI9YS5zaGlmdCgpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBiKXtiKCk7Y29udGludWV9dmFyIGM9Yi5mdW5jOyJudW1iZXIiPT10eXBlb2YgYz92b2lkIDA9PT1iLmFyZz9JLmR5bkNhbGxfdihjKTpJLmR5bkNhbGxfdmkoYyxiLmFyZyk6Yyh2b2lkIDA9PT1iLmFyZz9udWxsOmIuYXJnKTt9fWZ1bmN0aW9uIG4oKXtpZihJLnByZVJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlUnVuJiYoSS5wcmVSdW49W0kucHJlUnVuXSk7SS5wcmVSdW4ubGVuZ3RoOylzKEkucHJlUnVuLnNoaWZ0KCkpO20ob2EpO31mdW5jdGlvbiBvKCl7bShwYSk7fWZ1bmN0aW9uIHAoKXttKHFhKTt9ZnVuY3Rpb24gcigpe2lmKEkucG9zdFJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucG9zdFJ1biYmKEkucG9zdFJ1bj1bSS5wb3N0UnVuXSk7SS5wb3N0UnVuLmxlbmd0aDspdChJLnBvc3RSdW4uc2hpZnQoKSk7bShyYSk7fWZ1bmN0aW9uIHMoYSl7b2EudW5zaGlmdChhKTt9ZnVuY3Rpb24gdChhKXtyYS51bnNoaWZ0KGEpO31mdW5jdGlvbiB1KCl7T2ErKyxJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJkkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhPYSk7fWZ1bmN0aW9uIHYoKXtpZihPYS0tLEkubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmSS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKE9hKSwwPT1PYSYmKFFhKSl7dmFyIGE9UWE7UWE9bnVsbCxhKCk7fX1mdW5jdGlvbiB3KGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5leHBvcnRzO0kuYXNtPWIsdigpO31mdW5jdGlvbiBjKGEpe2lmKCJib29sZWFuIj09dHlwZW9mIE8mJk8pe3ZhciBiO3RyeXtiPUJ1ZmZlci5mcm9tKGEsImJhc2U2NCIpO31jYXRjaChjKXtiPW5ldyBCdWZmZXIoYSwiYmFzZTY0Iik7fXJldHVybiBuZXcgVWludDhBcnJheShiLmJ1ZmZlcixiLmJ5dGVPZmZzZXQsYi5ieXRlTGVuZ3RoKX10cnl7Zm9yKHZhciBjPWYoYSksZD1uZXcgVWludDhBcnJheShjLmxlbmd0aCksZT0wO2U8Yy5sZW5ndGg7KytlKWRbZV09Yy5jaGFyQ29kZUF0KGUpO3JldHVybiBkfWNhdGNoKGEpe3Rocm93IG5ldyBFcnJvcigiQ29udmVydGluZyBiYXNlNjQgc3RyaW5nIHRvIGJ5dGVzIGZhaWxlZC4iKX19ZnVuY3Rpb24gZChhKXtyZXR1cm4gYyhhLnNsaWNlKDM3KSl9dmFyIGU9e2VudjphLGdsb2JhbDp7TmFOOk5hTixJbmZpbml0eToxLzB9LCJnbG9iYWwuTWF0aCI6TWF0aCxhc20yd2FzbTpTfTt1KCk7dmFyIGY9ImZ1bmN0aW9uIj09dHlwZW9mIGF0b2I/YXRvYjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxqPSIiLGs9MDthPWEucmVwbGFjZSgvW15BLVphLXowLTlcK1wvXD1dL2csIiIpO2RvIGU9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGY9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGc9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89Ii5pbmRleE9mKGEuY2hhckF0KGsrKykpLGI9ZTw8MnxmPj40LGM9KDE1JmYpPDw0fGc+PjIsZD0oMyZnKTw8NnxoLGorPVN0cmluZy5mcm9tQ2hhckNvZGUoYiksNjQhPT1nJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShjKSksNjQhPT1oJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShkKSk7d2hpbGUoazxhLmxlbmd0aCk7cmV0dXJuIGp9O2lmKEkuaW5zdGFudGlhdGVXYXNtKXRyeXtyZXR1cm4gSS5pbnN0YW50aWF0ZVdhc20oZSxiKX1jYXRjaChhKXtyZXR1cm4gUigiTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogIithKSwhMX1yZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGI9ZChKKTtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYixlKS50aGVuKGEsZnVuY3Rpb24oYSl7UigiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIithKSxGKGEpO30pfShmdW5jdGlvbihhKXtiKGEuaW5zdGFuY2UpO30pLHt9fWZ1bmN0aW9uIHgoYSxiKXtTYS52YXJhcmdzPWI7dHJ5e2Zvcih2YXIgYz1TYS5nZXQoKSxkPVNhLmdldCgpLGU9U2EuZ2V0KCksZj0wLGc9MDtnPGU7ZysrKXtmb3IodmFyIGg9Y2FbZCs4Kmc+PjJdLGs9Y2FbZCsoOCpnKzQpPj4yXSxsPTA7bDxrO2wrKylTYS5wcmludENoYXIoYyxfW2grbF0pO2YrPWs7fXJldHVybiBmfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319ZnVuY3Rpb24geSgpe3JldHVybiAkLmxlbmd0aH1mdW5jdGlvbiB6KGEsYixjKXtfLnNldChfLnN1YmFycmF5KGIsYitjKSxhKTt9ZnVuY3Rpb24gQShhKXtyZXR1cm4gSS5fX19lcnJub19sb2NhdGlvbiYmKGNhW0kuX19fZXJybm9fbG9jYXRpb24oKT4+Ml09YSksYX1mdW5jdGlvbiBCKCl7RigiT09NIik7fWZ1bmN0aW9uIEMoYSl7dGhpcy5uYW1lPSJFeGl0U3RhdHVzIix0aGlzLm1lc3NhZ2U9IlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIithKyIpIix0aGlzLnN0YXR1cz1hO31mdW5jdGlvbiBEKGEpe2Z1bmN0aW9uIGIoKXtJLmNhbGxlZFJ1bnx8KEkuY2FsbGVkUnVuPSEwLGdhfHwobygpLHAoKSxHKEkpLEkub25SdW50aW1lSW5pdGlhbGl6ZWQmJkkub25SdW50aW1lSW5pdGlhbGl6ZWQoKSxJLl9tYWluJiZvYiYmSS5jYWxsTWFpbihhKSxyKCkpKTt9KGE9YXx8SS5hcmd1bWVudHMsISgwPE9hKSkmJihuKCksMDxPYXx8SS5jYWxsZWRSdW58fChJLnNldFN0YXR1cz8oSS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0kuc2V0U3RhdHVzKCIiKTt9LDEpLGIoKTt9LDEpKTpiKCkpKTt9ZnVuY3Rpb24gRShhLGIpe2ImJkkubm9FeGl0UnVudGltZSYmMD09PWF8fChJLm5vRXhpdFJ1bnRpbWV8fChnYT0hMCxJLm9uRXhpdCYmSS5vbkV4aXQoYSkpLEkucXVpdChhLG5ldyBDKGEpKSk7fWZ1bmN0aW9uIEYoYSl7dGhyb3cgSS5vbkFib3J0JiZJLm9uQWJvcnQoYSksdm9pZCAwPT09YT9hPSIiOihRKGEpLFIoYSksYT0iXCIiK2ErIlwiIiksZ2E9ITAsImFib3J0KCIrYSsiKS4gQnVpbGQgd2l0aCAtcyBBU1NFUlRJT05TPTEgZm9yIG1vcmUgaW5mby4ifWE9YXx8e307dmFyIEcsST0idW5kZWZpbmVkIj09dHlwZW9mIGE/e306YSxKPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsQUdGemJRRUFBQUFCcEFFVllBTi9mMzhCZjJBQUFHQUJmd0YvWUFKL2Z3Ri9ZQWQvZjM5L2YzOS9BWDlnQ0g5L2YzOS9mMzkvQVg5Z0EzOStmd0YrWUFGL0FHQUhmMzkvZjM5L2Z3QmdCSDkvZjM4QVlBQUJmMkFDZjM4QVlBWi9mMzkvZjM4QmYyQUVmMzkvZndGL1lBWi9mMzkvZjM4QVlBVi9mMzkvZndCZ0EzOS9md0JnQ1g5L2YzOS9mMzkvZndGL1lBUi9mMzUvQVg1Z0NIOS9mMzkvZjM5L0FHQUZmMzkvZjM4QmZ3TFdBaEFEWlc1MkJXRmliM0owQUFjRFpXNTJEbDlmWDJGemMyVnlkRjltWVdsc0FBa0RaVzUyQzE5ZlgzTmxkRVZ5Y2s1dkFBY0RaVzUyRFY5ZlgzTjVjMk5oYkd3eE5EQUFBd05sYm5ZTlgxOWZjM2x6WTJGc2JERTBOZ0FEQTJWdWRneGZYMTl6ZVhOallXeHNOVFFBQXdObGJuWUxYMTlmYzNselkyRnNiRFlBQXdObGJuWVpYMlZ0YzJOeWFYQjBaVzVmWjJWMFgyaGxZWEJmYzJsNlpRQUtBMlZ1ZGhaZlpXMXpZM0pwY0hSbGJsOXRaVzFqY0hsZlltbG5BQUFEWlc1MkYxOWxiWE5qY21sd2RHVnVYM0psYzJsNlpWOW9aV0Z3QUFJRFpXNTJGMkZpYjNKMFQyNURZVzV1YjNSSGNtOTNUV1Z0YjNKNUFBSURaVzUyQzNObGRGUmxiWEJTWlhRd0FBY0RaVzUyREY5ZmRHRmliR1ZmWW1GelpRTi9BQU5sYm5ZT1JGbE9RVTFKUTFSUFVGOVFWRklEZndBRFpXNTJCbTFsYlc5eWVRSUJnQUtBQWdObGJuWUZkR0ZpYkdVQmNBRWdJQU5uWmdJS0J3c0tBZ3dDQWdNTkF3SURBQUFOQWdBQUFBME9Ed2tDRHcwSkFBRUJBUUVEQ1FjQUVBa0pDUVFDQndBQUFBSUZBZ0FBQ0FzREF3TURBd01DQUFZQ0NnSUFBZ2NBQWdJRERRTUNBZ2NEQUFBQ0F3QU5CUkVTQndzVEFnTUFCQVVHQVFjSUZBWVBBbjhCUWNBNUMzOEJRY0M1d0FJTEI3QUNGaEZmWDE5bGNuSnViMTlzYjJOaGRHbHZiZ0JOQlY5bWNtVmxBRm9GWDIxaGFXNEFFQWRmYldGc2JHOWpBRmtIWDIxbGJXTndlUUJjQjE5dFpXMXpaWFFBWFExZmNISnZZMlZ6YzE5a1lYUmhBQklGWDNOaWNtc0FYZ2hmYzJWMGJXOWtaUUFSQ21SNWJrTmhiR3hmYVdrQVh3dGtlVzVEWVd4c1gybHBhUUJnREdSNWJrTmhiR3hmYVdscGFRQmhFR1I1YmtOaGJHeGZhV2xwYVdscGFXa0FZaEZrZVc1RFlXeHNYMmxwYVdscGFXbHBhUUJqREdSNWJrTmhiR3hmYW1scWFRQnhDV1I1YmtOaGJHeGZkZ0JsQ21SNWJrTmhiR3hmZG1rQVpoQmtlVzVEWVd4c1gzWnBhV2xwYVdscEFHY1RaWE4wWVdKc2FYTm9VM1JoWTJ0VGNHRmpaUUFQQ25OMFlXTnJRV3hzYjJNQURBeHpkR0ZqYTFKbGMzUnZjbVVBRGdsemRHRmphMU5oZG1VQURRa21BUUFqQUFzZ2FFazNhR2xFUlVaSFNHbHBhazg1T2twcWFtcHJObXc5YlV0dUxHODRjRUVLcU1FQlpoc0JBWDhqQWlFQklBQWpBbW9rQWlNQ1FROXFRWEJ4SkFJZ0FRc0VBQ01DQ3dZQUlBQWtBZ3NLQUNBQUpBSWdBU1FEQ3hzQVFmQXJFQk5CZjBZRVFFRUFEd3RCOENzb0FnQVFGRUYvUndzTUFFSHdLeWdDQUNBQUVCVUxjQUFnQUVVRVFFSGVJUkJZR2dzZ0FDNEJBQ0FEUndSQVFaQWhRYUFoUVI1QnB5RVFBUXNnQUVISUFXb3VBUUFnQkVjRVFFRzBJVUdnSVVFZlFhY2hFQUVMSUFVZ0FFR2dIMm91QVFCR0JFQkI4Q3NvQWdBZ0FpQUFJQUVRRmc4RlFjZ2hRYUFoUVNCQnB5RVFBUXRCQUFzdEFDQUFCSDhnQUVIZ0JSQlpJZ0EyQWdBZ0FBUi9FQ29nQUVIY0JXcEJBRFlDQUVFQUJVRi9Dd1ZCZndzTEJnQWdBQkFZQ3lJQUlBQUVmeUFBUWR3RmFpZ0NBRUVxUmdSL0lBQWdBUkFaQlVGL0N3VkJmd3NMeFFFQUlBQkZCRUJCZnc4TElBSkZJQUJCM0FWcUtBSUFRU3BIY2dSQVFYOFBDeUFCSUFNUUZ3UkFRWDhQQ3dKQUlBRkJnUG9CU0FSQUlBRkJnUDBBU0FSQUlBRkJ3RDVyUlFSQUlBQWdBaUFERUJzaEFBd0RDMEYvRHdVZ0FVR0EvUUJyUlFSQUlBQWdBaUFERUNBaEFBd0RDMEYvRHdzQUJTQUJRWUQzQWtnRVFDQUJRWUQ2QVd0RkJFQWdBQ0FDSUFNUUh5RUFEQU1MUVg4UEJTQUJRWUQzQW10RkJFQWdBQ0FDSUFNUUdpRUFEQU1MUVg4UEN3QUxBQXNnQUVFQklBQkJBVWdiQzRVQkFBSi9JQUVnQUVHQStnRklCSDhDZnlBQVFZRDlBRWdFUUVFSUlBQkJ3RDVyUlEwQkdrRi9EQU1MUVg4Z0FFR0EvUUJyRFFJYVFSQUxCU0FBUVlEM0FrZ0VmMEYvSUFCQmdQb0JhdzBDR2tFZ0JVRi9JQUJCZ1BjQ2F3MENHa0V3Q3dzaUFFRWViRVlnQVNBQVFRcHNSaUFCSUFCQkZHeEdjbkpCQVhOQkgzUkJIM1VMQzQwREFRRi9JQUJGQkVCQmZ3OExJQUJCQVRZQ0FDQUFRUVJxSWdGQ0FEY0NBQ0FCUWdBM0FnZ2dBRUdVQW1wQ0FEY0NBQ0FBUVJScUVEQWdBRUcwQVdvaUFVR0FDQ2tCQURjQkFDQUJRWWdJS1FFQU53RUlJQUZCa0FncEFRQTNBUkFnQUVITUFXb2lBVUdnQ0NrQkFEY0JBQ0FCUWFnSUtRRUFOd0VJSUFGQnNBZ3BBUUEzQVJBZ0FFSGtBV29pQVVIQUNDa0JBRGNCQUNBQlFjZ0lLUUVBTndFSUlBRkIwQWdwQVFBM0FSQWdBRUg4QVdvaUFVSGdDQ2tCQURjQkFDQUJRZWdJS1FFQU53RUlJQUZCOEFncEFRQTNBUkFnQUVHY0FtcEJBRUhBQVJCZEdrRUFJUUVEUUNBQVFkd0RhaUFCUVFGMGFrR1F6Z0E3QVFBZ0FVRUJhaUlCUWVBQVJ3MEFDeUFBUWFnRmFpSUJRZ0EzQWdBZ0FVSUFOd0lJSUFGQ0FEY0NFQ0FCUVFBMkFoZ2dBRUdjQldwQndBdzdBUUFnQUVHZUJXcEJ3QXc3QVFBZ0FFR2dCV3BCd0F3N0FRQWdBRUdpQldwQndBdzdBUUFnQUVHa0JXcEJ3QXc3QVFBZ0FFR21CV3BCd0F3N0FRQWdBRUVBRUJrRVFFRi9Ed3NnQUVIY0JXcEJLallDQUVFQUMrZ0RBQUpBQWtBQ1FBSkFBa0FnQVE0RUFBRUNBd1FMSUFCQnhBVnFJZ0ZCb0NBb0FRQTJBUUFnQVVHa0lDNEJBRHNCQkNBQVFjb0ZhaUlCUWFZZ0tBRUFOZ0VBSUFGQnFpQXVBUUE3QVFRZ0FFSFFCV29pQVVHVUlDZ0JBRFlCQUNBQlFaZ2dMZ0VBT3dFRUlBQkIxZ1ZxSWdCQm1pQW9BUUEyQVFBZ0FFR2VJQzRCQURzQkJFRUFEd3NnQUVIRUJXb2lBVUdnSUNnQkFEWUJBQ0FCUWFRZ0xnRUFPd0VFSUFCQnlnVnFJZ0ZCcGlBb0FRQTJBUUFnQVVHcUlDNEJBRHNCQkNBQVFkQUZhaUlCUWF3Z0tBRUFOZ0VBSUFGQnNDQXVBUUE3QVFRZ0FFSFdCV29pQUVHeUlDZ0JBRFlCQUNBQVFiWWdMZ0VBT3dFRVFRQVBDeUFBUWNRRmFpSUJRY1FnS0FFQU5nRUFJQUZCeUNBdUFRQTdBUVFnQUVIS0JXb2lBVUhLSUNnQkFEWUJBQ0FCUWM0Z0xnRUFPd0VFSUFCQjBBVnFJZ0ZCdUNBb0FRQTJBUUFnQVVHOElDNEJBRHNCQkNBQVFkWUZhaUlBUWI0Z0tBRUFOZ0VBSUFCQndpQXVBUUE3QVFSQkFBOExJQUJCeEFWcUlnRkJ4Q0FvQVFBMkFRQWdBVUhJSUM0QkFEc0JCQ0FBUWNvRmFpSUJRY29nS0FFQU5nRUFJQUZCemlBdUFRQTdBUVFnQUVIUUJXb2lBVUhRSUNnQkFEWUJBQ0FCUWRRZ0xnRUFPd0VFSUFCQjFnVnFJZ0JCMWlBb0FRQTJBUUFnQUVIYUlDNEJBRHNCQkVFQUR3dEJmd3QyQVFaL0l3SWhBeU1DUWVBYWFpUUNJQU5CZ0JkcUlRVWdBeUlHUVFCQmdCY1FYUm9nQWtIZ0EyMGhCeUFDUWQ4RFNnUkFJQUJCRkdvaENFRUFJUVFEUUNBQklBUkIwQUJzUVFGMElBVnFJQWdnQmhBdklBUkJBV29pQkNBSFJ3MEFDd3NnQUNBRklBSkJCbTBRR3lFQUlBTWtBaUFBQ3pRQkFYOGpBaUVESXdKQkVHb2tBaUFBSUFBZ0F5QUFJQUVnQWlBREVDRWdBaEFjUVJCMFFSQjFJZ0EyQWdBZ0F5UUNJQUFMcXhBQkczOGpBaUVMSXdKQmdBRnFKQUlnQzBIZ0FHb2hEaUFMUVVCcklROGdDMEVnYWlJTVFnQTNBd0FnREVJQU53TUlJQXhDQURjREVDQUxJaEJDQURjREFDQUxRZ0EzQXdnZ0MwSUFOd01RQW44Q1FBSkFBa0FnQTBIUUFHc09VUUFDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBUUlMSUFCQnhBVnFJUVVnQUVIS0JXb2hCQ0FBUWRZRmFpRUhJQUJCMEFWcURBSUxJQUJCeGdWcUlRVWdBRUhNQldvaEJDQUFRZGdGYWlFSElBQkIwZ1ZxREFFTElBQkJ5QVZxSVFVZ0FFSE9CV29oQkNBQVFkb0ZhaUVISUFCQjFBVnFDeUVESUFjdUFRQWhDQ0FFTGdFQUlSY2dCUzRCQUNFWUlBSkJFSFJCRUhWQkNrb0VRQ0FETGdFQUlRMUJBQ0VDUVFBaEEwRUFJUVVEUUNBQ1FRRjBJQUZxSWdjdUFRQWdBRUcwQVdvZ0FrRUJkR291QVFBZ0FFSGtBV29nQWtFQmRHb3VBUUFnQWtFQmRDQU9haEFuSUFKQkFYUkJnQWxxTGdFQWJDRUtJQWN1QVFBZ0FFSE1BV29nQWtFQmRHb3VBUUFnQUVIOEFXb2dBa0VCZEdvdUFRQWdBa0VCZENBUGFoQW5JQUpCQVhSQm9BbHFMZ0VBYkNFSklBb2dCeTRCQUNBQVFiUUJhaUFDUVFacUlnUkJBWFJxTGdFQUlBQkI1QUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEbW9RSnlBRVFRRjBRWUFKYWk0QkFHeHFJUVlnQ1NBSExnRUFJQUJCekFGcUlBUkJBWFJxTGdFQUlBQkIvQUZxSUFSQkFYUnFMZ0VBSUFSQkFYUWdEMm9RSnlBRVFRRjBRYUFKYWk0QkFHeHFJUWNnQmhBZFFSOGdCaHNnQnhBZFFSOGdCeHRyUVJCMElnUkJFSFVnQWtFQmRFSGNJR291QVFCc0lBTnFJUU5CQVNBRklBUkJEblVnRFVvYklRVWdCa0VNZGlJRVFSQjBRUUJLQkg4Z0FrRUJkQ0FNYWlBS1FRSjBRWUNBZjNFZ0JFSC8vd054RUM0aUJEc0JBRUdBZ0FFZ0JHdEIvLzhEY1NFR0lBSkJCbW9GUVlDQUFTRUdJQUlMUVFGMElBeHFJQVk3QVFBZ0IwRU1kaUlFUVJCMFFRQktCRUFnQWtFQmRDQVFhaUFKUVFKMFFZQ0FmM0VnQkVILy93TnhFQzRpQkRzQkFDQUNRUVpxUVFGMElCQnFRWUNBQVNBRWF6c0JBQXNnQWtFQmFpSUNRUVpIRFFBTElBVkIvLzhEY1NBRElBaE9jaUlOUVFCSElSSkJBQ0VHUVlEa0FDRUNBMEFnQUNBR1FRRjBJQUZxSWhNdUFRQWdCaEFwUVJCMFFSQjFRUVIwSUFCQnRBRnFJQVpCQVhScUloUkJBQ0FHUVFGMFFZQUphaUlWRUI1QkJuWnJRUkIwUVJCMVFZQ2FBV3hCRUhZaEdVSElBQ0FHYXlFYUlBSkIvLzhEY1VHQUJXb2lBa0gvL3dOeElSc2dBa0VRZEVFUWRTRWNRUUFoQ2dOQUlBQkJ0QUZxSUFZZ0NrRUdiR29pQ0VFQmRHb2lFUzRCQUNFQ0lBQkJ6QUZxSUFoQkFYUnFJaDB1QVFBaEZpQUFRZVFCYWlBSVFRRjBhaUlETGdFQUlRVWdBRUg4QVdvZ0NFRUJkR29pQnk0QkFDRUVJQkVnQ2lBYWFpSVJRUWQwSUFwQkIzUkJnQVZxSWg0Z0dTQVNCSDhnQWdVZ0FrSC8vd054SUFoQkFYUWdEbW91QVFBZ0NFRUJkQ0FNYWk0QkFFRUZkR3hCRUhWQmp3VnNRUloxYWtILy93TnhDMEgvL3dOeGFpSUpJQWxCRUhRZ0hrRVFkRWdiSWdrZ0NVRVFkQ0FSUVJkMFNoczdBUUFnRWdSQUlCMGdHeUFLUVFGMFFlZ2dhaTRCQUNJQ0lCWWdDRUVCZENBUGFpNEJBQ0lESUFoQkFYUWdFR291QVFBaUJVRUZkR3hCRUhWQm1qTnNRUlYxUVFGcVFRRjFhaUlKUWYvL0EzRWdDVUVRZEVFUWRTQUNTQnNpQWlBY0lBSkJFSFJCRUhWSUd6c0JBQ0FESUJNdkFRQWdGa0VFYWtFRGRXdEJFSFJCRUhWc1FRTjFRWUJnYWlBRlFRSjFiQ0lDUVFSMUlRVWdBa0VQU2dSL1FSZ2hDVUdBZ0lBRUlRZ2dCeUVESUFVZ0JFRUtiRUgvL3dOeEVDNGhCU0FFQlVFWUlRbEJnSUNBQkNFSUlBY2hBMEVBUVFBZ0JXc2dCRUVLYkVILy93TnhFQzVySVFVZ0JBc2hBZ1VnQ0VFQmRDQU9haTRCQUNBVEx3RUFJQUpCQTNWclFSQjBRUkIxYkVFRGRVR0FZR29nQ0VFQmRDQU1haTRCQUVFQ2FrRUNkV3dpQWtFT2RTRUVJQUpCLy84QVNnUi9RUlloQ1VHQWdJQUJJUWdnQkNBRklnSVFMZ1ZCRmlFSlFZQ0FnQUVoQ0VFQVFRQWdCR3NnQlNJQ0VDNXJDeUVGQ3lBRFFZQURJQUpCLy84RGNTQUlJQVZCRUhScUlBbDFhaUlDUWYvL0EzRWdBa0VRZEVHQWdJQU1TQnM3QVFBZ0NrRUJhaUlLUVFKSERRQUxJQlJCQUNBVkVCNGhBaUFBUWN3QmFpQUdRUUYwYWlJRFFRQWdCa0VCZEVHZ0NXb2lCQkFlSWdWQkNYWWdBa0VKZG10QkVIUkJFSFVpQnlBR1FRRjBRZXdnYWk0QkFDSUtTQVJBSUFNZ0NpQUhhMEVRZEVFUWRTSURRUTFzUVFKMlFmLy9BM0VnQkJBZUlRSWdGRUVBSUFOQmdJQURiRUVRZG10Qi8vOERjU0FWRUI0aEF3VWdBaUVESUFVaEFnc2dBa0VKZEVFUWRTSUZJQVpCQVhSQitDQnFMZ0VBSWdJaUJFb0VRQ0FBUWN3QmFpQUdRUUYwYWlJSElBUWdCV3NpQlNBSEx3RUFhanNCQUNBR1FRRjBJQUJxUWRnQmFpSUVJQVF2QVFBZ0JXbzdBUUFMSUFOQkNYUkJFSFVpQXlBR1FRRjBRWVFoYWk0QkFDSUZTZ1JBSUFCQnRBRnFJQVpCQVhScUlnUWdCU0FEYXlJRElBUXZBUUJxT3dFQUlBWkJBWFFnQUdwQndBRnFJZ1VnQlM4QkFDQURhanNCQUFzZ0JrRUJhaUlHUVFaSERRQUxJQUJCbEFKcUlnRWdBU2dDQUVFQmFqWUNBQ0FOUWYvL0EzRUVRQ0FBUVpvQ2FpSUJMZ0VBUVFGcVFSQjBRUkIxSVFJZ0FTQUNPd0VBSUFKQkJrb0VRQ0FCUVFZN0FRQWdBRUdZQW1vZ0Z6c0JBQ0FMSkFJZ0RROEZJQUJCbUFKcUlCZzdBUUFnQ3lRQ0lBMFBDd0FMQ3lBQVFaZ0NhaUlDTGdFQUlnRkJBRW9FZnlBQ0lBRkJmMm83QVFBZ0FVSC8vd054UVFKcVFmLy9BM0VGUVFBTElRRWdBRUdhQW1wQkFEc0JBQ0FMSkFJZ0FRdHVBUUYvSUFCRkJFQkJBQThMUVlDQWdJQjhRUUJCRUNBQUlBQkJIM1Z6SWdCQi8vOEJTeHNpQVVFSWNpQUJRWUNBZ0h3Z0FYWWdBSEZGR3lJQlFRUnlJQUZCZ0lDQVFDQUJkaUFBY1VVYklnRkJBbklnQVVHQWdJQ0FmaUFCZGlBQWNVVWJJZ0YySUFCeFJTQUJhZ3RVQVFGL0lBQWdBVUgvL3dOeElnRWdBQzhCQUdvaUF6c0JBQ0FDTGdFQUlBTkJFSFJCRUhWc0lRTWdBU0FBUVF4cUlnRXZBUUJxSVFBZ0FTQUFPd0VBSUFNZ0FrRU1haTRCQUNBQVFSQjBRUkIxYkdvTFJnRUJmeU1DSVFNakFrR2dDMm9rQWlBQklBTkI0QU5xSWdFZ0FFRU1haUFDRUNnZ0FTQURJQUJCQkdvZ0FrRUJkUkFvSUFBZ0F5QUNRUUoxRUJzaEFDQURKQUlnQUFzd0FRRi9Jd0loQXlNQ1FlQURhaVFDSUFFZ0F5QUFRUVJxSUFJUUtDQUFJQU1nQWtFQmRSQWJJUUFnQXlRQ0lBQUw1QUlCQjM4akFpRUlJd0pCOEFWcUpBSWdDRUh3QTJvaEJTQUlRWUFDYWlFSklBaEJnQUZxSVFZZ0NDSUhRZUFGYWlJRVFRQTdBUUFnQWtFQmRTRUtJQUpCZjB3RVFFSDZJVUdMSWtHS0FrRzBJaEFCQ3lBQ1FmRUJTQVJBSUFFZ0FpQUFRYWdGYWlBQVFiSUZhaUFGSUFrUUlpQUZJQW9nQUVHcUJXb2dBRUcwQldvZ0JpQUhFQ0lnQmlBQ1FRSjJJZ0ZCc0FFZ0JDQURRUXBxRUNNZ0J5QUJRYkFCSUFRZ0EwRUlhaEFqSUFrZ0NpQUFRYXdGYWlBQVFiWUZhaUFHSUFjUUlpQUdJQUZCc0FFZ0JDQURRUVpxRUNNZ0J5QUJJQUJCcmdWcUlBQkJ1QVZxSUFVZ0NSQWlJQVVnQWtFRGRpSUJRWkFDSUFRZ0EwRUVhaEFqSUFrZ0FTQUFRYkFGYWlBQVFib0ZhaUFHSUFjUUlpQUdJQUpCQkhZaUFVSHdBaUFFSUFOQkFtb1FJeUFISUFFZ0FFRzhCV29nQlJBa0lBVWdBVUh3QWlBRUlBTVFJeUFFTGdFQUlRQWdDQ1FDSUFBUEJVSFFJa0dMSWtHTEFrRzBJaEFCQzBFQUMzc0JBWDhnQUNBQlFRRjFJZ1pCN0tNQklBSWdCQkFtSUFCQkFtb2dCa0hES3lBRElBVVFKaUFCUVFGTUJFQVBDMEVBSVFBRFFDQUVRUUpxSVFFZ0JDQUVMZ0VBSWdNZ0JTOEJBR3M3QVFBZ0JVRUNhaUVDSUFVZ0F5QUZMd0VBYWpzQkFDQUFRUUZxSWdBZ0JrZ0VRQ0FCSVFRZ0FpRUZEQUVMQ3d1SUFnRUNmeU1DSVFZakFrRVFhaVFDSUFZaUJVRUFOZ0lBSUFCRkJFQkI0eUpCaXlKQnBBRkI4eUlRQVFzZ0FVRUFUQVJBUWY4aVFZc2lRYVVCUWZNaUVBRUxJQUFnQVNBRkVERWlBRVVFUUNBRUlBSTdBUUFnQmlRQ0R3dEJFU0FBRUNWcklRRWdCU0FGS0FJQUlBRnFJZ1UyQWdBZ0JDQUNRZi8vQTNGQkFDQUFRUUFnQVd0MElBQWdBWFlnQVVFQVNCc2lBVUVFZGtIL0IzRkJnUEFBY2tIVXdBRnNRUk4ySUFWQkVIUkJFSFZCMU1BQmJFRUpkbW9pQUNBQVFZQ0FBbkViYWpzQkFDQURMZ0VBSWdBaEFpQUFRUXRPQkVBZ0JpUUNEd3NnQlVGL1NnUkFJQU1nQWtFTGFqc0JBQ0FHSkFJRklBTWdBaUFCUVFBZ0JXdDJhanNCQUNBR0pBSUxDN29CQVFoL0lBRkJBRXdFUUE4TElBSkJBbW9oQlNBQ1FRUnFJUVlnQWtFR2FpRUhRUUFoQ0FOQUlBQXVBUUFoQkNBRkxnRUFJUWtnQlNBQ0xnRUFJZ283QVFBZ0FFRUNhaUVMSUFJZ0FDNEJBRHNCQUNBS1FiS1lmMndnQkNBSmFrSG5NMnhxSUFZdUFRQWlBRUhNUEd4cUlBY3VBUUJCakZSc2FpRUVJQWNnQURzQkFDQUdJQVJCRG5aQi8vOERjU0lBT3dFQUlBTkJBbW9oQkNBRElBQTdBUUFnQ0VFQmFpSUlJQUZIQkVBZ0N5RUFJQVFoQXd3QkN3c0xad0VCZnlBQVJRUkFRUUFQQ3lBQVFZQ0FnSUI0UVFCQkVDQUFRZi8vQTBzYklnRkJDSElnQVNBQVFZQ0FnSGdnQVhaeFJSc2lBVUVFY2lBQklBQkJnSUNBZ0g4Z0FYWnhSUnNpQVVFQ2NpQUJJQUJCZ0lDQWdId2dBWFp4UlJzaUFIWnhSU0FBYWd1TUFRRURmeUFETHdFQVFSQjBJUVVnQVVFQVRBUkFJQU1nQlVFUWRqc0JBQThMSUFKQkVIUkJFSFVoQmtFQUlRY2dCU0VDQTBBZ0JFRUNhaUVGSUFRZ0JpQUFMZ0VBYkNBQ2FpSUNRUkIyT3dFQUlBQXVBUUJCRG5RZ0JpQUNRUkIxYkd0QkFYUWhBaUFBUVFScUlRQWdCMEVCYWlJSElBRkhCRUFnQlNFRURBRUxDeUFESUFKQkVIWTdBUUFMb1FFQkFYOGdBa0VRZEVFUmRVR0FnQWhxSUFJUUxrRVFkQ0lFUVJCMUlRSWdBeUFBUWYvL0EzRkJBM1FnQVVILy93TnhhMEVRZEVFUWRTSUFJQVJCRW5VaUEwRU9kQ0FEYkVFUWRXeEJDbllpQVRzQkFDQUFJQUZCRUhSQkVIVnNJZ0JCZ05TdkJVNEVRRUVBRHdzZ0FrRUFJQUJCQjNSQkVIVkIwT0lGYkVHQWdIeHhheUlBUVJCMlFmOEhjVUdBQ0hJZ0FFR0FnSUJnYzBFYWRVRUJhblpzQzkwQkFRWi9JQUlvQWdBaEJDQUNRUVJxSWdZb0FnQWhCU0FEUVFGMUlRZ2dBMEVCVEFSQUlBSWdCRFlDQUNBR0lBVTJBZ0FQQzBFQUlRY2dCQ0VESUFVaEJBTkFJQUVnQTBFQmRpQUFMZ0VBUWZzb2JFRU9kbW9pQXpzQkFDQUFMZ0VBSUFOQkVIUkJFSFVpQ1VIN0tHeEJESFZySVFNZ0FVRUNhaUVGSUFFZ0JFRUJkaUFBUVFKcUlnRXVBUUJCOEFwc1FRNTFha0VRZEVFUWRTSUVJQWxxT3dFQUlBQkJCR29oQUNBQkxnRUFJQVJCOEFwc1FReDFheUVFSUFkQkFXb2lCeUFJU0FSQUlBVWhBUXdCQ3dzZ0FpQUROZ0lBSUFZZ0JEWUNBQXYrQmdFSGZ5QUFRWndDYWlBQ1FRUjBJZ1ZCQVhScUlRY2dBRUhjQTJvZ0JVRUJkR29oQXlBQ1FRWk9CRUJCanlOQnBpTkJ6QUJCeHlNUUFRc2dCMEVlYWlFSUlBTkJIbW9oQ1VFQUlRVURRQ0FGUVFGMElBZHFJZ1l1QVFBaUJFSGtBRVlFUUNBRklRWURRQ0FHUVFGMElBTnFJQVpCQVdvaUJFRUJkQ0FEYWk0QkFEc0JBQ0FHUVFGMElBZHFJQVJCQVhRZ0Iyb3VBUUE3QVFBZ0JFRVFSd1JBSUFRaEJnd0JDd3NnQ0VIbEFEc0JBQ0FKUVpET0FEc0JBQVVnQmlBRVFRRnFPd0VBQ3lBRlFRRnFJZ1ZCRUVjTkFBc0NRQUpBQWtBZ0EwRU9haTRCQUNBQlFSQjBRUkIxU2dSQUlBTkJCbW91QVFBZ0FVRVFkRUVRZFVvRVFDQURRUUpxTGdFQUlBRkJFSFJCRUhWS0JFQWdBeTRCQUNBQlFSQjBRUkIxVENFRURBTUZRUUpCQXlBRFFRUnFMZ0VBSUFGQkVIUkJFSFZLR3lFRURBTUxBQVVnQTBFS2FpNEJBQ0FCUVJCMFFSQjFTZ1JBUVFSQkJTQURRUWhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1GUVFaQkJ5QURRUXhxTGdFQUlBRkJFSFJCRUhWS0d5RUVEQU1MQUFzQUJTQURRUjVxTGdFQUlBRkJFSFJCRUhWS0JFQWdBMEVXYWk0QkFDQUJRUkIwUVJCMVNnUkFJQU5CRW1vdUFRQWdBVUVRZEVFUWRVb0VRRUVJUVFrZ0EwRVFhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VCVUVLUVFzZ0EwRVVhaTRCQUNBQlFSQjBRUkIxU2hzaEJBd0VDd0FGSUFOQkdtb3VBUUFnQVVFUWRFRVFkVW9FUUVFTVFRMGdBMEVZYWk0QkFDQUJRUkIwUVJCMVNoc2hCQXdFQlNBRFFSeHFMZ0VBSUFGQkVIUkJFSFZLQkVCQkRpRUVEQVVGUVE4aEJBd0dDd0FMQUFzQUN3c01BZ3RCRHlFRkEwQWdCVUVCZENBRGFpQUZRWDlxSWdaQkFYUWdBMm91QVFBN0FRQWdCVUVCZENBSGFpQUdRUUYwSUFkcUxnRUFPd0VBSUFZZ0JFb0VRQ0FHSVFVTUFRc0xDeUFFUVFGMElBTnFJQUU3QVFBZ0JFRUJkQ0FIYWtFQk93RUFDeUFBUVpRQ2FpZ0NBQ0lCUVFKS0JFQWdBMEVFYWlFREJTQUJRUUJNQkVBZ0FFR2NCV29nQWtFQmRHb2lBaTRCQUVFQUlnRkJBV3BzSVFBZ0FpQUJRZi8vQVhOQndBeHNRWUNBQVdvZ0FHcEJEM1pCLy84RGNTSUFPd0VBSUFBUEN3dEJtVE5CdC8wQklBTXVBUUFpQlNBQVFad0ZhaUFDUVFGMGFpNEJBRWdiSVFFZ0FVSC8vd0Z6SUFWQkVIUkJFSFZzUVlDQUFXb2dBRUdjQldvZ0FrRUJkR29pQWk0QkFDQUJRUUZxYkdwQkQzWkIvLzhEY1NFQUlBSWdBRHNCQUNBQUN3UUFFQ3NMQ2dCQjlDdEJBUkJiR2dzRUFCQXRDL0lCQVF4L0l3SWhBQ01DUVRCcUpBSWdBRUVzYWlJQlFRQTJBZ0FnQUVFb2FpSUNRUUEyQWdBZ0FFRWthaUlEUVFBMkFnQWdBRUVnYWlJRVFRQTJBZ0FnQUVFY2FpSUZRUUEyQWdBZ0FFRVlhaUlHUVFBMkFnQWdBRUVVYWlJSFFRQTJBZ0FnQUVFUWFpSUlRUUEyQWdBZ0FFRU1haUlKUVFBMkFnQWdBRUVJYWlJS1FRQTJBZ0FnQUVFRWFpSUxRUUEyQWdBZ0FFRUFOZ0lBSUFCQkFUWUNBQ0FMUVFJMkFnQWdDa0VETmdJQUlBbEJCRFlDQUNBSVFRVTJBZ0FnQjBFQk5nSUFJQVpCQVRZQ0FDQUZRUUUyQWdBZ0JFRUNOZ0lBSUFOQkFUWUNBQ0FDUVFJMkFnQWdBVUVETmdJQUlBQWtBZ3NmQUNBQlFmLy9BM0ZGQkVCQi8vLy8vd2NQQ3lBQUlBRkJFSFJCRUhWdEM1OEJBUUovSUFCQjRBTWdBMEdBQ0dvaUFDQUNFRFFnQUVId0FTQURRVUJySUFKQklHb1FOU0FEUVNCcUlnUWdBa0hnQUdvaUFDa0NBRGNDQUNBRUlBQXBBZ2czQWdnZ0JDQUFLUUlRTndJUUlBUWdBQ2tDR0RjQ0dDQUFJQU5CNEFkcUlnVXBBZ0EzQWdBZ0FDQUZLUUlJTndJSUlBQWdCU2tDRURjQ0VDQUFJQVVwQWhnM0FoZ2dCQ0FEUWRBQUVESWdBMEdnQVNBQklBSkJnQUZxRURNTERBQWdBRUVBUWFBQkVGMGFDMWtCQTM4Z0FDQUJJQUVRT3lFRUlBRkJBRXdFUUNBQ0lBUTJBZ0JCQUE4TFFRQWhBMEVBSVFVRFFDQURJQUF1QVFBaUF5QURiQ0FFZG1vaEF5QUFRUUpxSVFBZ0JVRUJhaUlGSUFGSERRQUxJQUlnQkRZQ0FDQURDNDBDQVFoL0lBSkJBRXdFUUE4TFFRQWhBd05BSUFFZ0FDZ0NBRUdLQm14QmdJQUJhaUFBUVFScUlnVW9BZ0JCL205c2FpQUFRUWhxSWdZb0FnQkJ2d2hzYWlBQVFReHFJZ1FvQWdCQjliVUJiR29nQUVFUWFpSUhLQUlBUWVma0FHeHFJQUJCRkdvaUNDZ0NBRUc1WW14cUlBQkJHR29pQ1NnQ0FFRzVBMnhxSUFCQkhHb2lDaWdDQUVIZUFXeHFOZ0lBSUFGQkJHb2dCU2dDQUVIZUFXeEJnSUFCYWlBR0tBSUFRYmtEYkdvZ0JDZ0NBRUc1WW14cUlBY29BZ0JCNStRQWJHb2dDQ2dDQUVIMXRRRnNhaUFKS0FJQVFiOEliR29nQ2lnQ0FFSCtiMnhxSUFCQklHb29BZ0JCaWdac2FqWUNBQ0FCUVFocUlRRWdBMEVCYWlJRElBSkhCRUFnQkNFQURBRUxDd3ZGQkFFS2Z5QUJRUUYxSVFzZ0FVRUJUQVJBRHdzZ0EwRUVhaUVISUFOQkNHb2hDQ0FEUVF4cUlRbEJBQ0VHQTBBZ0F5Z0NBQ0FHUVFOMElBQnFJZ3dvQWdBaUJFR0FRR3NnQnlnQ0FDSUthMEVPZFVIcUYyeHFJUVVnQXlBRU5nSUFJQW9nQlNBSUtBSUFJZ3BySWdSQkRuVWdCRUVmZG1wQm1Na0FiR29oQkNBSElBVTJBZ0FnQ1NBS0lBUWdDU2dDQUdzaUJVRU9kU0FGUVI5MmFrSFg5UUJzYWlJRk5nSUFJQWdnQkRZQ0FDQU1JQVZCQVhVMkFnQWdCa0VCYWlJR0lBdElEUUFMSUFCQkJHb2hEQ0FCUVFGTUJFQVBDeUFEUVJScUlRWWdBMEVRYWlFSElBTkJHR29oQ0NBRFFSeHFJUWxCQUNFREEwQWdCeWdDQUNBRFFRTjBJQXhxSWdvb0FnQWlCRUdBUUdzZ0JpZ0NBQ0lOYTBFT2RVRzFCbXhxSVFVZ0J5QUVOZ0lBSUEwZ0JTQUlLQUlBSWcxcklnUkJEblVnQkVFZmRtcEIzaTlzYWlFRUlBWWdCVFlDQUNBSklBMGdCQ0FKS0FJQWF5SUZRUTUxSUFWQkgzWnFRZDdnQUd4cUlnVTJBZ0FnQ0NBRU5nSUFJQW9nQlVFQmRUWUNBQ0FEUVFGcUlnTWdDMGdOQUFzZ0FVRUJUQVJBRHd0QkFDRUJBMEFnQVVFQmRDSURRUUowSUFCcUtBSUFJQU5CQVhKQkFuUWdBR29vQWdCcUlRWWdBMEVDY2tFQ2RDQUFhaWdDQUNBRFFRTnlRUUowSUFCcUtBSUFhaUVESUFGQkFYUWdBbXBCLy84QklBWkJEM1VnQmtILy8vLy9BMG9iSWdaQmdJQitJQVpCZ0lCK1NoczdBUUFnQVVFQmNrRUJkQ0FDYWtILy93RWdBMEVQZFNBRFFmLy8vLzhEU2hzaUEwR0FnSDRnQTBHQWdINUtHenNCQUNBQlFRSnFJZ0VnQzBnTkFBc0xzQU1CQ1g4Z0FVRUJkU0VMSUFGQkFVd0VRQThMSUFOQkJHb2hEQ0FEUVFocUlRY2dBMEVNYWlFSVFRQWhCUU5BSUFNb0FnQWdCVUVDZENBQWFpNEJBRUVQZEVHQWdBRnlJZ1pCZ01BQUlBd29BZ0FpQkd0cVFRNTFRZW9YYkdvaENTQURJQVkyQWdBZ0JDQUpJQWNvQWdBaUJtc2lCRUVPZFNBRVFSOTJha0dZeVFCc2FpRUtJQXdnQ1RZQ0FDQUlJQVlnQ2lBSUtBSUFheUlFUVE1MUlBUkJIM1pxUWRmMUFHeHFJZ1EyQWdBZ0J5QUtOZ0lBSUFWQkFuUWdBbW9nQkVFQmRUWUNBQ0FGUVFGcUlnVWdDMGdOQUFzZ0FFRUNhaUVGSUFGQkFVd0VRQThMSUFOQkZHb2hCeUFEUVJCcUlRZ2dBMEVZYWlFSklBTkJIR29oQ2tFQUlRQURRQ0FJS0FJQUlBQkJBblFnQldvdUFRQkJEM1JCZ0lBQmNpSURRWURBQUNBSEtBSUFJZ0ZyYWtFT2RVRzFCbXhxSVFZZ0NDQUROZ0lBSUFFZ0JpQUpLQUlBSWdOcklnRkJEblVnQVVFZmRtcEIzaTlzYWlFRUlBY2dCallDQUNBS0lBTWdCQ0FLS0FJQWF5SUJRUTUxSUFGQkgzWnFRZDdnQUd4cUlnTTJBZ0FnQ1NBRU5nSUFJQUJCQW5RZ0Ftb2lBU0FCS0FJQUlBTkJBWFZxTmdJQUlBQkJBV29pQUNBTFNBMEFDd3ZhQmdFTWZ5QUJRUUYxSVF3Z0FFRUVhaUVQSUFOQk1Hb2hEU0FCUVFGTUJFQVBDeUFEUVFScUlRWWdBMEVJYWlFS0lBTkJER29oQ1VFQUlRY2dEU0VJQTBBZ0F5Z0NBQ0FJS0FJQUlnUkJnRUJySUFZb0FnQWlCV3RCRG5WQjZoZHNhaUVJSUFNZ0JEWUNBQ0FGSUFnZ0NpZ0NBQ0lGYXlJRVFRNTFJQVJCSDNacVFaakpBR3hxSVFRZ0JpQUlOZ0lBSUFrZ0JTQUVJQWtvQWdCcklnaEJEblVnQ0VFZmRtcEIxL1VBYkdvaUNEWUNBQ0FLSUFRMkFnQWdCMEVCZENJRVFRSjBJQUpxSUFoQkFYVTJBZ0FnQkVFQ2RDQVBhaUVJSUFkQkFXb2lCeUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRUlJxSVFjZ0EwRVFhaUVHSUFOQkdHb2hDaUFEUVJ4cUlRbEJBQ0VJQTBBZ0JpZ0NBQ0FJUVFGMElnNUJBblFnQUdvb0FnQWlCVUdBUUdzZ0J5Z0NBQ0lMYTBFT2RVRzFCbXhxSVFRZ0JpQUZOZ0lBSUFzZ0JDQUtLQUlBSWd0cklnVkJEblVnQlVFZmRtcEIzaTlzYWlFRklBY2dCRFlDQUNBSklBc2dCU0FKS0FJQWF5SUVRUTUxSUFSQkgzWnFRZDdnQUd4cUlnUTJBZ0FnQ2lBRk5nSUFJQTVCQW5RZ0Ftb2lCU0FGS0FJQUlBUkJBWFZxUVE5MU5nSUFJQWhCQVdvaUNDQU1TQTBBQ3lBQ1FRUnFJUWdnQVVFQlRBUkFEd3NnQTBFa2FpRUhJQU5CSUdvaEJpQURRU2hxSVFvZ0EwRXNhaUVKUVFBaEFnTkFJQVlvQWdBZ0FrRUJkQ0lPUVFKMElBQnFLQUlBSWdWQmdFQnJJQWNvQWdBaUMydEJEblZCNmhkc2FpRUVJQVlnQlRZQ0FDQUxJQVFnQ2lnQ0FDSUxheUlGUVE1MUlBVkJIM1pxUVpqSkFHeHFJUVVnQnlBRU5nSUFJQWtnQ3lBRklBa29BZ0JySWdSQkRuVWdCRUVmZG1wQjEvVUFiR29pQkRZQ0FDQUtJQVUyQWdBZ0RrRUNkQ0FJYWlBRVFRRjFOZ0lBSUFKQkFXb2lBaUFNU0EwQUN5QUJRUUZNQkVBUEN5QURRVFJxSVFFZ0EwRTRhaUVDSUFOQlBHb2hBMEVBSVFBRFFDQU5LQUlBSUFCQkFYUWlDa0VDZENBUGFpZ0NBQ0lHUVlCQWF5QUJLQUlBSWdsclFRNTFRYlVHYkdvaEJ5QU5JQVkyQWdBZ0NTQUhJQUlvQWdBaUNXc2lCa0VPZFNBR1FSOTJha0hlTDJ4cUlRWWdBU0FITmdJQUlBTWdDU0FHSUFNb0FnQnJJZ2RCRG5VZ0IwRWZkbXBCM3VBQWJHb2lCellDQUNBQ0lBWTJBZ0FnQ2tFQ2RDQUlhaUlHSUFZb0FnQWdCMEVCZFdwQkQzVTJBZ0FnQUVFQmFpSUFJQXhJRFFBTEM0SUJBUUovUVFFZ0JIUkJBWFVoQnlBRlJTQUFSU0FDUlhKeUlBWkJBVWh5SUFSQkFFaHlCRUJCZnc4TElBRkJFSFJCRUhVaENDQURRUkIwUVJCMUlRTkJBQ0VCQTM4Z0FVRUJkQ0FGYWlBQlFRRjBJQUJxTGdFQUlBaHNJQWRxSUFGQkFYUWdBbW91QVFBZ0EyeHFJQVIxT3dFQUlBRkJBV29pQVNBR1J3MEFRUUFMQ3lnQkFYOGdBRUVLU3dSQVFRQWhBUVZCQkJCWklnRUVRQ0FCSUFBMkFnQUZRUUFoQVFzTElBRUxEUUFnQUVVRVFBOExJQUFRV2d1VUFRRUdmeU1DSVFZakFrR0FJR29rQWlBR0lRTkJBU0FBS0FJQUlnZDBJUWdnQjBFZlJ3UkFRUUFoQlVFQUlRUURRQ0FFUVFGMElBTnFJQVZCQVhRZ0FXb3VBUUE3QVFBZ0JFRUJja0VCZENBRGFrRUFPd0VBSUFSQkFtb2hCQ0FGUVFGcUlnVWdDRWdOQUFzTElBTWdCeEJDSUFNZ0FDZ0NBRUVCRUQ4aEFDQUNJQU1nQ0VFQmRFRUVhaEJjR2lBR0pBSWdBQXZmQVFFSGZ5TUNJUVVqQWtHQUlHb2tBaUFGSWdRZ0FVRUJJQUFvQWdBaUJuUWlCMEVDYWlJRFFRRjBFRndhSUFkQkFYUWlDQ0FEU2dSQUEwQWdBMEVCZENBRWFpQUlJQU5ySWdsQkFYUWdBV291QVFBN0FRQWdBMEVCYWtFQmRDQUVha0VBSUFsQkFXcEJBWFFnQVdvdkFRQnJPd0VBSUFnZ0EwRUNhaUlEU2cwQUN3c2dCQ0FHRUVJZ0JDQUFLQUlBUVFFUVFDRURJQVpCSDBZRVFDQUZKQUlnQXc4TFFRQWhBRUVBSVFFRFFDQUFRUUYwSUFKcUlBRkJBWFFnQkdvdUFRQTdBUUFnQVVFQ2FpRUJJQUJCQVdvaUFDQUhTQTBBQ3lBRkpBSWdBd3VRQVFFQ2YwRUFJQUlRUEVFUWRFRVFkU0lESUFGQkFFb0VmMEYvSVFJRFFDQUFRUUpxSVFRZ0FDNEJBQ0lBUVFBZ0FHc2dBRUVBU2h0QkVIUkJFSFVpQUNBQ0lBQWdBa29iSVFJZ0FVRi9haUVBSUFGQkFVb0VRQ0FBSVFFZ0JDRUFEQUVMQ3lBQ1FmLy9BM0VGUVg4TElnQkJFSFJCRUhVaUFTQUJiQkFkSWdGcklBQkIvLzhEY1VVZ0FTQURTbkliQzJjQkFYOGdBRUVCSUFCQkFrRVFRUUFnQUVILy93TkxHeUlCSUFGQkNISWdBRUdBL2dNZ0FYUnhSUnNpQVNBQlFRUnlJQUJCOEFFZ0FYUnhSUnNpQVNBQlFRSnlJQUJCRENBQmRIRkZHeUlBZEhGQkFFY2dBR29pQUhSeFFRQkhJQUJxUWYvL0EzRUxsd0VCQW44Z0EwRUFTaUFGUVFCS2NTQUhJQVlnQTBGL2Ftd2lDR29pQ1NBQlNIRkZCRUJCZnc4TElBaEJBRWdFUUVFQUR3c0RmMEVBSVFGQmdCQWhBd05BSUFGQkFYUWdCR291QVFBZ0J5QUJhMEVCZENBQWFpNEJBR3dnQTJvaEF5QUJRUUZxSWdFZ0JVY05BQXNnQWtFQ2FpRUJJQUlnQTBFTWRSQStPd0VBSUFZZ0Iyb2lCeUFKU2dSL1FRQUZJQUVoQWd3QkN3c0xKQUFnQUVILy93RktCSDlCLy84QkJTQUFRWUNBZmlBQVFZQ0Fma29iUWYvL0EzRUxDNllGQVE5L1FRRWdBWFFpQmtHQUNFb0VRRUYvRHdzZ0JrRUJTaUVCSUFJRWZ5QUJSUVJBUVFBUEMwRUpJUWRCQVNFREEzOGdBMEVCZENFSUlBTkJBRW9FUUVFQUlRRURRQ0FCSUFkMElRSWdBU0FHU0FSQUlBSkJBWFJCd0ExcUxnRUFJUXBCQUNBQ1FRRjBRY0FKYWk4QkFFRVFkR3RCRUhVaEN5QUJJUUlEUUNBS0lBSWdBMnBCQVhRaUJFRUJkQ0FBYWlJSkxnRUFJZzFzUVFGcUlBUkJBWEpCQVhRZ0FHb2lEaTRCQUNJUElBdHNhMEVCZFNFRUlBSkJBWFFpQlVFQmRDQUFhaUlRTGdFQVFRNTBJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFRUTUwSVFVZ0NTQU1RWUNBQVdvZ0JHdEJEM1k3QVFBZ0RpQUZRWUNBQVNBTElBMXNRUUZxSUFvZ0QyeHFRUUYxSWdscmFrRVBkanNCQUNBUUlBeEJnSUFCYWlBRWFrRVBkanNCQUNBUklBbEJnSUFCYWlBRmFrRVBkanNCQUNBQ0lBaHFJZ0lnQmtnTkFBc0xJQU1nQVVFQmFpSUJSdzBBQ3dzZ0IwRi9haUVISUFnZ0JrZ0VmeUFJSVFNTUFRVkJBQXNMQlNBQlJRUkFRUUFQQzBFSklRZEJBU0VEQTM4Z0EwRUJkQ0VJSUFOQkFFb0VRRUVBSVFFRFFDQUJJQWQwSVFJZ0FTQUdTQVJBSUFKQkFYUkJ3QTFxTGdFQUlRcEJBQ0FDUVFGMFFjQUphaThCQUVFUWRHdEJFSFVoQ3lBQklRSURRQ0FLSUFJZ0EycEJBWFFpQkVFQmRDQUFhaUlKTGdFQUlnMXNJQXNnQkVFQmNrRUJkQ0FBYWlJT0xnRUFJZzlzYTBFUGRTRUVJQUpCQVhRaUJVRUJkQ0FBYWlJUUxnRUFJUXdnQlVFQmNrRUJkQ0FBYWlJUkxnRUFJUVVnQ1NBTUlBUnJRUUYyT3dFQUlBNGdCU0FLSUE5c0lBc2dEV3hxUVE5MUlnbHJRUUYyT3dFQUlCQWdCQ0FNYWtFQmRqc0JBQ0FSSUFVZ0NXcEJBWFk3QVFBZ0FpQUlhaUlDSUFaSURRQUxDeUFESUFGQkFXb2lBVWNOQUFzTElBZEJmMm9oQnlBSUlBWklCSDhnQ0NFRERBRUZRUUFMQ3dzTHRRVUJGSDlCQVNBQmRDSUZRWUFJU2dSQVFYOFBDeUFGUVFGTUJFQkJBQThMSUFWQkFYUWhGQ0FDUlNFVlFRa2hEVUVCSVFaQkFDRVBBMEFnQUNBVUVFTWlBa0VRZEVFUWRVR0Y2Z0JLSVFFZ0FrRVFkRUVRZFVHSzFBRktJZ0lnQVNBUGFtb2hEMEVDUVFFZ0FSc2dBU0FDR3lFRFFZQ0FBVUdBd0FBZ0FSc2dBblFoQnlBR1FRRjBJUTRnQmtFQVNpRUJJQlVFUUNBQkJFQkJBQ0VCQTBBZ0FTQU5kQ0VDSUFFZ0JVZ0VRQ0FDUVFGMFFjQU5haTRCQUNFSElBSkJBWFJCd0FscUxnRUFJUXNnQVNFQ0EwQWdCeUFDSUFacVFRRjBJZ2hCQVhRZ0FHb2lCQzRCQUNJTWJDQUxJQWhCQVhKQkFYUWdBR29pRUM0QkFDSVJiR3RCRDNVaENDQUNRUUYwSWdsQkFYUWdBR29pRWk0QkFDRUtJQWxCQVhKQkFYUWdBR29pRXk0QkFDRUpJQVFnQ2lBSWF5QURkVHNCQUNBUUlBa2dCeUFSYkNBTElBeHNha0VQZFNJRWF5QURkVHNCQUNBU0lBZ2dDbW9nQTNVN0FRQWdFeUFFSUFscUlBTjFPd0VBSUFJZ0Rtb2lBaUFGU0EwQUN3c2dCaUFCUVFGcUlnRkhEUUFMQ3dVZ0FRUkFJQU5CRG1vaEEwRUFJUUVEUUNBQklBMTBJUUlnQVNBRlNBUkFJQUpCQVhSQndBMXFMZ0VBSVFzZ0FrRUJkRUhBQ1dvdUFRQWhDQ0FCSVFJRFFDQUxJQUlnQm1wQkFYUWlDa0VCZENBQWFpSU1MZ0VBSWhCc1FRRnFJQWdnQ2tFQmNrRUJkQ0FBYWlJUkxnRUFJaEpzYTBFQmRTRUtJQUpCQVhRaUJFRUJkQ0FBYWlJVExnRUFRUTUwSVFrZ0JFRUJja0VCZENBQWFpSVdMZ0VBUVE1MElRUWdEQ0FISUFscUlBcHJJQU4xT3dFQUlCRWdCQ0FISUFnZ0VHeEJBV29nQ3lBU2JHcEJBWFVpREd0cUlBTjFPd0VBSUJNZ0J5QUphaUFLYWlBRGRUc0JBQ0FXSUFjZ0RHb2dCR29nQTNVN0FRQWdBaUFPYWlJQ0lBVklEUUFMQ3lBR0lBRkJBV29pQVVjTkFBc0xDeUFOUVg5cUlRMGdEaUFGU0FSQUlBNGhCZ3dCQ3dzZ0R3dTRBUUVGZnlBRVFSQjBRUkIxSVFjZ0JFRVFkRUVRZFVFQVRBUkFEd3NnQTBFUWRFRVFkU0VJSUFOQkVIUkJFSFZCQUVvaENTQUdRUkIwUVJCMUlRWWdCVUVRZEVFUWRTRUtRUUFoQkFOQUlBQkJBRFlDQUNBSkJFQWdCQ0FHYkNFTElBQW9BZ0FoQlVFQUlRTURRQ0FGSUFNZ0MycEJBWFFnQW1vdUFRQWdBMEVCZENBQmFpNEJBR3dnQ25WcUlRVWdBMEVCYWlJRElBaEhEUUFMSUFBZ0JUWUNBQXNnQUVFRWFpRUFJQVJCQVdvaUJDQUhSdzBBQ3d1QUFnRUdmeUFCUVhscVFRSkpCRUJCd0JsQm9CMGdBVUVJUmlJQkd5RUNRZkFCUWZBQUlBRWJJUVJCQUNFQkEwQWdBVUVCZENBQ2FpNEJBRUVDZENBQWFpSURLQUlBSVFVZ0F5QUJRUUZ5UVFGMElBSnFMZ0VBUVFKMElBQnFJZ01vQWdBMkFnQWdBeUFGTmdJQUlBRkJBbW9pQVNBRVNRMEFDdzhMUVFFZ0FYUWlBMEYvYWlFR0lBTkJBVXdFUUE4TFFRRWhBa0VBSVFRRFFDQUdJQVJySVFVZ0F5RUJBMEFnQVVFQmRTSUJJQVZLRFFBTElBSkJBblFnQUdvaEJTQUVJQUZCZjJweElBRnFJZ1JCQW5RZ0FHb2hBU0FFSUFKS0JFQWdCU2dDQUNFSElBVWdBU2dDQURZQ0FDQUJJQWMyQWdBTElBTWdBa0VCYWlJQ1J3MEFDd3RoQVFOL0lBQkZJQUZCQVVoeUJFQkJmdzhMUVFBaEJFRUFJUUlEUUNBRVFRRjBJQUJxTGdFQUlnTkJBQ0FEYXlBRFFYOUtHeUlESUFJZ0F5QUNTaHNoQWlBRVFRRnFJZ1FnQVVjTkFBc2dBa0gvL3dFZ0FrSC8vd0ZJRzBILy93TnhDMkFCQTM4Z0FFVWdBVUVCU0hJRVFFRi9Ed3RCQUNFRVFRQWhBZ05BSUFSQkFuUWdBR29vQWdBaUEwRUFJQU5ySUFOQmYwb2JJZ01nQWlBRElBSkxHeUVDSUFSQkFXb2lCQ0FCUncwQUN5QUNRZi8vLy84SElBSkIvLy8vL3dkSkd3dFFBUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUIrRHd0QkFDRURRWUNBZmlFQ0EwQWdBMEVCZENBQWFpNEJBQ0lFSUFJZ0JDQUNRUkIwUVJCMVNoc2hBaUFEUVFGcUlnTWdBVWNOQUFzZ0FndE9BUU4vSUFCQkFFY2dBVUVBU25GRkJFQkJnSUNBZ0hnUEMwRUFJUU5CZ0lDQWdIZ2hBZ05BSUFOQkFuUWdBR29vQWdBaUJDQUNJQVFnQWtvYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFVBRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy9BUThMUVFBaEEwSC8vd0VoQWdOQUlBTkJBWFFnQUdvdUFRQWlCQ0FDSUFRZ0FrRVFkRUVRZFVnYklRSWdBMEVCYWlJRElBRkhEUUFMSUFJTFRnRURmeUFBUVFCSElBRkJBRXB4UlFSQVFmLy8vLzhIRHd0QkFDRURRZi8vLy84SElRSURRQ0FEUVFKMElBQnFLQUlBSWdRZ0FpQUVJQUpJR3lFQ0lBTkJBV29pQXlBQlJ3MEFDeUFDQ3k0QkFYOGpBaUVCSXdKQkVHb2tBaUFCSUFCQlBHb29BZ0FRVGpZQ0FFRUdJQUVRQmhCTUlRQWdBU1FDSUFBTG1BTUJDMzhqQWlFSEl3SkJNR29rQWlBSFFTQnFJUVVnQnlJRElBQkJIR29pQ2lnQ0FDSUVOZ0lBSUFOQkJHb2dBRUVVYWlJTEtBSUFJQVJySWdRMkFnQWdBMEVJYWlBQk5nSUFJQU5CREdvZ0FqWUNBQ0FEUVJCcUlnRWdBRUU4YWlJTUtBSUFOZ0lBSUFGQkJHb2dBellDQUNBQlFRaHFRUUkyQWdBQ1FBSkFJQUlnQkdvaUJFR1NBU0FCRUFRUVRDSUJSZzBBUVFJaENBTkFJQUZCQUU0RVFDQURRUWhxSUFNZ0FTQURRUVJxS0FJQUlnbExJZ1liSWdNZ0FTQUpRUUFnQmh0cklna2dBeWdDQUdvMkFnQWdBMEVFYWlJTklBMG9BZ0FnQ1dzMkFnQWdCU0FNS0FJQU5nSUFJQVZCQkdvZ0F6WUNBQ0FGUVFocUlBWkJIM1JCSDNVZ0NHb2lDRFlDQUVHU0FTQUZFQVFRVENJR0lBUWdBV3NpQkVZTkFpQUdJUUVNQVFzTElBQkJFR3BCQURZQ0FDQUtRUUEyQWdBZ0MwRUFOZ0lBSUFBZ0FDZ0NBRUVnY2pZQ0FDQUlRUUpHQkg5QkFBVWdBaUFEUVFScUtBSUFhd3NoQWd3QkN5QUFRUkJxSUFCQkxHb29BZ0FpQVNBQVFUQnFLQUlBYWpZQ0FDQUtJQUUyQWdBZ0N5QUJOZ0lBQ3lBSEpBSWdBZ3QwQVFKL0l3SWhCQ01DUVNCcUpBSWdCRUVJYWlJRElBQkJQR29vQWdBMkFnQWdBMEVFYWlBQlFpQ0lQZ0lBSUFOQkNHb2dBVDRDQUNBRFFReHFJQVFpQURZQ0FDQURRUkJxSUFJMkFnQkJqQUVnQXhBREVFeEJBRWdFZmlBQVFuODNBd0JDZndVZ0FDa0RBQXNoQVNBRUpBSWdBUXNiQUNBQVFZQmdTd1JBRUUxQkFDQUFhellDQUVGL0lRQUxJQUFMQlFCQitDc0xCQUFnQUF0MkFRTi9Jd0loQkNNQ1FTQnFKQUlnQkNJRFFSQnFJUVVnQUVFa2FrRUVOZ0lBSUFBb0FnQkJ3QUJ4UlFSQUlBTWdBRUU4YWlnQ0FEWUNBQ0FEUVFScVFaT29BVFlDQUNBRFFRaHFJQVUyQWdCQk5pQURFQVVFUUNBQVFjc0Fha0YvT2dBQUN3c2dBQ0FCSUFJUVNpRUFJQVFrQWlBQUN3UUFRUUVMQXdBQkM0VUNBUVIvQWtBQ1FDQUNRUkJxSWdRb0FnQWlBdzBBSUFJUVV3Ui9RUUFGSUFRb0FnQWhBd3dCQ3lFQ0RBRUxJQUpCRkdvaUJpZ0NBQ0lGSVFRZ0F5QUZheUFCU1FSQUlBSkJKR29vQWdBaEF5QUNJQUFnQVNBRFFRZHhRUXhxRVFBQUlRSU1BUXNnQVVVZ0FrSExBR29zQUFCQkFFaHlCSDlCQUFVQ2Z5QUJJUU1EUUNBQUlBTkJmMm9pQldvc0FBQkJDa2NFUUNBRkJFQWdCU0VEREFJRlFRQU1Bd3NBQ3dzZ0FrRWthaWdDQUNFRUlBSWdBQ0FESUFSQkIzRkJER29SQUFBaUFpQURTUTBDSUFZb0FnQWhCQ0FCSUFOcklRRWdBQ0FEYWlFQUlBTUxDeUVDSUFRZ0FDQUJFRndhSUFZZ0JpZ0NBQ0FCYWpZQ0FDQUJJQUpxSVFJTElBSUxmZ0VDZnlBQVFjb0FhaUlDTEFBQUlRRWdBaUFCSUFGQi93RnFjam9BQUNBQUtBSUFJZ0ZCQ0hFRWZ5QUFJQUZCSUhJMkFnQkJmd1VnQUVFSWFrRUFOZ0lBSUFCQkJHcEJBRFlDQUNBQVFSeHFJQUJCTEdvb0FnQWlBVFlDQUNBQVFSUnFJQUUyQWdBZ0FFRVFhaUFCSUFCQk1Hb29BZ0JxTmdJQVFRQUxDNDRCQVFOL0FrQUNRQ0FBSWdKQkEzRkZEUUFnQWlFQkEwQUNRQ0FBTEFBQVJRUkFJQUVoQUF3QkN5QUFRUUZxSWdBaUFVRURjUTBCREFJTEN3d0JDd05BSUFCQkJHb2hBU0FBS0FJQUlnTkJnSUdDaEhoeFFZQ0Jnb1I0Y3lBRFFmLzkrM2RxY1VVRVFDQUJJUUFNQVFzTElBTkIvd0Z4QkVBRFFDQUFRUUZxSWdBc0FBQU5BQXNMQ3lBQUlBSnJDeHNCQVg4Z0FCQlVJZ0lnQUVFQklBSWdBUkJXUjBFZmRFRWZkUXRhQVFKL0lBRWdBbXdoQkNBQ1FRQWdBUnNoQWlBRFFjd0FhaWdDQUVGL1NnUkFJQU1RVUVVaEJTQUFJQVFnQXhCU0lRQWdCVVVFUUNBREVGRUxCU0FBSUFRZ0F4QlNJUUFMSUFBZ0JFY0VRQ0FBSUFGdUlRSUxJQUlMdEFFQkJuOGpBaUVESXdKQkVHb2tBaUFESWdRZ0FVSC9BWEVpQnpvQUFBSkFBa0FnQUVFUWFpSUNLQUlBSWdVTkFDQUFFRk1FZjBGL0JTQUNLQUlBSVFVTUFRc2hBUXdCQ3lBQVFSUnFJZ0lvQWdBaUJpQUZTUVJBSUFGQi93RnhJZ0VnQUVITEFHb3NBQUJIQkVBZ0FpQUdRUUZxTmdJQUlBWWdCem9BQUF3Q0N3c2dBRUVrYWlnQ0FDRUJJQUFnQkVFQklBRkJCM0ZCREdvUkFBQkJBVVlFZnlBRUxRQUFCVUYvQ3lFQkN5QURKQUlnQVF1R0FRRURmMEdRSUNnQ0FDSUJRY3dBYWlnQ0FFRi9TZ1IvSUFFUVVBVkJBQXNoQWlBQUlBRVFWVUVBU0FSL1FYOEZBbjhnQVVITEFHb3NBQUJCQ2tjRVFDQUJRUlJxSWdNb0FnQWlBQ0FCUVJCcUtBSUFTUVJBSUFNZ0FFRUJhallDQUNBQVFRbzZBQUJCQUF3Q0N3c2dBVUVLRUZkQkgzVUxDeUVBSUFJRVFDQUJFRkVMSUFBTDRUZ0JESDhqQWlFS0l3SkJFR29rQWlBS0lRa2dBRUgxQVVrRWYwSDhLeWdDQUNJRFFSQWdBRUVMYWtGNGNTQUFRUXRKR3lJQ1FRTjJJZ0IySWdGQkEzRUVRQ0FCUVFGeFFRRnpJQUJxSWdCQkEzUkJwQ3hxSWdGQkNHb2lCaWdDQUNJQ1FRaHFJZ1VvQWdBaUJDQUJSZ1JBUWZ3cklBTkJBU0FBZEVGL2MzRTJBZ0FGSUFSQkRHb2dBVFlDQUNBR0lBUTJBZ0FMSUFKQkJHb2dBRUVEZENJQVFRTnlOZ0lBSUFBZ0FtcEJCR29pQUNBQUtBSUFRUUZ5TmdJQUlBb2tBaUFGRHdzZ0FrR0VMQ2dDQUNJSFN3Ui9JQUVFUUVFQ0lBQjBJZ1JCQUNBRWEzSWdBU0FBZEhFaUFFRUFJQUJyY1VGL2FpSUFRUXgyUVJCeElnRWdBQ0FCZGlJQVFRVjJRUWh4SWdGeUlBQWdBWFlpQUVFQ2RrRUVjU0lCY2lBQUlBRjJJZ0JCQVhaQkFuRWlBWElnQUNBQmRpSUFRUUYyUVFGeElnRnlJQUFnQVhacUlnUkJBM1JCcEN4cUlnQkJDR29pQlNnQ0FDSUJRUWhxSWdnb0FnQWlCaUFBUmdSQVFmd3JJQU5CQVNBRWRFRi9jM0VpQURZQ0FBVWdCa0VNYWlBQU5nSUFJQVVnQmpZQ0FDQURJUUFMSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxSWdaQkJHb2dCRUVEZENJRUlBSnJJZ05CQVhJMkFnQWdBU0FFYWlBRE5nSUFJQWNFUUVHUUxDZ0NBQ0VDSUFkQkEzWWlCRUVEZEVHa0xHb2hBU0FBUVFFZ0JIUWlCSEVFZnlBQlFRaHFJZ0FoQkNBQUtBSUFCVUg4S3lBQUlBUnlOZ0lBSUFGQkNHb2hCQ0FCQ3lFQUlBUWdBallDQUNBQVFReHFJQUkyQWdBZ0FrRUlhaUFBTmdJQUlBSkJER29nQVRZQ0FBdEJoQ3dnQXpZQ0FFR1FMQ0FHTmdJQUlBb2tBaUFJRHd0QmdDd29BZ0FpQ3dSL0lBdEJBQ0FMYTNGQmYyb2lBRUVNZGtFUWNTSUJJQUFnQVhZaUFFRUZka0VJY1NJQmNpQUFJQUYySWdCQkFuWkJCSEVpQVhJZ0FDQUJkaUlBUVFGMlFRSnhJZ0Z5SUFBZ0FYWWlBRUVCZGtFQmNTSUJjaUFBSUFGMmFrRUNkRUdzTG1vb0FnQWlBRUVFYWlnQ0FFRjRjU0FDYXlFSUlBQWhCUU5BQWtBZ0FFRVFhaWdDQUNJQkJFQWdBU0VBQlNBQVFSUnFLQUlBSWdCRkRRRUxJQUJCQkdvb0FnQkJlSEVnQW1zaUJDQUlTU0VCSUFRZ0NDQUJHeUVJSUFBZ0JTQUJHeUVGREFFTEN5QUNJQVZxSWd3Z0JVc0VmeUFGUVJocUtBSUFJUWtnQlVFTWFpZ0NBQ0lBSUFWR0JFQUNRQ0FGUVJScUlnRW9BZ0FpQUVVRVFDQUZRUkJxSWdFb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdRb0FnQWlCZ1IvSUFRaEFTQUdCU0FBUVJCcUlnUW9BZ0FpQmtVTkFTQUVJUUVnQmdzaEFBd0JDd3NnQVVFQU5nSUFDd1VnQlVFSWFpZ0NBQ0lCUVF4cUlBQTJBZ0FnQUVFSWFpQUJOZ0lBQ3lBSkJFQUNRQ0FGUVJ4cUtBSUFJZ0ZCQW5SQnJDNXFJZ1FvQWdBZ0JVWUVRQ0FFSUFBMkFnQWdBRVVFUUVHQUxDQUxRUUVnQVhSQmYzTnhOZ0lBREFJTEJTQUpRUkJxSWdFZ0NVRVVhaUFCS0FJQUlBVkdHeUFBTmdJQUlBQkZEUUVMSUFCQkdHb2dDVFlDQUNBRlFSQnFLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFGUVJScUtBSUFJZ0VFUUNBQVFSUnFJQUUyQWdBZ0FVRVlhaUFBTmdJQUN3c0xJQWhCRUVrRVFDQUZRUVJxSUFJZ0NHb2lBRUVEY2pZQ0FDQUFJQVZxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQVVnQlVFRWFpQUNRUU55TmdJQUlBeEJCR29nQ0VFQmNqWUNBQ0FJSUF4cUlBZzJBZ0FnQndSQVFaQXNLQUlBSVFJZ0IwRURkaUlCUVFOMFFhUXNhaUVBSUFOQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFRElBRW9BZ0FGUWZ3cklBRWdBM0kyQWdBZ0FFRUlhaUVESUFBTElRRWdBeUFDTmdJQUlBRkJER29nQWpZQ0FDQUNRUWhxSUFFMkFnQWdBa0VNYWlBQU5nSUFDMEdFTENBSU5nSUFRWkFzSUF3MkFnQUxJQW9rQWlBRlFRaHFEd1VnQWdzRklBSUxCU0FDQ3dVZ0FFRy9mMHNFZjBGL0JRSi9JQUJCQzJvaUFFRjRjU0VCUVlBc0tBSUFJZ1FFZjBFQUlBRnJJUUlDZndKQUlBQkJDSFlpQUFSL0lBRkIvLy8vQjBzRWYwRWZCU0FBSUFCQmdQNC9ha0VRZGtFSWNTSUdkQ0lEUVlEZ0gycEJFSFpCQkhFaEFDQURJQUIwSWdWQmdJQVBha0VRZGtFQ2NTRURJQUZCRGlBQUlBWnlJQU55YXlBRklBTjBRUTkyYWlJQVFRZHFka0VCY1NBQVFRRjBjZ3NGUVFBTElnZEJBblJCckM1cUtBSUFJZ0FFUUVFQUlRVWdBVUVBUVJrZ0IwRUJkbXNnQjBFZlJodDBJUVpCQUNFREEwQWdBRUVFYWlnQ0FFRjRjU0FCYXlJSUlBSkpCRUFnQ0FSL0lBQWhBeUFJQlVFQUlRTWdBQ0VDREFRTElRSUxJQVVnQUVFVWFpZ0NBQ0lGSUFWRklBVWdBRUVRYWlBR1FSOTJRUUowYWlnQ0FDSUlSbkliSVFBZ0JrRUJkQ0VHSUFnRVFDQUFJUVVnQ0NFQURBRUxDd1ZCQUNFQVFRQWhBd3NnQUNBRGNnUi9JQUFoQmlBREJTQUJJQVJCQWlBSGRDSUFRUUFnQUd0eWNTSUFSUTBFR2lBQVFRQWdBR3R4UVg5cUlnQkJESFpCRUhFaUF5QUFJQU4ySWdCQkJYWkJDSEVpQTNJZ0FDQURkaUlBUVFKMlFRUnhJZ055SUFBZ0EzWWlBRUVCZGtFQ2NTSURjaUFBSUFOMklnQkJBWFpCQVhFaUEzSWdBQ0FEZG1wQkFuUkJyQzVxS0FJQUlRWkJBQXNoQUNBR0JIOGdBaUVESUFZaEFnd0JCU0FDSVFZZ0FBc01BUXNEZnlBQ1FRUnFLQUlBUVhoeElBRnJJZ1VnQTBraEJpQUZJQU1nQmhzaEF5QUNJQUFnQmhzaEFDQUNRUkJxS0FJQUlnWUVmeUFHQlNBQ1FSUnFLQUlBQ3lJQ0RRQWdBeUVHSUFBTEN5SURCSDhnQmtHRUxDZ0NBQ0FCYTBrRWZ5QUJJQU5xSWdjZ0Ewc0VmeUFEUVJocUtBSUFJUWtnQTBFTWFpZ0NBQ0lBSUFOR0JFQUNRQ0FEUVJScUlnSW9BZ0FpQUVVRVFDQURRUkJxSWdJb0FnQWlBRVVFUUVFQUlRQU1BZ3NMQTBBQ1FDQUFRUlJxSWdVb0FnQWlDQVIvSUFVaEFpQUlCU0FBUVJCcUlnVW9BZ0FpQ0VVTkFTQUZJUUlnQ0FzaEFBd0JDd3NnQWtFQU5nSUFDd1VnQTBFSWFpZ0NBQ0lDUVF4cUlBQTJBZ0FnQUVFSWFpQUNOZ0lBQ3lBSkJFQUNRQ0FEUVJ4cUtBSUFJZ0pCQW5SQnJDNXFJZ1VvQWdBZ0EwWUVRQ0FGSUFBMkFnQWdBRVVFUUVHQUxDQUVRUUVnQW5SQmYzTnhJZ0EyQWdBTUFnc0ZJQWxCRUdvaUFpQUpRUlJxSUFJb0FnQWdBMFliSUFBMkFnQWdBRVVFUUNBRUlRQU1BZ3NMSUFCQkdHb2dDVFlDQUNBRFFSQnFLQUlBSWdJRVFDQUFRUkJxSUFJMkFnQWdBa0VZYWlBQU5nSUFDeUFEUVJScUtBSUFJZ0lFZnlBQVFSUnFJQUkyQWdBZ0FrRVlhaUFBTmdJQUlBUUZJQVFMSVFBTEJTQUVJUUFMSUFaQkVFa0VRQ0FEUVFScUlBRWdCbW9pQUVFRGNqWUNBQ0FBSUFOcVFRUnFJZ0FnQUNnQ0FFRUJjallDQUFVQ1FDQURRUVJxSUFGQkEzSTJBZ0FnQjBFRWFpQUdRUUZ5TmdJQUlBWWdCMm9nQmpZQ0FDQUdRUU4ySVFFZ0JrR0FBa2tFUUNBQlFRTjBRYVFzYWlFQVFmd3JLQUlBSWdKQkFTQUJkQ0lCY1FSL0lBQkJDR29pQVNFQ0lBRW9BZ0FGUWZ3cklBRWdBbkkyQWdBZ0FFRUlhaUVDSUFBTElRRWdBaUFITmdJQUlBRkJER29nQnpZQ0FDQUhRUWhxSUFFMkFnQWdCMEVNYWlBQU5nSUFEQUVMSUFaQkNIWWlBUVIvSUFaQi8vLy9CMHNFZjBFZkJTQUJJQUZCZ1A0L2FrRVFka0VJY1NJRWRDSUNRWURnSDJwQkVIWkJCSEVoQVNBQ0lBRjBJZ1ZCZ0lBUGFrRVFka0VDY1NFQ0lBWkJEaUFCSUFSeUlBSnlheUFGSUFKMFFROTJhaUlCUVFkcWRrRUJjU0FCUVFGMGNnc0ZRUUFMSWdGQkFuUkJyQzVxSVFJZ0IwRWNhaUFCTmdJQUlBZEJFR29pQkVFRWFrRUFOZ0lBSUFSQkFEWUNBQ0FBUVFFZ0FYUWlCSEZGQkVCQmdDd2dBQ0FFY2pZQ0FDQUNJQWMyQWdBZ0IwRVlhaUFDTmdJQUlBZEJER29nQnpZQ0FDQUhRUWhxSUFjMkFnQU1BUXNnQWlnQ0FDSUFRUVJxS0FJQVFYaHhJQVpHQkVBZ0FDRUJCUUpBSUFaQkFFRVpJQUZCQVhacklBRkJIMFliZENFQ0EwQWdBRUVRYWlBQ1FSOTJRUUowYWlJRUtBSUFJZ0VFUUNBQ1FRRjBJUUlnQVVFRWFpZ0NBRUY0Y1NBR1JnMENJQUVoQUF3QkN3c2dCQ0FITmdJQUlBZEJHR29nQURZQ0FDQUhRUXhxSUFjMkFnQWdCMEVJYWlBSE5nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUFrRU1haUFITmdJQUlBQWdCellDQUNBSFFRaHFJQUkyQWdBZ0IwRU1haUFCTmdJQUlBZEJHR3BCQURZQ0FBc0xJQW9rQWlBRFFRaHFEd1VnQVFzRklBRUxCU0FCQ3dVZ0FRc0xDd3NoQUVHRUxDZ0NBQ0lDSUFCUEJFQkJrQ3dvQWdBaEFTQUNJQUJySWdOQkQwc0VRRUdRTENBQUlBRnFJZ1EyQWdCQmhDd2dBellDQUNBRVFRUnFJQU5CQVhJMkFnQWdBU0FDYWlBRE5nSUFJQUZCQkdvZ0FFRURjallDQUFWQmhDeEJBRFlDQUVHUUxFRUFOZ0lBSUFGQkJHb2dBa0VEY2pZQ0FDQUJJQUpxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQXNnQ2lRQ0lBRkJDR29QQzBHSUxDZ0NBQ0lDSUFCTEJFQkJpQ3dnQWlBQWF5SUNOZ0lBUVpRc1FaUXNLQUlBSWdFZ0FHb2lBellDQUNBRFFRUnFJQUpCQVhJMkFnQWdBVUVFYWlBQVFRTnlOZ0lBSUFva0FpQUJRUWhxRHdzZ0FFRXdhaUVHUWRRdktBSUFCSDlCM0M4b0FnQUZRZHd2UVlBZ05nSUFRZGd2UVlBZ05nSUFRZUF2UVg4MkFnQkI1QzlCZnpZQ0FFSG9MMEVBTmdJQVFiZ3ZRUUEyQWdCQjFDOGdDVUZ3Y1VIWXF0V3FCWE0yQWdCQmdDQUxJZ0VnQUVFdmFpSUZhaUlJUVFBZ0FXc2lDWEVpQkNBQVRRUkFJQW9rQWtFQUR3dEJ0QzhvQWdBaUFRUkFRYXd2S0FJQUlnTWdCR29pQnlBRFRTQUhJQUZMY2dSQUlBb2tBa0VBRHdzTEFrQUNRRUc0THlnQ0FFRUVjUVJBUVFBaEFnVUNRQUpBQWtCQmxDd29BZ0FpQVVVTkFFRzhMeUVEQTBBQ1FDQURLQUlBSWdjZ0FVMEVRQ0FISUFOQkJHb29BZ0JxSUFGTERRRUxJQU5CQ0dvb0FnQWlBdzBCREFJTEN5QUlJQUpySUFseElnSkIvLy8vL3dkSkJFQWdBaEJlSVFFZ0FTQURLQUlBSUFOQkJHb29BZ0JxUncwQ0lBRkJmMGNOQlFWQkFDRUNDd3dDQzBFQUVGNGlBVUYvUmdSL1FRQUZRYXd2S0FJQUlnZ2dBVUhZTHlnQ0FDSUNRWDlxSWdOcVFRQWdBbXR4SUFGclFRQWdBU0FEY1JzZ0JHb2lBbW9oQXlBQ1FmLy8vLzhIU1NBQ0lBQkxjUVIvUWJRdktBSUFJZ2tFUUNBRElBaE5JQU1nQ1V0eUJFQkJBQ0VDREFVTEN5QUJJQUlRWGlJRFJnMEZJQU1oQVF3Q0JVRUFDd3NoQWd3QkMwRUFJQUpySVFnZ0FVRi9SeUFDUWYvLy8vOEhTWEVnQmlBQ1MzRkZCRUFnQVVGL1JnUkFRUUFoQWd3Q0JRd0VDd0FMUWR3dktBSUFJZ01nQlNBQ2EycEJBQ0FEYTNFaUEwSC8vLy8vQjA4TkFpQURFRjVCZjBZRWZ5QUlFRjRhUVFBRklBSWdBMm9oQWd3REN5RUNDMEc0TDBHNEx5Z0NBRUVFY2pZQ0FBc2dCRUgvLy8vL0Iwa0VRQ0FFRUY0aEFVRUFFRjRpQXlBQmF5SUdJQUJCS0dwTElRUWdCaUFDSUFRYklRSWdCRUVCY3lBQlFYOUdjaUFCUVg5SElBTkJmMGR4SUFFZ0EwbHhRUUZ6Y2tVTkFRc01BUXRCckM5QnJDOG9BZ0FnQW1vaUF6WUNBQ0FEUWJBdktBSUFTd1JBUWJBdklBTTJBZ0FMUVpRc0tBSUFJZ1FFUUFKQVFid3ZJUU1DUUFKQUEwQWdBeWdDQUNJR0lBTkJCR29vQWdBaUJXb2dBVVlOQVNBRFFRaHFLQUlBSWdNTkFBc01BUXNnQTBFRWFpRUlJQU5CREdvb0FnQkJDSEZGQkVBZ0JpQUVUU0FCSUFSTGNRUkFJQWdnQWlBRmFqWUNBQ0FFUVFBZ0JFRUlhaUlCYTBFSGNVRUFJQUZCQjNFYklnTnFJUUZCaUN3b0FnQWdBbW9pQmlBRGF5RUNRWlFzSUFFMkFnQkJpQ3dnQWpZQ0FDQUJRUVJxSUFKQkFYSTJBZ0FnQkNBR2FrRUVha0VvTmdJQVFaZ3NRZVF2S0FJQU5nSUFEQU1MQ3dzZ0FVR01MQ2dDQUVrRVFFR01MQ0FCTmdJQUN5QUJJQUpxSVFaQnZDOGhBd0pBQWtBRFFDQURLQUlBSUFaR0RRRWdBMEVJYWlnQ0FDSUREUUFMREFFTElBTkJER29vQWdCQkNIRkZCRUFnQXlBQk5nSUFJQU5CQkdvaUF5QURLQUlBSUFKcU5nSUFRUUFnQVVFSWFpSUNhMEVIY1VFQUlBSkJCM0ViSUFGcUlna2dBR29oQlNBR1FRQWdCa0VJYWlJQmEwRUhjVUVBSUFGQkIzRWJhaUlDSUFscklBQnJJUU1nQ1VFRWFpQUFRUU55TmdJQUlBSWdCRVlFUUVHSUxFR0lMQ2dDQUNBRGFpSUFOZ0lBUVpRc0lBVTJBZ0FnQlVFRWFpQUFRUUZ5TmdJQUJRSkFRWkFzS0FJQUlBSkdCRUJCaEN4QmhDd29BZ0FnQTJvaUFEWUNBRUdRTENBRk5nSUFJQVZCQkdvZ0FFRUJjallDQUNBQUlBVnFJQUEyQWdBTUFRc2dBa0VFYWlnQ0FDSUFRUU54UVFGR0JFQWdBRUY0Y1NFSElBQkJBM1loQkNBQVFZQUNTUVJBSUFKQkNHb29BZ0FpQUNBQ1FReHFLQUlBSWdGR0JFQkIvQ3RCL0Nzb0FnQkJBU0FFZEVGL2MzRTJBZ0FGSUFCQkRHb2dBVFlDQUNBQlFRaHFJQUEyQWdBTEJRSkFJQUpCR0dvb0FnQWhDQ0FDUVF4cUtBSUFJZ0FnQWtZRVFBSkFJQUpCRUdvaUFVRUVhaUlFS0FJQUlnQUVRQ0FFSVFFRklBRW9BZ0FpQUVVRVFFRUFJUUFNQWdzTEEwQUNRQ0FBUVJScUlnUW9BZ0FpQmdSL0lBUWhBU0FHQlNBQVFSQnFJZ1FvQWdBaUJrVU5BU0FFSVFFZ0Jnc2hBQXdCQ3dzZ0FVRUFOZ0lBQ3dVZ0FrRUlhaWdDQUNJQlFReHFJQUEyQWdBZ0FFRUlhaUFCTmdJQUN5QUlSUTBBSUFKQkhHb29BZ0FpQVVFQ2RFR3NMbW9pQkNnQ0FDQUNSZ1JBQWtBZ0JDQUFOZ0lBSUFBTkFFR0FMRUdBTENnQ0FFRUJJQUYwUVg5emNUWUNBQXdDQ3dVZ0NFRVFhaUlCSUFoQkZHb2dBU2dDQUNBQ1Joc2dBRFlDQUNBQVJRMEJDeUFBUVJocUlBZzJBZ0FnQWtFUWFpSUVLQUlBSWdFRVFDQUFRUkJxSUFFMkFnQWdBVUVZYWlBQU5nSUFDeUFFUVFScUtBSUFJZ0ZGRFFBZ0FFRVVhaUFCTmdJQUlBRkJHR29nQURZQ0FBc0xJQUlnQjJvaEFpQURJQWRxSVFNTElBSkJCR29pQUNBQUtBSUFRWDV4TmdJQUlBVkJCR29nQTBFQmNqWUNBQ0FESUFWcUlBTTJBZ0FnQTBFRGRpRUJJQU5CZ0FKSkJFQWdBVUVEZEVHa0xHb2hBRUg4S3lnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnRWhBaUFCS0FJQUJVSDhLeUFCSUFKeU5nSUFJQUJCQ0dvaEFpQUFDeUVCSUFJZ0JUWUNBQ0FCUVF4cUlBVTJBZ0FnQlVFSWFpQUJOZ0lBSUFWQkRHb2dBRFlDQUF3QkN5QURRUWgySWdBRWZ5QURRZi8vL3dkTEJIOUJId1VnQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQVVHQTRCOXFRUkIyUVFSeElRQWdBU0FBZENJRVFZQ0FEMnBCRUhaQkFuRWhBU0FEUVE0Z0FDQUNjaUFCY21zZ0JDQUJkRUVQZG1vaUFFRUhhblpCQVhFZ0FFRUJkSElMQlVFQUN5SUJRUUowUWF3dWFpRUFJQVZCSEdvZ0FUWUNBQ0FGUVJCcUlnSkJCR3BCQURZQ0FDQUNRUUEyQWdCQmdDd29BZ0FpQWtFQklBRjBJZ1J4UlFSQVFZQXNJQUlnQkhJMkFnQWdBQ0FGTmdJQUlBVkJHR29nQURZQ0FDQUZRUXhxSUFVMkFnQWdCVUVJYWlBRk5nSUFEQUVMSUFBb0FnQWlBRUVFYWlnQ0FFRjRjU0FEUmdSQUlBQWhBUVVDUUNBRFFRQkJHU0FCUVFGMmF5QUJRUjlHRzNRaEFnTkFJQUJCRUdvZ0FrRWZka0VDZEdvaUJDZ0NBQ0lCQkVBZ0FrRUJkQ0VDSUFGQkJHb29BZ0JCZUhFZ0EwWU5BaUFCSVFBTUFRc0xJQVFnQlRZQ0FDQUZRUmhxSUFBMkFnQWdCVUVNYWlBRk5nSUFJQVZCQ0dvZ0JUWUNBQXdDQ3dzZ0FVRUlhaUlBS0FJQUlnSkJER29nQlRZQ0FDQUFJQVUyQWdBZ0JVRUlhaUFDTmdJQUlBVkJER29nQVRZQ0FDQUZRUmhxUVFBMkFnQUxDeUFLSkFJZ0NVRUlhZzhMQzBHOEx5RURBMEFDUUNBREtBSUFJZ1lnQkUwRVFDQUdJQU5CQkdvb0FnQnFJZ1VnQkVzTkFRc2dBMEVJYWlnQ0FDRUREQUVMQ3lBRlFWRnFJZ1pCQ0dvaEF5QUVJQVpCQUNBRGEwRUhjVUVBSUFOQkIzRWJhaUlESUFNZ0JFRVFhaUlKU1JzaUEwRUlhaUVHUVpRc1FRQWdBVUVJYWlJSWEwRUhjVUVBSUFoQkIzRWJJZ2dnQVdvaUJ6WUNBRUdJTENBQ1FWaHFJZ3NnQ0dzaUNEWUNBQ0FIUVFScUlBaEJBWEkyQWdBZ0FTQUxha0VFYWtFb05nSUFRWmdzUWVRdktBSUFOZ0lBSUFOQkJHb2lDRUViTmdJQUlBWkJ2QzhwQWdBM0FnQWdCa0hFTHlrQ0FEY0NDRUc4THlBQk5nSUFRY0F2SUFJMkFnQkJ5QzlCQURZQ0FFSEVMeUFHTmdJQUlBTkJHR29oQVFOQUlBRkJCR29pQWtFSE5nSUFJQUZCQ0dvZ0JVa0VRQ0FDSVFFTUFRc0xJQU1nQkVjRVFDQUlJQWdvQWdCQmZuRTJBZ0FnQkVFRWFpQURJQVJySWdaQkFYSTJBZ0FnQXlBR05nSUFJQVpCQTNZaEFpQUdRWUFDU1FSQUlBSkJBM1JCcEN4cUlRRkIvQ3NvQWdBaUEwRUJJQUowSWdKeEJIOGdBVUVJYWlJQ0lRTWdBaWdDQUFWQi9Dc2dBaUFEY2pZQ0FDQUJRUWhxSVFNZ0FRc2hBaUFESUFRMkFnQWdBa0VNYWlBRU5nSUFJQVJCQ0dvZ0FqWUNBQ0FFUVF4cUlBRTJBZ0FNQWdzZ0JrRUlkaUlCQkg4Z0JrSC8vLzhIU3dSL1FSOEZJQUVnQVVHQS9qOXFRUkIyUVFoeElnTjBJZ0pCZ09BZmFrRVFka0VFY1NFQklBSWdBWFFpQlVHQWdBOXFRUkIyUVFKeElRSWdCa0VPSUFFZ0EzSWdBbkpySUFVZ0FuUkJEM1pxSWdGQkIycDJRUUZ4SUFGQkFYUnlDd1ZCQUFzaUFrRUNkRUdzTG1vaEFTQUVRUnhxSUFJMkFnQWdCRUVVYWtFQU5nSUFJQWxCQURZQ0FFR0FMQ2dDQUNJRFFRRWdBblFpQlhGRkJFQkJnQ3dnQXlBRmNqWUNBQ0FCSUFRMkFnQWdCRUVZYWlBQk5nSUFJQVJCREdvZ0JEWUNBQ0FFUVFocUlBUTJBZ0FNQWdzZ0FTZ0NBQ0lCUVFScUtBSUFRWGh4SUFaR0JFQWdBU0VDQlFKQUlBWkJBRUVaSUFKQkFYWnJJQUpCSDBZYmRDRURBMEFnQVVFUWFpQURRUjkyUVFKMGFpSUZLQUlBSWdJRVFDQURRUUYwSVFNZ0FrRUVhaWdDQUVGNGNTQUdSZzBDSUFJaEFRd0JDd3NnQlNBRU5nSUFJQVJCR0dvZ0FUWUNBQ0FFUVF4cUlBUTJBZ0FnQkVFSWFpQUVOZ0lBREFNTEN5QUNRUWhxSWdFb0FnQWlBMEVNYWlBRU5nSUFJQUVnQkRZQ0FDQUVRUWhxSUFNMkFnQWdCRUVNYWlBQ05nSUFJQVJCR0dwQkFEWUNBQXNMQlVHTUxDZ0NBQ0lEUlNBQklBTkpjZ1JBUVl3c0lBRTJBZ0FMUWJ3dklBRTJBZ0JCd0M4Z0FqWUNBRUhJTDBFQU5nSUFRYUFzUWRRdktBSUFOZ0lBUVp3c1FYODJBZ0JCc0N4QnBDdzJBZ0JCckN4QnBDdzJBZ0JCdUN4QnJDdzJBZ0JCdEN4QnJDdzJBZ0JCd0N4QnRDdzJBZ0JCdkN4QnRDdzJBZ0JCeUN4QnZDdzJBZ0JCeEN4QnZDdzJBZ0JCMEN4QnhDdzJBZ0JCekN4QnhDdzJBZ0JCMkN4QnpDdzJBZ0JCMUN4QnpDdzJBZ0JCNEN4QjFDdzJBZ0JCM0N4QjFDdzJBZ0JCNkN4QjNDdzJBZ0JCNUN4QjNDdzJBZ0JCOEN4QjVDdzJBZ0JCN0N4QjVDdzJBZ0JCK0N4QjdDdzJBZ0JCOUN4QjdDdzJBZ0JCZ0MxQjlDdzJBZ0JCL0N4QjlDdzJBZ0JCaUMxQi9DdzJBZ0JCaEMxQi9DdzJBZ0JCa0MxQmhDMDJBZ0JCakMxQmhDMDJBZ0JCbUMxQmpDMDJBZ0JCbEMxQmpDMDJBZ0JCb0MxQmxDMDJBZ0JCbkMxQmxDMDJBZ0JCcUMxQm5DMDJBZ0JCcEMxQm5DMDJBZ0JCc0MxQnBDMDJBZ0JCckMxQnBDMDJBZ0JCdUMxQnJDMDJBZ0JCdEMxQnJDMDJBZ0JCd0MxQnRDMDJBZ0JCdkMxQnRDMDJBZ0JCeUMxQnZDMDJBZ0JCeEMxQnZDMDJBZ0JCMEMxQnhDMDJBZ0JCekMxQnhDMDJBZ0JCMkMxQnpDMDJBZ0JCMUMxQnpDMDJBZ0JCNEMxQjFDMDJBZ0JCM0MxQjFDMDJBZ0JCNkMxQjNDMDJBZ0JCNUMxQjNDMDJBZ0JCOEMxQjVDMDJBZ0JCN0MxQjVDMDJBZ0JCK0MxQjdDMDJBZ0JCOUMxQjdDMDJBZ0JCZ0M1QjlDMDJBZ0JCL0MxQjlDMDJBZ0JCaUM1Qi9DMDJBZ0JCaEM1Qi9DMDJBZ0JCa0M1QmhDNDJBZ0JCakM1QmhDNDJBZ0JCbUM1QmpDNDJBZ0JCbEM1QmpDNDJBZ0JCb0M1QmxDNDJBZ0JCbkM1QmxDNDJBZ0JCcUM1Qm5DNDJBZ0JCcEM1Qm5DNDJBZ0JCbEN4QkFDQUJRUWhxSWdOclFRZHhRUUFnQTBFSGNSc2lBeUFCYWlJRU5nSUFRWWdzSUFKQldHb2lBaUFEYXlJRE5nSUFJQVJCQkdvZ0EwRUJjallDQUNBQklBSnFRUVJxUVNnMkFnQkJtQ3hCNUM4b0FnQTJBZ0FMUVlnc0tBSUFJZ0VnQUVzRVFFR0lMQ0FCSUFCcklnSTJBZ0JCbEN4QmxDd29BZ0FpQVNBQWFpSUROZ0lBSUFOQkJHb2dBa0VCY2pZQ0FDQUJRUVJxSUFCQkEzSTJBZ0FnQ2lRQ0lBRkJDR29QQ3dzUVRVRU1OZ0lBSUFva0FrRUFDOGdQQVFoL0lBQkZCRUFQQzBHTUxDZ0NBQ0VFSUFCQmVHb2lBU0FBUVh4cUtBSUFJZ05CZUhFaUFHb2hCaUFEUVFGeEJFQWdBU0VDQlFKL0lBRW9BZ0FoQWlBRFFRTnhSUVJBRHdzZ0FDQUNhaUVESUFFZ0Ftc2lBQ0FFU1FSQUR3dEJrQ3dvQWdBZ0FFWUVRQ0FHUVFScUlnRW9BZ0FpQWtFRGNVRURSd1JBSUFBaEFTQUFJUUlnQXd3Q0MwR0VMQ0FETmdJQUlBRWdBa0YrY1RZQ0FDQUFRUVJxSUFOQkFYSTJBZ0FnQUNBRGFpQUROZ0lBRHdzZ0FrRURkaUVFSUFKQmdBSkpCRUFnQUVFSWFpZ0NBQ0lCSUFCQkRHb29BZ0FpQWtZRVFFSDhLMEg4S3lnQ0FFRUJJQVIwUVg5emNUWUNBQ0FBSVFFZ0FDRUNJQU1NQWdVZ0FVRU1haUFDTmdJQUlBSkJDR29nQVRZQ0FDQUFJUUVnQUNFQ0lBTU1BZ3NBQ3lBQVFSaHFLQUlBSVFjZ0FFRU1haWdDQUNJQklBQkdCRUFDUUNBQVFSQnFJZ0pCQkdvaUJDZ0NBQ0lCQkVBZ0JDRUNCU0FDS0FJQUlnRkZCRUJCQUNFQkRBSUxDd05BQWtBZ0FVRVVhaUlFS0FJQUlnVUVmeUFFSVFJZ0JRVWdBVUVRYWlJRUtBSUFJZ1ZGRFFFZ0JDRUNJQVVMSVFFTUFRc0xJQUpCQURZQ0FBc0ZJQUJCQ0dvb0FnQWlBa0VNYWlBQk5nSUFJQUZCQ0dvZ0FqWUNBQXNnQndSL0lBQkJIR29vQWdBaUFrRUNkRUdzTG1vaUJDZ0NBQ0FBUmdSQUlBUWdBVFlDQUNBQlJRUkFRWUFzUVlBc0tBSUFRUUVnQW5SQmYzTnhOZ0lBSUFBaEFTQUFJUUlnQXd3REN3VWdCMEVRYWlJQ0lBZEJGR29nQWlnQ0FDQUFSaHNnQVRZQ0FDQUJSUVJBSUFBaEFTQUFJUUlnQXd3REN3c2dBVUVZYWlBSE5nSUFJQUJCRUdvaUJDZ0NBQ0lDQkVBZ0FVRVFhaUFDTmdJQUlBSkJHR29nQVRZQ0FBc2dCRUVFYWlnQ0FDSUNCSDhnQVVFVWFpQUNOZ0lBSUFKQkdHb2dBVFlDQUNBQUlRRWdBQ0VDSUFNRklBQWhBU0FBSVFJZ0F3c0ZJQUFoQVNBQUlRSWdBd3NMSVFBTElBRWdCazhFUUE4TElBWkJCR29pQkNnQ0FDSURRUUZ4UlFSQUR3c2dBMEVDY1FSL0lBUWdBMEYrY1RZQ0FDQUNRUVJxSUFCQkFYSTJBZ0FnQUNBQmFpQUFOZ0lBSUFBRlFaUXNLQUlBSUFaR0JFQkJpQ3hCaUN3b0FnQWdBR29pQURZQ0FFR1VMQ0FDTmdJQUlBSkJCR29nQUVFQmNqWUNBQ0FDUVpBc0tBSUFSd1JBRHd0QmtDeEJBRFlDQUVHRUxFRUFOZ0lBRHd0QmtDd29BZ0FnQmtZRVFFR0VMRUdFTENnQ0FDQUFhaUlBTmdJQVFaQXNJQUUyQWdBZ0FrRUVhaUFBUVFGeU5nSUFJQUFnQVdvZ0FEWUNBQThMSUFOQmVIRWdBR29oQkNBRFFRTjJJUVVnQTBHQUFra0VRQ0FHUVFocUtBSUFJZ0FnQmtFTWFpZ0NBQ0lEUmdSQVFmd3JRZndyS0FJQVFRRWdCWFJCZjNOeE5nSUFCU0FBUVF4cUlBTTJBZ0FnQTBFSWFpQUFOZ0lBQ3dVQ1FDQUdRUmhxS0FJQUlRZ2dCa0VNYWlnQ0FDSUFJQVpHQkVBQ1FDQUdRUkJxSWdOQkJHb2lCU2dDQUNJQUJFQWdCU0VEQlNBREtBSUFJZ0JGQkVCQkFDRUFEQUlMQ3dOQUFrQWdBRUVVYWlJRktBSUFJZ2NFZnlBRklRTWdCd1VnQUVFUWFpSUZLQUlBSWdkRkRRRWdCU0VESUFjTElRQU1BUXNMSUFOQkFEWUNBQXNGSUFaQkNHb29BZ0FpQTBFTWFpQUFOZ0lBSUFCQkNHb2dBellDQUFzZ0NBUkFJQVpCSEdvb0FnQWlBMEVDZEVHc0xtb2lCU2dDQUNBR1JnUkFJQVVnQURZQ0FDQUFSUVJBUVlBc1FZQXNLQUlBUVFFZ0EzUkJmM054TmdJQURBTUxCU0FJUVJCcUlnTWdDRUVVYWlBREtBSUFJQVpHR3lBQU5nSUFJQUJGRFFJTElBQkJHR29nQ0RZQ0FDQUdRUkJxSWdVb0FnQWlBd1JBSUFCQkVHb2dBellDQUNBRFFSaHFJQUEyQWdBTElBVkJCR29vQWdBaUF3UkFJQUJCRkdvZ0F6WUNBQ0FEUVJocUlBQTJBZ0FMQ3dzTElBSkJCR29nQkVFQmNqWUNBQ0FCSUFScUlBUTJBZ0JCa0N3b0FnQWdBa1lFZjBHRUxDQUVOZ0lBRHdVZ0JBc0xJZ05CQTNZaEFTQURRWUFDU1FSQUlBRkJBM1JCcEN4cUlRQkIvQ3NvQWdBaUEwRUJJQUYwSWdGeEJIOGdBRUVJYWlJQklRTWdBU2dDQUFWQi9Dc2dBU0FEY2pZQ0FDQUFRUWhxSVFNZ0FBc2hBU0FESUFJMkFnQWdBVUVNYWlBQ05nSUFJQUpCQ0dvZ0FUWUNBQ0FDUVF4cUlBQTJBZ0FQQ3lBRFFRaDJJZ0FFZnlBRFFmLy8vd2RMQkg5Qkh3VWdBQ0FBUVlEK1AycEJFSFpCQ0hFaUJIUWlBVUdBNEI5cVFSQjJRUVJ4SVFBZ0FTQUFkQ0lGUVlDQUQycEJFSFpCQW5FaEFTQURRUTRnQUNBRWNpQUJjbXNnQlNBQmRFRVBkbW9pQUVFSGFuWkJBWEVnQUVFQmRISUxCVUVBQ3lJQlFRSjBRYXd1YWlFQUlBSkJIR29nQVRZQ0FDQUNRUlJxUVFBMkFnQWdBa0VRYWtFQU5nSUFRWUFzS0FJQUlnUkJBU0FCZENJRmNRUkFBa0FnQUNnQ0FDSUFRUVJxS0FJQVFYaHhJQU5HQkVBZ0FDRUJCUUpBSUFOQkFFRVpJQUZCQVhacklBRkJIMFliZENFRUEwQWdBRUVRYWlBRVFSOTJRUUowYWlJRktBSUFJZ0VFUUNBRVFRRjBJUVFnQVVFRWFpZ0NBRUY0Y1NBRFJnMENJQUVoQUF3QkN3c2dCU0FDTmdJQUlBSkJHR29nQURZQ0FDQUNRUXhxSUFJMkFnQWdBa0VJYWlBQ05nSUFEQUlMQ3lBQlFRaHFJZ0FvQWdBaUEwRU1haUFDTmdJQUlBQWdBallDQUNBQ1FRaHFJQU0yQWdBZ0FrRU1haUFCTmdJQUlBSkJHR3BCQURZQ0FBc0ZRWUFzSUFRZ0JYSTJBZ0FnQUNBQ05nSUFJQUpCR0dvZ0FEWUNBQ0FDUVF4cUlBSTJBZ0FnQWtFSWFpQUNOZ0lBQzBHY0xFR2NMQ2dDQUVGL2FpSUFOZ0lBSUFBRVFBOExRY1F2SVFBRFFDQUFLQUlBSWdGQkNHb2hBQ0FCRFFBTFFad3NRWDgyQWdBTExBQWdBQ2dDQUVIZnQ5NmFBVVlFUUVFQUR3c2dBVUVCY1VFYWFoRUJBQ0FBUWQrMzNwb0JOZ0lBUVFBTHhnTUJBMzhnQWtHQXdBQk9CRUFnQUNBQklBSVFDQm9nQUE4TElBQWhCQ0FBSUFKcUlRTWdBRUVEY1NBQlFRTnhSZ1JBQTBBZ0FFRURjUVJBSUFKRkJFQWdCQThMSUFBZ0FTd0FBRG9BQUNBQVFRRnFJUUFnQVVFQmFpRUJJQUpCQVdzaEFnd0JDd3NnQTBGOGNTSUNRVUJxSVFVRFFDQUFJQVZNQkVBZ0FDQUJLQUlBTmdJQUlBQWdBU2dDQkRZQ0JDQUFJQUVvQWdnMkFnZ2dBQ0FCS0FJTU5nSU1JQUFnQVNnQ0VEWUNFQ0FBSUFFb0FoUTJBaFFnQUNBQktBSVlOZ0lZSUFBZ0FTZ0NIRFlDSENBQUlBRW9BaUEyQWlBZ0FDQUJLQUlrTmdJa0lBQWdBU2dDS0RZQ0tDQUFJQUVvQWl3MkFpd2dBQ0FCS0FJd05nSXdJQUFnQVNnQ05EWUNOQ0FBSUFFb0FqZzJBamdnQUNBQktBSThOZ0k4SUFCQlFHc2hBQ0FCUVVCcklRRU1BUXNMQTBBZ0FDQUNTQVJBSUFBZ0FTZ0NBRFlDQUNBQVFRUnFJUUFnQVVFRWFpRUJEQUVMQ3dVZ0EwRUVheUVDQTBBZ0FDQUNTQVJBSUFBZ0FTd0FBRG9BQUNBQUlBRXNBQUU2QUFFZ0FDQUJMQUFDT2dBQ0lBQWdBU3dBQXpvQUF5QUFRUVJxSVFBZ0FVRUVhaUVCREFFTEN3c0RRQ0FBSUFOSUJFQWdBQ0FCTEFBQU9nQUFJQUJCQVdvaEFDQUJRUUZxSVFFTUFRc0xJQVFMbUFJQkJIOGdBQ0FDYWlFRUlBRkIvd0Z4SVFFZ0FrSERBRTRFUUFOQUlBQkJBM0VFUUNBQUlBRTZBQUFnQUVFQmFpRUFEQUVMQ3lBQlFRaDBJQUZ5SUFGQkVIUnlJQUZCR0hSeUlRTWdCRUY4Y1NJRlFVQnFJUVlEUUNBQUlBWk1CRUFnQUNBRE5nSUFJQUFnQXpZQ0JDQUFJQU0yQWdnZ0FDQUROZ0lNSUFBZ0F6WUNFQ0FBSUFNMkFoUWdBQ0FETmdJWUlBQWdBellDSENBQUlBTTJBaUFnQUNBRE5nSWtJQUFnQXpZQ0tDQUFJQU0yQWl3Z0FDQUROZ0l3SUFBZ0F6WUNOQ0FBSUFNMkFqZ2dBQ0FETmdJOElBQkJRR3NoQUF3QkN3c0RRQ0FBSUFWSUJFQWdBQ0FETmdJQUlBQkJCR29oQUF3QkN3c0xBMEFnQUNBRVNBUkFJQUFnQVRvQUFDQUFRUUZxSVFBTUFRc0xJQVFnQW1zTFVnRURmeEFISVFNZ0FDTUJLQUlBSWdKcUlnRWdBa2dnQUVFQVNuRWdBVUVBU0hJRVFDQUJFQW9hUVF3UUFrRi9Ed3NnQVNBRFNnUkFJQUVRQ1VVRVFFRU1FQUpCZnc4TEN5TUJJQUUyQWdBZ0Fnc01BQ0FCSUFCQkEzRVJBZ0FMRVFBZ0FTQUNJQUJCQjNGQkJHb1JBd0FMRXdBZ0FTQUNJQU1nQUVFSGNVRU1haEVBQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJGR29SQkFBTEhRQWdBU0FDSUFNZ0JDQUZJQVlnQnlBSUlBQkJBWEZCRm1vUkJRQUxFd0FnQVNBQ0lBTWdBRUVCY1VFWWFoRUdBQXNOQUNBQVFRRnhRUnBxRVFFQUN3OEFJQUVnQUVFQmNVRWNhaEVIQUFzYkFDQUJJQUlnQXlBRUlBVWdCaUFISUFCQkFYRkJIbW9SQ0FBTENBQkJBQkFBUVFBTENBQkJBUkFBUVFBTENBQkJBaEFBUVFBTENBQkJBeEFBUVFBTENBQkJCQkFBUVFBTENBQkJCUkFBUWdBTEJnQkJCaEFBQ3dZQVFRY1FBQXNHQUVFSUVBQUxJd0VCZmlBQUlBRWdBcTBnQTYxQ0lJYUVJQVFRWkNFRklBVkNJSWluRUFzZ0JhY0xDL2thREFCQmdBZ0xHRklhSEJPWkd6c2FjeG9wRGQ0ZEZ3K01IbUljbkJNS0VRQkJvQWdMR0hJZ1pTZGVKeTh1UXk2bEdBRWxZeVYvS3AwZDlCODdIUUJCd0FnTEdIb0JLQVR0QVVZQ3NBSlJBdG9CdVFMYkFiQUNwUUhIQVFCQjRBZ0xHQ3NDK1FFM0Fnd0NTUUxQQlAwQlBBUHNBUVFHTndSU0F3QkJnQWtMRnlJQVBnQklBRUlBTlFBWkFGNEFRZ0E0QUQ0QVN3Qm5BRUdnQ1FzWE1BQlNBQzBBVndBeUFDOEFVQUF1QUZNQUtRQk9BRkVBUWNJSkM3OFZ5UUNTQVZzQ0pBUHRBN1lFZmdWSEJoQUgyUWVoQ0dvSk1ncjdDc01MaXd4VERSc080dzZyRDNJUU9SRUFFc2NTamhOVkZCc1Y0UlduRm0wWE14ajRHTDBaZ2hwR0d3c2N6eHlUSFZZZUdSL2NINThnWVNFakl1UWlwaU5uSkNjbDV5V25KbWNuSmlqbEtLTXBZU29lSzlzcm1DeFVMUkF1ekM2R0wwRXcrekMwTVcweUpqUGVNNVkwVFRVRE5yazJiemNrT05nNGpEay9Pdkk2cER0V1BBYzl0ejFuUGhZL3hUOXpRQ0JCelVGNVFpVkQwRU42UkNORnpFVjBSaHhIdzBkcFNBNUpzMGxYU3ZwS25Vcy9UT0JNZ0UwZ1RyOU9YVS82VDVkUU0xSE9VV2hTQVZPYVV6SlV5VlJmVmZSVmlWWWRWN0JYUWxqVFdHTlo4MW1CV2c5Ym5Gc29YTE5jUFYzR1hVOWUxbDVkWCtKZloyRHJZRzVoOEdGeFl2RmljR1B1WTJ0azUyUmlaZDFsVm1iT1prVm52R2N4YUtWb0dXbUxhZnhwYkdyYmFrcHJ0MnNqYkk1cytHeGhiY2x0TUc2VmJ2cHVYbS9BYnlKd2duRGhjRUJ4blhINWNWUnlybklHYzE1enRYTUtkRjUwc1hRRGRWUjFwSFh6ZFVCMmpYYllkaUozYTNlemQvbDNQM2lEZU1aNENIbEplWWw1eDNrRWVrRjZmSHExZXU1NkpYdGNlNUY3eEh2M2V5bDhXWHlJZkxaODRud09mVGg5WVgySmZiQjkxWDM1ZlJ4K1BuNWVmbjUrbkg2NWZ0Uis3MzRJZnlCL04zOU1mMkYvZEgrR2Y1Wi9wbiswZjhGL3pYL1hmK0IvNkgvdmYvVi8rWC84Zi81Ly8zLytmL3gvK1gvMWYrOS82SC9nZjlkL3pYL0JmN1IvcG4rV2Y0Wi9kSDloZjB4L04zOGdmd2gvNzM3VWZybCtuSDUrZmw1K1BuNGNmdmw5MVgyd2ZZbDlZWDA0ZlE1OTRueTJmSWg4V1h3cGZQZDd4SHVSZTF4N0pYdnVlclY2ZkhwQmVnUjZ4M21KZVVsNUNIbkdlSU40UDNqNWQ3TjNhM2NpZDloMmpYWkFkdk4xcEhWVWRRTjFzWFJlZEFwMHRYTmVjd1p6cm5KVWN2bHhuWEZBY2VGd2duQWljTUJ2WG0vNmJwVnVNRzdKYldGdCtHeU9iQ05zdDJ0S2E5dHFiR3I4YVl0cEdXbWxhREZvdkdkRlo4NW1WbWJkWldKbDUyUnJaTzVqY0dQeFluRmk4R0Z1WWV0Z1oyRGlYMTFmMWw1UFhzWmRQVjJ6WENoY25Gc1BXNEZhODFsaldkTllRbGl3VngxWGlWYjBWVjlWeVZReVZKcFRBVk5vVXM1Uk0xR1hVUHBQWFUrL1RpQk9nRTNnVEQ5TW5VdjZTbGRLczBrT1NXbEl3MGNjUjNSR3pFVWpSWHBFMEVNbFEzbEN6VUVnUVhOQXhUOFdQMmMrdHowSFBWWThwRHZ5T2o4NmpEbllPQ1E0YnplNU5nTTJUVFdXTk40ekpqTnRNclF4K3pCQk1JWXZ6QzRRTGxRdG1DemJLeDRyWVNxaktlVW9KaWhuSjZjbTV5VW5KV2NrcGlQa0lpTWlZU0dmSU53ZkdSOVdIcE1kenh3TEhFWWJnaHE5R2ZnWU14aHRGNmNXNFJVYkZWVVVqaFBIRWdBU09SRnlFS3NQNHc0YkRsTU5pd3pEQy9zS01ncHFDYUVJMlFjUUIwY0dmZ1cyQk8wREpBTmJBcElCeVFBQUFEZi9idjZsL2R6OEUveEsrNEw2dWZudytDZjRYL2VXOXM3MUJmVTk5SFh6cmZMbDhSM3hWZkNPNzhmdUFPNDU3WExzcSt2bDZoL3FXZW1UNk0zbkNPZEQ1bjdsdXVUMTR6SGpiZUtxNGVmZ0pPQmgzNS9lM2QwYzNWcmNtZHZaMmhuYVdkbVoyTnJYRzlkZDFwL1Y0dFFsMUdqVHJOTHcwVFRSZXRDL3p3WFBUTTZUemRyTUlzeHF5N1BLL2NsSHlaSEkzTWNveDNUR3djVU94VnpFcXNQNXdrbkNtY0hxd0R2QWpiL2d2ak8raDczYnZEQzhocnZkdWpTNmpMbmt1RDI0bDdmeXRrMjJxYlVHdFdPMHdiTWdzNEN5NExGQnNhT3dCckJwcjgydU1xNllyZitzWnF6T3F6ZXJvYW9NcW5lcDQ2aFFxTDZuTGFlZHBnMm1mNlh4cEdTazJLTk5vOE9pT3FLeG9TcWhvNkFlb0ptZkZaK1NuaENlajUwUG5aQ2NFcHlWbXhtYm5wb2ptcXFaTXBtN21FU1l6NWRibCtlV2RaWUVscFNWSlpXMmxFbVUzWk55a3dpVG41STNrdENSYTVFR2thS1FRSkRlajM2UEg0L0FqbU9PQjQ2c2pWS04rb3lpakV1TTlvdWlpMCtML1lxc2lseUtEWXJBaVhPSktJbmVpSldJVFlnSGlNR0hmWWM2aC9pR3Q0WjNoam1HL0lXL2hZU0ZTNFVTaGR1RXBJUnZoRHlFQ1lUWGc2ZURlSU5LZ3g2RDhvTElncCtDZDRKUWdpdUNCNExrZ2NLQm9vR0NnV1NCUjRFc2dSR0IrSURnZ01tQXRJQ2ZnSXlBZW9CcWdGcUFUSUEvZ0RPQUtZQWdnQmlBRVlBTGdBZUFCSUFDZ0FHQUFvQUVnQWVBQzRBUmdCaUFJSUFwZ0RPQVA0Qk1nRnFBYW9CNmdJeUFuNEMwZ01tQTRJRDRnQkdCTElGSGdXU0Jnb0dpZ2NLQjVJRUhnaXVDVUlKM2dwK0N5SUx5Z2g2RFNvTjRnNmVEMTRNSmhEeUViNFNraE51RUVvVkxoWVNGdjRYOGhUbUdkNGEzaHZpR09vZDloOEdIQjRoTmlKV0kzb2dvaVhPSndJa05pbHlLcklyOWlrK0xvb3YyaTB1TW9vejZqRktOckkwSGptT093STRmajM2UDNvOUFrS0tRQnBGcmtkQ1JONUtma2dpVGNwUGRrMG1VdHBRbGxaU1ZCSloxbHVlV1c1ZlBsMFNZdTVneW1hcVpJNXFlbWhtYmxac1NuSkNjRDUyUG5SQ2VrcDRWbjVtZkhxQ2pvQ3Foc2FFNm9zT2lUYVBZbzJTazhhUi9wUTJtbmFZdHA3Nm5VS2pqcUhlcERLcWhxamVyenF0bXJQK3NtSzB5cnMydWFhOEdzS093UWJIZ3NZQ3lJTFBCczJPMEJyV3B0VTIyOHJhWHR6MjQ1TGlNdVRTNjNicUd1ekM4Mjd5SHZUTys0TDZOdnp2QTZzQ1p3VW5DK2NLcXcxekVEc1hCeFhUR0tNZmN4NUhJUjhuOXliUEthc3Npek5yTWs4MU16Z1hQdjg5NjBEVFI4TkdzMG1qVEpkVGkxSi9WWGRZYjE5clhtZGhaMlJuYTJkcVoyMXJjSE4zZDNaL2VZZDhrNE9mZ3F1RnQ0akhqOWVPNjVIN2xRK1lJNTgzbmsraFo2Ui9xNWVxcjYzTHNPZTBBN3NmdWp1OVY4QjN4NWZHdDhuWHpQZlFGOWM3MWx2WmY5eWY0OFBpNStZTDZTdnNUL056OHBmMXUvamYvQVFDQUFBSUFRQUFEQU1BQUJBQWdBQVVBb0FBR0FHQUFCd0RnQUFnQUVBQUpBSkFBQ2dCUUFBc0EwQUFNQURBQURRQ3dBQTRBY0FBUEFQQUFFUUNJQUJJQVNBQVRBTWdBRkFBb0FCVUFxQUFXQUdnQUZ3RG9BQmtBbUFBYUFGZ0FHd0RZQUJ3QU9BQWRBTGdBSGdCNEFCOEErQUFoQUlRQUlnQkVBQ01BeEFBbEFLUUFKZ0JrQUNjQTVBQXBBSlFBS2dCVUFDc0ExQUFzQURRQUxRQzBBQzRBZEFBdkFQUUFNUUNNQURJQVRBQXpBTXdBTlFDc0FEWUFiQUEzQU93QU9RQ2NBRG9BWEFBN0FOd0FQUUM4QUQ0QWZBQS9BUHdBUVFDQ0FFTUF3Z0JGQUtJQVJnQmlBRWNBNGdCSkFKSUFTZ0JTQUVzQTBnQk5BTElBVGdCeUFFOEE4Z0JSQUlvQVV3REtBRlVBcWdCV0FHb0FWd0RxQUZrQW1nQmJBTm9BWFFDNkFGNEFlZ0JmQVBvQVlRQ0dBR01BeGdCbEFLWUFad0RtQUdrQWxnQnJBTllBYlFDMkFHNEFkZ0J2QVBZQWNRQ09BSE1BemdCMUFLNEFkd0R1QUhrQW5nQjdBTjRBZlFDK0FIOEEvZ0NEQU1FQWhRQ2hBSWNBNFFDSkFKRUFpd0RSQUkwQXNRQ1BBUEVBa3dESkFKVUFxUUNYQU9rQW13RFpBSjBBdVFDZkFQa0Fvd0RGQUtjQTVRQ3JBTlVBclFDMUFLOEE5UUN6QU0wQXR3RHRBTHNBM1FDL0FQMEF4d0RqQU1zQTB3RFBBUE1BMXdEckFOOEErd0R2QVBjQUFRQkFBQUlBSUFBREFHQUFCQUFRQUFVQVVBQUdBREFBQndCd0FBa0FTQUFLQUNnQUN3Qm9BQXdBR0FBTkFGZ0FEZ0E0QUE4QWVBQVJBRVFBRWdBa0FCTUFaQUFWQUZRQUZnQTBBQmNBZEFBWkFFd0FHZ0FzQUJzQWJBQWRBRndBSGdBOEFCOEFmQUFoQUVJQUl3QmlBQ1VBVWdBbUFESUFKd0J5QUNrQVNnQXJBR29BTFFCYUFDNEFPZ0F2QUhvQU1RQkdBRE1BWmdBMUFGWUFOd0IyQURrQVRnQTdBRzRBUFFCZUFEOEFmZ0JEQUdFQVJRQlJBRWNBY1FCTEFHa0FUUUJaQUU4QWVRQlRBR1VBVndCMUFGc0FiUUJmQUgwQVp3QnpBRzhBZXdBRkFFR01Id3NCQVFCQnBCOExEZ0VBQUFBQkFBQUE2QkVBQUFBRUFFRzhId3NCQVFCQnl4OExCUXIvLy8vL0FFR1FJQXZNQTRBUEFBQVlBQlVBR0FBNUFEQUFPUUFJQUFRQUF3QU9BQWNBQlFBbEFDQUFKUUJrQUZBQVpBQlNBRTRBVWdBZEFRUUJIUUVHQUFNQUFnQUpBQVVBQXdCZUFGNEFYZ0JNQkJvRVRBUUdBQWdBQ2dBTUFBNEFFQUNBQWdBRElBSWdBa0FDUUFKQUFrQUNnQ3lBTEFBdEFDMEFMUUF0QUNTQUl3QWpnQ0lBSW9BaFpHRjBZVnN3WFNBOVBTQjJZV3d3QUcxaGFXNHVZd0J3Y205alpYTnpYMlJoZEdFQVpHRjBZVnN4TURCZElEMDlJSFpoYkRFd01BQmtZWFJoV3pJd01EQmRJRDA5SUhaaGJESXdNREFBY0hKdlkyVnpjMTlrWVhSaE9pQmtZWFJoSUQwOUlFNVZURXdnQUdSaGRHRmZiR1Z1WjNSb0lENDlJREFBZDJWaWNuUmpMMk52YlcxdmJsOWhkV1JwYnk5MllXUXZkbUZrWDJacGJIUmxjbUpoYm1zdVl3QlhaV0pTZEdOV1lXUmZRMkZzWTNWc1lYUmxSbVZoZEhWeVpYTUFaR0YwWVY5c1pXNW5kR2dnUEQwZ01qUXdBR1JoZEdGZmFXNGdJVDBnVGxWTVRBQk1iMmRQWmtWdVpYSm5lUUJrWVhSaFgyeGxibWQwYUNBK0lEQUFZMmhoYm01bGJDQThJR3RPZFcxRGFHRnVibVZzY3dCM1pXSnlkR012WTI5dGJXOXVYMkYxWkdsdkwzWmhaQzkyWVdSZmMzQXVZd0JYWldKU2RHTldZV1JmUm1sdVpFMXBibWx0ZFcwPSI7SS5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihhLGIpe0c9YTt9KTt2YXIgSyxMPXt9O2ZvcihLIGluIEkpSS5oYXNPd25Qcm9wZXJ0eShLKSYmKExbS109SVtLXSk7SS5hcmd1bWVudHM9W10sSS50aGlzUHJvZ3JhbT0iLi90aGlzLnByb2dyYW0iLEkucXVpdD1mdW5jdGlvbihhLGIpe3Rocm93IGJ9LEkucHJlUnVuPVtdLEkucG9zdFJ1bj1bXTt2YXIgTT0hMSxOPSExLE89ITEsUD0hMTtpZihNPSJvYmplY3QiPT10eXBlb2Ygd2luZG93LE49ImZ1bmN0aW9uIj09dHlwZW9mIGltcG9ydFNjcmlwdHMsUD0ib2JqZWN0Ij09dHlwZW9mIHByb2Nlc3MmJiJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlLE89UCYmIU0mJiFOLE8pezE8cHJvY2Vzcy5hcmd2Lmxlbmd0aCYmKEkudGhpc1Byb2dyYW09cHJvY2Vzcy5hcmd2WzFdLnJlcGxhY2UoL1xcL2csIi8iKSksSS5hcmd1bWVudHM9cHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiYobW9kdWxlLmV4cG9ydHM9SSkscHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLGZ1bmN0aW9uKGEpe2lmKCEoYSBpbnN0YW5jZW9mIEMpKXRocm93IGF9KSxwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLEYpLEkucXVpdD1mdW5jdGlvbihhKXtwcm9jZXNzLmV4aXQoYSk7fSxJLmluc3BlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIn07fWVsc2UgaWYoTXx8TilJLnNldFdpbmRvd1RpdGxlPWZ1bmN0aW9uKGEpe2RvY3VtZW50LnRpdGxlPWE7fTtlbHNlO3ZhciBRPUkucHJpbnR8fCgidW5kZWZpbmVkIj09dHlwZW9mIGNvbnNvbGU/InVuZGVmaW5lZCI9PXR5cGVvZiBwcmludD9udWxsOnByaW50OmNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLFI9SS5wcmludEVycnx8KCJ1bmRlZmluZWQiPT10eXBlb2YgcHJpbnRFcnI/InVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4uYmluZChjb25zb2xlKXx8UTpwcmludEVycik7Zm9yKEsgaW4gTClMLmhhc093blByb3BlcnR5KEspJiYoSVtLXT1MW0tdKTtMPXZvaWQgMDt2YXIgUz17ImY2NC1yZW0iOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGElYn0sZGVidWdnZXI6ZnVuY3Rpb24oKXtkZWJ1Z2dlcn19LFY9MCxXPWZ1bmN0aW9uKCl7cmV0dXJuIFZ9OyJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlIoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgWCxaLCQsXyxjYSxnYT0hMSxpYT0idW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0ZjgiKTsidW5kZWZpbmVkIj09dHlwZW9mIFRleHREZWNvZGVyP3ZvaWQgMDpuZXcgVGV4dERlY29kZXIoInV0Zi0xNmxlIik7dmFyIGthPTY1NTM2LGxhPTczMjgsbWE9NTI0Mjg4MCxuYT1JLlRPVEFMX01FTU9SWXx8MTY3NzcyMTY7bmE8bWEmJlIoIlRPVEFMX01FTU9SWSBzaG91bGQgYmUgbGFyZ2VyIHRoYW4gVE9UQUxfU1RBQ0ssIHdhcyAiK25hKyIhIChUT1RBTF9TVEFDSz0iK21hKyIpIiksSS5idWZmZXI/Wj1JLmJ1ZmZlcjoib2JqZWN0Ij09dHlwZW9mIFdlYkFzc2VtYmx5JiYiZnVuY3Rpb24iPT10eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5PyhYPW5ldyBXZWJBc3NlbWJseS5NZW1vcnkoe2luaXRpYWw6bmEva2EsbWF4aW11bTpuYS9rYX0pLFo9WC5idWZmZXIpOlo9bmV3IEFycmF5QnVmZmVyKG5hKSxsKCksY2FbbGE+PjJdPTUyNTAyNDA7dmFyIG9hPVtdLHBhPVtdLHFhPVtdLHJhPVtdLE9hPTAsUWE9bnVsbDtJLnByZWxvYWRlZEltYWdlcz17fSxJLnByZWxvYWRlZEF1ZGlvcz17fTsoKGZ1bmN0aW9uKGEpe3JldHVybiAwPT09YS5pbmRleE9mKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIil9KSkoSil8fEYoIndhc21CaW5hcnlGaWxlIGhhcyB0byBiZSBhIGRhdGEtVVJJIiksSS5hc209ZnVuY3Rpb24oYSxiKXtiLm1lbW9yeT1YLGIudGFibGU9bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHtpbml0aWFsOjMyLG1heGltdW06MzIsZWxlbWVudDoiYW55ZnVuYyJ9KSxiLl9fbWVtb3J5X2Jhc2U9MTAyNCxiLl9fdGFibGVfYmFzZT0wO3ZhciBjPXcoYik7cmV0dXJuIGN9O3ZhciBTYT17YnVmZmVyczpbbnVsbCxbXSxbXV0scHJpbnRDaGFyOmZ1bmN0aW9uKGEsYil7dmFyIGM9U2EuYnVmZmVyc1thXTswPT09Ynx8MTA9PT1iPygoMT09PWE/UTpSKShlKGMsMCkpLGMubGVuZ3RoPTApOmMucHVzaChiKTt9LHZhcmFyZ3M6MCxnZXQ6ZnVuY3Rpb24oKXtTYS52YXJhcmdzKz00O3ZhciBhPWNhW1NhLnZhcmFyZ3MtND4+Ml07cmV0dXJuIGF9LGdldFN0cjpmdW5jdGlvbigpe3ZhciBhPWYoU2EuZ2V0KCkpO3JldHVybiBhfSxnZXQ2NDpmdW5jdGlvbigpe3ZhciBhPVNhLmdldCgpO1NhLmdldCgpO3JldHVybiBhfSxnZXRaZXJvOmZ1bmN0aW9uKCl7U2EuZ2V0KCk7fX0sVGE9SS5hc20oe30se2Fib3J0OkYsc2V0VGVtcFJldDA6ZnVuY3Rpb24oYSl7Vj1hO30sZ2V0VGVtcFJldDA6VyxfX19hc3NlcnRfZmFpbDpmdW5jdGlvbihhLGIsYyxkKXtGKCJBc3NlcnRpb24gZmFpbGVkOiAiK2YoYSkrIiwgYXQ6ICIrW2I/ZihiKToidW5rbm93biBmaWxlbmFtZSIsYyxkP2YoZCk6InVua25vd24gZnVuY3Rpb24iXSk7fSxfX19zZXRFcnJObzpBLF9fX3N5c2NhbGwxNDA6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e3ZhciBjPVNhLmdldFN0cmVhbUZyb21GRCgpLGQ9U2EuZ2V0KCksZT1TYS5nZXQoKSxmPVNhLmdldCgpLGc9U2EuZ2V0KCk7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDE0Njp4LF9fX3N5c2NhbGw1NDpmdW5jdGlvbihhLGIpe1NhLnZhcmFyZ3M9Yjt0cnl7cmV0dXJuIDB9Y2F0Y2goYSl7cmV0dXJuICJ1bmRlZmluZWQiIT10eXBlb2YgRlMmJmEgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yfHxGKGEpLC1hLmVycm5vfX0sX19fc3lzY2FsbDY6ZnVuY3Rpb24oYSxiKXtTYS52YXJhcmdzPWI7dHJ5e1NhLmdldFN0cmVhbUZyb21GRCgpO3JldHVybiAwfWNhdGNoKGEpe3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEZTJiZhIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcnx8RihhKSwtYS5lcnJub319LF9lbXNjcmlwdGVuX2dldF9oZWFwX3NpemU6eSxfZW1zY3JpcHRlbl9tZW1jcHlfYmlnOnosX2Vtc2NyaXB0ZW5fcmVzaXplX2hlYXA6ZnVuY3Rpb24oYSl7QigpO30sYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnk6QixmbHVzaF9OT19GSUxFU1lTVEVNOmZ1bmN0aW9uKCl7dmFyIGE9SS5fZmZsdXNoO2EmJmEoMCk7dmFyIGI9U2EuYnVmZmVycztiWzFdLmxlbmd0aCYmU2EucHJpbnRDaGFyKDEsMTApLGJbMl0ubGVuZ3RoJiZTYS5wcmludENoYXIoMiwxMCk7fSx0ZW1wRG91YmxlUHRyOjczNDQsRFlOQU1JQ1RPUF9QVFI6bGF9LFopO0kuYXNtPVRhO0kuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX19fZXJybm9fbG9jYXRpb24uYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9mcmVlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9mcmVlLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWFpbj1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFpbi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX21hbGxvYz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fbWFsbG9jLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fbWVtY3B5PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLl9tZW1jcHkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLl9tZW1zZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX21lbXNldC5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3Byb2Nlc3NfZGF0YT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fcHJvY2Vzc19kYXRhLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5fc2Jyaz1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5fc2Jyay5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuX3NldG1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uX3NldG1vZGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmVzdGFibGlzaFN0YWNrU3BhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uZXN0YWJsaXNoU3RhY2tTcGFjZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O3ZhciBjYj1JLnN0YWNrQWxsb2M9ZnVuY3Rpb24oKXtyZXR1cm4gSS5hc20uc3RhY2tBbGxvYy5hcHBseShudWxsLGFyZ3VtZW50cyl9LGRiPUkuc3RhY2tSZXN0b3JlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrUmVzdG9yZS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGViPUkuc3RhY2tTYXZlPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLnN0YWNrU2F2ZS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9paWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX2lpaWlpaWlpaT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX2lpaWlpaWlpaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF9qaWppPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfamlqaS5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92PWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdi5hcHBseShudWxsLGFyZ3VtZW50cyl9O0kuZHluQ2FsbF92aT1mdW5jdGlvbigpe3JldHVybiBJLmFzbS5keW5DYWxsX3ZpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07SS5keW5DYWxsX3ZpaWlpaWlpPWZ1bmN0aW9uKCl7cmV0dXJuIEkuYXNtLmR5bkNhbGxfdmlpaWlpaWkuYXBwbHkobnVsbCxhcmd1bWVudHMpfTtJLmFzbT1UYSxJLmNjYWxsPWQsSS5jd3JhcD1mdW5jdGlvbihhLGIsZSxmKXtlPWV8fFtdO3ZhciBnPWUuZXZlcnkoZnVuY3Rpb24oYSl7cmV0dXJuICJudW1iZXIiPT09YX0pO3JldHVybiAic3RyaW5nIiE9PWImJmcmJiFmP2MoYSk6ZnVuY3Rpb24oKXtyZXR1cm4gZChhLGIsZSxhcmd1bWVudHMpfX0sQy5wcm90b3R5cGU9bmV3IEVycm9yLEMucHJvdG90eXBlLmNvbnN0cnVjdG9yPUM7UWE9ZnVuY3Rpb24gYSgpe0kuY2FsbGVkUnVufHxEKCksSS5jYWxsZWRSdW58fChRYT1hKTt9LEkuY2FsbE1haW49ZnVuY3Rpb24oYSl7YT1hfHxbXTt2YXIgYj1hLmxlbmd0aCsxLGM9Y2IoNCooYisxKSk7Y2FbYz4+Ml09aihJLnRoaXNQcm9ncmFtKTtmb3IodmFyIGQ9MTtkPGI7ZCsrKWNhWyhjPj4yKStkXT1qKGFbZC0xXSk7Y2FbKGM+PjIpK2JdPTA7dHJ5e3ZhciBlPUkuX21haW4oYixjLDApO0UoZSwhMCk7fWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBDKXJldHVybjtpZigiU2ltdWxhdGVJbmZpbml0ZUxvb3AiPT1hKXJldHVybiB2b2lkKEkubm9FeGl0UnVudGltZT0hMCk7dmFyIGY9YTthJiYib2JqZWN0Ij09dHlwZW9mIGEmJmEuc3RhY2smJihmPVthLGEuc3RhY2tdKSxSKCJleGNlcHRpb24gdGhyb3duOiAiK2YpLEkucXVpdCgxLGEpO31maW5hbGx5e319LEkucnVuPUQ7aWYoSS5hYm9ydD1GLEkucHJlSW5pdClmb3IoImZ1bmN0aW9uIj09dHlwZW9mIEkucHJlSW5pdCYmKEkucHJlSW5pdD1bSS5wcmVJbml0XSk7MDxJLnByZUluaXQubGVuZ3RoOylJLnByZUluaXQucG9wKCkoKTt2YXIgb2I9ITA7cmV0dXJuIEkubm9Jbml0aWFsUnVuJiYob2I9ITEpLEkubm9FeGl0UnVudGltZT0hMCxEKCksYS5yZWFkeX19KCk7CgogIC8vV2ViUlRDIFZBRCBJbnRlcmZhY2UgZm9yIFNFUElBIFdlYi1BdWRpbyBQcm9jZXNzb3INCiAgZnVuY3Rpb24gV2ViUnRjVm9pY2VBY3Rpdml0eURldGVjdG9yIChvcHRpb25zLCBpbml0Q2FsbGJhY2spIHsNCiAgCXRoaXMudmFkTW9kdWxlID0ge307DQogIAl0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9Ow0KICAJDQogIAl2YXIgb25QcmludCA9IHRoaXMub3B0aW9ucy5vbkluZm8gfHwgdGhpcy5vcHRpb25zLm9uUHJpbnQgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgcHJpbnQiLCB0ZXh0KTsgfTsNCiAgCXZhciBvbkVycm9yID0gdGhpcy5vcHRpb25zLm9uRXJyb3IgfHwgdGhpcy5vcHRpb25zLm9uUHJpbnRFcnIgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUuZXJyb3IoIlZBRCBwcmludEVyciIsIHRleHQpOyB9Ow0KICAJdmFyIG9uU3RhdHVzID0gdGhpcy5vcHRpb25zLm9uU3RhdHVzTWVzc2FnZSB8fCB0aGlzLm9wdGlvbnMub25TZXRTdGF0dXMgfHwgZnVuY3Rpb24odGV4dCl7IGNvbnNvbGUubG9nKCJWQUQgc2V0U3RhdHVzIiwgdGV4dCk7IH07DQogIAl2YXIgdmFkTW9kZSA9ICh0aGlzLm9wdGlvbnMubW9kZSAhPSB1bmRlZmluZWQpPyB0aGlzLm9wdGlvbnMubW9kZSA6IDM7CS8vbW9kZXM6IDA9UXVhbGl0eSBtb2RlLCAxPUxvdyBiaXRyYXRlIG1vZGUsIDI9QWdncmVzc2l2ZSBtb2RlLCAzPVZlcnkgYWdncmVzc2l2ZSBtb2RlDQoNCiAgCWNvbnN0IHNlbGYgPSB0aGlzOw0KICAJV2ViUnRjVmFkKHsNCiAgCQlwcmVSdW46IFtdLA0KICAJCXBvc3RSdW46IFtdLA0KICAJCXByaW50OiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uUHJpbnQodGV4dCk7DQogIAkJfSwNCiAgCQlwcmludEVycjogZnVuY3Rpb24odGV4dCl7DQogIAkJCWlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgdGV4dCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbignICcpOw0KICAJCQlvbkVycm9yKHRleHQpOw0KICAJCX0sDQogIAkJc2V0U3RhdHVzOiBmdW5jdGlvbih0ZXh0KXsNCiAgCQkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB0ZXh0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCcgJyk7DQogIAkJCW9uU3RhdHVzKHRleHQpOw0KICAJCX0sDQogIAkJdG90YWxEZXBlbmRlbmNpZXM6IDAsDQogIAkJbW9uaXRvclJ1bkRlcGVuZGVuY2llczogZnVuY3Rpb24obGVmdCl7DQogIAkJCXRoaXMudG90YWxEZXBlbmRlbmNpZXMgPSBNYXRoLm1heCh0aGlzLnRvdGFsRGVwZW5kZW5jaWVzLCBsZWZ0KTsNCiAgCQkJdGhpcy5zZXRTdGF0dXMobGVmdCA/ICdQcmVwYXJpbmcuLi4gKCcgKyAodGhpcy50b3RhbERlcGVuZGVuY2llcyAtIGxlZnQpICsgJy8nICsgdGhpcy50b3RhbERlcGVuZGVuY2llcyArICcpJyA6ICdBbGwgZG93bmxvYWRzIGNvbXBsZXRlLicpOw0KICAJCX0sDQogIAkJbm9Jbml0aWFsUnVuOiB0cnVlDQogIAl9KQ0KICAJLnRoZW4oZnVuY3Rpb24oTW9kdWxlKXsNCiAgCQl2YXIgVmFkID0gew0KICAJCQl3YXNtTW9kdWxlOiBNb2R1bGUNCiAgCQkJLy9zZXRNb2RlOiAuLi4sDQogIAkJCS8vZ2V0TW9kZTogLi4uLA0KICAJCQkvL3Byb2Nlc3M6IC4uLg0KICAJCX07DQogIAkJDQogIAkJLy9zZXR1cA0KICAJCQ0KICAJCXZhciBtYWluID0gTW9kdWxlLmN3cmFwKCdtYWluJyk7DQogIAkJaWYgKG1haW4oKSAhPSAxKXsNCiAgCQkJb25FcnJvcigiVkFEICdtYWluJyBlcnJvciIpOw0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBpbml0aWFsaXplIHZpYSAnbWFpbigpJyJ9Ow0KICAJCX0NCg0KICAJCVZhZC5zZXRNb2RlID0gTW9kdWxlLmN3cmFwKCdzZXRtb2RlJywgJ251bWJlcicsIFsnbnVtYmVyJ10pOw0KICAJCVZhZC5nZXRNb2RlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHZhZE1vZGU7IH07DQogIAkJDQogIAkJaWYgKFZhZC5zZXRNb2RlKHZhZE1vZGUpICE9IDApew0KICAJCQlvbkVycm9yKCJWQUQgJ3NldE1vZGUnIGVycm9yIik7DQogIAkJCXRocm93IHtuYW1lOiAiVmFkTW9kdWxlRXJyb3IiLCBtZXNzYWdlOiAiRmFpbGVkIHRvIHNldCBtb2RlIn07DQogIAkJfQ0KICAJCW9uUHJpbnQoIlZBRCBtb2RlOiAiICsgdmFkTW9kZSk7DQogIAkJDQogIAkJVmFkLnByb2Nlc3MgPSBNb2R1bGUuY3dyYXAoJ3Byb2Nlc3NfZGF0YScsICdudW1iZXInLCBbJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJywgJ251bWJlcicsICdudW1iZXInLCAnbnVtYmVyJ10pOw0KICAJCS8vYXJndW1lbnRzOiAoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlTGVuZ3RoLCBzYW1wbGVSYXRlLCBzYW1wbGVzWzBdLCBzYW1wbGVzWzEwMF0sIHNhbXBsZXNbMjAwMF0pDQogIAkJLy9yZXF1aXJlbWVudHMgZm9yIHNhbXBsZVJhdGU6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAgLSBzYW1wbGVMZW5ndGg6IHNhbXBsZVJhdGUvMTAwMCAqICgxMHwyMHwzMCkgPT4gNDhrIC0gNDgwLCA5NjAsIDE0NDAgOyAxNmsgLSAxNjAsIDMyMCwgNDgwIDsgDQogIAkJDQogIAkJVmFkLmdldFZvaWNlQWN0aXZpdHkgPSBmdW5jdGlvbihzYW1wbGVSYXRlLCBzYW1wbGVzSW50MTYpew0KICAJCQkvL0dldCBkYXRhIGJ5dGUgc2l6ZSwgYWxsb2NhdGUgbWVtb3J5IG9uIEVtc2NyaXB0ZW4gaGVhcCwgYW5kIGdldCBwb2ludGVyDQogIAkJCWxldCBuRGF0YUJ5dGVzID0gc2FtcGxlc0ludDE2Lmxlbmd0aCAqIHNhbXBsZXNJbnQxNi5CWVRFU19QRVJfRUxFTUVOVDsNCiAgCQkJbGV0IGRhdGFQdHIgPSBNb2R1bGUuX21hbGxvYyhuRGF0YUJ5dGVzKTsNCg0KICAJCQkvL0NvcHkgZGF0YSB0byBFbXNjcmlwdGVuIGhlYXAgKGRpcmVjdGx5IGFjY2Vzc2VkIGZyb20gTW9kdWxlLkhFQVBVOCkNCiAgCQkJbGV0IGRhdGFIZWFwID0gbmV3IFVpbnQ4QXJyYXkoTW9kdWxlLkhFQVBVOC5idWZmZXIsIGRhdGFQdHIsIG5EYXRhQnl0ZXMpOw0KICAJCQlkYXRhSGVhcC5zZXQobmV3IFVpbnQ4QXJyYXkoc2FtcGxlc0ludDE2LmJ1ZmZlcikpOw0KDQogIAkJCS8vQ2FsbCBmdW5jdGlvbiBhbmQgZ2V0IHJlc3VsdA0KICAJCQlsZXQgcmVzdWx0ID0gVmFkLnByb2Nlc3MoZGF0YUhlYXAuYnl0ZU9mZnNldCwgc2FtcGxlc0ludDE2Lmxlbmd0aCwgc2FtcGxlUmF0ZSwgDQogIAkJCQlzYW1wbGVzSW50MTZbMF0sIHNhbXBsZXNJbnQxNlsxMDBdLCBzYW1wbGVzSW50MTZbMjAwMF0pOw0KDQogIAkJCS8vRnJlZSBtZW1vcnkNCiAgCQkJTW9kdWxlLl9mcmVlKGRhdGFIZWFwLmJ5dGVPZmZzZXQpOw0KICAJCQlyZXR1cm4gcmVzdWx0OwkJLy8tMTogRVJST1IsIDA6IE5vIGFjdGl2ZSBzcGVlY2gsIDE6IEFjdGl2ZSBzcGVlY2gJKGNvcmUgZnVuY3Rpb24gZ2l2ZXMgMS02IGJ1dCBvdXRwdXQgaGVyZSBpcyAxIGZvciBhbGwpDQogIAkJfTsNCiAgCQkNCiAgCQlyZXR1cm4gVmFkOw0KICAJfSkNCiAgCS50aGVuKGZ1bmN0aW9uKHZhZCl7DQogIAkJc2VsZi52YWRNb2R1bGUgPSB2YWQ7DQogIAkJaWYgKGluaXRDYWxsYmFjaykgaW5pdENhbGxiYWNrKHNlbGYudmFkTW9kdWxlKTsNCiAgCX0pOw0KICAJLy9Nb2R1bGUuc2V0U3RhdHVzKCdEb3dubG9hZGluZy4uLicpOw0KICB9CgogIC8vaW1wb3J0ICcuL3NoYXJlZC9tZXlkYS5taW4uY29tcHJlc3NlZC5qcyc7CS8vd2UgaW1wb3J0IHRoaXMgb24gZGVtYW5kIGJlbG93DQoNCiAgdmFyIHZhZE1vZHVsZTsNCg0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7DQogICAgICAvL0F1ZGlvIHdvcmtlciBpbnRlcmZhY2UNCiAgCS8vY29uc29sZS5sb2coIldlYlJ0Y1ZhZFdvcmtlciBvbm1lc3NhZ2UiLCBlLmRhdGEpOwkJLy9ERUJVRw0KICAJaWYgKGUuZGF0YS5jdHJsKXsNCiAgCQlzd2l0Y2ggKGUuZGF0YS5jdHJsLmFjdGlvbil7DQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzJDEoZS5kYXRhLmN0cmwuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAiaGFuZGxlIjoNCiAgCQkJCWhhbmRsZUV2ZW50KGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5sb2coIlVua25vd24gY29udHJvbCBtZXNzYWdlOiIsIGUuZGF0YSk7DQogIAkJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIH07DQoNCiAgbGV0IHdvcmtlcklkID0gIndlYnJ0Yy12YWQtd29ya2VyLSIgKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKSArICItIiArIERhdGUubm93KCk7DQogIGxldCBkb0RlYnVnID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KICAvL2xldCBpc1JlYWR5Rm9yUHJvY2Vzc2luZyA9IGZhbHNlOwkJLy9UT0RPOiBpbXBsZW1lbnQNCg0KICBsZXQgaW5wdXRTYW1wbGVSYXRlOw0KICBsZXQgY2hhbm5lbENvdW50Ow0KICBsZXQgaW5wdXRTYW1wbGVTaXplOw0KICBsZXQgcHJvY2Vzc0J1ZmZlclNpemU7CS8vZGVmaW5lcyAnX3Byb2Nlc3NSaW5nQnVmZmVyJyBzaXplIHRvZ2V0aGVyIHdpdGggJ2lucHV0U2FtcGxlU2l6ZScNCiAgbGV0IHZhZE1vZGU7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KDQogIGxldCB2b2ljZUVuZXJneTsNCiAgbGV0IHZvaWNlRW5lcmd5Q2FwID0gNTA7DQogIGxldCB2b2ljZUVuZXJneURyb3BSYXRlID0gMjsNCiAgbGV0IF9zYW1wbGVzVG9UaW1lTXNGYWN0b3I7DQoNCiAgbGV0IG1leWRhQW5hbHl6ZXI7DQoNCiAgbGV0IF9wcm9jZXNzUmluZ0J1ZmZlcjsJCS8vaG9sZHMgbXVsdGlwbGUgdmFkRnJhbWVzDQogIGxldCBfdmFkRnJhbWVzOwkJCQkvL2VhY2ggZnJhbWUgcHJvY2Vzc2VzIG9uZSBjaHVuayBvZiAnX3ZhZEJ1ZmZlclNpemUnIGFzIGxvbmcgYXMgJ19wcm9jZXNzUmluZ0J1ZmZlcicgaGFzIGVub3VnaCBzYW1wbGVzDQogIGxldCBfdmFkRnJhbWVUaW1lTXM7CQkvL3JlYWwgdGltZSAobXMpIG9mIG9uZSB2YWRGcmFtZSAoZGVmaW5lZCBieSBzYW1wbGUtcmF0ZSBhbmQgYnVmZmVyIHNpemUpDQogIGxldCBfdmFkQnVmZmVyU2l6ZTsJCQkvL3NpemUgb2YgYSBzaW5nbGUgdmFkRnJhbWUgKHJlc3RyaWN0aW9ucyBhcHBseSkNCiAgbGV0IF92YWRCdWZmZXI7DQogIGxldCBfaW50MTZJbnB1dEJ1ZmZlcjsJCS8vdXNlZCBvbmx5IGlmIGlucHV0IGlzIGZsb2F0MzINCg0KICAvL3NlcXVlbmNlIGNvbnRyb2wNCiAgbGV0IHVzZVNlcXVlbmNlQW5hbHl6ZXIgPSBmYWxzZTsNCiAgbGV0IHZvaWNlQWN0aXZhdGlvblRpbWU7DQogIGxldCB2b2ljZVJlc2V0VGltZTsNCiAgbGV0IHNpbGVuY2VBY3RpdmF0aW9uVGltZTsNCiAgbGV0IG1heFNlcXVlbmNlVGltZTsNCiAgbGV0IG1pblNlcXVlbmNlVGltZTsNCg0KICBsZXQgX3NlcXVlbmNlVm9pY2VUaW1lOw0KICBsZXQgX3NlcXVlbmNlU2lsZW5jZVRpbWU7DQogIGxldCBfc2VxdWVuY2VTYXdWb2ljZSwgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UsIF9zZXF1ZW5jZUZpbmlzaGVkVm9pY2U7DQogIGxldCBfc2VxdWVuY2VJc0FjdGl2ZSwgX3NlcXVlbmNlSXNEb25lLCBfc2VxdWVuY2VTdGFydGVkQXQ7DQoNCiAgbGV0IF9pc0ZpcnN0VmFsaWRQcm9jZXNzOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCWlmIChpbnB1dFNhbXBsZVNpemUgPiBwcm9jZXNzQnVmZmVyU2l6ZSl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIlByb2Nlc3NvciAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGJpZ2dlciB0aGFuICdpbnB1dFNhbXBsZVNpemUnISBDdXJyZW50bHk6ICIgKyBpbnB1dFNhbXBsZVNpemUgKyAiID4gIiArIHByb2Nlc3NCdWZmZXJTaXplKSk7DQogIAkJLy9OT1RFOiB0aGlzIG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkvL3JlcXVpcmVtZW50cyBmb3Igc2FtcGxlUmF0ZTogODAwMCwgMTYwMDAsIDMyMDAwLCA0ODAwMCAtIHNhbXBsZUxlbmd0aDogc2FtcGxlUmF0ZS8xMDAwICogKDEwfDIwfDMwKSA9PiA0OGsgLSA0ODAsIDk2MCwgMTQ0MCA7IDE2ayAtIDE2MCwgMzIwLCA0ODA7DQogIAlpZiAoIVs4MDAwLCAxNjAwMCwgMzIwMDAsIDQ4MDAwXS5pbmNsdWRlcyhpbnB1dFNhbXBsZVJhdGUpKXsNCiAgCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbigiRm9yIHRoaXMgbW9kdWxlIHNhbXBsZS1yYXRlIGhhcyB0byBiZSBvbmUgb2Y6IDgwMDAsIDE2MDAwLCAzMjAwMCwgNDgwMDAiKSk7DQogIAl9DQogIAl2YXIgYWxsb3dlZEJ1ZmZlclNpemVzID0gW2lucHV0U2FtcGxlUmF0ZS8xMDAwICogMzAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMjAsIGlucHV0U2FtcGxlUmF0ZS8xMDAwICogMTBdOwkJLy8xMCwgMjAgYW5kIDMwbXMgZnJhbWVzDQogIAlfdmFkQnVmZmVyU2l6ZSA9IDA7DQogIAlmb3IgKGxldCBpPTA7IGk8YWxsb3dlZEJ1ZmZlclNpemVzLmxlbmd0aDsgaSsrKXsNCiAgCQlpZiAocHJvY2Vzc0J1ZmZlclNpemUgPT0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldIHx8IHByb2Nlc3NCdWZmZXJTaXplICUgYWxsb3dlZEJ1ZmZlclNpemVzW2ldID09IDApew0KICAJCQlfdmFkRnJhbWVzID0gcHJvY2Vzc0J1ZmZlclNpemUgLyBhbGxvd2VkQnVmZmVyU2l6ZXNbaV07DQogIAkJCV92YWRCdWZmZXJTaXplID0gYWxsb3dlZEJ1ZmZlclNpemVzW2ldOw0KICAJCQlicmVhazsNCiAgCQl9DQogIAl9DQogIAlpZiAoX3ZhZEJ1ZmZlclNpemUgPT0gMCl7DQogIAkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEJ1ZmZlclNpemVFeGNlcHRpb24oIkZvciBzYW1wbGUtcmF0ZSAnIiArIGlucHV0U2FtcGxlUmF0ZSArICInIHRoZSAnYnVmZmVyU2l6ZScgaGFzIHRvIGJlIGVxdWFsIG9yIGEgbXVsdGlwbGUgb2Y6ICIgKyBhbGxvd2VkQnVmZmVyU2l6ZXMuam9pbigiLCAiKSkpOw0KICAJfQ0KICAJdmFyIHJpbmdCdWZmZXJTaXplID0gcHJvY2Vzc0J1ZmZlclNpemUgKyBpbnB1dFNhbXBsZVNpemU7CQkvL1RPRE86IGNoZWNrIHNpemUgYWdhaW4NCiAgCV9wcm9jZXNzUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKHJpbmdCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJJbnQxNiIpOw0KICAJX3ZhZEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShfdmFkQnVmZmVyU2l6ZSldOw0KICAJaWYgKGlzRmxvYXQzMklucHV0KXsNCiAgCQlfaW50MTZJbnB1dEJ1ZmZlciA9IFtuZXcgSW50MTZBcnJheShpbnB1dFNhbXBsZVNpemUpXTsNCiAgCX0NCiAgCQ0KICAJX3NhbXBsZXNUb1RpbWVNc0ZhY3RvciA9IDEwMDAvaW5wdXRTYW1wbGVSYXRlOw0KICAJX3ZhZEZyYW1lVGltZU1zID0gTWF0aC5yb3VuZChfdmFkQnVmZmVyU2l6ZSAqIF9zYW1wbGVzVG9UaW1lTXNGYWN0b3IpOw0KICAJDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIAkNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgfQ0KICBmdW5jdGlvbiByZWFkeSgpew0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWlucHV0U2FtcGxlU2l6ZTogaW5wdXRTYW1wbGVTaXplLA0KICAJCQlpbnB1dElzRmxvYXQzMjogaXNGbG9hdDMySW5wdXQsDQogIAkJCXByb2Nlc3NCdWZmZXJTaXplOiBwcm9jZXNzQnVmZmVyU2l6ZSwNCiAgCQkJdmFkTW9kZTogdmFkTW9kdWxlLmdldE1vZGUoKSwNCiAgCQkJdmFkRnJhbWVzTWF4OiBfdmFkRnJhbWVzLA0KICAJCQl2YWRCdWZmZXJTaXplOiBfdmFkQnVmZmVyU2l6ZSwNCiAgCQkJdmFkRnJhbWVUaW1lTXM6IF92YWRGcmFtZVRpbWVNcywNCiAgCQkJdm9pY2VFbmVyZ3lDYXA6IHZvaWNlRW5lcmd5Q2FwLA0KICAJCQl2b2ljZUVuZXJneURyb3BSYXRlOiB2b2ljZUVuZXJneURyb3BSYXRlLA0KICAJCQl1c2VTZXF1ZW5jZUFuYWx5emVyOiB1c2VTZXF1ZW5jZUFuYWx5emVyDQogIAkJfQ0KICAJfSk7DQogIH0NCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucykgew0KICAJaWYgKHdhc0NvbnN0cnVjdG9yQ2FsbGVkKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJaW5wdXRTYW1wbGVSYXRlID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnRhcmdldFNhbXBsZVJhdGUgfHwgb3B0aW9ucy5zZXR1cC5jdHhJbmZvLnNhbXBsZVJhdGU7DQogIAljaGFubmVsQ291bnQgPSAxOwkvL29wdGlvbnMuc2V0dXAuY2hhbm5lbENvdW50IHx8IDE7CQkvL1RPRE86IG9ubHkgTU9OTyBhdG0NCiAgCWlucHV0U2FtcGxlU2l6ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVTaXplIHx8IDUxMjsNCiAgCXByb2Nlc3NCdWZmZXJTaXplID0gb3B0aW9ucy5zZXR1cC5idWZmZXJTaXplIHx8IChpbnB1dFNhbXBsZVJhdGUvMTAwMCAqIDMwICogMik7CS8vMiB3aW5kb3dzIG9mIDMwbXMgYnkgZGVmYXVsdA0KICAJdmFkTW9kZSA9IChvcHRpb25zLnNldHVwLnZhZE1vZGUgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC52YWRNb2RlIDogMzsNCiAgCWlzRmxvYXQzMklucHV0ID0gKG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyICE9IHVuZGVmaW5lZCk/IG9wdGlvbnMuc2V0dXAuaXNGbG9hdDMyIDogZmFsc2U7DQogIAkNCiAgCWlmIChvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwICE9IHVuZGVmaW5lZCkgdm9pY2VFbmVyZ3lDYXAgPSBvcHRpb25zLnNldHVwLnZvaWNlRW5lcmd5Q2FwOw0KICAJaWYgKG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZSkgdm9pY2VFbmVyZ3lEcm9wUmF0ZSA9IG9wdGlvbnMuc2V0dXAudm9pY2VFbmVyZ3lEcm9wUmF0ZTsNCiAgCWlmIChvcHRpb25zLnNldHVwLnNlcXVlbmNlKXsNCiAgCQl1c2VTZXF1ZW5jZUFuYWx5emVyID0gdHJ1ZTsNCiAgCQl2b2ljZUFjdGl2YXRpb25UaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS52b2ljZUFjdGl2YXRpb25UaW1lIHx8IDI1MDsNCiAgCQl2b2ljZVJlc2V0VGltZSA9IG9wdGlvbnMuc2V0dXAuc2VxdWVuY2Uudm9pY2VSZXNldFRpbWUgfHwgMTUwMDsNCiAgCQlzaWxlbmNlQWN0aXZhdGlvblRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLnNpbGVuY2VBY3RpdmF0aW9uVGltZSB8fCAyNTA7DQogIAkJbWF4U2VxdWVuY2VUaW1lID0gb3B0aW9ucy5zZXR1cC5zZXF1ZW5jZS5tYXhTZXF1ZW5jZVRpbWUgfHwgNjAwMDsNCiAgCQltaW5TZXF1ZW5jZVRpbWUgPSBvcHRpb25zLnNldHVwLnNlcXVlbmNlLm1pblNlcXVlbmNlVGltZSB8fCA2MDA7DQogIAl9ZWxzZSB7DQogIAkJdXNlU2VxdWVuY2VBbmFseXplciA9IGZhbHNlOw0KICAJfQ0KICAJDQogIAkvL1RPRE86IHVudXNlZCBzbyBmYXIgLi4uIGtlZXAgb3IgcmVtb3ZlPw0KICAJbWV5ZGFBbmFseXplciA9IG9wdGlvbnMuc2V0dXAubWV5ZGFBbmFseXplciB8fCB7fTsNCiAgCXZhciBtZXlkYVNldHRpbmdzS2V5cyA9IE9iamVjdC5rZXlzKG1leWRhQW5hbHl6ZXIpOw0KICAJaWYgKG1leWRhU2V0dGluZ3NLZXlzLmxlbmd0aCA+IDApew0KICAJCS8vaW1wb3J0IG9uIGRlbWFuZA0KICAJCWltcG9ydFNjcmlwdHMoJy4vc2hhcmVkL21leWRhLm1pbi5jb21wcmVzc2VkLmpzJyk7DQogIAkJLy9zZXR1cA0KICAJCW1leWRhU2V0dGluZ3NLZXlzLmZvckVhY2goZnVuY3Rpb24oaywgaSl7DQogIAkJCWlmIChrID09ICJmZWF0dXJlcyIpew0KICAJCQkJbWV5ZGFBbmFseXplcltrXTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJTWV5ZGFba10gPSBtZXlkYUFuYWx5emVyW2tdOw0KICAJCQl9DQogIAkJfSk7DQogIAkJTWV5ZGEuc2FtcGxlUmF0ZSA9IHRhcmdldFNhbXBsZVJhdGU7DQogIAkJTWV5ZGEuYnVmZmVyU2l6ZSA9IGlucHV0U2FtcGxlU2l6ZTsNCiAgCQlpZiAoIU1leWRhLmJ1ZmZlclNpemUgfHwgKE1leWRhLmJ1ZmZlclNpemUgJiAoTWV5ZGEuYnVmZmVyU2l6ZSAtMSkgIT0gMCkpew0KICAJCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZU1leWRhRXJyb3IiLCBtZXNzYWdlOiAiTWV5ZGEgYnVmZmVyLXNpemUgbXVzdCBiZSBwb3dlciBvZiAyLCBlLmcuIDEyOCwgMjU2LCA1MTIsIDEwMjQsIC4uLiJ9Ow0KICAJCX0NCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAJDQogIAlmdW5jdGlvbiBvblZhZExvZyhtc2cpew0KICAJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJWYWRNb2R1bGVMb2cgLSIsIG1zZyk7CQkJLy9ERUJVRyAodXNlIHBvc3RNZXNzYWdlPykNCiAgCX0NCiAgCWZ1bmN0aW9uIG9uVmFkRXJyb3IobXNnKXsNCiAgCQljb25zb2xlLmVycm9yKCJWYWRNb2R1bGVFcnJvciAtIiwgbXNnKTsNCiAgCQl0aHJvdyB7bmFtZTogIlZhZE1vZHVsZUVycm9yIiwgbWVzc2FnZTogbXNnfTsJLy9UT0RPOiB0aGlzIHByb2JhYmx5IG5lZWRzIHRvIGJlIGEgc3RyaW5nIHRvIHNob3cgdXAgaW4gd29ya2VyLm9uZXJyb3IgcHJvcGVybHkgOi0vDQogIAl9DQogIAkNCiAgCS8vcHJlcGFyZQ0KICAJaWYgKCF2YWRNb2R1bGUpew0KICAJCW9uVmFkTG9nKCJJbml0LiBXZWJSVEMgVkFEIFdBU00gbW9kdWxlIik7CQkvL0RFQlVHDQogIAkJbmV3IFdlYlJ0Y1ZvaWNlQWN0aXZpdHlEZXRlY3Rvcih7DQogIAkJCW9uSW5mbzogb25WYWRMb2csDQogIAkJCW9uRXJyb3I6IG9uVmFkRXJyb3IsDQogIAkJCW9uU3RhdHVzTWVzc2FnZTogb25WYWRMb2csDQogIAkJCW1vZGU6IHZhZE1vZGUNCiAgCQl9LCBmdW5jdGlvbih2KXsNCiAgCQkJb25WYWRMb2coIldlYlJUQyBWQUQgcmVhZHkiKTsJCQkJLy9ERUJVRw0KICAJCQl2YWRNb2R1bGUgPSB2Ow0KICAJCQlyZWFkeSgpOw0KICAJCX0pOw0KICAJfWVsc2Ugew0KICAJCW9uVmFkTG9nKCJXZWJSVEMgVkFEIG1vZHVsZSBhbHJlYWR5IGxvYWRlZCIpOwkJLy9ERUJVRw0KICAJCXJlYWR5KCk7DQogIAl9DQogIH0NCg0KICAvL3NlcXVlbmNlIGJsb2NrDQogIGZ1bmN0aW9uIHNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSl7DQogIAlpZiAodm9pY2VBY3Rpdml0eSA9PSAwKXsNCiAgCQlpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSArPSBfdmFkRnJhbWVUaW1lTXM7DQogIAkJCWlmIChfc2VxdWVuY2VTaWxlbmNlVGltZSA+IHZvaWNlUmVzZXRUaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVNhd1NpbGVuY2VBZnRlclZvaWNlID0gdHJ1ZTsNCiAgCQkJfWVsc2UgaWYgKF9zZXF1ZW5jZVNpbGVuY2VUaW1lID4gc2lsZW5jZUFjdGl2YXRpb25UaW1lKXsNCiAgCQkJCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAkJCX0NCiAgCQl9DQogIAl9ZWxzZSB7DQogIAkJX3NlcXVlbmNlVm9pY2VUaW1lICs9IF92YWRGcmFtZVRpbWVNczsNCiAgCQlpZiAoIV9zZXF1ZW5jZVNhd1ZvaWNlICYmIF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTYXdWb2ljZSA9IHRydWU7DQogIAkJCXJlZ2lzdGVyRXZlbnQoMSwgJ3ZvaWNlX3N0YXJ0Jyk7DQogIAkJfWVsc2UgaWYgKF9zZXF1ZW5jZVZvaWNlVGltZSA+IHZvaWNlQWN0aXZhdGlvblRpbWUpew0KICAJCQlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAkJfQ0KICAJfQ0KICAJDQogIAlpZiAoX3NlcXVlbmNlU2F3Vm9pY2UgJiYgX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2Upew0KICAJCV9zZXF1ZW5jZUZpbmlzaGVkVm9pY2UgPSB0cnVlOw0KICAJfWVsc2UgaWYgKF9zZXF1ZW5jZVNhd1ZvaWNlICYmIChfc2VxdWVuY2VWb2ljZVRpbWUgPiBtaW5TZXF1ZW5jZVRpbWUpKXsNCiAgCQlpZiAoIV9zZXF1ZW5jZUlzQWN0aXZlKXsNCiAgCQkJX3NlcXVlbmNlSXNBY3RpdmUgPSB0cnVlOw0KICAJCQlfc2VxdWVuY2VTdGFydGVkQXQgPSBEYXRlLm5vdygpOw0KICAJCQlyZWdpc3RlckV2ZW50KDIsICdzZXF1ZW5jZV9zdGFydGVkJyk7DQogIAkJfQ0KICAJfQ0KDQogIAlpZiAoX3NlcXVlbmNlRmluaXNoZWRWb2ljZSl7DQogIAkJX3NlcXVlbmNlSXNEb25lID0gdHJ1ZTsNCiAgCQlyZWdpc3RlckV2ZW50KDMsICdmaW5pc2hlZF92b2ljZScpOw0KDQogIAl9ZWxzZSBpZiAoX3NlcXVlbmNlU2F3Vm9pY2Upew0KICAJCWlmIChfc2VxdWVuY2VJc0FjdGl2ZSAmJiAoKERhdGUubm93KCkgLSBfc2VxdWVuY2VTdGFydGVkQXQpID4gbWF4U2VxdWVuY2VUaW1lKSkgew0KICAJCQlfc2VxdWVuY2VJc0RvbmUgPSB0cnVlOw0KICAJCQlyZWdpc3RlckV2ZW50KDQsICdmaW5pc2hlZF92b2ljZV9tYXh0aW1lJyk7DQogIAkJfQ0KICAJfQ0KICAJCQ0KICAJaWYgKF9zZXF1ZW5jZUlzRG9uZSl7DQogIAkJaWYgKF9zZXF1ZW5jZUlzQWN0aXZlKSByZWdpc3RlckV2ZW50KDUsICdzZXF1ZW5jZV9jb21wbGV0ZScpOw0KICAJCXJlc2V0U2VxdWVuY2UoKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiByZXNldFNlcXVlbmNlKCl7DQogIAl2b2ljZUVuZXJneSA9IDA7DQogIAlfc2VxdWVuY2VTYXdWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlRmluaXNoZWRWb2ljZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU2F3U2lsZW5jZUFmdGVyVm9pY2UgPSBmYWxzZTsNCiAgCV9zZXF1ZW5jZVZvaWNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VTaWxlbmNlVGltZSA9IDA7DQogIAlfc2VxdWVuY2VJc0FjdGl2ZSA9IGZhbHNlOw0KICAJX3NlcXVlbmNlU3RhcnRlZEF0ID0gMDsNCiAgCV9zZXF1ZW5jZUlzRG9uZSA9IGZhbHNlOw0KICB9DQogIGZ1bmN0aW9uIHJlZ2lzdGVyRXZlbnQoY29kZSwgbXNnLCBkYXRhKXsNCiAgCXZhciBtc2cgPSB7DQogIAkJdmFkU2VxdWVuY2VDb2RlOiBjb2RlLA0KICAJCXZhZFNlcXVlbmNlTXNnOiBtc2cNCiAgCX07DQogIAlzd2l0Y2ggKGNvZGUpew0KICAJCS8vY2FzZSAxOiB2b2ljZSBzdGFydA0KICAJCS8vY2FzZSAyOiBzZXF1ZW5jZSBzdGFydA0KICAJCS8vY2FzZSAzOiBjYXNlIDQ6IGZpbmlzaGVkIHZvaWNlDQogIAkJY2FzZSA1Og0KICAJCQkvL3NlcXVlbmNlIGNvbXBsZXRlDQogIAkJCW1zZy52YWRTZXF1ZW5jZVN0YXJ0ZWQgPSBfc2VxdWVuY2VTdGFydGVkQXQ7DQogIAkJCW1zZy52YWRTZXF1ZW5jZUVuZGVkID0gRGF0ZS5ub3coKTsNCiAgCQkJYnJlYWs7DQogIAl9DQogIAkvL1NlbmQgaW5mbw0KICAJcG9zdE1lc3NhZ2UobXNnKTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MkMShkYXRhKSB7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS5jaGFubmVscywgZGF0YS50eXBlDQogIAkvL21pZ2h0IGhhdmU6IGRhdGEucm1zCS0JVE9ETzogbWFrZSB1c2Ugb2Y/DQogIAlpZiAoZGF0YSAmJiBkYXRhLnNhbXBsZXMpew0KICAJCS8vVXNlIDFzdCBpbnB1dCBhbmQgb3V0cHV0IG9ubHkNCiAgCQlsZXQgaW5wdXQgPSBkYXRhLnNhbXBsZXM7DQogIAkJaW5wdXRbMF0ubGVuZ3RoOw0KICAJCQ0KICAJCWlmIChfaXNGaXJzdFZhbGlkUHJvY2Vzcyl7DQogIAkJCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gZmFsc2U7DQogIAkJCS8vY2hlY2s6IGlucHV0U2FtcGxlUmF0ZSwgaW5wdXRTYW1wbGVTaXplLCBjaGFubmVsQ291bnQsIGZsb2F0MzINCiAgCQkJaWYgKGRhdGEuc2FtcGxlUmF0ZSAhPSBpbnB1dFNhbXBsZVJhdGUpew0KICAJCQkJdmFyIG1zZyA9ICJTYW1wbGUtcmF0ZSBtaXNtYXRjaCEgU2hvdWxkIGJlICciICsgaW5wdXRTYW1wbGVSYXRlICsgIicgaXMgJyIgKyBkYXRhLnNhbXBsZVJhdGUgKyAiJyI7DQogIAkJCQljb25zb2xlLmVycm9yKCJBdWRpbyBXb3JrZXIgc2FtcGxlLXJhdGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgU2FtcGxlUmF0ZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQlsZXQgaW5wdXRBcnJheVR5cGUgPSBkYXRhLnR5cGUgfHwgZGF0YS5zYW1wbGVzWzBdLmNvbnN0cnVjdG9yLm5hbWU7DQogIAkJCWxldCBpc0Zsb2F0MzIgPSAoaW5wdXRBcnJheVR5cGUuaW5kZXhPZigiRmxvYXQzMiIpID49IDApOw0KICAJCQlpZiAoaXNGbG9hdDMyICE9IGlzRmxvYXQzMklucHV0KXsNCiAgCQkJCXZhciBtc2cgPSAiQXJyYXkgdHlwZSBtaXNtYXRjaCEgSW5wdXQgc2FtcGxlcyBhcmUgb2YgdHlwZSAnIiArIGlucHV0QXJyYXlUeXBlICsgIicgYnV0IGV4cGVjdGVkOiAiICsgKGlzRmxvYXQzMklucHV0PyAiRmxvYXQzMiIgOiAiSW50MTYiKTsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciB0eXBlIGV4Y2VwdGlvbiAtIE1zZy46ICIgKyBtc2cpOw0KICAJCQkJdGhyb3cgSlNPTi5zdHJpbmdpZnkobmV3IEFycmF5VHlwZUV4Y2VwdGlvbihtc2cpKTsJCQkvL05PVEU6IHRoaXMgbmVlZHMgdG8gYmUgYSBzdHJpbmcgdG8gc2hvdyB1cCBpbiB3b3JrZXIub25lcnJvciBwcm9wZXJseSA6LS8NCiAgCQkJfQ0KICAJCQkvL1RPRE86IHNob3VsZCB3ZSByZS1pbml0LiBpbnN0ZWFkIG9mIGZhaWw/DQogIAkJfQ0KICAJCQ0KICAJCS8vVE9ETzogaXMgTU9OTw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCUNvbW1vbkNvbnZlcnRlcnMuZmxvYXRUbzE2Qml0UENNKF9pbnQxNklucHV0QnVmZmVyWzBdLCBpbnB1dFswXSk7DQogIAkJCV9wcm9jZXNzUmluZ0J1ZmZlci5wdXNoKFtfaW50MTZJbnB1dEJ1ZmZlclswXV0pOw0KICAJCX1lbHNlIHsNCiAgCQkJX3Byb2Nlc3NSaW5nQnVmZmVyLnB1c2goaW5wdXQpOw0KICAJCX0NCiAgCQkNCiAgCQkvL1Byb2Nlc3MgaWYgd2UgaGF2ZSBlbm91Z2ggZnJhbWVzDQogIAkJdmFyIHZhZFJlc3VsdHMgPSBbXTsNCiAgCQl3aGlsZSAoX3Byb2Nlc3NSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSA+PSBfdmFkQnVmZmVyU2l6ZSkgew0KICAJCQkvL3B1bGwgc2FtcGxlcw0KICAJCQlfcHJvY2Vzc1JpbmdCdWZmZXIucHVsbChfdmFkQnVmZmVyKTsNCiAgCQkJDQogIAkJCS8vYWN0aXZpdHkgY2hlY2sNCiAgCQkJdmFyIHZvaWNlQWN0aXZpdHkgPSB2YWRNb2R1bGUuZ2V0Vm9pY2VBY3Rpdml0eShpbnB1dFNhbXBsZVJhdGUsIF92YWRCdWZmZXJbMF0pOwkJLy9UT0RPOiBpcyBNT05PDQogIAkJCXZhZFJlc3VsdHMucHVzaCh2b2ljZUFjdGl2aXR5KTsNCiAgCQkJDQogIAkJCS8vdm9pY2UgZW5lcmd5IGFuZCBzZXF1ZW5jZSBjaGVjaw0KICAJCQlpZiAodm9pY2VBY3Rpdml0eSl7DQogIAkJCQl2b2ljZUVuZXJneSsrOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5Q2FwICYmIHZvaWNlRW5lcmd5ID4gdm9pY2VFbmVyZ3lDYXApIHZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3lDYXA7DQogIAkJCX1lbHNlIHsNCiAgCQkJCXZvaWNlRW5lcmd5ID0gdm9pY2VFbmVyZ3kgLSB2b2ljZUVuZXJneURyb3BSYXRlOw0KICAJCQkJaWYgKHZvaWNlRW5lcmd5IDwgMCkgdm9pY2VFbmVyZ3kgPSAwOw0KICAJCQl9DQogIAkJCWlmICh1c2VTZXF1ZW5jZUFuYWx5emVyKXsNCiAgCQkJCXNlcXVlbmNlRGV0ZWN0b3Iodm9pY2VBY3Rpdml0eSk7DQogIAkJCX0NCiAgCQl9DQogIAkJaWYgKHZhZFJlc3VsdHMubGVuZ3RoID4gMCl7DQogIAkJCS8vU2VuZCBpbmZvDQogIAkJCXBvc3RNZXNzYWdlKHsNCiAgCQkJCXZvaWNlQWN0aXZpdHk6IHZhZFJlc3VsdHMsDQogIAkJCQl2b2ljZUVuZXJneTogdm9pY2VFbmVyZ3kNCiAgCQkJfSk7DQogIAkJfQ0KICAJfQ0KICAJcmV0dXJuIHRydWU7DQogIH0NCg0KICBmdW5jdGlvbiBoYW5kbGVFdmVudChkYXRhKXsNCiAgCS8vZGF0YSB0aGF0IHNob3VsZCBub3QgYmUgcHJvY2Vzc2VkIGJ1dCBtaWdodCB0cmlnZ2VyIGFuIGV2ZW50DQogIH0NCg0KICBmdW5jdGlvbiBzdGFydChvcHRpb25zKSB7DQogICAgICAvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkLCB1c2Ugb25seSBmb3IgZ2F0aW5nIG9yIHNpbWlsYXIgc3R1ZmYhDQogIAlyZXNldFNlcXVlbmNlKCk7DQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKSB7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucykgew0KICAgICAgLy9UT0RPOiBjbGVhbiB1cCB3b3JrZXIgYW5kIHByZXAuIGZvciByZXN0YXJ0DQogIAlpbml0KCk7DQogIH0NCiAgZnVuY3Rpb24gcmVsZWFzZShvcHRpb25zKXsNCiAgCS8vZGVzdHJveQ0KICAJX3Byb2Nlc3NSaW5nQnVmZmVyID0gbnVsbDsNCiAgCV92YWRCdWZmZXIgPSBudWxsOw0KICAJX2ludDE2SW5wdXRCdWZmZXIgPSBudWxsOw0KICAJdmFkTW9kdWxlID0gbnVsbDsJCS8vVE9ETzogaXMgdGhlcmUgYW55IG90aGVyICdkZXN0cm95JycgZnVuY3Rpb24/DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQogIC8vLi4uCgp9KSgpOwoK",null,!1),ave=w4("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqDQogICAqIE9yaWdpbmFsIGNvcHlyaWdodCAyMDE4IEdvb2dsZSBMTEMgLSBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wOw0KICAgKiBNb2RpZmllZCBmb3IgU0VQSUEgcHJvamVjdCAoTUlUIExpY2Vuc2UpDQogICAqLw0KICAgDQogIC8qKg0KICAgKiBBIEpTIEZJRk8gaW1wbGVtZW50YXRpb24gZm9yIHRoZSBBdWRpb1dvcmtsZXQuDQogICAqIE5vdGU6DQogICAqICAtIFRoZSBjaGFubmVsIGNvdW50IG9mIGlucHV0L291dHB1dCBjYW5ub3QgYmUgY2hhbmdlZCBkeW5hbWljYWxseS4NCiAgICogICAgVGhlIEF1ZGlvV29ya2xldE5vZGUgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aCB0aGUgYC5jaGFubmVsQ291bnQgPSBrYA0KICAgKiAgICAod2hlcmUgayBpcyB0aGUgY2hhbm5lbCBjb3VudCB5b3Ugd2FudCkgYW5kIGAuY2hhbm5lbENvdW50TW9kZSA9IGV4cGxpY2l0YC4NCiAgICoNCiAgICogQGNsYXNzDQogICAqLw0KICAgY2xhc3MgUmluZ0J1ZmZlciB7DQogICAgLyoqDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBsZW5ndGggQnVmZmVyIGxlbmd0aCBpbiBmcmFtZXMuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBjaGFubmVsQ291bnQgQnVmZmVyIGNoYW5uZWwgY291bnQuDQogICAgICogQHBhcmFtICB7bnVtYmVyfSBwcmVjaXNpb24gIlVpbnQ4IiwgIkludDgiLCAiVWludDE2IiwgIkludDE2IiwgIkZsb2F0MzIiIGV0Yy4NCiAgICAgKi8NCiAgICBjb25zdHJ1Y3RvcihsZW5ndGgsIGNoYW5uZWxDb3VudCwgcHJlY2lzaW9uKSB7DQogICAgICB0aGlzLl9yZWFkSW5kZXggPSAwOw0KICAgICAgdGhpcy5fd3JpdGVJbmRleCA9IDA7DQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KDQogICAgICB0aGlzLl9jaGFubmVsQ291bnQgPSBjaGFubmVsQ291bnQ7DQogICAgICB0aGlzLl9sZW5ndGggPSBsZW5ndGg7DQogICAgICB0aGlzLl9jaGFubmVsRGF0YSA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsraSkgew0KICAJICBpZiAocHJlY2lzaW9uID09ICJVaW50MTYiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDE2Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEludDE2QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIlVpbnQ4Iil7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTsgfQ0KICAJICBlbHNlIGlmIChwcmVjaXNpb24gPT0gIkludDgiKXsgdGhpcy5fY2hhbm5lbERhdGFbaV0gPSBuZXcgSW50OEFycmF5KGxlbmd0aCk7IH0NCiAgCSAgZWxzZSB7IHRoaXMuX2NoYW5uZWxEYXRhW2ldID0gbmV3IEZsb2F0MzJBcnJheShsZW5ndGgpOyB9DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogR2V0dGVyIGZvciBBdmFpbGFibGUgZnJhbWVzIGluIGJ1ZmZlci4NCiAgICAgKg0KICAgICAqIEByZXR1cm4ge251bWJlcn0gQXZhaWxhYmxlIGZyYW1lcyBpbiBidWZmZXIuDQogICAgICovDQogICAgZ2V0IGZyYW1lc0F2YWlsYWJsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9mcmFtZXNBdmFpbGFibGU7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUHVzaCBhIHNlcXVlbmNlIG9mIEFycmF5cyB0byBidWZmZXIuDQogICAgICoNCiAgICAgKiBAcGFyYW0gIHthcnJheX0gYXJyYXlTZXF1ZW5jZSBBIHNlcXVlbmNlIG9mIEFycmF5cy4NCiAgICAgKiBAcGFyYW0gIHtmdW5jdGlvbn0gY3VzdG9tVHJhbnNmb3JtIEEgZnVuY3Rpb24gb2YgKGFycmF5LCBjaGFubmVsLCBpbmRleCkgdG8gdHJhbnNmb3JtIHRoZSBpbnB1dCBkdXJpbmcgcHVzaCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVzaChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIHxhcnJheVNlcXVlbmNlfCBzdG9yYWdlIHRvIHRoZSBpbnRlcm5hbCBidWZmZXIuDQogICAgICBsZXQgc291cmNlTGVuZ3RoID0gYXJyYXlTZXF1ZW5jZVswXS5sZW5ndGg7DQogIAlsZXQgdHJhbnNmb3JtID0gY3VzdG9tVHJhbnNmb3JtIHx8IGZ1bmN0aW9uKHRoaXNBcnJheSwgY2hhbm5lbCwgaSl7DQogIAkJcmV0dXJuIHRoaXNBcnJheVtjaGFubmVsXVtpXTsNCiAgCX07DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZUxlbmd0aDsgKytpKSB7DQogICAgICAgIGxldCB3cml0ZUluZGV4ID0gKHRoaXMuX3dyaXRlSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIHRoaXMuX2NoYW5uZWxEYXRhW2NoYW5uZWxdW3dyaXRlSW5kZXhdID0gdHJhbnNmb3JtKGFycmF5U2VxdWVuY2UsIGNoYW5uZWwsIGkpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuX3dyaXRlSW5kZXggKz0gc291cmNlTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3dyaXRlSW5kZXggPj0gdGhpcy5fbGVuZ3RoKSB7DQogICAgICAgIHRoaXMuX3dyaXRlSW5kZXggPSB0aGlzLl93cml0ZUluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICAvLyBGb3IgZXhjZXNzaXZlIGZyYW1lcywgdGhlIGJ1ZmZlciB3aWxsIGJlIG92ZXJ3cml0dGVuLg0KICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlICs9IHNvdXJjZUxlbmd0aDsNCiAgICAgIGlmICh0aGlzLl9mcmFtZXNBdmFpbGFibGUgPiB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fZnJhbWVzQXZhaWxhYmxlID0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFB1bGwgZGF0YSBvdXQgb2YgYnVmZmVyIGFuZCBmaWxsIGEgZ2l2ZW4gc2VxdWVuY2Ugb2YgQXJyYXlzLg0KICAgICAqDQogICAgICogQHBhcmFtICB7YXJyYXl9IGFycmF5U2VxdWVuY2UgQW4gYXJyYXkgb2YgQXJyYXlzLg0KICAgICAqIEBwYXJhbSAge2Z1bmN0aW9ufSBjdXN0b21UcmFuc2Zvcm0gQSBmdW5jdGlvbiBvZiAoYXJyYXksIGNoYW5uZWwsIGluZGV4KSB0byB0cmFuc2Zvcm0gdGhlIG91dHB1dCBkdXJpbmcgcHVsbCAob3IgbnVsbCkuDQogICAgICovDQogICAgcHVsbChhcnJheVNlcXVlbmNlLCBjdXN0b21UcmFuc2Zvcm0pIHsNCiAgICAgIC8vIFRoZSBjaGFubmVsIGNvdW50IG9mIGFycmF5U2VxdWVuY2UgYW5kIHRoZSBsZW5ndGggb2YgZWFjaCBjaGFubmVsIG11c3QNCiAgICAgIC8vIG1hdGNoIHdpdGggdGhpcyBidWZmZXIgb2JlamN0Lg0KDQogICAgICAvLyBJZiB0aGUgRklGTyBpcyBjb21wbGV0ZWx5IGVtcHR5LCBkbyBub3RoaW5nLg0KICAgICAgaWYgKHRoaXMuX2ZyYW1lc0F2YWlsYWJsZSA9PT0gMCkgew0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIGxldCBkZXN0aW5hdGlvbkxlbmd0aCA9IGFycmF5U2VxdWVuY2VbMF0ubGVuZ3RoOw0KICAJbGV0IHRyYW5zZm9ybSA9IGN1c3RvbVRyYW5zZm9ybSB8fCBmdW5jdGlvbih0aGlzQXJyYXksIGNoYW5uZWwsIGkpew0KICAJCXJldHVybiB0aGlzQXJyYXlbY2hhbm5lbF1baV07DQogIAl9Ow0KDQogICAgICAvLyBUcmFuc2ZlciBkYXRhIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciB0byB0aGUgfGFycmF5U2VxdWVuY2V8IHN0b3JhZ2UuDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc3RpbmF0aW9uTGVuZ3RoOyArK2kpIHsNCiAgICAgICAgbGV0IHJlYWRJbmRleCA9ICh0aGlzLl9yZWFkSW5kZXggKyBpKSAlIHRoaXMuX2xlbmd0aDsNCiAgICAgICAgZm9yIChsZXQgY2hhbm5lbCA9IDA7IGNoYW5uZWwgPCB0aGlzLl9jaGFubmVsQ291bnQ7ICsrY2hhbm5lbCkgew0KICAgICAgICAgIGFycmF5U2VxdWVuY2VbY2hhbm5lbF1baV0gPSB0cmFuc2Zvcm0odGhpcy5fY2hhbm5lbERhdGEsIGNoYW5uZWwsIHJlYWRJbmRleCk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fcmVhZEluZGV4ICs9IGRlc3RpbmF0aW9uTGVuZ3RoOw0KICAgICAgaWYgKHRoaXMuX3JlYWRJbmRleCA+PSB0aGlzLl9sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5fcmVhZEluZGV4ID0gdGhpcy5fcmVhZEluZGV4IC0gdGhpcy5fbGVuZ3RoOw0KICAgICAgfQ0KDQogICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgLT0gZGVzdGluYXRpb25MZW5ndGg7DQogICAgICBpZiAodGhpcy5fZnJhbWVzQXZhaWxhYmxlIDwgMCkgew0KICAgICAgICB0aGlzLl9mcmFtZXNBdmFpbGFibGUgPSAwOw0KICAgICAgfQ0KICAgIH0NCiAgfQoKICAvL1NFUElBIFNUVCBTZXJ2ZXIgQ2xpZW50Og0KDQogIGNsYXNzIFNlcGlhU3R0U29ja2V0Q2xpZW50IHsNCg0KICAJY29uc3RydWN0b3Ioc2VydmVyVXJsLCBjbGllbnRJZCwgYWNjZXNzVG9rZW4sIGVuZ2luZU9wdGlvbnMsIHNlcnZlck9wdGlvbnMpew0KICAJCXRoaXMuc2VydmVyVXJsID0gKHNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSIpLnJlcGxhY2UoIlwvJCIsICIiKTsNCiAgCQl0aGlzLnNvY2tldEhvc3QgPSB0aGlzLnNlcnZlclVybC5yZXBsYWNlKC9eKGh0dHApLywgIndzIikgKyAiL3NvY2tldCI7CS8vbm90ZTogJy9zb2NrZXQnIGlzIGEgcGF0aCBhbGlhcyBmb3IgcHJveGllcw0KICAJCXRoaXMuY2xpZW50SWQgPSBjbGllbnRJZCB8fCAiYW55IjsNCiAgCQl0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCg0KICAJCWlmICghZW5naW5lT3B0aW9ucykgZW5naW5lT3B0aW9ucyA9IHt9Ow0KICAJCWlmICghc2VydmVyT3B0aW9ucykgc2VydmVyT3B0aW9ucyA9IHt9Ow0KDQogIAkJdGhpcy5zZXJ2ZXJWZXJzaW9uID0gIiI7DQogIAkJdGhpcy5hc3JFbmdpbmUgPSAiIjsNCiAgCQkNCiAgCQl0aGlzLmF2YWlsYWJsZUxhbmd1YWdlcyA9IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gW107DQogIAkJdGhpcy5hdmFpbGFibGVGZWF0dXJlcyA9IFtdOw0KICAJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oew0KICAJCQlzYW1wbGVyYXRlOiAxNjAwMCwNCiAgCQkJY29udGludW91czogZmFsc2UsDQogIAkJCWxhbmd1YWdlOiAiIiwNCiAgCQkJdGFzazogIiIsDQogIAkJCW1vZGVsOiAiIg0KICAJCX0sIGVuZ2luZU9wdGlvbnMpOw0KDQogIAkJdGhpcy5hY3RpdmVMYW5ndWFnZUNvZGUgPSB0aGlzLmFjdGl2ZU9wdGlvbnMubGFuZ3VhZ2UgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJdGhpcy5hY3RpdmVBc3JNb2RlbCA9IHRoaXMuYWN0aXZlT3B0aW9ucy5tb2RlbCB8fCAiIjsNCiAgCQkvL05PVEU6IGN1cnJlbnRseSBub3QgYXNzaWduZWQNCiAgCQl0aGlzLnBocmFzZXMgPSB0aGlzLmFjdGl2ZU9wdGlvbnMucGhyYXNlcyB8fCBbXTsNCiAgCQl0aGlzLmhvdFdvcmRzID0gdGhpcy5hY3RpdmVPcHRpb25zLmhvdFdvcmRzIHx8IFtdOw0KDQogIAkJdGhpcy5fbXNnSWQgPSAwOw0KDQogIAkJdGhpcy53ZWJzb2NrZXQgPSB1bmRlZmluZWQ7DQogIAkJdGhpcy5fY29ubmVjdGlvbklkID0gMDsNCg0KICAJCXRoaXMuYXV0b0Nsb3NlT25MYXN0RmluYWwgPSB0cnVlOwkvL2FwcGxpZXMgdG8gbm9uLWNvbnRpbnVvdXMgc2V0dXAgb25seQ0KDQogIAkJdGhpcy5jb25uZWN0aW9uSXNPcGVuID0gZmFsc2U7DQogIAkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQoNCiAgCQl0aGlzLl9vbk9wZW4gPSBzZXJ2ZXJPcHRpb25zLm9uT3BlbiB8fCBmdW5jdGlvbigpe307DQogIAkJdGhpcy5fb25SZWFkeSA9IHNlcnZlck9wdGlvbnMub25SZWFkeSB8fCBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXt9Ow0KICAJCXRoaXMuX29uQ2xvc2UgPSBzZXJ2ZXJPcHRpb25zLm9uQ2xvc2UgfHwgZnVuY3Rpb24oZXYpe307DQogIAkJdGhpcy5fb25SZXN1bHQgPSBzZXJ2ZXJPcHRpb25zLm9uUmVzdWx0IHx8IGZ1bmN0aW9uKHJlcyl7fTsNCiAgCQl0aGlzLl9vbkVycm9yID0gc2VydmVyT3B0aW9ucy5vbkVycm9yIHx8IGZ1bmN0aW9uKGVycil7DQogIAkJCWNvbnNvbGUuZXJyb3IoIlNlcGlhU3R0U29ja2V0Q2xpZW50IEVSUk9SIiwgZXJyKTsNCiAgCQl9Ow0KDQogIAkJdGhpcy5fc2tpcEF1dG9XZWxjb21lID0gc2VydmVyT3B0aW9ucy5za2lwQXV0b1dlbGNvbWU7DQogIAkJdGhpcy5fZG9EZWJ1ZyA9IHNlcnZlck9wdGlvbnMuZG9EZWJ1ZzsNCiAgCX0NCg0KICAJbG9nKG1zZyl7DQogIAkJaWYgKHRoaXMuX2RvRGVidWcpew0KICAJCQljb25zb2xlLmxvZygiU2VwaWFTdHRTb2NrZXRDbGllbnQiLCBtc2cpOw0KICAJCX0NCiAgCX0NCg0KICAJLy8tLS0gSFRUUCBJbnRlcmZhY2UgLS0tDQoNCiAgCXBpbmdTZXJ2ZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3BpbmciLCB7DQogIAkJCXNpZ25hbDogY29udHJvbGxlci5zaWduYWwNCiAgCQl9KS50aGVuKGZ1bmN0aW9uKHJlcyl7IHJldHVybiByZXMuanNvbigpOyB9KQ0KICAJCS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soanNvbik7DQogIAkJfSkNCiAgCQkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJbG9hZFNlcnZlckluZm8oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKXsNCiAgCQljb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpOw0KICAJCXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjb250cm9sbGVyLmFib3J0KCk7fSwgODAwMCk7DQogIAkJZmV0Y2godGhpcy5zZXJ2ZXJVcmwgKyAiL3NldHRpbmdzIiwgew0KICAJCQltZXRob2Q6ICJHRVQiLA0KICAJCQlzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsDQogIAkJfSkudGhlbihmdW5jdGlvbihyZXMpew0KICAJCQlpZiAocmVzLm9rKXsNCiAgCQkJCXJldHVybiByZXMuanNvbigpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoZXJyb3JDYWxsYmFjaykgZXJyb3JDYWxsYmFjayh7DQogIAkJCQkJIm5hbWUiOiAiRmV0Y2hFcnJvciIsICJtZXNzYWdlIjogcmVzLnN0YXR1c1RleHQsICJjb2RlIjogcmVzLnN0YXR1cw0KICAJCQkJfSk7DQogIAkJCX0NCiAgCQl9KS50aGVuKGZ1bmN0aW9uKGpzb24pew0KICAJCQlpZiAoanNvbiAmJiBqc29uLnNldHRpbmdzKXsNCiAgCQkJCXRoaXMuX2hhbmRsZVNlcnZlclNldHRpbmdzKGpzb24uc2V0dGluZ3MpOw0KICAJCQkJaWYgKHN1Y2Nlc3NDYWxsYmFjaykgc3VjY2Vzc0NhbGxiYWNrKGpzb24uc2V0dGluZ3MpOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlpZiAoc3VjY2Vzc0NhbGxiYWNrKSBzdWNjZXNzQ2FsbGJhY2soe30pOw0KICAJCQl9DQogIAkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKXsNCiAgCQkJaWYgKGVycm9yQ2FsbGJhY2spIGVycm9yQ2FsbGJhY2soZXJyKTsNCiAgCQl9KTsNCiAgCX0NCg0KICAJX2hhbmRsZVNlcnZlclNldHRpbmdzKHNldHRpbmdzKXsNCiAgCQl0aGlzLnNlcnZlclZlcnNpb24gPSBzZXR0aW5ncy52ZXJzaW9uOw0KICAJCXRoaXMuYXNyRW5naW5lID0gc2V0dGluZ3MuZW5naW5lIHx8ICIiOw0KICAJCXRoaXMuYXZhaWxhYmxlTGFuZ3VhZ2VzID0gc2V0dGluZ3MubGFuZ3VhZ2VzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlTW9kZWxzID0gc2V0dGluZ3MubW9kZWxzIHx8IFtdOw0KICAJCXRoaXMuYXZhaWxhYmxlRmVhdHVyZXMgPSBzZXR0aW5ncy5mZWF0dXJlcyB8fCBbXTsNCiAgCX0NCg0KICAJLy8tLS0gV2ViU29ja2V0IGludGVyZmFjZSAtLS0NCg0KICAJbmV3TWVzc2FnZUlkKCl7DQogIAkJdmFyIG1zZ0lkID0gKyt0aGlzLl9tc2dJZDsNCiAgCQlpZiAobXNnSWQgPiA5OTk5OTkpew0KICAJCQltc2dJZCA9IDE7DQogIAkJfQ0KICAJCXJldHVybiBtc2dJZDsNCiAgCX0NCg0KICAJb3BlbkNvbm5lY3Rpb24oKXsNCiAgCQlpZiAodGhpcy53ZWJzb2NrZXQgJiYgdGhpcy53ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PSB0aGlzLndlYnNvY2tldC5PUEVOKXsNCiAgCQkJdGhpcy5fb25FcnJvcih7bmFtZTogIlNvY2tldENvbm5lY3Rpb25FcnJvciIsIG1lc3NhZ2U6ICJDb25uZWN0aW9uIHdhcyBhbHJlYWR5IE9QRU4ifSk7DQogIAkJCXJldHVybiBmYWxzZTsNCiAgCQl9DQogIAkJdmFyIHNlbGYgPSB0aGlzOw0KICAJCXZhciB0aGlzQ29ubmVjaXRvbklkOw0KICAJDQogIAkJLy9DUkVBVEUNCiAgCQl0aGlzLndlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQodGhpcy5zb2NrZXRIb3N0KTsNCiAgCQkNCiAgCQkvL09OT1BFTg0KICAJCXRoaXMud2Vic29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCl7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE9QRU4iKTsNCiAgCQkJc2VsZi5jb25uZWN0aW9uSXNPcGVuID0gdHJ1ZTsNCiAgCQkJc2VsZi5fY29ubmVjdGlvbklkKys7DQogIAkJCXRoaXNDb25uZWNpdG9uSWQgPSBzZWxmLl9jb25uZWN0aW9uSWQ7DQogIAkJCXNlbGYuX29uT3BlbigpOw0KICAJCQkvL3NlbmQgd2VsY29tZQ0KICAJCQlpZiAoIXNlbGYuX3NraXBBdXRvV2VsY29tZSl7DQogIAkJCQlzZWxmLnNlbmRXZWxjb21lKCk7DQogIAkJCX0NCiAgCQl9Ow0KICAJCS8vT05DTE9TRQ0KICAJCXRoaXMud2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbihldil7DQogIAkJCXNlbGYubG9nKCJDb25uZWN0aW9uIENMT1NFRCIpOw0KICAJCQlzZWxmLmNvbm5lY3Rpb25Jc09wZW4gPSBmYWxzZTsNCiAgCQkJc2VsZi5pc1JlYWR5Rm9yU3RyZWFtID0gZmFsc2U7DQogIAkJCS8vdW5kZXJzdGFuZCBlcnJvcjogZXYuY29kZSBvciBldi5yZWFzb24gbWlnaHQgZ2l2ZSBtb3JlIGluc2lnaHRzDQogIAkJCXNlbGYuX29uQ2xvc2UoZXYpOw0KICAJCX07DQogIAkJLy9PTk1FU1NBR0UNCiAgCQl0aGlzLndlYnNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCl7DQogIAkJCWlmIChldmVudCAmJiBldmVudC5kYXRhICYmIHR5cGVvZiBldmVudC5kYXRhID09ICJzdHJpbmciKXsNCiAgCQkJCXNlbGYubG9nKCJDb25uZWN0aW9uIE1FU1NBR0U6ICIgKyBldmVudC5kYXRhKTsJCS8vREVCVUcNCiAgCQkJCXRyeSB7DQogIAkJCQkJc2VsZi5oYW5kbGVTb2NrZXRNZXNzYWdlKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkpOw0KICAJCQkJfWNhdGNoKGVycil7DQogIAkJCQkJY29uc29sZS5lcnJvcigiU2VwaWFTdHRTb2NrZXRDbGllbnQgLSBNZXNzYWdlUGFyc2VyRXJyb3IiLCBlcnIpOw0KICAJCQkJCXNlbGYuaGFuZGxlU29ja2V0RXJyb3Ioe25hbWU6ICJTb2NrZXRNZXNzYWdlUGFyc2VyRXJyb3IiLCBtZXNzYWdlOiAiTWVzc2FnZSBoYW5kbGVyIHNhdyBpbnZsYWlkIEpTT04/ISJ9KTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJLy9PTkVSUk9SDQogIAkJdGhpcy53ZWJzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKGVycm9yKXsNCiAgCQkJaWYgKCF0aGlzQ29ubmVjaXRvbklkKXsNCiAgCQkJCS8vbmV2ZXIgb3BlbmVkDQogIAkJCQlzZWxmLl9vbkVycm9yKHtuYW1lOiAiU29ja2V0Q29ubmVjdGlvbkVycm9yIiwgbWVzc2FnZTogIkZhaWxlZCB0byBjb25uZWN0In0pOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlzZWxmLmhhbmRsZVNvY2tldEVycm9yKGVycm9yKTsNCiAgCQkJfQ0KICAJCX07DQoNCiAgCQlyZXR1cm4gdHJ1ZTsNCiAgCX0NCg0KICAJY2xvc2VDb25uZWN0aW9uKCl7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LmNsb3NlKCk7DQogIAkJCXJldHVybiB0cnVlOw0KICAJCX1lbHNlIHsNCiAgCQkJLy9mYWlsIHNpbGVudGx5Pw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRNZXNzYWdlKG1zZ0pzb24pew0KICAJCWlmIChtc2dKc29uLnR5cGUgPT0gImVycm9yIil7DQogIAkJCXRoaXMuaGFuZGxlU29ja2V0RXJyb3IobXNnSnNvbik7DQogIAkJfWVsc2Ugew0KICAJCQkvL2NvbnNvbGUubG9nKCJoYW5kbGVTb2NrZXRNZXNzYWdlIiwgSlNPTi5zdHJpbmdpZnkobXNnSnNvbikpOwkvL0RFQlVHDQogIAkJCQ0KICAJCQlpZiAobXNnSnNvbi50eXBlID09ICJwaW5nIil7DQogIAkJCQkvL1RPRE86IHNlbmQgb25seSBhZnRlciB3ZWxjb21lDQogIAkJCQl0aGlzLnNlbmRKc29uKHt0eXBlOiAicG9uZyIsIG1zZ19pZDogbXNnSnNvbi5tc2dfaWR9KTsNCg0KICAJCQl9ZWxzZSBpZiAobXNnSnNvbi50eXBlID09ICJ3ZWxjb21lIil7DQogIAkJCQl0aGlzLmxvZygiQ29ubmVjdGlvbiBXRUxDT01FIik7DQogIAkJCQkvL3JlYWQgYWN0aXZlIHNlc3Npb24vZW5naW5lIG9wdGlvbnMNCiAgCQkJCXRoaXMuYWN0aXZlT3B0aW9ucyA9IG1zZ0pzb24uaW5mbz8gbXNnSnNvbi5pbmZvLm9wdGlvbnMgOiB7fTsNCiAgCQkJCXRoaXMuYWN0aXZlTGFuZ3VhZ2VDb2RlID0gdGhpcy5hY3RpdmVPcHRpb25zLmxhbmd1YWdlIHx8ICIiOw0KICAJCQkJdGhpcy5hY3RpdmVBc3JUYXNrID0gdGhpcy5hY3RpdmVPcHRpb25zLnRhc2sgfHwgIiI7DQogIAkJCQl0aGlzLmFjdGl2ZUFzck1vZGVsID0gdGhpcy5hY3RpdmVPcHRpb25zLm1vZGVsIHx8ICIiOw0KICAJCQkJdGhpcy5pc1JlYWR5Rm9yU3RyZWFtID0gdHJ1ZTsNCiAgCQkJCXRoaXMuX29uUmVhZHkodGhpcy5hY3RpdmVPcHRpb25zKTsNCiAgCQkJDQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3VsdCIpew0KICAJCQkJdGhpcy5fb25SZXN1bHQobXNnSnNvbik7DQogIAkJCQlpZiAobXNnSnNvbi5pc0ZpbmFsICYmICF0aGlzLmFjdGl2ZU9wdGlvbnMuY29udGludW91cyAmJiB0aGlzLmF1dG9DbG9zZU9uTGFzdEZpbmFsKXsNCiAgCQkJCQkvL2FmdGVyIGZpbmFsIHJlc3VsdCwgY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7DQogIAkJCQl9DQogIAkJCX1lbHNlIGlmIChtc2dKc29uLnR5cGUgPT0gInJlc3BvbnNlIik7DQogIAkJfQ0KICAJfQ0KDQogIAloYW5kbGVTb2NrZXRFcnJvcihlcnIpew0KICAJCXZhciBlcnJvciA9IHt9Ow0KICAJCWlmICghZXJyKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogInVua25vd24ifTsNCiAgCQllbHNlIGlmICh0eXBlb2YgZXJyID09ICJzdHJpbmciKSBlcnJvciA9IHtuYW1lOiAiU29ja2V0TWVzc2FnZUVycm9yIiwgbWVzc2FnZTogZXJyfTsNCiAgCQllbHNlIGVycm9yID0ge25hbWU6IChlcnIubmFtZSB8fCAiU29ja2V0TWVzc2FnZUVycm9yIiksIG1lc3NhZ2U6IChlcnIubWVzc2FnZSB8fCAidW5rbm93biIpLCBkZXRhaWxzOiBlcnJ9Ow0KICAJCS8vc2VuZA0KICAJCXRoaXMuX29uRXJyb3IoZXJyb3IpOw0KICAJCS8vRXJyb3JzIGFyZSBub3QgYWNjZXB0YWJsZSA6LXAgLSBjbG9zZSBpbiBhbnkgY2FzZQ0KICAJCXRoaXMuY2xvc2VDb25uZWN0aW9uKCk7CQkvL3RoaXMgaGFzIHByb2JhYmx5IG5vIGVmZmVjdCBhdCBhbGwNCiAgCX0NCg0KICAJc2VuZEpzb24oanNvbil7DQogIAkJaWYgKHRoaXMud2Vic29ja2V0ICYmIHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgPT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoanNvbikpOw0KICAJCQlyZXR1cm4gdHJ1ZTsNCiAgCQl9ZWxzZSB7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQkvL3Rocm93IGVycm9yPw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJfQ0KICAJc2VuZEJ5dGVzKGJ1ZmZlckNodW5rKXsNCiAgCQlpZiAoIXRoaXMud2Vic29ja2V0IHx8IHRoaXMud2Vic29ja2V0LnJlYWR5U3RhdGUgIT0gdGhpcy53ZWJzb2NrZXQuT1BFTil7DQogIAkJCXRoaXMuX29uRXJyb3Ioe25hbWU6ICJTb2NrZXRDb25uZWN0aW9uRXJyb3IiLCBtZXNzYWdlOiAiQ29ubmVjdGlvbiBpcyBjbG9zZWQuIENhbm5vdCBzZW5kIG1lc3NhZ2UuIn0pOw0KICAJCQlyZXR1cm4gZmFsc2U7DQogIAkJfQ0KICAJCXRoaXMud2Vic29ja2V0LnNlbmQoYnVmZmVyQ2h1bmspOwkvL3RoaXMgY2FuIGJlIGEgdHlwZWQgYXJyYXkgKHJlY29tbWVuZGVkKSwgdmlldyBvciBibG9iIChJIGd1ZXNzKQ0KICAJCXJldHVybiB0cnVlOw0KICAJfQ0KICAJc2VuZE1lc3NhZ2UodGV4dCl7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJjaGF0IiwNCiAgCQkJImRhdGEiOiB7InRleHQiOiB0ZXh0fSwNCiAgCQkJIm1zZ19pZCI6IHRoaXMubmV3TWVzc2FnZUlkKCkNCiAgCQl9KTsNCiAgCX0NCiAgCXNlbmRXZWxjb21lKG9wdGlvbnMpew0KICAJCXZhciBvcHRpb25zVG9TZW5kID0gb3B0aW9ucyB8fCB0aGlzLmFjdGl2ZU9wdGlvbnM7DQogIAkJcmV0dXJuIHRoaXMuc2VuZEpzb24oew0KICAJCQkidHlwZSI6ICJ3ZWxjb21lIiwNCiAgCQkJImRhdGEiOiBvcHRpb25zVG9TZW5kLA0KICAJCQkiY2xpZW50X2lkIjogdGhpcy5jbGllbnRJZCwNCiAgCQkJImFjY2Vzc190b2tlbiI6IHRoaXMuYWNjZXNzVG9rZW4sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIAlzZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgYnVmZmVyT3JUaW1lTGltaXQpew0KICAJCXJldHVybiB0aGlzLnNlbmRKc29uKHsNCiAgCQkJInR5cGUiOiAiYXVkaW9lbmQiLA0KICAJCQkiZGF0YSI6IHsNCiAgCQkJCSJieXRlTGVuZ3RoIjogYnl0ZUxlbmd0aCwNCiAgCQkJCSJidWZmZXJPclRpbWVMaW1pdCI6IGJ1ZmZlck9yVGltZUxpbWl0DQogIAkJCX0sDQogIAkJCSJtc2dfaWQiOiB0aGlzLm5ld01lc3NhZ2VJZCgpDQogIAkJfSk7DQogIAl9DQogIH0KCiAgb25tZXNzYWdlID0gZnVuY3Rpb24oZSkgew0KICAgICAgLy9BdWRpbyB3b3JrZXIgaW50ZXJmYWNlDQogIAlpZiAoZS5kYXRhLmN0cmwpew0KICAJCXN3aXRjaCAoZS5kYXRhLmN0cmwuYWN0aW9uKXsNCiAgCQkJLy9jb21tb24gaW50ZXJmYWNlDQogIAkJCWNhc2UgImNvbnN0cnVjdCI6DQogIAkJCQljb25zdHJ1Y3RXb3JrZXIoZS5kYXRhLmN0cmwub3B0aW9ucyk7DQogIAkJCQlicmVhazsNCiAgCQkJY2FzZSAicHJvY2VzcyI6DQogIAkJCQlwcm9jZXNzKGUuZGF0YS5jdHJsLmRhdGEpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgImhhbmRsZSI6DQogIAkJCQloYW5kbGVFdmVudChlLmRhdGEuY3RybC5kYXRhKTsJLy9lLmcuOiB0aGlzIHdvcmtlciBzZW5kcyBnYXRlIGV2ZW50cw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0YXJ0IjoNCiAgCQkJCXN0YXJ0KGUuZGF0YS5jdHJsLm9wdGlvbnMpOw0KICAJCQkJYnJlYWs7DQogIAkJCWNhc2UgInN0b3AiOg0KICAJCQkJc3RvcChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZXNldCI6DQogIAkJCQlyZXNldChlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQljYXNlICJyZWxlYXNlIjoNCiAgCQkJY2FzZSAiY2xvc2UiOg0KICAJCQkJcmVsZWFzZShlLmRhdGEuY3RybC5vcHRpb25zKTsNCiAgCQkJCWJyZWFrOw0KICAJCQlkZWZhdWx0Og0KICAJCQkJY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gVW5rbm93biBjb250cm9sIG1lc3NhZ2U6IiwgZS5kYXRhKTsNCiAgCQkJCWJyZWFrOw0KICAJCX0NCiAgCX0NCiAgCS8vY3VzdG9tIGludGVyZmFjZQ0KICAJaWYgKGUuZGF0YS5nYXRlICE9IHVuZGVmaW5lZCl7DQogIAkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gTWVzc2FnZSIsIGUuZGF0YSk7CQkJLy9ERUJVRw0KICAJCWdhdGVDb250cm9sKGUuZGF0YS5nYXRlICYmIGUuZGF0YS5nYXRlID09ICJvcGVuIiwgZS5kYXRhLmdhdGVPcHRpb25zKTsNCiAgCX0NCiAgfTsNCg0KICBsZXQgd29ya2VySWQgPSAic3R0LXNvY2tldC13b3JrZXItIiArIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApICsgIi0iICsgRGF0ZS5ub3coKTsNCiAgbGV0IGRvRGVidWcgPSBmYWxzZTsNCiAgbGV0IGVuYWJsZURyeVJ1biA9IGZhbHNlOwkJLy9za2lwIHNlcnZlciBhbmQgZ2VuZXJhdGUgcHNldWRvIHJlc3VsdCBldmVudHMgdG8gZGVidWcgVUkgZXZlbnQgZmxvdw0KICBsZXQgcmV0dXJuQXVkaW9GaWxlID0gZmFsc2U7DQogIGxldCB3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IGZhbHNlOw0KDQogIGxldCBzb2NrZXRVcmw7DQogIGxldCBjbGllbnRJZCA7DQogIGxldCBhY2Nlc3NUb2tlbjsNCiAgbGV0IHN0dFNlcnZlcjsNCg0KICBsZXQgbWVzc2FnZUZvcm1hdDsJCQkvL2UuZy46ICJ3ZWJTcGVlY2hBcGkiIG9yICJkZWZhdWx0Ig0KDQogIGxldCBpbnB1dFNhbXBsZVJhdGU7DQogIGxldCBpbnB1dFNhbXBsZVNpemU7DQogIGxldCBjaGFubmVsQ291bnQ7DQogIGxldCBpc0Zsb2F0MzJJbnB1dDsJCS8vZGVmYXVsdCBmYWxzZQ0KICBsZXQgZW5jb2RlckJpdERlcHRoID0gMTY7DQogIGxldCBfYnl0ZXNQZXJTYW1wbGUgPSBlbmNvZGVyQml0RGVwdGgvODsNCg0KICBsZXQgbG9va2JhY2tCdWZmZXJNczsNCiAgbGV0IGxvb2tiYWNrQnVmZmVySXNCbG9ja2VkOw0KICBsZXQgX2xvb2tiYWNrQnVmZmVyU2l6ZTsNCiAgbGV0IF9sb29rYmFja1JpbmdCdWZmZXI7DQogIGxldCByZWNvcmRlZEJ1ZmZlcnM7DQogIGxldCBfc2VudEJ1ZmZlcnM7DQogIGxldCBfc2hpZnRlZEJ1ZmZlcnM7DQogIGxldCByZWNvcmRCdWZmZXJNYXhOOw0KICBsZXQgY29udGludW91czsJCS8vTk9URTogdGhpcyBpcyBhbiBlbmdpbmUgb3B0aW9uIGJ1dCBpbmZsdWVuY2VzIGZ1bGwgYnVmZmVyIGFzIHdlbGwNCg0KICBsZXQgZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICBsZXQgX2dhdGVPcGVuVFMgPSAwOw0KICBsZXQgX2dhdGVDbG9zZVRTID0gMDsNCg0KICBsZXQgX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSB0cnVlOw0KDQogIGZ1bmN0aW9uIGluaXQoKXsNCiAgCXJlY29yZGVkQnVmZmVycyA9IG51bGw7DQogIAlfbG9va2JhY2tSaW5nQnVmZmVyID0gbnVsbDsNCiAgCWxvb2tiYWNrQnVmZmVySXNCbG9ja2VkID0gZmFsc2U7DQogIAlpZiAobG9va2JhY2tCdWZmZXJNcyl7DQogIAkJX2xvb2tiYWNrQnVmZmVyU2l6ZSA9IE1hdGgucm91bmQoKGxvb2tiYWNrQnVmZmVyTXMvMTAwMCkgKiBpbnB1dFNhbXBsZVJhdGUpOw0KICAJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCV9sb29rYmFja1JpbmdCdWZmZXIgPSBuZXcgUmluZ0J1ZmZlcihfbG9va2JhY2tCdWZmZXJTaXplLCBjaGFubmVsQ291bnQsICJGbG9hdDMyIik7CS8vVE9ETzogdGVzdCBmb3IgRmxvYXQzMg0KICAJCX1lbHNlIHsNCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlciA9IG5ldyBSaW5nQnVmZmVyKF9sb29rYmFja0J1ZmZlclNpemUsIGNoYW5uZWxDb3VudCwgIkludDE2Iik7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9sb29rYmFja0J1ZmZlclNpemUgPSAwOw0KICAJfQ0KICAJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAlfc2VudEJ1ZmZlcnMgPSAwOw0KICAJX3NoaWZ0ZWRCdWZmZXJzID0gMDsNCiAgCV9pc0ZpcnN0VmFsaWRQcm9jZXNzID0gdHJ1ZTsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIH0NCg0KICAvL1JlcXVlc3RzDQoNCiAgZnVuY3Rpb24gZ2F0ZUNvbnRyb2wob3BlbiwgZ2F0ZU9wdGlvbnMsIHRyaWdnZXJlZE9uRXJyb3Ipew0KICAJdmFyIG1zZyA9IHsNCiAgCQltb2R1bGVFdmVudDogdHJ1ZSwJCS8vdXNlICdtb2R1bGVFdmVudCcgdG8gZGlzdGluZ3Vpc2ggZnJvbSBub3JtYWwgcHJvY2Vzc2luZyByZXN1bHQNCiAgCQlnYXRlOiB7fQ0KICAJfTsNCiAgCWlmIChvcGVuKXsNCiAgCQkvL3dlIGFsd2F5cyByZXNldCB0aGUgYnVmZmVyDQogIAkJcmVjb3JkZWRCdWZmZXJzID0gW107DQogIAkJX3NlbnRCdWZmZXJzID0gMDsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgPSAwOw0KICAJCV9nYXRlT3BlblRTID0gRGF0ZS5ub3coKTsNCiAgCQlnYXRlSXNPcGVuID0gdHJ1ZTsNCiAgCQltc2cuZ2F0ZS5pc09wZW4gPSB0cnVlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJLy9vcGVuIGNvbm5lY3Rpb24NCiAgCQlpZiAoc3R0U2VydmVyKXsNCiAgCQkJc3R0U2VydmVyLm9wZW5Db25uZWN0aW9uKCk7DQogIAkJfQ0KICAJfWVsc2Ugew0KICAJCV9nYXRlQ2xvc2VUUyA9IERhdGUubm93KCk7DQogIAkJZ2F0ZUlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLmlzT3BlbiA9IGZhbHNlOw0KICAJCW1zZy5nYXRlLm9wZW5lZEF0ID0gX2dhdGVPcGVuVFM7DQogIAkJbXNnLmdhdGUuY2xvc2VkQXQgPSBfZ2F0ZUNsb3NlVFM7DQogIAkJLy8tLS0tLS0tLS0tIERSWS1SVU4gVEVTVDogZmFrZSBmaW5hbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJCWlmIChlbmFibGVEcnlSdW4gJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID4gcmVjb3JkQnVmZmVyTWF4Ti8zKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJLy9maW5hbCByZXN1bHQNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KHRydWUsICJFbmQgb2YgdGVzdCBtZXNzYWdlIik7DQogIAkJCQl9ZWxzZSB7DQogIAkJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiB0ZXN0IG1lc3NhZ2UiLCJpc0ZpbmFsIjp0cnVlfSk7DQogIAkJCQl9DQogIAkJCX0sIDIwMDApOw0KICAJCS8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAJCX1lbHNlIGlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4gJiYgc3R0U2VydmVyLmlzUmVhZHlGb3JTdHJlYW0pew0KICAJCQl2YXIgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCA9IGNoZWNrSWZCdWZmZXJMaW1pdFdhc1JlYWNoZWQoKTsNCiAgCQkJaWYgKGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJCQkJbXNnLmdhdGUuYnVmZmVyT3JUaW1lTGltaXQgPSB0cnVlOw0KICAJCQl9DQogIAkJCS8vY2xvc2UgaW5wdXQgYW5kIHJlcXVlc3QgZmluYWwgcmVzdWx0DQogIAkJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCQl9DQogIAkJLy9lbHNlIHdlIHJlbHkgb24gJ19nYXRlQ2xvc2VUUycgdG8gZmluaXNoIGFmdGVyIGxhc3QgYnVmZmVyIGlzIHNlbnQNCg0KICAJCS8vc2VuZCBXQVY/DQogIAkJaWYgKCF0cmlnZ2VyZWRPbkVycm9yICYmIHJldHVybkF1ZGlvRmlsZSAmJiByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKXsNCiAgCQkJc2V0VGltZW91dChmdW5jdGlvbigpew0KICAJCQkJc2VuZFdhdmVGaWxlQXJyYXlCdWZmZXIoZ2V0V2F2ZSgpKTsNCiAgCQkJfSwgMTAwKTsNCiAgCQl9DQogIAl9DQogIAlwb3N0TWVzc2FnZShtc2cpOw0KICB9DQoNCiAgZnVuY3Rpb24gZ2V0V2F2ZSgpew0KICAJdmFyIHZpZXc7DQogIAl2YXIgdG90YWxMZW5ndGggPSAwOw0KICAJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJdG90YWxMZW5ndGggKz0gdi5ieXRlTGVuZ3RoOw0KICAJfSk7DQogIAlpZiAodG90YWxMZW5ndGgpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHRvdGFsTGVuZ3RoKSk7DQogIAkJdmFyIG9mZnNldCA9IDA7DQogIAkJcmVjb3JkZWRCdWZmZXJzLmZvckVhY2goZnVuY3Rpb24odil7DQogIAkJCWZvciAobGV0IGkgPSAwOyBpIDwgdi5ieXRlTGVuZ3RoOyBpKyspew0KICAJCQkJdmlldy5zZXRVaW50OChvZmZzZXQsIHYuZ2V0VWludDgoaSkpOw0KICAJCQkJb2Zmc2V0Kys7DQogIAkJCX0NCiAgCQl9KTsNCiAgCX0NCiAgCXJldHVybiB2aWV3Ow0KICB9DQoNCiAgLy9JbnRlcmZhY2UNCg0KICBmdW5jdGlvbiBjb25zdHJ1Y3RXb3JrZXIob3B0aW9ucyl7DQogIAlpZiAod2FzQ29uc3RydWN0b3JDYWxsZWQpew0KICAJCWNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIENvbnN0cnVjdG9yIHdhcyBjYWxsZWQgdHdpY2UhIDJuZCBjYWxsIHdhcyBpZ25vcmVkIGJ1dCB0aGlzIHNob3VsZCBiZSBmaXhlZCEiLCAiLSIsIHdvcmtlcklkKTsJLy9ERUJVRw0KICAJCXJldHVybjsNCiAgCX1lbHNlIHsNCiAgCQl3YXNDb25zdHJ1Y3RvckNhbGxlZCA9IHRydWU7DQogIAl9DQogIAlkb0RlYnVnID0gb3B0aW9ucy5zZXR1cC5kb0RlYnVnIHx8IGZhbHNlOw0KICAJcmV0dXJuQXVkaW9GaWxlID0gb3B0aW9ucy5zZXR1cC5yZXR1cm5BdWRpb0ZpbGUgfHwgZmFsc2U7DQoNCiAgCS8vcmVjb3JkZXINCiAgCWlucHV0U2FtcGxlUmF0ZSA9IG9wdGlvbnMuc2V0dXAuaW5wdXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby50YXJnZXRTYW1wbGVSYXRlIHx8IG9wdGlvbnMuc2V0dXAuY3R4SW5mby5zYW1wbGVSYXRlOw0KICAJaW5wdXRTYW1wbGVTaXplID0gb3B0aW9ucy5zZXR1cC5pbnB1dFNhbXBsZVNpemUgfHwgNTEyOw0KICAJY2hhbm5lbENvdW50ID0gMTsJLy9vcHRpb25zLnNldHVwLmNoYW5uZWxDb3VudCB8fCAxOwkJLy9UT0RPOiBvbmx5IE1PTk8gYXRtDQogIAlsb29rYmFja0J1ZmZlck1zID0gKG9wdGlvbnMuc2V0dXAubG9va2JhY2tCdWZmZXJNcyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmxvb2tiYWNrQnVmZmVyTXMgOiAwOw0KICAJaXNGbG9hdDMySW5wdXQgPSAob3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgIT0gdW5kZWZpbmVkKT8gb3B0aW9ucy5zZXR1cC5pc0Zsb2F0MzIgOiBmYWxzZTsNCiAgCQ0KICAJaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRNcyAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAoaW5wdXRTYW1wbGVSYXRlICogb3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdE1zLzEwMDApIC8gaW5wdXRTYW1wbGVTaXplOw0KICAJfWVsc2UgaWYgKG9wdGlvbnMuc2V0dXAucmVjb3JkQnVmZmVyTGltaXRLYiAhPSB1bmRlZmluZWQpew0KICAJCXJlY29yZEJ1ZmZlck1heE4gPSAob3B0aW9ucy5zZXR1cC5yZWNvcmRCdWZmZXJMaW1pdEtiICogMTAyNCkgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAl9ZWxzZSB7DQogIAkJcmVjb3JkQnVmZmVyTWF4TiA9IDUyNDI4ODAgLyAoMiAqIGlucHV0U2FtcGxlU2l6ZSk7CS8vbWF4IDVNQiA9ICg1MjQyODgwW2J5dGVzXS8oYnl0ZXNQZXJTYW1wbGUgKiBzYW1wbGVTaXplKSkNCiAgCX0NCiAgCXJlY29yZEJ1ZmZlck1heE4gPSBNYXRoLmNlaWwocmVjb3JkQnVmZmVyTWF4Tik7DQogIAlpZiAocmVjb3JkQnVmZmVyTWF4TiA8IDApIHJlY29yZEJ1ZmZlck1heE4gPSAwOw0KDQogIAkvL2VuZCBvbiBmaXJzdCBmaW5hbCByZXN1bHQ/IC0gTk9URTogdGhpcyB3b3JrcyBhIGJpdCBkaWZmZXJlbnQgdGhhbiBXZWJTcGVlY2ggImNvbnRpbnVvdXMiDQogIAljb250aW51b3VzID0gKG9wdGlvbnMuc2V0dXAuY29udGludW91cyAhPSB1bmRlZmluZWQpPyBvcHRpb25zLnNldHVwLmNvbnRpbnVvdXMgOiBmYWxzZTsNCiAgCS8vaW50ZXJpbVJlc3VsdHMgKHVudXNlZD8pDQoNCiAgCS8vc2VydmVyDQogIAlzb2NrZXRVcmwgPSBvcHRpb25zLnNldHVwLnNvY2tldFVybCB8fCBvcHRpb25zLnNldHVwLnNlcnZlclVybCB8fCAiaHR0cDovL2xvY2FsaG9zdDoyMDc0MSI7DQogIAljbGllbnRJZCA9IG9wdGlvbnMuc2V0dXAuY2xpZW50SWQgfHwgImFueSI7DQogIAlhY2Nlc3NUb2tlbiA9IG9wdGlvbnMuc2V0dXAuYWNjZXNzVG9rZW4gfHwgInRlc3QxMjM0IjsNCiAgCW1lc3NhZ2VGb3JtYXQgPSBvcHRpb25zLnNldHVwLm1lc3NhZ2VGb3JtYXQgfHwgImRlZmF1bHQiOw0KICAJaWYgKHNvY2tldFVybCA9PSAiZGVidWciKXsNCiAgCQllbmFibGVEcnlSdW4gPSB0cnVlOw0KICAJCXJldHVybkF1ZGlvRmlsZSA9IHRydWU7DQogIAl9ZWxzZSB7DQogIAkJdmFyIGVuZ2luZU9wdGlvbnMgPSBvcHRpb25zLnNldHVwLmVuZ2luZU9wdGlvbnMgfHwge307CS8vYWxsIG9wdGlvbnMgKGNvbW1vbiBhbmQgZW5naW5lIHNwZWNpZmljKQ0KICAJCS8vY29tbW9uIG9wdGlvbiBzaG9ydGN1dHMgKG92ZXJ3cml0ZXMgZW5naW5lT3B0aW9ucyAtIHVzdWFsbHkgc3VwcG9ydGVkIGJ5IGFsbCBlbmdpbmVzKToNCiAgCQllbmdpbmVPcHRpb25zLnNhbXBsZXJhdGUgPSBpbnB1dFNhbXBsZVJhdGU7DQogIAkJZW5naW5lT3B0aW9ucy5jb250aW51b3VzID0gY29udGludW91czsNCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5sYW5ndWFnZSkgZW5naW5lT3B0aW9ucy5sYW5ndWFnZSA9IG9wdGlvbnMuc2V0dXAubGFuZ3VhZ2U7CS8vZS5nLjogImRlLURFIg0KICAJCWlmIChvcHRpb25zLnNldHVwLnRhc2spIGVuZ2luZU9wdGlvbnMudGFzayA9IG9wdGlvbnMuc2V0dXAudGFzazsJCQkJLy9lLmcuOiAiY29udmVyc2F0aW9uIg0KICAJCWlmIChvcHRpb25zLnNldHVwLm1vZGVsKSBlbmdpbmVPcHRpb25zLm1vZGVsID0gb3B0aW9ucy5zZXR1cC5tb2RlbDsJCQkJLy9lLmcuOiAidm9zay1tb2RlbC1zbWFsbC1kZSINCiAgCQlpZiAob3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0ICE9IHVuZGVmaW5lZCkgZW5naW5lT3B0aW9ucy5vcHRpbWl6ZUZpbmFsUmVzdWx0ID0gb3B0aW9ucy5zZXR1cC5vcHRpbWl6ZUZpbmFsUmVzdWx0Ow0KICAJCWVuZ2luZU9wdGlvbnMuZG9EZWJ1ZyA9IGRvRGVidWc7DQogIAkJLy9zcGVjaWFsIG9wdGlvbnMgKGUuZy4gZm9yIFZvc2spOg0KICAJCS8qDQogIAkJYWx0ZXJuYXRpdmVzOiAxLA0KICAJCXBocmFzZXM6IFtdLA0KICAJCXNwZWFrZXI6IGZhbHNlLA0KICAJCXdvcmRzOiBmYWxzZQ0KICAJCSovDQogIAkJLy9jb25zb2xlLmVycm9yKCJlbmdpbmVPcHRpb25zIiwgZW5naW5lT3B0aW9ucyk7CQkvL0RFQlVHDQogIAkJdmFyIHNlcnZlck9wdGlvbnMgPSB7DQogIAkJCW9uT3BlbjogZnVuY3Rpb24oKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gT1BFTiIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgib3BlbiIpOw0KICAJCQl9LA0KICAJCQlvblJlYWR5OiBmdW5jdGlvbihhY3RpdmVPcHRpb25zKXsNCiAgCQkJCWlmIChkb0RlYnVnKSBjb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBERUJVRyAtIENPTk5FQ1RJT04gUkVBRFkiLCBhY3RpdmVPcHRpb25zKTsNCiAgCQkJCXNlbmRDb25uZWN0aW9uRXZlbnQoInJlYWR5IiwgYWN0aXZlT3B0aW9ucyk7DQogIAkJCQkvL21ha2Ugc3VyZSBzdHJlYW0gc3RhcnRzIG9yIGNvbnRpbnVlcw0KICAJCQkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAkJCX0sDQogIAkJCW9uQ2xvc2U6IGZ1bmN0aW9uKCl7DQogIAkJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBDT05ORUNUSU9OIENMT1NFRCIpOw0KICAJCQkJc2VuZENvbm5lY3Rpb25FdmVudCgiY2xvc2VkIik7DQogIAkJCX0sDQogIAkJCW9uUmVzdWx0OiBmdW5jdGlvbihyZXMpew0KICAJCQkJaWYgKGRvRGVidWcpIGNvbnNvbGUuZXJyb3IoIlN0dFNvY2tldFdvcmtlciAtIERFQlVHIC0gQ09OTkVDVElPTiBSRVNVTFQiLCByZXMpOw0KICAJCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJCXNlbmRXZWJTcGVlY2hDb21wYXRpYmxlUmVjb2duaXRpb25SZXN1bHQocmVzLmlzRmluYWwsIHJlcy50cmFuc2NyaXB0KTsNCiAgCQkJCX1lbHNlIHsNCiAgCQkJCQlzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KHJlcyk7DQogIAkJCQl9DQogIAkJCQkvL2lmIHJlc3VsdCBpcyBmaW5hbCBhbmQgZ2F0ZSBpcyBjbG9zZWQgLT4gY2xvc2UgY29ubmVjdGlvbg0KICAJCQkJaWYgKHJlcy5pc0ZpbmFsICYmICFnYXRlSXNPcGVuICYmIHN0dFNlcnZlciAmJiBzdHRTZXJ2ZXIuY29ubmVjdGlvbklzT3Blbil7DQogIAkJCQkJc3R0U2VydmVyLmNsb3NlQ29ubmVjdGlvbigpOw0KICAJCQkJfQ0KICAJCQl9LA0KICAJCQlvbkVycm9yOiBmdW5jdGlvbihlcnIpeyANCiAgCQkJCWlmICghZXJyKSBlcnIgPSB7bmFtZTogIlVua25vd25FcnJvciIsIG1lc3NhZ2U6ICJVbmtub3duIGVycm9yIn07DQogIAkJCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBDT05ORUNUSU9OIEVSUk9SIiwgZXJyKTsNCiAgCQkJCWlmIChtZXNzYWdlRm9ybWF0ID09ICJ3ZWJTcGVlY2hBcGkiKXsNCiAgCQkJCQl2YXIgcmVhc29uID0gInVua25vd24iOw0KICAJCQkJCWlmIChlcnIubmFtZSA9PSAiU29ja2V0Q29ubmVjdGlvbkVycm9yIil7DQogIAkJCQkJCXJlYXNvbiA9ICJuZXR3b3JrIjsNCiAgCQkJCQl9ZWxzZSBpZiAoZXJyLm5hbWUgPT0gIlVuYXV0aG9yaXplZCIpew0KICAJCQkJCQkvL3JlYXNvbiA9ICJub3QtYWxsb3dlZCI7CS8vTk9URTogY3VycmVudGx5IG1pc3Rha2VuIGZvciBtaWNyb3Bob25lIHBlcm1pc3Npb24gZXJyb3INCiAgCQkJCQkJcmVhc29uID0gInNlcnZpY2Utbm90LWFsbG93ZWQiOw0KICAJCQkJCX0NCiAgCQkJCQlzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKHJlYXNvbiwgZXJyLm1lc3NhZ2UgfHwgZXJyLm5hbWUgfHwgIiIpOw0KICAJCQkJfWVsc2Ugew0KICAJCQkJCXNlbmREZWZhdWx0RXJyb3JFdmVudChlcnIpOw0KICAJCQkJfQ0KICAJCQkJLy9tYWtlIHN1cmUgc3RyZWFtIHN0b3BzDQogIAkJCQlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJCQkJZ2F0ZUNvbnRyb2woZmFsc2UsIHt9LCB0cnVlKTsNCiAgCQkJCX0NCiAgCQkJfQ0KICAJCX07DQogIAkJc3R0U2VydmVyID0gbmV3IFNlcGlhU3R0U29ja2V0Q2xpZW50KHNvY2tldFVybCwgY2xpZW50SWQsIGFjY2Vzc1Rva2VuLCBlbmdpbmVPcHRpb25zLCBzZXJ2ZXJPcHRpb25zKTsNCiAgCX0NCiAgCQ0KICAJaW5pdCgpOw0KICAgICAgCQ0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiAxLA0KICAJCW1vZHVsZUluZm86IHsNCiAgCQkJbW9kdWxlSWQ6IHdvcmtlcklkLA0KICAJCQlpbnB1dFNhbXBsZVJhdGU6IGlucHV0U2FtcGxlUmF0ZSwNCiAgCQkJaW5wdXRTYW1wbGVTaXplOiBpbnB1dFNhbXBsZVNpemUsDQogIAkJCWlucHV0SXNGbG9hdDMyOiBpc0Zsb2F0MzJJbnB1dCwNCiAgCQkJY2hhbm5lbENvdW50OiBjaGFubmVsQ291bnQsDQogIAkJCWxvb2tiYWNrQnVmZmVyU2l6ZUtiOiBNYXRoLmNlaWwoKF9sb29rYmFja0J1ZmZlclNpemUgKiAyKS8xMDI0KSwJLy8xIHNhbXBsZSA9IDIgYnl0ZXMNCiAgCQkJbG9va2JhY2tMaW1pdE1zOiBsb29rYmFja0J1ZmZlck1zLA0KICAJCQlyZWNvcmRMaW1pdE1zOiBNYXRoLmNlaWwoKHJlY29yZEJ1ZmZlck1heE4gKiBpbnB1dFNhbXBsZVNpemUgKiAxMDAwKS9pbnB1dFNhbXBsZVJhdGUpLA0KICAJCQlzdHRTZXJ2ZXJVcmw6IHNvY2tldFVybCwNCiAgCQkJc3R0U2VydmVyT3B0aW9uczogKHN0dFNlcnZlcj8gc3R0U2VydmVyLmFjdGl2ZU9wdGlvbnMgOiB7fSkNCiAgCQl9DQogIAl9KTsNCiAgfQ0KDQogIGZ1bmN0aW9uIHByb2Nlc3MoZGF0YSl7DQogIAkvL2V4cGVjdGVkOiBkYXRhLnNhbXBsZXMsIGRhdGEuc2FtcGxlUmF0ZSwgZGF0YS50YXJnZXRTYW1wbGVSYXRlLCBkYXRhLmNoYW5uZWxzLCBkYXRhLnR5cGUNCiAgCS8vVE9ETzogY2hlY2sgcHJvY2VzcyB2YWx1ZXMgYWdhaW5zdCBjb25zdHJ1Y3RvciB2YWx1ZXMgKHNhbXBsZVNpemUgZXRjLikNCiAgCWlmIChkYXRhICYmIGRhdGEuc2FtcGxlcyl7DQogIAkJaWYgKF9pc0ZpcnN0VmFsaWRQcm9jZXNzKXsNCiAgCQkJLy9jb25zb2xlLmVycm9yKCJkYXRhIGluZm8iLCBkYXRhKTsJCS8vREVCVUcNCiAgCQkJX2lzRmlyc3RWYWxpZFByb2Nlc3MgPSBmYWxzZTsNCiAgCQkJLy9jaGVjazogaW5wdXRTYW1wbGVSYXRlLCBpbnB1dFNhbXBsZVNpemUsIGNoYW5uZWxDb3VudCwgZmxvYXQzMg0KICAJCQlpZiAoZGF0YS5zYW1wbGVSYXRlICE9IGlucHV0U2FtcGxlUmF0ZSl7DQogIAkJCQl2YXIgbXNnID0gIlNhbXBsZS1yYXRlIG1pc21hdGNoISBTaG91bGQgYmUgJyIgKyBpbnB1dFNhbXBsZVJhdGUgKyAiJyBpcyAnIiArIGRhdGEuc2FtcGxlUmF0ZSArICInIjsNCiAgCQkJCWNvbnNvbGUuZXJyb3IoIkF1ZGlvIFdvcmtlciBzYW1wbGUtcmF0ZSBleGNlcHRpb24gLSBNc2cuOiAiICsgbXNnKTsNCiAgCQkJCXRocm93IEpTT04uc3RyaW5naWZ5KG5ldyBTYW1wbGVSYXRlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJCXZhciBpbnB1dEFycmF5VHlwZSA9IGRhdGEudHlwZSB8fCBkYXRhLnNhbXBsZXNbMF0uY29uc3RydWN0b3IubmFtZTsNCiAgCQkJdmFyIGlzRmxvYXQzMiA9IChpbnB1dEFycmF5VHlwZS5pbmRleE9mKCJGbG9hdDMyIikgPj0gMCk7DQogIAkJCWlmIChpc0Zsb2F0MzIgIT0gaXNGbG9hdDMySW5wdXQpew0KICAJCQkJdmFyIG1zZyA9ICJBcnJheSB0eXBlIG1pc21hdGNoISBJbnB1dCBzYW1wbGVzIGFyZSBvZiB0eXBlICciICsgaW5wdXRBcnJheVR5cGUgKyAiJyBidXQgZXhwZWN0ZWQ6ICIgKyAoaXNGbG9hdDMySW5wdXQ/ICJGbG9hdDMyIiA6ICJJbnQxNiIpOw0KICAJCQkJY29uc29sZS5lcnJvcigiQXVkaW8gV29ya2VyIHR5cGUgZXhjZXB0aW9uIC0gTXNnLjogIiArIG1zZyk7DQogIAkJCQl0aHJvdyBKU09OLnN0cmluZ2lmeShuZXcgQXJyYXlUeXBlRXhjZXB0aW9uKG1zZykpOwkJCS8vTk9URTogdGhpcyBuZWVkcyB0byBiZSBhIHN0cmluZyB0byBzaG93IHVwIGluIHdvcmtlci5vbmVycm9yIHByb3Blcmx5IDotLw0KICAJCQl9DQogIAkJfQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJYnVpbGRQY21DaHVua3MoZGF0YSk7DQogIAkJCQ0KICAJCX1lbHNlIGlmIChsb29rYmFja0J1ZmZlck1zICYmICFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCl7DQogIAkJCS8vZG8gdGhpcyBvbmx5IHVudGlsIGdhdGUgd2FzIG9wZW5lZCAuLiB0aGVuIHdhaXQgZm9yIGJ1ZmZlciBleHBvcnQvY2xlYXINCiAgCQkJX2xvb2tiYWNrUmluZ0J1ZmZlci5wdXNoKGRhdGEuc2FtcGxlcyk7DQogIAkJfQ0KICAJfQ0KICB9DQoNCiAgZnVuY3Rpb24gYnVpbGRQY21DaHVua3MoZGF0YSl7DQogIAkvL2luZGV4IDANCiAgCWlmIChyZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoID09IDApew0KICAJCS8vMCAtLSBidWlsZCBoZWFkZXINCiAgCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChnZXRIZWFkZXJGb3JXQVYodW5kZWZpbmVkLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCkpOw0KICAJCS8vMSAtLSBhZGQgbG9va2JhY2sgc2FtcGxlcyAtLSBUT0RPOiB0ZXN0IQ0KICAJCWlmIChfbG9va2JhY2tSaW5nQnVmZmVyICYmIF9sb29rYmFja1JpbmdCdWZmZXIuZnJhbWVzQXZhaWxhYmxlKXsNCiAgCQkJLy9wdWxsIGFsbCBsb29rYmFjayBzYW1wbGVzDQogIAkJCXZhciBsb29rYmFja1NhbXBsZXM7DQogIAkJCWlmIChpc0Zsb2F0MzJJbnB1dCl7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEZsb2F0MzJBcnJheShfbG9va2JhY2tSaW5nQnVmZmVyLmZyYW1lc0F2YWlsYWJsZSldOw0KICAJCQl9ZWxzZSB7DQogIAkJCQlsb29rYmFja1NhbXBsZXMgPSBbbmV3IEludDE2QXJyYXkoX2xvb2tiYWNrUmluZ0J1ZmZlci5mcmFtZXNBdmFpbGFibGUpXTsNCiAgCQkJfQ0KICAJCQlfbG9va2JhY2tSaW5nQnVmZmVyLnB1bGwobG9va2JhY2tTYW1wbGVzKTsNCiAgCQkJLy9lbmNvZGUgYW5kIGFkZA0KICAJCQlyZWNvcmRlZEJ1ZmZlcnMucHVzaChlbmNvZGVXQVYodW5kZWZpbmVkLCBsb29rYmFja1NhbXBsZXNbMF0sIGlucHV0U2FtcGxlUmF0ZSwgY2hhbm5lbENvdW50LCBpc0Zsb2F0MzJJbnB1dCkpOw0KICAJCX0NCiAgCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBIZWFkZXIgYW5kIExvb2tiYWNrIEJ1ZmZlciAob3B0aW9uYWwpIiwgcmVjb3JkZWRCdWZmZXJzKTsNCiAgCX0NCiAgCWlmIChkYXRhKXsNCiAgCQkvL1RPRE86IHRoaXMgd2lsbCBhbHdheXMgYmUgb25lIGNoYW5uZWwgT05MWSBzaW5jZSB0aGUgc2lnbmFsIGlzIGludGVybGVhdmVkDQogIAkJcmVjb3JkZWRCdWZmZXJzLnB1c2goZW5jb2RlV0FWKHVuZGVmaW5lZCwgZGF0YS5zYW1wbGVzWzBdLCBpbnB1dFNhbXBsZVJhdGUsIGNoYW5uZWxDb3VudCwgaXNGbG9hdDMySW5wdXQpKTsNCiAgCX0NCiAgCS8vLS0tLS0tLS0tLSBEUlktUlVOIFRFU1Q6IGZha2UgcGFydGlhbCByZXN1bHQgLS0tLS0tLS0tLQ0KICAJaWYgKGVuYWJsZURyeVJ1bil7DQogIAkJaWYgKHJlY29yZGVkQnVmZmVycy5sZW5ndGggPT0gTWF0aC5jZWlsKHJlY29yZEJ1ZmZlck1heE4vNCkpew0KICAJCQlpZiAoZG9EZWJ1ZykgY29uc29sZS5lcnJvcigiU3R0U29ja2V0V29ya2VyIC0gREVCVUcgLSBSZWFjaGVkIGEgcXVhcnRlciBvZiBtYXguIHRpbWUiLCByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoKTsNCiAgCQkJaWYgKG1lc3NhZ2VGb3JtYXQgPT0gIndlYlNwZWVjaEFwaSIpew0KICAJCQkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVSZWNvZ25pdGlvblJlc3VsdChmYWxzZSwgIkVuZCBvZiAuLi4iKTsNCiAgCQkJfWVsc2Ugew0KICAJCQkJc2VuZERlZmF1bHRSZWNvZ25pdGlvblJlc3VsdCh7InR5cGUiOiJyZXN1bHQiLCJtc2dfaWQiOkRhdGUubm93KCksImNvZGUiOjIwMCwidHJhbnNjcmlwdCI6IkVuZCBvZiAuLi4iLCJpc0ZpbmFsIjpmYWxzZX0pOw0KICAJCQl9DQogIAkJfQ0KICAJLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIAl9ZWxzZSBpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuICYmIHN0dFNlcnZlci5pc1JlYWR5Rm9yU3RyZWFtKXsNCiAgCQkvL3NlbmQgYnVmZmVyDQogIAkJc3RhcnRPckNvbnRpbnVlU3RyZWFtKCk7DQogIAl9DQogIAkvL21heCBsZW5ndGgNCiAgCWlmIChyZWNvcmRCdWZmZXJNYXhOICYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggPj0gcmVjb3JkQnVmZmVyTWF4Til7DQogIAkJbWF4TGVuZ3RoUmVhY2hlZCgpOw0KICAJfQ0KICAJaWYgKCFsb29rYmFja0J1ZmZlcklzQmxvY2tlZCkgbG9va2JhY2tCdWZmZXJJc0Jsb2NrZWQgPSB0cnVlOw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnRPckNvbnRpbnVlU3RyZWFtKCl7DQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgbm90aGluZyBoYXMgYmVlbiBzZW50IHlldA0KICAJaWYgKCFfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJLy9zZW5kIGFsbCBhdCBvbmNlDQogIAkJdmFyIGRhdGEgPSBuZXcgQmxvYihyZWNvcmRlZEJ1ZmZlcnMpOw0KICAJCV9zZW50QnVmZmVycyA9IHJlY29yZGVkQnVmZmVycy5sZW5ndGg7DQogIAkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJDQogIAkvL2J1ZmZlciBoYXMgZGF0YSBhbmQgc29tZSBoYXMgYmVlbiBzZW50IGFscmVhZHkNCiAgCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCl7DQogIAkJdmFyIG5vcm1hbGl6ZWRMZW5ndGggPSByZWNvcmRlZEJ1ZmZlcnMubGVuZ3RoICsgX3NoaWZ0ZWRCdWZmZXJzOyAvL3Rha2Ugc2hpZnRlZCBkYXRhIGludG8gYWNjb3VudA0KICAJCWlmIChfc2VudEJ1ZmZlcnMgPT0gKG5vcm1hbGl6ZWRMZW5ndGggLSAxKSl7DQogIAkJCS8vc2VuZCBsYXN0DQogIAkJCXZhciBkYXRhID0gcmVjb3JkZWRCdWZmZXJzW3JlY29yZGVkQnVmZmVycy5sZW5ndGggLSAxXTsNCiAgCQkJX3NlbnRCdWZmZXJzKys7DQogIAkJCXNlbmRCeXRlcyhkYXRhKTsNCg0KICAJCX1lbHNlIGlmIChfc2VudEJ1ZmZlcnMgPCBub3JtYWxpemVkTGVuZ3RoKXsNCiAgCQkJLy9zZW5kIHJlc3QgYXQgb25jZQ0KICAJCQl2YXIgcmVzdE4gPSBub3JtYWxpemVkTGVuZ3RoIC0gX3NlbnRCdWZmZXJzOw0KICAJCQl2YXIgZGF0YSA9IG5ldyBCbG9iKHJlY29yZGVkQnVmZmVycy5zbGljZSgtMSAqIHJlc3ROKSk7DQogIAkJCV9zZW50QnVmZmVycyArPSByZXN0TjsNCiAgCQkJc2VuZEJ5dGVzKGRhdGEpOw0KICAJCQ0KICAJCX1lbHNlOw0KICAJLy9ubyBkYXRhIHlldA0KICAJfWVsc2U7DQogIAkvL25vIGJ5dGVzIGxlZnQgYW5kIHN0cmVhbSBlbmRlZD8NCiAgCWlmIChfZ2F0ZUNsb3NlVFMpew0KICAJCXZhciBjbG9zZWREdWVUb0J1ZmZlckxpbWl0ID0gY2hlY2tJZkJ1ZmZlckxpbWl0V2FzUmVhY2hlZCgpOw0KICAJCXJlcXVlc3RGaW5hbFJlc3VsdChjbG9zZWREdWVUb0J1ZmZlckxpbWl0KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kQnl0ZXMoZGF0YSl7DQogIAlzdHRTZXJ2ZXIuc2VuZEJ5dGVzKGRhdGEpOw0KICB9DQoNCiAgZnVuY3Rpb24gcmVxdWVzdEZpbmFsUmVzdWx0KGNsb3NlZER1ZVRvQnVmZmVyTGltaXQpew0KICAJLy9jbG9zZSBpbnB1dCBhbmQgcmVxdWVzdCBmaW5hbCByZXN1bHQNCiAgCXZhciBieXRlTGVuZ3RoID0gMDsNCiAgCXJlY29yZGVkQnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRhKXsNCiAgCQlieXRlTGVuZ3RoICs9IHRhLmJ5dGVMZW5ndGg7DQogIAl9KTsNCiAgCXN0dFNlcnZlci5zZW5kQXVkaW9FbmQoYnl0ZUxlbmd0aCwgY2xvc2VkRHVlVG9CdWZmZXJMaW1pdCk7DQogIH0NCg0KICBmdW5jdGlvbiBjaGVja0lmQnVmZmVyTGltaXRXYXNSZWFjaGVkKCl7DQogIAl2YXIgcmVhY2hlZEJ1ZmZlckxpbWl0ID0gKCFjb250aW51b3VzICYmIHJlY29yZGVkQnVmZmVycyAmJiByZWNvcmRCdWZmZXJNYXhOIA0KICAJCSYmIHJlY29yZGVkQnVmZmVycy5sZW5ndGggJiYgcmVjb3JkZWRCdWZmZXJzLmxlbmd0aCA+PSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCXJldHVybiByZWFjaGVkQnVmZmVyTGltaXQ7DQogIH0NCg0KICAvL3JlYWNoZWQgbWF4IHJlY29yZGluZyBsZW5ndGgNCiAgZnVuY3Rpb24gbWF4TGVuZ3RoUmVhY2hlZCgpew0KICAJaWYgKGNvbnRpbnVvdXMpew0KICAJCS8vZHJvcCBvbGQgYnVmZmVyDQogIAkJdmFyIHNoaWZ0ID0gKHJlY29yZGVkQnVmZmVycy5sZW5ndGggLSByZWNvcmRCdWZmZXJNYXhOKTsNCiAgCQlfc2hpZnRlZEJ1ZmZlcnMgKz0gc2hpZnQ7DQogIAkJcmVjb3JkZWRCdWZmZXJzLnNwbGljZSgwLCBzaGlmdCk7DQogIAl9ZWxzZSB7DQogIAkJLy9jbG9zZQ0KICAJCWlmIChnYXRlSXNPcGVuKXsNCiAgCQkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJCX0NCiAgCX0NCiAgCS8vVE9ETzogZG8gbW9yZSAuLi4gPw0KICB9DQoNCiAgLy9zZW5kIHJlc3VsdCBtZXNzYWdlIChwYXJ0aWFsIG9yIGZpbmFsKQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZVJlY29nbml0aW9uUmVzdWx0KGlzRmluYWwsIHRyYW5zY3JpcHQpew0KICAJaWYgKGlzRmluYWwgJiYgIXRyYW5zY3JpcHQpew0KICAJCS8vdGhpcyBpcyBhY3R1YWxseSBhICdub21hdGNoJy8nbm8tc3BlZWNoJyBlcnJvciAobm8tc3BlZWNoIHVzdWFsbHkgZmFpbHMgbW9yZSBnZW50bHkpDQogIAkJc2VuZFdlYlNwZWVjaENvbXBhdGlibGVFcnJvcigibm8tc3BlZWNoIiwgIkZpbmFsIHJlc3VsdCB3YXMgZW1wdHkiKTsNCiAgCX1lbHNlIHsNCiAgCQlwb3N0TWVzc2FnZSh7DQogIAkJCXJlY29nbml0aW9uRXZlbnQ6IHsNCiAgCQkJCXR5cGU6ICJyZXN1bHQiLA0KICAJCQkJcmVzdWx0SW5kZXg6IDAsDQogIAkJCQlyZXN1bHRzOiBbew0KICAJCQkJCWlzRmluYWw6IGlzRmluYWwsDQogIAkJCQkJIjAiOiB7DQogIAkJCQkJCXRyYW5zY3JpcHQ6IHRyYW5zY3JpcHQNCiAgCQkJCQl9DQogIAkJCQl9XSwNCiAgCQkJCXRpbWVTdGFtcDogRGF0ZS5ub3coKQ0KICAJCQl9LA0KICAJCQlldmVudEZvcm1hdDogIndlYlNwZWVjaEFwaSINCiAgCQl9KTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiBzZW5kRGVmYXVsdFJlY29nbml0aW9uUmVzdWx0KGV2ZW50KXsNCiAgCWlmIChldmVudCAmJiAhZXZlbnQudHlwZSkgZXZlbnQudHlwZSA9ICJyZXN1bHQiOw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCXJlY29nbml0aW9uRXZlbnQ6IGV2ZW50LA0KICAJCWV2ZW50Rm9ybWF0OiAiZGVmYXVsdCINCiAgCX0pOw0KICB9DQogIGZ1bmN0aW9uIHNlbmRDb25uZWN0aW9uRXZlbnQodHlwZSwgZGF0YSl7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJY29ubmVjdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IHR5cGUsDQogIAkJCWRhdGE6IGRhdGENCiAgCQl9DQogIAl9KTsNCiAgfQ0KICAvL3NlbmQgZXJyb3IgbWVzc2FnZQ0KICBmdW5jdGlvbiBzZW5kV2ViU3BlZWNoQ29tcGF0aWJsZUVycm9yKGVycm9yTmFtZSwgZXJyb3JNZXNzYWdlKXsNCiAgCXZhciBldmVudE5hbWUgPSAiZXJyb3IiOwkvL3Bvc3NpYmxlIGFzIHdlbGw6ICJub21hdGNoIg0KICAJLypzdXBwb3J0ZWQgZXJyb3JzOg0KICAJCSJuZXR3b3JrIiAoMSwgMjogdGltZW91dCwgODogYnVzeSwgMTA6IHJhdGUtbGltaXQpDQogIAkJImF1ZGlvLWNhcHR1cmUiICgzLCBoYXBwZW5zIGJlZm9yZSB3b3JrZXIpDQogIAkJInVua25vd24iICg0LCA1KQ0KICAJCSJuby1zcGVlY2giICg2KQ0KICAJCSJub21hdGNoIiAoNywgdXNlIGV2ZW50TmFtZSkNCiAgCQkiYWJvcnRlZCIgKD8pDQogIAkJIm5vdC1hbGxvd2VkIiAoOSkgLyAic2VydmljZS1ub3QtYWxsb3dlZCINCiAgCQkiYmFkLWdyYW1tYXIiICg/KQ0KICAJCSJsYW5ndWFnZS1ub3Qtc3VwcG9ydGVkIiAoMTIsIDEzKQ0KICAJKi8NCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQlyZWNvZ25pdGlvbkV2ZW50OiB7DQogIAkJCXR5cGU6IGV2ZW50TmFtZSwNCiAgCQkJZXJyb3I6IGVycm9yTmFtZSwNCiAgCQkJbWVzc2FnZTogZXJyb3JNZXNzYWdlLA0KICAJCQl0aW1lU3RhbXA6IERhdGUubm93KCkNCiAgCQl9LA0KICAJCWV2ZW50Rm9ybWF0OiAid2ViU3BlZWNoQXBpIg0KICAJfSk7DQogIH0NCiAgZnVuY3Rpb24gc2VuZERlZmF1bHRFcnJvckV2ZW50KGVycm9yKXsNCiAgCWlmIChlcnJvciAmJiAhZXJyb3IudHlwZSkgZXJyb3IudHlwZSA9ICJlcnJvciI7DQogIAlwb3N0TWVzc2FnZSh7DQogIAkJcmVjb2duaXRpb25FdmVudDogZXJyb3IsDQogIAkJZXZlbnRGb3JtYXQ6ICJkZWZhdWx0Ig0KICAJfSk7DQogIH0NCg0KICAvL3NlbmQgd2F2ZSBmaWxlIGFzIGFycmF5IGJ1ZmZlciAoZGF0YSB2aWV3KQ0KICBmdW5jdGlvbiBzZW5kV2F2ZUZpbGVBcnJheUJ1ZmZlcih2aWV3KXsNCiAgCXBvc3RNZXNzYWdlKHsNCiAgCQltb2R1bGVSZXNwb25zZTogdHJ1ZSwJLy9za2lwIG1lc3NhZ2UgZm9yd2FyZGluZz8NCiAgCQlvdXRwdXQ6IHsNCiAgCQkJd2F2OiB2aWV3LA0KICAJCQlzYW1wbGVSYXRlOiBpbnB1dFNhbXBsZVJhdGUsDQogIAkJCXRvdGFsU2FtcGxlczogKCh2aWV3LmJ5dGVMZW5ndGggLSA0NCkvX2J5dGVzUGVyU2FtcGxlKSwNCiAgCQkJY2hhbm5lbHM6IGNoYW5uZWxDb3VudA0KICAJCX0NCiAgCX0pOw0KICB9DQoNCiAgZnVuY3Rpb24gaGFuZGxlRXZlbnQoZGF0YSl7DQogIAkvL1RPRE86IGFueXRoaW5nIHRvIGRvPw0KICB9DQoNCiAgZnVuY3Rpb24gc3RhcnQob3B0aW9ucyl7DQogICAgICAvL3dlIGRvIG5vdGhpbmcgYnV0IHdhaXQgZm9yIGRhdGEgb3IgZ2F0ZS1vcGVuIHNpZ25hbA0KICAJLy9OT1RFOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gc3RvcChvcHRpb25zKXsNCiAgCS8vbWFrZSBzdXJlIHRoYXQgZ2F0ZSBpcyBjbG9zZWQgLi4uIFRPRE86IGFueXRoaW5nIGVsc2U/DQogIAlpZiAoZ2F0ZUlzT3Blbil7DQogIAkJZ2F0ZUNvbnRyb2woZmFsc2UpOw0KICAJfQ0KICAJLy9OT1RFIDE6IEluIHRoaXMgY2FzZSBhIHN0b3BwZWQgd29ya2VyIGNhbiBzdGlsbCBzZW5kIHBhcnRpYWwgb3IgZmluYWwgcmVzdWx0cy4NCiAgCS8vTk9URSAyOiB0aW1pbmcgb2YgdGhpcyBzaWduYWwgaXMgbm90IHZlcnkgd2VsbCBkZWZpbmVkDQogIH0NCiAgZnVuY3Rpb24gcmVzZXQob3B0aW9ucyl7DQogIAkvL2NsZWFuIHVwIGNvbm5lY3Rpb24NCiAgCWlmIChzdHRTZXJ2ZXIgJiYgc3R0U2VydmVyLmNvbm5lY3Rpb25Jc09wZW4pew0KICAJCXN0dFNlcnZlci5jbG9zZUNvbm5lY3Rpb24oKTsNCiAgCQkvL05PVEU6IHdlIHRyeSB0byByZXVzZSB0aGlzIGluc3RhbmNlDQogIAl9DQogICAgICAvL2NsZWFuIHVwIHdvcmtlcg0KICAJaW5pdCgpOw0KICAJLy9UT0RPOiBhbnl0aGluZyBlbHNlPw0KICB9DQogIGZ1bmN0aW9uIHJlbGVhc2Uob3B0aW9ucyl7DQogIAkvL3RoaXMgaXMgZXhwZWN0ZWQgdG8gaGFwcGVuIGFmdGVyIGZpbmFsIHJlc3VsdCAob3IgYWJvcnQpIHNvOiBjbGVhbiB1cCBjb25uZWN0aW9uDQogIAlpZiAoc3R0U2VydmVyICYmIHN0dFNlcnZlci5jb25uZWN0aW9uSXNPcGVuKXsNCiAgCQlzdHRTZXJ2ZXIuY2xvc2VDb25uZWN0aW9uKCk7DQogIAl9DQogIAkvL2NsZWFuIHVwIHdvcmtlciBhbmQgY2xvc2UNCiAgCV9sb29rYmFja1JpbmdCdWZmZXIgPSBudWxsOw0KICAJcmVjb3JkZWRCdWZmZXJzID0gbnVsbDsNCiAgCV9zZW50QnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCV9zaGlmdGVkQnVmZmVycyA9IHVuZGVmaW5lZDsNCiAgCWdhdGVJc09wZW4gPSBmYWxzZTsNCiAgCV9nYXRlT3BlblRTID0gMDsNCiAgCV9nYXRlQ2xvc2VUUyA9IDA7DQogIAkvL25vdGlmeSBwcm9jZXNzb3IgdGhhdCB3ZSBjYW4gdGVybWluYXRlIG5vdw0KICAJcG9zdE1lc3NhZ2Uoew0KICAJCW1vZHVsZVN0YXRlOiA5DQogIAl9KTsNCiAgfQ0KDQogIC8vLS0tIGhlbHBlcnMgLS0tDQoNCiAgZnVuY3Rpb24gU2FtcGxlUmF0ZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIlNhbXBsZVJhdGVFeGNlcHRpb24iOw0KICB9DQogIGZ1bmN0aW9uIEFycmF5VHlwZUV4Y2VwdGlvbihtZXNzYWdlKSB7DQogIAl0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KICAJdGhpcy5uYW1lID0gIkFycmF5VHlwZUV4Y2VwdGlvbiI7DQogIH0NCg0KICAvL0dldCBoZWFkZXIgZm9yIHNhbXBsZXMgb3IgbWF4IHNpemUgLSBGb3JtYXQgZGVzY3JpcHRpb246IGh0dHA6Ly9zb3VuZGZpbGUuc2FwcC5vcmcvZG9jL1dhdmVGb3JtYXQvDQogIGZ1bmN0aW9uIGdldEhlYWRlckZvcldBVihzYW1wbGVzLCBzYW1wbGVSYXRlLCBudW1DaGFubmVscyl7DQogIAl2YXIgYml0RGVwdGggPSBlbmNvZGVyQml0RGVwdGg7DQogIAl2YXIgYnl0ZXNQZXJTYW1wbGUgPSBfYnl0ZXNQZXJTYW1wbGU7DQogIAl2YXIgdmlldyA9IHNhbXBsZXM/IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoNDQgKyBzYW1wbGVzLmxlbmd0aCAqIGJ5dGVzUGVyU2FtcGxlKSkgOiBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDQ0KSk7DQogIAkvL05PVEU6IHRoaXMgc2hvdWxkIGJlICJyZWFsIiBzaXplIGJ1dCBpZiB3ZSBkb24ndCBrbm93IHlldCB0YWtlIG1heCBzaXplIC0gbWF4IHNpemUgaW5jbHVkZXMgbG9va2JhY2sNCiAgCXZhciBzYW1wbGVTaXplID0gc2FtcGxlcz8gc2FtcGxlcy5sZW5ndGggOiAocmVjb3JkQnVmZmVyTWF4TiAqIGlucHV0U2FtcGxlU2l6ZSk7DQogIAkvL1JJRkYgaWRlbnRpZmllcg0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMCwgJ1JJRkYnKTsNCiAgCXZpZXcuc2V0VWludDMyKDQsIDM2ICsgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7CS8vVE9ETzogd2FzIChzYW1wbGVzLmxlbmd0aCAqIDIpDQogIAl3YXZXcml0ZVN0cmluZyh2aWV3LCA4LCAnV0FWRScpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMTIsICdmbXQgJyk7DQogIAl2aWV3LnNldFVpbnQzMigxNiwgMTYsIHRydWUpOwkvLzE2IGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIwLCAxLCB0cnVlKTsJLy8xIGZvciBQQ00NCiAgCXZpZXcuc2V0VWludDE2KDIyLCBudW1DaGFubmVscywgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyNCwgc2FtcGxlUmF0ZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQzMigyOCwgc2FtcGxlUmF0ZSAqIGJ5dGVzUGVyU2FtcGxlICogbnVtQ2hhbm5lbHMsIHRydWUpOwkvL1RPRE86IHdhcyAoc2FtcGxlUmF0ZSAqIDQpDQogIAl2aWV3LnNldFVpbnQxNigzMiwgbnVtQ2hhbm5lbHMgKiBieXRlc1BlclNhbXBsZSwgdHJ1ZSk7DQogIAl2aWV3LnNldFVpbnQxNigzNCwgYml0RGVwdGgsIHRydWUpOw0KICAJd2F2V3JpdGVTdHJpbmcodmlldywgMzYsICdkYXRhJyk7DQogIAl2aWV3LnNldFVpbnQzMig0MCwgKHNhbXBsZVNpemUgKiBudW1DaGFubmVscyAqIGJ5dGVzUGVyU2FtcGxlKSwgdHJ1ZSk7DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiBlbmNvZGVXQVYoaGVhZGVyVmlldywgc2FtcGxlcywgc2FtcGxlUmF0ZSwgbnVtQ2hhbm5lbHMsIGNvbnZlcnRGcm9tRmxvYXQzMil7DQogIAlpZiAoIXNhbXBsZXMgfHwgIXNhbXBsZVJhdGUgfHwgIW51bUNoYW5uZWxzKXsNCiAgCQljb25zb2xlLmVycm9yKCJTdHRTb2NrZXRXb3JrZXIgLSBlbmNvZGVXQVYgLSBNaXNzaW5nIHBhcmFtZXRlcnMiKTsNCiAgCQlyZXR1cm47DQogIAl9DQogIAl2YXIgdmlldzsNCiAgCXZhciBvZmZzZXQ7DQogIAlpZiAoIWhlYWRlclZpZXcpew0KICAJCXZpZXcgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKHNhbXBsZXMubGVuZ3RoICogMikpOw0KICAJCW9mZnNldCA9IDA7DQogIAl9ZWxzZSB7DQogIAkJdmlldyA9IGhlYWRlclZpZXc7DQogIAkJb2Zmc2V0ID0gNDQ7DQogIAl9DQogIAlpZiAoY29udmVydEZyb21GbG9hdDMyKXsNCiAgCQl3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBzYW1wbGVzKTsNCiAgCX1lbHNlIHsNCiAgCQl3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgc2FtcGxlcyk7DQogIAl9DQogIAlyZXR1cm4gdmlldzsNCiAgfQ0KICBmdW5jdGlvbiB3YXZGbG9hdFRvMTZCaXRQQ00odmlldywgb2Zmc2V0LCBpbnB1dCkgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKywgb2Zmc2V0ICs9IDIpIHsNCiAgCQlsZXQgcyA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBpbnB1dFtpXSkpOw0KICAJCXZpZXcuc2V0SW50MTYob2Zmc2V0LCBzIDwgMCA/IHMgKiAweDgwMDAgOiBzICogMHg3RkZGLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZTE2Qml0UENNKHZpZXcsIG9mZnNldCwgaW5wdXQpIHsNCiAgCWZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyssIG9mZnNldCArPSAyKSB7DQogIAkJdmlldy5zZXRJbnQxNihvZmZzZXQsIGlucHV0W2ldLCB0cnVlKTsNCiAgCX0NCiAgfQ0KICBmdW5jdGlvbiB3YXZXcml0ZVN0cmluZyh2aWV3LCBvZmZzZXQsIHN0cmluZykgew0KICAJZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsNCiAgCQl2aWV3LnNldFVpbnQ4KG9mZnNldCArIGksIHN0cmluZy5jaGFyQ29kZUF0KGkpKTsNCiAgCX0NCiAgfQoKfSkoKTsKCg==",null,!1),lve=`//TODO: 'import' not yet supported by FF :-( (Dec 2020)\r
//import { SampleRateException, SampleSizeException } from './shared/common.js';\r
//import { RingBuffer } from './shared/ring-buffer.js';\r
//import { SpeexResampler } from './speex/speex-resampler-interface.min.js';\r
//import { Speex } from './speex/speex-resampler-wasm.js';\r
class RingBuffer{constructor(a,b,c){this._readIndex=0,this._writeIndex=0,this._framesAvailable=0,this._channelCount=b,this._length=a,this._channelData=[];for(let d=0;d<this._channelCount;++d)this._channelData[d]="Uint16"==c?new Uint16Array(a):"Int16"==c?new Int16Array(a):"Uint8"==c?new Uint8Array(a):"Int8"==c?new Int8Array(a):new Float32Array(a)}get framesAvailable(){return this._framesAvailable}push(a,b){let c=a[0].length,d=b||function(a,b,c){return a[b][c]};for(let e,f=0;f<c;++f){e=(this._writeIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)this._channelData[b][e]=d(a,b,f)}this._writeIndex+=c,this._writeIndex>=this._length&&(this._writeIndex-=this._length),this._framesAvailable+=c,this._framesAvailable>this._length&&(this._framesAvailable=this._length)}pull(a,b){if(0===this._framesAvailable)return;let c=a[0].length,d=this,e=b||function(a,b,c){return a[b][c]};for(let d,f=0;f<c;++f){d=(this._readIndex+f)%this._length;for(let b=0;b<this._channelCount;++b)a[b][f]=e(this._channelData,b,d)}this._readIndex+=c,this._readIndex>=this._length&&(this._readIndex-=this._length),this._framesAvailable-=c,0>this._framesAvailable&&(this._framesAvailable=0)}};\r
class SpeexResampler{constructor(a,b,c,d=7){this.channels=a,this.inRate=b,this.outRate=c,this.quality=d,this._inBufferPtr=-1,this._inBufferSize=-1,this._outBufferPtr=-1,this._outBufferSize=-1,this._inLengthPtr=-1,this._outLengthPtr=-1}processChunk(a){if(!speexModule)throw new Error("You need to wait for SpeexResampler.initPromise before calling this method");if(0!=a.constructor.name.indexOf("Int16Array"))throw new Error("Chunk format has to be 'Int16Array'");else a=new Uint8Array(a.buffer);if(0!=a.length%(this.channels*Uint16Array.BYTES_PER_ELEMENT))throw new Error("Chunk length should be a multiple of channels * 2 bytes");if(!this._resamplerPtr){const a=speexModule._malloc(4);this._resamplerPtr=speexModule._speex_resampler_init(this.channels,this.inRate,this.outRate,this.quality,a);const b=speexModule.getValue(a,"i32");if(0!==b)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(b)));this._inLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT),this._outLengthPtr=speexModule._malloc(Uint32Array.BYTES_PER_ELEMENT)}this._inBufferSize<a.length&&(-1!==this._inBufferPtr&&speexModule._free(this._inBufferPtr),this._inBufferPtr=speexModule._malloc(a.length),this._inBufferSize=a.length);const b=Math.ceil(a.length*this.outRate/this.inRate);this._outBufferSize<b&&(-1!==this._outBufferPtr&&speexModule._free(this._outBufferPtr),this._outBufferPtr=speexModule._malloc(b),this._outBufferSize=b),speexModule.setValue(this._inLengthPtr,a.length/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32"),speexModule.HEAPU8.set(a,this._inBufferPtr),speexModule.setValue(this._outLengthPtr,this._outBufferSize/this.channels/Uint16Array.BYTES_PER_ELEMENT,"i32");const c=speexModule._speex_resampler_process_interleaved_int(this._resamplerPtr,this._inBufferPtr,this._inLengthPtr,this._outBufferPtr,this._outLengthPtr);if(0!==c)throw new Error(speexModule.AsciiToString(speexModule._speex_resampler_strerror(c)));const d=speexModule.getValue(this._outLengthPtr,"i32");return new Int16Array(speexModule.HEAPU8.slice(this._outBufferPtr,this._outBufferPtr+d*this.channels*Uint16Array.BYTES_PER_ELEMENT).buffer)}}\r
\r
var speexModule;\r
\r
class SpeexResampleProcessor extends AudioWorkletProcessor {\r
	\r
	get SampleRateException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleRateException";\r
		}\r
	}\r
	get SampleSizeException() {\r
		return function(message){\r
			this.message = message;\r
			this.name = "SampleSizeException";\r
		};\r
	}\r
	\r
	get Speex() {\r
		return function(){return function(a){function b(a,b,c){c=c||"i8","*"===c.charAt(c.length-1)&&(c="i32"),"i1"===c?Q[a>>0]=b:"i8"===c?Q[a>>0]=b:"i16"===c?S[a>>1]=b:"i32"===c?U[a>>2]=b:"i64"===c?(oa=[b>>>0,(na=b,1<=+ga(na)?0<na?(0|ja(+ia(na/4294967296),4294967295))>>>0:~~+ha((na-+(~~na>>>0))/4294967296)>>>0:0)],U[a>>2]=oa[0],U[a+4>>2]=oa[1]):"float"===c?W[a>>2]=b:"double"===c?X[a>>3]=b:p("invalid type for setValue: "+c)}function c(a,b){switch(b=b||"i8","*"===b.charAt(b.length-1)&&(b="i32"),b){case"i1":return Q[a>>0];case"i8":return Q[a>>0];case"i16":return S[a>>1];case"i32":return U[a>>2];case"i64":return U[a>>2];case"float":return W[a>>2];case"double":return X[a>>3];default:p("invalid type for getValue: "+b);}return null}function d(a){for(var b,c="";;){if(b=R[a++>>0],!b)return c;c+=String.fromCharCode(b)}}function e(a,b){return 0<a%b&&(a+=b-a%b),a}function f(a){P=a,A.HEAP8=Q=new Int8Array(a),A.HEAP16=S=new Int16Array(a),A.HEAP32=U=new Int32Array(a),A.HEAPU8=R=new Uint8Array(a),A.HEAPU16=T=new Uint16Array(a),A.HEAPU32=V=new Uint32Array(a),A.HEAPF32=W=new Float32Array(a),A.HEAPF64=X=new Float64Array(a)}function g(a){for(;0<a.length;){var b=a.shift();if("function"==typeof b){b(A);continue}var c=b.func;"number"==typeof c?void 0===b.arg?A.dynCall_v(c):A.dynCall_vi(c,b.arg):c(void 0===b.arg?null:b.arg)}}function h(){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;)l(A.preRun.shift());g(ba)}function i(){fa=!0,g(ca)}function j(){g(da)}function k(){if(A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;)m(A.postRun.shift());g(ea)}function l(a){ba.unshift(a)}function m(a){ea.unshift(a)}function n(){ka++,A.monitorRunDependencies&&A.monitorRunDependencies(ka)}function o(){if(ka--,A.monitorRunDependencies&&A.monitorRunDependencies(ka),0==ka&&(null!==la&&(clearInterval(la),la=null),ma)){var a=ma;ma=null,a()}}function p(a){throw A.onAbort&&A.onAbort(a),a+="",K(a),L(a),Z=!0,$=1,a="abort("+a+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(a)}function q(a){return 0===a.indexOf(pa)}function r(a,b,c){R.copyWithin(a,b,b+c)}function s(){return R.length}function t(a){try{return O.grow(a-P.byteLength+65535>>>16),f(O.buffer),1}catch(a){}}function u(a){if("boolean"==typeof I&&I){var b;try{b=Buffer.from(a,"base64")}catch(c){b=new Buffer(a,"base64")}return new Uint8Array(b.buffer,b.byteOffset,b.byteLength)}try{for(var c=qa(a),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);return d}catch(a){throw new Error("Converting base64 string to bytes failed.")}}function v(a){return q(a)?u(a.slice(37)):void 0}function w(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}function x(a){function b(){Ba||(Ba=!0,A.calledRun=!0,Z||(i(),j(),y(A),A.onRuntimeInitialized&&A.onRuntimeInitialized(),k()))}(a=a||D,!(0<ka))&&(h(),0<ka||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),b()},1)):b()))}a=a||{};var y,z,A="undefined"==typeof a?{}:a;A.ready=new Promise(function(a,b){y=a,z=b});var B,C={};for(B in A)A.hasOwnProperty(B)&&(C[B]=A[B]);var D=[],E="./this.program",F=function(a,b){throw b},G=!1,H=!1,I=!1;G="object"==typeof window,H="function"==typeof importScripts,I="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var J;I?(1<process.argv.length&&(E=process.argv[1].replace(/\\\\/g,"/")),D=process.argv.slice(2),process.on("uncaughtException",function(a){if(!(a instanceof w))throw a}),process.on("unhandledRejection",p),F=function(a){process.exit(a)},A.inspect=function(){return"[Emscripten Module object]"}):(G||H)&&(J=function(a){document.title=a});var K=A.print||console.log.bind(console),L=A.printErr||console.warn.bind(console);for(B in C)C.hasOwnProperty(B)&&(A[B]=C[B]);C=null,A.arguments&&(D=A.arguments),A.thisProgram&&(E=A.thisProgram),A.quit&&(F=A.quit);var M;A.wasmBinary&&(M=A.wasmBinary);var N;A.noExitRuntime&&(N=A.noExitRuntime),"object"!=typeof WebAssembly&&p("no native wasm support detected");var O,P,Q,R,S,T,U,V,W,X,Y=new WebAssembly.Table({initial:6,maximum:6,element:"anyfunc"}),Z=!1,$=0,_=65536,aa=A.INITIAL_MEMORY||20971520;O=A.wasmMemory?A.wasmMemory:new WebAssembly.Memory({initial:aa/_,maximum:2147483648/_}),O&&(P=O.buffer),aa=P.byteLength,f(P),U[6256>>2]=5249296;var ba=[],ca=[],da=[],ea=[],fa=!1,ga=Math.abs,ha=Math.ceil,ia=Math.floor,ja=Math.min,ka=0,la=null,ma=null;A.preloadedImages={},A.preloadedAudios={};var na,oa,pa="data:application/octet-stream;base64,";ca.push({func:function(){ta()}});var qa="function"==typeof atob?atob:function(a){var b,c,d,e,f,g,h,j="",k=0;a=a.replace(/[^A-Za-z0-9\\+\\/\\=]/g,"");do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,j+=String.fromCharCode(b),64!==g&&(j+=String.fromCharCode(c)),64!==h&&(j+=String.fromCharCode(d));while(k<a.length);return j},ra={a:r,b:function(a){a>>>=0;var b=s(),c=2147483648;if(a>c)return!1;for(var d,f=1;4>=f;f*=2){d=b*(1+.2/f),d=Math.min(d,a+100663296);var g=Math.min(c,e(Math.max(16777216,a,d),65536)),h=t(g);if(h)return!0}return!1},memory:O,table:Y},sa=function(){function a(a){var b=a.exports;A.asm=b,o("wasm-instantiate")}var b={a:ra};if(n("wasm-instantiate"),A.instantiateWasm)try{var c=A.instantiateWasm(b,a);return c}catch(a){return L("Module.instantiateWasm callback failed with error: "+a),!1}return function(a){var c=v("data:application/octet-stream;base64,AGFzbQEAAAABggETYAZ/f39/f38Bf2ABfwF/YAF/AGACf38AYAN/f38AYAJ/fwF/YAV/f39/fwF/YAAAYAV/f39/fwBgBn9/f39/fwBgA39/fwF/YAR/f39/AX9gB39/f39/f38Bf2ACfH8Bf2AEfX1/fwF9YAF8AXxgAnx/AXxgAnx8AXxgA3x8fwF8AikEAWEBYQAKAWEBYgABAWEGbWVtb3J5AgHAAoCAAgFhBXRhYmxlAXAABgMgHwIBAxABARIOAQMFEQkAAAAABAgFDwwNCwEEBgIABgcGCQF/AUGQssACCwchCAFjACABZAAfAWUAAgFmAB0BZwAcAWgAGwFpABoBagAHCQsBAEEBCwUSERAPHgrXpwEfgQ0BB38CQCAARQ0AIABBeGoiAyAAQXxqKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACICayIDQYQtKAIAIgRJDQEgACACaiEAIANBiC0oAgBHBEAgAkH/AU0EQCADKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgAygCDCIBRgRAQfQsQfQsKAIAQX4gAndxNgIADAMLIAQgATYCDCABIAQ2AggMAgsgAygCGCEGAkAgAyADKAIMIgFHBEAgBCADKAIIIgJNBEAgAigCDBoLIAIgATYCDCABIAI2AggMAQsCQCADQRRqIgIoAgAiBA0AIANBEGoiAigCACIEDQBBACEBDAELA0AgAiEHIAQiAUEUaiICKAIAIgQNACABQRBqIQIgASgCECIEDQALIAdBADYCAAsgBkUNAQJAIAMgAygCHCICQQJ0QaQvaiIEKAIARgRAIAQgATYCACABDQFB+CxB+CwoAgBBfiACd3E2AgAMAwsgBkEQQRQgBigCECADRhtqIAE2AgAgAUUNAgsgASAGNgIYIAMoAhAiAgRAIAEgAjYCECACIAE2AhgLIAMoAhQiAkUNASABIAI2AhQgAiABNgIYDAELIAUoAgQiAUEDcUEDRw0AQfwsIAA2AgAgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgAPCyAFIANNDQAgBSgCBCIBQQFxRQ0AAkAgAUECcUUEQCAFQYwtKAIARgRAQYwtIAM2AgBBgC1BgC0oAgAgAGoiADYCACADIABBAXI2AgQgA0GILSgCAEcNA0H8LEEANgIAQYgtQQA2AgAPCyAFQYgtKAIARgRAQYgtIAM2AgBB/CxB/CwoAgAgAGoiADYCACADIABBAXI2AgQgACADaiAANgIADwsgAUF4cSAAaiEAAkAgAUH/AU0EQCAFKAIMIQIgBSgCCCIEIAFBA3YiAUEDdEGcLWoiB0cEQEGELSgCABoLIAIgBEYEQEH0LEH0LCgCAEF+IAF3cTYCAAwCCyACIAdHBEBBhC0oAgAaCyAEIAI2AgwgAiAENgIIDAELIAUoAhghBgJAIAUgBSgCDCIBRwRAQYQtKAIAIAUoAggiAk0EQCACKAIMGgsgAiABNgIMIAEgAjYCCAwBCwJAIAVBFGoiAigCACIEDQAgBUEQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0AAkAgBSAFKAIcIgJBAnRBpC9qIgQoAgBGBEAgBCABNgIAIAENAUH4LEH4LCgCAEF+IAJ3cTYCAAwCCyAGQRBBFCAGKAIQIAVGG2ogATYCACABRQ0BCyABIAY2AhggBSgCECICBEAgASACNgIQIAIgATYCGAsgBSgCFCICRQ0AIAEgAjYCFCACIAE2AhgLIAMgAEEBcjYCBCAAIANqIAA2AgAgA0GILSgCAEcNAUH8LCAANgIADwsgBSABQX5xNgIEIAMgAEEBcjYCBCAAIANqIAA2AgALIABB/wFNBEAgAEEDdiIBQQN0QZwtaiEAAn9B9CwoAgAiAkEBIAF0IgFxRQRAQfQsIAEgAnI2AgAgAAwBCyAAKAIICyECIAAgAzYCCCACIAM2AgwgAyAANgIMIAMgAjYCCA8LIANCADcCECADAn9BACAAQQh2IgFFDQAaQR8gAEH///8HSw0AGiABIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqCyICNgIcIAJBAnRBpC9qIQECQAJAAkBB+CwoAgAiBEEBIAJ0IgdxRQRAQfgsIAQgB3I2AgAgASADNgIAIAMgATYCGAwBCyAAQQBBGSACQQF2ayACQR9GG3QhAiABKAIAIQEDQCABIgQoAgRBeHEgAEYNAiACQR12IQEgAkEBdCECIAQgAUEEcWoiB0EQaigCACIBDQALIAcgAzYCECADIAQ2AhgLIAMgAzYCDCADIAM2AggMAQsgBCgCCCIAIAM2AgwgBCADNgIIIANBADYCGCADIAQ2AgwgAyAANgIIC0GULUGULSgCAEF/aiIANgIAIAANAEG8MCEDA0AgAygCACIAQQhqIQMgAA0AC0GULUF/NgIACwtSAQJ/QfAwKAIAIgEgAEEDakF8cSICaiEAAkAgAkEBTkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAUUNAQtB8DAgADYCACABDwtB8CxBMDYCAEF/C9YCAQF/AkAgAUUNACAAIAFqIgJBf2pBADoAACAAQQA6AAAgAUEDSQ0AIAJBfmpBADoAACAAQQA6AAEgAkF9akEAOgAAIABBADoAAiABQQdJDQAgAkF8akEAOgAAIABBADoAAyABQQlJDQAgAEEAIABrQQNxIgJqIgBBADYCACAAIAEgAmtBfHEiAmoiAUF8akEANgIAIAJBCUkNACAAQQA2AgggAEEANgIEIAFBeGpBADYCACABQXRqQQA2AgAgAkEZSQ0AIABBADYCGCAAQQA2AhQgAEEANgIQIABBADYCDCABQXBqQQA2AgAgAUFsakEANgIAIAFBaGpBADYCACABQWRqQQA2AgAgAiAAQQRxQRhyIgJrIgFBIEkNACAAIAJqIQADQCAAQgA3AxggAEIANwMQIABCADcDCCAAQgA3AwAgAEEgaiEAIAFBYGoiAUEfSw0ACwsLqAEAAkAgAUGACE4EQCAARAAAAAAAAOB/oiEAIAFB/w9IBEAgAUGBeGohAQwCCyAARAAAAAAAAOB/oiEAIAFB/RcgAUH9F0gbQYJwaiEBDAELIAFBgXhKDQAgAEQAAAAAAAAQAKIhACABQYNwSgRAIAFB/gdqIQEMAQsgAEQAAAAAAAAQAKIhACABQYZoIAFBhmhKG0H8D2ohAQsgACABQf8Haq1CNIa/ogtTAgF/AX4CQAJ/QQAgAEUNABogAK0iAqciASAAQQFyQYCABEkNABpBfyABIAJCIIinGwsiARAHIgBFDQAgAEF8ai0AAEEDcUUNACAAIAEQBAsgAAvGLQELfyMAQRBrIgskAAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEH0LCgCACIGQRAgAEELakF4cSAAQQtJGyIFQQN2IgB2IgFBA3EEQCABQX9zQQFxIABqIgJBA3QiBEGkLWooAgAiAUEIaiEAAkAgASgCCCIDIARBnC1qIgRGBEBB9CwgBkF+IAJ3cTYCAAwBC0GELSgCABogAyAENgIMIAQgAzYCCAsgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDAsgBUH8LCgCACIITQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cSIAQQAgAGtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmoiAkEDdCIDQaQtaigCACIBKAIIIgAgA0GcLWoiA0YEQEH0LCAGQX4gAndxIgY2AgAMAQtBhC0oAgAaIAAgAzYCDCADIAA2AggLIAFBCGohACABIAVBA3I2AgQgASAFaiIHIAJBA3QiAiAFayIDQQFyNgIEIAEgAmogAzYCACAIBEAgCEEDdiIEQQN0QZwtaiEBQYgtKAIAIQICfyAGQQEgBHQiBHFFBEBB9CwgBCAGcjYCACABDAELIAEoAggLIQQgASACNgIIIAQgAjYCDCACIAE2AgwgAiAENgIIC0GILSAHNgIAQfwsIAM2AgAMDAtB+CwoAgAiCkUNASAKQQAgCmtxQX9qIgAgAEEMdkEQcSIAdiIBQQV2QQhxIgIgAHIgASACdiIAQQJ2QQRxIgFyIAAgAXYiAEEBdkECcSIBciAAIAF2IgBBAXZBAXEiAXIgACABdmpBAnRBpC9qKAIAIgEoAgRBeHEgBWshAyABIQIDQAJAIAIoAhAiAEUEQCACKAIUIgBFDQELIAAoAgRBeHEgBWsiAiADIAIgA0kiAhshAyAAIAEgAhshASAAIQIMAQsLIAEoAhghCSABIAEoAgwiBEcEQEGELSgCACABKAIIIgBNBEAgACgCDBoLIAAgBDYCDCAEIAA2AggMCwsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0DIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAoLQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQfgsKAIAIgdFDQBBACAFayECAkACQAJAAn9BACAAQQh2IgBFDQAaQR8gBUH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCIDIANBgIAPakEQdkECcSIDdEEPdiAAIAFyIANyayIAQQF0IAUgAEEVanZBAXFyQRxqCyIIQQJ0QaQvaigCACIDRQRAQQAhAAwBCyAFQQBBGSAIQQF2ayAIQR9GG3QhAUEAIQADQAJAIAMoAgRBeHEgBWsiBiACTw0AIAMhBCAGIgINAEEAIQIgAyEADAMLIAAgAygCFCIGIAYgAyABQR12QQRxaigCECIDRhsgACAGGyEAIAEgA0EAR3QhASADDQALCyAAIARyRQRAQQIgCHQiAEEAIABrciAHcSIARQ0DIABBACAAa3FBf2oiACAAQQx2QRBxIgB2IgFBBXZBCHEiAyAAciABIAN2IgBBAnZBBHEiAXIgACABdiIAQQF2QQJxIgFyIAAgAXYiAEEBdkEBcSIBciAAIAF2akECdEGkL2ooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAVrIgMgAkkhASADIAIgARshAiAAIAQgARshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIAJB/CwoAgAgBWtPDQAgBCgCGCEIIAQgBCgCDCIBRwRAQYQtKAIAIAQoAggiAE0EQCAAKAIMGgsgACABNgIMIAEgADYCCAwJCyAEQRRqIgMoAgAiAEUEQCAEKAIQIgBFDQMgBEEQaiEDCwNAIAMhBiAAIgFBFGoiAygCACIADQAgAUEQaiEDIAEoAhAiAA0ACyAGQQA2AgAMCAtB/CwoAgAiASAFTwRAQYgtKAIAIQACQCABIAVrIgJBEE8EQEH8LCACNgIAQYgtIAAgBWoiAzYCACADIAJBAXI2AgQgACABaiACNgIAIAAgBUEDcjYCBAwBC0GILUEANgIAQfwsQQA2AgAgACABQQNyNgIEIAAgAWoiASABKAIEQQFyNgIECyAAQQhqIQAMCgtBgC0oAgAiASAFSwRAQYAtIAEgBWsiATYCAEGMLUGMLSgCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQAMCgtBACEAIAVBL2oiBAJ/QcwwKAIABEBB1DAoAgAMAQtB2DBCfzcCAEHQMEKAoICAgIAENwIAQcwwIAtBDGpBcHFB2KrVqgVzNgIAQeAwQQA2AgBBsDBBADYCAEGAIAsiAmoiBkEAIAJrIgdxIgIgBU0NCUGsMCgCACIDBEBBpDAoAgAiCCACaiIJIAhNDQogCSADSw0KC0GwMC0AAEEEcQ0EAkACQEGMLSgCACIDBEBBtDAhAANAIAAoAgAiCCADTQRAIAggACgCBGogA0sNAwsgACgCCCIADQALC0EAEAMiAUF/Rg0FIAIhBkHQMCgCACIAQX9qIgMgAXEEQCACIAFrIAEgA2pBACAAa3FqIQYLIAYgBU0NBSAGQf7///8HSw0FQawwKAIAIgAEQEGkMCgCACIDIAZqIgcgA00NBiAHIABLDQYLIAYQAyIAIAFHDQEMBwsgBiABayAHcSIGQf7///8HSw0EIAYQAyIBIAAoAgAgACgCBGpGDQMgASEACwJAIAVBMGogBk0NACAAQX9GDQBB1DAoAgAiASAEIAZrakEAIAFrcSIBQf7///8HSwRAIAAhAQwHCyABEANBf0cEQCABIAZqIQYgACEBDAcLQQAgBmsQAxoMBAsgACIBQX9HDQUMAwtBACEEDAcLQQAhAQwFCyABQX9HDQILQbAwQbAwKAIAQQRyNgIACyACQf7///8HSw0BIAIQAyIBQQAQAyIATw0BIAFBf0YNASAAQX9GDQEgACABayIGIAVBKGpNDQELQaQwQaQwKAIAIAZqIgA2AgAgAEGoMCgCAEsEQEGoMCAANgIACwJAAkACQEGMLSgCACIDBEBBtDAhAANAIAEgACgCACICIAAoAgQiBGpGDQIgACgCCCIADQALDAILQYQtKAIAIgBBACABIABPG0UEQEGELSABNgIAC0EAIQBBuDAgBjYCAEG0MCABNgIAQZQtQX82AgBBmC1BzDAoAgA2AgBBwDBBADYCAANAIABBA3QiAkGkLWogAkGcLWoiAzYCACACQagtaiADNgIAIABBAWoiAEEgRw0AC0GALSAGQVhqIgBBeCABa0EHcUEAIAFBCGpBB3EbIgJrIgM2AgBBjC0gASACaiICNgIAIAIgA0EBcjYCBCAAIAFqQSg2AgRBkC1B3DAoAgA2AgAMAgsgAC0ADEEIcQ0AIAEgA00NACACIANLDQAgACAEIAZqNgIEQYwtIANBeCADa0EHcUEAIANBCGpBB3EbIgBqIgE2AgBBgC1BgC0oAgAgBmoiAiAAayIANgIAIAEgAEEBcjYCBCACIANqQSg2AgRBkC1B3DAoAgA2AgAMAQsgAUGELSgCACIESQRAQYQtIAE2AgAgASEECyABIAZqIQJBtDAhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBtDAhAANAIAAoAgAiAiADTQRAIAIgACgCBGoiBCADSw0DCyAAKAIIIQAMAAALAAsgACABNgIAIAAgACgCBCAGajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAFQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIBIAlrIAVrIQAgBSAJaiEHIAEgA0YEQEGMLSAHNgIAQYAtQYAtKAIAIABqIgA2AgAgByAAQQFyNgIEDAMLIAFBiC0oAgBGBEBBiC0gBzYCAEH8LEH8LCgCACAAaiIANgIAIAcgAEEBcjYCBCAAIAdqIAA2AgAMAwsgASgCBCICQQNxQQFGBEAgAkF4cSEKAkAgAkH/AU0EQCABKAIIIgMgAkEDdiIEQQN0QZwtakcaIAMgASgCDCICRgRAQfQsQfQsKAIAQX4gBHdxNgIADAILIAMgAjYCDCACIAM2AggMAQsgASgCGCEIAkAgASABKAIMIgZHBEAgBCABKAIIIgJNBEAgAigCDBoLIAIgBjYCDCAGIAI2AggMAQsCQCABQRRqIgMoAgAiBQ0AIAFBEGoiAygCACIFDQBBACEGDAELA0AgAyECIAUiBkEUaiIDKAIAIgUNACAGQRBqIQMgBigCECIFDQALIAJBADYCAAsgCEUNAAJAIAEgASgCHCICQQJ0QaQvaiIDKAIARgRAIAMgBjYCACAGDQFB+CxB+CwoAgBBfiACd3E2AgAMAgsgCEEQQRQgCCgCECABRhtqIAY2AgAgBkUNAQsgBiAINgIYIAEoAhAiAgRAIAYgAjYCECACIAY2AhgLIAEoAhQiAkUNACAGIAI2AhQgAiAGNgIYCyABIApqIQEgACAKaiEACyABIAEoAgRBfnE2AgQgByAAQQFyNgIEIAAgB2ogADYCACAAQf8BTQRAIABBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAc2AgggASAHNgIMIAcgADYCDCAHIAE2AggMAwsgBwJ/QQAgAEEIdiIBRQ0AGkEfIABB////B0sNABogASABQYD+P2pBEHZBCHEiAXQiAiACQYDgH2pBEHZBBHEiAnQiAyADQYCAD2pBEHZBAnEiA3RBD3YgASACciADcmsiAUEBdCAAIAFBFWp2QQFxckEcagsiATYCHCAHQgA3AhAgAUECdEGkL2ohAgJAQfgsKAIAIgNBASABdCIEcUUEQEH4LCADIARyNgIAIAIgBzYCAAwBCyAAQQBBGSABQQF2ayABQR9GG3QhAyACKAIAIQEDQCABIgIoAgRBeHEgAEYNAyADQR12IQEgA0EBdCEDIAIgAUEEcWoiBCgCECIBDQALIAQgBzYCEAsgByACNgIYIAcgBzYCDCAHIAc2AggMAgtBgC0gBkFYaiIAQXggAWtBB3FBACABQQhqQQdxGyICayIHNgIAQYwtIAEgAmoiAjYCACACIAdBAXI2AgQgACABakEoNgIEQZAtQdwwKAIANgIAIAMgBEEnIARrQQdxQQAgBEFZakEHcRtqQVFqIgAgACADQRBqSRsiAkEbNgIEIAJBvDApAgA3AhAgAkG0MCkCADcCCEG8MCACQQhqNgIAQbgwIAY2AgBBtDAgATYCAEHAMEEANgIAIAJBGGohAANAIABBBzYCBCAAQQhqIQEgAEEEaiEAIAQgAUsNAAsgAiADRg0DIAIgAigCBEF+cTYCBCADIAIgA2siBEEBcjYCBCACIAQ2AgAgBEH/AU0EQCAEQQN2IgFBA3RBnC1qIQACf0H0LCgCACICQQEgAXQiAXFFBEBB9CwgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIDAQLIANCADcCECADAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAAIABBgP4/akEQdkEIcSIAdCIBIAFBgOAfakEQdkEEcSIBdCICIAJBgIAPakEQdkECcSICdEEPdiAAIAFyIAJyayIAQQF0IAQgAEEVanZBAXFyQRxqCyIANgIcIABBAnRBpC9qIQECQEH4LCgCACICQQEgAHQiBnFFBEBB+CwgAiAGcjYCACABIAM2AgAgAyABNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIGKAIQIgENAAsgBiADNgIQIAMgAjYCGAsgAyADNgIMIAMgAzYCCAwDCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLIAlBCGohAAwFCyACKAIIIgAgAzYCDCACIAM2AgggA0EANgIYIAMgAjYCDCADIAA2AggLQYAtKAIAIgAgBU0NAEGALSAAIAVrIgE2AgBBjC1BjC0oAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAMLQfAsQTA2AgBBACEADAILAkAgCEUNAAJAIAQoAhwiAEECdEGkL2oiAygCACAERgRAIAMgATYCACABDQFB+CwgB0F+IAB3cSIHNgIADAILIAhBEEEUIAgoAhAgBEYbaiABNgIAIAFFDQELIAEgCDYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCACQQ9NBEAgBCACIAVqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAFQQNyNgIEIAQgBWoiAyACQQFyNgIEIAIgA2ogAjYCACACQf8BTQRAIAJBA3YiAUEDdEGcLWohAAJ/QfQsKAIAIgJBASABdCIBcUUEQEH0LCABIAJyNgIAIAAMAQsgACgCCAshASAAIAM2AgggASADNgIMIAMgADYCDCADIAE2AggMAQsgAwJ/QQAgAkEIdiIARQ0AGkEfIAJB////B0sNABogACAAQYD+P2pBEHZBCHEiAHQiASABQYDgH2pBEHZBBHEiAXQiBSAFQYCAD2pBEHZBAnEiBXRBD3YgACABciAFcmsiAEEBdCACIABBFWp2QQFxckEcagsiADYCHCADQgA3AhAgAEECdEGkL2ohAQJAAkAgB0EBIAB0IgVxRQRAQfgsIAUgB3I2AgAgASADNgIADAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAEoAgAhBQNAIAUiASgCBEF4cSACRg0CIABBHXYhBSAAQQF0IQAgASAFQQRxaiIGKAIQIgUNAAsgBiADNgIQCyADIAE2AhggAyADNgIMIAMgAzYCCAwBCyABKAIIIgAgAzYCDCABIAM2AgggA0EANgIYIAMgATYCDCADIAA2AggLIARBCGohAAwBCwJAIAlFDQACQCABKAIcIgBBAnRBpC9qIgIoAgAgAUYEQCACIAQ2AgAgBA0BQfgsIApBfiAAd3E2AgAMAgsgCUEQQRQgCSgCECABRhtqIAQ2AgAgBEUNAQsgBCAJNgIYIAEoAhAiAARAIAQgADYCECAAIAQ2AhgLIAEoAhQiAEUNACAEIAA2AhQgACAENgIYCwJAIANBD00EQCABIAMgBWoiAEEDcjYCBCAAIAFqIgAgACgCBEEBcjYCBAwBCyABIAVBA3I2AgQgASAFaiIEIANBAXI2AgQgAyAEaiADNgIAIAgEQCAIQQN2IgVBA3RBnC1qIQBBiC0oAgAhAgJ/QQEgBXQiBSAGcUUEQEH0LCAFIAZyNgIAIAAMAQsgACgCCAshBSAAIAI2AgggBSACNgIMIAIgADYCDCACIAU2AggLQYgtIAQ2AgBB/CwgAzYCAAsgAUEIaiEACyALQRBqJAAgAAuZAQEDfCAAIACiIgMgAyADoqIgA0R81c9aOtnlPaJE65wriublWr6goiADIANEff6xV+Mdxz6iRNVhwRmgASq/oKJEpvgQERERgT+goCEFIAMgAKIhBCACRQRAIAQgAyAFokRJVVVVVVXFv6CiIACgDwsgACADIAFEAAAAAAAA4D+iIAQgBaKhoiABoSAERElVVVVVVcU/oqChC7YCAgJ9B3wgAbsiBpkiB0SN7bWg98awPmMEQCAADwsgByACtyIHRAAAAAAAAOA/omQEfUMAAAAABSAAIAGUIQEgAygCAAJ/IAYgBqAgB6O2iyADKAIEspQiBI4iBYtDAAAAT10EQCAFqAwBC0GAgICAeAsiAkEDdGoiAysDCCEHIAMrAwAhCiADKwMQIQkgAysDGCEGIAG7RBgtRFT7IQlAoiIIEBYgALuiIAijIAYgBCACspMiACAAIACUIgGUuyIIRJWoZ1VVVcU/oiILIAC7IgZElahnVVVVxT+ioSIMoiAJIAG7RAAAAAAAAOA/oiIJIAagIAhEAAAAAAAA4D+ioSIIoiAKIAkgBkS1K0xVVVXVv6KgIAuhIgaiIAdEAAAAAAAA8D8gDKEgCKEgBqGioKCgorYLC/IMAhJ/An0gACAAKAIIIgIgACgCDCIDbiIGNgIkIAAgACgCEEEUbCIBQbQJaigCACIENgIwIAAoAhghCSAAIAFBsAlqKAIAIgU2AhggACACIAMgBmxrNgIoIAAoAhwhDAJAAkACQCACIANLBEAgACABQbgJaioCACADs5QgArOVOAIsIAUgBSADbiIBIANsayIFQX8gAm4iBksNAiABIAZLDQIgASACbCIBIAIgBWwgA24iBUF/c0sNAiAAIAEgBWpBB2pBeHEiBTYCGCAEIANBAXQgAkkiAXYgA0ECdCACSSIGdiADQQN0IgcgAkl2IQQCQAJAIAENACAGDQAgByACTw0BCyAAIAQ2AjALIAQgA0EEdCACSSIBdiECIAFFQQAgAhsNASAAIAJBASACGyIENgIwDAELIAAgAUG8CWooAgA2AiwLAkAgAyAFbCICIAQgBWxBCGoiAU0EQEEBIQZB/////wEgA24gBU8NAQtBACEGIAEhAkH3////ASAEbiAFSQ0BCyAAKAJQIAJJBEAgACgCTCACQQJ0EAwiAUUNASAAIAI2AlAgACABNgJMCyAAAn8CQAJAIAZFBEBBfCEBIAAoAhgiAiAAKAIwIgRsQQRqIgVBfEoNASAAKAIQIQMMAgsgACgCGCECAkAgACgCDCIBRQ0AIAJFBEBBACECDAELIAFBASABQQFLGyEEIAJBfm0hBSAAKAIQQRRsQcAJaigCACEGIAGzIRMgACgCTCEHQQAhAwNAIAIgA2whCCADsyATlSEUQQAhAQNAIAcgASAIakECdGogACoCLCABQQFqIgEgBWqyIBSTIAIgBhAJOAIAIAEgAkcNAAsgA0EBaiIDIARHDQALC0EBQQIgACgCEEEIShsMAgsgAkEBdrMhEyAAKAIQIgNBFGxBwAlqKAIAIQYgBLMhFCAAKAJMIQQDQCABQQJ0IARqIAAqAiwgAbIgFJUgE5MgAiAGEAk4AhAgAUEBaiIBIAVHDQALC0EDQQQgA0EIShsLNgJUIAIgACgCIGpBf2oiASAAKAIcIgJLBEBB/////wEgACgCFCICbiABSQ0BIAAoAkggASACbEECdBAMIgJFDQEgACABNgIcIAAgAjYCSCABIQILIAAoAjhFBEAgAiAAKAIUbCICRQRAQQAPCyAAKAJIIAJBAnQQBEEADwsgACgCGCICIAlLBEAgACgCFCIDRQRAQQAPCyAJQX9qIQ0gA0ECdEF8aiEOIAAoAkQhD0EAIQYDQCAPIANBf2oiA0ECdCIQaiIHKAIAIgJBAXQhBSACIA1qIgEEQCADIAxsIQggACgCHCADbCEKIAAoAkghBANAIAQgAUF/aiIBIAJqIApqQQJ0aiAEIAEgCGpBAnRqKAIANgIAIAENAAsLIA4gBkECdGshCCACBEAgACgCSCAAKAIcIAhsaiACQQJ0EAQLIAdBADYCAAJAIAUgCWoiBCAAKAIYIgVJBEAgBEF/aiIHBEAgBUF+aiERIARBfmohEiAAKAIcIANsIQogACgCSCELQQAhAUEAIQIDQCALIAEgEWogCmpBAnRqIAsgASASaiAKakECdGooAgA2AgAgAkF/cyEBIAJBAWoiAiAHRw0ACwsgBUF/aiICIAdLBEAgACgCSCAAKAIcIAhsaiACIAdrQQJ0EAQLIAAoAjwgEGoiAiACKAIAIAUgBGtBAXZqNgIADAELIAcgBCAFa0EBdiICNgIAIAJBf2oiAUEAIAAoAhgiBGtGDQAgASAEaiIBQQEgAUEBSxshBSAAKAIcIANsIQcgACgCSCEEQQAhAQNAIAQgASAHaiIIQQJ0aiAEIAIgCGpBAnRqKAIANgIAIAFBAWoiASAFRw0ACwsgBkEBaiEGIAMNAAtBAA8LQQAhASACIAlPDQEgACgCFEUNASAAKAJEIQZBACEDA0AgBiADQQJ0aiIEKAIAIQEgBCAJIAJrQQF2IgI2AgAgASACaiIHQX9qIgFBACAAKAIYIgVrRwRAIAEgBWoiAUEBIAFBAUsbIQggACgCHCADbCEKIAAoAkghBUEAIQEDQCAFIAEgCmoiC0ECdGogBSACIAtqQQJ0aigCADYCACABQQFqIgEgCEcNAAsLIAQgBzYCACADQQFqIgMgACgCFE8EQEEADwUgACgCGCECDAELAAALAAsgACAJNgIYIABBBTYCVEEBIQELIAELhwwBBn8gACABaiEFAkACQCAAKAIEIgJBAXENACACQQNxRQ0BIAAoAgAiAyABaiEBIAAgA2siAEGILSgCAEcEQEGELSgCACEEIANB/wFNBEAgACgCCCIEIANBA3YiA0EDdEGcLWpHGiAEIAAoAgwiAkYEQEH0LEH0LCgCAEF+IAN3cTYCAAwDCyAEIAI2AgwgAiAENgIIDAILIAAoAhghBgJAIAAgACgCDCICRwRAIAQgACgCCCIDTQRAIAMoAgwaCyADIAI2AgwgAiADNgIIDAELAkAgAEEUaiIDKAIAIgQNACAAQRBqIgMoAgAiBA0AQQAhAgwBCwNAIAMhByAEIgJBFGoiAygCACIEDQAgAkEQaiEDIAIoAhAiBA0ACyAHQQA2AgALIAZFDQECQCAAIAAoAhwiA0ECdEGkL2oiBCgCAEYEQCAEIAI2AgAgAg0BQfgsQfgsKAIAQX4gA3dxNgIADAMLIAZBEEEUIAYoAhAgAEYbaiACNgIAIAJFDQILIAIgBjYCGCAAKAIQIgMEQCACIAM2AhAgAyACNgIYCyAAKAIUIgNFDQEgAiADNgIUIAMgAjYCGAwBCyAFKAIEIgJBA3FBA0cNAEH8LCABNgIAIAUgAkF+cTYCBCAAIAFBAXI2AgQgBSABNgIADwsCQCAFKAIEIgJBAnFFBEAgBUGMLSgCAEYEQEGMLSAANgIAQYAtQYAtKAIAIAFqIgE2AgAgACABQQFyNgIEIABBiC0oAgBHDQNB/CxBADYCAEGILUEANgIADwsgBUGILSgCAEYEQEGILSAANgIAQfwsQfwsKAIAIAFqIgE2AgAgACABQQFyNgIEIAAgAWogATYCAA8LQYQtKAIAIQMgAkF4cSABaiEBAkAgAkH/AU0EQCAFKAIIIgQgAkEDdiICQQN0QZwtakcaIAQgBSgCDCIDRgRAQfQsQfQsKAIAQX4gAndxNgIADAILIAQgAzYCDCADIAQ2AggMAQsgBSgCGCEGAkAgBSAFKAIMIgJHBEAgAyAFKAIIIgNNBEAgAygCDBoLIAMgAjYCDCACIAM2AggMAQsCQCAFQRRqIgMoAgAiBA0AIAVBEGoiAygCACIEDQBBACECDAELA0AgAyEHIAQiAkEUaiIDKAIAIgQNACACQRBqIQMgAigCECIEDQALIAdBADYCAAsgBkUNAAJAIAUgBSgCHCIDQQJ0QaQvaiIEKAIARgRAIAQgAjYCACACDQFB+CxB+CwoAgBBfiADd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAI2AgAgAkUNAQsgAiAGNgIYIAUoAhAiAwRAIAIgAzYCECADIAI2AhgLIAUoAhQiA0UNACACIAM2AhQgAyACNgIYCyAAIAFBAXI2AgQgACABaiABNgIAIABBiC0oAgBHDQFB/CwgATYCAA8LIAUgAkF+cTYCBCAAIAFBAXI2AgQgACABaiABNgIACyABQf8BTQRAIAFBA3YiAkEDdEGcLWohAQJ/QfQsKAIAIgNBASACdCICcUUEQEH0LCACIANyNgIAIAEMAQsgASgCCAshAyABIAA2AgggAyAANgIMIAAgATYCDCAAIAM2AggPCyAAQgA3AhAgAAJ/QQAgAUEIdiICRQ0AGkEfIAFB////B0sNABogAiACQYD+P2pBEHZBCHEiAnQiAyADQYDgH2pBEHZBBHEiA3QiBCAEQYCAD2pBEHZBAnEiBHRBD3YgAiADciAEcmsiAkEBdCABIAJBFWp2QQFxckEcagsiAzYCHCADQQJ0QaQvaiECAkACQEH4LCgCACIEQQEgA3QiB3FFBEBB+CwgBCAHcjYCACACIAA2AgAgACACNgIYDAELIAFBAEEZIANBAXZrIANBH0YbdCEDIAIoAgAhAgNAIAIiBCgCBEF4cSABRg0CIANBHXYhAiADQQF0IQMgBCACQQRxaiIHQRBqKAIAIgINAAsgByAANgIQIAAgBDYCGAsgACAANgIMIAAgADYCCA8LIAQoAggiASAANgIMIAQgADYCCCAAQQA2AhggACAENgIMIAAgATYCCAsLfwECfyAARQRAIAEQBw8LIAFBQE8EQEHwLEEwNgIAQQAPCyAAQXhqQRAgAUELakF4cSABQQtJGxAVIgIEQCACQQhqDwsgARAHIgJFBEBBAA8LIAIgAEF8QXggAEF8aigCACIDQQNxGyADQXhxaiIDIAEgAyABSRsQEyAAEAIgAguSAQEDfEQAAAAAAADwPyAAIACiIgJEAAAAAAAA4D+iIgOhIgREAAAAAAAA8D8gBKEgA6EgAiACIAIgAkSQFcsZoAH6PqJEd1HBFmzBVr+gokRMVVVVVVWlP6CiIAIgAqIiAyADoiACIAJE1DiIvun6qL2iRMSxtL2e7iE+oKJErVKcgE9+kr6goqCiIAAgAaKhoKALzQgDEH8BfQF8IwBBoCBrIgckACAFKAIAIQsgAygCACEOIAAoAlwhECAAKAJYIREgACgCSCEGIAAoAhghCSAAKAIcIQggAEEBNgJcAkAgDkUNACALRQ0AIAggCWtBAWohEiAGIAEgCGwiCEECdGohEyAIQQJ0IAZqQXxqIRQDQCAHIBIgDiAOIBJLGzYCDCAHIAtBgAggC0GACEkbIgY2AggCQAJAAn8gAUECdCIPIAAoAkRqIggoAgBFBEBBACEJIAdBEGoMAQsgByAGNgKcICAHIAgoAgA2ApggIABBATYCOCAAKAIYIQwgACABIAAoAkggACgCHCABbEECdGoiCiAHQZggaiAHQRBqIAdBnCBqIAAoAlQRAAAhDSAAKAI8IA9qIgkoAgAiCCAHKAKYICIGSARAIAcgCDYCmCAgCCEGCyAHIA02ApwgIAkgCSgCACAGazYCACAHKAKYICEGIAxBAk4EQCAMQX9qIQhBACEJA0AgCiAJQQJ0aiAKIAYgCWpBAnRqKAIANgIAIAlBAWoiCSAIRw0ACwsgACgCRCAPaiIIIAgoAgAgBmsiBjYCACAGBEAgDEF/aiEMQQAhCSAHKAKYICENA0AgCiAJIAxqIhVBAnRqIAogDSAVakECdGooAgA2AgAgCUEBaiIJIAZHDQALCyAAKAJcIQYgByAHKAIIIAcoApwgIglrNgIIIAsgCWshCyAIKAIADQEgB0EQaiAGIAlsQQJ0agshDSAHKAIMIQgCQCACBEAgCEUNASAAKAIYIQpBACEGA0AgBiAKakECdCATakF8aiACIAYgEWxBAXRqLgEAsjgCACAGQQFqIgYgCEcNAAsMAQsgCEUNACAUIAAoAhhBAnRqIAhBAnQQBAsgAEEBNgI4IAAoAhghCiAAIAEgACgCSCAAKAIcIAFsQQJ0aiIMIAdBDGogDSAHQQhqIAAoAlQRAAAhDSAAKAI8IA9qIg8oAgAiBiAHKAIMIghIBEAgByAGNgIMIAYhCAsgByANNgIIIA8gDygCACAIazYCACAHKAIMIQggCkECSA0BIApBf2ohCkEAIQYDQCAMIAZBAnRqIAwgBiAIakECdGooAgA2AgAgBkEBaiIGIApHDQALDAELQQAhCCAHQQA2AgggB0EANgIMC0EAIQYgBygCCCIKIAlqIgkEQANAIAQgBiAQbEEBdGoCf0GAgAIgB0EQaiAGQQJ0aioCACIWQwD//8ZdDQAaQf//ASAWQwD9/0ZeDQAaIBa7RAAAAAAAAOA/oJwiF5lEAAAAAAAA4EFjBEAgF6oMAQtBgICAgHgLOwEAIAZBAWoiBiAJRw0ACwsgCyAKayELIA4gCGsiDkUNASACIAggEWxBAXRqQQAgAhshAiAEIAkgEGxBAXRqIQQgCw0ACwsgACAQNgJcIAMgAygCACAOazYCACAFIAUoAgAgC2s2AgAgACgCVBogB0GgIGokAAu/BQIPfwl9IAFBAnQiBiAAKAJAaiIOKAIAIQdBACEBAkAgACgCPCAGaiIPKAIAIgggAygCACIKTg0AIAAoAighCyAAKAIkIQwgACgCXCENIAUoAgAiA0EAIANBAEobIQUgACgCDCIGsyEbIAAoAhgiEEEBTgRAA0AgASAFRgRAIAUhAQwDCyAAKAIwIhEgB2wiAyADIAZuIgMgBmxrsyEYIAIgCEECdGohEkEEIANrIRMgACgCTCEUQQAhA0MAAAAAIRZDAAAAACEZQwAAAAAhGkMAAAAAIRcDQCAZIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJSSIRkgFiAVIAkqAgSUkiEWIBogFSAJQXxqKgIAlJIhGiAXIBUgCUF4aioCAJSSIRcgAyAQRw0ACyAEIAEgDWxBAnRqIBggG5UiFSAVIBVDiqsqPpQiGJSUIhwgGJMiGCAXlCAVIBUgFUMAAAA/lJQiF5IgFSAXlJMiHSAalJIgGUQAAAAAAADwPyAYu6EgHbuhIBcgFUM7qqq+lJIgHJMiFbuhtpSSIBUgFpSSOAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBuVIhUgFSAVQ4qrKj6UIhaUlCIZIBaTIhpDAAAAAJQgFSAVIBVDAAAAP5SUIhaSIBUgFpSTIhdDAAAAAJSSRAAAAAAAAPA/IBq7oSAXu6EgFiAVQzuqqr6UkiAZkyIVu6G2QwAAAACUkiAVQwAAAACUkjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQvpBQMPfwR9BHwgAUECdCIGIAAoAkBqIg4oAgAhB0EAIQECQCAAKAI8IAZqIg8oAgAiCCADKAIAIgpODQAgACgCKCELIAAoAiQhDCAAKAJcIQ0gBSgCACIDQQAgA0EAShshBSAAKAIMIgazIRggACgCGCIQQQFOBEADQCABIAVGBEAgBSEBDAMLIAAoAjAiESAHbCIDIAMgBm4iAyAGbGuzIRYgAiAIQQJ0aiESQQQgA2shEyAAKAJMIRRBACEDRAAAAAAAAAAAIRlEAAAAAAAAAAAhGkQAAAAAAAAAACEbRAAAAAAAAAAAIRwDQCAaIBIgA0ECdGoqAgAiFSAUIBMgA0EBaiIDIBFsakECdGoiCSoCAJS7oCEaIBkgFSAJKgIElLugIRkgGyAVIAlBfGoqAgCUu6AhGyAcIBUgCUF4aioCAJS7oCEcIAMgEEcNAAsgBCABIA1sQQJ0aiAcIBYgGJUiFSAVIBVDiqsqPpQiFpSUIhcgFpO7IhyiIBsgFSAVIBVDAAAAP5SUIhaSIBUgFpSTuyIboqAgGkQAAAAAAADwPyAcoSAboSAWIBVDO6qqvpSSIBeTuyIaoba7oqAgGSAaoqC2OAIAIAcgC2oiA0EAIAYgAyAGSRtrIQcgAUEBaiEBIAggDGogAyAGT2oiCCAKSA0ADAIACwALA0AgASAFRgRAIAUhAQwCCyAEIAEgDWxBAnRqIAAoAjAgB2wgBnCzIBiVIhUgFSAVQ4qrKj6UIhaUlCIXIBaTuyIZRAAAAAAAAAAAoiAVIBUgFUMAAAA/lJQiFpIgFSAWlJO7IhpEAAAAAAAAAACioEQAAAAAAADwPyAZoSAaoSAWIBVDO6qqvpSSIBeTuyIZoba7RAAAAAAAAAAAoqAgGUQAAAAAAAAAAKKgtjgCACAHIAtqIgJBACAGIAIgBkkbayEHIAFBAWohASAIIAxqIAIgBk9qIgggCkgNAAsLIA8gCDYCACAOIAc2AgAgAQv1AgINfwF9IAFBAnQiBiAAKAJAaiINKAIAIQdBACEBAkAgACgCPCAGaiIOKAIAIgYgAygCACIJTg0AIAAoAgwhCCAAKAIoIQogACgCJCELIAAoAlwhDCAFKAIAIgNBACADQQBKGyEDIAAoAhgiBUEBTgRAIAAoAkwhDwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEQIA8gBSAHbEECdGohEUMAAAAAIRNBACEAA0AgEyARIABBAnQiEmoqAgAgECASaioCAJSSIRMgAEEBaiIAIAVHDQALIAQgASAMbEECdGogEzgCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAMbEECdGpBADYCACAHIApqIgBBACAIIAAgCEkbayEHIAFBAWohASAGIAtqIAAgCE9qIgYgCUgNAAsLIA4gBjYCACANIAc2AgAgAQv5AwIOfwR8IAFBAnQiBiAAKAJAaiIRKAIAIQdBACEBAkAgACgCPCAGaiISKAIAIgYgAygCACIMTg0AIAAoAgwhCCAAKAIoIQ0gACgCJCEOIAAoAlwhDyAFKAIAIgNBACADQQBKGyEDIAAoAhgiEEEBTgRAIAAoAkwhEwNAIAEgA0YEQCADIQEMAwsgAiAGQQJ0aiEAIBMgByAQbEECdGohCkEAIQVEAAAAAAAAAAAhFEQAAAAAAAAAACEVRAAAAAAAAAAAIRZEAAAAAAAAAAAhFwNAIBcgCiAFQQJ0IglqKgIAIAAgCWoqAgCUu6AhFyAUIAogCUEMciILaioCACAAIAtqKgIAlLugIRQgFSAKIAlBCHIiC2oqAgAgACALaioCAJS7oCEVIBYgCiAJQQRyIglqKgIAIAAgCWoqAgCUu6AhFiAFQQRqIgUgEEgNAAsgBCABIA9sQQJ0aiAXIBagIBWgIBSgtjgCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsMAQsDQCABIANGBEAgAyEBDAILIAQgASAPbEECdGpBADYCACAHIA1qIgBBACAIIAAgCEkbayEHIAFBAWohASAGIA5qIAAgCE9qIgYgDEgNAAsLIBIgBjYCACARIAc2AgAgAQv+AwECfyACQYAETwRAIAAgASACEAAaDwsgACACaiEDAkAgACABc0EDcUUEQAJAIAJBAUgEQCAAIQIMAQsgAEEDcUUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA08NASACQQNxDQALCwJAIANBfHEiAEHAAEkNACACIABBQGoiBEsNAANAIAIgASgCADYCACACIAEoAgQ2AgQgAiABKAIINgIIIAIgASgCDDYCDCACIAEoAhA2AhAgAiABKAIUNgIUIAIgASgCGDYCGCACIAEoAhw2AhwgAiABKAIgNgIgIAIgASgCJDYCJCACIAEoAig2AiggAiABKAIsNgIsIAIgASgCMDYCMCACIAEoAjQ2AjQgAiABKAI4NgI4IAIgASgCPDYCPCABQUBrIQEgAkFAayICIARNDQALCyACIABPDQEDQCACIAEoAgA2AgAgAUEEaiEBIAJBBGoiAiAASQ0ACwwBCyADQQRJBEAgACECDAELIANBfGoiBCAASQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAiABLQABOgABIAIgAS0AAjoAAiACIAEtAAM6AAMgAUEEaiEBIAJBBGoiAiAETQ0ACwsgAiADSQRAA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0cNAAsLC7kCAQR/AkAgAUUNACACRQ0AAkAgACgCACADRw0AIAAoAgQgBEcNACAAKAIIIAFHDQAgACgCDCACRg0BCyAAIAE2AgggACAENgIEIAAgAzYCACAAKAIMIQUgACACNgIMIAEhBCACIQMDQCAEIAMiBHAiAw0ACyAAIAIgBG4iAzYCDCAAIAEgBG42AggCQCAFRQ0AIAAoAhRFDQAgACgCQCEGQQAhBANAIAYgBEECdGoiASgCACICIAIgBW4iAiAFbGsiB0F/IANuIghLDQIgAiAISw0CIAIgA2wiAiADIAdsIAVuIgNBf3NLDQIgASACIANqIgI2AgAgAiAAKAIMIgJPBEAgASACQX9qNgIACyAEQQFqIgQgACgCFE8NASAAKAIMIQMMAAALAAsgACgCNEUEQA8LIAAQChoLC6sHAQl/IAAoAgQiB0EDcSECIAAgB0F4cSIGaiEEAkBBhC0oAgAiBSAASw0AIAJBAUYNAAsCQCACRQRAQQAhAiABQYACSQ0BIAYgAUEEak8EQCAAIQIgBiABa0HUMCgCAEEBdE0NAgtBAA8LAkAgBiABTwRAIAYgAWsiAkEQSQ0BIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEDcjYCBCAEIAQoAgRBAXI2AgQgASACEAsMAQtBACECIARBjC0oAgBGBEBBgC0oAgAgBmoiBSABTQ0CIAAgB0EBcSABckECcjYCBCAAIAFqIgIgBSABayIBQQFyNgIEQYAtIAE2AgBBjC0gAjYCAAwBCyAEQYgtKAIARgRAQfwsKAIAIAZqIgUgAUkNAgJAIAUgAWsiAkEQTwRAIAAgB0EBcSABckECcjYCBCAAIAFqIgEgAkEBcjYCBCAAIAVqIgUgAjYCACAFIAUoAgRBfnE2AgQMAQsgACAHQQFxIAVyQQJyNgIEIAAgBWoiASABKAIEQQFyNgIEQQAhAkEAIQELQYgtIAE2AgBB/CwgAjYCAAwBCyAEKAIEIgNBAnENASADQXhxIAZqIgkgAUkNASAJIAFrIQoCQCADQf8BTQRAIAQoAggiBiADQQN2IgVBA3RBnC1qRxogBiAEKAIMIghGBEBB9CxB9CwoAgBBfiAFd3E2AgAMAgsgBiAINgIMIAggBjYCCAwBCyAEKAIYIQgCQCAEIAQoAgwiA0cEQCAFIAQoAggiAk0EQCACKAIMGgsgAiADNgIMIAMgAjYCCAwBCwJAIARBFGoiAigCACIGDQAgBEEQaiICKAIAIgYNAEEAIQMMAQsDQCACIQUgBiIDQRRqIgIoAgAiBg0AIANBEGohAiADKAIQIgYNAAsgBUEANgIACyAIRQ0AAkAgBCAEKAIcIgVBAnRBpC9qIgIoAgBGBEAgAiADNgIAIAMNAUH4LEH4LCgCAEF+IAV3cTYCAAwCCyAIQRBBFCAIKAIQIARGG2ogAzYCACADRQ0BCyADIAg2AhggBCgCECICBEAgAyACNgIQIAIgAzYCGAsgBCgCFCICRQ0AIAMgAjYCFCACIAM2AhgLIApBD00EQCAAIAdBAXEgCXJBAnI2AgQgACAJaiIBIAEoAgRBAXI2AgQMAQsgACAHQQFxIAFyQQJyNgIEIAAgAWoiAiAKQQNyNgIEIAAgCWoiASABKAIEQQFyNgIEIAIgChALCyAAIQILIAILxQEBAn8jAEEQayIBJAACQCAAvUIgiKdB/////wdxIgJB+8Ok/wNNBEAgAkGAgMDyA0kNASAARAAAAAAAAAAAQQAQCCEADAELIAJBgIDA/wdPBEAgACAAoSEADAELAkACQAJAAkAgACABEBhBA3EOAwABAgMLIAErAwAgASsDCEEBEAghAAwDCyABKwMAIAErAwgQDSEADAILIAErAwAgASsDCEEBEAiaIQAMAQsgASsDACABKwMIEA2aIQALIAFBEGokACAAC9cCAQJ/AkACQAJAIABFDQAgAUUNACACRQ0AIAVBC0kNAQsgBkUNASAGQQM2AgBBAA8LQeAAEAYiB0UEQEEAIQcgBkUNASAGQQE2AgBBAA8LIAdCADcCACAHQYCAgPwDNgIsIAdBfzYCECAHQoGAgIAQNwJYIAcgADYCFCAHQaABNgIgIAdCADcCCCAHIABBAnQiABAGIgg2AjwCQCAIRQ0AIAcgABAGIgg2AkQgCEUNACAHIAAQBiIANgJAIABFDQAgByAFNgIQIAcgASACIAMgBBAUAkAgBxAKIgBFBEAgB0EBNgI0DAELIAcoAkgQAiAHKAJMEAIgBygCPBACIAcoAkQQAiAHKAJAEAIgBxACQQAhBwsgBkUNASAGIAA2AgAgBw8LIAYEQCAGQQE2AgALIAcoAkwQAiAHKAI8EAIgBygCRBACIAcoAkAQAiAHEAJBACEHCyAHC8sJAwV/AX4EfCMAQTBrIgQkAAJAAkACQCAAvSIHQiCIpyICQf////8HcSIDQfrUvYAETQRAIAJB//8/cUH7wyRGDQEgA0H8souABE0EQCAHQgBZBEAgASAARAAAQFT7Ifm/oCIARDFjYhphtNC9oCIIOQMAIAEgACAIoUQxY2IaYbTQvaA5AwhBASECDAULIAEgAEQAAEBU+yH5P6AiAEQxY2IaYbTQPaAiCDkDACABIAAgCKFEMWNiGmG00D2gOQMIQX8hAgwECyAHQgBZBEAgASAARAAAQFT7IQnAoCIARDFjYhphtOC9oCIIOQMAIAEgACAIoUQxY2IaYbTgvaA5AwhBAiECDAQLIAEgAEQAAEBU+yEJQKAiAEQxY2IaYbTgPaAiCDkDACABIAAgCKFEMWNiGmG04D2gOQMIQX4hAgwDCyADQbuM8YAETQRAIANBvPvXgARNBEAgA0H8ssuABEYNAiAHQgBZBEAgASAARAAAMH982RLAoCIARMqUk6eRDum9oCIIOQMAIAEgACAIoUTKlJOnkQ7pvaA5AwhBAyECDAULIAEgAEQAADB/fNkSQKAiAETKlJOnkQ7pPaAiCDkDACABIAAgCKFEypSTp5EO6T2gOQMIQX0hAgwECyADQfvD5IAERg0BIAdCAFkEQCABIABEAABAVPshGcCgIgBEMWNiGmG08L2gIgg5AwAgASAAIAihRDFjYhphtPC9oDkDCEEEIQIMBAsgASAARAAAQFT7IRlAoCIARDFjYhphtPA9oCIIOQMAIAEgACAIoUQxY2IaYbTwPaA5AwhBfCECDAMLIANB+sPkiQRLDQELIAEgACAARIPIyW0wX+Q/okQAAAAAAAA4Q6BEAAAAAAAAOMOgIglEAABAVPsh+b+ioCIIIAlEMWNiGmG00D2iIguhIgA5AwAgA0EUdiIFIAC9QjSIp0H/D3FrQRFIIQMCfyAJmUQAAAAAAADgQWMEQCAJqgwBC0GAgICAeAshAgJAIAMNACABIAggCUQAAGAaYbTQPaIiAKEiCiAJRHNwAy6KGaM7oiAIIAqhIAChoSILoSIAOQMAIAUgAL1CNIinQf8PcWtBMkgEQCAKIQgMAQsgASAKIAlEAAAALooZozuiIgChIgggCUTBSSAlmoN7OaIgCiAIoSAAoaEiC6EiADkDAAsgASAIIAChIAuhOQMIDAELIANBgIDA/wdPBEAgASAAIAChIgA5AwAgASAAOQMIQQAhAgwBCyAHQv////////8Hg0KAgICAgICAsMEAhL8hAEEAIQJBASEFA0AgBEEQaiACQQN0agJ/IACZRAAAAAAAAOBBYwRAIACqDAELQYCAgIB4C7ciCDkDACAAIAihRAAAAAAAAHBBoiEAQQEhAiAFQQFxIQZBACEFIAYNAAsgBCAAOQMgAkAgAEQAAAAAAAAAAGIEQEECIQIMAQtBASEFA0AgBSICQX9qIQUgBEEQaiACQQN0aisDAEQAAAAAAAAAAGENAAsLIARBEGogBCADQRR2Qep3aiACQQFqEBkhAiAEKwMAIQAgB0J/VwRAIAEgAJo5AwAgASAEKwMImjkDCEEAIAJrIQIMAQsgASAAOQMAIAEgBCkDCDcDCAsgBEEwaiQAIAILtA4CEH8CfCMAQbAEayIGJAAgAiACQX1qQRhtIgRBACAEQQBKGyINQWhsaiEIQdQWKAIAIgkgA0F/aiIHakEATgRAIAMgCWohBCANIAdrIQIDQCAGQcACaiAFQQN0aiACQQBIBHxEAAAAAAAAAAAFIAJBAnRB4BZqKAIAtws5AwAgAkEBaiECIAVBAWoiBSAERw0ACwsgCEFoaiEKQQAhBCAJQQAgCUEAShshBSADQQFIIQsDQAJAIAsEQEQAAAAAAAAAACEUDAELIAQgB2ohDEEAIQJEAAAAAAAAAAAhFANAIBQgACACQQN0aisDACAGQcACaiAMIAJrQQN0aisDAKKgIRQgAkEBaiICIANHDQALCyAGIARBA3RqIBQ5AwAgBCAFRiECIARBAWohBCACRQ0AC0EvIAhrIRBBMCAIayEOIAhBZ2ohESAJIQQCQANAIAYgBEEDdGorAwAhFEEAIQIgBCEFIARBAUgiB0UEQANAIAZB4ANqIAJBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4C7ciFEQAAAAAAABwwaKgIhWZRAAAAAAAAOBBYwRAIBWqDAELQYCAgIB4CzYCACAGIAVBf2oiBUEDdGorAwAgFKAhFCACQQFqIgIgBEcNAAsLAn8gFCAKEAUiFCAURAAAAAAAAMA/opxEAAAAAAAAIMCioCIUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshCyAUIAu3oSEUAkACQAJAAn8gCkEBSCISRQRAIARBAnQgBmoiAiACKALcAyICIAIgDnUiAiAOdGsiBTYC3AMgAiALaiELIAUgEHUMAQsgCg0BIARBAnQgBmooAtwDQRd1CyIMQQFIDQIMAQtBAiEMIBREAAAAAAAA4D9mQQFzRQ0AQQAhDAwBC0EAIQJBACEFIAdFBEADQCAGQeADaiACQQJ0aiITKAIAIQ9B////ByEHAn8CQCAFDQBBgICACCEHIA8NAEEADAELIBMgByAPazYCAEEBCyEFIAJBAWoiAiAERw0ACwsCQCASDQACQAJAIBEOAgABAgsgBEECdCAGaiICIAIoAtwDQf///wNxNgLcAwwBCyAEQQJ0IAZqIgIgAigC3ANB////AXE2AtwDCyALQQFqIQsgDEECRw0ARAAAAAAAAPA/IBShIRRBAiEMIAVFDQAgFEQAAAAAAADwPyAKEAWhIRQLIBREAAAAAAAAAABhBEBBACEFAkAgBCICIAlMDQADQCAGQeADaiACQX9qIgJBAnRqKAIAIAVyIQUgAiAJSg0ACyAFRQ0AIAohCANAIAhBaGohCCAGQeADaiAEQX9qIgRBAnRqKAIARQ0ACwwDC0EBIQIDQCACIgVBAWohAiAGQeADaiAJIAVrQQJ0aigCAEUNAAsgBCAFaiEFA0AgBkHAAmogAyAEaiIHQQN0aiAEQQFqIgQgDWpBAnRB4BZqKAIAtzkDAEEAIQJEAAAAAAAAAAAhFCADQQFOBEADQCAUIAAgAkEDdGorAwAgBkHAAmogByACa0EDdGorAwCioCEUIAJBAWoiAiADRw0ACwsgBiAEQQN0aiAUOQMAIAQgBUgNAAsgBSEEDAELCwJAIBRBACAKaxAFIhREAAAAAAAAcEFmQQFzRQRAIAZB4ANqIARBAnRqAn8gFAJ/IBREAAAAAAAAcD6iIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CyICt0QAAAAAAABwwaKgIhSZRAAAAAAAAOBBYwRAIBSqDAELQYCAgIB4CzYCACAEQQFqIQQMAQsCfyAUmUQAAAAAAADgQWMEQCAUqgwBC0GAgICAeAshAiAKIQgLIAZB4ANqIARBAnRqIAI2AgALRAAAAAAAAPA/IAgQBSEUAkAgBEF/TA0AIAQhAgNAIAYgAkEDdGogFCAGQeADaiACQQJ0aigCALeiOQMAIBREAAAAAAAAcD6iIRQgAkEASiEAIAJBf2ohAiAADQALQQAhByAEQQBIDQAgCUEAIAlBAEobIQAgBCEFA0AgACAHIAAgB0kbIQMgBCAFayEIQQAhAkQAAAAAAAAAACEUA0AgFCACQQN0QbAsaisDACAGIAIgBWpBA3RqKwMAoqAhFCACIANHIQogAkEBaiECIAoNAAsgBkGgAWogCEEDdGogFDkDACAFQX9qIQUgBCAHRyECIAdBAWohByACDQALC0QAAAAAAAAAACEUIARBAE4EQCAEIQIDQCAUIAZBoAFqIAJBA3RqKwMAoCEUIAJBAEohACACQX9qIQIgAA0ACwsgASAUmiAUIAwbOQMAIAYrA6ABIBShIRRBASECIARBAU4EQANAIBQgBkGgAWogAkEDdGorAwCgIRQgAiAERyEAIAJBAWohAiAADQALCyABIBSaIBQgDBs5AwggBkGwBGokACALQQdxCxoAIABBBE0EQCAAQQJ0QbAWaigCAA8LQewICxYAIAEgACgCADYCACACIAAoAgQ2AgALzAEBBn8gACgCXCEIIAIoAgAhBiAEKAIAIQcgACAAKAIUIgU2AlwgACgCWCEJIAAgBTYCWAJAIAVFDQBBACEFIAFFBEADQCAEIAc2AgAgAiAGNgIAIAAgBUEAIAIgAyAFQQF0aiAEEA4gBUEBaiIFIAAoAhRJDQAMAgALAAsDQCAEIAc2AgAgAiAGNgIAIAAgBSABIAVBAXQiCmogAiADIApqIAQQDiAFQQFqIgUgACgCFEkNAAsLIAAgCDYCXCAAIAk2AlggACgCVEEFRgspACAAKAJIEAIgACgCTBACIAAoAjwQAiAAKAJEEAIgACgCQBACIAAQAgvDAQEHfyABQQJ0IgYgACgCQGoiBygCACECQQAhAQJAIAAoAjwgBmoiCCgCACIGIAMoAgAiCU4NACAAKAIMIQMgACgCKCEKIAAoAiQhCyAAKAJcIQwgBSgCACIAQQAgAEEAShshAANAIAAgAUYEQCAAIQEMAgsgBCABIAxsQQJ0akEANgIAIAIgCmoiBUEAIAMgBSADSRtrIQIgAUEBaiEBIAYgC2ogBSADT2oiBiAJSA0ACwsgCCAGNgIAIAcgAjYCACABCxIAIAAgASACIAEgAiADIAQQFwsDAAELC9wkBgBBgAgLpgFTdWNjZXNzLgBNZW1vcnkgYWxsb2NhdGlvbiBmYWlsZWQuAEJhZCByZXNhbXBsZXIgc3RhdGUuAEludmFsaWQgYXJndW1lbnQuAElucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBvdmVybGFwLgBVbmtub3duIGVycm9yLiBCYWQgZXJyb3IgY29kZSBvciBzdHJhbmdlIHZlcnNpb24gbWlzbWF0Y2guAEGwCQvQCAgAAAAEAAAA4XpUP/YoXD+MBQAAEAAAAAQAAACamVk/rkdhP4wFAAAgAAAABAAAAMHKYT/D9Wg/jAUAADAAAAAIAAAAuB5lP4PAaj+UBQAAQAAAAAgAAACoxms/16NwP5QFAABQAAAAEAAAADEIbD/Xo3A/nAUAAGAAAAAQAAAA16NwP4XrcT+cBQAAgAAAABAAAAAzM3M/MzNzP5wFAACgAAAAEAAAAI/CdT+PwnU/nAUAAMAAAAAgAAAA2c53P9nOdz+kBQAAAAEAACAAAACamXk/mpl5P6QFAACwBQAAIAAAANAGAAAgAAAA8AcAACAAAAAQCQAAQAAAAAAAAAAlkeC6IOrvPwAAAAAAAPA/JZHguiDq7z/eSyvPzajvP1of/5rmPO8/Vc8Xtdqn7j++oGT2ouvtP9eQbjq4Cu0/i+jPZQcI7D+13m+04+bqP1gAdBT3quk/InJVNDFY6D9Qxa5ptfLmP1jktgHIfuU/lEUnbLsA5D9HK0pL3XziP6mj42pk9+A/qqmXpb7o3j8WxHqCSO/bP0tmzI+FCdk/P+nhV+491j/Cam59P5LTP6C+p2ppC9E/K3JfOQhbzT8nmWIvkPfIP6EHyq8X8cQ/ymKsgIxKwT8ixb5sVAq8P2GFAIUfQbY/j95wH7k1sT9DhMmeTsOpPyF7e98ReKI/80co6LznmD9Z7Q7n6XWOPyECDqFKzX4/AAAAAAAAAADBU0zOHuLvPwAAAAAAAPA/wVNMzh7i7z/PQsiaDYnvPwxt55h/9u4/iBIteTwt7j+aTfS3DDHtP7WwwLqeBuw/zJkOGWaz6j/ceSzHdT3pP1GrIrtWq+c/lTbJTdwD5j91q+ek903kP3cAm96LkOI/E4HqH0TS4D/GAMPR2TLeP1M+BFWj19o/2QhhwT+d1z+oagbhn4zUP24kfRgprdE/Wu959kMJzj8bAGArVy7JP1GWaxuQzsQ/i+xardnrwD/p1ilefgq7P98X+tRvLrU/Bg2BTAA4sD/KvUTl9C+oP6YV+O2YeKE/S/VT0nlDmD+Uz5/0jQGQPwBuNz3/qIM/3mkZRs2ZdT/ghYzL4ShjP/yp8dJNYkA/AAAAAAAAAAC5pqOQItrvPwAAAAAAAPA/uaajkCLa7z+FCxbae2nvP0RGzXjXsO4/JlPDhsC07T8z2i5dVnvsP6nOFzkTDOs/qepxIYdv6T9y5pEeCq/nP9bRacRp1OU/wKekFJXp4z85oADlSvjhP+qDG9/NCeA/VWrVMkJN3D9DXd77n6zYPw9a9sGFPtU/HwXbykMN0j+gZzcjGEHOP4yLevPh+sg/8K5IhvtMxD904ycfzDfAP+5his0ib7k/O05VygCKsz/oYS7K6FetPyQzzSoieaU/u2lt+cyCnj8iLHRvj++UPz4R3RbZjIs/XcJfm6YygT9QCLLYBQd0P4HIKr4EG2U/3O6rk6/bUj8bypqibUY3PwBBkBILmATIUQzShPTvPwAAAAAAAPA/yFEM0oT07z/2lQfpKdLvP9rTxPEyme8/1P0Q2Q9K7z9+n7tuW+XuP2HBP53Za+4/HdfxJXXe7T9qf2/sPD7tP8nqNcFgjOw/dyRFAS7K6z8evH7aC/nqPzrQvzR3Guo/9SUjgP4v6T/yQEODPTvoPw4HU97YPec/9/Kvo3k55j9MyMUgyS/lP864eJFsIuQ//5laGQET4z8vnDHtFwPiP2PZBs0y9OA/TVqGcoHP3z/Nj2T7Nb7dPxXGN5AFt9s/4AetqD282T9gMwqT88/XP/Md/MQB9NU/SoVn+AUq1D/nzTwUYHPSP43KNDcy0dA/2NF68MGIzj+vJ3gSKpvLP8hIk9552sg/tc9bIx9Hxj89V0IUH+HDP7XNAUAdqME/TbqQu8Y2vz8uDCY41HO7P2aSBQrEBLg/gFQWx3nmtD9iSE4mbhWyP6QVhJeFG68/7LLrIKeWqj+XqEFFk5OmPz54L+9YCaM/1eesR8jdnz9sz00XOXaaP/Tx2Oj/yZU/Dwu1pnnHkT9VF2z6HruMP/6ksSiy94Y/PLeW6n4lgj+l+7XMVE58P2cfVHefwnU/BcR/FTt1cD90f7OcnW9oP9Pw8wCSwGE/91Lb+qcjWT8/wazteUBRP/FCAJH6wkY/e7LNUz6APD8mUZIi8I8wP8dUbmB6FCE/fYl/NyCrCz/xaOOItfjkPgBBsRYLEQQAAAkEAAAjBAAAOAQAAEoEAEHQFgvXFQMAAAAEAAAABAAAAAYAAACD+aIARE5uAPwpFQDRVycA3TT1AGLbwAA8mZUAQZBDAGNR/gC73qsAt2HFADpuJADSTUIASQbgAAnqLgAcktEA6x3+ACmxHADoPqcA9TWCAES7LgCc6YQAtCZwAEF+XwDWkTkAU4M5AJz0OQCLX4QAKPm9APgfOwDe/5cAD5gFABEv7wAKWosAbR9tAM9+NgAJyycARk+3AJ5mPwAt6l8Auid1AOXrxwA9e/EA9zkHAJJSigD7a+oAH7FfAAhdjQAwA1YAe/xGAPCrawAgvM8ANvSaAOOpHQBeYZEACBvmAIWZZQCgFF8AjUBoAIDY/wAnc00ABgYxAMpWFQDJqHMAe+JgAGuMwAAZxEcAzWfDAAno3ABZgyoAi3bEAKYclgBEr90AGVfRAKU+BQAFB/8AM34/AMIy6ACYT94Au30yACY9wwAea+8An/heADUfOgB/8soA8YcdAHyQIQBqJHwA1W76ADAtdwAVO0MAtRTGAMMZnQCtxMIALE1BAAwAXQCGfUYA43EtAJvGmgAzYgAAtNJ8ALSnlwA3VdUA1z72AKMQGABNdvwAZJ0qAHDXqwBjfPgAerBXABcV5wDASVYAO9bZAKeEOAAkI8sA1op3AFpUIwAAH7kA8QobABnO3wCfMf8AZh5qAJlXYQCs+0cAfn/YACJltwAy6IkA5r9gAO/EzQBsNgkAXT/UABbe1wBYO94A3puSANIiKAAohugA4lhNAMbKMgAI4xYA4H3LABfAUADzHacAGOBbAC4TNACDEmIAg0gBAPWOWwCtsH8AHunyAEhKQwAQZ9MAqt3YAK5fQgBqYc4ACiikANOZtAAGpvIAXHd/AKPCgwBhPIgAinN4AK+MWgBv170ALaZjAPS/ywCNge8AJsFnAFXKRQDK2TYAKKjSAMJhjQASyXcABCYUABJGmwDEWcQAyMVEAE2ykQAAF/MA1EOtAClJ5QD91RAAAL78AB6UzABwzu4AEz71AOzxgACz58MAx/goAJMFlADBcT4ALgmzAAtF8wCIEpwAqyB7AC61nwBHksIAezIvAAxVbQByp5AAa+cfADHLlgB5FkoAQXniAPTfiQDolJcA4uaEAJkxlwCI7WsAX182ALv9DgBImrQAZ6RsAHFyQgCNXTIAnxW4ALzlCQCNMSUA93Q5ADAFHAANDAEASwhoACzuWABHqpAAdOcCAL3WJAD3faYAbkhyAJ8W7wCOlKYAtJH2ANFTUQDPCvIAIJgzAPVLfgCyY2gA3T5fAEBdAwCFiX8AVVIpADdkwABt2BAAMkgyAFtMdQBOcdQARVRuAAsJwQAq9WkAFGbVACcHnQBdBFAAtDvbAOp2xQCH+RcASWt9AB0nugCWaSkAxsysAK0UVACQ4moAiNmJACxyUAAEpL4AdweUAPMwcAAA/CcA6nGoAGbCSQBk4D0Al92DAKM/lwBDlP0ADYaMADFB3gCSOZ0A3XCMABe35wAI3zsAFTcrAFyAoABagJMAEBGSAA/o2ABsgK8A2/9LADiQDwBZGHYAYqUVAGHLuwDHibkAEEC9ANLyBABJdScA67b2ANsiuwAKFKoAiSYvAGSDdgAJOzMADpQaAFE6qgAdo8IAr+2uAFwmEgBtwk0ALXqcAMBWlwADP4MACfD2ACtAjABtMZkAObQHAAwgFQDYw1sA9ZLEAMatSwBOyqUApzfNAOapNgCrkpQA3UJoABlj3gB2jO8AaItSAPzbNwCuoasA3xUxAACuoQAM+9oAZE1mAO0FtwApZTAAV1a/AEf/OgBq+bkAdb7zACiT3wCrgDAAZoz2AATLFQD6IgYA2eQdAD2zpABXG48ANs0JAE5C6QATvqQAMyO1APCqGgBPZagA0sGlAAs/DwBbeM0AI/l2AHuLBACJF3IAxqZTAG9u4gDv6wAAm0pYAMTatwCqZroAds/PANECHQCx8S0AjJnBAMOtdwCGSNoA912gAMaA9ACs8C8A3eyaAD9cvADQ3m0AkMcfACrbtgCjJToAAK+aAK1TkwC2VwQAKS20AEuAfgDaB6cAdqoOAHtZoQAWEioA3LctAPrl/QCJ2/4Aib79AOR2bAAGqfwAPoBwAIVuFQD9h/8AKD4HAGFnMwAqGIYATb3qALPnrwCPbW4AlWc5ADG/WwCE10gAMN8WAMctQwAlYTUAyXDOADDLuAC/bP0ApACiAAVs5ABa3aAAIW9HAGIS0gC5XIQAcGFJAGtW4ACZUgEAUFU3AB7VtwAz8cQAE25fAF0w5ACFLqkAHbLDAKEyNgAIt6QA6rHUABb3IQCPaeQAJ/93AAwDgACNQC0AT82gACClmQCzotMAL10KALT5QgAR2ssAfb7QAJvbwQCrF70AyqKBAAhqXAAuVRcAJwBVAH8U8ADhB4YAFAtkAJZBjQCHvt4A2v0qAGsltgB7iTQABfP+ALm/ngBoak8ASiqoAE/EWgAt+LwA11qYAPTHlQANTY0AIDqmAKRXXwAUP7EAgDiVAMwgAQBx3YYAyd62AL9g9QBNZREAAQdrAIywrACywNAAUVVIAB77DgCVcsMAowY7AMBANQAG3HsA4EXMAE4p+gDWysgA6PNBAHxk3gCbZNgA2b4xAKSXwwB3WNQAaePFAPDaEwC6OjwARhhGAFV1XwDSvfUAbpLGAKwuXQAORO0AHD5CAGHEhwAp/ekA59bzACJ8ygBvkTUACODFAP/XjQBuauIAsP3GAJMIwQB8XXQAa62yAM1unQA+cnsAxhFqAPfPqQApc98Atcm6ALcAUQDisg0AdLokAOV9YAB02IoADRUsAIEYDAB+ZpQAASkWAJ96dgD9/b4AVkXvANl+NgDs2RMAi7q5AMSX/AAxqCcA8W7DAJTFNgDYqFYAtKi1AM/MDgASiS0Ab1c0ACxWiQCZzuMA1iC5AGteqgA+KpwAEV/MAP0LSgDh9PsAjjttAOKGLADp1IQA/LSpAO/u0QAuNckALzlhADghRAAb2cgAgfwKAPtKagAvHNgAU7SEAE6ZjABUIswAKlXcAMDG1gALGZYAGnC4AGmVZAAmWmAAP1LuAH8RDwD0tREA/Mv1ADS8LQA0vO4A6F3MAN1eYABnjpsAkjPvAMkXuABhWJsA4Ve8AFGDxgDYPhAA3XFIAC0c3QCvGKEAISxGAFnz1wDZepgAnlTAAE+G+gBWBvwA5XmuAIkiNgA4rSIAZ5PcAFXoqgCCJjgAyuebAFENpACZM7EAqdcOAGkFSABlsvAAf4inAIhMlwD50TYAIZKzAHuCSgCYzyEAQJ/cANxHVQDhdDoAZ+tCAP6d3wBe1F8Ae2ekALqsegBV9qIAK4gjAEG6VQBZbggAISqGADlHgwCJ4+YA5Z7UAEn7QAD/VukAHA/KAMVZigCU+isA08HFAA/FzwDbWq4AR8WGAIVDYgAhhjsALHmUABBhhwAqTHsAgCwaAEO/EgCIJpAAeDyJAKjE5ADl23sAxDrCACb06gD3Z4oADZK/AGWjKwA9k7EAvXwLAKRR3AAn3WMAaeHdAJqUGQCoKZUAaM4oAAnttABEnyAATpjKAHCCYwB+fCMAD7kyAKf1jgAUVucAIfEIALWdKgBvfk0ApRlRALX5qwCC39YAlt1hABY2AgDEOp8Ag6KhAHLtbQA5jXoAgripAGsyXABGJ1sAADTtANIAdwD89FUAAVlNAOBxgABBsywLPUD7Ifk/AAAAAC1EdD4AAACAmEb4PAAAAGBRzHg7AAAAgIMb8DkAAABAICV6OAAAAIAiguM2AAAAAB3zaTU=");return WebAssembly.instantiate(c,b).then(a,function(a){L("failed to asynchronously prepare wasm: "+a),p(a)})}(function(b){a(b.instance)}),{}}(),ta=A.___wasm_call_ctors=function(){return(ta=A.___wasm_call_ctors=A.asm.c).apply(null,arguments)},ua=A._speex_resampler_init=function(){return(ua=A._speex_resampler_init=A.asm.d).apply(null,arguments)},va=A._free=function(){return(va=A._free=A.asm.e).apply(null,arguments)},wa=A._speex_resampler_destroy=function(){return(wa=A._speex_resampler_destroy=A.asm.f).apply(null,arguments)},xa=A._speex_resampler_process_interleaved_int=function(){return(xa=A._speex_resampler_process_interleaved_int=A.asm.g).apply(null,arguments)},ya=A._speex_resampler_get_rate=function(){return(ya=A._speex_resampler_get_rate=A.asm.h).apply(null,arguments)},za=A._speex_resampler_strerror=function(){return(za=A._speex_resampler_strerror=A.asm.i).apply(null,arguments)},Aa=A._malloc=function(){return(Aa=A._malloc=A.asm.j).apply(null,arguments)};A.setValue=b,A.getValue=c,A.AsciiToString=d;var Ba;if(ma=function a(){Ba||x(),Ba||(ma=a)},A.run=x,A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return N=!0,x(),a.ready}}();\r
	}\r
	get SpeexResampler() {\r
		return function(cc, is, os, q){return new SpeexResampler(cc, is, os, q);}\r
	}\r
	\r
	get emitterRms() {\r
		if (this.calculateRmsVolume){\r
			let rms = Math.sqrt(this._emitterSqrSum / this._emitterSamples);\r
			this._emitterSqrSum = 0;\r
			this._emitterSamples = 0;\r
			return rms;\r
		}else{\r
			return 0;\r
		}\r
	}\r
  \r
	constructor(options) {\r
		super();\r
		\r
		let that = this;\r
		this.moduleId = "speex-resample-switch-" + Math.round(Math.random() * 1000000) + "-" + Date.now();\r
		this.doDebug = options.processorOptions.doDebug || false;\r
		this.isReadyForProcessing = false;\r
		this.EXPECTED_SAMPLE_SIZE = 128;	//currently 128, but might change in future ... and even become variable! (I hope not)\r
\r
		this.sourceSamplerate = options.processorOptions.ctxInfo.sampleRate;	//INFO: should be same as global scope 'sampleRate'\r
\r
		this.targetSampleRate = options.processorOptions.targetSampleRate || options.processorOptions.ctxInfo.targetSampleRate || 16000;\r
		this.resampleQuality = (options.processorOptions.resampleQuality != undefined)? options.processorOptions.resampleQuality : 7;	//number from 1 to 10, 1 is fast but of bad quality, 10 is slow but best quality (less noise/aliasing, a higher complexity and a higher latency)\r
		this.emitterBufferSize = options.processorOptions.bufferSize || 512;	//TODO: there is probably a mismatch (we should pull go back to the idea of making the buffer bigger but pull less)\r
		this.channelCount = 1; //options.processorOptions.channels || 1;		//TODO: supports ONLY MONO atm\r
		this._bytesPerSample = 2;			//for buffer (aka Xint8 Array) length is in bytes (8bit), so *2 to get 16bit length;\r
		this.resampler;\r
		\r
		this.passThroughMode = (options.processorOptions.passThroughMode != undefined)? options.processorOptions.passThroughMode : 1;	//0: nothing, 1: original, 2: 16bit PCM\r
		this.calculateRmsVolume = (options.processorOptions.calculateRmsVolume != undefined)? options.processorOptions.calculateRmsVolume : true;\r
		this.gain = options.processorOptions.gain || 1.0;\r
				\r
		//resampling - modes 0: no change, -1: downsampling, 1: upsampling\r
		this.resamplingMode = (this.targetSampleRate < this.sourceSamplerate? -1 : (this.targetSampleRate > this.sourceSamplerate? 1 : 0));\r
		this.resampleRatio = this.targetSampleRate/this.sourceSamplerate;\r
		\r
		function init(){\r
			var expectedSizeAfterResampling = Math.ceil(that.EXPECTED_SAMPLE_SIZE * that.resampleRatio);\r
			if (expectedSizeAfterResampling > that.emitterBufferSize){\r
				//TODO: if we don't use a string this shows up as "Uncaught [object ...]" in worker.onerror ?! :-/\r
				throw {name: "BufferSizeException", message: ("Output buffer has to be bigger than (resampleRatio*inputSampleSize)! Currently: " + expectedSizeAfterResampling + " > " + that.emitterBufferSize)};\r
			}\r
			var ringBufferSize = expectedSizeAfterResampling + that.emitterBufferSize;			//this should be a safe size\r
			\r
			//RingBuffers - alloc. space for emitter\r
			//that._inputRingBuffer = new RingBuffer(that.collectorBufferSize + that.EXPECTED_SAMPLE_SIZE, that.channelCount);\r
			that._outputRingBuffer = new RingBuffer(ringBufferSize, that.channelCount, "Int16");\r
\r
			//Input and output (for each channel) - TODO: set size, one for each channel\r
			//that._newInputBuffer = [new Float32Array(that.collectorBufferSize)];\r
			that._newInputBuffer = [new Int16Array(that.EXPECTED_SAMPLE_SIZE)];		\r
			//TODO: for interleaved STEREO we need [new Uint8Array(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample)];\r
				//... or do we?\r
				//NOTE: we could use DataView instead\r
				//let buffer = new ArrayBuffer(that.EXPECTED_SAMPLE_SIZE * that.channelCount * that._bytesPerSample);\r
				//let that._inputDataView = new DataView(buffer);\r
			that._newOutputBuffer = [new Int16Array(that.emitterBufferSize)];\r
			\r
			that._isFirstValidProcess = true;\r
			//that._lastEmit = 0;\r
			\r
			that._emitterSqrSum = 0;\r
			that._emitterSamples = 0;\r
			that._hasGain = (that.gain < 1 || that.gain > 1);\r
		}\r
		init();\r
		\r
		this.floatTo16BitInterleavedPCM = function(inFloat32, outInt16, i){\r
			//TODO: if not MONO interleave channels - requires: UInt8Array !!! (or does it?)\r
			/*\r
			for (let channel = 0; channel < that.channelCount; channel++){\r
				//pass through original\r
				output[channel][i] = inFloat32[channel][i];\r
				//clip and floatTo16BitPCM\r
				let sampleVal = Math.max(-1, Math.min(1, inFloat32[channel][i])) * 32767.5 - 0.5;\r
				//assign\r
				let outputIndex = (i * that.channelCount + channel) * that._bytesPerSample;\r
				that._newInputBuffer[channel][outputIndex] = sampleVal;\r
				that._newInputBuffer[channel][outputIndex + 1] = sampleVal >> 8;\r
			}\r
			*/\r
				\r
			let sampleVal = Math.max(-1, Math.min(1, inFloat32[0][i]));		//we need -1 to 1 - If this is the first processor we could skip clipping\r
			//that._inputDataView.setInt16(i * 2, sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF, true);	// 16-bit signed range is -32768 to 32767, littleEndian byte order.\r
			outInt16[0][i] = sampleVal < 0 ? sampleVal * 0x8000 : sampleVal * 0x7FFF;\r
		}\r
		\r
		function ready(skipResampler){\r
			if (!skipResampler){\r
				//use new resampler for every instance - it keeps data from previous calls to improve the resampling\r
				that.resampler = that.SpeexResampler(\r
					that.channelCount, that.sourceSamplerate, that.targetSampleRate, that.resampleQuality\r
				);\r
			}\r
			that.isReadyForProcessing = true;\r
			that.port.postMessage({\r
				moduleState: 1,\r
				moduleInfo: {\r
					moduleId: that.moduleId,\r
					sourceSamplerate: that.sourceSamplerate,\r
					targetSampleRate: that.targetSampleRate,\r
					emitterBufferSize: that.emitterBufferSize,\r
					calculateRmsVolume: that.calculateRmsVolume,\r
					channelCount: that.channelCount,\r
					resamplingMode: that.resamplingMode,\r
					gain: that.gain,\r
					passThroughMode: that.passThroughMode\r
				}\r
			});\r
		}\r
		//start\r
		function start(options){\r
			//TODO: anything?\r
			//NOTE: timing of this signal is not very well defined\r
		}\r
		//stop\r
		function stop(options){\r
			//NOTE: timing of this signal is not very well defined\r
			//send out the remaining buffer data here\r
			if (that._outputRingBuffer.framesAvailable){\r
				//pull last samples\r
				var lastSamples = [new Int16Array(that._outputRingBuffer.framesAvailable)];\r
				that._outputRingBuffer.pull(lastSamples);\r
\r
				//Send info\r
				that.port.postMessage({\r
					rms: that.emitterRms,\r
					samples: lastSamples,\r
					sampleRate: that.targetSampleRate,\r
					channels: that.channelCount,\r
					type: lastSamples[0].constructor.name,\r
					isLast: true\r
				});\r
			}\r
		}\r
		function reset(options){\r
			//TODO: implement\r
			init();\r
		}\r
		function release(options){\r
			//destroy\r
			that._outputRingBuffer = null;\r
			that._newInputBuffer = null;\r
			that._newOutputBuffer = null;\r
			that.resampler = null;\r
			speexModule = null;\r
			//notify processor that we can terminate now\r
			that.port.postMessage({\r
				moduleState: 9\r
			});\r
		}\r
		\r
		//on-request resampling\r
		function resampleRequest(req){\r
			var samples = req.samples;\r
			var int16Buffer;\r
			if (req.isInt16){\r
				int16Buffer = samples;\r
			}else{\r
				var sampleSize = samples[0].length;\r
				int16Buffer = [new Int16Array(sampleSize)];		//TODO: MONO\r
				for (let i = 0; i < sampleSize; ++i){\r
					that.floatTo16BitInterleavedPCM(samples, int16Buffer, i);\r
				}\r
			}\r
			if (that.resamplingMode){\r
				var processed = that.resampler.processChunk(int16Buffer[0]);\r
				that.port.postMessage({\r
					moduleResponse: true,\r
					resampleResult: {\r
						//test: int16Buffer,		//DEBUG\r
						samples: [processed],\r
						sampleRate: that.targetSampleRate,\r
						channels: that.channelCount\r
					}\r
				});\r
			}else{\r
				that.port.postMessage({\r
					error: "No resampling required. Skipped process!",\r
					moduleResponse: true,\r
					resampleResult: {}\r
				});\r
			}\r
		}\r
		\r
		//Control messages\r
		this.port.onmessage = function(e){\r
			if (e.data.ctrl){\r
				if (that.doDebug) console.error("SpeexResampleSwitch - Controls", e.data.ctrl);			//DEBUG\r
				switch (e.data.ctrl.action) {\r
					//common interface\r
					case "start":\r
						start(e.data.ctrl.options);\r
						break;\r
					case "stop":\r
						stop(e.data.ctrl.options);\r
						break;\r
					case "reset":\r
						reset(e.data.ctrl.options);\r
						break;\r
					case "release":\r
					case "close":\r
						release(e.data.ctrl.options);\r
						break;\r
					case "process":\r
						//customProcess(e.data.ctrl.data);\r
						break;\r
					case "handle":\r
						//handleEvent(e.data.ctrl.data);\r
						break;\r
					default:\r
						console.error("SpeexResampleSwitch - Unknown control message:", e.data);\r
						break;\r
				}\r
			}else if (e.data.resample){\r
				//custom interface\r
				resampleRequest(e.data.resample);\r
			}\r
        }\r
		\r
		function onSpeexLog(msg){\r
			if (that.doDebug) console.error("SpeexResampleSwitch - SpeexModuleLog -", msg, "-", that.moduleId);			//DEBUG (use postMessage?)\r
		}\r
		//function onSpeexError(msg){}		//TODO: we could wrap the 'resampler.processChunk' function in try-catch and log the error here\r
		\r
		//prepare\r
		if (this.resamplingMode){\r
			if (!speexModule){\r
				onSpeexLog("Init. Speex WASM module");\r
				SpeexResampler.initPromise = this.Speex().then(function(s){\r
					onSpeexLog("Speex WASM module ready");\r
					speexModule = s;	//NOTE: used inside Speex\r
					ready(false);\r
				});\r
			}else{\r
				onSpeexLog("Speex WASM moduel already loaded");\r
				ready(false);\r
			}\r
		}else{\r
			onSpeexLog("Speex WASM module not needed");\r
			ready(true);\r
		}\r
	}\r
\r
	process(inputs, outputs, parameters) {\r
		if (!this.isReadyForProcessing){\r
			console.error("SpeexResampleSwitch - Module wasn't ready for processing! Input was ignored!", "-", this.moduleId);\r
			return;\r
		}\r
\r
		//Use 1st input and output only\r
		let input = inputs[0];\r
		let output = outputs[0];\r
\r
		//NOTE: AudioWorkletProcessor always gets input[0].length frames (typically 128, might change in future)\r
		if (input.length > 0){\r
			let inputSampleSize = input[0].length;\r
			\r
			if (this._isFirstValidProcess){\r
				this._isFirstValidProcess = false;\r
				//check inputSampleSize\r
				if (inputSampleSize != this.EXPECTED_SAMPLE_SIZE){\r
					let msg = "Sample size is: " + inputSampleSize + ", expected: " + this.EXPECTED_SAMPLE_SIZE + ". Need code adjustments!";\r
					console.error("AudioWorkletProcessor sample size exception - Msg.: " + msg);\r
					throw new this.SampleSizeException(msg);\r
				}\r
			}\r
			\r
			//transfer input to 16bit signed, interleaved (channels) PCM output - TODO: ONLY MONO so far!\r
			let sqrSum = 0;\r
			for (let i = 0; i < inputSampleSize; ++i){\r
				//gain\r
				if (this._hasGain) input[0][i] = input[0][i] * this.gain;\r
				\r
				//float to 16Bit interleaved PCM\r
				this.floatTo16BitInterleavedPCM(input, this._newInputBuffer, i);\r
				\r
				//pass through\r
				if (this.passThroughMode == 2){\r
					output[0][i] = this._newInputBuffer[0][i];	//16Bit PCM\r
				}else if (this.passThroughMode == 1){\r
					output[0][i] = input[0][i];					//original (float32)\r
				}\r
				\r
				//calc. sum for RMS\r
				if (this.calculateRmsVolume){\r
					this._emitterSqrSum += (input[0][i] ** 2);\r
				}\r
			}\r
			this._emitterSamples += inputSampleSize;\r
			\r
			if (this.resamplingMode != 0){\r
				//let interleaved16bitPcmAudioChunk = new Int16Array(this._inputDataView);\r
				//let processed = this.resampler.processChunk(interleaved16bitPcmAudioChunk);\r
				let processed = this.resampler.processChunk(this._newInputBuffer[0]);\r
				this._outputRingBuffer.push([processed]);				//TODO: is MONO\r
			}else{\r
				this._outputRingBuffer.push([this._newInputBuffer[0]]);	//TODO: is MONO\r
			}\r
			\r
			//Process if we have enough frames for the kernel.\r
			if (this._outputRingBuffer.framesAvailable >= this.emitterBufferSize) {\r
				//pull samples\r
				this._outputRingBuffer.pull(this._newOutputBuffer);\r
\r
				//Send info\r
				this.port.postMessage({\r
					rms: this.emitterRms,\r
					samples: this._newOutputBuffer,\r
					sampleRate: this.targetSampleRate,\r
					channels: this.channelCount,\r
					type: this._newOutputBuffer[0].constructor.name\r
				});\r
			}\r
		}\r
		return true;\r
	}\r
}\r
\r
registerProcessor('speex-resample-switch', SpeexResampleProcessor);`;if(typeof Al!="object"){var Al={};window.SepiaFW=Al}(function(n){var e=n.webAudio||{};e.version="0.9.11";var t=window.AudioContext||window.webkitAudioContext,r=void 0,i=void 0;function s(){return r=!!t&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,!!r||i}e.isStreamRecorderSupported=s(),e.isNativeStreamResamplingSupported=!0,e.tryNativeStreamResampling=!0,e.contentFetchTimeout=8e3,e.defaultProcessorOptions={moduleFolder:"modules",initSuccessCallback:console.log,initErrorCallback:console.error,onerror:console.error};var o={};e.clearPreLoadCache=function(){o={}},e.getSupportedAudioConstraints=function(){var h=navigator.mediaDevices.getSupportedConstraints(),p={},m=e.overwriteSupportedAudioConstraints;return h.deviceId&&(p.deviceId=m.deviceId!=null?m.deviceId:void 0),h.channelCount&&(p.channelCount=m.channelCount!=null?m.channelCount:1),h.noiseSuppression&&(p.noiseSuppression=m.noiseSuppression!=null?m.noiseSuppression:!0),h.autoGainControl&&(p.autoGainControl=m.autoGainControl!=null?m.autoGainControl:!1),h.echoCancellation&&(p.echoCancellation=m.echoCancellation!=null?m.echoCancellation:!1),h.sampleRate&&(p.sampleRate=m.sampleRate!=null?m.sampleRate:48e3),p},e.overwriteSupportedAudioConstraints={},e.defaultMimeTypesForCodecs={ogg:"audio/ogg",ogg_opus:"audio/ogg;codecs=opus",ogg_vorbis:"audio/ogg;codecs=vorbis",ogg_speex:"audio/ogg;codecs=speex",opus:"audio/opus",vorbis:"audio/vorbis",speex:"audio/speex",wav:"audio/wav",raw:"audio/wav",webm_ogg_opus:"audio/webm;codecs=opus",webm_ogg_vorbis:"audio/webm;codecs=vorbis",webm_mkv_pcm:"audio/webm;codecs=pcm",mp3:"audio/mpeg",mp4:"audio/mp4",flac:"audio/flac",mpeg:"audio/mpeg"},e.getSupportedMediaRecorderCodecs=function(){var h={};return window.MediaRecorder&&Object.keys(e.defaultMimeTypesForCodecs).forEach(function(p){var m=e.defaultMimeTypesForCodecs[p];window.MediaRecorder.isTypeSupported(m)&&(h[p]=m)}),h},e.createAudioContext=function(h,p){var m={};!p&&h.targetSampleRate&&(m.sampleRate=h.targetSampleRate);var g=new t(m);return g},e.Processor=function(h,p,m){var g=this;m||(m=e.defaultProcessorOptions.initErrorCallback),p||(p=e.defaultProcessorOptions.initSuccessCallback),h||(h={});var v=h.onerror||e.defaultProcessorOptions.onerror,y=(h.moduleFolder||e.defaultProcessorOptions.moduleFolder).replace(/\/$/,"")+"/",w,C=0,b,F,x,S,R=!1,Z=!1,Y=!1,Q=h.initializerTimeout||3e3,B,E={},M={},D=[];function T(j){h.debugLog&&h.debugLog("Started init. condition: "+j),E[j]=1}function V(j){E[j]&&(delete E[j],h.debugLog&&h.debugLog("Completed init. condition: "+j),Object.keys(E).length==0&&(Z||(clearTimeout(B),Z=!0,Y=!1,p({name:"ProcessorReady",message:"Processor is ready for action",inputSampleRate:w,targetSampleRate:h.targetSampleRate||w,sourceInfo:M,modulesInfo:D}))))}function G(){clearTimeout(B),Z=!1,Y=!1,E={},T("sourceSetup"),T("modulesSetup")}function P(j){G(),m(j)}G(),Y=!0,B=setTimeout(function(){P({message:"Initialization took too long! If you expect long running init. process use option 'initializerTimeout' (ms).",name:"ProcessorInitTimeout"})},Q);async function U(j,se){if(b&&j&&(b.state!="closed"&&await b.close(),b=null),!b||b.state=="closed")if(b=e.createAudioContext(h,se),h.startSuspended==null||h.startSuspended){try{await b.resume()}catch{}await b.suspend()}else await b.resume();return b}async function H(){if(h.modules)for(let j=0;j<h.modules.length;j++){let se=h.modules[j],ce=oe(se),Be=ce.moduleType,ge=ce.moduleName;if(Be==1){let Fe=y+ge+".js";h.debugLog&&h.debugLog("Adding audioWorklet module: "+Fe);try{await b.audioWorklet.addModule(`data:application/javascript;charset=utf8,${encodeURIComponent(lve)}`)}catch(nt){console.error(nt),h.debugLog&&h.debugLog("FAILED to add audioWorklet module: "+Fe+" - Msg.: "+nt.name+", "+nt.message)}}else if(Be==2){let Fe=y+ge.replace(/-worker$/,"")+"-worker.js";h.debugLog&&h.debugLog("Adding worker module: "+Fe)}else throw Be==3?{name:"CreateModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."}:Be==4?{name:"CreateModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."}:{name:"CreateModuleError",message:"Module type unknown."}}}function oe(j){var se,ce,Be,ge;return typeof j=="object"?(j.type&&j.type=="worker"||j.isWorker?se=2:j.type&&j.type=="scriptProcessor"?se=3:j.type&&j.type=="audioNode"?se=4:se=1,ce=j.name,Be=j.setup||j.settings,ge=j.preLoad||{}):(se=1,ce=j,Be={},ge={}),{moduleType:se,moduleName:ce,moduleSetup:Be,modulePreLoads:ge}}function k(){R=!0}function K(){R=!1}if(!e.isStreamRecorderSupported&&!h.customSourceTest&&!h.customSource){var ne={name:"NotSupportedError",message:"Cannot create audio stream recorder because there are no compatible interfaces!"};P(ne);return}function ie(j,se,ce){var Be=j.length;if(h.modules&&h.modules.length){var ge=new Array(h.modules.length),Fe=h.modules.length;h.modules.forEach(async function(nt,We){if(!Y)return;T("module-"+We);var Te=oe(nt),Qe=Te.moduleType,Ge=Te.moduleName,qe=Te.moduleSetup,O={},J=Object.keys(Te.modulePreLoads);try{await Promise.all(J.map(async function(I,N){var $=Te.modulePreLoads[I],ee=1,te=void 0;typeof $=="object"?(ee=$.type&&($.type==2||$.type.toLowerCase()=="arraybuffer")?2:1,$=$.path||$.url):I.indexOf("wasmFile")==0?ee=2:I.indexOf("wasmBase64")==0&&(ee=1,te=u);var we=I+"_"+$;if(o[we])O[I]=o[we];else try{var Ce;if(!$||ee>2)throw{name:"PreLoadError",message:"Missing 'path' (url) or unsupported type (use 1=text or 2=arraybuffer)"};ee==1?Ce=await A($):ee==2&&(Ce=await l($)),typeof te=="function"&&(Ce=te(Ce)),O[I]=Ce,o[we]=Ce}catch(Ee){throw{name:"AddModuleError",message:"Failed to pre-load data: "+I+" - name: "+Ge,info:Ee}}}))}catch(I){P(I);return}var ae=qe.options||{};ae.preLoadResults=O;var de;function ve(I){if(!(!I||I.data==null))if(I.data.moduleState==1)de.isReady=!0,V("module-"+We),I.data.moduleInfo&&(de.moduleInfo=I.data.moduleInfo),ge[We]={moduleName:de.moduleName,moduleInfo:de.moduleInfo},--Fe==0&&ce(ge);else if(I.data.moduleState==9&&!de.isTerminated){if(typeof de.terminate=="function")try{de.isTerminated=!0,de.terminate()}catch(N){de.isTerminated=!0,L({name:"TerminateError",message:"Failed to terminate module",info:N})}}else I.data.moduleState==10?(I.data.error.target=I.target,L(I.data.error)):I.data.moduleResponse||qe.sendToModules&&(I.data.moduleEvent?qe.sendToModules.forEach(function(N){j[N]&&!j[N].ignoreSendToModules&&j[N].sendToModule({ctrl:{action:"handle",data:I.data}})}):qe.sendToModules.forEach(function(N){j[N]&&!j[N].ignoreSendToModules&&j[N].sendToModule({ctrl:{action:"process",data:I.data}})}));qe.onmessage&&qe.onmessage(I.data,j)}function L(I){var N;I.message&&I.message.indexOf("Uncaught {")==0?(I.preventDefault(),N=JSON.parse(I.message.replace(/^Uncaught /,"")),I.message=N):N=I,v({name:"AudioModuleProcessorException",message:"Error in module: "+I.target.moduleName+" - "+(N&&N.message?N.message:"Check console for details."),module:I.target.moduleName,info:N}),Y&&!Z&&P({message:"Error during setup of module: "+de.moduleName,name:"ProcessorInitError",info:N}),qe.onerror&&qe.onerror(I)}if(Qe==1){if(!se){P({name:"AddModuleError",message:"Source does not support 'AudioWorkletProcessor' (use only workers instead) - name: "+Ge});return}ae.processorOptions||(ae.processorOptions=ae.setup||{}),ae.processorOptions.ctxInfo||(ae.processorOptions.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:h.targetSampleRate}),de=new AudioWorkletNode(b,Ge,ae),de.isReady=!1,de.moduleName=Ge,de.port.onmessage=ve,de.onprocessorerror=L,de.sendToModule=function(I){de.isReady?de.port.postMessage(I):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.'",module:de.moduleName})}}else if(Qe==2)ae.setup||(ae.setup={}),ae.setup.ctxInfo||(ae.setup.ctxInfo={sampleRate:b.sampleRate,targetSampleRate:h.targetSampleRate}),Ge.includes("webrtc-vad")?de=ove():Ge.includes("stt-socket")&&(de=ave()),de.isReady=!1,de.moduleName=Ge,de.onmessage=ve,de.onerror=L,de.sendToModule=function(I){de.isReady||I&&I.ctrl&&I.ctrl.action=="construct"?de.postMessage(I):v({name:"AudioModuleProcessorException",message:"'sendToModule' was called before module was actually ready. Consider 'startSuspended' option maybe.",module:de.moduleName})},de.sendToModule({ctrl:{action:"construct",options:ae}});else if(Qe==3){P({name:"AddModuleError",message:"ScriptProcessor nodes are currently not supported as modules (only source)."});return}else if(Qe==4){P({name:"AddModuleError",message:"AudioNodes are currently not supported as modules (you can use them as custom source)."});return}else{P({name:"AddModuleError",message:"Unknown module type."});return}if(de.moduleType=Qe,de.ignoreSendToModules=!1,de.deactivate=function(){de.ignoreSendToModules=!0,R&&(de.sendToModule({ctrl:{action:"stop"}}),de.sendToModule({ctrl:{action:"reset"}}))},de.activate=function(){de.ignoreSendToModules=!1,R&&de.sendToModule({ctrl:{action:"start"}})},nt.handle=de,!se&&We==0){var _=j[0];if(!_.onmessage){P({name:"AddModuleError",message:"If source is not compatible to 'AudioWorklet' it has to have a 'onmessage' event to get the processed data."});return}_.onmessage=function(I){!I||I.data==null||(I.data.moduleEvent||I.data.sourceEvent?de.sendToModule({ctrl:{action:"handle",data:I.data}}):de.sendToModule({ctrl:{action:"process",data:I.data}}))}}j[Be+We]=de})}else ce([])}function ue(j,se,ce){w=b.sampleRate,ce||(ce={}),h.targetSampleRate&&h.targetSampleRate!=w&&(e.isNativeStreamResamplingSupported=!1,C=w-h.targetSampleRate);var Be=[j],ge=[],Fe=!0;ce.hasWorkletSupport!=null?Fe=ce.hasWorkletSupport:ce.type=="scriptProcessor"&&(Fe=!1),ie(Be,Fe,function(We){D=We,V("modulesSetup"),g.processNodes=Be;let Te=!1;if(Be.forEach(function(Qe,Ge){Fe&&(!Qe.moduleType||Qe.moduleType==1)&&ge.push(Qe),Qe.moduleInfo&&Qe.moduleInfo.resamplingMode&&(Te=!0)}),C&&!Te){P({message:"Samplerate mismatch and no resampler found!",name:"ProcessorInitError"});return}});var nt=h.destinationNode||b.destination;g.mainAudioContext=b,g.source=j,g.sourceInfo=ce,M=ce,se||(se={}),F=function(We,Te){Promise.resolve((se.onBeforeStart||d)()).then(function(){return b.resume()}).then(function(){if(ge.length>1){for(var Qe=1;Qe<ge.length;Qe++)ge[Qe-1].connect(ge[Qe]);ge[Qe-1].connect(nt)}else ge.length==1?ge[0].connect(nt):Be[0].connect&&Be[0].connect(nt);if(Be.forEach(function(Ge){Ge.sendToModule&&Ge.sendToModule({ctrl:{action:"start",options:{}}})}),se.onAfterStart)return Promise.resolve(se.onAfterStart())}).then(We).catch(function(Qe){v({name:"ProcessorStartError",message:Qe.name+" - Message: "+(Qe.message||Qe)}),Te&&Te(Qe)})},x=function(We,Te){Promise.resolve((se.onBeforeStop||d)()).then(function(){return Be.forEach(function(Qe,Ge){Qe.disconnect&&Qe.disconnect(),Qe.sendToModule&&Qe.sendToModule({ctrl:{action:"stop",options:{}}})}),b.suspend()}).then(function(){if(se.onAfterStop)return Promise.resolve(se.onAfterStop())}).then(We).catch(function(Qe){v({name:"ProcessorStopError",message:Qe.name+" - Message: "+(Qe.message||Qe)}),Te&&Te(Qe)})},S=function(We,Te){Promise.resolve((se.onBeforeRelease||d)()).then(function(){return Be.forEach(function(Qe,Ge){Qe.sendToModule&&Qe.sendToModule({ctrl:{action:"release",options:{}}}),Be[Ge]=null}),g.processNodes=null,g.source=null,b.close()}).then(function(){if(se.onAfterRelease)return Promise.resolve(se.onAfterRelease())}).then(We).catch(function(Qe){v({name:"ProcessorReleaseError",message:Qe.name+" - Message: "+(Qe.message||Qe)}),Te&&Te(Qe)})},V("sourceSetup")}if(h.customSourceTest){let j;e.createWhiteNoiseGeneratorNode(.1,{targetSampleRate:h.targetSampleRate}).then(function(se){return j=se,b=se.context,H()}).then(function(){ue(j,{},{type:"whiteNoiseGenerator"})}).catch(function(se){P(se)})}else if(h.customSource){let j=h.customSource.node;b=j.context,H().then(function(){ue(j,{onBeforeStart:h.customSource.beforeStart,onAfterStart:h.customSource.start||h.customSource.afterStart,onBeforeStop:h.customSource.stop||h.customSource.beforeStop,onAfterStop:h.customSource.afterStop,onBeforeRelease:h.customSource.beforeRelease,onAfterRelease:h.customSource.release||h.customSource.afterRelease},{type:h.customSource.type||"custom",typeData:h.customSource.typeData,hasWorkletSupport:h.customSource.hasWorkletSupport!=null?h.customSource.hasWorkletSupport:!0})}).catch(function(se){P(se)})}else{let j;e.getMicrophone(h,U).then(function(se){return j=se,H()}).then(function(){ue(j.source,j.controls||{},j.info)}).catch(function(se){P(typeof se=="string"?{message:se,name:"ProcessorInitError"}:{message:se.message,name:se.name,ref:se})})}g.start=function(j,se,ce){Z&&!R?F(function(){var Be=new Date().getTime();k(),h.onaudiostart&&h.onaudiostart({startTime:Be}),j&&j()},ce):se&&se()},g.stop=function(j,se,ce){R?x(function(){var Be=new Date().getTime();K(),h.onaudioend&&h.onaudioend({endTime:Be}),j&&j()},ce):se&&se()},g.release=function(j,se,ce){Z&&S?S(function(){G(),h.onrelease&&h.onrelease(),j&&j()},ce):Y?P({message:"Release was called before initialization was complete.",name:"ProcessorInitError"}):se&&se()},g.isInitialized=function(){return Z},g.isInitPending=function(){return Y},g.isProcessing=function(){return R}},e.getAudioDevices=function(h){return new Promise(function(p,m){(async function(){if(!navigator.mediaDevices.enumerateDevices)return m({message:"MediaDevices 'enumerateDevices' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var g=!1,v=void 0;navigator.mediaDevices.enumerateDevices().then(function(y){if(!g){clearTimeout(v);var w={},C={};return y.forEach(function(b){b.kind=="audioinput"?w[b.label]=b.deviceId:b.kind=="audiooutput"&&(C[b.label]=b.deviceId)}),p({input:w,output:C})}}).catch(function(y){return m(y)}),v=setTimeout(function(){return g=!0,m({message:"Media device enumeration timeout. Permission might require user interaction.",name:"TimeoutError"})},h||5e3)})()})},e.getMicrophone=function(h,p,m){return h||(h={}),p||(p=async function(g,v){var y=e.createAudioContext(h,v);if(h.startSuspended==null||h.startSuspended){try{await y.resume()}catch{}await y.suspend()}else await y.resume();return y}),new Promise(function(g,v){(async function(){var y=JSON.parse(JSON.stringify(e.getSupportedAudioConstraints()));y.sampleRate&&h.targetSampleRate&&(y.sampleRate=h.targetSampleRate);var w={video:!1,audio:Object.keys(y).length?y:!0};if(!navigator.mediaDevices.getUserMedia)return v({message:"MediaDevices 'getUserMedia' is not available! Check if context is secure (SSL, HTTPS, etc.).",name:"NotSupportedError"});var C=!1,b=void 0;navigator.mediaDevices.getUserMedia(w).then(async function(F){if(!C){clearTimeout(b);var x;e.tryNativeStreamResampling&&e.isNativeStreamResamplingSupported?x=await p(!1,!1):x=await p(!1,!0);var S;try{S=x.createMediaStreamSource(F)}catch(Q){x=await p(!0,!0),S=x.createMediaStreamSource(F),Q&&Q.name&&Q.name=="NotSupportedError"&&(e.isNativeStreamResamplingSupported=!1,h.debugLog&&h.debugLog("Native stream resampling has been deactivated - Info: "+Q.message))}h.destinationNode||(h.destinationNode=x.createMediaStreamDestination());var R={type:"mic"},Z;if(S.mediaStream&&S.mediaStream.getAudioTracks)try{Z=S.mediaStream.getAudioTracks()[0],R.label=Z.label,Z.getSettings?R.settings=Z.getSettings():R.settings={},R.settings.sampleRate=x.sampleRate}catch{}var Y={onBeforeStart:function(){},onAfterStop:function(){},onAfterRelease:function(){Z&&typeof Z.stop=="function"&&Z.readyState=="live"&&Z.stop()}};return g({source:S,controls:Y,info:R})}}).catch(function(F){return v(F)}),b=setTimeout(function(){return C=!0,v({message:"Media 'getUserMedia' timeout. Permission might require user interaction.",name:"TimeoutError"})},m||5e3)})()})},e.createAudioRecorder=function(h,p,m){return m||(m={}),m.codec||(m.codec="webm_ogg_opus"),new Promise(function(g,v){(async function(){try{var y=p.settings.sampleRate;if(!y)return v({message:"Sample-rate unknown! Please add correct 'sourceInfo'.",name:"AudioRecorderError"});var w=p.settings.channelCount;if(w>1)return v({message:"Sorry, but this recorder only supports MONO audio at the moment.",name:"NotSupportedError"});var C=m.mimeType||e.defaultMimeTypesForCodecs[m.codec]||e.defaultMimeTypesForCodecs.webm_ogg_opus,b=m.sampleTime||(m.chunkSize?Math.floor(1e3/y*m.chunkSize):0);if(b&&m.decodeToAudioBuffer&&console.error("WARNING: Partial decoding is not supported at the moment! It is possible but requires adding custom headers for each blob!"),window.MediaRecorder)if(MediaRecorder.isTypeSupported(C)){var F=new MediaRecorder(h,{mimeType:C,bitsPerSecond:y*2*w}),x,S,R=!1;F.onerror=m.onerror||console.error,m.onstart&&(F.onstart=m.onstart),m.onpause&&(F.onpause=m.onpause),m.onresume&&(F.onresume=m.onresume);var Z=m.onstop;F.onstop=function(M){Z&&!m.decodeToAudioBuffer&&Z()};var Y=m.ondataavailable||m.onprocess;m.decodeToAudioBuffer?Y&&(F.ondataavailable=function(M){if(F.state=="inactive"&&(R=!0),M&&M.data){let D=Date.now();e.offlineAudioContextBlobDecoder(y,w,M.data,function(T){T&&Y({data:T.getChannelData(0),decodeTime:Date.now()-D}),!R&&m.recordLimitMs&&Date.now()-x>=m.recordLimitMs?B():R&&Z&&Z()})}}):Y&&(F.ondataavailable=function(M){Y(M),m.recordLimitMs&&Date.now()-x>=m.recordLimitMs&&B()});var Q,B=function(){Q&&clearTimeout(Q),S=Date.now(),F.state!="inactive"&&F.stop()},E=function(){x=Date.now(),S=void 0,R=!1,b?F.start(b):(F.start(),m.recordLimitMs&&(Q=setTimeout(B,m.recordLimitMs)))};return g({getMediaRecorder:function(){return F},mimeType:C,sourceInfo:p,sampleTime:b,start:E,stop:B})}else return v({message:"MIME-Type '"+C+"' is not supported!",name:"NotSupportedError"});else return v({message:"'MediaRecorder' is not available!",name:"NotSupportedError"})}catch(M){return console.error("AudioRecorder",M),v(M)}})()})},e.offlineAudioContextBlobDecoder=function(h,p,m,g){a(m,function(v){if(!v)g();else{var y=new OfflineAudioContext(p,v.byteLength,h);y.decodeAudioData(v,function(w){g(w)},function(w){console.error("offlineAudioContext.decodeAudioData ERROR",w),g()})}})};function a(h,p){if(!h||!h.size)p();else if(typeof h.arrayBuffer=="function")h.arrayBuffer().then(function(g){p(g)}).catch(function(g){console.error("blobToArray '.arrayBuffer' ERROR",g),p()});else{var m=new FileReader;m.onload=function(){p(m.result)},m.onerror=function(g){console.error("blobToArray 'FileReader' ERROR",reader.error,g),p()},m.readAsArrayBuffer(h)}}e.blobToArray=a,e.createLegacyMicrophoneScriptProcessor=function(h){return h||(h={}),e.getMicrophone(h,void 0).then(function(p){var m=p.source,g=m.context,v=g.sampleRate,y=h.bufferSize||2048,w=1,C=g.createScriptProcessor(y,w,w);m.connect(C);var b={node:C,type:"scriptProcessor",typeData:p.info,hasWorkletSupport:!1,start:function(){p.controls.onAfterStart&&p.controls.onAfterStart()},stop:function(){p.controls.onBeforeStop&&p.controls.onBeforeStop()},release:function(){p.controls.onAfterRelease&&p.controls.onAfterRelease()}};if(p.controls&&(p.controls.onBeforeStart&&(b.beforeStart=p.controls.onBeforeStart),p.controls.onAfterStop&&(b.afterStop=p.controls.onAfterStop),p.controls.onBeforeRelease&&(b.beforeRelease=p.controls.onBeforeRelease)),h.onaudioprocess)C.onaudioprocess=h.onaudioprocess;else{let F=function(x){if(x&&x.inputBuffer){var S=[x.inputBuffer.getChannelData(0)];C.onmessage({data:{samples:S,sampleRate:v,channels:w,type:S[0].constructor.name}})}};C.onaudioprocess=function(x){F(x)},C.onmessage=h.onmessage||function(x){}}return b})},e.createWhiteNoiseGeneratorNode=function(h,p,m){p||(p={});var g=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/";return new Promise(function(v,y){(async function(){try{var w=e.createAudioContext(p);try{await w.resume()}catch{}await w.suspend();var C=g+"white-noise-generator.js";await w.audioWorklet.addModule(C);var b=new AudioWorkletNode(w,"white-noise-generator",{processorOptions:{gain:h||.1}});m&&(b.port.onmessage=m),v(b)}catch(F){return y(F)}})()})},e.createFileSource=function(h,p,m,g){return p||(p={}),new Promise(function(v,y){try{let w=function(b){y(b)},C=function(b){e.createAudioBufferSource(b,p,m,g).then(function(F){F.typeData={fileUrl:h},v(F)}).catch(w)};e.readFileAsBuffer(h,C,w)}catch(w){y(w)}})},e.createAudioBufferSource=function(h,p,m,g){return p||(p={}),new Promise(function(v,y){(async function(){try{var w=e.createAudioContext(p);try{await w.resume()}catch{}await w.suspend();var C=w.createBufferSource();w.decodeAudioData(h,function(b){return C.buffer=b,C.loop=m??!0,g&&(C.onended=g),v({node:C,type:"fileAudioBuffer",typeData:{},start:function(){C.start()},stop:function(){C.stop()},release:function(){}})},function(b){return y(b)})}catch(b){return y(b)}})()})},e.createSourceAudioPlayer=function(h,p,m,g,v){p||(p={}),p.modules=m||[],p.customSource=h,p.startSuspended==null&&(p.startSuspended=!0);var y=new e.Processor(p,g,v);return y},e.encodeWaveBuffer=function(h,p,m,g,v,y){var w=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",C=new Worker(w+"wave-encoder-worker.js");v||(v=console.log),y||(y=console.error);var b={setup:{inputSampleRate:p,inputSampleSize:h.length,lookbackBufferMs:0}};C.onmessage=function(F){F.data.moduleState==1?C.postMessage({encode:{format:"wave",data:{samples:[h],sampleRate:p,channels:m,isFloat32:g}}}):F.data.encoderResult&&(C.terminate(),F.data.error?y({name:"EncoderError",message:F.data.error}):v(F.data.encoderResult))},C.onerror=function(F){C.terminate(),y(F)},C.postMessage({ctrl:{action:"construct",options:b}})},e.decodeAudioFile=function(h,p,m,g,v){e.readFileAsBuffer(h,function(y){var w=new OfflineAudioContext(m,y.byteLength,p);w.decodeAudioData(y,function(C){g(C)},function(C){v(C)})},function(y){v(y)})},e.decodeAudioFileToInt16Mono=function(h,p,m,g){var v=1;e.decodeAudioFile(h,p,v,function(y){var w=!0;e.encodeWaveBuffer(y.getChannelData(0),p,v,w,function(C){try{var b=new Int16Array(C.wav.buffer);m(b)}catch(F){g(F)}},g)},g)},e.resampleBufferViaSpeex=function(h,p,m,g,v,y,w){y||(y=console.log),w||(w=console.error);try{var C=new OfflineAudioContext(g,h.length,p),b=e.defaultProcessorOptions.moduleFolder.replace(/\/$/,"")+"/",F="speex-resample-switch";C.audioWorklet.addModule(b+F+".js").then(function(){var x={processorOptions:{ctxInfo:{sampleRate:p},targetSampleRate:m,resampleQuality:v,bufferSize:h.length}},S=new AudioWorkletNode(C,F,x);S.port.onmessage=function(R){R.data.moduleState==1?S.port.postMessage({resample:{samples:[h],isInt16:!0}}):R.data.resampleResult&&(C=null,R.data.error?w({name:"ResampleError",message:R.data.error}):y(R.data.resampleResult))},S.onprocessorerror=function(R){C=null,w(R)}})}catch(x){w(x)}},e.readFileAsBuffer=function(h,p,m){Al&&Al.files?Al.files.fetch(h,p,m,"arraybuffer",e.contentFetchTimeout):c("arraybuffer",h,p,m)},e.readFileAsText=function(h,p,m){Al&&Al.files?Al.files.fetch(h,p,m,void 0,e.contentFetchTimeout):c("text",h,p,m)};function l(h){return new Promise(function(p,m){e.readFileAsBuffer(h,function(g){p(g)},function(g){m(g)})})}function A(h){return new Promise(function(p,m){e.readFileAsText(h,function(g){p(g)},function(g){m(g)})})}function c(h,p,m,g){var v=new XMLHttpRequest;v.open("GET",p),v.responseType=h,v.timeout=e.contentFetchTimeout,v.onload=function(y){v.status>=200&&v.status<300?m(v.response):g({status:v.status,message:v.statusText})},v.onerror=function(y){g(y)},v.ontimeout=function(y){g(y)},v.send()}function u(h){try{for(var p=atob(h),m=new Uint8Array(p.length),g=0;g<p.length;++g)m[g]=p.charCodeAt(g);return m}catch{throw new Error("Converting base64 string to Uint8Array bytes array failed.")}}function f(h){try{return btoa(h.reduce(function(p,m){return p+String.fromCharCode(m)},""))}catch{throw new Error("Converting Uint8Array to base64 string failed.")}}e.base64={base64StringToUint8Array:u,uint8ArrayToBase64String:f},e.addAudioElementToPage=function(h,p,m){var g=document.createElement("audio");g.src=window.URL.createObjectURL(p.constructor.name=="Blob"?p:new Blob([p],{type:m||"audio/wav"})),g.setAttribute("controls","controls");var v=document.createElement("div");return v.appendChild(g),h||(h=document.body),h.appendChild(v),g};function d(){}n.webAudio=e})(Al);(function(){var n={};n.onProcessorReady=function(d){console.log("SepiaVoiceRecorder -  onProcessorReady",d)},n.onProcessorInitError=function(d){console.error("SepiaVoiceRecorder -  onProcessorInitError",d)},n.onConnected=function(d){console.log("SepiaVoiceRecorder -  onConnected",d)},n.onDisconnected=function(d){console.log("SepiaVoiceRecorder -  onDisconnected",d)},n.onAudioStart=function(d){console.log("SepiaVoiceRecorder -  onAudioStart")},n.onAudioEnd=function(d){console.log("SepiaVoiceRecorder -  onAudioEnd")},n.onProcessorError=function(d){console.error("SepiaVoiceRecorder -  onProcessorError",d)},n.onProcessorRelease=function(d){console.log("SepiaVoiceRecorder -  onProcessorRelease")},n.onDebugLog=function(d){console.log("debugLog",d)},n.onResamplerData=function(d){console.log("SepiaVoiceRecorder -  onResamplerData",d)},n.onWaveEncoderStateChange=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderStateChange",d)},n.onWaveEncoderAudioData=function(d){console.log("SepiaVoiceRecorder -  onWaveEncoderAudioData",d)};function e(d){d.output&&d.output.wav?n.onWaveEncoderAudioData(d.output.wav):d.output&&d.output.buffer,d.gate&&(n.onWaveEncoderStateChange(d.gate),d.gate.isOpen===!0?t=!0:d.gate.isOpen===!1&&(t&&u(),t=!1))}var t=!1;function r(d){d.voiceActivity!=null,d.voiceEnergy!=null,d.vadSequenceCode!=null&&(d.vadSequenceCode==1?n.onVadStateChange("vaup",1):d.vadSequenceCode==2?n.onVadStateChange("speechstart",2):d.vadSequenceCode==3?n.onVadStateChange("vadown",3):d.vadSequenceCode==4?n.onVadStateChange("speechend",4):d.vadSequenceCode==5&&n.onVadStateChange("speechend",5))}n.onSpeechRecognitionStateChange=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionStateChange",d)},n.onSpeechRecognitionEvent=function(d){console.log("SepiaVoiceRecorder -  onSpeechRecognitionEvent",d)};function i(d){d&&(d.gate&&(d.gate.isOpen==!1&&s?(s=!1,n.onSpeechRecognitionStateChange({state:"onStreamEnd",bufferOrTimeLimit:d.gate.bufferOrTimeLimit})):d.gate.isOpen==!0&&!s&&(n.onSpeechRecognitionStateChange({state:"onStreamStart"}),s=!0)),d.recognitionEvent&&n.onSpeechRecognitionEvent(d.recognitionEvent),d.connectionEvent&&(d.connectionEvent.type=="ready"?n.onConnected(d.connectionEvent.data):d.connectionEvent.type=="closed"&&n.onDisconnected(d.connectionEvent.data)),d.output&&d.output.wav&&n.onWaveEncoderAudioData(d.output.wav))}var s=!1,o,a=16e3,l=512;async function A(d){d?(d.targetSampleRate&&(a=d.targetSampleRate),d.resamplerBufferSize&&(l=d.resamplerBufferSize)):d={};var h=!!d.asr;typeof d.asr!="object"&&(d.asr={});var p=!!d.vad;typeof d.vad!="object"&&(d.vad={});var m=void 0;if(d.fileUrl)try{m=await SepiaFW.webAudio.createFileSource(d.fileUrl,{targetSampleRate:a})}catch(R){n.onProcessorInitError(R);return}var g={name:"speex-resample-switch",settings:{onmessage:n.onResamplerData,sendToModules:[],options:{processorOptions:{targetSampleRate:a,resampleQuality:d.resampleQuality||4,bufferSize:l,passThroughMode:0,calculateRmsVolume:!0,gain:d.gain||1}}}},v={name:"wave-encoder",type:"worker",handle:{},settings:{onmessage:e,options:{setup:{inputSampleRate:a,inputSampleSize:l,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,doDebug:!1}}}},y,w=480*2,C={name:"webrtc-vad-worker",type:"worker",settings:{onmessage:r,options:{setup:{inputSampleRate:a,inputSampleSize:l,bufferSize:d.vad.bufferSize||w,vadMode:d.vad.mode||3,sequence:{silenceActivationTime:450,maxSequenceTime:d.vad.maxSequenceTime||1e4,minSequenceTime:d.vad.minSequenceTime||600}}}}},b,F={name:"stt-socket",type:"worker",handle:{},settings:{onmessage:i,options:{setup:{inputSampleRate:a,inputSampleSize:l,lookbackBufferMs:0,recordBufferLimitKb:500,recordBufferLimitMs:d.recordingLimitMs,serverUrl:d.asr.serverUrl,clientId:d.asr.clientId,accessToken:d.asr.accessToken,messageFormat:d.asr.messageFormat||"webSpeechApi",language:d.asr.language||"",task:d.asr.task||"",model:d.asr.model||"",continuous:d.asr.continuous!=null?d.asr.continuous:!1,optimizeFinalResult:d.asr.optimizeFinalResult,engineOptions:d.asr.engineOptions||{},returnAudioFile:d.asr.returnAudioFile||!1,doDebug:!1}}}},x,S=[];S.push(g),S.length,p&&(S.push(C),b=S.length,n.vadModule=C,g.settings.sendToModules.push(b)),h?(S.push(F),x=S.length,n.sttServerModule=F,g.settings.sendToModules.push(x)):(S.push(v),y=S.length,n.waveEncoder=v,g.settings.sendToModules.push(y)),o=new SepiaFW.webAudio.Processor({onaudiostart:n.onAudioStart,onaudioend:n.onAudioEnd,onrelease:n.onProcessorRelease,onerror:n.onProcessorError,targetSampleRate:a,modules:S,destinationNode:void 0,startSuspended:!0,debugLog:n.onDebugLog,customSource:m},function(R){n.onProcessorReady(R)},function(R){n.onProcessorInitError(R)})}n.create=function(d){if(o){n.onProcessorInitError({name:"ProcessorInitError",message:"SepiaVoiceRecorder already exists. Release old one before creating new."});return}d||(d={}),A(d)},n.isReady=function(){return!!o&&o.isInitialized()},n.isActive=function(){return!!o&&o.isInitialized()&&o.isProcessing()},n.start=function(d,h,p){o?o.start(function(){c("open"),f("open"),d&&d()},h,p):p&&p({name:"ProcessorInitError",message:"SepiaVoiceRecorder doesn't exist yet."})},n.stop=function(d,h,p){o?o.stop(function(m){c("close"),f("close"),d&&d(m)},h,p):h&&h()},n.release=function(d,h,p){o?o.release(function(){o=void 0,d&&d()},function(){o=void 0,h&&h()},function(m){o=void 0,p&&p(m)}):h&&h()},n.stopIfActive=function(d){n.isActive()?n.stop(d,d,void 0):d&&d()},n.stopAndReleaseIfActive=function(d){n.stopIfActive(function(){n.isReady()?n.release(d,d,void 0):(o=void 0,d&&d())})};function c(d){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({gate:d})}function u(){o&&n.waveEncoder&&n.waveEncoder.handle.sendToModule({request:{get:"wave"}})}function f(d){o&&n.sttServerModule&&n.sttServerModule.handle.sendToModule({gate:d})}n.decodeAudioFileToInt16Mono=function(d,h,p,m,g){h||(h=16e3),p&&p>1&&console.error("SepiaVoiceRecorder.decodeAudioFileToInt16Mono - Channels > 1 not supported. Result will only contain data of channel 0."),m||(m=console.log),g||(g=console.error),SepiaFW.webAudio.decodeAudioFileToInt16Mono(d,h,m,g)},n.addAudioElementToPage=function(d,h,p){return SepiaFW.webAudio.addAudioElementToPage(d,h,p)},window.SepiaVoiceRecorder=n})();class Ave{constructor(e,t){tt(this,"volumeThresholds",[.05,10]);tt(this,"gain",1);tt(this,"isLoading",!1);tt(this,"isRecording",!1);tt(this,"isWaitingForFinalResult",!1);tt(this,"waitingForFinalResultTimer");tt(this,"waitingForFinalResultDelay",4e3);tt(this,"asrStreaming",!1);tt(this,"sourceInfo","-?-");if(window.SepiaFW&&(SepiaFW.webAudio.defaultProcessorOptions.moduleFolder="lib"),!window.SepiaVoiceRecorder)SepiaVoiceRecorder={notSupported:!0},console.error("SEPIA Web Audio Library not found or not supported (IE11?)!");else{this.sepiaSpeechRecognition=e,this.sepiaSpeechRecognitionConfig=t;const r=this;SepiaVoiceRecorder.onProcessorReady=function(i){console.log("SepiaVoiceRecorder -  onProcessorReady",i),this.sourceInfo="Sample-rate: "+i.targetSampleRate+"Hz (factor: "+i.inputSampleRate/i.targetSampleRate+`)
Device Label:
`+(i.sourceInfo?i.sourceInfo.label:""),console.log(this.sourceInfo),r.isLoading=!1,r.isRecording=!1,r.isWaitingForFinalResult=!1,SepiaVoiceRecorder.start()},SepiaVoiceRecorder.onConnected=function(i){i&&i.model&&(console.log("INFO - connected - ASR active model: "+i.model),e._dispatchEvent(new Event("start")))},SepiaVoiceRecorder.onDisconnected=function(){e._dispatchEvent(new Event("end"))},SepiaVoiceRecorder.onProcessorInitError=function(i){r.onMicError();const s=new bd;switch(s.message=i.message,i.name){case"NotAllowedError":s.error=Yp.NOTALLOWED,s._dispatch(e);break;default:console.log(i);break}location.protocol=="http:"&&!location.origin.indexOf("http://localhost")==0&&console.error("Init. ERROR - Likely because of insecure origin (no HTTPS or localhost)")},SepiaVoiceRecorder.onProcessorError=function(i){console.error("SepiaVoiceRecorder -  onProcessorError",i),r.onMicError(),console.log("ERROR - onProcessorError: "+i.name)},SepiaVoiceRecorder.onAudioStart=function(i){e._dispatchEvent(new Event("audiostart")),r.isRecording=!0},SepiaVoiceRecorder.onAudioEnd=function(i){e._dispatchEvent(new Event("audioend")),r.isRecording=!1,r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay)),console.log("Microphone is CLOSED")},SepiaVoiceRecorder.onProcessorRelease=function(i){console.log("SepiaVoiceRecorder -  onProcessorRelease"),r.isRecording=!1,r.isLoading=!1,r.isWaitingForFinalResult=!1},SepiaVoiceRecorder.onDebugLog=function(i){},SepiaVoiceRecorder.onResamplerData=function(i){},SepiaVoiceRecorder.onSpeechRecognitionStateChange=function(i){i.state=="onStreamStart"?(r.asrStreaming,r.asrStreaming=!0):i.state=="onStreamEnd"&&(r.asrStreaming&&(i.bufferOrTimeLimit===!0&&console.log("Speech Recognition - Stopped streaming due to buffer- or time-limit"),r.isRecording?SepiaVoiceRecorder.stop():r.isWaitingForFinalResult&&(clearTimeout(r.waitingForFinalResultTimer),r.waitingForFinalResultTimer=setTimeout(function(){r.isWaitingForFinalResult=!1},r.waitingForFinalResultDelay))),r.asrStreaming=!1)},SepiaVoiceRecorder.onSpeechRecognitionEvent=function(i){if(i.type=="result"){if(!r.isRecording&&!r.isWaitingForFinalResult)return;const s=new nve;s.transcript=i.transcript,s.confidence=i.confidence;const o=new rve([s]);if(i.isFinal){r.isWaitingForFinalResult&&!r.isRecording&&clearTimeout(r.waitingForFinalResultTimer),o.isFinal=!0;const a=new wU([o]),l=new Xw(a);if(i.transcript)l._dispatch(e,"result");else{const A=new bd;A.error=Yp.NOSPEECH,A.message="No speech was detected.",A._dispatch(e)}r.isWaitingForFinalResult=!1}else{o.isFinal=!1;const a=new wU([o]),l=new Xw(a);i.transcript?l._dispatch(e,"result"):l._dispatch(e,"nomatch"),r.isWaitingForFinalResult=!0}}else if(i.type=="error"){const s=new bd;if(s.message=i.message,i.name&&i.message)switch(i.name){case"SocketConnectionError":s.error=Yp.NETWORK,s._dispatch(e);break;case"Error":i.message==="ChunkProcessorError failed to load."&&(s.error=Yp.SERVICENOTALLOWED,s.message="You are likely unauthorized to access this SEPIA STT server.",s._dispatch(e));break;default:console.log(i);break}else console.error("Speech Recognition Error:",i)}else console.log("Speech Recognition - Event: "+i.type)},SepiaVoiceRecorder.onWaveEncoderAudioData=function(i){},SepiaVoiceRecorder.onVadStateChange=function(i,s){switch(i){case"vaup":e._dispatchEvent(new Event("soundstart"));break;case"vadown":e._dispatchEvent(new Event("soundend"));break;case"speechstart":e._dispatchEvent(new Event("speechstart"));break;case"speechend":e._dispatchEvent(new Event("speechend"));break}}}}toggleMic(){const e=this.sepiaSpeechRecognition.lang.split("-")[0];if(hA.language!=this.sepiaSpeechRecognition.lang&&hA.language!=e){const r=new bd;r.error=Yp.LANGUAGENOTSUPPORTED,r.message="The specified SEPIA STT server does not support the language specified by the user agent.",r._dispatch(this.sepiaSpeechRecognition);return}const t=this;!this.isLoading&&!this.isRecording&&!this.isWaitingForFinalResult?(this.isLoading=!0,SepiaVoiceRecorder.stopAndReleaseIfActive(function(){SepiaFW.webAudio.tryNativeStreamResampling=!1;const r={language:t.sepiaSpeechRecognition.lang,continuous:t.sepiaSpeechRecognition.continuous,messageFormat:"default"};var i=Object.assign(t.sepiaSpeechRecognitionConfig,r);console.log(i),SepiaVoiceRecorder.create({gain:t.gain,asr:i,vad:!0})})):this.isRecording?SepiaVoiceRecorder.stop():(this.isLoading||this.isWaitingForFinalResult)&&SepiaVoiceRecorder.stopAndReleaseIfActive(function(){t.isLoading=!1,t.isRecording=!1,t.isWaitingForFinalResult=!1})}releaseMic(e){SepiaVoiceRecorder.stopAndReleaseIfActive(function(){this.isLoading=!1,this.isRecording=!1,this.isWaitingForFinalResult=!1,e&&e()})}onMicError(){this.isRecording=!1,this.isWaitingForFinalResult=!1,this.isLoading=!1}}class BV{constructor(){tt(this,"src","");tt(this,"weight",1)}}var Kc,uC,C4;class cve{constructor(){Pu(this,uC);Pu(this,Kc,[]);tt(this,"length",0);tt(this,"addFromURI",(e,t=1)=>{const r=new BV;fetch(e).then(i=>{i.text().then(s=>{r.src=s,r.weight=t,Cs(this,Kc).push(r)})}).catch(i=>{console.log("Failed to add SpeechGrammar from URI: ",i)})});tt(this,"addFromString",(e,t=1)=>{const r=new BV;r.src=e,r.weight=t,Cs(this,Kc).push(r)});return new Proxy(this,{get:(e,t)=>{var r;if(t==="addFromString"||t==="addFromURI")return function(){return e[t].apply(e,arguments)};if(typeof+t=="number")return tR(r=e,uC,C4).call(r,t);if(t==="length")return Cs(e,Kc).length}})}}Kc=new WeakMap,uC=new WeakSet,C4=function(e){return Cs(this,Kc)[e]};let b4={};const uve=n=>(b4=n,fve);var zd;class fve{constructor(){Pu(this,zd,new Ave(this,b4));tt(this,"grammars",new cve);tt(this,"lang",document.documentElement.lang||navigator.language);tt(this,"continuous",!1);tt(this,"interimResults",!1);tt(this,"maxAlternatives",1);tt(this,"start",()=>{Cs(this,zd).toggleMic()});tt(this,"stop",()=>{Cs(this,zd).toggleMic()});tt(this,"abort",()=>{Cs(this,zd).toggleMic()});tt(this,"onaudiostart",e=>{});tt(this,"onsoundstart",e=>{});tt(this,"onspeechstart",e=>{});tt(this,"onspeechend",e=>{});tt(this,"onsoundend",e=>{});tt(this,"onaudioend",e=>{});tt(this,"onresult",e=>{});tt(this,"onnomatch",e=>{});tt(this,"onerror",e=>{});tt(this,"onstart",e=>{});tt(this,"onend",e=>{});tt(this,"_eventCallbacks",new Map);tt(this,"_dispatchEvent",e=>{const t=this._eventCallbacks.get(e.type);t&&t.forEach(r=>r(e)),this[`on${e.type}`](e)});tt(this,"addEventListener",(e,t)=>{this._eventCallbacks.has(e)?this._eventCallbacks.get(e).push(t):this._eventCallbacks.set(e,[t])});tt(this,"removeEventListener",(e,t)=>{if(this._eventCallbacks.has(e)){const r=this._eventCallbacks.get(e);r.includes(t)&&r.splice(r.indexOf(t),1)}});tve()}}zd=new WeakMap;class dve{constructor(){tt(this,"serverUrl","http://localhost:20741");tt(this,"clientId","any");tt(this,"accessToken","test1234");tt(this,"task","assistant");tt(this,"model","");tt(this,"optimizeFinalResult",!0);tt(this,"engineOptions",{})}}const hve=2e4;async function pve(n){let e=0;const t=[];for(let r=n.length-1;r>=0;r--){const i=n[r],s=`${i==null?void 0:i.name}: ${i==null?void 0:i.message}`;if(e+=s.length,e<hve)t.push(s);else break}return t.reverse(),t}const gve="_message_1mjdp_1",mve="_colorBg_1mjdp_13",vve="_name_1mjdp_24",yve="_speaker_1mjdp_39",Xp={message:gve,"chat-bubble":"_chat-bubble_1mjdp_1",colorBg:mve,name:vve,speaker:yve},Bve=n=>{const{timestamp:e,name:t,message:r,type:i,color:s,err:o}=n;let a=new Date(e);const l=a.getHours()<10?"0"+a.getHours():a.getHours(),A=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),c=`${l}:${A}`;return W.jsxs("div",{className:`${Xp.message} ${i&&Xp.speaker}`,children:[W.jsxs("div",{className:Xp.name,style:i?{}:{color:s},children:[t,", ",W.jsx("span",{children:c})]}),W.jsxs("div",{className:Xp["chat-bubble"],style:o?{color:"#7a7a7a"}:{},children:[W.jsx("div",{className:Xp.colorBg,style:i?{}:{backgroundColor:s}}),r+(o?"  ( Not sent )":"")]})]})},wve=at.sessionId??Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);at.sessionId=wve;const Cve=new dve,bve="Speaker",xve=window.webkitSpeechRecognition||uve(Cve),Ive=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Fve=["January","February","March","April","May","June","July","August","September","October","November","December"];function Eve({templateInfo:n,micEnabled:e,setMicEnabled:t,speechRecognition:r,setSpeechRecognition:i}){const[s,o]=z.useState(!1),{t:a}=me.useContext(Bs),[l]=z.useState(at[`${n.id}_fulBio`]),[A]=z.useState(at[`${n.id}_fulBio`].colorKey?b1[at[`${n.id}_fulBio`].colorKey].fontColor:b1[Object.keys(b1)[0]].fontColor),[c,u]=z.useState(at.speaker||bve);me.useEffect(()=>{at.speaker=c},[c]);const[f,d]=z.useState(""),[h,p]=z.useState([]),m=async b=>{b.preventDefault(),d(b.target.value)};z.useEffect(()=>{const b=document.querySelector("#msgscroll");b.scrollTo(0,b.scrollHeight)},[h]),me.useEffect(()=>{const b=F=>{F.ctrlKey&&F.key==="c"&&p([])};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[]);const g=()=>{r.start(),t(!0)},v=()=>{r.stop(),t(!1)};me.useEffect(()=>{s||document.getElementById("messageInput").focus()},[s]);const y=async b=>{if(b.preventDefault&&b.preventDefault(),v(),!s){const x=b.target.elements.message.value;w(x)}},w=async b=>{if(b&&b!==""&&!s){o(!0);const F=l.name;d("");const x={name:c,message:b,timestamp:Date.now(),type:1};p(R=>[...R,x]);const S=await pve(h);if(S.push(`${c}: ${b}`),b.replaceAll(" ","")===""){const R=Zde(Gde(O0e)),Z={name:F,message:R,timestamp:Date.now(),type:0};p(Y=>[...Y,Z]),o(!1)}else try{const R=new Date,Z=`${Ive[R.getDay()]}, ${Fve[R.getMonth()]} ${R.getDate()}, ${1900+R.getYear()}`,Y=`${R.getHours()}:${R.getMinutes()} `,Q="https://upstreet.webaverse.com/api/ai",E={prompt:`The following is part of a conversation between ${c} and ${F}. ${F} is descriptive and helpful, and is honest when it doesn't know an answer. Included is a context which acts a short-term memory, used to guide the conversation and track topics.

CONTEXT:
Current Day: ${Z}
Current Time: ${Y}

Info about ${F}
---

Bio: "${l.bio}"

Question 1: "${l.question1}"
Response 1: "${l.response1}"

Question 2: "${l.question2}"
Response 2: "${l.response2}"

Question 3: "${l.question3}"
Response 3: "${l.response3}"

Favourite Color: "${l.colorKey}"

MOST RECENT MESSAGES:

${S.join(`
`)}
${F}:`,max_tokens:250,temperature:.9,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:[c+":",F+":","\\n"]};B4.post(Q,E).then(M=>{const D=M.data.choices[0].text,T={name:F,message:D,timestamp:Date.now(),type:0};p(V=>[...V,T]),o(!1)}).catch(M=>{x.error=!0,o(!1),console.error(M)})}catch(R){o(!1),console.error(R)}}};let C=!1;return me.useEffect(()=>{if(!s){if(r||C)return;C=!0;const b=new xve({});i(b),b.onerror=F=>console.error(F.error,F.message),b.onresult=F=>{const x=F.resultIndex;F.results[x].isFinal&&(w(`${F.results[x][0].transcript}`),o(!0))},b.interimResults=!0,b.continuous=!0}},[]),W.jsxs("div",{className:Ko.chatBox,children:[W.jsxs("div",{className:Ko.speaker,children:[W.jsx("p",{className:Ko.warning,children:a("text.apiUnderMaintnance")}),W.jsx("label",{htmlFor:"speaker",children:a("labels.yourName")}),W.jsx("input",{type:"text",name:"speaker",defaultValue:c,onChange:b=>u(b.target.value)})]}),W.jsx("label",{children:a("labels.conversation")}),W.jsx("div",{className:Ko.messages,children:W.jsx("div",{className:Ko.scrollBox,id:"msgscroll",children:h.map((b,F)=>{if(b.timestamp)return W.jsx(Bve,{name:b.name,timestamp:b.timestamp,message:b.message,type:b.type,color:A,err:b.error},F)})})}),W.jsxs("form",{className:Ko.send,style:{opacity:s?"0.4":"1"},onSubmit:y,children:[W.jsx(Zt,{type:"icon",theme:"light",icon:"microphone",className:Ko.mic,size:32,active:!!e,onClick:()=>e?v():g()}),W.jsx("input",{autoComplete:"off",type:"text",name:"message",id:"messageInput",value:f,onInput:m,onChange:m,disabled:s}),W.jsx(Zt,{theme:"light",text:a("callToAction.send"),size:14,onSubmit:y,className:Ko.sendButton,type:"submit"})]}),W.jsxs("p",{className:`${Ko.isTyping} ${s&&Ko.show}`,children:[W.jsx("span",{style:{color:A},children:l.name})," is typing..."]})]})}function Uve(){const{setViewMode:n}=z.useContext(gi),[e,t]=z.useState(!1),[r,i]=z.useState(!1),{playSound:s}=z.useContext(ys),{isMute:o}=z.useContext(vs),a=()=>{n(st.SAVE),!o&&s("backNextButton"),r&&r.stop(),t(!1)},{t:l}=me.useContext(Bs);return W.jsxs("div",{className:Uc.container,children:[W.jsx("div",{className:"sectionTitle",children:l("pageTitles.chat")}),W.jsxs("div",{className:Uc.chatContainer,children:[W.jsx("div",{className:Uc.topLine}),W.jsx("div",{className:Uc.bottomLine}),W.jsx("div",{className:Uc.scrollContainer,children:W.jsx(Eve,{micEnabled:e,setMicEnabled:t,speechRecognition:r,setSpeechRecognition:i})})]}),W.jsx("div",{className:Uc.buttonContainer,children:W.jsx(Zt,{theme:"light",text:l("callToAction.back"),size:14,className:Uc.buttonLeft,onClick:a})})]})}const Sve="_buttonContainer_1fd4o_1",_ve="_buttonLeft_1fd4o_10",Qve="_buttonRight_1fd4o_14",Rve="_buttonCenter_1fd4o_18",vy={buttonContainer:Sve,buttonLeft:_ve,buttonRight:Qve,buttonCenter:Rve},Mve="_button_13dfi_1",wV={button:Mve},Tve="Anon",Nve=()=>{me.useContext(Bs);const[n]=z.useState(localStorage.getItem("name")||Tve),{model:e,characterManager:t}=me.useContext(qr),r=()=>{const o=at.mergeOptions_sel_option||0;return{createTextureAtlas:at.mergeOptions_create_atlas==null?!0:at.mergeOptions_create_atlas,mToonAtlasSize:wn(at.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:wn(at.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:wn(at.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:wn(at.mergeOptions_atlas_std_transp_size||6),ktxCompression:at.merge_options_ktx_compression,exportStdAtlas:o===0||o==2,exportMtoonAtlas:o===1||o==2}},i=()=>{const o=r();t.downloadVRM(n,o)},s=()=>{const o=r();t.downloadGLB(n,o)};return W.jsxs(z.Fragment,{children:[W.jsx(Zt,{theme:"light",text:"GLB",icon:"download",size:14,className:wV.button,onClick:()=>{s()}}),W.jsx(Zt,{theme:"light",text:"VRM",icon:"download",size:14,className:wV.button,onClick:i})]})},Dve="_InformationContainerPos_1a3zv_1",kve="_traitInfoTitle_1a3zv_13",Vve="_traitInfoText_1a3zv_22",Lve="_flexSelect_1a3zv_33",Pve="_scrollContainer_1a3zv_68",Wve="_checked_1a3zv_93",Ove="_checkmark_1a3zv_97",Gve="_checkboxHolder_1a3zv_110",Yt={InformationContainerPos:Dve,traitInfoTitle:kve,traitInfoText:Vve,flexSelect:Lve,"arrow-button":"_arrow-button_1a3zv_40","left-button":"_left-button_1a3zv_54","right-button":"_right-button_1a3zv_61",scrollContainer:Pve,"custom-checkbox":"_custom-checkbox_1a3zv_79","checkbox-container":"_checkbox-container_1a3zv_84",checked:Wve,checkmark:Ove,checkboxHolder:Gve},Zve="_mainTitleWrap_4fb0s_1",Jve="_mainTitle_4fb0s_1",Hve="_topLine_4fb0s_18",I1={mainTitleWrap:Zve,mainTitle:Jve,topLine:Hve};function bh({title:n,width:e,left:t,right:r}){const i={width:e?`${e}px`:null,left:t?`${t}px`:null,right:r?`${r}px`:null};return n&&W.jsxs("div",{className:I1.mainTitleWrap,style:i,children:[W.jsx("div",{className:I1.topLine}),W.jsx("div",{className:I1.mainTitle,children:n})]})}const zve="_slider_1y6nx_1",Yve="_infoContainer_1y6nx_13",yy={"slider-container":"_slider-container_1y6nx_1",slider:zve,infoContainer:Yve,"input-box":"_input-box_1y6nx_18"};function xd({title:n,value:e,min:t,max:r,onChange:i,step:s,stepBox:o}){return W.jsxs(W.Fragment,{children:[W.jsxs("div",{className:yy.infoContainer,children:[n,o&&W.jsx("input",{type:"number",min:"0",max:"100",value:e,onChange:i,className:yy["input-box"],step:o})]}),W.jsx("div",{className:yy["slider-container"],children:W.jsx("input",{type:"range",min:t,max:r,value:e,onChange:i,className:yy.slider,step:s})})]})}function mb({showDropToDownload:n,showCreateAtlas:e,mergeMenuTitle:t}){const[r,i]=me.useState(at.mergeOptions_atlas_std_size||6),[s,o]=me.useState(at.mergeOptions_atlas_std_transp_size||6),[a,l]=me.useState(at.mergeOptions_atlas_mtoon_size||6),[A,c]=me.useState(at.mergeOptions_atlas_mtoon_transp_size||6),[u,f]=me.useState(at.mergeOptions_sel_option||0),[d]=me.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[h,p]=me.useState(at.mergeOptions_drop_download||!1),[m,g]=me.useState(at.merge_options_ktx_compression||!1),[v,y]=me.useState(at.mergeOptions_create_atlas==null?!0:at.mergeOptions_create_atlas),w=R=>{p(R.target.checked),at.mergeOptions_drop_download=R.target.checked},C=R=>{g(R.target.checked),at.merge_options_ktx_compression=R.target.checked},b=R=>{y(R.target.checked),at.mergeOptions_create_atlas=R.target.checked},F=()=>{let R=u;u<=0?R=d.length-1:R-=1,f(R),at.mergeOptions_sel_option=R},x=()=>{let R=u;u>=d.length-1?R=0:R+=1,f(R),at.mergeOptions_sel_option=R},S=async(R,Z)=>{let Y=parseInt(R.target.value);Y>8?Y=8:Y<0&&(Y=0),(B=>{switch(Z){case"standard opaque":i(B),at.mergeOptions_atlas_std_size=B;break;case"standard transparent":o(B),at.mergeOptions_atlas_std_transp_size=B;break;case"mtoon opaque":l(B),at.mergeOptions_atlas_mtoon_size=B;break;case"mtoon transparent":c(B),at.mergeOptions_atlas_mtoon_transp_size=B;break}})(Y)};return W.jsxs("div",{className:Yt.InformationContainerPos,children:[W.jsx(bh,{title:t,width:180,left:20}),W.jsxs("div",{className:Yt.scrollContainer,children:[e&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"Create Atlas"}),W.jsx("div",{className:Yt.traitInfoText,children:W.jsxs("div",{className:Yt.checkboxHolder,children:[W.jsx("div",{}),W.jsxs("label",{className:Yt["custom-checkbox"],children:[W.jsx("input",{type:"checkbox",checked:v,onChange:b}),W.jsx("div",{className:Yt["checkbox-container"]})]}),W.jsx("div",{}),W.jsx("div",{}),v?"True":"False"]})}),W.jsx("br",{}),W.jsx("br",{})]}),(e==!1||v)&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"Merge Atlas Type"}),W.jsx("br",{}),W.jsxs("div",{className:Yt.flexSelect,children:[W.jsx("div",{className:`${Yt["arrow-button"]} ${Yt["left-button"]}`,onClick:F}),W.jsx("div",{className:Yt.traitInfoText,style:{marginBottom:"0"},children:d[u]}),W.jsx("div",{className:`${Yt["arrow-button"]} ${Yt["right-button"]}`,onClick:x})]}),W.jsx("br",{}),W.jsx("br",{}),W.jsx("br",{}),(u===0||u==2)&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"Standard Atlas Size"}),W.jsx("br",{}),W.jsxs("div",{className:Yt.traitInfoText,children:["Opaque: ",wn(r)+" x "+wn(r)]}),W.jsx(xd,{value:r,onChange:R=>S(R,"standard opaque"),min:1,max:8,step:1}),W.jsx("br",{}),W.jsxs("div",{className:Yt.traitInfoText,children:["Transparent: ",wn(s)+" x "+wn(s)]}),W.jsx(xd,{value:s,onChange:R=>S(R,"standard transparent"),min:1,max:8,step:1}),W.jsx("br",{})," ",W.jsx("br",{})," ",W.jsx("br",{})]}),(u===1||u==2)&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"MToon Atlas Size"}),W.jsx("br",{}),W.jsxs("div",{className:Yt.traitInfoText,children:["Opaque: ",wn(a)+" x "+wn(a)]}),W.jsx(xd,{value:a,onChange:R=>S(R,"mtoon opaque"),min:1,max:8,step:1}),W.jsx("br",{}),W.jsxs("div",{className:Yt.traitInfoText,children:["Transparent: ",wn(A)+" x "+wn(A)]}),W.jsx(xd,{value:A,onChange:R=>S(R,"mtoon transparent"),min:1,max:8,step:1}),W.jsx("br",{})," ",W.jsx("br",{})," ",W.jsx("br",{})]}),n&&W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"Drag Drop - Download"}),W.jsx("div",{className:Yt.traitInfoText,children:W.jsxs("div",{className:Yt.checkboxHolder,children:[W.jsx("div",{}),W.jsxs("label",{className:Yt["custom-checkbox"],children:[W.jsx("input",{type:"checkbox",checked:h,onChange:w}),W.jsx("div",{className:Yt["checkbox-container"]})]}),W.jsx("div",{}),W.jsx("div",{}),h?"True":"False"]})})]}),W.jsxs(W.Fragment,{children:[W.jsx("div",{className:Yt.traitInfoTitle,children:"KTX Compression"}),W.jsx("div",{className:Yt.traitInfoText,children:W.jsxs("div",{className:Yt.checkboxHolder,children:[W.jsx("div",{}),W.jsxs("label",{className:Yt["custom-checkbox"],children:[W.jsx("input",{type:"checkbox",checked:m,onChange:C}),W.jsx("div",{className:Yt["checkbox-container"]})]}),W.jsx("div",{}),W.jsx("div",{}),m?"True":"False"]})})]})]})]})]})}const Xve="_dropArea_1a0z4_1",Kve={dropArea:Xve};function B0({onFilesDrop:n}){const[e,t]=me.useState(!1),[r,i]=z.useState(null);me.useEffect(()=>{const o=l=>{l.preventDefault(),t(!1);const A=l.dataTransfer.files;n&&i(A)},a=l=>{l.preventDefault(),t(!0)};return window.addEventListener("drop",o),window.addEventListener("dragover",a),()=>{window.removeEventListener("drop",o),window.removeEventListener("dragover",a)}},[]),me.useEffect(()=>{r&&n(r)},[r]);const s=()=>{t(!1)};return W.jsx("div",{onDragLeave:s,className:Kve.dropArea,style:{display:e?"flex":"none"}})}function jve(){const{t:n}=me.useContext(Bs),{playSound:e}=z.useContext(ys),{isMute:t}=z.useContext(vs),{setViewMode:r}=z.useContext(gi),i=()=>{r(st.APPEARANCE),!t&&e("backNextButton")},s=()=>{r(st.MINT),!t&&e("backNextButton")},o=async a=>{const l=a[0];l&&l.name.toLowerCase().endsWith(".json")};return W.jsxs("div",{className:vy.container,children:[W.jsx("div",{className:"sectionTitle",children:n("pageTitles.saveCharacter")}),W.jsxs("div",{className:vy.buttonContainer,children:[W.jsx(B0,{onFilesDrop:o}),W.jsx(Zt,{theme:"light",text:n("callToAction.back"),size:14,className:vy.buttonLeft,onClick:i}),W.jsx(mb,{showCreateAtlas:!0,mergeMenuTitle:"Download Options"}),W.jsx(Nve,{}),W.jsx(Zt,{theme:"light",text:"mint",size:14,className:vy.buttonRight,onClick:s})]})]})}const Sc={},w0="abi/5.7.0",Mt=new Ae(w0),yu={};let CV={calldata:!0,memory:!0,storage:!0},$ve={calldata:!0,memory:!0};function By(n,e){if(n==="bytes"||n==="string"){if(CV[e])return!0}else if(n==="address"){if(e==="payable")return!0}else if((n.indexOf("[")>=0||n==="tuple")&&$ve[e])return!0;return(CV[e]||e==="payable")&&Mt.throwArgumentError("invalid modifier","name",e),!1}function qve(n,e){let t=n;function r(a){Mt.throwArgumentError(`unexpected character at position ${a}`,"param",n)}n=n.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<n.length;a++){let l=n[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||r(a),o.state.allowType=!1,o.type=Mf(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),By(o.type,o.name)&&(o.name=""),o.type=Mf(o.type);let A=o;o=o.parent,o||r(a),delete A.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||r(a),o.indexed=!0,o.name=""),By(o.type,o.name)&&(o.name=""),o.type=Mf(o.type);let c=i(o.parent);o.parent.components.push(c),delete o.parent,o=c;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Mf(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||r(a),o.indexed&&r(a),o.indexed=!0,o.name=""):By(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||r(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||r(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:r(a)}}return o.parent&&Mt.throwArgumentError("unexpected eof","param",n),delete s.state,o.name==="indexed"?(e||r(t.length-7),o.indexed&&r(t.length-7),o.indexed=!0,o.name=""):By(o.type,o.name)&&(o.name=""),s.type=Mf(s.type),s}function yB(n,e){for(let t in e)Ie(n,t,e[t])}const Gt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),eye=new RegExp(/^(.*)\[([0-9]*)\]$/);class yr{constructor(e,t){e!==yu&&Mt.throwError("use fromString",Ae.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),yB(this,t);let r=this.type.match(eye);r?yB(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:yr.fromObject({type:r[1],components:this.components}),baseType:"array"}):yB(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Gt.sighash),Gt[e]||Mt.throwArgumentError("invalid format type","format",e),e===Gt.json){let r={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(r.indexed=this.indexed),this.components&&(r.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(r)}let t="";return this.baseType==="array"?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Gt.sighash&&(t+=this.type),t+="("+this.components.map(r=>r.format(e)).join(e===Gt.full?", ":",")+")"):t+=this.type,e!==Gt.sighash&&(this.indexed===!0&&(t+=" indexed"),e===Gt.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return typeof e=="string"?yr.fromString(e,t):yr.fromObject(e)}static fromObject(e){return yr.isParamType(e)?e:new yr(yu,{name:e.name||null,type:Mf(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(yr.fromObject):null})}static fromString(e,t){function r(i){return yr.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return r(qve(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Gm(n,e){return nye(n).map(t=>yr.fromString(t,e))}class wl{constructor(e,t){e!==yu&&Mt.throwError("use a static from method",Ae.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),yB(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return wl.isFragment(e)?e:typeof e=="string"?wl.fromString(e):wl.fromObject(e)}static fromObject(e){if(wl.isFragment(e))return e;switch(e.type){case"function":return da.fromObject(e);case"event":return hl.fromObject(e);case"constructor":return fa.fromObject(e);case"error":return yA.fromObject(e);case"fallback":case"receive":return null}return Mt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?hl.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?da.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?fa.fromString(e.trim()):e.split(" ")[0]==="error"?yA.fromString(e.substring(5).trim()):Mt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class hl extends wl{format(e){if(e||(e=Gt.sighash),Gt[e]||Mt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",e!==Gt.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return typeof e=="string"?hl.fromString(e):hl.fromObject(e)}static fromObject(e){if(hl.isEventFragment(e))return e;e.type!=="event"&&Mt.throwArgumentError("invalid event object","value",e);const t={name:Zm(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(yr.fromObject):[],type:"event"};return new hl(yu,t)}static fromString(e){let t=e.match(Jm);t||Mt.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":r=!0;break;case"":break;default:Mt.warn("unknown modifier: "+i)}}),hl.fromObject({name:t[1].trim(),anonymous:r,inputs:Gm(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function x4(n,e){e.gas=null;let t=n.split("@");return t.length!==1?(t.length>2&&Mt.throwArgumentError("invalid human-readable ABI signature","value",n),t[1].match(/^[0-9]+$/)||Mt.throwArgumentError("invalid human-readable ABI signature gas","value",n),e.gas=ke.from(t[1]),t[0]):n}function I4(n,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",n.split(" ").forEach(t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}})}function F4(n){let e={constant:!1,payable:!0,stateMutability:"payable"};return n.stateMutability!=null?(e.stateMutability=n.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",n.constant!=null&&!!n.constant!==e.constant&&Mt.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",n),e.payable=e.stateMutability==="payable",n.payable!=null&&!!n.payable!==e.payable&&Mt.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",n)):n.payable!=null?(e.payable=!!n.payable,n.constant==null&&!e.payable&&n.type!=="constructor"&&Mt.throwArgumentError("unable to determine stateMutability","value",n),e.constant=!!n.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Mt.throwArgumentError("cannot have constant payable function","value",n)):n.constant!=null?(e.constant=!!n.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):n.type!=="constructor"&&Mt.throwArgumentError("unable to determine stateMutability","value",n),e}class fa extends wl{format(e){if(e||(e=Gt.sighash),Gt[e]||Mt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});e===Gt.sighash&&Mt.throwError("cannot format a constructor for sighash",Ae.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "),t.trim()}static from(e){return typeof e=="string"?fa.fromString(e):fa.fromObject(e)}static fromObject(e){if(fa.isConstructorFragment(e))return e;e.type!=="constructor"&&Mt.throwArgumentError("invalid constructor object","value",e);let t=F4(e);t.constant&&Mt.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(yr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?ke.from(e.gas):null};return new fa(yu,r)}static fromString(e){let t={type:"constructor"};e=x4(e,t);let r=e.match(Jm);return(!r||r[1].trim()!=="constructor")&&Mt.throwArgumentError("invalid constructor string","value",e),t.inputs=Gm(r[2].trim(),!1),I4(r[3].trim(),t),fa.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class da extends fa{format(e){if(e||(e=Gt.sighash),Gt[e]||Mt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",e!==Gt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(r=>r.format(e)).join(", ")+") "),this.gas!=null&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return typeof e=="string"?da.fromString(e):da.fromObject(e)}static fromObject(e){if(da.isFunctionFragment(e))return e;e.type!=="function"&&Mt.throwArgumentError("invalid function object","value",e);let t=F4(e);const r={type:e.type,name:Zm(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(yr.fromObject):[],outputs:e.outputs?e.outputs.map(yr.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?ke.from(e.gas):null};return new da(yu,r)}static fromString(e){let t={type:"function"};e=x4(e,t);let r=e.split(" returns ");r.length>2&&Mt.throwArgumentError("invalid function string","value",e);let i=r[0].match(Jm);if(i||Mt.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Zm(t.name),t.inputs=Gm(i[2],!1),I4(i[3].trim(),t),r.length>1){let s=r[1].match(Jm);(s[1].trim()!=""||s[3].trim()!="")&&Mt.throwArgumentError("unexpected tokens","value",e),t.outputs=Gm(s[2],!1)}else t.outputs=[];return da.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function bV(n){const e=n.format();return(e==="Error(string)"||e==="Panic(uint256)")&&Mt.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",n),n}class yA extends wl{format(e){if(e||(e=Gt.sighash),Gt[e]||Mt.throwArgumentError("invalid format type","format",e),e===Gt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});let t="";return e!==Gt.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map(r=>r.format(e)).join(e===Gt.full?", ":",")+") ",t.trim()}static from(e){return typeof e=="string"?yA.fromString(e):yA.fromObject(e)}static fromObject(e){if(yA.isErrorFragment(e))return e;e.type!=="error"&&Mt.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:Zm(e.name),inputs:e.inputs?e.inputs.map(yr.fromObject):[]};return bV(new yA(yu,t))}static fromString(e){let t={type:"error"},r=e.match(Jm);return r||Mt.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&Zm(t.name),t.inputs=Gm(r[2],!1),bV(yA.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Mf(n){return n.match(/^uint($|[^1-9])/)?n="uint256"+n.substring(4):n.match(/^int($|[^1-9])/)&&(n="int256"+n.substring(3)),n}const tye=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Zm(n){return(!n||!n.match(tye))&&Mt.throwArgumentError(`invalid identifier "${n}"`,"value",n),n}const Jm=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function nye(n){n=n.trim();let e=[],t="",r=0;for(let i=0;i<n.length;i++){let s=n[i];s===","&&r===0?(e.push(t),t=""):(t+=s,s==="("?r++:s===")"&&(r--,r===-1&&Mt.throwArgumentError("unbalanced parenthesis","value",n)))}return t&&e.push(t),e}const rQ=new Ae(w0);function rye(n){const e=[],t=function(r,i){if(Array.isArray(i))for(let s in i){const o=r.slice();o.push(s);try{t(o,i[s])}catch(a){e.push({path:o,error:a})}}};return t([],n),e}class Wl{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){rQ.throwArgumentError(e,this.localName,t)}}class CU{constructor(e){Ie(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return xi(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(ns(e._data))}writeBytes(e){let t=lt(e);const r=t.length%this.wordSize;return r&&(t=ns([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=lt(ke.from(e));return t.length>this.wordSize&&rQ.throwError("value out-of-bounds",Ae.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ns([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Kw{constructor(e,t,r,i){Ie(this,"_data",lt(e)),Ie(this,"wordSize",t||32),Ie(this,"_coerceFunc",r),Ie(this,"allowLoose",i),this._offset=0}get data(){return je(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Kw.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:rQ.throwError("data out-of-bounds",Ae.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Kw(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return ke.from(this.readBytes(this.wordSize))}}class iye extends Wl{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Tr(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return Tr(Ln(e.readValue().toHexString(),20))}}class sye extends Wl{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Id=new Ae(w0);function E4(n,e,t){let r=null;if(Array.isArray(t))r=t;else if(t&&typeof t=="object"){let l={};r=e.map(A=>{const c=A.localName;return c||Id.throwError("cannot encode object for signature with missing names",Ae.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]&&Id.throwError("cannot encode object for signature with duplicate names",Ae.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:t}),l[c]=!0,t[c]})}else Id.throwArgumentError("invalid tuple value","tuple",t);e.length!==r.length&&Id.throwArgumentError("types/value length mismatch","tuple",t);let i=new CU(n.wordSize),s=new CU(n.wordSize),o=[];e.forEach((l,A)=>{let c=r[A];if(l.dynamic){let u=s.length;l.encode(s,c);let f=i.writeUpdatableValue();o.push(d=>{f(d+u)})}else l.encode(i,c)}),o.forEach(l=>{l(i.length)});let a=n.appendWriter(i);return a+=n.appendWriter(s),a}function U4(n,e){let t=[],r=n.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=n.readValue(),l=r.subReader(a.toNumber());try{o=s.decode(l)}catch(A){if(A.code===Ae.errors.BUFFER_OVERRUN)throw A;o=A,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(n)}catch(a){if(a.code===Ae.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&t.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),t[a]!=null))return;const l=t[o];l instanceof Error?Object.defineProperty(t,a,{enumerable:!0,get:()=>{throw l}}):t[a]=l});for(let s=0;s<t.length;s++){const o=t[s];o instanceof Error&&Object.defineProperty(t,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(t)}class oye extends Wl{constructor(e,t,r){const i=e.type+"["+(t>=0?t:"")+"]",s=t===-1||e.dynamic;super("array",i,r,s),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;r===-1&&(r=t.length,e.writeValue(t.length)),Id.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<t.length;s++)i.push(this.coder);return E4(e,i,t)}decode(e){let t=this.length;t===-1&&(t=e.readValue().toNumber(),t*32>e._data.length&&Id.throwError("insufficient data length",Ae.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let i=0;i<t;i++)r.push(new sye(this.coder));return e.coerce(this.name,U4(e,r))}}class aye extends Wl{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class S4 extends Wl{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=lt(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class lye extends S4{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,je(super.decode(e)))}}class Aye extends Wl{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=lt(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,je(e.readBytes(this.size)))}}class cye extends Wl{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class uye extends Wl{constructor(e,t,r){const i=(t?"int":"uint")+e*8;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=ke.from(t),i=t9.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(r.gt(s)||r.lt(s.add(e9).mul(qz)))&&this._throwError("value out-of-bounds",t)}else(r.lt(T3)||r.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(this.size*8).mask(this.size*8),this.signed&&(r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);return this.signed&&(t=t.fromTwos(this.size*8)),e.coerce(this.name,t)}}class fye extends S4{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,xa(t))}decode(e){return $m(super.decode(e))}}class wy extends Wl{constructor(e,t){let r=!1;const i=[];e.forEach(o=>{o.dynamic&&(r=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const t=this.coders.reduce((r,i)=>{const s=i.localName;return s&&(r[s]||(r[s]=0),r[s]++),r},{});return this.coders.forEach((r,i)=>{let s=r.localName;!s||t[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,t){return E4(e,this.coders,t)}decode(e){return e.coerce(this.name,U4(e,this.coders))}}const Cy=new Ae(w0),dye=new RegExp(/^bytes([0-9]*)$/),hye=new RegExp(/^(u?int)([0-9]*)$/);class pye{constructor(e){Ie(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new iye(e.name);case"bool":return new aye(e.name);case"string":return new fye(e.name);case"bytes":return new lye(e.name);case"array":return new oye(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new wy((e.components||[]).map(r=>this._getCoder(r)),e.name);case"":return new cye(e.name)}let t=e.type.match(hye);if(t){let r=parseInt(t[2]||"256");return(r===0||r>256||r%8!==0)&&Cy.throwArgumentError("invalid "+t[1]+" bit length","param",e),new uye(r/8,t[1]==="int",e.name)}if(t=e.type.match(dye),t){let r=parseInt(t[1]);return(r===0||r>32)&&Cy.throwArgumentError("invalid bytes length","param",e),new Aye(r,e.name)}return Cy.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Kw(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new CU(this._getWordSize())}getDefaultValue(e){const t=e.map(i=>this._getCoder(yr.from(i)));return new wy(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Cy.throwError("types/values length mismatch",Ae.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(o=>this._getCoder(yr.from(o))),i=new wy(r,"_"),s=this._getWriter();return i.encode(s,t),s.data}decode(e,t,r){const i=e.map(o=>this._getCoder(yr.from(o)));return new wy(i,"_").decode(this._getReader(lt(t),r))}}const gye=new pye,In=new Ae(w0);class mye extends Km{}class vye extends Km{}class yye extends Km{}class bU extends Km{static isIndexed(e){return!!(e&&e._isIndexed)}}const Bye={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function xV(n,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${n}`);return t.error=e,t}class IV{constructor(e){let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Ie(this,"fragments",t.map(r=>wl.from(r)).filter(r=>r!=null)),Ie(this,"_abiCoder",rs(new.target,"getAbiCoder")()),Ie(this,"functions",{}),Ie(this,"errors",{}),Ie(this,"events",{}),Ie(this,"structs",{}),this.fragments.forEach(r=>{let i=null;switch(r.type){case"constructor":if(this.deploy){In.warn("duplicate definition - constructor");return}Ie(this,"deploy",r);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=r.format();if(i[s]){In.warn("duplicate definition - "+s);return}i[s]=r}),this.deploy||Ie(this,"deploy",fa.from({payable:!1,type:"constructor"})),Ie(this,"_isInterface",!0)}format(e){e||(e=Gt.full),e===Gt.sighash&&In.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map(r=>r.format(e));return e===Gt.json?JSON.stringify(t.map(r=>JSON.parse(r))):t}static getAbiCoder(){return gye}static getAddress(e){return Tr(e)}static getSighash(e){return Or($f(e.format()),0,4)}static getEventTopic(e){return $f(e.format())}getFunction(e){if(bt(e)){for(const r in this.functions)if(e===this.getSighash(r))return this.functions[r];In.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===r);return i.length===0?In.throwArgumentError("no matching function","name",r):i.length>1&&In.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}const t=this.functions[da.fromString(e).format()];return t||In.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(bt(e)){const r=e.toLowerCase();for(const i in this.events)if(r===this.getEventTopic(i))return this.events[i];In.throwArgumentError("no matching event","topichash",r)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===r);return i.length===0?In.throwArgumentError("no matching event","name",r):i.length>1&&In.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}const t=this.events[hl.fromString(e).format()];return t||In.throwArgumentError("no matching event","signature",e),t}getError(e){if(bt(e)){const r=rs(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===r(s))return this.errors[i]}In.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const r=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===r);return i.length===0?In.throwArgumentError("no matching error","name",r):i.length>1&&In.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}const t=this.errors[da.fromString(e).format()];return t||In.throwArgumentError("no matching error","signature",e),t}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch{throw t}}return rs(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),rs(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){typeof e=="string"&&(e=this.getError(e));const r=lt(t);return je(r.slice(0,4))!==this.getSighash(e)&&In.throwArgumentError(`data signature does not match error ${e.name}.`,"data",je(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return typeof e=="string"&&(e=this.getError(e)),je(ns([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){typeof e=="string"&&(e=this.getFunction(e));const r=lt(t);return je(r.slice(0,4))!==this.getSighash(e)&&In.throwArgumentError(`data signature does not match function ${e.name}.`,"data",je(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return typeof e=="string"&&(e=this.getFunction(e)),je(ns([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){typeof e=="string"&&(e=this.getFunction(e));let r=lt(t),i=null,s="",o=null,a=null,l=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch{}break;case 4:{const A=je(r.slice(0,4)),c=Bye[A];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,l=c.signature,c.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const u=this.getError(A);o=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,l=u.format()}catch{}break}}return In.throwError("call revert exception"+s,Ae.errors.CALL_EXCEPTION,{method:e.format(),data:je(t),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,t){return typeof e=="string"&&(e=this.getFunction(e)),je(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){typeof e=="string"&&(e=this.getEvent(e)),t.length>e.inputs.length&&In.throwError("too many arguments for "+e.format(),Ae.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?$f(o):s.type==="bytes"?er(je(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=ke.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),Ln(je(o),32));for(t.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&In.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?In.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?r.push(s.map(l=>i(a,l))):r.push(i(a,s))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,t){typeof e=="string"&&(e=this.getEvent(e));const r=[],i=[],s=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&In.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{const l=t[a];if(o.indexed)if(o.type==="string")r.push($f(l));else if(o.type==="bytes")r.push(er(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:r}}decodeEventLog(e,t,r){if(typeof e=="string"&&(e=this.getEvent(e)),r!=null&&!e.anonymous){let f=this.getEventTopic(e);(!bt(r[0],32)||r[0].toLowerCase()!==f)&&In.throwError("fragment/topic mismatch",Ae.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:f,value:r[0]}),r=r.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((f,d)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(i.push(yr.fromObject({type:"bytes32",name:f.name})),o.push(!0)):(i.push(f),o.push(!1)):(s.push(f),o.push(!1))});let a=r!=null?this._abiCoder.decode(i,ns(r)):null,l=this._abiCoder.decode(s,t,!0),A=[],c=0,u=0;e.inputs.forEach((f,d)=>{if(f.indexed)if(a==null)A[d]=new bU({_isIndexed:!0,hash:null});else if(o[d])A[d]=new bU({_isIndexed:!0,hash:a[u++]});else try{A[d]=a[u++]}catch(h){A[d]=h}else try{A[d]=l[c++]}catch(h){A[d]=h}if(f.name&&A[f.name]==null){const h=A[d];h instanceof Error?Object.defineProperty(A,f.name,{enumerable:!0,get:()=>{throw xV(`property ${JSON.stringify(f.name)}`,h)}}):A[f.name]=h}});for(let f=0;f<A.length;f++){const d=A[f];d instanceof Error&&Object.defineProperty(A,f,{enumerable:!0,get:()=>{throw xV(`index ${f}`,d)}})}return Object.freeze(A)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new vye({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:ke.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new mye({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=je(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new yye({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const wye="contracts/5.7.0";var Bu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{A(r.next(c))}catch(u){o(u)}}function l(c){try{A(r.throw(c))}catch(u){o(u)}}function A(c){c.done?s(c.value):i(c.value).then(a,l)}A((r=r.apply(n,e||[])).next())})};const Zn=new Ae(wye);function jw(n,e){return Bu(this,void 0,void 0,function*(){const t=yield e;typeof t!="string"&&Zn.throwArgumentError("invalid address or ENS name","name",t);try{return Tr(t)}catch{}n||Zn.throwError("a provider or signer is needed to resolve ENS names",Ae.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const r=yield n.resolveName(t);return r==null&&Zn.throwArgumentError("resolver or addr is not configured for ENS name","name",t),r})}function BB(n,e,t){return Bu(this,void 0,void 0,function*(){return Array.isArray(t)?yield Promise.all(t.map((r,i)=>BB(n,Array.isArray(e)?e[i]:e[r.name],r))):t.type==="address"?yield jw(n,e):t.type==="tuple"?yield BB(n,e,t.components):t.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(r=>BB(n,r,t.arrayChildren))):Promise.reject(Zn.makeError("invalid value for array",Ae.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function vb(n,e,t){return Bu(this,void 0,void 0,function*(){let r={};t.length===e.inputs.length+1&&typeof t[t.length-1]=="object"&&(r=xn(t.pop())),Zn.checkArgumentCount(t.length,e.inputs.length,"passed to contract"),n.signer?r.from?r.from=Kn({override:jw(n.signer,r.from),signer:n.signer.getAddress()}).then(A=>Bu(this,void 0,void 0,function*(){return Tr(A.signer)!==A.override&&Zn.throwError("Contract with a Signer cannot override from",Ae.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),A.override})):r.from=n.signer.getAddress():r.from&&(r.from=jw(n.provider,r.from));const i=yield Kn({args:BB(n.signer||n.provider,t,e.inputs),address:n.resolvedAddress,overrides:Kn(r)||{}}),s=n.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=ke.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=ke.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=ke.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=ke.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=ke.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=xu(a.accessList)),o.gasLimit==null&&e.gas!=null){let A=21e3;const c=lt(s);for(let u=0;u<c.length;u++)A+=4,c[u]&&(A+=64);o.gasLimit=ke.from(e.gas).add(A)}if(a.value){const A=ke.from(a.value);!A.isZero()&&!e.payable&&Zn.throwError("non-payable method cannot override value",Ae.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),o.value=A}a.customData&&(o.customData=xn(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete r.nonce,delete r.gasLimit,delete r.gasPrice,delete r.from,delete r.value,delete r.type,delete r.accessList,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.customData,delete r.ccipReadEnabled;const l=Object.keys(r).filter(A=>r[A]!=null);return l.length&&Zn.throwError(`cannot override ${l.map(A=>JSON.stringify(A)).join(",")}`,Ae.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function Cye(n,e){return function(...t){return vb(n,e,t)}}function bye(n,e){const t=n.signer||n.provider;return function(...r){return Bu(this,void 0,void 0,function*(){t||Zn.throwError("estimate require a provider or signer",Ae.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield vb(n,e,r);return yield t.estimateGas(i)})}}function xye(n,e){const t=e.wait.bind(e);e.wait=r=>t(r).then(i=>(i.events=i.logs.map(s=>{let o=as(s),a=null;try{a=n.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,A)=>n.interface.decodeEventLog(a.eventFragment,l,A),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>n.provider,o.getBlock=()=>n.provider.getBlock(i.blockHash),o.getTransaction=()=>n.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function _4(n,e,t){const r=n.signer||n.provider;return function(...i){return Bu(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=xn(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}n.deployTransaction!=null&&(yield n._deployed(s));const o=yield vb(n,e,i),a=yield r.call(o,s);try{let l=n.interface.decodeFunctionResult(e,a);return t&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===Ae.errors.CALL_EXCEPTION&&(l.address=n.address,l.args=i,l.transaction=o),l}})}}function Iye(n,e){return function(...t){return Bu(this,void 0,void 0,function*(){n.signer||Zn.throwError("sending a transaction requires a signer",Ae.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),n.deployTransaction!=null&&(yield n._deployed());const r=yield vb(n,e,t),i=yield n.signer.sendTransaction(r);return xye(n,i),i})}}function FV(n,e,t){return e.constant?_4(n,e,t):Iye(n,e)}function Q4(n){return n.address&&(n.topics==null||n.topics.length===0)?"*":(n.address||"*")+"@"+(n.topics?n.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Hm{constructor(e,t){Ie(this,"tag",e),Ie(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>t||r.listener!==e?!0:(t=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter(r=>{const i=e.slice();return setTimeout(()=>{r.listener.apply(this,i)},0),!r.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class Fye extends Hm{constructor(){super("error",null)}}class EV extends Hm{constructor(e,t,r,i){const s={address:e};let o=t.getEventTopic(r);i?(o!==i[0]&&Zn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(Q4(s),s),Ie(this,"address",e),Ie(this,"interface",t),Ie(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(t,r)=>this.interface.decodeEventLog(this.fragment,t,r);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=rye(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class UV extends Hm{constructor(e,t){super("*",{address:e}),Ie(this,"address",e),Ie(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(r,i)=>this.interface.decodeEventLog(t.eventFragment,r,i),e.args=t.args}catch{}}}class Eye{constructor(e,t,r){Ie(this,"interface",rs(new.target,"getInterface")(t)),r==null?(Ie(this,"provider",null),Ie(this,"signer",null)):e0.isSigner(r)?(Ie(this,"provider",r.provider||null),Ie(this,"signer",r)):jm.isProvider(r)?(Ie(this,"provider",r),Ie(this,"signer",null)):Zn.throwArgumentError("invalid signer or provider","signerOrProvider",r),Ie(this,"callStatic",{}),Ie(this,"estimateGas",{}),Ie(this,"functions",{}),Ie(this,"populateTransaction",{}),Ie(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];Ie(this.filters,a,(...A)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,A)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?Ie(this.filters,a,this.filters[l[0]]):Zn.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(Ie(this,"_runningEvents",{}),Ie(this,"_wrappedEmits",{}),e==null&&Zn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ie(this,"address",e),this.provider)Ie(this,"resolvedAddress",jw(this.provider,e));else try{Ie(this,"resolvedAddress",Promise.resolve(Tr(e)))}catch{Zn.throwError("provider is required to use ENS name as contract address",Ae.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Zn.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&Ie(this,o,FV(this,a,!0)),this.functions[o]==null&&Ie(this.functions,o,FV(this,a,!1)),this.callStatic[o]==null&&Ie(this.callStatic,o,_4(this,a,!0)),this.populateTransaction[o]==null&&Ie(this.populateTransaction,o,Cye(this,a)),this.estimateGas[o]==null&&Ie(this.estimateGas,o,bye(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&Ie(this,o,this[l])}catch{}this.functions[o]==null&&Ie(this.functions,o,this.functions[l]),this.callStatic[o]==null&&Ie(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&Ie(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&Ie(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return Y3(e)}static getInterface(e){return IV.isInterface(e)?e:new IV(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(t=>(t==="0x"&&Zn.throwError("contract not deployed",Ae.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Zn.throwError("sending a transactions require a signer",Ae.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=xn(e||{});return["from","to"].forEach(function(r){t[r]!=null&&Zn.throwError("cannot override "+r,Ae.errors.UNSUPPORTED_OPERATION,{operation:r})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){typeof e=="string"&&(e=new jU(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ie(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return bU.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Fye);if(e==="event")return this._normalizeRunningEvent(new Hm("event",null));if(e==="*")return this._normalizeRunningEvent(new UV(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new EV(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const r=e.topics[0];if(typeof r!="string")throw new Error("invalid topic");const i=this.interface.getEvent(r);return this._normalizeRunningEvent(new EV(this.address,this.interface,i,e.topics))}catch{}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Hm(Q4(t),t))}return this._normalizeRunningEvent(new UV(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const i=as(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||Zn.throwError("events require a provider or a signer with a provider",Ae.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,t);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){const i=this._getRunningEvent(e),s=xn(i.filter);return typeof t=="string"&&bt(t,32)?(r!=null&&Zn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),s.blockHash=t):(s.fromBlock=t??0,s.toBlock=r??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((t,r)=>t+this._runningEvents[r].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(i=>{t.push(i)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const r in this._runningEvents){const i=this._runningEvents[r];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class yb extends Eye{}var iQ={exports:{}},Zd=typeof Reflect=="object"?Reflect:null,SV=Zd&&typeof Zd.apply=="function"?Zd.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},wB;Zd&&typeof Zd.ownKeys=="function"?wB=Zd.ownKeys:Object.getOwnPropertySymbols?wB=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:wB=function(e){return Object.getOwnPropertyNames(e)};function Uye(n){console&&console.warn&&console.warn(n)}var R4=Number.isNaN||function(e){return e!==e};function rn(){rn.init.call(this)}iQ.exports=rn;iQ.exports.once=Rye;rn.EventEmitter=rn;rn.prototype._events=void 0;rn.prototype._eventsCount=0;rn.prototype._maxListeners=void 0;var _V=10;function Bb(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(rn,"defaultMaxListeners",{enumerable:!0,get:function(){return _V},set:function(n){if(typeof n!="number"||n<0||R4(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");_V=n}});rn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};rn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||R4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function M4(n){return n._maxListeners===void 0?rn.defaultMaxListeners:n._maxListeners}rn.prototype.getMaxListeners=function(){return M4(this)};rn.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")SV(l,this,t);else for(var A=l.length,c=V4(l,A),r=0;r<A;++r)SV(c[r],this,t);return!0};function T4(n,e,t,r){var i,s,o;if(Bb(t),s=n._events,s===void 0?(s=n._events=Object.create(null),n._eventsCount=0):(s.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),s=n._events),o=s[e]),o===void 0)o=s[e]=t,++n._eventsCount;else if(typeof o=="function"?o=s[e]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),i=M4(n),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=o.length,Uye(a)}return n}rn.prototype.addListener=function(e,t){return T4(this,e,t,!1)};rn.prototype.on=rn.prototype.addListener;rn.prototype.prependListener=function(e,t){return T4(this,e,t,!0)};function Sye(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N4(n,e,t){var r={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},i=Sye.bind(r);return i.listener=t,r.wrapFn=i,i}rn.prototype.once=function(e,t){return Bb(t),this.on(e,N4(this,e,t)),this};rn.prototype.prependOnceListener=function(e,t){return Bb(t),this.prependListener(e,N4(this,e,t)),this};rn.prototype.removeListener=function(e,t){var r,i,s,o,a;if(Bb(t),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():_ye(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};rn.prototype.off=rn.prototype.removeListener;rn.prototype.removeAllListeners=function(e){var t,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function D4(n,e,t){var r=n._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Qye(i):V4(i,i.length)}rn.prototype.listeners=function(e){return D4(this,e,!0)};rn.prototype.rawListeners=function(e){return D4(this,e,!1)};rn.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):k4.call(n,e)};rn.prototype.listenerCount=k4;function k4(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}rn.prototype.eventNames=function(){return this._eventsCount>0?wB(this._events):[]};function V4(n,e){for(var t=new Array(e),r=0;r<e;++r)t[r]=n[r];return t}function _ye(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function Qye(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function Rye(n,e){return new Promise(function(t,r){function i(o){n.removeListener(e,s),r(o)}function s(){typeof n.removeListener=="function"&&n.removeListener("error",i),t([].slice.call(arguments))}L4(n,e,s,{once:!0}),e!=="error"&&Mye(n,i,{once:!0})})}function Mye(n,e,t){typeof n.on=="function"&&L4(n,"error",e,t)}function L4(n,e,t,r){if(typeof n.on=="function")r.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function i(s){r.once&&n.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var Tye=iQ.exports;function Nye(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Dye=function(n){Nye(e,n);function e(r){var i,s=r===void 0?{}:r,o=s.supportedChainIds;return i=n.call(this)||this,i.supportedChainIds=o,i}var t=e.prototype;return t.emitUpdate=function(i){this.emit(Uo.Update,i)},t.emitError=function(i){this.emit(Uo.Error,i)},t.emitDeactivate=function(){this.emit(Uo.Deactivate)},e}(Tye.EventEmitter);function xU(){return xU=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xU.apply(this,arguments)}function sQ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function IU(n){return IU=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},IU(n)}function $w(n,e){return $w=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$w(n,e)}function kye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function CB(n,e,t){return kye()?CB=Reflect.construct:CB=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),A=new l;return o&&$w(A,o.prototype),A},CB.apply(null,arguments)}function Vye(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function qw(n){var e=typeof Map=="function"?new Map:void 0;return qw=function(r){if(r===null||!Vye(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return CB(r,arguments,IU(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$w(i,r)},qw(n)}function by(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function If(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}function jo(n){return n.hasOwnProperty("result")?n.result:n}var F1=function(n){sQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return e}(qw(Error)),Lye=function(n){sQ(e,n);function e(){var t;return t=n.call(this)||this,t.name=t.constructor.name,t.message="The user rejected the request.",t}return e}(qw(Error)),Pye=function(n){sQ(e,n);function e(r){var i;return i=n.call(this,r)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(by(i)),i.handleChainChanged=i.handleChainChanged.bind(by(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(by(i)),i.handleClose=i.handleClose.bind(by(i)),i}var t=e.prototype;return t.handleChainChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.handleAccountsChanged=function(i){i.length===0?this.emitDeactivate():this.emitUpdate({account:i[0]})},t.handleClose=function(i,s){this.emitDeactivate()},t.handleNetworkChanged=function(i){this.emitUpdate({chainId:i,provider:window.ethereum})},t.activate=function(){try{var i=function(c){if(s)return c;function u(){return xU({provider:window.ethereum},a?{account:a}:{})}var f=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(d){return d&&jo(d)[0]})).then(function(d){a=d})}();return f&&f.then?f.then(u):u(f)},s=!1,o=this;if(!window.ethereum)throw new F1;window.ethereum.on&&(window.ethereum.on("chainChanged",o.handleChainChanged),window.ethereum.on("accountsChanged",o.handleAccountsChanged),window.ethereum.on("close",o.handleClose),window.ethereum.on("networkChanged",o.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,l=If(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(A){return jo(A)[0]})).then(function(A){a=A})},function(A){if(A.code===4001)throw new Lye});return Promise.resolve(l&&l.then?l.then(i):i(l))}catch(A){return Promise.reject(A)}},t.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(i){return Promise.reject(i)}},t.getChainId=function(){try{var i=function(){function l(){if(!s)try{s=jo(window.ethereum.send({method:"net_version"}))}catch{}return s||(window.ethereum.isDapper?s=jo(window.ethereum.cachedResults.net_version):s=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),s}var A=function(){if(!s){var c=If(function(){return Promise.resolve(window.ethereum.send("net_version").then(jo)).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new F1;var s,o=If(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(jo)).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.getAccount=function(){try{var i=function(){function l(){return s||(s=jo(window.ethereum.send({method:"eth_accounts"}))[0]),s}var A=function(){if(!s){var c=If(function(){return Promise.resolve(window.ethereum.enable().then(function(u){return jo(u)[0]})).then(function(u){s=u})},function(){});if(c&&c.then)return c.then(function(){})}}();return A&&A.then?A.then(l):l(A)};if(!window.ethereum)throw new F1;var s,o=If(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return jo(a)[0]})).then(function(a){s=a})},function(){});return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(a){return Promise.reject(a)}},t.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},t.isAuthorized=function(){try{return window.ethereum?Promise.resolve(If(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(i){return jo(i).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(i){return Promise.reject(i)}},e}(Dye);function Wye(){const{account:n,library:e,activate:t}=K6(),[r,i]=me.useState([]),{setViewMode:s}=z.useContext(gi),{playSound:o}=z.useContext(ys),{isMute:a}=z.useContext(vs),l=new Pye({supportedChainIds:[137,1,3,4,5,42,97]});me.useEffect(()=>{if(n&&e){const f="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",d=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],h=new yb(f,d,e);h.balanceOf(n).then(p=>{const m=[];for(let g=0;g<p;g++)m.push(h.tokenOfOwnerByIndex(n,g));Promise.all(m).then(g=>{const v=g.map(y=>h.tokenURI(y));Promise.all(v).then(y=>{i(y)})})})}},[n,e]);const A=()=>{t(l)},c=f=>{!a&&o("backNextButton"),s(st.APPEARANCE)},u=()=>{s(st.LANDING),!a&&o("backNextButton")};return W.jsxs("div",{className:Sc.container,children:[!n&&W.jsxs("div",{className:Sc.message,children:["Please connect your wallet to load your characters",W.jsx("button",{className:Sc.button,onClick:()=>A(),children:"Connect"})]}),W.jsxs("div",{className:Sc.characterContainer,children:[W.jsx("div",{className:Sc.title,children:"Load Character"}),r.map((f,d)=>W.jsx("div",{className:Sc.character,onClick:()=>{c()},children:JSON.stringify(f)},d))]}),W.jsx("button",{className:Sc.button,onClick:()=>u(),children:"Back"})]})}const Oye="_container_q73cc_1",Gye="_mintContainer_q73cc_6",Zye="_mainTitleWrap_q73cc_33",Jye="_mainTitle_q73cc_33",Hye="_mintButtonContainer_q73cc_49",zye="_mintButton_q73cc_49",Yye="_genesisText_q73cc_60",Xye="_required_q73cc_64",Kye="_divider_q73cc_68",jye="_bottomContainer_q73cc_75",$ye="_mintInfo_q73cc_85",qye="_topLine_q73cc_91",eBe="_bottomLine_q73cc_104",ri={container:Oye,mintContainer:Gye,mainTitleWrap:Zye,mainTitle:Jye,mintButtonContainer:Hye,mintButton:zye,genesisText:Yye,required:Xye,divider:Kye,bottomContainer:jye,mintInfo:$ye,topLine:qye,bottomLine:eBe},tBe="0x543D43F390b7d681513045e8a85707438c463d80",eC={owner:"0x634B0510C5062CFf8009eAAc2435eB93bc4764ad",address:"0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",abi:[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mintToken",outputs:[],stateMutability:"payable",type:"function"}]},QV={address:"0x0000000000000aF8FE6E4DE40F4804C90fA8Ea8F",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressMismatch",type:"error"},{inputs:[],name:"AlreadyProxied",type:"error"},{inputs:[],name:"ColdAddressCannotBeTheSameAsHot",type:"error"},{inputs:[],name:"ColdIsAddressZero",type:"error"},{inputs:[],name:"ColdWalletCannotInteractUseHot",type:"error"},{inputs:[],name:"DeliveryCannotBeTheZeroAddress",type:"error"},{inputs:[],name:"DeliveryIsAddressZero",type:"error"},{inputs:[],name:"EthWithdrawFailed",type:"error"},{inputs:[],name:"IncorrectProxyRegisterFee",type:"error"},{inputs:[],name:"MigrationIsAllowedOnceOnly",type:"error"},{inputs:[],name:"NoPaymentPendingForAddress",type:"error"},{inputs:[],name:"NoRecordFoundForAddress",type:"error"},{inputs:[],name:"OnlyHotAddressCanChangeAddress",type:"error"},{inputs:[],name:"ProxyRegisterFeeRequired",type:"error"},{inputs:[],name:"RegisterAddressLocked",type:"error"},{inputs:[],name:"RewardRateIsLocked",type:"error"},{inputs:[],name:"UnknownAmount",type:"error"},{inputs:[],name:"UnrecognisedEPSAPIAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!0,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"address",name:"oldDelivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"DeliveryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ensReverseRegistrarAddress",type:"address"}],name:"ENSReverseRegistrarSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"erc20",type:"address"},{indexed:!1,internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"ERC20FeeUpdated",type:"event"},{anonymous:!1,inputs:[],name:"MigrationComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"NominationAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"NominationMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"ProxyRecordLive",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IEPSProxyRegister.Participant",name:"initiator",type:"uint8"},{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"RecordDeleted",type:"event"},{anonymous:!1,inputs:[],name:"RewardRateLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint96",name:"rewardRate",type:"uint96"}],name:"RewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newToken",type:"address"}],name:"RewardTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"acceptNomination",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"activeEthAddresses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"bool",name:"checkingHot_",type:"bool"}],name:"addressIsAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"beneficiaryBalance",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"id_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf1155",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf20",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryOf",outputs:[{internalType:"address",name:"beneficiary_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"coldToHot",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"provider_",type:"uint256"}],name:"deleteRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deletionNominalEth",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ensReverseRegistrar",outputs:[{internalType:"contract ENSReverseRegistrar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"epsAPIBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegister",outputs:[{internalType:"contract IERC1155DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegister",outputs:[{internalType:"contract IERC20DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20PerTransactionFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegister",outputs:[{internalType:"contract IERC721DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses1155",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses20",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses721",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAllAddresses",outputs:[{internalType:"address[]",name:"erc721Addresses_",type:"address[]"},{internalType:"address[]",name:"erc1155Addresses_",type:"address[]"},{internalType:"address[]",name:"erc20Addresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receivedAddress",type:"address"}],name:"getColdAndDeliveryAddresses",outputs:[{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"bool",name:"isProxied",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"getProxyRecordForAddress",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"getProxyRecordForCold",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"getProxyRecordForHot",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hotToRecord",outputs:[{internalType:"uint64",name:"provider",type:"uint64"},{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"bool",name:"feePaid",type:"bool"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"}],name:"isValidAddresses",outputs:[],stateMutability:"pure",type:"function"},{inputs:[],name:"lockERC1155DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC20DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC721DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],internalType:"struct EPSRegister.MigratedRecord[]",name:"migratedRecords_",type:"tuple[]"}],name:"migration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"nominate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"erc20Value_",type:"uint256"},{internalType:"bytes",name:"data_",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxyRegisterFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC1155",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC1155",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint88",name:"",type:"uint88"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRateLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IOAT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"deleteNominalEth_",type:"uint256"}],name:"setDeletionNominalEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"ensName_",type:"string"}],name:"setENSName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"ensReverseRegistrar_",type:"address"}],name:"setENSReverseRegistrar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc1155DelegationRegister_",type:"address"}],name:"setERC1155DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20DelegationRegister_",type:"address"}],name:"setERC20DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20_",type:"address"},{internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"setERC20Fee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc721DelegationRegister_",type:"address"}],name:"setERC721DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"count_",type:"uint256"},{internalType:"uint256",name:"air_",type:"uint256"}],name:"setNNumberOfEthAddressesAndAirdropAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"registerFee_",type:"uint256"}],name:"setRegisterFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint88",name:"rewardRate_",type:"uint88"}],name:"setRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"rewardToken_",type:"address"}],name:"setRewardToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"treasuryAddress_",type:"address"}],name:"setTreasuryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint256",name:"provider_",type:"uint256"}],name:"updateDeliveryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]},nBe={}.VITE_OPENSEA_KEY,rBe={}.VITE_PINATA_API_KEY,iBe={}.VITE_PINATA_API_SECRET,E1="0x89";let xy;async function sBe(){if(xy!=null)return xy;const n=new _P("https://polygon-rpc.com/"),t=await new yb(eC.address,eC.abi,n).tokenPrice();return xy=ke.from(t).mul(1),xy}function oBe(n,e){const t={method:"GET",headers:{accept:"application/json","x-api-key":nBe}};return console.log(t),new Promise((r,i)=>{fetch("https://api.opensea.io/api/v2/chain/ethereum/account/"+n+"/nfts?collection="+e,t).then(s=>{if(s.ok)return s.json();i("Failed to fetch data from Opensea API")}).then(s=>{r(s)}).catch(s=>{i(s)})})}async function oQ(){if(window.ethereum)try{const n=await window.ethereum.request({method:"eth_chainId"});if(parseInt(n,16)==parseInt(E1,16)){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}else try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:E1}]});const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}catch(e){console.log("polygon not find:",e);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"],nativeCurrency:{name:"Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com/"]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:E1}]});const t=await window.ethereum.request({method:"eth_requestAccounts"});return t.length>0?t[0]:""}catch(t){console.log("Adding polygon chain failed",t)}}}catch{return""}else return""}async function U1(n,e){if(!n)return console.warn("Error saving to pinata: No file data");const t="https://api.pinata.cloud/pinning/pinFileToIPFS";let r=new FormData;return r.append("file",n,e),(await B4.post(t,r,{maxContentLength:"Infinity",maxBodyLength:"Infinity",headers:{"Content-Type":`multipart/form-data; boundary=${r._boundary}`,pinata_api_key:rBe,pinata_secret_api_key:iBe}})).data}const aBe=n=>{let e=[];return Object.keys(n).map(t=>{Object.keys(n[t]).length!==0&&e.push({trait_type:t,value:n[t].name})}),e};async function lBe(n,e,t,r,i){if(!n)throw new Error("No avatar was provided");if(!e)throw new Error("No screenshot was provided");if(!t)throw new Error("No model was provided");const s=await oQ();if(s=="")return"Please Connect Wallet";if(!i||await ABe(s)){console.log("minting");let a="AvatarImage_"+Date.now()+".png",l=await(async()=>{for(let v=0;v<10;v++)try{return await U1(e,a).catch(w=>{console.error(v,"---",w)})}catch(y){return console.warn(y),y}return"Failed to upload screenshot"})();const A=await Rhe(t,n,4096);let c;if(A){let v="AvatarGlb_"+Date.now()+".glb";c=await(async()=>{for(let y=0;y<10;y++)try{return await U1(A,v).catch(C=>(console.error(y,"---",C),"Couldn't save glb to pinata"))}catch(w){return console.warn(w),"Couldn't save glb to pinata"}return"Failed to upload glb"})()}else return"Unable to get glb";const u={name:r||"Avatars",description:"Character Studio Avatars.",image:`ipfs://${l.IpfsHash}`,animation_url:`ipfs://${c.IpfsHash}`,attributes:aBe(n)},f=JSON.stringify(u),h=`ipfs://${(await U1(new Blob([f]),"AvatarMetadata_"+Date.now()+".json")).IpfsHash}`;let p=await sBe();const m=new qU(window.ethereum).getSigner(),g=new yb(eC.address,eC.abi,m);try{const v={value:p,from:s};if((await(await g.mintToken(1,h,v)).wait()).transactionHash)return console.log("Mint success!"),"Mint success!"}catch{return"Public Mint failed."}}}const ABe=async n=>{if(n){const e="0x6e58309CD851A5B124E3A56768a42d12f3B6D104",t=W6("mainnet",{alchemy:{}.VITE_ALCHEMY_API_KEY}),i=await new yb(QV.address,QV.abi,t).beneficiaryBalanceOf(e,tBe,1);return parseInt(i)>0?!0:(console.log(`Currently in alpha. You need a genesis pass to mint. 
 Will be public soon!`),!1)}else return console.log("Please connect your wallet"),!1};function cBe(){const{model:n,avatar:e}=z.useContext(qr),{setViewMode:t}=z.useContext(gi),{playSound:r}=z.useContext(ys),{isMute:i}=z.useContext(vs),[s,o]=z.useState(""),[a,l]=z.useState(!1),A=()=>{t(st.SAVE),!i&&r("backNextButton")},c=()=>{t(st.CHAT),!i&&r("backNextButton")};function u(){return W.jsxs("div",{className:ri.mainTitleWrap,children:[W.jsx("div",{className:ri.topLine}),W.jsx("div",{className:ri.mainTitle,children:"Mint"})]})}async function f(){!i&&r("backNextButton"),l(!0),o("Please check your wallet");const p=await lBe(e,null,n,{name:"XXXRestore"}.name);o(p),l(!1),console.log(p)}return W.jsxs("div",{className:ri.container,children:[W.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),W.jsxs("div",{className:ri.mintContainer,children:[W.jsx(u,{}),W.jsxs("div",{className:ri.mintButtonContainer,children:[W.jsx(Zt,{size:16,theme:"light",icon:"polygon",text:a?"Minting...":"Open Edition",className:ri.mintButton,disabled:a,onClick:f,minWidth:220}),W.jsx("div",{className:ri.divider}),W.jsx(Zt,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:ri.mintButton,disabled:!0,minWidth:220}),W.jsxs("span",{className:ri.genesisText,children:["(",W.jsx("span",{className:ri.required,children:"Coming Soon!"}),")"]})]}),W.jsxs("span",{className:ri.mintInfo,children:[s," "]})]}),W.jsxs("div",{className:ri.bottomContainer,children:[W.jsx(Zt,{theme:"light",text:"Back",size:14,className:ri.buttonLeft,onClick:A}),W.jsx(Zt,{theme:"light",text:"Chat",size:14,className:ri.buttonRight,onClick:c})]})]})}const uBe="_classdisabled_ecnty_1",fBe="_container_ecnty_6",dBe="_classContainer_ecnty_14",hBe="_icon_ecnty_40",pBe="_name_ecnty_71",gBe="_description_ecnty_80",mBe="_classFrame_ecnty_85",vBe="_frameContainer_ecnty_107",yBe="_frame_ecnty_107",BBe="_image_ecnty_117",wBe="_lockedContainer_ecnty_123",CBe="_locked_ecnty_123",bBe="_buttonContainer_ecnty_137",xBe="_buttonLeft_ecnty_146",IBe="_buttonRight_ecnty_150",FBe="_buttonCenter_ecnty_154",EBe="_topLine_ecnty_168",UBe="_bottomLine_ecnty_194",rt={classdisabled:uBe,container:fBe,classContainer:dBe,class:"_class_ecnty_1",icon:hBe,name:pBe,description:gBe,classFrame:mBe,frameContainer:vBe,frame:yBe,image:BBe,lockedContainer:wBe,locked:CBe,buttonContainer:bBe,buttonLeft:xBe,buttonRight:IBe,buttonCenter:FBe,topLine:EBe,bottomLine:UBe};function SBe(){const{t:n}=me.useContext(Bs),{setViewMode:e,setIsLoading:t,isLoading:r}=z.useContext(gi),{playSound:i}=z.useContext(ys),{isMute:s}=z.useContext(vs),{manifest:o,characterManager:a}=z.useContext(qr),[l,A]=me.useState([]);me.useEffect(()=>{if(o!=null){const d=o.map(h=>({name:h.name,image:h.portrait,description:h.description,manifest:h.manifest,icon:h.icon,format:h.format,disabled:!1}));A(d)}},[o]);const c=()=>{e(st.LANDING),!s&&i("backNextButton")},u=async d=>{t(!0),a.loadManifest(o[d].manifest).then(()=>{e(st.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},f=()=>{!s&&i("classMouseOver")};return W.jsxs("div",{className:`${rt.container} horizontalScroll`,children:[W.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),W.jsx("div",{className:rt.vrmOptimizerButton}),W.jsx("div",{className:rt.topLine}),W.jsx("div",{className:rt.classContainer,children:l.map((d,h)=>W.jsxs("div",{className:d.disabled?rt.classdisabled:rt.class,onClick:d.disabled?null:()=>u(h),onMouseOver:d.disabled?null:()=>f(),children:[W.jsxs("div",{className:rt.classFrame,style:{backgroundImage:`url(${d.image})`},children:[W.jsx("div",{className:rt.frameContainer,children:W.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:rt.frame})}),W.jsx("div",{className:rt.lockedContainer,children:d.disabled&&W.jsx("img",{src:"./assets/icons/locked.svg",className:rt.locked})})]}),W.jsx("div",{className:rt.icon,children:W.jsx("img",{src:d.icon,alt:d.name})}),W.jsx("div",{className:rt.name,children:d.name}),W.jsx("div",{className:rt.description,children:d.description})]},h))}),W.jsx("div",{className:rt.bottomLine}),W.jsx("div",{className:rt.buttonContainer,children:W.jsx(Zt,{theme:"light",text:n("callToAction.back"),size:14,className:rt.buttonLeft,onClick:c})})]})}function _Be(){const{t:n}=me.useContext(Bs),{setViewMode:e,setIsLoading:t,isLoading:r}=z.useContext(gi),{playSound:i}=z.useContext(ys),{isMute:s}=z.useContext(vs),{manifest:o,characterManager:a}=z.useContext(qr),[l,A]=me.useState([]);me.useEffect(()=>{if(o!=null){const h=o.map(p=>({name:p.name,image:p.portrait,description:p.description,manifest:p.manifest,icon:p.icon,format:p.format,disabled:!1}));A(h)}},[o]);const c=()=>{e(st.LANDING),!s&&i("backNextButton")},u=async h=>{t(!0),a.loadManifest(o[h].manifest).then(()=>{e(st.BATCHDOWNLOAD),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},f=()=>{e(st.BATCHMANIFEST)},d=()=>{!s&&i("classMouseOver")};return W.jsxs("div",{className:`${rt.container} horizontalScroll`,children:[W.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),W.jsx("div",{className:rt.vrmOptimizerButton}),W.jsx("div",{className:rt.topLine}),W.jsxs("div",{className:rt.classContainer,children:[l.map((h,p)=>W.jsxs("div",{className:h.disabled?rt.classdisabled:rt.class,onClick:h.disabled?null:()=>u(p),onMouseOver:h.disabled?null:()=>d(),children:[W.jsxs("div",{className:rt.classFrame,style:{backgroundImage:`url(${h.image})`},children:[W.jsx("div",{className:rt.frameContainer,children:W.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:rt.frame})}),W.jsx("div",{className:rt.lockedContainer,children:h.disabled&&W.jsx("img",{src:"./assets/icons/locked.svg",className:rt.locked})})]}),W.jsx("div",{className:rt.icon,children:W.jsx("img",{src:h.icon,alt:h.name})}),W.jsx("div",{className:rt.name,children:h.name}),W.jsx("div",{className:rt.description,children:h.description})]},p)),W.jsxs("div",{className:rt.class,onClick:()=>f(),onMouseOver:()=>d(),children:[W.jsx("div",{className:rt.classFrame,style:{backgroundImage:"url(./assets/media/disabled.png)"},children:W.jsx("div",{className:rt.frameContainer,children:W.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:rt.frame})})}),W.jsx("div",{className:rt.icon,children:W.jsx("img",{src:"./assets/icons/class-neural-hacker.svg",alt:"manifest icons"})}),W.jsx("div",{className:rt.name,children:"Manifest"}),W.jsx("div",{className:rt.description,children:"Load by manifest"})]},"manifest-load")]}),W.jsx("div",{className:rt.bottomLine}),W.jsx("div",{className:rt.buttonContainer,children:W.jsx(Zt,{theme:"light",text:n("callToAction.back"),size:14,className:rt.buttonLeft,onClick:c})})]})}const QBe="_buttonContainer_1ueuk_1",RBe="_button_1ueuk_1",Ff={buttonContainer:QBe,button:RBe},RV={}.VITE_OPENSEA_KEY;function MBe(){const{setViewMode:n}=z.useContext(gi),{playSound:e}=z.useContext(ys),{isMute:t}=z.useContext(vs),{characterManager:r}=z.useContext(qr),i=()=>{n(st.CREATE),!t&&e("backNextButton")},s=()=>{n(st.CLAIM),!t&&e("backNextButton")},o=()=>{n(st.OPTIMIZER),r.loadOptimizerManifest(),!t&&e("backNextButton")},a=async()=>{await oQ()!=""&&n(st.WALLET),!t&&e("backNextButton")};return W.jsx("div",{className:Ff.container,children:W.jsxs("div",{className:Ff.buttonContainer,children:[W.jsx("button",{className:Ff.button,onClick:i,children:W.jsx("img",{src:"./assets/media/btn_create_character.png"})}),W.jsx("button",{className:Ff.button,onClick:s,children:W.jsx("img",{src:"./assets/media/btn_batch_download_character.png"})}),W.jsx("button",{className:Ff.button,onClick:o,children:W.jsx("img",{src:"./assets/media/btn_optimize_character.png"})}),RV&&RV!=""&&W.jsx("button",{className:Ff.button,onClick:a,children:W.jsx("img",{src:"./assets/media/btn_optimize_character.png"})})]})})}const TBe="_buttonContainer_19n2w_1",NBe="_buttonLeft_19n2w_10",DBe="_buttonRight_19n2w_14",kBe="_buttonCenter_19n2w_18",VBe="_sideMenu_19n2w_33",LBe="_scrollContainer_19n2w_44",PBe="_scrollContainerOptions_19n2w_52",WBe="_bottomLine_19n2w_60",OBe="_editorButton_19n2w_94",GBe="_editorText_19n2w_102",ZBe="_selectorContainerPos_19n2w_112",JBe="_selectorButton_19n2w_129",HBe="_selectorColorPickerUI_19n2w_138",zBe="_selectorColorPickerButton_19n2w_144",YBe="_selectorColorPickerImg_19n2w_157",XBe="_uploadContainer_19n2w_163",KBe="_uploadButton_19n2w_176",yn={buttonContainer:TBe,buttonLeft:NBe,buttonRight:DBe,buttonCenter:kBe,sideMenu:VBe,scrollContainer:LBe,scrollContainerOptions:PBe,bottomLine:WBe,"editor-container":"_editor-container_19n2w_87",editorButton:OBe,editorText:GBe,selectorContainerPos:ZBe,"selector-container":"_selector-container_19n2w_123",selectorButton:JBe,selectorColorPickerUI:HBe,selectorColorPickerButton:zBe,selectorColorPickerImg:YBe,uploadContainer:XBe,uploadButton:KBe},jBe="_ContainerPosition_ss7yg_2",$Be="_Container_ss7yg_2",qBe="_topLine_ss7yg_52",ewe="_traitInfoTitle_ss7yg_80",twe="_flexSelect_ss7yg_89",nwe="_flexButtons_ss7yg_98",rwe="_optionButtons_ss7yg_106",Oi={ContainerPosition:jBe,Container:$Be,"arrow-button":"_arrow-button_ss7yg_23","left-button":"_left-button_ss7yg_39","right-button":"_right-button_ss7yg_46",topLine:qBe,traitInfoTitle:ewe,flexSelect:twe,flexButtons:nwe,optionButtons:rwe},iwe="/CharacterStudio/assets/randomize-green-4388c12b.png",swe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNiOTBlZjU3LTIwOWItYzQ0Zi05OWNjLTkwYjYxM2Q0MWJiOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1ZDdmMmJiLWMxYjctYjc0My1hYmIzLTFmM2VjNjMxYjE0NCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYjkwZWY1Ny0yMDliLWM0NGYtOTljYy05MGI2MTNkNDFiYjgiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bbHqfAAAFoklEQVR42u2duWtWQRTFo5hGRNAETKFiIQqCSxGto4iCqSLon6BoQJJCEcEFLASbD7QRRcTKNbihoLgUWhj/AItUCi7gVmjikubzPphAiOYts9659xQHAnl5M2/u73vnzHwvbzra7XaHNg1cPrKadJs0bnSHtEbjWGgr/HxSi9SeRWeLYwCAzOIPmk97u0ITpAMAQE7h+0ivaxR+psZIWwBAvoVfSXpsUfiZelZkBgAgx+dtJTIfaPV5W4nLB9p93lZi8oEEn39iWcRPpK2kzaSPlud4mns+0Ojzk6QTpM5p5+skHSP90ZYPtPn8DVJ3ybkXk65oygdafH6UtKlBW72klxrygfT5/BfSLoe2B0xWELt+oMbnHfoxj3RUaj6Q6vNdAfq0SGI+UOvzDn0UlQ/U+7z2fACfV54P4PPK8wF8Xnk+gM8rzwfweeX5AD6vPB/A55XnA/i88nwAn1eeD+DzyvMBfF55PoDPK88H8Hnl+aBup/aQflp26HrZc3hQaT64Zjnmv0h7nQEwT8u24PNJQdjokA9aVXfdqsaH4fNsQNhJ+mxRj2EXAO41bGw/ihUchH0Na3LXBYC7DRs7T1qOQgUr/lLSuZgA3LL0nkukhSiat8IvIF2wrMWtFABMJdHDpLkoolPxD5mxbOcGwJTekfpRzMaF305662H8kwMwpRekDShuZeHXkp57HHc2ACAfhPP5JAB8MB3+jXyQzOeLJfaLpPcpAPhmjlnmcMtSnQ8cfb6w1BXmPF9TAFB8N9Az7dhtpDfIB8F9vvjQ7Jh2rp6K72mCArDkP39z0GHaIjofOPr8lG3OmXHOJawAmHah57F+4G0+P+sHgyUAHm91/fD5cmtkDYDmfODT57MHQFM+COHzYgCQng9C+bwoACTmg9A+LxIACfkgls+LBiDHfBDb51UAkEs+SOHzagDgnA9S+rw6ADjlAw4+rxaAlPmAk8+rByB2PuDm8wAgUj7g6vMAIHA+4O7zACDc7fqk+a/lbJel1QPgIR9k/cUUAAj7SDX7r6YBgP98wM7nAUCa9YOo83kAwC8f5PIACgDwnA+yegQNADQfsGdlb9rK8HoAQMMBK3vryT0AIB+ARyXX9AgAyAfgYck1PQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlALQAwCSX0+y18V/L/a3BQDJr2cx6UcKAMZz3BRaIADdphZJNo16ldsG0ZIAoP721thY2gmAulvH3iB1AYCot/0rMbaObbJ59KR53UonAAjW907ScTPWUfYOHpK2fXyuADhsHz/kAkBBXMvy5QqjHPNBbgBQnzbW8PnZ1Kq6I9ftxJ6KuWaZrnOaLeQCQDHFJl1zeLPJ3jrtNOnQfIe7AZt8wB0A6sM80lHSH8uxPlPUqm57Nh1cSXps2bnk+YAzANT+AOmT5dg+Ja1q2qZLZ/tIry07m2z9gCMAjj4/Rtpi27aPzg9WrERVrR90awXAzOevWo7dBOmAax98XUg2+YADAGZ2dSyWzwcHIKd8kBoAM5+P6vPRAMghH6QCIKXPRweAcz6IDQAHn08GAMd8EAsATj6fFABu+SAGANx8ngUAXPJBSAC4+jwrADzlg5u2+SAEANx9niUAqfKBTwBy8Xm2AHjKB19Ju2MDkJPPswcgZj5wBSBHn88GgBj5wBaAnH0+OwBC5oOmAEjw+SwBCJUPmrwuXorPZw2Ax3yw3pxnpOS4EXPMOkk+LwKAGflgwrI4p0kPSn5/n3RKms+LAsBDPggh1j4vDgBP+cCHsvB5sQB4ygfifV48AJ7WD8T6vBoAAueDbH1eFQAB8kH2Pq8SAA/5QIzPqwbAIh+I83kAUD8fiPR5APAvCKtJt80dYdz8vEbjWPwFnWtJD/nY2zYAAAAASUVORK5CYII=",owe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NDY5Y2JiLWFkMzUtYmQ0Ny04M2Q1LWU0NGQ0MTI2YmYwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIyNTIzNmU1LWZhMWItZTM0NS04ZDM2LTE5YmQyYTRiZjM1MSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNjQ2OWNiYi1hZDM1LWJkNDctODNkNS1lNDRkNDEyNmJmMDYiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qPgTwAAAEeUlEQVR42u2dX4tNURiH58KfwR1K0USSj6BoIpdydcY0TUMmIy58BPdK/uTCLReaG7kwooQoH4FQyneQMNw53t2cqdOJPfusvfZa77ve5+JX1DlnOns9PM+cqT0T/X5/wtt6D64ekj2W/ZKtDv582OO18Hbwk7I7sv5/dle2DQDKPPzLsp81h7++6n+EKwBQzsGfkH1ucPCj+yI7CQB2D/6A7GXAwY/utewgAJTj+dAV2QdePR+64vrAu+dDV0wf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5532A5533AZ533gd43nkf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5530wzsHvkr3hQqvfW9nuLgDYKXvGBVa/F50AMATCHtkKF1rdqn+ce1NG4BHZOy589n2QHc35beBZ2VcOIvm+yRa1fBC0SXZN9oeDSbLrss0aPwqmDxR6PggA+ULnZRfpA9uel+ddkJ0LAWB56AOG/fSBLc/L86ZkrwavsxwCwOgPd6q/T9IHuj0vz9kquzl6djEAqPZDdok+0Ol5ed6S7Ps/XjMaAOurfgh0nD5Q4/lp2aea144OwPDHjvRBXs8/b/A1OgOAPtDj+awA0Af5PZ8dAPogr+fVAEAf5PG8OgDog7SeVwuA1z5I7XnVAHjqg1yeNwFAyX2Q2/OmACitDzR43iQA1vtAk+fNAmCxDzR63jwAFvpAs+eLAUBrH2j3fHEAaOkDK54vEoCcfWDN80UDkLIPrHreBQBd94Flz7sCIEYfPCnM8+4AiNEHZ2RzhXjeLQCt+6AQz7sHoFUfFOB5AIjRB4Y9DwAx+8Cg5wEgVh8Y9TwANNjt6rOADT4nuFHg+waAoc3WvOfZQt8zAAxtruY9zwFA+QDM1LznGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANsA3AeAYnYvBIBTsvcAYH4fZaeDf328PHmxt3bzRACwteqWNkvBvz5+5MJs6a3dRBEAbOxWdVOrJmc77j1z9smeAoDaVbe1mRrnTENvnnSst3YzZQDQsepGVtMhZ9n29mkW+6AkABp5vjMAjPZBKQA09nynABjsA+sAjO35JAAY6gOrAAR7PikABvrAGgCtPZ8FAMV9YAmAKJ7PBoDSPrAAQFTPZwdAWR9oBqATz6sBQEkfaASgU8+rAyBzH2gDoHPPqwQgYx9oASCZ51UDkKEPcgOQ3PMmAEjYB7kAyOZ5UwAk6IMcAGT1vDkAOu6DlACo8LxZADrqgxQAqPK8eQAi90GXAKj0fDEAROqDrgBQ6/miAIjQB7EBUO/5IgFo0QexADDj+aIBCOiDtgCY87wLAMbogzYAmPS8GwAa9kEIAKY97w6ADfpgHACK8LxbAEb6YHVwqPM1j5sfPOZ3SZ53D8DgcLfLHsoWah6zIHsk2+HluvwF92zupxEV3NQAAAAASUVORK5CYII=",awe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmY3YWFkYzZiLWM2ZmEtNjE0OC05YWZkLTgxN2Q1OWRkZTI0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2NTFhZmQyLWU5YTctOTc0Zi1hZWFkLTdiMWMyODQ2YWEzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmN2FhZGM2Yi1jNmZhLTYxNDgtOWFmZC04MTdkNTlkZGUyNDIiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6TWt7cAAAFm0lEQVR42u2dT2xURQCHSTXpQTH0oIJpgfZKi1ETiSK1MV7FbORQNcG0Hmg3oQVjjKARrhDBBDEYMSEYS6kWkxoVAheDiBc9kHBBuaGgMSo1KgTF+pt0JLq6dOe93X3z5zt8SbPdvtmZ37fvvc7Mm5k3MzMzD9KFRkAAGgEBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABPKO0f3OrWCxWiTViROwQ+8QBcchywL62w77HvLdPdJpjIEAYYd8sHhDPiD3iuLggfhczGblqj/GJ2Cs2il5xCwL4EfoK8bw4LH7MEbQrF8UR8aK4T7QgQPNC77On6jNNDHwuzopXzGdDgMaEvlRsEqc8Cr0ap+2ZoRMB8gdvrulviT8CCP7/7h/GxIMI4B78Q+KjAEOvhrlHeRgB5g7e3FB9GFHwlZi6rUSA/wZ/m3g94uAreVMsRIDZ8J8S3yUU/t98L55OVgDby3Y4weArMf0JXUkJoAo/Ln4i/GtMiyeTEEAV3U3gVXktWgFUuXbxKSHPyWeiIyoBVKG7xXnCrRnTVvdEIYAqsjrniFwjGteciabEuGXKvnbes57ER4MWQBVY60FD/ioOiiHRfb3xfTt/oNu+1/zNLx58/rVBCqAPPlxww52x4/e356jDrfYYXxZcl+GgBCg4/Gk7KaSljvVpsSJcLLBe5SAEMB+04L72JQ08qy0ueKyi7LUABYe/pYn/0r4UiwSxhD9UQIfWuhgkiOGav67A8YzgJeC0n7/+W0KWIOTwj3o0keVoqBKEGv5vYoFHAiwQl0KUIMTwDSM5wuoQg3Ya90HLTvtaR47jjhbcJuWmCOBB+OcyBrTcPgJ25TrHvmKFuDNjGedCkyC08DN9+20vnms5GwM8CzhLEFr45jo73zGUbTnK2+5Y1nxxOSQJQgrf8G4B38gRxzInPWmrcl0E8Ch8w4BDEF11LLfLodwBj9qrnEsAz8I3LHMI4r06ljvpUO4yz9qsnEkA/WG/ZxX5VtxQYwh3NKD8RTWWfaOHzzn0OwmgP2izU5J8qsQJh2/hYMGXnxMePqja5iLAdg8nSk45BPBqA8rf5VD+lIftt81FgC88rMC4QwDvNKD8CYfyxz1sv88RAAG4BHAJSOMmcICbwBw3gRH8G7ioAeUvTObfwEg6giYL6gjqjqIjiK7gzF3Bg6VYuoIjGAwaYTAoruHgywwHFzAc7JkEoxkmamwQfzIhJI4pYd9knK7VU+OUMNOJszxjGV9HPSXMIwlGc0zebLf9BDsrJoWa19pzHHdDEpNCPZHgUrWOjYKmhbclNS3cEwmOeSTAseQeDPFEgq08GsbDoUMFhj+U/MOhnpwJhgmfBSK2ctpniRizx8DSBga/hCVi/JfgZ/FsrUPHjotETbNIVDjLxH1lVwtjmTgWitw8YYXsqWGhyB773gkWiqyPBI/M0f/ebC7YZWHf/0dXsPn5pP2dL5/TLK+7OpbFou8ygzgsAl37gJdpM5aLT5OTeQalQtgwYhchV2V3KlvG9LNlzL8waxA/kdqmUWY7WDaNmm2DtDaNYtu4a9vGDbJxZJobR75RYuPIqlvHfhBx8GYc4X62jk1v82hTFzaPzrh9/H7PNp2qFbPl/duil+3j6zMMu0mcCiD40+IF0RlC2wYhQIUMveJluymUL6GftWsP94XWnsEJUCHDveI5e439oYmBm06sI/abvqKeG1QhQHYZbhIr7fj9HvFxaXYjyDz3D1ftMY6LvfbYq1yfT0SA4qRotcvDm5vJNfZpYXP52CfGxCHLmH3N/G69eMyczkuzW9y3xtxGUQsACAAIAAgACAAIAAgACAAIAAgACAAIAAiAADQCAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkCc/AWkhfX2hx9ZaQAAAABJRU5ErkJggg==",lwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAATr2AAE69gE6sVc6AAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslPja4AAAbiSURBVHja7Z17iFVFHMc1K80ybc3SP9K21YrubtLDiIJqK5WMpbYt1MpSKiKkba0gtU0rCCpoyxRXSKrNiJIwCmtD0u2JEWFuSC/t2sueghDU2svbd2D+uFzce89rzvxm5vvHB2TX5Zw758PMufN7zJBSqTSEhAsHgQJwECgAoQCEAhAKQCgAoQCEAhAKQCgAoQCEAhAKQCgAoQDVaO1ZOgWsB7+CAbALLAPDOdCeC4CH3AJKg/AlGM/B9lQAPNxG8HcVARS7wQQOuJ8CPFvj4VMCXwXAAx0BfowoACXwUIA68EcMASiBh0vApzEFoASeCdCZQABK4JEAw0A/JQh7H2A8KFKCsHcCxUugX1qnghlgLrgBzNP/bgXTwTRwAjiEAsQf4AkpJChmJYF+0M1gIegGm8Dn4M+I9/If+B68B3rAneBiMIoCCJwJ8DejwZVgBfgQ7E94/Vqor7ybwVJwOgWwKAH+z3HgJrDR4AOvxU7wIDiFAuQoAX7XZumBV0MtF20UID8JnhMoQUlvjXeAw5kQYl6CVUIlUOwD7WBo8BlBhiVYK1gCxU/giuBTwgxL8IJwCRTvg/qgcwINS/CKAxIolgSdFGpYgjcdkeATMDHYrGDDErzriASK+cGmhZuSAD8/DHzskARrg60LMCjBkQkTVWwuCccGWRhiUIIx4DOHJNgLCkFWBhmUYJzer3dFAhWFnOXjRtAosA6cb0ECFaL+xiEJFAt8E6BXf7Cfq22GGJRgIvjBMQlu9yUWsOUgW6M2JGgAvzgmQYfr0cA3quyPm5KgWEWCaXpLVhWtXqVp11k/6uffCpRgoav5AC9GCJvWS0svw99NVhs0OtHkgBAJ5rmWEbQiRqSs3saOYcTPcTzoAv8KkGCGKzmBnQnCpbkvBwlE2GRZAJXQ2ig9K3hOipi52Jmg7D7aLUvwXdbp81k+/DPAPykTJ1yQYKbld4MPJFYGHZPi4bgowaWWZ4I10gTYmHEKlQsS3GxZgtukFIfeayiPzgUJnrYswVm2G0Q0G06mFC2BCuHq7W1bAmxPW8OYNsBjOtJmUoKvwaQMJOiwPAussiVAXoUZJiVQJWW/gR3gSdXrMME4jIzZJ8kEl+UqgC7EzDu33pQElSxPMB6PWRZANeU8KhcBdJKFDeNNxg4q6Yk5JhcJ2CpemZcA6yxX2YibCVQdoIBlQHGhUQHUWiOk+PLEnCRoTJD0YpM+0wJIybS9xmCnknK6YozNGiFjM8eIAAJ2vsqjYlEaSGQxE2yLMT4PCBmfreBkEwK8JuQDfhTjnpsySNUeGfFaiwVlEd1hQoBXhXy4vpjf0femvF6TYzOAMQGkLAHbY763bEt5vWLEJadb0BIwxeeXQJXZOyLGPT+ewTVrSqDi9EIEmO3718DI07K+50JG16xVlfywgHHpzWMj6CkBH/SWmPe8PCcJHrU4JurUltPyEODoDDdakvJ8gvvuyejaRaES3JVnMMj2UvA7GJvgvu/zdCbYYiMc/IRlCRYlvO8GHfrdoY+42+/4TPBXkqk/q4wgm504dsf5NlDlM0zS4VQTM8Ej0nMD0w5ewWKf3kSxews9i0xK8LKEpND5lpeCMx2QwMRyoFLaxkhJC++yKIBay48IcCY4T1pl0GaLErzuSAu7rGaCzJpHZCnAOD0AtiTYEIgEqyUXhxYSHCSZaahYlal5LME7LpSHTxewSdTioQS7TPQSNNUgYoGAeMFbWdTTm+xPEEMCVbvQ4FqLmEVCIodv62PhRjs6E6iS+7NdbRJ1j6AsmQEtw0r1Fg2uBVdrHtJNoqYKlKDZ9TZxSxxqy2atIHWQfYLLfWkUeTcliC3BTN+OjLmVEkSSQEUqr/f1yJgWQb33vGhS4eKRMY36aw0lECCBrfbwdQ6d6uG1BLbPCeimBHYlkHBYxNyU/QUpgScnhmylBPlLIOoUS71Dd4ASBCpAWW1/LyUIVICyQbxE+IFPXkgg/nx7DMSNQvrveCmBeAEqRJA4I+wD57oqgTMCVHTqlvaO0GcrnyA4ASpeFhdn0AAiKTt1HF8dRHWozaSSIAWoGNyTdM/eDQbjDOq0jvX61JCmFPsdoiTwQoCDNG08R7e0Wa1zA7/SGUFRBnqP3pRSp57dD9rAqWBohjOX1TOQvBagysCP1V3DLgCz9IOdDa4DrarSRjWgBMNcPSuZArglpAgJ+DDclaA/i9mKD8JtCTopQNgS9FOAsCVQdZh1FCBcCfakbZPDgXdbgme4BIQrgWoMWaAA/kqgTiz/oooALdwH8F+C4WCZDjwN6L6GL4HJ3AkkFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIByGD8DzQJyO8fOgE8AAAAAElFTkSuQmCC";function Awe({loadedAnimationName:n,randomize:e}){const{characterManager:t,toggleDebugMode:r,debugMode:i,lookAtManager:s,animationManager:o}=me.useContext(qr),[a,l]=me.useState(s.userActivated),[A,c]=z.useState((o==null?void 0:o.getCurrentAnimationName())||"");me.useEffect(()=>{n!=""&&c(n)},[n]);const u=()=>{r()},f=()=>{s.setActive(!a),o.enableMouseLook(!a),l(!a)},d=async()=>{console.log("play next"),await o.loadNextAnimation(),c(o.getCurrentAnimationName())},h=async()=>{console.log("play prev"),await o.loadPreviousAnimation(),c(o.getCurrentAnimationName())};return W.jsx("div",{className:Oi.Container,children:W.jsxs("div",{className:Oi.ContainerPosition,children:[W.jsx("div",{className:Oi.topLine}),W.jsxs("div",{className:Oi.flexSelect,children:[W.jsx("div",{className:`${Oi["arrow-button"]} ${Oi["left-button"]}`,onClick:h}),W.jsx("div",{className:Oi.traitInfoTitle,style:{marginBottom:"10px"},children:A}),W.jsx("div",{className:`${Oi["arrow-button"]} ${Oi["right-button"]}`,onClick:d})]}),W.jsxs("div",{className:Oi.flexButtons,children:[W.jsx("div",{className:`${Oi.optionButtons}`,onClick:e,children:W.jsx("img",{src:iwe})}),W.jsx("div",{className:`${Oi.optionButtons}`,onClick:f,children:W.jsx("img",{src:a?lwe:awe})}),W.jsx("div",{className:`${Oi.optionButtons}`,onClick:u,children:W.jsx("img",{src:i?owe:swe})})]})]})})}const cwe="_InformationContainerPos_198k1_2",uwe="_scrollContainer_198k1_15",fwe="_traitInfoTitle_198k1_26",dwe="_traitInfoText_198k1_34",hwe="_flexSelect_198k1_61",pwe="_checked_198k1_118",gwe="_checkmark_198k1_122",mwe="_checkboxHolder_198k1_135",vwe="_actionButton_198k1_144",Fs={InformationContainerPos:cwe,scrollContainer:uwe,traitInfoTitle:fwe,traitInfoText:dwe,"input-box":"_input-box_198k1_42",flexSelect:hwe,"arrow-button":"_arrow-button_198k1_69","left-button":"_left-button_198k1_85","right-button":"_right-button_198k1_92","anim-button":"_anim-button_198k1_99","custom-checkbox":"_custom-checkbox_198k1_104","checkbox-container":"_checkbox-container_198k1_109",checked:pwe,checkmark:gwe,checkboxHolder:mwe,actionButton:vwe};function ywe({selectedTrait:n,selectedVRM:e}){const{animationManager:t,characterManager:r}=me.useContext(qr),[i,s]=me.useState(0),[o,a]=me.useState(0),[l,A]=me.useState(0);me.useEffect(()=>{var h,p,m;e!=null&&(A((h=e.data)==null?void 0:h.cullingLayer),s(((p=e.data)==null?void 0:p.cullingDistance[0])||0),a(((m=e.data)==null?void 0:m.cullingDistance[1])||0))},[e]);const c=h=>{s(h.target.value),e!=null&&e.data&&(e.data.cullingDistance[0]=h.target.value)},u=h=>{a(h.target.value),e!=null&&e.data&&(e.data.cullingDistance[1]=h.target.value)},f=h=>{e!=null&&e.data&&(A(h.target.value),e.data.cullingLayer=h.target.value)},d=()=>{r.updateCullHiddenMeshes()};return n!=null?W.jsx("div",{children:W.jsxs("div",{className:Fs.InformationContainerPos,children:[W.jsx(bh,{title:"Trait Information",width:180,right:20}),W.jsxs("div",{className:Fs.scrollContainer,children:[W.jsx("div",{className:Fs.traitInfoTitle,children:"Trait ID"}),W.jsx("div",{className:Fs.traitInfoText,children:n==null?void 0:n.id}),W.jsx("div",{className:Fs.traitInfoTitle,children:"Trait Name"}),W.jsx("div",{className:Fs.traitInfoText,children:n==null?void 0:n.name}),W.jsx("div",{className:Fs.traitInfoTitle,children:"Description"}),W.jsx("div",{className:Fs.traitInfoText,children:(n==null?void 0:n.description)||"A nice "+(n==null?void 0:n.name)}),W.jsx("div",{className:Fs.traitInfoTitle,children:"Culling Options"}),W.jsxs("div",{className:Fs.traitInfoText,children:["Culling Layer",W.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:f,className:Fs["input-box"],step:1}),W.jsx("br",{}),W.jsx("br",{}),W.jsx(xd,{title:"Cull Out Distance",value:i,onChange:c,min:0,max:1,step:.001,stepBox:.01}),W.jsx("br",{}),W.jsx(xd,{title:"Cull In Distance",value:o,onChange:u,min:0,max:1,step:.001,stepBox:.01}),W.jsx("div",{className:Fs.actionButton,onClick:d,children:W.jsx("div",{children:"Update Culling "})})]})]})]})}):W.jsx(W.Fragment,{})}const Bwe="_tokenBoxWrap_q4pvo_1",wwe="_mask_q4pvo_7",Cwe="_timer_q4pvo_31",bwe="_level_q4pvo_42",xwe="_mythic_q4pvo_55",Iwe="_epic_q4pvo_60",Fwe="_rare_q4pvo_65",Ewe="_uncommon_q4pvo_70",Uwe="_common_q4pvo_75",Swe="_none_q4pvo_80",_we="_value_q4pvo_85",Qwe="_frame_q4pvo_95",Rwe="_emptyIcon_q4pvo_111",Mwe="_badge_q4pvo_123",Twe="_frameActive_q4pvo_131",lA={tokenBoxWrap:Bwe,mask:wwe,timer:Cwe,level:bwe,mythic:xwe,epic:Iwe,rare:Fwe,uncommon:Ewe,common:Uwe,none:Swe,value:_we,frame:Qwe,emptyIcon:Rwe,badge:Mwe,frameActive:Twe,default:"_default_q4pvo_159"},Nwe="/CharacterStudio/assets/magic-box-cd45f027.png",Iy=n=>{const{size:e,active:t,onClick:r,level:i,icon:s,rarity:o,style:a}=n,[l,A]=z.useState(!1),c=()=>{A(!0)};return W.jsxs("div",{className:lA.tokenBoxWrap,style:{width:e,height:e},onClick:r,children:[t&&W.jsx("div",{className:Gd(lA.frame,lA.frameActive)}),W.jsx("div",{className:Gd(lA.frame,o&&lA[o])}),W.jsx("img",{src:l?Nwe:s,className:lA.emptyIcon,style:a,onError:c}),i&&W.jsxs("div",{className:Gd(lA.level,o&&lA[o]),children:["Lv.",i]})]})},Dwe="_InformationContainerPos_72ckd_2",kwe="_scrollContainer_72ckd_15",Vwe="_traitInfoTitle_72ckd_27",Lwe="_traitInfoText_72ckd_35",Pwe="_flexSelect_72ckd_62",Wwe="_checked_72ckd_119",Owe="_checkmark_72ckd_123",Gwe="_checkboxHolder_72ckd_136",$o={InformationContainerPos:Dwe,scrollContainer:kwe,traitInfoTitle:Vwe,traitInfoText:Lwe,"input-box":"_input-box_72ckd_43",flexSelect:Pwe,"arrow-button":"_arrow-button_72ckd_70","left-button":"_left-button_72ckd_86","right-button":"_right-button_72ckd_93","anim-button":"_anim-button_72ckd_100","custom-checkbox":"_custom-checkbox_72ckd_105","checkbox-container":"_checkbox-container_72ckd_110",checked:Wwe,checkmark:Owe,checkboxHolder:Gwe};function aQ({jsonSelectionArray:n,byManifest:e=!1}){const{isLoading:t,setIsLoading:r}=z.useContext(gi),{characterManager:i}=me.useContext(qr),[s,o]=me.useState(0),[a,l]=z.useState({}),[A,c]=z.useState([]),u=p=>{i.setManifest(p),i.loadInitialTraits().then(()=>{r(!1)})};me.useEffect(()=>{t==!1&&(l(i.getAvatarSelection()),c(Object.keys(i.getAvatarSelection())))},[t]);const f=p=>{i.loadTraitsFromNFTObject(p).then(()=>{r(!1)})},d=async()=>{if(!t)if(r(!0),s>=n.length-1)e?u(n[0]):f(n[0]),o(0);else{const p=s+1;e?u(n[p]):f(n[p]),o(p)}},h=async()=>{if(!t)if(r(!0),s<=0)e?u(n[n.length-1]):f(n[n.length-1]),o(n.length-1);else{const p=s-1;e?u(n[p]):f(n[p]),o(p)}};return(n==null?void 0:n.length)>0?W.jsxs("div",{className:$o.InformationContainerPos,children:[W.jsx(bh,{title:"TraitSelection",width:180,right:20}),W.jsxs("div",{className:$o.scrollContainer,children:[W.jsxs("div",{className:$o.flexSelect,children:[(n==null?void 0:n.length)>1?W.jsx("div",{className:`${$o["arrow-button"]} ${$o["left-button"]}`,onClick:h}):W.jsx(W.Fragment,{}),(n[s].name||n[s].manifestName)&&W.jsx("div",{style:{textAlign:"center",flex:1},children:W.jsx("div",{className:$o.traitInfoTitle,children:e?n[s].manifestName:n[s].name})}),(n==null?void 0:n.length)>1?W.jsx("div",{className:`${$o["arrow-button"]} ${$o["right-button"]}`,onClick:d}):W.jsx(W.Fragment,{})]}),(n[s].thumb||n[s].thumbnail)&&W.jsx("img",{src:n[s].thumb||n[s].thumbnail,alt:"Selection Thumbnail",style:{width:"280px",height:"460px",display:"block",margin:"20px auto 20px"}}),n[s].attributes&&n[s].attributes.map(p=>W.jsx("div",{children:W.jsx("div",{className:$o.traitInfoText,children:`${p.trait_type} : ${p.value}`})},`json:${p.trait_type}_${p.value}`)),e&&A.map(p=>W.jsx("div",{children:W.jsx("div",{className:$o.traitInfoText,children:`${p} : ${a[p].id}`})},`val:${p}`))]})]}):W.jsx(W.Fragment,{})}const MV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",Zwe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0wMlQxMTo0OTozNy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBiNWViMTliLTkxMmEtMmI0NS1iOTZlLTliNDUxOGUzZDU4NyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg4ODliZDlkLTAxZjItMTQ0Ni04NDE4LWYyYzNjNjQ1ODNlOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODg4OWJkOWQtMDFmMi0xNDQ2LTg0MTgtZjJjM2M2NDU4M2U4IiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAyVDExOjQ5OjM3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wMlQxMTo1MjoyMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0y+4AAAASPSURBVHja7ZxrSBVBFMctyqIgC0ujJ5UFaQpZRC/7YoUVQYUUkZQYQoVfJBF62PtBlhlJoJWSUQRSEYUFUVRiSEWRiokVgZqRWUEv7W3/oQkul53Ze+/OXWfyfPh98e6cPfNjnZ2ZPbshnZ2dIUTwIAkkmAQTJJgEk2CCBJNgEkyQYBKsgFnzlsaCanARZICFIJwEqxN8CXR68R08479lgxVgDAkOTPATC8EiXoLbYB9YDeJJsFzucPDLD8FWvABlIBcsAeNBKAn+K3i+Q7ki3oNycAys4eP8gO4oeH2QBFvxFVSAYj6uR3cHwWdcFGzFG1AF8sBakOBkeNFR8AMbAY/BedDqovQPoA6UgghjBbMxkXfGqpMfwUyv4w90wRV+1GTBCyQdmy5oc8hlwQdMFrxF0KlzkjbDwA8XBSebLPikv1cNfusBml0UHGWy4BpBp0olbYaAjgBlselZHBgNloNGm+PbQF8jBfsgKlrQbnuActMtYoWCBkmb68ZO09hNzEbIUzDCq82GAOXekuSRJGl3xGTBmT6IYXsU10Ahn5cGOo5ukeQxCLQL2q0zWXCBizeq7TZD1XdBu1iTBVe4KPieJI9kQZtPYKCRgpF4P/DW5QVDnkUeUVyk1fH3jd2L4Pu1KqSxMfohH6cbfbmS+eqRTdX22ixYck0WnKZAbguY5BV3o8IrPsVkwWUKBMQIYmcpEjzdZMF3eCfaA4C1OxGkld4/WgPdE9ZBLttLGMwJD4AI0F8SvycfPpwIvkuFJ2LBQyXzWl8pck0wmwuCcWCUZrCcwizy3aZg/E13RTBONMXjpL81g+W0wyvf/YpucHPdEpzbxQ8k7djlkesmRTHbnZRt+Ss4T3PBOz1y3aooZq1rj+1xsoMGCd6sKOYFEhxcwRm6Cf4JvmksuIUXlrz2MeZknQTv5k95e4HZvCM6CU73c5O/w2ldskrBqTbL4K4WnCbIL0MS75GrtWkSwZWSNgkaCK63Wao3CeKd0kVwgaRNmGQT2y3BZ236VS6Il6OL4OOSNpEK9gKcCq6y6VetIF6iLoKbRdt5vNhZhzE4UZDfYkm8kboIZpy2OH4C+KyJYFZsPdUrvzmSWM9dL8D2YZpWw4tBlrEyTz4n1mmaxvK5DvLBTY9NIitKdBT8P63k1pPg4ApOMllwBX+9agZYKamqdCI4x0Ec9vg+0lTBhYLYVxQLznYQp65L3jJSILhN9G4a/j5RseAefBW5gy00/PwvuWSq4GKb+PWqBAviR/Ay2UxeTV8pqObJMlVwiU38hmAKlizl4/iCqIjXIS8yeYgIE8SOUTlEGPkyuKKb3FlB7FskWN00jX1sIxVM4/uxTaqnad1dcNAXGiSYBGsjuJoXvJTy95VJsEJWeZ2/N7hBghWXQXnl0Ae8IsHOGSfJ4zAJdv59HVlR9SYS7JxESR4XSbBzLgtyiKebnDqugrEe248pkveISbAD3oEvtNCglRwJ1l1wvuaC95gueJ/mgnNMFxzFH6m84V841YVW/nZ9DH0/mD4xTpBgEkyQYBJMggkSTIJJMEGCteYPxO/zzCRZDV4AAAAASUVORK5CYII=",Jwe="/CharacterStudio/assets/color-palette-71a7a2d4.png";var Ls={},C0={},Hwe=typeof jf=="object"&&jf&&jf.Object===Object&&jf,P4=Hwe,zwe=P4,Ywe=typeof self=="object"&&self&&self.Object===Object&&self,Xwe=zwe||Ywe||Function("return this")(),Pa=Xwe,Kwe=Pa,jwe=Kwe.Symbol,b0=jwe,TV=b0,W4=Object.prototype,$we=W4.hasOwnProperty,qwe=W4.toString,Kp=TV?TV.toStringTag:void 0;function eCe(n){var e=$we.call(n,Kp),t=n[Kp];try{n[Kp]=void 0;var r=!0}catch{}var i=qwe.call(n);return r&&(e?n[Kp]=t:delete n[Kp]),i}var tCe=eCe,nCe=Object.prototype,rCe=nCe.toString;function iCe(n){return rCe.call(n)}var sCe=iCe,NV=b0,oCe=tCe,aCe=sCe,lCe="[object Null]",ACe="[object Undefined]",DV=NV?NV.toStringTag:void 0;function cCe(n){return n==null?n===void 0?ACe:lCe:DV&&DV in Object(n)?oCe(n):aCe(n)}var Mu=cCe,uCe=Array.isArray,Lo=uCe;function fCe(n){return n!=null&&typeof n=="object"}var Ol=fCe,dCe=Mu,hCe=Lo,pCe=Ol,gCe="[object String]";function mCe(n){return typeof n=="string"||!hCe(n)&&pCe(n)&&dCe(n)==gCe}var vCe=mCe;function yCe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var BCe=yCe,wCe=BCe,CCe=wCe(),bCe=CCe;function xCe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var ICe=xCe,FCe=Mu,ECe=Ol,UCe="[object Arguments]";function SCe(n){return ECe(n)&&FCe(n)==UCe}var _Ce=SCe,kV=_Ce,QCe=Ol,O4=Object.prototype,RCe=O4.hasOwnProperty,MCe=O4.propertyIsEnumerable,TCe=kV(function(){return arguments}())?kV:function(n){return QCe(n)&&RCe.call(n,"callee")&&!MCe.call(n,"callee")},G4=TCe,tC={exports:{}};function NCe(){return!1}var DCe=NCe;tC.exports;(function(n,e){var t=Pa,r=DCe,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,A=l||r;n.exports=A})(tC,tC.exports);var lQ=tC.exports,kCe=9007199254740991,VCe=/^(?:0|[1-9]\d*)$/;function LCe(n,e){var t=typeof n;return e=e??kCe,!!e&&(t=="number"||t!="symbol"&&VCe.test(n))&&n>-1&&n%1==0&&n<e}var Z4=LCe,PCe=9007199254740991;function WCe(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=PCe}var AQ=WCe,OCe=Mu,GCe=AQ,ZCe=Ol,JCe="[object Arguments]",HCe="[object Array]",zCe="[object Boolean]",YCe="[object Date]",XCe="[object Error]",KCe="[object Function]",jCe="[object Map]",$Ce="[object Number]",qCe="[object Object]",ebe="[object RegExp]",tbe="[object Set]",nbe="[object String]",rbe="[object WeakMap]",ibe="[object ArrayBuffer]",sbe="[object DataView]",obe="[object Float32Array]",abe="[object Float64Array]",lbe="[object Int8Array]",Abe="[object Int16Array]",cbe="[object Int32Array]",ube="[object Uint8Array]",fbe="[object Uint8ClampedArray]",dbe="[object Uint16Array]",hbe="[object Uint32Array]",dn={};dn[obe]=dn[abe]=dn[lbe]=dn[Abe]=dn[cbe]=dn[ube]=dn[fbe]=dn[dbe]=dn[hbe]=!0;dn[JCe]=dn[HCe]=dn[ibe]=dn[zCe]=dn[sbe]=dn[YCe]=dn[XCe]=dn[KCe]=dn[jCe]=dn[$Ce]=dn[qCe]=dn[ebe]=dn[tbe]=dn[nbe]=dn[rbe]=!1;function pbe(n){return ZCe(n)&&GCe(n.length)&&!!dn[OCe(n)]}var gbe=pbe;function mbe(n){return function(e){return n(e)}}var cQ=mbe,nC={exports:{}};nC.exports;(function(n,e){var t=P4,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(nC,nC.exports);var uQ=nC.exports,vbe=gbe,ybe=cQ,VV=uQ,LV=VV&&VV.isTypedArray,Bbe=LV?ybe(LV):vbe,J4=Bbe,wbe=ICe,Cbe=G4,bbe=Lo,xbe=lQ,Ibe=Z4,Fbe=J4,Ebe=Object.prototype,Ube=Ebe.hasOwnProperty;function Sbe(n,e){var t=bbe(n),r=!t&&Cbe(n),i=!t&&!r&&xbe(n),s=!t&&!r&&!i&&Fbe(n),o=t||r||i||s,a=o?wbe(n.length,String):[],l=a.length;for(var A in n)(e||Ube.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||Ibe(A,l)))&&a.push(A);return a}var H4=Sbe,_be=Object.prototype;function Qbe(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||_be;return n===t}var fQ=Qbe;function Rbe(n,e){return function(t){return n(e(t))}}var z4=Rbe,Mbe=z4,Tbe=Mbe(Object.keys,Object),Nbe=Tbe,Dbe=fQ,kbe=Nbe,Vbe=Object.prototype,Lbe=Vbe.hasOwnProperty;function Pbe(n){if(!Dbe(n))return kbe(n);var e=[];for(var t in Object(n))Lbe.call(n,t)&&t!="constructor"&&e.push(t);return e}var Wbe=Pbe;function Obe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var jh=Obe,Gbe=Mu,Zbe=jh,Jbe="[object AsyncFunction]",Hbe="[object Function]",zbe="[object GeneratorFunction]",Ybe="[object Proxy]";function Xbe(n){if(!Zbe(n))return!1;var e=Gbe(n);return e==Hbe||e==zbe||e==Jbe||e==Ybe}var Y4=Xbe,Kbe=Y4,jbe=AQ;function $be(n){return n!=null&&jbe(n.length)&&!Kbe(n)}var wb=$be,qbe=H4,exe=Wbe,txe=wb;function nxe(n){return txe(n)?qbe(n):exe(n)}var x0=nxe,rxe=bCe,ixe=x0;function sxe(n,e){return n&&rxe(n,e,ixe)}var X4=sxe;function oxe(n){return n}var K4=oxe,axe=K4;function lxe(n){return typeof n=="function"?n:axe}var Axe=lxe,cxe=X4,uxe=Axe;function fxe(n,e){return n&&cxe(n,uxe(e))}var dQ=fxe,dxe=z4,hxe=dxe(Object.getPrototypeOf,Object),hQ=hxe,pxe=Mu,gxe=hQ,mxe=Ol,vxe="[object Object]",yxe=Function.prototype,Bxe=Object.prototype,j4=yxe.toString,wxe=Bxe.hasOwnProperty,Cxe=j4.call(Object);function bxe(n){if(!mxe(n)||pxe(n)!=vxe)return!1;var e=gxe(n);if(e===null)return!0;var t=wxe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&j4.call(t)==Cxe}var xxe=bxe;function Ixe(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var $4=Ixe;function Fxe(){this.__data__=[],this.size=0}var Exe=Fxe;function Uxe(n,e){return n===e||n!==n&&e!==e}var pQ=Uxe,Sxe=pQ;function _xe(n,e){for(var t=n.length;t--;)if(Sxe(n[t][0],e))return t;return-1}var Cb=_xe,Qxe=Cb,Rxe=Array.prototype,Mxe=Rxe.splice;function Txe(n){var e=this.__data__,t=Qxe(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Mxe.call(e,t,1),--this.size,!0}var Nxe=Txe,Dxe=Cb;function kxe(n){var e=this.__data__,t=Dxe(e,n);return t<0?void 0:e[t][1]}var Vxe=kxe,Lxe=Cb;function Pxe(n){return Lxe(this.__data__,n)>-1}var Wxe=Pxe,Oxe=Cb;function Gxe(n,e){var t=this.__data__,r=Oxe(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var Zxe=Gxe,Jxe=Exe,Hxe=Nxe,zxe=Vxe,Yxe=Wxe,Xxe=Zxe;function $h(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}$h.prototype.clear=Jxe;$h.prototype.delete=Hxe;$h.prototype.get=zxe;$h.prototype.has=Yxe;$h.prototype.set=Xxe;var bb=$h,Kxe=bb;function jxe(){this.__data__=new Kxe,this.size=0}var $xe=jxe;function qxe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var eIe=qxe;function tIe(n){return this.__data__.get(n)}var nIe=tIe;function rIe(n){return this.__data__.has(n)}var iIe=rIe,sIe=Pa,oIe=sIe["__core-js_shared__"],aIe=oIe,S1=aIe,PV=function(){var n=/[^.]+$/.exec(S1&&S1.keys&&S1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function lIe(n){return!!PV&&PV in n}var AIe=lIe,cIe=Function.prototype,uIe=cIe.toString;function fIe(n){if(n!=null){try{return uIe.call(n)}catch{}try{return n+""}catch{}}return""}var q4=fIe,dIe=Y4,hIe=AIe,pIe=jh,gIe=q4,mIe=/[\\^$.*+?()[\]{}|]/g,vIe=/^\[object .+?Constructor\]$/,yIe=Function.prototype,BIe=Object.prototype,wIe=yIe.toString,CIe=BIe.hasOwnProperty,bIe=RegExp("^"+wIe.call(CIe).replace(mIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xIe(n){if(!pIe(n)||hIe(n))return!1;var e=dIe(n)?bIe:vIe;return e.test(gIe(n))}var IIe=xIe;function FIe(n,e){return n==null?void 0:n[e]}var EIe=FIe,UIe=IIe,SIe=EIe;function _Ie(n,e){var t=SIe(n,e);return UIe(t)?t:void 0}var Tu=_Ie,QIe=Tu,RIe=Pa,MIe=QIe(RIe,"Map"),gQ=MIe,TIe=Tu,NIe=TIe(Object,"create"),xb=NIe,WV=xb;function DIe(){this.__data__=WV?WV(null):{},this.size=0}var kIe=DIe;function VIe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var LIe=VIe,PIe=xb,WIe="__lodash_hash_undefined__",OIe=Object.prototype,GIe=OIe.hasOwnProperty;function ZIe(n){var e=this.__data__;if(PIe){var t=e[n];return t===WIe?void 0:t}return GIe.call(e,n)?e[n]:void 0}var JIe=ZIe,HIe=xb,zIe=Object.prototype,YIe=zIe.hasOwnProperty;function XIe(n){var e=this.__data__;return HIe?e[n]!==void 0:YIe.call(e,n)}var KIe=XIe,jIe=xb,$Ie="__lodash_hash_undefined__";function qIe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=jIe&&e===void 0?$Ie:e,this}var e1e=qIe,t1e=kIe,n1e=LIe,r1e=JIe,i1e=KIe,s1e=e1e;function qh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}qh.prototype.clear=t1e;qh.prototype.delete=n1e;qh.prototype.get=r1e;qh.prototype.has=i1e;qh.prototype.set=s1e;var o1e=qh,OV=o1e,a1e=bb,l1e=gQ;function A1e(){this.size=0,this.__data__={hash:new OV,map:new(l1e||a1e),string:new OV}}var c1e=A1e;function u1e(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var f1e=u1e,d1e=f1e;function h1e(n,e){var t=n.__data__;return d1e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ib=h1e,p1e=Ib;function g1e(n){var e=p1e(this,n).delete(n);return this.size-=e?1:0,e}var m1e=g1e,v1e=Ib;function y1e(n){return v1e(this,n).get(n)}var B1e=y1e,w1e=Ib;function C1e(n){return w1e(this,n).has(n)}var b1e=C1e,x1e=Ib;function I1e(n,e){var t=x1e(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var F1e=I1e,E1e=c1e,U1e=m1e,S1e=B1e,_1e=b1e,Q1e=F1e;function ep(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ep.prototype.clear=E1e;ep.prototype.delete=U1e;ep.prototype.get=S1e;ep.prototype.has=_1e;ep.prototype.set=Q1e;var mQ=ep,R1e=bb,M1e=gQ,T1e=mQ,N1e=200;function D1e(n,e){var t=this.__data__;if(t instanceof R1e){var r=t.__data__;if(!M1e||r.length<N1e-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new T1e(r)}return t.set(n,e),this.size=t.size,this}var k1e=D1e,V1e=bb,L1e=$xe,P1e=eIe,W1e=nIe,O1e=iIe,G1e=k1e;function tp(n){var e=this.__data__=new V1e(n);this.size=e.size}tp.prototype.clear=L1e;tp.prototype.delete=P1e;tp.prototype.get=W1e;tp.prototype.has=O1e;tp.prototype.set=G1e;var vQ=tp,Z1e="__lodash_hash_undefined__";function J1e(n){return this.__data__.set(n,Z1e),this}var H1e=J1e;function z1e(n){return this.__data__.has(n)}var Y1e=z1e,X1e=mQ,K1e=H1e,j1e=Y1e;function rC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new X1e;++e<t;)this.add(n[e])}rC.prototype.add=rC.prototype.push=K1e;rC.prototype.has=j1e;var $1e=rC;function q1e(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}var eFe=q1e;function tFe(n,e){return n.has(e)}var nFe=tFe,rFe=$1e,iFe=eFe,sFe=nFe,oFe=1,aFe=2;function lFe(n,e,t,r,i,s){var o=t&oFe,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,f=!0,d=t&aFe?new rFe:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var h=n[u],p=e[u];if(r)var m=o?r(p,h,u,e,n,s):r(h,p,u,n,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!iFe(e,function(g,v){if(!sFe(d,v)&&(h===g||i(h,g,t,r,s)))return d.push(v)})){f=!1;break}}else if(!(h===p||i(h,p,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}var e5=lFe,AFe=Pa,cFe=AFe.Uint8Array,t5=cFe;function uFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}var fFe=uFe;function dFe(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var hFe=dFe,GV=b0,ZV=t5,pFe=pQ,gFe=e5,mFe=fFe,vFe=hFe,yFe=1,BFe=2,wFe="[object Boolean]",CFe="[object Date]",bFe="[object Error]",xFe="[object Map]",IFe="[object Number]",FFe="[object RegExp]",EFe="[object Set]",UFe="[object String]",SFe="[object Symbol]",_Fe="[object ArrayBuffer]",QFe="[object DataView]",JV=GV?GV.prototype:void 0,_1=JV?JV.valueOf:void 0;function RFe(n,e,t,r,i,s,o){switch(t){case QFe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case _Fe:return!(n.byteLength!=e.byteLength||!s(new ZV(n),new ZV(e)));case wFe:case CFe:case IFe:return pFe(+n,+e);case bFe:return n.name==e.name&&n.message==e.message;case FFe:case UFe:return n==e+"";case xFe:var a=mFe;case EFe:var l=r&yFe;if(a||(a=vFe),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=BFe,o.set(n,e);var c=gFe(a(n),a(e),r,i,s,o);return o.delete(n),c;case SFe:if(_1)return _1.call(n)==_1.call(e)}return!1}var MFe=RFe;function TFe(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var n5=TFe,NFe=n5,DFe=Lo;function kFe(n,e,t){var r=e(n);return DFe(n)?r:NFe(r,t(n))}var r5=kFe;function VFe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var LFe=VFe;function PFe(){return[]}var i5=PFe,WFe=LFe,OFe=i5,GFe=Object.prototype,ZFe=GFe.propertyIsEnumerable,HV=Object.getOwnPropertySymbols,JFe=HV?function(n){return n==null?[]:(n=Object(n),WFe(HV(n),function(e){return ZFe.call(n,e)}))}:OFe,yQ=JFe,HFe=r5,zFe=yQ,YFe=x0;function XFe(n){return HFe(n,YFe,zFe)}var s5=XFe,zV=s5,KFe=1,jFe=Object.prototype,$Fe=jFe.hasOwnProperty;function qFe(n,e,t,r,i,s){var o=t&KFe,a=zV(n),l=a.length,A=zV(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var f=a[u];if(!(o?f in e:$Fe.call(e,f)))return!1}var d=s.get(n),h=s.get(e);if(d&&h)return d==e&&h==n;var p=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<l;){f=a[u];var g=n[f],v=e[f];if(r)var y=o?r(v,g,f,e,n,s):r(g,v,f,n,e,s);if(!(y===void 0?g===v||i(g,v,t,r,s):y)){p=!1;break}m||(m=f=="constructor")}if(p&&!m){var w=n.constructor,C=e.constructor;w!=C&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(p=!1)}return s.delete(n),s.delete(e),p}var eEe=qFe,tEe=Tu,nEe=Pa,rEe=tEe(nEe,"DataView"),iEe=rEe,sEe=Tu,oEe=Pa,aEe=sEe(oEe,"Promise"),lEe=aEe,AEe=Tu,cEe=Pa,uEe=AEe(cEe,"Set"),fEe=uEe,dEe=Tu,hEe=Pa,pEe=dEe(hEe,"WeakMap"),gEe=pEe,FU=iEe,EU=gQ,UU=lEe,SU=fEe,_U=gEe,o5=Mu,np=q4,YV="[object Map]",mEe="[object Object]",XV="[object Promise]",KV="[object Set]",jV="[object WeakMap]",$V="[object DataView]",vEe=np(FU),yEe=np(EU),BEe=np(UU),wEe=np(SU),CEe=np(_U),Nc=o5;(FU&&Nc(new FU(new ArrayBuffer(1)))!=$V||EU&&Nc(new EU)!=YV||UU&&Nc(UU.resolve())!=XV||SU&&Nc(new SU)!=KV||_U&&Nc(new _U)!=jV)&&(Nc=function(n){var e=o5(n),t=e==mEe?n.constructor:void 0,r=t?np(t):"";if(r)switch(r){case vEe:return $V;case yEe:return YV;case BEe:return XV;case wEe:return KV;case CEe:return jV}return e});var Fb=Nc,Q1=vQ,bEe=e5,xEe=MFe,IEe=eEe,qV=Fb,eL=Lo,tL=lQ,FEe=J4,EEe=1,nL="[object Arguments]",rL="[object Array]",Fy="[object Object]",UEe=Object.prototype,iL=UEe.hasOwnProperty;function SEe(n,e,t,r,i,s){var o=eL(n),a=eL(e),l=o?rL:qV(n),A=a?rL:qV(e);l=l==nL?Fy:l,A=A==nL?Fy:A;var c=l==Fy,u=A==Fy,f=l==A;if(f&&tL(n)){if(!tL(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new Q1),o||FEe(n)?bEe(n,e,t,r,i,s):xEe(n,e,l,t,r,i,s);if(!(t&EEe)){var d=c&&iL.call(n,"__wrapped__"),h=u&&iL.call(e,"__wrapped__");if(d||h){var p=d?n.value():n,m=h?e.value():e;return s||(s=new Q1),i(p,m,t,r,s)}}return f?(s||(s=new Q1),IEe(n,e,t,r,i,s)):!1}var _Ee=SEe,QEe=_Ee,sL=Ol;function a5(n,e,t,r,i){return n===e?!0:n==null||e==null||!sL(n)&&!sL(e)?n!==n&&e!==e:QEe(n,e,t,r,a5,i)}var l5=a5,REe=vQ,MEe=l5,TEe=1,NEe=2;function DEe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new REe;if(r)var f=r(A,c,l,n,e,u);if(!(f===void 0?MEe(c,A,TEe|NEe,r,u):f))return!1}}return!0}var kEe=DEe,VEe=jh;function LEe(n){return n===n&&!VEe(n)}var A5=LEe,PEe=A5,WEe=x0;function OEe(n){for(var e=WEe(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,PEe(i)]}return e}var GEe=OEe;function ZEe(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var c5=ZEe,JEe=kEe,HEe=GEe,zEe=c5;function YEe(n){var e=HEe(n);return e.length==1&&e[0][2]?zEe(e[0][0],e[0][1]):function(t){return t===n||JEe(t,n,e)}}var XEe=YEe,KEe=Mu,jEe=Ol,$Ee="[object Symbol]";function qEe(n){return typeof n=="symbol"||jEe(n)&&KEe(n)==$Ee}var BQ=qEe,eUe=Lo,tUe=BQ,nUe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rUe=/^\w*$/;function iUe(n,e){if(eUe(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||tUe(n)?!0:rUe.test(n)||!nUe.test(n)||e!=null&&n in Object(e)}var wQ=iUe,u5=mQ,sUe="Expected a function";function CQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(sUe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(CQ.Cache||u5),t}CQ.Cache=u5;var oUe=CQ,aUe=oUe,lUe=500;function AUe(n){var e=aUe(n,function(r){return t.size===lUe&&t.clear(),r}),t=e.cache;return e}var cUe=AUe,uUe=cUe,fUe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dUe=/\\(\\)?/g,hUe=uUe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(fUe,function(t,r,i,s){e.push(i?s.replace(dUe,"$1"):r||t)}),e}),pUe=hUe,oL=b0,gUe=$4,mUe=Lo,vUe=BQ,yUe=1/0,aL=oL?oL.prototype:void 0,lL=aL?aL.toString:void 0;function f5(n){if(typeof n=="string")return n;if(mUe(n))return gUe(n,f5)+"";if(vUe(n))return lL?lL.call(n):"";var e=n+"";return e=="0"&&1/n==-yUe?"-0":e}var BUe=f5,wUe=BUe;function CUe(n){return n==null?"":wUe(n)}var bUe=CUe,xUe=Lo,IUe=wQ,FUe=pUe,EUe=bUe;function UUe(n,e){return xUe(n)?n:IUe(n,e)?[n]:FUe(EUe(n))}var d5=UUe,SUe=BQ,_Ue=1/0;function QUe(n){if(typeof n=="string"||SUe(n))return n;var e=n+"";return e=="0"&&1/n==-_Ue?"-0":e}var Eb=QUe,RUe=d5,MUe=Eb;function TUe(n,e){e=RUe(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[MUe(e[t++])];return t&&t==r?n:void 0}var h5=TUe,NUe=h5;function DUe(n,e,t){var r=n==null?void 0:NUe(n,e);return r===void 0?t:r}var kUe=DUe;function VUe(n,e){return n!=null&&e in Object(n)}var LUe=VUe,PUe=d5,WUe=G4,OUe=Lo,GUe=Z4,ZUe=AQ,JUe=Eb;function HUe(n,e,t){e=PUe(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=JUe(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&ZUe(i)&&GUe(o,i)&&(OUe(n)||WUe(n)))}var zUe=HUe,YUe=LUe,XUe=zUe;function KUe(n,e){return n!=null&&XUe(n,e,YUe)}var jUe=KUe,$Ue=l5,qUe=kUe,eSe=jUe,tSe=wQ,nSe=A5,rSe=c5,iSe=Eb,sSe=1,oSe=2;function aSe(n,e){return tSe(n)&&nSe(e)?rSe(iSe(n),e):function(t){var r=qUe(t,n);return r===void 0&&r===e?eSe(t,n):$Ue(e,r,sSe|oSe)}}var lSe=aSe;function ASe(n){return function(e){return e==null?void 0:e[n]}}var cSe=ASe,uSe=h5;function fSe(n){return function(e){return uSe(e,n)}}var dSe=fSe,hSe=cSe,pSe=dSe,gSe=wQ,mSe=Eb;function vSe(n){return gSe(n)?hSe(mSe(n)):pSe(n)}var ySe=vSe,BSe=XEe,wSe=lSe,CSe=K4,bSe=Lo,xSe=ySe;function ISe(n){return typeof n=="function"?n:n==null?CSe:typeof n=="object"?bSe(n)?wSe(n[0],n[1]):BSe(n):xSe(n)}var FSe=ISe,ESe=wb;function USe(n,e){return function(t,r){if(t==null)return t;if(!ESe(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var SSe=USe,_Se=X4,QSe=SSe,RSe=QSe(_Se),MSe=RSe,TSe=MSe,NSe=wb;function DSe(n,e){var t=-1,r=NSe(n)?Array(n.length):[];return TSe(n,function(i,s,o){r[++t]=e(i,s,o)}),r}var kSe=DSe,VSe=$4,LSe=FSe,PSe=kSe,WSe=Lo;function OSe(n,e){var t=WSe(n)?VSe:PSe;return t(n,LSe(e))}var GSe=OSe;Object.defineProperty(C0,"__esModule",{value:!0});C0.flattenNames=void 0;var ZSe=vCe,JSe=Ub(ZSe),HSe=dQ,zSe=Ub(HSe),YSe=xxe,XSe=Ub(YSe),KSe=GSe,jSe=Ub(KSe);function Ub(n){return n&&n.__esModule?n:{default:n}}var $Se=C0.flattenNames=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[];return(0,jSe.default)(e,function(r){Array.isArray(r)?n(r).map(function(i){return t.push(i)}):(0,XSe.default)(r)?(0,zSe.default)(r,function(i,s){i===!0&&t.push(s),t.push(s+"-"+i)}):(0,JSe.default)(r)&&t.push(r)}),t};C0.default=$Se;var I0={};function qSe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var e_e=qSe,t_e=Tu,n_e=function(){try{var n=t_e(Object,"defineProperty");return n({},"",{}),n}catch{}}(),r_e=n_e,AL=r_e;function i_e(n,e,t){e=="__proto__"&&AL?AL(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var p5=i_e,s_e=p5,o_e=pQ,a_e=Object.prototype,l_e=a_e.hasOwnProperty;function A_e(n,e,t){var r=n[e];(!(l_e.call(n,e)&&o_e(r,t))||t===void 0&&!(e in n))&&s_e(n,e,t)}var g5=A_e,c_e=g5,u_e=p5;function f_e(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?u_e(t,a,l):c_e(t,a,l)}return t}var Sb=f_e,d_e=Sb,h_e=x0;function p_e(n,e){return n&&d_e(e,h_e(e),n)}var g_e=p_e;function m_e(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var v_e=m_e,y_e=jh,B_e=fQ,w_e=v_e,C_e=Object.prototype,b_e=C_e.hasOwnProperty;function x_e(n){if(!y_e(n))return w_e(n);var e=B_e(n),t=[];for(var r in n)r=="constructor"&&(e||!b_e.call(n,r))||t.push(r);return t}var I_e=x_e,F_e=H4,E_e=I_e,U_e=wb;function S_e(n){return U_e(n)?F_e(n,!0):E_e(n)}var bQ=S_e,__e=Sb,Q_e=bQ;function R_e(n,e){return n&&__e(e,Q_e(e),n)}var M_e=R_e,iC={exports:{}};iC.exports;(function(n,e){var t=Pa,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(A,c){if(c)return A.slice();var u=A.length,f=a?a(u):new A.constructor(u);return A.copy(f),f}n.exports=l})(iC,iC.exports);var T_e=iC.exports;function N_e(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var D_e=N_e,k_e=Sb,V_e=yQ;function L_e(n,e){return k_e(n,V_e(n),e)}var P_e=L_e,W_e=n5,O_e=hQ,G_e=yQ,Z_e=i5,J_e=Object.getOwnPropertySymbols,H_e=J_e?function(n){for(var e=[];n;)W_e(e,G_e(n)),n=O_e(n);return e}:Z_e,m5=H_e,z_e=Sb,Y_e=m5;function X_e(n,e){return z_e(n,Y_e(n),e)}var K_e=X_e,j_e=r5,$_e=m5,q_e=bQ;function eQe(n){return j_e(n,q_e,$_e)}var tQe=eQe,nQe=Object.prototype,rQe=nQe.hasOwnProperty;function iQe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&rQe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var sQe=iQe,cL=t5;function oQe(n){var e=new n.constructor(n.byteLength);return new cL(e).set(new cL(n)),e}var xQ=oQe,aQe=xQ;function lQe(n,e){var t=e?aQe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var AQe=lQe,cQe=/\w*$/;function uQe(n){var e=new n.constructor(n.source,cQe.exec(n));return e.lastIndex=n.lastIndex,e}var fQe=uQe,uL=b0,fL=uL?uL.prototype:void 0,dL=fL?fL.valueOf:void 0;function dQe(n){return dL?Object(dL.call(n)):{}}var hQe=dQe,pQe=xQ;function gQe(n,e){var t=e?pQe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var mQe=gQe,vQe=xQ,yQe=AQe,BQe=fQe,wQe=hQe,CQe=mQe,bQe="[object Boolean]",xQe="[object Date]",IQe="[object Map]",FQe="[object Number]",EQe="[object RegExp]",UQe="[object Set]",SQe="[object String]",_Qe="[object Symbol]",QQe="[object ArrayBuffer]",RQe="[object DataView]",MQe="[object Float32Array]",TQe="[object Float64Array]",NQe="[object Int8Array]",DQe="[object Int16Array]",kQe="[object Int32Array]",VQe="[object Uint8Array]",LQe="[object Uint8ClampedArray]",PQe="[object Uint16Array]",WQe="[object Uint32Array]";function OQe(n,e,t){var r=n.constructor;switch(e){case QQe:return vQe(n);case bQe:case xQe:return new r(+n);case RQe:return yQe(n,t);case MQe:case TQe:case NQe:case DQe:case kQe:case VQe:case LQe:case PQe:case WQe:return CQe(n,t);case IQe:return new r;case FQe:case SQe:return new r(n);case EQe:return BQe(n);case UQe:return new r;case _Qe:return wQe(n)}}var GQe=OQe,ZQe=jh,hL=Object.create,JQe=function(){function n(){}return function(e){if(!ZQe(e))return{};if(hL)return hL(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),HQe=JQe,zQe=HQe,YQe=hQ,XQe=fQ;function KQe(n){return typeof n.constructor=="function"&&!XQe(n)?zQe(YQe(n)):{}}var jQe=KQe,$Qe=Fb,qQe=Ol,eRe="[object Map]";function tRe(n){return qQe(n)&&$Qe(n)==eRe}var nRe=tRe,rRe=nRe,iRe=cQ,pL=uQ,gL=pL&&pL.isMap,sRe=gL?iRe(gL):rRe,oRe=sRe,aRe=Fb,lRe=Ol,ARe="[object Set]";function cRe(n){return lRe(n)&&aRe(n)==ARe}var uRe=cRe,fRe=uRe,dRe=cQ,mL=uQ,vL=mL&&mL.isSet,hRe=vL?dRe(vL):fRe,pRe=hRe,gRe=vQ,mRe=e_e,vRe=g5,yRe=g_e,BRe=M_e,wRe=T_e,CRe=D_e,bRe=P_e,xRe=K_e,IRe=s5,FRe=tQe,ERe=Fb,URe=sQe,SRe=GQe,_Re=jQe,QRe=Lo,RRe=lQ,MRe=oRe,TRe=jh,NRe=pRe,DRe=x0,kRe=bQ,VRe=1,LRe=2,PRe=4,v5="[object Arguments]",WRe="[object Array]",ORe="[object Boolean]",GRe="[object Date]",ZRe="[object Error]",y5="[object Function]",JRe="[object GeneratorFunction]",HRe="[object Map]",zRe="[object Number]",B5="[object Object]",YRe="[object RegExp]",XRe="[object Set]",KRe="[object String]",jRe="[object Symbol]",$Re="[object WeakMap]",qRe="[object ArrayBuffer]",eMe="[object DataView]",tMe="[object Float32Array]",nMe="[object Float64Array]",rMe="[object Int8Array]",iMe="[object Int16Array]",sMe="[object Int32Array]",oMe="[object Uint8Array]",aMe="[object Uint8ClampedArray]",lMe="[object Uint16Array]",AMe="[object Uint32Array]",An={};An[v5]=An[WRe]=An[qRe]=An[eMe]=An[ORe]=An[GRe]=An[tMe]=An[nMe]=An[rMe]=An[iMe]=An[sMe]=An[HRe]=An[zRe]=An[B5]=An[YRe]=An[XRe]=An[KRe]=An[jRe]=An[oMe]=An[aMe]=An[lMe]=An[AMe]=!0;An[ZRe]=An[y5]=An[$Re]=!1;function bB(n,e,t,r,i,s){var o,a=e&VRe,l=e&LRe,A=e&PRe;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!TRe(n))return n;var c=QRe(n);if(c){if(o=URe(n),!a)return CRe(n,o)}else{var u=ERe(n),f=u==y5||u==JRe;if(RRe(n))return wRe(n,a);if(u==B5||u==v5||f&&!i){if(o=l||f?{}:_Re(n),!a)return l?xRe(n,BRe(o,n)):bRe(n,yRe(o,n))}else{if(!An[u])return i?n:{};o=SRe(n,u,a)}}s||(s=new gRe);var d=s.get(n);if(d)return d;s.set(n,o),NRe(n)?n.forEach(function(m){o.add(bB(m,e,t,m,n,s))}):MRe(n)&&n.forEach(function(m,g){o.set(g,bB(m,e,t,g,n,s))});var h=A?l?FRe:IRe:l?kRe:DRe,p=c?void 0:h(n);return mRe(p||n,function(m,g){p&&(g=m,m=n[g]),vRe(o,g,bB(m,e,t,g,n,s))}),o}var cMe=bB,uMe=cMe,fMe=1,dMe=4;function hMe(n){return uMe(n,fMe|dMe)}var pMe=hMe;Object.defineProperty(I0,"__esModule",{value:!0});I0.mergeClasses=void 0;var gMe=dQ,mMe=w5(gMe),vMe=pMe,yMe=w5(vMe),BMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function w5(n){return n&&n.__esModule?n:{default:n}}var wMe=I0.mergeClasses=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=e.default&&(0,yMe.default)(e.default)||{};return t.map(function(i){var s=e[i];return s&&(0,mMe.default)(s,function(o,a){r[a]||(r[a]={}),r[a]=BMe({},r[a],s[a])}),i}),r};I0.default=wMe;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.autoprefix=void 0;var CMe=dQ,yL=xMe(CMe),bMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n};function xMe(n){return n&&n.__esModule?n:{default:n}}var IMe={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},FMe=F0.autoprefix=function(e){var t={};return(0,yL.default)(e,function(r,i){var s={};(0,yL.default)(r,function(o,a){var l=IMe[a];l?s=bMe({},s,l(o)):s[a]=o}),t[i]=s}),t};F0.default=FMe;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.hover=void 0;var EMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UMe=me,R1=SMe(UMe);function SMe(n){return n&&n.__esModule?n:{default:n}}function _Me(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function BL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function QMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var RMe=E0.hover=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){QMe(i,r);function i(){var s,o,a,l;_Me(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=BL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return R1.default.createElement(t,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},R1.default.createElement(e,EMe({},a.props,a.state)))},o),BL(a,l)}return i}(R1.default.Component)};E0.default=RMe;var U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.active=void 0;var MMe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TMe=me,M1=NMe(TMe);function NMe(n){return n&&n.__esModule?n:{default:n}}function DMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function wL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function kMe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var VMe=U0.active=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){kMe(i,r);function i(){var s,o,a,l;DMe(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=wL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return M1.default.createElement(t,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},M1.default.createElement(e,MMe({},a.props,a.state)))},o),wL(a,l)}return i}(M1.default.Component)};U0.default=VMe;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});var LMe=function(e,t){var r={},i=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[o]=a};return e===0&&i("first-child"),e===t-1&&i("last-child"),(e===0||e%2===0)&&i("even"),Math.abs(e%2)===1&&i("odd"),i("nth-child",e),r};IQ.default=LMe;Object.defineProperty(Ls,"__esModule",{value:!0});Ls.ReactCSS=Ls.loop=Ls.handleActive=FQ=Ls.handleHover=Ls.hover=void 0;var PMe=C0,WMe=rp(PMe),OMe=I0,GMe=rp(OMe),ZMe=F0,JMe=rp(ZMe),HMe=E0,C5=rp(HMe),zMe=U0,YMe=rp(zMe),XMe=IQ,KMe=rp(XMe);function rp(n){return n&&n.__esModule?n:{default:n}}Ls.hover=C5.default;var FQ=Ls.handleHover=C5.default;Ls.handleActive=YMe.default;Ls.loop=KMe.default;var jMe=Ls.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var s=(0,WMe.default)(r),o=(0,GMe.default)(e,s);return(0,JMe.default)(o)},ut=Ls.default=jMe,$Me=function(e,t,r,i,s){var o=s.clientWidth,a=s.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,A=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,c=l-(s.getBoundingClientRect().left+window.pageXOffset),u=A-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var f=void 0;if(u<0?f=0:u>a?f=1:f=Math.round(u*100/a)/100,t.a!==f)return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}else{var d=void 0;if(c<0?d=0:c>o?d=1:d=Math.round(c*100/o)/100,i!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null},T1={},qMe=function(e,t,r,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=r*2,s.height=r*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=t,o.fillRect(0,0,r,r),o.translate(r,r),o.fillRect(0,0,r,r),s.toDataURL()):null},e2e=function(e,t,r,i){var s=e+"-"+t+"-"+r+(i?"-server":"");if(T1[s])return T1[s];var o=qMe(e,t,r,i);return T1[s]=o,o},CL=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ip=function(e){var t=e.white,r=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,a=e.boxShadow,l=e.children,A=ut({default:{grid:{borderRadius:o,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+e2e(t,r,i,s.canvas)+") center left"}}});return me.isValidElement(l)?z.cloneElement(l,CL({},l.props,{style:CL({},l.props.style,A.grid)})):z.createElement("div",{style:A.grid})};ip.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var t2e=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},n2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function r2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function i2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var EQ=function(n){i2e(e,n);function e(){var t,r,i,s;r2e(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=bL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=$Me(A,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},r),bL(i,s)}return n2e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,i=this.props.rgb,s=ut({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:t2e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return z.createElement("div",{style:s.alpha},z.createElement("div",{style:s.checkboard},z.createElement(ip,{renderers:this.props.renderers})),z.createElement("div",{style:s.gradient}),z.createElement("div",{style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.createElement("div",{style:s.pointer},this.props.pointer?z.createElement(this.props.pointer,this.props):z.createElement("div",{style:s.slider}))))}}]),e}(me.PureComponent||me.Component),s2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function o2e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function a2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function l2e(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function A2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var c2e=1,b5=38,u2e=40,f2e=[b5,u2e],d2e=function(e){return f2e.indexOf(e)>-1},h2e=function(e){return Number(String(e).replace(/%/g,""))},p2e=1,Rt=function(n){A2e(e,n);function e(t){a2e(this,e);var r=l2e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(i){r.setUpdatedValue(i.target.value,i)},r.handleKeyDown=function(i){var s=h2e(i.target.value);if(!isNaN(s)&&d2e(i.keyCode)){var o=r.getArrowOffset(),a=i.keyCode===b5?s+o:s-o;r.setUpdatedValue(a,i)}},r.handleDrag=function(i){if(r.props.dragLabel){var s=Math.round(r.props.value+i.movementX);s>=0&&s<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(s),i)}},r.handleMouseDown=function(i){r.props.dragLabel&&(i.preventDefault(),r.handleDrag(i),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},r.inputId="rc-editable-input-"+p2e++,r}return s2e(e,[{key:"componentDidUpdate",value:function(r,i){this.props.value!==this.state.value&&(r.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return o2e({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||c2e}},{key:"setUpdatedValue",value:function(r,i){var s=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(s,i),this.setState({value:r})}},{key:"render",value:function(){var r=this,i=ut({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return z.createElement("div",{style:i.wrap},z.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return r.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?z.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(me.PureComponent||me.Component),g2e=function(e,t,r,i){var s=i.clientWidth,o=i.clientHeight,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if(t==="vertical"){var u=void 0;if(c<0)u=359;else if(c>o)u=0;else{var f=-(c*100/o)+100;u=360*f/100}if(r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(A<0)d=0;else if(A>s)d=359;else{var h=A*100/s;d=360*h/100}if(r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},m2e=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function v2e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function y2e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var sp=function(n){y2e(e,n);function e(){var t,r,i,s;v2e(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=xL(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.handleChange=function(A){var c=g2e(A,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},r),xL(i,s)}return m2e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=ut({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return z.createElement("div",{style:o.hue},z.createElement("div",{className:"hue-"+s,style:o.container,ref:function(l){return r.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),z.createElement("div",{style:o.pointer},this.props.pointer?z.createElement(this.props.pointer,this.props):z.createElement("div",{style:o.slider}))))}}]),e}(me.PureComponent||me.Component),x5={exports:{}},B2e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w2e=B2e,C2e=w2e;function I5(){}function F5(){}F5.resetWarningCache=I5;var b2e=function(){function n(r,i,s,o,a,l){if(l!==C2e){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:F5,resetWarningCache:I5};return t.PropTypes=t,t};x5.exports=b2e();var x2e=x5.exports;const Ne=Cu(x2e);function I2e(){this.__data__=[],this.size=0}function S0(n,e){return n===e||n!==n&&e!==e}function _b(n,e){for(var t=n.length;t--;)if(S0(n[t][0],e))return t;return-1}var F2e=Array.prototype,E2e=F2e.splice;function U2e(n){var e=this.__data__,t=_b(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():E2e.call(e,t,1),--this.size,!0}function S2e(n){var e=this.__data__,t=_b(e,n);return t<0?void 0:e[t][1]}function _2e(n){return _b(this.__data__,n)>-1}function Q2e(n,e){var t=this.__data__,r=_b(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Gl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Gl.prototype.clear=I2e;Gl.prototype.delete=U2e;Gl.prototype.get=S2e;Gl.prototype.has=_2e;Gl.prototype.set=Q2e;function R2e(){this.__data__=new Gl,this.size=0}function M2e(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function T2e(n){return this.__data__.get(n)}function N2e(n){return this.__data__.has(n)}var D2e=typeof global=="object"&&global&&global.Object===Object&&global;const E5=D2e;var k2e=typeof self=="object"&&self&&self.Object===Object&&self,V2e=E5||k2e||Function("return this")();const Po=V2e;var L2e=Po.Symbol;const ic=L2e;var U5=Object.prototype,P2e=U5.hasOwnProperty,W2e=U5.toString,jp=ic?ic.toStringTag:void 0;function O2e(n){var e=P2e.call(n,jp),t=n[jp];try{n[jp]=void 0;var r=!0}catch{}var i=W2e.call(n);return r&&(e?n[jp]=t:delete n[jp]),i}var G2e=Object.prototype,Z2e=G2e.toString;function J2e(n){return Z2e.call(n)}var H2e="[object Null]",z2e="[object Undefined]",IL=ic?ic.toStringTag:void 0;function Nu(n){return n==null?n===void 0?z2e:H2e:IL&&IL in Object(n)?O2e(n):J2e(n)}function io(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Y2e="[object AsyncFunction]",X2e="[object Function]",K2e="[object GeneratorFunction]",j2e="[object Proxy]";function UQ(n){if(!io(n))return!1;var e=Nu(n);return e==X2e||e==K2e||e==Y2e||e==j2e}var $2e=Po["__core-js_shared__"];const N1=$2e;var FL=function(){var n=/[^.]+$/.exec(N1&&N1.keys&&N1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function q2e(n){return!!FL&&FL in n}var eTe=Function.prototype,tTe=eTe.toString;function Du(n){if(n!=null){try{return tTe.call(n)}catch{}try{return n+""}catch{}}return""}var nTe=/[\\^$.*+?()[\]{}|]/g,rTe=/^\[object .+?Constructor\]$/,iTe=Function.prototype,sTe=Object.prototype,oTe=iTe.toString,aTe=sTe.hasOwnProperty,lTe=RegExp("^"+oTe.call(aTe).replace(nTe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ATe(n){if(!io(n)||q2e(n))return!1;var e=UQ(n)?lTe:rTe;return e.test(Du(n))}function cTe(n,e){return n==null?void 0:n[e]}function ku(n,e){var t=cTe(n,e);return ATe(t)?t:void 0}var uTe=ku(Po,"Map");const zm=uTe;var fTe=ku(Object,"create");const Ym=fTe;function dTe(){this.__data__=Ym?Ym(null):{},this.size=0}function hTe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var pTe="__lodash_hash_undefined__",gTe=Object.prototype,mTe=gTe.hasOwnProperty;function vTe(n){var e=this.__data__;if(Ym){var t=e[n];return t===pTe?void 0:t}return mTe.call(e,n)?e[n]:void 0}var yTe=Object.prototype,BTe=yTe.hasOwnProperty;function wTe(n){var e=this.__data__;return Ym?e[n]!==void 0:BTe.call(e,n)}var CTe="__lodash_hash_undefined__";function bTe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ym&&e===void 0?CTe:e,this}function wu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}wu.prototype.clear=dTe;wu.prototype.delete=hTe;wu.prototype.get=vTe;wu.prototype.has=wTe;wu.prototype.set=bTe;function xTe(){this.size=0,this.__data__={hash:new wu,map:new(zm||Gl),string:new wu}}function ITe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Qb(n,e){var t=n.__data__;return ITe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function FTe(n){var e=Qb(this,n).delete(n);return this.size-=e?1:0,e}function ETe(n){return Qb(this,n).get(n)}function UTe(n){return Qb(this,n).has(n)}function STe(n,e){var t=Qb(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Zl(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Zl.prototype.clear=xTe;Zl.prototype.delete=FTe;Zl.prototype.get=ETe;Zl.prototype.has=UTe;Zl.prototype.set=STe;var _Te=200;function QTe(n,e){var t=this.__data__;if(t instanceof Gl){var r=t.__data__;if(!zm||r.length<_Te-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Zl(r)}return t.set(n,e),this.size=t.size,this}function ba(n){var e=this.__data__=new Gl(n);this.size=e.size}ba.prototype.clear=R2e;ba.prototype.delete=M2e;ba.prototype.get=T2e;ba.prototype.has=N2e;ba.prototype.set=QTe;var RTe=function(){try{var n=ku(Object,"defineProperty");return n({},"",{}),n}catch{}}();const sC=RTe;function SQ(n,e,t){e=="__proto__"&&sC?sC(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function QU(n,e,t){(t!==void 0&&!S0(n[e],t)||t===void 0&&!(e in n))&&SQ(n,e,t)}function MTe(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var TTe=MTe();const S5=TTe;var _5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,EL=_5&&typeof module=="object"&&module&&!module.nodeType&&module,NTe=EL&&EL.exports===_5,UL=NTe?Po.Buffer:void 0,SL=UL?UL.allocUnsafe:void 0;function DTe(n,e){if(e)return n.slice();var t=n.length,r=SL?SL(t):new n.constructor(t);return n.copy(r),r}var kTe=Po.Uint8Array;const oC=kTe;function VTe(n){var e=new n.constructor(n.byteLength);return new oC(e).set(new oC(n)),e}function LTe(n,e){var t=e?VTe(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}function PTe(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var _L=Object.create,WTe=function(){function n(){}return function(e){if(!io(e))return{};if(_L)return _L(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const OTe=WTe;function Q5(n,e){return function(t){return n(e(t))}}var GTe=Q5(Object.getPrototypeOf,Object);const R5=GTe;var ZTe=Object.prototype;function _Q(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ZTe;return n===t}function JTe(n){return typeof n.constructor=="function"&&!_Q(n)?OTe(R5(n)):{}}function sc(n){return n!=null&&typeof n=="object"}var HTe="[object Arguments]";function QL(n){return sc(n)&&Nu(n)==HTe}var M5=Object.prototype,zTe=M5.hasOwnProperty,YTe=M5.propertyIsEnumerable,XTe=QL(function(){return arguments}())?QL:function(n){return sc(n)&&zTe.call(n,"callee")&&!YTe.call(n,"callee")};const aC=XTe;var KTe=Array.isArray;const hs=KTe;var jTe=9007199254740991;function QQ(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=jTe}function op(n){return n!=null&&QQ(n.length)&&!UQ(n)}function $Te(n){return sc(n)&&op(n)}function qTe(){return!1}var T5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RL=T5&&typeof module=="object"&&module&&!module.nodeType&&module,eNe=RL&&RL.exports===T5,ML=eNe?Po.Buffer:void 0,tNe=ML?ML.isBuffer:void 0,nNe=tNe||qTe;const lC=nNe;var rNe="[object Object]",iNe=Function.prototype,sNe=Object.prototype,N5=iNe.toString,oNe=sNe.hasOwnProperty,aNe=N5.call(Object);function lNe(n){if(!sc(n)||Nu(n)!=rNe)return!1;var e=R5(n);if(e===null)return!0;var t=oNe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&N5.call(t)==aNe}var ANe="[object Arguments]",cNe="[object Array]",uNe="[object Boolean]",fNe="[object Date]",dNe="[object Error]",hNe="[object Function]",pNe="[object Map]",gNe="[object Number]",mNe="[object Object]",vNe="[object RegExp]",yNe="[object Set]",BNe="[object String]",wNe="[object WeakMap]",CNe="[object ArrayBuffer]",bNe="[object DataView]",xNe="[object Float32Array]",INe="[object Float64Array]",FNe="[object Int8Array]",ENe="[object Int16Array]",UNe="[object Int32Array]",SNe="[object Uint8Array]",_Ne="[object Uint8ClampedArray]",QNe="[object Uint16Array]",RNe="[object Uint32Array]",hn={};hn[xNe]=hn[INe]=hn[FNe]=hn[ENe]=hn[UNe]=hn[SNe]=hn[_Ne]=hn[QNe]=hn[RNe]=!0;hn[ANe]=hn[cNe]=hn[CNe]=hn[uNe]=hn[bNe]=hn[fNe]=hn[dNe]=hn[hNe]=hn[pNe]=hn[gNe]=hn[mNe]=hn[vNe]=hn[yNe]=hn[BNe]=hn[wNe]=!1;function MNe(n){return sc(n)&&QQ(n.length)&&!!hn[Nu(n)]}function TNe(n){return function(e){return n(e)}}var D5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hg=D5&&typeof module=="object"&&module&&!module.nodeType&&module,NNe=Hg&&Hg.exports===D5,D1=NNe&&E5.process,DNe=function(){try{var n=Hg&&Hg.require&&Hg.require("util").types;return n||D1&&D1.binding&&D1.binding("util")}catch{}}();const TL=DNe;var NL=TL&&TL.isTypedArray,kNe=NL?TNe(NL):MNe;const RQ=kNe;function RU(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var VNe=Object.prototype,LNe=VNe.hasOwnProperty;function PNe(n,e,t){var r=n[e];(!(LNe.call(n,e)&&S0(r,t))||t===void 0&&!(e in n))&&SQ(n,e,t)}function WNe(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?SQ(t,a,l):PNe(t,a,l)}return t}function ONe(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var GNe=9007199254740991,ZNe=/^(?:0|[1-9]\d*)$/;function MQ(n,e){var t=typeof n;return e=e??GNe,!!e&&(t=="number"||t!="symbol"&&ZNe.test(n))&&n>-1&&n%1==0&&n<e}var JNe=Object.prototype,HNe=JNe.hasOwnProperty;function k5(n,e){var t=hs(n),r=!t&&aC(n),i=!t&&!r&&lC(n),s=!t&&!r&&!i&&RQ(n),o=t||r||i||s,a=o?ONe(n.length,String):[],l=a.length;for(var A in n)(e||HNe.call(n,A))&&!(o&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||MQ(A,l)))&&a.push(A);return a}function zNe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var YNe=Object.prototype,XNe=YNe.hasOwnProperty;function KNe(n){if(!io(n))return zNe(n);var e=_Q(n),t=[];for(var r in n)r=="constructor"&&(e||!XNe.call(n,r))||t.push(r);return t}function V5(n){return op(n)?k5(n,!0):KNe(n)}function jNe(n){return WNe(n,V5(n))}function $Ne(n,e,t,r,i,s,o){var a=RU(n,t),l=RU(e,t),A=o.get(l);if(A){QU(n,t,A);return}var c=s?s(a,l,t+"",n,e,o):void 0,u=c===void 0;if(u){var f=hs(l),d=!f&&lC(l),h=!f&&!d&&RQ(l);c=l,f||d||h?hs(a)?c=a:$Te(a)?c=PTe(a):d?(u=!1,c=DTe(l,!0)):h?(u=!1,c=LTe(l,!0)):c=[]:lNe(l)||aC(l)?(c=a,aC(a)?c=jNe(a):(!io(a)||UQ(a))&&(c=JTe(l))):u=!1}u&&(o.set(l,c),i(c,l,r,s,o),o.delete(l)),QU(n,t,c)}function L5(n,e,t,r,i){n!==e&&S5(e,function(s,o){if(i||(i=new ba),io(s))$Ne(n,e,o,t,L5,r,i);else{var a=r?r(RU(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),QU(n,o,a)}},V5)}function Rb(n){return n}function qNe(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var DL=Math.max;function eDe(n,e,t){return e=DL(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=DL(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),qNe(n,this,a)}}function tDe(n){return function(){return n}}var nDe=sC?function(n,e){return sC(n,"toString",{configurable:!0,enumerable:!1,value:tDe(e),writable:!0})}:Rb;const rDe=nDe;var iDe=800,sDe=16,oDe=Date.now;function aDe(n){var e=0,t=0;return function(){var r=oDe(),i=sDe-(r-t);if(t=r,i>0){if(++e>=iDe)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var lDe=aDe(rDe);const ADe=lDe;function cDe(n,e){return ADe(eDe(n,e,Rb),n+"")}function uDe(n,e,t){if(!io(t))return!1;var r=typeof e;return(r=="number"?op(t)&&MQ(e,t.length):r=="string"&&e in t)?S0(t[e],n):!1}function fDe(n){return cDe(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&uDe(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var dDe=fDe(function(n,e,t){L5(n,e,t)});const Vi=dDe;var _0=function(e){var t=e.zDepth,r=e.radius,i=e.background,s=e.children,o=e.styles,a=o===void 0?{}:o,l=ut(Vi({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+t*4+"px rgba(0,0,0,.24)",borderRadius:r,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":t===1});return z.createElement("div",{style:l.wrap},z.createElement("div",{style:l.bg}),z.createElement("div",{style:l.content},s))};_0.propTypes={background:Ne.string,zDepth:Ne.oneOf([0,1,2,3,4,5]),radius:Ne.number,styles:Ne.object};_0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var hDe=function(){return Po.Date.now()};const k1=hDe;var pDe=/\s/;function gDe(n){for(var e=n.length;e--&&pDe.test(n.charAt(e)););return e}var mDe=/^\s+/;function vDe(n){return n&&n.slice(0,gDe(n)+1).replace(mDe,"")}var yDe="[object Symbol]";function Mb(n){return typeof n=="symbol"||sc(n)&&Nu(n)==yDe}var kL=0/0,BDe=/^[-+]0x[0-9a-f]+$/i,wDe=/^0b[01]+$/i,CDe=/^0o[0-7]+$/i,bDe=parseInt;function VL(n){if(typeof n=="number")return n;if(Mb(n))return kL;if(io(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=io(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=vDe(n);var t=wDe.test(n);return t||CDe.test(n)?bDe(n.slice(2),t?2:8):BDe.test(n)?kL:+n}var xDe="Expected a function",IDe=Math.max,FDe=Math.min;function P5(n,e,t){var r,i,s,o,a,l,A=0,c=!1,u=!1,f=!0;if(typeof n!="function")throw new TypeError(xDe);e=VL(e)||0,io(t)&&(c=!!t.leading,u="maxWait"in t,s=u?IDe(VL(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(b){var F=r,x=i;return r=i=void 0,A=b,o=n.apply(x,F),o}function h(b){return A=b,a=setTimeout(g,e),c?d(b):o}function p(b){var F=b-l,x=b-A,S=e-F;return u?FDe(S,s-x):S}function m(b){var F=b-l,x=b-A;return l===void 0||F>=e||F<0||u&&x>=s}function g(){var b=k1();if(m(b))return v(b);a=setTimeout(g,p(b))}function v(b){return a=void 0,f&&r?d(b):(r=i=void 0,o)}function y(){a!==void 0&&clearTimeout(a),A=0,r=l=i=a=void 0}function w(){return a===void 0?o:v(k1())}function C(){var b=k1(),F=m(b);if(r=arguments,i=this,l=b,F){if(a===void 0)return h(l);if(u)return clearTimeout(a),a=setTimeout(g,e),d(l)}return a===void 0&&(a=setTimeout(g,e)),o}return C.cancel=y,C.flush=w,C}var EDe="Expected a function";function UDe(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(EDe);return io(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),P5(n,e,{leading:r,maxWait:e,trailing:i})}var SDe=function(e,t,r){var i=r.getBoundingClientRect(),s=i.width,o=i.height,a=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,l=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,A=a-(r.getBoundingClientRect().left+window.pageXOffset),c=l-(r.getBoundingClientRect().top+window.pageYOffset);A<0?A=0:A>s&&(A=s),c<0?c=0:c>o&&(c=o);var u=A/s,f=1-c/o;return{h:t.h,s:u,v:f,a:t.a,source:"hsv"}},_De=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function QDe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function RDe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function MDe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Tb=function(n){MDe(e,n);function e(t){QDe(this,e);var r=RDe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.handleChange=function(i){typeof r.props.onChange=="function"&&r.throttle(r.props.onChange,SDe(i,r.props.hsl,r.container),i)},r.handleMouseDown=function(i){r.handleChange(i);var s=r.getContainerRenderWindow();s.addEventListener("mousemove",r.handleChange),s.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=UDe(function(i,s,o){i(s,o)},50),r}return _De(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,i=window;!i.document.contains(r)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,i=this.props.style||{},s=i.color,o=i.white,a=i.black,l=i.pointer,A=i.circle,c=ut({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:a,pointer:l,circle:A}},{custom:!!this.props.style});return z.createElement("div",{style:c.color,ref:function(f){return r.container=f},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},z.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),z.createElement("div",{style:c.white,className:"saturation-white"},z.createElement("div",{style:c.black,className:"saturation-black"}),z.createElement("div",{style:c.pointer},this.props.pointer?z.createElement(this.props.pointer,this.props):z.createElement("div",{style:c.circle}))))}}]),e}(me.PureComponent||me.Component);function TDe(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var NDe=Q5(Object.keys,Object);const DDe=NDe;var kDe=Object.prototype,VDe=kDe.hasOwnProperty;function LDe(n){if(!_Q(n))return DDe(n);var e=[];for(var t in Object(n))VDe.call(n,t)&&t!="constructor"&&e.push(t);return e}function TQ(n){return op(n)?k5(n):LDe(n)}function PDe(n,e){return n&&S5(n,e,TQ)}function WDe(n,e){return function(t,r){if(t==null)return t;if(!op(t))return n(t,r);for(var i=t.length,s=e?i:-1,o=Object(t);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}var ODe=WDe(PDe);const W5=ODe;function GDe(n){return typeof n=="function"?n:Rb}function ZDe(n,e){var t=hs(n)?TDe:W5;return t(n,GDe(e))}function AC(n){"@babel/helpers - typeof";return AC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AC(n)}var JDe=/^\s+/,HDe=/\s+$/;function Ke(n,e){if(n=n||"",e=e||{},n instanceof Ke)return n;if(!(this instanceof Ke))return new Ke(n,e);var t=zDe(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}Ke.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=O5(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=PL(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=PL(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=LL(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=LL(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return WL(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return jDe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Bn(this._r,255)*100)+"%",g:Math.round(Bn(this._g,255)*100)+"%",b:Math.round(Bn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Bn(this._r,255)*100)+"%, "+Math.round(Bn(this._g,255)*100)+"%, "+Math.round(Bn(this._b,255)*100)+"%)":"rgba("+Math.round(Bn(this._r,255)*100)+"%, "+Math.round(Bn(this._g,255)*100)+"%, "+Math.round(Bn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Ake[WL(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+OL(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Ke(e);r="#"+OL(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return Ke(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(tke,arguments)},brighten:function(){return this._applyModification(nke,arguments)},darken:function(){return this._applyModification(rke,arguments)},desaturate:function(){return this._applyModification($De,arguments)},saturate:function(){return this._applyModification(qDe,arguments)},greyscale:function(){return this._applyModification(eke,arguments)},spin:function(){return this._applyModification(ike,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(ake,arguments)},complement:function(){return this._applyCombination(ske,arguments)},monochromatic:function(){return this._applyCombination(lke,arguments)},splitcomplement:function(){return this._applyCombination(oke,arguments)},triad:function(){return this._applyCombination(GL,[3])},tetrad:function(){return this._applyCombination(GL,[4])}};Ke.fromRatio=function(n,e){if(AC(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Cg(n[r]));n=t}return Ke(n,e)};function zDe(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=dke(n)),AC(n)=="object"&&(tl(n.r)&&tl(n.g)&&tl(n.b)?(e=YDe(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):tl(n.h)&&tl(n.s)&&tl(n.v)?(r=Cg(n.s),i=Cg(n.v),e=KDe(n.h,r,i),o=!0,a="hsv"):tl(n.h)&&tl(n.s)&&tl(n.l)&&(r=Cg(n.s),s=Cg(n.l),e=XDe(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=O5(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function YDe(n,e,t){return{r:Bn(n,255)*255,g:Bn(e,255)*255,b:Bn(t,255)*255}}function LL(n,e,t){n=Bn(n,255),e=Bn(e,255),t=Bn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function XDe(n,e,t){var r,i,s;n=Bn(n,360),e=Bn(e,100),t=Bn(t,100);function o(A,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?A+(c-A)*6*u:u<1/2?c:u<2/3?A+(c-A)*(2/3-u)*6:A}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function PL(n,e,t){n=Bn(n,255),e=Bn(e,255),t=Bn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function KDe(n,e,t){n=Bn(n,360)*6,e=Bn(e,100),t=Bn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,A=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],u=[s,s,a,t,t,o][l];return{r:A*255,g:c*255,b:u*255}}function WL(n,e,t,r){var i=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function jDe(n,e,t,r,i){var s=[Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16)),Qo(G5(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function OL(n,e,t,r){var i=[Qo(G5(r)),Qo(Math.round(n).toString(16)),Qo(Math.round(e).toString(16)),Qo(Math.round(t).toString(16))];return i.join("")}Ke.equals=function(n,e){return!n||!e?!1:Ke(n).toRgbString()==Ke(e).toRgbString()};Ke.random=function(){return Ke.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function $De(n,e){e=e===0?0:e||10;var t=Ke(n).toHsl();return t.s-=e/100,t.s=Nb(t.s),Ke(t)}function qDe(n,e){e=e===0?0:e||10;var t=Ke(n).toHsl();return t.s+=e/100,t.s=Nb(t.s),Ke(t)}function eke(n){return Ke(n).desaturate(100)}function tke(n,e){e=e===0?0:e||10;var t=Ke(n).toHsl();return t.l+=e/100,t.l=Nb(t.l),Ke(t)}function nke(n,e){e=e===0?0:e||10;var t=Ke(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),Ke(t)}function rke(n,e){e=e===0?0:e||10;var t=Ke(n).toHsl();return t.l-=e/100,t.l=Nb(t.l),Ke(t)}function ike(n,e){var t=Ke(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,Ke(t)}function ske(n){var e=Ke(n).toHsl();return e.h=(e.h+180)%360,Ke(e)}function GL(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=Ke(n).toHsl(),r=[Ke(n)],i=360/e,s=1;s<e;s++)r.push(Ke({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function oke(n){var e=Ke(n).toHsl(),t=e.h;return[Ke(n),Ke({h:(t+72)%360,s:e.s,l:e.l}),Ke({h:(t+216)%360,s:e.s,l:e.l})]}function ake(n,e,t){e=e||6,t=t||30;var r=Ke(n).toHsl(),i=360/t,s=[Ke(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(Ke(r));return s}function lke(n,e){e=e||6;for(var t=Ke(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(Ke({h:r,s:i,v:s})),s=(s+a)%1;return o}Ke.mix=function(n,e,t){t=t===0?0:t||50;var r=Ke(n).toRgb(),i=Ke(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return Ke(o)};Ke.readability=function(n,e){var t=Ke(n),r=Ke(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};Ke.isReadable=function(n,e,t){var r=Ke.readability(n,e),i,s;switch(s=!1,i=hke(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};Ke.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var A=0;A<e.length;A++)s=Ke.readability(n,e[A]),s>i&&(i=s,r=Ke(e[A]));return Ke.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,Ke.mostReadable(n,["#fff","#000"],t))};var MU=Ke.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ake=Ke.hexNames=cke(MU);function cke(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function O5(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Bn(n,e){uke(n)&&(n="100%");var t=fke(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Nb(n){return Math.min(1,Math.max(0,n))}function Hi(n){return parseInt(n,16)}function uke(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function fke(n){return typeof n=="string"&&n.indexOf("%")!=-1}function Qo(n){return n.length==1?"0"+n:""+n}function Cg(n){return n<=1&&(n=n*100+"%"),n}function G5(n){return Math.round(parseFloat(n)*255).toString(16)}function ZL(n){return Hi(n)/255}var bo=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function tl(n){return!!bo.CSS_UNIT.exec(n)}function dke(n){n=n.replace(JDe,"").replace(HDe,"").toLowerCase();var e=!1;if(MU[n])n=MU[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=bo.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=bo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=bo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=bo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=bo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=bo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=bo.hex8.exec(n))?{r:Hi(t[1]),g:Hi(t[2]),b:Hi(t[3]),a:ZL(t[4]),format:e?"name":"hex8"}:(t=bo.hex6.exec(n))?{r:Hi(t[1]),g:Hi(t[2]),b:Hi(t[3]),format:e?"name":"hex"}:(t=bo.hex4.exec(n))?{r:Hi(t[1]+""+t[1]),g:Hi(t[2]+""+t[2]),b:Hi(t[3]+""+t[3]),a:ZL(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=bo.hex3.exec(n))?{r:Hi(t[1]+""+t[1]),g:Hi(t[2]+""+t[2]),b:Hi(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function hke(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var JL=function(e){var t=["r","g","b","a","h","s","l","v"],r=0,i=0;return ZDe(t,function(s){if(e[s]&&(r+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),r===i?e:!1},bg=function(e,t){var r=e.hex?Ke(e.hex):Ke(e),i=r.toHsl(),s=r.toHsv(),o=r.toRgb(),a=r.toHex();i.s===0&&(i.h=t||0,s.h=t||0);var l=a==="000000"&&o.a===0;return{hsl:i,hex:l?"transparent":"#"+a,rgb:o,hsv:s,oldHue:e.h||t||i.h,source:e.source}},pc=function(e){if(e==="transparent")return!0;var t=String(e).charAt(0)==="#"?1:0;return e.length!==4+t&&e.length<7+t&&Ke(e).isValid()},NQ=function(e){if(!e)return"#fff";var t=bg(e);if(t.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(t.rgb.r*299+t.rgb.g*587+t.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},V1=function(e,t){var r=e.replace("","");return Ke(t+" ("+r+")")._ok},$p=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pke=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function gke(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mke(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function vke(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Li=function(e){var t=function(r){vke(i,r);function i(s){gke(this,i);var o=mke(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(a,l){var A=JL(a);if(A){var c=bg(a,a.h||o.state.oldHue);o.setState(c),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,c,l),o.props.onChange&&o.props.onChange(c,l)}},o.handleSwatchHover=function(a,l){var A=JL(a);if(A){var c=bg(a,a.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(c,l)}},o.state=$p({},bg(s.color,0)),o.debounce=P5(function(a,l,A){a(l,A)},100),o}return pke(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),z.createElement(e,$p({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,a){return $p({},bg(o.color,a.oldHue))}}]),i}(me.PureComponent||me.Component);return t.propTypes=$p({},e.propTypes),t.defaultProps=$p({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},yke=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bke=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function wke(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function HL(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Cke(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var bke=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){Cke(i,r);function i(){var s,o,a,l;wke(this,i);for(var A=arguments.length,c=Array(A),u=0;u<A;u++)c[u]=arguments[u];return l=(o=(a=HL(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(c))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},o),HL(a,l)}return Bke(i,[{key:"render",value:function(){return z.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},z.createElement(e,yke({},this.props,this.state)))}}]),i}(z.Component)},zL=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xke=13,Ike=function(e){var t=e.color,r=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,a=e.title,l=a===void 0?t:a,A=e.children,c=e.focus,u=e.focusStyle,f=u===void 0?{}:u,d=t==="transparent",h=ut({default:{swatch:zL({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?f:{})}}),p=function(w){return s(t,w)},m=function(w){return w.keyCode===xke&&s(t,w)},g=function(w){return o(t,w)},v={};return o&&(v.onMouseOver=g),z.createElement("div",zL({style:h.swatch,onClick:p,title:l,tabIndex:0,onKeyDown:m},v),A,d&&z.createElement(ip,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Vu=bke(Ike);var Fke=function(e){var t=e.direction,r=ut({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return z.createElement("div",{style:r.picker})},Eke=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Z5=function(e){var t=e.rgb,r=e.hsl,i=e.width,s=e.height,o=e.onChange,a=e.direction,l=e.style,A=e.renderers,c=e.pointer,u=e.className,f=u===void 0?"":u,d=ut({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:l}}});return z.createElement("div",{style:d.picker,className:"alpha-picker "+f},z.createElement(EQ,Eke({},d.alpha,{rgb:t,hsl:r,pointer:c,renderers:A,onChange:o,direction:a})))};Z5.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Fke};Li(Z5);function J5(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var Uke="__lodash_hash_undefined__";function Ske(n){return this.__data__.set(n,Uke),this}function _ke(n){return this.__data__.has(n)}function cC(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Zl;++e<t;)this.add(n[e])}cC.prototype.add=cC.prototype.push=Ske;cC.prototype.has=_ke;function Qke(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function Rke(n,e){return n.has(e)}var Mke=1,Tke=2;function H5(n,e,t,r,i,s){var o=t&Mke,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var A=s.get(n),c=s.get(e);if(A&&c)return A==e&&c==n;var u=-1,f=!0,d=t&Tke?new cC:void 0;for(s.set(n,e),s.set(e,n);++u<a;){var h=n[u],p=e[u];if(r)var m=o?r(p,h,u,e,n,s):r(h,p,u,n,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!Qke(e,function(g,v){if(!Rke(d,v)&&(h===g||i(h,g,t,r,s)))return d.push(v)})){f=!1;break}}else if(!(h===p||i(h,p,t,r,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function Nke(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function Dke(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var kke=1,Vke=2,Lke="[object Boolean]",Pke="[object Date]",Wke="[object Error]",Oke="[object Map]",Gke="[object Number]",Zke="[object RegExp]",Jke="[object Set]",Hke="[object String]",zke="[object Symbol]",Yke="[object ArrayBuffer]",Xke="[object DataView]",YL=ic?ic.prototype:void 0,L1=YL?YL.valueOf:void 0;function Kke(n,e,t,r,i,s,o){switch(t){case Xke:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Yke:return!(n.byteLength!=e.byteLength||!s(new oC(n),new oC(e)));case Lke:case Pke:case Gke:return S0(+n,+e);case Wke:return n.name==e.name&&n.message==e.message;case Zke:case Hke:return n==e+"";case Oke:var a=Nke;case Jke:var l=r&kke;if(a||(a=Dke),n.size!=e.size&&!l)return!1;var A=o.get(n);if(A)return A==e;r|=Vke,o.set(n,e);var c=H5(a(n),a(e),r,i,s,o);return o.delete(n),c;case zke:if(L1)return L1.call(n)==L1.call(e)}return!1}function jke(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}function $ke(n,e,t){var r=e(n);return hs(n)?r:jke(r,t(n))}function qke(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function eVe(){return[]}var tVe=Object.prototype,nVe=tVe.propertyIsEnumerable,XL=Object.getOwnPropertySymbols,rVe=XL?function(n){return n==null?[]:(n=Object(n),qke(XL(n),function(e){return nVe.call(n,e)}))}:eVe;const iVe=rVe;function KL(n){return $ke(n,TQ,iVe)}var sVe=1,oVe=Object.prototype,aVe=oVe.hasOwnProperty;function lVe(n,e,t,r,i,s){var o=t&sVe,a=KL(n),l=a.length,A=KL(e),c=A.length;if(l!=c&&!o)return!1;for(var u=l;u--;){var f=a[u];if(!(o?f in e:aVe.call(e,f)))return!1}var d=s.get(n),h=s.get(e);if(d&&h)return d==e&&h==n;var p=!0;s.set(n,e),s.set(e,n);for(var m=o;++u<l;){f=a[u];var g=n[f],v=e[f];if(r)var y=o?r(v,g,f,e,n,s):r(g,v,f,n,e,s);if(!(y===void 0?g===v||i(g,v,t,r,s):y)){p=!1;break}m||(m=f=="constructor")}if(p&&!m){var w=n.constructor,C=e.constructor;w!=C&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(p=!1)}return s.delete(n),s.delete(e),p}var AVe=ku(Po,"DataView");const TU=AVe;var cVe=ku(Po,"Promise");const NU=cVe;var uVe=ku(Po,"Set");const DU=uVe;var fVe=ku(Po,"WeakMap");const kU=fVe;var jL="[object Map]",dVe="[object Object]",$L="[object Promise]",qL="[object Set]",e3="[object WeakMap]",t3="[object DataView]",hVe=Du(TU),pVe=Du(zm),gVe=Du(NU),mVe=Du(DU),vVe=Du(kU),Dc=Nu;(TU&&Dc(new TU(new ArrayBuffer(1)))!=t3||zm&&Dc(new zm)!=jL||NU&&Dc(NU.resolve())!=$L||DU&&Dc(new DU)!=qL||kU&&Dc(new kU)!=e3)&&(Dc=function(n){var e=Nu(n),t=e==dVe?n.constructor:void 0,r=t?Du(t):"";if(r)switch(r){case hVe:return t3;case pVe:return jL;case gVe:return $L;case mVe:return qL;case vVe:return e3}return e});const n3=Dc;var yVe=1,r3="[object Arguments]",i3="[object Array]",Ey="[object Object]",BVe=Object.prototype,s3=BVe.hasOwnProperty;function wVe(n,e,t,r,i,s){var o=hs(n),a=hs(e),l=o?i3:n3(n),A=a?i3:n3(e);l=l==r3?Ey:l,A=A==r3?Ey:A;var c=l==Ey,u=A==Ey,f=l==A;if(f&&lC(n)){if(!lC(e))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new ba),o||RQ(n)?H5(n,e,t,r,i,s):Kke(n,e,l,t,r,i,s);if(!(t&yVe)){var d=c&&s3.call(n,"__wrapped__"),h=u&&s3.call(e,"__wrapped__");if(d||h){var p=d?n.value():n,m=h?e.value():e;return s||(s=new ba),i(p,m,t,r,s)}}return f?(s||(s=new ba),lVe(n,e,t,r,i,s)):!1}function DQ(n,e,t,r,i){return n===e?!0:n==null||e==null||!sc(n)&&!sc(e)?n!==n&&e!==e:wVe(n,e,t,r,DQ,i)}var CVe=1,bVe=2;function xVe(n,e,t,r){var i=t.length,s=i,o=!r;if(n==null)return!s;for(n=Object(n);i--;){var a=t[i];if(o&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<s;){a=t[i];var l=a[0],A=n[l],c=a[1];if(o&&a[2]){if(A===void 0&&!(l in n))return!1}else{var u=new ba;if(r)var f=r(A,c,l,n,e,u);if(!(f===void 0?DQ(c,A,CVe|bVe,r,u):f))return!1}}return!0}function z5(n){return n===n&&!io(n)}function IVe(n){for(var e=TQ(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,z5(i)]}return e}function Y5(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function FVe(n){var e=IVe(n);return e.length==1&&e[0][2]?Y5(e[0][0],e[0][1]):function(t){return t===n||xVe(t,n,e)}}var EVe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UVe=/^\w*$/;function kQ(n,e){if(hs(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Mb(n)?!0:UVe.test(n)||!EVe.test(n)||e!=null&&n in Object(e)}var SVe="Expected a function";function VQ(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(SVe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(VQ.Cache||Zl),t}VQ.Cache=Zl;var _Ve=500;function QVe(n){var e=VQ(n,function(r){return t.size===_Ve&&t.clear(),r}),t=e.cache;return e}var RVe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MVe=/\\(\\)?/g,TVe=QVe(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(RVe,function(t,r,i,s){e.push(i?s.replace(MVe,"$1"):r||t)}),e});const NVe=TVe;var DVe=1/0,o3=ic?ic.prototype:void 0,a3=o3?o3.toString:void 0;function X5(n){if(typeof n=="string")return n;if(hs(n))return J5(n,X5)+"";if(Mb(n))return a3?a3.call(n):"";var e=n+"";return e=="0"&&1/n==-DVe?"-0":e}function kVe(n){return n==null?"":X5(n)}function K5(n,e){return hs(n)?n:kQ(n,e)?[n]:NVe(kVe(n))}var VVe=1/0;function Db(n){if(typeof n=="string"||Mb(n))return n;var e=n+"";return e=="0"&&1/n==-VVe?"-0":e}function j5(n,e){e=K5(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Db(e[t++])];return t&&t==r?n:void 0}function LVe(n,e,t){var r=n==null?void 0:j5(n,e);return r===void 0?t:r}function PVe(n,e){return n!=null&&e in Object(n)}function WVe(n,e,t){e=K5(e,n);for(var r=-1,i=e.length,s=!1;++r<i;){var o=Db(e[r]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++r!=i?s:(i=n==null?0:n.length,!!i&&QQ(i)&&MQ(o,i)&&(hs(n)||aC(n)))}function OVe(n,e){return n!=null&&WVe(n,e,PVe)}var GVe=1,ZVe=2;function JVe(n,e){return kQ(n)&&z5(e)?Y5(Db(n),e):function(t){var r=LVe(t,n);return r===void 0&&r===e?OVe(t,n):DQ(e,r,GVe|ZVe)}}function HVe(n){return function(e){return e==null?void 0:e[n]}}function zVe(n){return function(e){return j5(e,n)}}function YVe(n){return kQ(n)?HVe(Db(n)):zVe(n)}function XVe(n){return typeof n=="function"?n:n==null?Rb:typeof n=="object"?hs(n)?JVe(n[0],n[1]):FVe(n):YVe(n)}function KVe(n,e){var t=-1,r=op(n)?Array(n.length):[];return W5(n,function(i,s,o){r[++t]=e(i,s,o)}),r}function Lu(n,e){var t=hs(n)?J5:KVe;return t(n,XVe(e))}var jVe=function(e){var t=e.colors,r=e.onClick,i=e.onSwatchHover,s=ut({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return z.createElement("div",{style:s.swatches},Lu(t,function(o){return z.createElement(Vu,{key:o,color:o,style:s.swatch,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),z.createElement("div",{style:s.clear}))},LQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=i==="transparent",d=function(m,g){pc(m)&&t({hex:m,source:"hex"},g)},h=ut(Vi({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:NQ(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},A),{"hide-triangle":a==="hide"});return z.createElement("div",{style:h.card,className:"block-picker "+u},z.createElement("div",{style:h.triangle}),z.createElement("div",{style:h.head},f&&z.createElement(ip,{borderRadius:"6px 6px 0 0"}),z.createElement("div",{style:h.label},i)),z.createElement("div",{style:h.body},z.createElement(jVe,{colors:s,onClick:d,onSwatchHover:r}),z.createElement(Rt,{style:{input:h.input},value:i,onChange:d})))};LQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),colors:Ne.arrayOf(Ne.string),triangle:Ne.oneOf(["top","hide"]),styles:Ne.object};LQ.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Li(LQ);var Tf={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Nf={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Df={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},kf={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Vf={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Lf={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Pf={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Wf={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Of={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},xg={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Gf={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Zf={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Jf={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Hf={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},zf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Yf={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Xf={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Kf={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},$5=function(e){var t=e.color,r=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,a=e.circleSize,l=e.circleSpacing,A=ut({default:{swatch:{width:a,height:a,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:s,active:o});return z.createElement("div",{style:A.swatch},z.createElement(Vu,{style:A.Swatch,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:A.Swatch.boxShadow+", 0 0 5px "+t}}))};$5.defaultProps={circleSize:28,circleSpacing:14};const $Ve=FQ($5);var PQ=function(e){var t=e.width,r=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,a=e.circleSize,l=e.styles,A=l===void 0?{}:l,c=e.circleSpacing,u=e.className,f=u===void 0?"":u,d=ut(Vi({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},A)),h=function(m,g){return r({hex:m,source:"hex"},g)};return z.createElement("div",{style:d.card,className:"circle-picker "+f},Lu(s,function(p){return z.createElement($Ve,{key:p,color:p,onClick:h,onSwatchHover:i,active:o===p.toLowerCase(),circleSize:a,circleSpacing:c})}))};PQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),circleSize:Ne.number,circleSpacing:Ne.number,styles:Ne.object};PQ.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Tf[500],Nf[500],Df[500],kf[500],Vf[500],Lf[500],Pf[500],Wf[500],Of[500],xg[500],Gf[500],Zf[500],Jf[500],Hf[500],zf[500],Yf[500],Xf[500],Kf[500]],styles:{}};Li(PQ);function l3(n){return n===void 0}var q5={};Object.defineProperty(q5,"__esModule",{value:!0});var A3=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qVe=me,c3=eLe(qVe);function eLe(n){return n&&n.__esModule?n:{default:n}}function tLe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Uy=24,nLe=q5.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Uy:r,s=n.height,o=s===void 0?Uy:s,a=n.style,l=a===void 0?{}:a,A=tLe(n,["fill","width","height","style"]);return c3.default.createElement("svg",A3({viewBox:"0 0 "+Uy+" "+Uy,style:A3({fill:t,width:i,height:o},l)},A),c3.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},rLe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function iLe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function oLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var ez=function(n){oLe(e,n);function e(t){iLe(this,e);var r=sLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.toggleViews=function(){r.state.view==="hex"?r.setState({view:"rgb"}):r.state.view==="rgb"?r.setState({view:"hsl"}):r.state.view==="hsl"&&(r.props.hsl.a===1?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(i,s){i.hex?pc(i.hex)&&r.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?r.props.onChange({r:i.r||r.props.rgb.r,g:i.g||r.props.rgb.g,b:i.b||r.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),r.props.onChange({h:i.h||r.props.hsl.h,s:Number(l3(i.s)?r.props.hsl.s:i.s),l:Number(l3(i.l)?r.props.hsl.l:i.l),source:"hsl"},s))},r.showHighlight=function(i){i.currentTarget.style.background="#eee"},r.hideHighlight=function(i){i.currentTarget.style.background="transparent"},t.hsl.a!==1&&t.view==="hex"?r.state={view:"rgb"}:r.state={view:t.view},r}return rLe(e,[{key:"render",value:function(){var r=this,i=ut({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=z.createElement("div",{style:i.fields,className:"flexbox-fix"},z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=z.createElement("div",{style:i.fields,className:"flexbox-fix"},z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),z.createElement("div",{style:i.alpha},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=z.createElement("div",{style:i.fields,className:"flexbox-fix"},z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),z.createElement("div",{style:i.field},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),z.createElement("div",{style:i.alpha},z.createElement(Rt,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),z.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,z.createElement("div",{style:i.toggle},z.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(a){return r.icon=a}},z.createElement(nLe,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(z.Component);ez.defaultProps={view:"hex"};var u3=function(){var e=ut({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return z.createElement("div",{style:e.picker})},aLe=function(){var e=ut({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return z.createElement("div",{style:e.picker})},WQ=function(e){var t=e.width,r=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,a=e.hsv,l=e.hex,A=e.renderers,c=e.styles,u=c===void 0?{}:c,f=e.className,d=f===void 0?"":f,h=e.defaultView,p=ut(Vi({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:i});return z.createElement("div",{style:p.picker,className:"chrome-picker "+d},z.createElement("div",{style:p.saturation},z.createElement(Tb,{style:p.Saturation,hsl:o,hsv:a,pointer:aLe,onChange:r})),z.createElement("div",{style:p.body},z.createElement("div",{style:p.controls,className:"flexbox-fix"},z.createElement("div",{style:p.color},z.createElement("div",{style:p.swatch},z.createElement("div",{style:p.active}),z.createElement(ip,{renderers:A}))),z.createElement("div",{style:p.toggles},z.createElement("div",{style:p.hue},z.createElement(sp,{style:p.Hue,hsl:o,pointer:u3,onChange:r})),z.createElement("div",{style:p.alpha},z.createElement(EQ,{style:p.Alpha,rgb:s,hsl:o,pointer:u3,renderers:A,onChange:r})))),z.createElement(ez,{rgb:s,hsl:o,hex:l,view:h,onChange:r,disableAlpha:i})))};WQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),disableAlpha:Ne.bool,styles:Ne.object,defaultView:Ne.oneOf(["hex","rgb","hsl"])};WQ.defaultProps={width:225,disableAlpha:!1,styles:{}};const lLe=Li(WQ);var ALe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.active,a=ut({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:NQ(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return z.createElement(Vu,{style:a.color,color:t,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},z.createElement("div",{style:a.dot}))},cLe=function(e){var t=e.hex,r=e.rgb,i=e.onChange,s=ut({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(l,A){l.r||l.g||l.b?i({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,source:"rgb"},A):i({hex:l.hex,source:"hex"},A)};return z.createElement("div",{style:s.fields,className:"flexbox-fix"},z.createElement("div",{style:s.active}),z.createElement(Rt,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:t,onChange:o}),z.createElement(Rt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:o}),z.createElement(Rt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:o}),z.createElement(Rt,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:o}))},OQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ut(Vi({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),f=function(h,p){h.hex?pc(h.hex)&&t({hex:h.hex,source:"hex"},p):t(h,p)};return z.createElement(_0,{style:u.Compact,styles:l},z.createElement("div",{style:u.compact,className:"compact-picker "+c},z.createElement("div",null,Lu(i,function(d){return z.createElement(ALe,{key:d,color:d,active:d.toLowerCase()===s,onClick:f,onSwatchHover:r})}),z.createElement("div",{style:u.clear})),z.createElement(cLe,{hex:s,rgb:o,onChange:f})))};OQ.propTypes={colors:Ne.arrayOf(Ne.string),styles:Ne.object};OQ.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Li(OQ);var uLe=function(e){var t=e.hover,r=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=ut({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return z.createElement("div",{style:a.swatch},z.createElement(Vu,{color:r,onClick:i,onHover:s,focusStyle:o}))};const fLe=FQ(uLe);var GQ=function(e){var t=e.width,r=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,a=e.styles,l=a===void 0?{}:a,A=e.className,c=A===void 0?"":A,u=ut(Vi({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),f=function(h,p){return i({hex:h,source:"hex"},p)};return z.createElement("div",{style:u.card,className:"github-picker "+c},z.createElement("div",{style:u.triangleShadow}),z.createElement("div",{style:u.triangle}),Lu(r,function(d){return z.createElement(fLe,{color:d,key:d,onClick:f,onSwatchHover:s})}))};GQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),colors:Ne.arrayOf(Ne.string),triangle:Ne.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Ne.object};GQ.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Li(GQ);var dLe=function(e){var t=e.direction,r=ut({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:t==="vertical"});return z.createElement("div",{style:r.picker})},hLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ZQ=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.hsl,o=e.direction,a=e.pointer,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ut(Vi({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},A)),d=function(p){return i({a:1,h:p.h,l:.5,s:1})};return z.createElement("div",{style:f.picker,className:"hue-picker "+u},z.createElement(sp,hLe({},f.hue,{hsl:s,pointer:a,onChange:d,direction:o})))};ZQ.propTypes={styles:Ne.object};ZQ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:dLe,styles:{}};Li(ZQ);var pLe=function(e){var t=e.onChange,r=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ut(Vi({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(f,d){f.hex?pc(f.hex)&&t({hex:f.hex,source:"hex"},d):(f.r||f.g||f.b)&&t({r:f.r||i.r,g:f.g||i.g,b:f.b||i.b,source:"rgb"},d)};return z.createElement(_0,{styles:o},z.createElement("div",{style:A.material,className:"material-picker "+l},z.createElement(Rt,{style:{wrap:A.HEXwrap,input:A.HEXinput,label:A.HEXlabel},label:"hex",value:r,onChange:c}),z.createElement("div",{style:A.split,className:"flexbox-fix"},z.createElement("div",{style:A.third},z.createElement(Rt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"r",value:i.r,onChange:c})),z.createElement("div",{style:A.third},z.createElement(Rt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"g",value:i.g,onChange:c})),z.createElement("div",{style:A.third},z.createElement(Rt,{style:{wrap:A.RGBwrap,input:A.RGBinput,label:A.RGBlabel},label:"b",value:i.b,onChange:c})))))};Li(pLe);var gLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsv,s=e.hex,o=ut({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(A,c){A["#"]?pc(A["#"])&&t({hex:A["#"],source:"hex"},c):A.r||A.g||A.b?t({r:A.r||r.r,g:A.g||r.g,b:A.b||r.b,source:"rgb"},c):(A.h||A.s||A.v)&&t({h:A.h||i.h,s:A.s||i.s,v:A.v||i.v,source:"hsv"},c)};return z.createElement("div",{style:o.fields},z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:a}),z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:a}),z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:a}),z.createElement("div",{style:o.divider}),z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:r.r,onChange:a}),z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:r.g,onChange:a}),z.createElement(Rt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:r.b,onChange:a}),z.createElement("div",{style:o.divider}),z.createElement(Rt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:a}),z.createElement("div",{style:o.fieldSymbols},z.createElement("div",{style:o.symbol},""),z.createElement("div",{style:o.symbol},"%"),z.createElement("div",{style:o.symbol},"%")))},mLe=function(e){var t=e.hsl,r=ut({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return z.createElement("div",{style:r.picker})},vLe=function(){var e=ut({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return z.createElement("div",{style:e.pointer},z.createElement("div",{style:e.left},z.createElement("div",{style:e.leftInside})),z.createElement("div",{style:e.right},z.createElement("div",{style:e.rightInside})))},f3=function(e){var t=e.onClick,r=e.label,i=e.children,s=e.active,o=ut({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return z.createElement("div",{style:o.button,onClick:t},r||i)},yLe=function(e){var t=e.rgb,r=e.currentColor,i=ut({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return z.createElement("div",null,z.createElement("div",{style:i.label},"new"),z.createElement("div",{style:i.swatches},z.createElement("div",{style:i.new}),z.createElement("div",{style:i.current})),z.createElement("div",{style:i.label},"current"))},BLe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function wLe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function CLe(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function bLe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var JQ=function(n){bLe(e,n);function e(t){wLe(this,e);var r=CLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.state={currentColor:t.hex},r}return BLe(e,[{key:"render",value:function(){var r=this.props,i=r.styles,s=i===void 0?{}:i,o=r.className,a=o===void 0?"":o,l=ut(Vi({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return z.createElement("div",{style:l.picker,className:"photoshop-picker "+a},z.createElement("div",{style:l.head},this.props.header),z.createElement("div",{style:l.body,className:"flexbox-fix"},z.createElement("div",{style:l.saturation},z.createElement(Tb,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:mLe,onChange:this.props.onChange})),z.createElement("div",{style:l.hue},z.createElement(sp,{direction:"vertical",hsl:this.props.hsl,pointer:vLe,onChange:this.props.onChange})),z.createElement("div",{style:l.controls},z.createElement("div",{style:l.top,className:"flexbox-fix"},z.createElement("div",{style:l.previews},z.createElement(yLe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),z.createElement("div",{style:l.actions},z.createElement(f3,{label:"OK",onClick:this.props.onAccept,active:!0}),z.createElement(f3,{label:"Cancel",onClick:this.props.onCancel}),z.createElement(gLe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(z.Component);JQ.propTypes={header:Ne.string,styles:Ne.object};JQ.defaultProps={header:"Color Picker",styles:{}};Li(JQ);var xLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,a=ut({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(c,u){c.hex?pc(c.hex)&&t({hex:c.hex,source:"hex"},u):c.r||c.g||c.b?t({r:c.r||r.r,g:c.g||r.g,b:c.b||r.b,a:r.a,source:"rgb"},u):c.a&&(c.a<0?c.a=0:c.a>100&&(c.a=100),c.a/=100,t({h:i.h,s:i.s,l:i.l,a:c.a,source:"rgb"},u))};return z.createElement("div",{style:a.fields,className:"flexbox-fix"},z.createElement("div",{style:a.double},z.createElement(Rt,{style:{input:a.input,label:a.label},label:"hex",value:s.replace("#",""),onChange:l})),z.createElement("div",{style:a.single},z.createElement(Rt,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:l,dragLabel:"true",dragMax:"255"})),z.createElement("div",{style:a.single},z.createElement(Rt,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:l,dragLabel:"true",dragMax:"255"})),z.createElement("div",{style:a.single},z.createElement(Rt,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:l,dragLabel:"true",dragMax:"255"})),z.createElement("div",{style:a.alpha},z.createElement(Rt,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:l,dragLabel:"true",dragMax:"100"})))},ILe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tz=function(e){var t=e.colors,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=ut({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),a=function(A,c){i({hex:A,source:"hex"},c)};return z.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map(function(l){var A=typeof l=="string"?{color:l}:l,c=""+A.color+(A.title||"");return z.createElement("div",{key:c,style:o.swatchWrap},z.createElement(Vu,ILe({},A,{style:o.swatch,onClick:a,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+A.color}})))}))};tz.propTypes={colors:Ne.arrayOf(Ne.oneOfType([Ne.string,Ne.shape({color:Ne.string,title:Ne.string})])).isRequired};var FLe=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},HQ=function(e){var t=e.width,r=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,a=e.onChange,l=e.onSwatchHover,A=e.disableAlpha,c=e.presetColors,u=e.renderers,f=e.styles,d=f===void 0?{}:f,h=e.className,p=h===void 0?"":h,m=ut(Vi({default:FLe({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},d),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},d),{disableAlpha:A});return z.createElement("div",{style:m.picker,className:"sketch-picker "+p},z.createElement("div",{style:m.saturation},z.createElement(Tb,{style:m.Saturation,hsl:o,hsv:s,onChange:a})),z.createElement("div",{style:m.controls,className:"flexbox-fix"},z.createElement("div",{style:m.sliders},z.createElement("div",{style:m.hue},z.createElement(sp,{style:m.Hue,hsl:o,onChange:a})),z.createElement("div",{style:m.alpha},z.createElement(EQ,{style:m.Alpha,rgb:r,hsl:o,renderers:u,onChange:a}))),z.createElement("div",{style:m.color},z.createElement(ip,null),z.createElement("div",{style:m.activeColor}))),z.createElement(xLe,{rgb:r,hsl:o,hex:i,onChange:a,disableAlpha:A}),z.createElement(tz,{colors:c,onClick:a,onSwatchHover:l}))};HQ.propTypes={disableAlpha:Ne.bool,width:Ne.oneOfType([Ne.string,Ne.number]),styles:Ne.object};HQ.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Li(HQ);var qp=function(e){var t=e.hsl,r=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,a=e.first,l=e.last,A=ut({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:a,last:l}),c=function(f){return s({h:t.h,s:.5,l:r,source:"hsl"},f)};return z.createElement("div",{style:A.swatch,onClick:c})},ELe=function(e){var t=e.onClick,r=e.hsl,i=ut({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return z.createElement("div",{style:i.swatches},z.createElement("div",{style:i.swatch},z.createElement(qp,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<s&&Math.abs(r.s-.5)<s,onClick:t,first:!0})),z.createElement("div",{style:i.swatch},z.createElement(qp,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<s&&Math.abs(r.s-.5)<s,onClick:t})),z.createElement("div",{style:i.swatch},z.createElement(qp,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<s&&Math.abs(r.s-.5)<s,onClick:t})),z.createElement("div",{style:i.swatch},z.createElement(qp,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<s&&Math.abs(r.s-.5)<s,onClick:t})),z.createElement("div",{style:i.swatch},z.createElement(qp,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<s&&Math.abs(r.s-.5)<s,onClick:t,last:!0})),z.createElement("div",{style:i.clear}))},ULe=function(){var e=ut({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return z.createElement("div",{style:e.picker})},zQ=function(e){var t=e.hsl,r=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,a=e.className,l=a===void 0?"":a,A=ut(Vi({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return z.createElement("div",{style:A.wrap||{},className:"slider-picker "+l},z.createElement("div",{style:A.hue},z.createElement(sp,{style:A.Hue,hsl:t,pointer:i,onChange:r})),z.createElement("div",{style:A.swatches},z.createElement(ELe,{hsl:t,onClick:r})))};zQ.propTypes={styles:Ne.object};zQ.defaultProps={pointer:ULe,styles:{}};Li(zQ);var nz={};Object.defineProperty(nz,"__esModule",{value:!0});var d3=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},SLe=me,h3=_Le(SLe);function _Le(n){return n&&n.__esModule?n:{default:n}}function QLe(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}var Sy=24,RLe=nz.default=function(n){var e=n.fill,t=e===void 0?"currentColor":e,r=n.width,i=r===void 0?Sy:r,s=n.height,o=s===void 0?Sy:s,a=n.style,l=a===void 0?{}:a,A=QLe(n,["fill","width","height","style"]);return h3.default.createElement("svg",d3({viewBox:"0 0 "+Sy+" "+Sy,style:d3({fill:t,width:i,height:o},l)},A),h3.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},MLe=function(e){var t=e.color,r=e.onClick,i=r===void 0?function(){}:r,s=e.onSwatchHover,o=e.first,a=e.last,l=e.active,A=ut({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:NQ(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:a,active:l,"color-#FFFFFF":t==="#FFFFFF",transparent:t==="transparent"});return z.createElement(Vu,{color:t,style:A.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},z.createElement("div",{style:A.check},z.createElement(RLe,null)))},TLe=function(e){var t=e.onClick,r=e.onSwatchHover,i=e.group,s=e.active,o=ut({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return z.createElement("div",{style:o.group},Lu(i,function(a,l){return z.createElement(MLe,{key:a,color:a,active:a.toLowerCase()===s,first:l===0,last:l===i.length-1,onClick:t,onSwatchHover:r})}))},YQ=function(e){var t=e.width,r=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,a=e.hex,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ut(Vi({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},A)),d=function(p,m){return i({hex:p,source:"hex"},m)};return z.createElement("div",{style:f.picker,className:"swatches-picker "+u},z.createElement(_0,null,z.createElement("div",{style:f.overflow},z.createElement("div",{style:f.body},Lu(o,function(h){return z.createElement(TLe,{key:h.toString(),group:h,active:a,onClick:d,onSwatchHover:s})}),z.createElement("div",{style:f.clear})))))};YQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),height:Ne.oneOfType([Ne.string,Ne.number]),colors:Ne.arrayOf(Ne.arrayOf(Ne.string)),styles:Ne.object};YQ.defaultProps={width:320,height:240,colors:[[Tf[900],Tf[700],Tf[500],Tf[300],Tf[100]],[Nf[900],Nf[700],Nf[500],Nf[300],Nf[100]],[Df[900],Df[700],Df[500],Df[300],Df[100]],[kf[900],kf[700],kf[500],kf[300],kf[100]],[Vf[900],Vf[700],Vf[500],Vf[300],Vf[100]],[Lf[900],Lf[700],Lf[500],Lf[300],Lf[100]],[Pf[900],Pf[700],Pf[500],Pf[300],Pf[100]],[Wf[900],Wf[700],Wf[500],Wf[300],Wf[100]],[Of[900],Of[700],Of[500],Of[300],Of[100]],["#194D33",xg[700],xg[500],xg[300],xg[100]],[Gf[900],Gf[700],Gf[500],Gf[300],Gf[100]],[Zf[900],Zf[700],Zf[500],Zf[300],Zf[100]],[Jf[900],Jf[700],Jf[500],Jf[300],Jf[100]],[Hf[900],Hf[700],Hf[500],Hf[300],Hf[100]],[zf[900],zf[700],zf[500],zf[300],zf[100]],[Yf[900],Yf[700],Yf[500],Yf[300],Yf[100]],[Xf[900],Xf[700],Xf[500],Xf[300],Xf[100]],[Kf[900],Kf[700],Kf[500],Kf[300],Kf[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Li(YQ);var XQ=function(e){var t=e.onChange,r=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,a=e.triangle,l=e.styles,A=l===void 0?{}:l,c=e.className,u=c===void 0?"":c,f=ut(Vi({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},A),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),d=function(p,m){pc(p)&&t({hex:p,source:"hex"},m)};return z.createElement("div",{style:f.card,className:"twitter-picker "+u},z.createElement("div",{style:f.triangleShadow}),z.createElement("div",{style:f.triangle}),z.createElement("div",{style:f.body},Lu(s,function(h,p){return z.createElement(Vu,{key:p,color:h,hex:h,style:f.swatch,onClick:d,onHover:r,focusStyle:{boxShadow:"0 0 4px "+h}})}),z.createElement("div",{style:f.hash},"#"),z.createElement(Rt,{label:null,style:{input:f.input},value:i.replace("#",""),onChange:d}),z.createElement("div",{style:f.clear})))};XQ.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),triangle:Ne.oneOf(["hide","top-left","top-right"]),colors:Ne.arrayOf(Ne.string),styles:Ne.object};XQ.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Li(XQ);var KQ=function(e){var t=ut({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return z.createElement("div",{style:t.picker})};KQ.propTypes={hsl:Ne.shape({h:Ne.number,s:Ne.number,l:Ne.number,a:Ne.number})};KQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var jQ=function(e){var t=ut({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return z.createElement("div",{style:t.picker})};jQ.propTypes={hsl:Ne.shape({h:Ne.number,s:Ne.number,l:Ne.number,a:Ne.number})};jQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var NLe=function(e){var t=e.onChange,r=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,a=function(d,h){if(d.hex)pc(d.hex)&&t({hex:d.hex,source:"hex"},h);else if(d.rgb){var p=d.rgb.split(",");V1(d.rgb,"rgb")&&t({r:p[0],g:p[1],b:p[2],a:1,source:"rgb"},h)}else if(d.hsv){var m=d.hsv.split(",");V1(d.hsv,"hsv")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("",""),m[1]==1?m[1]=.01:m[2]==1&&(m[2]=.01),t({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsv"},h))}else if(d.hsl){var g=d.hsl.split(",");V1(d.hsl,"hsl")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("",""),u[1]==1?u[1]=.01:u[2]==1&&(u[2]=.01),t({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsl"},h))}},l=ut({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),A=r.r+", "+r.g+", "+r.b,c=Math.round(i.h)+", "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",u=Math.round(o.h)+", "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return z.createElement("div",{style:l.wrap,className:"flexbox-fix"},z.createElement("div",{style:l.fields},z.createElement("div",{style:l.double},z.createElement(Rt,{style:{input:l.input,label:l.label},label:"hex",value:s,onChange:a})),z.createElement("div",{style:l.column},z.createElement("div",{style:l.single},z.createElement(Rt,{style:{input:l.input2,label:l.label2},label:"rgb",value:A,onChange:a})),z.createElement("div",{style:l.single},z.createElement(Rt,{style:{input:l.input2,label:l.label2},label:"hsv",value:u,onChange:a})),z.createElement("div",{style:l.single},z.createElement(Rt,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:a})))))},$Q=function(e){var t=e.width,r=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,a=e.hex,l=e.header,A=e.styles,c=A===void 0?{}:A,u=e.className,f=u===void 0?"":u,d=ut(Vi({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return z.createElement("div",{style:d.picker,className:"google-picker "+f},z.createElement("div",{style:d.head},l),z.createElement("div",{style:d.swatch}),z.createElement("div",{style:d.saturation},z.createElement(Tb,{hsl:s,hsv:o,pointer:KQ,onChange:r})),z.createElement("div",{style:d.body},z.createElement("div",{style:d.controls,className:"flexbox-fix"},z.createElement("div",{style:d.hue},z.createElement(sp,{style:d.Hue,hsl:s,radius:"4px",pointer:jQ,onChange:r}))),z.createElement(NLe,{rgb:i,hsl:s,hex:a,hsv:o,onChange:r})))};$Q.propTypes={width:Ne.oneOfType([Ne.string,Ne.number]),styles:Ne.object,header:Ne.string};$Q.defaultProps={width:652,styles:{},header:"Color picker"};Li($Q);function DLe(){const{isLoading:n,setViewMode:e,setIsLoading:t}=z.useContext(gi),{toggleDebugMode:r,characterManager:i,animationManager:s,moveCamera:o,debugMode:a}=z.useContext(qr),{playSound:l}=z.useContext(ys),{isMute:A}=z.useContext(vs),{t:c}=me.useContext(Bs),u=()=>{!A&&l("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),e(st.CREATE),r(!1)},[f,d]=z.useState(null),[h,p]=z.useState(null),[m,g]=z.useState(""),[v,y]=z.useState(null),[w,C]=z.useState(null),[b,F]=z.useState(""),[x,S]=z.useState(!1),[R,Z]=z.useState({background:"#ffffff"}),Y=()=>{!A&&l("backNextButton"),e(st.SAVE),r(!1)},Q=()=>{t(!0),d(null),i.loadRandomTraits().then(()=>{console.log("success"),m!=""&&y(i.getCurrentTraitData(m)),t(!1)}).catch(ne=>{t(!1),console.error("Error loading random traits:",ne.message)})},B=ne=>{Z({background:ne.hex})},E=ne=>{Z({background:ne.hex}),i.setTraitColor(m,ne.hex)},M=()=>{r()},D=async ne=>{const ie=nc(ne.name),ue=URL.createObjectURL(ne);await s.loadAnimation(ue,!0,"",ie),F(s.getCurrentAnimationName())},T=ne=>{if(S(!1),m!=""){t(!0);const ie=URL.createObjectURL(ne);i.loadCustomTexture(m,ie).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},V=ne=>{if(S(!1),m!=""){t(!0);const ie=URL.createObjectURL(ne);i.loadCustomTrait(m,ie).then(()=>{t(!1)})}else console.warn("Please select a group trait first.")},G=ne=>{S(!1),t(!0),i.loadTrait(ne.traitGroup.trait,ne.id).then(()=>{t(!1),y(ne)})},P=ne=>{S(!1),i.removeTrait(ne),y(null)},U=ne=>{S(!1),t(!0),i.loadRandomTrait(ne).then(()=>{t(!1),y(i.getCurrentTraitData(ne))})},H=ne=>{S(!1);const ie=Array.from(ne),ue=[],j=se=>new Promise((ce,Be)=>{var ge;if(se&&se.name.toLowerCase().endsWith(".json")){const Fe=new FileReader,nt=`${(ge=i.manifestData)==null?void 0:ge.getAssetsDirectory()}/anata/_thumbnails/t_${se.name.split("_")[0]}.jpg`;console.log(nt),Fe.onload=function(We){try{const Te=JSON.parse(We.target.result);Te.thumb=nt,ue.push(Te),ce()}catch(Te){console.error("Error parsing the JSON file:",Te),Be(Te)}},Fe.readAsText(se)}});Promise.all(ie.map(j)).then(()=>{ue.length>0&&(d(ue),t(!0),i.loadTraitsFromNFTObject(ue[0]).then(()=>{t(!1)}))}).catch(se=>{console.error("Error processing files:",se)})},oe=async ne=>{const ie=ne[0];ie&&ie.name.toLowerCase().endsWith(".fbx")&&D(ie),ie&&(ie.name.toLowerCase().endsWith(".png")||ie.name.toLowerCase().endsWith(".jpg"))&&T(ie),ie&&ie.name.toLowerCase().endsWith(".vrm")&&V(ie),ie&&ie.name.toLowerCase().endsWith(".json")&&H(ne)},k=ne=>{!A&&l("optionClick"),S(!1),m!==ne.trait?(p(i.getTraits(ne.trait)),g(ne.trait),y(i.getCurrentTraitData(ne.trait)),C(i.getCurrentTraitVRM(ne.trait)),o({targetY:ne.cameraTarget.height,distance:ne.cameraTarget.distance})):(p(null),g(""),y(null),o({targetY:.8,distance:3.2}))},K=()=>{S(!1);var ne=document.createElement("input");ne.type="file",ne.accept=".vrm",ne.onchange=ie=>{var ue=ie.target.files[0];if(ue.name.endsWith(".vrm")){const j=URL.createObjectURL(ue);t(!0),i.loadCustomTrait(m,j).then(()=>{t(!1)})}},ne.click()};return W.jsxs("div",{className:yn.container,children:[W.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:W.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),W.jsx("div",{className:"sectionTitle",children:c("pageTitles.chooseAppearance")}),W.jsx(B0,{onFilesDrop:oe}),W.jsxs("div",{className:yn.sideMenu,children:[W.jsx(bh,{title:"Appearance",left:20}),W.jsx("div",{className:yn.bottomLine}),W.jsx("div",{className:yn.scrollContainer,children:W.jsx("div",{className:yn["editor-container"],children:i.getGroupTraits().map((ne,ie)=>W.jsxs("div",{className:yn.editorButton,onClick:()=>{k(ne)},children:[W.jsx(Iy,{size:56,icon:ne.fullIconSvg,rarity:m!==ne.trait?"none":"mythic"}),W.jsx("div",{className:yn.editorText,children:ne.name})]},"options_"+ie))})})]}),!!h&&W.jsxs("div",{className:yn.selectorContainerPos,children:[W.jsx(bh,{title:m,width:130,left:20}),v&&W.jsx("div",{className:yn.selectorColorPickerButton,onClick:()=>{S(!x)},children:W.jsx("img",{className:yn.selectorColorPickerImg,src:Jwe})}),!!x&&W.jsx("div",{draggable:!1,className:yn.selectorColorPickerUI,children:W.jsx(lLe,{draggable:!1,width:"200px",color:R.background,onChange:B,onChangeComplete:E})}),W.jsx("div",{className:yn.bottomLine}),W.jsx("div",{className:yn.scrollContainerOptions,children:W.jsxs("div",{className:yn["selector-container"],children:[W.jsx("div",{className:`${yn.selectorButton}`,onClick:()=>{U(m)},children:W.jsx(Iy,{size:56,icon:Zwe,rarity:"none"})},"randomize-trait"),i.isTraitGroupRequired(m)?W.jsx(W.Fragment,{}):W.jsx("div",{className:`${yn.selectorButton}`,icon:MV,onClick:()=>{P(m)},children:W.jsx(Iy,{size:56,icon:MV,rarity:v==null?"mythic":"none"})},"no-trait"),h.map(ne=>{let ie=ne.id===(v==null?void 0:v.id);return W.jsx("div",{className:`${yn.selectorButton}`,onClick:()=>{G(ne)},children:W.jsx(Iy,{size:56,icon:ne.fullThumbnail,rarity:ie?"mythic":"none"})},ne.id)})]})}),W.jsx("div",{className:yn.uploadContainer,children:W.jsx("div",{className:yn.uploadButton,onClick:K,children:W.jsx("div",{children:"Upload "})})})]}),W.jsx(aQ,{jsonSelectionArray:f}),W.jsx(ywe,{selectedTrait:v,selectedVRM:w,animationName:b,setAnimationName:F}),W.jsx(Awe,{loadedAnimationName:b,randomize:Q}),W.jsxs("div",{className:yn.buttonContainer,children:[W.jsx(Zt,{theme:"light",text:c("callToAction.back"),size:14,className:yn.buttonLeft,onClick:u}),i.canDownload()&&W.jsx(Zt,{theme:"light",text:c("callToAction.next"),size:14,className:yn.buttonRight,onClick:Y}),W.jsx(Zt,{theme:"light",text:c("callToAction.randomize"),size:14,className:yn.buttonCenter,onClick:Q}),W.jsx(Zt,{theme:"light",text:a?"normal":"debug",size:14,className:yn.buttonCenter,onClick:M})]})]})}const kLe="_InformationContainerPos_rgqwy_1",VLe="_traitInfoTitle_rgqwy_13",LLe="_traitInfoText_rgqwy_21",PLe="_flexSelect_rgqwy_30",WLe="_scrollContainer_rgqwy_65",OLe="_checked_rgqwy_90",GLe="_checkmark_rgqwy_94",ZLe="_checkboxHolder_rgqwy_107",JLe="_buttonContainer_rgqwy_114",HLe="_buttonLeft_rgqwy_123",zLe="_buttonRight_rgqwy_127",YLe="_buttonCenter_rgqwy_131",Ur={InformationContainerPos:kLe,traitInfoTitle:VLe,traitInfoText:LLe,flexSelect:PLe,"arrow-button":"_arrow-button_rgqwy_37","left-button":"_left-button_rgqwy_51","right-button":"_right-button_rgqwy_58",scrollContainer:WLe,"custom-checkbox":"_custom-checkbox_rgqwy_76","checkbox-container":"_checkbox-container_rgqwy_81",checked:OLe,checkmark:GLe,checkboxHolder:ZLe,buttonContainer:JLe,buttonLeft:HLe,buttonRight:zLe,buttonCenter:YLe},XLe="_InformationContainerPos_1cryw_2",KLe="_scrollContainer_1cryw_16",jLe="_traitInfoTitle_1cryw_28",$Le="_traitInfoText_1cryw_38",qLe="_flexSelect_1cryw_66",e3e="_checked_1cryw_123",t3e="_checkmark_1cryw_127",n3e="_checkboxHolder_1cryw_140",yi={InformationContainerPos:XLe,scrollContainer:KLe,traitInfoTitle:jLe,traitInfoText:$Le,"input-box":"_input-box_1cryw_47",flexSelect:qLe,"arrow-button":"_arrow-button_1cryw_74","left-button":"_left-button_1cryw_90","right-button":"_right-button_1cryw_97","anim-button":"_anim-button_1cryw_104","custom-checkbox":"_custom-checkbox_1cryw_109","checkbox-container":"_checkbox-container_1cryw_114",checked:e3e,checkmark:t3e,checkboxHolder:n3e};function qQ({model:n}){const[e,t]=me.useState(0),[r,i]=me.useState(0),[s,o]=me.useState(0),[a,l]=me.useState(0),[A,c]=me.useState(0),[u,f]=me.useState(0),[d,h]=me.useState(0),[p,m]=me.useState(0);return me.useEffect(()=>{if(n!=null){const g=wh(n,"Mesh"),v=wh(n,"SkinnedMesh");t(g.length),i(v.length);const y=g.concat(v),{stdMats:w,stdCutoutpMats:C,stdTranspMats:b,mToonMats:F,mToonCutoutMats:x,mToonTranspMats:S}=Hde(y);o(w.length),l(b.length),c(C.length),f(F.length),h(S.length),m(x.length)}},[n]),n!=null?W.jsx("div",{children:W.jsxs("div",{className:yi.InformationContainerPos,children:[W.jsx(bh,{title:"Model Information",width:180,right:20}),W.jsxs("div",{className:yi.scrollContainer,children:[W.jsx("div",{className:yi.traitInfoTitle,children:"Meshes:"}),W.jsx("div",{className:yi.traitInfoText,children:e}),W.jsx("div",{className:yi.traitInfoTitle,children:"SkinnedMeshes:"}),W.jsx("div",{className:yi.traitInfoText,children:r}),W.jsx("div",{className:yi.traitInfoTitle,children:"Standard Material Count:"}),W.jsxs("div",{className:yi.traitInfoText,children:["opaque: ",s]}),W.jsxs("div",{className:yi.traitInfoText,children:["cutout: ",A]}),W.jsxs("div",{className:yi.traitInfoText,children:["transparent: ",a]}),W.jsx("div",{className:yi.traitInfoTitle,children:"MToon Material Count:"}),W.jsxs("div",{className:yi.traitInfoText,children:["opaque: ",u]}),W.jsxs("div",{className:yi.traitInfoText,children:["cutout: ",p]}),W.jsxs("div",{className:yi.traitInfoText,children:["transparent: ",d]})]})]})}):W.jsx(W.Fragment,{})}function r3e(){const{isLoading:n,setViewMode:e,setIsLoading:t}=z.useContext(gi),{characterManager:r,animationManager:i}=z.useContext(qr),[s,o]=me.useState(null),[a,l]=me.useState(""),{playSound:A}=z.useContext(ys),{isMute:c}=z.useContext(vs),[u,f]=z.useState(null),d=()=>{!c&&A("backNextButton"),r.removeCurrentCharacter(),r.removeCurrentManifest(),e(st.LANDING)},h=()=>{const b=at.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:wn(at.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:wn(at.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:wn(at.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:wn(at.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:b===0||b==2,exportMtoonAtlas:b===1||b==2,ktxCompression:at.merge_options_ktx_compression||!1}},p=b=>{r.loadTraitsFromNFTObject(u[b]).then(()=>{r.downloadVRM(u[b].name,h()).then(()=>{b<u.length-1?p(b+1):t(!1)})})},m=()=>{t(!0),p(0)},{t:g}=me.useContext(Bs),v=async b=>{if(r.getCurrentOptimizerCharacterModel()){const x=nc(b.name),S=URL.createObjectURL(b);await i.loadAnimation(S,!0,"",x),i.addVRM(r.getCurrentOptimizerCharacterModel()),URL.revokeObjectURL(S)}else console.warn("Please load a vrm model to test animations.")},y=async b=>{const F=URL.createObjectURL(b);await r.loadOptimizerCharacter(F),URL.revokeObjectURL(F);const x=nc(b.name);l(x),o(r.getCurrentCharacterModel())},w=b=>{const F=Array.from(b),x=[],S=R=>new Promise((Z,Y)=>{var Q;if(R&&R.name.toLowerCase().endsWith(".json")){const B=new FileReader,E=`${(Q=r.manifestData)==null?void 0:Q.getAssetsDirectory()}/anata/_thumbnails/t_${R.name.split("_")[0]}.jpg`;B.onload=function(M){try{const D=JSON.parse(M.target.result);D.thumb=E,x.push(D),Z()}catch(D){console.error("Error parsing the JSON file:",D),Y(D)}},B.readAsText(R)}});Promise.all(F.map(S)).then(()=>{x.length>0&&(f(x),t(!0),r.loadTraitsFromNFTObject(x[0]).then(()=>{t(!1)}))}).catch(R=>{console.error("Error processing files:",R)})},C=async b=>{const F=b[0];console.log("anim"),F&&F.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),v(F)),F&&F.name.toLowerCase().endsWith(".vrm")&&y(F),F&&F.name.toLowerCase().endsWith(".json")&&w(b)};return W.jsxs("div",{className:Ur.container,children:[W.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:W.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),W.jsx("div",{className:"sectionTitle",children:"Batch Download"}),W.jsx(B0,{onFilesDrop:C}),W.jsx(mb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),W.jsx(qQ,{model:s}),W.jsx(aQ,{jsonSelectionArray:u}),W.jsxs("div",{className:Ur.buttonContainer,children:[W.jsx(Zt,{theme:"light",text:g("callToAction.back"),size:14,className:Ur.buttonLeft,onClick:d}),(u==null?void 0:u.length)==1&&W.jsx(Zt,{theme:"light",text:"Download",size:14,className:Ur.buttonRight,onClick:m}),(u==null?void 0:u.length)>1&&W.jsx(Zt,{theme:"light",text:"Download All",size:14,className:Ur.buttonRight,onClick:m})]})]})}function i3e(){const{isLoading:n,setViewMode:e}=z.useContext(gi),{characterManager:t,animationManager:r}=z.useContext(qr),[i,s]=me.useState(null),[o,a]=me.useState(""),{playSound:l}=z.useContext(ys),{isMute:A}=z.useContext(vs),c=()=>{!A&&l("backNextButton"),t.removeCurrentCharacter(),t.removeCurrentManifest(),e(st.LANDING)},u=()=>{const g=at.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:wn(at.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:wn(at.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:wn(at.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:wn(at.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:g===0||g==2,exportMtoonAtlas:g===1||g==2,ktxCompression:at.merge_options_ktx_compression||!1}},f=()=>{t.downloadVRM(o+"_merged",u())},{t:d}=me.useContext(Bs),h=async g=>{if(t.getCurrentOptimizerCharacterModel()){const y=nc(g.name),w=URL.createObjectURL(g);await r.loadAnimation(w,!0,"",y),r.addVRM(t.getCurrentOptimizerCharacterModel()),URL.revokeObjectURL(w)}else console.warn("Please load a vrm model to test animations.")},p=async g=>{const v=URL.createObjectURL(g);await t.loadOptimizerCharacter(v),URL.revokeObjectURL(v);const y=nc(g.name);a(y),s(t.getCurrentCharacterModel())},m=async g=>{const v=g[0];console.log("anim"),v&&v.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),h(v)),v&&v.name.toLowerCase().endsWith(".vrm")&&p(v)};return W.jsxs("div",{className:Ur.container,children:[W.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:W.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),W.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),W.jsx(B0,{onFilesDrop:m}),W.jsx(mb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Optimizer Options"}),W.jsx(qQ,{model:i}),W.jsxs("div",{className:Ur.buttonContainer,children:[W.jsx(Zt,{theme:"light",text:d("callToAction.back"),size:14,className:Ur.buttonLeft,onClick:c}),i!=""&&W.jsx(Zt,{theme:"light",text:"Download",size:14,className:Ur.buttonRight,onClick:f})]})]})}const s3e="_languageSwitchWrap_83v6a_1",o3e={languageSwitchWrap:s3e},p3={en:{nativeName:"English"},ru:{nativeName:""},zh:{nativeName:""}};function a3e(){const{t:n,i18n:e}=zH();return W.jsx("div",{className:o3e.languageSwitchWrap,children:W.jsx("select",{onChange:t=>e.changeLanguage(t.target.value),value:e.resolvedLanguage,children:Object.keys(p3).map(t=>W.jsx("option",{value:t,children:p3[t].nativeName},t))})})}function l3e(){const{isLoading:n,setViewMode:e,setIsLoading:t}=z.useContext(gi),{characterManager:r,animationManager:i,toggleDebugMode:s,debugMode:o}=z.useContext(qr),[a,l]=me.useState(null),[A,c]=me.useState(""),{playSound:u}=z.useContext(ys),{isMute:f}=z.useContext(vs);z.useState(null);const[d,h]=z.useState(null),p=()=>{!f&&u("backNextButton"),r.removeCurrentCharacter(),r.removeCurrentManifest(),e(st.LANDING)},m=()=>{const R=at.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:wn(at.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:wn(at.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:wn(at.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:wn(at.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:R===0||R==2,exportMtoonAtlas:R===1||R==2,ktxCompression:at.merge_options_ktx_compression||!1}},g=async(R,Z=!1)=>{await r.setManifest(d[R]);const Y=d[R].manifestName;t(!0),r.loadInitialTraits().then(()=>{r.savePortraitScreenshot(Y,512,1024,1.5,-.1),Z?R<d.length-1?(console.log("downloaded "+Y),g(R+1,Z)):t(!1):r.downloadVRM(Y,m()).then(()=>{R<d.length-1?(console.log("downloaded "+Y),g(R+1)):t(!1)})})},v=()=>{t(!0),g(0)},y=()=>{t(!0),g(0,!0)},{t:w}=me.useContext(Bs),C=async R=>{if(r.getCurrentOptimizerCharacterModel()){const Y=nc(R.name),Q=URL.createObjectURL(R);await i.loadAnimation(Q,!0,"",Y),i.addVRM(r.getCurrentOptimizerCharacterModel()),URL.revokeObjectURL(Q)}else console.warn("Please load a vrm model to test animations.")},b=async R=>{const Z=URL.createObjectURL(R);await r.loadOptimizerCharacter(Z),URL.revokeObjectURL(Z);const Y=nc(R.name);c(Y),l(r.getCurrentCharacterModel())},F=R=>{const Z=Array.from(R),Y=[],Q=B=>new Promise((E,M)=>{if(B&&B.name.toLowerCase().endsWith(".json")){const D=new FileReader,T=B.name.replace(/\.[^/.]+$/,"");D.onload=function(V){try{const G=JSON.parse(V.target.result),P=G.thumbnail;G.manifestName=T,Y.push(G),E()}catch(G){console.error("Error parsing the JSON file:",G),M(G)}},D.readAsText(B)}});Promise.all(Z.map(Q)).then(()=>{Y.length>0&&(h(Y),r.setManifest(Y[0]),t(!0),r.loadInitialTraits().then(()=>{t(!1)}))}).catch(B=>{console.error("Error processing files:",B)})},x=async R=>{const Z=R[0];Z&&Z.name.toLowerCase().endsWith(".fbx")&&C(Z),Z&&Z.name.toLowerCase().endsWith(".vrm")&&b(Z),Z&&Z.name.toLowerCase().endsWith(".json")&&F(R)},S=()=>{s()};return W.jsxs("div",{className:Ur.container,children:[W.jsx("div",{className:`loadingIndicator ${n?"active":""}`,children:W.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),W.jsx("div",{className:"sectionTitle",children:"NFT Characters"}),W.jsx(B0,{onFilesDrop:x}),W.jsx(mb,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),W.jsx(qQ,{model:a}),W.jsx(aQ,{jsonSelectionArray:d,byManifest:!0}),W.jsxs("div",{className:Ur.buttonContainer,children:[W.jsx(Zt,{theme:"light",text:w("callToAction.back"),size:14,className:Ur.buttonLeft,onClick:p}),W.jsx(Zt,{theme:"light",text:o?"normal":"debug",size:14,className:Ur.buttonCenter,onClick:S}),(d==null?void 0:d.length)==1&&W.jsx(Zt,{theme:"light",text:"Download",size:14,className:Ur.buttonRight,onClick:v}),(d==null?void 0:d.length)>1&&W.jsx(Zt,{theme:"light",text:"Download All",size:14,className:Ur.buttonRight,onClick:v}),(d==null?void 0:d.length)==1&&W.jsx(Zt,{theme:"light",text:"Get Image",size:14,className:Ur.buttonRight,onClick:y}),(d==null?void 0:d.length)>1&&W.jsx(Zt,{theme:"light",text:"Get All Images",size:14,className:Ur.buttonRight,onClick:y})]})]})}function A3e(){const{t:n}=me.useContext(Bs),{setViewMode:e,setIsLoading:t,isLoading:r}=z.useContext(gi),{playSound:i}=z.useContext(ys),{isMute:s}=z.useContext(vs),{manifest:o,characterManager:a}=z.useContext(qr);me.useState([]);const[l,A]=me.useState([]);me.useEffect(()=>{c()},[]);const c=async()=>{const p=await oQ();oBe(p,"the-anata-nft").then(m=>{A(m.nfts),console.log(m.nfts)})},u=()=>{e(st.LANDING),!s&&i("backNextButton")},f=async p=>{t(!0),a.loadManifest(o[p].manifest).then(()=>{e(st.APPEARANCE),a.loadInitialTraits().then(()=>{t(!1)})}),!s&&i("classSelect")},d=()=>{console.log("ttt"),a.loadManifest(o[0].manifest).then(()=>{a.loadAppendManifest(o[1].manifest,!0).then(()=>{console.log(a.manifestData)})})},h=()=>{!s&&i("classMouseOver")};return W.jsxs("div",{className:`${rt.container} horizontalScroll`,children:[W.jsx("div",{className:"sectionTitle",children:n("pageTitles.chooseClass")}),W.jsx("div",{className:rt.vrmOptimizerButton}),W.jsx("div",{className:rt.topLine}),W.jsx("div",{className:rt.classContainer,children:l.map((p,m)=>W.jsxs("div",{className:rt.class,onClick:()=>f(m),onMouseOver:()=>h(),children:[W.jsx("div",{className:rt.classFrame,style:{backgroundImage:`url(${p.image_url})`},children:W.jsx("div",{className:rt.frameContainer,children:W.jsx("img",{src:"./assets/backgrounds/class-frame.svg",className:rt.frame})})}),W.jsx("div",{className:rt.name,children:p.name})]},m))}),W.jsx("div",{className:rt.bottomLine}),W.jsxs("div",{className:rt.buttonContainer,children:[W.jsx(Zt,{theme:"light",text:n("callToAction.back"),size:14,className:rt.buttonLeft,onClick:u}),W.jsx(Zt,{theme:"light",text:"test",size:14,className:rt.buttonLeft,onClick:d})]})]})}const c3e="https://beta.anata.dev/character-assets./manifest.json";let P1;const W1=new X,_y=new X;let O1,G1;const u3e=1.4,f3e=new X(0,1.25,0),rz=new X(-.9786403788721187,1.4036900759197288,.9892635490125085),d3e=rz.length(),h3e=.35,g3=6,m3=new X(0,.8,0),iz=new X(-2.2367993753934425,1.1512971720174363,2.2612065299409223),p3e=iz.length(),g3e=.5,Ef=new X,Gi=new Pt,m3e=new Pt,v3e=new X(1,0,0),y3e=new X(0,1,0);async function B3e(n){return await(await fetch(n)).json()}async function w3e(){const n=await B3e(c3e),e=new Zge;return{initialManifest:n,effectManager:e}}const C3e=()=>{let n,e;const r=w3e().then(i=>{n="success",e=i},i=>{n="error",e=i});return{read(){if(n==="error")throw e;if(n==="success")return e;throw r}}},b3e=C3e();function x3e(){const{initialManifest:n,effectManager:e}=b3e.read(),[t,r]=me.useState(!1),{camera:i,controls:s,scene:o,moveCamera:a,setManifest:l,lookAtManager:A,showEnvironmentModels:c}=me.useContext(qr),{viewMode:u}=me.useContext(gi);e.camera=i,e.scene=o;const f=()=>{if(e.camera){if([st.BIO,st.CHAT].includes(u)){u===st.CHAT?(P1=u3e,W1.copy(f3e),_y.copy(rz),O1=d3e,G1=h3e):(P1=g3,W1.copy(m3),_y.copy(iz),O1=p3e,G1=g3e),Gi.set(0,0,O1,1).applyMatrix4(e.camera.projectionMatrix),Gi.x/=Gi.w,Gi.y/=Gi.w,Gi.z/=Gi.w;const b=m3e.set(G1*Gi.w,Gi.y*Gi.w,Gi.z*Gi.w,Gi.w).applyMatrix4(e.camera.projectionMatrixInverse).x,F=Ef.set(_y.x,0,_y.z).angleTo(v3e);Ef.set(b,0,0).applyAxisAngle(y3e,F),Ef.add(W1),a({targetX:Ef.x,targetY:Ef.y,targetZ:Ef.z,distance:P1})}else a({targetX:0,targetY:m3.y,targetZ:0,distance:g3});s&&([st.APPEARANCE,st.SAVE,st.OPTIMIZER,st.BATCHDOWNLOAD,st.BATCHMANIFEST].includes(u)?s.enabled=!0:s.enabled=!1)}},[d,h]=me.useState(!1),[p,m]=me.useState(""),[g,v]=me.useState([]),y=(b,F)=>{m(b),h(!0),v([F])},w={[st.LANDING]:W.jsx(MBe,{}),[st.APPEARANCE]:W.jsx(DLe,{confirmDialog:y}),[st.OPTIMIZER]:W.jsx(i3e,{}),[st.CREATE]:W.jsx(SBe,{}),[st.WALLET]:W.jsx(A3e,{}),[st.CLAIM]:W.jsx(_Be,{}),[st.BATCHMANIFEST]:W.jsx(l3e,{}),[st.BATCHDOWNLOAD]:W.jsx(r3e,{}),[st.LOAD]:W.jsx(Wye,{}),[st.MINT]:W.jsx(cBe,{}),[st.SAVE]:W.jsx(jve,{}),[st.CHAT]:W.jsx(Uve,{})};let C=0;return me.useEffect(()=>{const b=F=>{const x=new Date().getTime(),S=x-C;S<300&&S>10&&F.target.id=="editor-scene"&&r(!t),C=x};return window.addEventListener("touchend",b),window.addEventListener("click",b),()=>{window.removeEventListener("touchend",b),window.removeEventListener("click",b)}},[t]),me.useEffect(()=>(f(),[st.BIO,st.MINT,st.CHAT].includes(u)?A.enabled=!1:A.enabled=!0,[st.LANDING,st.CREATE,st.CLAIM,st.LOAD,st.CLAIM,st.CLAIM].includes(u)?c(!1):c(!0),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[u]),me.useEffect(()=>{l(n)},[n]),me.useContext(Bs),W.jsxs(me.Fragment,{children:[W.jsx("div",{className:"generalTitle",children:"Character Studio"}),W.jsx(a3e,{}),W.jsx(Ame,{confirmDialogText:p,confirmDialogCallback:g,confirmDialogWindow:d,setConfirmDialogWindow:h}),W.jsx(gme,{}),w[u]]})}const I3e=n=>{const e=new qU(n);return e.pollingInterval=12e3,e};eF.createRoot(document.getElementById("root")).render(W.jsx(z.StrictMode,{children:W.jsx(Y6,{getLibrary:I3e,children:W.jsx(ij,{children:W.jsx(Cge,{children:W.jsx(nj,{children:W.jsx(tpe,{children:W.jsx(qhe,{children:W.jsx(cpe,{children:W.jsx(me.Suspense,{children:W.jsx(x3e,{})})})})})})})})})}));export{jf as c,Cu as g};
